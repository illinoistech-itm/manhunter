From java-user-return-32890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 00:05:37 2008
Return-Path: <java-user-return-32890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27702 invoked from network); 1 Mar 2008 00:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 00:05:37 -0000
Received: (qmail 71518 invoked by uid 500); 1 Mar 2008 00:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71479 invoked by uid 500); 1 Mar 2008 00:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71468 invoked by uid 99); 1 Mar 2008 00:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 16:05:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tylervsd@gmail.com designates 72.14.246.242 as permitted sender)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 00:04:51 +0000
Received: by ag-out-0708.google.com with SMTP id 23so11160565agd.5
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 16:05:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=qm3wIwwm51gjeB9TNVc0c6bur1b9mlkOGLWbvoNMwKc=;
        b=gFZq5CdCB1+gurhlXjZHd5AE6prYLHU6JewH734NAIcGx+ywkfrjkOFeIo/row9iSnN7Yca008JwayJAcCGik2MFSK2FIPb26xT5EG8X0vhFYK+e8N55NuUc+ErWkZtyFxx7WHn3Qx90iy6L4gRxX3/wsDJQpAZnjpD9O4TQsaA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fOlPw77j/E3WiZPHh1U839STAaZuIfDyQamQkSxsYoEDGzh4jzA8Isn4hdkasapuSAlhPdYZPytqmv5gir23jRU+mwXNlBGudqs9UXIK+1EokZ2FcDR26IrgVlgDRuagRQXfRG4NZlME3Ahy13lwTYPuHJ6impRiWhswU1vnASg=
Received: by 10.150.191.10 with SMTP id o10mr3611470ybf.84.1204329900165;
        Fri, 29 Feb 2008 16:05:00 -0800 (PST)
Received: by 10.151.9.5 with HTTP; Fri, 29 Feb 2008 16:05:00 -0800 (PST)
Message-ID: <ac017d840802291605h3df51505v7c50be51d71b5f22@mail.gmail.com>
Date: Fri, 29 Feb 2008 16:05:00 -0800
From: "Tyler V" <tylervsd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
In-Reply-To: <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
	 <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike -- Thanks so much for the prompt reply.

You are right, we are accessing these documents with multiple threads
(and have always been). However, I am wondering if the increased
indexing speed in 2.3 has revealed a hidden concurrency issue.

I am going to add in some additional concurrency checks, if I have
questions I will post another question to the list.

Thanks again for the reply.

Tyler

On Fri, Feb 29, 2008 at 2:46 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  Not good!  (I'm sorry).
>
>  That first exception is worrisome.  It's the root cause here.
>
>  Can you describe your documents?  That exception, if I'm reading it
>  right, seems to imply that you have documents with 4762 fields.  Is
>  that right?
>
>  Are you using multiple threads?  Is it possible that you cal
>  addDocument with a given document, but another thread removing fields
>  from that document (or, removing elements from the List returned by
>  Document.getFields())?  That's the only way I can explain that first
>  exception.
>
>  Mike
>
>
>
>  Tyler V wrote:
>
>  > After upgrading to Lucene 2.3 (and subsequently 2.3.1), our
>  > application has experienced sporadic index corruptions on our larger
>  > (and more frequently updated) indexes. These indexes experienced no
>  > corruptions under any prior version of Lucene (which we have been
>  > using for several years).
>  >
>  > The pattern of failure seems to be consistent.  First, we receive an
>  > exception like the following:
>  >
>  > java.lang.IndexOutOfBoundsException: Index: 4788, Size: 4762
>  >         at java.util.ArrayList.RangeCheck(ArrayList.java:547)
>  >         at java.util.ArrayList.get(ArrayList.java:322)
>  >         at org.apache.lucene.index.DocumentsWriter$ThreadState.init
>  > (DocumentsWriter.java:749)
>  >         at org.apache.lucene.index.DocumentsWriter.getThreadState
>  > (DocumentsWriter.java:2391)
>  >         at org.apache.lucene.index.DocumentsWriter.updateDocument
>  > (DocumentsWriter.java:2434)
>  >         at org.apache.lucene.index.DocumentsWriter.addDocument
>  > (DocumentsWriter.java:2422)
>  >         at org.apache.lucene.index.IndexWriter.addDocument
>  > (IndexWriter.java:1445)
>  >         at org.apache.lucene.index.IndexWriter.addDocument
>  > (IndexWriter.java:1424)
>  >         at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java:
>  > 134)
>  >         at java.lang.Thread.run(Thread.java:619)
>  >
>  > When we experience this error, we run a writer.flush() then a
>  > writer.close().
>  >
>  > Then, we get this exception when trying to re-open the index:
>  >
>  > org.apache.lucene.index.CorruptIndexException: doc counts differ for
>  > segment _c2z13: fieldsReader shows 2 but segmentInfo shows 3
>  >         at org.apache.lucene.index.SegmentReader.initialize
>  > (SegmentReader.java:313)
>  >         at org.apache.lucene.index.SegmentReader.get
>  > (SegmentReader.java:262)
>  >         at org.apache.lucene.index.SegmentReader.get
>  > (SegmentReader.java:197)
>  >         at org.apache.lucene.index.MultiSegmentReader.<init>
>  > (MultiSegmentReader.java:55)
>  >         at org.apache.lucene.index.DirectoryIndexReader$1.doBody
>  > (DirectoryIndexReader.java:75)
>  >         at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run
>  > (SegmentInfos.java:636)
>  >         at org.apache.lucene.index.DirectoryIndexReader.open
>  > (DirectoryIndexReader.java:63)
>  >         at org.apache.lucene.index.IndexReader.open
>  > (IndexReader.java:209)
>  >         at org.apache.lucene.index.IndexReader.open
>  > (IndexReader.java:192)
>  >         at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java:
>  > 107)
>  >         at java.lang.Thread.run(Thread.java:619)
>  >
>  > Running the check index application included with 2.3 enables us to
>  > remove the bad documents from the index, but this workaround is less
>  > than desirable.  It would be greatly appreciated if anyone could shed
>  > some light on our issue.
>  >
>  > Regards,
>  >
>  > Tyler
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 00:45:25 2008
Return-Path: <java-user-return-32891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51852 invoked from network); 1 Mar 2008 00:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 00:45:24 -0000
Received: (qmail 2942 invoked by uid 500); 1 Mar 2008 00:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2899 invoked by uid 500); 1 Mar 2008 00:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2883 invoked by uid 99); 1 Mar 2008 00:45:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 16:45:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 00:44:24 +0000
Received: from c-76-115-21-31.hsd1.or.comcast.net ([76.115.21.31] helo=[192.168.11.50])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1JVG6R-000Iey-QV
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 17:01:27 -0800
Message-Id: <90805C44-2911-416E-BE1B-F12E818ED18C@rectangular.com>
From: Marvin Humphrey <marvin@rectangular.com>
To: java-user@lucene.apache.org
In-Reply-To: <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 16:44:41 -0800
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 4:09 AM, Grant Ingersoll wrote:

> That implies the Lucy actually is under development...  Perhaps they  
> will take up work on Lucy...


:)

I haven't been feeding back my KinoSearch commits into the Lucy  
repository, true.  Not much has changed status-wise since this: <http://xrl.us/bgyu6 
 > (Link to mail-archives.apache.org).  I miss Dave :( but work  
continues apace.  I just figured I wouldn't bring anything up here  
until I had some experimental Java bindings for you folks to play  
with.  Some of the stuff I'm working on with KS isn't compatible with  
Lucene, and it doesn't make sense to impede progress by imposing that  
constraint.  Better to finish it up, present a polished version and a  
coherent explanation of the design, then have Mike McCandless riff off  
of it -- that worked pretty well for indexing speed improvements in  
Lucene 2.3.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 01:03:11 2008
Return-Path: <java-user-return-32892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55323 invoked from network); 1 Mar 2008 01:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 01:03:11 -0000
Received: (qmail 17409 invoked by uid 500); 1 Mar 2008 01:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17376 invoked by uid 500); 1 Mar 2008 01:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17365 invoked by uid 99); 1 Mar 2008 01:03:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 17:03:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mail.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 01:02:24 +0000
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mail.markettools.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 29 Feb 2008 17:02:31 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Search Performance
Date: Fri, 29 Feb 2008 17:02:29 -0800
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E62627802865C44@WDCCPMAIL01.markettools.com>
In-Reply-To: <47C651D7.9000008@stimulussoft.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Search Performance
thread-index: Ach50SvwQXc1d4QgTT+IDdLemR0pUQBZlZhg
References: <47C457E5.6020704@stimulussoft.com>	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>	 <47C48F16.2030901@stimulussoft.com>	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>	 <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>	 <47C54442.7010104@stimulussoft.com>	 <47C54625.2030602@stimulussoft.com> <f09790220802272123v561fc528h395d60f00c3f5c63@mail.gmail.com> <47C651D7.9000008@stimulussoft.com>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Mar 2008 01:02:31.0915 (UTC) FILETIME=[ED908BB0:01C87B37]
X-Virus-Checked: Checked by ClamAV on apache.org

Just some comment and I understand that you cannot change your index:

What we did is to organize our index based on creation date of entries.
We limit our search to a given number of years starting from the current
year.  Organizing the index in that way allows us to take off outdated
information.  We can provide the user an option to search across older
indexes as well, if wanted.

Andreas

-----Original Message-----
From: Jamie [mailto:jamie@stimulussoft.com]=20
Sent: Wednesday, February 27, 2008 10:17 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance

Hi

Thanks for the suggestions. This would require us to change the index=20
and right now we literally have millions of documents stored in current=20
index format. I'll bear it in mind, but I am not entirely sure how I=20
would go about implementing the change at this point.

Much appreciate

Jamie


h t wrote:
> 1. redefine the archivedate field as YYmmDD format,
> 2. add another field using timestamp for sort use.
> 3. use RangeFilter to get result and then sort by timestamp.
>
> 2008/2/27, Jamie <jamie@stimulussoft.com>:
>  =20
>> Hi Michael & Others
>>
>> Ok. I've gathered some more statistics from a different machine for
your
>> analysis.
>> (I had to switch machines because the original one was in production
and
>> my tests were interfering).
>>
>> Here are the statistics from the new machine:
>>
>> Total Documents: 1.2 million
>> Results Returned:  900k
>> Store Size 238G (size of original documents)
>> Index Size 1.2G (lucene index size)
>> Index / Store Ratio 0.5%
>>
>> The search query is as follows:
>>
>> archivedate:[d20071229010000 TO d20080228235900]
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~why there
is an
>> extra 'd' ?~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>> As you can see, I am using a range query to search between specific
dates.
>> Question: should this query be moved to a filter rather? I did not do
>> this as I needed to have the option to sort on date.
>>
>> There are no other specific filters applied and in this example
sorting
>> is turned off.
>>
>> On this particular machine the search time varies between 2.64
seconds
>> and about 5 seconds.
>>
>> The limitations of this machine are that it does uses a normal IDE
drive
>> to house the index, not a SATA drive
>>
>> IOStat Statistics
>>
>> Linux 2.6.20-15-server 27/02/2008
>>
>> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>>          20.25    0.00    3.23    0.34    0.00   76.19
>>
>> Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read
Blk_wrtn
>> sda               7.12        50.67       186.41   38936841
143240688
>>
>> See attached for hardware info and the CPU call tree (taken from
YourKit).
>>
>> I would appreciate your recommendations.
>>
>>
>> Jamie
>>
>>
>> h t wrote:
>> Hi Michael,
>> I guess the hotspot of lucene is
>> org.apache.lucene.search.IndexSearcher.search()
>>
>> Hi Jamie,
>> What's the original text size of a million emails?
>> I estimate the size of an email is around 100k, is this true?
>> When you doing search, what kind keywords did you input, words or
short
>> sentence?
>> How many results return?
>> Did you use filter to shrink the results size?
>>
>> 2008/2/27, Michael Stoppelman <stopman@gmail.com>:
>>   So you're saying searches are taking 10 seconds on a 5G index? If
so
>> that
>> seems ungodly slow.
>> If you're on *nix, have you watched your iostat statistics? Maybe
>> something
>> is hammering your hds.
>> Something seems amiss.
>>
>> What lucene methods were pointed to as hotspots by YourKit?
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    =20
>
>  =20


--=20
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a
message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 01:33:48 2008
Return-Path: <java-user-return-32893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68895 invoked from network); 1 Mar 2008 01:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 01:33:48 -0000
Received: (qmail 33023 invoked by uid 500); 1 Mar 2008 01:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32988 invoked by uid 500); 1 Mar 2008 01:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32976 invoked by uid 99); 1 Mar 2008 01:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 17:33:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 01:32:58 +0000
Received: from c-76-115-21-31.hsd1.or.comcast.net ([76.115.21.31] helo=[192.168.11.50])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1JVGrJ-000IwC-37
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 17:49:53 -0800
Message-Id: <1704A0EA-6ABF-4B57-AB6F-F49C37A7A7BF@rectangular.com>
From: Marvin Humphrey <marvin@rectangular.com>
To: java-user@lucene.apache.org
In-Reply-To: <9A4F3058-B6F2-423A-A9E3-E528B63EB86D@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 17:33:06 -0800
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <9A4F3058-B6F2-423A-A9E3-E528B63EB86D@mac.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 11:22 AM, Petite Abeille wrote:

> Lulu is a meant to be a pure Lua implementation of Lucene.

How fast is Lua's method dispatch, compared to Java's?  That has a  
huge impact on performance, since *everything* is a method in Lucene  
-- down to writeByte().

There have been several attempts at pure dynamic language ports of  
Lucene, including Plucene (Perl), Lupy (Python), and the original pure- 
Ruby implementation of Ferret.  All of those have proven unacceptably  
slow.  The ports which have achieved good performance, including  
CLucene (C++), Lucene.NET, the latter-day Ferret (C/Ruby), and  
KinoSearch (C/Perl) (and possibly others, I haven't reviewed them all)  
all get close to the metal.  None rely on hash-based method dispatch  
for inner-loop code, and all manipulate primitive types directly.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 02:01:47 2008
Return-Path: <java-user-return-32894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78238 invoked from network); 1 Mar 2008 02:01:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 02:01:46 -0000
Received: (qmail 47810 invoked by uid 500); 1 Mar 2008 02:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47772 invoked by uid 500); 1 Mar 2008 02:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47761 invoked by uid 99); 1 Mar 2008 02:01:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:01:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 02:01:01 +0000
Received: by wf-out-1314.google.com with SMTP id 28so6231372wff.20
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 18:01:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=L+BqQ/gSqew5wwxNYC3cLMi6c21R1QdkpYKw2cMZUmQ=;
        b=kv57c2POzRCXoR8FV3ju8L9zUmYhxOdj2ECdIDsS6a3GNSwc6uFf6Szop67A21mUOdR4t6nurOLb/xsECqe6PdgT3s8l1rHr2BTS5OHcCBfvRipzJXCmQix7T2Iow/PE4C6VB5QbJnjJjBm1bYZZijld9MNtiynRX5fPBVqT7Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=LGsY0+I/wfZxeNSC1NkEJa50eXzmPC7bFlHlTpAOKQEC6Nbi2G4GjV1py3CUrsUj0upFhX/nMdV3JRYYVbtkdLHDC7qEjBnPb0s1e9s5DDtzT2nAkhn9WTJoeybVxJnlDUNz9xn+2TQstDDJNXFqI0b60D3xEapZUXT4wEan/zc=
Received: by 10.142.237.20 with SMTP id k20mr7444251wfh.228.1204336870498;
        Fri, 29 Feb 2008 18:01:10 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Fri, 29 Feb 2008 18:01:10 -0800 (PST)
Message-ID: <c68e39170802291801w1584c583y587dc0c9a1259710@mail.gmail.com>
Date: Fri, 29 Feb 2008 21:01:10 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
In-Reply-To: <ac017d840802291605h3df51505v7c50be51d71b5f22@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
	 <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com>
	 <ac017d840802291605h3df51505v7c50be51d71b5f22@mail.gmail.com>
X-Google-Sender-Auth: b1c3914af15a8ed8
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Feb 29, 2008 at 7:05 PM, Tyler V <tylervsd@gmail.com> wrote:
> Mike -- Thanks so much for the prompt reply.
>
>  You are right, we are accessing these documents with multiple threads
>  (and have always been). However, I am wondering if the increased
>  indexing speed in 2.3 has revealed a hidden concurrency issue.

You are modifying the documents from multiple threads?

My fault... I removed the synchronization on Document (changed from
Vector to ArrayList).  It was never guaranteed to be thread-safe for
modification, and almost never makes sense without external
synchronization anyway.

If you really need to modify a single document from multiple threads,
please synchronize.
That explains the first exception, but no the second.  I assume you
aren't still changing the document while it's being indexed?
It appears as if the original exception causes corruption.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 03:04:41 2008
Return-Path: <java-user-return-32895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92546 invoked from network); 1 Mar 2008 03:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 03:04:41 -0000
Received: (qmail 10965 invoked by uid 500); 1 Mar 2008 03:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10941 invoked by uid 500); 1 Mar 2008 03:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10930 invoked by uid 99); 1 Mar 2008 03:04:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:04:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [77.67.121.29] (HELO mta01.zimbra.com) (77.67.121.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 03:03:45 +0000
Received: from dogfood.zimbra.com (dogfood.zimbra.com [10.10.140.44])
	by mta01.zimbra.com (Postfix) with ESMTP id D7647DEA04F
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:03:59 -0800 (PST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id D6C0B4BA6D
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:03:59 -0800 (PST)
X-Virus-Scanned: amavisd-new at dogfood.zimbra.com
Received: from dogfood.zimbra.com ([127.0.0.1])
	by localhost (dogfood.zimbra.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lKqRyveJzzky for <java-user@lucene.apache.org>;
	Fri, 29 Feb 2008 19:03:59 -0800 (PST)
Received: from dogfood.zimbra.com (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id 3EA514BA6B
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:03:59 -0800 (PST)
Date: Fri, 29 Feb 2008 19:03:59 -0800 (PST)
From: Tim Brennan <tim@zimbra.com>
To: java-user@lucene.apache.org
Message-ID: <377418724.77401204340639049.JavaMail.root@dogfood.zimbra.com>
In-Reply-To: <1936311142.77311204340164276.JavaMail.root@dogfood.zimbra.com>
Subject: More IndexDeletionPolicy questions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a direct way to ask an IndexReader what segment it is pointing at?  That would make implementing custom deletion policies a LOT easier.

It seems like it should be pretty simple -- keep a list of open IndexReaders, track what Segment files they're pointing to, and in onCommit don't delete those segments.  

Unfortunately it ends up being very difficult to directly determine what Segment an IndexReader is pointing to.  Is there some straightforward way that I'm missing -- all I've managed to do so far is to remember the most recent one from onCommit/onInit and use that one....that works OK, but makes bootstrapping a pain if you try to open a Reader before you've opened the writer once.  

Also, when I use IndexReader.reopen(), can I assume that the newly returned reader is pointing at the "most recent" segment?  I think so...


Here's a sequence of steps that happen in my app:

0) open writer, onInit tells me that seg_1 is the most recent segment

1) Open reader, assume it is pointing to seg_1 from (0)

2) New write commits into seg_2, don't delete seg_1 b/c of (1)

3) Call reader.reopen() on the reader from (1)....new reader is pointing to seg_2 now?

4) seg_1 stays around until the next time I open or commit a writer, then it is removed.


Does that seem reasonable?


--tim







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 04:12:26 2008
Return-Path: <java-user-return-32896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27299 invoked from network); 1 Mar 2008 04:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 04:12:26 -0000
Received: (qmail 48127 invoked by uid 500); 1 Mar 2008 04:12:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48070 invoked by uid 500); 1 Mar 2008 04:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47271 invoked by uid 99); 1 Mar 2008 04:12:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 20:12:06 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sriks6711@bluebottle.com designates 206.188.25.15 as permitted sender)
Received: from [206.188.25.15] (HELO mi0.bluebottle.com) (206.188.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 04:11:17 +0000
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by mi0.bluebottle.com (8.13.1/8.13.1) with ESMTP id m214BbqZ017592
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 20:11:37 -0800
DomainKey-Signature: a=rsa-sha1; s=mail; d=bluebottle.com; c=nofws; q=dns;
	h=received:date:from:reply-to:organization:user-agent:
	mime-version:to:subject:references:in-reply-to:content-type:
	content-transfer-encoding:x-trusted-delivery;
	b=C2F11n6ENaUp4L0pc/BTPcvyWVpdWPMAQ63+CT0GvDaSzvLRQ+vjGy5d+h1pLsxOk
	BWsIMQgqyXVsMHj7Enpipk7SwPJkI6Ul7Ly+2mNeKk6+9h1GIcwcT6tQEP9tlyu
Message-Id: <200803010411.m214BbqZ017592@mi0.bluebottle.com>
Received: from [192.168.15.100] (59.162.171.151.static-vizag.vsnl.net.in [59.162.171.151] (may be forged))
	(authenticated bits=0)
	by fe0.bluebottle.com (8.13.1/8.13.1) with ESMTP id m214BXTL011797
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 29 Feb 2008 20:11:36 -0800
Date: Sat, 01 Mar 2008 09:40:52 +0530
From: Srikant Jakilinki <sriks6711@bluebottle.com>
Reply-To: sriks6711@gmail.com
Organization: JVS Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene for Sentiment Analysis
References: <935022.47311.qm@web50706.mail.re2.yahoo.com>
In-Reply-To: <935022.47311.qm@web50706.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Trusted-Delivery: <1ce7de799b74bad00dfac27d350fdcbf>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I remember doing it once a long time ago (Lucene 1.9) but could not go 
anywhere since term vectors and such were not easily accessible then.

However, if text analytics is what you are after, perhaps you already 
know about LingPipe. I used it for named entity extraction (enhanced 
with some TF-IDF statistical information from Lucene Index) and it 
worked well.

Maybe, you can do the same for sentiment analysis i.e. use LingPipe 
capabilities but enhance it with the corpus statistics that the Lucene 
index provides - and which are more powerful now.

HTH,
Srikant

Aaron Schon wrote:
> Hello, I was interested to learn about using Lucene for text analytics work such as for Sentiment Analysis. Has anyone done work along these lines? if so, could you share your approach, experiences, accuracy levels obtained etc.
>
> Thanks,
> AS

----------------------------------------------------------------------
Find out how you can get spam free email.
http://www.bluebottle.com/tag/3


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 08:22:38 2008
Return-Path: <java-user-return-32897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63179 invoked from network); 1 Mar 2008 08:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 08:22:38 -0000
Received: (qmail 44412 invoked by uid 500); 1 Mar 2008 08:22:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44383 invoked by uid 500); 1 Mar 2008 08:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44372 invoked by uid 99); 1 Mar 2008 08:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 00:22:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.83] (HELO smtpoutm.mac.com) (17.148.16.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 08:21:50 +0000
Received: from mac.com (asmtp009-s [10.150.69.72])
	by smtpoutm.mac.com (Xserve/smtpout020/MantshX 4.0) with ESMTP id m218M0cV026451
	for <java-user@lucene.apache.org>; Sat, 1 Mar 2008 00:22:00 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-3-94.adslplus.ch [89.217.3.94])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp009/MantshX 4.0) with ESMTP id m218Lu5D008938
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 1 Mar 2008 00:21:58 -0800 (PST)
Message-Id: <B43B96B5-5F7C-4E08-B953-016EB8DC727E@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <1704A0EA-6ABF-4B57-AB6F-F49C37A7A7BF@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Sat, 1 Mar 2008 09:21:55 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <9A4F3058-B6F2-423A-A9E3-E528B63EB86D@mac.com> <1704A0EA-6ABF-4B57-AB6F-F49C37A7A7BF@rectangular.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Marvin,

On Mar 1, 2008, at 2:33 AM, Marvin Humphrey wrote:

> How fast is Lua's method dispatch, compared to Java's?

Fast enough.

http://luajit.org/luajit_performance.html

>  That has a huge impact on performance, since *everything* is a  
> method in Lucene -- down to writeByte().

The plan is not to mimic Lucene's Java implementation, but rather it's  
file format and query syntax:

http://lucene.apache.org/java/2_3_1/fileformats.html
http://lucene.apache.org/java/2_3_1/queryparsersyntax.html

> There have been several attempts at pure dynamic language ports of  
> Lucene, including Plucene (Perl), Lupy (Python), and the original  
> pure-Ruby implementation of Ferret.  All of those have proven  
> unacceptably slow.  The ports which have achieved good performance,  
> including CLucene (C++), Lucene.NET, the latter-day Ferret (C/Ruby),  
> and KinoSearch (C/Perl) (and possibly others, I haven't reviewed  
> them all) all get close to the metal.  None rely on hash-based  
> method dispatch for inner-loop code, and all manipulate primitive  
> types directly.

Thanks for the head up :)

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 08:45:51 2008
Return-Path: <java-user-return-32898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67035 invoked from network); 1 Mar 2008 08:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 08:45:51 -0000
Received: (qmail 52272 invoked by uid 500); 1 Mar 2008 08:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52225 invoked by uid 500); 1 Mar 2008 08:45:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52214 invoked by uid 99); 1 Mar 2008 08:45:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 00:45:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 08:44:55 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4073
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: feedback: Indexing speed improvement lucene 2.2->2.3.1
Date: Sat, 1 Mar 2008 09:45:14 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: feedback: Indexing speed improvement lucene 2.2->2.3.1
thread-index: Ach7eJGYmZOB5xvpQ3Wk1c9Wtj22Tg==
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


This week I switched the lucene library version on one customer system.
The indexing speed went down from 46m32s to 16m20s for the complete task
including optimisation. Great Job!
We index product catalogs from several suppliers, in this case around
56.000 product groups and 360.000 products including descriptions were
indexed.

Regards

Uwe



-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger =
sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn =
Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies =
bitte umgehend mit, indem Sie diese Email an den Absender =
zuruckschicken. Bitte loschen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 10:16:31 2008
Return-Path: <java-user-return-32899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86135 invoked from network); 1 Mar 2008 10:16:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 10:16:31 -0000
Received: (qmail 88879 invoked by uid 500); 1 Mar 2008 10:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88845 invoked by uid 500); 1 Mar 2008 10:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88834 invoked by uid 99); 1 Mar 2008 10:16:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 02:16:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.246] (HELO ag-out-0708.google.com) (72.14.246.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 10:15:45 +0000
Received: by ag-out-0708.google.com with SMTP id 23so11398406agd.5
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 02:15:49 -0800 (PST)
Received: by 10.101.68.19 with SMTP id v19mr22254370ank.62.1204366549512;
        Sat, 01 Mar 2008 02:15:49 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h12sm5041994wxd.27.2008.03.01.02.15.48
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 01 Mar 2008 02:15:49 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <c68e39170802291801w1584c583y587dc0c9a1259710@mail.gmail.com>
References: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com> <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com> <ac017d840802291605h3df51505v7c50be51d71b5f22@mail.gmail.com> <c68e39170802291801w1584c583y587dc0c9a1259710@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9F5A77BC-D95E-4B90-A7A9-783765320C77@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
Date: Sat, 1 Mar 2008 05:15:50 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Note that there are actually two concurrency issues to guard against
here:

   * Document itself cannot be changed (fields added or removed) from
     multiple threads without external synchronization.

   * Document cannot be changed from one thread while another thread is
     calling writer.addDocument.  It's this case that's causing your
     1st exception.

Please report back on whether adding correct external synchronization
resolves this!

I can explain why the original exception leads to index corruption:
IndexWriter incorrectly increments the buffered document count even
when there is an exception and the document was not in fact added to
the segment.  I will fix this so an exception when init'ing a document
doesn't then lead to index corruption...

Thanks for reporting this Tyler!

Mike

Yonik Seeley wrote:

> On Fri, Feb 29, 2008 at 7:05 PM, Tyler V <tylervsd@gmail.com> wrote:
>> Mike -- Thanks so much for the prompt reply.
>>
>>  You are right, we are accessing these documents with multiple  
>> threads
>>  (and have always been). However, I am wondering if the increased
>>  indexing speed in 2.3 has revealed a hidden concurrency issue.
>
> You are modifying the documents from multiple threads?
>
> My fault... I removed the synchronization on Document (changed from
> Vector to ArrayList).  It was never guaranteed to be thread-safe for
> modification, and almost never makes sense without external
> synchronization anyway.
>
> If you really need to modify a single document from multiple threads,
> please synchronize.
> That explains the first exception, but no the second.  I assume you
> aren't still changing the document while it's being indexed?
> It appears as if the original exception causes corruption.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 10:18:16 2008
Return-Path: <java-user-return-32900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87786 invoked from network); 1 Mar 2008 10:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 10:18:16 -0000
Received: (qmail 91459 invoked by uid 500); 1 Mar 2008 10:18:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91413 invoked by uid 500); 1 Mar 2008 10:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91402 invoked by uid 99); 1 Mar 2008 10:18:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 02:18:06 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 10:17:31 +0000
Received: by ag-out-0708.google.com with SMTP id 23so11400243agd.5
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 02:17:37 -0800 (PST)
Received: by 10.150.202.17 with SMTP id z17mr3641678ybf.139.1204366656833;
        Sat, 01 Mar 2008 02:17:36 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h38sm6212530wxd.15.2008.03.01.02.17.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 01 Mar 2008 02:17:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DDF3D937-779A-4CDD-85C8-49528E8250A9@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
Date: Sat, 1 Mar 2008 05:17:39 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


That is a nice result -- thanks for reporting this Uwe!

Mike

On Mar 1, 2008, at 3:45 AM, Uwe Goetzke wrote:

>
> This week I switched the lucene library version on one customer  
> system.
> The indexing speed went down from 46m32s to 16m20s for the complete  
> task
> including optimisation. Great Job!
> We index product catalogs from several suppliers, in this case around
> 56.000 product groups and 360.000 products including descriptions were
> indexed.
>
> Regards
>
> Uwe
>
>
>
> ---------------------------------------------------------------------- 
> -
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte  
> Empfanger sind, durfen Sie die Informationen nicht offen legen oder  
> benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben,  
> teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an  
> den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient,  
> you must not disclose or use this information contained in it. If  
> you have received this email in error please tell us immediately by  
> return email and delete the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 10:26:27 2008
Return-Path: <java-user-return-32901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89832 invoked from network); 1 Mar 2008 10:26:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 10:26:27 -0000
Received: (qmail 95325 invoked by uid 500); 1 Mar 2008 10:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95297 invoked by uid 500); 1 Mar 2008 10:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95286 invoked by uid 99); 1 Mar 2008 10:26:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 02:26:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.243] (HELO ag-out-0708.google.com) (72.14.246.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 10:25:39 +0000
Received: by ag-out-0708.google.com with SMTP id 23so11409080agd.5
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 02:25:47 -0800 (PST)
Received: by 10.150.201.13 with SMTP id y13mr3651149ybf.53.1204367146444;
        Sat, 01 Mar 2008 02:25:46 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i19sm3609215wxd.33.2008.03.01.02.25.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 01 Mar 2008 02:25:46 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <B43B96B5-5F7C-4E08-B953-016EB8DC727E@mac.com>
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <9A4F3058-B6F2-423A-A9E3-E528B63EB86D@mac.com> <1704A0EA-6ABF-4B57-AB6F-F49C37A7A7BF@rectangular.com> <B43B96B5-5F7C-4E08-B953-016EB8DC727E@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <18588A43-2824-4EAC-AD64-6C8CDC9D9787@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Sat, 1 Mar 2008 05:25:49 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I am looking forward to a pure Lua version of Lucene.  Lua looks like  
a neat and amazingly compact programming language.  I especially like  
Lua's "table" container type which is both a list and a hash/dictionary.

One issue to watch out for is LUCENE-510, which has been an issue  
with other Lucene implementations trying to match the Lucene index  
format exactly:

   http://issues.apache.org/jira/browse/LUCENE-510

I'm working on this one but not sure when exactly it will be fixed  
since it's a difficult tradeoff (loses some indexing performance)...

Mike

Petite Abeille wrote:

> Hi Marvin,
>
> On Mar 1, 2008, at 2:33 AM, Marvin Humphrey wrote:
>
>> How fast is Lua's method dispatch, compared to Java's?
>
> Fast enough.
>
> http://luajit.org/luajit_performance.html
>
>>  That has a huge impact on performance, since *everything* is a  
>> method in Lucene -- down to writeByte().
>
> The plan is not to mimic Lucene's Java implementation, but rather  
> it's file format and query syntax:
>
> http://lucene.apache.org/java/2_3_1/fileformats.html
> http://lucene.apache.org/java/2_3_1/queryparsersyntax.html
>
>> There have been several attempts at pure dynamic language ports of  
>> Lucene, including Plucene (Perl), Lupy (Python), and the original  
>> pure-Ruby implementation of Ferret.  All of those have proven  
>> unacceptably slow.  The ports which have achieved good  
>> performance, including CLucene (C++), Lucene.NET, the latter-day  
>> Ferret (C/Ruby), and KinoSearch (C/Perl) (and possibly others, I  
>> haven't reviewed them all) all get close to the metal.  None rely  
>> on hash-based method dispatch for inner-loop code, and all  
>> manipulate primitive types directly.
>
> Thanks for the head up :)
>
> Cheers,
>
> PA.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 10:29:28 2008
Return-Path: <java-user-return-32902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90036 invoked from network); 1 Mar 2008 10:29:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 10:29:28 -0000
Received: (qmail 97046 invoked by uid 500); 1 Mar 2008 10:29:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97013 invoked by uid 500); 1 Mar 2008 10:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97002 invoked by uid 99); 1 Mar 2008 10:29:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 02:29:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 10:28:40 +0000
Received: by an-out-0708.google.com with SMTP id c5so978244anc.49
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 02:28:48 -0800 (PST)
Received: by 10.100.231.16 with SMTP id d16mr22325065anh.55.1204367328581;
        Sat, 01 Mar 2008 02:28:48 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 43sm271124wri.27.2008.03.01.02.28.48
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 01 Mar 2008 02:28:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <90805C44-2911-416E-BE1B-F12E818ED18C@rectangular.com>
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org> <90805C44-2911-416E-BE1B-F12E818ED18C@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A1B145F6-5815-431C-8912-B8AB982B042D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Sat, 1 Mar 2008 05:28:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Marvin Humphrey wrote:

> I haven't been feeding back my KinoSearch commits into the Lucy  
> repository, true.  Not much has changed status-wise since this:  
> <http://xrl.us/bgyu6> (Link to mail-archives.apache.org).  I miss  
> Dave :( but work continues apace.  I just figured I wouldn't bring  
> anything up here until I had some experimental Java bindings for  
> you folks to play with.  Some of the stuff I'm working on with KS  
> isn't compatible with Lucene, and it doesn't make sense to impede  
> progress by imposing that constraint.  Better to finish it up,  
> present a polished version and a coherent explanation of the  
> design, then have Mike McCandless riff off of it -- that worked  
> pretty well for indexing speed improvements in Lucene 2.3.

Looking forward to it ;)  Though it'd be nice to be more iterative  
here, if possible, rather than the "big bang" approach.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 11:35:42 2008
Return-Path: <java-user-return-32903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1607 invoked from network); 1 Mar 2008 11:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 11:35:41 -0000
Received: (qmail 35678 invoked by uid 500); 1 Mar 2008 11:35:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35639 invoked by uid 500); 1 Mar 2008 11:35:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35622 invoked by uid 99); 1 Mar 2008 11:35:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 03:35:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivek.balaraman@gmail.com designates 72.14.204.230 as permitted sender)
Received: from [72.14.204.230] (HELO qb-out-0506.google.com) (72.14.204.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 11:34:56 +0000
Received: by qb-out-0506.google.com with SMTP id o21so6053763qba.9
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 03:35:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9k3g/0hfbUk+LRjKm0t0oyK9cFwAKfeE06fxKWZrUiI=;
        b=YXTbgdelc7S9OAqqs0TEKsVm/MoGbarGl+3UnO+1BAowWqVPvPFHB/CaC+2Wo0oGDcmRy0TmUs384vJ+s9X/sUENBjnoT1j3ygIlEcy6foBIiFptbOHbQKlhJHJjxvVWMDEN0QfIQbsCRY0vLVIVo5wXi9zXaI5OkAuhEOVx6+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nQwDAJ/Ud89iFNHpKnfIbSEQ26MMDkUDlomTxtsUlmksLlR2vJ7HtUTNDAHLQakZ/kqJrY9jaMpi/jGOXCwDQOFLEP2QbFfQzpM0YS8wro0vXBp/GWSz68o5GK1raalTjW7k8mR1jfnxIt888jPUr6Eg05XKqXROzfNjn4IKv5c=
Received: by 10.114.110.1 with SMTP id i1mr1753035wac.112.1204371304135;
        Sat, 01 Mar 2008 03:35:04 -0800 (PST)
Received: by 10.114.89.5 with HTTP; Sat, 1 Mar 2008 03:35:04 -0800 (PST)
Message-ID: <ee4bf3230803010335w6095b7c9t377b4097c21667de@mail.gmail.com>
Date: Sat, 1 Mar 2008 17:05:04 +0530
From: "Vivek Balaraman" <vivek.balaraman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for Sentiment Analysis
In-Reply-To: <935022.47311.qm@web50706.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9779_30950987.1204371304136"
References: <935022.47311.qm@web50706.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9779_30950987.1204371304136
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We've been working on Sentiment Analysis. We use GATE and Wordnet for the
lexical / semantic analysis and J Free Charts for the visualization. The
domain is reviews on retail banking and in general our accuracy is around
75% and recall around 25%

We tried out lingpipe as well which also gave good results.

Tx
Vivek Balaraman


On Sat, Mar 1, 2008 at 3:16 AM, Aaron Schon <aaron_schon@yahoo.com> wrote:

> Hello, I was interested to learn about using Lucene for text analytics
> work such as for Sentiment Analysis. Has anyone done work along these lines?
> if so, could you share your approach, experiences, accuracy levels obtained
> etc.
>
> Thanks,
> AS
>
>
>
>  ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.
> http://tools.search.yahoo.com/newsearch/category.php?category=shopping
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9779_30950987.1204371304136--

From java-user-return-32904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 18:17:24 2008
Return-Path: <java-user-return-32904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78609 invoked from network); 1 Mar 2008 18:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 18:17:24 -0000
Received: (qmail 51861 invoked by uid 500); 1 Mar 2008 18:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51698 invoked by uid 500); 1 Mar 2008 18:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51682 invoked by uid 99); 1 Mar 2008 18:17:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 10:17:12 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 18:16:38 +0000
Received: by rv-out-0910.google.com with SMTP id k20so3278563rvb.5
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 10:16:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=JV8MmbmyBfluIfBZMCQBn7j7C5tj5D34jHdZ7o2PkHk=;
        b=Xt2T5oa6BVUooZ9KHWrIW2Xzwe5IEwBTBmQm7VSEZX5HCP1uWjDNffMbeMfuFMFsdYczEOtQ2URxwj2Z2XbEs/p5DTbOi7uK1+RNE5HHHdV5kHFI9fpIn/HUjzYVIVv9VlkScylMpfEyhXYcRAfCPIYMey4HtUTRmV7Q4ViJFH4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=q5iZgmd6iT9TvQfSYG/xuzAVOvbnzF9K6G23t95wCJuGYToZoCkoepzOBFZ+VbB2A/c8KG9rWAhU5GOR3XAvwBnxbTQw4il735lnWUMiKZIjo8+X+v6uvsjZe9yrUEccoC4brn2cjJoIGu6uxkG0y/ncaUjoPqG7sAq0cqBg8o0=
Received: by 10.140.251.1 with SMTP id y1mr7186592rvh.107.1204395407989;
        Sat, 01 Mar 2008 10:16:47 -0800 (PST)
Received: by 10.141.84.9 with HTTP; Sat, 1 Mar 2008 10:16:47 -0800 (PST)
Message-ID: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
Date: Sun, 2 Mar 2008 02:16:47 +0800
From: "Yin Qiu" <allenchue@gmail.com>
To: java-user@lucene.apache.org
Subject: Does Lucene support partition-by-keyword indexing?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_515_19244274.1204395407971"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_515_19244274.1204395407971
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm planning to implement a search infrastructure on a P2P overlay. To
achieve this, I want to first distribute the indices to various nodes
connected by this overlay. My approach is to partition the indices by
keyword, that is, one node takes care of certain keywords (or terms). When a
simple TermQuery is encountered, we just find the node associated with that
term (with distributed hash table) and get the result. And suppose a
BooleanQuery is issued, we contact all the nodes involved in this query and
finally merge the result.

So my question is: does Lucene support partitioning the indices by keywords?

Thanks in advance.

--
Look before you leap
-------------------------------------------

------=_Part_515_19244274.1204395407971--

From java-user-return-32905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 19:08:15 2008
Return-Path: <java-user-return-32905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8947 invoked from network); 1 Mar 2008 19:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 19:08:15 -0000
Received: (qmail 96359 invoked by uid 500); 1 Mar 2008 19:08:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96323 invoked by uid 500); 1 Mar 2008 19:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96312 invoked by uid 99); 1 Mar 2008 19:08:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 11:08:03 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.196] (HELO out1.bezeqint.net) (192.115.188.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 19:07:28 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out1.bezeqint.net (Postfix) with ESMTPA id 7565EBA53E3
	for <java-user@lucene.apache.org>; Sat,  1 Mar 2008 21:04:04 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding Document from index?
Date: Sat, 1 Mar 2008 21:07:16 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200802291435.27114.daniel@nuix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: Ach6hLa6if4MPm8KSlO0DXVSQbvA7ABSfNGQ
Message-Id: <20080301190404.7565EBA53E3@out1.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


This is exactly where Hebrew is different from all Latin languages. I did
think about the approach you mentioned, of having 2 fields - one is stemmed
and the other is not - but even with it the search will be performed on the
non-stemmed field by default. The stemmed field will only be searched upon
explicit request, since one stem in Hebrew can be related to many nouns
adjectives and verbs - too many of those, and the stemming process itself is
not deterministic enough.

I would rather use the non-stemmed field for MoreLikeThis as well, but as I
said I will need some sort of synonyms engine, so I would be able to score
related words by their real frequency and not be tricked by any initials (as
I said before - "the", "and" and other so-called stop words are initial
letters in Hebrew, and are tough to omit).

That is mainly why I'm interested in an easy and inexpensive solution.
Mathieu seems to have went off this topic unfortunately...

Itamar.

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com] 
Sent: Friday, February 29, 2008 5:35 AM
To: java-user@lucene.apache.org
Subject: Re: Rebuilding Document from index?

On Wednesday 27 February 2008 03:33:53 Itamar Syn-Hershko wrote:
> I'm still trying to engineer the best possible solution for Lucene 
> with Hebrew, right now my path is NOT using a stemmer by default, only 
> by explicit request of the user. MoreLikeThis would only return 
> relevant results if I will use a non-stemmed scoring and lookup.

This appears to be the case for all languages too, the stemming will skew
similarity and result in unrelated documents scoring higher than they need
to.

Some people seem to be working around this by having two fields where one is
stemmed and the other isn't.  You could then use the stemmed field when
doing queries but use the non-stemmed field for MoreLikeThis.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 19:19:50 2008
Return-Path: <java-user-return-32906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11523 invoked from network); 1 Mar 2008 19:19:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 19:19:49 -0000
Received: (qmail 4493 invoked by uid 500); 1 Mar 2008 19:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4461 invoked by uid 500); 1 Mar 2008 19:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4450 invoked by uid 99); 1 Mar 2008 19:19:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 11:19:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tylervsd@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 19:19:03 +0000
Received: by hu-out-0506.google.com with SMTP id 27so4929967hub.15
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 11:19:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=tYxQGY4/QbH2E7pl/bc4ffmcU/Bj0fU0twBMJJ6JC8M=;
        b=Eyxzz9P0cqn7z45DFgmagmwxMmUcrFywBgJN02HYR+W9BmvErt45qQnO/Up6xaaKynw7FiOm3rVlMHEN+REZcnxVT/ZktcyyUrCbMX/2G2Vb6bVvYf0PP5+hQIuQ7ngbXPk01HWVYyoh1RUeq84v8zyrQBP1y9QUb+cGfMART3c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=o4T/4qC0XASgCL4OlSHJ9KX0HBnIr29ZIpuM3q1IWtvGI2b6vI55KUz8E6QB9j/MFGEPRy/b98nQfpQmKnYSgaBzWg9tA5wj80cS6fDpkLsF4OTICFjUgKMCGQM2n0OpdnfB1mxPUt10+bkfmNvlcRGrpt62RBz9dzxhvAciius=
Received: by 10.151.42.13 with SMTP id u13mr3891404ybj.107.1204399150423;
        Sat, 01 Mar 2008 11:19:10 -0800 (PST)
Received: by 10.151.9.5 with HTTP; Sat, 1 Mar 2008 11:19:10 -0800 (PST)
Message-ID: <ac017d840803011119g6ee229a9re0b519a469d6051@mail.gmail.com>
Date: Sat, 1 Mar 2008 11:19:10 -0800
From: "Tyler V" <tylervsd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
In-Reply-To: <c68e39170802291801w1584c583y587dc0c9a1259710@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
	 <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com>
	 <ac017d840802291605h3df51505v7c50be51d71b5f22@mail.gmail.com>
	 <c68e39170802291801w1584c583y587dc0c9a1259710@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply Yonik.

Our workflow is as follows:

We build a very large document and put the document on a queue to be
added to our "complete" index. This queue is serviced by a separate
thread, which actually adds the document to the "complete" index.

Once the document has been placed on the queue, we pause for other
processing, then remove a bunch of fields from the document and place
this document on a separate queue to be serviced by another thread,
which will add the document to a "summary" index.

The concurrency problem here is clear, as it is possible for a
document's fields to be modified while the document is being added to
the "complete" index.  From what you and Mike have mentioned, I
believe this simultaneous modification is causing the first exception.

The assumption that was being made in my algorithm is that the
"complete" index queue would be serviced before the document's fields
are removed for the "summary" index.  This assumption is not correct.
The solution that I am testing now is to "clone" the original document
before any fields are removed.  Thus the original document will not be
modified and the concurrency issues will be avoided.

Given that this problem only occurred around once a week, it will take
me a while before I can report success.  But from reading the posts
from Mike and yourself, it seems that this is indeed the cause of the
corruption.

Thanks again for you insights, I will report back with my results.

Tyler

On Fri, Feb 29, 2008 at 6:01 PM, Yonik Seeley <yonik@apache.org> wrote:
>
> On Fri, Feb 29, 2008 at 7:05 PM, Tyler V <tylervsd@gmail.com> wrote:
> > Mike -- Thanks so much for the prompt reply.
> >
> >  You are right, we are accessing these documents with multiple threads
> >  (and have always been). However, I am wondering if the increased
> >  indexing speed in 2.3 has revealed a hidden concurrency issue.
>
> You are modifying the documents from multiple threads?
>
> My fault... I removed the synchronization on Document (changed from
> Vector to ArrayList).  It was never guaranteed to be thread-safe for
> modification, and almost never makes sense without external
> synchronization anyway.
>
> If you really need to modify a single document from multiple threads,
> please synchronize.
> That explains the first exception, but no the second.  I assume you
> aren't still changing the document while it's being indexed?
> It appears as if the original exception causes corruption.
>
> -Yonik
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 21:07:12 2008
Return-Path: <java-user-return-32907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35160 invoked from network); 1 Mar 2008 21:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 21:07:12 -0000
Received: (qmail 56815 invoked by uid 500); 1 Mar 2008 21:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56780 invoked by uid 500); 1 Mar 2008 21:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56769 invoked by uid 99); 1 Mar 2008 21:07:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 13:07:01 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 21:06:15 +0000
Received: from c-65-96-166-47.hsd1.ma.comcast.net ([65.96.166.47] helo=IBM3D2E684396F)
	by outgoing.csail.mit.edu with esmtpa (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JVYug-0001wH-MA
	for java-user@lucene.apache.org; Sat, 01 Mar 2008 16:06:34 -0500
Message-ID: <060101c87be0$20135dd0$0602a8c0@IBM3D2E684396F>
From: "Ghinwa Choueiter" <ghinwa@csail.mit.edu>
To: <java-user@lucene.apache.org>
Subject: searching for "Nothing"
Date: Sat, 1 Mar 2008 16:06:31 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_05FE_01C87BB6.37231710"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_05FE_01C87BB6.37231710
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am trying to do a search as follows (this is a very simplified =
example):

I want to search for: (1) the little boy or (2) one little boy or (3) =
little boy

Can I write the query as:
"the OR one OR "" " AND "little" AND "boy"

note that what I mean by "" is "Nothing".=20

thank you,
-Ghinwa

PS. I know that I can write the query as "the little boy" OR "one little =
boy" OR "little boy"


------=_NextPart_000_05FE_01C87BB6.37231710--


From java-user-return-32908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 21:34:25 2008
Return-Path: <java-user-return-32908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41562 invoked from network); 1 Mar 2008 21:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 21:34:24 -0000
Received: (qmail 77536 invoked by uid 500); 1 Mar 2008 21:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77505 invoked by uid 500); 1 Mar 2008 21:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77494 invoked by uid 99); 1 Mar 2008 21:34:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 13:34:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.163] (HELO web50711.mail.re2.yahoo.com) (206.190.38.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Mar 2008 21:33:37 +0000
Received: (qmail 5138 invoked by uid 60001); 1 Mar 2008 21:33:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=eZkBndBO7+w7D/wRbuXe1232Smgt0lc8U7N/oSuRkkpOxgxu/R9ifB5xFqqnHsTTKFeS6T9bflAX4VqpQCJ9j2t3KPJKuUqLqt0b4QsxobI1z5p5nTWgA5b6Nfuz0e+9+xzbABMt4/inLSjUmyOq037mCNgi9aOAi6ZxRE2Y8oI=;
X-YMail-OSG: wpJhuS8VM1nh7WOc2aY_slB9VY1Z1MX5CqUTmbXFQUxbY7zGbmRWi0ye5yfeLcOBUGIzGIaN17fIH7jHslePWO04DM1yQt6gp9AC4_xHZ8Ba6AMhnazLF3TqpjdsYUXCgpXZ5yldKU55jZ4-
Received: from [71.232.7.212] by web50711.mail.re2.yahoo.com via HTTP; Sat, 01 Mar 2008 13:33:44 PST
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Sat, 1 Mar 2008 13:33:44 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: Lucene for Sentiment Analysis
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <661804.3785.qm@web50711.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks to those who responded. I was wondering if taking a bag of words approach might work. For example chunking the sentences to be analyzed and running a Lucene query against an index storing sentiment polarity. Has anyone had success with this approach? I do not need a super accurate system, something that is "reasonably" accurate.

Also, could you suggest good publicly available training datasets? I am aware of the Cornell Movie Reviews dataset[1]

Thanks
AS

[1] http://www.cs.cornell.edu/people/pabo/movie-review-data/


----- Original Message ----
From: Vivek Balaraman <vivek.balaraman@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, March 1, 2008 6:35:04 AM
Subject: Re: Lucene for Sentiment Analysis

We've been working on Sentiment Analysis. We use GATE and Wordnet for the
lexical / semantic analysis and J Free Charts for the visualization. The
domain is reviews on retail banking and in general our accuracy is around
75% and recall around 25%

We tried out lingpipe as well which also gave good results.

Tx
Vivek Balaraman


On Sat, Mar 1, 2008 at 3:16 AM, Aaron Schon <aaron_schon@yahoo.com> wrote:

> Hello, I was interested to learn about using Lucene for text analytics
> work such as for Sentiment Analysis. Has anyone done work along these lines?
> if so, could you share your approach, experiences, accuracy levels obtained
> etc.
>
> Thanks,
> AS
>
>
>
>  ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.
> http://tools.search.yahoo.com/newsearch/category.php?category=shopping
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 01 21:50:41 2008
Return-Path: <java-user-return-32909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43671 invoked from network); 1 Mar 2008 21:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2008 21:50:41 -0000
Received: (qmail 84269 invoked by uid 500); 1 Mar 2008 21:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84231 invoked by uid 500); 1 Mar 2008 21:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84220 invoked by uid 99); 1 Mar 2008 21:50:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 13:50:30 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 21:49:55 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 3108112B6EC
	for <java-user@lucene.apache.org>; Sat,  1 Mar 2008 22:50:03 +0100 (CET)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 05C3C12B6E4
	for <java-user@lucene.apache.org>; Sat,  1 Mar 2008 22:50:02 +0100 (CET)
Message-Id: <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Does Lucene support partition-by-keyword indexing?
Date: Sat, 1 Mar 2008 22:50:02 +0100
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The easiest way is to split index by Document. In Lucene, index =20
contains Document and inverse index of Term. If you wont to put Term =20
in different place, Document will be duplicated on each index, with =20
only a part of their Term.

How will you manage node failure in your network?

They were some trial to build big p2p search engine to compet with =20
Google, but, it will be easier to split by Document.

If you have to many computers and want to see them working together, =20
why don't use Nutch with Hadoop?

M.
Le 1 mars 08 =E0 19:16, Yin Qiu a =E9crit :

> Hi,
>
> I'm planning to implement a search infrastructure on a P2P overlay. To
> achieve this, I want to first distribute the indices to various nodes
> connected by this overlay. My approach is to partition the indices by
> keyword, that is, one node takes care of certain keywords (or =20
> terms). When a
> simple TermQuery is encountered, we just find the node associated =20
> with that
> term (with distributed hash table) and get the result. And suppose a
> BooleanQuery is issued, we contact all the nodes involved in this =20
> query and
> finally merge the result.
>
> So my question is: does Lucene support partitioning the indices by =20
> keywords?
>
> Thanks in advance.
>
> --
> Look before you leap
> -------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 02:05:40 2008
Return-Path: <java-user-return-32910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3919 invoked from network); 2 Mar 2008 02:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 02:05:40 -0000
Received: (qmail 9751 invoked by uid 500); 2 Mar 2008 02:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9713 invoked by uid 500); 2 Mar 2008 02:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9700 invoked by uid 99); 2 Mar 2008 02:05:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 18:05:29 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 72.14.252.155 as permitted sender)
Received: from [72.14.252.155] (HELO po-out-1718.google.com) (72.14.252.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 02:04:55 +0000
Received: by po-out-1718.google.com with SMTP id b23so7165156poe.0
        for <java-user@lucene.apache.org>; Sat, 01 Mar 2008 18:05:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        bh=v6DiNvd7F6Tp+PK4gGOmSrimrf82Gid4Mvo4n8LyUiI=;
        b=SV1g3sJ7aljtJP4eG544L1heARQ0A+Uorrdban15XFL5DsfN7gSgLlrTxCam2aOQyPtZVPdl+HCCxBGgdIycuyKwF3cTY8qlgjkApHRlAVtp9HxyJRIu8IFyWEMrqRhYLTr0Xf+W3/Cq3NZF/cY5rgUKnuvUFHZb01lI0V6xS6A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=F7xcXawtT3n721VLFF0rahSMCH4SbURFc+uOIQwn0lmclMKxj7p5Yb/IqbVe8M+jhDJfQcpQEd2Q8f4dYPBlUY/r0JXEGQmE3hNqnqPBBWlpedcZnoNyBLN9acJyz28oEfClCYSOnRClQ9+Ljd210Hmj/wbDprO3NdSq8ZnHfBk=
Received: by 10.140.133.10 with SMTP id g10mr7338852rvd.151.1204423505665;
        Sat, 01 Mar 2008 18:05:05 -0800 (PST)
Received: by 10.141.84.9 with HTTP; Sat, 1 Mar 2008 18:05:05 -0800 (PST)
Message-ID: <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
Date: Sun, 2 Mar 2008 10:05:05 +0800
From: "=?UTF-8?B?5LuH5a+F?=" <qiuyin04@software.nju.edu.cn>
Sender: allenchue@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Lucene support partition-by-keyword indexing?
In-Reply-To: <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1697_28003604.1204423505660"
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
	 <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
X-Google-Sender-Auth: 2a32d21eac1df7f4
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1697_28003604.1204423505660
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksCgpJIGFncmVlIHdpdGggeW91ciBwb2ludCB0aGF0IGl0IGlzIGVhc2llciB0byBwYXJ0aXRp
b24gaW5kZXggYnkgZG9jdW1lbnQuCkJ1dCB0aGUgcGFydGl0aW9uLWJ5LWtleXdvcmQgYXBwcm9h
Y2ggaGFzIG11Y2ggZ3JlYXRlciBzY2FsYWJpbGl0eSBvdmVyIHRoZQpwYXJ0aXRpb24tYnktZG9j
dW1lbnQgYXBwcm9hY2guIEVhY2ggcXVlcnkgaW52b2x2ZXMgY29tbXVuaWNhdGluZyB3aXRoCmNv
bnN0YW50IG51bWJlciBvZiBub2Rlczsgd2hpbGUgcGFydGl0aW9uLWJ5LWRvYyByZXF1aXJlcyBz
cHJlYWRpbmcgdGhlCnF1ZXJ5IGEgbG9uZyBhbGwgb3IgbWFueSBvZiB0aGUgbm9kZXMuIEFuZCBJ
IGFtIGFjdHVhbGx5IGRvaW5nIHNvbWUgc21hbGwKcmVzZWFyY2ggb24gdGhpcy4gQnkgdGhlIHdh
eSwgdGhlIGRvY3VtZW50cyB0byBiZSBpbmRleGVkIGFyZSBub3QKbmVjZXNzYXJpbHkgd2ViIHBh
Z2VzLiBUaGV5IGFyZSBtb3N0bHkgZmlsZXMgc3RvcmVkIG9uIGVhY2ggbm9kZSdzIGZpbGUKc3lz
dGVtLgoKTm9kZSBmYWlsdXJlcyBhcmUgYWxzbyBoYW5kbGVkIGJ5IHJlcGxpY2FzLiBUaGUgaW5k
ZXggZm9yIGVhY2ggdGVybSB3aWxsIGJlCnJlcGxpY2F0ZWQgb24gbXVsdGlwbGUgbm9kZXMsIHdo
b3NlIG5vZGVJRHMgYXJlIG5lYXIgdG8gZWFjaCBvdGhlci4gVGhpcwptZWNoYW5pc20gaXMgaGFu
ZGxlZCBieSB0aGUgdW5kZXJseWluZyBESFQgc3lzdGVtLgoKU28gYW55IGlkZWEgaG93IGNhbiBw
YXJ0aXRpb24gaW5kZXggYnkga2V5d29yZCBpbiBsdWNlbmU/IFRoYW5rcy4KCk9uIFN1biwgTWFy
IDIsIDIwMDggYXQgNTo1MCBBTSwgTWF0aGlldSBMZWNhcm1lIDxtYXRoaWV1QGdhcmFtYnJvZ25l
Lm5ldD4Kd3JvdGU6Cgo+IFRoZSBlYXNpZXN0IHdheSBpcyB0byBzcGxpdCBpbmRleCBieSBEb2N1
bWVudC4gSW4gTHVjZW5lLCBpbmRleAo+IGNvbnRhaW5zIERvY3VtZW50IGFuZCBpbnZlcnNlIGlu
ZGV4IG9mIFRlcm0uIElmIHlvdSB3b250IHRvIHB1dCBUZXJtCj4gaW4gZGlmZmVyZW50IHBsYWNl
LCBEb2N1bWVudCB3aWxsIGJlIGR1cGxpY2F0ZWQgb24gZWFjaCBpbmRleCwgd2l0aAo+IG9ubHkg
YSBwYXJ0IG9mIHRoZWlyIFRlcm0uCj4KPiBIb3cgd2lsbCB5b3UgbWFuYWdlIG5vZGUgZmFpbHVy
ZSBpbiB5b3VyIG5ldHdvcms/Cj4KPiBUaGV5IHdlcmUgc29tZSB0cmlhbCB0byBidWlsZCBiaWcg
cDJwIHNlYXJjaCBlbmdpbmUgdG8gY29tcGV0IHdpdGgKPiBHb29nbGUsIGJ1dCwgaXQgd2lsbCBi
ZSBlYXNpZXIgdG8gc3BsaXQgYnkgRG9jdW1lbnQuCj4KPiBJZiB5b3UgaGF2ZSB0byBtYW55IGNv
bXB1dGVycyBhbmQgd2FudCB0byBzZWUgdGhlbSB3b3JraW5nIHRvZ2V0aGVyLAo+IHdoeSBkb24n
dCB1c2UgTnV0Y2ggd2l0aCBIYWRvb3A/Cj4KPiBNLgo+IExlIDEgbWFycyAwOCDDoCAxOToxNiwg
WWluIFFpdSBhIMOpY3JpdCA6Cj4KPiA+IEhpLAo+ID4KPiA+IEknbSBwbGFubmluZyB0byBpbXBs
ZW1lbnQgYSBzZWFyY2ggaW5mcmFzdHJ1Y3R1cmUgb24gYSBQMlAgb3ZlcmxheS4gVG8KPiA+IGFj
aGlldmUgdGhpcywgSSB3YW50IHRvIGZpcnN0IGRpc3RyaWJ1dGUgdGhlIGluZGljZXMgdG8gdmFy
aW91cyBub2Rlcwo+ID4gY29ubmVjdGVkIGJ5IHRoaXMgb3ZlcmxheS4gTXkgYXBwcm9hY2ggaXMg
dG8gcGFydGl0aW9uIHRoZSBpbmRpY2VzIGJ5Cj4gPiBrZXl3b3JkLCB0aGF0IGlzLCBvbmUgbm9k
ZSB0YWtlcyBjYXJlIG9mIGNlcnRhaW4ga2V5d29yZHMgKG9yCj4gPiB0ZXJtcykuIFdoZW4gYQo+
ID4gc2ltcGxlIFRlcm1RdWVyeSBpcyBlbmNvdW50ZXJlZCwgd2UganVzdCBmaW5kIHRoZSBub2Rl
IGFzc29jaWF0ZWQKPiA+IHdpdGggdGhhdAo+ID4gdGVybSAod2l0aCBkaXN0cmlidXRlZCBoYXNo
IHRhYmxlKSBhbmQgZ2V0IHRoZSByZXN1bHQuIEFuZCBzdXBwb3NlIGEKPiA+IEJvb2xlYW5RdWVy
eSBpcyBpc3N1ZWQsIHdlIGNvbnRhY3QgYWxsIHRoZSBub2RlcyBpbnZvbHZlZCBpbiB0aGlzCj4g
PiBxdWVyeSBhbmQKPiA+IGZpbmFsbHkgbWVyZ2UgdGhlIHJlc3VsdC4KPiA+Cj4gPiBTbyBteSBx
dWVzdGlvbiBpczogZG9lcyBMdWNlbmUgc3VwcG9ydCBwYXJ0aXRpb25pbmcgdGhlIGluZGljZXMg
YnkKPiA+IGtleXdvcmRzPwo+ID4KPiA+IFRoYW5rcyBpbiBhZHZhbmNlLgo+ID4KPiA+IC0tCj4g
PiBMb29rIGJlZm9yZSB5b3UgbGVhcAo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
CgotLSAKTG9vayBiZWZvcmUgeW91IGxlYXAKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo=
------=_Part_1697_28003604.1204423505660--

From java-user-return-32911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 07:48:59 2008
Return-Path: <java-user-return-32911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33718 invoked from network); 2 Mar 2008 07:48:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 07:48:59 -0000
Received: (qmail 52799 invoked by uid 500); 2 Mar 2008 07:48:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52772 invoked by uid 500); 2 Mar 2008 07:48:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52761 invoked by uid 99); 2 Mar 2008 07:48:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Mar 2008 23:48:47 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 07:48:13 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4073
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Does Lucene support partition-by-keyword indexing?
Date: Sun, 2 Mar 2008 08:48:19 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com>
In-Reply-To: <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does Lucene support partition-by-keyword indexing?
thread-index: Ach8CfFCLgnHJuRdSiWE+orgOUNN5QAKNYNg
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com> <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net> <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I do not yet fully understand what you want to achieve.=20
You want to spread the index split by keywords to reduce the time to =
distribute indexes?=20
And you want the distribute queries to the nodes based on the same split =
mechanism?=20


You have several nodes with different kind of documents.
You want to build one index for all nodes and split and distribute the =
index based on a set of keywords specific to a node. This you want to do =
to split the queries so "each query involves communicating with constant =
number of nodes".

Do documents at the nodes contain only such keywords? I doubt.=20
So you need anyway a reference where the indexed doc can be found and =
retrieve it from its node for display.=20
You could index at each node, merge all indexes from all nodes and =
distribute the combined index.
On what criteria you can split the queries? If you have a combined index =
each node can distribute the queries to other nodes on statistical data =
found in the term distribution.=20
You need to merge the results anyway.

I doubt that this kind of overhead is worth the trouble because you =
introduce a lot of single points of failure. And the scalability seems =
limited because you would need to recalibrate the whole network when a =
adding a new node. Why don't you distribute the complete index (we do =
this after getting it locally zipped and later unzipped on the receiver =
node, size is less than one third for transfering). Each node should =
have some activity indicator. Distribute the complete query to the node =
with the smallest activiy. So you get redundancy, do not need to split =
queries and merge results. OK, one "evil" query can bring a node "down" =
but the network is still working.

Do you have any results using lucene on a single node for your approach? =
How many queries and how many documents do you expect?=20

Regards

Uwe

-----Urspr=FCngliche Nachricht-----
Von: allenchue@gmail.com [mailto:allenchue@gmail.com] Im Auftrag von ??
Gesendet: Sonntag, 2. M=E4rz 2008 03:05
An: java-user@lucene.apache.org
Betreff: Re: Does Lucene support partition-by-keyword indexing?

Hi,

I agree with your point that it is easier to partition index by =
document.
But the partition-by-keyword approach has much greater scalability over =
the
partition-by-document approach. Each query involves communicating with
constant number of nodes; while partition-by-doc requires spreading the
query a long all or many of the nodes. And I am actually doing some =
small
research on this. By the way, the documents to be indexed are not
necessarily web pages. They are mostly files stored on each node's file
system.

Node failures are also handled by replicas. The index for each term will =
be
replicated on multiple nodes, whose nodeIDs are near to each other. This
mechanism is handled by the underlying DHT system.

So any idea how can partition index by keyword in lucene? Thanks.

On Sun, Mar 2, 2008 at 5:50 AM, Mathieu Lecarme =
<mathieu@garambrogne.net>
wrote:

> The easiest way is to split index by Document. In Lucene, index
> contains Document and inverse index of Term. If you wont to put Term
> in different place, Document will be duplicated on each index, with
> only a part of their Term.
>
> How will you manage node failure in your network?
>
> They were some trial to build big p2p search engine to compet with
> Google, but, it will be easier to split by Document.
>
> If you have to many computers and want to see them working together,
> why don't use Nutch with Hadoop?
>
> M.
> Le 1 mars 08 =E0 19:16, Yin Qiu a =E9crit :
>
> > Hi,
> >
> > I'm planning to implement a search infrastructure on a P2P overlay. =
To
> > achieve this, I want to first distribute the indices to various =
nodes
> > connected by this overlay. My approach is to partition the indices =
by
> > keyword, that is, one node takes care of certain keywords (or
> > terms). When a
> > simple TermQuery is encountered, we just find the node associated
> > with that
> > term (with distributed hash table) and get the result. And suppose a
> > BooleanQuery is issued, we contact all the nodes involved in this
> > query and
> > finally merge the result.
> >
> > So my question is: does Lucene support partitioning the indices by
> > keywords?
> >
> > Thanks in advance.
> >
> > --
> > Look before you leap
> > -------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Look before you leap
-------------------------------------------

-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen =
Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender =
zur=FCckschicken. Bitte l=F6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 09:06:23 2008
Return-Path: <java-user-return-32912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45466 invoked from network); 2 Mar 2008 09:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 09:06:23 -0000
Received: (qmail 86820 invoked by uid 500); 2 Mar 2008 09:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86779 invoked by uid 500); 2 Mar 2008 09:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86768 invoked by uid 99); 2 Mar 2008 09:06:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 01:06:12 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.189.34] (HELO web23009.mail.ird.yahoo.com) (217.146.189.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 Mar 2008 09:05:25 +0000
Received: (qmail 97732 invoked by uid 60001); 2 Mar 2008 09:05:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=evHrOxoND7JaSUxF1yaJ9PR4CvlgxAlIbVz+stprdbs9pUcI1G7ejqY0/lmA3eKLpfpF9fXncqpZSDUEwCwualP7OQqcudKPZu0LhpCx69SAdK7AQCS9sOFj8wRivPrreDkH5mdNg9cOxjGVkdYFr9YjMsf0Nadk9nxTAnV9asc=;
X-YMail-OSG: 1rKMdvIVM1kyPuV.ZQc01hKBW5FSyP06dgtNNQmFTiCWzBYcr7xLV3DEtBkBq1kNk.sSBehXej6aFbZfCJ8VC8UasnT8dTKcHUSbtGTnbxek61PNd30CViBZ_fg-
Received: from [79.201.127.174] by web23009.mail.ird.yahoo.com via HTTP; Sun, 02 Mar 2008 09:05:44 GMT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Sun, 2 Mar 2008 09:05:44 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Does Lucene support partition-by-keyword indexing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <973095.94375.qm@web23009.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I did not follow this discussion from the start, but I guess you could clea=
nly achieve this by implementing  =0Aorg.apache.lucene.index.FilterIndexRea=
der=0A=0Ahave fun. e.=0A=0A----- Original Message ----=0AFrom: =E4=BB=87=E5=
=AF=85 <qiuyin04@software.nju.edu.cn>=0ATo: java-user@lucene.apache.org=0AS=
ent: Sunday, 2 March, 2008 3:05:05 AM=0ASubject: Re: Does Lucene support pa=
rtition-by-keyword indexing?=0A=0AHi,=0A=0AI agree with your point that it =
is easier to partition index by document.=0ABut the partition-by-keyword ap=
proach has much greater scalability over the=0Apartition-by-document approa=
ch. Each query involves communicating with=0Aconstant number of nodes; whil=
e partition-by-doc requires spreading the=0Aquery a long all or many of the=
 nodes. And I am actually doing some small=0Aresearch on this. By the way, =
the documents to be indexed are not=0Anecessarily web pages. They are mostl=
y files stored on each node's file=0Asystem.=0A=0ANode failures are also ha=
ndled by replicas. The index for each term will be=0Areplicated on multiple=
 nodes, whose nodeIDs are near to each other. This=0Amechanism is handled b=
y the underlying DHT system.=0A=0ASo any idea how can partition index by ke=
yword in lucene? Thanks.=0A=0AOn Sun, Mar 2, 2008 at 5:50 AM, Mathieu Lecar=
me <mathieu@garambrogne.net>=0Awrote:=0A=0A> The easiest way is to split in=
dex by Document. In Lucene, index=0A> contains Document and inverse index o=
f Term. If you wont to put Term=0A> in different place, Document will be du=
plicated on each index, with=0A> only a part of their Term.=0A>=0A> How wil=
l you manage node failure in your network?=0A>=0A> They were some trial to =
build big p2p search engine to compet with=0A> Google, but, it will be easi=
er to split by Document.=0A>=0A> If you have to many computers and want to =
see them working together,=0A> why don't use Nutch with Hadoop?=0A>=0A> M.=
=0A> Le 1 mars 08 =C3=A0 19:16, Yin Qiu a =C3=A9crit :=0A>=0A> > Hi,=0A> >=
=0A> > I'm planning to implement a search infrastructure on a P2P overlay. =
To=0A> > achieve this, I want to first distribute the indices to various no=
des=0A> > connected by this overlay. My approach is to partition the indice=
s by=0A> > keyword, that is, one node takes care of certain keywords (or=0A=
> > terms). When a=0A> > simple TermQuery is encountered, we just find the =
node associated=0A> > with that=0A> > term (with distributed hash table) an=
d get the result. And suppose a=0A> > BooleanQuery is issued, we contact al=
l the nodes involved in this=0A> > query and=0A> > finally merge the result=
.=0A> >=0A> > So my question is: does Lucene support partitioning the indic=
es by=0A> > keywords?=0A> >=0A> > Thanks in advance.=0A> >=0A> > --=0A> > L=
ook before you leap=0A> > -------------------------------------------=0A>=
=0A>=0A> ------------------------------------------------------------------=
---=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=
=0A=0A=0A-- =0ALook before you leap=0A-------------------------------------=
------=0A=0A=0A=0A=0A=0A      _____________________________________________=
______________ =0ARise to the challenge for Sport Relief with Yahoo! For Go=
od  =0A=0Ahttp://uk.promotions.yahoo.com/forgood/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 09:34:35 2008
Return-Path: <java-user-return-32913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51033 invoked from network); 2 Mar 2008 09:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 09:34:35 -0000
Received: (qmail 99111 invoked by uid 500); 2 Mar 2008 09:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98790 invoked by uid 500); 2 Mar 2008 09:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98776 invoked by uid 99); 2 Mar 2008 09:34:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 01:34:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 09:33:48 +0000
Received: by el-out-1112.google.com with SMTP id y26so666832ele.4
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 01:33:49 -0800 (PST)
Received: by 10.100.165.13 with SMTP id n13mr25533404ane.77.1204450429773;
        Sun, 02 Mar 2008 01:33:49 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm1494519wrh.3.2008.03.02.01.33.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 02 Mar 2008 01:33:49 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <377418724.77401204340639049.JavaMail.root@dogfood.zimbra.com>
References: <377418724.77401204340639049.JavaMail.root@dogfood.zimbra.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <848CE4EA-41E9-46F6-AEA5-BE913F7E57AB@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: More IndexDeletionPolicy questions
Date: Sun, 2 Mar 2008 04:33:54 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately, there is currently no way to ask an IndexReader
(DirectoryIndexReader) which commit point it's using.

I think it makes sense to add this.  I'll open a Jira issue.

More answers below:

Tim Brennan wrote:

> Is there a direct way to ask an IndexReader what segment it is  
> pointing at?  That would make implementing custom deletion policies  
> a LOT easier.
>
> It seems like it should be pretty simple -- keep a list of open  
> IndexReaders, track what Segment files they're pointing to, and in  
> onCommit don't delete those segments.

This implies you have multiple readers in a single JVM?  If so, you  
should not need to make a custom deletion policy to handle this case  
-- the OS should be properly protecting open files from deletion.   
Can you  shed more light on the bigger picture here?

> Unfortunately it ends up being very difficult to directly determine  
> what Segment an IndexReader is pointing to.  Is there some  
> straightforward way that I'm missing -- all I've managed to do so  
> far is to remember the most recent one from onCommit/onInit and use  
> that one....that works OK, but makes bootstrapping a pain if you  
> try to open a Reader before you've opened the writer once.
>
> Also, when I use IndexReader.reopen(), can I assume that the newly  
> returned reader is pointing at the "most recent" segment?  I think  
> so...

Yes, except you have a synchronization challenge: if the writer is in  
the process of committing just as your reader opens you can't be  
certain whether the reader got the new commit or the previous one.   
If you have external synchronization to ensure reader only re-opens  
after writer has fully committed then this isn't an issue.

>
> Here's a sequence of steps that happen in my app:
>
> 0) open writer, onInit tells me that seg_1 is the most recent segment
>
> 1) Open reader, assume it is pointing to seg_1 from (0)
>
> 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
>
> 3) Call reader.reopen() on the reader from (1)....new reader is  
> pointing to seg_2 now?
>
> 4) seg_1 stays around until the next time I open or commit a  
> writer, then it is removed.
>
>
> Does that seem reasonable?
>
>
> --tim
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscri


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 11:45:31 2008
Return-Path: <java-user-return-32914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67428 invoked from network); 2 Mar 2008 11:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 11:45:31 -0000
Received: (qmail 59430 invoked by uid 500); 2 Mar 2008 11:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59396 invoked by uid 500); 2 Mar 2008 11:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59385 invoked by uid 99); 2 Mar 2008 11:45:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 03:45:20 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 11:44:45 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 4934012B6F4
	for <java-user@lucene.apache.org>; Sun,  2 Mar 2008 12:44:53 +0100 (CET)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 2273512B6E6
	for <java-user@lucene.apache.org>; Sun,  2 Mar 2008 12:44:53 +0100 (CET)
Message-Id: <CD7E62C4-6D9F-49DD-8C38-D48A0083B972@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Does Lucene support partition-by-keyword indexing?
Date: Sun, 2 Mar 2008 12:44:52 +0100
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com> <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net> <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Le 2 mars 08 =C3=A0 03:05, =E4=BB=87=E5=AF=85 a =C3=A9crit :

> Hi,
>
> I agree with your point that it is easier to partition index by =20
> document.
> But the partition-by-keyword approach has much greater scalability =20
> over the
> partition-by-document approach. Each query involves communicating with
> constant number of nodes; while partition-by-doc requires spreading =20=

> the
> query a long all or many of the nodes. And I am actually doing some =20=

> small
> research on this. By the way, the documents to be indexed are not
> necessarily web pages. They are mostly files stored on each node's =20
> file
> system.
>
> Node failures are also handled by replicas. The index for each term =20=

> will be
> replicated on multiple nodes, whose nodeIDs are near to each other. =20=

> This
> mechanism is handled by the underlying DHT system.
>
> So any idea how can partition index by keyword in lucene? Thanks.

When you read a file, and tokenize it, you dispatch token in =20
differents index, with a unique Document ID.

Can you explain more things about the context of your application?

I don't know why you need P2P. Is it for file sharing? so, index =20
should be near document.
Is it for distributed computed? use central data and hadoop Map/Reduce.
If you wont a cluster of lucene for heavy querying, use the rsync + mv =20=

trick of Technorati.
If you persist with Term dispatching, use it only for caching. Each =20
node provides a Term index of their Document. When you search =20
something, the parsed query gives you every Term (I can give you code =20=

for that), you first ask wich node contains that Term, and after, you =20=

send the Query to this nodes.

M.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 13:37:32 2008
Return-Path: <java-user-return-32915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91898 invoked from network); 2 Mar 2008 13:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 13:37:32 -0000
Received: (qmail 10565 invoked by uid 500); 2 Mar 2008 13:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10535 invoked by uid 500); 2 Mar 2008 13:37:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10524 invoked by uid 99); 2 Mar 2008 13:37:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 05:37:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 13:36:47 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6743284fkz.5
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 05:36:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=CH/KF4mWi/A7RcHEusxObwTLFOkhRlIhuasbv8prklA=;
        b=BsP7I4v+8fpVwfbj8ZzNKlEtl9W3dWJbBiuedflnRHhdjXo25glR9jj0gqa69UtvhQrXe/ELUmGeYYickMZrfH0fbknOuMy7MT8H9LitEIsDpUBXLr0ksoLwOsAMWijguGTMVMdvS7dHTxo6A1mZkFpq6l1DJThgIdTegmlJs5k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uU3xrRoCQkBRoAcmozt1xm7ZZFNEBrUFixgfGxGVuv6K5PAFh9XCWib47Om1eJzXyOl2ucm5q5SrwgvaeWBKYtNGju53cwcbMRy/jt9sAirhZTBIlumTpvO3HjxTcR8jpmtt3OndipqJ9PZERTiDQhKUDo3k1pUzLuvgU1gffWI=
Received: by 10.82.156.12 with SMTP id d12mr28300492bue.12.1204465015057;
        Sun, 02 Mar 2008 05:36:55 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 2 Mar 2008 05:36:50 -0800 (PST)
Message-ID: <359a92830803020536o16688752h6a55f83859a75ae4@mail.gmail.com>
Date: Sun, 2 Mar 2008 08:36:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for "Nothing"
In-Reply-To: <060101c87be0$20135dd0$0602a8c0@IBM3D2E684396F>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31414_33024219.1204465010046"
References: <060101c87be0$20135dd0$0602a8c0@IBM3D2E684396F>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31414_33024219.1204465010046
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The best and most deterministic way to answer this kind of question is
to download Luke and look at the explained query. That'll show you
exactly what the effect of different analyzers and the exact structure
of the resulting query.

Offhand, I don't think your rewrite will work.

Best
Erick

On Sat, Mar 1, 2008 at 4:06 PM, Ghinwa Choueiter <ghinwa@csail.mit.edu>
wrote:

> Hi,
>
> I am trying to do a search as follows (this is a very simplified example):
>
> I want to search for: (1) the little boy or (2) one little boy or (3)
> little boy
>
> Can I write the query as:
> "the OR one OR "" " AND "little" AND "boy"
>
> note that what I mean by "" is "Nothing".
>
> thank you,
> -Ghinwa
>
> PS. I know that I can write the query as "the little boy" OR "one little
> boy" OR "little boy"
>
>

------=_Part_31414_33024219.1204465010046--

From java-user-return-32916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 16:10:29 2008
Return-Path: <java-user-return-32916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89319 invoked from network); 2 Mar 2008 16:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 16:10:29 -0000
Received: (qmail 89901 invoked by uid 500); 2 Mar 2008 16:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89864 invoked by uid 500); 2 Mar 2008 16:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89853 invoked by uid 99); 2 Mar 2008 16:10:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 08:10:17 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 16:09:42 +0000
Received: by el-out-1112.google.com with SMTP id y26so797422ele.4
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 08:09:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=uPNKq2lu1FNCzL2XPjt1nn6xPZGQdyIYEr7INBTAimE=;
        b=GF5dd6gHJnByyldOjQ04CrRSYNbSQOAO7qmrkfxgRbnrQLudzCw6oIwMDO+h1KLOD7oeq75HTBCYg1Eat7q9wgLtoQ4BDlgNMzAxh0uTALR2vimJbB48yUu6EWWTlXH3Yzy5WUf1QNQUwQGT+rRODhMyc57yRZyRl1sDsCQioXM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=TkNUL8rZr0F9ww4GSUwIbgJ7w9p4VzHpPaBfr5Oi/k3F7n7jHxHcdMIwQREXcJdPjwmXioq7UFh6aLequo4gVjBP0wdfLvPheIxJ5eofgy8MyhSXc1aJ3ThF99BSuk4ocKWRrbnT9cM0eiLWpQ1iczITINyvPaOmZ1jcL8HYuX4=
Received: by 10.141.198.9 with SMTP id a9mr7440038rvq.219.1204474191539;
        Sun, 02 Mar 2008 08:09:51 -0800 (PST)
Received: by 10.141.84.9 with HTTP; Sun, 2 Mar 2008 08:09:51 -0800 (PST)
Message-ID: <b739adf00803020809r452d0a96w6734245da0e878b1@mail.gmail.com>
Date: Mon, 3 Mar 2008 00:09:51 +0800
From: "=?UTF-8?B?5LuH5a+F?=" <qiuyin04@software.nju.edu.cn>
Sender: allenchue@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Lucene support partition-by-keyword indexing?
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
	 <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
	 <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
	 <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com>
X-Google-Sender-Auth: 246eec7890214d43
X-Virus-Checked: Checked by ClamAV on apache.org

SGksCgpJIGFtIGp1c3QgZG9pbmcgc29tZSBzaW1wbGUgcmVzZWFyY2ggb24gUDJQIHNlYXJjaGVz
LiBJbiBteQphc3N1bXB0aW9uLCBhbGwgbm9kZXMgaW4gdGhpcyBzeXN0ZW0gaW5kZXggdGhlaXIg
b3duIGRvY3VtZW50cyBhbmQKZWFjaCBub2RlIHdpbGwgYmUgYWJsZSB0byBzZWFyY2ggYWxsIHRo
ZSBkb2N1bWVudHMgaW4gdGhlIG5ldHdvcmsKKGluY2x1ZGluZyBvdGhlcnMnKS4gVGhpcyBpcyBq
dXN0IGxpa2UgZmlsZSBzaGFyaW5nLiBUaGUgc2ltcGxlCmFwcHJvYWNoIGlzIHRvIGtlZXAgYWxs
IHRoZSBpbmRpY2VzIGxvY2FsbHkgYW5kIHRvIGZsb29kIHRoZSBxdWVyeQphbG9uZyB0aGUgbmV0
d29yay4gQnV0IHRoaXMgbWF5IGNvbnN1bWUgbXVjaCBuZXR3b3JrIGJhbmR3aWR0aCBiZWNhdXNl
CnRvbyBtdWNoIG5vZGVzLCB3aGljaCBhcmUgbm90IHJlbGV2YW50IHRvIG9uZSBjZXJ0YWluIHF1
ZXJ5LCBhcmUKaW52b2x2ZWQgaW4gaGFuZGxpbmcgYSBxdWVyeS4KClNvIEkgd2FudCB0byBpbnRy
b2R1Y2UgREhUIGludG8gbXkgc3lzdGVtIHRvIHNvbHZlIHRoaXMgcHJvYmxlbS4gRmlyc3QKbGV0
IG1lIGV4cGxhaW4gd2hhdCBESFQgaXMgaWYgeW91IGRvbid0IGtub3cgYWJvdXQgaXQuIERpc3Ry
aWJ1dGVkCkhhc2ggVGFibGUgaW1wbGVtZW50cyBhIGZ1bmN0aW9uIGxvb2t1cChrZXkpIG9uIGEg
UDJQIG92ZXJsYXkuIEl0CmZpbmRzIHRoZSBub2RlIG9mIG5vZGVJRCAibmVhcmVzdCIgIHRvIGEg
Y2VydGFpbiAia2V5IiBlZmZpY2llbnRseSwKdXN1YWxseSBpbiBsb2dOIGhvcHMsIHdoZXJlIE4g
aXMgdGhlIHRvdGFsIG51bWJlciBvZiBub2Rlcy4gSGVyZSB0aGUKY29uY2VwdCAibmVhcmVzdCIg
aXMgbm90IG5lY2Vzc2FyaWx5IGdlb2dyYXBoaWNhbGx5LCBidXQgaXMgZGVmaW5lZAp0aGUgREhU
IGltcGxlbWVudGF0aW9uLiBGb3IgZXhhbXBsZSwgb25lIGltcGxlbWVudGF0aW9uIHdvdWxkIGRl
ZmluZSBhCmtleSBpcyBuZWFyZXN0IHRvIGEgbm9kZUlEIHdoZW4gfG5vZGVJRC1rZXl8IGlzIHRo
ZSBtaW5pbXVtIHZhbHVlLiBESFQKaXMgd2lkZWx5IHVzZWQgaW4gUDJQIGZpbGUgc2hhcmluZyB0
b29scywgbGlrZSBBenVyZXVzIGFuZCBlTXVsZS4KCkluIG15IGRlc2lnbiwgd2h5IEkgd2FudCB0
byBwYXJ0aXRpb24gdGhlIGluZGljZXMgYnkga2V5d29yZCBpcyB0bwp3ZWxsIGZhY2lsaXRhdGUg
dGhpcyBsb29rdXAoa2V5KSBmdW5jdGlvbi4gU3VwcG9zZSB3ZSBoYXZlIHR3byB0ZXJtczoKQSBh
bmQgQi4gVGVybSBBJ3MgZG9jTGlzdCBjb250YWlucyAxLCAyLCBhbmQgMzsgd2hpbGUgdGVybSBC
J3MgZG9jTGlzdApjb250YWlucyAyLCAzLCBhbmQgNC4gVG8gcGFydGl0aW9uIHRoZSBpbmRpY2Vz
LCB3ZSBoYXNoZXMgdGVybXMgQSBhbmQKQiB0byB0d28ga2V5cy4gV2UgdHJhbnNmZXIgdGhlIGlu
ZGljZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgbm9kZXMKYWZ0ZXIgY2FsbGluZyBsb29rdXAoa2V5
KS4gVG8gaGFuZGxlIHRoaXMgcXVlcnksIHdlIHdvdWxkIGFnYWluIGhhc2gKdGhlc2UgdHdvIHRl
cm1zIHRvIHR3byBrZXlzLCBhbmQgbG9jYXRlIHRoZSBub2RlcyByZXNwb25zaWJsZSBmb3IgdGhl
CnRlcm1zLCByZXNwZWN0aXZlbHksIGFsc28gdXNpbmcgdGhlIGxvb2t1cChrZXkpIGZ1bmN0aW9u
LiBXZSBmaW5hbGx5CmRvIGFuIGludGVyc2VjdGlvbiBhbmQgZ2V0IHRoZSByZXN1bHQgIjIgYW5k
IDMiLiBPZiBjb3Vyc2UgaGVyZSB3ZQpvbmx5IGdldCBhIHBvaW50ZXIgdG8gdGhlIGFjdHVhbCBp
bmRleGVkIGRvY3VtZW50LCBzbyB3ZSBzdGlsbCB0bwpmZXRjaCB0aGUgZG9jdW1lbnQgY29udGVu
dCBhZnRlciB0aGlzLgoKQW5kIEkgZG9uJ3QgdGhpbmsgdGhpcyBzY2hlbWUgYnJpbmdzIGxvdHMg
b2Ygc2luZ2xlIHBvaW50IG9mIGZhaWx1cmVzCmJlY2F1c2UgaW5kaWNlcyBjYW4gYmUgcmVwbGlj
YXRlZCBvbiBzZXZlcmFsIG5vZGVzIHdob3NlIG5vZGVJRCdzIGFyZQpuZWFyIHRvIGVhY2ggb3Ro
ZXIuIEV2ZW4gb25lIG5vZGUgaXMgZG93biwgdGhlIGxvb2t1cChrZXkpIGZ1bmN0aW9uCnN0aWxs
IGZpbmRzIGEgc3Vic3RpdHV0aW5nIG5vZGUuCgpBcyBJIGRvbid0IGtub3cgaG93IHRvIHBhcnRp
dGlvbiB0aGUgaW5kaWNlcyBieSBrZXl3b3JkIHlldCwgbXkgZGVzaWduCm5vdyBpcyB0byBrZWVw
IHRoZSBMdWNlbmUgaW5kaWNlcyBsb2NhbGx5IGFuZCB3cml0ZXMgdGhlIHNpbXBsaWZpZWQKaW52
ZXJ0ZWQgaW5kaWNlcyB0byB0aGUgbm9kZXMgcmVzcG9uc2libGUgZm9yIGNlcnRhaW4ga2V5d29y
ZHMuIEZvcgpleGFtcGxlLCBub2RlIFggaGFzIHRoZSBwb3N0aW5ncyBsaWtlOgoKdGVybUE6IGRv
YzEsIGRvYzIsIGRvYzMKdGVybUI6IGRvYzIsIGRvYzMsIGRvYzQKCmFuZCBsb29rdXAoaGFzaCh0
ZXJtQSkpIHJldHVybnMgbm9kZSBZLCBsb29rdXAoaGFzaCh0ZXJtQikpIHJldHVybnMgbm9kZSBa
LgoKVGhlbiBpbiB0aGUgaW5kZXhpbmcgcHJvY2Vzcywgbm9kZSBYIHdyaXRlcyB0aGUgaW5mbyAi
dGVybUE6Cm5vZGVYLmRvYzEsIG5vZGVYLmRvYzIsIG5vZGVYLmRvYzMiIG9uIG5vZGUgWSwgYW4g
dGhlIGluZm8gInRlcm1COgpub2RlWC5kb2MyLCBub2RlWC5kb2MzLCBub2RlWC5kb2M0IiBvbiBu
b2RlIFouIEF0IHRoZSBmaW5hbCBzdGVwLCB3ZQpmb2xsb3cgdGhpcyBpbmZvIGFuZCBnbyBiYWNr
IHRvIG5vZGUgWCB0byBnZXQgdGhlIEx1Y2VuZSBGaWVsZCB2YWx1ZXMKYW5kIHRoZSByZWFsIGRv
Y3VtZW50cy4KCkFueSBpZGVhIG9yIGZlZWRiYWNrIG9uIG15IHByZWxpbWluYXJ5IGRlc2lnbj8K
Ck9uIFN1biwgTWFyIDIsIDIwMDggYXQgMzo0OCBQTSwgVXdlIEdvZXR6a2UKPHV3ZS5nb2V0emtl
QGhlYWx5LWh1ZHNvbi5jb20+IHdyb3RlOgo+IEhpLAo+Cj4gIEkgZG8gbm90IHlldCBmdWxseSB1
bmRlcnN0YW5kIHdoYXQgeW91IHdhbnQgdG8gYWNoaWV2ZS4KPiAgWW91IHdhbnQgdG8gc3ByZWFk
IHRoZSBpbmRleCBzcGxpdCBieSBrZXl3b3JkcyB0byByZWR1Y2UgdGhlIHRpbWUgdG8gZGlzdHJp
YnV0ZSBpbmRleGVzPwo+ICBBbmQgeW91IHdhbnQgdGhlIGRpc3RyaWJ1dGUgcXVlcmllcyB0byB0
aGUgbm9kZXMgYmFzZWQgb24gdGhlIHNhbWUgc3BsaXQgbWVjaGFuaXNtPwo+Cj4KPiAgWW91IGhh
dmUgc2V2ZXJhbCBub2RlcyB3aXRoIGRpZmZlcmVudCBraW5kIG9mIGRvY3VtZW50cy4KPiAgWW91
IHdhbnQgdG8gYnVpbGQgb25lIGluZGV4IGZvciBhbGwgbm9kZXMgYW5kIHNwbGl0IGFuZCBkaXN0
cmlidXRlIHRoZSBpbmRleCBiYXNlZCBvbiBhIHNldCBvZiBrZXl3b3JkcyBzcGVjaWZpYyB0byBh
IG5vZGUuIFRoaXMgeW91IHdhbnQgdG8gZG8gdG8gc3BsaXQgdGhlIHF1ZXJpZXMgc28gImVhY2gg
cXVlcnkgaW52b2x2ZXMgY29tbXVuaWNhdGluZyB3aXRoIGNvbnN0YW50IG51bWJlciBvZiBub2Rl
cyIuCj4KPiAgRG8gZG9jdW1lbnRzIGF0IHRoZSBub2RlcyBjb250YWluIG9ubHkgc3VjaCBrZXl3
b3Jkcz8gSSBkb3VidC4KPiAgU28geW91IG5lZWQgYW55d2F5IGEgcmVmZXJlbmNlIHdoZXJlIHRo
ZSBpbmRleGVkIGRvYyBjYW4gYmUgZm91bmQgYW5kIHJldHJpZXZlIGl0IGZyb20gaXRzIG5vZGUg
Zm9yIGRpc3BsYXkuCj4gIFlvdSBjb3VsZCBpbmRleCBhdCBlYWNoIG5vZGUsIG1lcmdlIGFsbCBp
bmRleGVzIGZyb20gYWxsIG5vZGVzIGFuZCBkaXN0cmlidXRlIHRoZSBjb21iaW5lZCBpbmRleC4K
PiAgT24gd2hhdCBjcml0ZXJpYSB5b3UgY2FuIHNwbGl0IHRoZSBxdWVyaWVzPyBJZiB5b3UgaGF2
ZSBhIGNvbWJpbmVkIGluZGV4IGVhY2ggbm9kZSBjYW4gZGlzdHJpYnV0ZSB0aGUgcXVlcmllcyB0
byBvdGhlciBub2RlcyBvbiBzdGF0aXN0aWNhbCBkYXRhIGZvdW5kIGluIHRoZSB0ZXJtIGRpc3Ry
aWJ1dGlvbi4KPiAgWW91IG5lZWQgdG8gbWVyZ2UgdGhlIHJlc3VsdHMgYW55d2F5Lgo+Cj4gIEkg
ZG91YnQgdGhhdCB0aGlzIGtpbmQgb2Ygb3ZlcmhlYWQgaXMgd29ydGggdGhlIHRyb3VibGUgYmVj
YXVzZSB5b3UgaW50cm9kdWNlIGEgbG90IG9mIHNpbmdsZSBwb2ludHMgb2YgZmFpbHVyZS4gQW5k
IHRoZSBzY2FsYWJpbGl0eSBzZWVtcyBsaW1pdGVkIGJlY2F1c2UgeW91IHdvdWxkIG5lZWQgdG8g
cmVjYWxpYnJhdGUgdGhlIHdob2xlIG5ldHdvcmsgd2hlbiBhIGFkZGluZyBhIG5ldyBub2RlLiBX
aHkgZG9uJ3QgeW91IGRpc3RyaWJ1dGUgdGhlIGNvbXBsZXRlIGluZGV4ICh3ZSBkbyB0aGlzIGFm
dGVyIGdldHRpbmcgaXQgbG9jYWxseSB6aXBwZWQgYW5kIGxhdGVyIHVuemlwcGVkIG9uIHRoZSBy
ZWNlaXZlciBub2RlLCBzaXplIGlzIGxlc3MgdGhhbiBvbmUgdGhpcmQgZm9yIHRyYW5zZmVyaW5n
KS4gRWFjaCBub2RlIHNob3VsZCBoYXZlIHNvbWUgYWN0aXZpdHkgaW5kaWNhdG9yLiBEaXN0cmli
dXRlIHRoZSBjb21wbGV0ZSBxdWVyeSB0byB0aGUgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBhY3Rp
dml5LiBTbyB5b3UgZ2V0IHJlZHVuZGFuY3ksIGRvIG5vdCBuZWVkIHRvIHNwbGl0IHF1ZXJpZXMg
YW5kIG1lcmdlIHJlc3VsdHMuIE9LLCBvbmUgImV2aWwiIHF1ZXJ5IGNhbiBicmluZyBhIG5vZGUg
ImRvd24iIGJ1dCB0aGUgbmV0d29yayBpcyBzdGlsbCB3b3JraW5nLgo+Cj4gIERvIHlvdSBoYXZl
IGFueSByZXN1bHRzIHVzaW5nIGx1Y2VuZSBvbiBhIHNpbmdsZSBub2RlIGZvciB5b3VyIGFwcHJv
YWNoPyBIb3cgbWFueSBxdWVyaWVzIGFuZCBob3cgbWFueSBkb2N1bWVudHMgZG8geW91IGV4cGVj
dD8KPgo+ICBSZWdhcmRzCj4KPiAgVXdlCj4KPiAgLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmlj
aHQtLS0tLQo+ICBWb246IGFsbGVuY2h1ZUBnbWFpbC5jb20gW21haWx0bzphbGxlbmNodWVAZ21h
aWwuY29tXSBJbSBBdWZ0cmFnIHZvbiA/Pwo+ICBHZXNlbmRldDogU29ubnRhZywgMi4gTcOkcnog
MjAwOCAwMzowNQo+ICBBbjogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gIEJldHJlZmY6
IFJlOiBEb2VzIEx1Y2VuZSBzdXBwb3J0IHBhcnRpdGlvbi1ieS1rZXl3b3JkIGluZGV4aW5nPwo+
Cj4KPgo+ICBIaSwKPgo+ICBJIGFncmVlIHdpdGggeW91ciBwb2ludCB0aGF0IGl0IGlzIGVhc2ll
ciB0byBwYXJ0aXRpb24gaW5kZXggYnkgZG9jdW1lbnQuCj4gIEJ1dCB0aGUgcGFydGl0aW9uLWJ5
LWtleXdvcmQgYXBwcm9hY2ggaGFzIG11Y2ggZ3JlYXRlciBzY2FsYWJpbGl0eSBvdmVyIHRoZQo+
ICBwYXJ0aXRpb24tYnktZG9jdW1lbnQgYXBwcm9hY2guIEVhY2ggcXVlcnkgaW52b2x2ZXMgY29t
bXVuaWNhdGluZyB3aXRoCj4gIGNvbnN0YW50IG51bWJlciBvZiBub2Rlczsgd2hpbGUgcGFydGl0
aW9uLWJ5LWRvYyByZXF1aXJlcyBzcHJlYWRpbmcgdGhlCj4gIHF1ZXJ5IGEgbG9uZyBhbGwgb3Ig
bWFueSBvZiB0aGUgbm9kZXMuIEFuZCBJIGFtIGFjdHVhbGx5IGRvaW5nIHNvbWUgc21hbGwKPiAg
cmVzZWFyY2ggb24gdGhpcy4gQnkgdGhlIHdheSwgdGhlIGRvY3VtZW50cyB0byBiZSBpbmRleGVk
IGFyZSBub3QKPiAgbmVjZXNzYXJpbHkgd2ViIHBhZ2VzLiBUaGV5IGFyZSBtb3N0bHkgZmlsZXMg
c3RvcmVkIG9uIGVhY2ggbm9kZSdzIGZpbGUKPiAgc3lzdGVtLgo+Cj4gIE5vZGUgZmFpbHVyZXMg
YXJlIGFsc28gaGFuZGxlZCBieSByZXBsaWNhcy4gVGhlIGluZGV4IGZvciBlYWNoIHRlcm0gd2ls
bCBiZQo+ICByZXBsaWNhdGVkIG9uIG11bHRpcGxlIG5vZGVzLCB3aG9zZSBub2RlSURzIGFyZSBu
ZWFyIHRvIGVhY2ggb3RoZXIuIFRoaXMKPiAgbWVjaGFuaXNtIGlzIGhhbmRsZWQgYnkgdGhlIHVu
ZGVybHlpbmcgREhUIHN5c3RlbS4KPgo+ICBTbyBhbnkgaWRlYSBob3cgY2FuIHBhcnRpdGlvbiBp
bmRleCBieSBrZXl3b3JkIGluIGx1Y2VuZT8gVGhhbmtzLgo+Cj4gIE9uIFN1biwgTWFyIDIsIDIw
MDggYXQgNTo1MCBBTSwgTWF0aGlldSBMZWNhcm1lIDxtYXRoaWV1QGdhcmFtYnJvZ25lLm5ldD4K
PiAgd3JvdGU6Cj4KPiAgPiBUaGUgZWFzaWVzdCB3YXkgaXMgdG8gc3BsaXQgaW5kZXggYnkgRG9j
dW1lbnQuIEluIEx1Y2VuZSwgaW5kZXgKPiAgPiBjb250YWlucyBEb2N1bWVudCBhbmQgaW52ZXJz
ZSBpbmRleCBvZiBUZXJtLiBJZiB5b3Ugd29udCB0byBwdXQgVGVybQo+ICA+IGluIGRpZmZlcmVu
dCBwbGFjZSwgRG9jdW1lbnQgd2lsbCBiZSBkdXBsaWNhdGVkIG9uIGVhY2ggaW5kZXgsIHdpdGgK
PiAgPiBvbmx5IGEgcGFydCBvZiB0aGVpciBUZXJtLgo+ICA+Cj4gID4gSG93IHdpbGwgeW91IG1h
bmFnZSBub2RlIGZhaWx1cmUgaW4geW91ciBuZXR3b3JrPwo+ICA+Cj4gID4gVGhleSB3ZXJlIHNv
bWUgdHJpYWwgdG8gYnVpbGQgYmlnIHAycCBzZWFyY2ggZW5naW5lIHRvIGNvbXBldCB3aXRoCj4g
ID4gR29vZ2xlLCBidXQsIGl0IHdpbGwgYmUgZWFzaWVyIHRvIHNwbGl0IGJ5IERvY3VtZW50Lgo+
ICA+Cj4gID4gSWYgeW91IGhhdmUgdG8gbWFueSBjb21wdXRlcnMgYW5kIHdhbnQgdG8gc2VlIHRo
ZW0gd29ya2luZyB0b2dldGhlciwKPiAgPiB3aHkgZG9uJ3QgdXNlIE51dGNoIHdpdGggSGFkb29w
Pwo+ICA+Cj4gID4gTS4KPiAgPiBMZSAxIG1hcnMgMDggw6AgMTk6MTYsIFlpbiBRaXUgYSDDqWNy
aXQgOgo+ICA+Cj4gID4gPiBIaSwKPiAgPiA+Cj4gID4gPiBJJ20gcGxhbm5pbmcgdG8gaW1wbGVt
ZW50IGEgc2VhcmNoIGluZnJhc3RydWN0dXJlIG9uIGEgUDJQIG92ZXJsYXkuIFRvCj4gID4gPiBh
Y2hpZXZlIHRoaXMsIEkgd2FudCB0byBmaXJzdCBkaXN0cmlidXRlIHRoZSBpbmRpY2VzIHRvIHZh
cmlvdXMgbm9kZXMKPiAgPiA+IGNvbm5lY3RlZCBieSB0aGlzIG92ZXJsYXkuIE15IGFwcHJvYWNo
IGlzIHRvIHBhcnRpdGlvbiB0aGUgaW5kaWNlcyBieQo+ICA+ID4ga2V5d29yZCwgdGhhdCBpcywg
b25lIG5vZGUgdGFrZXMgY2FyZSBvZiBjZXJ0YWluIGtleXdvcmRzIChvcgo+ICA+ID4gdGVybXMp
LiBXaGVuIGEKPiAgPiA+IHNpbXBsZSBUZXJtUXVlcnkgaXMgZW5jb3VudGVyZWQsIHdlIGp1c3Qg
ZmluZCB0aGUgbm9kZSBhc3NvY2lhdGVkCj4gID4gPiB3aXRoIHRoYXQKPiAgPiA+IHRlcm0gKHdp
dGggZGlzdHJpYnV0ZWQgaGFzaCB0YWJsZSkgYW5kIGdldCB0aGUgcmVzdWx0LiBBbmQgc3VwcG9z
ZSBhCj4gID4gPiBCb29sZWFuUXVlcnkgaXMgaXNzdWVkLCB3ZSBjb250YWN0IGFsbCB0aGUgbm9k
ZXMgaW52b2x2ZWQgaW4gdGhpcwo+ICA+ID4gcXVlcnkgYW5kCj4gID4gPiBmaW5hbGx5IG1lcmdl
IHRoZSByZXN1bHQuCj4gID4gPgo+ICA+ID4gU28gbXkgcXVlc3Rpb24gaXM6IGRvZXMgTHVjZW5l
IHN1cHBvcnQgcGFydGl0aW9uaW5nIHRoZSBpbmRpY2VzIGJ5Cj4gID4gPiBrZXl3b3Jkcz8KPiAg
PiA+Cj4gID4gPiBUaGFua3MgaW4gYWR2YW5jZS4KPiAgPiA+Cj4gID4gPiAtLQo+ICA+ID4gTG9v
ayBiZWZvcmUgeW91IGxlYXAKPiAgPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KPiAgPgo+ICA+Cj4gID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gID4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gID4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPiAgPgo+ICA+Cj4KPgo+ICAtLQo+ICBMb29rIGJlZm9yZSB5b3UgbGVhcAo+ICAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4KPiAgLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KPiAgSGVhbHkgSHVkc29uIEdtYkggLSBELTU1MjUyIE1haW56IEthc3RlbAo+ICBHZXNj
aMOkZnRzZsO8aHJlciBDaHJpc3RpYW4gS29uaMOkdXNlciAtIEFtdHNnZXJpY2h0IFdpZXNiYWRl
biBIUkIgMTIwNzYKPgo+ICBEaWVzZSBFbWFpbCBpc3QgdmVydHJhdWxpY2guIFdlbm4gU2llIG5p
Y2h0IGRlciBiZWFic2ljaHRpZ3RlIEVtcGbDpG5nZXIgc2luZCwgZMO8cmZlbiBTaWUgZGllIElu
Zm9ybWF0aW9uZW4gbmljaHQgb2ZmZW4gbGVnZW4gb2RlciBiZW51dHplbi4gV2VubiBTaWUgZGll
c2UgRW1haWwgZHVyY2ggZWluZW4gRmVobGVyIGJla29tbWVuIGhhYmVuLCB0ZWlsZW4gU2llIHVu
cyBkaWVzIGJpdHRlIHVtZ2VoZW5kIG1pdCwgaW5kZW0gU2llIGRpZXNlIEVtYWlsIGFuIGRlbiBB
YnNlbmRlciB6dXLDvGNrc2NoaWNrZW4uIEJpdHRlIGzDtnNjaGVuIFNpZSBkYW5hY2ggZGllc2Ug
RW1haWwuCj4gIFRoaXMgZW1haWwgaXMgY29uZmlkZW50aWFsLiBJZiB5b3UgYXJlIG5vdCB0aGUg
aW50ZW5kZWQgcmVjaXBpZW50LCB5b3UgbXVzdCBub3QgZGlzY2xvc2Ugb3IgdXNlIHRoaXMgaW5m
b3JtYXRpb24gY29udGFpbmVkIGluIGl0LiBJZiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGVtYWls
IGluIGVycm9yIHBsZWFzZSB0ZWxsIHVzIGltbWVkaWF0ZWx5IGJ5IHJldHVybiBlbWFpbCBhbmQg
ZGVsZXRlIHRoZSBkb2N1bWVudC4KPgo+Cj4KPgo+ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4g
IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnCj4KPgoKCgotLSAKTG9vayBiZWZvcmUgeW91IGxlYXAKLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo=


From java-user-return-32917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 16:17:45 2008
Return-Path: <java-user-return-32917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92763 invoked from network); 2 Mar 2008 16:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 16:17:45 -0000
Received: (qmail 95799 invoked by uid 500); 2 Mar 2008 16:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95770 invoked by uid 500); 2 Mar 2008 16:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95759 invoked by uid 99); 2 Mar 2008 16:17:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 08:17:34 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 16:17:00 +0000
Received: by rv-out-0910.google.com with SMTP id k20so4036186rvb.5
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 08:17:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        bh=4V5eKqmx/YaIY0WIOIPxkFYiEdDly4Qqa2bI7l4nkSo=;
        b=rZtjMlLiX8rsNksooY8LwAQIzbH0sIuNjzxvWiBDh3zxbYr4KTu7ANVVVkJLzatmpRV0V2soatq/EHlMkY0X50kOWUAUdZbtDn9JUlkAfB5bMOo6MKfpinodWlzRcHnVYJXxEhqNePKUfkY0h5IZhcr4EpfW8bbCSQ9627sk3/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=XG5VoF8pvkL6uQidqMZ5OO70vpCyOLJ23Egc4279j0JA73goEbfKI2RmC9RC9o6VuSQ7GjLZsEF9gw8lcbx2tbz2WrnOg0pABDpomaBoeNnmOD6IijqGgrD0QK/1pLMaBNuHpOKHyT/ETpGHJp/ZWhOYL+Npnu3Rjn5ICJkIREw=
Received: by 10.141.170.10 with SMTP id x10mr7438660rvo.139.1204474630838;
        Sun, 02 Mar 2008 08:17:10 -0800 (PST)
Received: by 10.141.84.9 with HTTP; Sun, 2 Mar 2008 08:17:10 -0800 (PST)
Message-ID: <b739adf00803020817s3a38b636n9c642ec9837140b3@mail.gmail.com>
Date: Mon, 3 Mar 2008 00:17:10 +0800
From: "=?UTF-8?B?5LuH5a+F?=" <qiuyin04@software.nju.edu.cn>
Sender: allenchue@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Lucene support partition-by-keyword indexing?
In-Reply-To: <CD7E62C4-6D9F-49DD-8C38-D48A0083B972@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3678_23565556.1204474630850"
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
	 <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
	 <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
	 <CD7E62C4-6D9F-49DD-8C38-D48A0083B972@garambrogne.net>
X-Google-Sender-Auth: b99b4f985dc6829e
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3678_23565556.1204474630850
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgTWF0aGlldSwKCkkgaG9wZSBteSBwcmV2aW91cyBtYWlsIGhhcyBleHBsYWluZWQgc29tZXRo
aW5nLiBNeSBvYmplY3RpdmUgaXMganVzdCB0byBkbwpzb21lIHNpbXBsZSByZXNlYXJjaCBhbmQg
dG8gZGVtb25zdHJhdGUgdGhlIGZlYXNpYmlsaXR5LCBzbyB3ZSBjYW4gbGVhdmUKb3RoZXIgb3B0
aW9ucyBhbG9uZS4gQW5kIHlvdSB0YWxrZWQgYWJvdXQgY2FjaGluZy4gWWVzLCB0aGF0IHdpbGwg
YWxzbyBiZSBteQpjb25jZXJuLiBUaGFua3MgZm9yIHlvdXIgYWR2aWNlIHRob3VnaC4KCk9uIFN1
biwgTWFyIDIsIDIwMDggYXQgNzo0NCBQTSwgTWF0aGlldSBMZWNhcm1lIDxtYXRoaWV1QGdhcmFt
YnJvZ25lLm5ldD4Kd3JvdGU6Cgo+Cj4gTGUgMiBtYXJzIDA4IMOgIDAzOjA1LCDku4flr4UgYSDD
qWNyaXQgOgo+Cj4gPiBIaSwKPiA+Cj4gPiBJIGFncmVlIHdpdGggeW91ciBwb2ludCB0aGF0IGl0
IGlzIGVhc2llciB0byBwYXJ0aXRpb24gaW5kZXggYnkKPiA+IGRvY3VtZW50Lgo+ID4gQnV0IHRo
ZSBwYXJ0aXRpb24tYnkta2V5d29yZCBhcHByb2FjaCBoYXMgbXVjaCBncmVhdGVyIHNjYWxhYmls
aXR5Cj4gPiBvdmVyIHRoZQo+ID4gcGFydGl0aW9uLWJ5LWRvY3VtZW50IGFwcHJvYWNoLiBFYWNo
IHF1ZXJ5IGludm9sdmVzIGNvbW11bmljYXRpbmcgd2l0aAo+ID4gY29uc3RhbnQgbnVtYmVyIG9m
IG5vZGVzOyB3aGlsZSBwYXJ0aXRpb24tYnktZG9jIHJlcXVpcmVzIHNwcmVhZGluZwo+ID4gdGhl
Cj4gPiBxdWVyeSBhIGxvbmcgYWxsIG9yIG1hbnkgb2YgdGhlIG5vZGVzLiBBbmQgSSBhbSBhY3R1
YWxseSBkb2luZyBzb21lCj4gPiBzbWFsbAo+ID4gcmVzZWFyY2ggb24gdGhpcy4gQnkgdGhlIHdh
eSwgdGhlIGRvY3VtZW50cyB0byBiZSBpbmRleGVkIGFyZSBub3QKPiA+IG5lY2Vzc2FyaWx5IHdl
YiBwYWdlcy4gVGhleSBhcmUgbW9zdGx5IGZpbGVzIHN0b3JlZCBvbiBlYWNoIG5vZGUncwo+ID4g
ZmlsZQo+ID4gc3lzdGVtLgo+ID4KPiA+IE5vZGUgZmFpbHVyZXMgYXJlIGFsc28gaGFuZGxlZCBi
eSByZXBsaWNhcy4gVGhlIGluZGV4IGZvciBlYWNoIHRlcm0KPiA+IHdpbGwgYmUKPiA+IHJlcGxp
Y2F0ZWQgb24gbXVsdGlwbGUgbm9kZXMsIHdob3NlIG5vZGVJRHMgYXJlIG5lYXIgdG8gZWFjaCBv
dGhlci4KPiA+IFRoaXMKPiA+IG1lY2hhbmlzbSBpcyBoYW5kbGVkIGJ5IHRoZSB1bmRlcmx5aW5n
IERIVCBzeXN0ZW0uCj4gPgo+ID4gU28gYW55IGlkZWEgaG93IGNhbiBwYXJ0aXRpb24gaW5kZXgg
Ynkga2V5d29yZCBpbiBsdWNlbmU/IFRoYW5rcy4KPgo+IFdoZW4geW91IHJlYWQgYSBmaWxlLCBh
bmQgdG9rZW5pemUgaXQsIHlvdSBkaXNwYXRjaCB0b2tlbiBpbgo+IGRpZmZlcmVudHMgaW5kZXgs
IHdpdGggYSB1bmlxdWUgRG9jdW1lbnQgSUQuCj4KPiBDYW4geW91IGV4cGxhaW4gbW9yZSB0aGlu
Z3MgYWJvdXQgdGhlIGNvbnRleHQgb2YgeW91ciBhcHBsaWNhdGlvbj8KPgo+IEkgZG9uJ3Qga25v
dyB3aHkgeW91IG5lZWQgUDJQLiBJcyBpdCBmb3IgZmlsZSBzaGFyaW5nPyBzbywgaW5kZXgKPiBz
aG91bGQgYmUgbmVhciBkb2N1bWVudC4KPiBJcyBpdCBmb3IgZGlzdHJpYnV0ZWQgY29tcHV0ZWQ/
IHVzZSBjZW50cmFsIGRhdGEgYW5kIGhhZG9vcCBNYXAvUmVkdWNlLgo+IElmIHlvdSB3b250IGEg
Y2x1c3RlciBvZiBsdWNlbmUgZm9yIGhlYXZ5IHF1ZXJ5aW5nLCB1c2UgdGhlIHJzeW5jICsgbXYK
PiB0cmljayBvZiBUZWNobm9yYXRpLgo+IElmIHlvdSBwZXJzaXN0IHdpdGggVGVybSBkaXNwYXRj
aGluZywgdXNlIGl0IG9ubHkgZm9yIGNhY2hpbmcuIEVhY2gKPiBub2RlIHByb3ZpZGVzIGEgVGVy
bSBpbmRleCBvZiB0aGVpciBEb2N1bWVudC4gV2hlbiB5b3Ugc2VhcmNoCj4gc29tZXRoaW5nLCB0
aGUgcGFyc2VkIHF1ZXJ5IGdpdmVzIHlvdSBldmVyeSBUZXJtIChJIGNhbiBnaXZlIHlvdSBjb2Rl
Cj4gZm9yIHRoYXQpLCB5b3UgZmlyc3QgYXNrIHdpY2ggbm9kZSBjb250YWlucyB0aGF0IFRlcm0s
IGFuZCBhZnRlciwgeW91Cj4gc2VuZCB0aGUgUXVlcnkgdG8gdGhpcyBub2Rlcy4KPgo+IE0uCj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCkxvb2sgYmVmb3JlIHlv
dSBsZWFwCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
------=_Part_3678_23565556.1204474630850--

From java-user-return-32918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 17:31:34 2008
Return-Path: <java-user-return-32918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8066 invoked from network); 2 Mar 2008 17:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 17:31:34 -0000
Received: (qmail 48667 invoked by uid 500); 2 Mar 2008 17:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48625 invoked by uid 500); 2 Mar 2008 17:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48614 invoked by uid 99); 2 Mar 2008 17:31:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 09:31:22 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 17:30:47 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 6C8C712B737
	for <java-user@lucene.apache.org>; Sun,  2 Mar 2008 18:30:54 +0100 (CET)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 2FF6012B72E
	for <java-user@lucene.apache.org>; Sun,  2 Mar 2008 18:30:54 +0100 (CET)
Message-Id: <B6DCFBFA-5930-43DD-9181-8508803B4113@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <b739adf00803020809r452d0a96w6734245da0e878b1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Does Lucene support partition-by-keyword indexing?
Date: Sun, 2 Mar 2008 18:30:52 +0100
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com> <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net> <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com> <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com> <b739adf00803020809r452d0a96w6734245da0e878b1@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your clean and long answer.

With Term splitted on different node you've got different drawback :
PrefixQuery and FuzzyQuery will be very hard to implement.

Your DHT look very nice, but Bittorrent, the best bandwidth consumer =20
in the world (something like 30% of the Internet), made the choice to =20=

centralize this bottleneck. But recently, Bittorrent can be used =20
trackerless.
When you read Google withe paper, more about cluster computing than =20
p2p computing, I agree, it says that one conductor (with redundancy) =20
is better than spreading and broadcasting information.
The trouble is to be sure that every node is synchronized, and waiting =20=

for the latest. Redundant reliable information is not very compatible =20=

with P2P, IMHO, redundant caching should be better.

Your dichotomic approach looks nice, first a simple action to know =20
wich node to ask, and after, consolidation of the answers.

In your scheme, where are indexed documents? Each letter node contains =20=

their own documents?

M.

Le 2 mars 08 =C3=A0 17:09, =E4=BB=87=E5=AF=85 a =C3=A9crit :

> Hi,
>
> I am just doing some simple research on P2P searches. In my
> assumption, all nodes in this system index their own documents and
> each node will be able to search all the documents in the network
> (including others'). This is just like file sharing. The simple
> approach is to keep all the indices locally and to flood the query
> along the network. But this may consume much network bandwidth because
> too much nodes, which are not relevant to one certain query, are
> involved in handling a query.
>
> So I want to introduce DHT into my system to solve this problem. First
> let me explain what DHT is if you don't know about it. Distributed
> Hash Table implements a function lookup(key) on a P2P overlay. It
> finds the node of nodeID "nearest"  to a certain "key" efficiently,
> usually in logN hops, where N is the total number of nodes. Here the
> concept "nearest" is not necessarily geographically, but is defined
> the DHT implementation. For example, one implementation would define a
> key is nearest to a nodeID when |nodeID-key| is the minimum value. DHT
> is widely used in P2P file sharing tools, like Azureus and eMule.
>
> In my design, why I want to partition the indices by keyword is to
> well facilitate this lookup(key) function. Suppose we have two terms:
> A and B. Term A's docList contains 1, 2, and 3; while term B's docList
> contains 2, 3, and 4. To partition the indices, we hashes terms A and
> B to two keys. We transfer the indices to the corresponding nodes
> after calling lookup(key). To handle this query, we would again hash
> these two terms to two keys, and locate the nodes responsible for the
> terms, respectively, also using the lookup(key) function. We finally
> do an intersection and get the result "2 and 3". Of course here we
> only get a pointer to the actual indexed document, so we still to
> fetch the document content after this.
>
> And I don't think this scheme brings lots of single point of failures
> because indices can be replicated on several nodes whose nodeID's are
> near to each other. Even one node is down, the lookup(key) function
> still finds a substituting node.
>
> As I don't know how to partition the indices by keyword yet, my design
> now is to keep the Lucene indices locally and writes the simplified
> inverted indices to the nodes responsible for certain keywords. For
> example, node X has the postings like:
>
> termA: doc1, doc2, doc3
> termB: doc2, doc3, doc4
>
> and lookup(hash(termA)) returns node Y, lookup(hash(termB)) returns =20=

> node Z.
>
> Then in the indexing process, node X writes the info "termA:
> nodeX.doc1, nodeX.doc2, nodeX.doc3" on node Y, an the info "termB:
> nodeX.doc2, nodeX.doc3, nodeX.doc4" on node Z. At the final step, we
> follow this info and go back to node X to get the Lucene Field values
> and the real documents.
>
> Any idea or feedback on my preliminary design?
>
> On Sun, Mar 2, 2008 at 3:48 PM, Uwe Goetzke
> <uwe.goetzke@healy-hudson.com> wrote:
>> Hi,
>>
>> I do not yet fully understand what you want to achieve.
>> You want to spread the index split by keywords to reduce the time =20
>> to distribute indexes?
>> And you want the distribute queries to the nodes based on the same =20=

>> split mechanism?
>>
>>
>> You have several nodes with different kind of documents.
>> You want to build one index for all nodes and split and distribute =20=

>> the index based on a set of keywords specific to a node. This you =20
>> want to do to split the queries so "each query involves =20
>> communicating with constant number of nodes".
>>
>> Do documents at the nodes contain only such keywords? I doubt.
>> So you need anyway a reference where the indexed doc can be found =20
>> and retrieve it from its node for display.
>> You could index at each node, merge all indexes from all nodes and =20=

>> distribute the combined index.
>> On what criteria you can split the queries? If you have a combined =20=

>> index each node can distribute the queries to other nodes on =20
>> statistical data found in the term distribution.
>> You need to merge the results anyway.
>>
>> I doubt that this kind of overhead is worth the trouble because you =20=

>> introduce a lot of single points of failure. And the scalability =20
>> seems limited because you would need to recalibrate the whole =20
>> network when a adding a new node. Why don't you distribute the =20
>> complete index (we do this after getting it locally zipped and =20
>> later unzipped on the receiver node, size is less than one third =20
>> for transfering). Each node should have some activity indicator. =20
>> Distribute the complete query to the node with the smallest =20
>> activiy. So you get redundancy, do not need to split queries and =20
>> merge results. OK, one "evil" query can bring a node "down" but the =20=

>> network is still working.
>>
>> Do you have any results using lucene on a single node for your =20
>> approach? How many queries and how many documents do you expect?
>>
>> Regards
>>
>> Uwe
>>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: allenchue@gmail.com [mailto:allenchue@gmail.com] Im Auftrag =20
>> von ??
>> Gesendet: Sonntag, 2. M=C3=A4rz 2008 03:05
>> An: java-user@lucene.apache.org
>> Betreff: Re: Does Lucene support partition-by-keyword indexing?
>>
>>
>>
>> Hi,
>>
>> I agree with your point that it is easier to partition index by =20
>> document.
>> But the partition-by-keyword approach has much greater scalability =20=

>> over the
>> partition-by-document approach. Each query involves communicating =20
>> with
>> constant number of nodes; while partition-by-doc requires spreading =20=

>> the
>> query a long all or many of the nodes. And I am actually doing some =20=

>> small
>> research on this. By the way, the documents to be indexed are not
>> necessarily web pages. They are mostly files stored on each node's =20=

>> file
>> system.
>>
>> Node failures are also handled by replicas. The index for each term =20=

>> will be
>> replicated on multiple nodes, whose nodeIDs are near to each other. =20=

>> This
>> mechanism is handled by the underlying DHT system.
>>
>> So any idea how can partition index by keyword in lucene? Thanks.
>>
>> On Sun, Mar 2, 2008 at 5:50 AM, Mathieu Lecarme =
<mathieu@garambrogne.net=20
>> >
>> wrote:
>>
>>> The easiest way is to split index by Document. In Lucene, index
>>> contains Document and inverse index of Term. If you wont to put Term
>>> in different place, Document will be duplicated on each index, with
>>> only a part of their Term.
>>>
>>> How will you manage node failure in your network?
>>>
>>> They were some trial to build big p2p search engine to compet with
>>> Google, but, it will be easier to split by Document.
>>>
>>> If you have to many computers and want to see them working together,
>>> why don't use Nutch with Hadoop?
>>>
>>> M.
>>> Le 1 mars 08 =C3=A0 19:16, Yin Qiu a =C3=A9crit :
>>>
>>>> Hi,
>>>>
>>>> I'm planning to implement a search infrastructure on a P2P =20
>>>> overlay. To
>>>> achieve this, I want to first distribute the indices to various =20
>>>> nodes
>>>> connected by this overlay. My approach is to partition the =20
>>>> indices by
>>>> keyword, that is, one node takes care of certain keywords (or
>>>> terms). When a
>>>> simple TermQuery is encountered, we just find the node associated
>>>> with that
>>>> term (with distributed hash table) and get the result. And =20
>>>> suppose a
>>>> BooleanQuery is issued, we contact all the nodes involved in this
>>>> query and
>>>> finally merge the result.
>>>>
>>>> So my question is: does Lucene support partitioning the indices by
>>>> keywords?
>>>>
>>>> Thanks in advance.
>>>>
>>>> --
>>>> Look before you leap
>>>> -------------------------------------------
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Look before you leap
>> -------------------------------------------
>>
>> =
-----------------------------------------------------------------------
>> Healy Hudson GmbH - D-55252 Mainz Kastel
>> Gesch=C3=A4ftsf=C3=BChrer Christian Konh=C3=A4user - Amtsgericht =
Wiesbaden HRB =20
>> 12076
>>
>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =20
>> Empf=C3=A4nger sind, d=C3=BCrfen Sie die Informationen nicht offen =
legen =20
>> oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen =20
>> haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese =20
>> Email an den Absender zur=C3=BCckschicken. Bitte l=C3=B6schen Sie =
danach =20
>> diese Email.
>> This email is confidential. If you are not the intended recipient, =20=

>> you must not disclose or use this information contained in it. If =20
>> you have received this email in error please tell us immediately by =20=

>> return email and delete the document.
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --=20
> Look before you leap
> -------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 18:41:22 2008
Return-Path: <java-user-return-32919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28263 invoked from network); 2 Mar 2008 18:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 18:41:22 -0000
Received: (qmail 77845 invoked by uid 500); 2 Mar 2008 18:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77212 invoked by uid 500); 2 Mar 2008 18:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77201 invoked by uid 99); 2 Mar 2008 18:41:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 10:41:10 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 18:40:23 +0000
Received: from c-65-96-166-47.hsd1.ma.comcast.net ([65.96.166.47] helo=IBM3D2E684396F)
	by outgoing.csail.mit.edu with esmtpa (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JVt75-0003up-Du
	for java-user@lucene.apache.org; Sun, 02 Mar 2008 13:40:43 -0500
Message-ID: <07f901c87c94$e9eb11c0$0602a8c0@IBM3D2E684396F>
From: "Ghinwa Choueiter" <ghinwa@csail.mit.edu>
To: <java-user@lucene.apache.org>
References: <060101c87be0$20135dd0$0602a8c0@IBM3D2E684396F> <359a92830803020536o16688752h6a55f83859a75ae4@mail.gmail.com>
Subject: Re: searching for "Nothing"
Date: Sun, 2 Mar 2008 13:40:39 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

thank you. You were right. Indexing by "" does not do what I need.

How would one represent a null index? Perhaps another way of asking the 
question is what query would return to me all the documents in the
database (all-pass filter).

thank you for your patience!
-Ghinwa

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, March 02, 2008 8:36 AM
Subject: Re: searching for "Nothing"


> The best and most deterministic way to answer this kind of question is
> to download Luke and look at the explained query. That'll show you
> exactly what the effect of different analyzers and the exact structure
> of the resulting query.
>
> Offhand, I don't think your rewrite will work.
>
> Best
> Erick
>
> On Sat, Mar 1, 2008 at 4:06 PM, Ghinwa Choueiter <ghinwa@csail.mit.edu>
> wrote:
>
>> Hi,
>>
>> I am trying to do a search as follows (this is a very simplified 
>> example):
>>
>> I want to search for: (1) the little boy or (2) one little boy or (3)
>> little boy
>>
>> Can I write the query as:
>> "the OR one OR "" " AND "little" AND "boy"
>>
>> note that what I mean by "" is "Nothing".
>>
>> thank you,
>> -Ghinwa
>>
>> PS. I know that I can write the query as "the little boy" OR "one little
>> boy" OR "little boy"
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 22:10:48 2008
Return-Path: <java-user-return-32920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4036 invoked from network); 2 Mar 2008 22:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 22:10:47 -0000
Received: (qmail 36518 invoked by uid 500); 2 Mar 2008 22:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36484 invoked by uid 500); 2 Mar 2008 22:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36472 invoked by uid 99); 2 Mar 2008 22:10:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 14:10:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 22:10:02 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EC0E94A8135
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 09:09:44 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: searching for "Nothing"
Date: Mon, 3 Mar 2008 09:06:11 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <060101c87be0$20135dd0$0602a8c0@IBM3D2E684396F> <359a92830803020536o16688752h6a55f83859a75ae4@mail.gmail.com> <07f901c87c94$e9eb11c0$0602a8c0@IBM3D2E684396F>
In-Reply-To: <07f901c87c94$e9eb11c0$0602a8c0@IBM3D2E684396F>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803030906.11681.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 03 March 2008 05:40:39 Ghinwa Choueiter wrote:
> thank you. You were right. Indexing by "" does not do what I need.
>
> How would one represent a null index? Perhaps another way of asking the
> question is what query would return to me all the documents in the
> database (all-pass filter).

That's easy: MatchAllDocsQuery (query parser syntax: *:*)

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 02 22:43:49 2008
Return-Path: <java-user-return-32921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15919 invoked from network); 2 Mar 2008 22:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Mar 2008 22:43:48 -0000
Received: (qmail 77808 invoked by uid 500); 2 Mar 2008 22:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77779 invoked by uid 500); 2 Mar 2008 22:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77766 invoked by uid 99); 2 Mar 2008 22:43:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 14:43:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 22:42:52 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3619B71C1C0; Sun,  2 Mar 2008 14:43:12 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2D4FA71C19A
	for <java-user@lucene.apache.org>; Sun,  2 Mar 2008 14:43:12 -0800 (PST)
Date: Sun, 2 Mar 2008 14:43:12 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: explain() - fieldnorm
In-Reply-To: <15717182.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net>
References: <15717182.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: As my subject is telling, i have a little problem with analyzing the
: explain() output.
: I know, that the fieldnorm value consists out of "documentboost, fieldboost
: and lengthNorm". 
: Is is possible to recieve the single values? I know that they are multiplied
: while indexing but
: can they be stored so that i can read them when i analyze my search?

the number of terms the docs have in a given field can be determined by 
doing a nested iteration over a TermEnum and TermDoc and keeping count, 
but there is no way to keep extract the document boost vs the field boost 
-- if you want to know what those were later you have to store them 
yourselves (in a stored field perhaps).

: The Problem is, that i have 2 Documents I want to compare but the only
: difference is the fieldnorm value
: and i don't know which value exactly makes this difference.

typically the answer to that question for me is "length" because i don't 
use field boosts and doc boosts -- if you *do* use field boosts or doc 
boosts, you would typically know what you had, and could check what boost 
values you had used later (based on whatever source you orriginally built 
your index from)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 02:08:19 2008
Return-Path: <java-user-return-32922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93806 invoked from network); 3 Mar 2008 02:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 02:08:19 -0000
Received: (qmail 75509 invoked by uid 500); 3 Mar 2008 02:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75484 invoked by uid 500); 3 Mar 2008 02:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75473 invoked by uid 99); 3 Mar 2008 02:08:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 18:08:07 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allenchue@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:07:32 +0000
Received: by rv-out-0910.google.com with SMTP id k20so4334262rvb.5
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 18:07:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        bh=Hh/UZEDIt/6zRGXOtXtXv6Q75Bg61/ZdOPPyYsNgW4A=;
        b=hjtLFJrhEIg/vuqJ3zXoLSE9Bu6gQOtQwM7TDMeRHiGIsxgoR5n/xdhjcTV40Jzg7JnqDxZpOONGSsz635JkFn0DlpNPhKp8EGW2hF51uN8E2T+VP96XYjfcQXkVRHzLSReqhmgnr6t8FsN1cRxltKmIJVL8dSr9giNoCYyZWao=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=HgCzGtMhnhC0IKqpnp4TMTKJu4B5emF6g3IOa77BcFXa8eYM/Nr9+eupqUq5F+bcoWbeBEQd//SLvDtle+vJxUnDAwJ9fVKGLY1PjSf+y+ke+k1q6RkbBApSIa3BbG2h/Xtrll73s4J6DG8NaldqxFiR6iq1qIy5rBus1oI8E1s=
Received: by 10.141.163.12 with SMTP id q12mr7532391rvo.190.1204510062786;
        Sun, 02 Mar 2008 18:07:42 -0800 (PST)
Received: by 10.141.84.9 with HTTP; Sun, 2 Mar 2008 18:07:42 -0800 (PST)
Message-ID: <b739adf00803021807r798cb2bdt29bb7b62062271cd@mail.gmail.com>
Date: Mon, 3 Mar 2008 10:07:42 +0800
From: "=?UTF-8?B?5LuH5a+F?=" <qiuyin04@software.nju.edu.cn>
Sender: allenchue@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Does Lucene support partition-by-keyword indexing?
In-Reply-To: <B6DCFBFA-5930-43DD-9181-8508803B4113@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5599_33211375.1204510062789"
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>
	 <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>
	 <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>
	 <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com>
	 <b739adf00803020809r452d0a96w6734245da0e878b1@mail.gmail.com>
	 <B6DCFBFA-5930-43DD-9181-8508803B4113@garambrogne.net>
X-Google-Sender-Auth: fd2055e58702011b
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5599_33211375.1204510062789
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgTWF0aGlldSwKCllvdSB3ZXJlIHJpZ2h0LiBJbiB0aGUgZWFybHkgc3RhZ2UsIEkgb25seSBp
bnRlbmQgdG8gaW1wbGVtZW50IHRoZSBiYXNpYwpUZXJtUXVlcnkgYW5kIEJvb2xlYW5RdWVyeSBm
dW5jdGlvbi4gRnV6enkgbWF0Y2ggYW5kIHBhcnRpYWwgbWF0Y2ggcmVxdWlyZXMKbW9yZSBjb21w
bGljYXRlZCBhbGdvcml0aG1zLiBDYWNoZSBjb25zaXN0ZW5jeSB3aWxsIGNlcnRhaW5seSBiZSBt
eSBjb25jZXJuLgoKQW5kIHllcywgZWFjaCBub2RlIGNvbnRhaW5zIHRoZWlyIG93biBkb2N1bWVu
dHMgYW5kIGJ1aWxkcyBpbmRleCBhZ2FpbnN0CnRoZW0uCgpPbiBNb24sIE1hciAzLCAyMDA4IGF0
IDE6MzAgQU0sIE1hdGhpZXUgTGVjYXJtZSA8bWF0aGlldUBnYXJhbWJyb2duZS5uZXQ+Cndyb3Rl
OgoKPiBUaGFua3MgZm9yIHlvdXIgY2xlYW4gYW5kIGxvbmcgYW5zd2VyLgo+Cj4gV2l0aCBUZXJt
IHNwbGl0dGVkIG9uIGRpZmZlcmVudCBub2RlIHlvdSd2ZSBnb3QgZGlmZmVyZW50IGRyYXdiYWNr
IDoKPiBQcmVmaXhRdWVyeSBhbmQgRnV6enlRdWVyeSB3aWxsIGJlIHZlcnkgaGFyZCB0byBpbXBs
ZW1lbnQuCj4KPiBZb3VyIERIVCBsb29rIHZlcnkgbmljZSwgYnV0IEJpdHRvcnJlbnQsIHRoZSBi
ZXN0IGJhbmR3aWR0aCBjb25zdW1lcgo+IGluIHRoZSB3b3JsZCAoc29tZXRoaW5nIGxpa2UgMzAl
IG9mIHRoZSBJbnRlcm5ldCksIG1hZGUgdGhlIGNob2ljZSB0bwo+IGNlbnRyYWxpemUgdGhpcyBi
b3R0bGVuZWNrLiBCdXQgcmVjZW50bHksIEJpdHRvcnJlbnQgY2FuIGJlIHVzZWQKPiB0cmFja2Vy
bGVzcy4KPiBXaGVuIHlvdSByZWFkIEdvb2dsZSB3aXRoZSBwYXBlciwgbW9yZSBhYm91dCBjbHVz
dGVyIGNvbXB1dGluZyB0aGFuCj4gcDJwIGNvbXB1dGluZywgSSBhZ3JlZSwgaXQgc2F5cyB0aGF0
IG9uZSBjb25kdWN0b3IgKHdpdGggcmVkdW5kYW5jeSkKPiBpcyBiZXR0ZXIgdGhhbiBzcHJlYWRp
bmcgYW5kIGJyb2FkY2FzdGluZyBpbmZvcm1hdGlvbi4KPiBUaGUgdHJvdWJsZSBpcyB0byBiZSBz
dXJlIHRoYXQgZXZlcnkgbm9kZSBpcyBzeW5jaHJvbml6ZWQsIGFuZCB3YWl0aW5nCj4gZm9yIHRo
ZSBsYXRlc3QuIFJlZHVuZGFudCByZWxpYWJsZSBpbmZvcm1hdGlvbiBpcyBub3QgdmVyeSBjb21w
YXRpYmxlCj4gd2l0aCBQMlAsIElNSE8sIHJlZHVuZGFudCBjYWNoaW5nIHNob3VsZCBiZSBiZXR0
ZXIuCj4KPiBZb3VyIGRpY2hvdG9taWMgYXBwcm9hY2ggbG9va3MgbmljZSwgZmlyc3QgYSBzaW1w
bGUgYWN0aW9uIHRvIGtub3cKPiB3aWNoIG5vZGUgdG8gYXNrLCBhbmQgYWZ0ZXIsIGNvbnNvbGlk
YXRpb24gb2YgdGhlIGFuc3dlcnMuCj4KPiBJbiB5b3VyIHNjaGVtZSwgd2hlcmUgYXJlIGluZGV4
ZWQgZG9jdW1lbnRzPyBFYWNoIGxldHRlciBub2RlIGNvbnRhaW5zCj4gdGhlaXIgb3duIGRvY3Vt
ZW50cz8KPgo+IE0uCj4KPiBMZSAyIG1hcnMgMDggw6AgMTc6MDksIOS7h+WvhSBhIMOpY3JpdCA6
Cj4KPiA+IEhpLAo+ID4KPiA+IEkgYW0ganVzdCBkb2luZyBzb21lIHNpbXBsZSByZXNlYXJjaCBv
biBQMlAgc2VhcmNoZXMuIEluIG15Cj4gPiBhc3N1bXB0aW9uLCBhbGwgbm9kZXMgaW4gdGhpcyBz
eXN0ZW0gaW5kZXggdGhlaXIgb3duIGRvY3VtZW50cyBhbmQKPiA+IGVhY2ggbm9kZSB3aWxsIGJl
IGFibGUgdG8gc2VhcmNoIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBuZXR3b3JrCj4gPiAoaW5j
bHVkaW5nIG90aGVycycpLiBUaGlzIGlzIGp1c3QgbGlrZSBmaWxlIHNoYXJpbmcuIFRoZSBzaW1w
bGUKPiA+IGFwcHJvYWNoIGlzIHRvIGtlZXAgYWxsIHRoZSBpbmRpY2VzIGxvY2FsbHkgYW5kIHRv
IGZsb29kIHRoZSBxdWVyeQo+ID4gYWxvbmcgdGhlIG5ldHdvcmsuIEJ1dCB0aGlzIG1heSBjb25z
dW1lIG11Y2ggbmV0d29yayBiYW5kd2lkdGggYmVjYXVzZQo+ID4gdG9vIG11Y2ggbm9kZXMsIHdo
aWNoIGFyZSBub3QgcmVsZXZhbnQgdG8gb25lIGNlcnRhaW4gcXVlcnksIGFyZQo+ID4gaW52b2x2
ZWQgaW4gaGFuZGxpbmcgYSBxdWVyeS4KPiA+Cj4gPiBTbyBJIHdhbnQgdG8gaW50cm9kdWNlIERI
VCBpbnRvIG15IHN5c3RlbSB0byBzb2x2ZSB0aGlzIHByb2JsZW0uIEZpcnN0Cj4gPiBsZXQgbWUg
ZXhwbGFpbiB3aGF0IERIVCBpcyBpZiB5b3UgZG9uJ3Qga25vdyBhYm91dCBpdC4gRGlzdHJpYnV0
ZWQKPiA+IEhhc2ggVGFibGUgaW1wbGVtZW50cyBhIGZ1bmN0aW9uIGxvb2t1cChrZXkpIG9uIGEg
UDJQIG92ZXJsYXkuIEl0Cj4gPiBmaW5kcyB0aGUgbm9kZSBvZiBub2RlSUQgIm5lYXJlc3QiICB0
byBhIGNlcnRhaW4gImtleSIgZWZmaWNpZW50bHksCj4gPiB1c3VhbGx5IGluIGxvZ04gaG9wcywg
d2hlcmUgTiBpcyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzLiBIZXJlIHRoZQo+ID4gY29uY2Vw
dCAibmVhcmVzdCIgaXMgbm90IG5lY2Vzc2FyaWx5IGdlb2dyYXBoaWNhbGx5LCBidXQgaXMgZGVm
aW5lZAo+ID4gdGhlIERIVCBpbXBsZW1lbnRhdGlvbi4gRm9yIGV4YW1wbGUsIG9uZSBpbXBsZW1l
bnRhdGlvbiB3b3VsZCBkZWZpbmUgYQo+ID4ga2V5IGlzIG5lYXJlc3QgdG8gYSBub2RlSUQgd2hl
biB8bm9kZUlELWtleXwgaXMgdGhlIG1pbmltdW0gdmFsdWUuIERIVAo+ID4gaXMgd2lkZWx5IHVz
ZWQgaW4gUDJQIGZpbGUgc2hhcmluZyB0b29scywgbGlrZSBBenVyZXVzIGFuZCBlTXVsZS4KPiA+
Cj4gPiBJbiBteSBkZXNpZ24sIHdoeSBJIHdhbnQgdG8gcGFydGl0aW9uIHRoZSBpbmRpY2VzIGJ5
IGtleXdvcmQgaXMgdG8KPiA+IHdlbGwgZmFjaWxpdGF0ZSB0aGlzIGxvb2t1cChrZXkpIGZ1bmN0
aW9uLiBTdXBwb3NlIHdlIGhhdmUgdHdvIHRlcm1zOgo+ID4gQSBhbmQgQi4gVGVybSBBJ3MgZG9j
TGlzdCBjb250YWlucyAxLCAyLCBhbmQgMzsgd2hpbGUgdGVybSBCJ3MgZG9jTGlzdAo+ID4gY29u
dGFpbnMgMiwgMywgYW5kIDQuIFRvIHBhcnRpdGlvbiB0aGUgaW5kaWNlcywgd2UgaGFzaGVzIHRl
cm1zIEEgYW5kCj4gPiBCIHRvIHR3byBrZXlzLiBXZSB0cmFuc2ZlciB0aGUgaW5kaWNlcyB0byB0
aGUgY29ycmVzcG9uZGluZyBub2Rlcwo+ID4gYWZ0ZXIgY2FsbGluZyBsb29rdXAoa2V5KS4gVG8g
aGFuZGxlIHRoaXMgcXVlcnksIHdlIHdvdWxkIGFnYWluIGhhc2gKPiA+IHRoZXNlIHR3byB0ZXJt
cyB0byB0d28ga2V5cywgYW5kIGxvY2F0ZSB0aGUgbm9kZXMgcmVzcG9uc2libGUgZm9yIHRoZQo+
ID4gdGVybXMsIHJlc3BlY3RpdmVseSwgYWxzbyB1c2luZyB0aGUgbG9va3VwKGtleSkgZnVuY3Rp
b24uIFdlIGZpbmFsbHkKPiA+IGRvIGFuIGludGVyc2VjdGlvbiBhbmQgZ2V0IHRoZSByZXN1bHQg
IjIgYW5kIDMiLiBPZiBjb3Vyc2UgaGVyZSB3ZQo+ID4gb25seSBnZXQgYSBwb2ludGVyIHRvIHRo
ZSBhY3R1YWwgaW5kZXhlZCBkb2N1bWVudCwgc28gd2Ugc3RpbGwgdG8KPiA+IGZldGNoIHRoZSBk
b2N1bWVudCBjb250ZW50IGFmdGVyIHRoaXMuCj4gPgo+ID4gQW5kIEkgZG9uJ3QgdGhpbmsgdGhp
cyBzY2hlbWUgYnJpbmdzIGxvdHMgb2Ygc2luZ2xlIHBvaW50IG9mIGZhaWx1cmVzCj4gPiBiZWNh
dXNlIGluZGljZXMgY2FuIGJlIHJlcGxpY2F0ZWQgb24gc2V2ZXJhbCBub2RlcyB3aG9zZSBub2Rl
SUQncyBhcmUKPiA+IG5lYXIgdG8gZWFjaCBvdGhlci4gRXZlbiBvbmUgbm9kZSBpcyBkb3duLCB0
aGUgbG9va3VwKGtleSkgZnVuY3Rpb24KPiA+IHN0aWxsIGZpbmRzIGEgc3Vic3RpdHV0aW5nIG5v
ZGUuCj4gPgo+ID4gQXMgSSBkb24ndCBrbm93IGhvdyB0byBwYXJ0aXRpb24gdGhlIGluZGljZXMg
Ynkga2V5d29yZCB5ZXQsIG15IGRlc2lnbgo+ID4gbm93IGlzIHRvIGtlZXAgdGhlIEx1Y2VuZSBp
bmRpY2VzIGxvY2FsbHkgYW5kIHdyaXRlcyB0aGUgc2ltcGxpZmllZAo+ID4gaW52ZXJ0ZWQgaW5k
aWNlcyB0byB0aGUgbm9kZXMgcmVzcG9uc2libGUgZm9yIGNlcnRhaW4ga2V5d29yZHMuIEZvcgo+
ID4gZXhhbXBsZSwgbm9kZSBYIGhhcyB0aGUgcG9zdGluZ3MgbGlrZToKPiA+Cj4gPiB0ZXJtQTog
ZG9jMSwgZG9jMiwgZG9jMwo+ID4gdGVybUI6IGRvYzIsIGRvYzMsIGRvYzQKPiA+Cj4gPiBhbmQg
bG9va3VwKGhhc2godGVybUEpKSByZXR1cm5zIG5vZGUgWSwgbG9va3VwKGhhc2godGVybUIpKSBy
ZXR1cm5zCj4gPiBub2RlIFouCj4gPgo+ID4gVGhlbiBpbiB0aGUgaW5kZXhpbmcgcHJvY2Vzcywg
bm9kZSBYIHdyaXRlcyB0aGUgaW5mbyAidGVybUE6Cj4gPiBub2RlWC5kb2MxLCBub2RlWC5kb2My
LCBub2RlWC5kb2MzIiBvbiBub2RlIFksIGFuIHRoZSBpbmZvICJ0ZXJtQjoKPiA+IG5vZGVYLmRv
YzIsIG5vZGVYLmRvYzMsIG5vZGVYLmRvYzQiIG9uIG5vZGUgWi4gQXQgdGhlIGZpbmFsIHN0ZXAs
IHdlCj4gPiBmb2xsb3cgdGhpcyBpbmZvIGFuZCBnbyBiYWNrIHRvIG5vZGUgWCB0byBnZXQgdGhl
IEx1Y2VuZSBGaWVsZCB2YWx1ZXMKPiA+IGFuZCB0aGUgcmVhbCBkb2N1bWVudHMuCj4gPgo+ID4g
QW55IGlkZWEgb3IgZmVlZGJhY2sgb24gbXkgcHJlbGltaW5hcnkgZGVzaWduPwo+ID4KPiA+IE9u
IFN1biwgTWFyIDIsIDIwMDggYXQgMzo0OCBQTSwgVXdlIEdvZXR6a2UKPiA+IDx1d2UuZ29ldHpr
ZUBoZWFseS1odWRzb24uY29tPiB3cm90ZToKPiA+PiBIaSwKPiA+Pgo+ID4+IEkgZG8gbm90IHll
dCBmdWxseSB1bmRlcnN0YW5kIHdoYXQgeW91IHdhbnQgdG8gYWNoaWV2ZS4KPiA+PiBZb3Ugd2Fu
dCB0byBzcHJlYWQgdGhlIGluZGV4IHNwbGl0IGJ5IGtleXdvcmRzIHRvIHJlZHVjZSB0aGUgdGlt
ZQo+ID4+IHRvIGRpc3RyaWJ1dGUgaW5kZXhlcz8KPiA+PiBBbmQgeW91IHdhbnQgdGhlIGRpc3Ry
aWJ1dGUgcXVlcmllcyB0byB0aGUgbm9kZXMgYmFzZWQgb24gdGhlIHNhbWUKPiA+PiBzcGxpdCBt
ZWNoYW5pc20/Cj4gPj4KPiA+Pgo+ID4+IFlvdSBoYXZlIHNldmVyYWwgbm9kZXMgd2l0aCBkaWZm
ZXJlbnQga2luZCBvZiBkb2N1bWVudHMuCj4gPj4gWW91IHdhbnQgdG8gYnVpbGQgb25lIGluZGV4
IGZvciBhbGwgbm9kZXMgYW5kIHNwbGl0IGFuZCBkaXN0cmlidXRlCj4gPj4gdGhlIGluZGV4IGJh
c2VkIG9uIGEgc2V0IG9mIGtleXdvcmRzIHNwZWNpZmljIHRvIGEgbm9kZS4gVGhpcyB5b3UKPiA+
PiB3YW50IHRvIGRvIHRvIHNwbGl0IHRoZSBxdWVyaWVzIHNvICJlYWNoIHF1ZXJ5IGludm9sdmVz
Cj4gPj4gY29tbXVuaWNhdGluZyB3aXRoIGNvbnN0YW50IG51bWJlciBvZiBub2RlcyIuCj4gPj4K
PiA+PiBEbyBkb2N1bWVudHMgYXQgdGhlIG5vZGVzIGNvbnRhaW4gb25seSBzdWNoIGtleXdvcmRz
PyBJIGRvdWJ0Lgo+ID4+IFNvIHlvdSBuZWVkIGFueXdheSBhIHJlZmVyZW5jZSB3aGVyZSB0aGUg
aW5kZXhlZCBkb2MgY2FuIGJlIGZvdW5kCj4gPj4gYW5kIHJldHJpZXZlIGl0IGZyb20gaXRzIG5v
ZGUgZm9yIGRpc3BsYXkuCj4gPj4gWW91IGNvdWxkIGluZGV4IGF0IGVhY2ggbm9kZSwgbWVyZ2Ug
YWxsIGluZGV4ZXMgZnJvbSBhbGwgbm9kZXMgYW5kCj4gPj4gZGlzdHJpYnV0ZSB0aGUgY29tYmlu
ZWQgaW5kZXguCj4gPj4gT24gd2hhdCBjcml0ZXJpYSB5b3UgY2FuIHNwbGl0IHRoZSBxdWVyaWVz
PyBJZiB5b3UgaGF2ZSBhIGNvbWJpbmVkCj4gPj4gaW5kZXggZWFjaCBub2RlIGNhbiBkaXN0cmli
dXRlIHRoZSBxdWVyaWVzIHRvIG90aGVyIG5vZGVzIG9uCj4gPj4gc3RhdGlzdGljYWwgZGF0YSBm
b3VuZCBpbiB0aGUgdGVybSBkaXN0cmlidXRpb24uCj4gPj4gWW91IG5lZWQgdG8gbWVyZ2UgdGhl
IHJlc3VsdHMgYW55d2F5Lgo+ID4+Cj4gPj4gSSBkb3VidCB0aGF0IHRoaXMga2luZCBvZiBvdmVy
aGVhZCBpcyB3b3J0aCB0aGUgdHJvdWJsZSBiZWNhdXNlIHlvdQo+ID4+IGludHJvZHVjZSBhIGxv
dCBvZiBzaW5nbGUgcG9pbnRzIG9mIGZhaWx1cmUuIEFuZCB0aGUgc2NhbGFiaWxpdHkKPiA+PiBz
ZWVtcyBsaW1pdGVkIGJlY2F1c2UgeW91IHdvdWxkIG5lZWQgdG8gcmVjYWxpYnJhdGUgdGhlIHdo
b2xlCj4gPj4gbmV0d29yayB3aGVuIGEgYWRkaW5nIGEgbmV3IG5vZGUuIFdoeSBkb24ndCB5b3Ug
ZGlzdHJpYnV0ZSB0aGUKPiA+PiBjb21wbGV0ZSBpbmRleCAod2UgZG8gdGhpcyBhZnRlciBnZXR0
aW5nIGl0IGxvY2FsbHkgemlwcGVkIGFuZAo+ID4+IGxhdGVyIHVuemlwcGVkIG9uIHRoZSByZWNl
aXZlciBub2RlLCBzaXplIGlzIGxlc3MgdGhhbiBvbmUgdGhpcmQKPiA+PiBmb3IgdHJhbnNmZXJp
bmcpLiBFYWNoIG5vZGUgc2hvdWxkIGhhdmUgc29tZSBhY3Rpdml0eSBpbmRpY2F0b3IuCj4gPj4g
RGlzdHJpYnV0ZSB0aGUgY29tcGxldGUgcXVlcnkgdG8gdGhlIG5vZGUgd2l0aCB0aGUgc21hbGxl
c3QKPiA+PiBhY3Rpdml5LiBTbyB5b3UgZ2V0IHJlZHVuZGFuY3ksIGRvIG5vdCBuZWVkIHRvIHNw
bGl0IHF1ZXJpZXMgYW5kCj4gPj4gbWVyZ2UgcmVzdWx0cy4gT0ssIG9uZSAiZXZpbCIgcXVlcnkg
Y2FuIGJyaW5nIGEgbm9kZSAiZG93biIgYnV0IHRoZQo+ID4+IG5ldHdvcmsgaXMgc3RpbGwgd29y
a2luZy4KPiA+Pgo+ID4+IERvIHlvdSBoYXZlIGFueSByZXN1bHRzIHVzaW5nIGx1Y2VuZSBvbiBh
IHNpbmdsZSBub2RlIGZvciB5b3VyCj4gPj4gYXBwcm9hY2g/IEhvdyBtYW55IHF1ZXJpZXMgYW5k
IGhvdyBtYW55IGRvY3VtZW50cyBkbyB5b3UgZXhwZWN0Pwo+ID4+Cj4gPj4gUmVnYXJkcwo+ID4+
Cj4gPj4gVXdlCj4gPj4KPiA+PiAtLS0tLVVyc3Byw7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0tCj4g
Pj4gVm9uOiBhbGxlbmNodWVAZ21haWwuY29tIFttYWlsdG86YWxsZW5jaHVlQGdtYWlsLmNvbV0g
SW0gQXVmdHJhZwo+ID4+IHZvbiA/Pwo+ID4+IEdlc2VuZGV0OiBTb25udGFnLCAyLiBNw6RyeiAy
MDA4IDAzOjA1Cj4gPj4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+IEJldHJl
ZmY6IFJlOiBEb2VzIEx1Y2VuZSBzdXBwb3J0IHBhcnRpdGlvbi1ieS1rZXl3b3JkIGluZGV4aW5n
Pwo+ID4+Cj4gPj4KPiA+Pgo+ID4+IEhpLAo+ID4+Cj4gPj4gSSBhZ3JlZSB3aXRoIHlvdXIgcG9p
bnQgdGhhdCBpdCBpcyBlYXNpZXIgdG8gcGFydGl0aW9uIGluZGV4IGJ5Cj4gPj4gZG9jdW1lbnQu
Cj4gPj4gQnV0IHRoZSBwYXJ0aXRpb24tYnkta2V5d29yZCBhcHByb2FjaCBoYXMgbXVjaCBncmVh
dGVyIHNjYWxhYmlsaXR5Cj4gPj4gb3ZlciB0aGUKPiA+PiBwYXJ0aXRpb24tYnktZG9jdW1lbnQg
YXBwcm9hY2guIEVhY2ggcXVlcnkgaW52b2x2ZXMgY29tbXVuaWNhdGluZwo+ID4+IHdpdGgKPiA+
PiBjb25zdGFudCBudW1iZXIgb2Ygbm9kZXM7IHdoaWxlIHBhcnRpdGlvbi1ieS1kb2MgcmVxdWly
ZXMgc3ByZWFkaW5nCj4gPj4gdGhlCj4gPj4gcXVlcnkgYSBsb25nIGFsbCBvciBtYW55IG9mIHRo
ZSBub2Rlcy4gQW5kIEkgYW0gYWN0dWFsbHkgZG9pbmcgc29tZQo+ID4+IHNtYWxsCj4gPj4gcmVz
ZWFyY2ggb24gdGhpcy4gQnkgdGhlIHdheSwgdGhlIGRvY3VtZW50cyB0byBiZSBpbmRleGVkIGFy
ZSBub3QKPiA+PiBuZWNlc3NhcmlseSB3ZWIgcGFnZXMuIFRoZXkgYXJlIG1vc3RseSBmaWxlcyBz
dG9yZWQgb24gZWFjaCBub2RlJ3MKPiA+PiBmaWxlCj4gPj4gc3lzdGVtLgo+ID4+Cj4gPj4gTm9k
ZSBmYWlsdXJlcyBhcmUgYWxzbyBoYW5kbGVkIGJ5IHJlcGxpY2FzLiBUaGUgaW5kZXggZm9yIGVh
Y2ggdGVybQo+ID4+IHdpbGwgYmUKPiA+PiByZXBsaWNhdGVkIG9uIG11bHRpcGxlIG5vZGVzLCB3
aG9zZSBub2RlSURzIGFyZSBuZWFyIHRvIGVhY2ggb3RoZXIuCj4gPj4gVGhpcwo+ID4+IG1lY2hh
bmlzbSBpcyBoYW5kbGVkIGJ5IHRoZSB1bmRlcmx5aW5nIERIVCBzeXN0ZW0uCj4gPj4KPiA+PiBT
byBhbnkgaWRlYSBob3cgY2FuIHBhcnRpdGlvbiBpbmRleCBieSBrZXl3b3JkIGluIGx1Y2VuZT8g
VGhhbmtzLgo+ID4+Cj4gPj4gT24gU3VuLCBNYXIgMiwgMjAwOCBhdCA1OjUwIEFNLCBNYXRoaWV1
IExlY2FybWUgPAo+IG1hdGhpZXVAZ2FyYW1icm9nbmUubmV0Cj4gPj4gPgo+ID4+IHdyb3RlOgo+
ID4+Cj4gPj4+IFRoZSBlYXNpZXN0IHdheSBpcyB0byBzcGxpdCBpbmRleCBieSBEb2N1bWVudC4g
SW4gTHVjZW5lLCBpbmRleAo+ID4+PiBjb250YWlucyBEb2N1bWVudCBhbmQgaW52ZXJzZSBpbmRl
eCBvZiBUZXJtLiBJZiB5b3Ugd29udCB0byBwdXQgVGVybQo+ID4+PiBpbiBkaWZmZXJlbnQgcGxh
Y2UsIERvY3VtZW50IHdpbGwgYmUgZHVwbGljYXRlZCBvbiBlYWNoIGluZGV4LCB3aXRoCj4gPj4+
IG9ubHkgYSBwYXJ0IG9mIHRoZWlyIFRlcm0uCj4gPj4+Cj4gPj4+IEhvdyB3aWxsIHlvdSBtYW5h
Z2Ugbm9kZSBmYWlsdXJlIGluIHlvdXIgbmV0d29yaz8KPiA+Pj4KPiA+Pj4gVGhleSB3ZXJlIHNv
bWUgdHJpYWwgdG8gYnVpbGQgYmlnIHAycCBzZWFyY2ggZW5naW5lIHRvIGNvbXBldCB3aXRoCj4g
Pj4+IEdvb2dsZSwgYnV0LCBpdCB3aWxsIGJlIGVhc2llciB0byBzcGxpdCBieSBEb2N1bWVudC4K
PiA+Pj4KPiA+Pj4gSWYgeW91IGhhdmUgdG8gbWFueSBjb21wdXRlcnMgYW5kIHdhbnQgdG8gc2Vl
IHRoZW0gd29ya2luZyB0b2dldGhlciwKPiA+Pj4gd2h5IGRvbid0IHVzZSBOdXRjaCB3aXRoIEhh
ZG9vcD8KPiA+Pj4KPiA+Pj4gTS4KPiA+Pj4gTGUgMSBtYXJzIDA4IMOgIDE5OjE2LCBZaW4gUWl1
IGEgw6ljcml0IDoKPiA+Pj4KPiA+Pj4+IEhpLAo+ID4+Pj4KPiA+Pj4+IEknbSBwbGFubmluZyB0
byBpbXBsZW1lbnQgYSBzZWFyY2ggaW5mcmFzdHJ1Y3R1cmUgb24gYSBQMlAKPiA+Pj4+IG92ZXJs
YXkuIFRvCj4gPj4+PiBhY2hpZXZlIHRoaXMsIEkgd2FudCB0byBmaXJzdCBkaXN0cmlidXRlIHRo
ZSBpbmRpY2VzIHRvIHZhcmlvdXMKPiA+Pj4+IG5vZGVzCj4gPj4+PiBjb25uZWN0ZWQgYnkgdGhp
cyBvdmVybGF5LiBNeSBhcHByb2FjaCBpcyB0byBwYXJ0aXRpb24gdGhlCj4gPj4+PiBpbmRpY2Vz
IGJ5Cj4gPj4+PiBrZXl3b3JkLCB0aGF0IGlzLCBvbmUgbm9kZSB0YWtlcyBjYXJlIG9mIGNlcnRh
aW4ga2V5d29yZHMgKG9yCj4gPj4+PiB0ZXJtcykuIFdoZW4gYQo+ID4+Pj4gc2ltcGxlIFRlcm1R
dWVyeSBpcyBlbmNvdW50ZXJlZCwgd2UganVzdCBmaW5kIHRoZSBub2RlIGFzc29jaWF0ZWQKPiA+
Pj4+IHdpdGggdGhhdAo+ID4+Pj4gdGVybSAod2l0aCBkaXN0cmlidXRlZCBoYXNoIHRhYmxlKSBh
bmQgZ2V0IHRoZSByZXN1bHQuIEFuZAo+ID4+Pj4gc3VwcG9zZSBhCj4gPj4+PiBCb29sZWFuUXVl
cnkgaXMgaXNzdWVkLCB3ZSBjb250YWN0IGFsbCB0aGUgbm9kZXMgaW52b2x2ZWQgaW4gdGhpcwo+
ID4+Pj4gcXVlcnkgYW5kCj4gPj4+PiBmaW5hbGx5IG1lcmdlIHRoZSByZXN1bHQuCj4gPj4+Pgo+
ID4+Pj4gU28gbXkgcXVlc3Rpb24gaXM6IGRvZXMgTHVjZW5lIHN1cHBvcnQgcGFydGl0aW9uaW5n
IHRoZSBpbmRpY2VzIGJ5Cj4gPj4+PiBrZXl3b3Jkcz8KPiA+Pj4+Cj4gPj4+PiBUaGFua3MgaW4g
YWR2YW5jZS4KPiA+Pj4+Cj4gPj4+PiAtLQo+ID4+Pj4gTG9vayBiZWZvcmUgeW91IGxlYXAKPiA+
Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+Pj4KPiA+
Pj4KPiA+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+PiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Pgo+
ID4+Pgo+ID4+Cj4gPj4KPiA+PiAtLQo+ID4+IExvb2sgYmVmb3JlIHlvdSBsZWFwCj4gPj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+Cj4gPj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiA+PiBIZWFseSBIdWRzb24gR21iSCAtIEQtNTUyNTIgTWFpbnogS2FzdGVsCj4g
Pj4gR2VzY2jDpGZ0c2bDvGhyZXIgQ2hyaXN0aWFuIEtvbmjDpHVzZXIgLSBBbXRzZ2VyaWNodCBX
aWVzYmFkZW4gSFJCCj4gPj4gMTIwNzYKPiA+Pgo+ID4+IERpZXNlIEVtYWlsIGlzdCB2ZXJ0cmF1
bGljaC4gV2VubiBTaWUgbmljaHQgZGVyIGJlYWJzaWNodGlndGUKPiA+PiBFbXBmw6RuZ2VyIHNp
bmQsIGTDvHJmZW4gU2llIGRpZSBJbmZvcm1hdGlvbmVuIG5pY2h0IG9mZmVuIGxlZ2VuCj4gPj4g
b2RlciBiZW51dHplbi4gV2VubiBTaWUgZGllc2UgRW1haWwgZHVyY2ggZWluZW4gRmVobGVyIGJl
a29tbWVuCj4gPj4gaGFiZW4sIHRlaWxlbiBTaWUgdW5zIGRpZXMgYml0dGUgdW1nZWhlbmQgbWl0
LCBpbmRlbSBTaWUgZGllc2UKPiA+PiBFbWFpbCBhbiBkZW4gQWJzZW5kZXIgenVyw7xja3NjaGlj
a2VuLiBCaXR0ZSBsw7ZzY2hlbiBTaWUgZGFuYWNoCj4gPj4gZGllc2UgRW1haWwuCj4gPj4gVGhp
cyBlbWFpbCBpcyBjb25maWRlbnRpYWwuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNp
cGllbnQsCj4gPj4geW91IG11c3Qgbm90IGRpc2Nsb3NlIG9yIHVzZSB0aGlzIGluZm9ybWF0aW9u
IGNvbnRhaW5lZCBpbiBpdC4gSWYKPiA+PiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGVtYWlsIGlu
IGVycm9yIHBsZWFzZSB0ZWxsIHVzIGltbWVkaWF0ZWx5IGJ5Cj4gPj4gcmV0dXJuIGVtYWlsIGFu
ZCBkZWxldGUgdGhlIGRvY3VtZW50Lgo+ID4+Cj4gPj4KPiA+Pgo+ID4+Cj4gPj4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Pgo+ID4+Cj4gPgo+ID4KPiA+Cj4gPiAt
LQo+ID4gTG9vayBiZWZvcmUgeW91IGxlYXAKPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcK
Pgo+CgoKLS0gCkJlc3QgcmVnYXJkcy4KWWluIFFpdQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCg==
------=_Part_5599_33211375.1204510062789--

From java-user-return-32923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 06:57:05 2008
Return-Path: <java-user-return-32923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50462 invoked from network); 3 Mar 2008 06:57:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 06:57:05 -0000
Received: (qmail 48562 invoked by uid 500); 3 Mar 2008 06:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48524 invoked by uid 500); 3 Mar 2008 06:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48513 invoked by uid 99); 3 Mar 2008 06:56:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Mar 2008 22:56:54 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 06:56:20 +0000
Received: by wf-out-1314.google.com with SMTP id 28so8460199wff.20
        for <java-user@lucene.apache.org>; Sun, 02 Mar 2008 22:56:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=YZjr5XmlAekzm5aTnm3jAXe/EAF/d4dUmMvlkFWdZFc=;
        b=Mapk0gQtoZv/mWgQb3n/2BdSyJZVDgUgsb+uzm2tYNQJJ6C4P0S73fWEs87XysceaqIEN+PUsKudCx0rStpaR+csrLZnD324Ldpx4elJPMbQPVQVXeSF6mseANqbUIVbkMidA7gr4yp6jQDq64MxFK9QK29odljmfTEpS1lyeqs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XEiWTDm07C3yiVnBL02BMp57DlzYI1M1dP3aH60VV3k6MoqPuP3ZM37V+c9KURZVUuuJBXtiCXTHqfL7ahUqFpQ/T4krgZF850uxyPwq5MBM0JCag9izs8st91hW17SkVSV9X1CaO8zqNL5hOxVugn2uta5gSqhc+6oZ6YMCFTE=
Received: by 10.142.106.18 with SMTP id e18mr8807814wfc.33.1204527390092;
        Sun, 02 Mar 2008 22:56:30 -0800 (PST)
Received: by 10.142.199.6 with HTTP; Sun, 2 Mar 2008 22:56:30 -0800 (PST)
Message-ID: <3126751e0803022256g4e047e7dpf0b4ca8dd0d943eb@mail.gmail.com>
Date: Mon, 3 Mar 2008 12:26:30 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: how do i search clause
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8574_20994627.1204527390087"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8574_20994627.1204527390087
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

"Rats give clue to
smoking<http://localhost:8081/Wellinformed/contentrama/registred/news6.jsp>i
want to search with this clause
my serach is serachinf or a single input word.
How do i enhacne it to serach for a cluase.
please provide me nfo and classes that i need to use.

thanks and regards
anjnana

------=_Part_8574_20994627.1204527390087--

From java-user-return-32924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 10:16:29 2008
Return-Path: <java-user-return-32924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31380 invoked from network); 3 Mar 2008 10:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 10:16:29 -0000
Received: (qmail 58379 invoked by uid 500); 3 Mar 2008 10:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58254 invoked by uid 500); 3 Mar 2008 10:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58243 invoked by uid 99); 3 Mar 2008 10:16:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:16:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 10:15:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JW7i3-0004O3-O5
	for java-user@lucene.apache.org; Mon, 03 Mar 2008 02:15:51 -0800
Message-ID: <15799934.post@talk.nabble.com>
Date: Mon, 3 Mar 2008 02:15:51 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser - BooleanClause.Occur
In-Reply-To: <OF0A432807.2A72D521-ON852573FE.0067EF18-852573FE.0068059C@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15761243.post@talk.nabble.com> <OFFE3783A0.D44B2683-ON852573FE.005CFAEC-852573FE.005DC2B1@us.ibm.com> <200802291942.58036.paul.elschot@xs4all.nl> <OF0A432807.2A72D521-ON852573FE.0067EF18-852573FE.0068059C@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey,

Thanks a lot! Everything works pretty well :-) .

Greetings
Jens


Donna L Gresh wrote:
> 
> Paul-
> Thanks (that was one of my ulterior motives for answering the question; I 
> figured if there was something inefficient or unnecessary about my 
> approach, I'd hear about it :) )
> 
> Donna Gresh
> 
> 
> Paul Elschot <paul.elschot@xs4all.nl> wrote on 02/29/2008 01:42:57 PM:
> 
>> Op Friday 29 February 2008 18:04:47 schreef Donna L Gresh:
>> > I believe something like the following will do what you want:
>> >
>> > QueryParser parserTitle = new QueryParser("title", analyzer);
>> > QueryParser parserAuthor = new QueryParser("author", analyzer);
>> >
>> > BooleanQuery overallquery = new BooleanQuery();
>> >
>> > BolleanQuery firstQuery = new BooleanQuery();
>> > Query q1= parserTitle.parse(term1);
>> > Query q2= parserAuthor.parse(term1);
>> > firstQuery.add(q1, BooleanClause.Occur.SHOULD); //should is like an
>> > OR firstQuery.add(q2, BooleanClause.Occur.SHOULD);
>> >
>> > BolleanQuery secondQuery = new BooleanQuery();
>> > Query q3= parserTitle.parse(term2);
>> > Query q4= parserAuthor.parse(term2);
>> > secondQuery.add(q3, BooleanClause.Occur.SHOULD);
>> > secondQuery.add(q4, BooleanClause.Occur.SHOULD);
>> >
>> > overallquery.add(firstQuery, BooleanClause.Occur.MUST); //must is
>> > like an AND
>> > overallquery.add(secondQuery, BooleanClause.Occur.MUST):
>> 
>> There is no need for a QueryParser in this case when using a
>> TermQuery instead of a Query for q1, q2, q3 and q4:
>> 
>> TermQuery q1 = new TermQuery(new Term("title", "term1"));
>> 
>> Regards,
>> Paul Elschot
>> 
>> 
>> >
>> > Donna  Gresh
>> >
>> > JensBurkhardt <jensburkhardt@web.de> wrote on 02/29/2008 10:46:51 AM:
>> > > Hey everybody,
>> > >
>> > > I read that it's possible to generate a query like:
>> > >
>> > > (title:term1 OR author:term1) AND (title:term2 OR author:term2)
>> > >
>> > > and so on. I also read that BooleanClause.Occur should help me
>> > > handle
>> >
>> > this
>> >
>> > > problem.
>> > > But i have to admit that i totally don't understand how to use it.
>> > > If someone can explain or has a link to an explanation, this would
>> > > be terrific
>> > >
>> > > Thanks and best regards
>> > >
>> > > Jens Burkhardt
>> > > --
>> > > View this message in context: http://www.nabble.
>> > > com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15761243
>> > >.html Sent from the Lucene - Java Users mailing list archive at
>> > > Nabble.com.
>> > >
>> > >
>> > > -------------------------------------------------------------------
>> > >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15799934.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 10:17:56 2008
Return-Path: <java-user-return-32925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31996 invoked from network); 3 Mar 2008 10:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 10:17:56 -0000
Received: (qmail 61233 invoked by uid 500); 3 Mar 2008 10:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61206 invoked by uid 500); 3 Mar 2008 10:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61195 invoked by uid 99); 3 Mar 2008 10:17:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:17:45 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 10:17:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JW7jS-0004S5-Bq
	for java-user@lucene.apache.org; Mon, 03 Mar 2008 02:17:18 -0800
Message-ID: <15799935.post@talk.nabble.com>
Date: Mon, 3 Mar 2008 02:17:18 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: explain() - fieldnorm
In-Reply-To: <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15717182.post@talk.nabble.com> <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Okay, thanks a lot. Maybe I should change my indexing behavior ;-) .

Greetings
Jens


hossman wrote:
> 
> : As my subject is telling, i have a little problem with analyzing the
> : explain() output.
> : I know, that the fieldnorm value consists out of "documentboost,
> fieldboost
> : and lengthNorm". 
> : Is is possible to recieve the single values? I know that they are
> multiplied
> : while indexing but
> : can they be stored so that i can read them when i analyze my search?
> 
> the number of terms the docs have in a given field can be determined by 
> doing a nested iteration over a TermEnum and TermDoc and keeping count, 
> but there is no way to keep extract the document boost vs the field boost 
> -- if you want to know what those were later you have to store them 
> yourselves (in a stored field perhaps).
> 
> : The Problem is, that i have 2 Documents I want to compare but the only
> : difference is the fieldnorm value
> : and i don't know which value exactly makes this difference.
> 
> typically the answer to that question for me is "length" because i don't 
> use field boosts and doc boosts -- if you *do* use field boosts or doc 
> boosts, you would typically know what you had, and could check what boost 
> values you had used later (based on whatever source you orriginally built 
> your index from)
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/explain%28%29---fieldnorm-tp15717182p15799935.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 10:21:41 2008
Return-Path: <java-user-return-32926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33574 invoked from network); 3 Mar 2008 10:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 10:21:41 -0000
Received: (qmail 64463 invoked by uid 500); 3 Mar 2008 10:21:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64439 invoked by uid 500); 3 Mar 2008 10:21:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64428 invoked by uid 99); 3 Mar 2008 10:21:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:21:31 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 212.27.42.28 is neither permitted nor denied by domain of secou@pobox.com)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 10:20:53 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 259E212B6CE
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 11:20:58 +0100 (CET)
Received: from sergeportable (pha75-9-82-230-92-173.fbx.proxad.net [82.230.92.173])
	by smtp2-g19.free.fr (Postfix) with ESMTP id E6E0F12B6C3
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 11:20:57 +0100 (CET)
From: "secou" <secou@pobox.com>
To: <java-user@lucene.apache.org>
Subject: Avoid stemming to get exact word in search results
Date: Mon, 3 Mar 2008 11:21:01 +0100
Message-ID: <003b01c87d18$48226580$d8673080$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003C_01C87D20.A9E6CD80"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ach9GEe0ke3DICFGRhGz6/58owAwhw==
Content-Language: fr
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003C_01C87D20.A9E6CD80
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable

Hi,=20

=20

I=92m using RSS Bandit feed reader (HYPERLINK
"http://www.rssbandit.org"www.rssbandit.org) whose search engine is =
based on
Lucene.=20

=20

I understand the interest of stemming but I sometimes want the exact =
word
and not the stemmed one.

=20

For example a search  with OFS (a company) gives plenty of responses =
with
=93of=94.=20

=20

If I search for =93custom=94, I sometimes don=92t want to get =
=93customer=94.

=20

I=92ve tried =93OFS=94 or +ofs but nothing works.=20

=20

Is there a specific syntax to get it (could be a good idea to have it in =
the
Query Parser Syntax) or do the guys at RSS Bandit have to modify =
something ?


=20

Best regards

=20

Serge

=20

=20


No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.516 / Virus Database: 269.21.1/1303 - Release Date: =
28/02/2008
12:14
=20

------=_NextPart_000_003C_01C87D20.A9E6CD80--


From java-user-return-32927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 10:30:26 2008
Return-Path: <java-user-return-32927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36695 invoked from network); 3 Mar 2008 10:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 10:30:25 -0000
Received: (qmail 77329 invoked by uid 500); 3 Mar 2008 10:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77300 invoked by uid 500); 3 Mar 2008 10:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77289 invoked by uid 99); 3 Mar 2008 10:30:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:30:14 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 10:29:37 +0000
Received: from [192.168.3.104] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 908CB454C1
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 11:29:42 +0100 (CET)
Message-ID: <47CBD30E.9090805@garambrogne.net>
Date: Mon, 03 Mar 2008 11:29:34 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Avoid stemming to get exact word in search results
References: <003b01c87d18$48226580$d8673080$@com>
In-Reply-To: <003b01c87d18$48226580$d8673080$@com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=windows-1250; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

There's no syntax to restore stemmed word. Stemming is done while 
reading the news, so the index never knows the complete word.

I submit a patch for that :
https://issues.apache.org/jira/browse/LUCENE-1190

Be careful, rssbandit use .net lucene, not the java version.

M.
secou a crit :
> Hi, 
>
>  
>
> Im using RSS Bandit feed reader (HYPERLINK
> "http://www.rssbandit.org"www.rssbandit.org) whose search engine is based on
> Lucene. 
>
>  
>
> I understand the interest of stemming but I sometimes want the exact word
> and not the stemmed one.
>
>  
>
> For example a search  with OFS (a company) gives plenty of responses with
> of. 
>
>  
>
> If I search for custom, I sometimes dont want to get customer.
>
>  
>
> Ive tried OFS or +ofs but nothing works. 
>
>  
>
> Is there a specific syntax to get it (could be a good idea to have it in the
> Query Parser Syntax) or do the guys at RSS Bandit have to modify something ?
>
>
>  
>
> Best regards
>
>  
>
> Serge
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 10:41:17 2008
Return-Path: <java-user-return-32928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40130 invoked from network); 3 Mar 2008 10:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 10:41:16 -0000
Received: (qmail 91597 invoked by uid 500); 3 Mar 2008 10:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91564 invoked by uid 500); 3 Mar 2008 10:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91552 invoked by uid 99); 3 Mar 2008 10:41:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 02:41:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 10:40:19 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.116])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1JW82E-0006KM-Ig
	for java-user@lucene.apache.org; Mon, 03 Mar 2008 10:36:46 +0000
Message-ID: <47CBD5A0.7000907@propylon.com>
Date: Mon, 03 Mar 2008 10:40:32 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: bigram analysis
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,

I need to use stop-word bigrams, liike the Nutch analyzer, as described 
in LIA 4.8 (Nutch Analysis). What I don't understand is, why does it 
keep the original stop word intact? I can see great advantage to being 
able to search for a combination of stop word + real word, but I don't 
see the point of keeping the stop word as a token on it's own. Searches 
with just that word would be as pointless as ever.

Is the idea to allow searching on all stop words, even on their own, and 
the bigrams are just an optimization that will improve things 90% of the 
time? Or is it just a side effect of the bigram analyzer that it 
produces a token from the stop word, and therefore it could just be 
filtered out by a stop word filter afterwards, leaving only the bigram 
and the original (non-stop) word?

I'm sure either way would work fr me - just wondering what is normally 
done, and if I'm missing something important here...

Thanks!
-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 12:47:10 2008
Return-Path: <java-user-return-32929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13215 invoked from network); 3 Mar 2008 12:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 12:47:10 -0000
Received: (qmail 57248 invoked by uid 500); 3 Mar 2008 12:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57223 invoked by uid 500); 3 Mar 2008 12:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57212 invoked by uid 99); 3 Mar 2008 12:46:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 04:46:58 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 12:46:22 +0000
Received: from [192.168.3.104] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 4496D4578A
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 13:46:29 +0100 (CET)
Message-ID: <47CBF321.5080702@garambrogne.net>
Date: Mon, 03 Mar 2008 13:46:25 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Does Lucene support partition-by-keyword indexing?
References: <b739adf00803011016w71128166mf2f110b1aa17651a@mail.gmail.com>	 <49373220-7421-4FCB-B8C2-A04C7DB1F7D9@garambrogne.net>	 <b739adf00803011805x3cab48a0mde7447ddadbc5e05@mail.gmail.com>	 <D7206503EB5BE94497458AF4FE4AE8AB6EE2A2@owamz.healy-hudson.com>	 <b739adf00803020809r452d0a96w6734245da0e878b1@mail.gmail.com>	 <B6DCFBFA-5930-43DD-9181-8508803B4113@garambrogne.net> <b739adf00803021807r798cb2bdt29bb7b62062271cd@mail.gmail.com>
In-Reply-To: <b739adf00803021807r798cb2bdt29bb7b62062271cd@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: multipart/alternative;
 boundary="------------030707070303000108050804"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------030707070303000108050804
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

The trouble is to keep information up to date in different nodes. Each 
node should contains some very small index. When a new node enter, it 
can fetch this index from other node, just like chunk in file sharing 
p2p. The smallest index should be one Term, so, searching will only ask 
one node per Term, smaller part must be too hard.
When someone index a new document, it log its actions, and spread its 
log to owner of the right index, or it can be a pull from the DHT.
log may look like this : "timestamp + term:document@node", and with a 
"-", when you delete. When you play a log, begins with a simplification 
of +-.
date of the last update in each index can be read in the DHT. If diff 
log is too large, a node can fetching the complete index.
This way, you can have a near up to date distributed index, it should 
scale right for answering, but should be slow for indexing. Node should 
use NTP or other time sync protocol. Each document is unique in the net, 
so, index conflict shouldn't happen.
With a right tokenizer, you can do a double indexing. One classical 
index (the reference), and one splitted with token->hash.

By the way, small chunk and diff log should be the right approach.

M.

 a crit :
> Hi Mathieu,
>
> You were right. In the early stage, I only intend to implement the basic
> TermQuery and BooleanQuery function. Fuzzy match and partial match requires
> more complicated algorithms. Cache consistency will certainly be my concern.
>
> And yes, each node contains their own documents and builds index against
> them.
>
> On Mon, Mar 3, 2008 at 1:30 AM, Mathieu Lecarme <mathieu@garambrogne.net>
> wrote:
>
>   
>> Thanks for your clean and long answer.
>>
>> With Term splitted on different node you've got different drawback :
>> PrefixQuery and FuzzyQuery will be very hard to implement.
>>
>> Your DHT look very nice, but Bittorrent, the best bandwidth consumer
>> in the world (something like 30% of the Internet), made the choice to
>> centralize this bottleneck. But recently, Bittorrent can be used
>> trackerless.
>> When you read Google withe paper, more about cluster computing than
>> p2p computing, I agree, it says that one conductor (with redundancy)
>> is better than spreading and broadcasting information.
>> The trouble is to be sure that every node is synchronized, and waiting
>> for the latest. Redundant reliable information is not very compatible
>> with P2P, IMHO, redundant caching should be better.
>>
>> Your dichotomic approach looks nice, first a simple action to know
>> wich node to ask, and after, consolidation of the answers.
>>
>> In your scheme, where are indexed documents? Each letter node contains
>> their own documents?
>>
>> M.
>>
>> Le 2 mars 08  17:09,  a crit :
>>
>>     
>>> Hi,
>>>
>>> I am just doing some simple research on P2P searches. In my
>>> assumption, all nodes in this system index their own documents and
>>> each node will be able to search all the documents in the network
>>> (including others'). This is just like file sharing. The simple
>>> approach is to keep all the indices locally and to flood the query
>>> along the network. But this may consume much network bandwidth because
>>> too much nodes, which are not relevant to one certain query, are
>>> involved in handling a query.
>>>
>>> So I want to introduce DHT into my system to solve this problem. First
>>> let me explain what DHT is if you don't know about it. Distributed
>>> Hash Table implements a function lookup(key) on a P2P overlay. It
>>> finds the node of nodeID "nearest"  to a certain "key" efficiently,
>>> usually in logN hops, where N is the total number of nodes. Here the
>>> concept "nearest" is not necessarily geographically, but is defined
>>> the DHT implementation. For example, one implementation would define a
>>> key is nearest to a nodeID when |nodeID-key| is the minimum value. DHT
>>> is widely used in P2P file sharing tools, like Azureus and eMule.
>>>
>>> In my design, why I want to partition the indices by keyword is to
>>> well facilitate this lookup(key) function. Suppose we have two terms:
>>> A and B. Term A's docList contains 1, 2, and 3; while term B's docList
>>> contains 2, 3, and 4. To partition the indices, we hashes terms A and
>>> B to two keys. We transfer the indices to the corresponding nodes
>>> after calling lookup(key). To handle this query, we would again hash
>>> these two terms to two keys, and locate the nodes responsible for the
>>> terms, respectively, also using the lookup(key) function. We finally
>>> do an intersection and get the result "2 and 3". Of course here we
>>> only get a pointer to the actual indexed document, so we still to
>>> fetch the document content after this.
>>>
>>> And I don't think this scheme brings lots of single point of failures
>>> because indices can be replicated on several nodes whose nodeID's are
>>> near to each other. Even one node is down, the lookup(key) function
>>> still finds a substituting node.
>>>
>>> As I don't know how to partition the indices by keyword yet, my design
>>> now is to keep the Lucene indices locally and writes the simplified
>>> inverted indices to the nodes responsible for certain keywords. For
>>> example, node X has the postings like:
>>>
>>> termA: doc1, doc2, doc3
>>> termB: doc2, doc3, doc4
>>>
>>> and lookup(hash(termA)) returns node Y, lookup(hash(termB)) returns
>>> node Z.
>>>
>>> Then in the indexing process, node X writes the info "termA:
>>> nodeX.doc1, nodeX.doc2, nodeX.doc3" on node Y, an the info "termB:
>>> nodeX.doc2, nodeX.doc3, nodeX.doc4" on node Z. At the final step, we
>>> follow this info and go back to node X to get the Lucene Field values
>>> and the real documents.
>>>
>>> Any idea or feedback on my preliminary design?
>>>
>>> On Sun, Mar 2, 2008 at 3:48 PM, Uwe Goetzke
>>> <uwe.goetzke@healy-hudson.com> wrote:
>>>       
>>>> Hi,
>>>>
>>>> I do not yet fully understand what you want to achieve.
>>>> You want to spread the index split by keywords to reduce the time
>>>> to distribute indexes?
>>>> And you want the distribute queries to the nodes based on the same
>>>> split mechanism?
>>>>
>>>>
>>>> You have several nodes with different kind of documents.
>>>> You want to build one index for all nodes and split and distribute
>>>> the index based on a set of keywords specific to a node. This you
>>>> want to do to split the queries so "each query involves
>>>> communicating with constant number of nodes".
>>>>
>>>> Do documents at the nodes contain only such keywords? I doubt.
>>>> So you need anyway a reference where the indexed doc can be found
>>>> and retrieve it from its node for display.
>>>> You could index at each node, merge all indexes from all nodes and
>>>> distribute the combined index.
>>>> On what criteria you can split the queries? If you have a combined
>>>> index each node can distribute the queries to other nodes on
>>>> statistical data found in the term distribution.
>>>> You need to merge the results anyway.
>>>>
>>>> I doubt that this kind of overhead is worth the trouble because you
>>>> introduce a lot of single points of failure. And the scalability
>>>> seems limited because you would need to recalibrate the whole
>>>> network when a adding a new node. Why don't you distribute the
>>>> complete index (we do this after getting it locally zipped and
>>>> later unzipped on the receiver node, size is less than one third
>>>> for transfering). Each node should have some activity indicator.
>>>> Distribute the complete query to the node with the smallest
>>>> activiy. So you get redundancy, do not need to split queries and
>>>> merge results. OK, one "evil" query can bring a node "down" but the
>>>> network is still working.
>>>>
>>>> Do you have any results using lucene on a single node for your
>>>> approach? How many queries and how many documents do you expect?
>>>>
>>>> Regards
>>>>
>>>> Uwe
>>>>
>>>> -----Ursprngliche Nachricht-----
>>>> Von: allenchue@gmail.com [mailto:allenchue@gmail.com] Im Auftrag
>>>> von ??
>>>> Gesendet: Sonntag, 2. Mrz 2008 03:05
>>>> An: java-user@lucene.apache.org
>>>> Betreff: Re: Does Lucene support partition-by-keyword indexing?
>>>>
>>>>
>>>>
>>>> Hi,
>>>>
>>>> I agree with your point that it is easier to partition index by
>>>> document.
>>>> But the partition-by-keyword approach has much greater scalability
>>>> over the
>>>> partition-by-document approach. Each query involves communicating
>>>> with
>>>> constant number of nodes; while partition-by-doc requires spreading
>>>> the
>>>> query a long all or many of the nodes. And I am actually doing some
>>>> small
>>>> research on this. By the way, the documents to be indexed are not
>>>> necessarily web pages. They are mostly files stored on each node's
>>>> file
>>>> system.
>>>>
>>>> Node failures are also handled by replicas. The index for each term
>>>> will be
>>>> replicated on multiple nodes, whose nodeIDs are near to each other.
>>>> This
>>>> mechanism is handled by the underlying DHT system.
>>>>
>>>> So any idea how can partition index by keyword in lucene? Thanks.
>>>>
>>>> On Sun, Mar 2, 2008 at 5:50 AM, Mathieu Lecarme <
>>>>         
>> mathieu@garambrogne.net
>>     
>>>> wrote:
>>>>
>>>>         
>>>>> The easiest way is to split index by Document. In Lucene, index
>>>>> contains Document and inverse index of Term. If you wont to put Term
>>>>> in different place, Document will be duplicated on each index, with
>>>>> only a part of their Term.
>>>>>
>>>>> How will you manage node failure in your network?
>>>>>
>>>>> They were some trial to build big p2p search engine to compet with
>>>>> Google, but, it will be easier to split by Document.
>>>>>
>>>>> If you have to many computers and want to see them working together,
>>>>> why don't use Nutch with Hadoop?
>>>>>
>>>>> M.
>>>>> Le 1 mars 08  19:16, Yin Qiu a crit :
>>>>>
>>>>>           
>>>>>> Hi,
>>>>>>
>>>>>> I'm planning to implement a search infrastructure on a P2P
>>>>>> overlay. To
>>>>>> achieve this, I want to first distribute the indices to various
>>>>>> nodes
>>>>>> connected by this overlay. My approach is to partition the
>>>>>> indices by
>>>>>> keyword, that is, one node takes care of certain keywords (or
>>>>>> terms). When a
>>>>>> simple TermQuery is encountered, we just find the node associated
>>>>>> with that
>>>>>> term (with distributed hash table) and get the result. And
>>>>>> suppose a
>>>>>> BooleanQuery is issued, we contact all the nodes involved in this
>>>>>> query and
>>>>>> finally merge the result.
>>>>>>
>>>>>> So my question is: does Lucene support partitioning the indices by
>>>>>> keywords?
>>>>>>
>>>>>> Thanks in advance.
>>>>>>
>>>>>> --
>>>>>> Look before you leap
>>>>>> -------------------------------------------
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>           
>>>> --
>>>> Look before you leap
>>>> -------------------------------------------
>>>>
>>>> -----------------------------------------------------------------------
>>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>>> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB
>>>> 12076
>>>>
>>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte
>>>> Empfnger sind, drfen Sie die Informationen nicht offen legen
>>>> oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen
>>>> haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese
>>>> Email an den Absender zurckschicken. Bitte lschen Sie danach
>>>> diese Email.
>>>> This email is confidential. If you are not the intended recipient,
>>>> you must not disclose or use this information contained in it. If
>>>> you have received this email in error please tell us immediately by
>>>> return email and delete the document.
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>>
>>> --
>>> Look before you leap
>>> -------------------------------------------
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>   


--------------030707070303000108050804--

From java-user-return-32930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 15:19:06 2008
Return-Path: <java-user-return-32930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53238 invoked from network); 3 Mar 2008 15:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 15:19:04 -0000
Received: (qmail 11033 invoked by uid 500); 3 Mar 2008 15:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11009 invoked by uid 500); 3 Mar 2008 15:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10994 invoked by uid 99); 3 Mar 2008 15:18:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 07:18:52 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 15:18:17 +0000
Received: by mu-out-0910.google.com with SMTP id g7so121175muf.0
        for <java-user@lucene.apache.org>; Mon, 03 Mar 2008 07:17:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=a9QMpEv57DNGnt9nzq0n2r5vkhCO5V2q7p+iBSeLreo=;
        b=kS0h6Sk/T6ixEWJ8it+F4vmvcdYa1Zouh5OjdPZChPOgcMUfq3ZyEV4SIhXV8/yV1ZW1y+SPEkRxLvo3TX+xZtWMKlR2xGLzNq8cG/Dao0t3nVVnge2g94jLKmHFodKl9z0k+QV0hYsNb6es87j5KR0r9Vz94pQIHTHwcBoOTFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vmlgobctR7sf58n2lYYiHUipX9CvuStYlXLYknYvGFcHAZ492qmmIGUS5HsKcTtgm5Zi4u5T6Q0b1V8MuXEVcAJWuR+Odu1l5ZnyuV6eOBBH+7mS8s4nX92x7H32Dw20pRL1tjWe+pB9bQ6TnDYARaSjOKhsDc4LC+xXoKg1xP0=
Received: by 10.82.105.13 with SMTP id d13mr23268820buc.28.1204555250246;
        Mon, 03 Mar 2008 06:40:50 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 3 Mar 2008 06:40:50 -0800 (PST)
Message-ID: <359a92830803030640n1be9d74dsd295696a4ba3ed6d@mail.gmail.com>
Date: Mon, 3 Mar 2008 09:40:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how do i search clause
In-Reply-To: <3126751e0803022256g4e047e7dpf0b4ca8dd0d943eb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34798_19761850.1204555250187"
References: <3126751e0803022256g4e047e7dpf0b4ca8dd0d943eb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34798_19761850.1204555250187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, you can use PhraseQuery or, if you're using the usual
QueryParser, enclose your phrase in quotes. You should
probably look at the syntax explanations on the Lucene site...

Best
Erick

On Mon, Mar 3, 2008 at 1:56 AM, anjana m <anjana.mprasad@gmail.com> wrote:

> "Rats give clue to
> smoking<http://localhost:8081/Wellinformed/contentrama/registred/news6.jsp
> >i
> want to search with this clause
> my serach is serachinf or a single input word.
> How do i enhacne it to serach for a cluase.
> please provide me nfo and classes that i need to use.
>
> thanks and regards
> anjnana
>

------=_Part_34798_19761850.1204555250187--

From java-user-return-32931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 15:35:58 2008
Return-Path: <java-user-return-32931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69221 invoked from network); 3 Mar 2008 15:35:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 15:35:58 -0000
Received: (qmail 47567 invoked by uid 500); 3 Mar 2008 15:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47528 invoked by uid 500); 3 Mar 2008 15:35:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47516 invoked by uid 99); 3 Mar 2008 15:35:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 07:35:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 15:35:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 0F3C3E2510
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 07:35:17 -0800 (PST)
Message-Id: <F5AE183A-7F52-49F3-8AA9-D014E3A9E53F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47CBD5A0.7000907@propylon.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: bigram analysis
Date: Mon, 3 Mar 2008 10:35:17 -0500
References: <47CBD5A0.7000907@propylon.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 3, 2008, at 5:40 AM, John Byrne wrote:

> Hi,
>
> I need to use stop-word bigrams, liike the Nutch analyzer, as  
> described in LIA 4.8 (Nutch Analysis). What I don't understand is,  
> why does it keep the original stop word intact? I can see great  
> advantage to being able to search for a combination of stop word +  
> real word, but I don't see the point of keeping the stop word as a  
> token on it's own. Searches with just that word would be as  
> pointless as ever.

I don't know, Google allows for stopword searches.  Just try "the" as  
a query (although it is kind of funny what the results are: "The  
Onion" is the top use of the in the world?  And it is even more  
curious that people actually bought ads for the word "the", but that  
is a digression).  I don't exactly know Nutch's analyzer, but it could  
be that it helps with phrases.  I suppose one would have to look at  
Nutch's query parser as well to get a sense of how they are used.

>
>
> Is the idea to allow searching on all stop words, even on their own,  
> and the bigrams are just an optimization that will improve things  
> 90% of the time? Or is it just a side effect of the bigram analyzer  
> that it produces a token from the stop word, and therefore it could  
> just be filtered out by a stop word filter afterwards, leaving only  
> the bigram and the original (non-stop) word?

Not sure, you might want to ask on Nutch.  From a strict language  
standpoint, the notion of a stopword in my mind is a bit dubious.  If  
the word really has no meaning, then why does the language have it to  
begin with?  In a search context, it has been treated as of minimal  
use in the early days mostly because of space and memory  
considerations.  Now a days, as we get more sophisticated in our  
search capabilities, I think it can be useful for doing better phrase  
matching, etc. as well as more advanced NLP search.  Now it seems like  
the general response is disk is cheap, why throw away information?


>
>
> I'm sure either way would work fr me - just wondering what is  
> normally done, and if I'm missing something important here...

"It depends".  I think most Lucene users just use the generally held  
assumption that you should remove stopwords, but I am not sure.  At a  
minimum, I think the answer is it depends on the application.  If you  
want to do what you describe above, I would keep them.  In the end,  
the IDF factor should handle the commonality of them quite nicely so  
as any use of them as a general term (and not part of a phrase) will  
not affect relevance all that much.

-Grant


--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 15:50:32 2008
Return-Path: <java-user-return-32932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85045 invoked from network); 3 Mar 2008 15:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 15:50:32 -0000
Received: (qmail 77245 invoked by uid 500); 3 Mar 2008 15:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77224 invoked by uid 500); 3 Mar 2008 15:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77213 invoked by uid 99); 3 Mar 2008 15:50:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 07:50:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 15:49:46 +0000
Received: from [192.168.3.104] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 2717C455AB
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 16:49:51 +0100 (CET)
Message-ID: <47CC1E1B.2010406@garambrogne.net>
Date: Mon, 03 Mar 2008 16:49:47 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: bigram analysis
References: <47CBD5A0.7000907@propylon.com> <F5AE183A-7F52-49F3-8AA9-D014E3A9E53F@apache.org>
In-Reply-To: <F5AE183A-7F52-49F3-8AA9-D014E3A9E53F@apache.org>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> Not sure, you might want to ask on Nutch.  From a strict language 
> standpoint, the notion of a stopword in my mind is a bit dubious.  If 
> the word really has no meaning, then why does the language have it to 
> begin with?  In a search context, it has been treated as of minimal 
> use in the early days mostly because of space and memory 
> considerations.  Now a days, as we get more sophisticated in our 
> search capabilities, I think it can be useful for doing better phrase 
> matching, etc. as well as more advanced NLP search.  Now it seems like 
> the general response is disk is cheap, why throw away information?
To limit writing on disk, to simplify merge ?

I don't know the ratio of stop word in current texts.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 17:12:29 2008
Return-Path: <java-user-return-32933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43668 invoked from network); 3 Mar 2008 17:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 17:12:28 -0000
Received: (qmail 61077 invoked by uid 500); 3 Mar 2008 17:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60832 invoked by uid 500); 3 Mar 2008 17:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60821 invoked by uid 99); 3 Mar 2008 17:12:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 09:12:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 17:11:41 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id E567EE252A
	for <java-user@lucene.apache.org>; Mon,  3 Mar 2008 09:11:51 -0800 (PST)
Message-Id: <817090B6-BCFB-4839-93D1-B3AA38A2EFA1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47CC1E1B.2010406@garambrogne.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: bigram analysis
Date: Mon, 3 Mar 2008 12:11:49 -0500
References: <47CBD5A0.7000907@propylon.com> <F5AE183A-7F52-49F3-8AA9-D014E3A9E53F@apache.org> <47CC1E1B.2010406@garambrogne.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Yep, still good reasons like I said, but becoming less important as  
the hardware, etc. gets faster and cheaper, IMO, especially in the  
context of more advanced search capabilities.

On Mar 3, 2008, at 10:49 AM, Mathieu Lecarme wrote:

>
>> Not sure, you might want to ask on Nutch.  From a strict language  
>> standpoint, the notion of a stopword in my mind is a bit dubious.   
>> If the word really has no meaning, then why does the language have  
>> it to begin with?  In a search context, it has been treated as of  
>> minimal use in the early days mostly because of space and memory  
>> considerations.  Now a days, as we get more sophisticated in our  
>> search capabilities, I think it can be useful for doing better  
>> phrase matching, etc. as well as more advanced NLP search.  Now it  
>> seems like the general response is disk is cheap, why throw away  
>> information?
> To limit writing on disk, to simplify merge ?
>
> I don't know the ratio of stop word in current texts.
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 03 17:19:31 2008
Return-Path: <java-user-return-32934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47048 invoked from network); 3 Mar 2008 17:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Mar 2008 17:19:30 -0000
Received: (qmail 75609 invoked by uid 500); 3 Mar 2008 17:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75578 invoked by uid 500); 3 Mar 2008 17:19:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75567 invoked by uid 99); 3 Mar 2008 17:19:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 09:19:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 17:18:34 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.116])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1JWEFe-0003mC-1K
	for java-user@lucene.apache.org; Mon, 03 Mar 2008 17:15:02 +0000
Message-ID: <47CC32F6.2060505@propylon.com>
Date: Mon, 03 Mar 2008 17:18:46 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <47CBD5A0.7000907@propylon.com> <F5AE183A-7F52-49F3-8AA9-D014E3A9E53F@apache.org> <47CC1E1B.2010406@garambrogne.net> <817090B6-BCFB-4839-93D1-B3AA38A2EFA1@apache.org>
In-Reply-To: <817090B6-BCFB-4839-93D1-B3AA38A2EFA1@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: bigram analysis
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Yes, this makes sense to me. I think I'll just keep all words, including 
stop words, and if performance ever becomes an issue, I'll look at 
bigrams again. But I think there's a good chance that I'll never see 
significant impact either way.

Thanks guys!

Grant Ingersoll wrote:
> Yep, still good reasons like I said, but becoming less important as 
> the hardware, etc. gets faster and cheaper, IMO, especially in the 
> context of more advanced search capabilities.
>
> On Mar 3, 2008, at 10:49 AM, Mathieu Lecarme wrote:
>
>>
>>> Not sure, you might want to ask on Nutch.  From a strict language 
>>> standpoint, the notion of a stopword in my mind is a bit dubious.  
>>> If the word really has no meaning, then why does the language have 
>>> it to begin with?  In a search context, it has been treated as of 
>>> minimal use in the early days mostly because of space and memory 
>>> considerations.  Now a days, as we get more sophisticated in our 
>>> search capabilities, I think it can be useful for doing better 
>>> phrase matching, etc. as well as more advanced NLP search.  Now it 
>>> seems like the general response is disk is cheap, why throw away 
>>> information?
>> To limit writing on disk, to simplify merge ?
>>
>> I don't know the ratio of stop word in current texts.
>>
>> M.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 03:34:26 2008
Return-Path: <java-user-return-32935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29709 invoked from network); 4 Mar 2008 03:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 03:34:26 -0000
Received: (qmail 55102 invoked by uid 500); 4 Mar 2008 03:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55066 invoked by uid 500); 4 Mar 2008 03:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55055 invoked by uid 99); 4 Mar 2008 03:34:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 19:34:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.241 as permitted sender)
Received: from [72.14.246.241] (HELO ag-out-0708.google.com) (72.14.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 03:33:41 +0000
Received: by ag-out-0708.google.com with SMTP id 35so580413aga.11
        for <java-user@lucene.apache.org>; Mon, 03 Mar 2008 19:33:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=B+BH5RF1JOuiCeL2/yPQ1GSZE6MIV0XjTOVxXwGvhk4=;
        b=jiIGv6MNgY2WFM3+qIRatCndDH5AliF+3hZd/jfKW5GXcyVeH6uhdI13wscEoJtwPlZ14LbHOOL7ddWqwlvBKq5gO5Z/YWzTmemiUq53b8FQJwuAlRRfQQ4/etfLCHY3kFTM4d3QmjHMbeci02BYMbIFmZy2Df6JN+ADyK+xdN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=xFYQTUaler1YXfB+LXlM+HcZvuciXq7rg+if64xdZimGKLRJAM/7TNJXdlR9wPUNIYe0tQ28V2sdo/Zzk3xkfPW4LAxztyCbgN+DvQpnEo2OyZBif+m93RxBbdQi1SVIPQZiamxF9BviawY+2jL3geq/8dmTB+PWSr///9la/no=
Received: by 10.100.119.17 with SMTP id r17mr1084137anc.42.1204601631002;
        Mon, 03 Mar 2008 19:33:51 -0800 (PST)
Received: by 10.100.43.15 with HTTP; Mon, 3 Mar 2008 19:33:50 -0800 (PST)
Message-ID: <4b124c310803031933r107346e8oe132321caf7a8d1@mail.gmail.com>
Date: Mon, 3 Mar 2008 19:33:50 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Security filtering from external DB
In-Reply-To: <47C53FE6.6090205@codelutin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19899_32243063.1204601631002"
References: <47BE94CE.3020802@codelutin.com> <47C292B0.4020305@codelutin.com>
	 <f09790220802262246o56a6ddbap17c01dad83208c83@mail.gmail.com>
	 <47C53FE6.6090205@codelutin.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19899_32243063.1204601631002
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Gabriel,
  You can make this search much more efficient as follows: say that you hav=
e
a method

public BooleanQuery createQuery(Collection<String> allowedUUIDs);

  that works as you describe.  Then you can easily create a useful reusable
filter as follows:

  Filter filter =3D new CachingWrapperFilter(new
QueryFilter(createQuery(uuidCollection)));

  this filter will cache BitSets keyed on IndexReader instances, so hang
onto it and use it for
the entire time your uuidCollection doesn't change.

   Hope this helps.

  -jake

On Wed, Feb 27, 2008 at 2:48 AM, Gabriel Landais <landais@codelutin.com>
wrote:

> h t a =E9crit :
> > I guess you can implement createBitSet() more effciently by using
> > Filer,but not BooleanQuery
> Hi,
>  thanks for advice, but did you mean Filter or Filer? And even if I
> should use a Filter, I don't really understand how to replace the
> Boolean query :(
>  The boolean query is already very efficient, so if it can be better,
> it's would be great!
> Regards,
>  Gabriel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19899_32243063.1204601631002--

From java-user-return-32936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 06:46:58 2008
Return-Path: <java-user-return-32936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70184 invoked from network); 4 Mar 2008 06:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 06:46:58 -0000
Received: (qmail 77491 invoked by uid 500); 4 Mar 2008 06:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77453 invoked by uid 500); 4 Mar 2008 06:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77442 invoked by uid 99); 4 Mar 2008 06:46:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 22:46:48 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 69.80.193.44 is neither permitted nor denied by domain of get.sameer@gmail.com)
Received: from [69.80.193.44] (HELO smtp1.spokeo.com) (69.80.193.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 06:45:59 +0000
Received: from spokeo.com (mongrel1.spokeo.com [192.168.10.19])
	by smtp1.spokeo.com (Postfix) with ESMTP id 5696F3B92DC
	for <java-user@lucene.apache.org>; Tue,  4 Mar 2008 06:46:18 +0000 (UTC)
Date: Tue, 4 Mar 2008 06:46:18 +0000
From: get.sameer@gmail.com
To: java-user@lucene.apache.org
Message-Id: <47ccf03a18d12_1a5e1566068e72141310c1@mongrel1.tmail>
Subject: get.sameer has invited you to Spokeo
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary=mimepart_47ccf03a195be_1a5e1566068e72141311c5
X-Virus-Checked: Checked by ClamAV on apache.org

--mimepart_47ccf03a195be_1a5e1566068e72141311c5
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: Quoted-printable
Content-Disposition: inline

Dear java-user@lucene.apache.org,<br/><br/>

get.sameer@gmail.com has invited you to Spokeo,
which finds your friends' updates across the Web.

Click http://www.spokeo.com/public/join?c=3Dbfa835cfcec57bcc76987aff8364c=
ba43dc7638a to accept your invitation.

On average, Spokeo finds 87 friends across 30 different social
networks. See what Spokeo can find for you now!


-----
This invitation was sent with get.sameer's explicit approval.=

--mimepart_47ccf03a195be_1a5e1566068e72141311c5--

From java-user-return-32937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 07:53:14 2008
Return-Path: <java-user-return-32937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85368 invoked from network); 4 Mar 2008 07:53:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 07:53:14 -0000
Received: (qmail 18916 invoked by uid 500); 4 Mar 2008 07:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18883 invoked by uid 500); 4 Mar 2008 07:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18872 invoked by uid 99); 4 Mar 2008 07:53:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Mar 2008 23:53:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of get.sameer@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 07:52:28 +0000
Received: by nf-out-0910.google.com with SMTP id d3so464435nfc.15
        for <java-user@lucene.apache.org>; Mon, 03 Mar 2008 23:52:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=mhq8rF2woDcM7ludqU2dsb31y1dkcSjO25C5mtAer7U=;
        b=h7Mu3tlJfzqI7nB0oR7vMose+sEMHw1Ga7df8Hd5Oj2bn288mrKr1r6jqPOZV+ECIFxs4zsf/Kh70T5ZfRxH8bXPHyTVubziZm1/KuZaBQWcCHUav9FxgeDHvcT+ymnxPQ5Vdbs/M/MsybTc77g9kmhYIaH62Y9Ma2wHVTT7Wz0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=PXRp9aQBceBsFv8VckACMnOUCt3hn978lEcDltjkNfkBX1IHpoADG094DmMhPyNqLM8otKaC/yPvUyK+vIspQJxSkML5RKWDk+Fcub3Tb+e9yxR06HQgO5GAuQO/N15cSDAQGlDGDPyQo+HuxPycB2WheXHzsqscrezafM4hXDo=
Received: by 10.82.138.6 with SMTP id l6mr3469191bud.35.1204617151107;
        Mon, 03 Mar 2008 23:52:31 -0800 (PST)
Received: by 10.82.123.5 with HTTP; Mon, 3 Mar 2008 23:52:31 -0800 (PST)
Message-ID: <9ce5095c0803032352t363f3e9n4c57b9da10c74a09@mail.gmail.com>
Date: Tue, 4 Mar 2008 13:22:31 +0530
From: "Sameer Shisodia" <get.sameer@gmail.com>
To: "Sameer Shisodia" <get.sameer@gmail.com>
Subject: Apologies for the Spokeo Spam
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17300_11660084.1204617151093"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17300_11660084.1204617151093
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 I apologise for any spam sent on my behalf by Spokeo. I was totally unaware
of clicking any link that could've sent the spam.
Please avoid the service.
Rgds,
Sameer

-- 
Sameer Shisodia  Bangalore
(c) +91-98451-80207

------=_Part_17300_11660084.1204617151093--

From java-user-return-32938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 18:05:42 2008
Return-Path: <java-user-return-32938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62907 invoked from network); 4 Mar 2008 18:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 18:05:42 -0000
Received: (qmail 64581 invoked by uid 500); 4 Mar 2008 18:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64554 invoked by uid 500); 4 Mar 2008 18:05:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64541 invoked by uid 99); 4 Mar 2008 18:05:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 10:05:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 18:04:41 +0000
X-IronPort-AV: E=Sophos;i="4.25,444,1199664000"; 
   d="scan'208";a="90419283"
Received: from exbe2.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.13])
  by mx2.nuigalway.ie with ESMTP; 04 Mar 2008 17:42:24 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 4 Mar 2008 18:04:46 +0000
Received: from [10.2.17.51] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 4 Mar 2008 18:04:46 +0000
Message-ID: <47CD8F40.9010307@deri.org>
Date: Tue, 04 Mar 2008 18:04:48 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Incorrect Token Offset when using multiple fieldable instance
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 04 Mar 2008 18:04:46.0195 (UTC) FILETIME=[3AE23430:01C87E22]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I currently use multiple fieldable instances for indexing sentences of a 
document.
When there is only one single fieldable instance, the token offset 
generation performed in DocumentWriter is correct.
The problem appears when there is two or more fieldable instances. In 
DocumentWriter$FieldData#invertField method, if the field is tokenized, 
instead of updating offset attribute with stringValue.length() (which is 
performed if the field is not tokenized, line 1458), you update the 
offset attribute with the end offset of the last token (line 1503: 
offset = offsetEnd+1;).
As a consequence, if a token has been filtered (for example a stopword, 
a dot, a space, etc.), the offset attribute is updated with the end 
offset of the last token not filtered. In this case, you store inside 
the offset attribute an incorrect offset (the offset is shift back) and 
all the next fieldable instances will have their offset shifted back.

Is it a bug ? Or is it a desired behavior (in this case, why ?) ?

Regards.

-- 
Renaud Delbru,
E.C.S., Ph.D. Student,
Semantic Information Systems and
Language Engineering Group (SmILE),
Digital Enterprise Research Institute,
National University of Ireland, Galway.
http://smile.deri.ie/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 18:32:36 2008
Return-Path: <java-user-return-32939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79465 invoked from network); 4 Mar 2008 18:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 18:32:36 -0000
Received: (qmail 14697 invoked by uid 500); 4 Mar 2008 18:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14205 invoked by uid 500); 4 Mar 2008 18:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14192 invoked by uid 99); 4 Mar 2008 18:32:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 10:32:26 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 18:31:50 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Why indexing database is necessary? (RE: indexing database)
Date: Tue, 4 Mar 2008 13:33:19 -0500
Message-ID: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Why indexing database is necessary? (RE: indexing database)
Thread-Index: Ach+HooL9xFEZnEYSmuPNBF/MA6pigABk+xwAABSPNA=
From: "Duan, Nick" <NDuan@mcdonaldbradley.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Could anyone provide any insight on why someone would use nutch/lucene
or any other search engines to index relational databases? With use
cases if possible?  Shouldn't the database's own indexing mechanism be
used since it is more efficient?

If there is such a need of indexing the database content using search
engines, what would be the best approach other than de-normalizing the
database? =20

Thanks a lot in advance!

ND
-----Original Message-----
From: payo [mailto:payo22@yahoo.com]=20
Sent: Tuesday, March 04, 2008 12:36 PM
To: nutch-user@lucene.apache.org
Subject: indexing database


hi to all

i can index a database with nutch?

i am use nutch 0.8.1

thanks
--=20
View this message in context:
http://www.nabble.com/indexing-database-tp15832696p15832696.html
Sent from the Nutch - User mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 18:52:51 2008
Return-Path: <java-user-return-32940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87723 invoked from network); 4 Mar 2008 18:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 18:52:51 -0000
Received: (qmail 40718 invoked by uid 500); 4 Mar 2008 18:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40688 invoked by uid 500); 4 Mar 2008 18:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40677 invoked by uid 99); 4 Mar 2008 18:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 10:52:40 -0800
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.96] (HELO exprod8og108.obsmtp.com) (64.18.3.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 Mar 2008 18:51:52 +0000
Received: from source ([208.78.78.2]) by exprod8ob108.postini.com ([64.18.7.12]) with SMTP;
	Tue, 04 Mar 2008 10:52:08 PST
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Why indexing database is necessary? (RE: indexing database)
Date: Tue, 4 Mar 2008 13:52:07 -0500
Message-ID: <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
In-Reply-To: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Why indexing database is necessary? (RE: indexing database)
Thread-Index: Ach+HooL9xFEZnEYSmuPNBF/MA6pigABk+xwAABSPNAAAI+vMA==
From: "Darren Hartford" <dhartford@ghsinc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Indexing with lucene/nutch on top of/instead of DB indexing for:

1) relativity scoring
2) alias searching (i.e. a large amount of aliases, like first names)
3) highlighting
4) cross-datasource searching (multi DB, DB + XML files, etc).

As for best approach to externally index, I do not have any direct
pointers.  I would recommend looking at an ETL tool that can be extended
for this purpose (I've started writing a plugin for Pentaho, but got
pulled off and haven't finished it -- and that was for Solr, not
lucene/nutch).

-D

> -----Original Message-----
> From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
> Sent: Tuesday, March 04, 2008 1:33 PM
> To: java-user@lucene.apache.org
> Subject: Why indexing database is necessary? (RE: indexing database)
>=20
> Could anyone provide any insight on why someone would use nutch/lucene
> or any other search engines to index relational databases? With use
> cases if possible?  Shouldn't the database's own indexing mechanism be
> used since it is more efficient?
>=20
> If there is such a need of indexing the database content using search
> engines, what would be the best approach other than de-normalizing the
> database?
>=20
> Thanks a lot in advance!
>=20
> ND
> -----Original Message-----
> From: payo [mailto:payo22@yahoo.com]
> Sent: Tuesday, March 04, 2008 12:36 PM
> To: nutch-user@lucene.apache.org
> Subject: indexing database
>=20
>=20
> hi to all
>=20
> i can index a database with nutch?
>=20
> i am use nutch 0.8.1
>=20
> thanks
> --
> View this message in context:
> http://www.nabble.com/indexing-database-tp15832696p15832696.html
> Sent from the Nutch - User mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 19:18:46 2008
Return-Path: <java-user-return-32941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98731 invoked from network); 4 Mar 2008 19:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 19:18:45 -0000
Received: (qmail 82355 invoked by uid 500); 4 Mar 2008 19:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82314 invoked by uid 500); 4 Mar 2008 19:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82302 invoked by uid 99); 4 Mar 2008 19:18:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 11:18:35 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 72.14.252.153 as permitted sender)
Received: from [72.14.252.153] (HELO po-out-1718.google.com) (72.14.252.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 19:17:57 +0000
Received: by po-out-1718.google.com with SMTP id b23so813592poe.0
        for <java-user@lucene.apache.org>; Tue, 04 Mar 2008 11:18:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language:from;
        bh=Q6LL1GE2pUntFX0P2z5aSoNAT/f+gPGwAo4a8q2L1uA=;
        b=NsFZyFRvxs7yffiZSOxp7tznkx4cFgrBFJVnw9EcWajh5gFOV3YVVDm9aeMUYe9tX8PY73iP843lR7z2wJ7qksmff0xqfCIK2CJKbA5+giBsqAQUjH8KvpVhSHsHCiq+123EnG6GI/P6TadgEQTzrPkDOshy9pBa1I2fh03eBhc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language:from;
        b=DwzsNbo59BVXMUDih4u8I1ONQY3Gwnf5+C5y2UqcwhANYyAbnBfdOlEvS/pq6tE6XW9o/Md1cIDslouTV7wapSZul0ToysRhjc/Xq71Xv9E2oCf0B2qQ/RevWCe0D6qRSYySzt6FmHQ1VfFICuNrCbrGpDXCDKzHqVStl8F9LIQ=
Received: by 10.140.208.14 with SMTP id f14mr889481rvg.204.1204658287507;
        Tue, 04 Mar 2008 11:18:07 -0800 (PST)
Received: from will ( [209.104.232.98])
        by mx.google.com with ESMTPS id i36sm6620261wxd.9.2008.03.04.11.18.05
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 04 Mar 2008 11:18:06 -0800 (PST)
To: <java-user@lucene.apache.org>
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local> <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
In-Reply-To: <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
Subject: RE: Why indexing database is necessary? (RE: indexing database)
Date: Tue, 4 Mar 2008 14:18:04 -0500
Message-ID: <000301c87e2c$798b1d00$6ca15700$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ach+HooL9xFEZnEYSmuPNBF/MA6pigABk+xwAABSPNAAAI+vMAAA7S+Q
Content-Language: en-us
From: Will Johnson <willjohnsonsearch@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Don't forget the number 1 reason: speed.  For certain types of queries a
search engine can return results orders of magnitude faster than a database.
I've seen search engines return hits in hundreds of milliseconds when the
same database query took hours or even days.  That's not to say that a
search engine is always better, just the it often times is for when the
inputs and outputs are carefully defined.

- will

-----Original Message-----
From: Darren Hartford [mailto:dhartford@ghsinc.com] 
Sent: Tuesday, March 04, 2008 1:52 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Indexing with lucene/nutch on top of/instead of DB indexing for:

1) relativity scoring
2) alias searching (i.e. a large amount of aliases, like first names)
3) highlighting
4) cross-datasource searching (multi DB, DB + XML files, etc).

As for best approach to externally index, I do not have any direct
pointers.  I would recommend looking at an ETL tool that can be extended
for this purpose (I've started writing a plugin for Pentaho, but got
pulled off and haven't finished it -- and that was for Solr, not
lucene/nutch).

-D

> -----Original Message-----
> From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
> Sent: Tuesday, March 04, 2008 1:33 PM
> To: java-user@lucene.apache.org
> Subject: Why indexing database is necessary? (RE: indexing database)
> 
> Could anyone provide any insight on why someone would use nutch/lucene
> or any other search engines to index relational databases? With use
> cases if possible?  Shouldn't the database's own indexing mechanism be
> used since it is more efficient?
> 
> If there is such a need of indexing the database content using search
> engines, what would be the best approach other than de-normalizing the
> database?
> 
> Thanks a lot in advance!
> 
> ND
> -----Original Message-----
> From: payo [mailto:payo22@yahoo.com]
> Sent: Tuesday, March 04, 2008 12:36 PM
> To: nutch-user@lucene.apache.org
> Subject: indexing database
> 
> 
> hi to all
> 
> i can index a database with nutch?
> 
> i am use nutch 0.8.1
> 
> thanks
> --
> View this message in context:
> http://www.nabble.com/indexing-database-tp15832696p15832696.html
> Sent from the Nutch - User mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 19:23:06 2008
Return-Path: <java-user-return-32942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7346 invoked from network); 4 Mar 2008 19:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 19:23:06 -0000
Received: (qmail 3261 invoked by uid 500); 4 Mar 2008 19:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3231 invoked by uid 500); 4 Mar 2008 19:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3220 invoked by uid 99); 4 Mar 2008 19:22:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 11:22:55 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 19:22:07 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m24JMSS0023985
	for <java-user@lucene.apache.org>; Tue, 4 Mar 2008 14:22:28 -0500
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m24JMRi1237504
	for <java-user@lucene.apache.org>; Tue, 4 Mar 2008 14:22:27 -0500
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m24JMRL9031338
	for <java-user@lucene.apache.org>; Tue, 4 Mar 2008 14:22:27 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m24JMRBo031334
	for <java-user@lucene.apache.org>; Tue, 4 Mar 2008 14:22:27 -0500
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: C++ as token in StandardAnalyzer?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF5E0D9A15.0ACEB83D-ON85257402.006A2E28-85257402.006A5C07@us.ibm.com>
Date: Tue, 4 Mar 2008 14:22:24 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 03/04/2008
 14:22:27,
	Serialize complete at 03/04/2008 14:22:27
Content-Type: multipart/alternative; boundary="=_alternative 006A5B3785257402_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006A5B3785257402_=
Content-Type: text/plain; charset="US-ASCII"

I saw some discussion in the archives some time ago about the fact that 
C++ is tokenized as C in the StandardAnalyzer; this seems to still be the 
case; I was wondering if there is a simple way for me to get the behavior 
I want for C++ (that it is tokenized as C++) in particular, and perhaps 
for other more ideosyncratic terms I may have in my own application--
Thanks
Donna



--=_alternative 006A5B3785257402_=--

From java-user-return-32943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 19:28:09 2008
Return-Path: <java-user-return-32943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11174 invoked from network); 4 Mar 2008 19:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 19:28:08 -0000
Received: (qmail 16943 invoked by uid 500); 4 Mar 2008 19:27:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16914 invoked by uid 500); 4 Mar 2008 19:27:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16901 invoked by uid 99); 4 Mar 2008 19:27:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 11:27:58 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 19:27:21 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Why indexing database is necessary? (RE: indexing database)
Date: Tue, 4 Mar 2008 14:28:53 -0500
Message-ID: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
In-Reply-To: <000301c87e2c$798b1d00$6ca15700$@com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Why indexing database is necessary? (RE: indexing database)
Thread-Index: Ach+HooL9xFEZnEYSmuPNBF/MA6pigABk+xwAABSPNAAAI+vMAAA7S+QAABE00A=
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local> <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com> <000301c87e2c$798b1d00$6ca15700$@com>
From: "Duan, Nick" <NDuan@mcdonaldbradley.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, I guess that's because a database query returns a list of records,
whereas search engine returns only the links, not the actual content.
So a search engine works only in the index space, whereas a database
query engine would have to work in both index and content space...


ND

-----Original Message-----
From: Will Johnson [mailto:willjohnsonsearch@gmail.com]=20
Sent: Tuesday, March 04, 2008 2:18 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Don't forget the number 1 reason: speed.  For certain types of queries a
search engine can return results orders of magnitude faster than a
database.
I've seen search engines return hits in hundreds of milliseconds when
the
same database query took hours or even days.  That's not to say that a
search engine is always better, just the it often times is for when the
inputs and outputs are carefully defined.

- will

-----Original Message-----
From: Darren Hartford [mailto:dhartford@ghsinc.com]=20
Sent: Tuesday, March 04, 2008 1:52 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Indexing with lucene/nutch on top of/instead of DB indexing for:

1) relativity scoring
2) alias searching (i.e. a large amount of aliases, like first names)
3) highlighting
4) cross-datasource searching (multi DB, DB + XML files, etc).

As for best approach to externally index, I do not have any direct
pointers.  I would recommend looking at an ETL tool that can be extended
for this purpose (I've started writing a plugin for Pentaho, but got
pulled off and haven't finished it -- and that was for Solr, not
lucene/nutch).

-D

> -----Original Message-----
> From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
> Sent: Tuesday, March 04, 2008 1:33 PM
> To: java-user@lucene.apache.org
> Subject: Why indexing database is necessary? (RE: indexing database)
>=20
> Could anyone provide any insight on why someone would use nutch/lucene
> or any other search engines to index relational databases? With use
> cases if possible?  Shouldn't the database's own indexing mechanism be
> used since it is more efficient?
>=20
> If there is such a need of indexing the database content using search
> engines, what would be the best approach other than de-normalizing the
> database?
>=20
> Thanks a lot in advance!
>=20
> ND
> -----Original Message-----
> From: payo [mailto:payo22@yahoo.com]
> Sent: Tuesday, March 04, 2008 12:36 PM
> To: nutch-user@lucene.apache.org
> Subject: indexing database
>=20
>=20
> hi to all
>=20
> i can index a database with nutch?
>=20
> i am use nutch 0.8.1
>=20
> thanks
> --
> View this message in context:
> http://www.nabble.com/indexing-database-tp15832696p15832696.html
> Sent from the Nutch - User mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 20:00:55 2008
Return-Path: <java-user-return-32944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33302 invoked from network); 4 Mar 2008 20:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 20:00:55 -0000
Received: (qmail 66773 invoked by uid 500); 4 Mar 2008 20:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66745 invoked by uid 500); 4 Mar 2008 20:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66731 invoked by uid 99); 4 Mar 2008 20:00:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 12:00:44 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 72.14.204.228 as permitted sender)
Received: from [72.14.204.228] (HELO qb-out-0506.google.com) (72.14.204.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 20:00:08 +0000
Received: by qb-out-0506.google.com with SMTP id o21so842841qba.9
        for <java-user@lucene.apache.org>; Tue, 04 Mar 2008 12:00:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language:from;
        bh=VNZKoIL1HBSSKPElWhEI/sq6FuubiBXWdBg+3z5WehU=;
        b=uGcPTB63q+hPdvE3kMl4hB8HzPJ3iWDxHoYdfwGPcByBmMd+wF2yUkenGcvhprehotfVLejXlFzXSfZ7J/KP1VhC4hNBZw5tzGmi8Z7CDO0cz01pbw/YCSo+RMpWNnWUdNGJEQteWqacGJX1P9aJkeWa8XFdlqRDOAr+o1PGZ0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language:from;
        b=dAE/gcFyK7atWCMMGFDZFFDoJFylJAzc8izhrNHkh6zRxF7oEhfCvA2NCyVtWEfXTZvrNNdCqUZoGXW0s4pxTfnG36ievntHe6d72t6XkyfuI4XYQ/mlghVL6XgsEA2YSLSmcLwMMLR/ezGZm73FDaP42bvS4bhchGoANOp3Iqc=
Received: by 10.115.95.1 with SMTP id x1mr2800947wal.122.1204660817806;
        Tue, 04 Mar 2008 12:00:17 -0800 (PST)
Received: from will ( [209.104.232.98])
        by mx.google.com with ESMTPS id 35sm2915921wra.37.2008.03.04.12.00.16
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 04 Mar 2008 12:00:17 -0800 (PST)
To: <java-user@lucene.apache.org>
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local> <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com> <000301c87e2c$798b1d00$6ca15700$@com> <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
In-Reply-To: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
Subject: RE: Why indexing database is necessary? (RE: indexing database)
Date: Tue, 4 Mar 2008 15:00:15 -0500
Message-ID: <000701c87e32$5e1b4850$1a51d8f0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ach+HooL9xFEZnEYSmuPNBF/MA6pigABk+xwAABSPNAAAI+vMAAA7S+QAABE00AAATtzAA==
Content-Language: en-us
From: Will Johnson <willjohnsonsearch@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not necessarily, many of the high traffic search sites on the market today
for everything from yellow pages to job boards to ecommerce sites use search
engines to exclusively search *and* retrieve/serve content.  The key is that
they don't have to return all matching rows only the 'best' which are
probably the ones you would want anyways.

- will

-----Original Message-----
From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com] 
Sent: Tuesday, March 04, 2008 2:29 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Hmm, I guess that's because a database query returns a list of records,
whereas search engine returns only the links, not the actual content.
So a search engine works only in the index space, whereas a database
query engine would have to work in both index and content space...


ND

-----Original Message-----
From: Will Johnson [mailto:willjohnsonsearch@gmail.com] 
Sent: Tuesday, March 04, 2008 2:18 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Don't forget the number 1 reason: speed.  For certain types of queries a
search engine can return results orders of magnitude faster than a
database.
I've seen search engines return hits in hundreds of milliseconds when
the
same database query took hours or even days.  That's not to say that a
search engine is always better, just the it often times is for when the
inputs and outputs are carefully defined.

- will

-----Original Message-----
From: Darren Hartford [mailto:dhartford@ghsinc.com] 
Sent: Tuesday, March 04, 2008 1:52 PM
To: java-user@lucene.apache.org
Subject: RE: Why indexing database is necessary? (RE: indexing database)

Indexing with lucene/nutch on top of/instead of DB indexing for:

1) relativity scoring
2) alias searching (i.e. a large amount of aliases, like first names)
3) highlighting
4) cross-datasource searching (multi DB, DB + XML files, etc).

As for best approach to externally index, I do not have any direct
pointers.  I would recommend looking at an ETL tool that can be extended
for this purpose (I've started writing a plugin for Pentaho, but got
pulled off and haven't finished it -- and that was for Solr, not
lucene/nutch).

-D

> -----Original Message-----
> From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
> Sent: Tuesday, March 04, 2008 1:33 PM
> To: java-user@lucene.apache.org
> Subject: Why indexing database is necessary? (RE: indexing database)
> 
> Could anyone provide any insight on why someone would use nutch/lucene
> or any other search engines to index relational databases? With use
> cases if possible?  Shouldn't the database's own indexing mechanism be
> used since it is more efficient?
> 
> If there is such a need of indexing the database content using search
> engines, what would be the best approach other than de-normalizing the
> database?
> 
> Thanks a lot in advance!
> 
> ND
> -----Original Message-----
> From: payo [mailto:payo22@yahoo.com]
> Sent: Tuesday, March 04, 2008 12:36 PM
> To: nutch-user@lucene.apache.org
> Subject: indexing database
> 
> 
> hi to all
> 
> i can index a database with nutch?
> 
> i am use nutch 0.8.1
> 
> thanks
> --
> View this message in context:
> http://www.nabble.com/indexing-database-tp15832696p15832696.html
> Sent from the Nutch - User mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 21:03:06 2008
Return-Path: <java-user-return-32945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64799 invoked from network); 4 Mar 2008 21:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 21:03:06 -0000
Received: (qmail 39899 invoked by uid 500); 4 Mar 2008 21:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39320 invoked by uid 500); 4 Mar 2008 21:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39309 invoked by uid 99); 4 Mar 2008 21:02:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 13:02:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.67.121.29] (HELO mta01.zimbra.com) (77.67.121.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 21:02:17 +0000
Received: from dogfood.zimbra.com (dogfood.zimbra.com [10.10.140.44])
	by mta01.zimbra.com (Postfix) with ESMTP id DD07FDE96ED
	for <java-user@lucene.apache.org>; Tue,  4 Mar 2008 13:02:26 -0800 (PST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id CE2E34BA88
	for <java-user@lucene.apache.org>; Tue,  4 Mar 2008 13:02:26 -0800 (PST)
X-Virus-Scanned: amavisd-new at dogfood.zimbra.com
Received: from dogfood.zimbra.com ([127.0.0.1])
	by localhost (dogfood.zimbra.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bvvU4O4zNYHz for <java-user@lucene.apache.org>;
	Tue,  4 Mar 2008 13:02:25 -0800 (PST)
Received: from dogfood.zimbra.com (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id DAA9C4BA87
	for <java-user@lucene.apache.org>; Tue,  4 Mar 2008 13:02:25 -0800 (PST)
Date: Tue, 4 Mar 2008 13:02:25 -0800 (PST)
From: Tim Brennan <tim@zimbra.com>
To: java-user@lucene.apache.org
Message-ID: <1709809882.1891204664545776.JavaMail.root@dogfood.zimbra.com>
In-Reply-To: <1059795584.4261204608743356.JavaMail.root@dogfood.zimbra.com>
Subject: Re: More IndexDeletionPolicy questions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The bigger picture here is NFS-safety.  When I run a search, I hand off the search results to another thread so that they can be processed as necessary -- in particular so that they can be JOINed with a SQL DB -- but I don't want to completely lock the index from writes while doing a bunch of SQL calls.  Using the commit point tracking I can make sure my appropriate snapshot stays around until I'm completely done with it, even if I'm using an NFS mounted filesystem that doesn't have delete-last semantics.

--tim




> > It seems like it should be pretty simple -- keep a list of open  
> > IndexReaders, track what Segment files they're pointing to, and in 
> 
> > onCommit don't delete those segments.
> 
> This implies you have multiple readers in a single JVM?  If so, you  
> should not need to make a custom deletion policy to handle this case 
> 
> -- the OS should be properly protecting open files from deletion.   
> Can you  shed more light on the bigger picture here?
>
> > Unfortunately it ends up being very difficult to directly determine 
> > what Segment an IndexReader is pointing to.  Is there some  
> > straightforward way that I'm missing -- all I've managed to do so  
> > far is to remember the most recent one from onCommit/onInit and use 
> 
> > that one....that works OK, but makes bootstrapping a pain if you  
> > try to open a Reader before you've opened the writer once.
> >
> > Also, when I use IndexReader.reopen(), can I assume that the newly 
> 
> > returned reader is pointing at the "most recent" segment?  I think 
> 
> > so...
> 
> Yes, except you have a synchronization challenge: if the writer is in 
> 
> the process of committing just as your reader opens you can't be  
> certain whether the reader got the new commit or the previous one.   
> If you have external synchronization to ensure reader only re-opens  
> after writer has fully committed then this isn't an issue.
> 
> >
> > Here's a sequence of steps that happen in my app:
> >
> > 0) open writer, onInit tells me that seg_1 is the most recent
> segment
> >
> > 1) Open reader, assume it is pointing to seg_1 from (0)
> >
> > 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
> >
> > 3) Call reader.reopen() on the reader from (1)....new reader is  
> > pointing to seg_2 now?
> >
> > 4) seg_1 stays around until the next time I open or commit a  
> > writer, then it is removed.
> >
> >
> > Does that seem reasonable?
> >
> >
> > --tim
> >
> >
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscri
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 21:08:25 2008
Return-Path: <java-user-return-32946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66784 invoked from network); 4 Mar 2008 21:08:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 21:08:25 -0000
Received: (qmail 48928 invoked by uid 500); 4 Mar 2008 21:08:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48896 invoked by uid 500); 4 Mar 2008 21:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48871 invoked by uid 99); 4 Mar 2008 21:08:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 13:08:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 21:07:36 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m24L7aOS013808
	for <java-user@lucene.apache.org>; Tue, 4 Mar 2008 16:07:37 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <47CDB9BA.4080004@informatics.jax.org>
Date: Tue, 04 Mar 2008 16:06:02 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: lucene <java-user@lucene.apache.org>
Subject: Looking for an example of Using Position Increment Gap
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.1.325704, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.3.4.125444
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_900_999 0, __CP_NAME_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Fellows,

I'm working on a project here where we are trying to use our lucene 
indexes to return concrete objects.  One of the things we want to be 
able to match by is by vocabulary terms annotated to that object, as 
well as all of the child vocabulary terms of that annotated term.

So, what I was thinking about doing is extending my index that returns 
objects of that type to include a new field say "sub_term".  In this 
field I would put all of the text of these vocabulary sub terms 
together, and introduce phrase boundries using some of the techniques 
that are described in the Javadoc in the analysis section.  (Basically 
writing a custom analyzer that introduces a position increment gap 
between phrases)  I am however curious if an example of a usage like 
that exists somewhere that I could use as a basis for the analyzer that 
I'm going to have to write to handle this case.

Does anyone know of a good example?

Matt


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 21:19:09 2008
Return-Path: <java-user-return-32947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72524 invoked from network); 4 Mar 2008 21:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 21:19:09 -0000
Received: (qmail 65642 invoked by uid 500); 4 Mar 2008 21:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65607 invoked by uid 500); 4 Mar 2008 21:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65595 invoked by uid 99); 4 Mar 2008 21:18:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 13:18:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 21:18:19 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1087141fkz.5
        for <java-user@lucene.apache.org>; Tue, 04 Mar 2008 13:18:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=2/jpzFzR1uX9ivWghyIyoppbUWKpdL3DIi9vh35/iao=;
        b=qV1qwXHHNQXvrG5mydcJL53JB2INuGNuZ7xtwArDpDbKREdAiqyouS8sGMOQ18YVapxH5qqOPWkiIZKtbgUjf6gBzbMAXNZCG5YhF8JPmGz9hXgHlkntkkPxJ4GJRq6PxUYbDo+rNgZLRuBJoOglIqvPXOS8Z3rW8hZXAwfXWrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kSctiZmIJTNZOw/hzvWPohH4jLUqrbfJ4+rBgISD4nZifOuX+XTYHjX/Cts46k0VpMWd3yGjdvU1SwDprg+5tBYNXrpJ+0OOmWsUiiucioEqGEBXlZeDkye8yVjkackV1ReBGS/ZtR0CHMaCcEVsYcXTLxMoctHeW2getlWJOCk=
Received: by 10.82.177.3 with SMTP id z3mr6182056bue.23.1204665498864;
        Tue, 04 Mar 2008 13:18:18 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 4 Mar 2008 13:18:18 -0800 (PST)
Message-ID: <359a92830803041318m47a5bacbncae7d10d3b33aa36@mail.gmail.com>
Date: Tue, 4 Mar 2008 16:18:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: C++ as token in StandardAnalyzer?
In-Reply-To: <OF5E0D9A15.0ACEB83D-ON85257402.006A2E28-85257402.006A5C07@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_507_19356522.1204665498854"
References: <OF5E0D9A15.0ACEB83D-ON85257402.006A2E28-85257402.006A5C07@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_507_19356522.1204665498854
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Almost by definition, you have to write your own analyzer. This may be as
simple as chaining another filter into one of the regular analyzers or as
complex as defining your own grammar.

As far as I know, there's no "keep word" list. But that would be an
interesting addition. That is, a variety of analyzer that you not only
passed a list of stop words to, but also passed a list of "keep words",
or words that should NOT be massaged at all. I can imagine that this
would get pretty tricky for, say, StandardAnalyzer, but something like
this in the chain of WhitespaceTokenizer >> LowercaseFilter >>
KeepwordFilter might be useful...

All this right off the top of my head without much thought, but....

Best
Erick

On Tue, Mar 4, 2008 at 2:22 PM, Donna L Gresh <gresh@us.ibm.com> wrote:

> I saw some discussion in the archives some time ago about the fact that
> C++ is tokenized as C in the StandardAnalyzer; this seems to still be the
> case; I was wondering if there is a simple way for me to get the behavior
> I want for C++ (that it is tokenized as C++) in particular, and perhaps
> for other more ideosyncratic terms I may have in my own application--
> Thanks
> Donna
>
>
>

------=_Part_507_19356522.1204665498854--

From java-user-return-32948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 04 22:27:58 2008
Return-Path: <java-user-return-32948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5245 invoked from network); 4 Mar 2008 22:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Mar 2008 22:27:58 -0000
Received: (qmail 54000 invoked by uid 500); 4 Mar 2008 22:27:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53962 invoked by uid 500); 4 Mar 2008 22:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53951 invoked by uid 99); 4 Mar 2008 22:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 14:27:47 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 22:27:09 +0000
Received: by hu-out-0506.google.com with SMTP id 27so724457hub.15
        for <java-user@lucene.apache.org>; Tue, 04 Mar 2008 14:27:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=zegRLQQTjuR2Fi3z0OXD0bVM1OIsiBc771UigQ465h8=;
        b=FN4XZc91APT50qtGCl/htLQBOIRt1YERqEZu4JbnPtEdKfaBztBalZ8+TrsmWNh9YYmkK1uvqJq2GL9TiKKTXzlz+CfrGnsfIeI8B82jXsHUqOuWlWXmdlwUb0fTucm7yP8ytpxncOPCv870Am2M7cKZxLUhSfGK1gHcfMN/yqM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Z1b7D5F2d13gttCOTT9U/EwoB3MvmDA3RlDkvL+CufmKQSf9YVrPWeanK0HpfsM8E78y0OV6ZV3vKNBW3nTZDVQeTTfaS65UFkaD2fxKuLvXqgSt6Ewkx7Z7E2ZWbKeTG1jmY1S22waLnrwrYxFrWMrxV0cCa2pfi+1P4xlIdQ4=
Received: by 10.78.168.1 with SMTP id q1mr4897913hue.2.1204669636709;
        Tue, 04 Mar 2008 14:27:16 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Tue, 4 Mar 2008 14:27:11 -0800 (PST)
Message-ID: <6e3ae6310803041427v56154866v90aba9a2c5210a9f@mail.gmail.com>
Date: Tue, 4 Mar 2008 14:27:11 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why indexing database is necessary? (RE: indexing database)
In-Reply-To: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local>
	 <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
	 <000301c87e2c$798b1d00$6ca15700$@com>
	 <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Nick,

Lucene Index in a sense is more like another kind of database indexes,
because it's inverted, etc.

If we ask why we need many database indexes, the answer is, different
query execution path.
Same thing for Lucene index, which is faster for term matching.

Lucene index actually can do more. For example, facet-search, which
tells you how many matches in each category(facet), in addition to the
matched results. This way is more convenient for websites to display
results, and provide additional links for users to narrow down the
results.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Tue, Mar 4, 2008 at 11:28 AM, Duan, Nick <NDuan@mcdonaldbradley.com> wrote:
> Hmm, I guess that's because a database query returns a list of records,
>  whereas search engine returns only the links, not the actual content.
>  So a search engine works only in the index space, whereas a database
>  query engine would have to work in both index and content space...
>
>
>  ND
>
>
>
>  -----Original Message-----
>  From: Will Johnson [mailto:willjohnsonsearch@gmail.com]
>  Sent: Tuesday, March 04, 2008 2:18 PM
>  To: java-user@lucene.apache.org
>  Subject: RE: Why indexing database is necessary? (RE: indexing database)
>
>  Don't forget the number 1 reason: speed.  For certain types of queries a
>  search engine can return results orders of magnitude faster than a
>  database.
>  I've seen search engines return hits in hundreds of milliseconds when
>  the
>  same database query took hours or even days.  That's not to say that a
>  search engine is always better, just the it often times is for when the
>  inputs and outputs are carefully defined.
>
>  - will
>
>  -----Original Message-----
>  From: Darren Hartford [mailto:dhartford@ghsinc.com]
>  Sent: Tuesday, March 04, 2008 1:52 PM
>  To: java-user@lucene.apache.org
>  Subject: RE: Why indexing database is necessary? (RE: indexing database)
>
>  Indexing with lucene/nutch on top of/instead of DB indexing for:
>
>  1) relativity scoring
>  2) alias searching (i.e. a large amount of aliases, like first names)
>  3) highlighting
>  4) cross-datasource searching (multi DB, DB + XML files, etc).
>
>  As for best approach to externally index, I do not have any direct
>  pointers.  I would recommend looking at an ETL tool that can be extended
>  for this purpose (I've started writing a plugin for Pentaho, but got
>  pulled off and haven't finished it -- and that was for Solr, not
>  lucene/nutch).
>
>  -D
>
>  > -----Original Message-----
>  > From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
>  > Sent: Tuesday, March 04, 2008 1:33 PM
>  > To: java-user@lucene.apache.org
>  > Subject: Why indexing database is necessary? (RE: indexing database)
>  >
>  > Could anyone provide any insight on why someone would use nutch/lucene
>  > or any other search engines to index relational databases? With use
>  > cases if possible?  Shouldn't the database's own indexing mechanism be
>  > used since it is more efficient?
>  >
>  > If there is such a need of indexing the database content using search
>  > engines, what would be the best approach other than de-normalizing the
>  > database?
>  >
>  > Thanks a lot in advance!
>  >
>  > ND
>  > -----Original Message-----
>  > From: payo [mailto:payo22@yahoo.com]
>  > Sent: Tuesday, March 04, 2008 12:36 PM
>  > To: nutch-user@lucene.apache.org
>  > Subject: indexing database
>  >
>  >
>  > hi to all
>  >
>  > i can index a database with nutch?
>  >
>  > i am use nutch 0.8.1
>  >
>  > thanks
>  > --
>  > View this message in context:
>  > http://www.nabble.com/indexing-database-tp15832696p15832696.html
>  > Sent from the Nutch - User mailing list archive at Nabble.com.
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 01:11:05 2008
Return-Path: <java-user-return-32949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71289 invoked from network); 5 Mar 2008 01:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 01:11:05 -0000
Received: (qmail 97577 invoked by uid 500); 5 Mar 2008 01:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97065 invoked by uid 500); 5 Mar 2008 01:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97049 invoked by uid 99); 5 Mar 2008 01:10:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 17:10:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.234 as permitted sender)
Received: from [72.14.214.234] (HELO hu-out-0506.google.com) (72.14.214.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:10:16 +0000
Received: by hu-out-0506.google.com with SMTP id 27so764961hub.15
        for <java-user@lucene.apache.org>; Tue, 04 Mar 2008 17:10:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=eGctkVopA6orkoLLRO5GK9TF4gw3VpSMMWg+yL1H1hc=;
        b=kInV/Wzfz2uxIOWUq3nFP2mz2sFOmIELcTsllYZUPnelrLpXodToSlq+6C+li9ihQ20d3K1jxDchTT1UmN383ftvDvoHDXOZhZYqMRULiSwfGZKHvkyPFmdYNvvsbIlH4xVcYdo56x3kGg9aTpOFYmAsg7RrDzb8B+FjA8wfvSw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Lw0ZOJd6/zk8KlwxK8h9ztEYuy6+4C+YVwbRZWybEgPZig8iJqiPPvXSKnrDTA1xn3L6QAeWotUnVykKl6dLkTGzTS106Z65Ttk/I7ETk4fju10q4lQFW3tq5qAQJsIvyYAWQ8BfeXGJJRCQD8X5Q7Iu1VueN7Hy7csN1xUpdiU=
Received: by 10.82.188.15 with SMTP id l15mr6788462buf.15.1204679424627;
        Tue, 04 Mar 2008 17:10:24 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 4 Mar 2008 17:10:24 -0800 (PST)
Message-ID: <359a92830803041710n272cf71h80ccfc6978f62a39@mail.gmail.com>
Date: Tue, 4 Mar 2008 20:10:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why indexing database is necessary? (RE: indexing database)
In-Reply-To: <6e3ae6310803041427v56154866v90aba9a2c5210a9f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1265_22985997.1204679424624"
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local>
	 <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
	 <000301c87e2c$798b1d00$6ca15700$@com>
	 <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C1D2@hqmsg01.mcdonaldbradley.local>
	 <6e3ae6310803041427v56154866v90aba9a2c5210a9f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1265_22985997.1204679424624
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

And one other point. You probably *don't* need a search engine for your
database *if* you don't have much textual data. That is, if your database
consists of "classical" tables with columns like "firstname", "lastname",
etc.

But if your database has columns in it containing, say, a page of text then
searching that text is a real pain. *That's* where a search engine shines.

Searching a large DB text field for a single word becomes...er...awkward.

That said, there's a long thread on the Lucene thread that I didn't
understand
at all concerning embedding Lucene in Oracle. You might try looking at
the searchable Lucene threads for that...

Best
Erick

On Tue, Mar 4, 2008 at 5:27 PM, Chris Lu <chris.lu@gmail.com> wrote:

> Hi, Nick,
>
> Lucene Index in a sense is more like another kind of database indexes,
> because it's inverted, etc.
>
> If we ask why we need many database indexes, the answer is, different
> query execution path.
> Same thing for Lucene index, which is faster for term matching.
>
> Lucene index actually can do more. For example, facet-search, which
> tells you how many matches in each category(facet), in addition to the
> matched results. This way is more convenient for websites to display
> results, and provide additional links for users to narrow down the
> results.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
>
> On Tue, Mar 4, 2008 at 11:28 AM, Duan, Nick <NDuan@mcdonaldbradley.com>
> wrote:
> > Hmm, I guess that's because a database query returns a list of records,
> >  whereas search engine returns only the links, not the actual content.
> >  So a search engine works only in the index space, whereas a database
> >  query engine would have to work in both index and content space...
> >
> >
> >  ND
> >
> >
> >
> >  -----Original Message-----
> >  From: Will Johnson [mailto:willjohnsonsearch@gmail.com]
> >  Sent: Tuesday, March 04, 2008 2:18 PM
> >  To: java-user@lucene.apache.org
> >  Subject: RE: Why indexing database is necessary? (RE: indexing
> database)
> >
> >  Don't forget the number 1 reason: speed.  For certain types of queries
> a
> >  search engine can return results orders of magnitude faster than a
> >  database.
> >  I've seen search engines return hits in hundreds of milliseconds when
> >  the
> >  same database query took hours or even days.  That's not to say that a
> >  search engine is always better, just the it often times is for when the
> >  inputs and outputs are carefully defined.
> >
> >  - will
> >
> >  -----Original Message-----
> >  From: Darren Hartford [mailto:dhartford@ghsinc.com]
> >  Sent: Tuesday, March 04, 2008 1:52 PM
> >  To: java-user@lucene.apache.org
> >  Subject: RE: Why indexing database is necessary? (RE: indexing
> database)
> >
> >  Indexing with lucene/nutch on top of/instead of DB indexing for:
> >
> >  1) relativity scoring
> >  2) alias searching (i.e. a large amount of aliases, like first names)
> >  3) highlighting
> >  4) cross-datasource searching (multi DB, DB + XML files, etc).
> >
> >  As for best approach to externally index, I do not have any direct
> >  pointers.  I would recommend looking at an ETL tool that can be
> extended
> >  for this purpose (I've started writing a plugin for Pentaho, but got
> >  pulled off and haven't finished it -- and that was for Solr, not
> >  lucene/nutch).
> >
> >  -D
> >
> >  > -----Original Message-----
> >  > From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
> >  > Sent: Tuesday, March 04, 2008 1:33 PM
> >  > To: java-user@lucene.apache.org
> >  > Subject: Why indexing database is necessary? (RE: indexing database)
> >  >
> >  > Could anyone provide any insight on why someone would use
> nutch/lucene
> >  > or any other search engines to index relational databases? With use
> >  > cases if possible?  Shouldn't the database's own indexing mechanism
> be
> >  > used since it is more efficient?
> >  >
> >  > If there is such a need of indexing the database content using search
> >  > engines, what would be the best approach other than de-normalizing
> the
> >  > database?
> >  >
> >  > Thanks a lot in advance!
> >  >
> >  > ND
> >  > -----Original Message-----
> >  > From: payo [mailto:payo22@yahoo.com]
> >  > Sent: Tuesday, March 04, 2008 12:36 PM
> >  > To: nutch-user@lucene.apache.org
> >  > Subject: indexing database
> >  >
> >  >
> >  > hi to all
> >  >
> >  > i can index a database with nutch?
> >  >
> >  > i am use nutch 0.8.1
> >  >
> >  > thanks
> >  > --
> >  > View this message in context:
> >  > http://www.nabble.com/indexing-database-tp15832696p15832696.html
> >  > Sent from the Nutch - User mailing list archive at Nabble.com.
> >  >
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1265_22985997.1204679424624--

From java-user-return-32950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 07:04:41 2008
Return-Path: <java-user-return-32950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62606 invoked from network); 5 Mar 2008 07:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 07:04:40 -0000
Received: (qmail 97366 invoked by uid 500); 5 Mar 2008 07:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97323 invoked by uid 500); 5 Mar 2008 07:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97311 invoked by uid 99); 5 Mar 2008 07:04:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2008 23:04:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.181.193.4] (HELO drutten.citerus.net) (62.181.193.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 07:03:40 +0000
Received: from drutten.citerus.net ([62.181.193.4]) by drutten.citerus.net
 ([62.181.193.4]) with mapi; Wed, 5 Mar 2008 08:02:24 +0100
From: Tobias Hill <Tobias.Hill@citerus.se>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 5 Mar 2008 08:02:23 +0100
Subject: NO_NORM  and TOKENIZED
Thread-Topic: NO_NORM  and TOKENIZED
Thread-Index: AQHIfo7cYxjN8p69ukW5e6QAMPiCVw==
Message-ID: <BBD1371A36A8D8458F94E4AC71DBEC0515965283AA@drutten.citerus.net>
Accept-Language: sv-SE, en-US
Content-Language: sv-SE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE, en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am quite new to the Lucene API. I find the Field-constructor
unintuitive. Maybe I have misunderstood it. Let's find out...

It can be used either as:
new Field("field", "data", Store.NO, TOKENIZED)

or:
new Field("field", "data", Store.NO, NO_NORM)


As I understand it NO_NORM and TOKENIZED are not settings for
a one-dimensional behaviour - on the contrary they are rather
orthogonal.

I.e. it is quite likely that I would want _both_ TOKENIZED and NO_NORM.
This is especially true for fields that are of approx. equal and short leng=
th
over the doc-space.

- Am I right in my reasoning (which means that the API is a bit unclear)?
Or
- Have I misunderstood something fundamental about TOKENIZED and NO_NORM?

Thankful for any feedback on this,
Tobias

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 09:07:13 2008
Return-Path: <java-user-return-32951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92968 invoked from network); 5 Mar 2008 09:07:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 09:07:13 -0000
Received: (qmail 49929 invoked by uid 500); 5 Mar 2008 09:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49905 invoked by uid 500); 5 Mar 2008 09:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49894 invoked by uid 99); 5 Mar 2008 09:07:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:07:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.249] (HELO ag-out-0708.google.com) (72.14.246.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:06:25 +0000
Received: by ag-out-0708.google.com with SMTP id 35so1722867aga.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 01:06:29 -0800 (PST)
Received: by 10.70.22.16 with SMTP id 16mr2947417wxv.45.1204707989394;
        Wed, 05 Mar 2008 01:06:29 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i11sm1000254wxd.8.2008.03.05.01.06.28
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 01:06:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <BBD1371A36A8D8458F94E4AC71DBEC0515965283AA@drutten.citerus.net>
References: <BBD1371A36A8D8458F94E4AC71DBEC0515965283AA@drutten.citerus.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8EF37B9E-9618-48BD-9501-FFBF18C40B2C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: NO_NORM  and TOKENIZED
Date: Wed, 5 Mar 2008 04:06:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Correct, they are logically orthogonal, and I agree the API is  
somewhat confusing since "NO_NORMS" is mixing up two things.

To get a tokenized field without norms you can create the field with  
Index.TOKENIZED, and then call setOmitNorms(true).

Note that norms "spread" during merges, so, if you really want  
NO_NORMS for a given field X then every doc in the index must have  
its field X indexed with NO_NORMS.  Ie, build a clean index if you  
decide to turn off norms for field X.

Mike

Tobias Hill wrote:

> Hi,
>
> I am quite new to the Lucene API. I find the Field-constructor
> unintuitive. Maybe I have misunderstood it. Let's find out...
>
> It can be used either as:
> new Field("field", "data", Store.NO, TOKENIZED)
>
> or:
> new Field("field", "data", Store.NO, NO_NORM)
>
>
> As I understand it NO_NORM and TOKENIZED are not settings for
> a one-dimensional behaviour - on the contrary they are rather
> orthogonal.
>
> I.e. it is quite likely that I would want _both_ TOKENIZED and  
> NO_NORM.
> This is especially true for fields that are of approx. equal and  
> short length
> over the doc-space.
>
> - Am I right in my reasoning (which means that the API is a bit  
> unclear)?
> Or
> - Have I misunderstood something fundamental about TOKENIZED and  
> NO_NORM?
>
> Thankful for any feedback on this,
> Tobias
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 09:16:08 2008
Return-Path: <java-user-return-32952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96494 invoked from network); 5 Mar 2008 09:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 09:16:08 -0000
Received: (qmail 58998 invoked by uid 500); 5 Mar 2008 09:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58964 invoked by uid 500); 5 Mar 2008 09:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58953 invoked by uid 99); 5 Mar 2008 09:15:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:15:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.240] (HELO ag-out-0708.google.com) (72.14.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:15:21 +0000
Received: by ag-out-0708.google.com with SMTP id 35so1727897aga.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 01:15:29 -0800 (PST)
Received: by 10.100.127.18 with SMTP id z18mr6333849anc.39.1204708529213;
        Wed, 05 Mar 2008 01:15:29 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 24sm973583wrl.14.2008.03.05.01.15.28
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 01:15:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47CD8F40.9010307@deri.org>
References: <47CD8F40.9010307@deri.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
Date: Wed, 5 Mar 2008 04:15:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


This is how Lucene has worked for quite some time (since 1.9).

When there are multiple fields with the same name in one Document,  
each field's offset starts from the last offset (offset of the last  
token) seen in the previous field.  If tokens are skipped at the end  
there's no way IndexWriter can know (because tokenStream doesn't  
return them).  It's as if we need the ability to query a tokenStream  
for its "final" offset or something.

One workaround might be to insert an "end marker" token, with the  
true end offset, which is a term you would never search on?

Mike

Renaud Delbru wrote:

> Hi,
>
> I currently use multiple fieldable instances for indexing sentences  
> of a document.
> When there is only one single fieldable instance, the token offset  
> generation performed in DocumentWriter is correct.
> The problem appears when there is two or more fieldable instances.  
> In DocumentWriter$FieldData#invertField method, if the field is  
> tokenized, instead of updating offset attribute with  
> stringValue.length() (which is performed if the field is not  
> tokenized, line 1458), you update the offset attribute with the end  
> offset of the last token (line 1503: offset = offsetEnd+1;).
> As a consequence, if a token has been filtered (for example a  
> stopword, a dot, a space, etc.), the offset attribute is updated  
> with the end offset of the last token not filtered. In this case,  
> you store inside the offset attribute an incorrect offset (the  
> offset is shift back) and all the next fieldable instances will  
> have their offset shifted back.
>
> Is it a bug ? Or is it a desired behavior (in this case, why ?) ?
>
> Regards.
>
> -- 
> Renaud Delbru,
> E.C.S., Ph.D. Student,
> Semantic Information Systems and
> Language Engineering Group (SmILE),
> Digital Enterprise Research Institute,
> National University of Ireland, Galway.
> http://smile.deri.ie/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 09:52:00 2008
Return-Path: <java-user-return-32953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8163 invoked from network); 5 Mar 2008 09:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 09:52:00 -0000
Received: (qmail 2948 invoked by uid 500); 5 Mar 2008 09:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2912 invoked by uid 500); 5 Mar 2008 09:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2901 invoked by uid 99); 5 Mar 2008 09:51:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:51:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.243] (HELO ag-out-0708.google.com) (72.14.246.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:51:13 +0000
Received: by ag-out-0708.google.com with SMTP id 35so1748563aga.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 01:51:22 -0800 (PST)
Received: by 10.100.121.12 with SMTP id t12mr6405878anc.113.1204710681979;
        Wed, 05 Mar 2008 01:51:21 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id x55sm1467987hsx.3.2008.03.05.01.51.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 01:51:21 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1709809882.1891204664545776.JavaMail.root@dogfood.zimbra.com>
References: <1709809882.1891204664545776.JavaMail.root@dogfood.zimbra.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <439BFC31-E448-4704-9C4C-C94569C53B31@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: More IndexDeletionPolicy questions
Date: Wed, 5 Mar 2008 04:51:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK got it.  Yes, sharing an index over NFS requires your own  
DeletionPolicy.

So presumably you have readers on different machines accessing the  
index over NFS, and then one machine that does the writing to that  
index?  How so you plan to get which commit point each of these  
readers is currently using back to the single writer?

Mike

Tim Brennan wrote:

> The bigger picture here is NFS-safety.  When I run a search, I hand  
> off the search results to another thread so that they can be  
> processed as necessary -- in particular so that they can be JOINed  
> with a SQL DB -- but I don't want to completely lock the index from  
> writes while doing a bunch of SQL calls.  Using the commit point  
> tracking I can make sure my appropriate snapshot stays around until  
> I'm completely done with it, even if I'm using an NFS mounted  
> filesystem that doesn't have delete-last semantics.
>
> --tim
>
>
>
>
>>> It seems like it should be pretty simple -- keep a list of open
>>> IndexReaders, track what Segment files they're pointing to, and in
>>
>>> onCommit don't delete those segments.
>>
>> This implies you have multiple readers in a single JVM?  If so, you
>> should not need to make a custom deletion policy to handle this case
>>
>> -- the OS should be properly protecting open files from deletion.   
>> Can you  shed more light on the bigger picture here?
>>
>>> Unfortunately it ends up being very difficult to directly determine
>>> what Segment an IndexReader is pointing to.  Is there some
>>> straightforward way that I'm missing -- all I've managed to do so
>>> far is to remember the most recent one from onCommit/onInit and use
>>
>>> that one....that works OK, but makes bootstrapping a pain if you
>>> try to open a Reader before you've opened the writer once.
>>>
>>> Also, when I use IndexReader.reopen(), can I assume that the newly
>>
>>> returned reader is pointing at the "most recent" segment?  I think
>>
>>> so...
>>
>> Yes, except you have a synchronization challenge: if the writer is in
>>
>> the process of committing just as your reader opens you can't be
>> certain whether the reader got the new commit or the previous one.
>> If you have external synchronization to ensure reader only re-opens
>> after writer has fully committed then this isn't an issue.
>>
>>>
>>> Here's a sequence of steps that happen in my app:
>>>
>>> 0) open writer, onInit tells me that seg_1 is the most recent
>> segment
>>>
>>> 1) Open reader, assume it is pointing to seg_1 from (0)
>>>
>>> 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
>>>
>>> 3) Call reader.reopen() on the reader from (1)....new reader is
>>> pointing to seg_2 now?
>>>
>>> 4) seg_1 stays around until the next time I open or commit a
>>> writer, then it is removed.
>>>
>>>
>>> Does that seem reasonable?
>>>
>>>
>>> --tim
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscri
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 09:53:25 2008
Return-Path: <java-user-return-32954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8656 invoked from network); 5 Mar 2008 09:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 09:53:25 -0000
Received: (qmail 6444 invoked by uid 500); 5 Mar 2008 09:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6256 invoked by uid 500); 5 Mar 2008 09:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6244 invoked by uid 99); 5 Mar 2008 09:53:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:53:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:52:26 +0000
X-IronPort-AV: E=Sophos;i="4.25,449,1199664000"; 
   d="scan'208";a="90433129"
Received: from exbe2.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.13])
  by mx2.nuigalway.ie with ESMTP; 05 Mar 2008 09:29:59 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 5 Mar 2008 09:52:36 +0000
Received: from [192.168.1.2] ([10.132.157.22]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 5 Mar 2008 09:52:36 +0000
Message-ID: <47CE6D5E.8060702@deri.org>
Date: Wed, 05 Mar 2008 09:52:30 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com>
In-Reply-To: <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 05 Mar 2008 09:52:36.0694 (UTC) FILETIME=[A457AF60:01C87EA6]
X-Virus-Checked: Checked by ClamAV on apache.org

Do you know if there will be side-effects if we replace in 
DocumentWriter$FieldData#invertField
offset = offsetEnd+1;
by
offset = stringValue.length();

I still not understand the reason of such choice for the incrementation 
of the start offset.

Regards.

Michael McCandless wrote:
>
> This is how Lucene has worked for quite some time (since 1.9).
>
> When there are multiple fields with the same name in one Document, 
> each field's offset starts from the last offset (offset of the last 
> token) seen in the previous field.  If tokens are skipped at the end 
> there's no way IndexWriter can know (because tokenStream doesn't 
> return them).  It's as if we need the ability to query a tokenStream 
> for its "final" offset or something.
>
> One workaround might be to insert an "end marker" token, with the true 
> end offset, which is a term you would never search on?
>
> Mike
>
> Renaud Delbru wrote:
>
>> Hi,
>>
>> I currently use multiple fieldable instances for indexing sentences 
>> of a document.
>> When there is only one single fieldable instance, the token offset 
>> generation performed in DocumentWriter is correct.
>> The problem appears when there is two or more fieldable instances. In 
>> DocumentWriter$FieldData#invertField method, if the field is 
>> tokenized, instead of updating offset attribute with 
>> stringValue.length() (which is performed if the field is not 
>> tokenized, line 1458), you update the offset attribute with the end 
>> offset of the last token (line 1503: offset = offsetEnd+1;).
>> As a consequence, if a token has been filtered (for example a 
>> stopword, a dot, a space, etc.), the offset attribute is updated with 
>> the end offset of the last token not filtered. In this case, you 
>> store inside the offset attribute an incorrect offset (the offset is 
>> shift back) and all the next fieldable instances will have their 
>> offset shifted back.
>>
>> Is it a bug ? Or is it a desired behavior (in this case, why ?) ?
-- 
Renaud Delbru,
E.C.S., Ph.D. Student,
Semantic Information Systems and
Language Engineering Group (SmILE),
Digital Enterprise Research Institute,
National University of Ireland, Galway.
http://smile.deri.ie/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 09:54:28 2008
Return-Path: <java-user-return-32955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8810 invoked from network); 5 Mar 2008 09:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 09:54:28 -0000
Received: (qmail 8364 invoked by uid 500); 5 Mar 2008 09:54:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8189 invoked by uid 500); 5 Mar 2008 09:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8178 invoked by uid 99); 5 Mar 2008 09:54:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 01:54:18 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.30] (HELO smtp4-g19.free.fr) (212.27.42.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:53:42 +0000
Received: from smtp4-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp4-g19.free.fr (Postfix) with ESMTP id C1DF73EA0E9
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 10:53:49 +0100 (CET)
Received: from [192.168.99.202] (seb44-1-88-163-78-202.fbx.proxad.net [88.163.78.202])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 1FB8F3EA153
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 10:53:49 +0100 (CET)
Message-ID: <47CE6DAC.6050704@codelutin.com>
Date: Wed, 05 Mar 2008 10:53:48 +0100
From: Gabriel Landais <landais@codelutin.com>
Organization: Code Lutin
User-Agent: Thunderbird 2.0.0.12 (X11/20080227)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Security filtering from external DB
References: <47BE94CE.3020802@codelutin.com> <47C292B0.4020305@codelutin.com>	 <f09790220802262246o56a6ddbap17c01dad83208c83@mail.gmail.com>	 <47C53FE6.6090205@codelutin.com> <4b124c310803031933r107346e8oe132321caf7a8d1@mail.gmail.com>
In-Reply-To: <4b124c310803031933r107346e8oe132321caf7a8d1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jake Mannix a crit :
> Gabriel,
>   You can make this search much more efficient as follows: say that you have
> a method
> 
> public BooleanQuery createQuery(Collection<String> allowedUUIDs);
> 
>   that works as you describe.  Then you can easily create a useful reusable
> filter as follows:
> 
>   Filter filter = new CachingWrapperFilter(new
> QueryFilter(createQuery(uuidCollection)));
> 
>   this filter will cache BitSets keyed on IndexReader instances, so hang
> onto it and use it for
> the entire time your uuidCollection doesn't change.
> 
>    Hope this helps.
> 
>   -jake

Hi,
  yes it helps!
  As a result, I will not use my own BitSet cache mechanism. I have been 
dumb when I believed that I couldn't create a SHOULD query on >1024 
terms, as I can create inner BooleanQuery...
  Just as note, QueryFilter is deprecated, QueryWrapperFilter replaces it.

The new code :

     private Query createQuery(Collection<String> visibleItems) {
         int maxTerms = BooleanQuery.getMaxClauseCount() - 1;
         int i = 0;
         boolean subQueryIsQuery = true;

         BooleanQuery query = new BooleanQuery();

         BooleanQuery subQuery = new BooleanQuery();
         for (String string : visibleItems) {
             subQuery.add(new TermQuery(new Term(KEY_UUID, string)), 
BooleanClause.Occur.SHOULD);
             if (i % maxTerms == 0) {
                 subQueryIsQuery = false;
                 query.add(new BooleanClause(subQuery, 
BooleanClause.Occur.SHOULD));
                 subQuery = new BooleanQuery();
             }
             i++;
         }

         if (subQueryIsQuery) {
             return subQuery;
         }
         return query;
     }

     private Filter createFilter(Collection<String> visibleItems) throws 
SimExplorerTechnicalException {
         Filter filter = new CachingWrapperFilter(new 
QueryWrapperFilter(createQuery(visibleItems)));
         return filter;
     }

  Not tested yet, but looks good.
  Thanks a lot!
Gabriel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 10:21:12 2008
Return-Path: <java-user-return-32956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16298 invoked from network); 5 Mar 2008 10:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 10:21:12 -0000
Received: (qmail 31518 invoked by uid 500); 5 Mar 2008 10:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31487 invoked by uid 500); 5 Mar 2008 10:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31476 invoked by uid 99); 5 Mar 2008 10:21:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 02:21:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Mar 2008 10:20:15 +0000
Received: (qmail invoked by alias); 05 Mar 2008 10:20:35 -0000
Received: from e178097252.adsl.alicedsl.de (EHLO msrvcn04) [85.178.97.252]
  by mail.gmx.net (mp014) with SMTP; 05 Mar 2008 11:20:35 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/JPtwyrpbJJmRoRgt0o5Z1mOfG4LHusnGJ5Edi1A
	++P/JuiPUyDHVC
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <BBD1371A36A8D8458F94E4AC71DBEC0515965283AA@drutten.citerus.net> <8EF37B9E-9618-48BD-9501-FFBF18C40B2C@mikemccandless.com>
Subject: RE: NO_NORM  and TOKENIZED
Date: Wed, 5 Mar 2008 11:20:36 +0100
Message-ID: <E7C254629BC0400199F5DFF3C0ECBF0F@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach+oExMy+YwCrtPSiCxtsahBVsZMQAChs4A
In-Reply-To: <8EF37B9E-9618-48BD-9501-FFBF18C40B2C@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hm, what exactly does NO_NORM mean?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:00:35 2008
Return-Path: <java-user-return-32957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29023 invoked from network); 5 Mar 2008 11:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:00:34 -0000
Received: (qmail 80455 invoked by uid 500); 5 Mar 2008 11:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80053 invoked by uid 500); 5 Mar 2008 11:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80042 invoked by uid 99); 5 Mar 2008 11:00:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:00:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 10:59:48 +0000
Received: by py-out-1112.google.com with SMTP id z74so695177pyg.9
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 02:59:57 -0800 (PST)
Received: by 10.35.42.18 with SMTP id u18mr4027773pyj.58.1204714797182;
        Wed, 05 Mar 2008 02:59:57 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 52sm1605525hsf.4.2008.03.05.02.59.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 02:59:56 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <E7C254629BC0400199F5DFF3C0ECBF0F@msrvcn04>
References: <BBD1371A36A8D8458F94E4AC71DBEC0515965283AA@drutten.citerus.net> <8EF37B9E-9618-48BD-9501-FFBF18C40B2C@mikemccandless.com> <E7C254629BC0400199F5DFF3C0ECBF0F@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8F6750C9-462A-4A21-9B5C-5C285D940B4A@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: NO_NORM  and TOKENIZED
Date: Wed, 5 Mar 2008 06:00:04 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


NO_NORMS means "do index the field as a single token (ie, do not  
tokenize the field), and, do not store norms for it".

Mike

On Mar 5, 2008, at 5:20 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

> Hm, what exactly does NO_NORM mean?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:08:00 2008
Return-Path: <java-user-return-32958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31487 invoked from network); 5 Mar 2008 11:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:08:00 -0000
Received: (qmail 94147 invoked by uid 500); 5 Mar 2008 11:07:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94123 invoked by uid 500); 5 Mar 2008 11:07:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94111 invoked by uid 99); 5 Mar 2008 11:07:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:07:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.67.121.29] (HELO mta01.zimbra.com) (77.67.121.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:07:14 +0000
Received: from dogfood.zimbra.com (dogfood.zimbra.com [10.10.140.44])
	by mta01.zimbra.com (Postfix) with ESMTP id E0856DE96D1
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 03:07:24 -0800 (PST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id CDA494BA87
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 03:07:24 -0800 (PST)
X-Virus-Scanned: amavisd-new at dogfood.zimbra.com
Received: from dogfood.zimbra.com ([127.0.0.1])
	by localhost (dogfood.zimbra.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5okfw8Ins8Jz for <java-user@lucene.apache.org>;
	Wed,  5 Mar 2008 03:07:23 -0800 (PST)
Received: from dogfood.zimbra.com (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id D2FA74BA85
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 03:07:23 -0800 (PST)
Date: Wed, 5 Mar 2008 03:07:23 -0800 (PST)
From: Tim Brennan <tim@zimbra.com>
To: java-user@lucene.apache.org
Message-ID: <1957874985.14731204715243705.JavaMail.root@dogfood.zimbra.com>
In-Reply-To: <439BFC31-E448-4704-9C4C-C94569C53B31@mikemccandless.com>
Subject: Re: More IndexDeletionPolicy questions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

No, I have multiple readers in the same VM.  I track open readers within my VM and save those reader's commit points until the readers are gone.

--tim



----- "Michael McCandless" <lucene@mikemccandless.com> wrote:

> OK got it.  Yes, sharing an index over NFS requires your own  
> DeletionPolicy.
> 
> So presumably you have readers on different machines accessing the  
> index over NFS, and then one machine that does the writing to that  
> index?  How so you plan to get which commit point each of these  
> readers is currently using back to the single writer?
> 
> Mike
> 
> Tim Brennan wrote:
> 
> > The bigger picture here is NFS-safety.  When I run a search, I hand 
> 
> > off the search results to another thread so that they can be  
> > processed as necessary -- in particular so that they can be JOINed 
> 
> > with a SQL DB -- but I don't want to completely lock the index from 
> 
> > writes while doing a bunch of SQL calls.  Using the commit point  
> > tracking I can make sure my appropriate snapshot stays around until 
> 
> > I'm completely done with it, even if I'm using an NFS mounted  
> > filesystem that doesn't have delete-last semantics.
> >
> > --tim
> >
> >
> >
> >
> >>> It seems like it should be pretty simple -- keep a list of open
> >>> IndexReaders, track what Segment files they're pointing to, and
> in
> >>
> >>> onCommit don't delete those segments.
> >>
> >> This implies you have multiple readers in a single JVM?  If so,
> you
> >> should not need to make a custom deletion policy to handle this
> case
> >>
> >> -- the OS should be properly protecting open files from deletion.  
> 
> >> Can you  shed more light on the bigger picture here?
> >>
> >>> Unfortunately it ends up being very difficult to directly
> determine
> >>> what Segment an IndexReader is pointing to.  Is there some
> >>> straightforward way that I'm missing -- all I've managed to do so
> >>> far is to remember the most recent one from onCommit/onInit and
> use
> >>
> >>> that one....that works OK, but makes bootstrapping a pain if you
> >>> try to open a Reader before you've opened the writer once.
> >>>
> >>> Also, when I use IndexReader.reopen(), can I assume that the
> newly
> >>
> >>> returned reader is pointing at the "most recent" segment?  I
> think
> >>
> >>> so...
> >>
> >> Yes, except you have a synchronization challenge: if the writer is
> in
> >>
> >> the process of committing just as your reader opens you can't be
> >> certain whether the reader got the new commit or the previous one.
> >> If you have external synchronization to ensure reader only
> re-opens
> >> after writer has fully committed then this isn't an issue.
> >>
> >>>
> >>> Here's a sequence of steps that happen in my app:
> >>>
> >>> 0) open writer, onInit tells me that seg_1 is the most recent
> >> segment
> >>>
> >>> 1) Open reader, assume it is pointing to seg_1 from (0)
> >>>
> >>> 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
> >>>
> >>> 3) Call reader.reopen() on the reader from (1)....new reader is
> >>> pointing to seg_2 now?
> >>>
> >>> 4) seg_1 stays around until the next time I open or commit a
> >>> writer, then it is removed.
> >>>
> >>>
> >>> Does that seem reasonable?
> >>>
> >>>
> >>> --tim
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscri
> >>
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:10:27 2008
Return-Path: <java-user-return-32959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33417 invoked from network); 5 Mar 2008 11:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:10:27 -0000
Received: (qmail 98464 invoked by uid 500); 5 Mar 2008 11:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98428 invoked by uid 500); 5 Mar 2008 11:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98417 invoked by uid 99); 5 Mar 2008 11:10:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:10:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:09:37 +0000
Received: by ti-out-0910.google.com with SMTP id 28so1907397tif.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 03:09:46 -0800 (PST)
Received: by 10.150.229.16 with SMTP id b16mr1079817ybh.115.1204715382572;
        Wed, 05 Mar 2008 03:09:42 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 20sm1173478agb.37.2008.03.05.03.09.41
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 03:09:42 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47CE6D5E.8060702@deri.org>
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com> <47CE6D5E.8060702@deri.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
Date: Wed, 5 Mar 2008 06:09:50 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Well, first off, sometimes the thing being indexed isn't a string, so  
you have no stringValue to get its length.  It could be a Reader or a  
TokenStream.

Second off, it's conceivable that an analyzer computes its own  
"interesting" offsets that are not in fact simple indices into the  
stringValue, though I would expect that to be the exception not the  
rule.

I can't think of any other harm ... so if neither of these apply in  
your situation then it should be OK?

I do agree this seems like a bug.  EG, if you use Highlighter on a  
multi-valued field indexed with stored field & term vectors and say  
the first field ended with a stop word that was filtered out, then  
your offsets will be off and the wrong parts will be highlighted in  
all but the first field (I think?).  I think we really need some way  
for the tokenStream to "declare" its final offset at the end.

Mike

Renaud Delbru wrote:

> Do you know if there will be side-effects if we replace in  
> DocumentWriter$FieldData#invertField
> offset = offsetEnd+1;
> by
> offset = stringValue.length();
>
> I still not understand the reason of such choice for the  
> incrementation of the start offset.
>
> Regards.
>
> Michael McCandless wrote:
>>
>> This is how Lucene has worked for quite some time (since 1.9).
>>
>> When there are multiple fields with the same name in one Document,  
>> each field's offset starts from the last offset (offset of the  
>> last token) seen in the previous field.  If tokens are skipped at  
>> the end there's no way IndexWriter can know (because tokenStream  
>> doesn't return them).  It's as if we need the ability to query a  
>> tokenStream for its "final" offset or something.
>>
>> One workaround might be to insert an "end marker" token, with the  
>> true end offset, which is a term you would never search on?
>>
>> Mike
>>
>> Renaud Delbru wrote:
>>
>>> Hi,
>>>
>>> I currently use multiple fieldable instances for indexing  
>>> sentences of a document.
>>> When there is only one single fieldable instance, the token  
>>> offset generation performed in DocumentWriter is correct.
>>> The problem appears when there is two or more fieldable  
>>> instances. In DocumentWriter$FieldData#invertField method, if the  
>>> field is tokenized, instead of updating offset attribute with  
>>> stringValue.length() (which is performed if the field is not  
>>> tokenized, line 1458), you update the offset attribute with the  
>>> end offset of the last token (line 1503: offset = offsetEnd+1;).
>>> As a consequence, if a token has been filtered (for example a  
>>> stopword, a dot, a space, etc.), the offset attribute is updated  
>>> with the end offset of the last token not filtered. In this case,  
>>> you store inside the offset attribute an incorrect offset (the  
>>> offset is shift back) and all the next fieldable instances will  
>>> have their offset shifted back.
>>>
>>> Is it a bug ? Or is it a desired behavior (in this case, why ?) ?
> -- 
> Renaud Delbru,
> E.C.S., Ph.D. Student,
> Semantic Information Systems and
> Language Engineering Group (SmILE),
> Digital Enterprise Research Institute,
> National University of Ireland, Galway.
> http://smile.deri.ie/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:14:11 2008
Return-Path: <java-user-return-32960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44501 invoked from network); 5 Mar 2008 11:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:14:11 -0000
Received: (qmail 7412 invoked by uid 500); 5 Mar 2008 11:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7386 invoked by uid 500); 5 Mar 2008 11:13:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7367 invoked by uid 99); 5 Mar 2008 11:13:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:13:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:13:23 +0000
Received: by ag-out-0708.google.com with SMTP id 35so1794838aga.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 03:13:32 -0800 (PST)
Received: by 10.150.49.15 with SMTP id w15mr1097380ybw.32.1204715611293;
        Wed, 05 Mar 2008 03:13:31 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 34sm1198189agc.32.2008.03.05.03.13.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 03:13:30 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1957874985.14731204715243705.JavaMail.root@dogfood.zimbra.com>
References: <1957874985.14731204715243705.JavaMail.root@dogfood.zimbra.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A415536B-44A2-496F-8B51-C0568396284E@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: More IndexDeletionPolicy questions
Date: Wed, 5 Mar 2008 06:13:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Oh then I don't think you need a custom deletion policy.

A single NFS client emulates delete-on-last-close semantics.  Ie, if  
the deletion of the file, and the held-open file handles, happen  
through a single NFS client, then it emulates delete-on-last-close  
semantics for you, by creating those .nfsXXX files on the server.

Test to be sure though!

Mike

Tim Brennan wrote:

> No, I have multiple readers in the same VM.  I track open readers  
> within my VM and save those reader's commit points until the  
> readers are gone.
>
> --tim
>
>
>
> ----- "Michael McCandless" <lucene@mikemccandless.com> wrote:
>
>> OK got it.  Yes, sharing an index over NFS requires your own
>> DeletionPolicy.
>>
>> So presumably you have readers on different machines accessing the
>> index over NFS, and then one machine that does the writing to that
>> index?  How so you plan to get which commit point each of these
>> readers is currently using back to the single writer?
>>
>> Mike
>>
>> Tim Brennan wrote:
>>
>>> The bigger picture here is NFS-safety.  When I run a search, I hand
>>
>>> off the search results to another thread so that they can be
>>> processed as necessary -- in particular so that they can be JOINed
>>
>>> with a SQL DB -- but I don't want to completely lock the index from
>>
>>> writes while doing a bunch of SQL calls.  Using the commit point
>>> tracking I can make sure my appropriate snapshot stays around until
>>
>>> I'm completely done with it, even if I'm using an NFS mounted
>>> filesystem that doesn't have delete-last semantics.
>>>
>>> --tim
>>>
>>>
>>>
>>>
>>>>> It seems like it should be pretty simple -- keep a list of open
>>>>> IndexReaders, track what Segment files they're pointing to, and
>> in
>>>>
>>>>> onCommit don't delete those segments.
>>>>
>>>> This implies you have multiple readers in a single JVM?  If so,
>> you
>>>> should not need to make a custom deletion policy to handle this
>> case
>>>>
>>>> -- the OS should be properly protecting open files from deletion.  
>>
>>>> Can you  shed more light on the bigger picture here?
>>>>
>>>>> Unfortunately it ends up being very difficult to directly
>> determine
>>>>> what Segment an IndexReader is pointing to.  Is there some
>>>>> straightforward way that I'm missing -- all I've managed to do so
>>>>> far is to remember the most recent one from onCommit/onInit and
>> use
>>>>
>>>>> that one....that works OK, but makes bootstrapping a pain if you
>>>>> try to open a Reader before you've opened the writer once.
>>>>>
>>>>> Also, when I use IndexReader.reopen(), can I assume that the
>> newly
>>>>
>>>>> returned reader is pointing at the "most recent" segment?  I
>> think
>>>>
>>>>> so...
>>>>
>>>> Yes, except you have a synchronization challenge: if the writer is
>> in
>>>>
>>>> the process of committing just as your reader opens you can't be
>>>> certain whether the reader got the new commit or the previous one.
>>>> If you have external synchronization to ensure reader only
>> re-opens
>>>> after writer has fully committed then this isn't an issue.
>>>>
>>>>>
>>>>> Here's a sequence of steps that happen in my app:
>>>>>
>>>>> 0) open writer, onInit tells me that seg_1 is the most recent
>>>> segment
>>>>>
>>>>> 1) Open reader, assume it is pointing to seg_1 from (0)
>>>>>
>>>>> 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
>>>>>
>>>>> 3) Call reader.reopen() on the reader from (1)....new reader is
>>>>> pointing to seg_2 now?
>>>>>
>>>>> 4) seg_1 stays around until the next time I open or commit a
>>>>> writer, then it is removed.
>>>>>
>>>>>
>>>>> Does that seem reasonable?
>>>>>
>>>>>
>>>>> --tim
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscri
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:28:18 2008
Return-Path: <java-user-return-32961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46939 invoked from network); 5 Mar 2008 11:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:28:18 -0000
Received: (qmail 21062 invoked by uid 500); 5 Mar 2008 11:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21024 invoked by uid 500); 5 Mar 2008 11:28:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21013 invoked by uid 99); 5 Mar 2008 11:28:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:28:06 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:27:30 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1164842qba.9
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 03:27:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=pfqcTsRimW3L0pw3nnQ6sBZtBU0q0MYj+O/oK1126QY=;
        b=TwedNpsW299xUXqg3N6wc/NI61Cw3XrnEfp5F/13BnzZ4Ppf7qm5qQfgH4TQC1boszkShRKeNTKmYZAhHgVQEwWpc/mo6oaNeRTHNNkG2242B4pI/N4BoZ2yDOjh3BTgjwbm+rjFxy5e4Yq4zOtjWV094yUv032T9HfCvawC58c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UL92E2xa0ZIuwS31+GkRCw0q+qltB7x3Th7VfUszuUtWFMhbKcocl4PGIvDtMxfR8+rDcYSA0gyreF33v4SrdjfCaLp2t4HbgCQVWoYKpBFjGIYHFLcirnAHOvvrtv+NulgJAZR1pJnM2P6AUHl+E4MxjiDHa54tVUC0x7yJrJs=
Received: by 10.140.251.1 with SMTP id y1mr1139481rvh.102.1204716459465;
        Wed, 05 Mar 2008 03:27:39 -0800 (PST)
Received: by 10.140.178.17 with HTTP; Wed, 5 Mar 2008 03:27:39 -0800 (PST)
Message-ID: <69de18140803050327o7e3c7ea3l154809e1e4b0bda3@mail.gmail.com>
Date: Wed, 5 Mar 2008 16:57:39 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why indexing database is necessary? (RE: indexing database)
In-Reply-To: <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C19E@hqmsg01.mcdonaldbradley.local>
	 <214FF1B5E37DC84D9968F0F82FBB1125031B7E32@AUGEXCH.ghsinc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have built a data import tool which can read from Databases and add
them to Solr. We found that making content available for full text
search and faceted search was a common use case and usually everyone
ends up writing a custom ETL based tool for this task. Therefore we're
contributing this back to the Solr project.

Please look at https://issues.apache.org/jira/browse/SOLR-469 for
details. A user guide is provided at
http://wiki.apache.org/solr/DataImportHandler

I realize that having such a tool for lucene would also be helpful for
a large audience. However, currently we're more focused on Solr since
we don't use lucene directly in our own production environments.

On Wed, Mar 5, 2008 at 12:22 AM, Darren Hartford <dhartford@ghsinc.com> wrote:
> Indexing with lucene/nutch on top of/instead of DB indexing for:
>
>  1) relativity scoring
>  2) alias searching (i.e. a large amount of aliases, like first names)
>  3) highlighting
>  4) cross-datasource searching (multi DB, DB + XML files, etc).
>
>  As for best approach to externally index, I do not have any direct
>  pointers.  I would recommend looking at an ETL tool that can be extended
>  for this purpose (I've started writing a plugin for Pentaho, but got
>  pulled off and haven't finished it -- and that was for Solr, not
>  lucene/nutch).
>
>  -D
>
>
>
>  > -----Original Message-----
>  > From: Duan, Nick [mailto:NDuan@mcdonaldbradley.com]
>  > Sent: Tuesday, March 04, 2008 1:33 PM
>  > To: java-user@lucene.apache.org
>  > Subject: Why indexing database is necessary? (RE: indexing database)
>  >
>  > Could anyone provide any insight on why someone would use nutch/lucene
>  > or any other search engines to index relational databases? With use
>  > cases if possible?  Shouldn't the database's own indexing mechanism be
>  > used since it is more efficient?
>  >
>  > If there is such a need of indexing the database content using search
>  > engines, what would be the best approach other than de-normalizing the
>  > database?
>  >
>  > Thanks a lot in advance!
>  >
>  > ND
>  > -----Original Message-----
>  > From: payo [mailto:payo22@yahoo.com]
>  > Sent: Tuesday, March 04, 2008 12:36 PM
>  > To: nutch-user@lucene.apache.org
>  > Subject: indexing database
>  >
>  >
>  > hi to all
>  >
>  > i can index a database with nutch?
>  >
>  > i am use nutch 0.8.1
>  >
>  > thanks
>  > --
>  > View this message in context:
>  > http://www.nabble.com/indexing-database-tp15832696p15832696.html
>  > Sent from the Nutch - User mailing list archive at Nabble.com.
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 11:42:24 2008
Return-Path: <java-user-return-32962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49952 invoked from network); 5 Mar 2008 11:42:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 11:42:24 -0000
Received: (qmail 31842 invoked by uid 500); 5 Mar 2008 11:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31801 invoked by uid 500); 5 Mar 2008 11:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31787 invoked by uid 99); 5 Mar 2008 11:42:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 03:42:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:41:27 +0000
Subject: RE: C++ as token in StandardAnalyzer?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 5 Mar 2008 11:41:34 -0000
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AB53A@SBS2003.2LSHQ.local>
In-Reply-To: <OF5E0D9A15.0ACEB83D-ON85257402.006A2E28-85257402.006A5C07@us.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: C++ as token in StandardAnalyzer?
Thread-Index: Ach+LS5CHj2ABE0uRwC9LXD63YVJGwAiEOEg
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Donna - See previous post below that may help. Tom
////////////////////////////////////////////////////////
Hi,

In case this is of help to others:

Crux of problem:=20
I wanted numbers and characters such as # and + to be considered.

Solution:
implement a LowercaseWhitespaceAnalyzer and a
LowercaseWhitespaceTokenizer.

i.e.
IndexWriter writer =3D new IndexWriter(INDEX_DIR, new
LowercaseWhitespaceAnalyzer(), true);

Tom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Diagnostics:

StandardAnalyzer
----------------
Enter Querystring: (C++ AND C#)      Searching for: +c +c
Enter Querystring: (C\+\+ AND C\#)   Searching for: +c +c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" "sharepoint 2007") asp.net

SimpleAnalyser
--------------
Enter Querystring: C++ Searching for: c
Enter Querystring: C#  Searching for: c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss or sharepoint) and "asp net"

WhitespaceAnalyzer
------------------
Enter Querystring: (C++ AND C#)  Searching for: +C++ +C# Enter
Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" or "sharepoint 2007") and asp.net

KeywordAnalyzer
---------------
Enter Querystring: (C++ AND C#) Searching for: +C++ +C# Enter
Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss 2007 or sharepoint 2007) and asp.net

StopAnalyzer
------------
Enter Querystring: (C\++ AND C\#)  Searching for: +c +c Enter
Querystring: ("MOSS 2007" or "SHAREPOINT 2007") and "ASP.NET"
Searching for: (moss sharepoint) "asp net"
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
=20

-----Original Message-----
From: Donna L Gresh [mailto:gresh@us.ibm.com]=20
Sent: 04 March 2008 19:22
To: java-user@lucene.apache.org
Subject: C++ as token in StandardAnalyzer?

I saw some discussion in the archives some time ago about the fact that=20
C++ is tokenized as C in the StandardAnalyzer; this seems to still be=20
C++ the
case; I was wondering if there is a simple way for me to get the
behavior I want for C++ (that it is tokenized as C++) in particular, and
perhaps for other more ideosyncratic terms I may have in my own
application-- Thanks Donna



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 14:09:31 2008
Return-Path: <java-user-return-32963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95350 invoked from network); 5 Mar 2008 14:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 14:09:31 -0000
Received: (qmail 10708 invoked by uid 500); 5 Mar 2008 14:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10679 invoked by uid 500); 5 Mar 2008 14:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10668 invoked by uid 99); 5 Mar 2008 14:09:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 06:09:20 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.136.19] (HELO mail124.messagelabs.com) (85.158.136.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Mar 2008 14:08:32 +0000
X-VirusChecked: Checked
X-Env-Sender: Lennart.Borgman@astrazeneca.com
X-Msg-Ref: server-12.tower-124.messagelabs.com!1204726132!12826293!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [85.158.137.174]
Received: (qmail 6464 invoked from network); 5 Mar 2008 14:08:52 -0000
Received: from semsx1.az.ff.messagelabs.net (HELO SESOEMEFE01.emea.astrazeneca.net) (85.158.137.174)
  by server-12.tower-124.messagelabs.com with SMTP; 5 Mar 2008 14:08:52 -0000
Received: from SELURDEMBX01.rd.astrazeneca.net ([157.96.129.154]) by SESOEMEFE01.emea.astrazeneca.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 5 Mar 2008 15:08:52 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Using a thesaurus/onthology
Date: Wed, 5 Mar 2008 15:08:51 +0100
Message-ID: <BEF12664CA5D8B4CA6F5E9B35A256C7201028F3B@SELURDEMBX01.rd.astrazeneca.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using a thesaurus/onthology
Thread-Index: Ach+ynBw36UHnFbKS+6OZXC2E8e/Xg==
From: "Borgman, Lennart" <Lennart.Borgman@astrazeneca.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Mar 2008 14:08:52.0391 (UTC) FILETIME=[70F8DB70:01C87ECA]
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any possibility to use a thesaurus or an onthology when =
indexing/searching with Lucene?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 14:21:14 2008
Return-Path: <java-user-return-32964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1878 invoked from network); 5 Mar 2008 14:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 14:21:14 -0000
Received: (qmail 42476 invoked by uid 500); 5 Mar 2008 14:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42449 invoked by uid 500); 5 Mar 2008 14:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42438 invoked by uid 99); 5 Mar 2008 14:21:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 06:21:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 14:20:17 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id E650C4503E
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 15:20:21 +0100 (CET)
Message-ID: <47CEAC1B.5010004@garambrogne.net>
Date: Wed, 05 Mar 2008 15:20:11 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using a thesaurus/onthology
References: <BEF12664CA5D8B4CA6F5E9B35A256C7201028F3B@SELURDEMBX01.rd.astrazeneca.net>
In-Reply-To: <BEF12664CA5D8B4CA6F5E9B35A256C7201028F3B@SELURDEMBX01.rd.astrazeneca.net>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Borgman, Lennart a crit :
> Is there any possibility to use a thesaurus or an onthology when indexing/searching with Lucene?
>   
Yes. the WordNet contrib do that. And with a token filter, it's easy to 
use your own.
What do you wont to do?

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 16:03:18 2008
Return-Path: <java-user-return-32965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26431 invoked from network); 5 Mar 2008 16:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 16:03:18 -0000
Received: (qmail 88193 invoked by uid 500); 5 Mar 2008 16:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88156 invoked by uid 500); 5 Mar 2008 16:02:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88117 invoked by uid 99); 5 Mar 2008 16:02:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 08:02:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 16:02:07 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using a thesaurus/onthology
Date: Wed, 5 Mar 2008 11:03:45 -0500
Message-ID: <CE9FC3E386FC2F4ABACDBB9E389C2BA20241C327@hqmsg01.mcdonaldbradley.local>
In-Reply-To: <BEF12664CA5D8B4CA6F5E9B35A256C7201028F3B@SELURDEMBX01.rd.astrazeneca.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using a thesaurus/onthology
Thread-Index: Ach+ynBw36UHnFbKS+6OZXC2E8e/XgADk5cg
References: <BEF12664CA5D8B4CA6F5E9B35A256C7201028F3B@SELURDEMBX01.rd.astrazeneca.net>
From: "Duan, Nick" <NDuan@mcdonaldbradley.com>
To: <java-user@lucene.apache.org>
Cc: <nutch-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Nutch has a ontology plugin based on Jena.
http://wiki.apache.org/nutch/OntologyPlugin

I haven't used it.  Just by looking at the source code, it seems it just
a Owl parser.  So apparently it only works with sources defined in OWL
format, not others such as RDF.  I think you need to extend the source
code to create your own Query processor to include related terms defined
in the ontology (with thesaurus being considered as a subset of
ontology).

If anyone has experience using the plug-in, I'd really appreciate any
suggestions and comments.

ND=20
-----Original Message-----
From: Borgman, Lennart [mailto:Lennart.Borgman@astrazeneca.com]=20
Sent: Wednesday, March 05, 2008 9:09 AM
To: java-user@lucene.apache.org
Subject: Using a thesaurus/onthology

Is there any possibility to use a thesaurus or an onthology when
indexing/searching with Lucene?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 16:28:31 2008
Return-Path: <java-user-return-32966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40680 invoked from network); 5 Mar 2008 16:28:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 16:28:30 -0000
Received: (qmail 54013 invoked by uid 500); 5 Mar 2008 16:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53882 invoked by uid 500); 5 Mar 2008 16:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53871 invoked by uid 99); 5 Mar 2008 16:28:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 08:28:20 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 16:27:42 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m25GTpvn018223
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 11:29:51 -0500
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m25GRqnd209142
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 11:27:52 -0500
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m25GRpat014918
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 11:27:52 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m25GRpJo014906
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 11:27:51 -0500
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: applying patch in Eclipse to get SpanHighlighter functionality
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF34C935C8.5B0BFB62-ON85257403.0059230B-85257403.005A5FD9@us.ibm.com>
Date: Wed, 5 Mar 2008 11:27:48 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 03/05/2008
 11:27:51,
	Serialize complete at 03/05/2008 11:27:51
Content-Type: multipart/alternative; boundary="=_alternative 005A5F4785257403_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005A5F4785257403_=
Content-Type: text/plain; charset="US-ASCII"

I have downloaded the Lucene (core, 2.3.1) code and created a project 
using Eclipse (pointing to src/java) to use it. That works fine, along 
with the contrib highlighter jar file from the standard distribution.

I have also successfully added an additional Eclipse project for the 
(standard) Highlighter, pointing to ..contrib/highlighter/src/java . I can 
use this project instead of the standard highlighter jar file and that 
works fine too.

I am having trouble figuring out how to apply the patch (assuming that's 
possible) to get the SpanHighlighter functionality. When I try to apply 
the patch using team->apply patch and pointing to the patch xml file, I am 
getting errors that seem to imply that the patch is looking for things 
under contrib/highlighter.... which it can't find. 

I admit to knowing very little about patches; I am just interested in 
getting the SpanHighlighter functionality. 

Can anyone point me in the right direction? Thank you.

Donna  Gresh

--=_alternative 005A5F4785257403_=--

From java-user-return-32967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 17:12:02 2008
Return-Path: <java-user-return-32967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66122 invoked from network); 5 Mar 2008 17:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 17:12:02 -0000
Received: (qmail 42848 invoked by uid 500); 5 Mar 2008 17:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42809 invoked by uid 500); 5 Mar 2008 17:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42798 invoked by uid 99); 5 Mar 2008 17:11:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:11:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 17:11:13 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2535435wxd.20
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 09:11:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=I+ZYDR9yhcXOYVB0Brve4xU9D/acR4aCeix3YR3VLdU=;
        b=t7YvBPfNSuy3PgZRZMeB8X0MdjksXxI64vR1VS9ZTUVc8Vkph41zgdX6y1CMEHIxjeg5i+HD4t1CuPfJMCeEWFKl3gUpw6tonUMu1/5LBCoNiFjVE4XW/WZfuT4EE6u6cwKux4q5/dnNHVc0fBcgZvKPADF8/MFfXtqeZpSa6ek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=M1LY9Wm+xrEwPMc5p+2BJWKt99dzheB2glxAuawi36qFhnnv8Kv4vqpkcSE/vpIIfCcVDDMh/PvL1TW1ZqTDtquFNUL7ZsSc1lfeSSUYZaObVpLNeytcYu1eQpmn7h5A7KLYouPo9ADBfuyEPiA1+Kwkb24wgIcvfBFyjy85hd0=
Received: by 10.65.116.10 with SMTP id t10mr6834915qbm.66.1204737080350;
        Wed, 05 Mar 2008 09:11:20 -0800 (PST)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e10sm1110832qbe.12.2008.03.05.09.11.18
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 05 Mar 2008 09:11:19 -0800 (PST)
Message-ID: <47CED349.7000907@gmail.com>
Date: Wed, 05 Mar 2008 12:07:21 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: applying patch in Eclipse to get SpanHighlighter functionality
References: <OF34C935C8.5B0BFB62-ON85257403.0059230B-85257403.005A5FD9@us.ibm.com>
In-Reply-To: <OF34C935C8.5B0BFB62-ON85257403.0059230B-85257403.005A5FD9@us.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using subclipse to apply the patch? Its not very good at it. I 
use TortoiseSVN for patching, as its much smarter about these things. 
With TortoiseSVN, you just patch from the root dir and it knows you are 
referring to the contrib folder thats under the root directory (the 
directory you apply the patch to). I think subclipse also makes patches 
with absolute URLs, which is not good either, though you can still use 
them with the ignore stuff it has.

Donna L Gresh wrote:
> I have downloaded the Lucene (core, 2.3.1) code and created a project 
> using Eclipse (pointing to src/java) to use it. That works fine, along 
> with the contrib highlighter jar file from the standard distribution.
>
> I have also successfully added an additional Eclipse project for the 
> (standard) Highlighter, pointing to ..contrib/highlighter/src/java . I can 
> use this project instead of the standard highlighter jar file and that 
> works fine too.
>
> I am having trouble figuring out how to apply the patch (assuming that's 
> possible) to get the SpanHighlighter functionality. When I try to apply 
> the patch using team->apply patch and pointing to the patch xml file, I am 
> getting errors that seem to imply that the patch is looking for things 
> under contrib/highlighter.... which it can't find. 
>
> I admit to knowing very little about patches; I am just interested in 
> getting the SpanHighlighter functionality. 
>
> Can anyone point me in the right direction? Thank you.
>
> Donna  Gresh
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 17:19:33 2008
Return-Path: <java-user-return-32968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70572 invoked from network); 5 Mar 2008 17:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 17:19:33 -0000
Received: (qmail 59050 invoked by uid 500); 5 Mar 2008 17:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58789 invoked by uid 500); 5 Mar 2008 17:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58777 invoked by uid 99); 5 Mar 2008 17:19:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:19:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 17:18:47 +0000
Received: by ti-out-0910.google.com with SMTP id 28so2124513tif.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 09:18:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=sHmMTCgJrm3H1qtV2pLYS09uTMrXfFH+1dKfgY+fJdk=;
        b=u3PFHOoHkTgiWNT47yRmqYQNYZ14KYllcwTlNZWN2vP0PlKjkHPUzIpsxt08eDQ3g1XxKrBvi0exXQYEfedMCQpvMQiSs+dezAI5mK0bvuns18CmrtsT6eTG3NN327bfw77gYd2or/weCi27IKeyYpzyXko7LIaDzjp+tjigzVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tpnmowDPZoWPm3AfDXh59kMnlDniwKVyhp1+VZ3xVw7Hi5DLVzRK+GGDAV16jQCI2EHmLPHqKTp/dcjEAXd0rdjAGvKE7AZHnwtA6QmJcHeikE85qNqiULVcU6mr67XQZoAPXnHp8VbdTfibtKrogJyKygusylW4q8Ec5Fqt0do=
Received: by 10.150.157.11 with SMTP id f11mr1328432ybe.54.1204737534826;
        Wed, 05 Mar 2008 09:18:54 -0800 (PST)
Received: by 10.150.124.16 with HTTP; Wed, 5 Mar 2008 09:18:54 -0800 (PST)
Message-ID: <a4d7dcf50803050918h68defe83v66e657debb76d3f3@mail.gmail.com>
Date: Wed, 5 Mar 2008 17:18:54 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Reusing same IndexSearcher
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Another newbie here...using Lucene 2.3.1 on Linux. Hopefully anyone
could advice me on /subj/.

Both IndexSearcher Javadoc and Lucene FAQ says the IndexSearcher
should be reused as it's thread safe. That's OK.
Now if I have index changed, I need to reopen the IndexReader that is
associated with it. How do I do this as IndexSearcher has no setter
method for IndexReader?

Let's speak in Java. Say, we've got a static singletone accessor method:

...
private static Searcher instance;
...
public static Searcher getLuceneSearcher () {
   if( instance == null ) {
      IndexReader reader = IndexReader.open( "/tmp/index_folder" );
      instance = new IndexSearcher( reader );    // simple yet boring
   } else {                                    // here goes the fun part
      IndexReader r_old = instance.getIndexReader();
      IndexReader r_new = r_old.reopen();
      if( r_old != r_new ) {
         r_old.close();                  // thanks for nice Javadoc, guys!
         // what to do now? there's no instance.setIndexReader( r_new )!
      }
   }
   return instance;
}

Of course, I could create a new IndexSearcher on the else branch and
return it. However, this approach resulted the infamous "too many open
files" exception. Lifting the `ulimit -n` to hundreds of thousands of
files didn't really help as the same exception was still being thrown
(actual resource usage fluctuating around 2000 of open files). Then
from `lsof` output I noticed that the same segment file was being open
more than once, apparently from different instances of
IndexSearchers/IndexReaders and went the path shown above. Maybe I'm
just plain wrong.

Really appreciate your advice.

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 17:41:40 2008
Return-Path: <java-user-return-32969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80806 invoked from network); 5 Mar 2008 17:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 17:41:40 -0000
Received: (qmail 97098 invoked by uid 500); 5 Mar 2008 17:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97068 invoked by uid 500); 5 Mar 2008 17:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97057 invoked by uid 99); 5 Mar 2008 17:41:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 09:41:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 17:40:53 +0000
Received: by an-out-0708.google.com with SMTP id c5so318589anc.49
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 09:41:00 -0800 (PST)
Received: by 10.100.6.13 with SMTP id 13mr7286142anf.16.1204738860235;
        Wed, 05 Mar 2008 09:41:00 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id e27sm2629339elf.1.2008.03.05.09.40.59
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Mar 2008 09:40:59 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <a4d7dcf50803050918h68defe83v66e657debb76d3f3@mail.gmail.com>
References: <a4d7dcf50803050918h68defe83v66e657debb76d3f3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FF9B7EC8-27A7-464F-A9B9-08B7CE977447@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Reusing same IndexSearcher
Date: Wed, 5 Mar 2008 12:41:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually you do need to make a new IndexSearcher every time you  
reopen a new IndexReader.

However, that should not lead to leaking file descriptors.  All open  
files are held by IndexReader (not IndexSearcher), so as long as you  
are properly closing your IndexReader's you shouldn't use up file  
descriptors.

Mike

Mindaugas ?ak?auskas wrote:

> Hi,
>
> Another newbie here...using Lucene 2.3.1 on Linux. Hopefully anyone
> could advice me on /subj/.
>
> Both IndexSearcher Javadoc and Lucene FAQ says the IndexSearcher
> should be reused as it's thread safe. That's OK.
> Now if I have index changed, I need to reopen the IndexReader that is
> associated with it. How do I do this as IndexSearcher has no setter
> method for IndexReader?
>
> Let's speak in Java. Say, we've got a static singletone accessor  
> method:
>
> ...
> private static Searcher instance;
> ...
> public static Searcher getLuceneSearcher () {
>    if( instance == null ) {
>       IndexReader reader = IndexReader.open( "/tmp/index_folder" );
>       instance = new IndexSearcher( reader );    // simple yet boring
>    } else {                                    // here goes the fun  
> part
>       IndexReader r_old = instance.getIndexReader();
>       IndexReader r_new = r_old.reopen();
>       if( r_old != r_new ) {
>          r_old.close();                  // thanks for nice  
> Javadoc, guys!
>          // what to do now? there's no instance.setIndexReader 
> ( r_new )!
>       }
>    }
>    return instance;
> }
>
> Of course, I could create a new IndexSearcher on the else branch and
> return it. However, this approach resulted the infamous "too many open
> files" exception. Lifting the `ulimit -n` to hundreds of thousands of
> files didn't really help as the same exception was still being thrown
> (actual resource usage fluctuating around 2000 of open files). Then
> from `lsof` output I noticed that the same segment file was being open
> more than once, apparently from different instances of
> IndexSearchers/IndexReaders and went the path shown above. Maybe I'm
> just plain wrong.
>
> Really appreciate your advice.
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 18:15:55 2008
Return-Path: <java-user-return-32970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 283 invoked from network); 5 Mar 2008 18:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 18:15:53 -0000
Received: (qmail 67939 invoked by uid 500); 5 Mar 2008 18:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67912 invoked by uid 500); 5 Mar 2008 18:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67901 invoked by uid 99); 5 Mar 2008 18:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 10:15:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 18:15:03 +0000
Received: by ti-out-0910.google.com with SMTP id 28so2159892tif.11
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 10:15:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=dp99WkeGeCWBL0aiHVu6DQR1GdZgjyQQ/6Y31AgIxx4=;
        b=AwsXF0EhVYBGLpJzL8PviD385xbsE+LrsBmfTpOqdtUdHniQus0eDBhMQYijIXin7Rgva9lEP2E8MW8ueND3l+OIQFy/UK3pk4w3kxNMs8N8hb0xZoxk5krn+pX24ShcyPR+e5xgKUy/zgKIzp6gvvb7kQsq8BVTKNzuYoJKCoE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Xo3JfUVcdIdN1yIVbQB2T62r8AA/7PNooXGJGVgNpJeL50URbvtBIgoJV7t6XAr1XxomvjLfrTLxBz6ntmQRKQQb62YhQSPxKuhtJ/Qd8QM794GxZQ6LrtHly7aMQhm5sF5qdkI3VgqjP1xUnfB1QJsr3w3Jm26p9YrZKxph8OM=
Received: by 10.151.26.12 with SMTP id d12mr1355013ybj.74.1204740911238;
        Wed, 05 Mar 2008 10:15:11 -0800 (PST)
Received: by 10.150.124.16 with HTTP; Wed, 5 Mar 2008 10:15:11 -0800 (PST)
Message-ID: <a4d7dcf50803051015u245f123ao5a01e9e6fe4170f9@mail.gmail.com>
Date: Wed, 5 Mar 2008 18:15:11 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reusing same IndexSearcher
In-Reply-To: <FF9B7EC8-27A7-464F-A9B9-08B7CE977447@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a4d7dcf50803050918h68defe83v66e657debb76d3f3@mail.gmail.com>
	 <FF9B7EC8-27A7-464F-A9B9-08B7CE977447@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for your reply.

I can't think of any way to ensure fair file descriptor usage when
there are many active instances of IndexSearcher (all containing
IndexReader) running. Our project installations tend to run on heavily
loaded sites, where a lot of information is read and written at the
same time.

My original idea was not to operate at IndexReader level, but only
provide a single IndexSearcher (which contains IndexReader).
IndexSearcher being (thread) safe, none of the other code should be
aware of Lucene internals (think encapsulation).

Anyway, if what you saying is correct, I think the Javadoc and FAQ
must be little bit more specific on that. Also, I've looked at the
code of IndexSearcher and could not find a single reason why would
setting a new IndexReader hurt. But that's just probably me having a
hard day.

Can anyone comment if this approach is relevant and would help?
http://www.xman.org/jlinux/server.html

Regards,
Mindaugas

On Wed, Mar 5, 2008 at 5:41 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  Actually you do need to make a new IndexSearcher every time you
>  reopen a new IndexReader.
>
>  However, that should not lead to leaking file descriptors.  All open
>  files are held by IndexReader (not IndexSearcher), so as long as you
>  are properly closing your IndexReader's you shouldn't use up file
>  descriptors.
>
>  Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 18:31:32 2008
Return-Path: <java-user-return-32971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14328 invoked from network); 5 Mar 2008 18:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 18:31:32 -0000
Received: (qmail 89637 invoked by uid 500); 5 Mar 2008 18:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89615 invoked by uid 500); 5 Mar 2008 18:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89603 invoked by uid 99); 5 Mar 2008 18:31:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 10:31:15 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 18:30:27 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m25IUj7Y025181
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 13:30:45 -0500
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m25IUkCU184446
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 13:30:46 -0500
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m25IUjwE032497
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 13:30:45 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m25IUjgD032493
	for <java-user@lucene.apache.org>; Wed, 5 Mar 2008 13:30:45 -0500
In-Reply-To: <47CED349.7000907@gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: applying patch in Eclipse to get SpanHighlighter functionality
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF22EC442E.78171F47-ON85257403.00602FE6-85257403.0065A0A7@us.ibm.com>
Date: Wed, 5 Mar 2008 13:30:44 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 03/05/2008
 13:30:45,
	Serialize complete at 03/05/2008 13:30:45
Content-Type: multipart/alternative; boundary="=_alternative 0065A04E85257403_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0065A04E85257403_=
Content-Type: text/plain; charset="US-ASCII"

Thanks Mark-
I'm very much a newbie in all this patching stuff, but I don't think I'm 
using anything other than built-in Eclipse functionality using team->apply 
patch. And it's clearly not working well.

I took a look at TortoiseSVN but I think it's way overkill for me-- oh 
well; maybe I'll just wait until it makes it into a release :)

Donna Gresh



Mark Miller <markrmiller@gmail.com> wrote on 03/05/2008 12:07:21 PM:

> Are you using subclipse to apply the patch? Its not very good at it. I 
> use TortoiseSVN for patching, as its much smarter about these things. 
> With TortoiseSVN, you just patch from the root dir and it knows you are 
> referring to the contrib folder thats under the root directory (the 
> directory you apply the patch to). I think subclipse also makes patches 
> with absolute URLs, which is not good either, though you can still use 
> them with the ignore stuff it has.
> 
> Donna L Gresh wrote:
> > I have downloaded the Lucene (core, 2.3.1) code and created a project 
> > using Eclipse (pointing to src/java) to use it. That works fine, along 

> > with the contrib highlighter jar file from the standard distribution.
> >
> > I have also successfully added an additional Eclipse project for the 
> > (standard) Highlighter, pointing to ..contrib/highlighter/src/java . I 
can 
> > use this project instead of the standard highlighter jar file and that 

> > works fine too.
> >
> > I am having trouble figuring out how to apply the patch (assuming 
that's 
> > possible) to get the SpanHighlighter functionality. When I try to 
apply 
> > the patch using team->apply patch and pointing to the patch xml file, 
I am 
> > getting errors that seem to imply that the patch is looking for things 

> > under contrib/highlighter.... which it can't find. 
> >
> > I admit to knowing very little about patches; I am just interested in 
> > getting the SpanHighlighter functionality. 
> >
> > Can anyone point me in the right direction? Thank you.
> >
> > Donna  Gresh
> >
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 0065A04E85257403_=--

From java-user-return-32972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 19:21:15 2008
Return-Path: <java-user-return-32972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38042 invoked from network); 5 Mar 2008 19:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 19:21:15 -0000
Received: (qmail 77826 invoked by uid 500); 5 Mar 2008 19:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77788 invoked by uid 500); 5 Mar 2008 19:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77777 invoked by uid 99); 5 Mar 2008 19:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 11:21:03 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 19:20:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JWzAK-0000bQ-Gf
	for java-user@lucene.apache.org; Wed, 05 Mar 2008 11:20:36 -0800
Message-ID: <15855654.post@talk.nabble.com>
Date: Wed, 5 Mar 2008 11:20:36 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: storing position - keyword
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings all. I am indexing a set of documents where I am extracting terms
and mapping them to a controlled vocabulary and then placing the matched
vocabulary in a keyword field. What I want to know is if there is a way to
store the original term location with the keyword field?

Example Text: "The quick brown fox jumped over the lazy dog" -->

Controlled Vocabulary Terms: "physical activity", "exercise", "sedentary
lifestyle", "canine"

I am storing these controlled terms in a keyword field so they are stored
and searchable exactly. 

What I would like to be able to do is to highlight the context of the
original term or phrase that is associated with a mapped term. So in the
example above, if the controlled term is "sedentary lifestyle", I would like
to highlight "lazy".

A couple of notes:

There can be multiple mapped terms for an original term or phrase.

The algorithm that handles the mapping provides the start and end position
of the original text

Thanks in advance for any ideas,

j
-- 
View this message in context: http://www.nabble.com/storing-position---keyword-tp15855654p15855654.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 20:09:09 2008
Return-Path: <java-user-return-32973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65555 invoked from network); 5 Mar 2008 20:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 20:09:09 -0000
Received: (qmail 94330 invoked by uid 500); 5 Mar 2008 20:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94303 invoked by uid 500); 5 Mar 2008 20:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94291 invoked by uid 99); 5 Mar 2008 20:08:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 12:08:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 20:08:12 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Boolean Query search performance
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Wed, 5 Mar 2008 15:08:27 -0500
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boolean Query search performance
Thread-Index: Ach+3fJ0Z+MQh/bmQm67JdnkNGIMhgABJXVw
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using lucene 2.2.0.

I'm in the process of re-writing some queries to build BooleanQueries
instead of using query parser.

Bypassing query parser provides almost an order of magnitude improvement
for very large queries, but then the search performance takes 20-30%
longer. I'm adding boost values as a way to sort (long story, no
workaround I can see for now).

If I do a query.toString(), both queries give different results, which
is probably a clue (additional paren's with the BooleanQuery)

Query.toString the old way using queryParser:
    +(id:1^2.0 id:2 ... ) +type:CORE

Query.toString the new way using BooleanQuery:
    +((id:1^2.0) (id:2) ... ) +type:CORE

Does anyone have any ideas as to why the performance difference in
searching. I would think I could get the search time to be the same,
since after the query is formed everything remains the same. The same
number of hits are going through the hitCollector that gets called after
this, so all variables seem constant. QueryParser must be doing some
optimization I'm not taking advantage of. Code snippet follows.....

The previous way using queryParser was:

  String queryStr =3D (id:1^2 OR id:2 .... id:n) AND type:CORE
  Query query =3D parser.parse(queryStr);


The new way using BooleanQuery is...

  BooleanQuery totalBooleanQuery =3D new BooleanQuery();
  BooleanClause docTypeClause =3D=20
    new BooleanClause( new TermQuery(=20
    new Term("type", "CORE")), BooleanClause.Occur.MUST);

  BooleanQuery idBooleanQuery =3D new BooleanQuery();
  for (String uid : uniqueIdMap.keySet()) {
	TermQuery termQuery =3D=20
         new TermQuery(new Term("id", uid));
	termQuery.setBoost(loopBoostValue);
	idBooleanQuery.add(
         new BooleanClause(termQuery, BooleanClause.Occur.SHOULD));
  }=20

  totalBooleanQuery.add(docTypeClause);
  totalBooleanQuery.add(idBooleanQuery, Occur.MUST);=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 21:16:43 2008
Return-Path: <java-user-return-32974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98270 invoked from network); 5 Mar 2008 21:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 21:16:42 -0000
Received: (qmail 85718 invoked by uid 500); 5 Mar 2008 21:16:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85691 invoked by uid 500); 5 Mar 2008 21:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85680 invoked by uid 99); 5 Mar 2008 21:16:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 13:16:32 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 21:15:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JX0y6-00069A-4A
	for java-user@lucene.apache.org; Wed, 05 Mar 2008 13:16:06 -0800
Message-ID: <15860538.post@talk.nabble.com>
Date: Wed, 5 Mar 2008 13:16:06 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: changing scoring formula
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


is there any way to change the score of the documents.
Actually i want to modify the scores of the documents dynamically, everytime
for a given query the results will be sorted according to "lucene scoring
formula + an equation".
how can i do that...i saw that lucene scoring page but i am not getting
exactly how to do that...
please advice me
-- 
View this message in context: http://www.nabble.com/changing-scoring-formula-tp15860538p15860538.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 05 22:32:05 2008
Return-Path: <java-user-return-32975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54001 invoked from network); 5 Mar 2008 22:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Mar 2008 22:32:04 -0000
Received: (qmail 22675 invoked by uid 500); 5 Mar 2008 22:31:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22645 invoked by uid 500); 5 Mar 2008 22:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22634 invoked by uid 99); 5 Mar 2008 22:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 14:31:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [77.67.121.29] (HELO mta01.zimbra.com) (77.67.121.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 22:31:19 +0000
Received: from dogfood.zimbra.com (dogfood.zimbra.com [10.10.140.44])
	by mta01.zimbra.com (Postfix) with ESMTP id B7B04DE810C
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 14:31:29 -0800 (PST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id A5E7B106745
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 14:31:29 -0800 (PST)
X-Virus-Scanned: amavisd-new at dogfood.zimbra.com
Received: from dogfood.zimbra.com ([127.0.0.1])
	by localhost (dogfood.zimbra.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id z5VoBGkO9B8n for <java-user@lucene.apache.org>;
	Wed,  5 Mar 2008 14:31:28 -0800 (PST)
Received: from dogfood.zimbra.com (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id 8B82B106743
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 14:31:28 -0800 (PST)
Date: Wed, 5 Mar 2008 14:31:28 -0800 (PST)
From: Tim Brennan <tim@zimbra.com>
To: java-user@lucene.apache.org
Message-ID: <2136718192.8181204756288127.JavaMail.root@dogfood.zimbra.com>
In-Reply-To: <A415536B-44A2-496F-8B51-C0568396284E@mikemccandless.com>
Subject: Re: More IndexDeletionPolicy questions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ha, you know it never occurred to me that the driver might do this for me...I'll test it out.  Thanks,

--tim


----- "Michael McCandless" <lucene@mikemccandless.com> wrote:

> Oh then I don't think you need a custom deletion policy.
> 
> A single NFS client emulates delete-on-last-close semantics.  Ie, if 
> 
> the deletion of the file, and the held-open file handles, happen  
> through a single NFS client, then it emulates delete-on-last-close  
> semantics for you, by creating those .nfsXXX files on the server.
> 
> Test to be sure though!
> 
> Mike
> 
> Tim Brennan wrote:
> 
> > No, I have multiple readers in the same VM.  I track open readers  
> > within my VM and save those reader's commit points until the  
> > readers are gone.
> >
> > --tim
> >
> >
> >
> > ----- "Michael McCandless" <lucene@mikemccandless.com> wrote:
> >
> >> OK got it.  Yes, sharing an index over NFS requires your own
> >> DeletionPolicy.
> >>
> >> So presumably you have readers on different machines accessing the
> >> index over NFS, and then one machine that does the writing to that
> >> index?  How so you plan to get which commit point each of these
> >> readers is currently using back to the single writer?
> >>
> >> Mike
> >>
> >> Tim Brennan wrote:
> >>
> >>> The bigger picture here is NFS-safety.  When I run a search, I
> hand
> >>
> >>> off the search results to another thread so that they can be
> >>> processed as necessary -- in particular so that they can be
> JOINed
> >>
> >>> with a SQL DB -- but I don't want to completely lock the index
> from
> >>
> >>> writes while doing a bunch of SQL calls.  Using the commit point
> >>> tracking I can make sure my appropriate snapshot stays around
> until
> >>
> >>> I'm completely done with it, even if I'm using an NFS mounted
> >>> filesystem that doesn't have delete-last semantics.
> >>>
> >>> --tim
> >>>
> >>>
> >>>
> >>>
> >>>>> It seems like it should be pretty simple -- keep a list of open
> >>>>> IndexReaders, track what Segment files they're pointing to, and
> >> in
> >>>>
> >>>>> onCommit don't delete those segments.
> >>>>
> >>>> This implies you have multiple readers in a single JVM?  If so,
> >> you
> >>>> should not need to make a custom deletion policy to handle this
> >> case
> >>>>
> >>>> -- the OS should be properly protecting open files from deletion.
>  
> >>
> >>>> Can you  shed more light on the bigger picture here?
> >>>>
> >>>>> Unfortunately it ends up being very difficult to directly
> >> determine
> >>>>> what Segment an IndexReader is pointing to.  Is there some
> >>>>> straightforward way that I'm missing -- all I've managed to do
> so
> >>>>> far is to remember the most recent one from onCommit/onInit and
> >> use
> >>>>
> >>>>> that one....that works OK, but makes bootstrapping a pain if
> you
> >>>>> try to open a Reader before you've opened the writer once.
> >>>>>
> >>>>> Also, when I use IndexReader.reopen(), can I assume that the
> >> newly
> >>>>
> >>>>> returned reader is pointing at the "most recent" segment?  I
> >> think
> >>>>
> >>>>> so...
> >>>>
> >>>> Yes, except you have a synchronization challenge: if the writer
> is
> >> in
> >>>>
> >>>> the process of committing just as your reader opens you can't be
> >>>> certain whether the reader got the new commit or the previous
> one.
> >>>> If you have external synchronization to ensure reader only
> >> re-opens
> >>>> after writer has fully committed then this isn't an issue.
> >>>>
> >>>>>
> >>>>> Here's a sequence of steps that happen in my app:
> >>>>>
> >>>>> 0) open writer, onInit tells me that seg_1 is the most recent
> >>>> segment
> >>>>>
> >>>>> 1) Open reader, assume it is pointing to seg_1 from (0)
> >>>>>
> >>>>> 2) New write commits into seg_2, don't delete seg_1 b/c of (1)
> >>>>>
> >>>>> 3) Call reader.reopen() on the reader from (1)....new reader is
> >>>>> pointing to seg_2 now?
> >>>>>
> >>>>> 4) seg_1 stays around until the next time I open or commit a
> >>>>> writer, then it is removed.
> >>>>>
> >>>>>
> >>>>> Does that seem reasonable?
> >>>>>
> >>>>>
> >>>>> --tim
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>
> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscri
> >>>>
> >>>>
> >>>>
> >>
> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 00:38:41 2008
Return-Path: <java-user-return-32976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9569 invoked from network); 6 Mar 2008 00:38:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 00:38:41 -0000
Received: (qmail 75726 invoked by uid 500); 6 Mar 2008 00:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75696 invoked by uid 500); 6 Mar 2008 00:38:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75680 invoked by uid 99); 6 Mar 2008 00:38:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 16:38:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 00:37:51 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1180989hub.15
        for <java-user@lucene.apache.org>; Wed, 05 Mar 2008 16:37:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IVmfN90UeELzdvOZx/zjmAepVeZQCvv7KvbX622+ASA=;
        b=nhPDE79lwY3JSZT4c+GiMhDQ83gyogb0UEmSq0NXJ/9r39AIvrRKxnFDViRW5Til3J/Hy3P6AxKBm/9q+mv4SV27xlzE8bDz1Qc6Esd7ujgTDIQqUCzkYNKojlFHOrUduzPuSlmomGm9nholXtcwjBVrcIgayei8Bx4rNBScIgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=u8pHHbpQHQiWyXFNdNRAY6z3Sy8OCXqKXGJQyqBEgGGdmwSSD7IAi7xot64v8Qfs0hiatzpXjdMbeM/YjH242s9qBGVjE/tJqp7hiYlzEUL8eBO+ZEe2ZqXa/6pB9185HcdTG2J7XpunGBRf/akOXU2jiHpBBA3JScRrFqzevYg=
Received: by 10.82.146.10 with SMTP id t10mr10140963bud.6.1204763879505;
        Wed, 05 Mar 2008 16:37:59 -0800 (PST)
Received: by 10.82.111.6 with HTTP; Wed, 5 Mar 2008 16:37:59 -0800 (PST)
Message-ID: <652776090803051637o4db0ddc6xe5def59c9e4eaa26@mail.gmail.com>
Date: Wed, 5 Mar 2008 16:37:59 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: changing scoring formula
In-Reply-To: <15860538.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27282_30415921.1204763879499"
References: <15860538.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27282_30415921.1204763879499
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sumit,

The class you'll end up subclassing from would be:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.htmlor
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/DefaultSimilarity.html

On an IndexSearcher you can setSimilarity() class that you want to use for
scoring, see:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/IndexSearcher.html
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Searcher.html#setSimilarity(org.apache.lucene.search.Similarity)

Does that help?

-M

On Wed, Mar 5, 2008 at 1:16 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> is there any way to change the score of the documents.
> Actually i want to modify the scores of the documents dynamically,
> everytime
> for a given query the results will be sorted according to "lucene scoring
> formula + an equation".
> how can i do that...i saw that lucene scoring page but i am not getting
> exactly how to do that...
> please advice me
> --
> View this message in context:
> http://www.nabble.com/changing-scoring-formula-tp15860538p15860538.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27282_30415921.1204763879499--

From java-user-return-32977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 00:53:38 2008
Return-Path: <java-user-return-32977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12168 invoked from network); 6 Mar 2008 00:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 00:53:37 -0000
Received: (qmail 91053 invoked by uid 500); 6 Mar 2008 00:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91018 invoked by uid 500); 6 Mar 2008 00:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91006 invoked by uid 99); 6 Mar 2008 00:53:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 16:53:28 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.34 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 00:52:38 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id m260qxoa044724
	for <java-user@lucene.apache.org>; Thu, 6 Mar 2008 01:52:59 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-ID: <47CF406B.5010004@gmail.com>
Date: Thu, 06 Mar 2008 01:52:59 +0100
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: storing position - keyword
References: <15855654.post@talk.nabble.com>
In-Reply-To: <15855654.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

1world1love skrev:
> Greetings all. I am indexing a set of documents where I am extracting terms
> and mapping them to a controlled vocabulary and then placing the matched
> vocabulary in a keyword field.

One could also say you are classifying your data based on keywords in
the text?

> What I want to know is if there is a way to store the original term location
> with the keyword field?

You can always store values in a field, but the term and the stored
value is not coupled. Thus you would need to store the positions per
document in each field in machine readable format you then parse:

doc.addField("f", "keyword:12,32;54,32", Field.Store.YES, ..

But that is a way expensive solution.

> Example Text: "The quick brown fox jumped over the lazy dog" -->
> 
> Controlled Vocabulary Terms: "physical activity", "exercise", "sedentary
> lifestyle", "canine"
> 
> I am storing these controlled terms in a keyword field so they are stored
> and searchable exactly. 

This is known as faceted classification.

<http://en.wikipedia.org/wiki/Faceted_classification>
<http://www.nabble.com/forum/Search.jtp?query=facets&local=y&forum=44>

> What I would like to be able to do is to highlight the context of the
> original term or phrase that is associated with a mapped term. So in the
> example above, if the controlled term is "sedentary lifestyle", I would like
> to highlight "lazy".
>
> There can be multiple mapped terms for an original term or phrase.
>
> The algorithm that handles the mapping provides the start and end
> position of the original text


Are you aware of the hightlighter contrib module?

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/

The simplest solution is to a new facet Term per classification in text
and use the text start and end positions of the text field, and have the
hightligher to load the text and highlight this text field.

Matching a document with the same terms occuring multiple times will
cause a greater score than it only occuring once. This is probably
problematic for you.

Instead you could add a single Term, ignore the built in positions and
store them for all positions in the payload of that single Term.


for (String facet : facets) {
   doc.addField(
       "f", new SingleTokenTokenStream(
           facet, new Payload(offsets.toByteArray())
       )
   );
}

(This is dry coded, you will need to implement some of them things.)

You also need to modify the highligher so it can read this data.



    karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 01:02:06 2008
Return-Path: <java-user-return-32978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13850 invoked from network); 6 Mar 2008 01:02:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 01:02:06 -0000
Received: (qmail 99698 invoked by uid 500); 6 Mar 2008 01:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99670 invoked by uid 500); 6 Mar 2008 01:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99659 invoked by uid 99); 6 Mar 2008 01:01:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 17:01:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.27 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 01:01:08 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2611Ts7017126
	for <java-user@lucene.apache.org>; Thu, 6 Mar 2008 02:01:29 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-ID: <47CF4269.50109@gmail.com>
Date: Thu, 06 Mar 2008 02:01:29 +0100
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boolean Query search performance
References: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Beard, Brian skrev:
> I'm using lucene 2.2.0.
> 
> I'm in the process of re-writing some queries to build BooleanQueries
> instead of using query parser.
> 
> Bypassing query parser provides almost an order of magnitude improvement
> for very large queries, but then the search performance takes 20-30%
> longer.

Have you benchmarked the time spent creating the query and the time 
spent searching using the query seperatly? QueryParser can be sort of 
expensive. It also seems to me that you are creating a very large query 
given you add one criteria per entity id.

     karl



> I'm adding boost values as a way to sort (long story, no
> workaround I can see for now).
> 
> If I do a query.toString(), both queries give different results, which
> is probably a clue (additional paren's with the BooleanQuery)
> 
> Query.toString the old way using queryParser:
>     +(id:1^2.0 id:2 ... ) +type:CORE
> 
> Query.toString the new way using BooleanQuery:
>     +((id:1^2.0) (id:2) ... ) +type:CORE
> 
> Does anyone have any ideas as to why the performance difference in
> searching. I would think I could get the search time to be the same,
> since after the query is formed everything remains the same. The same
> number of hits are going through the hitCollector that gets called after
> this, so all variables seem constant. QueryParser must be doing some
> optimization I'm not taking advantage of. Code snippet follows.....
> 
> The previous way using queryParser was:
> 
>   String queryStr = (id:1^2 OR id:2 .... id:n) AND type:CORE
>   Query query = parser.parse(queryStr);
> 
> 
> The new way using BooleanQuery is...
> 
>   BooleanQuery totalBooleanQuery = new BooleanQuery();
>   BooleanClause docTypeClause = 
>     new BooleanClause( new TermQuery( 
>     new Term("type", "CORE")), BooleanClause.Occur.MUST);
> 
>   BooleanQuery idBooleanQuery = new BooleanQuery();
>   for (String uid : uniqueIdMap.keySet()) {
> 	TermQuery termQuery = 
>          new TermQuery(new Term("id", uid));
> 	termQuery.setBoost(loopBoostValue);
> 	idBooleanQuery.add(
>          new BooleanClause(termQuery, BooleanClause.Occur.SHOULD));
>   } 
> 
>   totalBooleanQuery.add(docTypeClause);
>   totalBooleanQuery.add(idBooleanQuery, Occur.MUST); 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 02:30:00 2008
Return-Path: <java-user-return-32979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52668 invoked from network); 6 Mar 2008 02:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 02:30:00 -0000
Received: (qmail 79161 invoked by uid 500); 6 Mar 2008 02:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79135 invoked by uid 500); 6 Mar 2008 02:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79124 invoked by uid 99); 6 Mar 2008 02:29:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 18:29:49 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 02:28:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JX5rE-0000c8-2e
	for java-user@lucene.apache.org; Wed, 05 Mar 2008 18:29:20 -0800
Message-ID: <15865186.post@talk.nabble.com>
Date: Wed, 5 Mar 2008 18:29:20 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: storing position - keyword
In-Reply-To: <47CF406B.5010004@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <15855654.post@talk.nabble.com> <47CF406B.5010004@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


First off Karl, thanks for your reply and your time.



karl wettin-3 wrote:
> 
> One could also say you are classifying your data based on keywords in
> the text?
> 

I probably didn't explain myself very well or more specifically provide a
good example. In my case, there really isn't any relationship between the
mapped terms per document. That is to say that an individual term or phrase
in the document is mapped to a concrete concept in a controlled vocabulary.
The concept doesn't represent a class of anything and no relationship exists
between the concepts. They would never be grouped by any means. It is more a
matter of replacing some arbitrary word or phrase with an adjudicated
version.

The example I gave did in fact use classifications for the terms, but that
is not exactly the point that I was trying to convey. I suppose a better
example would be where each term or phrase in the sentence mapped to any
equivilent in another language:

dog -> canis
dog -> cane
dog -> chien

So that if you searched for "canis", then any document with "dog" would be
returned (unless the context inferred that dog meant something else). By the
same token, if the text was "here we go" or "let's go", then it may map to
"vamos" or "vamonos".

To confuse matters more, it is not really a matter of synonyms, as the
orginal term is discarded from the index and there is only one mapped term
per original term or phrase and the algorithm determines the controlled
meaning from the context.


karl wettin-3 wrote:
> 
> 
> You can always store values in a field, but the term and the stored
> value is not coupled. Thus you would need to store the positions per
> document in each field in machine readable format you then parse:
> 
> doc.addField("f", "keyword:12,32;54,32", Field.Store.YES, ..
> 
> But that is a way expensive solution.
> 

Indeed, though doesn't a analyzed field have some other information attached
to it?

Forgive me if this is a naive question. I am fairly new to Lucene.


karl wettin-3 wrote:
>  
> 
> This is known as faceted classification.
> 
> <http://en.wikipedia.org/wiki/Faceted_classification>
> <http://www.nabble.com/forum/Search.jtp?query=facets&local=y&forum=44>
> 

Again, I am not overly familiar with these disciplines, but I always thought
of facets as a organizational strategy. As I said, my example betrayed me a
bit, as I am not that interested in organizing these documents, rather
providing a controlled vocabulary from which to search as opposed to any
random text.



karl wettin-3 wrote:
> 
> Are you aware of the hightlighter contrib module?
> 
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/
> 
> The simplest solution is to a new facet Term per classification in text
> and use the text start and end positions of the text field, and have the
> hightligher to load the text and highlight this text field.
> 

This is actually not a web based application and the highlighting would
really only be used for analyzing performance of the mapping algorithms. The
main issue is that we do need to be able to provide the location of the
original term for each mapped keyword.



karl wettin-3 wrote:
> 
> Matching a document with the same terms occuring multiple times will
> cause a greater score than it only occuring once. This is probably
> problematic for you.
> 

It may not be that big of an issue.


karl wettin-3 wrote:
> 
> Instead you could add a single Term, ignore the built in positions and
> store them for all positions in the payload of that single Term.
> 
> 
> for (String facet : facets) {
>    doc.addField(
>        "f", new SingleTokenTokenStream(
>            facet, new Payload(offsets.toByteArray())
>        )
>    );
> }
> 
> (This is dry coded, you will need to implement some of them things.)
> 
> You also need to modify the highligher so it can read this data.
> 
> 

Something like this seems like it might work well for my purposes. I will
look at this further.

Thanks again,

J


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
View this message in context: http://www.nabble.com/storing-position---keyword-tp15855654p15865186.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 04:47:26 2008
Return-Path: <java-user-return-32980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6232 invoked from network); 6 Mar 2008 04:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 04:47:26 -0000
Received: (qmail 54032 invoked by uid 500); 6 Mar 2008 04:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54001 invoked by uid 500); 6 Mar 2008 04:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53990 invoked by uid 99); 6 Mar 2008 04:47:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Mar 2008 20:47:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 04:46:40 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8403371C262; Wed,  5 Mar 2008 20:46:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7B3E971C210
	for <java-user@lucene.apache.org>; Wed,  5 Mar 2008 20:46:50 -0800 (PST)
Date: Wed, 5 Mar 2008 20:46:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query search performance
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
Message-ID: <Pine.LNX.4.62.0803052039210.20795@radix.cryptio.net>
References: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If I do a query.toString(), both queries give different results, which
: is probably a clue (additional paren's with the BooleanQuery)
: 
: Query.toString the old way using queryParser:
:     +(id:1^2.0 id:2 ... ) +type:CORE
: 
: Query.toString the new way using BooleanQuery:
:     +((id:1^2.0) (id:2) ... ) +type:CORE

i didn't look too closely at the psuedo code you posted, but the 
additional parens normally indicates that you are actually creating an 
extra layer of BooleanQueries (ie: a BooleanQuery with only one clause for 
each term) ... but the rewrite method should optimize those away (even 
back in lucene 2.2) ... if you look at query.rewrite(reader).toString() 
then the queries *really* should be the same, if they aren't, then that 
may be your culprit.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 08:58:30 2008
Return-Path: <java-user-return-32981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45012 invoked from network); 6 Mar 2008 08:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 08:58:30 -0000
Received: (qmail 36208 invoked by uid 500); 6 Mar 2008 08:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36177 invoked by uid 500); 6 Mar 2008 08:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36166 invoked by uid 99); 6 Mar 2008 08:58:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 00:58:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 08:57:42 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1625841rvb.5
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 00:57:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:mime-version:content-type;
        bh=6MFdNPHdBUTtT3Ajz/dOep8h3xAcOqXbB440sQtaMRc=;
        b=imqGZrRh+k8vNimQYxOxFVzecRf75S+utjf2HEnZ8mA0FHpAGAQEzfoUglvrGf65P+czyhCyzI51rjHViBwiNsJm4dFmWGWjy1T5JVO2+surovGHqfZ6bmzs9UABQ84DFdbycFV+kkgbwjdBuSMbRMzN6RU77ZL5zghU0JyqRo0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:mime-version:content-type;
        b=AcWariJ08uohPm8jVQA9cGc7sGDVnpB+NGQeRgoVIUiPZEx6WHLs9bp/1equwn0GGQdQO+PD+Cnzvwnq5ZQ14sQNyhzx4up7oInOXx4VAYf7Xahp1gJduU0eAzQnVOJfYK8RxH1Zi+6sKmpvs6hno2f/wA9rA7gUqxYPZAI0Qwc=
Received: by 10.141.189.4 with SMTP id r4mr1876171rvp.98.1204793871795;
        Thu, 06 Mar 2008 00:57:51 -0800 (PST)
Received: by 10.141.97.7 with HTTP; Thu, 6 Mar 2008 00:57:51 -0800 (PST)
Message-ID: <f09790220803060057r3d52c7f6paa4640b71c2d2e4c@mail.gmail.com>
Date: Thu, 6 Mar 2008 16:57:51 +0800
From: "Eric Th" <blueye117@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: What about the index writing efficiency of large index ?
Cc: yonik@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26847_31463128.1204793871853"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26847_31463128.1204793871853
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,
Does anyone do a benchmark to verify the index writing efficiency of lucene?
When the index size is larger than 10G, will it be much slower than smaller
ones ?

Actually i did some works about this issue,
and i found that, if build small index firstly then merge them all, the time
taken will significantly decline.

Hi Yonik,
How does Solr deal with this issue, does it just leave this problem to
lucene?


Thanks,

Eric

------=_Part_26847_31463128.1204793871853--

From java-user-return-32982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 09:28:13 2008
Return-Path: <java-user-return-32982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56896 invoked from network); 6 Mar 2008 09:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 09:28:13 -0000
Received: (qmail 78855 invoked by uid 500); 6 Mar 2008 09:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78826 invoked by uid 500); 6 Mar 2008 09:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78814 invoked by uid 99); 6 Mar 2008 09:28:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 01:28:02 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:27:23 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.116])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1JXCK2-0003Up-MG
	for java-user@lucene.apache.org; Thu, 06 Mar 2008 09:23:37 +0000
Message-ID: <47CFB8F5.4080702@propylon.com>
Date: Thu, 06 Mar 2008 09:27:17 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <15855654.post@talk.nabble.com> <47CF406B.5010004@gmail.com> <15865186.post@talk.nabble.com>
In-Reply-To: <15865186.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: storing position - keyword
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

"To confuse matters more, it is not really a matter of synonyms, as the 
orginal term is discarded from the index and there is only one mapped term"

I'm not sure I fully understand this: am I right in thinking that you 
will be searching using these controlled volcabulary words, and that the 
search must then find any of the ordinary words which map to the 
controled vocaburlary words, and highlight them?

Because if that's the case, I think it's relatively simple: You create a 
separate index, which only maps the controlled vocubulary to the 
ordinary words. That's your "synonyms" index. Then, you index your 
target document as normal. When you search, you first look up your 
search term against the synonyms index. So, following your exmaple, if 
you looked up "dog" in the synoyms index, youd get back "chien", "canis" 
and "cane". (Achieving this part is easy: you just keep adding 
"synonyms" to the field at the same position.) Whether or not the 
returned list also contains the orignal "dog" is up to you when you 
create your synonyms index. (In a typical synonyms ring, the original 
word would have to be in there, because you don't know which word will 
be used to search)

Now all you have to do is combine those returned terms as Boolean OR 
clauses in a single BooleanQuery, and search on the main index. You'll 
find all documents containing any of those 3 words, and you can use the 
highlighting code form the Lucene contrib projects to highlight

Does this help? Forgive me if I've misunderstood or undersetimated the 
problem!

Regards,
-John

per original term or phrase and the algorithm determines the controlled
meaning from the context.

1world1love wrote:
> First off Karl, thanks for your reply and your time.
>
>
>
> karl wettin-3 wrote:
>   
>> One could also say you are classifying your data based on keywords in
>> the text?
>>
>>     
>
> I probably didn't explain myself very well or more specifically provide a
> good example. In my case, there really isn't any relationship between the
> mapped terms per document. That is to say that an individual term or phrase
> in the document is mapped to a concrete concept in a controlled vocabulary.
> The concept doesn't represent a class of anything and no relationship exists
> between the concepts. They would never be grouped by any means. It is more a
> matter of replacing some arbitrary word or phrase with an adjudicated
> version.
>
> The example I gave did in fact use classifications for the terms, but that
> is not exactly the point that I was trying to convey. I suppose a better
> example would be where each term or phrase in the sentence mapped to any
> equivilent in another language:
>
> dog -> canis
> dog -> cane
> dog -> chien
>
> So that if you searched for "canis", then any document with "dog" would be
> returned (unless the context inferred that dog meant something else). By the
> same token, if the text was "here we go" or "let's go", then it may map to
> "vamos" or "vamonos".
>
> To confuse matters more, it is not really a matter of synonyms, as the
> orginal term is discarded from the index and there is only one mapped term
> per original term or phrase and the algorithm determines the controlled
> meaning from the context.
>
>
> karl wettin-3 wrote:
>   
>> You can always store values in a field, but the term and the stored
>> value is not coupled. Thus you would need to store the positions per
>> document in each field in machine readable format you then parse:
>>
>> doc.addField("f", "keyword:12,32;54,32", Field.Store.YES, ..
>>
>> But that is a way expensive solution.
>>
>>     
>
> Indeed, though doesn't a analyzed field have some other information attached
> to it?
>
> Forgive me if this is a naive question. I am fairly new to Lucene.
>
>
> karl wettin-3 wrote:
>   
>>  
>>
>> This is known as faceted classification.
>>
>> <http://en.wikipedia.org/wiki/Faceted_classification>
>> <http://www.nabble.com/forum/Search.jtp?query=facets&local=y&forum=44>
>>
>>     
>
> Again, I am not overly familiar with these disciplines, but I always thought
> of facets as a organizational strategy. As I said, my example betrayed me a
> bit, as I am not that interested in organizing these documents, rather
> providing a controlled vocabulary from which to search as opposed to any
> random text.
>
>
>
> karl wettin-3 wrote:
>   
>> Are you aware of the hightlighter contrib module?
>>
>> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/
>>
>> The simplest solution is to a new facet Term per classification in text
>> and use the text start and end positions of the text field, and have the
>> hightligher to load the text and highlight this text field.
>>
>>     
>
> This is actually not a web based application and the highlighting would
> really only be used for analyzing performance of the mapping algorithms. The
> main issue is that we do need to be able to provide the location of the
> original term for each mapped keyword.
>
>
>
> karl wettin-3 wrote:
>   
>> Matching a document with the same terms occuring multiple times will
>> cause a greater score than it only occuring once. This is probably
>> problematic for you.
>>
>>     
>
> It may not be that big of an issue.
>
>
> karl wettin-3 wrote:
>   
>> Instead you could add a single Term, ignore the built in positions and
>> store them for all positions in the payload of that single Term.
>>
>>
>> for (String facet : facets) {
>>    doc.addField(
>>        "f", new SingleTokenTokenStream(
>>            facet, new Payload(offsets.toByteArray())
>>        )
>>    );
>> }
>>
>> (This is dry coded, you will need to implement some of them things.)
>>
>> You also need to modify the highligher so it can read this data.
>>
>>
>>     
>
> Something like this seems like it might work well for my purposes. I will
> look at this further.
>
> Thanks again,
>
> J
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 09:35:29 2008
Return-Path: <java-user-return-32983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60777 invoked from network); 6 Mar 2008 09:35:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 09:35:29 -0000
Received: (qmail 90080 invoked by uid 500); 6 Mar 2008 09:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90049 invoked by uid 500); 6 Mar 2008 09:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90038 invoked by uid 99); 6 Mar 2008 09:35:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 01:35:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:34:43 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1741177qba.9
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 01:34:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kgjBb3rHn65QJQ8yFxAa2gBWVRtFAq6A5Z5jWUNrPXM=;
        b=kOlql5LmrycAxOz+zdXNms2aAip58Qtd6Dq9cB8BJvRsdXH71uOiY/Rh2glaqbCZQfVSiSGQuRr0OhxyiPjRcQwaeXXuoQAAoNE667xhtLfO90uzIPaCHzexB71keHmCtiEbEt72TWOZ+mLQ19/oOdjwm1EFHVeCBbu6AKvG2R8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GiuJGQfE6GcmbHEUI5idK6s4l9z1kjYsUjr9k1VGgqQ3baW7xOP9NWOPDsOqLcNjrosJ9T9obc7lUG65gjmupkawJST2Gseoku3WNDhf7f6uSdpKPonqz7rTkTn2oxUJKlvUGKbnIAuXVTUrexO0TjwuwaJ0hIKYdhZrAmPjt64=
Received: by 10.141.197.8 with SMTP id z8mr1853858rvp.285.1204796092664;
        Thu, 06 Mar 2008 01:34:52 -0800 (PST)
Received: by 10.141.97.7 with HTTP; Thu, 6 Mar 2008 01:34:52 -0800 (PST)
Message-ID: <f09790220803060134g3d937999u83feceb28401fae8@mail.gmail.com>
Date: Thu, 6 Mar 2008 17:34:52 +0800
From: "Eric Th" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query search performance
In-Reply-To: <Pine.LNX.4.62.0803052039210.20795@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26943_15482291.1204796092664"
References: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
	 <Pine.LNX.4.62.0803052039210.20795@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26943_15482291.1204796092664
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

2008/3/6, Chris Hostetter <hossman_lucene@fucit.org>:
>
>
> : If I do a query.toString(), both queries give different results, which
>
> : is probably a clue (additional paren's with the BooleanQuery)
> :
> : Query.toString the old way using queryParser:
> :     +(id:1^2.0 id:2 ... ) +type:CORE
> :
> : Query.toString the new way using BooleanQuery:
> :     +((id:1^2.0) (id:2) ... ) +type:CORE
>
>
> i didn't look too closely at the psuedo code you posted, but the
> additional parens normally indicates that you are actually creating an
> extra layer of BooleanQueries (ie: a BooleanQuery with only one clause for
> each term) ... but the rewrite method should optimize those away (even
> back in lucene 2.2) ... if you look at query.rewrite(reader).toString()
> then the queries *really* should be the same, if they aren't, then that
> may be your culprit.


look here,
parens will also be add is each term has a boost value larger than 1.0.

public String toString(String field) {
    StringBuffer buffer = new StringBuffer();
    boolean needParens=(getBoost() != 1.0) ||
(getMinimumNumberShouldMatch()>0) ;
    if (needParens) {
      buffer.append("(");
    }

    for (int i = 0 ; i < clauses.size(); i++) {
      BooleanClause c = (BooleanClause)clauses.get(i);
      if (c.isProhibited())
        buffer.append("-");
      else if (c.isRequired())
        buffer.append("+");

      Query subQuery = c.getQuery();
      if (subQuery instanceof BooleanQuery) {      // wrap sub-bools in
parens
        buffer.append("(");
        buffer.append(c.getQuery().toString(field));
        buffer.append(")");
      } else
        buffer.append(c.getQuery().toString(field));

      if (i != clauses.size()-1)
        buffer.append(" ");
    }

    if (needParens) {
      buffer.append(")");
    }

    if (getMinimumNumberShouldMatch()>0) {
      buffer.append('~');
      buffer.append(getMinimumNumberShouldMatch());
    }

    if (getBoost() != 1.0f)
    {
      buffer.append(ToStringUtils.boost(getBoost()));
    }

    return buffer.toString();
  }




-Hoss




---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26943_15482291.1204796092664--

From java-user-return-32984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 10:31:07 2008
Return-Path: <java-user-return-32984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79781 invoked from network); 6 Mar 2008 10:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 10:31:07 -0000
Received: (qmail 51156 invoked by uid 500); 6 Mar 2008 10:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51117 invoked by uid 500); 6 Mar 2008 10:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51106 invoked by uid 99); 6 Mar 2008 10:30:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 02:30:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sridhar.raman@gmail.com designates 216.239.58.190 as permitted sender)
Received: from [216.239.58.190] (HELO gv-out-0910.google.com) (216.239.58.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 10:30:22 +0000
Received: by gv-out-0910.google.com with SMTP id r4so1900745gve.23
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 02:30:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=sfywZhDbtAhao0Ri3UncWd36fmxNux2+ZSmY1Fiv3N4=;
        b=DTXCLC+p5tQMhkgS4IBrEimy16fZeN4IDvgWEEBqm3njC2inIgVjBlQ1hrck7h5p2ubf5AHBhAwOtqwLqmc1tH6WE8tu0YwGy5GcU4yXbf9PoOtS32FfhF2NxC5qZKYwMpGJchraAOuUwgc1VIhsjLIiYGcL3f4KR6JwckRshKM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OiNT4hecIWHfd1eMOZLHlvCX3ydPtCKk03y63QT0gCJFneHMIaqdztaHdNfV87JizZjthQIHt7Xl+uxCHwamFaF8pupoGfnf1wA9++17Ag4zw5yydpR62yGaqSXa1pxV5Kl9Ea6ggZtAxv7tkts/tNPkM7ol1NRgiQiFAhms/vA=
Received: by 10.143.5.21 with SMTP id h21mr1131912wfi.80.1204799429449;
        Thu, 06 Mar 2008 02:30:29 -0800 (PST)
Received: by 10.143.48.1 with HTTP; Thu, 6 Mar 2008 02:30:29 -0800 (PST)
Message-ID: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
Date: Thu, 6 Mar 2008 16:00:29 +0530
From: "Sridhar Raman" <sridhar.raman@gmail.com>
To: java-user@lucene.apache.org
Subject: Swapping between indexes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12188_22483762.1204799429439"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12188_22483762.1204799429439
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is my situation.  I have an index, which has a lot of search requests
coming into it.  I use just a single instance of IndexSearcher to process
these requests.  At the same time, this index is also getting updated by an
IndexWriter.  And I want these new changes to be reflected _only_ at certain
intervals.  I have thought of a few ways of doing this.  Each has its share
of problems and pluses.  I would be glad if someone can help me in figuring
out the right approach, especially from the performance point of view, as
the number of documents that will get indexed are pretty large.

Approach 1:
Have just one copy of the index for both Search & Index.  At time T, when I
need to see the new changes reflected, I close the Searcher, and open it
again.
- The re-open of the Searcher might be a bit slow (which I could probably
solve by using some warm-up threads).
- Update and Search on the index at the same - will this affect the
performance?
- If server crashes before time T, the new Searcher would reflect the
changes, which is not acceptable.  I want the changes to be reflected only
at time T.  If server crashes, the index should be the previous T-1 index.
- Possible problems while optimising the index (as Search is also
happening).
+ Just one copy of the index being stored.

Approach 2:
Keep 2 copies of the index - 1 for Search, 1 for Index.  At time T, I just
switch the Searcher to a copy of index that is being updated.
- Before I do the switch to the new index, I need to make a copy of it so
that the updates continue to happen on the other index.  Is there a
convenient way to make this copy?  Is it efficient?
- Time taken to create a new Searcher will still be a problem (but this is a
problem in the previous approach as well, and we can live with it).
+ Optimise can happen on an index that is not being read, as a result, its
resource requirements would be lesser.  And probably even the speed of
optimisation.
+ Faster search as the index update is happening on a different index.

So, these are the 2 approaches I am contemplating about.  Any pointers which
would be the better approach?

Thanks,
Sridhar

------=_Part_12188_22483762.1204799429439--

From java-user-return-32985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 10:42:02 2008
Return-Path: <java-user-return-32985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82863 invoked from network); 6 Mar 2008 10:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 10:42:02 -0000
Received: (qmail 70230 invoked by uid 500); 6 Mar 2008 10:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70202 invoked by uid 500); 6 Mar 2008 10:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70191 invoked by uid 99); 6 Mar 2008 10:41:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 02:41:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 10:41:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JXDXQ-00008R-UX
	for java-user@lucene.apache.org; Thu, 06 Mar 2008 02:41:24 -0800
Message-ID: <15870647.post@talk.nabble.com>
Date: Thu, 6 Mar 2008 02:41:24 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: combine wildcard and phrase query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


hey everybody,

I'm wondering if it's possible to combine wildcards and phrase query. 

For example "term1 term*"

I know that the documentation says "Lucene supports single and multiple
character wildcard searches within single terms (not within phrase queries)"
but maybe someone has had the same problem and found a solution.

Thanks for your help

Jens Burkhardt
-- 
View this message in context: http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15870647.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 11:29:07 2008
Return-Path: <java-user-return-32986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99000 invoked from network); 6 Mar 2008 11:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 11:29:07 -0000
Received: (qmail 18251 invoked by uid 500); 6 Mar 2008 11:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18209 invoked by uid 500); 6 Mar 2008 11:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18197 invoked by uid 99); 6 Mar 2008 11:28:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 03:28:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.248] (HELO hs-out-0708.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 11:28:20 +0000
Received: by hs-out-0708.google.com with SMTP id 4so8048148hsl.5
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 03:28:22 -0800 (PST)
Received: by 10.100.111.5 with SMTP id j5mr9992726anc.83.1204802902389;
        Thu, 06 Mar 2008 03:28:22 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm4179545hsp.2.2008.03.06.03.28.15
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 06 Mar 2008 03:28:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Swapping between indexes
Date: Thu, 6 Mar 2008 06:28:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


A simple variant on Approach 1 would be to open your writer with  
autoCommit=false.

This way no reader will ever see the changes until you successfully  
close the writer.  If the machine crashes the index is still in the  
starting state as of when the writer was first opened.

Also, re-open of Approach 1 should be a bit (not a lot, though there  
is work to make it a lot) faster than wholly new open required in  
approach 2.

There should not be problems optimizing while searching.  Yes, you  
use more disk space, but no more (in fact, less) than approach 2  
requires.

I think approach 2 is only possibly better if the indexing would be  
done on a different computer / IO system.

Mike

Sridhar Raman wrote:

> This is my situation.  I have an index, which has a lot of search  
> requests
> coming into it.  I use just a single instance of IndexSearcher to  
> process
> these requests.  At the same time, this index is also getting  
> updated by an
> IndexWriter.  And I want these new changes to be reflected _only_  
> at certain
> intervals.  I have thought of a few ways of doing this.  Each has  
> its share
> of problems and pluses.  I would be glad if someone can help me in  
> figuring
> out the right approach, especially from the performance point of  
> view, as
> the number of documents that will get indexed are pretty large.
>
> Approach 1:
> Have just one copy of the index for both Search & Index.  At time  
> T, when I
> need to see the new changes reflected, I close the Searcher, and  
> open it
> again.
> - The re-open of the Searcher might be a bit slow (which I could  
> probably
> solve by using some warm-up threads).
> - Update and Search on the index at the same - will this affect the
> performance?
> - If server crashes before time T, the new Searcher would reflect the
> changes, which is not acceptable.  I want the changes to be  
> reflected only
> at time T.  If server crashes, the index should be the previous T-1  
> index.
> - Possible problems while optimising the index (as Search is also
> happening).
> + Just one copy of the index being stored.
>
> Approach 2:
> Keep 2 copies of the index - 1 for Search, 1 for Index.  At time T,  
> I just
> switch the Searcher to a copy of index that is being updated.
> - Before I do the switch to the new index, I need to make a copy of  
> it so
> that the updates continue to happen on the other index.  Is there a
> convenient way to make this copy?  Is it efficient?
> - Time taken to create a new Searcher will still be a problem (but  
> this is a
> problem in the previous approach as well, and we can live with it).
> + Optimise can happen on an index that is not being read, as a  
> result, its
> resource requirements would be lesser.  And probably even the speed of
> optimisation.
> + Faster search as the index update is happening on a different index.
>
> So, these are the 2 approaches I am contemplating about.  Any  
> pointers which
> would be the better approach?
>
> Thanks,
> Sridhar


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 12:28:55 2008
Return-Path: <java-user-return-32987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22250 invoked from network); 6 Mar 2008 12:28:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 12:28:55 -0000
Received: (qmail 88834 invoked by uid 500); 6 Mar 2008 12:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88421 invoked by uid 500); 6 Mar 2008 12:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88410 invoked by uid 99); 6 Mar 2008 12:28:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 04:28:45 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 12:27:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JXFCs-0004K3-4c
	for java-user@lucene.apache.org; Thu, 06 Mar 2008 04:28:18 -0800
Message-ID: <15872169.post@talk.nabble.com>
Date: Thu, 6 Mar 2008 04:28:18 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <15870647.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15870647.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


okay, another problem occured. I have different fields with the same name. I
can't seperate them like naming them field1 field2 etc. cause while indexing
i don't know how many fields i will need.
Like a book has several signature numbers i want to save them in a field
signature and when i search for such a number i want the search hit every
single field and not all fields together.
Right now i separate the string using an unique separator (in this case just
$$$) so i can split the string into the numbers but i think this is kinda
the worst form doing it.




JensBurkhardt wrote:
> 
> hey everybody,
> 
> I'm wondering if it's possible to combine wildcards and phrase query. 
> 
> For example "term1 term*"
> 
> I know that the documentation says "Lucene supports single and multiple
> character wildcard searches within single terms (not within phrase
> queries)" but maybe someone has had the same problem and found a solution.
> 
> Thanks for your help
> 
> Jens Burkhardt
> 

-- 
View this message in context: http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15872169.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 13:02:46 2008
Return-Path: <java-user-return-32988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32882 invoked from network); 6 Mar 2008 13:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 13:02:46 -0000
Received: (qmail 43390 invoked by uid 500); 6 Mar 2008 13:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43356 invoked by uid 500); 6 Mar 2008 13:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43345 invoked by uid 99); 6 Mar 2008 13:02:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 05:02:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sridhar.raman@gmail.com designates 72.14.204.225 as permitted sender)
Received: from [72.14.204.225] (HELO qb-out-0506.google.com) (72.14.204.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 13:02:00 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1804683qba.9
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 05:02:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=99sW4oExRLyBez5ls6Lh3aONNmcJssbSQ5yi9ZUAM3E=;
        b=cFesW0+hWDzMqJpvljfKVWgHLxvPP6zfpNdPM2ZCB+3Lex0LsIzKKIDuhGDJhf5x0pL4ElPl1pTkVdtjGGxJ/b/fv2jUidLwvHHTVWKj2eIkR6Cf4ad7eQBCydiKexpvqqNVJM/4BIXjBal7CKH8cXr4skdSaBSNqYcrqOflDQE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CS02s9KEM6plqmaZd+ejinz4mLt2jSl6kC3DgUkVYiLLNDnXaRVSTY7pF37wVBqbuLFHaf76337CnWH7+F4ifxTtBJrJ/h2K/3Ta4UN80LQOT7lRLu58HmLB1IRJzSJ1Z7JZiOY1xTnFQTHtcsKPXC0bCtwVBBSdbxDcKr4s7tQ=
Received: by 10.142.172.12 with SMTP id u12mr1162127wfe.16.1204808529650;
        Thu, 06 Mar 2008 05:02:09 -0800 (PST)
Received: by 10.143.48.1 with HTTP; Thu, 6 Mar 2008 05:02:09 -0800 (PST)
Message-ID: <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
Date: Thu, 6 Mar 2008 18:32:09 +0530
From: "Sridhar Raman" <sridhar.raman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Swapping between indexes
In-Reply-To: <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13040_2040823.1204808529622"
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
	 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13040_2040823.1204808529622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> This way no reader will ever see the changes until you successfully
> close the writer.  If the machine crashes the index is still in the
> starting state as of when the writer was first opened.
Ok, I have a slight doubt in this.  Say I have gone ahead with Approach 1
If I have opened the writer with autoCommit=false, and the system crashes,
does it mean that the changes made to IdxSrch are lost?  If that is the
case, that might be a problem.  What I actually want is something like
this.  When the system crashes in between, the search continues to happen on
the index at T0.  But the updates that were done since T0 also needs to be
preserved.  Would that happen if I set autoCommit to false?

I realise that I want the cake and eat it too.  But that's the problem we
face if we keep just a single copy of the index.

On Thu, Mar 6, 2008 at 4:58 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> A simple variant on Approach 1 would be to open your writer with
> autoCommit=false.
>
> This way no reader will ever see the changes until you successfully
> close the writer.  If the machine crashes the index is still in the
> starting state as of when the writer was first opened.
>
> Also, re-open of Approach 1 should be a bit (not a lot, though there
> is work to make it a lot) faster than wholly new open required in
> approach 2.
>
> There should not be problems optimizing while searching.  Yes, you
> use more disk space, but no more (in fact, less) than approach 2
> requires.
>
> I think approach 2 is only possibly better if the indexing would be
> done on a different computer / IO system.
>
> Mike
>
> Sridhar Raman wrote:
>
> > This is my situation.  I have an index, which has a lot of search
> > requests
> > coming into it.  I use just a single instance of IndexSearcher to
> > process
> > these requests.  At the same time, this index is also getting
> > updated by an
> > IndexWriter.  And I want these new changes to be reflected _only_
> > at certain
> > intervals.  I have thought of a few ways of doing this.  Each has
> > its share
> > of problems and pluses.  I would be glad if someone can help me in
> > figuring
> > out the right approach, especially from the performance point of
> > view, as
> > the number of documents that will get indexed are pretty large.
> >
> > Approach 1:
> > Have just one copy of the index for both Search & Index.  At time
> > T, when I
> > need to see the new changes reflected, I close the Searcher, and
> > open it
> > again.
> > - The re-open of the Searcher might be a bit slow (which I could
> > probably
> > solve by using some warm-up threads).
> > - Update and Search on the index at the same - will this affect the
> > performance?
> > - If server crashes before time T, the new Searcher would reflect the
> > changes, which is not acceptable.  I want the changes to be
> > reflected only
> > at time T.  If server crashes, the index should be the previous T-1
> > index.
> > - Possible problems while optimising the index (as Search is also
> > happening).
> > + Just one copy of the index being stored.
> >
> > Approach 2:
> > Keep 2 copies of the index - 1 for Search, 1 for Index.  At time T,
> > I just
> > switch the Searcher to a copy of index that is being updated.
> > - Before I do the switch to the new index, I need to make a copy of
> > it so
> > that the updates continue to happen on the other index.  Is there a
> > convenient way to make this copy?  Is it efficient?
> > - Time taken to create a new Searcher will still be a problem (but
> > this is a
> > problem in the previous approach as well, and we can live with it).
> > + Optimise can happen on an index that is not being read, as a
> > result, its
> > resource requirements would be lesser.  And probably even the speed of
> > optimisation.
> > + Faster search as the index update is happening on a different index.
> >
> > So, these are the 2 approaches I am contemplating about.  Any
> > pointers which
> > would be the better approach?
> >
> > Thanks,
> > Sridhar
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13040_2040823.1204808529622--

From java-user-return-32989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 13:18:31 2008
Return-Path: <java-user-return-32989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40021 invoked from network); 6 Mar 2008 13:18:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 13:18:30 -0000
Received: (qmail 66548 invoked by uid 500); 6 Mar 2008 13:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66518 invoked by uid 500); 6 Mar 2008 13:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66507 invoked by uid 99); 6 Mar 2008 13:18:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 05:18:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.240] (HELO hs-out-0708.google.com) (64.233.178.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 13:17:44 +0000
Received: by hs-out-0708.google.com with SMTP id 4so8293132hsl.5
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 05:17:52 -0800 (PST)
Received: by 10.101.70.5 with SMTP id x5mr5431090ank.65.1204809472542;
        Thu, 06 Mar 2008 05:17:52 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 30sm4318996hso.8.2008.03.06.05.17.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 06 Mar 2008 05:17:45 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com> <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com> <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <091B6DB0-1E37-4855-972C-B459846EC989@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Swapping between indexes
Date: Thu, 6 Mar 2008 08:17:09 -0500
To: java-user@lucene.apache.org,
 Sridhar Raman <sridhar.raman@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Sridhar Raman wrote:

>> This way no reader will ever see the changes until you successfully
>> close the writer.  If the machine crashes the index is still in the
>> starting state as of when the writer was first opened.
> Ok, I have a slight doubt in this.  Say I have gone ahead with  
> Approach 1
> If I have opened the writer with autoCommit=false, and the system  
> crashes,
> does it mean that the changes made to IdxSrch are lost?  If that is  
> the
> case, that might be a problem.  What I actually want is something like
> this.  When the system crashes in between, the search continues to  
> happen on
> the index at T0.  But the updates that were done since T0 also  
> needs to be
> preserved.  Would that happen if I set autoCommit to false?
>
> I realise that I want the cake and eat it too.  But that's the  
> problem we
> face if we keep just a single copy of the index.

Alas, you are right: all changes not committed are lost.  Ie on  
coming back
up after the crash, you would have to re-index everything again.

Lucene is actually not that far from doing what you're asking for  
here.  I think
the only thing missing is the ability to open a reader on a prior  
commit, rather
than the latest one.  If we added that then you could make a custom  
deletion
policy that'd keep your T0 commit, as well as commits being done by your
writer, and only remove them when you decide to switch your readers  
to the
current commit.

But, realize that even with such a change to Lucene, you would still  
lose
everything since the last commit, when the machine crashes.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 13:35:30 2008
Return-Path: <java-user-return-32990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45025 invoked from network); 6 Mar 2008 13:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 13:35:30 -0000
Received: (qmail 1107 invoked by uid 500); 6 Mar 2008 13:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1067 invoked by uid 500); 6 Mar 2008 13:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1056 invoked by uid 99); 6 Mar 2008 13:35:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 05:35:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 72.14.246.244 as permitted sender)
Received: from [72.14.246.244] (HELO ag-out-0708.google.com) (72.14.246.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 13:34:34 +0000
Received: by ag-out-0708.google.com with SMTP id 35so2963867aga.11
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 05:34:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=j+pxKLBHSK77i8ft+sfw5ch29cECS/arqDZL/n+7R8o=;
        b=TxwbsZHKTYhKgrc0zdq5Dm/vOKO4di+LRrjg3Mjf9tUMCeiznEP2t0UaGNFW48xaRsi1zThgsp3Hr5CyL/CjtiwVU+ycEN1B8zuPKbdmXV8kNFjAHgJEOw6ZtjEQueBJ4tU5MtJvHv4a1aTbbqGDtJctw0POtJrWbSgbULdemN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=tiIVMBwdkokDYZVrgN3IJIUv3LI6+k/cdTyQRZ6BfKxYGeDiXKe042errVycf3lvEQOZYl8wszsNpLFTPE9I/YlBvP7t037yv9HxYR9x7ySy722rgQ232kb9Dbg6AESQfH/tvh29FuhsoaXsswebB947anfnmfEFUIknB9I2cTA=
Received: by 10.142.172.12 with SMTP id u12mr1154416wfe.95.1204810493992;
        Thu, 06 Mar 2008 05:34:53 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Thu, 6 Mar 2008 05:34:53 -0800 (PST)
Message-ID: <c68e39170803060534n61d1e218t40f213d8a675b0ee@mail.gmail.com>
Date: Thu, 6 Mar 2008 08:34:53 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: What about the index writing efficiency of large index ?
Cc: yonik@lucene.apache.org
In-Reply-To: <f09790220803060057r3d52c7f6paa4640b71c2d2e4c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f09790220803060057r3d52c7f6paa4640b71c2d2e4c@mail.gmail.com>
X-Google-Sender-Auth: eaefccbaff2f98a3
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Mar 6, 2008 at 3:57 AM, Eric Th <blueye117@gmail.com> wrote:
> Hi All,
>  Does anyone do a benchmark to verify the index writing efficiency of lucene?
>  When the index size is larger than 10G, will it be much slower than smaller
>  ones ?
>
>  Actually i did some works about this issue,
>  and i found that, if build small index firstly then merge them all, the time
>  taken will significantly decline.

You can increase the merge factor to get fewer merges,
or you can set maxMergeDocs or setMaxMergeMB to prevent merging of any
segments above a certain size and them call optimize at the end.

>  Hi Yonik,
>  How does Solr deal with this issue, does it just leave this problem to
>  lucene?

Solr leaves it to Lucene.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 13:39:23 2008
Return-Path: <java-user-return-32991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45746 invoked from network); 6 Mar 2008 13:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 13:39:21 -0000
Received: (qmail 10180 invoked by uid 500); 6 Mar 2008 13:39:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10157 invoked by uid 500); 6 Mar 2008 13:39:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10146 invoked by uid 99); 6 Mar 2008 13:39:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 05:39:11 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.226 as permitted sender)
Received: from [72.14.214.226] (HELO hu-out-0506.google.com) (72.14.214.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 13:38:34 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1336922hub.15
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 05:38:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vXholhTWUZbdZUJ2qRdXi14XdFbrXCWEgtMej6HrCCc=;
        b=L1phG7nrnVYD70Dr4oho0ODPuj0gQSzLvwE3qbZiuClBNKVnIi6YHkS3Y1VX3maUgdmsFleYqF50hDN4HtThh14Yl1MUp6Ey0Fq6huaqv98FDZ1rtalqbCMlxDYZWM6XAPXm9aBoKw9/89bOcJ23EwDzdcxw13HL1BOqvzWhNeI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I7Z1gL/87GagGKOEKr0HZcqii9B7F9dEyDBfcIxL+Sqnn+TqGzxe+bIxW5XHb2sicQMCcyMy1bU3n5pApqABqI65A68a3wN9yqJufBI8sT8Msd9oQAlPXi8Q6IT5KuAjCHuVxVoG+YH8DLGLdGSWWlcLFDtBNOq2X8uj2F+4Too=
Received: by 10.82.161.19 with SMTP id j19mr1159745bue.9.1204810723396;
        Thu, 06 Mar 2008 05:38:43 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 6 Mar 2008 05:38:43 -0800 (PST)
Message-ID: <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
Date: Thu, 6 Mar 2008 08:38:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <15872169.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7454_19413428.1204810723396"
References: <15870647.post@talk.nabble.com> <15872169.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7454_19413428.1204810723396
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, as far as I know you can't combine wildcards in phrases. This would
get extraordinarily ugly extraordinarily quickly. The way Lucene handles
wildcards (conceputally) is to expand all the possible terms into a large OR
clause. Say my index contains term1, term2, and term3. The search for term*
really expands into term1 OR term2 OR term3. Now imagine the
complexity of a phrase like "dog* cat* hors*". Now say your index contained
10 terms starting with dog, 10 with cat and 10 with hors. You'd have 1,000
ORed phrase queries. And this is a tiny example....

You can try various approximations, and depending upon your index size they
may or may not work. For instance, you could index all the successive
shorter
forms. with increments of 0 (see synonym analyzer)  I.e. index horse, hors$
hor$
ho$ h$ all in the same position. Then searching for hor* becomes searching
for
hor$ and it all "just works". Of course this makes your index bigger.....

About your second issue: I'm not clear what your trying to accomplish. It's
no
problem to add the same field multiple times for a document. That is, you
can
doc.add(new field("field1", ......)
doc.add(new field("field1", ......)
doc.add(new field("field1", ......)
doc.add(new field("field1", ......)
as many times as you want before you add the document to the index. For
retrieval you can call getFields ("field1") and get an array of Fields back,
one
for each call to add above. You can also set the PositionIncrementGap while
indexing to separate the termposition of the first term of successive add()
calls
by, say, 100 (or whatever) if you need to worry about SpanNear or some such.

This may be waaaay off base. If so, could you give a concrete example of
what
your inputs are and how you want to search them?

Best
Erick

On Thu, Mar 6, 2008 at 7:28 AM, JensBurkhardt <jensburkhardt@web.de> wrote:

>
> okay, another problem occured. I have different fields with the same name.
> I
> can't seperate them like naming them field1 field2 etc. cause while
> indexing
> i don't know how many fields i will need.
> Like a book has several signature numbers i want to save them in a field
> signature and when i search for such a number i want the search hit every
> single field and not all fields together.
> Right now i separate the string using an unique separator (in this case
> just
> $$$) so i can split the string into the numbers but i think this is kinda
> the worst form doing it.
>
>
>
>
> JensBurkhardt wrote:
> >
> > hey everybody,
> >
> > I'm wondering if it's possible to combine wildcards and phrase query.
> >
> > For example "term1 term*"
> >
> > I know that the documentation says "Lucene supports single and multiple
> > character wildcard searches within single terms (not within phrase
> > queries)" but maybe someone has had the same problem and found a
> solution.
> >
> > Thanks for your help
> >
> > Jens Burkhardt
> >
>
> --
> View this message in context:
> http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15872169.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7454_19413428.1204810723396--

From java-user-return-32992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 14:59:07 2008
Return-Path: <java-user-return-32992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89086 invoked from network); 6 Mar 2008 14:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 14:59:06 -0000
Received: (qmail 5583 invoked by uid 500); 6 Mar 2008 14:58:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5558 invoked by uid 500); 6 Mar 2008 14:58:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5546 invoked by uid 99); 6 Mar 2008 14:58:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 06:58:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 14:58:20 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1856516qba.9
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 06:57:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=44TCrflhOjXYZbZ7EgnJvdAYsfQSKPciZoUW4JGYLdA=;
        b=tmvLtIaudU0YWqHN0FvnKJa0z59zakGo6gfctcJB0Kk5mCuwbMQpApg1oAfrHeQnCAsg8HTCKjlWU6MgbFb4U2oobrdq0S1VScHIHrKwv5om1uI7cY6aYcYUQeEjmOykeJhUsUmppAYmncWDmJPV+JfM2b9NNfg/S+XSvE9XtFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=u/JVy5QP9nATxJyuH+hbTuvz2+EiJ+i0eSEDL/2TuMYsBLTyvaXfYbgzs/dzfmxh0HL4p9hwZaVCRl8CgOmt9BA7xATcosujND6keycDTUxevGhtHZOmqq0GiTZIZatSKJKGYyAWyQiqbPlyPbevUiCjio8ypy50rFoaNdB+YDg=
Received: by 10.143.166.18 with SMTP id t18mr1237697wfo.175.1204815432171;
        Thu, 06 Mar 2008 06:57:12 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Thu, 6 Mar 2008 06:57:11 -0800 (PST)
Message-ID: <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
Date: Thu, 6 Mar 2008 09:57:11 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Swapping between indexes
In-Reply-To: <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
	 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
	 <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
X-Google-Sender-Auth: 006acc25bc67e26c
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Mar 6, 2008 at 8:02 AM, Sridhar Raman <sridhar.raman@gmail.com> wrote:
> > This way no reader will ever see the changes until you successfully
>  > close the writer.  If the machine crashes the index is still in the
>  > starting state as of when the writer was first opened.
>  Ok, I have a slight doubt in this.  Say I have gone ahead with Approach 1
>  If I have opened the writer with autoCommit=false, and the system crashes,
>  does it mean that the changes made to IdxSrch are lost?

Since Lucene buffers in memory, you will always have the risk of
losing recently added documents that haven't been flushed yet.
Committing on every document would be too slow to be practical.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 15:29:49 2008
Return-Path: <java-user-return-32993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77798 invoked from network); 6 Mar 2008 15:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 15:29:49 -0000
Received: (qmail 72241 invoked by uid 500); 6 Mar 2008 15:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72224 invoked by uid 500); 6 Mar 2008 15:29:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59599 invoked by uid 99); 6 Mar 2008 15:23:43 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Message-ID: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
From: "Ray" <ray@rayweb.de>
To: <java-user@lucene.apache.org>
Subject: MultiSearcher to overcome the Integer.MAX_VALUE limit
Date: Thu, 6 Mar 2008 16:23:11 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000E_01C87FA6.5F126980"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Greylist: Sender succeeded SMTP AUTH authentication, not delayed by milter-greylist-3.0 (virtual1.denk.net [88.198.116.202]); Thu, 06 Mar 2008 16:23:11 +0100 (CET)
X-Virus-Scanned: ClamAV 0.92.1/6131/Wed Mar  5 05:25:15 2008 on virtual1.denk.net
X-Virus-Status: Clean
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on virtual1.denk.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00,HTML_MESSAGE,
	UNPARSEABLE_RELAY autolearn=ham version=3.2.4

------=_NextPart_000_000E_01C87FA6.5F126980
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hey Guys,

just a quick question to confirm an assumption I have.

Is it correct that I can have around 100 Indexes each at its
Integer.MAX_VALUE limit of documents, but can happily
search  them all with a MultiSearcher if all combined returned
hits don't add up to the Integer.MAX_VALUE themselves ?

Kind regards,

Ray.



------=_NextPart_000_000E_01C87FA6.5F126980--



From java-user-return-32994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 15:36:39 2008
Return-Path: <java-user-return-32994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81936 invoked from network); 6 Mar 2008 15:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 15:36:39 -0000
Received: (qmail 83369 invoked by uid 500); 6 Mar 2008 15:36:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83342 invoked by uid 500); 6 Mar 2008 15:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83326 invoked by uid 99); 6 Mar 2008 15:36:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 07:36:28 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,FB_WORD1_END_DOLLAR,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 15:35:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JXI8Y-0003pI-7n
	for java-user@lucene.apache.org; Thu, 06 Mar 2008 07:36:02 -0800
Message-ID: <15874560.post@talk.nabble.com>
Date: Thu, 6 Mar 2008 07:36:02 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15870647.post@talk.nabble.com> <15872169.post@talk.nabble.com> <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


okay thanks. the first thing was what i've expected :-) . well about my
second issue,
i was totally wrong. Just forget what i've said! I had in mind that if i
have several fields with the same name
these fields are connected to a big string.
Now as i read your message i remember that this behavior is just with
boost-values ;-) and not with field-values. hell no ... 
thanks for your answers :-). You saved a lot of time ;-)

best regards
Jens


Erick Erickson wrote:
> 
> No, as far as I know you can't combine wildcards in phrases. This would
> get extraordinarily ugly extraordinarily quickly. The way Lucene handles
> wildcards (conceputally) is to expand all the possible terms into a large
> OR
> clause. Say my index contains term1, term2, and term3. The search for
> term*
> really expands into term1 OR term2 OR term3. Now imagine the
> complexity of a phrase like "dog* cat* hors*". Now say your index
> contained
> 10 terms starting with dog, 10 with cat and 10 with hors. You'd have 1,000
> ORed phrase queries. And this is a tiny example....
> 
> You can try various approximations, and depending upon your index size
> they
> may or may not work. For instance, you could index all the successive
> shorter
> forms. with increments of 0 (see synonym analyzer)  I.e. index horse,
> hors$
> hor$
> ho$ h$ all in the same position. Then searching for hor* becomes searching
> for
> hor$ and it all "just works". Of course this makes your index bigger.....
> 
> About your second issue: I'm not clear what your trying to accomplish.
> It's
> no
> problem to add the same field multiple times for a document. That is, you
> can
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> as many times as you want before you add the document to the index. For
> retrieval you can call getFields ("field1") and get an array of Fields
> back,
> one
> for each call to add above. You can also set the PositionIncrementGap
> while
> indexing to separate the termposition of the first term of successive
> add()
> calls
> by, say, 100 (or whatever) if you need to worry about SpanNear or some
> such.
> 
> This may be waaaay off base. If so, could you give a concrete example of
> what
> your inputs are and how you want to search them?
> 
> Best
> Erick
> 
> On Thu, Mar 6, 2008 at 7:28 AM, JensBurkhardt <jensburkhardt@web.de>
> wrote:
> 
>>
>> okay, another problem occured. I have different fields with the same
>> name.
>> I
>> can't seperate them like naming them field1 field2 etc. cause while
>> indexing
>> i don't know how many fields i will need.
>> Like a book has several signature numbers i want to save them in a field
>> signature and when i search for such a number i want the search hit every
>> single field and not all fields together.
>> Right now i separate the string using an unique separator (in this case
>> just
>> $$$) so i can split the string into the numbers but i think this is kinda
>> the worst form doing it.
>>
>>
>>
>>
>> JensBurkhardt wrote:
>> >
>> > hey everybody,
>> >
>> > I'm wondering if it's possible to combine wildcards and phrase query.
>> >
>> > For example "term1 term*"
>> >
>> > I know that the documentation says "Lucene supports single and multiple
>> > character wildcard searches within single terms (not within phrase
>> > queries)" but maybe someone has had the same problem and found a
>> solution.
>> >
>> > Thanks for your help
>> >
>> > Jens Burkhardt
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15872169.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15874560.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 17:22:39 2008
Return-Path: <java-user-return-32995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36869 invoked from network); 6 Mar 2008 17:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 17:22:39 -0000
Received: (qmail 80705 invoked by uid 500); 6 Mar 2008 17:22:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80675 invoked by uid 500); 6 Mar 2008 17:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80663 invoked by uid 99); 6 Mar 2008 17:22:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:22:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Mar 2008 17:21:41 +0000
Received: (qmail invoked by alias); 06 Mar 2008 17:22:01 -0000
Received: from e179037199.adsl.alicedsl.de (EHLO msrvcn04) [85.179.37.199]
  by mail.gmx.net (mp053) with SMTP; 06 Mar 2008 18:22:01 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+PAopPLHSPbnGrY0q/fGtgg5UfnlFeiMPUBfskpl
	GHCs7zIEvU2Hcx
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com> <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com> <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com> <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
Subject: RE: Swapping between indexes
Date: Thu, 6 Mar 2008 18:22:06 +0100
Message-ID: <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach/mp8KeTeCPSvNTSywcM6tG1jrNAAEezQg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Since Lucene buffers in memory, you will always have the risk of
> losing recently added documents that haven't been flushed yet.
> Committing on every document would be too slow to be practical.

Well it is not sooo sloooow...

I have indexed 10.000 docs, resulting in 14 MB index. The index has 2 stored
fields and the tokenized content field.

With a commit after every add: 30 min.
With a commit after 100 add: 23 min.
Only one commit: 20 min.

(including time to get the document from the archive)

I use lucene 2.3 so a commit is a combination of closing and creating the
writer.
2.4/3.0 has a commit method which may be faster.

Before this test I thought it would be much slower than 30 min...

So one has to decide if correctness is more important than performance.

I use a batch size of 100, first committing lucene, then committing the
database which holds the status of the document if it is already indexed or
not.
If the db commit fails it is no problem, because my app does not care about
multiple indexed documents. But until now neither the lucene nor the db
commit ever failed...



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 17:31:25 2008
Return-Path: <java-user-return-32996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40805 invoked from network); 6 Mar 2008 17:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 17:31:25 -0000
Received: (qmail 9844 invoked by uid 500); 6 Mar 2008 17:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9813 invoked by uid 500); 6 Mar 2008 17:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9796 invoked by uid 99); 6 Mar 2008 17:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:31:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 17:30:36 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1926380qba.9
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 09:30:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=QumM5XDDQvzFhqK9Qe6tVVv1Ye/JDQIZyAzFZPVWLp4=;
        b=L4f3vSm4MExlDrQ+jo+i6lSm9TckJgUp1Nii8ZRnFRVMiPOfYV7yhjtADb4KDRGVP+iNMzOBW7tJYFZaM2Z5BX2oK3nti7mpRXbmpDZmEovzNTfdvdYwjYbPOQ0HLbx1UmLI/LZjatVQOGdbaaw7xWav5EemONthlGBfvfj7ysU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Y3I2gephggeu+sQfZITl6NNUtjyGl/HzwIxXqAw2igwsLJTGxr5jGjxbHnSk/bbbkBAMnpzaH0Q6MU86+2wYCjq/c0NBJzPKfYUJ0+lqU5zHUMrObfGvPo4x99lUzygpVhub0E0t1r+YnGjpDpWDzwCUH8o1NORVO9z6hYHrS/M=
Received: by 10.142.113.17 with SMTP id l17mr11523wfc.188.1204824645107;
        Thu, 06 Mar 2008 09:30:45 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Thu, 6 Mar 2008 09:30:44 -0800 (PST)
Message-ID: <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
Date: Thu, 6 Mar 2008 12:30:44 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Swapping between indexes
In-Reply-To: <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
	 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
	 <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
	 <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
	 <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
X-Google-Sender-Auth: 6ba0c73b01c00bbb
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Mar 6, 2008 at 12:22 PM,  <spring@gmx.eu> wrote:
> > Since Lucene buffers in memory, you will always have the risk of
>  > losing recently added documents that haven't been flushed yet.
>  > Committing on every document would be too slow to be practical.
>
>  Well it is not sooo sloooow...
>
>  I have indexed 10.000 docs, resulting in 14 MB index. The index has 2 stored
>  fields and the tokenized content field.
>
>  With a commit after every add: 30 min.
>  With a commit after 100 add: 23 min.
>  Only one commit: 20 min.

All of these times look pretty slow... perhaps lucene is not the
bottleneck here?

-Yonik

>  (including time to get the document from the archive)
>
>  I use lucene 2.3 so a commit is a combination of closing and creating the
>  writer.
>  2.4/3.0 has a commit method which may be faster.
>
>  Before this test I thought it would be much slower than 30 min...
>
>  So one has to decide if correctness is more important than performance.
>
>  I use a batch size of 100, first committing lucene, then committing the
>  database which holds the status of the document if it is already indexed or
>  not.
>  If the db commit fails it is no problem, because my app does not care about
>  multiple indexed documents. But until now neither the lucene nor the db
>  commit ever failed...
>
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 17:41:18 2008
Return-Path: <java-user-return-32997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45918 invoked from network); 6 Mar 2008 17:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 17:41:18 -0000
Received: (qmail 43523 invoked by uid 500); 6 Mar 2008 17:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43484 invoked by uid 500); 6 Mar 2008 17:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43473 invoked by uid 99); 6 Mar 2008 17:41:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:41:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Mar 2008 17:40:30 +0000
Received: (qmail invoked by alias); 06 Mar 2008 17:40:38 -0000
Received: from e179037199.adsl.alicedsl.de (EHLO msrvcn04) [85.179.37.199]
  by mail.gmx.net (mp003) with SMTP; 06 Mar 2008 18:40:38 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18v88cz7dUvEwwEhbtUTfFSvNr0smgNnfOn1sB8z5
	uYEK9MlDI9KA1x
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com> <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com> <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com> <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com> <F6B77DC74E994492B9F89B665911EE65@msrvcn04> <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
Subject: RE: Swapping between indexes
Date: Thu, 6 Mar 2008 18:40:42 +0100
Message-ID: <068BD1F02ABA4E999506EF880CA98F70@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach/r+W28C3v47kkQOGiTZF0PHcgPwAAEVaw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> >  With a commit after every add: 30 min.
> >  With a commit after 100 add: 23 min.
> >  Only one commit: 20 min.
> 
> All of these times look pretty slow... perhaps lucene is not the
> bottleneck here?

Therefore I wrote:

"(including time to get the document from the archive)"

Not the absolute times are important, the differences are imported.
They only occur due to the different batch sizes.

I think it is a real world scenario because one has always the read the docs
from somewhere and offen has to store the index state somewhere else.

A test with docs created in memory and no state in a database would have of
cause completely other results.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 17:51:01 2008
Return-Path: <java-user-return-32998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50505 invoked from network); 6 Mar 2008 17:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 17:51:01 -0000
Received: (qmail 75151 invoked by uid 500); 6 Mar 2008 17:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75117 invoked by uid 500); 6 Mar 2008 17:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75106 invoked by uid 99); 6 Mar 2008 17:50:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 09:50:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 17:50:15 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Boolean Query search performance
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 6 Mar 2008 12:50:22 -0500
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA563FD4A5@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boolean Query search performance
Thread-Index: Ach/JbHgd3W6cQiaQiKUg1CDi9Fs5AAbRI0g
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all replies.

Today when I printed out the query that's generated it does not have the
extra paren's. And query.rewrite(reader).toString() now gives the same
result as query.toString(). All I can figure is I must have changed
something between starting the email and sending it out. The other
oddity is the performance degradation is not as apparent. I'm wondering
if part of the problem is generating consistent data for comparing
search performance. I do a warmup before actually running the test, but
maybe it's not a good enough way to test.

One additional thing - from an earlier suggestion - is it possible to
add multiple terms per BooleanClause? I tried using TermQuery.combine()
to add in an array of them into one query and making a clause from that,
but there was no difference in performance.

Brian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 18:19:45 2008
Return-Path: <java-user-return-32999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74834 invoked from network); 6 Mar 2008 18:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 18:19:45 -0000
Received: (qmail 40796 invoked by uid 500); 6 Mar 2008 18:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40691 invoked by uid 500); 6 Mar 2008 18:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40680 invoked by uid 99); 6 Mar 2008 18:19:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 10:19:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eloi.rocha@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 18:18:57 +0000
Received: by gv-out-0910.google.com with SMTP id r4so2107676gve.23
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 10:19:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=4q6FQI8d1gyJHAGZcm7VSWjcxLM4zvwhBJ9/dILghlA=;
        b=fxnqS66lC4QdpePWv1KvkKoxkfuNL83gRpPm11O+Vc5gZ9cvLQGq7cEpsAD3Drs1VzXn8H3LjPdMu2SSmrDmdIgNLfKee9D9/MEWQyVSMNhOIsiUyr1VF15JacqvyueNs8R/Jw8EnEhu6L61VrhRLs+VfjkGbe9JAi/9o7b20/o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hCCS3vMLaUctUDO+Kj/AjYZUYw91ALN2MCzTfs3f1pbyjGxcivcl45rUd4hjUGzuuLobwg6lVKz3/HiBEcVmZP66w1QxCGTx0CgdT5+N8D3iYGDnjHRUlmY3353AylRUSyUSArQVrFoxHKpb9/AzoA+k8dbOF1LUK947JVZbTc0=
Received: by 10.142.126.17 with SMTP id y17mr83707wfc.170.1204827545402;
        Thu, 06 Mar 2008 10:19:05 -0800 (PST)
Received: by 10.142.49.7 with HTTP; Thu, 6 Mar 2008 10:19:05 -0800 (PST)
Message-ID: <7372a1430803061019w7ce20acfi8beaf07d60c0038e@mail.gmail.com>
Date: Thu, 6 Mar 2008 15:19:05 -0300
From: "Eloi Rocha Neto" <eloi.rocha@gmail.com>
To: java-user@lucene.apache.org
Subject: Help with Fuzzy Queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25611_14244467.1204827545430"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25611_14244467.1204827545430
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

  I am new with Lucene.

  I dont understand how Lucene works in some cases. For example:

  If I have an index with the following three entries:
   - ATUA=C7=C3O FALHA DE DISJUNTOR
   - RESET DE FALHA DE DISJUNTOR
   - FALHA DE COMANDO

  When I try to look for something limilar with "FALHA DE DISJUNTOR", I've
got the following results:
     Result | score
     FALHA DE COMANDO | 0.9277342
     ATUA=C7=C3O FALHA DE DISJUNTOR | 0.8880876
     RESET DE FALHA DE DISJUNTOR | 0.5709133

   If you pay attention, "FALHA DE COMANDO" is comming before "ATUA=C7=C3O =
FALHA
DE DISJUNTOR", but it is not what I would like. For my client, the first
result should be "ATUA=C7=C3O FALHA DE DISJUNTOR".

   Other example happens when I try to look for "FALHA DISJUNTOR". For my
surprise, the unique result is "FALHA DE COMANDO". Like the other example, =
I
was expecting "ATUA=C7=C3O FALHA DE DISJUNTOR" as the first or unique resul=
t.

   What should I do in order to have the "ATUA=C7=C3O FALHA DE DISJUNTOR" a=
s the
first result (or unique) in the explained cases.

   I am attaching the code at the end of this mail.

Thanks in advance,

Eloi


public class TestLucene {

    private static final String FILENAME =3D "test.idx";
    private static final String FIELD =3D "FIELD";

    private static List<Document> getDocs() {
        List<Document> docs =3D new ArrayList<Document>();
        docs.add(toDoc("Atua=E7=E3o Falha de Disjuntor"));
        docs.add(toDoc("Reset de Falha de Disjuntor"));
        docs.add(toDoc("Falha de Comando"));
        return docs;
    }

    private static Document toDoc(String text) {
        Document doc =3D new Document();
        doc.add(new Field(FIELD, text.toUpperCase(), Field.Store.YES,
                Field.Index.UN_TOKENIZED));
        return doc;
    }

    private static void createIndex(Collection docs) throws IOException {
        IndexWriter writer =3D new IndexWriter(FILENAME, new
StandardAnalyzer(),
                true);
        Iterator itDocs =3D docs.iterator();
        while (itDocs.hasNext()) {
            Document doc =3D (Document) itDocs.next();
            writer.addDocument(doc);
        }
        writer.optimize();
        writer.close();
    }

    public static void main(String[] args) throws IOException {
        createIndex(getDocs());
        IndexSearcher indexSearcher =3D new IndexSearcher(FILENAME);
        Hits hits =3D indexSearcher.search(new FuzzyQuery(new
Term(FIELD,"Falha de Disjuntor".toUpperCase()), 0.4f));
        System.out.println(hits.length());
        Iterator it =3D hits.iterator();
        while (it.hasNext()) {
            Hit hit =3D (Hit) it.next();
            System.out.println(hit.get(FIELD) + " " + hit.getScore());
        }
    }

}

------=_Part_25611_14244467.1204827545430--

From java-user-return-33000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 19:00:26 2008
Return-Path: <java-user-return-33000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92046 invoked from network); 6 Mar 2008 19:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 19:00:26 -0000
Received: (qmail 15152 invoked by uid 500); 6 Mar 2008 19:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15125 invoked by uid 500); 6 Mar 2008 19:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15114 invoked by uid 99); 6 Mar 2008 19:00:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 11:00:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 18:59:40 +0000
Received: by py-out-1112.google.com with SMTP id z74so8919pyg.9
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 10:59:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=bscJPCS2f35zE0PN58PWVt0vhlbLcITxWrUNsGdcuZA=;
        b=gXlITMz5L2+y/20TudgTPKd+AbYXiQao0mab38S5oU/nDt+ATA8rnttynbny1kNQfUNBxlEqkpXiDhg1PzxF657921rRwcOHdUxkYbYpnmJivCoQT7K1MWb5aowkkaThdYPaKOkPjcG6i0tvCbuNBbTosjcFHrPtYJyrgBhHacY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=wffXWMDNAWMjSi4Hhu2QGiEcDGyJBAFP1f1Rl4fEchS9e0Cg6Bke0eyVrPpFft+XQ4+EeDnEsDyOONbCyY420Lt/ysQV4UGR9qwMn0opbMGRHFZB21771FxirhmOi90Ix1MlUjRQp+ic/5mITBspZBQFQxL33dZkIrE6mVaJK+M=
Received: by 10.35.65.17 with SMTP id s17mr229064pyk.37.1204829990179;
        Thu, 06 Mar 2008 10:59:50 -0800 (PST)
Received: by 10.35.69.5 with HTTP; Thu, 6 Mar 2008 10:59:50 -0800 (PST)
Message-ID: <e994873a0803061059q65c2fea9l3d3d321e037d3522@mail.gmail.com>
Date: Thu, 6 Mar 2008 13:59:50 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Swapping between indexes
In-Reply-To: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5028_32039874.1204829990166"
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5028_32039874.1204829990166
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sridhar,

We have been using approach 2 in our production system with good results. We
have separate processes for indexing and searching. The main issue that came
up was in deleting old indexes (see: *http://tinyurl.com/32q8c4*). Most of
our production problems occur during indexing, and we are able to fix these
without having to interrupt searching at all. This has been a real benefit.

Peter


On Thu, Mar 6, 2008 at 5:30 AM, Sridhar Raman <sridhar.raman@gmail.com>
wrote:

> This is my situation.  I have an index, which has a lot of search requests
> coming into it.  I use just a single instance of IndexSearcher to process
> these requests.  At the same time, this index is also getting updated by
> an
> IndexWriter.  And I want these new changes to be reflected _only_ at
> certain
> intervals.  I have thought of a few ways of doing this.  Each has its
> share
> of problems and pluses.  I would be glad if someone can help me in
> figuring
> out the right approach, especially from the performance point of view, as
> the number of documents that will get indexed are pretty large.
>
> Approach 1:
> Have just one copy of the index for both Search & Index.  At time T, when
> I
> need to see the new changes reflected, I close the Searcher, and open it
> again.
> - The re-open of the Searcher might be a bit slow (which I could probably
> solve by using some warm-up threads).
> - Update and Search on the index at the same - will this affect the
> performance?
> - If server crashes before time T, the new Searcher would reflect the
> changes, which is not acceptable.  I want the changes to be reflected only
> at time T.  If server crashes, the index should be the previous T-1 index.
> - Possible problems while optimising the index (as Search is also
> happening).
> + Just one copy of the index being stored.
>
> Approach 2:
> Keep 2 copies of the index - 1 for Search, 1 for Index.  At time T, I just
> switch the Searcher to a copy of index that is being updated.
> - Before I do the switch to the new index, I need to make a copy of it so
> that the updates continue to happen on the other index.  Is there a
> convenient way to make this copy?  Is it efficient?
> - Time taken to create a new Searcher will still be a problem (but this is
> a
> problem in the previous approach as well, and we can live with it).
> + Optimise can happen on an index that is not being read, as a result, its
> resource requirements would be lesser.  And probably even the speed of
> optimisation.
> + Faster search as the index update is happening on a different index.
>
> So, these are the 2 approaches I am contemplating about.  Any pointers
> which
> would be the better approach?
>
> Thanks,
> Sridhar
>

------=_Part_5028_32039874.1204829990166--

From java-user-return-33001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 21:41:08 2008
Return-Path: <java-user-return-33001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59014 invoked from network); 6 Mar 2008 21:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 21:41:08 -0000
Received: (qmail 91275 invoked by uid 500); 6 Mar 2008 21:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91244 invoked by uid 500); 6 Mar 2008 21:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91233 invoked by uid 99); 6 Mar 2008 21:40:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 13:40:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 21:40:22 +0000
Received: by fk-out-0910.google.com with SMTP id z23so71100fkz.5
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 13:40:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KfOtCkOhiXHDeO4QohLCJDZhasBACrmXA+3rYbjRC2o=;
        b=uvIBSLvmd5/71jg9ZLEBxrcN6mFjfBW/SvoLjZB0EiWzndvQjBAoHiW6do21aWFqcDvnsL06UM32METqimKu5IHWfpcMN8xlX1oAXSO1IKc/0yF/ETCGE/bv0eqUOdj0r/6MQKrnXXAgmam04GsJwDDglM37uBHJQW6n+hjIarI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t28FnNVUxHrynTr6UyCJdg7tk8nlO0YxcD+KBvMXvN1xJ77VkNbWD8sTcedvooZeTB7emBGbKzSbR0pZBALXE/GQddyNqTbaxHe78jiPZyrvqXuR3Ant7UmiH7nZmPSs48aa/dfdnm3iGL7eJMWHNCo+HedR+ONvXb2wtDPurYo=
Received: by 10.82.166.9 with SMTP id o9mr700692bue.33.1204839624838;
        Thu, 06 Mar 2008 13:40:24 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 6 Mar 2008 13:40:24 -0800 (PST)
Message-ID: <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com>
Date: Thu, 6 Mar 2008 16:40:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
In-Reply-To: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9436_80294.1204839624838"
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9436_80294.1204839624838
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I'm not sure. But any index, even one split amongst many nodes
is going to have some interesting performance characteristics if you
have over 2 billion documents.... So I'm not sure it matters <G>...

What problem are you really trying to solve? You'll probably get
more meaningful answers if you tell us what that is.

Best
Erick

On Thu, Mar 6, 2008 at 10:23 AM, Ray <ray@rayweb.de> wrote:

> Hey Guys,
>
> just a quick question to confirm an assumption I have.
>
> Is it correct that I can have around 100 Indexes each at its
> Integer.MAX_VALUE limit of documents, but can happily
> search  them all with a MultiSearcher if all combined returned
> hits don't add up to the Integer.MAX_VALUE themselves ?
>
> Kind regards,
>
> Ray.
>
>
>

------=_Part_9436_80294.1204839624838--

From java-user-return-33002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 23:04:11 2008
Return-Path: <java-user-return-33002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95000 invoked from network); 6 Mar 2008 23:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 23:04:11 -0000
Received: (qmail 31630 invoked by uid 500); 6 Mar 2008 23:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31603 invoked by uid 500); 6 Mar 2008 23:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31591 invoked by uid 99); 6 Mar 2008 23:04:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 15:04:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [88.198.116.202] (HELO virtual1.denk.net) (88.198.116.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 23:03:23 +0000
Received: from RayBook2 (p4FC7FBAE.dip.t-dialin.net [79.199.251.174])
	(authenticated bits=0)
	by virtual1.denk.net (8.13.1/8.13.1) with ESMTP id m26N3Q2Q003576
	for <java-user@lucene.apache.org>; Fri, 7 Mar 2008 00:03:29 +0100
Message-ID: <000c01c87fde$4be49d00$1564a8c0@RayBook2>
From: "Ray" <ray@rayweb.de>
To: <java-user@lucene.apache.org>
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2> <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com>
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
Date: Fri, 7 Mar 2008 00:03:29 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Greylist: Sender succeeded SMTP AUTH authentication, not delayed by milter-greylist-3.0 (virtual1.denk.net [88.198.116.202]); Fri, 07 Mar 2008 00:03:29 +0100 (CET)
X-Virus-Scanned: ClamAV 0.92.1/6131/Wed Mar  5 05:25:15 2008 on virtual1.denk.net
X-Virus-Status: Clean
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on virtual1.denk.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00,STOX_REPLY_TYPE,
	UNPARSEABLE_RELAY autolearn=ham version=3.2.4


Thanks for your answer.

Well I want to search around  6 billion documents.
Most of them very small, but I am confident to be hitting
that number in the long run.

I am currently running a small random text indexer with 400 docs/second.
It will reach 2 billion in around 45 days.

I really hope you all who are saying 2 billion docs
will bring lucene to its knees are wrong... 

Ray.

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, March 06, 2008 10:40 PM
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit


> Well, I'm not sure. But any index, even one split amongst many nodes
> is going to have some interesting performance characteristics if you
> have over 2 billion documents.... So I'm not sure it matters <G>...
> 
> What problem are you really trying to solve? You'll probably get
> more meaningful answers if you tell us what that is.
> 
> Best
> Erick
> 
> On Thu, Mar 6, 2008 at 10:23 AM, Ray <ray@rayweb.de> wrote:
> 
>> Hey Guys,
>>
>> just a quick question to confirm an assumption I have.
>>
>> Is it correct that I can have around 100 Indexes each at its
>> Integer.MAX_VALUE limit of documents, but can happily
>> search  them all with a MultiSearcher if all combined returned
>> hits don't add up to the Integer.MAX_VALUE themselves ?
>>
>> Kind regards,
>>
>> Ray.
>>
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 06 23:57:17 2008
Return-Path: <java-user-return-33003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18244 invoked from network); 6 Mar 2008 23:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Mar 2008 23:57:17 -0000
Received: (qmail 95539 invoked by uid 500); 6 Mar 2008 23:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95499 invoked by uid 500); 6 Mar 2008 23:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95488 invoked by uid 99); 6 Mar 2008 23:57:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 15:57:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 23:56:31 +0000
Received: by hu-out-0506.google.com with SMTP id 27so46952hub.15
        for <java-user@lucene.apache.org>; Thu, 06 Mar 2008 15:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Sr1KEIyY8yAX+CjyGxGlBm7Qoc51cI4YYoxshaW1aSE=;
        b=poG3Eu4d6I45ZXoCO8C6p8OxKmBvpsmKPP1/DAI/7fcKq0XjZIgzSpSfpHVEyntcqu+IBW90X0WHiha3H0lulyMkDRv0rAKyojfYPmsCCS5MoEHczzPcsDlRC0ySsu4xE8NbJLZOjBvr2COSscNKxBN+UjqCjK1yID6XOHBV3nI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jN+aWmuye1v8DTUN/ryvffZ1Byw8aMUuWBWxdf3+AJITjjCzmV0w9pvo97Ga7yU8ef2hakWe8Azw8wjL59I5ZTePj9iF5159FOFegPB8dtcNrblz3JAady/Y2cBNF/VxA1i4TcpVB6D5/RFs2uRsEch5ybvGlbZqBtzOKxDIM1U=
Received: by 10.82.113.6 with SMTP id l6mr1108494buc.20.1204847799449;
        Thu, 06 Mar 2008 15:56:39 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 6 Mar 2008 15:56:39 -0800 (PST)
Message-ID: <359a92830803061556g6547ad66v40cee9ceb43f38bb@mail.gmail.com>
Date: Thu, 6 Mar 2008 18:56:39 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
In-Reply-To: <000c01c87fde$4be49d00$1564a8c0@RayBook2>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9764_31518140.1204847799450"
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
	 <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com>
	 <000c01c87fde$4be49d00$1564a8c0@RayBook2>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9764_31518140.1204847799450
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I really don't have a clue what'll happen with that many
documents. It's more a matter of unique terms from what I
understand.

I'll be *really* curious how it turns out.

Erick

On Thu, Mar 6, 2008 at 6:03 PM, Ray <ray@rayweb.de> wrote:

>
> Thanks for your answer.
>
> Well I want to search around  6 billion documents.
> Most of them very small, but I am confident to be hitting
> that number in the long run.
>
> I am currently running a small random text indexer with 400 docs/second.
> It will reach 2 billion in around 45 days.
>
> I really hope you all who are saying 2 billion docs
> will bring lucene to its knees are wrong...
>
> Ray.
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, March 06, 2008 10:40 PM
> Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
>
>
> > Well, I'm not sure. But any index, even one split amongst many nodes
> > is going to have some interesting performance characteristics if you
> > have over 2 billion documents.... So I'm not sure it matters <G>...
> >
> > What problem are you really trying to solve? You'll probably get
> > more meaningful answers if you tell us what that is.
> >
> > Best
> > Erick
> >
> > On Thu, Mar 6, 2008 at 10:23 AM, Ray <ray@rayweb.de> wrote:
> >
> >> Hey Guys,
> >>
> >> just a quick question to confirm an assumption I have.
> >>
> >> Is it correct that I can have around 100 Indexes each at its
> >> Integer.MAX_VALUE limit of documents, but can happily
> >> search  them all with a MultiSearcher if all combined returned
> >> hits don't add up to the Integer.MAX_VALUE themselves ?
> >>
> >> Kind regards,
> >>
> >> Ray.
> >>
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9764_31518140.1204847799450--

From java-user-return-33004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 03:16:52 2008
Return-Path: <java-user-return-33004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11919 invoked from network); 7 Mar 2008 03:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 03:16:51 -0000
Received: (qmail 46329 invoked by uid 500); 7 Mar 2008 03:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46285 invoked by uid 500); 7 Mar 2008 03:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46271 invoked by uid 99); 7 Mar 2008 03:16:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2008 19:16:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.216.203.8] (HELO virt18c.secure-wi.com) (209.216.203.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 03:16:01 +0000
Received: from [192.168.1.105] (65.107.22.130.ptr.us.xo.net [65.107.22.130])
	(authenticated bits=0)
	by virt18c.secure-wi.com (8.12.10/8.12.10) with ESMTP id m273GBU6001653
	for <java-user@lucene.apache.org>; Thu, 6 Mar 2008 19:16:11 -0800
Message-ID: <47D0B37B.2070204@quantum4d.com>
Date: Thu, 06 Mar 2008 19:16:11 -0800
From: Hasan Diwan <hasan@quantum4d.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to create segments files?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ladies and Gentlemen:
Below is an exception and the source code that generates it:
ERROR opening the Index - contact sysadmin!

Error message: no segments* file found in 
org.apache.lucene.store.FSDirectory@/home/hdiwan/public_html/Q4D: files:

Stack Trace follows...
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:587)
org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
org.apache.lucene.search.IndexSearcher.(IndexSearcher.java:48)
org.apache.jsp.results_jsp._jspService(results_jsp.java:130)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
java.lang.Thread.run(Thread.java:619)

-- Source code follows --
import java.io.File;
import java.io.FilenameFilter;
import java.io.IOException;
import java.net.URLDecoder;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.HashSet;
import java.util.Vector;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.DateTools;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.FSDirectory;
public class Parser implements Runnable,Comparator {
            String path;
            public Parser(String string) {
                     path = string;
             }
             public void run() {
                     IndexWriter writer = null;
                     Directory directory = null;
                     try {
                          directory = FSDirectory.getDirectory(this.path);
                     } catch (IOException e) {
                         System.err.println(e.getStackTrace());
                     }
                     try {
                         writer = new IndexWriter(directory,new 
WhitespaceAnalyzer(), true);
                     } catch (CorruptIndexException e) {
                             e.printStackTrace();
                     } catch (LockObtainFailedException e) {
                             e.printStackTrace();
                     } catch (IOException e) {
                             e.printStackTrace();
                     }
                     Document doc = new Document();
                     File image = null;
                     File file = null;
                     for (File f : this.listFiles(new File(path))) {
                             if (f.getAbsolutePath().endsWith("xml") || 
f.getAbsolutePath().endsWith("q4d")) {
                                     System.err.println("Q4D file found!");
                                     file = f;
                             } else {
                                     image = f;
                             }
                             if ((f != null) && (image != null)) break;
                     }
                     Date lastModified = new Date(file.lastModified());
                     System.err.println("Found a file and its 
corresponding image!");
                     String imageName = image.getName();
                     String filename = file.getName();
                     String lastModifiedDownToSecond = 
DateTools.dateToString(lastModified, DateTools.Resolution.SECOND);
                     System.err.println("the time the file was last 
modified was "+lastModifiedDownToSecond);
                     String author = System.getProperty("author");
                        String source = System.getProperty("source");
                     String url = System.getProperty("url");
                     String description = 
URLDecoder.decode(System.getProperty("description", "UTF-8"));
             System.err.println("about to create fields");
                     doc.add(new Field("author", author, 
Field.Store.YES, Field.Index.TOKENIZED));
                     doc.add(new Field("source", source, 
Field.Store.YES, Field.Index.TOKENIZED));
                     doc.add(new Field("name", filename, 
Field.Store.YES, Field.Index.NO));
                     doc.add(new Field("image", imageName, 
Field.Store.YES, Field.Index.NO));
                     doc.add(new Field("date", lastModifiedDownToSecond, 
Field.Store.YES, Field.Index.NO));
                     doc.add(new Field("url", url, Field.Store.YES, 
Field.Index.NO));
                     if (description != null) {
                         doc.add(new Field("description", description, 
Field.Store.YES, Field.Index.TOKENIZED));
                     } else {
                         doc.add(new Field("description", "none", 
Field.Store.YES, Field.Index.TOKENIZED));
                     }
                     doc.add(new Field("all", 
author+lastModifiedDownToSecond+source+imageName+description+url, 
Field.Store.YES, Field.Index.TOKENIZED));
                     try {
                             writer.addDocument(doc);
                     } catch (CorruptIndexException e) {
                             e.printStackTrace();
                     } catch (IOException e) {
                             e.printStackTrace();
                     }
                     try {
                             writer.optimize();
                     } catch (CorruptIndexException e) {
                             e.printStackTrace();
                     } catch (IOException e) {
                             e.printStackTrace();
                     }
             }
           
             private Collection<File> listFiles(
                             File directory)
             {
                     Vector<File> files = new Vector<File>();
                     // Get files / directories in the directory
                     File[] entries = directory.listFiles();
    
                     // Go over entries
                     for (File entry : entries)
                     {
                             files.add(entry);
                     }
    
                     // Return collection of files, sorted by date
                     Collections.sort(files, this);
                     for (File entry : files) {
                             System.err.println(entry+" 
"+entry.lastModified());
                     }
                     return files;
             }
           
             public int compare(Object o1, Object o2) {
                     File f1 = (File)o1;
                     File f2 = (File)o2;
                     Date d1 = new Date(f1.lastModified());
                     Date d2 = new Date(f2.lastModified());
                     return d1.compareTo(d2);
             }
           
             public static void main (String []args) {
                     Parser obj = new Parser(args[0]);
                     try {
                            obj.run();
                     } finally { // in case it crashes, I don't want a 
locked repository!
                             File f = new 
File(args[0]+File.separator+"write.lock");
                             f.delete();
                     }
             }
     }
== end ==
The code is supposed to add a document to the repository, as you can see 
from the first 19 lines, it generates an exception, the backtrace is 
also included. I've been struggling with this problem all day today 
(Thursday) without making headway. Hence, I turn to your good guidance. 
I'm sure you won't disappoint. Many thanks! -- H

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 10:26:56 2008
Return-Path: <java-user-return-33005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55862 invoked from network); 7 Mar 2008 10:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 10:26:55 -0000
Received: (qmail 57691 invoked by uid 500); 7 Mar 2008 10:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57664 invoked by uid 500); 7 Mar 2008 10:26:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57653 invoked by uid 99); 7 Mar 2008 10:26:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 02:26:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 10:26:08 +0000
Received: by nf-out-0910.google.com with SMTP id d3so276664nfc.15
        for <java-user@lucene.apache.org>; Fri, 07 Mar 2008 02:26:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        bh=3oDJjC2kd+4X5CnRm4HbZUbBzflUFz5GjD3xx9QkWwo=;
        b=ro7Ftq3KtiA+e1VuBOnvqzCu+s7YNfJ2I6EZ++sRZ9rwjRdVE5LmanTNeMq/tr/oTd+Uq0M5oGrrhywU+Q82Nqxic2RQ0LGafYnMz9J/m5w1jnrTjl4NcvVNlsLWNmdacT+b5QjrAMyJZ+6OzeliVZY1OodX+mwiLkVZzB/dorE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        b=osYLop+j3P20lBOgFuByaVZ/iBGFbR8nnRt3v2SgUOJp1gfuVd4JxT56BS+P21RFmOmbGRd9ZEMnKSsUzTD04YqYI6C1p7CvZkV0mBisr90U3wh7H1NZ+xIFW/zwtgac7uwSPEcYpgmhhuZLScsD0cuy8rEURrH2w3rg1oow0so=
Received: by 10.82.175.17 with SMTP id x17mr2687223bue.19.1204885577047;
        Fri, 07 Mar 2008 02:26:17 -0800 (PST)
Received: from sj-desktop ( [92.112.22.39])
        by mx.google.com with ESMTPS id v23sm6449419fkd.1.2008.03.07.02.26.15
        (version=SSLv3 cipher=OTHER);
        Fri, 07 Mar 2008 02:26:16 -0800 (PST)
Date: Fri, 07 Mar 2008 12:26:14 +0200
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: Hits.
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.t7m5x0hb2ic4zu@sj-desktop>
User-Agent: Opera Mail/9.26 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.
I have a question about retrieving information.
Lets say I have an index which contents a millions of documents with 2-3=
  =

small fields an a 10 large fields.
Then I run a query which returns me a 1000 of hits.  But I am interested=
  =

only  one small field, and I don't want to load other fields.

Can I do something like what?

       int id =3D hits.id(n);

       FieldSelector fieldSelector =3D new FieldSelector() {
         public FieldSelectorResult accept(String fieldName) {
           if(fieldName.equals(field))
             return FieldSelectorResult.LOAD_AND_BREAK;
           return FieldSelectorResult.NO_LOAD;
         }
       };

       Document doc =3D reader.document(id, fieldSelector);
       if(doc =3D=3D null)
         throw new IOException("Document with id "+id+" not found");
       return doc.get(field);

n from 0 to hits.length().

Best regards,
Sergey

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 12:11:23 2008
Return-Path: <java-user-return-33006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89144 invoked from network); 7 Mar 2008 12:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 12:11:23 -0000
Received: (qmail 29015 invoked by uid 500); 7 Mar 2008 12:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28989 invoked by uid 500); 7 Mar 2008 12:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28978 invoked by uid 99); 7 Mar 2008 12:11:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 04:11:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:10:34 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 8168DB89C1
	for <java-user@lucene.apache.org>; Fri,  7 Mar 2008 04:10:39 -0800 (PST)
Message-Id: <DCD4E0E2-5473-4EA0-B866-6F01BED949D4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <op.t7m5x0hb2ic4zu@sj-desktop>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Hits.
Date: Fri, 7 Mar 2008 07:10:37 -0500
References: <op.t7m5x0hb2ic4zu@sj-desktop>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You sure can.  Or you can use the SetBasedFieldSelector that already  
exists in o.a.lucene.document.

-Grant

On Mar 7, 2008, at 5:26 AM, Sergey Kabashnyuk wrote:

> Hi.
> I have a question about retrieving information.
> Lets say I have an index which contents a millions of documents with  
> 2-3 small fields an a 10 large fields.
> Then I run a query which returns me a 1000 of hits.  But I am  
> interested only  one small field, and I don't want to load other  
> fields.
>
> Can I do something like what?
>
>      int id = hits.id(n);
>
>      FieldSelector fieldSelector = new FieldSelector() {
>        public FieldSelectorResult accept(String fieldName) {
>          if(fieldName.equals(field))
>            return FieldSelectorResult.LOAD_AND_BREAK;
>          return FieldSelectorResult.NO_LOAD;
>        }
>      };
>
>      Document doc = reader.document(id, fieldSelector);
>      if(doc == null)
>        throw new IOException("Document with id "+id+" not found");
>      return doc.get(field);
>
> n from 0 to hits.length().
>
> Best regards,
> Sergey
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 12:17:39 2008
Return-Path: <java-user-return-33007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91613 invoked from network); 7 Mar 2008 12:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 12:17:39 -0000
Received: (qmail 44714 invoked by uid 500); 7 Mar 2008 12:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44674 invoked by uid 500); 7 Mar 2008 12:17:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44663 invoked by uid 99); 7 Mar 2008 12:17:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 04:17:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:16:53 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JXD00KR00SEBM@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 07 Mar 2008 13:17:02 +0100 (MET)
Date: Fri, 07 Mar 2008 13:17:01 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
In-reply-to: <000c01c87fde$4be49d00$1564a8c0@RayBook2>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
 <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com>
 <000c01c87fde$4be49d00$1564a8c0@RayBook2>
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-03-07 at 00:03 +0100, Ray wrote:
> I am currently running a small random text indexer with 400 docs/second.
> It will reach 2 billion in around 45 days.

If you are just doing it to test large indexes (in terms of document
count), then you need to look into your index-generation code. I tried
making an ultra-simple index builder, where each document contains a
unique id and one of nine fixed strings. The index-building speed on my
desktop computer is 40.000 documents/second (tested with 100 million
documents).

I would suspect that your random text generator is where all the
time-intensive processing occurs. Either that or you're flushing after
each document addition (which lowers my execution speed to about 100
documents/second).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 14:18:05 2008
Return-Path: <java-user-return-33008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45554 invoked from network); 7 Mar 2008 14:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 14:18:04 -0000
Received: (qmail 70259 invoked by uid 500); 7 Mar 2008 14:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70231 invoked by uid 500); 7 Mar 2008 14:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70220 invoked by uid 99); 7 Mar 2008 14:17:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 06:17:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 14:17:08 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JXD00KYZ6D5BM@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 07 Mar 2008 15:17:29 +0100 (MET)
Date: Fri, 07 Mar 2008 15:17:29 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: RE: Swapping between indexes
In-reply-to: <068BD1F02ABA4E999506EF880CA98F70@msrvcn04>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1204899449.9126.219.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
 <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
 <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
 <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
 <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
 <068BD1F02ABA4E999506EF880CA98F70@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-03-06 at 18:40 +0100, spring@gmx.eu wrote:
> > >  With a commit after every add: 30 min.
> > >  With a commit after 100 add: 23 min.
> > >  Only one commit: 20 min.

[...]

> I think it is a real world scenario because one has always the read the docs
> from somewhere and offen has to store the index state somewhere else.

Very true, but the time it takes to create the documents varies greatly
between systems.

I tried repeating your test by creating a simple 14 MB index with 10,000
documents on my desktop-machine. each document was made up of

 - one non-tokenized unique stored indexed field
 - one non-tokenized indexed stored field with one of 9 terms
 - one tokenized field with 930 random characters, including space

With a commit after every add: 4 min, 46 sec.
With a commit after every 100 add: 12 sec.
Only one commit: 8 sec.


Guesstimating the amortized time spend on adding each document on such a
small corpus, by blatantly ignoring the overhead of creating the
documents, gives us the following:

With a commit after every add: (286 sec / 10,000 docs) 28.6 ms.
With a commit after every 100 add: (12 sec / 10,000 docs) 1.2 ms.
Only one commit: (8 sec / 10,000 docs) 0.8 ms.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 14:39:27 2008
Return-Path: <java-user-return-33009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55018 invoked from network); 7 Mar 2008 14:39:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 14:39:27 -0000
Received: (qmail 94771 invoked by uid 500); 7 Mar 2008 14:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94704 invoked by uid 500); 7 Mar 2008 14:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94693 invoked by uid 99); 7 Mar 2008 14:39:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 06:39:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Mar 2008 14:38:40 +0000
Received: (qmail invoked by alias); 07 Mar 2008 14:38:49 -0000
Received: from e178102080.adsl.alicedsl.de (EHLO msrvcn04) [85.178.102.80]
  by mail.gmx.net (mp042) with SMTP; 07 Mar 2008 15:38:49 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19mAVZCbAhmaS+965+6i5306o+pkexNKS/rDmX0TG
	xFwqtUAswStIb6
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com> <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com> <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com> <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com> <F6B77DC74E994492B9F89B665911EE65@msrvcn04> <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com> <068BD1F02ABA4E999506EF880CA98F70@msrvcn04> <1204899449.9126.219.camel@PC990.sb.statsbiblioteket.dk>
Subject: RE: Swapping between indexes
Date: Fri, 7 Mar 2008 15:38:56 +0100
Message-ID: <5BCE9257B92B4D23A322E503AC029058@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AciAXg38X0QZpds1Qzu0zIEWySxMhgAAm2Ww
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <1204899449.9126.219.camel@PC990.sb.statsbiblioteket.dk>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org


> With a commit after every add: (286 sec / 10,000 docs) 28.6 ms.
> With a commit after every 100 add: (12 sec / 10,000 docs) 1.2 ms.
> Only one commit: (8 sec / 10,000 docs) 0.8 ms.

Of couse. If you need so less time to create a document than a commit which
may take, lets say 10 - 500 ms, will slow down indexing heavily.

So it really depends on the use case and how long it takes to index a single
document, inclusive retrieval of the document from ist source.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 15:36:17 2008
Return-Path: <java-user-return-33010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57186 invoked from network); 7 Mar 2008 15:36:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 15:36:17 -0000
Received: (qmail 95645 invoked by uid 500); 7 Mar 2008 15:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95617 invoked by uid 500); 7 Mar 2008 15:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95606 invoked by uid 99); 7 Mar 2008 15:36:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 07:36:06 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,FB_WORD1_END_DOLLAR,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 15:35:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JXebj-0001uw-Dy
	for java-user@lucene.apache.org; Fri, 07 Mar 2008 07:35:39 -0800
Message-ID: <15896083.post@talk.nabble.com>
Date: Fri, 7 Mar 2008 07:35:39 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15870647.post@talk.nabble.com> <15872169.post@talk.nabble.com> <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi again,

referring to my second issue, i've got another question. I mean, this field
thing works pretty well but:
My fields look like:
signature: LA A 100
signature: LA A 201
signature: LA A 202
signature: LA B 200
signature: LC B 300
Now i use getFields and search them.
Let's assume i'm searching for a signature like "LA B 200". If i use a
phrase query, no problem. I search all the fields and the only if the field
value and query exactly match, i get a hit.
But what if you want to use wildcards and search for something like LA A
20*. Now all the LA signatures will be in my results even if i just want two
of them. The problems are the blanks but i have no idea how this could work.

Thanks and have a nice evening

Jens


Erick Erickson wrote:
> 
> No, as far as I know you can't combine wildcards in phrases. This would
> get extraordinarily ugly extraordinarily quickly. The way Lucene handles
> wildcards (conceputally) is to expand all the possible terms into a large
> OR
> clause. Say my index contains term1, term2, and term3. The search for
> term*
> really expands into term1 OR term2 OR term3. Now imagine the
> complexity of a phrase like "dog* cat* hors*". Now say your index
> contained
> 10 terms starting with dog, 10 with cat and 10 with hors. You'd have 1,000
> ORed phrase queries. And this is a tiny example....
> 
> You can try various approximations, and depending upon your index size
> they
> may or may not work. For instance, you could index all the successive
> shorter
> forms. with increments of 0 (see synonym analyzer)  I.e. index horse,
> hors$
> hor$
> ho$ h$ all in the same position. Then searching for hor* becomes searching
> for
> hor$ and it all "just works". Of course this makes your index bigger.....
> 
> About your second issue: I'm not clear what your trying to accomplish.
> It's
> no
> problem to add the same field multiple times for a document. That is, you
> can
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> doc.add(new field("field1", ......)
> as many times as you want before you add the document to the index. For
> retrieval you can call getFields ("field1") and get an array of Fields
> back,
> one
> for each call to add above. You can also set the PositionIncrementGap
> while
> indexing to separate the termposition of the first term of successive
> add()
> calls
> by, say, 100 (or whatever) if you need to worry about SpanNear or some
> such.
> 
> This may be waaaay off base. If so, could you give a concrete example of
> what
> your inputs are and how you want to search them?
> 
> Best
> Erick
> 
> On Thu, Mar 6, 2008 at 7:28 AM, JensBurkhardt <jensburkhardt@web.de>
> wrote:
> 
>>
>> okay, another problem occured. I have different fields with the same
>> name.
>> I
>> can't seperate them like naming them field1 field2 etc. cause while
>> indexing
>> i don't know how many fields i will need.
>> Like a book has several signature numbers i want to save them in a field
>> signature and when i search for such a number i want the search hit every
>> single field and not all fields together.
>> Right now i separate the string using an unique separator (in this case
>> just
>> $$$) so i can split the string into the numbers but i think this is kinda
>> the worst form doing it.
>>
>>
>>
>>
>> JensBurkhardt wrote:
>> >
>> > hey everybody,
>> >
>> > I'm wondering if it's possible to combine wildcards and phrase query.
>> >
>> > For example "term1 term*"
>> >
>> > I know that the documentation says "Lucene supports single and multiple
>> > character wildcard searches within single terms (not within phrase
>> > queries)" but maybe someone has had the same problem and found a
>> solution.
>> >
>> > Thanks for your help
>> >
>> > Jens Burkhardt
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15872169.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15896083.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 15:51:06 2008
Return-Path: <java-user-return-33011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65020 invoked from network); 7 Mar 2008 15:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 15:51:06 -0000
Received: (qmail 39953 invoked by uid 500); 7 Mar 2008 15:50:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39917 invoked by uid 500); 7 Mar 2008 15:50:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39894 invoked by uid 99); 7 Mar 2008 15:50:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 07:50:46 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 15:49:56 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id DC0937FB3
	for <java-user@lucene.apache.org>; Fri,  7 Mar 2008 07:50:10 -0800 (PST)
Message-Id: <6FD60468-1121-46B8-B711-59D2D20ECE42@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <OF22EC442E.78171F47-ON85257403.00602FE6-85257403.0065A0A7@us.ibm.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: applying patch in Eclipse to get SpanHighlighter functionality
Date: Fri, 7 Mar 2008 10:50:10 -0500
References: <OF22EC442E.78171F47-ON85257403.00602FE6-85257403.0065A0A7@us.ibm.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

 From the command line, assuming you have the patch command:
patch -p 0 -i <path to patch>

Is how I apply patches that were generated using svn diff.

-Grant

On Mar 5, 2008, at 1:30 PM, Donna L Gresh wrote:

> Thanks Mark-
> I'm very much a newbie in all this patching stuff, but I don't think  
> I'm
> using anything other than built-in Eclipse functionality using team- 
> >apply
> patch. And it's clearly not working well.
>
> I took a look at TortoiseSVN but I think it's way overkill for me-- oh
> well; maybe I'll just wait until it makes it into a release :)
>
> Donna Gresh
>
>
>
> Mark Miller <markrmiller@gmail.com> wrote on 03/05/2008 12:07:21 PM:
>
>> Are you using subclipse to apply the patch? Its not very good at  
>> it. I
>> use TortoiseSVN for patching, as its much smarter about these things.
>> With TortoiseSVN, you just patch from the root dir and it knows you  
>> are
>> referring to the contrib folder thats under the root directory (the
>> directory you apply the patch to). I think subclipse also makes  
>> patches
>> with absolute URLs, which is not good either, though you can still  
>> use
>> them with the ignore stuff it has.
>>
>> Donna L Gresh wrote:
>>> I have downloaded the Lucene (core, 2.3.1) code and created a  
>>> project
>>> using Eclipse (pointing to src/java) to use it. That works fine,  
>>> along
>
>>> with the contrib highlighter jar file from the standard  
>>> distribution.
>>>
>>> I have also successfully added an additional Eclipse project for the
>>> (standard) Highlighter, pointing to ..contrib/highlighter/src/ 
>>> java . I
> can
>>> use this project instead of the standard highlighter jar file and  
>>> that
>
>>> works fine too.
>>>
>>> I am having trouble figuring out how to apply the patch (assuming
> that's
>>> possible) to get the SpanHighlighter functionality. When I try to
> apply
>>> the patch using team->apply patch and pointing to the patch xml  
>>> file,
> I am
>>> getting errors that seem to imply that the patch is looking for  
>>> things
>
>>> under contrib/highlighter.... which it can't find.
>>>
>>> I admit to knowing very little about patches; I am just interested  
>>> in
>>> getting the SpanHighlighter functionality.
>>>
>>> Can anyone point me in the right direction? Thank you.
>>>
>>> Donna  Gresh
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 18:39:20 2008
Return-Path: <java-user-return-33012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61601 invoked from network); 7 Mar 2008 18:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 18:39:20 -0000
Received: (qmail 50523 invoked by uid 500); 7 Mar 2008 18:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50256 invoked by uid 500); 7 Mar 2008 18:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50239 invoked by uid 99); 7 Mar 2008 18:39:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 10:39:09 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.115.41.81] (HELO nspiron-1.llnl.gov) (128.115.41.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 18:38:33 +0000
X-Attachments: None
X-IronPort-AV: E=McAfee;i="5200,2160,5246"; a="11047588"
X-IronPort-AV: E=Sophos;i="4.25,463,1199692800"; 
   d="scan'208";a="11047588"
Received: from suppe2pd.llnl.gov ([134.9.250.132])
  by nspiron-1.llnl.gov with ESMTP; 07 Mar 2008 10:38:42 -0800
Message-Id: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Fri, 07 Mar 2008 10:38:43 -0800
To: java-user@lucene.apache.org
From: Steve Suppe <ssuppe@llnl.gov>
Subject: Offset Questions
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm trying to index documents so that a) I have all the documents indexed 
'normally' (in that I can search for documents that match certain words, 
and b) parts of the document that I consider important, such as author and 
title are ALSO stored in their own indexed fields.

I have (a) working fine, and (b) is almost working - however, I'm trying to 
force the separate field to have the original offsets of where it existed 
in the text.  As in, if the title was at characters 76-200 in the original 
text, I'd like the field to have that as its information, so when I look at 
the field I can find the place in the document quickly.

I don't seem to be able to do this - I have my own analyzer that finds the 
tokens and sets the start and end offsets accordingly.  However, when I 
create the new field and write it to the index, it seems like these offsets 
are ignored?  When I pull offsets out later, they start at 0 and move up 
from there.

I am creating the field like:

CASAnnotationAnalyzer psa = new CASAnnotationAnalyzer();
analyzer.addAnalyzer(info.indexName, psa);

TokenStream ts = psa.tokenStream(info.indexName,
                                              new StringReader(info.value));
Field stemF = new Field(info.indexName, ts,
                                     Field.TermVector.WITH_POSITIONS_OFFSETS);
d.add(stemF);

(d is the document being indexed).

I have tried various permutations of creating the field and token stream - 
does anyone have any insights, please?

Thanks in advance,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 19:40:00 2008
Return-Path: <java-user-return-33013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82274 invoked from network); 7 Mar 2008 19:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 19:40:00 -0000
Received: (qmail 40629 invoked by uid 500); 7 Mar 2008 19:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39701 invoked by uid 500); 7 Mar 2008 19:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39690 invoked by uid 99); 7 Mar 2008 19:39:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 11:39:50 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.115.41.83] (HELO smtp.llnl.gov) (128.115.41.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 19:39:13 +0000
X-Attachments: None
X-IronPort-AV: E=McAfee;i="5200,2160,5247"; a="28754679"
X-IronPort-AV: E=Sophos;i="4.25,464,1199692800"; 
   d="scan'208";a="28754679"
Received: from suppe2pd.llnl.gov ([134.9.250.132])
  by smtp.llnl.gov with ESMTP; 07 Mar 2008 11:39:24 -0800
Message-Id: <6.2.1.2.2.20080307113723.1852e150@mail.llnl.gov>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Fri, 07 Mar 2008 11:39:23 -0800
To: java-user@lucene.apache.org
From: Steve Suppe <ssuppe@llnl.gov>
Subject: Re: Offset Questions (Follow-Up)
In-Reply-To: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
References: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

OK, I think I understand what's going on - it looks like I am able to set 
the token for the full author name (Say, "Steve Suppe") with the correct 
offsets, but the analyzer takes it once step further and tokenizes 'Steve' 
and 'Suppe' which is giving me a lot more generated offsets and is 
confusing me.

I like the tokenization, as it allows me to just search for Suppe and get 
results.  However, I don't want those "sub-offsets" returned.  Is there a 
way to distinguish the 'main' offsets for the whole field?

Thanks again,
Steve

At 10:38 AM 3/7/2008, you wrote:
>Hi all,
>
>I'm trying to index documents so that a) I have all the documents indexed 
>'normally' (in that I can search for documents that match certain words, 
>and b) parts of the document that I consider important, such as author and 
>title are ALSO stored in their own indexed fields.
>
>I have (a) working fine, and (b) is almost working - however, I'm trying 
>to force the separate field to have the original offsets of where it 
>existed in the text.  As in, if the title was at characters 76-200 in the 
>original text, I'd like the field to have that as its information, so when 
>I look at the field I can find the place in the document quickly.
>
>I don't seem to be able to do this - I have my own analyzer that finds the 
>tokens and sets the start and end offsets accordingly.  However, when I 
>create the new field and write it to the index, it seems like these 
>offsets are ignored?  When I pull offsets out later, they start at 0 and 
>move up from there.
>
>I am creating the field like:
>
>CASAnnotationAnalyzer psa = new CASAnnotationAnalyzer();
>analyzer.addAnalyzer(info.indexName, psa);
>
>TokenStream ts = psa.tokenStream(info.indexName,
>                                              new StringReader(info.value));
>Field stemF = new Field(info.indexName, ts,
>                                     Field.TermVector.WITH_POSITIONS_OFFSETS);
>d.add(stemF);
>
>(d is the document being indexed).
>
>I have tried various permutations of creating the field and token stream - 
>does anyone have any insights, please?
>
>Thanks in advance,
>Steve
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 20:09:04 2008
Return-Path: <java-user-return-33014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95264 invoked from network); 7 Mar 2008 20:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 20:09:03 -0000
Received: (qmail 75487 invoked by uid 500); 7 Mar 2008 20:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75450 invoked by uid 500); 7 Mar 2008 20:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75439 invoked by uid 99); 7 Mar 2008 20:08:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:08:52 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.233 as permitted sender)
Received: from [72.14.214.233] (HELO hu-out-0506.google.com) (72.14.214.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 20:08:14 +0000
Received: by hu-out-0506.google.com with SMTP id 27so448879hub.15
        for <java-user@lucene.apache.org>; Fri, 07 Mar 2008 12:08:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=n9NShSorVcSHc0A1ieX09D0CwUMzUgVypJPKl0u5pYc=;
        b=xtTfBjVIEf0iZs60BzzKCZCXsAGnbAvJleNLSFAbd8bI/mSajuEl1/ivHCZSOkfhxk4y/nQgCTkrFmpWRh/44PFM58CEkc7n4yCc1SIfIjcj7jEBeIfepX7Jdt9dspWNStfNdv4giA9S5EdJAMFTbzGHb7F3bE14fz8Cc14uyHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=va9BEqDg0zsmVM2dCHUT0kkjhOjXeTfDfziMDwEUgiWF/kq29yw0Cb22A+A8p1LrVGoINH2cMygtprmFxxgdPZYZSdQMS9/t2kxFFTniOSa1jvNl72sIidB56Gixb60CQEpjKxg5F/+s/KrbTsSnOTzLvifWzwH7sTC6SylUaqc=
Received: by 10.82.175.17 with SMTP id x17mr4021656bue.2.1204920502941;
        Fri, 07 Mar 2008 12:08:22 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 7 Mar 2008 12:08:22 -0800 (PST)
Message-ID: <359a92830803071208m615b4433jf3000eed5832bae@mail.gmail.com>
Date: Fri, 7 Mar 2008 15:08:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <15896083.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12861_9102017.1204920502950"
References: <15870647.post@talk.nabble.com> <15872169.post@talk.nabble.com>
	 <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
	 <15896083.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12861_9102017.1204920502950
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you considered indexing that field UN_TOKENIZED? Make sure
you build your queries that way too. I'm not at *all* clear about
how this works with wildcards, so you'll have to test that.

This assumes you never want to just be able to search on LA
and get a hit.

Best
Erick

On Fri, Mar 7, 2008 at 10:35 AM, JensBurkhardt <jensburkhardt@web.de> wrote:

>
> hi again,
>
> referring to my second issue, i've got another question. I mean, this
> field
> thing works pretty well but:
> My fields look like:
> signature: LA A 100
> signature: LA A 201
> signature: LA A 202
> signature: LA B 200
> signature: LC B 300
> Now i use getFields and search them.
> Let's assume i'm searching for a signature like "LA B 200". If i use a
> phrase query, no problem. I search all the fields and the only if the
> field
> value and query exactly match, i get a hit.
> But what if you want to use wildcards and search for something like LA A
> 20*. Now all the LA signatures will be in my results even if i just want
> two
> of them. The problems are the blanks but i have no idea how this could
> work.
>
> Thanks and have a nice evening
>
> Jens
>
>
> Erick Erickson wrote:
> >
> > No, as far as I know you can't combine wildcards in phrases. This would
> > get extraordinarily ugly extraordinarily quickly. The way Lucene handles
> > wildcards (conceputally) is to expand all the possible terms into a
> large
> > OR
> > clause. Say my index contains term1, term2, and term3. The search for
> > term*
> > really expands into term1 OR term2 OR term3. Now imagine the
> > complexity of a phrase like "dog* cat* hors*". Now say your index
> > contained
> > 10 terms starting with dog, 10 with cat and 10 with hors. You'd have
> 1,000
> > ORed phrase queries. And this is a tiny example....
> >
> > You can try various approximations, and depending upon your index size
> > they
> > may or may not work. For instance, you could index all the successive
> > shorter
> > forms. with increments of 0 (see synonym analyzer)  I.e. index horse,
> > hors$
> > hor$
> > ho$ h$ all in the same position. Then searching for hor* becomes
> searching
> > for
> > hor$ and it all "just works". Of course this makes your index
> bigger.....
> >
> > About your second issue: I'm not clear what your trying to accomplish.
> > It's
> > no
> > problem to add the same field multiple times for a document. That is,
> you
> > can
> > doc.add(new field("field1", ......)
> > doc.add(new field("field1", ......)
> > doc.add(new field("field1", ......)
> > doc.add(new field("field1", ......)
> > as many times as you want before you add the document to the index. For
> > retrieval you can call getFields ("field1") and get an array of Fields
> > back,
> > one
> > for each call to add above. You can also set the PositionIncrementGap
> > while
> > indexing to separate the termposition of the first term of successive
> > add()
> > calls
> > by, say, 100 (or whatever) if you need to worry about SpanNear or some
> > such.
> >
> > This may be waaaay off base. If so, could you give a concrete example of
> > what
> > your inputs are and how you want to search them?
> >
> > Best
> > Erick
> >
> > On Thu, Mar 6, 2008 at 7:28 AM, JensBurkhardt <jensburkhardt@web.de>
> > wrote:
> >
> >>
> >> okay, another problem occured. I have different fields with the same
> >> name.
> >> I
> >> can't seperate them like naming them field1 field2 etc. cause while
> >> indexing
> >> i don't know how many fields i will need.
> >> Like a book has several signature numbers i want to save them in a
> field
> >> signature and when i search for such a number i want the search hit
> every
> >> single field and not all fields together.
> >> Right now i separate the string using an unique separator (in this case
> >> just
> >> $$$) so i can split the string into the numbers but i think this is
> kinda
> >> the worst form doing it.
> >>
> >>
> >>
> >>
> >> JensBurkhardt wrote:
> >> >
> >> > hey everybody,
> >> >
> >> > I'm wondering if it's possible to combine wildcards and phrase query.
> >> >
> >> > For example "term1 term*"
> >> >
> >> > I know that the documentation says "Lucene supports single and
> multiple
> >> > character wildcard searches within single terms (not within phrase
> >> > queries)" but maybe someone has had the same problem and found a
> >> solution.
> >> >
> >> > Thanks for your help
> >> >
> >> > Jens Burkhardt
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15872169.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/combine-wildcard-and-phrase-query-tp15870647p15896083.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12861_9102017.1204920502950--

From java-user-return-33015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 20:23:12 2008
Return-Path: <java-user-return-33015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4000 invoked from network); 7 Mar 2008 20:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 20:23:12 -0000
Received: (qmail 98496 invoked by uid 500); 7 Mar 2008 20:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98458 invoked by uid 500); 7 Mar 2008 20:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98447 invoked by uid 99); 7 Mar 2008 20:23:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:23:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 20:22:27 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E179271C32A; Fri,  7 Mar 2008 12:22:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D781271C189
	for <java-user@lucene.apache.org>; Fri,  7 Mar 2008 12:22:37 -0800 (PST)
Date: Fri, 7 Mar 2008 12:22:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query search performance
In-Reply-To: <f09790220803060134g3d937999u83feceb28401fae8@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803071218580.13922@radix.cryptio.net>
References: <CC2671C08F06704ABFD37ED1EA09AA563FD401@birexchange.BIRPLAZA.local>
  <Pine.LNX.4.62.0803052039210.20795@radix.cryptio.net>
 <f09790220803060134g3d937999u83feceb28401fae8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > additional parens normally indicates that you are actually creating an
: > extra layer of BooleanQueries (ie: a BooleanQuery with only one clause for

: look here,
: parens will also be add is each term has a boost value larger than 1.0.

i think you are missreading that code.  the "needParens" variable adds 
parens arroudn the *entire* "this" BooleanQuery if "this" has a boost or a 
non 0 minShouldMatch value ... BooleanQuery.toString only adds parens 
arround individual clauses if those clauses are themselves boolean 
queries ... which is the point i was making.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 20:44:47 2008
Return-Path: <java-user-return-33016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10992 invoked from network); 7 Mar 2008 20:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 20:44:47 -0000
Received: (qmail 25153 invoked by uid 500); 7 Mar 2008 20:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25125 invoked by uid 500); 7 Mar 2008 20:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25114 invoked by uid 99); 7 Mar 2008 20:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:44:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 20:44:01 +0000
Received: by hu-out-0506.google.com with SMTP id 27so476258hub.15
        for <java-user@lucene.apache.org>; Fri, 07 Mar 2008 12:44:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=k6nUFKbm6tkO7KJNNIwaM5tkEpI29OxKcvPoFSwsMCE=;
        b=WdfXNxzmwcTx75snFQrKzf/5oUf61uCwMJhmwDrQr2WpgkiK+iEkQM8OR+tnTQukfb4YA/iDEaI2RbAEPbY1wTIXpjvEppvr5pDQAOJdRjSJGCwhL/uo9ZGGBEtCQaCzESnDQD0lj6/4Q3yRvLSjkT5VzoDhdjvsw/hUKElqPQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jX9pwvOc4Jx6lP1AjG3p2SjcO4vHGc07qVrgNnL+FPCnXTZ1U2ByJPxQw/Z2IpXW/DtxiFzZ6FAkNorYSKdpwjIzhoGMkPP82rWZXwhAoiSv5oNmsTdlr1ICayT15qq4WbBDZiw/scxEmR+MbGYwLtUajq0OgoZij3MGqYUASGw=
Received: by 10.82.113.6 with SMTP id l6mr4128885buc.20.1204922650437;
        Fri, 07 Mar 2008 12:44:10 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 7 Mar 2008 12:44:10 -0800 (PST)
Message-ID: <359a92830803071244u3ad650a2g95aa8093c3c5618f@mail.gmail.com>
Date: Fri, 7 Mar 2008 15:44:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Offset Questions
In-Reply-To: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12946_25756203.1204922650427"
References: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12946_25756203.1204922650427
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What is your analyzer doing? Let's assume you're trying
to index the title and that your entire text is

"this is a book and HERE IS THE TITLE."

I *think* your underlying analyzer should be returning
4 tokens with starts of 20 for HERE, 25 for IS,
28 for THE and 32 for TITTLE, with appropriate  ends.
Is that what's happening? And perhaps

If the value you're passing in to the analyzer is just the
title and not the entire text, what you report seems
perfectly reasonable to me....

But I haven't worked with this very much so take
this with the appropriate grain of salt...

Best
Erick


On Fri, Mar 7, 2008 at 1:38 PM, Steve Suppe <ssuppe@llnl.gov> wrote:

> Hi all,
>
> I'm trying to index documents so that a) I have all the documents indexed
> 'normally' (in that I can search for documents that match certain words,
> and b) parts of the document that I consider important, such as author and
> title are ALSO stored in their own indexed fields.
>
> I have (a) working fine, and (b) is almost working - however, I'm trying
> to
> force the separate field to have the original offsets of where it existed
> in the text.  As in, if the title was at characters 76-200 in the original
> text, I'd like the field to have that as its information, so when I look
> at
> the field I can find the place in the document quickly.
>
> I don't seem to be able to do this - I have my own analyzer that finds the
> tokens and sets the start and end offsets accordingly.  However, when I
> create the new field and write it to the index, it seems like these
> offsets
> are ignored?  When I pull offsets out later, they start at 0 and move up
> from there.
>
> I am creating the field like:
>
> CASAnnotationAnalyzer psa = new CASAnnotationAnalyzer();
> analyzer.addAnalyzer(info.indexName, psa);
>
> TokenStream ts = psa.tokenStream(info.indexName,
>                                              new StringReader(info.value
> ));
> Field stemF = new Field(info.indexName, ts,
>
> Field.TermVector.WITH_POSITIONS_OFFSETS);
> d.add(stemF);
>
> (d is the document being indexed).
>
> I have tried various permutations of creating the field and token stream -
> does anyone have any insights, please?
>
> Thanks in advance,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12946_25756203.1204922650427--

From java-user-return-33017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 20:48:22 2008
Return-Path: <java-user-return-33017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12241 invoked from network); 7 Mar 2008 20:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 20:48:22 -0000
Received: (qmail 30725 invoked by uid 500); 7 Mar 2008 20:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30372 invoked by uid 500); 7 Mar 2008 20:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30359 invoked by uid 99); 7 Mar 2008 20:48:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 12:48:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.232 as permitted sender)
Received: from [72.14.214.232] (HELO hu-out-0506.google.com) (72.14.214.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 20:47:35 +0000
Received: by hu-out-0506.google.com with SMTP id 27so478919hub.15
        for <java-user@lucene.apache.org>; Fri, 07 Mar 2008 12:47:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=hWUqZ68WZNy95F4QChNr3Fzuk/H7uOah0JGTje2qs2g=;
        b=u5XBFWCBIO7AcSs1KKTs4daDApp23knaKbJ92IkYH4yBNnLSw6zw8zFz4gFeBJS5Cv98vg+Wx38ut2nPE/AtFWFjr+6vs5sTpCwqrmeuLEjeewPkjUw//vtkUcnYomnBLHEGTNeoauWnnD34esv+ShyssMmEek6mqGK5+D/vWUI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eiav6fV/HEn197Kf8C1yldgN1Q+VXI90G2cZUMZppnSbU2OFNaKxq8U4jt8cPo7SmSQWCjev5u0mfDQMaBB6MkEGrfgCK9h6VxzFkI12+SY/vtldSTXH1n6E18Wa9KH57Xzg/wVpg2oSexqi+CuNQTaocZ4iQn4NPr2i+yvn02w=
Received: by 10.82.108.9 with SMTP id g9mr4182304buc.4.1204922864260;
        Fri, 07 Mar 2008 12:47:44 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 7 Mar 2008 12:47:44 -0800 (PST)
Message-ID: <359a92830803071247p56ea3c32l4b1cf4afdadac962@mail.gmail.com>
Date: Fri, 7 Mar 2008 15:47:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Offset Questions (Follow-Up)
In-Reply-To: <6.2.1.2.2.20080307113723.1852e150@mail.llnl.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12960_8754118.1204922864254"
References: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
	 <6.2.1.2.2.20080307113723.1852e150@mail.llnl.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12960_8754118.1204922864254
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Our mails are crossing....

Not that I know of. But why don't you just index (or maybe just store)
a separate field containing your offset information? Something like
title_offset with, say, a comma-separated pair denoting char position
and length that you then read in at search time and parse.....

But your tokenizer controls *everything*. Why isn't the Token being
returned from your next() method being constructed with the
offsets you desire?

Erick

On Fri, Mar 7, 2008 at 2:39 PM, Steve Suppe <ssuppe@llnl.gov> wrote:

> OK, I think I understand what's going on - it looks like I am able to set
> the token for the full author name (Say, "Steve Suppe") with the correct
> offsets, but the analyzer takes it once step further and tokenizes 'Steve'
> and 'Suppe' which is giving me a lot more generated offsets and is
> confusing me.
>
> I like the tokenization, as it allows me to just search for Suppe and get
> results.  However, I don't want those "sub-offsets" returned.  Is there a
> way to distinguish the 'main' offsets for the whole field?
>
> Thanks again,
> Steve
>
> At 10:38 AM 3/7/2008, you wrote:
> >Hi all,
> >
> >I'm trying to index documents so that a) I have all the documents indexed
> >'normally' (in that I can search for documents that match certain words,
> >and b) parts of the document that I consider important, such as author
> and
> >title are ALSO stored in their own indexed fields.
> >
> >I have (a) working fine, and (b) is almost working - however, I'm trying
> >to force the separate field to have the original offsets of where it
> >existed in the text.  As in, if the title was at characters 76-200 in the
> >original text, I'd like the field to have that as its information, so
> when
> >I look at the field I can find the place in the document quickly.
> >
> >I don't seem to be able to do this - I have my own analyzer that finds
> the
> >tokens and sets the start and end offsets accordingly.  However, when I
> >create the new field and write it to the index, it seems like these
> >offsets are ignored?  When I pull offsets out later, they start at 0 and
> >move up from there.
> >
> >I am creating the field like:
> >
> >CASAnnotationAnalyzer psa = new CASAnnotationAnalyzer();
> >analyzer.addAnalyzer(info.indexName, psa);
> >
> >TokenStream ts = psa.tokenStream(info.indexName,
> >                                              new StringReader(info.value
> ));
> >Field stemF = new Field(info.indexName, ts,
> >
> Field.TermVector.WITH_POSITIONS_OFFSETS);
> >d.add(stemF);
> >
> >(d is the document being indexed).
> >
> >I have tried various permutations of creating the field and token stream
> -
> >does anyone have any insights, please?
> >
> >Thanks in advance,
> >Steve
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12960_8754118.1204922864254--

From java-user-return-33018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 21:52:18 2008
Return-Path: <java-user-return-33018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42434 invoked from network); 7 Mar 2008 21:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 21:52:17 -0000
Received: (qmail 20345 invoked by uid 500); 7 Mar 2008 21:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20308 invoked by uid 500); 7 Mar 2008 21:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20265 invoked by uid 99); 7 Mar 2008 21:52:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 13:52:03 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.115.41.82] (HELO nspiron-2.llnl.gov) (128.115.41.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 21:51:15 +0000
X-Attachments: None
X-IronPort-AV: E=McAfee;i="5200,2160,5247"; a="10910107"
X-IronPort-AV: E=Sophos;i="4.25,464,1199692800"; 
   d="scan'208";a="10910107"
Received: from suppe2pd.llnl.gov ([134.9.250.132])
  by nspiron-2.llnl.gov with ESMTP; 07 Mar 2008 13:51:34 -0800
Message-Id: <6.2.1.2.2.20080307135014.188c6648@mail.llnl.gov>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Fri, 07 Mar 2008 13:51:35 -0800
To: java-user@lucene.apache.org
From: Steve Suppe <ssuppe@llnl.gov>
Subject: Re: Offset Questions
In-Reply-To: <359a92830803071244u3ad650a2g95aa8093c3c5618f@mail.gmail.co
 m>
References: <6.2.1.2.2.20080307102836.036d97e8@mail.llnl.gov>
 <359a92830803071244u3ad650a2g95aa8093c3c5618f@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Thanks for the response.  I think I'm starting to get the hang of 
this.  That's a really good insight, but I'm wondering how to handle that 
if a document can have multiple instances of the same field.  So, instead 
of Author, say, City names that are mentioned.  But, as you said, I control 
everything, so I may be able to work this out...

Still thinking :)  Thanks so much so far!

Steve

At 12:44 PM 3/7/2008, you wrote:
>What is your analyzer doing? Let's assume you're trying
>to index the title and that your entire text is
>
>"this is a book and HERE IS THE TITLE."
>
>I *think* your underlying analyzer should be returning
>4 tokens with starts of 20 for HERE, 25 for IS,
>28 for THE and 32 for TITTLE, with appropriate  ends.
>Is that what's happening? And perhaps
>
>If the value you're passing in to the analyzer is just the
>title and not the entire text, what you report seems
>perfectly reasonable to me....
>
>But I haven't worked with this very much so take
>this with the appropriate grain of salt...
>
>Best
>Erick
>
>
>On Fri, Mar 7, 2008 at 1:38 PM, Steve Suppe <ssuppe@llnl.gov> wrote:
>
> > Hi all,
> >
> > I'm trying to index documents so that a) I have all the documents indexed
> > 'normally' (in that I can search for documents that match certain words,
> > and b) parts of the document that I consider important, such as author and
> > title are ALSO stored in their own indexed fields.
> >
> > I have (a) working fine, and (b) is almost working - however, I'm trying
> > to
> > force the separate field to have the original offsets of where it existed
> > in the text.  As in, if the title was at characters 76-200 in the original
> > text, I'd like the field to have that as its information, so when I look
> > at
> > the field I can find the place in the document quickly.
> >
> > I don't seem to be able to do this - I have my own analyzer that finds the
> > tokens and sets the start and end offsets accordingly.  However, when I
> > create the new field and write it to the index, it seems like these
> > offsets
> > are ignored?  When I pull offsets out later, they start at 0 and move up
> > from there.
> >
> > I am creating the field like:
> >
> > CASAnnotationAnalyzer psa = new CASAnnotationAnalyzer();
> > analyzer.addAnalyzer(info.indexName, psa);
> >
> > TokenStream ts = psa.tokenStream(info.indexName,
> >                                              new StringReader(info.value
> > ));
> > Field stemF = new Field(info.indexName, ts,
> >
> > Field.TermVector.WITH_POSITIONS_OFFSETS);
> > d.add(stemF);
> >
> > (d is the document being indexed).
> >
> > I have tried various permutations of creating the field and token stream -
> > does anyone have any insights, please?
> >
> > Thanks in advance,
> > Steve
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 07 23:26:54 2008
Return-Path: <java-user-return-33019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77493 invoked from network); 7 Mar 2008 23:26:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Mar 2008 23:26:54 -0000
Received: (qmail 58888 invoked by uid 500); 7 Mar 2008 23:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58477 invoked by uid 500); 7 Mar 2008 23:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58466 invoked by uid 99); 7 Mar 2008 23:26:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 15:26:44 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.216.127.90] (HELO rs35.luxsci.com) (66.216.127.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 23:25:56 +0000
Received: from [192.168.1.98] (dsl253-005-254.nyc1.dsl.speakeasy.net [66.253.5.254])
	(authenticated bits=0)
	by rs35.luxsci.com (8.13.1/8.13.7) with ESMTP id m27NQEaE025245
	for <java-user@lucene.apache.org>; Fri, 7 Mar 2008 17:26:14 -0600
Message-ID: <47D1CF29.8010201@alias-i.com>
Date: Fri, 07 Mar 2008 18:26:33 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene for Sentiment Analysis
References: <661804.3785.qm@web50711.mail.re2.yahoo.com>
In-Reply-To: <661804.3785.qm@web50711.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Aaron Schon wrote:
> ...I was wondering if taking a bag of words approach might work. For example chunking the sentences to be analyzed and running a Lucene query against an index storing sentiment polarity. Has anyone had success with this approach? I do not need a super accurate system, something that is "reasonably" accurate.

Even the best sentiment analyzers aren't that good.

And they need to be trained per domain (e.g. "easy to
use" is good for electronics and "leaky" is bad, but
your mileage varies in other domains, where "fuel efficient"
or "entertaining" might be good).

You'll take a hit in performance using a bag of
words (or stemmed, stoplisted, case-normalized terms)
because you lose subword generalizations if the stemmer's
not great or if word segmentation varies, and you'll lose
cross-word discriminitive power going a word at a time.

Using TF/IDF to weight the terms can help.

> Also, could you suggest good publicly available training datasets? I am aware of the Cornell Movie Reviews dataset[1]

The Pang and Lee data from Cornell was collected automatically
from Rotten Tomatoes and IMDB.  Gathering more data like that
from Amazon, C-net, etc. should be easy.  That's what everyone's
doing for evaluations.

But these are all at the review level, not at the sentence
level.  We've actually had customers annotating at the sentence
level, which can produce much tighter training sets.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 03:53:49 2008
Return-Path: <java-user-return-33020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3833 invoked from network); 8 Mar 2008 03:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 03:53:49 -0000
Received: (qmail 98284 invoked by uid 500); 8 Mar 2008 03:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98240 invoked by uid 500); 8 Mar 2008 03:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98229 invoked by uid 99); 8 Mar 2008 03:53:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Mar 2008 19:53:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 03:53:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8759571C1B8; Fri,  7 Mar 2008 19:53:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8420A71C18A
	for <java-user@lucene.apache.org>; Fri,  7 Mar 2008 19:53:13 -0800 (PST)
Date: Fri, 7 Mar 2008 19:53:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: combine wildcard and phrase query
In-Reply-To: <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803071946520.26889@radix.cryptio.net>
References: <15870647.post@talk.nabble.com> <15872169.post@talk.nabble.com>
 <359a92830803060538p740609b2s297d402437382744@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: No, as far as I know you can't combine wildcards in phrases. This would

The QueryParser doesn't support it, and there is no native query type 
for it, but if you are willing to do the query expansion yourself, you can 
build a MultiPhraseQuery (where you generate the terms using a 
WildcardTermEnum)  

alternately, you could use something like SpanRegexQuery in combination 
with a SpanNearQuery.

...lots of things are possible with Lucene Queries that just aren't 
possible with the QueryParser.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 17:07:19 2008
Return-Path: <java-user-return-33021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31897 invoked from network); 8 Mar 2008 17:07:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 17:07:19 -0000
Received: (qmail 19014 invoked by uid 500); 8 Mar 2008 17:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18979 invoked by uid 500); 8 Mar 2008 17:07:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18968 invoked by uid 99); 8 Mar 2008 17:07:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 09:07:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.235 as permitted sender)
Received: from [72.14.214.235] (HELO hu-out-0506.google.com) (72.14.214.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 17:06:32 +0000
Received: by hu-out-0506.google.com with SMTP id 27so818951hub.15
        for <java-user@lucene.apache.org>; Sat, 08 Mar 2008 09:06:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=7+GGYPbq7yq+qJCfI0AYmlzkEJNtqC1yGKsUk2fydus=;
        b=JD1+IC3hke7iZ1XCPU4bFbpx/1WGKcBi/imSq6DqAiSPdeuQXYCG8PhDacYkD8gnT52PvZ89mWboRc592TkE6Adacuyw9lb5PEgOS/peifmEIhDdhU8X4yn9r2Xmx8fcZkXgCPpUvPc9bipIK29wEY5cCDAzbQ9eMmI0bAV1ODA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WcbfGxHrU3YxmLCMxqIxAEyDCLPk4Rp8sCoPtrqq1qXzLXyZPyq4dYhQxJzFqvhAngBV9ictZ8IZs5HeMgjVF5HyqcA7gqBfzKA6yvAWgifpvDj23shxeWhgkmUDdhBo7cVuk9sJhIj7NrJPxg6HBlqi3LiJsJFDr8YiKF7f/jY=
Received: by 10.86.68.20 with SMTP id q20mr3381950fga.59.1204995985237;
        Sat, 08 Mar 2008 09:06:25 -0800 (PST)
Received: by 10.86.73.2 with HTTP; Sat, 8 Mar 2008 09:06:25 -0800 (PST)
Message-ID: <8837fb770803080906u250e1229t6f9bd815557b7dff@mail.gmail.com>
Date: Sat, 8 Mar 2008 09:06:25 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: changing scoring formula
In-Reply-To: <15860538.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33245_867751.1204995985210"
References: <15860538.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33245_867751.1204995985210
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you can always modify the raw lucene score in the hitCollector.
-John

On Wed, Mar 5, 2008 at 1:16 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> is there any way to change the score of the documents.
> Actually i want to modify the scores of the documents dynamically,
> everytime
> for a given query the results will be sorted according to "lucene scoring
> formula + an equation".
> how can i do that...i saw that lucene scoring page but i am not getting
> exactly how to do that...
> please advice me
> --
> View this message in context:
> http://www.nabble.com/changing-scoring-formula-tp15860538p15860538.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33245_867751.1204995985210--

From java-user-return-33022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 18:02:29 2008
Return-Path: <java-user-return-33022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41567 invoked from network); 8 Mar 2008 18:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 18:02:29 -0000
Received: (qmail 52443 invoked by uid 500); 8 Mar 2008 18:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52409 invoked by uid 500); 8 Mar 2008 18:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52398 invoked by uid 99); 8 Mar 2008 18:02:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 10:02:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 18:01:43 +0000
Received: by qb-out-0506.google.com with SMTP id o21so932074qba.9
        for <java-user@lucene.apache.org>; Sat, 08 Mar 2008 10:01:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Iz+g0yhQlkkPGzDOKFlyQCGXhgPTUpS/QOtackolj6Q=;
        b=XN0+xXIBRtCEl6Kg3cIJhlmpUVBf46RTBk0T5dTOGamwM9TdwA1EMCEV4dBfE8ONLc5oZ+qdlhXvxp7GPoanQQfLrnadDpIsCr1qBzTR/ICENxiVnGsObsHyGQO96wAijwI2702/4tlUg8mS9nImQT5ydbI1gfkIqrowvXKzlGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=KVRNCpUhOio6qheImVqHL8uulDFIrUZo3Nt0E3TyH8jei/O5r3LHoeI9QFhMsCc2Hme3avNJI8txVpsHa6/MbHLUeX8gfCgfFID1XwVovQKyaeMSUigP4kkdtklL7EJ64TQmTYXxKNM5CeUtTxQ8+fn8g2kH0zh1UwVGsgrCEUA=
Received: by 10.65.242.7 with SMTP id u7mr4694092qbr.59.1204999309585;
        Sat, 08 Mar 2008 10:01:49 -0800 (PST)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e18sm5662939qba.27.2008.03.08.10.01.47
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 08 Mar 2008 10:01:48 -0800 (PST)
Message-ID: <47D2D371.8010400@gmail.com>
Date: Sat, 08 Mar 2008 12:57:05 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008030703)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2> <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com> <000c01c87fde$4be49d00$1564a8c0@RayBook2> <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Random text can often be pretty slow when done per word.

I think you will have to modify the MultiSearcher a bit. The 
MultiSearcher takes a global id space and converts to and from an 
individual Searcher id space. The MultiSearcher's id space is limited to 
an int as well, but I think if you change it to a float/double, you 
should be all set.

- Mark

Toke Eskildsen wrote:
> On Fri, 2008-03-07 at 00:03 +0100, Ray wrote:
>    
>> I am currently running a small random text indexer with 400 docs/second.
>> It will reach 2 billion in around 45 days.
>>      
>
> If you are just doing it to test large indexes (in terms of document
> count), then you need to look into your index-generation code. I tried
> making an ultra-simple index builder, where each document contains a
> unique id and one of nine fixed strings. The index-building speed on my
> desktop computer is 40.000 documents/second (tested with 100 million
> documents).
>
> I would suspect that your random text generator is where all the
> time-intensive processing occurs. Either that or you're flushing after
> each document addition (which lowers my execution speed to about 100
> documents/second).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 18:58:46 2008
Return-Path: <java-user-return-33023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60790 invoked from network); 8 Mar 2008 18:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 18:58:46 -0000
Received: (qmail 87857 invoked by uid 500); 8 Mar 2008 18:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87805 invoked by uid 500); 8 Mar 2008 18:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87764 invoked by uid 99); 8 Mar 2008 18:58:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 10:58:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.47] (HELO web26510.mail.ukl.yahoo.com) (217.146.176.47)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Mar 2008 18:57:48 +0000
Received: (qmail 22430 invoked by uid 60001); 8 Mar 2008 18:57:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=x/gXxa0yJ1aagVx3WDnmANAI3rHtf8lxRzup1fY0xCGwzKYPgllxPlpPmdZVW8EVBD3jdIaaUWpMWFmhGNTZkzWUvwyaLtUHBWCk6UIXIgDgwi5tefoW/Th9aeqKgnn9DQr0YAwKCEuB4ZKLKVgWXCVUx1KKB+eZQvx+lUjEnpQ=;
X-YMail-OSG: gwiW9YQVM1mz7WivfsX08ENT3dCvL.tTkADPKuPkJi2eamwixYv8VqEAJxYCO_gmEPflmZkUHM.4mfHXVx9b1s90o73zXGJdRw--
Received: from [82.232.236.170] by web26510.mail.ukl.yahoo.com via HTTP; Sat, 08 Mar 2008 19:57:56 CET
Date: Sat, 8 Mar 2008 19:57:56 +0100 (CET)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Subject: Date sorting problem   [ IndexSearcher | Hits | Sort | Float ]
To: java-user@lucene.apache.org
Cc: francois.vanhille@hotmail.fr
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1645585745-1205002676=:21874"
Content-Transfer-Encoding: 8bit
Message-ID: <300114.21874.qm@web26510.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1645585745-1205002676=:21874
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear all,

I'm trying to sort query results using a date criteria. My dates are stored as "long" in the database (I cannot change this) and indexed as untokenized. The sorted resuIts I get aren't consistent. This problem does not occur if the number are "smaller".

Am I doing something wrong ? Is it possible to sort using "long" type ? What else should I do ?

Regards & thanks in advance,
Tom


public void testDateSort(){
        System.out.println("[testDateSort][begin]");        
        
        IndexWriter mAdIndexWriter=null;
        Directory adIndexDir=null;
        
         Document doc0 = new Document();
         doc0.add(new Field("ID","doc0", Field.Store.YES,Field.Index.TOKENIZED));        
         doc0.add(new Field("DATE","1205000950000", Field.Store.YES,Field.Index.UN_TOKENIZED));
        
         Document doc1= new Document();
         doc1.add(new Field("ID","doc1", Field.Store.YES,Field.Index.TOKENIZED));        
         doc1.add(new Field("DATE","1205000950001", Field.Store.YES,Field.Index.UN_TOKENIZED));
         
         Document doc2 = new Document();
         doc2.add(new Field("ID","doc2", Field.Store.YES,Field.Index.TOKENIZED));        
         doc2.add(new Field("DATE","1205000950002", Field.Store.YES,Field.Index.UN_TOKENIZED));
         
        Analyzer analyser = new SimpleAnalyzer(); 
        try{
            adIndexDir=FSDirectory.getDirectory("C:\\YourFavoriteDirectory");
            mAdIndexWriter = new IndexWriter(adIndexDir, analyser, true);        

            mAdIndexWriter. addDocument(doc0); 
            mAdIndexWriter. addDocument(doc2); 
            mAdIndexWriter. addDocument(doc1); 
            
            mAdIndexWriter.optimize();
            mAdIndexWriter.close();
            
            IndexReader mAdIndexReader= IndexReader.open(adIndexDir); 
            IndexSearcher searcher = new IndexSearcher(mAdIndexReader);
            
            Query  query=new FuzzyQuery(new Term("ID","doc"),Float.parseFloat("0.8"));
            Sort timeSorter=new Sort(new SortField("DATE",SortField.FLOAT, false));            
            Hits allTheHits=searcher.search(query,timeSorter);
            
            for(int i = 0; i <allTheHits.length(); i++){ 
                System.out.println("Date n" + i + " = " +allTheHits.doc(i).get("DATE"));
            }
            
            mAdIndexReader.close();
        }catch(Exception ex){
            ex.printStackTrace();
            fail();
        }
        System.out.println("[testDateSort][end]");        
    }


       
---------------------------------
 Envoy avec Yahoo! Mail.
Une boite mail plus intelligente. 
--0-1645585745-1205002676=:21874--

From java-user-return-33024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 19:06:19 2008
Return-Path: <java-user-return-33024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63370 invoked from network); 8 Mar 2008 19:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 19:06:19 -0000
Received: (qmail 95486 invoked by uid 500); 8 Mar 2008 19:06:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95446 invoked by uid 500); 8 Mar 2008 19:06:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95435 invoked by uid 99); 8 Mar 2008 19:06:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 11:06:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Mar 2008 19:05:22 +0000
Received: (qmail invoked by alias); 08 Mar 2008 19:05:42 -0000
Received: from e178093246.adsl.alicedsl.de (EHLO msrvcn04) [85.178.93.246]
  by mail.gmx.net (mp031) with SMTP; 08 Mar 2008 20:05:42 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+jGhRcnW2jZqREKDNcD6VVzvfa0XWp8wIHhgptUd
	tUvYQJsaugfUAN
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2> <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com> <000c01c87fde$4be49d00$1564a8c0@RayBook2> <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk> <47D2D371.8010400@gmail.com>
Subject: RE: MultiSearcher to overcome the Integer.MAX_VALUE limit
Date: Sat, 8 Mar 2008 20:06:02 +0100
Message-ID: <AED6ADB572994F2BAE18ED405136F4CF@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AciBRpIqn+AeX+NFS5G/00vPa1WDqAACLmNw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <47D2D371.8010400@gmail.com>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Does this mean that I cannot search indexes with more than 2 billion =
docs at
all with a single IndexSearcher?=20

> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]=20
> Sent: Samstag, 8. M=E4rz 2008 18:57
> To: java-user@lucene.apache.org
> Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
>=20
> Random text can often be pretty slow when done per word.
>=20
> I think you will have to modify the MultiSearcher a bit. The=20
> MultiSearcher takes a global id space and converts to and from an=20
> individual Searcher id space. The MultiSearcher's id space is=20
> limited to=20
> an int as well, but I think if you change it to a float/double, you=20
> should be all set.
>=20
> - Mark
>=20
> Toke Eskildsen wrote:
> > On Fri, 2008-03-07 at 00:03 +0100, Ray wrote:
> >   =20
> >> I am currently running a small random text indexer with=20
> 400 docs/second.
> >> It will reach 2 billion in around 45 days.
> >>     =20
> >
> > If you are just doing it to test large indexes (in terms of document
> > count), then you need to look into your index-generation=20
> code. I tried
> > making an ultra-simple index builder, where each document contains a
> > unique id and one of nine fixed strings. The index-building=20
> speed on my
> > desktop computer is 40.000 documents/second (tested with 100 million
> > documents).
> >
> > I would suspect that your random text generator is where all the
> > time-intensive processing occurs. Either that or you're=20
> flushing after
> > each document addition (which lowers my execution speed to about 100
> > documents/second).
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >   =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 20:28:19 2008
Return-Path: <java-user-return-33025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88215 invoked from network); 8 Mar 2008 20:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 20:28:19 -0000
Received: (qmail 68384 invoked by uid 500); 8 Mar 2008 20:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68354 invoked by uid 500); 8 Mar 2008 20:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68343 invoked by uid 99); 8 Mar 2008 20:28:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 12:28:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 20:27:33 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1145881wff.20
        for <java-user@lucene.apache.org>; Sat, 08 Mar 2008 12:27:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=EVtfNZbrm/b7dohXqZIbJWcVfokh0R6ObRJtiMvy3oo=;
        b=qr/L7F+t/xAoQReWk1QDlXxrD43wxBd0xKMtjsM/HGGsUIDZ7ghEZzQvQcHT8sp9sCZKjVqHfjAvcP2Xdrf8NHqPYHRENYkOeCuLoBihG+b27ZKV5Poo/T/pxQUfW+hAXjjE+AhDdwLheDPqahsSpgXWdUb+x2PBzLfmXZpjSMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=j/93dgaG+b2tRO4Td5Px+xoU2V19+aPN4JSKiEqxJGteAPpLR8rZfNE6GvbbPpoSDmoV+/kLEj7nkQIrXtCGmaJEeuKc1IyAVN8ORsORDTcgyRIHPr+oOm5trAjl9VfdgQL7MOScxSsr5QzotaNnR6e4vJuTpdclAUSqZGnqu2Q=
Received: by 10.142.217.17 with SMTP id p17mr1305112wfg.99.1205008063582;
        Sat, 08 Mar 2008 12:27:43 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Sat, 8 Mar 2008 12:27:43 -0800 (PST)
Message-ID: <c68e39170803081227t8204426se66ee18b09e5f7b5@mail.gmail.com>
Date: Sat, 8 Mar 2008 15:27:43 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
In-Reply-To: <AED6ADB572994F2BAE18ED405136F4CF@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2>
	 <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com>
	 <000c01c87fde$4be49d00$1564a8c0@RayBook2>
	 <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk>
	 <47D2D371.8010400@gmail.com>
	 <AED6ADB572994F2BAE18ED405136F4CF@msrvcn04>
X-Google-Sender-Auth: 6883a7cb9516af3b
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Mar 8, 2008 at 2:06 PM,  <spring@gmx.eu> wrote:
> Does this mean that I cannot search indexes with more than 2 billion docs at
>  all with a single IndexSearcher?

Right...  but trust me, you really wouldn't want to.  You need
distributed search at that level anyway.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 08 20:33:13 2008
Return-Path: <java-user-return-33026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88982 invoked from network); 8 Mar 2008 20:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Mar 2008 20:33:13 -0000
Received: (qmail 72435 invoked by uid 500); 8 Mar 2008 20:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72405 invoked by uid 500); 8 Mar 2008 20:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72393 invoked by uid 99); 8 Mar 2008 20:33:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 12:33:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Mar 2008 20:32:16 +0000
Received: (qmail invoked by alias); 08 Mar 2008 20:32:36 -0000
Received: from e178093246.adsl.alicedsl.de (EHLO msrvcn04) [85.178.93.246]
  by mail.gmx.net (mp015) with SMTP; 08 Mar 2008 21:32:36 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+MKzMrE9yMZ7D+BjRenzF/P2XFkQwyjTA3eWnTNd
	y0pvF9DEZO5JGW
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <001101c87f9d$fe39e820$1564a8c0@RayBook2> <359a92830803061340x3cb932echa91bab4b3b6c4e7d@mail.gmail.com> <000c01c87fde$4be49d00$1564a8c0@RayBook2> <1204892221.9126.162.camel@PC990.sb.statsbiblioteket.dk> <47D2D371.8010400@gmail.com> <AED6ADB572994F2BAE18ED405136F4CF@msrvcn04> <c68e39170803081227t8204426se66ee18b09e5f7b5@mail.gmail.com>
Subject: RE: MultiSearcher to overcome the Integer.MAX_VALUE limit
Date: Sat, 8 Mar 2008 21:32:56 +0100
Message-ID: <34C7DC358802468A8F2875A7EF54199B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AciBWvSN6Sb72y/LQUijhXoV0jSIRgAAGE9w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <c68e39170803081227t8204426se66ee18b09e5f7b5@mail.gmail.com>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Right...  but trust me, you really wouldn't want to.  You need
> distributed search at that level anyway.

Hm, 2 billion small docs are not so much.
Why do I need distributed search and what exactly do you means with
distributed search? Multiple IndexSearchers? Multiple processes? Multiple
machines?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 09 01:01:02 2008
Return-Path: <java-user-return-33027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57537 invoked from network); 9 Mar 2008 01:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Mar 2008 01:01:02 -0000
Received: (qmail 23860 invoked by uid 500); 9 Mar 2008 01:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23833 invoked by uid 500); 9 Mar 2008 01:00:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23822 invoked by uid 99); 9 Mar 2008 01:00:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Mar 2008 17:00:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 01:00:14 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1128694fga.27
        for <java-user@lucene.apache.org>; Sat, 08 Mar 2008 17:00:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FgJdF7M6AbbVY82J+tyo3aECzPRqEdF/XWHnbX4As+Q=;
        b=HDxDuVBFlYcH8V4gl52CwVYG9SwTxY9QZc+4XPd5wXr5Wye5Q1WfgSEfsZfvvi+/OlgJAozmmHd+Xwbli9r5m6x7NwoQuOng1CHC/Yx+s/75prUtP5tagjIRUQa/xMxGnrS1DnKVGZA+xnYUcBgpD79KfYQTnBjH5pwu+qsR9/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ubsGZOzs1NboFB0uuJoMNz57HVHix7x5otWDd09A17HuoysvzWOBRk2FzRJJSCdaIHmXl17OcUMNFNqTuWPx8FwYsvGG4XYigeoM0gpQt3ppVumVbw4qn5GnWDNwqe8CVy/E3p0Xo64SHWxM9MfkAteEwb7n8/NeRM+FoI5eW4M=
Received: by 10.82.127.14 with SMTP id z14mr8075036buc.3.1205024424007;
        Sat, 08 Mar 2008 17:00:24 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 8 Mar 2008 17:00:23 -0800 (PST)
Message-ID: <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com>
Date: Sat, 8 Mar 2008 20:00:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Date sorting problem [ IndexSearcher | Hits | Sort | Float ]
In-Reply-To: <300114.21874.qm@web26510.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15674_18403655.1205024423982"
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15674_18403655.1205024423982
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm pretty sure your problem is that you're sorting as a Float. The three
values you use all are evaluated (according to the Sort doc) by
Float.valueOf. which is 1.20500099E12 for all three values you use.

Why are you using Float as your sortField? If your DATE fields are
normalized, string sorting would work just fine.......

Best
Erick

P.S. Sorry if this comes through multiple times, but my connection is being
wonky

On Sat, Mar 8, 2008 at 1:57 PM, legrand thomas <thomaslegrand14@yahoo.fr>
wrote:

> Dear all,
>
> I'm trying to sort query results using a date criteria. My dates are
> stored as "long" in the database (I cannot change this) and indexed as
> untokenized. The sorted resuIts I get aren't consistent. This problem doe=
s
> not occur if the number are "smaller".
>
> Am I doing something wrong ? Is it possible to sort using "long" type ?
> What else should I do ?
>
> Regards & thanks in advance,
> Tom
>
>
> public void testDateSort(){
>        System.out.println("[testDateSort][begin]");
>
>        IndexWriter mAdIndexWriter=3Dnull;
>        Directory adIndexDir=3Dnull;
>
>         Document doc0 =3D new Document();
>         doc0.add(new Field("ID","doc0", Field.Store.YES,
> Field.Index.TOKENIZED));
>         doc0.add(new Field("DATE","1205000950000", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
>         Document doc1=3D new Document();
>         doc1.add(new Field("ID","doc1", Field.Store.YES,
> Field.Index.TOKENIZED));
>         doc1.add(new Field("DATE","1205000950001", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
>         Document doc2 =3D new Document();
>         doc2.add(new Field("ID","doc2", Field.Store.YES,
> Field.Index.TOKENIZED));
>         doc2.add(new Field("DATE","1205000950002", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
>        Analyzer analyser =3D new SimpleAnalyzer();
>        try{
>            adIndexDir=3DFSDirectory.getDirectory
> ("C:\\YourFavoriteDirectory");
>            mAdIndexWriter =3D new IndexWriter(adIndexDir, analyser, true)=
;
>
>            mAdIndexWriter. addDocument(doc0);
>            mAdIndexWriter. addDocument(doc2);
>            mAdIndexWriter. addDocument(doc1);
>
>            mAdIndexWriter.optimize();
>            mAdIndexWriter.close();
>
>            IndexReader mAdIndexReader=3D IndexReader.open(adIndexDir);
>            IndexSearcher searcher =3D new IndexSearcher(mAdIndexReader);
>
>            Query  query=3Dnew FuzzyQuery(new Term("ID","doc"),
> Float.parseFloat("0.8"));
>            Sort timeSorter=3Dnew Sort(new SortField("DATE",SortField.FLOA=
T,
> false));
>            Hits allTheHits=3Dsearcher.search(query,timeSorter);
>
>            for(int i =3D 0; i <allTheHits.length(); i++){
>                System.out.println("Date n=B0" + i + " =3D "
> +allTheHits.doc(i).get("DATE"));
>            }
>
>            mAdIndexReader.close();
>        }catch(Exception ex){
>            ex.printStackTrace();
>            fail();
>        }
>        System.out.println("[testDateSort][end]");
>    }
>
>
>
> ---------------------------------
>  Envoy=E9 avec Yahoo! Mail.
> Une boite mail plus intelligente.
>

------=_Part_15674_18403655.1205024423982--

From java-user-return-33028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 09 16:40:37 2008
Return-Path: <java-user-return-33028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85122 invoked from network); 9 Mar 2008 16:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Mar 2008 16:40:37 -0000
Received: (qmail 1487 invoked by uid 500); 9 Mar 2008 16:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1452 invoked by uid 500); 9 Mar 2008 16:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1441 invoked by uid 99); 9 Mar 2008 16:40:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 09:40:27 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 16:39:38 +0000
Received: from c-65-96-166-47.hsd1.ma.comcast.net ([65.96.166.47] helo=IBM3D2E684396F)
	by outgoing.csail.mit.edu with esmtpa (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JYOZ4-000865-E7
	for java-user@lucene.apache.org; Sun, 09 Mar 2008 12:39:58 -0400
Message-ID: <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F>
From: "Ghinwa Choueiter" <ghinwa@csail.mit.edu>
To: <java-user@lucene.apache.org>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com> <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com>
Subject: Scoring a query with OR's
Date: Sun, 9 Mar 2008 12:39:57 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I had a look at the scoring equation and read the scoring online document:
http://lucene.apache.org/java/docs/scoring.html#Scoring

It is clear to me how the scoring equation would work for a query that 
contains AND: 
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.html

but what exactly happens when there are OR's, for eg.  (life OR place OR 
time)

The scoring equation can get a score for life, place, time separately, but 
what does it do with them then? Does it also add them.

Many thanks,
-Ghinwa 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 09 17:23:34 2008
Return-Path: <java-user-return-33029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98146 invoked from network); 9 Mar 2008 17:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Mar 2008 17:23:33 -0000
Received: (qmail 41100 invoked by uid 500); 9 Mar 2008 17:23:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40605 invoked by uid 500); 9 Mar 2008 17:23:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40594 invoked by uid 99); 9 Mar 2008 17:23:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 10:23:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 17:22:36 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C5D9330EFC17; Sun,  9 Mar 2008 11:22:55 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-188-69.dyn.embarqhsd.net [69.68.188.69])
	by ehatchersolutions.com (Postfix) with ESMTP id 812D430EFC16
	for <java-user@lucene.apache.org>; Sun,  9 Mar 2008 11:22:51 -0600 (MDT)
In-Reply-To: <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com> <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com> <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Scoring a query with OR's
Date: Sun, 9 Mar 2008 13:22:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Mar 9, 2008, at 12:39 PM, Ghinwa Choueiter wrote:
> but what exactly happens when there are OR's, for eg.  (life OR  
> place OR time)
>
> The scoring equation can get a score for life, place, time  
> separately, but what does it do with them then? Does it also add them.

The coord factor kicks in then:

<http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
apache/lucene/search/DefaultSimilarity.html#coord(int,%20int)>

the formula listed here should help too:

<http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
apache/lucene/search/Similarity.html>

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 09 17:39:04 2008
Return-Path: <java-user-return-33030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3387 invoked from network); 9 Mar 2008 17:39:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Mar 2008 17:39:04 -0000
Received: (qmail 59207 invoked by uid 500); 9 Mar 2008 17:38:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59172 invoked by uid 500); 9 Mar 2008 17:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59161 invoked by uid 99); 9 Mar 2008 17:38:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 10:38:56 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 17:38:08 +0000
Received: from c-65-96-166-47.hsd1.ma.comcast.net ([65.96.166.47] helo=IBM3D2E684396F)
	by outgoing.csail.mit.edu with esmtpa (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JYPTg-0000cu-PE
	for java-user@lucene.apache.org; Sun, 09 Mar 2008 13:38:28 -0400
Message-ID: <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F>
From: "Ghinwa Choueiter" <ghinwa@csail.mit.edu>
To: <java-user@lucene.apache.org>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com> <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com> <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F> <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com>
Subject: Re: Scoring a query with OR's
Date: Sun, 9 Mar 2008 13:38:28 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

but shouldn't the coord factor kick in with AND instead of OR? I understand 
why you would want to use coord in the case of AND, where you reward more 
the documents that contain most of the terms in the query. However in the 
case of OR, it should not matter if all the OR  operands are in the 
document?

-Ghinwa

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, March 09, 2008 1:22 PM
Subject: Re: Scoring a query with OR's


>
> On Mar 9, 2008, at 12:39 PM, Ghinwa Choueiter wrote:
>> but what exactly happens when there are OR's, for eg.  (life OR  place OR 
>> time)
>>
>> The scoring equation can get a score for life, place, time  separately, 
>> but what does it do with them then? Does it also add them.
>
> The coord factor kicks in then:
>
> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
> apache/lucene/search/DefaultSimilarity.html#coord(int,%20int)>
>
> the formula listed here should help too:
>
> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
> apache/lucene/search/Similarity.html>
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 09 18:44:52 2008
Return-Path: <java-user-return-33031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20184 invoked from network); 9 Mar 2008 18:44:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Mar 2008 18:44:52 -0000
Received: (qmail 9426 invoked by uid 500); 9 Mar 2008 18:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9390 invoked by uid 500); 9 Mar 2008 18:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9379 invoked by uid 99); 9 Mar 2008 18:44:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 11:44:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.224 as permitted sender)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 18:44:04 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1359490qba.9
        for <java-user@lucene.apache.org>; Sun, 09 Mar 2008 11:44:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=47IZw42jKQ3BGmur5Mt5vol7afbo0TbvrJL2F/bHCmY=;
        b=V6goSbYXX/0mjyI+Z5uaZQPUAMrr4uosq7lYUc+zrQqWLwl1eSOYeUzd7nr1L6sTgu8wuVXfN8fb1+in/BRAkAxtC3F2D0JY79/vCYc44FQ8G5sFTawU5B85GemcB3LQQHydBkj0vCrX/+AT0L7C8Gf05XSQnEoXxUEhxR52/RA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=B8fGAwA6a7oJ5r/ZrL1DdUceSAlgV2WMfkP9wirsUxYlOH1jLnLWpudMPJ8mp6LneHFDB3DZFmVw59YBL3Nw+Xi2khNjGSMPtzTsXfhlpQxEEWCn3pmCENP6qT1SrXGOyE66DWIACVFzun11clZc1T39nikfeCYny2xo1Jesf7U=
Received: by 10.65.213.4 with SMTP id p4mr7044893qbq.83.1205088253921;
        Sun, 09 Mar 2008 11:44:13 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id f14sm7033766qba.25.2008.03.09.11.44.12
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 09 Mar 2008 11:44:13 -0700 (PDT)
Message-ID: <47D42EE3.9040808@gmail.com>
Date: Sun, 09 Mar 2008 14:39:31 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008030804)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring a query with OR's
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com> <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com> <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F> <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com> <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F>
In-Reply-To: <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have been trying to understand all of this better myself, so while I 
am no expert, here is my take:

Lucene is really a combined Vector Space / Boolean Model search engine.

At its core, Lucene is essentially a Vector Space Model search engine: 
scoring is done by comparing a query term vector to each of the document 
term vectors. However, on top of this, Lucene allows a Boolean Model by 
constraining results using a BooleanQuery.

So when Lucene finds the score for "mark OR mandy", the idea is the same 
as for "mark AND mandy". The difference is that the BooleanQuery will 
treat the Must and Should clause differently: if a term is labeled Must 
but is not in the document, the document won't match. If a Should term 
is not in the document, the BooleanQuery excludes no extra documents on 
that account, but the term may contribute 0 towards the similarity 
score. The BooleanQuery kind of clamps down on top of the Vector Space 
TermVector similarity scoring, allowing for a hybrid system.

The coord factor essentially juices the term vector similarity score 
based on how many query terms are in the document. Term overlap is 
already taken into account during the term vector similarity part, but 
apparently users don't like how that ranks eg users intuitively think 
that sharing more terms between document and query is more important 
than sharing fewer very highly weighted terms. So basically, coord is 
just trying to reorder things a bit based on reported user expectations.

- Mark



Ghinwa Choueiter wrote:
> but shouldn't the coord factor kick in with AND instead of OR? I 
> understand why you would want to use coord in the case of AND, where 
> you reward more the documents that contain most of the terms in the 
> query. However in the case of OR, it should not matter if all the OR  
> operands are in the document?
>
> -Ghinwa
>
> ----- Original Message ----- From: "Erik Hatcher" 
> <erik@ehatchersolutions.com>
> To: <java-user@lucene.apache.org>
> Sent: Sunday, March 09, 2008 1:22 PM
> Subject: Re: Scoring a query with OR's
>
>
>>
>> On Mar 9, 2008, at 12:39 PM, Ghinwa Choueiter wrote:
>>> but what exactly happens when there are OR's, for eg.  (life OR  
>>> place OR time)
>>>
>>> The scoring equation can get a score for life, place, time  
>>> separately, but what does it do with them then? Does it also add them.
>>
>> The coord factor kicks in then:
>>
>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
>> apache/lucene/search/DefaultSimilarity.html#coord(int,%20int)>
>>
>> the formula listed here should help too:
>>
>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
>> apache/lucene/search/Similarity.html>
>>
>> Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 01:07:56 2008
Return-Path: <java-user-return-33032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26740 invoked from network); 10 Mar 2008 01:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 01:07:54 -0000
Received: (qmail 46035 invoked by uid 500); 10 Mar 2008 01:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45998 invoked by uid 500); 10 Mar 2008 01:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45987 invoked by uid 99); 10 Mar 2008 01:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Mar 2008 18:07:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 01:06:56 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C75C530EFC17; Sun,  9 Mar 2008 19:07:15 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-188-69.dyn.embarqhsd.net [69.68.188.69])
	by ehatchersolutions.com (Postfix) with ESMTP id A042530EFC16
	for <java-user@lucene.apache.org>; Sun,  9 Mar 2008 19:06:45 -0600 (MDT)
In-Reply-To: <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com> <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com> <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F> <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com> <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F>
Mime-Version: 1.0 (Apple Message framework v753)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1DC66242-FBA9-4561-8E17-47B6893AA2D6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Scoring a query with OR's
Date: Sun, 9 Mar 2008 21:06:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

With AND, _all_ clauses are required, not just most.   With OR, the  
idea is to reward documents that match more clauses.

	Erik


On Mar 9, 2008, at 1:38 PM, Ghinwa Choueiter wrote:
> but shouldn't the coord factor kick in with AND instead of OR? I  
> understand why you would want to use coord in the case of AND,  
> where you reward more the documents that contain most of the terms  
> in the query. However in the case of OR, it should not matter if  
> all the OR  operands are in the document?
>
> -Ghinwa
>
> ----- Original Message ----- From: "Erik Hatcher"  
> <erik@ehatchersolutions.com>
> To: <java-user@lucene.apache.org>
> Sent: Sunday, March 09, 2008 1:22 PM
> Subject: Re: Scoring a query with OR's
>
>
>>
>> On Mar 9, 2008, at 12:39 PM, Ghinwa Choueiter wrote:
>>> but what exactly happens when there are OR's, for eg.  (life OR   
>>> place OR time)
>>>
>>> The scoring equation can get a score for life, place, time   
>>> separately, but what does it do with them then? Does it also add  
>>> them.
>>
>> The coord factor kicks in then:
>>
>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc// 
>> org/ apache/lucene/search/DefaultSimilarity.html#coord(int,%20int)>
>>
>> the formula listed here should help too:
>>
>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc// 
>> org/ apache/lucene/search/Similarity.html>
>>
>> Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 13:09:40 2008
Return-Path: <java-user-return-33033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82887 invoked from network); 10 Mar 2008 13:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 13:09:40 -0000
Received: (qmail 20860 invoked by uid 500); 10 Mar 2008 13:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20835 invoked by uid 500); 10 Mar 2008 13:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20824 invoked by uid 99); 10 Mar 2008 13:09:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 06:09:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 13:08:53 +0000
Subject: RE: Boolean Query search performance
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 10 Mar 2008 09:09:01 -0400
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5644A763@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boolean Query search performance
Thread-Index: AciAkRKLpp52ZW+YTFq1pySqMx3hIgCHMo8g
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

AHA! That is consistent with what is happening now, and explains the
discrepancy.

The original post of parens around each term was because I was adding
them as separate boolean queries, but now with using just the clause the
parens is around the entire clause with the boost.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Friday, March 07, 2008 3:23 PM
To: java-user@lucene.apache.org
Subject: Re: Boolean Query search performance


: > additional parens normally indicates that you are actually creating
an
: > extra layer of BooleanQueries (ie: a BooleanQuery with only one
clause for

: look here,
: parens will also be add is each term has a boost value larger than
1.0.

i think you are missreading that code.  the "needParens" variable adds=20
parens arroudn the *entire* "this" BooleanQuery if "this" has a boost or
a=20
non 0 minShouldMatch value ... BooleanQuery.toString only adds parens=20
arround individual clauses if those clauses are themselves boolean=20
queries ... which is the point i was making.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 14:44:23 2008
Return-Path: <java-user-return-33034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24215 invoked from network); 10 Mar 2008 14:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 14:44:23 -0000
Received: (qmail 80012 invoked by uid 500); 10 Mar 2008 14:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79974 invoked by uid 500); 10 Mar 2008 14:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79963 invoked by uid 99); 10 Mar 2008 14:44:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 07:44:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 14:43:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JYjE7-0003Vp-3G
	for java-user@lucene.apache.org; Mon, 10 Mar 2008 07:43:43 -0700
Message-ID: <15950791.post@talk.nabble.com>
Date: Mon, 10 Mar 2008 07:43:43 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Good way of Indexing TextFiles
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
       I am going to create a Lucene Index Store of Size 300 GB per month.I
read Lucene Index Performance tips in wiki.can anyone suggest what are all
the steps need to be followed while dealing with big Indexes.My Index Store
gets updated every second.I used to search 15 days records approximately 150
GB records,in a time.Does anyone give me a clue,what have to set JVM for
both Index and Search to avoid Out of memory error and how can i create
Index store for large Indexes?    
-- 
View this message in context: http://www.nabble.com/Good-way-of-Indexing-TextFiles-tp15950791p15950791.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 15:28:05 2008
Return-Path: <java-user-return-33035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22088 invoked from network); 10 Mar 2008 15:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 15:28:05 -0000
Received: (qmail 71616 invoked by uid 500); 10 Mar 2008 15:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71275 invoked by uid 500); 10 Mar 2008 15:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71264 invoked by uid 99); 10 Mar 2008 15:27:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 08:27:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 15:27:19 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JXI00J7FTLSNU@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 10 Mar 2008 16:27:28 +0100 (MET)
Date: Mon, 10 Mar 2008 16:27:28 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: RE: Swapping between indexes
In-reply-to: <5BCE9257B92B4D23A322E503AC029058@msrvcn04>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1205162848.9126.283.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
 <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
 <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
 <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
 <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
 <068BD1F02ABA4E999506EF880CA98F70@msrvcn04>
 <1204899449.9126.219.camel@PC990.sb.statsbiblioteket.dk>
 <5BCE9257B92B4D23A322E503AC029058@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-03-07 at 15:38 +0100, spring@gmx.eu wrote:
> > With a commit after every add: (286 sec / 10,000 docs) 28.6 ms.
> > With a commit after every 100 add: (12 sec / 10,000 docs) 1.2 ms.
> > Only one commit: (8 sec / 10,000 docs) 0.8 ms.
> 
> Of couse. If you need so less time to create a document than a commit which
> may take, lets say 10 - 500 ms, will slow down indexing heavily.

I tried doing the same with 1 million documents and contrary to my
expectations, the amortized time for commits didn't increase for the
frequent commits. I thought that the merging of the segments were more
expensive. But then again - the resulting index is "only" 1.3GB.

With a commit after every add: (21818 sec / 1,000,000 docs) 21.818 ms.
With a commit after every 100 add: (1879 sec / 1,000,000 docs) 1.879 ms.
Only one commit: (1270 sec / 1,000,000 docs) 1.270 ms.


While I were at it, I tried running the test on SSDs and fast harddisks
on our dual-core test-server.

2 Sandisk solid state drives in RAID 0:
With a commit after every add: (1460 sec / 1,000,000 docs) 1.460 ms.
With a commit after every 100 add: (409 sec / 1,000,000 docs) 0.400 ms.
Only one commit: (321 sec / 1,000,000 docs) 0.317 ms.

2 MTRON solid state drives in RAID 0:
With a commit after every add: (1495 sec / 1,000,000 docs) 1.495 ms.
With a commit after every 100 add: (353 sec / 1,000,000 docs) 0.353 ms.
Only one commit: (296 sec / 1,000,000 docs) 0.296 ms.

2 10.000 RPM harddisks in RAID 0:
With a commit after every add: (1781 sec / 1,000,000 docs) 1.781 ms.
With a commit after every 100 add: (380 sec / 1,000,000 docs) 0.373 ms.
Only one commit: (335 sec / 1,000,000 docs) 0.323 ms.

2 15.000 RPM harddisks in RAID 1:
With a commit after every add: (1876 sec / 1,000,000 docs) 1.876 ms.
With a commit after every 100 add: (458 sec / 1,000,000 docs) 0.458 ms.
Only one commit: (361 sec / 1,000,000 docs)  ms.

Not enough data for real statistics, I know, but on the faster server
system, the penalty for frequent commits doesn't appear to be so bad.

> So it really depends on the use case and how long it takes to index a single
> document, inclusive retrieval of the document from ist source.

Absolutely.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 16:11:01 2008
Return-Path: <java-user-return-33036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43818 invoked from network); 10 Mar 2008 16:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 16:11:01 -0000
Received: (qmail 46805 invoked by uid 500); 10 Mar 2008 16:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46778 invoked by uid 500); 10 Mar 2008 16:10:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46759 invoked by uid 99); 10 Mar 2008 16:10:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 09:10:43 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=MIME_QP_LONG_LINE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.219.78.209] (HELO smtpin.livedns.co.il) (62.219.78.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 16:09:53 +0000
Received: from ([127.0.0.1]) with MailEnable ESMTP; Mon, 10 Mar 2008 18:18:41 +0200
Received: from ([80.250.149.60]) by mail.livedns.co.il with MailEnable WebMail; Mon, 10 Mar 2008 18:09:50 +0200
To: <java-user@lucene.apache.org>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
Subject: Best way to do Query inflation?
Date: Mon, 10 Mar 2008 18:09:50 +0200
Message-ID: <BC531C82EB9D42D5A9901FFEDAE375D9.MAI@mail.livedns.co.il>
MIME-Version: 1.0
X-Mailer: MailEnable WebMail.NET
X-MimeOLE: Produced By MailEnable WebMail.NET V3.12.0.0
X-Read: 0
Content-Type: multipart/mixed;
	boundary="--=_Part_3C87B728EDBF4971A1520BA183092DC2"
X-Priority: 3
X-MSMail-Priority: Medium
X-Virus-Checked: Checked by ClamAV on apache.org

----=_Part_3C87B728EDBF4971A1520BA183092DC2
Content-Type: text/plain; charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hi all,
 
I'm looking for the best way to inflate a query, so a query like: "synchronous AND colour" -- will become something like this:
 
"(synchronous OR asynchronous OR bsynchornous OR synchronos OR asynchronos OR bsynchornos) AND (colour OR acolour OR bcolour OR color OR acolor OR bcolor)".
 
I'm doing two-fold action - creating another instance of the word without a specific letter(s), and then adding initial letters to all the resulting set of words. The resulting list of words should be OR'ed and replace the original word from the original query (so "colour" becomes "(colour OR acolour OR bcolour OR color OR acolor OR bcolor)"). This is for making Hebrew queries return more precise results, don't try to find the logic in English :)
 
What I'm looking for is the proper way and place to make the actual query expanding process. Keep in mind I will want to be able to access the complete list of words later so I could use them to highligh results in the opened document. If I could access the terms object directly somehow and replace each item with and OR'd object that would be ideal I think.
 
BTW, I have already established that I will have to write my own query parser derived from QueryParserBase directly, and my own Lexer, since Hebrew has some unique stuff that sometimes confuse Lucene's default. The tweaks I'm about to make should work for both Hebrew AND English, so perhaps will become the standard way of doing things...
 
Thanks in advance for any help,
 
Itamar.



----=_Part_3C87B728EDBF4971A1520BA183092DC2
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
----=_Part_3C87B728EDBF4971A1520BA183092DC2--



From java-user-return-33037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 16:21:12 2008
Return-Path: <java-user-return-33037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47941 invoked from network); 10 Mar 2008 16:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 16:21:12 -0000
Received: (qmail 72761 invoked by uid 500); 10 Mar 2008 16:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72381 invoked by uid 500); 10 Mar 2008 16:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72370 invoked by uid 99); 10 Mar 2008 16:21:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 09:21:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 16:20:23 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 6BE05452CB
	for <java-user@lucene.apache.org>; Mon, 10 Mar 2008 17:20:31 +0100 (CET)
Message-ID: <47D55FCE.8030706@garambrogne.net>
Date: Mon, 10 Mar 2008 17:20:30 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best way to do Query inflation?
References: <BC531C82EB9D42D5A9901FFEDAE375D9.MAI@mail.livedns.co.il>
In-Reply-To: <BC531C82EB9D42D5A9901FFEDAE375D9.MAI@mail.livedns.co.il>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java/lexicon/src/java/org/apache/lucene/lexicon/QueryUtils.java

M.

Itamar Syn-Hershko a crit :
> Hi all,
>  
> I'm looking for the best way to inflate a query, so a query like: "synchronous AND colour" -- will become something like this:
>  
> "(synchronous OR asynchronous OR bsynchornous OR synchronos OR asynchronos OR bsynchornos) AND (colour OR acolour OR bcolour OR color OR acolor OR bcolor)".
>  
> I'm doing two-fold action - creating another instance of the word without a specific letter(s), and then adding initial letters to all the resulting set of words. The resulting list of words should be OR'ed and replace the original word from the original query (so "colour" becomes "(colour OR acolour OR bcolour OR color OR acolor OR bcolor)"). This is for making Hebrew queries return more precise results, don't try to find the logic in English :)
>  
> What I'm looking for is the proper way and place to make the actual query expanding process. Keep in mind I will want to be able to access the complete list of words later so I could use them to highligh results in the opened document. If I could access the terms object directly somehow and replace each item with and OR'd object that would be ideal I think.
>  
> BTW, I have already established that I will have to write my own query parser derived from QueryParserBase directly, and my own Lexer, since Hebrew has some unique stuff that sometimes confuse Lucene's default. The tweaks I'm about to make should work for both Hebrew AND English, so perhaps will become the standard way of doing things...
>  
> Thanks in advance for any help,
>  
> Itamar.
>
>
>   
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 18:29:28 2008
Return-Path: <java-user-return-33038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23926 invoked from network); 10 Mar 2008 18:29:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 18:29:28 -0000
Received: (qmail 10826 invoked by uid 500); 10 Mar 2008 18:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10791 invoked by uid 500); 10 Mar 2008 18:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10780 invoked by uid 99); 10 Mar 2008 18:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 11:29:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.161.72.109] (HELO MAILSCAN2.vignette.com) (12.161.72.109)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 18:28:42 +0000
X-AuditID: 0a141038-0000065c00000448-3c-47d57de41b2b 
Received: from omail1.vignette.com ([10.20.16.43]) by MAILSCAN2.vignette.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 10 Mar 2008 13:28:52 -0500
Received: from hqexhub2.vignette.com (hqexhub2.vignette.com [10.20.17.196])
	by omail1.vignette.com (8.14.1/8.14.1) with ESMTP id m2AISoeM020678
	for <java-user@lucene.apache.org>; Mon, 10 Mar 2008 13:28:50 -0500 (CDT)
Received: from HQEXMB1.vignette.com ([10.20.17.192]) by hqexhub2.vignette.com
 ([10.20.17.196]) with mapi; Mon, 10 Mar 2008 13:28:52 -0500
From: "Embry, Clay" <Clay.Embry@vignette.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Mon, 10 Mar 2008 13:28:50 -0500
Subject: phrase search with custom TokenFilter
Thread-Topic: phrase search with custom TokenFilter
Thread-Index: AciApu929B9jajs8QKa7ysAv2ILToQCNVqzg
Message-ID: <EBD2043717E77E4687F27264C03F97D1028B198084@HQEXMB1.vignette.com>
References: <EBD2043717E77E4687F27264C03F97D10284DA7634@HQEXMB1.vignette.com>
In-Reply-To: <EBD2043717E77E4687F27264C03F97D10284DA7634@HQEXMB1.vignette.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_EBD2043717E77E4687F27264C03F97D1028B198084HQEXMB1vignet_"
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_EBD2043717E77E4687F27264C03F97D1028B198084HQEXMB1vignet_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi, I have written a TokenFilter which breaks up words with internal dot ch=
aracters and adds the whole word plus the pieces as tokens in the stream. I=
 am using that TokenFilter with the StandardAnalyzer to index my documents.=
 Then I do searches using the StandardAnalyzer. Everything is working great=
 except for some phrase searches. Here's an example:

Document string
---------------
entity-cache.size-limit

StandardAnalyzer token - position increment
-------------------------------------------

(entity,0,6,type=3D<alphanum>) - 1

(cache.size,7,17,type=3D<host>) - 1

(limit,18,23,type=3D<alphanum>) - 1


MyAnalyzer token - position increment
-------------------------------------

(entity,0,6,type=3D<alphanum>) - 1

(cache.size,7,17,type=3D<host>) - 1

(limit,18,23,type=3D<alphanum>) - 1

(cache,7,12,type=3D<alphanum>) - 1

(size,13,17,type=3D<alphanum>) - 1



Search string (StandardAnalyzer)
--------------------------------
"cache.size limit"



The search finds the doc if I use the StandardAnalyzer to index, but not if=
 I use MyAnalyzer to index. Can anyone see why that would be true? The firs=
t three Tokens of each TokenStream are exactly the same and it looks like b=
oth would be found by that search phrase. Do I need to change the position =
offsets on my extra Tokens or something?



Thanks for any help.

=3D=3D

Clay Embry










--_000_EBD2043717E77E4687F27264C03F97D1028B198084HQEXMB1vignet_--

From java-user-return-33039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 10 21:06:45 2008
Return-Path: <java-user-return-33039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4631 invoked from network); 10 Mar 2008 21:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Mar 2008 21:06:44 -0000
Received: (qmail 93045 invoked by uid 500); 10 Mar 2008 21:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93010 invoked by uid 500); 10 Mar 2008 21:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92992 invoked by uid 99); 10 Mar 2008 21:06:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 14:06:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Mar 2008 21:05:56 +0000
Received: (qmail invoked by alias); 10 Mar 2008 21:06:04 -0000
Received: from e178073199.adsl.alicedsl.de (EHLO msrvcn04) [85.178.73.199]
  by mail.gmx.net (mp054) with SMTP; 10 Mar 2008 22:06:04 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19eYjVvy0ZeyhHhEIIye6wcYPtyFChtN7WPRF2ajo
	9T7n/l0/L1DfX9
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Biggest index
Date: Mon, 10 Mar 2008 22:06:04 +0100
Message-ID: <3DBF7C58608E47BC9756D34658643B76@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AciC8oqKUIByV9QuQDm7LAXgAwE7ug==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some question about the index size on a single machine:

What is your biggest index you use in production?
Do you use MultiReader/Searcher?
What hardware do you need to serve it?
What kind of application is it?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 00:01:58 2008
Return-Path: <java-user-return-33040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 431 invoked from network); 11 Mar 2008 00:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 00:01:58 -0000
Received: (qmail 52053 invoked by uid 500); 11 Mar 2008 00:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52022 invoked by uid 500); 11 Mar 2008 00:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52011 invoked by uid 99); 11 Mar 2008 00:01:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 17:01:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 00:00:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5690871C284; Mon, 10 Mar 2008 17:01:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5375A71C265
	for <java-user@lucene.apache.org>; Mon, 10 Mar 2008 17:01:18 -0700 (PDT)
Date: Mon, 10 Mar 2008 17:01:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: lucene <java-user@lucene.apache.org>
Subject: Re: Looking for an example of Using Position Increment Gap
In-Reply-To: <47CDB9BA.4080004@informatics.jax.org>
Message-ID: <Pine.LNX.4.62.0803101652370.19963@radix.cryptio.net>
References: <47CDB9BA.4080004@informatics.jax.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: the analysis section.  (Basically writing a custom analyzer that introduces a
: position increment gap between phrases)  I am however curious if an example of
: a usage like that exists somewhere that I could use as a basis for the
: analyzer that I'm going to have to write to handle this case.

Bear in mind, when people talk about "position increment GAP" they are 
usually refering explicitly to the method 
Analyzer.getPositionIncrementGap(String) .. which is what gets called when 
a Document is being analyzed and it contains two or more instances of 
"Field" that have hte same field name.

what you are asking about sounds more like the more basic "position 
increment" ... which defaults to "1" for each Token and can be changed by 
calling Token.setPositionIncrement(int).  a quick krugle search can find 
you lots of examples of using this method...

http://www.krugle.org/kse/files?query=setPositionIncrement&lang=java







-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 00:32:21 2008
Return-Path: <java-user-return-33041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13780 invoked from network); 11 Mar 2008 00:32:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 00:32:21 -0000
Received: (qmail 80852 invoked by uid 500); 11 Mar 2008 00:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80816 invoked by uid 500); 11 Mar 2008 00:32:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80805 invoked by uid 99); 11 Mar 2008 00:32:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 17:32:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 00:31:21 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7D22B71C276; Mon, 10 Mar 2008 17:31:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7B13C71C1F0
	for <java-user@lucene.apache.org>; Mon, 10 Mar 2008 17:31:40 -0700 (PDT)
Date: Mon, 10 Mar 2008 17:31:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to create segments files?
In-Reply-To: <47D0B37B.2070204@quantum4d.com>
Message-ID: <Pine.LNX.4.62.0803101726150.19963@radix.cryptio.net>
References: <47D0B37B.2070204@quantum4d.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Ladies and Gentlemen:
: Below is an exception and the source code that generates it:

first off -- the source code you've posted does not match the exception 
you posted: the exception comes from something called "results.jsp" which 
attempts to open an IndexSearcher; the code you posted is for a class 
named "Parser" that appears to be a command line app (with a "main" 
function) that attempts to build an index (at first glance, i only see it 
attempting to add one document)

I suspect the cause of your problem is that you are never calling the 
"close()" method on your IndexWriter, so nothing is ever getting written 
to disk ... this is just a guess however.


: ERROR opening the Index - contact sysadmin!
: 
: Error message: no segments* file found in
: org.apache.lucene.store.FSDirectory@/home/hdiwan/public_html/Q4D: files:
: 
: Stack Trace follows...
: org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:587)
: org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
: org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
: org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
: org.apache.lucene.search.IndexSearcher.(IndexSearcher.java:48)
: org.apache.jsp.results_jsp._jspService(results_jsp.java:130)
: org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
: javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
: org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
: org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
: org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
: javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
: org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
: org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
: org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
: org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
: org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
: org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
: org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
: org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
: org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
: org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
: org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
: java.lang.Thread.run(Thread.java:619)
: 
: -- Source code follows --
: import java.io.File;
: import java.io.FilenameFilter;
: import java.io.IOException;
: import java.net.URLDecoder;
: import java.util.Collection;
: import java.util.Collections;
: import java.util.Comparator;
: import java.util.Date;
: import java.util.HashSet;
: import java.util.Vector;
: import org.apache.lucene.analysis.WhitespaceAnalyzer;
: import org.apache.lucene.document.DateTools;
: import org.apache.lucene.document.Document;
: import org.apache.lucene.document.Field;
: import org.apache.lucene.index.CorruptIndexException;
: import org.apache.lucene.index.IndexWriter;
: import org.apache.lucene.store.Directory;
: import org.apache.lucene.store.LockObtainFailedException;
: import org.apache.lucene.store.FSDirectory;
: public class Parser implements Runnable,Comparator {
:            String path;
:            public Parser(String string) {
:                     path = string;
:             }
:             public void run() {
:                     IndexWriter writer = null;
:                     Directory directory = null;
:                     try {
:                          directory = FSDirectory.getDirectory(this.path);
:                     } catch (IOException e) {
:                         System.err.println(e.getStackTrace());
:                     }
:                     try {
:                         writer = new IndexWriter(directory,new
: WhitespaceAnalyzer(), true);
:                     } catch (CorruptIndexException e) {
:                             e.printStackTrace();
:                     } catch (LockObtainFailedException e) {
:                             e.printStackTrace();
:                     } catch (IOException e) {
:                             e.printStackTrace();
:                     }
:                     Document doc = new Document();
:                     File image = null;
:                     File file = null;
:                     for (File f : this.listFiles(new File(path))) {
:                             if (f.getAbsolutePath().endsWith("xml") ||
: f.getAbsolutePath().endsWith("q4d")) {
:                                     System.err.println("Q4D file found!");
:                                     file = f;
:                             } else {
:                                     image = f;
:                             }
:                             if ((f != null) && (image != null)) break;
:                     }
:                     Date lastModified = new Date(file.lastModified());
:                     System.err.println("Found a file and its corresponding
: image!");
:                     String imageName = image.getName();
:                     String filename = file.getName();
:                     String lastModifiedDownToSecond =
: DateTools.dateToString(lastModified, DateTools.Resolution.SECOND);
:                     System.err.println("the time the file was last modified
: was "+lastModifiedDownToSecond);
:                     String author = System.getProperty("author");
:                        String source = System.getProperty("source");
:                     String url = System.getProperty("url");
:                     String description =
: URLDecoder.decode(System.getProperty("description", "UTF-8"));
:             System.err.println("about to create fields");
:                     doc.add(new Field("author", author, Field.Store.YES,
: Field.Index.TOKENIZED));
:                     doc.add(new Field("source", source, Field.Store.YES,
: Field.Index.TOKENIZED));
:                     doc.add(new Field("name", filename, Field.Store.YES,
: Field.Index.NO));
:                     doc.add(new Field("image", imageName, Field.Store.YES,
: Field.Index.NO));
:                     doc.add(new Field("date", lastModifiedDownToSecond,
: Field.Store.YES, Field.Index.NO));
:                     doc.add(new Field("url", url, Field.Store.YES,
: Field.Index.NO));
:                     if (description != null) {
:                         doc.add(new Field("description", description,
: Field.Store.YES, Field.Index.TOKENIZED));
:                     } else {
:                         doc.add(new Field("description", "none",
: Field.Store.YES, Field.Index.TOKENIZED));
:                     }
:                     doc.add(new Field("all",
: author+lastModifiedDownToSecond+source+imageName+description+url,
: Field.Store.YES, Field.Index.TOKENIZED));
:                     try {
:                             writer.addDocument(doc);
:                     } catch (CorruptIndexException e) {
:                             e.printStackTrace();
:                     } catch (IOException e) {
:                             e.printStackTrace();
:                     }
:                     try {
:                             writer.optimize();
:                     } catch (CorruptIndexException e) {
:                             e.printStackTrace();
:                     } catch (IOException e) {
:                             e.printStackTrace();
:                     }
:             }
:                       private Collection<File> listFiles(
:                             File directory)
:             {
:                     Vector<File> files = new Vector<File>();
:                     // Get files / directories in the directory
:                     File[] entries = directory.listFiles();
:                        // Go over entries
:                     for (File entry : entries)
:                     {
:                             files.add(entry);
:                     }
:                        // Return collection of files, sorted by date
:                     Collections.sort(files, this);
:                     for (File entry : files) {
:                             System.err.println(entry+"
: "+entry.lastModified());
:                     }
:                     return files;
:             }
:                       public int compare(Object o1, Object o2) {
:                     File f1 = (File)o1;
:                     File f2 = (File)o2;
:                     Date d1 = new Date(f1.lastModified());
:                     Date d2 = new Date(f2.lastModified());
:                     return d1.compareTo(d2);
:             }
:                       public static void main (String []args) {
:                     Parser obj = new Parser(args[0]);
:                     try {
:                            obj.run();
:                     } finally { // in case it crashes, I don't want a locked
: repository!
:                             File f = new
: File(args[0]+File.separator+"write.lock");
:                             f.delete();
:                     }
:             }
:     }
: == end ==
: The code is supposed to add a document to the repository, as you can see from
: the first 19 lines, it generates an exception, the backtrace is also included.
: I've been struggling with this problem all day today (Thursday) without making
: headway. Hence, I turn to your good guidance. I'm sure you won't disappoint.
: Many thanks! -- H
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 05:31:25 2008
Return-Path: <java-user-return-33042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10879 invoked from network); 11 Mar 2008 05:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 05:31:25 -0000
Received: (qmail 24884 invoked by uid 500); 11 Mar 2008 05:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23907 invoked by uid 500); 11 Mar 2008 05:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23896 invoked by uid 99); 11 Mar 2008 05:31:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 22:31:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 05:30:38 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1983627qba.9
        for <java-user@lucene.apache.org>; Mon, 10 Mar 2008 22:30:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5yGcs31NGdP2YhKW3XVDR/N5rG7bGJZK/6tP0QVrZ6U=;
        b=KbZvni4maKgfYnTlqvk3AC8TOkNHUdR1XiPtZq0chZgYJTjQ8f6bSt2hB8miXk1qJH2MW2wRHs39WqMXvNpjLYTFXxcD6XULqKvacw9scwcS79ko7OgIlORvsd6GDrnW+Osbm1r3/i4yMy+oTcT+V5BQJrSjvRfkH03AfiTJFyw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h//H9abzbaFHb0oQL1MJzfKsknWmLBWlHdR5PwIBElYJk+h36jBQv+Vj2EGngCqZIgLO6AFr23Zty7JM17wbSC7yzNZkGRU83+i5pij1ZwOAlERxn2gVVNGIRjv0jTnva1vatiYhd6Nboabnkh8ET4Krvwysay0+Xdtwijbf5CY=
Received: by 10.141.153.17 with SMTP id f17mr1775469rvo.267.1205213448562;
        Mon, 10 Mar 2008 22:30:48 -0700 (PDT)
Received: by 10.141.97.7 with HTTP; Mon, 10 Mar 2008 22:30:47 -0700 (PDT)
Message-ID: <f09790220803102230v557efbc1mb6ba95dcf1383932@mail.gmail.com>
Date: Tue, 11 Mar 2008 13:30:47 +0800
From: "Eric Th" <blueye117@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Swapping between indexes
In-Reply-To: <1205162848.9126.283.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_582_6974087.1205213448583"
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
	 <3A267701-C68A-4A99-88D2-3220D6237F0C@mikemccandless.com>
	 <227621ad0803060502j11adff3dg547fc7dbb4da1526@mail.gmail.com>
	 <c68e39170803060657q59e34990w772c1a309c275cca@mail.gmail.com>
	 <F6B77DC74E994492B9F89B665911EE65@msrvcn04>
	 <c68e39170803060930i79d8faf0m6dd729ac4d65fe4b@mail.gmail.com>
	 <068BD1F02ABA4E999506EF880CA98F70@msrvcn04>
	 <1204899449.9126.219.camel@PC990.sb.statsbiblioteket.dk>
	 <5BCE9257B92B4D23A322E503AC029058@msrvcn04>
	 <1205162848.9126.283.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_582_6974087.1205213448583
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What's the CPU usage and MEM usage when doing "With a commit after every 100
add" vs. "Only one commit" ?

2008/3/10, Toke Eskildsen <te@statsbiblioteket.dk>:
>
> On Fri, 2008-03-07 at 15:38 +0100, spring@gmx.eu wrote:
> > > With a commit after every add: (286 sec / 10,000 docs) 28.6 ms.
> > > With a commit after every 100 add: (12 sec / 10,000 docs) 1.2 ms.
> > > Only one commit: (8 sec / 10,000 docs) 0.8 ms.
> >
> > Of couse. If you need so less time to create a document than a commit
> which
> > may take, lets say 10 - 500 ms, will slow down indexing heavily.
>
>
> I tried doing the same with 1 million documents and contrary to my
> expectations, the amortized time for commits didn't increase for the
> frequent commits. I thought that the merging of the segments were more
> expensive. But then again - the resulting index is "only" 1.3GB.
>
> With a commit after every add: (21818 sec / 1,000,000 docs) 21.818 ms.
> With a commit after every 100 add: (1879 sec / 1,000,000 docs) 1.879 ms.
> Only one commit: (1270 sec / 1,000,000 docs) 1.270 ms.
>
>
> While I were at it, I tried running the test on SSDs and fast harddisks
> on our dual-core test-server.
>
> 2 Sandisk solid state drives in RAID 0:
> With a commit after every add: (1460 sec / 1,000,000 docs) 1.460 ms.
> With a commit after every 100 add: (409 sec / 1,000,000 docs) 0.400 ms.
> Only one commit: (321 sec / 1,000,000 docs) 0.317 ms.
>
> 2 MTRON solid state drives in RAID 0:
> With a commit after every add: (1495 sec / 1,000,000 docs) 1.495 ms.
> With a commit after every 100 add: (353 sec / 1,000,000 docs) 0.353 ms.
> Only one commit: (296 sec / 1,000,000 docs) 0.296 ms.
>
> 2 10.000 RPM harddisks in RAID 0:
> With a commit after every add: (1781 sec / 1,000,000 docs) 1.781 ms.
> With a commit after every 100 add: (380 sec / 1,000,000 docs) 0.373 ms.
> Only one commit: (335 sec / 1,000,000 docs) 0.323 ms.
>
> 2 15.000 RPM harddisks in RAID 1:
> With a commit after every add: (1876 sec / 1,000,000 docs) 1.876 ms.
> With a commit after every 100 add: (458 sec / 1,000,000 docs) 0.458 ms.
> Only one commit: (361 sec / 1,000,000 docs)  ms.
>
> Not enough data for real statistics, I know, but on the faster server
> system, the penalty for frequent commits doesn't appear to be so bad.
>
>
> > So it really depends on the use case and how long it takes to index a
> single
> > document, inclusive retrieval of the document from ist source.
>
>
> Absolutely.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_582_6974087.1205213448583--

From java-user-return-33043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 05:50:36 2008
Return-Path: <java-user-return-33043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14540 invoked from network); 11 Mar 2008 05:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 05:50:35 -0000
Received: (qmail 38208 invoked by uid 500); 11 Mar 2008 05:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38175 invoked by uid 500); 11 Mar 2008 05:50:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38164 invoked by uid 99); 11 Mar 2008 05:50:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Mar 2008 22:50:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 05:49:40 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6226163000B
	for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 16:49:41 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Document ID shuffling under 2.3.x (on merge?)
Date: Tue, 11 Mar 2008 16:45:27 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803111645.27956.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

We're using the document ID to associate extra information stored outside 
Lucene.  Some of this information is being stored at load-time and some 
afterwards; later on it turns out the information stored at load-time is 
returning the wrong results when converting the database contents back into a 
BitSet for filtering.

Using version 2.2.x doesn't appear to cause the problem, so I have been 
wondering if something happened in 2.3.x to change the document IDs.  Having 
already looked to try and determine this myself, it doesn't appear to be 
reordering them in DocumentsWriter, but perhaps there is some subtle 
side-effect of the way segments are merged which has caused this?

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 08:57:04 2008
Return-Path: <java-user-return-33044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47526 invoked from network); 11 Mar 2008 08:57:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 08:57:02 -0000
Received: (qmail 60269 invoked by uid 500); 11 Mar 2008 08:56:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60230 invoked by uid 500); 11 Mar 2008 08:56:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60219 invoked by uid 99); 11 Mar 2008 08:56:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 01:56:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 08:56:14 +0000
Received: by wr-out-0506.google.com with SMTP id 69so1235363wri.5
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 01:55:38 -0700 (PDT)
Received: by 10.150.189.9 with SMTP id m9mr3485249ybf.142.1205225738058;
        Tue, 11 Mar 2008 01:55:38 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm12891324wrh.24.2008.03.11.01.55.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Mar 2008 01:55:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803111645.27956.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4BE09ECA-A2AE-4A10-A508-B7873C3BABE8@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Tue, 11 Mar 2008 04:55:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Daniel,

2.3 should be no different from 2.2 in that docIDs only "shift" when  
a merge of segments with deletions completes.

Could it be the ConcurrentMergeScheduler?  Merges now run in the  
background by default and commit whenever they complete.  You can get  
back to the previous (blocking) behavior by using  
SerialMergeScheduler instead.

If it's not that ... can you provide more details about how your  
applications is relying on docIDs?

Mike

Daniel Noll wrote:

> Hi all.
>
> We're using the document ID to associate extra information stored  
> outside
> Lucene.  Some of this information is being stored at load-time and  
> some
> afterwards; later on it turns out the information stored at load- 
> time is
> returning the wrong results when converting the database contents  
> back into a
> BitSet for filtering.
>
> Using version 2.2.x doesn't appear to cause the problem, so I have  
> been
> wondering if something happened in 2.3.x to change the document  
> IDs.  Having
> already looked to try and determine this myself, it doesn't appear  
> to be
> reordering them in DocumentsWriter, but perhaps there is some subtle
> side-effect of the way segments are merged which has caused this?
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 10:32:35 2008
Return-Path: <java-user-return-33045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83907 invoked from network); 11 Mar 2008 10:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 10:32:35 -0000
Received: (qmail 84045 invoked by uid 500); 11 Mar 2008 10:32:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83846 invoked by uid 500); 11 Mar 2008 10:32:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83700 invoked by uid 99); 11 Mar 2008 10:32:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 03:32:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jhnbyrn@gmail.com designates 72.14.204.231 as permitted sender)
Received: from [72.14.204.231] (HELO qb-out-0506.google.com) (72.14.204.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:31:47 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2047735qba.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 03:31:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=xOZZIe+64K0Q0xBW1vYYZAue7Wi7joVjCTSndeqRQlU=;
        b=b0nmvJ1dnh4Co+29GqeD0Yhwh5yGKYV9m3qNnKHedrpXVkNzAxydWIEs+fzQPHUwYwzMIGfyrieWf4goYQwz4qADf7HedZdKV0JQv8Eja5NbCXrtrTOOGkyauH/Vi2dLjSUqYsphfDvncuZ0HZGkLaupe8+Jx0afomcVh4S3Ab4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=xs1BZvb4aPGwEQ4l2wdKPvuiUI8QC8yTYXCpi91uZNVle5LIFvqSMNxiNwvx60JYT9cbv5SaauuZhKo5N6ykrFcDKYtAnqE3jFt6duuydw8vGiS/E7Ee8JBgES4g5YYUQpW2kgh5P8YWtYJzsJViYfF/LPwDAmgx/8MRz/TTeu8=
Received: by 10.141.202.12 with SMTP id e12mr3964237rvq.273.1205231516937;
        Tue, 11 Mar 2008 03:31:56 -0700 (PDT)
Received: by 10.140.163.6 with HTTP; Tue, 11 Mar 2008 03:31:56 -0700 (PDT)
Message-ID: <f94c19f40803110331p3edba5bagcc1fd3d7ae541c1f@mail.gmail.com>
Date: Tue, 11 Mar 2008 10:31:56 +0000
From: "J B" <jhnbyrn@gmail.com>
To: "Lucene list" <java-user@lucene.apache.org>
Subject: IndexSearcher thread safety
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_586_22620101.1205231516948"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_586_22620101.1205231516948
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Are instances of IndexSearcher thread safe? In other words, should each
thread have it's own instance of IndexSearcher, or could I share a single
one between many threads, to avoid constantly opening and closing new
instances?

Many thanks!
-J.

------=_Part_586_22620101.1205231516948--

From java-user-return-33046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 10:42:53 2008
Return-Path: <java-user-return-33046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88535 invoked from network); 11 Mar 2008 10:42:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 10:42:52 -0000
Received: (qmail 3140 invoked by uid 500); 11 Mar 2008 10:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3109 invoked by uid 500); 11 Mar 2008 10:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3098 invoked by uid 99); 11 Mar 2008 10:42:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 03:42:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.250] (HELO hs-out-0708.google.com) (64.233.178.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:42:05 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1784263hsl.5
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 03:42:15 -0700 (PDT)
Received: by 10.141.22.1 with SMTP id z1mr4025032rvi.67.1205232134453;
        Tue, 11 Mar 2008 03:42:14 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 39sm14329698wrl.29.2008.03.11.03.42.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Mar 2008 03:42:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <f94c19f40803110331p3edba5bagcc1fd3d7ae541c1f@mail.gmail.com>
References: <f94c19f40803110331p3edba5bagcc1fd3d7ae541c1f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84F23585-4513-423F-94E8-29C61BD9E945@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexSearcher thread safety
Date: Tue, 11 Mar 2008 06:42:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


They are thread safe.  You should share a single instance across  
multiple threads.

Mike

J B wrote:

> Hi,
>
> Are instances of IndexSearcher thread safe? In other words, should  
> each
> thread have it's own instance of IndexSearcher, or could I share a  
> single
> one between many threads, to avoid constantly opening and closing new
> instances?
>
> Many thanks!
> -J.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 13:24:05 2008
Return-Path: <java-user-return-33047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48372 invoked from network); 11 Mar 2008 13:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 13:24:05 -0000
Received: (qmail 15202 invoked by uid 500); 11 Mar 2008 13:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15170 invoked by uid 500); 11 Mar 2008 13:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15158 invoked by uid 99); 11 Mar 2008 13:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 06:23:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 13:23:18 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2508877wff.20
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 06:23:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=r3vmCHpf3jAVbLititVMzJEirA86uc3a4eALGXe6tKE=;
        b=onsXoz3JbyVz9Sk60erl3HbTIIZ4QdOlHIeD3bc+dLCt/xLtGNjx0dn1NdQVMpYJCOafJUlhW2dGoMS86Ko3lLRoV56q+GItT4oRnSNVENCKoxINF+3XOSsaf+S+sBR3rInKroSb51+lh6IEIiRJnyAkdjD/QgW1G43dJjrlWrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=LPzhIVWvst2Gh4R9+UPdho2rs9C7jGvPcgNI8kWkrvgeePlXDdzN24/v8kNnd+w4yyjOYwJeOebU10QjfOh2s8SsWa1VrzgSkiFcApspK3zX3JdF3psFQ2hGp56XneyM6AXn2BnYTUw3Qc01Uwg6sEDvm2WYHsTkYoXgOlAAzbE=
Received: by 10.143.162.8 with SMTP id p8mr2563312wfo.49.1205241809465;
        Tue, 11 Mar 2008 06:23:29 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Tue, 11 Mar 2008 06:23:29 -0700 (PDT)
Message-ID: <74f928500803110623s57cc8902hc33c2b581d03d0a0@mail.gmail.com>
Date: Tue, 11 Mar 2008 15:23:29 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Specialized XML handling in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1765_20186585.1205241809455"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1765_20186585.1205241809455
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I would like to ask for suggestions of the best design for the following
scenario:

I have a very large number of XML files (around 1M).
Each file contains several sections. Each section contains many elements
(about 1000-5000).
Each element has a value and some attributes describing the value (like
metadata), for example:

<Section1>
    <Element1  id="0"  type="A" meta1="val11"
meta2="val21">value1</Element1>
    <Element1 id="1"  type="B" meta1="val12" meta2="val21">value2</Element1>
...
</Section1>
<Section2>
    <Element2 id="0"  type="D" meta1="val11" meta3="val31">value3</Element2>
    <Element2 id="1"  type="B" meta1="val13" meta3="val34">value1</Element2>
...
<Section2>
...

As you can see, each attribute can have any value, and attribute names can
be the same in different sections.

I would like to index the XML in such a way so I can perform queries like:

element1=value1 AND type=A AND meta2=val21

and also more complicated queries that include positions between elements,
and even range queries on attribute values.

Indexing each element as a different document might not be possible because
of the large number of documents it might create (more then 5 billion docs),
and might also make it difficult to parse results - I still want to know how
many original XML documents contains the searched terms.

Indexing each attribute as a different field is also difficult because I
then need the positional information of the found terms and check that they
were all found in the same place (and thus "belong" to the same element).

Please send me your thoughts of a possible solution with lucene (if such
exists).

Thanks,
Eran S.

------=_Part_1765_20186585.1205241809455--

From java-user-return-33048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:17:32 2008
Return-Path: <java-user-return-33048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78097 invoked from network); 11 Mar 2008 14:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:17:32 -0000
Received: (qmail 37334 invoked by uid 500); 11 Mar 2008 14:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36838 invoked by uid 500); 11 Mar 2008 14:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36827 invoked by uid 99); 11 Mar 2008 14:17:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:17:22 -0700
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:16:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZ5Hi-00051a-Ox
	for java-user@lucene.apache.org; Tue, 11 Mar 2008 07:16:54 -0700
Message-ID: <15976538.post@talk.nabble.com>
Date: Tue, 11 Mar 2008 07:16:54 -0700 (PDT)
From: thogau <thogau@thogau.net>
To: java-user@lucene.apache.org
Subject: Searching for null (empty) fields, how to use -field:[* TO *]
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4629_23799499.1205245014420"
X-Nabble-From: thogau@thogau.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4629_23799499.1205245014420
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,


I browsed the forum searching for a way to make a query that retrieves
document that do not have any value for a given field (say MY_FIELD_NAME). 


I read several posts advising to use this syntax : -MY_FIELD_NAME:[* TO *]
However, I am not able to have it working...


I have 2 documents, the first one has a value for the field MY_FIELD_NAME 
(In Luke, I can see the value) and the second one has no value for it (In
Luke, I can see &lt;not available&gt;)


I would expect the query MY_FIELD_NAME:[* TO *] to retrieve the document
which has a value for the field MY_FIELD_NAME but it doesn't (Nevertheless
MY_FIELD_NAME:[a* TO z*] retrieves it)


Also, I would expect the query -MY_FIELD_NAME:[* TO *] to retrieve the
document which has a NO value for the field MY_FIELD_NAME but it doesn't
either...


I guess I am missing something obvious but I am stuck... Anybody can help to
understand what I am doing wrong?

-- 
View this message in context: http://www.nabble.com/Searching-for-null-%28empty%29-fields%2C-how-to-use--field%3A-*-TO-*--tp15976538p15976538.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_4629_23799499.1205245014420--


From java-user-return-33049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:34:56 2008
Return-Path: <java-user-return-33049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90814 invoked from network); 11 Mar 2008 14:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:34:55 -0000
Received: (qmail 69306 invoked by uid 500); 11 Mar 2008 14:34:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69267 invoked by uid 500); 11 Mar 2008 14:34:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69256 invoked by uid 99); 11 Mar 2008 14:34:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:34:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:34:08 +0000
Received: by py-out-1112.google.com with SMTP id z74so2864960pyg.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:34:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=KVdfFGFok0kiZJaUc2BlhnUcQwP0kn2uSDvsshrpz3A=;
        b=KkidBmnwcn2W3A5imMJcW/zoCD6j5NGjJsKFsbGnFCI/S69pEa4V713I1SqAMQfwtxgqz79PUjHZXqq81UPjMo6Z9UUUyXQSp/SymFehZipKT3xyO46xaF8UAf3UTP+fhodisFml8Jk01Nbl7lGlt2BkD/62/tBBJFgiRdr/ddE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mTpKnWtjvksRTbfkamQ6OyYj4XKfrAmHpqzSWtKKzhl+4sufRgqKp4R0ch4qtQqwv+ewGqGFEDw9k9nnW5Uw8Dya8lLIjFQL6JTHPTH+kHpSAmJn6oNBY4xFgsMPKRO5+hQBBfx51ApBE1xJvz43hOGZVPoHzqELCxscwktoWN8=
Received: by 10.65.122.13 with SMTP id z13mr13802541qbm.54.1205246048242;
        Tue, 11 Mar 2008 07:34:08 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id a29sm9970107qbd.4.2008.03.11.07.34.06
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Mar 2008 07:34:06 -0700 (PDT)
Message-ID: <47D6985C.40207@gmail.com>
Date: Tue, 11 Mar 2008 10:34:04 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031002)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
References: <15976538.post@talk.nabble.com>
In-Reply-To: <15976538.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You cannot have a purely negative query like you can in Solr.

Try: *:* -MY_FIELD_NAME:[* TO *]
thogau wrote:
> Hi,
>
>
> I browsed the forum searching for a way to make a query that retrieves
> document that do not have any value for a given field (say MY_FIELD_NAME).
>
>
> I read several posts advising to use this syntax : -MY_FIELD_NAME:[* TO *]
> However, I am not able to have it working...
>
>
> I have 2 documents, the first one has a value for the field MY_FIELD_NAME
> (In Luke, I can see the value) and the second one has no value for it (In
> Luke, I can see&lt;not available&gt;)
>
>
> I would expect the query MY_FIELD_NAME:[* TO *] to retrieve the document
> which has a value for the field MY_FIELD_NAME but it doesn't (Nevertheless
> MY_FIELD_NAME:[a* TO z*] retrieves it)
>
>
> Also, I would expect the query -MY_FIELD_NAME:[* TO *] to retrieve the
> document which has a NO value for the field MY_FIELD_NAME but it doesn't
> either...
>
>
> I guess I am missing something obvious but I am stuck... Anybody can help to
> understand what I am doing wrong?
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:38:36 2008
Return-Path: <java-user-return-33050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93073 invoked from network); 11 Mar 2008 14:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:38:36 -0000
Received: (qmail 77094 invoked by uid 500); 11 Mar 2008 14:38:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77061 invoked by uid 500); 11 Mar 2008 14:38:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77050 invoked by uid 99); 11 Mar 2008 14:38:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:38:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:37:49 +0000
Received: by el-out-1112.google.com with SMTP id y26so1230816ele.4
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:37:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=oPYvZzusz93qWwU+VfiZ5QEAMiJZsM4cRk7Rdu4cbR8=;
        b=kkQxdajz1yfnqR/cpxTChwztTo7lNUdQHtXZ3WBRmzmmKLSvXpabTekkE7xfOsNa1WrmFcJh4Ig1m5BrgYWQaUulzyDtC7xZPEEXIJL9rdAI6lDgPGtMq0khE5q/xi0GgACH6yXOSOm12QdBNxCd4SepcDEhePIDDriNKLomt6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aCf6rAq3Rbsoa5jFnuZwPSU9bsfeQJ7T04Lr4olrCJBxJsU7mPR0668/xB6iObCFBy07cqXyoDM+IeC94UMz6uMaFevXpvINwO+vmvivSxhi6uFkNyiZN3kIR9NFqqAH7czpX5qBShF/D+335TuXJq8EFWT6D2zS5FA9aXcZm04=
Received: by 10.115.79.1 with SMTP id g1mr5156248wal.2.1205246278435;
        Tue, 11 Mar 2008 07:37:58 -0700 (PDT)
Received: by 10.114.120.11 with HTTP; Tue, 11 Mar 2008 07:37:58 -0700 (PDT)
Message-ID: <76df56980803110737w319640ej5ba6adcc7a3af111@mail.gmail.com>
Date: Tue, 11 Mar 2008 11:37:58 -0300
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <15976538.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <15976538.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I was looking for the same functionality, after a short googling
didn't find a solution, I assume it must exist but I finally decided
to "fill" those empty fields with a representative "null value",
"__null__", this is possible only if you know previously ALL the
fields.

I'd like to know if there is another way that negating any possible
value (-FIELD: * TO *), it seems to be "heavier" than a specified
null-value to handle it.

Regards,

Germ=E1n Kondolf
german.kondolf@gmail.com

On Tue, Mar 11, 2008 at 11:16 AM, thogau <thogau@thogau.net> wrote:
>
>  Hi,
>
>
>  I browsed the forum searching for a way to make a query that retrieves
>  document that do not have any value for a given field (say MY_FIELD_NAME=
).
>
>
>  I read several posts advising to use this syntax : -MY_FIELD_NAME:[* TO =
*]
>  However, I am not able to have it working...
>
>
>  I have 2 documents, the first one has a value for the field MY_FIELD_NAM=
E
>  (In Luke, I can see the value) and the second one has no value for it (I=
n
>  Luke, I can see &lt;not available&gt;)
>
>
>  I would expect the query MY_FIELD_NAME:[* TO *] to retrieve the document
>  which has a value for the field MY_FIELD_NAME but it doesn't (Neverthele=
ss
>  MY_FIELD_NAME:[a* TO z*] retrieves it)
>
>
>  Also, I would expect the query -MY_FIELD_NAME:[* TO *] to retrieve the
>  document which has a NO value for the field MY_FIELD_NAME but it doesn't
>  either...
>
>
>  I guess I am missing something obvious but I am stuck... Anybody can hel=
p to
>  understand what I am doing wrong?
>
>  --
>  View this message in context: http://www.nabble.com/Searching-for-null-%=
28empty%29-fields%2C-how-to-use--field%3A-*-TO-*--tp15976538p15976538.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:41:49 2008
Return-Path: <java-user-return-33051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96260 invoked from network); 11 Mar 2008 14:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:41:48 -0000
Received: (qmail 90590 invoked by uid 500); 11 Mar 2008 14:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90563 invoked by uid 500); 11 Mar 2008 14:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90552 invoked by uid 99); 11 Mar 2008 14:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:41:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:41:02 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2714118wah.11
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:41:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=klUwmFkknEBaGAN+dQNupxFn6HoyO5CXM4OzTAfj41U=;
        b=WNqPXkhvzV+v/NLQG4gGr9X316u3EN00j5ucCMMAVQmSPRnwrpwIHjl04tQZSxBZilFZVCXOCwCP2DUiUQhR+ffvmqDMJ/9e1Kv0YhT8LArRE/fhgQQQ4UTqpS5kODmyC/Yh1Z69BJoGKRZGgSPjrKf5hdOl4ivSJR5gcB5jITY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m8WR8s36msU/ktGBUKqJ4TESMXBn4Yalsqc4E0irQkV6f3FsmwYVRY4Ke8QTvrAWeEt8jOrv5qFnGNkdoN5n0vA+1Z4NDqmLkvU1gdGJnZ7DHJAHLNIVvXIkilxKYkTOzoXKFdtUiwMSaOxeOJ4qrUpQGuzROk9oiUzszFuh+tM=
Received: by 10.114.93.17 with SMTP id q17mr4910418wab.70.1205246472599;
        Tue, 11 Mar 2008 07:41:12 -0700 (PDT)
Received: by 10.114.120.11 with HTTP; Tue, 11 Mar 2008 07:41:12 -0700 (PDT)
Message-ID: <76df56980803110741t615a9d8v500e4d4a7de4b0c2@mail.gmail.com>
Date: Tue, 11 Mar 2008 11:41:12 -0300
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <47D6985C.40207@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15976538.post@talk.nabble.com> <47D6985C.40207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

*:* is parsed as a MatchAllDocsQuery?

I've got some preformance issues in Lucene 2.2 because
MatchAllDocsQuery ask for a "isDeleted()" for every document, I didn't
tried it in 2.3.

On Tue, Mar 11, 2008 at 11:34 AM, Mark Miller <markrmiller@gmail.com> wrote:
> You cannot have a purely negative query like you can in Solr.
>
>  Try: *:* -MY_FIELD_NAME:[* TO *]
>
> thogau wrote:
>  > Hi,
>  >
>  >
>  > I browsed the forum searching for a way to make a query that retrieves
>  > document that do not have any value for a given field (say MY_FIELD_NAME).
>  >
>  >
>  > I read several posts advising to use this syntax : -MY_FIELD_NAME:[* TO *]
>  > However, I am not able to have it working...
>  >
>  >
>  > I have 2 documents, the first one has a value for the field MY_FIELD_NAME
>  > (In Luke, I can see the value) and the second one has no value for it (In
>  > Luke, I can see&lt;not available&gt;)
>  >
>  >
>  > I would expect the query MY_FIELD_NAME:[* TO *] to retrieve the document
>  > which has a value for the field MY_FIELD_NAME but it doesn't (Nevertheless
>  > MY_FIELD_NAME:[a* TO z*] retrieves it)
>  >
>  >
>  > Also, I would expect the query -MY_FIELD_NAME:[* TO *] to retrieve the
>  > document which has a NO value for the field MY_FIELD_NAME but it doesn't
>  > either...
>  >
>  >
>  > I guess I am missing something obvious but I am stuck... Anybody can help to
>  > understand what I am doing wrong?
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:46:04 2008
Return-Path: <java-user-return-33052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97854 invoked from network); 11 Mar 2008 14:46:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:46:04 -0000
Received: (qmail 370 invoked by uid 500); 11 Mar 2008 14:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 341 invoked by uid 500); 11 Mar 2008 14:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 330 invoked by uid 99); 11 Mar 2008 14:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:45:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:45:18 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2715786wah.11
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:45:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=c5MOPSpD6F7FYR9V0pwvmjptFmQUiAhK7Cw2NWcER6g=;
        b=Ah2UFE7mROVDgYdo+S6gjJt7/8CVdvKtWXlLNEqbf6v7kOcombyTD6D2rsQ3McGL7xeT1fXoO+gRhAJQBHzMYvYw0HTepO2rH9VRRB+L7SC0g/HYexJsUTUieFUNKeMVbasKwnbCMty4Q8PTbx9EWuPvhPf5+VxQLTm0DsLoVkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DRaOigIiONM1RCDZCBZRXHVJETbXtbClPtQubAl7TWqdfaeNscg10I1Vhe7RO9cJtIVg5uqqDI0C7oeC4CQNmw8924rYKXfU/lcbMREY/wuNYqr+WvFxolhgCmTkLegYUAMK7HklrKZFrfCJxYzcKqM0UkUKaY8xWx0kLYEx69A=
Received: by 10.115.77.1 with SMTP id e1mr4896127wal.103.1205246729083;
        Tue, 11 Mar 2008 07:45:29 -0700 (PDT)
Received: by 10.114.120.11 with HTTP; Tue, 11 Mar 2008 07:45:29 -0700 (PDT)
Message-ID: <76df56980803110745t723e1d5dt89be92a0585d4d25@mail.gmail.com>
Date: Tue, 11 Mar 2008 11:45:29 -0300
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher thread safety
In-Reply-To: <f94c19f40803110331p3edba5bagcc1fd3d7ae541c1f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f94c19f40803110331p3edba5bagcc1fd3d7ae541c1f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

As Michael said, you can share it, and you should share it, this will
improve performance and reuse the internal cache associated to the
IndexSearcher (term cache, filters cache, etc).

On Tue, Mar 11, 2008 at 7:31 AM, J B <jhnbyrn@gmail.com> wrote:
> Hi,
>
>  Are instances of IndexSearcher thread safe? In other words, should each
>  thread have it's own instance of IndexSearcher, or could I share a single
>  one between many threads, to avoid constantly opening and closing new
>  instances?
>
>  Many thanks!
>  -J.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 14:54:50 2008
Return-Path: <java-user-return-33053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3524 invoked from network); 11 Mar 2008 14:54:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 14:54:50 -0000
Received: (qmail 19416 invoked by uid 500); 11 Mar 2008 14:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19385 invoked by uid 500); 11 Mar 2008 14:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19371 invoked by uid 99); 11 Mar 2008 14:54:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 07:54:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 216.239.58.184 as permitted sender)
Received: from [216.239.58.184] (HELO gv-out-0910.google.com) (216.239.58.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:54:04 +0000
Received: by gv-out-0910.google.com with SMTP id r4so855306gve.23
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:54:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=LKBwODF9UIOvazvKVIe2H39h+BmBd612EfcZxBjyNpA=;
        b=TCy4U3bgq1AZRxNGMS44z3AgWSNQO3h8XF7cee3KVa+2g0PVEGiQgQvDqgB6mFcWgLBwfZTdaPlRjWjVKggmEJfRm3L2dvxUXMHpsPSYCiYbXAH3Nm28MyAfgereuR06UJF+3wa1+c6Jc5rpLlQFJcM5AXdXhQWNng5vbAhPK/4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=P2tmzNqqe1AnNOtaWYy74jYmVsRvv+glp5ezdVIZrWxQDyCVrcVmmoljNu9wTXBcUWNzSrES/NfUEA1tqkH7R11asdrvDvma+s8BIYrP2ke4JjqSGIhoOOVt6u+MZ9oWSk0Y9eZYAEHoBRBEMizSeAh36R+PuQMB2ilPMb4a0VE=
Received: by 10.151.11.17 with SMTP id o17mr3711320ybi.98.1205247249294;
        Tue, 11 Mar 2008 07:54:09 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Tue, 11 Mar 2008 07:54:09 -0700 (PDT)
Message-ID: <c68e39170803110754q61712bc5uad7effef1e71eb6@mail.gmail.com>
Date: Tue, 11 Mar 2008 10:54:09 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <76df56980803110741t615a9d8v500e4d4a7de4b0c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15976538.post@talk.nabble.com> <47D6985C.40207@gmail.com>
	 <76df56980803110741t615a9d8v500e4d4a7de4b0c2@mail.gmail.com>
X-Google-Sender-Auth: b054818eb91e3e4d
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Mar 11, 2008 at 10:41 AM, German Kondolf
<german.kondolf@gmail.com> wrote:
> *:* is parsed as a MatchAllDocsQuery?
>
>  I've got some preformance issues in Lucene 2.2 because
>  MatchAllDocsQuery ask for a "isDeleted()" for every document, I didn't
>  tried it in 2.3.

That will still be the case in 2.3 (and it's a synchronized call... ouch).
That's one of the reasons why read-only IndexReaders would be a good idea.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 15:00:15 2008
Return-Path: <java-user-return-33054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7866 invoked from network); 11 Mar 2008 15:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 15:00:14 -0000
Received: (qmail 32398 invoked by uid 500); 11 Mar 2008 15:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32367 invoked by uid 500); 11 Mar 2008 15:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32356 invoked by uid 99); 11 Mar 2008 15:00:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 08:00:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 72.14.204.225 as permitted sender)
Received: from [72.14.204.225] (HELO qb-out-0506.google.com) (72.14.204.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:59:29 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2123444qba.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 07:59:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=BfF/7zlY6qnlvuFhcyR5gHK4fuVkAfk5f5lxUL7OEqA=;
        b=nFc6Ttz3HeUTCAK1K8/K7Jy+IYXWVnFhwvcnKsmeAkM0NIRQMSO9rKqw21OmMfPJ+b4kLZv9TD4Y7wIJm7nSDy7aW1Nb1XTLc8X9CwMOdF0K8ceGCcTI1jw3cByLNf6vA7wL+FhWUf/35NCepnfHBxi2cI9k7Axvl1M3olV94zY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=wGnL2uwYmzZmOlj7ncaqNPFqdachApxG/xgAqGBK72H2Rr6OCqj/hQKJJ18Ax0KhwXgQywxURpwCDsLOJunWyDLcvynJWtSjQpwwgJTRnuuzTwXmZDcJDM1wc4wqsmePa6EaAjR9k2Se7RrcxgADNtRCownXT7R3wFhK7yGVLbc=
Received: by 10.114.195.19 with SMTP id s19mr4931809waf.57.1205247578460;
        Tue, 11 Mar 2008 07:59:38 -0700 (PDT)
Received: by 10.114.120.11 with HTTP; Tue, 11 Mar 2008 07:59:38 -0700 (PDT)
Message-ID: <76df56980803110759k7f671765y6a0f946fb8b0668e@mail.gmail.com>
Date: Tue, 11 Mar 2008 11:59:38 -0300
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <c68e39170803110754q61712bc5uad7effef1e71eb6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15976538.post@talk.nabble.com> <47D6985C.40207@gmail.com>
	 <76df56980803110741t615a9d8v500e4d4a7de4b0c2@mail.gmail.com>
	 <c68e39170803110754q61712bc5uad7effef1e71eb6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, my index is a "full-snapshot" created every "n" hours, there are
no incremental updates, so I decided to make another MatchAllDocsQuery
taking advantage that my index is read-only and basically removing
this checks.

Regards

Ger
german.kondolf@gmail.com

On Tue, Mar 11, 2008 at 11:54 AM, Yonik Seeley <yonik@apache.org> wrote:
> On Tue, Mar 11, 2008 at 10:41 AM, German Kondolf
>  <german.kondolf@gmail.com> wrote:
>  > *:* is parsed as a MatchAllDocsQuery?
>  >
>  >  I've got some preformance issues in Lucene 2.2 because
>  >  MatchAllDocsQuery ask for a "isDeleted()" for every document, I didn't
>  >  tried it in 2.3.
>
>  That will still be the case in 2.3 (and it's a synchronized call... ouch).
>  That's one of the reasons why read-only IndexReaders would be a good idea.
>
>  -Yonik
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 15:07:17 2008
Return-Path: <java-user-return-33055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79690 invoked from network); 11 Mar 2008 15:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 15:07:16 -0000
Received: (qmail 47978 invoked by uid 500); 11 Mar 2008 15:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47957 invoked by uid 500); 11 Mar 2008 15:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 43990 invoked by uid 99); 11 Mar 2008 15:05:03 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Message-ID: <47D69F7B.6020802@searchcapital.net>
Date: Tue, 11 Mar 2008 17:04:27 +0200
From: Ion Badita <ion.badita@searchcapital.net>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Unique Fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at genzen.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to create an index with one unique field.
Before inserting a document i must be sure that "unique field" is unique.



John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 15:08:55 2008
Return-Path: <java-user-return-33056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83279 invoked from network); 11 Mar 2008 15:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 15:08:55 -0000
Received: (qmail 50598 invoked by uid 500); 11 Mar 2008 15:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50558 invoked by uid 500); 11 Mar 2008 15:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50547 invoked by uid 99); 11 Mar 2008 15:08:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 08:08:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.190.56.21] (HELO n2.bullet.mail.re4.yahoo.com) (206.190.56.21)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Mar 2008 15:08:06 +0000
Received: from [68.142.237.89] by n2.bullet.re4.yahoo.com with NNFMP; 11 Mar 2008 15:08:15 -0000
Received: from [216.252.111.169] by t5.bullet.re3.yahoo.com with NNFMP; 11 Mar 2008 15:08:15 -0000
Received: from [127.0.0.1] by omp104.mail.re3.yahoo.com with NNFMP; 11 Mar 2008 15:08:15 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 807274.96435.bm@omp104.mail.re3.yahoo.com
Received: (qmail 67017 invoked by uid 60001); 11 Mar 2008 15:08:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=WXCHj7AmhnEdUaHzEmVzc+HKOoxFOUJtoni1hkZCyyT0tlH3+vkT+XNk5pKz3nd43eIWd1uivITIXX3Q/WZr5m7ZVzazzAJ+gq14HCO5AbV/4/rYhDh78VM6eri/AyjQ026iqW2rUUT9dOmhMBJkNWj5CAevuNSUZXWxLXmPaf8=;
X-YMail-OSG: vp.zLogVM1lLwciKnsvuqM0MyyK_g0iU6gwvUJ3a535LqCtawQnkF9oa4p8oC7ZlnGvwLZdAj9YnQc5wBX5YkMboF5UFt9daIeqPkdBCKIMcBAFB7v_4GlrpxlA-
Received: from [84.131.229.220] by web23008.mail.ird.yahoo.com via HTTP; Tue, 11 Mar 2008 15:08:14 GMT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.185
Date: Tue, 11 Mar 2008 15:08:14 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <950451.64537.qm@web23008.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

you said, if an Index is optimized, isDeleted() does not present performanc=
e problem? I think there is still check for null in synchronized method, ca=
n jvm optimize this, I doubt it?    =0A=0A----- Original Message ----=0AFro=
m: German Kondolf <german.kondolf@gmail.com>=0ATo: java-user@lucene.apache.=
org=0ASent: Tuesday, 11 March, 2008 3:59:38 PM=0ASubject: Re: Searching for=
 null (empty) fields, how to use -field:[* TO *]=0A=0AYes, my index is a "f=
ull-snapshot" created every "n" hours, there are=0Ano incremental updates, =
so I decided to make another MatchAllDocsQuery=0Ataking advantage that my i=
ndex is read-only and basically removing=0Athis checks.=0A=0ARegards=0A=0AG=
er=0Agerman.kondolf@gmail.com=0A=0AOn Tue, Mar 11, 2008 at 11:54 AM, Yonik =
Seeley <yonik@apache.org> wrote:=0A> On Tue, Mar 11, 2008 at 10:41 AM, Germ=
an Kondolf=0A>  <german.kondolf@gmail.com> wrote:=0A>  > *:* is parsed as a=
 MatchAllDocsQuery?=0A>  >=0A>  >  I've got some preformance issues in Luce=
ne 2.2 because=0A>  >  MatchAllDocsQuery ask for a "isDeleted()" for every =
document, I didn't=0A>  >  tried it in 2.3.=0A>=0A>  That will still be the=
 case in 2.3 (and it's a synchronized call... ouch).=0A>  That's one of the=
 reasons why read-only IndexReaders would be a good idea.=0A>=0A>  -Yonik=
=0A>=0A>=0A>=0A>  ---------------------------------------------------------=
------------=0A>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A>  For additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A>=0A>=0A=0A-----------------------------------------------------------=
----------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A=0A=0A=0A      ______________________________________________________=
____=0ASent from Yahoo! Mail.=0AThe World's Favourite Email http://uk.docs.=
yahoo.com/nowyoucan.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 15:49:59 2008
Return-Path: <java-user-return-33057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14302 invoked from network); 11 Mar 2008 15:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 15:49:59 -0000
Received: (qmail 31063 invoked by uid 500); 11 Mar 2008 15:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31027 invoked by uid 500); 11 Mar 2008 15:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31016 invoked by uid 99); 11 Mar 2008 15:49:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 08:49:49 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 15:49:12 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Specialized XML handling in Lucene
Date: Tue, 11 Mar 2008 11:48:24 -0400
Message-ID: <9294E20AED46934EA459020706463F947EC13B@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Specialized XML handling in Lucene
Thread-Index: AciDey9fXfV3aAMQRqu8jVZoJ00RXAAD+wVwAADenWA=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eran, see my comments below inline:

On 03/11/2008 at 9:23 AM, Eran Sevi wrote:
> I would like to ask for suggestions of the best design for
> the following scenario:
>=20
> I have a very large number of XML files (around 1M).
> Each file contains several sections. Each section contains
> many elements (about 1000-5000).
> Each element has a value and some attributes describing the
> value (like
> metadata), for example:
>=20
> <Section1>
>     <Element1  id=3D"0"  type=3D"A"  meta1=3D"val11"
>                meta2=3D"val21">value1</Element1>
>     <Element1  id=3D"1"  type=3D"B"  meta1=3D"val12"=20
>                meta2=3D"val21">value2</Element1>
> ...
> </Section1>
> <Section2>
>     <Element2 id=3D"0"  type=3D"D"  meta1=3D"val11"
>               meta3=3D"val31">value3</Element2>
>     <Element2 id=3D"1"  type=3D"B"  meta1=3D"val13"
>               meta3=3D"val34">value1</Element2>
> ...
> <Section2>
> ...
>=20
> As you can see, each attribute can have any value, and
> attribute names can be the same in different sections.
>=20
> I would like to index the XML in such a way so I can perform
> queries like:
>=20
> element1=3Dvalue1 AND type=3DA AND meta2=3Dval21
>=20
> and also more complicated queries that include positions
> between elements, and even range queries on attribute values.
>=20
> Indexing each element as a different document might not be
> possible because of the large number of documents it might
> create (more then 5 billion docs), and might also make it
> difficult to parse results - I still want to know how
> many original XML documents contains the searched terms.

5 billion docs is within the range that Lucene can handle.  I think you =
should try doc =3D element and see how well it works.

In order to know which original documents your hits come from, add an =
"xml_doc_id" field, and collect the hits' xml_doc_id values in a set, =
then take the set's cardinality.

> Indexing each attribute as a different field is also
> difficult because I then need the positional information
> of the found terms and check that they were all found in
> the same place (and thus "belong" to the same element).

You could use an XPath(-ish, depending on requirements) field that =
represents the element location, e.g.:

<Section1>
  <Element1 id=3D"0" type=3D"A" meta1=3D"val11" =
meta2=3D"val21">value1</Element1>
  <Element1 id=3D"1" type=3D"B" meta1=3D"val12" =
meta2=3D"val21">value2</Element1>
  ...
</Section1>

=3D=3D>=20

Lucene Document field-name:value

 doc #1
       xml_doc_id:1
            xpath:/Section1/Element1[1]
               id:0
             type:A
            meta1:val11
            meta2:val21
            value:value1

 doc #2
       xml_doc_id:1
            xpath:/Section1/Element1[2]
               id:1
             type:B
            meta1:val12
            meta2:val21
            value:value2

Hope it helps,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 16:27:27 2008
Return-Path: <java-user-return-33058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31939 invoked from network); 11 Mar 2008 16:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 16:27:27 -0000
Received: (qmail 97067 invoked by uid 500); 11 Mar 2008 16:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96754 invoked by uid 500); 11 Mar 2008 16:27:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96742 invoked by uid 99); 11 Mar 2008 16:27:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 09:27:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 16:26:40 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2150616qba.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 09:26:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xpLGtaHb4gLIOA/JMAKYZxktN4WCrgmGrr4U75x5LfM=;
        b=kpI6FhVQyaXKqt7c2Q/TytzjfXzYsLKGWkcT+c2oIzB776aFAdjh87TqRdvGk4MwsGkzispyhU6Hg4hzQXTJ0j9leSBkaoLURnaJ41TtrtBQXTJDUfj5TeV6/Vz4/tTBVA20FSKG9z+IQBMjuoUScPOwKhIQk8X3zd1qZaxWTqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DPSnQGNk9wbPxOMfhWpYiyoU63OsM64w5iiKb9APGX9g0la+r5caPLFDYId+DRCkFcGeI6w4VCTtlMuNbSMj3R8YjYDqRg8p4iiJ7DTD5v6GZFAu6cJBM4YuT8Vno9dx38v7x2Rjjr1QPZweG+2Q6rGWCcHb1k2I7lvmI48AKGM=
Received: by 10.142.133.15 with SMTP id g15mr2819992wfd.44.1205252810113;
        Tue, 11 Mar 2008 09:26:50 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Tue, 11 Mar 2008 09:26:50 -0700 (PDT)
Message-ID: <74f928500803110926g2bb2f63cl535970f4666c6f57@mail.gmail.com>
Date: Tue, 11 Mar 2008 18:26:50 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Specialized XML handling in Lucene
In-Reply-To: <9294E20AED46934EA459020706463F947EC13B@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2820_1945811.1205252810085"
References: <9294E20AED46934EA459020706463F947EC13B@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2820_1945811.1205252810085
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Steve for the quick reply,

Another question regarding this solution:

If I query this index structure and get results from several xml docs, is
there a better way to group results by doc id, other then iterating on all
results, get original document and check the value of xml_doc_id field?

Thanks in advance.

On Tue, Mar 11, 2008 at 5:48 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Eran, see my comments below inline:
>
> On 03/11/2008 at 9:23 AM, Eran Sevi wrote:
> > I would like to ask for suggestions of the best design for
> > the following scenario:
> >
> > I have a very large number of XML files (around 1M).
> > Each file contains several sections. Each section contains
> > many elements (about 1000-5000).
> > Each element has a value and some attributes describing the
> > value (like
> > metadata), for example:
> >
> > <Section1>
> >     <Element1  id="0"  type="A"  meta1="val11"
> >                meta2="val21">value1</Element1>
> >     <Element1  id="1"  type="B"  meta1="val12"
> >                meta2="val21">value2</Element1>
> > ...
> > </Section1>
> > <Section2>
> >     <Element2 id="0"  type="D"  meta1="val11"
> >               meta3="val31">value3</Element2>
> >     <Element2 id="1"  type="B"  meta1="val13"
> >               meta3="val34">value1</Element2>
> > ...
> > <Section2>
> > ...
> >
> > As you can see, each attribute can have any value, and
> > attribute names can be the same in different sections.
> >
> > I would like to index the XML in such a way so I can perform
> > queries like:
> >
> > element1=value1 AND type=A AND meta2=val21
> >
> > and also more complicated queries that include positions
> > between elements, and even range queries on attribute values.
> >
> > Indexing each element as a different document might not be
> > possible because of the large number of documents it might
> > create (more then 5 billion docs), and might also make it
> > difficult to parse results - I still want to know how
> > many original XML documents contains the searched terms.
>
> 5 billion docs is within the range that Lucene can handle.  I think you
> should try doc = element and see how well it works.
>
> In order to know which original documents your hits come from, add an
> "xml_doc_id" field, and collect the hits' xml_doc_id values in a set, then
> take the set's cardinality.
>
> > Indexing each attribute as a different field is also
> > difficult because I then need the positional information
> > of the found terms and check that they were all found in
> > the same place (and thus "belong" to the same element).
>
> You could use an XPath(-ish, depending on requirements) field that
> represents the element location, e.g.:
>
> <Section1>
>  <Element1 id="0" type="A" meta1="val11" meta2="val21">value1</Element1>
>  <Element1 id="1" type="B" meta1="val12" meta2="val21">value2</Element1>
>  ...
> </Section1>
>
> ==>
>
> Lucene Document field-name:value
>
>  doc #1
>       xml_doc_id:1
>            xpath:/Section1/Element1[1]
>               id:0
>             type:A
>            meta1:val11
>            meta2:val21
>            value:value1
>
>  doc #2
>       xml_doc_id:1
>            xpath:/Section1/Element1[2]
>               id:1
>             type:B
>            meta1:val12
>            meta2:val21
>            value:value2
>
> Hope it helps,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2820_1945811.1205252810085--

From java-user-return-33059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 16:29:57 2008
Return-Path: <java-user-return-33059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32949 invoked from network); 11 Mar 2008 16:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 16:29:57 -0000
Received: (qmail 4524 invoked by uid 500); 11 Mar 2008 16:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4255 invoked by uid 500); 11 Mar 2008 16:29:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4244 invoked by uid 99); 11 Mar 2008 16:29:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 09:29:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 16:29:11 +0000
Received: by rn-out-0910.google.com with SMTP id a46so1645838rne.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 09:29:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=IfRio69DRgymZma3QuG9b2ztHmt8nOKf98atN0pzgqU=;
        b=hRwFhCPDkwYLDIZ3wcTi6dOIYLdWC2iLwuCCCqTwSreEQiBsuJFQO0IlPFoVdTiU195eFb6/DOELILw83PzfvE7Qbk0G7VwPCgw7awruKCp34Ei6QL5ULonXSWbH5RviF2yoI+EvjD7kNS8CrBmTzaqFwd0O35jATqjoGrLXvuc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=gbj4vXzJoMFthYhkGtB4a/658MBSynKB57LsRMBcZ869zWGsmIh3guKlF/3K2gqTDFRVzwO6IWsOJivyrBVetwpwStWQ7isV/V2+hjTQLl5DOQS4ZcwBCrEWvKSyImz9c9jmkczX+nO94bMiarVgOV/Ry3xgdl3EKK/e9ZR/aU8=
Received: by 10.142.171.6 with SMTP id t6mr2800821wfe.173.1205252961417;
        Tue, 11 Mar 2008 09:29:21 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Tue, 11 Mar 2008 09:29:21 -0700 (PDT)
Message-ID: <74f928500803110929x6d5a2c55j834efe5a60c0c163@mail.gmail.com>
Date: Tue, 11 Mar 2008 18:29:21 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Query for "Bigger then" specific term
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2840_3345886.1205252961382"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2840_3345886.1205252961382
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

What's the best way to query Lucene for a "bigger then" term, for example "
value > 10".

I know there's a range query where I can use a large upper bound but maybe
there's something more efficient (instead of Lucene transfrom to query to
thousands of OR queries).

Thanks,
Eran.

------=_Part_2840_3345886.1205252961382--

From java-user-return-33060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 17:12:02 2008
Return-Path: <java-user-return-33060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54771 invoked from network); 11 Mar 2008 17:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 17:12:02 -0000
Received: (qmail 98822 invoked by uid 500); 11 Mar 2008 17:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98049 invoked by uid 500); 11 Mar 2008 17:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98038 invoked by uid 99); 11 Mar 2008 17:11:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:11:51 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:11:02 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Specialized XML handling in Lucene
Date: Tue, 11 Mar 2008 13:10:24 -0400
Message-ID: <9294E20AED46934EA459020706463F947EC142@SUEXCL-02.ad.syr.edu>
In-Reply-To: <74f928500803110926g2bb2f63cl535970f4666c6f57@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Specialized XML handling in Lucene
Thread-Index: AciDlMyoi41T5Dn2TRymMR7JMnc/7QAAIO9g
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eran,

On 03/11/2008 at 12:26 PM, Eran Sevi wrote:
> If I query this index structure and get results from several
> xml docs, is there a better way to group results by doc id,=20
> other then iterating on all results, get original document
> and check the value of xml_doc_id field?

Perhaps a Sort would do the grouping you want?:

<http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Sort.ht=
ml>

Check out Lucene's TestSort.java for usage hints:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_3_1/src/test/org/=
apache/lucene/search/TestSort.java?view=3Dmarkup>

Chapter 5 in Erik Hatcher's and Otis Gospodnetic's excellent book =
"Lucene in Action" covers sorting:

<http://www.manning.com/hatcher2/>

Steve

> On Tue, Mar 11, 2008 at 5:48 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> > Hi Eran, see my comments below inline:
> >=20
> > On 03/11/2008 at 9:23 AM, Eran Sevi wrote:
> > > I would like to ask for suggestions of the best design for
> > > the following scenario:
> > >=20
> > > I have a very large number of XML files (around 1M).
> > > Each file contains several sections. Each section contains
> > > many elements (about 1000-5000).
> > > Each element has a value and some attributes describing the
> > > value (like
> > > metadata), for example:
> > >=20
> > > <Section1>
> > >     <Element1  id=3D"0"  type=3D"A"  meta1=3D"val11"
> > >                meta2=3D"val21">value1</Element1> <Element1  =
id=3D"1"=20
> > >                type=3D"B"  meta1=3D"val12" =
meta2=3D"val21">value2</Element1>
> > > ...
> > > </Section1>
> > > <Section2>
> > >     <Element2 id=3D"0"  type=3D"D"  meta1=3D"val11"
> > >               meta3=3D"val31">value3</Element2> <Element2 id=3D"1" =

> > >               type=3D"B"  meta1=3D"val13" =
meta3=3D"val34">value1</Element2>
> > > ...
> > > <Section2>
> > > ...
> > >=20
> > > As you can see, each attribute can have any value, and
> > > attribute names can be the same in different sections.
> > >=20
> > > I would like to index the XML in such a way so I can perform
> > > queries like:
> > >=20
> > > element1=3Dvalue1 AND type=3DA AND meta2=3Dval21
> > >=20
> > > and also more complicated queries that include positions
> > > between elements, and even range queries on attribute values.
> > >=20
> > > Indexing each element as a different document might not be
> > > possible because of the large number of documents it might
> > > create (more then 5 billion docs), and might also make it
> > > difficult to parse results - I still want to know how
> > > many original XML documents contains the searched terms.
> >=20
> > 5 billion docs is within the range that Lucene can handle. I think =
you
> > should try doc =3D element and see how well it works.
> >=20
> > In order to know which original documents your hits come from, add =
an
> > "xml_doc_id" field, and collect the hits' xml_doc_id values in a =
set,
> > then take the set's cardinality.
> >=20
> > > Indexing each attribute as a different field is also
> > > difficult because I then need the positional information
> > > of the found terms and check that they were all found in
> > > the same place (and thus "belong" to the same element).
> >=20
> > You could use an XPath(-ish, depending on requirements) field that
> > represents the element location, e.g.:
> >=20
> > <Section1>
> >  <Element1 id=3D"0" type=3D"A" meta1=3D"val11"
> >  meta2=3D"val21">value1</Element1> <Element1 id=3D"1" type=3D"B"
> >  meta1=3D"val12" meta2=3D"val21">value2</Element1> ...
> > </Section1>
> >=20
> > =3D=3D>
> >=20
> > Lucene Document field-name:value
> >=20
> >  doc #1
> >       xml_doc_id:1
> >            xpath:/Section1/Element1[1]
> >               id:0
> >             type:A
> >            meta1:val11
> >            meta2:val21
> >            value:value1
> >=20
> >  doc #2
> >       xml_doc_id:1
> >            xpath:/Section1/Element1[2]
> >               id:1
> >             type:B
> >            meta1:val12
> >            meta2:val21
> >            value:value2
> >=20
> > Hope it helps,
> > Steve
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 17:38:14 2008
Return-Path: <java-user-return-33061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75428 invoked from network); 11 Mar 2008 17:38:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 17:38:14 -0000
Received: (qmail 57177 invoked by uid 500); 11 Mar 2008 17:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57156 invoked by uid 500); 11 Mar 2008 17:37:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57133 invoked by uid 99); 11 Mar 2008 17:37:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:37:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:37:16 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2143931hub.15
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 10:37:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=bUrcmv0KSCGvarMZ0Wbuo6cVXZt0VBquziQi3ILNKh0=;
        b=DLz3tqQYING1fGIgnmcI+MimCXhtd7tJw6Jkz54HXdQeU/4KG7/8A7eOQpYfDS1DhutVe+4J9uswhd8UpVHH2neclQlglq7c+ek+40Md+/E82RrZ/GMjiW0YriXG1yR7MzWkiAs9rVcP0lGR+nrRT9DFnS29kA/mMZQDSdl+bYM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fLIMXwwpjA1W6FBXNcDtceC/915cbCfX32pcoDfyIoLDzX17L/2c8cuPHjUNlXvbDJsR04qP1sHRVVqEw4I7c6dXmddbzk0oC9403lhxW+UA/k3kSu0xPs430pXRJbdZSwzs4HWBnkc3ZhD2Sw/w3Hmp9bH423HUR9lZIZSciJs=
Received: by 10.82.187.2 with SMTP id k2mr16963240buf.26.1205257045481;
        Tue, 11 Mar 2008 10:37:25 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Tue, 11 Mar 2008 10:37:23 -0700 (PDT)
Message-ID: <359a92830803111037u476bd57dxb7ea90972933d0ad@mail.gmail.com>
Date: Tue, 11 Mar 2008 13:37:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique Fields
In-Reply-To: <47D69F7B.6020802@searchcapital.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2114_18136250.1205257045462"
References: <47D69F7B.6020802@searchcapital.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2114_18136250.1205257045462
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can easily find whether a term is in the index with TermEnum/TermDocs
(I think TermEnum is all you really need).

Except, you'll probably also have to keep an internal map of IDs added since
the searcher was opened and check against that too.

Best
Erick

On Tue, Mar 11, 2008 at 11:04 AM, Ion Badita <ion.badita@searchcapital.net>
wrote:

> Hi,
>
> I want to create an index with one unique field.
> Before inserting a document i must be sure that "unique field" is unique.
>
>
>
> John
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2114_18136250.1205257045462--

From java-user-return-33062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 17:46:49 2008
Return-Path: <java-user-return-33062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79274 invoked from network); 11 Mar 2008 17:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 17:46:49 -0000
Received: (qmail 77509 invoked by uid 500); 11 Mar 2008 17:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77124 invoked by uid 500); 11 Mar 2008 17:46:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77113 invoked by uid 99); 11 Mar 2008 17:46:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:46:39 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:46:02 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2224783fga.27
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 10:46:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tUQz6jHgndBBy/29ssmo9uKF+N0eDt33Hg5MJSj6JtU=;
        b=gW9WkGTrpwJKgPXP5uVtvZrSogmwllaDOpXdJDkSthClxQl6rRhiB8p9O8492j2shglc/7tKSJHQ67XpgtxTlCjU+bXOOrHmto/LVBam0n5xYg+OahoWDDNbLqrorwV4tDkk7IFRiA9JuCnPV4UFXKkFJoWB8oT/6e6S28btiZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bGYBFSl/Uot0zHLG2Os1uZ4E10Dg1VNlP0c5de7SxKwIkqm4Wa47mvGLetmAdWMLQw2hEwg0vw0EW81vXMecRzqvTImzvpDlaYImSkYLDjo41oLbiVt66gt9Nyt2lkt07fZOx9HnL4jUpef07yBB+wiy9LEiJjGbD8OZhAVsWY0=
Received: by 10.82.187.2 with SMTP id k2mr16984696buf.26.1205257571508;
        Tue, 11 Mar 2008 10:46:11 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Tue, 11 Mar 2008 10:46:11 -0700 (PDT)
Message-ID: <359a92830803111046v6b261be2w5564024cdca77251@mail.gmail.com>
Date: Tue, 11 Mar 2008 13:46:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <15976538.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2190_28663788.1205257571505"
References: <15976538.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2190_28663788.1205257571505
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could also think about making a filter, probably when you open
your searcher. You can use TermDocs/TermEnum to find all of the documents
that *do* have entries for your field, assemble those into a filter, then
invert that filter. Keep the filter around and use it whenever you need
to. Perhaps CachingWrapperFilter would help here (although I've never
used the latter).

Another possibility is to index a field only for those documents that
don't have any value for MY_FIELD_NAME. So when indexing a doc, you
have something like
if (has MY_FIELD_NAME) {
   doc.add("MY_FIELD_NAME", <real value>);
} else {
   doc.add("NO_MY_FIELD_NAME", "no");
}

Now finding docs without your field really is just searching on
NO_MY_FIELD_NAME:no

Your index would be very slightly bigger in this instance....

FWIW
Erick

On Tue, Mar 11, 2008 at 10:16 AM, thogau <thogau@thogau.net> wrote:

>
> Hi,
>
>
> I browsed the forum searching for a way to make a query that retrieves
> document that do not have any value for a given field (say MY_FIELD_NAME).
>
>
> I read several posts advising to use this syntax : -MY_FIELD_NAME:[* TO *]
> However, I am not able to have it working...
>
>
> I have 2 documents, the first one has a value for the field MY_FIELD_NAME
> (In Luke, I can see the value) and the second one has no value for it (In
> Luke, I can see &lt;not available&gt;)
>
>
> I would expect the query MY_FIELD_NAME:[* TO *] to retrieve the document
> which has a value for the field MY_FIELD_NAME but it doesn't (Nevertheless
> MY_FIELD_NAME:[a* TO z*] retrieves it)
>
>
> Also, I would expect the query -MY_FIELD_NAME:[* TO *] to retrieve the
> document which has a NO value for the field MY_FIELD_NAME but it doesn't
> either...
>
>
> I guess I am missing something obvious but I am stuck... Anybody can help
> to
> understand what I am doing wrong?
>
> --
> View this message in context:
> http://www.nabble.com/Searching-for-null-%28empty%29-fields%2C-how-to-use--field%3A-*-TO-*--tp15976538p15976538.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>

------=_Part_2190_28663788.1205257571505--

From java-user-return-33063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 17:49:21 2008
Return-Path: <java-user-return-33063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82454 invoked from network); 11 Mar 2008 17:49:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 17:49:21 -0000
Received: (qmail 84298 invoked by uid 500); 11 Mar 2008 17:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84266 invoked by uid 500); 11 Mar 2008 17:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84255 invoked by uid 99); 11 Mar 2008 17:49:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:49:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:48:34 +0000
Received: by wr-out-0506.google.com with SMTP id 69so1456401wri.5
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 10:48:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=BhOvJ4qS+usmfqj0jR/swzCLy4Rpa67mClwvq6B+Ak4=;
        b=dh37qPBP6DWQbN7V6ojZn2eIinUF4itdF3noEr9y7Cm6/w7FsH+tW1ObdC3h1GPLL8FaEM1L3satKeB2gp4x9r/s+jril7aiJtqBbb94WWFBUnzBrRvQ9LYRiEwpmTmxKvAJ/famk9caccwBVrweTg/SAsFrrdyZXJun/n0O8EY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XVurxRS5n/fADVfTW+SgUfgl3NZwxMr6iRvWETXyHsyAUPthWw+3pxHDbh8QV2jiP7pblW9TQUKR6hKHHuHlbyx+yJSfk730kEOJF2xUXcWtdnLZQgYw7+NAk7M+a3NAeVGM/eOfPmpEhpBJHkykha6J9dNUGWhkiycvwPlaw9g=
Received: by 10.140.191.14 with SMTP id o14mr4512449rvf.247.1205257723347;
        Tue, 11 Mar 2008 10:48:43 -0700 (PDT)
Received: by 10.140.133.2 with HTTP; Tue, 11 Mar 2008 10:48:43 -0700 (PDT)
Message-ID: <2dab92100803111048x43ed3a2akf53b5fb9f40eb606@mail.gmail.com>
Date: Tue, 11 Mar 2008 11:48:43 -0600
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter.doAfterFlush()
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1743_32917400.1205257723338"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1743_32917400.1205257723338
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I have written an extension of IndexWriter which overrides its
doAfterFlush() method. I had no problems with this in Lucene 2.2 but I
noticed that in Lucene 2.3 the behavior of doFlush() has been changed so as
to only call doAfterFlush() on deletions rather than on both deletions and
additions to the index. I am wondering what the reasoning behind this is and
if it is safe for me to modify IndexWriter for myself locally to call the
method on additions as well.

Thank you,

Mark

------=_Part_1743_32917400.1205257723338--

From java-user-return-33064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 17:53:44 2008
Return-Path: <java-user-return-33064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84808 invoked from network); 11 Mar 2008 17:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 17:53:44 -0000
Received: (qmail 92317 invoked by uid 500); 11 Mar 2008 17:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92005 invoked by uid 500); 11 Mar 2008 17:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91994 invoked by uid 99); 11 Mar 2008 17:53:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 10:53:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:52:57 +0000
Received: by ug-out-1314.google.com with SMTP id u40so57613ugc.29
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 10:53:04 -0700 (PDT)
Received: by 10.78.100.1 with SMTP id x1mr18751431hub.47.1205257979096;
        Tue, 11 Mar 2008 10:52:59 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id q9sm496063gve.10.2008.03.11.10.52.57
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Mar 2008 10:52:58 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <2dab92100803111048x43ed3a2akf53b5fb9f40eb606@mail.gmail.com>
References: <2dab92100803111048x43ed3a2akf53b5fb9f40eb606@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <257B3E8E-947D-4A89-B1DB-587910BEF869@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter.doAfterFlush()
Date: Tue, 11 Mar 2008 13:52:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Woops -- that was not intentional.

It should be called for both additions and deletions, so, it's safe  
to fix it in your local IndexWriter.java, and I'll open a Jira, add a  
unit test and fix it in Lucene.

Thanks for raising this!

Mike

Mark Ferguson wrote:

> Hi everyone,
>
> I have written an extension of IndexWriter which overrides its
> doAfterFlush() method. I had no problems with this in Lucene 2.2 but I
> noticed that in Lucene 2.3 the behavior of doFlush() has been  
> changed so as
> to only call doAfterFlush() on deletions rather than on both  
> deletions and
> additions to the index. I am wondering what the reasoning behind  
> this is and
> if it is safe for me to modify IndexWriter for myself locally to  
> call the
> method on additions as well.
>
> Thank you,
>
> Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 19:00:38 2008
Return-Path: <java-user-return-33065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37231 invoked from network); 11 Mar 2008 19:00:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 19:00:38 -0000
Received: (qmail 23168 invoked by uid 500); 11 Mar 2008 19:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23144 invoked by uid 500); 11 Mar 2008 19:00:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23133 invoked by uid 99); 11 Mar 2008 19:00:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 12:00:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Mar 2008 18:59:49 +0000
Received: (qmail 35896 invoked by uid 60001); 11 Mar 2008 18:59:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=cRpjS0sdyszTG1J8FsXKuURzeuMalIajft6f/Gr4d5SrVGV1Qz/UXdbf25k2HE96nrutZGEdaqsvSBEKlUPmDsn5g/syDHbp7IdKLMIyrJ3759Fg7Si9yLoXZpT+UVPCECcR2MEZ2jSg6k7HT2WiQMf41VDSlN2QKQrawrV7kjc=;
X-YMail-OSG: uzgwfsUVM1kSyZb0NJhEswfqopjGWYAWhBeRKgYzGnFRVns9IucX5PNfX4RL8jhQxq1rmNEQWTxnu7bVS4KRimgI2SDBRC5ZI91em5GZpXBMZxv5ak4-
Received: from [71.249.227.161] by web50301.mail.re2.yahoo.com via HTTP; Tue, 11 Mar 2008 11:59:58 PDT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Tue, 11 Mar 2008 11:59:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Query for "Bigger then" specific term
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <994278.35760.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think there is anything more efficient than that....but I could be wrong.
If you can, consider grouping > 10 values in a small and discrete set of buckets (that you can then OR), if you are concerned with a large disjunction query.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Eran Sevi <eransevi@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, March 11, 2008 12:29:21 PM
Subject: Query for "Bigger then" specific term

Hi,

What's the best way to query Lucene for a "bigger then" term, for example "
value > 10".

I know there's a range query where I can use a large upper bound but maybe
there's something more efficient (instead of Lucene transfrom to query to
thousands of OR queries).

Thanks,
Eran.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 19:07:55 2008
Return-Path: <java-user-return-33066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42645 invoked from network); 11 Mar 2008 19:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 19:07:54 -0000
Received: (qmail 33360 invoked by uid 500); 11 Mar 2008 19:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33316 invoked by uid 500); 11 Mar 2008 19:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33305 invoked by uid 99); 11 Mar 2008 19:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 12:07:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Mar 2008 19:07:06 +0000
Received: (qmail 65669 invoked by uid 60001); 11 Mar 2008 19:07:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1uJ3joqXoqIae13MBuwfzgpS1H5oYaCBZph/jXGQwDQlQmTmftLDYNGdSdhn+SDWG9yRChhgDUX3qQq3fojgdis8aMFntmEkhE/b5E8QrP3apLmE7IUKXfvaQPeuWNSWaYqJuhR1Uks9xYIss3nb4DU+Jftrg0/RYxKWwtR0rHc=;
X-YMail-OSG: GcT7gzIVM1mbD1Ld8ZoD5He6Yu62cDBZ77R_30b.BbllqbwLKLK6GeQeseawuNh6movG3tKPNgTOTDdr5N1PW8odqf21rWDocuTh.tYCfz9v3NCpoyQ-
Received: from [71.249.227.161] by web50309.mail.re2.yahoo.com via HTTP; Tue, 11 Mar 2008 12:07:13 PDT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Tue, 11 Mar 2008 12:07:13 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Biggest index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <299694.65385.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Questions like these are always hard to answer well.  Actually, no, they are easy, right Erik: "It depends" ;)

Just kidding...partially.  Anyhow, you should ask a few more questions then:

- what is the response latency? (average, median, Nth percentile...)
- are stored fields involved, if so how many and how big are they?
- what kind of queries are involves (some are costlier than others)
- what is the search rate?
...


Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: "spring@gmx.eu" <spring@gmx.eu>
To: java-user@lucene.apache.org
Sent: Monday, March 10, 2008 5:06:04 PM
Subject: Biggest index

Hi,

I have some question about the index size on a single machine:

What is your biggest index you use in production?
Do you use MultiReader/Searcher?
What hardware do you need to serve it?
What kind of application is it?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 19:10:31 2008
Return-Path: <java-user-return-33067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44451 invoked from network); 11 Mar 2008 19:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 19:10:30 -0000
Received: (qmail 38447 invoked by uid 500); 11 Mar 2008 19:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38419 invoked by uid 500); 11 Mar 2008 19:10:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38408 invoked by uid 99); 11 Mar 2008 19:10:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 12:10:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Mar 2008 19:09:41 +0000
Received: (qmail 83319 invoked by uid 60001); 11 Mar 2008 19:09:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XI8nnhqrkYc39O9sdyytmcetxZvXM+ZXeq+Ap+zFe6/NEsNjQdPp8xOXSOZESF+UyKnmW6/gHxzUqjfxDG6jiyIXAuDpaVKj7v5Nw2iiMHJGFMcBmcrnkgpI32aMfOVJRh4+K8Jc1ysnLtzqWa2trftVB3riU61KzyrZCV8mlsg=;
X-YMail-OSG: Dub3.xEVM1kzEJOnX8zgJrJwxywr6dL5p9uTdthEyNPP6Hy6thkgHKSS81P90sQonsSuy1RcmNIQMSHEKtGX.BvgI8bkWLH5_xuu__a5v4d78JHwRMBDCss2GMv9vCNkJrRk5OKjeaR3xpc-
Received: from [71.249.227.161] by web50311.mail.re2.yahoo.com via HTTP; Tue, 11 Mar 2008 12:09:51 PDT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Tue, 11 Mar 2008 12:09:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Best way to do Query inflation?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <233509.82750.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't have the source code at hand, but have a look at Solr, as it has support for synonyms (and you could treat those extra terms as synonyms, it seems).  You don't have to switch from Lucene to Solr if you don't want to, of course, you could simply look how Solr does it.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Itamar Syn-Hershko <itamar@divrei-tora.com>
To: java-user@lucene.apache.org
Sent: Monday, March 10, 2008 12:09:50 PM
Subject: Best way to do Query inflation?

Hi all,

I'm looking for the best way to inflate a query, so a query like: "synchronous AND colour" -- will become something like this:

"(synchronous OR asynchronous OR bsynchornous OR synchronos OR asynchronos OR bsynchornos) AND (colour OR acolour OR bcolour OR color OR acolor OR bcolor)".

I'm doing two-fold action - creating another instance of the word without a specific letter(s), and then adding initial letters to all the resulting set of words. The resulting list of words should be OR'ed and replace the original word from the original query (so "colour" becomes "(colour OR acolour OR bcolour OR color OR acolor OR bcolor)"). This is for making Hebrew queries return more precise results, don't try to find the logic in English :)

What I'm looking for is the proper way and place to make the actual query expanding process. Keep in mind I will want to be able to access the complete list of words later so I could use them to highligh results in the opened document. If I could access the terms object directly somehow and replace each item with and OR'd object that would be ideal I think.

BTW, I have already established that I will have to write my own query parser derived from QueryParserBase directly, and my own Lexer, since Hebrew has some unique stuff that sometimes confuse Lucene's default. The tweaks I'm about to make should work for both Hebrew AND English, so perhaps will become the standard way of doing things...

Thanks in advance for any help,

Itamar.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 19:19:04 2008
Return-Path: <java-user-return-33068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50540 invoked from network); 11 Mar 2008 19:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 19:19:03 -0000
Received: (qmail 60667 invoked by uid 500); 11 Mar 2008 19:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60634 invoked by uid 500); 11 Mar 2008 19:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60623 invoked by uid 99); 11 Mar 2008 19:18:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 12:18:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Mar 2008 19:18:05 +0000
Received: (qmail 90120 invoked by uid 60001); 11 Mar 2008 19:18:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NWCxeDiK03B3exdH8kzQTbCzyzBmXJLyoYt7qQmqFLwQVMJPLHoBen2XJNGCXClmB+rKNA8ameRniwqu09z0+PN+a+svN3UuVh+vDgp2NZrZ0h2ssSIxt6lvs4uS80Adjgy15CryR/vV4hqv1vwRHgPnavV0aDSCgiYdlxNjF6M=;
Received: from [71.249.227.161] by web50311.mail.re2.yahoo.com via HTTP; Tue, 11 Mar 2008 12:18:24 PDT
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Tue, 11 Mar 2008 12:18:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: MultiSearcher to overcome the Integer.MAX_VALUE limit
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <772927.89918.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Trust Yonik, and trust me when I say this, please.

I, too, would guess that you'll need more than 1 machine (that's what Yonik meant by distributed search) to handle search against a 2B doc index, even if docs are small.

Otis

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: "spring@gmx.eu" <spring@gmx.eu>
To: java-user@lucene.apache.org
Sent: Saturday, March 8, 2008 3:32:56 PM
Subject: RE: MultiSearcher to overcome the Integer.MAX_VALUE limit

> Right...  but trust me, you really wouldn't want to.  You need
> distributed search at that level anyway.

Hm, 2 billion small docs are not so much.
Why do I need distributed search and what exactly do you means with
distributed search? Multiple IndexSearchers? Multiple processes? Multiple
machines?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 19:51:59 2008
Return-Path: <java-user-return-33069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73853 invoked from network); 11 Mar 2008 19:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 19:51:59 -0000
Received: (qmail 44258 invoked by uid 500); 11 Mar 2008 19:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44217 invoked by uid 500); 11 Mar 2008 19:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44206 invoked by uid 99); 11 Mar 2008 19:51:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 12:51:50 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 19:51:12 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Specialized XML handling in Lucene
Date: Tue, 11 Mar 2008 15:50:23 -0400
Message-ID: <9294E20AED46934EA459020706463F947EC150@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F947EC13B@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Specialized XML handling in Lucene
Thread-Index: AciDey9fXfV3aAMQRqu8jVZoJ00RXAAD+wVwAADenWAACANCgA==
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 03/11/2008 at 11:48 AM, Steven A Rowe wrote:
> 5 billion docs is within the range that Lucene can handle.  I
> think you should try doc =3D element and see how well it works.

Sorry, Eran, I was dead wrong about this assertion.  See this thread for =
more information:

<http://www.nabble.com/MultiSearcher-to-overcome-the-Integer.MAX_VALUE-li=
mit-td15876190.html>

Looks like doc =3D element is *not* the way to go.

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 21:44:27 2008
Return-Path: <java-user-return-33070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25419 invoked from network); 11 Mar 2008 21:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 21:44:26 -0000
Received: (qmail 12505 invoked by uid 500); 11 Mar 2008 21:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12246 invoked by uid 500); 11 Mar 2008 21:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12235 invoked by uid 99); 11 Mar 2008 21:44:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:44:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 21:43:29 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id A3DB94A81BA
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 08:43:35 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Wed, 12 Mar 2008 08:39:19 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <4BE09ECA-A2AE-4A10-A508-B7873C3BABE8@mikemccandless.com>
In-Reply-To: <4BE09ECA-A2AE-4A10-A508-B7873C3BABE8@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803120839.19906.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 11 March 2008 19:55:39 Michael McCandless wrote:
> Hi Daniel,
>
> 2.3 should be no different from 2.2 in that docIDs only "shift" when
> a merge of segments with deletions completes.
>
> Could it be the ConcurrentMergeScheduler?  Merges now run in the
> background by default and commit whenever they complete.  You can get
> back to the previous (blocking) behavior by using
> SerialMergeScheduler instead.

That was my first thought, but SerialMergeScheduler doesn't cause the problem.  
I've done a little more investigation since; it turns out that if I don't 
call optimize() then the problem doesn't occur.

Could it be that optimize(int,boolean) is storing the segments to optimise in 
a HashSet, which by its nature reorders the segments?

> If it's not that ... can you provide more details about how your
> applications is relying on docIDs?

As far as that, we assume that if there are N documents in the index then the 
next document ID will be N (we determine this before adding the document.)  
As we're only doing this in a single thread and we never delete documents, 
this was previously safe.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 21:44:51 2008
Return-Path: <java-user-return-33071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25671 invoked from network); 11 Mar 2008 21:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 21:44:51 -0000
Received: (qmail 14366 invoked by uid 500); 11 Mar 2008 21:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14341 invoked by uid 500); 11 Mar 2008 21:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14330 invoked by uid 99); 11 Mar 2008 21:44:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 14:44:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 21:43:55 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id DDCCB71C190; Tue, 11 Mar 2008 14:44:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id DAE6071C13C
	for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 14:44:14 -0700 (PDT)
Date: Tue, 11 Mar 2008 14:44:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query for "Bigger then" specific term
In-Reply-To: <74f928500803110929x6d5a2c55j834efe5a60c0c163@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803111443300.32206@radix.cryptio.net>
References: <74f928500803110929x6d5a2c55j834efe5a60c0c163@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I know there's a range query where I can use a large upper bound but maybe
: there's something more efficient (instead of Lucene transfrom to query to
: thousands of OR queries).

If you use ConstantScoreRangeQuery then there is no transformation per 
term - just a uniform score if hte document contains a value in the range




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 22:54:35 2008
Return-Path: <java-user-return-33072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52098 invoked from network); 11 Mar 2008 22:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 22:54:35 -0000
Received: (qmail 4953 invoked by uid 500); 11 Mar 2008 22:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4799 invoked by uid 500); 11 Mar 2008 22:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4788 invoked by uid 99); 11 Mar 2008 22:54:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 15:54:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 22:53:49 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2196766hub.15
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 15:53:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ehC06RUfXbrwtdPb/F1WeD5XoMD829LWUvKNLi1YRQg=;
        b=ZQfIao8J7D1Yd2lt/E1vNZlJvrg49PMaLbWUXTec/kBX3oE0vnO2B7vExZVnhHk2xqEeLuqji1gpbzpkiysYi4i65xqTfjbdozt8eB2BcIpDen1phMQ2HfyT9ggCsZNnaSVnTYs7W/756boWggxfZ+qhiRvUY76vZXe2A0+8OG4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UrNS1q6UKOEZ50hu07O5gz66UMxjCQqjwN/dh0LCvLB6pUIAj5yYjlnisIbVX2+7rKlSsJRRGC8g3LerDV9ANhSpGKeyR/gOleztlpeawPIVXyBRK9tNZCh0qktHp5TlP9RJ8nzLNtusiurAtxexFQb2aKb9PHlRbd3EEU7mOEM=
Received: by 10.82.149.8 with SMTP id w8mr17735201bud.29.1205276038608;
        Tue, 11 Mar 2008 15:53:58 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Tue, 11 Mar 2008 15:53:58 -0700 (PDT)
Message-ID: <359a92830803111553y60847045o2ab2ec895e02b497@mail.gmail.com>
Date: Tue, 11 Mar 2008 18:53:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
In-Reply-To: <200803120839.19906.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3435_10719915.1205276038614"
References: <200803111645.27956.daniel@nuix.com>
	 <4BE09ECA-A2AE-4A10-A508-B7873C3BABE8@mikemccandless.com>
	 <200803120839.19906.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3435_10719915.1205276038614
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But to me, it always seems...er...fraught to even *think* about relying
on doc ids. I know you've been around the block with Lucene, but do you
have a compelling reason to use the doc ID and not your own unique ID?

Best
Erick

On Tue, Mar 11, 2008 at 5:39 PM, Daniel Noll <daniel@nuix.com> wrote:

> On Tuesday 11 March 2008 19:55:39 Michael McCandless wrote:
> > Hi Daniel,
> >
> > 2.3 should be no different from 2.2 in that docIDs only "shift" when
> > a merge of segments with deletions completes.
> >
> > Could it be the ConcurrentMergeScheduler?  Merges now run in the
> > background by default and commit whenever they complete.  You can get
> > back to the previous (blocking) behavior by using
> > SerialMergeScheduler instead.
>
> That was my first thought, but SerialMergeScheduler doesn't cause the
> problem.
> I've done a little more investigation since; it turns out that if I don't
> call optimize() then the problem doesn't occur.
>
> Could it be that optimize(int,boolean) is storing the segments to optimise
> in
> a HashSet, which by its nature reorders the segments?
>
> > If it's not that ... can you provide more details about how your
> > applications is relying on docIDs?
>
> As far as that, we assume that if there are N documents in the index then
> the
> next document ID will be N (we determine this before adding the document.)
> As we're only doing this in a single thread and we never delete documents,
> this was previously safe.
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3435_10719915.1205276038614--

From java-user-return-33073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 11 23:20:49 2008
Return-Path: <java-user-return-33073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61247 invoked from network); 11 Mar 2008 23:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Mar 2008 23:20:49 -0000
Received: (qmail 31973 invoked by uid 500); 11 Mar 2008 23:20:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31942 invoked by uid 500); 11 Mar 2008 23:20:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31931 invoked by uid 99); 11 Mar 2008 23:20:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 16:20:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 23:20:02 +0000
Received: by py-out-1112.google.com with SMTP id z74so3082626pyg.9
        for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 16:20:11 -0700 (PDT)
Received: by 10.35.33.5 with SMTP id l5mr11331188pyj.59.1205277611515;
        Tue, 11 Mar 2008 16:20:11 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 31sm15893453wri.9.2008.03.11.16.20.10
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Mar 2008 16:20:10 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803120839.19906.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com> <4BE09ECA-A2AE-4A10-A508-B7873C3BABE8@mikemccandless.com> <200803120839.19906.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A266F33C-26A4-4A6A-870D-3C2685D17AD8@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Tue, 11 Mar 2008 19:20:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Daniel Noll wrote:

> On Tuesday 11 March 2008 19:55:39 Michael McCandless wrote:
>> Hi Daniel,
>>
>> 2.3 should be no different from 2.2 in that docIDs only "shift" when
>> a merge of segments with deletions completes.
>>
>> Could it be the ConcurrentMergeScheduler?  Merges now run in the
>> background by default and commit whenever they complete.  You can get
>> back to the previous (blocking) behavior by using
>> SerialMergeScheduler instead.
>
> That was my first thought, but SerialMergeScheduler doesn't cause  
> the problem.
> I've done a little more investigation since; it turns out that if I  
> don't
> call optimize() then the problem doesn't occur.

Oh, so you do not see the problem with SerialMergeScheduler but you  
do with ConcurrentMergeScheduler?

> Could it be that optimize(int,boolean) is storing the segments to  
> optimise in
> a HashSet, which by its nature reorders the segments?

Hmmm ... optimize does record which segments need to be merged away  
in a HashSet.  Then ConcurrentMergeScheduler will run the necessary  
merges (possibly several at once).  But the merges are still done on  
"contiguous" segments, and when committed the newly merged segment  
replaces that range of segments.  So I don't think this should be re- 
ordering documents.  Can you try running with infoStream set such  
that you get the problem to occur and then post the resulting output?

>> If it's not that ... can you provide more details about how your
>> applications is relying on docIDs?
>
> As far as that, we assume that if there are N documents in the  
> index then the
> next document ID will be N (we determine this before adding the  
> document.)
> As we're only doing this in a single thread and we never delete  
> documents,
> this was previously safe.

Oh, there are no deletions?  Then this is very strange.  Is it  
optimize that messes up the docIDs?  Or, is it when you add docs  
after having done an optimize that the newly added docs are messed up?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 00:39:22 2008
Return-Path: <java-user-return-33074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94107 invoked from network); 12 Mar 2008 00:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 00:39:22 -0000
Received: (qmail 95797 invoked by uid 500); 12 Mar 2008 00:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95752 invoked by uid 500); 12 Mar 2008 00:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95739 invoked by uid 99); 12 Mar 2008 00:39:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 17:39:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 00:38:26 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A944771C359; Tue, 11 Mar 2008 17:38:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8496471C1F0
	for <java-user@lucene.apache.org>; Tue, 11 Mar 2008 17:38:46 -0700 (PDT)
Date: Tue, 11 Mar 2008 17:38:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Help with Fuzzy Queries
In-Reply-To: <7372a1430803061019w7ce20acfi8beaf07d60c0038e@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803111733500.17107@radix.cryptio.net>
References: <7372a1430803061019w7ce20acfi8beaf07d60c0038e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1171305770-1405600996-1205282326=:17107"
X-Virus-Checked: Checked by ClamAV on apache.org

--1171305770-1405600996-1205282326=:17107
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE


:   When I try to look for something limilar with "FALHA DE DISJUNTOR", I'v=
e
: got the following results:
:      Result | score
:      FALHA DE COMANDO | 0.9277342
:      ATUA=C7=C3O FALHA DE DISJUNTOR | 0.8880876
:      RESET DE FALHA DE DISJUNTOR | 0.5709133

your best bet to make sense of scoring info like this is to start by=20
looking at the explain output for your query against each document.  note=
=20
that explain needs the real documentId so you'll have to use hit.docId();=
=20
and also note that the explaination will givey ou the "raw" score -- but=20
what will really matter to you is the relative distance in raw scores.


-Hoss


--1171305770-1405600996-1205282326=:17107
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--1171305770-1405600996-1205282326=:17107--

From java-user-return-33075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 01:31:59 2008
Return-Path: <java-user-return-33075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8978 invoked from network); 12 Mar 2008 01:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 01:31:59 -0000
Received: (qmail 37859 invoked by uid 500); 12 Mar 2008 01:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37824 invoked by uid 500); 12 Mar 2008 01:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37813 invoked by uid 99); 12 Mar 2008 01:31:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 18:31:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 01:31:03 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 801C44A81BA
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 12:31:08 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Wed, 12 Mar 2008 12:26:51 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803120839.19906.daniel@nuix.com> <359a92830803111553y60847045o2ab2ec895e02b497@mail.gmail.com>
In-Reply-To: <359a92830803111553y60847045o2ab2ec895e02b497@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200803121226.51420.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 12 March 2008 09:53:58 Erick Erickson wrote:
> But to me, it always seems...er...fraught to even *think* about relying
> on doc ids. I know you've been around the block with Lucene, but do you
> have a compelling reason to use the doc ID and not your own unique ID?

=46rom memory it was around a factor of 10 times slower to use a text field=
 for=20
this; I haven't tested it recently and the case of retrieving the Document=
=20
should be slightly faster now that we have FieldSelector, but it certainly=
=20
won't be faster as to get the document you need the ID in the first place.

=46or single documents it wasn't a problem, the use cases are:
  1. Bulk database operations based on the matched documents.
  2. Creating a filter BitSet based on a database query.

Effectively this is required because Lucene offered no way to update a=20
Document after it was indexed; if it had that feature we would never have=20
needed a database. ;-)

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 01:34:45 2008
Return-Path: <java-user-return-33076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10691 invoked from network); 12 Mar 2008 01:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 01:34:45 -0000
Received: (qmail 40603 invoked by uid 500); 12 Mar 2008 01:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40565 invoked by uid 500); 12 Mar 2008 01:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40553 invoked by uid 99); 12 Mar 2008 01:34:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 18:34:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 01:33:59 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id E16304A888D
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 12:33:55 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Wed, 12 Mar 2008 12:29:37 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803120839.19906.daniel@nuix.com> <A266F33C-26A4-4A6A-870D-3C2685D17AD8@mikemccandless.com>
In-Reply-To: <A266F33C-26A4-4A6A-870D-3C2685D17AD8@mikemccandless.com>
MIME-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_CIz1H60655cNTj9"
Message-Id: <200803121229.38013.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_CIz1H60655cNTj9
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Wednesday 12 March 2008 10:20:12 Michael McCandless wrote:
> Oh, so you do not see the problem with SerialMergeScheduler but you
> do with ConcurrentMergeScheduler?
[...]
> Oh, there are no deletions? =A0Then this is very strange. =A0Is it =A0
> optimize that messes up the docIDs? =A0Or, is it when you add docs =A0
> after having done an optimize that the newly added docs are messed up?

Ah, my bad.  It happens with both merge schedulers actually, but not during=
=20
normal merges during the indexing, only with optimize().  Also, we're not=20
adding docs after calling optimize either.  We're adding them all and mergi=
ng=20
along the way, and then calling optimize() once at the end.  If I comment o=
ut=20
that one call to optimize() the problem seems to go away entirely.  Althoug=
h=20
to be honest it was happening once before and it looked like it went away,=
=20
and we only just discovered it had returned.

> Hmmm ... optimize does record which segments need to be merged away
> in a HashSet.  Then ConcurrentMergeScheduler will run the necessary
> merges (possibly several at once).  But the merges are still done on
> "contiguous" segments, and when committed the newly merged segment
> replaces that range of segments.  So I don't think this should be re-
> ordering documents.  Can you try running with infoStream set such
> that you get the problem to occur and then post the resulting output?

Attached.

I have filtered out lines in the log which indicated an exception adding th=
e=20
document; these occur when our Reader throws an IOException and there were =
so=20
many that it bloated the file.

Daniel

--Boundary-00=_CIz1H60655cNTj9
Content-Type: application/x-gzip;
  name="stripped.log.gz"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="stripped.log.gz"

H4sICHYx10cAA3N0cmlwcGVkLmxvZwDtXVtv28oRfg/Q/0AcoG81u/eLChfpcRAgaIKeNgfoQ3IQ
0BIlK5ZIh6Rz6a/vLCVbpChz6JBay7bOQxtTJHe+vcy3MzszfPP6VfBhGc2TP0ZBHhdvkmn6vsji
aBlM4kVczNPkt3QxH/84TbNZGF1F44s4XFyP4yQO58kk/h7+M46v/pUsfryN8uIsXS7nxavagy/Z
lDJFz+mfXrz5b0B2NzYKJvNsRxN5kWZx+Pr9q3kWj+HfP16+Gn18DdeSfD7OP55FeZx/zOI0m8TZ
PJl9fO/uzz/+FmXFPFqcTImhlkRKm2gqeGyjMYklZ4IYOx2LiNzc/3v8HYQBNEF0XaQrFKfTaJHH
wTLOZjHSBW/T2a8/ivj9/H/xu83tL+V0fD7m9nz1jvfw2OR6Ee+CuXrNWZqMrzPAVryrPfCSR1Yz
xadBFi1/vZ5O46xs6tdTqkISLKPvq4vxq3Scn57Q6hU3FPHvcba8+eH1PF5M3sbJrLg4pQT+C8rG
T5uj8652c1DeTMjO+9atTZwAASvvCoL//OPdKEjSb8F0cZ1fBC+D6zyerIUmNIgWi3Rc/hkU2Xw2
i7Pyj5v3/2NczL/G7/4dvI/zHCbTKHjzavQuTaBri4sTxa0iJ5QRyYwg1BBmT8iIjCiIFKwadLLN
ltCZp59IMEnH5VC/b17613QKIE7J6qmyC4vsOl7/WfZf7cr6sXw9P5LrZfkM5Vq6P6Ar4KFVj5Mh
wJTDE5zHU2h03ZV/evFi9Y+rNC9g2udBlN+gDQBaVSY3EuliAoPh5gx0sNaGKxMk8bfX7h3xpLwu
FNPCMtcr+V9hIDilodTU3fZXePyU6VCaP/fHs5KbBOfrGbPSMvD/heuxIEomgWa3F0GaN6/yIE0C
eoMvD0EIp7N+XgY3J2FtjS+v0jl02C83b/5Efwk+bBoK/hbM85UuCE6DcrT/6N8Bb9/9Br0Ag1qu
8XxUQTbQy4NgEX+NFwEPleKg/2B9pfCHZZxaO2x7Z+/er7qz1HADvW895Ucwk0dnbgqf/P3TACtp
/e4kDZZuJZUS58FVnExgBf2tRJHFxXWW7EMD0Q4aqNQgbUpopXBatRBjvnRQfXDa9BGtSOe0URYv
06/wGsctp9fZvHFtEhXRyVWWjp2gyazx+zRLlye0cblId1wcj3dcPN95dQxL/QTaju/6bXY9n6x+
qyhUrhgxSmzrU0MZFeRWnTITCiI32pSFgtk/71eTMd+ajD1iTVZr74TCtqpsSmgjtJaPVWvC4hud
MfYEFCjrpECt7ruLE0Q8hAatDVSbMmU1Ubc3d1RbJbXaVkZcKkvpRhsJCvrHiFt1xEnIpPSzu1M7
Nnfc1+aO+1aJ3LNKHLK9B1FTMMPhOkztJ6CzeAedxQyYwn0tTzChH1ZnbY1amwLjNbm3FRiTIARt
KjDNhNV6Y51qEgrJNvspG2qp/Sgwt6traDDhS4MJ3xpMeNZgQ7b38BoM5ru7iSrv6qzifzuPFlEy
jlcet8h5ZmFcb5xxMhTKBl/zGyec88dtXHMh2DH1H0Nzu65fZ3F8SkIuRHD+o4h/hYcu19csNzCH
o6xyzYnkRC8u4Fk35lO4vJIZFOF6xb3JX18vFqtboyksuvKuUfm/pbghM3RL9ltpZSg53YciFx0U
uYDNV09Frjg9JD2+NXfblLqoYjhse50qThgDJb7tACWWUbvZI1NFQ2XUhmJkSAnzQzF0F8VIXxQj
fVOM9EwxQ7Z3YBQDS3F0BmvQO90sdx4Wwc/umGsSgOpZrcxgnCYFdP1fgvksSd2ZHfwGCvzbihQu
4yTvzF02pIK2UBcz7dQlYIGbberaoi3mqKyNj5RUdXkqdEQ1607ENNS0jYgxNDxkSiFooA1DO6JZ
C/SzcERIOOsBh4XODmiHQ5yEXeGsBNqGM/xmQXbZLGhh+lp9DHrwUHcLdTXUtnOQNUDbXC2JsXZl
59Wc62AmWiU3XC1VSMTGHJRuZXvyZ1Gzg6uVL65WvrlaeeFqWKuaEqHEsA0eMFnDSoAfYAk8Ab+X
6qABpdWqt69eHK691DK2bepQ1dA13PuKcxC64R1TTAnCK+59BYtpY7pwClzH/ahDvst00b7Uofat
DrVvdThkg49FHcKycI8I/1ZN972723v3cKJtbXRlyGDrvb3ZhbXfutllckug6mbXmO5wnKnctne/
LxwWGi13+wNxKCthWqA0wgursipi9x5eqDvwnRa93YNaegsw3NvabeM+XUW6TX2aMM5twxIQzHL4
YWMJGBECwqrXjnly2rFdJ9vGF/MZ38xnfDPfkA0+SuaDFTI6g6XxBCwE00FjGqpZ3wMVoh+5xqyP
eZv2NFXUW9rTUi1N88iDCQnNqE2QorQhaNON8lShFtaP9pS77AbrS3ta39rT+taeQzb46LUnrBZ4
guiDtScE7LF5D+c53XUWUJ523GcTXnOeO4FazgJaN+HEQ46P7UIpWtvebnf50AGi+1sJbfxia13Q
2J6Dgbdjey4Zl0AyFYahIZWqGrfFjCeGYbsc9ZR4yysivjmm0qInkhm0xSfFMrB+3BPSf1hr9zgw
Ru6kHA1jjFAOCV36Up1yaMOFJZQdKA7MCLEle4WdGBf74JioSxICIZz3TeOiT5VjttZBG+FEld44
8JAyacGM4k3nFIEeoBvnFKhNwqquKanknnPAqP90Vj/5rFXWefS5WV5WG6wo98QBE5BLSRru0IG6
85I9BSG7N9flrgYh74N6zrtRj2g/ZOiSQWyfA/XUFkMbC51XOqYZScxh6BulFLi0lDJ6q/YN7HrM
Ru3T0Bqxb7XvPfeX+kn+rar9IVt8FmofZjM0bQ+WAVgoadspOh4y6kgCi4AVneN51wLdx+tVurqq
ni9O9+75GnejBiTeqgM1mAcpLnEoC6aNJcaVPtpmCVOmmzTzTVwIq9mkNFIbEiaq1gGY3PumCe/5
0NRPQnSVJp5WSrTfWQ8ze3Rm/NeP6B6oRMmdORM6ZBI7JuGWNmKV7nVMwkKi2JY8Pxt2BaYD7N+H
tIDYHVFX/bMw5ZbUVftH7SWvYtKJ5qhsT6zo4nwjz5fmagu+jfEmle5q2EUGLCDeTOJXXDCzydqA
7ZqRVbtIrlL490l43tPnqZ/8+SrhPeEMep/zH+Y43EAOlfuscyP0Sn5sntc0kx8FUZ2TH23dDXav
bEGYzL1SOVlpaWGmH7Giq+m3Euh+pl+VBlW5L9i36Rd340TVmxMVP3Litk5oo8dqzzViJTjVxjQr
sGpGNDMbg5CH1opqAVYm910ykHrP/ad+kv+r/PhM0v89rgWY767Zh6TKpjp2cUbVRBCxf0/ctJM6
Zry94lcXdfzcDmnuNwXbNPO00okNVx10ihSNWq6SEM5URTOLUKhaaWwwbfatmb1nelPvqd6DtnjU
zFvLAqY+/PNwT39oqO2d3i8dIq48Vm6/6wYADyVsoO7hyqse66/E+VlXnigzHu+2Z4S4ryvPEtUj
eBuEuU8GZeMYC/px3+Q560SenLR/qKGLf+8ZH2PdT0u08eis0p/NaHBLOWsGRhhrnJNgEw/HmK46
ALXdO416rxBAvZcIGLTFI43evUBgEbjXeWfU4XXvRTfdS3snZD6lfExfM6tNC19UunY76VMp1fQy
ccYA2OYMhhogd7spFcNDXibMd9zokLZKEbrcN7SfwJLQhcptH8FKvp06wN0GqG3D4/ZHNaG29zs+
Uox2ZRh5KwFAvdcAoN6LAOyPTTff/GACVj43T+CbH49P24FGg6uHm5jLQ9ja9gjR2GWmNqtamu6F
flYC9bHtnJ9037bdvNv+on92LpWPsCTcIa25ts3GvNbPzQ8LWm5Nw3kqqHbV6SpfwrKgYSvnWiI0
QnlKARa7CNpblQnqvcwE9V5nYtAWj6R53wUMixSuwup8Akbp5y6kQSXv++VWoY+cMdyUayOQz9U+
3+IPTS0nshE0SI2UupJMxRTsWLitxslr66mCxM7apsxbBQnmvYIE815BYtAWj/TRay3Deh2dwUJ9
SGNsh/VS+3S4C1Dcu/Vy2YWIGOn/ITeqHnuFz0OdvW2sdFkbgB3fS9daNdO3BKW0kr7FtAptrXQe
s54Kj/JdVg3z9sF05r3EBPNeYmLQFo+0NNjChsXrflBPoSbqotMXjqnqncbLn12JhweZjG2Us6gO
xhbjCKMUaVaVoMRaqzd+NO5SFFilrgQLFdl3OSHm/5vy3utK7I9dNkdMUkprxfGE6TGsZFitozP+
AGUzhqeYZSeKEVb2NmTMMdDD88Rso5tlbWS240Sgk5RuFK/jhDBDqx8VEqGwpvpRIcs8Od7ork8r
MO7NwvFeJoN5L5MxaItHKtr/iodV7X4whxsrIUNNehX021nEXJtGVdmBalq4yIy67JWwCq324lpM
ujCyUKZv4CUl9JjB+5Drs42ek9owNRyQwlq2o7gstUZUktKYZKG1tYMx4SuuYrcHUnjjZ+9VPZj3
qh6DtnjkZ8/rH9a4a5X6T5EenrLSLpQlVW8jUhh1ZKxDmbFt9JVWh+ywK7VbkFDYRpAJk5oas/kQ
FlBrCLuuaoY3pdSTrbszyER641LvFUCY9wogg7Z45NKH1EygfeBxo7zz6jL6/topm7dxMisuYNWW
/8HPESytSQDkslJGwThNCphpfwnmsyTNnIE6TcGs/LYyVS/jJO9sUZvQ+el+vkiWdJ9fQUt+KSY7
Jpav5PnZkl80ZLwtRR4vYNal5FdXLGtxfr5+mVV3FiLtVL/MVZrG8kKYod3rlzmBfvaDbe5zOvuO
qrrqso9U1PSOqnLnGceN5AGq67ZN5VVt/HYGZTULDBjDiSCbCqNU61CyTY1RCdqN+4rK2pUMypS3
fZz3ekHMW70gGOZyG3csF/QU9QKsfSevfQoxXV+6cJxWyKcZOvhKxDGk6/CnchvffamOZSMijCrb
ZDsKG1YmNyHIoCJDKmqfkFBCeMqs3EV22hvZea/qw7xV9dkH2d0VlWYkNH0sfPActBFoHPhBHHQ5
QNPm7LjvxzBEaRDfp4JepcrCSpihK8o09wtZl/0CQO8foGefxRdmn9ASbds8ZLWB3TaWmVSakGYl
KKulsbYSUC5CY3U1wA/Y4CEza71VTmLeKycxb5WTbvYPQzZ45PSDVxigFNzj9nC/98tD2qeS0ja/
c/fdqYbHnCKHGbVKSrS1kBL68eI+hxk7Pt21tzhH9+a63NWPdwm9j41N3mVjYzntWwBKqWNx30es
pto2OXl1kBsHAswo0QyS5IYzbTcVh6lzkVQq94PS4J48JGJnDoO32lPMe+0p5q321M0W51h66vnq
DtAPIIh6CsWYi05caXsfjEt7PDR4IvO9jTeL6oAfdngmTCSjmx8OZcxqKitFqzUPRfVb2SZU1Nex
/i4a595qgHHvNcC4txpgaxoftMEjjT9etQaqa3QGOuvxU3oCFnkHUoeXmWoxy2otl+7lXY5frz7O
/sYAplfFfAlcOloPpJvux/F7PON3VCnHKXlgUzKaTFYs6rZvax692TQex9HXOAYfblT7H8GHIi2i
RUBvRmMAc+C4f34a02Qo2zgqhpoJvhmt9IcdCe04w7EZGeQXUbZy75RTZ+NJc4628SLN45tZNQpk
MJ0vwI50h7Hlw/CPzf23862ctINpz3Ga5PNJnK3p9zjHvJHtPIHx/XRdId3BBjUIFtF1Mr5wXs2g
uMjiaBJ8+L38/xM5XDPd/R+3bd8+u97tlddBbxdRVuy4+Xa38GL9xOlxgj7gBH2x5qXjKHinosqi
cAvBBe0cB+EAdPXWuACNrwwnRghZxYrsuHNcnrS8OzLuAYyiO2DbYpy7P7qGHZhtvWx1uhf88omE
02T5S/sN2Zf2G66y7+03FPMcu2HeesMnGsIfbbdQDAfFcFAMB8VwUAwHw4RkmJAME5JhQjJUSLyz
OYaDYzg4hoNjODiGg+M4BIZDYDgEhkNgOASGQ+A4JIZDYjgkhkNiOCSGQ+I4FIZDYTgUhkNhOBSG
Q+E4NIZDYzg0hkNjODSGQ+M4DIbDYDgMhsNgOAyGw+A4LIbDYjgshsNiOCyGw+I4IgxHhOGIMBwR
hiPCcJxjQp5jQp5jQp5jQp5jQo4xIceYkGNMyDEm5BgTcoIJOcGEnGBCTjAhJ5iQMSZkjAkZY0LG
mJAxJuQUE3KKCTnFhJxiQk4xIWeYkDNMyBkm5AwTcoYJeYEJeYEJeYEJeYEJeYEKiavSOYZjjuGY
YzjmGI45hmOO4/iM4fiM4fiM4fiM4fiM4fiM47jEcFxiOC4xHJcYjksMxyWOY4HhWGA4FhiOBYZj
geFYYkIuMSGXmJBLTMglKiTe2QmGI8FwJBiOBMORYDgSHEeK4UgxHCmGI8VwpBiOFMdxheG4wnBc
YTiuMBxXGI4rHMcXDMcXDMcXDMcXDMcXDMcXHEeG4cgwHBmGI8NwZBiODMeRYzhyDEeO4cgxHDmG
I8dxFBiOAsNRYDgKDEeBOlvD4ivmz/06xW6YtN8wnSBNTCdFK4pNZ3c6xp2kyQDRPJuKslERlDES
/d/ZLUKodnEdI/SYIl6vR2fluVP/95fdPgq+ZWkRbw49XHxK5UiE3cydPSQosZbjFhd+9Ufvplez
fPXSfLQOWihTy1bHc7Wzn4Fa235n37DZ4magKkP/f8Ey9GKF/QAA


--Boundary-00=_CIz1H60655cNTj9
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Boundary-00=_CIz1H60655cNTj9--

From java-user-return-33077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 02:47:00 2008
Return-Path: <java-user-return-33077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36572 invoked from network); 12 Mar 2008 02:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 02:47:00 -0000
Received: (qmail 93608 invoked by uid 500); 12 Mar 2008 02:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93572 invoked by uid 500); 12 Mar 2008 02:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93561 invoked by uid 99); 12 Mar 2008 02:46:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Mar 2008 19:46:51 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 02:46:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZGz1-0004iD-AG
	for java-user@lucene.apache.org; Tue, 11 Mar 2008 19:46:23 -0700
Message-ID: <15996864.post@talk.nabble.com>
Date: Tue, 11 Mar 2008 19:46:23 -0700 (PDT)
From: masz-wow <maznorlia.syafina@gmail.com>
To: java-user@lucene.apache.org
Subject: Index Optimization Issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: maznorlia.syafina@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I managed to optimize my index successfully. The problem that I'm having now
is when I check the index using Lucene Index Toolbox there are a few files
in the index itself is deletable. I understand that optimize method will
merge the index files but How come there is still deletable index files in
it? What I do now is delete it manually. Is there by any chance that I can
delete it automatically? Any code that I can refer to?
-- 
View this message in context: http://www.nabble.com/Index-Optimization-Issue-tp15996864p15996864.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 08:37:33 2008
Return-Path: <java-user-return-33078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50539 invoked from network); 12 Mar 2008 08:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 08:37:33 -0000
Received: (qmail 89048 invoked by uid 500); 12 Mar 2008 08:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89014 invoked by uid 500); 12 Mar 2008 08:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89003 invoked by uid 99); 12 Mar 2008 08:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 01:37:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 08:36:46 +0000
Received: by wx-out-0506.google.com with SMTP id i28so3512765wxd.20
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 01:36:54 -0700 (PDT)
Received: by 10.70.13.6 with SMTP id 6mr8639350wxm.29.1205311014576;
        Wed, 12 Mar 2008 01:36:54 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i15sm5533435wxd.17.2008.03.12.01.36.54
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 12 Mar 2008 01:36:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803121229.38013.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com> <200803120839.19906.daniel@nuix.com> <A266F33C-26A4-4A6A-870D-3C2685D17AD8@mikemccandless.com> <200803121229.38013.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Wed, 12 Mar 2008 04:36:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Daniel Noll wrote:

> I have filtered out lines in the log which indicated an exception  
> adding the
> document; these occur when our Reader throws an IOException and  
> there were so
> many that it bloated the file.

OK, I think very likely this is the issue: when IndexWriter hits an  
exception while processing a document, the portion of the document  
already indexed is left in the index, and then its docID is marked  
for deletion.  You can see these deletions in your infoStream:

   flush 0 buffered deleted terms and 30 deleted docIDs on 20 segments

This means you have deletions in your index, by docID, and so when  
you optimize the docIDs are then compacted.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 08:40:56 2008
Return-Path: <java-user-return-33079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51641 invoked from network); 12 Mar 2008 08:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 08:40:56 -0000
Received: (qmail 92945 invoked by uid 500); 12 Mar 2008 08:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92913 invoked by uid 500); 12 Mar 2008 08:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92902 invoked by uid 99); 12 Mar 2008 08:40:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 01:40:48 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 08:39:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZMVX-0008Sq-3s
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 01:40:19 -0700
Message-ID: <16000127.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 01:40:19 -0700 (PDT)
From: thogau <thogau@thogau.net>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <47D6985C.40207@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: thogau@thogau.net
References: <15976538.post@talk.nabble.com> <47D6985C.40207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your suggestion markmiller. When I try this query, I get both
documents as hits. The one with the field having a value and also the one
with the field not set...
Any idea why?


markrmiller wrote:
> 
> You cannot have a purely negative query like you can in Solr.
> 
> Try: *:* -MY_FIELD_NAME:[* TO *]
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-for-null-%28empty%29-fields%2C-how-to-use--field%3A-*-TO-*--tp15976538p16000127.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 08:55:35 2008
Return-Path: <java-user-return-33080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57645 invoked from network); 12 Mar 2008 08:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 08:55:35 -0000
Received: (qmail 6177 invoked by uid 500); 12 Mar 2008 08:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6141 invoked by uid 500); 12 Mar 2008 08:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6128 invoked by uid 99); 12 Mar 2008 08:55:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 01:55:26 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 72.14.204.237 as permitted sender)
Received: from [72.14.204.237] (HELO qb-out-0506.google.com) (72.14.204.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 08:54:48 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2409952qba.9
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 01:54:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=iTlCAMhPhXlzNX1o+6xTNvvrjSVHW9qDqRsu9tuM28Y=;
        b=q8IsXaqkKeACcW6hIxWpeYCK+ptgNjHIbcaUCx/Su3PmCNA6iVNaKIkKjw2DeWfjj/JoAI0bKCHPqXk/AjyQMeRDos1o8GBiTAqmx9oSgkJwvxaORtGQyZ8OfQFA1n4E+ZoMzWU1u34Ym8TOKg9pSeqxYMT4ArdBFDcdeVqIGS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OGZ1e8Jsc6lJ8F821C0jX/qrULSXD9e2gYUIJMbPdgfMEvluBg/uJ8KgQ31KDLUMQEpYPWEjAcXojTIE9KHQncP/+K5XWygcSwQHgmp9UPh0DrOemSBw4f+I+eSw46E4blod1iZUSDWFT6/pEdFn/kv6BDrViuoJfAOzfvZtOEY=
Received: by 10.142.237.20 with SMTP id k20mr3214411wfh.228.1205312097964;
        Wed, 12 Mar 2008 01:54:57 -0700 (PDT)
Received: by 10.142.191.18 with HTTP; Wed, 12 Mar 2008 01:54:57 -0700 (PDT)
Message-ID: <74f928500803120154r57bce271wcd77c6df25a28c7b@mail.gmail.com>
Date: Wed, 12 Mar 2008 10:54:57 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Specialized XML handling in Lucene
In-Reply-To: <9294E20AED46934EA459020706463F947EC150@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6233_14465393.1205312097947"
References: <9294E20AED46934EA459020706463F947EC13B@SUEXCL-02.ad.syr.edu>
	 <9294E20AED46934EA459020706463F947EC150@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6233_14465393.1205312097947
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Indeed it seems like a problematic way.

I would also have a problem searching for documents with more then one
value. if the query is something simple like : "value1 AND value2" I would
expect to get all xml docs with both values, but if I use the doc=element
method, I won't get any result because each doc contains only value1 or
value2 or something else, even if their xml_doc_id is the same.
back to the drawing table...
On Tue, Mar 11, 2008 at 9:50 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> On 03/11/2008 at 11:48 AM, Steven A Rowe wrote:
> > 5 billion docs is within the range that Lucene can handle.  I
> > think you should try doc = element and see how well it works.
>
> Sorry, Eran, I was dead wrong about this assertion.  See this thread for
> more information:
>
> <
> http://www.nabble.com/MultiSearcher-to-overcome-the-Integer.MAX_VALUE-limit-td15876190.html
> >
>
> Looks like doc = element is *not* the way to go.
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6233_14465393.1205312097947--

From java-user-return-33081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 08:56:33 2008
Return-Path: <java-user-return-33081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58094 invoked from network); 12 Mar 2008 08:56:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 08:56:33 -0000
Received: (qmail 11239 invoked by uid 500); 12 Mar 2008 08:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11217 invoked by uid 500); 12 Mar 2008 08:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 40908 invoked by uid 99); 12 Mar 2008 06:01:46 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-ID: <47D771A2.7070703@searchcapital.net>
Date: Wed, 12 Mar 2008 08:01:06 +0200
From: Ion Badita <ion.badita@searchcapital.net>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Unique Fields
References: <47D69F7B.6020802@searchcapital.net> <359a92830803111037u476bd57dxb7ea90972933d0ad@mail.gmail.com>
In-Reply-To: <359a92830803111037u476bd57dxb7ea90972933d0ad@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020806050103040505080901"
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at genzen.com
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020806050103040505080901
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

The "problem" is that my unique field is a title, many terms per field.
I want to make an index with titles and i don't want to have duplicates.

John


Erick Erickson wrote:
> You can easily find whether a term is in the index with TermEnum/TermDocs
> (I think TermEnum is all you really need).
>
> Except, you'll probably also have to keep an internal map of IDs added since
> the searcher was opened and check against that too.
>
> Best
> Erick
>
> On Tue, Mar 11, 2008 at 11:04 AM, Ion Badita <ion.badita@searchcapital.net>
> wrote:
>
>   
>> Hi,
>>
>> I want to create an index with one unique field.
>> Before inserting a document i must be sure that "unique field" is unique.
>>
>>
>>
>> John
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


--------------020806050103040505080901--

From java-user-return-33082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 10:57:15 2008
Return-Path: <java-user-return-33082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1570 invoked from network); 12 Mar 2008 10:57:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 10:57:15 -0000
Received: (qmail 7119 invoked by uid 500); 12 Mar 2008 10:57:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7085 invoked by uid 500); 12 Mar 2008 10:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7074 invoked by uid 99); 12 Mar 2008 10:57:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 03:57:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 10:56:16 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 68F6C45378
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 11:56:36 +0100 (CET)
Message-ID: <47D7B6E3.4000909@garambrogne.net>
Date: Wed, 12 Mar 2008 11:56:35 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Using Lucene from scripting language without any java coding
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is a POC about using Lucene, via Compass, from PHP or Python (other 
languages will come later), with only XML configuration, object 
notation, and native use of scripting language.

http://blog.garambrogne.net/index.php?post/2008/03/11/Using-Compass-without-dirtying-its-hands-with-java

It's look like Solr, but it's different.
Solr
framework: Lucene
serialisation: XML
transport: HTTP via servlet.

Goniomotre
framework : Compass + Spring
serialisation: JSON
transport: Socket via Mina

Other difference, Solr is a mature project with admin pages, caching and 
production ready stuff.
Goniometre is a prototype for Compass fan, wich like XML, and coding 
with any language except Java.

Examples, test and code are available via svn.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 13:43:37 2008
Return-Path: <java-user-return-33083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78490 invoked from network); 12 Mar 2008 13:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 13:43:37 -0000
Received: (qmail 88331 invoked by uid 500); 12 Mar 2008 13:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88307 invoked by uid 500); 12 Mar 2008 13:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88296 invoked by uid 99); 12 Mar 2008 13:43:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 06:43:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.226 as permitted sender)
Received: from [72.14.214.226] (HELO hu-out-0506.google.com) (72.14.214.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 13:42:50 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2301038hub.15
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 06:42:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=CDUqudbmnuc83qjcblMByD+nPNf7xTyqyBB6MTRqY3s=;
        b=cJG8Gegb3Tr94ipB7GOOeGvZGjHmOFuhy+yU8t05DgoFFJ/24dSDnI9zogq3bnNaFtJySwDtRTxbHAB8rdHltAOhcMCx/j67M4q60KokIHVy+quQmcZtJppfD3XywnqhxYiUaG/bowaR0Tbchlobca6OEr/RuwuFlu7PaX7M6xQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PjWSVqT/J2xuLyIsOyewJeGHCovnYMJGjK5gEiAV+/kB/uh6NKNTzNId53wBYIlwh8STOTlRtrx2gRWe3WlgUkZOFkzZl5wGGU2Gw+3lwbPWNMqop6Q9qabjD85bj8Ad7Zkoh4Y301KDyV4PONt4KtJWvqPDV1xzcEGqFcbMC5I=
Received: by 10.82.150.20 with SMTP id x20mr19849427bud.16.1205329379527;
        Wed, 12 Mar 2008 06:42:59 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Wed, 12 Mar 2008 06:42:59 -0700 (PDT)
Message-ID: <359a92830803120642x3a9afd62p7abbf0104b02cf21@mail.gmail.com>
Date: Wed, 12 Mar 2008 09:42:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
In-Reply-To: <200803121226.51420.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5635_5403312.1205329379522"
References: <200803111645.27956.daniel@nuix.com>
	 <200803120839.19906.daniel@nuix.com>
	 <359a92830803111553y60847045o2ab2ec895e02b497@mail.gmail.com>
	 <200803121226.51420.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5635_5403312.1205329379522
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I certainly found that lazy loading changed my speed dramatically, but
that was on a particularly field-heavy index.

I wonder if TermEnum/TermDocs would be fast enough on an indexed
(UN_TOKENIZED???) field for a unique id.

Mostly, I'm hoping you'll try this and tell me if it works so I don't have
to sometime <G>....

Erick

On Tue, Mar 11, 2008 at 9:26 PM, Daniel Noll <daniel@nuix.com> wrote:

> On Wednesday 12 March 2008 09:53:58 Erick Erickson wrote:
> > But to me, it always seems...er...fraught to even *think* about relying
> > on doc ids. I know you've been around the block with Lucene, but do you
> > have a compelling reason to use the doc ID and not your own unique ID?
>
> From memory it was around a factor of 10 times slower to use a text field
> for
> this; I haven't tested it recently and the case of retrieving the Document
> should be slightly faster now that we have FieldSelector, but it certainly
> won't be faster as to get the document you need the ID in the first place.
>
> For single documents it wasn't a problem, the use cases are:
>  1. Bulk database operations based on the matched documents.
>  2. Creating a filter BitSet based on a database query.
>
> Effectively this is required because Lucene offered no way to update a
> Document after it was indexed; if it had that feature we would never have
> needed a database. ;-)
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5635_5403312.1205329379522--

From java-user-return-33084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 13:50:04 2008
Return-Path: <java-user-return-33084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82792 invoked from network); 12 Mar 2008 13:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 13:50:04 -0000
Received: (qmail 9622 invoked by uid 500); 12 Mar 2008 13:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9596 invoked by uid 500); 12 Mar 2008 13:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9585 invoked by uid 99); 12 Mar 2008 13:49:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 06:49:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 13:49:17 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2302086hub.15
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 06:49:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oLDYiy3miBqec3LLuV0hxT2e+F0G6n3m58HIjYpnGN4=;
        b=lCPVlXjKVqNgmohW+bOdI+KmpyHesCW8dofKoZQOJH3pM+5VF3KK4NXSwvSH0mklA4Ubpx9H2sTVaMrpZQ5yqf9NVvvIxFQ44CiSbOim6hwChAndsRh9VtdLINcHDw96l2C4/ndrqikxScv0pgcrWT+wbl6phZGYFMdK2k+vxaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i/6Qzeg8vowboJi8+mzqI1PLeErUKzWpmJLx951uAcAGeXCNNjKxZN89Ix0lL75uqYZfxCkClFa23/FEsrj+XwJscIhaiOpu9KP9UlJhSF72OOR40seqQmAGclR97rMPaU+bv4FPNKUO2ysX+Fy5jUNm3XsPJMjr8NUn7XYsB+o=
Received: by 10.82.158.12 with SMTP id g12mr19831586bue.0.1205329766759;
        Wed, 12 Mar 2008 06:49:26 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Wed, 12 Mar 2008 06:49:26 -0700 (PDT)
Message-ID: <359a92830803120649t6349f937u9395523d76479d8c@mail.gmail.com>
Date: Wed, 12 Mar 2008 09:49:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique Fields
In-Reply-To: <47D771A2.7070703@searchcapital.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5689_22455366.1205329766750"
References: <47D69F7B.6020802@searchcapital.net>
	 <359a92830803111037u476bd57dxb7ea90972933d0ad@mail.gmail.com>
	 <47D771A2.7070703@searchcapital.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5689_22455366.1205329766750
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So, you're tokenizing the title field? If so, I don't understand how you
expect
this to work. Would the title "this is one order" and "is one order this" be
considered
identical? Would capitalization matter? Punctuation? Throwing all the terms
of a title into a tokenized field and expecting some magic to keep
duplicates
is beyond the scope of Lucene, you'll have to roll some customized solution.

For instance, index your title UN_TOKENIZED in a duplicate field (after
applying
whatever massaging you want re: punctuation, spaces, etc.). Use
TermDocs/TermEnum
on that field to detect duplicates. You won't search on this field....

Or create a hash of the title and index *that* in a separate field and check
against
the hash with termenum/terndocs. Or.....

But no, there's no magic that makes Lucene DWIM (Do What I Mean)...

Best
Erick

On Wed, Mar 12, 2008 at 2:01 AM, Ion Badita <ion.badita@searchcapital.net>
wrote:

> The "problem" is that my unique field is a title, many terms per field.
> I want to make an index with titles and i don't want to have duplicates.
>
> John
>
>
> Erick Erickson wrote:
> > You can easily find whether a term is in the index with
> TermEnum/TermDocs
> > (I think TermEnum is all you really need).
> >
> > Except, you'll probably also have to keep an internal map of IDs added
> since
> > the searcher was opened and check against that too.
> >
> > Best
> > Erick
> >
> > On Tue, Mar 11, 2008 at 11:04 AM, Ion Badita <
> ion.badita@searchcapital.net>
> > wrote:
> >
> >
> >> Hi,
> >>
> >> I want to create an index with one unique field.
> >> Before inserting a document i must be sure that "unique field" is
> unique.
> >>
> >>
> >>
> >> John
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
>

------=_Part_5689_22455366.1205329766750--

From java-user-return-33085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 13:51:56 2008
Return-Path: <java-user-return-33085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83806 invoked from network); 12 Mar 2008 13:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 13:51:56 -0000
Received: (qmail 20280 invoked by uid 500); 12 Mar 2008 13:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20240 invoked by uid 500); 12 Mar 2008 13:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20229 invoked by uid 99); 12 Mar 2008 13:51:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 06:51:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 13:51:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZRMU-00048I-4x
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 06:51:18 -0700
Message-ID: <16002412.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 06:51:18 -0700 (PDT)
From: thogau <thogau@thogau.net>
To: java-user@lucene.apache.org
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
In-Reply-To: <359a92830803111046v6b261be2w5564024cdca77251@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: thogau@thogau.net
References: <15976538.post@talk.nabble.com> <359a92830803111046v6b261be2w5564024cdca77251@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erick, I ended up by following your second suggestion.
It has been a bit tricky since I had to plug into a MapConverter but it
works as expected.
Thanks to all.

--thogau



You could also think about making a filter, probably when you open
your searcher. You can use TermDocs/TermEnum to find all of the documents
that *do* have entries for your field, assemble those into a filter, then
invert that filter. Keep the filter around and use it whenever you need
to. Perhaps CachingWrapperFilter would help here (although I've never
used the latter).

Another possibility is to index a field only for those documents that
don't have any value for MY_FIELD_NAME. So when indexing a doc, you
have something like
if (has MY_FIELD_NAME) {
   doc.add("MY_FIELD_NAME", <real value>);
} else {
   doc.add("NO_MY_FIELD_NAME", "no");
}

Now finding docs without your field really is just searching on
NO_MY_FIELD_NAME:no

Your index would be very slightly bigger in this instance....

FWIW
Erick
-- 
View this message in context: http://www.nabble.com/Searching-for-null-%28empty%29-fields%2C-how-to-use--field%3A-*-TO-*--tp15976538p16002412.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 13:54:54 2008
Return-Path: <java-user-return-33086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84855 invoked from network); 12 Mar 2008 13:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 13:54:54 -0000
Received: (qmail 27918 invoked by uid 500); 12 Mar 2008 13:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27708 invoked by uid 500); 12 Mar 2008 13:54:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27697 invoked by uid 99); 12 Mar 2008 13:54:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 06:54:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 13:53:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZRPN-0004Gi-CE
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 06:54:17 -0700
Message-ID: <16002424.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 06:54:17 -0700 (PDT)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Highlighter Hits
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

I have s slight problem using lucenes highlighter. If i have the highlighter
enabled, a query creates 0 hits, if i disable the highlighter i get the
hits.
It seems like, when i call searcher.search() and pass my Hits hits to the
highlighter function, the program quits. All prints after the highlighter
call also do not appear.
I have no idea what the problem is. 

Thanks in advise

Jens Burkhardt
-- 
View this message in context: http://www.nabble.com/Highlighter-Hits-tp16002424p16002424.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 14:14:21 2008
Return-Path: <java-user-return-33087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95227 invoked from network); 12 Mar 2008 14:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 14:14:21 -0000
Received: (qmail 73547 invoked by uid 500); 12 Mar 2008 14:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73519 invoked by uid 500); 12 Mar 2008 14:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73505 invoked by uid 99); 12 Mar 2008 14:14:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 07:14:05 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.232 as permitted sender)
Received: from [72.14.214.232] (HELO hu-out-0506.google.com) (72.14.214.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 14:13:25 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2306151hub.15
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 07:13:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yoBRXLCFhy2aAkYCC0rdL0gkC+4Cnh5q7LqFEfQ/sRM=;
        b=wFe/5Nq2Vv9z0mpzfQIpS6su4hkv3+I4eT1re7I7UgVzLybzswoCf/BoVs+ivQow1E0r2ah07b8IWUFYVC3PVzBqMvh06YOLFo8z2REphr8d0xJfMCLGXywxvuhEXomhzaINTpiLzhziayJce7VZbDgU7RJ0Jr4zpXYJTWhx16o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cjoYQvgHsuKRxVM2voXffWxSlyEQGM2TrTpPN/galx21RJe7zWQgNaXbATaejciuKmPYKTYe2Lebm7fJrNEWhGgWWUjtrUn+xjx2cxdkNHsLkbRDaagDTuroF1pS3ZazlyqF2YV7bw+FJHnYyEhqHMbHB7tcLR6byf8JGwHvvBA=
Received: by 10.82.186.5 with SMTP id j5mr19860569buf.38.1205331200634;
        Wed, 12 Mar 2008 07:13:20 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Wed, 12 Mar 2008 07:13:20 -0700 (PDT)
Message-ID: <359a92830803120713h47c93fe1g76196dabcc6d35f3@mail.gmail.com>
Date: Wed, 12 Mar 2008 10:13:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter Hits
In-Reply-To: <16002424.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5827_2009097.1205331200628"
References: <16002424.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5827_2009097.1205331200628
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What does your stack trace look like? I've never seen Lucene "just quit"
without throwing an exception, and printStackTrace() is your friend.....

Or are you catching exceptions without logging them? If so, shame
on you <G>.....

Best
Erick

P.S. I can't recommend strongly enough that you get a good IDE
and debug in it. I spent far too much of my life debugging with
printlns and never, ever want to go back there again... Eclipse
is free if sometimes "interesting" to set up. IntelliJ is sweet. And
a unit test or two will help significantly too. Sorry if you know all this,
but your comment about prints lights me right up <G>.....



On Wed, Mar 12, 2008 at 9:54 AM, JensBurkhardt <jensburkhardt@web.de> wrote:

>
> Hello everybody,
>
> I have s slight problem using lucenes highlighter. If i have the
> highlighter
> enabled, a query creates 0 hits, if i disable the highlighter i get the
> hits.
> It seems like, when i call searcher.search() and pass my Hits hits to the
> highlighter function, the program quits. All prints after the highlighter
> call also do not appear.
> I have no idea what the problem is.
>
> Thanks in advise
>
> Jens Burkhardt
> --
> View this message in context:
> http://www.nabble.com/Highlighter-Hits-tp16002424p16002424.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5827_2009097.1205331200628--

From java-user-return-33088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 15:52:58 2008
Return-Path: <java-user-return-33088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74781 invoked from network); 12 Mar 2008 15:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 15:52:58 -0000
Received: (qmail 97614 invoked by uid 500); 12 Mar 2008 15:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97582 invoked by uid 500); 12 Mar 2008 15:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97571 invoked by uid 99); 12 Mar 2008 15:52:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 08:52:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [195.170.0.94] (HELO rosebud.otenet.gr) (195.170.0.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 15:52:10 +0000
Received: from [192.168.1.42] (athedsl-400720.home.otenet.gr [79.131.117.78])
	by rosebud.otenet.gr (8.13.8/8.13.8/Debian-3) with ESMTP id m2CFqIBs018691
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 17:52:18 +0200
Message-ID: <47D7FBD7.8050503@eworx.gr>
Date: Wed, 12 Mar 2008 17:50:47 +0200
From: Ioannis Cherouvim <jc@eworx.gr>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: cannot delete cfs files on windows
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I can index many times and delete the index files (manually). But if I 
search once, then the cfs file is locked and cannot be deleted. 
Subsequent indexings create new cfs files. Even if I undeploy the tomcat 
web application which holds the search code, the cfs file cannot be deleted.


O/S:
Windows XP


Code to index:
IndexWriter writer = new IndexWriter(
    PATH,
    new StandardAnalyzer(),
    true);

writer.addDocument(doc1);
writer.addDocument(doc2);
writer.addDocument(doc3);

writer.optimize();
writer.close();


Code to search:
Searcher searcher = null;
IndexReader indexReader = null;
try {
    indexReader = IndexReader.open(PATH);
    searcher = new IndexSearcher(indexReader);
    Hits hits = searcher.search(query);
    ...
} finally {
    searcher.close();
    indexReader.close();
}



Am I doing something wrong?

thanks,
Ioannis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 17:56:04 2008
Return-Path: <java-user-return-33089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57725 invoked from network); 12 Mar 2008 17:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 17:56:04 -0000
Received: (qmail 35427 invoked by uid 500); 12 Mar 2008 17:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34546 invoked by uid 500); 12 Mar 2008 17:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34535 invoked by uid 99); 12 Mar 2008 17:55:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 10:55:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 17:55:17 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m2CHtLke007533
	for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 13:55:22 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <47D8189B.2020206@informatics.jax.org>
Date: Wed, 12 Mar 2008 13:53:31 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighter Hits
References: <16002424.post@talk.nabble.com>
In-Reply-To: <16002424.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.1.325704, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.3.12.104219
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_1100_1199 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0, __pbl.spamhaus.org_TIMEOUT '
X-Virus-Checked: Checked by ClamAV on apache.org

I suspect you are using a different analyzer to highlight than you are 
using to search.

A couple of things you can check:

Immediately after your query simply print out hits.length, this should 
conclusively tell you that you query is in fact working, after that 
ensure that you are using the same analyzer for your highlighter that 
you are for your query parser.

If you are not, its entirely possible that the text you are trying to 
highlight with is being transformed differently than how it was in the 
query, and as a result isn't matching against your fields anymore.

Hope that helps,

Matt

JensBurkhardt wrote:
> Hello everybody,
>
> I have s slight problem using lucenes highlighter. If i have the highlighter
> enabled, a query creates 0 hits, if i disable the highlighter i get the
> hits.
> It seems like, when i call searcher.search() and pass my Hits hits to the
> highlighter function, the program quits. All prints after the highlighter
> call also do not appear.
> I have no idea what the problem is. 
>
> Thanks in advise
>
> Jens Burkhardt
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 19:03:56 2008
Return-Path: <java-user-return-33090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4269 invoked from network); 12 Mar 2008 19:03:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 19:03:56 -0000
Received: (qmail 67677 invoked by uid 500); 12 Mar 2008 19:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66929 invoked by uid 500); 12 Mar 2008 19:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66918 invoked by uid 99); 12 Mar 2008 19:03:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 12:03:44 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 19:03:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZWEO-0002w4-ND
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 12:03:16 -0700
Message-ID: <16012319.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 12:03:16 -0700 (PDT)
From: Raq <roqs@hotmail.com>
To: java-user@lucene.apache.org
Subject: Indexing Yes and No
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roqs@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Querying Lucene with

includeNews:Yes

Works fine and brings back expected results..

includeNews:No

Does not work and brings back nothing..

There are definitely documents in my index that has the word "No" in the
includeNews field.

Tested in Luke with all the analyzers.

Any ideas? Any thoughts? Any workarounds..? 

Any help much appreciated.

Thanks

Raq
-- 
View this message in context: http://www.nabble.com/Indexing-Yes-and-No-tp16012319p16012319.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 21:00:33 2008
Return-Path: <java-user-return-33091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77778 invoked from network); 12 Mar 2008 21:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 21:00:33 -0000
Received: (qmail 57801 invoked by uid 500); 12 Mar 2008 21:00:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57775 invoked by uid 500); 12 Mar 2008 21:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57764 invoked by uid 99); 12 Mar 2008 21:00:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 14:00:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 20:59:46 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1310151nfc.15
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 13:59:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=y3+PEhBUG9ccIR6zVnO3cg2Dv6cXf1spJBFZuoQiuMo=;
        b=WeNOVLHN1oDMgaujI9nJNOPdvXwBoAYkafMpt7ykTShsoJ/AKBMWaRhyqKKaUSK0ThYAyd95eCWKdKeMYVzq18QI22rFkJpDJiN2J1JO7uF9d+64iRfwzfv2q9hBpw1iUGRA8n8a84vQSP8IFesKe/GUowrU+icG2XjkTuv4PTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=xkniz7ZEaAWPZKz/bvXbTFurlUH9W/0wWS3Wwx4Kpzom/t5XPxSjZdJXYrXgxv6sarecae+WbU8rBvfsqrSUqGWcqxHVoXcwo10leB9DXQZA4koTVC3xRoRBWCWz90EUJoaBESAUhDtj/2vMpJChxY1bWwo/O98EiQ7EWUHclDc=
Received: by 10.142.222.21 with SMTP id u21mr3930359wfg.189.1205355593501;
        Wed, 12 Mar 2008 13:59:53 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Wed, 12 Mar 2008 13:59:52 -0700 (PDT)
Message-ID: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
Date: Wed, 12 Mar 2008 16:59:52 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader deleteDocument
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10576_32834655.1205355593508"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10576_32834655.1205355593508
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
 I am trying to delete a document without using the hits object.
What is the unique field in the index that I can use to delete the document?

I am trying to make a web interface where index can be modified, smaller
subset of what Luke does but using JSPs and Servlet.

to use deleteDocument(int docNum)
I need docNum how can I get this? or does it have to come only vis Hits?

Thanks,
Varun

------=_Part_10576_32834655.1205355593508--

From java-user-return-33092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 21:16:27 2008
Return-Path: <java-user-return-33092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91433 invoked from network); 12 Mar 2008 21:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 21:16:27 -0000
Received: (qmail 75710 invoked by uid 500); 12 Mar 2008 21:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75675 invoked by uid 500); 12 Mar 2008 21:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75664 invoked by uid 99); 12 Mar 2008 21:16:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 14:16:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 21:15:41 +0000
Received: by py-out-1112.google.com with SMTP id z74so3594980pyg.9
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 14:15:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=204CRPzoDFmR7I09mj3pSvCE9ewinw4yhy94JftJO/E=;
        b=bmAPpiM0KPj8N28yJGtGpiForCRsqfXqdUf2wC+YlprHbZgZkBARRD5tKGXhceyYAhuZyVe3w0jyJUcEZtFguLiNj3H2H4YKH2wYozTdxlkAwxySahr1jfC5Ok/zFvJ3mEsFn2FU96DtxoFZr9n0cVbDYhM4H3OoSiBvTLlLBik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=b/1sEn5TNPPSkRT0HU8XufrYy+73OVuc5aWXcZtRXWYIu/Ws1NmddzaabJQaP8gZpSqvZXpeT0i0Vzq6PSeSJK1zQSkUUVw5JeeyUA2dwfVjwY8VkLK74yuEQ+p0+zW4zVzRR5mVm5LaZ2lr0IDXGcdqT5zoBJgzTLdGsSxA/LI=
Received: by 10.65.105.3 with SMTP id h3mr18306529qbm.43.1205356551325;
        Wed, 12 Mar 2008 14:15:51 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e19sm12067526qbe.6.2008.03.12.14.15.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Mar 2008 14:15:50 -0700 (PDT)
Message-ID: <47D847FE.9060105@gmail.com>
Date: Wed, 12 Mar 2008 17:15:42 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031102)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
In-Reply-To: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Have you seen the work that Mark Harwood has done making a GWT version 
of Luke? I think its in the latest release.

varun sood wrote:
> Hi,
>   I am trying to delete a document without using the hits object.
> What is the unique field in the index that I can use to delete the document?
>
> I am trying to make a web interface where index can be modified, smaller
> subset of what Luke does but using JSPs and Servlet.
>
> to use deleteDocument(int docNum)
> I need docNum how can I get this? or does it have to come only vis Hits?
>
> Thanks,
> Varun
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 21:18:22 2008
Return-Path: <java-user-return-33093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92528 invoked from network); 12 Mar 2008 21:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 21:18:22 -0000
Received: (qmail 78788 invoked by uid 500); 12 Mar 2008 21:18:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78755 invoked by uid 500); 12 Mar 2008 21:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78744 invoked by uid 99); 12 Mar 2008 21:18:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 14:18:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 21:17:35 +0000
Received: by py-out-1112.google.com with SMTP id z74so3595783pyg.9
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 14:17:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=SbyL061cb2py4ejfdLpjNlhc2clZJ3AVmQLZZ+H6s7k=;
        b=tB5fAjBg4J+04G6ukB3xve6yu/M655++uRMDD5fZIC9J4FCWlluB/TAeALThA62BkAO2D7puao4TqUmPK3IUTTXyJpUy1Ya6qiH8/qI1NcHBZQnxsZPm+TBJZ+uVl1L9fhCKjows5XXq+UfuF8l++tyrtn2RBrshmEy2w5L4YAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=H+ovHU4xMyY7SCutWWrmH55ti4wMXXVgdfQ9SxHWAfu6pY/jjrkQw9YyuFTyTQn6AzF5WNiqT3vyp6YG5wumNTHMo4Ee4d8HnilooBwFH5Jg7ZqdjT58J9sjlwHcdzlZfly0N5cZRLhPS2jt/0E6ABLs3o5bZS3D/XGB4aTwlmc=
Received: by 10.65.163.8 with SMTP id q8mr18301170qbo.23.1205356665091;
        Wed, 12 Mar 2008 14:17:45 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e18sm12047972qba.27.2008.03.12.14.17.43
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Mar 2008 14:17:43 -0700 (PDT)
Message-ID: <47D84870.30802@gmail.com>
Date: Wed, 12 Mar 2008 17:17:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031102)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing Yes and No
References: <16012319.post@talk.nabble.com>
In-Reply-To: <16012319.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well, if your using a stopword list, "no" is likely to be on it and 
"yes" is not.

Raq wrote:
> Querying Lucene with
>
> includeNews:Yes
>
> Works fine and brings back expected results..
>
> includeNews:No
>
> Does not work and brings back nothing..
>
> There are definitely documents in my index that has the word "No" in the
> includeNews field.
>
> Tested in Luke with all the analyzers.
>
> Any ideas? Any thoughts? Any workarounds..?
>
> Any help much appreciated.
>
> Thanks
>
> Raq
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 21:44:58 2008
Return-Path: <java-user-return-33094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10399 invoked from network); 12 Mar 2008 21:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 21:44:58 -0000
Received: (qmail 23643 invoked by uid 500); 12 Mar 2008 21:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22974 invoked by uid 500); 12 Mar 2008 21:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22957 invoked by uid 99); 12 Mar 2008 21:44:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 14:44:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 72.14.204.225 as permitted sender)
Received: from [72.14.204.225] (HELO qb-out-0506.google.com) (72.14.204.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 21:44:12 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2649320qba.9
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 14:44:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xETylh0kCLC0JJ+/fS5sDv1TTE8KPXCq/AsnFnQA9zc=;
        b=WPTC6VMV7kKVqV/Yr0/DrXHC9VTt9i4LR5ddisA32/8ps4IXYC0mF/cScVJPzyM1qFm8B2qFy1oz0YNPQpPYzpqIgWnABe7lBKAMmf+ihfyBZGZLlROtZGXkkWDMCBYOgIrqOUolS3/d6YRDdK1TSBIb4DvXsUAOxN15XTALE78=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oQ69FOQ5mzOUTb0R2GetqNXvPLKcQY9Jsd19BKHRtkjLVvC3J+cghqdYIjkiPpoTv95f2LogzXsvXTms+T/JYEQ3AewvOCna3/j2eAXe9zzi11y20Ekc77We7k5J7OcJjAF6qtSz0sOQrAMgo76S3QEX1sK9AZddAZQqMXok598=
Received: by 10.143.5.21 with SMTP id h21mr3957710wfi.80.1205358261900;
        Wed, 12 Mar 2008 14:44:21 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Wed, 12 Mar 2008 14:44:21 -0700 (PDT)
Message-ID: <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
Date: Wed, 12 Mar 2008 17:44:21 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <47D847FE.9060105@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10844_3793.1205358261655"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10844_3793.1205358261655
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. I haven't but I will. even though I would like to make my own
implementation. So any idea of how to get the "doc num"?

Thanks for replying.
Varun

On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Have you seen the work that Mark Harwood has done making a GWT version
> of Luke? I think its in the latest release.
>
> varun sood wrote:
> > Hi,
> >   I am trying to delete a document without using the hits object.
> > What is the unique field in the index that I can use to delete the
> document?
> >
> > I am trying to make a web interface where index can be modified, smaller
> > subset of what Luke does but using JSPs and Servlet.
> >
> > to use deleteDocument(int docNum)
> > I need docNum how can I get this? or does it have to come only vis Hits?
> >
> > Thanks,
> > Varun
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10844_3793.1205358261655--

From java-user-return-33095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 12 23:48:01 2008
Return-Path: <java-user-return-33095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84440 invoked from network); 12 Mar 2008 23:48:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Mar 2008 23:48:01 -0000
Received: (qmail 12531 invoked by uid 500); 12 Mar 2008 23:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12500 invoked by uid 500); 12 Mar 2008 23:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12488 invoked by uid 99); 12 Mar 2008 23:47:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 16:47:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 23:47:05 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id AF7504A81BA
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 10:47:11 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Thu, 13 Mar 2008 10:42:50 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803121229.38013.daniel@nuix.com> <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com>
In-Reply-To: <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803131042.50640.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 12 March 2008 19:36:57 Michael McCandless wrote:
> OK, I think very likely this is the issue: when IndexWriter hits an
> exception while processing a document, the portion of the document
> already indexed is left in the index, and then its docID is marked
> for deletion.  You can see these deletions in your infoStream:
>
>    flush 0 buffered deleted terms and 30 deleted docIDs on 20 segments
>
> This means you have deletions in your index, by docID, and so when
> you optimize the docIDs are then compacted.

Aha.  Under 2.2, a failure would result in nothing being added to the text 
index so this would explain the problem.  It would also explain why smaller 
data sets are less likely to cause the problem (it's less likely for there to 
be an error in it.)

Workarounds?
  - flush() after any IOException from addDocument()  (overhead?)
  - use ++ to determine the next document ID instead of
    index.getWriter().docCount()  (out of sync after an error but fixes itself
    on optimize().
  - Use a field for a separate ID (slower later when reading the index)
  - ???

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 00:41:10 2008
Return-Path: <java-user-return-33096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12894 invoked from network); 13 Mar 2008 00:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 00:41:10 -0000
Received: (qmail 69261 invoked by uid 500); 13 Mar 2008 00:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69226 invoked by uid 500); 13 Mar 2008 00:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69215 invoked by uid 99); 13 Mar 2008 00:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 17:41:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 00:40:25 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2784214fga.27
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 17:40:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=MwX17XZr9Glok/GPeEKf3EHS46hnaErQvKzjKoKauOo=;
        b=SWC5gk73giKz+SJrY0q1uA98kaYuLMFTRVIWLtYS3z9N62+9CRcwJs/bCQ0g9Ie4L06qUmz31hCDeuai8fU5z+gnVnm6kibzlyeetn9kZ6VSlLCOMaTwjRlZ2jD1NtDF0srxmTtkKZj0W7bdGOvwbMULbBIY0kXJ3a47CBI7UYw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=oclEpZRibNV2yXnf57EjdAhSXUqk0k9VZReunnYIB6jr9GSH4WDnRbBeFOu0gHBa10JYWCKON4wCzLavG8SDjQh5Cmtq+aeuFHTydFQ5Fv9TQ7doOOgeeU4R40Qy49ZQ7ObDzjJ6TxgGwBh6Xj77/Y8ZNTxC2hDnxTSKcn+uss4=
Received: by 10.86.97.7 with SMTP id u7mr2952977fgb.54.1205368835719;
        Wed, 12 Mar 2008 17:40:35 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Wed, 12 Mar 2008 17:40:35 -0700 (PDT)
Message-ID: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
Date: Wed, 12 Mar 2008 17:40:35 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing api wrt Analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8626_17518163.1205368835701"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8626_17518163.1205368835701
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:

    Maybe this has been asked before:

    I am building an index consists of multiple languages, (stored as a
field), and I have different analyzers depending on the language of the
language to be indexed. But the IndexWriter takes only an Analyzer.

    I was hoping to have IndexWriter take an AnalyzerFactory, where the
AnalyzerFactory produces Analyzer depending on some criteria of the
document, e.g. language.

    Maybe I am going about the wrong way.

    Any suggestions on how to go about?

Thanks

-John

------=_Part_8626_17518163.1205368835701--

From java-user-return-33097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 04:21:56 2008
Return-Path: <java-user-return-33097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8816 invoked from network); 13 Mar 2008 04:21:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 04:21:56 -0000
Received: (qmail 28809 invoked by uid 500); 13 Mar 2008 04:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28779 invoked by uid 500); 13 Mar 2008 04:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28768 invoked by uid 99); 13 Mar 2008 04:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 21:21:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of asgeirf@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:21:10 +0000
Received: by wx-out-0506.google.com with SMTP id i28so4047330wxd.20
        for <java-user@lucene.apache.org>; Wed, 12 Mar 2008 21:21:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RFSIHA483IyLy2W2S521onMf14ksVCYhehA2yy76UsQ=;
        b=mRHPconKM3lARsAD3Je2tJruN3Ij0w8YscotkaGOZbNURsgNHGxvzZg57/N0c3UwWg2BIAw/oHB7NtgvVV5j7eqJ+mfxGvxPWuohQxBIfXW0iYGiFZlHHTIRhexiXdQsBOelWZYqp1l/IX59PTXGu9gWz1Gxst/kSr4/0OdPnEo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tY3vpGwrRI6Dbp8RCHAxj9bAHEs3RcGIO6HM6eV5+4xPhINMHqC0qjIv9kDgQphkcTWnBplIZhbKk692bvsBhkLYsIzeesrI5CnmzMQcckEpQDAN9i5I3q5HKROxRceVfgkLGKGiI+TI6Z5b4LetNFfQqaDP1g/6zLpoXq3xX6s=
Received: by 10.114.204.7 with SMTP id b7mr8464182wag.129.1205382079620;
        Wed, 12 Mar 2008 21:21:19 -0700 (PDT)
Received: by 10.114.88.12 with HTTP; Wed, 12 Mar 2008 21:21:19 -0700 (PDT)
Message-ID: <75db4b7e0803122121x4d1affcbk56b8b04069c9b7fd@mail.gmail.com>
Date: Thu, 13 Mar 2008 14:21:19 +1000
From: "Asgeir Frimannsson" <asgeirf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing api wrt Analyzer
In-Reply-To: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15270_18157244.1205382079623"
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15270_18157244.1205382079623
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Thu, Mar 13, 2008 at 10:40 AM, John Wang <john.wang@gmail.com> wrote:

> Hi all:
>
>    Maybe this has been asked before:
>
>    I am building an index consists of multiple languages, (stored as a
> field), and I have different analyzers depending on the language of the
> language to be indexed. But the IndexWriter takes only an Analyzer.
>
>    I was hoping to have IndexWriter take an AnalyzerFactory, where the
> AnalyzerFactory produces Analyzer depending on some criteria of the
> document, e.g. language.
>
>    Maybe I am going about the wrong way.
>
>    Any suggestions on how to go about?
>

Perhaps this is what you are searching for:

http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html

With PerFieldAnalyzerWrapper, you can specify which analyzer to use with
each field, as well as a default analyzer.

cheers,
asgeir

------=_Part_15270_18157244.1205382079623--

From java-user-return-33098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 04:34:10 2008
Return-Path: <java-user-return-33098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10637 invoked from network); 13 Mar 2008 04:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 04:34:10 -0000
Received: (qmail 34862 invoked by uid 500); 13 Mar 2008 04:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34834 invoked by uid 500); 13 Mar 2008 04:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34823 invoked by uid 99); 13 Mar 2008 04:34:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 21:34:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:33:24 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EDB834A81BA
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 15:33:22 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: indexing api wrt Analyzer
Date: Thu, 13 Mar 2008 15:29:00 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com> <75db4b7e0803122121x4d1affcbk56b8b04069c9b7fd@mail.gmail.com>
In-Reply-To: <75db4b7e0803122121x4d1affcbk56b8b04069c9b7fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803131529.00710.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 13 March 2008 15:21:19 Asgeir Frimannsson wrote:
> >    I was hoping to have IndexWriter take an AnalyzerFactory, where the
> > AnalyzerFactory produces Analyzer depending on some criteria of the
> > document, e.g. language.

> With PerFieldAnalyzerWrapper, you can specify which analyzer to use with
> each field, as well as a default analyzer.

Certainly this would work as long as you store each language in a different 
Lucene field.  This is probably a good idea anyway as it will be easier for 
the QueryParser where there won't necessarily be enough text to determine the 
language easily.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 05:05:20 2008
Return-Path: <java-user-return-33099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16102 invoked from network); 13 Mar 2008 05:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 05:05:20 -0000
Received: (qmail 50371 invoked by uid 500); 13 Mar 2008 05:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50335 invoked by uid 500); 13 Mar 2008 05:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50324 invoked by uid 99); 13 Mar 2008 05:05:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 22:05:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 05:04:34 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 909B14A8144
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 16:04:33 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Thu, 13 Mar 2008 16:00:11 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803121226.51420.daniel@nuix.com> <359a92830803120642x3a9afd62p7abbf0104b02cf21@mail.gmail.com>
In-Reply-To: <359a92830803120642x3a9afd62p7abbf0104b02cf21@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803131600.11741.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 13 March 2008 00:42:59 Erick Erickson wrote:
> I certainly found that lazy loading changed my speed dramatically, but
> that was on a particularly field-heavy index.
>
> I wonder if TermEnum/TermDocs would be fast enough on an indexed
> (UN_TOKENIZED???) field for a unique id.
>
> Mostly, I'm hoping you'll try this and tell me if it works so I don't have
> to sometime <G>....

I added a "uid" field to our existing fields.  After the load there were some 
gaps in the values for this field; presumably those were documents where 
adding the doc failed and adding the fallback doc also failed.  The index 
contains 20004 documents.  Each test I ran over 10 iterations and times below 
are an average of the last 5 as it took around 5 rounds to warm up.

Filter building, for a filter returning 1000 documents randomly selected:

   Time to build filter by UID (100% Derby) - 93ms
   Additional time to build filter by DocID - 12ms (13% penalty)

13% penalty is acceptable IMO.  The problem comes next.

Bulk operation building, for a query returning around 2800 documents:

   Time to build the bulkop by DocID (100% Hits) - 6ms
   Time to fetch the "uid" field from the document - 152ms (2600% penalty)
   Time to do the DB query (not counting commit though) - 10ms

For interest's sake I also timed fetching the document with no FieldSelector, 
that takes around 410ms for the same documents.  So there is still a big 
benefit in using the field selector, it just isn't anywhere near enough to 
get it close to the time it takes to retrieve the doc IDs.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 06:08:11 2008
Return-Path: <java-user-return-33100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97669 invoked from network); 13 Mar 2008 06:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 06:08:10 -0000
Received: (qmail 87022 invoked by uid 500); 13 Mar 2008 06:08:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86995 invoked by uid 500); 13 Mar 2008 06:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86984 invoked by uid 99); 13 Mar 2008 06:08:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 23:08:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:07:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZgbH-0002GV-5e
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 23:07:35 -0700
Message-ID: <16021739.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 23:07:35 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Good way of Indexing TextFiles
In-Reply-To: <15950791.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <15950791.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
        I tried one Indexing Stratergy:  
             1.I am having unique numbers as the search column for ex : my
search query should be

  9840836588 AND dateSc:[13/03/2008 TO 16/03/2008]

while Indexing the numbers i divide the number by 30000 

9840836588%30000 = 26588

creating a folder in the foloowing format 

"/200080301-200080316/26588"

I index and store the records in that folder.so while searching i get the
modulo and search the records only in that folder.

is it a good way of indexing?  
 
               

Sebastin wrote:
> 
> Hi All,
>        I am going to create a Lucene Index Store of Size 300 GB per
> month.I read Lucene Index Performance tips in wiki.can anyone suggest what
> are all the steps need to be followed while dealing with big Indexes.My
> Index Store gets updated every second.I used to search 15 days records
> approximately 150 GB records,in a time.Does anyone give me a clue,what
> have to set JVM for both Index and Search to avoid Out of memory error and
> how can i create Index store for large Indexes?    
> 

-- 
View this message in context: http://www.nabble.com/Good-way-of-Indexing-TextFiles-tp15950791p16021739.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 06:12:45 2008
Return-Path: <java-user-return-33101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 352 invoked from network); 13 Mar 2008 06:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 06:12:43 -0000
Received: (qmail 92040 invoked by uid 500); 13 Mar 2008 06:12:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92000 invoked by uid 500); 13 Mar 2008 06:12:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91989 invoked by uid 99); 13 Mar 2008 06:12:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Mar 2008 23:12:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:11:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZgfg-0002MN-N5
	for java-user@lucene.apache.org; Wed, 12 Mar 2008 23:12:08 -0700
Message-ID: <16021743.post@talk.nabble.com>
Date: Wed, 12 Mar 2008 23:12:08 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Good way of Indexing TextFiles
In-Reply-To: <15950791.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <15950791.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
        I tried one Indexing Stratergy:  
             1.I am having unique numbers as the search column for ex : my
search query should be

  9840836588 AND dateSc:[13/03/2008 TO 16/03/2008]

while Indexing the numbers i divide the number by 30000 

9840836588%30000 = 26588

creating a folder in the foloowing format 

"/200080301-200080316/26588"

I index and store the records in that folder.so while searching i get the
modulo and search the records only in that folder.

is it a good way of indexing?  
 
               

Sebastin wrote:
> 
> Hi All,
>        I am going to create a Lucene Index Store of Size 300 GB per
> month.I read Lucene Index Performance tips in wiki.can anyone suggest what
> are all the steps need to be followed while dealing with big Indexes.My
> Index Store gets updated every second.I used to search 15 days records
> approximately 150 GB records,in a time.Does anyone give me a clue,what
> have to set JVM for both Index and Search to avoid Out of memory error and
> how can i create Index store for large Indexes?    
> 

-- 
View this message in context: http://www.nabble.com/Good-way-of-Indexing-TextFiles-tp15950791p16021743.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 08:47:01 2008
Return-Path: <java-user-return-33102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72909 invoked from network); 13 Mar 2008 08:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 08:47:01 -0000
Received: (qmail 33071 invoked by uid 500); 13 Mar 2008 08:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33043 invoked by uid 500); 13 Mar 2008 08:46:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33028 invoked by uid 99); 13 Mar 2008 08:46:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 01:46:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 08:46:07 +0000
Received: by an-out-0708.google.com with SMTP id c5so772328anc.49
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 01:46:16 -0700 (PDT)
Received: by 10.100.57.6 with SMTP id f6mr18982808ana.11.1205397976717;
        Thu, 13 Mar 2008 01:46:16 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm10575148hsp.4.2008.03.13.01.46.16
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Mar 2008 01:46:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803131042.50640.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com> <200803121229.38013.daniel@nuix.com> <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com> <200803131042.50640.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Thu, 13 Mar 2008 04:46:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Daniel Noll wrote:

> On Wednesday 12 March 2008 19:36:57 Michael McCandless wrote:
>> OK, I think very likely this is the issue: when IndexWriter hits an
>> exception while processing a document, the portion of the document
>> already indexed is left in the index, and then its docID is marked
>> for deletion.  You can see these deletions in your infoStream:
>>
>>    flush 0 buffered deleted terms and 30 deleted docIDs on 20  
>> segments
>>
>> This means you have deletions in your index, by docID, and so when
>> you optimize the docIDs are then compacted.
>
> Aha.  Under 2.2, a failure would result in nothing being added to  
> the text
> index so this would explain the problem.  It would also explain why  
> smaller
> data sets are less likely to cause the problem (it's less likely  
> for there to
> be an error in it.)

Yes.

> Workarounds?
>   - flush() after any IOException from addDocument()  (overhead?)

What exceptions are you actually hitting (is it really an  
IOException)?  I thought something was going wrong in retrieving or  
tokenizing  the document.

I don't think flush() helps because it just flushes the pending  
deletes as well?

>   - use ++ to determine the next document ID instead of
>     index.getWriter().docCount()  (out of sync after an error but  
> fixes itself
>     on optimize().

I think this would work, but you're definitely still in the realm of  
"guessing how Lucene assigns docIDs under the hood" so it's risky  
over time.  Likely this is the highest performance option.

But, when a normal merge of segments with deletions completes, your  
docIDs will shift.  In trunk we now explicitly compute the docID  
shifting that happens after a merge, because we don't always flush  
pending deletes when flushing added docs, but this is all done  
privately to IndexWriter.

I'm a little confused: you said optimize() introduces the problem,  
but, it sounds like optimize() should be fixing the problem because  
it compacts all docIDs to match what you were "guessing" outside of  
Lucene?  Can you post the full stack trace of the exceptions you're  
hitting?

>   - Use a field for a separate ID (slower later when reading the  
> index)

Looks too slow based on your results.

Can you pre-load the UID into the FieldCache?  There were also  
discussions recently about adding "column-stride" fields to Lucene,  
basically a faster FieldCache (to load initially), which would apply  
here I think.

>   - ???


Trunk has a new expungeDeletes method which should be lower cost than  
optimize, but not necessarily that much lower cost.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 08:48:41 2008
Return-Path: <java-user-return-33103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73675 invoked from network); 13 Mar 2008 08:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 08:48:41 -0000
Received: (qmail 38723 invoked by uid 500); 13 Mar 2008 08:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38693 invoked by uid 500); 13 Mar 2008 08:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38682 invoked by uid 99); 13 Mar 2008 08:48:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 01:48:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 08:47:55 +0000
Received: by py-out-1112.google.com with SMTP id z74so3853790pyg.9
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 01:48:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=ioQdqISp1o84FUvM9DPm+6Er2FaBfXjRvToZ201gliA=;
        b=AZaf/+yeJ2QgaxyRGWbHPPLVOiB8fJDbOhQ2r4h1GzR2i9a5QG/ykITSHioMqSqvW5n8dBGFK5WxEUMFkk8sFTXYOguVcR/lJn0XeMthC0gE4l2fHgtnJHN3yOrjCIoW1yatS4affeT2SOtcNCL1Ltiogfi3nzqBJooFKHIQI98=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=UnuML5Izn1Ic1h4gsqmjb9Q1SzN9UJQdBz2qZu1K6fClCtJPVBXdMWUqEOr2PmlGeuVGJokA1KVUKBdXRGIlr/dQ4vvfPgXjL5167GpIEmGTvWpr6TYseO/r0Xs/cMARFyY+EJne69aAUvROwew+foVmF6u7Z4f2RGJDfLIsPRw=
Received: by 10.114.39.16 with SMTP id m16mr8950406wam.146.1205398084519;
        Thu, 13 Mar 2008 01:48:04 -0700 (PDT)
Received: by 10.114.38.17 with HTTP; Thu, 13 Mar 2008 01:48:04 -0700 (PDT)
Message-ID: <2bfa20eb0803130148o11c5510dlc5a0e2c83945527e@mail.gmail.com>
Date: Thu, 13 Mar 2008 02:48:04 -0600
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Weird results with appendable fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13917_25313427.1205398084355"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13917_25313427.1205398084355
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi list,

I'm new in Lucene and I'm trying to index a set of XML documents
(document-centric) with the same structure. All this documents have a
header, a front, and a body (where there's a lot of text).

The problem is that in the header I have two fields author and title, but
one document can have more than one author, so I tried to index as
appendable field in this way:

ArrayList <String> authors =3D front.getAuthors();

for(Iterator <String> it =3D authors.iterator(); it.hasNext();){
    String out (String) it.next();
    if((aut !=3D null) && !aut.equals("")){
         doc.add(new Field("author",aut,Field.StoreYES,Field.Index.TOKENIZE=
D
));
    }
}

and I was searching in my index with Lukeand I obtained rare results. For
example: There's a document with 3 authors which appears as appendable
fields in the index this way: Freddy Pantoja Timaran, Ph.D. Gabriel Pantoja
Barrios Jorge Ivan Londo=F1o.

The thing is that when I search in Luke for Freddy, Pantoja, Gabriel,
Barrios, Iv=E1n (all in a different query) i got this document as a Hit,
that's correct, but when I search for Timaran, Londo=F1o I get no Hits, whi=
ch
is not correct.

I'm using by now WhiteSpaceAnalyzer. Any idea???

Thanks
Gustavo

------=_Part_13917_25313427.1205398084355--

From java-user-return-33104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 10:24:04 2008
Return-Path: <java-user-return-33104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33680 invoked from network); 13 Mar 2008 10:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 10:24:03 -0000
Received: (qmail 72681 invoked by uid 500); 13 Mar 2008 10:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72648 invoked by uid 500); 13 Mar 2008 10:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72637 invoked by uid 99); 13 Mar 2008 10:23:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 03:23:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 10:23:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZkas-00039c-An
	for java-user@lucene.apache.org; Thu, 13 Mar 2008 03:23:26 -0700
Message-ID: <16024349.post@talk.nabble.com>
Date: Thu, 13 Mar 2008 03:23:26 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Minimum records to create IndexStore
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
        How many records needed minimum to create a index store.when i try
to create a index store with 5 records ,it creates segments file only.
-- 
View this message in context: http://www.nabble.com/Minimum-records-to-create-IndexStore-tp16024349p16024349.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 10:50:41 2008
Return-Path: <java-user-return-33105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43186 invoked from network); 13 Mar 2008 10:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 10:50:40 -0000
Received: (qmail 9973 invoked by uid 500); 13 Mar 2008 10:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9921 invoked by uid 500); 13 Mar 2008 10:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9880 invoked by uid 99); 13 Mar 2008 10:50:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 03:50:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 10:49:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JZl0d-000470-Lk
	for java-user@lucene.apache.org; Thu, 13 Mar 2008 03:50:03 -0700
Message-ID: <16024551.post@talk.nabble.com>
Date: Thu, 13 Mar 2008 03:50:03 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: sorting a doc field takes more time
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thnxs for spending  time for the problem.

When sorting the results of lucene search it takes more time and not looks
not that much usefull can any one help 
Below is my code..

                sort = new Sort(new SortField(field));
                hits = searcher.search(query,sort);  

Once again thnx
-- 
View this message in context: http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16024551.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 11:04:21 2008
Return-Path: <java-user-return-33106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47549 invoked from network); 13 Mar 2008 11:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 11:04:20 -0000
Received: (qmail 29239 invoked by uid 500); 13 Mar 2008 11:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29210 invoked by uid 500); 13 Mar 2008 11:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29199 invoked by uid 99); 13 Mar 2008 11:04:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:04:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:03:35 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JXO0092Q1E8N3@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Thu, 13 Mar 2008 12:03:44 +0100 (MET)
Date: Thu, 13 Mar 2008 12:03:44 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Solid State Drives vs. RAMDirectory
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Virus-Checked: Checked by ClamAV on apache.org

Time for another dose of inspiration for investigating Solid State
Drives. And no, I don't get percentages from the chip manufacturers :-)

This time I'll argue that there's little gain in using a RAMDirectory
over SSDs, when performing searches. At least for our setting.


We've taken our production index of about 10 million documents / 37GB
and reduced it to 14GB by removing documents uniformly across the index.
A test with fairly simple searches were performed, using logged queries
from our production system (see the thread "Multiple Searchers" on this
mail list for details) and extracting the content of a stored field for
the first 20 hits for each search.

On a dual-core Xeon machine with 24GB of RAM, the full index can be
loaded into RAM with a RAMDirectory. The following is the average speed
over 340.000 queries. In the log names, t2 signifies 2 threads with a
shared searcher, t2u signifies 2 threads with separate searchers.

metis_RAM_24GB_i14_v23_t1_l23.log       530.0 q/sec
metis_RAM_24GB_i14_v23_t2_l23.log       888.2 q/sec
metis_RAM_24GB_i14_v23_t2u_l23.log      983.9 q/sec
metis_RAM_24GB_i14_v23_t3_l23.log       843.1 q/sec
metis_RAM_24GB_i14_v23_t3u_l23.log      996.1 q/sec
metis_RAM_24GB_i14_v23_t4_l23.log       869.8 q/sec
metis_RAM_24GB_i14_v23_t4u_l23.log      943.4 q/sec

As can be seen, the best performing configuration was 3 threads with
separate searchers. The time for loading the index into RAM was ignored.


Now for the interesting part: Reducing the amount of available RAM to
3GB and using SSDs instead.

metis_MTRONSSD_RAID0_3GB_i14_v23_t1_l23.log     433.7 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t2_l23.log     573.4 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t2u_l23.log    783.4 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t3_l23.log     459.7 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t3u_l23.log    808.5 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t4_l23.log     455.3 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t4u_l23.log    809.0 q/sec
metis_MTRONSSD_RAID0_3GB_i14_v23_t5_l23.log     454.4 q/sec

In comparison, the same test with 3GB of RAM on 15.000 RPM harddisks in
RAID 1 gave these numbers:

metis_15000RPM_RAID1_3GB_i14_v23_t1_l23.log     176.6 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t2_l23.log     188.6 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t2u_l23.log    247.1 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3_l23.log     178.4 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3u_l23.log    276.1 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4_l23.log     177.8 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4u_l23.log    259.3 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t5_l23.log     178.5 q/sec

SSDs does not equal RAMDirectory in speed for this setup, but 81% is not
bad, especially not when compared to the 28% for conventional harddisks.


Performing the same tests with 8GB of available RAM on the machine gave
the following results:

metis_MTRONSSD_RAID0_8GB_i14_v23_t1_l23.log     431.9 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t2_l23.log     594.3 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t2u_l23.log    807.7 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t3_l23.log     472.3 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t3u_l23.log    817.6 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t4_l23.log     464.4 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log    828.8 q/sec
metis_MTRONSSD_RAID0_8GB_i14_v23_t5_l23.log     471.2 q/sec

metis_15000RPM_RAID1_8GB_i14_v23_t1_l23.log     199.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t2_l23.log     220.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t2u_l23.log    312.4 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t3_l23.log     203.8 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t3u_l23.log    370.9 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4_l23.log     203.1 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log    408.1 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t5_l23.log     202.5 q/sec

Switching to 12GB...

metis_MTRONSSD_RAID0_12GB_i14_v23_t1_l23.log    438.8 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t2_l23.log    587.8 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t2u_l23.log   819.9 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t3_l23.log    476.4 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t3u_l23.log   833.7 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t4_l23.log    465.4 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t4u_l23.log   835.2 q/sec
metis_MTRONSSD_RAID0_12GB_i14_v23_t5_l23.log    467.1 q/sec

metis_15000RPM_RAID1_12GB_i14_v23_t1_l23.log    198.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t2_l23.log    219.1 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t2u_l23.log   309.4 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t3_l23.log    204.1 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t3u_l23.log   362.4 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4_l23.log    202.3 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log   406.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t5_l23.log    201.2 q/sec


Extracting the fastest configurations for the different RAM amounts:

metis_RAM_24GB_i14_v23_t3u_l23.log      996.1 q/sec

3GB of RAM:
metis_MTRONSSD_RAID0_3GB_i14_v23_t4u_l23.log    809.0 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t3u_l23.log    276.1 q/sec

8GB of RAM:
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log    828.8 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log    408.1 q/sec

12GB of RAM:
metis_MTRONSSD_RAID0_12GB_i14_v23_t4u_l23.log   835.2 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log   406.6 q/sec

As can be seen, the SSDs benefit somewhat from running at 8GB, while the
harddrives benefit a lot. Plotting a graph with queries/second over time
shows clearly that the performance of the harddrives relative to the RAM
speed is steadily climbing, while the SSD speed is not (or at least very
little). This tells me that the speed of SSD-stored indexes is fairly
independent of the amount of RAM available for cache.

Upping the amount to 12GB doesn't change much. Clearly 8GB is "enough"
for our 14GB index with our queries.


With the fear of making all this unclear, let's try and ignore the first
5000 queries and cut off the statistics after 50,000 queries. This
mimics a setting with warm-up and a not-so-stale index that gets
replaced once in a while. Extracting the fastest configurations for the
different RAM amounts gives us:

RAMDirectory (24GB of RAM):
metis_RAM_24GB_i14_v23_t2u_l23.log 867.3 q/sec

3GB of RAM:
metis_MTRONSSD_RAID0_3GB_i14_v23_t3u_l23.log 663.2 q/sec
metis_15000RPM_RAID1_3GB_i14_v23_t4u_l23.log 163.4 q/sec

8GB of RAM:
metis_MTRONSSD_RAID0_8GB_i14_v23_t4u_l23.log 653.6 q/sec
metis_15000RPM_RAID1_8GB_i14_v23_t4u_l23.log 163.4 q/sec

12GB of RAM:
metis_MTRONSSD_RAID0_12GB_i14_v23_t3u_l23.log 653.6 q/sec
metis_15000RPM_RAID1_12GB_i14_v23_t4u_l23.log 163.4 q/sec

Yes, the 3*163.4 is a funny coincidence, I double-checked and looked at
the graphs: Up till about 60,000 queries, the graphs are virtually
identical for the 15000RPM, then the one for 3GB RAM stabilizes and the
ones for 8 and 12GB continue being virtually identical and climbing.
For SSDs, the graph for 3GB is a bit higher than the other ones until
about 50-60.000 queries, then a bit lower for the rest.

For this scenario, the speed of SSDs compared to RAMDirectory drops to
75-76% while the speed of harddisks drops to 19%, fairly independent of
RAM. In other words: Upping the amount of RAM does not help us when the
index is replaced before we pass the 50.000 queries.

Another observation: The faster we change our index, the better SSD
looks compared to harddisks. On the flip side - for long run-times with
unchanged index, harddisks seems the better choice, at least from an
economically point of view.


Grand conclusion? Getting 3/4 of the performance of RAMDirectory by
using SSDs on a machine with much less RAM seems like a good deal if
high performance / machine is needed.


Remember, this is all searches with an optimized index. This is on the
corpus from the Danish State and University Library and should be seen
as nothing else than inspiration.

Still pending is experiments with updating large indexes on SSDs. My
guess is that there won't be anywhere near the same speed-increase as
for the pure searches. It'll have to wait a bit though, as it requires
Real Work, as opposed to just starting a script.


NB: I'd like to post my findings on the Lucene wiki, but I have been
unable to locate the appropriate page. Could someone please point me in
the right direction?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 11:54:28 2008
Return-Path: <java-user-return-33107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65851 invoked from network); 13 Mar 2008 11:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 11:54:28 -0000
Received: (qmail 10370 invoked by uid 500); 13 Mar 2008 11:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10333 invoked by uid 500); 13 Mar 2008 11:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10322 invoked by uid 99); 13 Mar 2008 11:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:54:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:53:40 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id BD865E24E2
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 04:53:48 -0700 (PDT)
Message-Id: <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: indexing api wrt Analyzer
Date: Thu, 13 Mar 2008 07:53:48 -0400
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On IndexWriter, you can pass in the Analyzer when you add a Document,  
thus your application can identify the language, choose the analyzer  
for the given doc, and then add the document

See
public void addDocument(Document doc, Analyzer analyzer)


On Mar 12, 2008, at 8:40 PM, John Wang wrote:

> Hi all:
>
>    Maybe this has been asked before:
>
>    I am building an index consists of multiple languages, (stored as a
> field), and I have different analyzers depending on the language of  
> the
> language to be indexed. But the IndexWriter takes only an Analyzer.
>
>    I was hoping to have IndexWriter take an AnalyzerFactory, where the
> AnalyzerFactory produces Analyzer depending on some criteria of the
> document, e.g. language.
>
>    Maybe I am going about the wrong way.
>
>    Any suggestions on how to go about?
>
> Thanks
>
> -John

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 11:56:03 2008
Return-Path: <java-user-return-33108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66303 invoked from network); 13 Mar 2008 11:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 11:56:03 -0000
Received: (qmail 14970 invoked by uid 500); 13 Mar 2008 11:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14934 invoked by uid 500); 13 Mar 2008 11:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14912 invoked by uid 99); 13 Mar 2008 11:55:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:55:51 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:55:11 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id E5CD0212D8
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 04:55:20 -0700 (PDT)
Message-Id: <7BFE71C0-F9C0-43AB-A7CB-AB8F1E9E07EC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16024551.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: sorting a doc field takes more time
Date: Thu, 13 Mar 2008 07:55:19 -0400
References: <16024551.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

What's in "field"?  What are your docs?  More info is needed to help...

-Grant
On Mar 13, 2008, at 6:50 AM, sandyg wrote:

>
> Hi,
>
> Thnxs for spending  time for the problem.
>
> When sorting the results of lucene search it takes more time and not  
> looks
> not that much usefull can any one help
> Below is my code..
>
>                sort = new Sort(new SortField(field));
>                hits = searcher.search(query,sort);
>
> Once again thnx
> -- 
> View this message in context: http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16024551.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 11:58:36 2008
Return-Path: <java-user-return-33109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66930 invoked from network); 13 Mar 2008 11:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 11:58:36 -0000
Received: (qmail 18973 invoked by uid 500); 13 Mar 2008 11:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18449 invoked by uid 500); 13 Mar 2008 11:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18437 invoked by uid 99); 13 Mar 2008 11:58:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:58:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:57:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 26FB7109F26
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 04:57:57 -0700 (PDT)
Message-Id: <0AC8A3FE-3F91-4E4B-94C7-4ED0485634A7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47D7FBD7.8050503@eworx.gr>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: cannot delete cfs files on windows
Date: Thu, 13 Mar 2008 07:57:56 -0400
References: <47D7FBD7.8050503@eworx.gr>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure why you can't close, but it's a bit suspicious that you are  
opening the IndexReader every time you do a search.  Can you explain a  
little more about your process?  When are you indexing, how often, etc.?

-Grant

On Mar 12, 2008, at 11:50 AM, Ioannis Cherouvim wrote:

> Hello
>
> I can index many times and delete the index files (manually). But if  
> I search once, then the cfs file is locked and cannot be deleted.  
> Subsequent indexings create new cfs files. Even if I undeploy the  
> tomcat web application which holds the search code, the cfs file  
> cannot be deleted.
>
>
> O/S:
> Windows XP
>
>
> Code to index:
> IndexWriter writer = new IndexWriter(
>   PATH,
>   new StandardAnalyzer(),
>   true);
>
> writer.addDocument(doc1);
> writer.addDocument(doc2);
> writer.addDocument(doc3);
>
> writer.optimize();
> writer.close();
>
>
> Code to search:
> Searcher searcher = null;
> IndexReader indexReader = null;
> try {
>   indexReader = IndexReader.open(PATH);
>   searcher = new IndexSearcher(indexReader);
>   Hits hits = searcher.search(query);
>   ...
> } finally {
>   searcher.close();
>   indexReader.close();
> }
>
>
>
> Am I doing something wrong?
>
> thanks,
> Ioannis
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 11:59:44 2008
Return-Path: <java-user-return-33110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67483 invoked from network); 13 Mar 2008 11:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 11:59:44 -0000
Received: (qmail 23086 invoked by uid 500); 13 Mar 2008 11:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23066 invoked by uid 500); 13 Mar 2008 11:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23055 invoked by uid 99); 13 Mar 2008 11:59:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 04:59:34 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sriks6711@bluebottle.com designates 206.188.25.15 as permitted sender)
Received: from [206.188.25.15] (HELO mi0.bluebottle.com) (206.188.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:58:44 +0000
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by mi0.bluebottle.com (8.13.1/8.13.1) with ESMTP id m2DBx4iT017468
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 04:59:04 -0700
DomainKey-Signature: a=rsa-sha1; s=mail; d=bluebottle.com; c=nofws; q=dns;
	h=received:date:from:reply-to:organization:user-agent:
	mime-version:to:subject:references:in-reply-to:content-type:
	content-transfer-encoding:x-trusted-delivery;
	b=wcGA4FUEzhkQ7ejXFPOcqXF+QVLA18aJdT8VFe9gepd1NTBs4zt+9wAvyVwzUdG4Z
	4M/xsbhF3SRhSQdup/owsXzs9XCb3kcbpeg4UYVFb78VzA+drMeTdGRrovYC6UI
Message-Id: <200803131159.m2DBx4iT017468@mi0.bluebottle.com>
Received: from [192.168.15.101] (59.162.171.151.static-vizag.vsnl.net.in [59.162.171.151] (may be forged))
	(authenticated bits=0)
	by fe1.bluebottle.com (8.13.1/8.13.1) with ESMTP id m2DBx0g7005992
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 13 Mar 2008 04:59:02 -0700
Date: Thu, 13 Mar 2008 17:28:56 +0530
From: Srikant Jakilinki <sriks6711@bluebottle.com>
Reply-To: sriks6711@gmail.com
Organization: JVS Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Solid State Drives vs. RAMDirectory
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Trusted-Delivery: <1269684cf030cdac743b6b2c76e4b8aa>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Toke,

Thanks for the write-up. Speaking for the community, the graphs (as 
earlier) would be great.

There is no benchmarks page on the Wiki. There is one on the main site 
to which you can add your stuff -
http://lucene.apache.org/java/2_1_0/benchmarks.html
Maybe one should create one on the wiki - not exactly called benchmarks 
but titled as performance studies/findings or something similar to that.

BTW, guys, I am slowly going into testing performance on multi-disks on 
multi-core machines (one indexer/searcher/index per disk). Initial 
results are encouraging. If anyone has some pointers or done something 
similar, it would be great.

Thanks
Srikant

Toke Eskildsen wrote:
> Time for another dose of inspiration for investigating Solid State
> Drives. And no, I don't get percentages from the chip manufacturers :-)
>
> This time I'll argue that there's little gain in using a RAMDirectory
> over SSDs, when performing searches. At least for our setting.
>
> [...]
>
> Grand conclusion? Getting 3/4 of the performance of RAMDirectory by
> using SSDs on a machine with much less RAM seems like a good deal if
> high performance / machine is needed.
>
> Remember, this is all searches with an optimized index. This is on the
> corpus from the Danish State and University Library and should be seen
> as nothing else than inspiration.
>
> Still pending is experiments with updating large indexes on SSDs. My
> guess is that there won't be anywhere near the same speed-increase as
> for the pure searches. It'll have to wait a bit though, as it requires
> Real Work, as opposed to just starting a script.
>
>
> NB: I'd like to post my findings on the Lucene wiki, but I have been
> unable to locate the appropriate page. Could someone please point me in
> the right direction?
>

----------------------------------------------------------------------
Find out how you can get spam free email.
http://www.bluebottle.com/tag/3


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 12:38:00 2008
Return-Path: <java-user-return-33111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93447 invoked from network); 13 Mar 2008 12:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 12:38:00 -0000
Received: (qmail 81799 invoked by uid 500); 13 Mar 2008 12:37:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81770 invoked by uid 500); 13 Mar 2008 12:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81759 invoked by uid 99); 13 Mar 2008 12:37:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 05:37:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 12:37:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 02D6473613
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 05:37:22 -0700 (PDT)
Message-Id: <D4AC5123-8914-4744-B6C2-B273F113628B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200803131159.m2DBx4iT017468@mi0.bluebottle.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: [aside] Re: Solid State Drives vs. RAMDirectory
Date: Thu, 13 Mar 2008 08:37:22 -0400
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk> <200803131159.m2DBx4iT017468@mi0.bluebottle.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Slight aside below?
On Mar 13, 2008, at 7:58 AM, Srikant Jakilinki wrote:
>>
>> Remember, this is all searches with an optimized index. This is on  
>> the
>> corpus from the Danish State and University Library and should be  
>> seen
>> as nothing else than inspiration.
>>

Is this corpus publicly available?  If so, please share.  I'm always  
on the hunt for free data!

Thanks,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 12:41:22 2008
Return-Path: <java-user-return-33112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95715 invoked from network); 13 Mar 2008 12:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 12:41:21 -0000
Received: (qmail 87315 invoked by uid 500); 13 Mar 2008 12:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87289 invoked by uid 500); 13 Mar 2008 12:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87278 invoked by uid 99); 13 Mar 2008 12:41:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 05:41:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 12:40:24 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JXO0096K5VXN3@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Thu, 13 Mar 2008 13:40:45 +0100 (MET)
Date: Thu, 13 Mar 2008 13:40:45 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: [aside] Re: Solid State Drives vs. RAMDirectory
In-reply-to: <D4AC5123-8914-4744-B6C2-B273F113628B@apache.org>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1205412045.9126.377.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1205406224.9126.359.camel@PC990.sb.statsbiblioteket.dk>
 <200803131159.m2DBx4iT017468@mi0.bluebottle.com>
 <D4AC5123-8914-4744-B6C2-B273F113628B@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-03-13 at 08:37 -0400, Grant Ingersoll wrote:
> Is this corpus publicly available?  If so, please share.  I'm always  
> on the hunt for free data!

I'm sorry. It's the bibliographic records from the State and University
Library of Denmark and we're not allowed to share them.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 13:03:24 2008
Return-Path: <java-user-return-33113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13837 invoked from network); 13 Mar 2008 13:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 13:03:24 -0000
Received: (qmail 29555 invoked by uid 500); 13 Mar 2008 13:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29527 invoked by uid 500); 13 Mar 2008 13:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29516 invoked by uid 99); 13 Mar 2008 13:03:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:03:14 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.237.92] (HELO n7.bullet.re3.yahoo.com) (68.142.237.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Mar 2008 13:02:35 +0000
Received: from [68.142.237.90] by n7.bullet.re3.yahoo.com with NNFMP; 13 Mar 2008 13:02:44 -0000
Received: from [66.196.97.146] by t6.bullet.re3.yahoo.com with NNFMP; 13 Mar 2008 13:02:44 -0000
Received: from [127.0.0.1] by omp204.mail.re3.yahoo.com with NNFMP; 13 Mar 2008 13:02:44 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 741316.30789.bm@omp204.mail.re3.yahoo.com
Received: (qmail 56418 invoked by uid 60001); 13 Mar 2008 13:02:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=qyrcPDejHK6wvE2cxfTzd1CZ9PRwLmGOHzPnDIY4dVwzeyeKEbF14XKHS4RaLnpeAUwLgsrgaYIKxiEQLwU92fZKQu+G7wqqpiQBGBFnzhqrygTNyDLJtdeki5Gnrg3bqMbgew52uRHAccJT9j5AO+EeNwe0UWpFQtWrWTHdgf8=;
X-YMail-OSG: NF.qsicVM1nufmfcmoq.es1V7QSgfizLQ7XamPp6Zi5svmeSLMIu7HNbDzerPMhI7IAauo35zp1MEWfTNhc9NSyo3.CnogMVYKdtEnMUMaozALcE6NMZlbMeW10-
Received: from [84.131.198.24] by web23011.mail.ird.yahoo.com via HTTP; Thu, 13 Mar 2008 13:02:43 GMT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.185
Date: Thu, 13 Mar 2008 13:02:43 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Solid State Drives vs. RAMDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <805354.55481.qm@web23011.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

=0A=0A>>Upping the amount of RAM does not help us when the=0Aindex is repla=
ced before we pass the 50.000 queries.=0A=0A=0Ahave you seen https://issues=
..apache.org/jira/browse/LUCENE-1035 , It would be interesting to see if thi=
s one changes HD numbers . You have plenty of free memory in this setup...=
=0A=0A=0A=0A      _________________________________________________________=
__ =0ARise to the challenge for Sport Relief with Yahoo! For Good  =0A=0Aht=
tp://uk.promotions.yahoo.com/forgood/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 13:34:23 2008
Return-Path: <java-user-return-33114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36785 invoked from network); 13 Mar 2008 13:34:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 13:34:23 -0000
Received: (qmail 3195 invoked by uid 500); 13 Mar 2008 13:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3171 invoked by uid 500); 13 Mar 2008 13:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3160 invoked by uid 99); 13 Mar 2008 13:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:34:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:33:36 +0000
Received: by py-out-1112.google.com with SMTP id z74so3965564pyg.9
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 06:33:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=fMPybo5vCveKBaJ45q+aei+v/G5eqOQS34BH9mvHkTI=;
        b=mNdtf6HDRExEN7yg4dOR/2aUTKJA/9lrMzgjnibnjK8mJ6D5rnKPcPCxjauslEIN7TuOL9TUuMS8I5uPStt0O8Acq8aYywcH/8xaRY6M3oQYxHATGboqA6cADKpjlCC2aqEuyffBaQ+mI7IcVUhBAkSU3A8N87HnMFlOKsKUxOY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=X14hYxD2+ETWVRcBJQnXNvyeM7LsE4Lw0bDpxLd4RTVbNnycTEBJ9seEF0QF4T96D3AW0Nep5S1pOCUeJYBbHdqas7rzFxzdFc1kPxijr5XqNm0SLNUZLGI5D226eKxrmg+auKKfPEkKN8tdob3PmCywMZEg347CB53yTdboRMA=
Received: by 10.65.112.5 with SMTP id p5mr20608447qbm.52.1205415226743;
        Thu, 13 Mar 2008 06:33:46 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e15sm13055761qba.9.2008.03.13.06.33.45
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 13 Mar 2008 06:33:45 -0700 (PDT)
Message-ID: <47D92D2F.5080208@gmail.com>
Date: Thu, 13 Mar 2008 09:33:35 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031202)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Index Merging Space Requirements
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If I use LogByteSizeMergePolicy#setMaxMergeMB, can I clamp down on the 
space needed for optimize/merge? My thought is, if a segment is maxed 
out, it will never need to be copied for a merge right? So you could 
significantly reduce merge/optimize space requirments (now at like 2x-4x 
if readers can still open)?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 13:49:13 2008
Return-Path: <java-user-return-33115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52203 invoked from network); 13 Mar 2008 13:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 13:49:13 -0000
Received: (qmail 26177 invoked by uid 500); 13 Mar 2008 13:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26146 invoked by uid 500); 13 Mar 2008 13:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26135 invoked by uid 99); 13 Mar 2008 13:49:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:49:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:48:26 +0000
Received: by an-out-0708.google.com with SMTP id c5so797364anc.49
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 06:48:36 -0700 (PDT)
Received: by 10.100.255.10 with SMTP id c10mr19472033ani.84.1205416116187;
        Thu, 13 Mar 2008 06:48:36 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d24sm25394511and.12.2008.03.13.06.48.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Mar 2008 06:48:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47D92D2F.5080208@gmail.com>
References: <47D92D2F.5080208@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DB25EAD4-9FAD-4D73-9088-38AB0810950F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Index Merging Space Requirements
Date: Thu, 13 Mar 2008 09:48:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes this should reduce transient (while merging) disk usage.   
However, optimize disregards this parameter, so it will still use the  
same disk space. However, if you call optimize(N) then that should  
use less space since it does not merge all the way down to 1 segment.

Note that the limit applies to segments-to-be-merged not to the final  
merged segment size.  Ie, any segment > maxMergeMB will never be  
merged, but at any given time you can easily have segments quite a  
bit larger than maxMergeMB.

Mike

Mark Miller wrote:

> If I use LogByteSizeMergePolicy#setMaxMergeMB, can I clamp down on  
> the space needed for optimize/merge? My thought is, if a segment is  
> maxed out, it will never need to be copied for a merge right? So  
> you could significantly reduce merge/optimize space requirments  
> (now at like 2x-4x if readers can still open)?
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 13:49:32 2008
Return-Path: <java-user-return-33116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52424 invoked from network); 13 Mar 2008 13:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 13:49:32 -0000
Received: (qmail 27835 invoked by uid 500); 13 Mar 2008 13:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27815 invoked by uid 500); 13 Mar 2008 13:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35642 invoked by uid 99); 13 Mar 2008 07:25:29 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Message-ID: <47D8D6C6.8090202@searchcapital.net>
Date: Thu, 13 Mar 2008 09:24:54 +0200
From: Ion Badita <ion.badita@searchcapital.net>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Unique Fields
References: <47D69F7B.6020802@searchcapital.net>	 <359a92830803111037u476bd57dxb7ea90972933d0ad@mail.gmail.com>	 <47D771A2.7070703@searchcapital.net> <359a92830803120649t6349f937u9395523d76479d8c@mail.gmail.com>
In-Reply-To: <359a92830803120649t6349f937u9395523d76479d8c@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------040406000201090304050005"
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at genzen.com
X-Virus-Checked: Checked by ClamAV on apache.org

--------------040406000201090304050005
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

My unique is more like synonym. For instance: Brain cancer, Cancer of 
the brain, Brain neoplasm, are the same, so i need to tokenize the title 
remove the stop words etc.

I have a problem with the indexing... with a new title first i have to 
search in the index, if the title is not found write it to the index, 
flush the indexwriter and recreate the searcher (to reflect the 
changes). Is there a way to avoid recreating the Searcher/Reader for 
every new title inserted into the index?


Thank you
John




Erick Erickson wrote:
> So, you're tokenizing the title field? If so, I don't understand how you
> expect
> this to work. Would the title "this is one order" and "is one order this" be
> considered
> identical? Would capitalization matter? Punctuation? Throwing all the terms
> of a title into a tokenized field and expecting some magic to keep
> duplicates
> is beyond the scope of Lucene, you'll have to roll some customized solution.
>
> For instance, index your title UN_TOKENIZED in a duplicate field (after
> applying
> whatever massaging you want re: punctuation, spaces, etc.). Use
> TermDocs/TermEnum
> on that field to detect duplicates. You won't search on this field....
>
> Or create a hash of the title and index *that* in a separate field and check
> against
> the hash with termenum/terndocs. Or.....
>
> But no, there's no magic that makes Lucene DWIM (Do What I Mean)...
>
> Best
> Erick
>
> On Wed, Mar 12, 2008 at 2:01 AM, Ion Badita <ion.badita@searchcapital.net>
> wrote:
>
>   
>> The "problem" is that my unique field is a title, many terms per field.
>> I want to make an index with titles and i don't want to have duplicates.
>>
>> John
>>
>>
>> Erick Erickson wrote:
>>     
>>> You can easily find whether a term is in the index with
>>>       
>> TermEnum/TermDocs
>>     
>>> (I think TermEnum is all you really need).
>>>
>>> Except, you'll probably also have to keep an internal map of IDs added
>>>       
>> since
>>     
>>> the searcher was opened and check against that too.
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Mar 11, 2008 at 11:04 AM, Ion Badita <
>>>       
>> ion.badita@searchcapital.net>
>>     
>>> wrote:
>>>
>>>
>>>       
>>>> Hi,
>>>>
>>>> I want to create an index with one unique field.
>>>> Before inserting a document i must be sure that "unique field" is
>>>>         
>> unique.
>>     
>>>>
>>>> John
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>>       
>>     
>
>   


--------------040406000201090304050005--

From java-user-return-33117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 13:49:53 2008
Return-Path: <java-user-return-33117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52561 invoked from network); 13 Mar 2008 13:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 13:49:53 -0000
Received: (qmail 29717 invoked by uid 500); 13 Mar 2008 13:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29681 invoked by uid 500); 13 Mar 2008 13:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29670 invoked by uid 99); 13 Mar 2008 13:49:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 06:49:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.170.0.94] (HELO rosebud.otenet.gr) (195.170.0.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:48:54 +0000
Received: from [192.168.1.42] (athedsl-400720.home.otenet.gr [79.131.117.78])
	by rosebud.otenet.gr (8.13.8/8.13.8/Debian-3) with ESMTP id m2DDnDET021318
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 15:49:13 +0200
Message-ID: <47D9307E.4010706@eworx.gr>
Date: Thu, 13 Mar 2008 15:47:42 +0200
From: Ioannis Cherouvim <jc@eworx.gr>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: cannot delete cfs files on windows
References: <47D7FBD7.8050503@eworx.gr> <0AC8A3FE-3F91-4E4B-94C7-4ED0485634A7@apache.org>
In-Reply-To: <0AC8A3FE-3F91-4E4B-94C7-4ED0485634A7@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I index once every 24h. If a single search takes place between those 
24hours, the next indexing will generate a new cfs file, because the old 
one cannot be deleted.

Yes, I've read in the API that it's best not to open and close an 
IndexReader for every search, but right now I'm not concerned with 
performance (unless there is another problem with opening and closing). 
In any case, how should I deal with it? Will a singleton holding the 
IndexReader do the job? This is a web application.

Note that I'm not concerned about the actual files not being able to be 
deleted, nor the extra HD space that these occupy. I'm afraid that all 
these "locked" cfs files hold file handles which is not good for the O/S 
(?).

Right now I can only delete those cfs files when I stop the tomcat 
instance which runs my web application.

thanks,
Ioannis

Grant Ingersoll wrote:
> Not sure why you can't close, but it's a bit suspicious that you are 
> opening the IndexReader every time you do a search.  Can you explain a 
> little more about your process?  When are you indexing, how often, etc.?
>
> -Grant
>
> On Mar 12, 2008, at 11:50 AM, Ioannis Cherouvim wrote:
>
>> Hello
>>
>> I can index many times and delete the index files (manually). But if 
>> I search once, then the cfs file is locked and cannot be deleted. 
>> Subsequent indexings create new cfs files. Even if I undeploy the 
>> tomcat web application which holds the search code, the cfs file 
>> cannot be deleted.
>>
>>
>> O/S:
>> Windows XP
>>
>>
>> Code to index:
>> IndexWriter writer = new IndexWriter(
>>   PATH,
>>   new StandardAnalyzer(),
>>   true);
>>
>> writer.addDocument(doc1);
>> writer.addDocument(doc2);
>> writer.addDocument(doc3);
>>
>> writer.optimize();
>> writer.close();
>>
>>
>> Code to search:
>> Searcher searcher = null;
>> IndexReader indexReader = null;
>> try {
>>   indexReader = IndexReader.open(PATH);
>>   searcher = new IndexSearcher(indexReader);
>>   Hits hits = searcher.search(query);
>>   ...
>> } finally {
>>   searcher.close();
>>   indexReader.close();
>> }
>>
>>
>>
>> Am I doing something wrong?
>>
>> thanks,
>> Ioannis
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 14:34:42 2008
Return-Path: <java-user-return-33118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80999 invoked from network); 13 Mar 2008 14:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 14:34:41 -0000
Received: (qmail 33870 invoked by uid 500); 13 Mar 2008 14:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33843 invoked by uid 500); 13 Mar 2008 14:34:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33832 invoked by uid 99); 13 Mar 2008 14:34:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 07:34:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 14:33:53 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2915188qba.9
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 07:34:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=EoFmDSWSWex6ehnhF8EBEl3c5jfLquvwEXM9nPgIyQg=;
        b=dMQWSQCi13Cg9N+0eoegqhfY82YFRGdZJyhobJ4w7PpcVtBe/Ai3ObrN7LqmaUDPmiCqBCwmCAdPRFPS1gtm1CVB4t3IjQ1ckjyrKiTXKcxzz96XXT6j1gGIcygqTObipND1nNYwNSEPHSHIhOfK52HOEsftSuswDGikeWQenlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SrLszUd91bV4eY+goNjehpPwPtanvj40X6clNIQbfKFMKw1uc6cGloqBXx8lN5voyiUryKTsAuqrVwooqcoD7aPjsBAZoFY3vCj3CR0Z0IB2yX0S6qVfUqkN+spIx6CX4uGaAD+qoAzJZxJFkg/Bz3FjSBdHYCOB3cQzv+6H1Dw=
Received: by 10.64.91.15 with SMTP id o15mr5008652qbb.28.1205418843606;
        Thu, 13 Mar 2008 07:34:03 -0700 (PDT)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e13sm13147378qba.37.2008.03.13.07.34.00
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 13 Mar 2008 07:34:01 -0700 (PDT)
Message-ID: <47D93B55.7090303@gmail.com>
Date: Thu, 13 Mar 2008 10:33:57 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031202)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index Merging Space Requirements
References: <47D92D2F.5080208@gmail.com> <DB25EAD4-9FAD-4D73-9088-38AB0810950F@mikemccandless.com>
In-Reply-To: <DB25EAD4-9FAD-4D73-9088-38AB0810950F@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot Mike...one more question:

I remember reading that a regular addDocument call could basically 
trigger an optimize on a given call. Is this true? Maybe not true anymore?

It doesnt sound right to me, but I do remember reading about it. This 
was pre background merging when it was mentioned the addDocument call 
could take a long time to return if basically the equiv of an optmize 
was triggered.

Could you clear this up for me?

Thanks
Mark

Michael McCandless wrote:
>
> Yes this should reduce transient (while merging) disk usage.  However, 
> optimize disregards this parameter, so it will still use the same disk 
> space. However, if you call optimize(N) then that should use less 
> space since it does not merge all the way down to 1 segment.
>
> Note that the limit applies to segments-to-be-merged not to the final 
> merged segment size.  Ie, any segment > maxMergeMB will never be 
> merged, but at any given time you can easily have segments quite a bit 
> larger than maxMergeMB.
>
> Mike
>
> Mark Miller wrote:
>
>> If I use LogByteSizeMergePolicy#setMaxMergeMB, can I clamp down on 
>> the space needed for optimize/merge? My thought is, if a segment is 
>> maxed out, it will never need to be copied for a merge right? So you 
>> could significantly reduce merge/optimize space requirments (now at 
>> like 2x-4x if readers can still open)?
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 14:47:17 2008
Return-Path: <java-user-return-33119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89192 invoked from network); 13 Mar 2008 14:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 14:47:17 -0000
Received: (qmail 69941 invoked by uid 500); 13 Mar 2008 14:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69902 invoked by uid 500); 13 Mar 2008 14:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69891 invoked by uid 99); 13 Mar 2008 14:47:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 07:47:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.251] (HELO ag-out-0708.google.com) (72.14.246.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 14:46:29 +0000
Received: by ag-out-0708.google.com with SMTP id 35so5249596aga.11
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 07:46:39 -0700 (PDT)
Received: by 10.100.253.12 with SMTP id a12mr19617069ani.117.1205419599033;
        Thu, 13 Mar 2008 07:46:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d29sm22043582and.28.2008.03.13.07.46.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Mar 2008 07:46:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47D93B55.7090303@gmail.com>
References: <47D92D2F.5080208@gmail.com> <DB25EAD4-9FAD-4D73-9088-38AB0810950F@mikemccandless.com> <47D93B55.7090303@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2520B459-52D2-412B-AAC9-45D64D7498E3@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Index Merging Space Requirements
Date: Thu, 13 Mar 2008 10:46:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Well ... yes and no?

Yes, the Log*MergePolicy will still at certain times merge the index  
all the way down to one segment.  If mergeFactor is 10 then this will  
happen every "power of 10" flushed segments.  Ie, after 10 flushes a  
merge will merge them down to 1 segment, then after 100 flushes as  
well, 1000 flushes, etc.  These are done in the background with  
ConcurrentMergeScheduler.  I don't really like this quality of the  
merge policy ... it's sort of a "pay it forward" approach.  You are  
paying in advance for the expectation that the index is going to keep  
getting larger.

However, this merging does respect maxMergeMB, so if you've set that,  
then it will not merge down to 1 segment once you have segments over  
that size.  So in this aspect it's different from a real call to  
optimize.

Mike

Mark Miller wrote:

> Thanks a lot Mike...one more question:
>
> I remember reading that a regular addDocument call could basically  
> trigger an optimize on a given call. Is this true? Maybe not true  
> anymore?
>
> It doesnt sound right to me, but I do remember reading about it.  
> This was pre background merging when it was mentioned the  
> addDocument call could take a long time to return if basically the  
> equiv of an optmize was triggered.
>
> Could you clear this up for me?
>
> Thanks
> Mark
>
> Michael McCandless wrote:
>>
>> Yes this should reduce transient (while merging) disk usage.   
>> However, optimize disregards this parameter, so it will still use  
>> the same disk space. However, if you call optimize(N) then that  
>> should use less space since it does not merge all the way down to  
>> 1 segment.
>>
>> Note that the limit applies to segments-to-be-merged not to the  
>> final merged segment size.  Ie, any segment > maxMergeMB will  
>> never be merged, but at any given time you can easily have  
>> segments quite a bit larger than maxMergeMB.
>>
>> Mike
>>
>> Mark Miller wrote:
>>
>>> If I use LogByteSizeMergePolicy#setMaxMergeMB, can I clamp down  
>>> on the space needed for optimize/merge? My thought is, if a  
>>> segment is maxed out, it will never need to be copied for a merge  
>>> right? So you could significantly reduce merge/optimize space  
>>> requirments (now at like 2x-4x if readers can still open)?
>>>
>>> - Mark
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 15:04:02 2008
Return-Path: <java-user-return-33120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40462 invoked from network); 13 Mar 2008 15:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 15:04:02 -0000
Received: (qmail 13966 invoked by uid 500); 13 Mar 2008 15:03:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13937 invoked by uid 500); 13 Mar 2008 15:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13926 invoked by uid 99); 13 Mar 2008 15:03:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 08:03:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 15:03:13 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2524355hub.15
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 08:03:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xxgJ8Q+CYvZJX6j+7Sgz6unul9eFrjjjMivHw093e3w=;
        b=uNrL0AeZvywjjPsiQczlB6c4cwhY7oGfbkT5xyrozh+Bz019nlDsa8XzBUMocDu2UpbgwttoaUc2WGnekxfBqQCo7HkNCrCrW6iOm50Nu/vT3y6VRHEUlwFji5k4GIql3Qq9aJv/tyIFdTUDf00wumx1RIkXYjepXM1BRRREtJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mrhGI5AVm+lORUsJ2IuJWtGPj/i8O8GIx+9KjV0tggl587vDF3p3h0+rOglwq2EAZA602uaqBsAUGT8xHvHRE2brwdSVwFPrzwFRtQU/mLRNJNSk2WGv1jOs/+3tM7c7zWUvClWzo09BMSEasrPTCbcwdZUy9x/EzfQyaVKVwe8=
Received: by 10.82.152.16 with SMTP id z16mr23342710bud.36.1205420602927;
        Thu, 13 Mar 2008 08:03:22 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Thu, 13 Mar 2008 08:03:22 -0700 (PDT)
Message-ID: <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
Date: Thu, 13 Mar 2008 08:03:22 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing api wrt Analyzer
In-Reply-To: <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10912_21633885.1205420602916"
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
	 <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10912_21633885.1205420602916
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, but usually it's a good idea to add documents in batch and not having
to reinstantiate the writer for every document and then closing it.

It would be nice if one can specify to the writer which analyzer to use.

PerfieldAnalyzer wouldn't work because different analyzers may apply on the
same field depending on the doc, e.g.

if (field1.name.equals("fr"))
    use FrenchAnalyzer on content field
etc.

-John

On Thu, Mar 13, 2008 at 4:53 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

> On IndexWriter, you can pass in the Analyzer when you add a Document,
> thus your application can identify the language, choose the analyzer
> for the given doc, and then add the document
>
> See
> public void addDocument(Document doc, Analyzer analyzer)
>
>
> On Mar 12, 2008, at 8:40 PM, John Wang wrote:
>
> > Hi all:
> >
> >    Maybe this has been asked before:
> >
> >    I am building an index consists of multiple languages, (stored as a
> > field), and I have different analyzers depending on the language of
> > the
> > language to be indexed. But the IndexWriter takes only an Analyzer.
> >
> >    I was hoping to have IndexWriter take an AnalyzerFactory, where the
> > AnalyzerFactory produces Analyzer depending on some criteria of the
> > document, e.g. language.
> >
> >    Maybe I am going about the wrong way.
> >
> >    Any suggestions on how to go about?
> >
> > Thanks
> >
> > -John
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10912_21633885.1205420602916--

From java-user-return-33121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 18:36:00 2008
Return-Path: <java-user-return-33121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15736 invoked from network); 13 Mar 2008 18:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 18:36:00 -0000
Received: (qmail 54576 invoked by uid 500); 13 Mar 2008 18:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54555 invoked by uid 500); 13 Mar 2008 18:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54544 invoked by uid 99); 13 Mar 2008 18:35:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:35:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 18:35:12 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 52D0D163918
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 11:35:22 -0700 (PDT)
Message-Id: <6427B73C-82AC-429E-A32E-0EDB17032E0E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: indexing api wrt Analyzer
Date: Thu, 13 Mar 2008 14:35:21 -0400
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com> <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org> <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 13, 2008, at 11:03 AM, John Wang wrote:

> Yes, but usually it's a good idea to add documents in batch and not  
> having
> to reinstantiate the writer for every document and then closing it.
>

Why does what I suggested require instantiating a new writer for every  
document?  It uses the analyzer you pass in w/ the method:

IndexWriter writer = new IndexWriter(dir, defaultAnalyzer,....)

while adding docs
    Document doc = ...
    Analyzer analyzer = getAnalyzer(language)
    writer.addDocument(doc, analyzer)

writer.close()

-Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 18:37:56 2008
Return-Path: <java-user-return-33122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16427 invoked from network); 13 Mar 2008 18:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 18:37:56 -0000
Received: (qmail 59252 invoked by uid 500); 13 Mar 2008 18:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59111 invoked by uid 500); 13 Mar 2008 18:37:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59100 invoked by uid 99); 13 Mar 2008 18:37:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 11:37:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 18:37:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id D1047212E5
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 11:37:18 -0700 (PDT)
Message-Id: <56705472-C893-4989-9332-466FD96D9C7F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: indexing api wrt Analyzer
Date: Thu, 13 Mar 2008 14:37:17 -0400
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com> <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org> <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 13, 2008, at 11:03 AM, John Wang wrote:

> Yes, but usually it's a good idea to add documents in batch and not  
> having
> to reinstantiate the writer for every document and then closing it.
>
> It would be nice if one can specify to the writer which analyzer to  
> use.
>
> PerfieldAnalyzer wouldn't work because different analyzers may apply  
> on the
> same field depending on the doc, e.g.
>

Also, I don't know that it is wise to put different langs in the same  
field.  I can't prove it definitively, but it seems to me your corpus  
statistics could be skewed by terms that are spelled the same but have  
different meanings across languages.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 19:30:59 2008
Return-Path: <java-user-return-33123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46818 invoked from network); 13 Mar 2008 19:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 19:30:58 -0000
Received: (qmail 65016 invoked by uid 500); 13 Mar 2008 19:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64979 invoked by uid 500); 13 Mar 2008 19:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64968 invoked by uid 99); 13 Mar 2008 19:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 12:30:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 19:30:12 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2613185hub.15
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 12:30:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lmo8SLd6LNm/32ooFX5rDP5hYhmIpCr/UJUZlYYNmOo=;
        b=G8lFd15+D+4ZMoE8Wb8BbnKSdx6U7Pd7XuXwiVlvb3Yx1VQBOeuvBM0REc0buKFE0jIys54GQLTkJUSMOJ8rNeIXXSZZDjGqeFy5KB7szI18aY+hA4tfnWncsD/rQDdjpMBSSyXfYZpZ+1Z0zIs8xczFba649/ofi++qYfFxZb8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b/VBzYRi+0tmP1OS6KJiLxXahdb8qbmuu9N7lLZERFeIz3Oa92kg8XgWu1c1oFaN2WUd5oBUr4Y7A2XFbX9HR1I7b+7sVLUp54ux/Nk/xFBOzJLGRqIdCNfnTvXaHZ4cgVdOAi6lR39wRSLhD+AMNNl73O45DHCdYITBagS1uuU=
Received: by 10.86.90.2 with SMTP id n2mr1937814fgb.66.1205436621026;
        Thu, 13 Mar 2008 12:30:21 -0700 (PDT)
Received: by 10.86.91.5 with HTTP; Thu, 13 Mar 2008 12:30:20 -0700 (PDT)
Message-ID: <e05f0fd10803131230s5afa750av7d45320c520bc0ff@mail.gmail.com>
Date: Thu, 13 Mar 2008 21:30:20 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
In-Reply-To: <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3812_790099.1205436621020"
References: <200803111645.27956.daniel@nuix.com>
	 <200803121229.38013.daniel@nuix.com>
	 <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com>
	 <200803131042.50640.daniel@nuix.com>
	 <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3812_790099.1205436621020
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Daniel, LUCENE-1228 fixes a problem in IndexWriter.commit().
I suspect this can be related to the problem you see though I am not sure.
Could you try with the patch there?
Thanks,
Doron

On Thu, Mar 13, 2008 at 10:46 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Daniel Noll wrote:
>
> > On Wednesday 12 March 2008 19:36:57 Michael McCandless wrote:
> >> OK, I think very likely this is the issue: when IndexWriter hits an
> >> exception while processing a document, the portion of the document
> >> already indexed is left in the index, and then its docID is marked
> >> for deletion.  You can see these deletions in your infoStream:
> >>
> >>    flush 0 buffered deleted terms and 30 deleted docIDs on 20
> >> segments
> >>
> >> This means you have deletions in your index, by docID, and so when
> >> you optimize the docIDs are then compacted.
> >
> > Aha.  Under 2.2, a failure would result in nothing being added to
> > the text
> > index so this would explain the problem.  It would also explain why
> > smaller
> > data sets are less likely to cause the problem (it's less likely
> > for there to
> > be an error in it.)
>
> Yes.
>
> > Workarounds?
> >   - flush() after any IOException from addDocument()  (overhead?)
>
> What exceptions are you actually hitting (is it really an
> IOException)?  I thought something was going wrong in retrieving or
> tokenizing  the document.
>
> I don't think flush() helps because it just flushes the pending
> deletes as well?
>
> >   - use ++ to determine the next document ID instead of
> >     index.getWriter().docCount()  (out of sync after an error but
> > fixes itself
> >     on optimize().
>
> I think this would work, but you're definitely still in the realm of
> "guessing how Lucene assigns docIDs under the hood" so it's risky
> over time.  Likely this is the highest performance option.
>
> But, when a normal merge of segments with deletions completes, your
> docIDs will shift.  In trunk we now explicitly compute the docID
> shifting that happens after a merge, because we don't always flush
> pending deletes when flushing added docs, but this is all done
> privately to IndexWriter.
>
> I'm a little confused: you said optimize() introduces the problem,
> but, it sounds like optimize() should be fixing the problem because
> it compacts all docIDs to match what you were "guessing" outside of
> Lucene?  Can you post the full stack trace of the exceptions you're
> hitting?
>
> >   - Use a field for a separate ID (slower later when reading the
> > index)
>
> Looks too slow based on your results.
>
> Can you pre-load the UID into the FieldCache?  There were also
> discussions recently about adding "column-stride" fields to Lucene,
> basically a faster FieldCache (to load initially), which would apply
> here I think.
>
> >   - ???
>
>
> Trunk has a new expungeDeletes method which should be lower cost than
> optimize, but not necessarily that much lower cost.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3812_790099.1205436621020--

From java-user-return-33124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 20:13:21 2008
Return-Path: <java-user-return-33124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64788 invoked from network); 13 Mar 2008 20:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 20:13:20 -0000
Received: (qmail 30171 invoked by uid 500); 13 Mar 2008 20:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30141 invoked by uid 500); 13 Mar 2008 20:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30130 invoked by uid 99); 13 Mar 2008 20:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:13:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 20:12:33 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2619944hub.15
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 13:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pVP3eLSvmRB17P/ya0RSU++AneSoCvlz01yG25m9SXI=;
        b=dyr7uTKD+HEE4iA7BueN/h0ScOoxYvk9w5Kv2prOz65hgu3Aio2YUFQSN0ra3qP37a4NXIv/gvhgrcO0LFUxjgqR7IyY4xp8kkGxJQhIbmgW19TJuwJnclgdbvChCVF4NA5GtFNS3JF/M2N6mp0ZVXkxty5ex7DKkrB5OTwZJOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MqID0aV0ZkOto4m0SGm+HaTuSnZxenW2J1c6VKHJ9snPVldsWsvW8Y3h5Mhu9P0qrJEaBh5RL7qlkqloayaLbb6JmMImuPoJqVjgFD/8aLLjvyKiM+yM6zEGUZnpn57Uw9YF99BBprTF1L0OqtMRc18KCCym6SSHw+ZsDlJVkz4=
Received: by 10.82.118.2 with SMTP id q2mr24121810buc.27.1205439160911;
        Thu, 13 Mar 2008 13:12:40 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Thu, 13 Mar 2008 13:12:40 -0700 (PDT)
Message-ID: <8837fb770803131312g31985cb4u9fd7383d8dc9ec98@mail.gmail.com>
Date: Thu, 13 Mar 2008 13:12:40 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing api wrt Analyzer
In-Reply-To: <56705472-C893-4989-9332-466FD96D9C7F@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12135_33091782.1205439160898"
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
	 <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org>
	 <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
	 <56705472-C893-4989-9332-466FD96D9C7F@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12135_33091782.1205439160898
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant:

    For our corpus, we don't rely on idf in scoring calculation that much,
so I don't see that being a problem that much.

    About performance, instantiating 1 indexWriter for a batch of say 1000
docs, e.g. iterate over 1000 docs and do addDocument; comparing with
instantiating and closing 1000 indexWriters each doing 1 addDocument. Are
you saying the expected performance is the same? I thought when you call
addDocument, it adds to memory and flush when segment needs to be merged or
writer closes.

    Maybe I am missing something.

Thanks

-john

On Thu, Mar 13, 2008 at 11:37 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

>
> On Mar 13, 2008, at 11:03 AM, John Wang wrote:
>
> > Yes, but usually it's a good idea to add documents in batch and not
> > having
> > to reinstantiate the writer for every document and then closing it.
> >
> > It would be nice if one can specify to the writer which analyzer to
> > use.
> >
> > PerfieldAnalyzer wouldn't work because different analyzers may apply
> > on the
> > same field depending on the doc, e.g.
> >
>
> Also, I don't know that it is wise to put different langs in the same
> field.  I can't prove it definitively, but it seems to me your corpus
> statistics could be skewed by terms that are spelled the same but have
> different meanings across languages.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12135_33091782.1205439160898--

From java-user-return-33125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 20:25:51 2008
Return-Path: <java-user-return-33125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73135 invoked from network); 13 Mar 2008 20:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 20:25:50 -0000
Received: (qmail 57286 invoked by uid 500); 13 Mar 2008 20:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57261 invoked by uid 500); 13 Mar 2008 20:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57250 invoked by uid 99); 13 Mar 2008 20:25:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:25:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 20:25:04 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3155348fga.27
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 13:25:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=HiHG9aHS9wip68/5adUYidL8+VtbXRnNxK51Pck8p8Q=;
        b=iyNEcbLndFiuV/zzQRl9SUl9MKn4k7KyWwUMULKsGlQAVh/vmZ05D9915yE2a2bIGqUmB3QdU4aSfKukuLou5iSrmWFiCkNuU9K/64Y5dmQON125uEF6OCti+Co7+tye6vInZ7nU4+nORAy1jDDiPv0gPGVsf5ttJvKcMorzgUU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=myvhwCEFjY1ZwyJmJQb4+GhoUZIiHULwXQE1VHIYkCoDCM3Xmejni6qARkMMSEeuJf6saRw0D/lbWcWgIkRr5fGHLbuZlmakBULtn+noQDqly79NWV4oADnPCOCqbf3tEyhBRNeIp+vm3Xjg6EjYbHRPL3D7NvaTv8plrScHX6Q=
Received: by 10.86.72.15 with SMTP id u15mr10321515fga.11.1205439914605;
        Thu, 13 Mar 2008 13:25:14 -0700 (PDT)
Received: by 10.86.91.5 with HTTP; Thu, 13 Mar 2008 13:25:14 -0700 (PDT)
Message-ID: <e05f0fd10803131325l77d06f11g41d5cd0a3b7797e0@mail.gmail.com>
Date: Thu, 13 Mar 2008 22:25:14 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
In-Reply-To: <e05f0fd10803131230s5afa750av7d45320c520bc0ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4100_8691467.1205439914611"
References: <200803111645.27956.daniel@nuix.com>
	 <200803121229.38013.daniel@nuix.com>
	 <EFF47371-79C3-44B5-806B-16820ED69602@mikemccandless.com>
	 <200803131042.50640.daniel@nuix.com>
	 <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
	 <e05f0fd10803131230s5afa750av7d45320c520bc0ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4100_8691467.1205439914611
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Thu, Mar 13, 2008 at 9:30 PM, Doron Cohen <cdoronc@gmail.com> wrote:

> Hi Daniel, LUCENE-1228 fixes a problem in IndexWriter.commit().
> I suspect this can be related to the problem you see though I am not sure.
> Could you try with the patch there?
> Thanks,
> Doron


Daniel, I was wrong about this - LUCENE-1228 cannot be related to your issue
because
the problem it solves does not exist in 2.3.x (only later). Mike thanks for
pointing this out.
- Doron

------=_Part_4100_8691467.1205439914611--

From java-user-return-33126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 13 20:37:27 2008
Return-Path: <java-user-return-33126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78847 invoked from network); 13 Mar 2008 20:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Mar 2008 20:37:27 -0000
Received: (qmail 74474 invoked by uid 500); 13 Mar 2008 20:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74438 invoked by uid 500); 13 Mar 2008 20:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74427 invoked by uid 99); 13 Mar 2008 20:37:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 13:37:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 20:36:39 +0000
Received: by py-out-1112.google.com with SMTP id z74so4134850pyg.9
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 13:36:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=FAk1rlVwyrnG5wiyHgkFPTXE6L+L97zFXbod+LxY7sg=;
        b=ddQwCU2SOOrp3hLPa9epxHekqvSbN7DUJE3lghQsIUK3Roaz0u62YfLj2YYhYd+nsMMnbBV6vqkJsroQ0SQ1z11q0xitApq3bFdW+YuNF9yL7jDYFWwqoikxWW/Ky18sRaO78hXN6Ii7ThfsS5a7LhzwvTOlf+eeo6JZZ5H8ovU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jjbNCuCli5bz6T8LxWPWH9Xr+uokaQaPOZ4BfevjgLVBubfR/QQf/tdqZBSLEc0prAXacl8h9ySr5evgzpeeRpUfbfasTwrPXOq63Fc1X9Xg2bIi419kvJlAL+eMSjMhYkJrfATsjWzcdUAIdGu9jdzs+HCkestGt9ctj3xvGR8=
Received: by 10.35.101.1 with SMTP id d1mr16400993pym.62.1205440610260;
        Thu, 13 Mar 2008 13:36:50 -0700 (PDT)
Received: from ?9.30.38.162? ( [129.42.184.35])
        by mx.google.com with ESMTPS id x72sm16977965pyg.35.2008.03.13.13.36.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 13 Mar 2008 13:36:49 -0700 (PDT)
Message-ID: <47D98FEE.2040608@gmail.com>
Date: Thu, 13 Mar 2008 13:34:54 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
References: <200803111645.27956.daniel@nuix.com> <200803121226.51420.daniel@nuix.com> <359a92830803120642x3a9afd62p7abbf0104b02cf21@mail.gmail.com> <200803131600.11741.daniel@nuix.com>
In-Reply-To: <200803131600.11741.daniel@nuix.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> 
> For interest's sake I also timed fetching the document with no FieldSelector, 
> that takes around 410ms for the same documents.  So there is still a big 
> benefit in using the field selector, it just isn't anywhere near enough to 
> get it close to the time it takes to retrieve the doc IDs.
> 
> Daniel
> 

Hi Daniel,

did you try to use Payloads for storing the UIDs in the index?

Check out this thread:
http://markmail.org/message/swkwzsww64tzfkdv#query:per-doc%20payloads+page:1+mid:gbrjaydhdu2dz3n4+state:results

-Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 00:40:35 2008
Return-Path: <java-user-return-33127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13927 invoked from network); 14 Mar 2008 00:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 00:40:34 -0000
Received: (qmail 92607 invoked by uid 500); 14 Mar 2008 00:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91752 invoked by uid 500); 14 Mar 2008 00:40:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91736 invoked by uid 99); 14 Mar 2008 00:40:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 17:40:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 00:39:44 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id DD7FB105AC
	for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 17:39:55 -0700 (PDT)
Message-Id: <F95CB390-90F0-44AF-AECF-98AAEB4A9647@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770803131312g31985cb4u9fd7383d8dc9ec98@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: indexing api wrt Analyzer
Date: Thu, 13 Mar 2008 20:39:52 -0400
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com> <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org> <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com> <56705472-C893-4989-9332-466FD96D9C7F@apache.org> <8837fb770803131312g31985cb4u9fd7383d8dc9ec98@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

There is an addDocument method that takes an Analyzer and overrides  
the one used at construction of the IndexWriter.  See
http://lucene.apache.org/java/2_3_1/api/core/org/apache/lucene/index/IndexWriter.html#addDocument(org.apache.lucene.document.Document,%20org.apache.lucene.analysis.Analyzer) 
.



On Mar 13, 2008, at 4:12 PM, John Wang wrote:

> Hi Grant:
>
>    For our corpus, we don't rely on idf in scoring calculation that  
> much,
> so I don't see that being a problem that much.
>
>    About performance, instantiating 1 indexWriter for a batch of say  
> 1000
> docs, e.g. iterate over 1000 docs and do addDocument; comparing with
> instantiating and closing 1000 indexWriters each doing 1  
> addDocument. Are
> you saying the expected performance is the same? I thought when you  
> call
> addDocument, it adds to memory and flush when segment needs to be  
> merged or
> writer closes.
>
>    Maybe I am missing something.
>
> Thanks
>
> -john
>
> On Thu, Mar 13, 2008 at 11:37 AM, Grant Ingersoll  
> <gsingers@apache.org>
> wrote:
>
>>
>> On Mar 13, 2008, at 11:03 AM, John Wang wrote:
>>
>>> Yes, but usually it's a good idea to add documents in batch and not
>>> having
>>> to reinstantiate the writer for every document and then closing it.
>>>
>>> It would be nice if one can specify to the writer which analyzer to
>>> use.
>>>
>>> PerfieldAnalyzer wouldn't work because different analyzers may apply
>>> on the
>>> same field depending on the doc, e.g.
>>>
>>
>> Also, I don't know that it is wise to put different langs in the same
>> field.  I can't prove it definitively, but it seems to me your corpus
>> statistics could be skewed by terms that are spelled the same but  
>> have
>> different meanings across languages.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 03:32:24 2008
Return-Path: <java-user-return-33128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78510 invoked from network); 14 Mar 2008 03:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 03:32:24 -0000
Received: (qmail 35010 invoked by uid 500); 14 Mar 2008 03:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34978 invoked by uid 500); 14 Mar 2008 03:32:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34967 invoked by uid 99); 14 Mar 2008 03:32:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 20:32:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 03:31:39 +0000
Received: by ug-out-1314.google.com with SMTP id u40so4777ugc.29
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 20:31:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=l1OkhY+E7A5/01PJFfZeYO/ZSBusssnyZJWtUB9geZo=;
        b=ouS+rTWrY/x5tnmR7cUTeExMNVhqiK5A+4ixGRDFNeFLbvb+MGlljx6SLGj5sD9PDoICWRzBMtNlwer409QOP4s8INd9RJmzlqe6nfYqnKsdjD08VvobuCjuZCB3zWQL8N0a3o9zYLam38qEC+Yuj0spk0QBz921M7UZ10M3jjQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=H2AUQoJGUJz1vPzhK+GyuZtrb3/sXKRG07um9VxdKw/j98znSeMO1/mqXGN/K8AMCx3a2n1bAN8PntlSovZcOB7yLooIR2R0eILsKPrP2eaERPGNEepM0v1gj7gBWfgYQIzgL+LoD2hlv7jjtyKUvYuBz4xeA460h2pGX3uLf/I=
Received: by 10.67.116.11 with SMTP id t11mr16634ugm.61.1205465509531;
        Thu, 13 Mar 2008 20:31:49 -0700 (PDT)
Received: by 10.67.87.20 with HTTP; Thu, 13 Mar 2008 20:31:44 -0700 (PDT)
Message-ID: <48b038c60803132031n64e2780x61d37502cef89aa7@mail.gmail.com>
Date: Thu, 13 Mar 2008 23:31:44 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Build Lucene maven artifacts
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've looked around (mailing lists, jira) and I can't seem to find
information about how to generate maven artifacts, especially for
contrib.

I mean, I can get lucene from the maven repo, and I know I have to
build the contrib for myself.
But I kind of hoped I would be able to deploy contrib locally without
having to create all the pom.xml files.

Another way to put my question (not being sure it is clear) is : what
should the "generate-maven-artifacts" ant task be used for? And where
can I get the latest version of the *.pom.template files?

Many thanks.

Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 05:04:47 2008
Return-Path: <java-user-return-33129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8046 invoked from network); 14 Mar 2008 05:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 05:04:46 -0000
Received: (qmail 87490 invoked by uid 500); 14 Mar 2008 05:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87462 invoked by uid 500); 14 Mar 2008 05:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87451 invoked by uid 99); 14 Mar 2008 05:04:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 22:04:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rweixiong@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:04:01 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3321394fga.27
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 22:04:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        bh=2SAbTL0P44rX2VLAgy2h4I9vZZl4g6N3xrYTBkATC/Y=;
        b=DTmKOdvFkACE3zBLAv5CoX5vCruFCYWMm+wrLEdIn3xo9r6KruUzgOlFuxUx4kBqmjqUbbsQTi/sc5P9kiYKJh1zmpVt08OPg8EtcPOANEPoErrRnBdib1wG/s2y/UfNciQgrppwSwn0Xb+dAJkNPy+aAB3q9UblSeEmX8D8Io0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=OpY4KB4gowZbkDhuqRyQ500yeuF/3olVVm5FC8ovIkwtPbg6LFJ19S88Q5g1uPNeX/N0nMLB12/Vb1SZOlXH20Ldybq6VXvtcHVEq2WbHUHEF0EH//feaY4fzVcuqXIMq+tPmqW4hh6+NStoprtU0uJ/LZ3jzcB2eIFiBjI7bKw=
Received: by 10.82.116.15 with SMTP id o15mr4604984buc.11.1205471051400;
        Thu, 13 Mar 2008 22:04:11 -0700 (PDT)
Received: by 10.82.141.14 with HTTP; Thu, 13 Mar 2008 22:04:11 -0700 (PDT)
Message-ID: <6ab9363f0803132204x76b22402w9a0f19fd9384808e@mail.gmail.com>
Date: Fri, 14 Mar 2008 13:04:11 +0800
From: "Rao WeiXiong" <wxrao@cse.cuhk.edu.hk>
Sender: rweixiong@gmail.com
To: java-user@lucene.apache.org
Subject: how to list term score inside some document?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 84ff5735de8a90b7
X-Virus-Checked: Checked by ClamAV on apache.org

Dear:

If possible to list all term scores inside some document by some
simple method?  now i just use each term as the query to search the
whole index to get the score. seems very cumbersome. is there any
simple approach?



Cheers!



weixiong

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 05:29:05 2008
Return-Path: <java-user-return-33130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18780 invoked from network); 14 Mar 2008 05:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 05:29:04 -0000
Received: (qmail 8494 invoked by uid 500); 14 Mar 2008 05:28:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8460 invoked by uid 500); 14 Mar 2008 05:28:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8449 invoked by uid 99); 14 Mar 2008 05:28:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 22:28:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of raghuram.nadiminti@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:28:09 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3329362fga.27
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 22:28:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=65e4+EQDR4iNLUuNXHLjof6FSXtK1Jw3WvdygYvo2+M=;
        b=TEN+0+cbGHkOTOfqOcPeEYRM4AAhoTQ4SGjp/0zSS7cDhKSB3wmJ7k9ohNCVlaluNugWjv3tGCYrE6a+fYmgE0bzjN8zvNWmKYSmT8Xs6/TmFseL0WP3AgZGKaOu8wTVMZYj2jTZKPSHL1GhFs3qNC8Ytk6Rdf/YESL1g29qzfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=qTDj3hdixUwN/LNY9cMGkFj3RdvAnTzQJAHngVGNyRpq4bi4r3a9dQwQazqCkrSm7TxzPeiAdhAM89s9k6Ko03miDlrCyFt21pLYrfXj9m7gEqibQH77/e4TsKkxKCarUCMMqBUsEO5Sw6Wnf3ZdbV+FDC+I884de9EAx8wNkrY=
Received: by 10.78.106.3 with SMTP id e3mr29191069huc.51.1205472509761;
        Thu, 13 Mar 2008 22:28:29 -0700 (PDT)
Received: by 10.78.169.4 with HTTP; Thu, 13 Mar 2008 22:28:24 -0700 (PDT)
Message-ID: <1e68ba6b0803132228k794cef29l38a5fb8bb47cc59c@mail.gmail.com>
Date: Fri, 14 Mar 2008 10:58:24 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Language identification ??
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13104_4542791.1205472509703"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13104_4542791.1205472509703
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
  I guess this question is  a bit off the track. Are there any language
identification modules inside Lucene ??? If not can somebody please suggest
me a good one.

Thank You.

------=_Part_13104_4542791.1205472509703--

From java-user-return-33131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 05:55:24 2008
Return-Path: <java-user-return-33131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29745 invoked from network); 14 Mar 2008 05:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 05:55:23 -0000
Received: (qmail 31755 invoked by uid 500); 14 Mar 2008 05:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31408 invoked by uid 500); 14 Mar 2008 05:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31391 invoked by uid 99); 14 Mar 2008 05:55:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 22:55:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:54:36 +0000
Received: by qb-out-0506.google.com with SMTP id o21so3242992qba.9
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 22:54:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=k1Yh7bPB48z0uBmwbTjQYiqL/dwUHpLDd+o2Sbp4SwU=;
        b=NVaCAoqi6/ZUsGKfteMzy7AM+OiTtwO/B4UTJGffK0KicJWILhvCk8RiY4xkO9nyQXdBjR6gIbuThjSrqPzYrmvGG9wb7G03Crsa+FnG27x+uZxPwdMmINgWn/Qe0HgrhTk9XUxVFLQYKoLVppdMQ0RtU/MY1O2WpjLv0vf+Tts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=a1dk3UQvELGQnBWM1mzh/D7ZULFMVwm+rlEMRd6PcJpjeojaiRJ+3LBHke+K6FcXk3eLYX9InkW68VetlNGyXZLc0PdLbjovaZZiJ+oJSgNiozvABTkgteiYYd8yWsQPr/cF8v+UfmLQdYPOF5hs2D6Qlw1QPYCLrAmO2bFv+xE=
Received: by 10.35.93.1 with SMTP id v1mr17457364pyl.42.1205474085802;
        Thu, 13 Mar 2008 22:54:45 -0700 (PDT)
Received: from ?192.168.1.102? ( [70.137.159.95])
        by mx.google.com with ESMTPS id s59sm13976311pyh.40.2008.03.13.22.54.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 13 Mar 2008 22:54:44 -0700 (PDT)
Message-ID: <47DA12B6.1050407@gmail.com>
Date: Thu, 13 Mar 2008 22:52:54 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Build Lucene maven artifacts
References: <48b038c60803132031n64e2780x61d37502cef89aa7@mail.gmail.com>
In-Reply-To: <48b038c60803132031n64e2780x61d37502cef89aa7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Patrick,

I noticed that we do not package the *.pom.template files in the source 
release files. That's why it is not possible to build the maven 
artifacts using official releases.

I'll open a JIRA issue and make sure that we will ship 2.3.2 with the 
template files. In the meantime, you can download the *.pom.template 
files from trunk in the svn repository. No changes were made to these 
files since 2.3.1 was released.

Sorry about the inconvenience!

-Michael

Patrick Turcotte wrote:
> Hi,
> 
> I've looked around (mailing lists, jira) and I can't seem to find
> information about how to generate maven artifacts, especially for
> contrib.
> 
> I mean, I can get lucene from the maven repo, and I know I have to
> build the contrib for myself.
> But I kind of hoped I would be able to deploy contrib locally without
> having to create all the pom.xml files.
> 
> Another way to put my question (not being sure it is clear) is : what
> should the "generate-maven-artifacts" ant task be used for? And where
> can I get the latest version of the *.pom.template files?
> 
> Many thanks.
> 
> Patrick
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 06:09:45 2008
Return-Path: <java-user-return-33132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8205 invoked from network); 14 Mar 2008 06:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 06:09:45 -0000
Received: (qmail 43449 invoked by uid 500); 14 Mar 2008 06:09:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43412 invoked by uid 500); 14 Mar 2008 06:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43401 invoked by uid 99); 14 Mar 2008 06:09:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Mar 2008 23:09:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 06:08:56 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2691815hub.15
        for <java-user@lucene.apache.org>; Thu, 13 Mar 2008 23:09:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=32EAUPeoD8/WNzVOVNk1PP3P3iRHA9HN3MtuBhpGoNQ=;
        b=pSA04JX8Mrc0NnRj40C1phf2Ai7n/YRsC6ljE4C9F4+ajvIHnKrVercinvdf/4bxcfnDG7c5BtvJ5SZKMhEOLyuflhEnHpluwa5pYP7ZF4B+GBuqWJ1QkqAEekNvzzyPJG5cYrmtN/gOmWxlSTOQVYiMtweW3A4zCn6cbsW3Tc8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vxK5Wn0OY2rUQoEEmmyqDtTxh/YhZmJbW+zDzb/jQ12N4sOyBj65ItI2Y7WVyWXwzvDdFd9BHWaVf2q/kOldmw2ffgNwcsiUW+cvkDczyyan/70kDnbiLGNj3iAvVce6uD4XUnqzDMagWW96z8+B93AVNQIazmTwFyNIDCqF3sw=
Received: by 10.86.28.5 with SMTP id b5mr2329150fgb.76.1205474945543;
        Thu, 13 Mar 2008 23:09:05 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Thu, 13 Mar 2008 23:09:05 -0700 (PDT)
Message-ID: <8837fb770803132309h2c886af9i70f83787cf01093@mail.gmail.com>
Date: Thu, 13 Mar 2008 23:09:05 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing api wrt Analyzer
In-Reply-To: <F95CB390-90F0-44AF-AECF-98AAEB4A9647@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13636_20729410.1205474945569"
References: <8837fb770803121740v38537069sf5eba01e284dbbc2@mail.gmail.com>
	 <39A5C7D6-7BBE-400D-B1A9-0D5822F13027@apache.org>
	 <8837fb770803130803u368c4c75n8023835838f7726f@mail.gmail.com>
	 <56705472-C893-4989-9332-466FD96D9C7F@apache.org>
	 <8837fb770803131312g31985cb4u9fd7383d8dc9ec98@mail.gmail.com>
	 <F95CB390-90F0-44AF-AECF-98AAEB4A9647@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13636_20729410.1205474945569
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Excellent!
Exactly what I was looking for!

Thanks Grant!

-John

On Thu, Mar 13, 2008 at 5:39 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> There is an addDocument method that takes an Analyzer and overrides
> the one used at construction of the IndexWriter.  See
>
> http://lucene.apache.org/java/2_3_1/api/core/org/apache/lucene/index/IndexWriter.html#addDocument(org.apache.lucene.document.Document,%20org.apache.lucene.analysis.Analyzer)<http://lucene.apache.org/java/2_3_1/api/core/org/apache/lucene/index/IndexWriter.html#addDocument%28org.apache.lucene.document.Document,%20org.apache.lucene.analysis.Analyzer%29>
> .
>
>
>
> On Mar 13, 2008, at 4:12 PM, John Wang wrote:
>
> > Hi Grant:
> >
> >    For our corpus, we don't rely on idf in scoring calculation that
> > much,
> > so I don't see that being a problem that much.
> >
> >    About performance, instantiating 1 indexWriter for a batch of say
> > 1000
> > docs, e.g. iterate over 1000 docs and do addDocument; comparing with
> > instantiating and closing 1000 indexWriters each doing 1
> > addDocument. Are
> > you saying the expected performance is the same? I thought when you
> > call
> > addDocument, it adds to memory and flush when segment needs to be
> > merged or
> > writer closes.
> >
> >    Maybe I am missing something.
> >
> > Thanks
> >
> > -john
> >
> > On Thu, Mar 13, 2008 at 11:37 AM, Grant Ingersoll
> > <gsingers@apache.org>
> > wrote:
> >
> >>
> >> On Mar 13, 2008, at 11:03 AM, John Wang wrote:
> >>
> >>> Yes, but usually it's a good idea to add documents in batch and not
> >>> having
> >>> to reinstantiate the writer for every document and then closing it.
> >>>
> >>> It would be nice if one can specify to the writer which analyzer to
> >>> use.
> >>>
> >>> PerfieldAnalyzer wouldn't work because different analyzers may apply
> >>> on the
> >>> same field depending on the doc, e.g.
> >>>
> >>
> >> Also, I don't know that it is wise to put different langs in the same
> >> field.  I can't prove it definitively, but it seems to me your corpus
> >> statistics could be skewed by terms that are spelled the same but
> >> have
> >> different meanings across languages.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13636_20729410.1205474945569--

From java-user-return-33133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 08:10:44 2008
Return-Path: <java-user-return-33133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54920 invoked from network); 14 Mar 2008 08:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 08:10:44 -0000
Received: (qmail 42774 invoked by uid 500); 14 Mar 2008 08:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42745 invoked by uid 500); 14 Mar 2008 08:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42734 invoked by uid 99); 14 Mar 2008 08:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 01:10:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sridhar.raman@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 08:09:58 +0000
Received: by py-out-1112.google.com with SMTP id z74so4387017pyg.9
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 01:10:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=QtARue+L6wn2X71ztlCvPtynPyxNXz5d26kK/tYvoAg=;
        b=TSBSc+dZbsmqUAAEWCOkP4XqzwnLsLOXdeM5VMSp6Gtyx3u68OZy5PIYDgHmWROtzWkem3JyM1Kp2yx92/Efa2Dz3YrsW1oF1//OWZKpLs3KvabYgazKtdLV9ZCw9AU+FcdiWAgkP95CeBqcRbMGUzUTJyIayhO+w9xyE2OKY70=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XEYo3hyq1Zna6UW/0WgBAemlJQjuyP5UDJV+LR8F6rOKFbpRKVrFIsyzABnXAWVq7Nxp/ehGAUX+mmbWQ7duCYswzp3G57wKHniAW3V5wODDBhjVk3Zscha23ne2m1S01S6TOkFkZPzlYeSz1OH4IsrRTxqlbxDZkoWruYjtV+k=
Received: by 10.35.33.15 with SMTP id l15mr17653840pyj.31.1205482208075;
        Fri, 14 Mar 2008 01:10:08 -0700 (PDT)
Received: by 10.70.38.8 with HTTP; Fri, 14 Mar 2008 01:10:07 -0700 (PDT)
Message-ID: <227621ad0803140110l6033134aw5fe77bf2bce396ad@mail.gmail.com>
Date: Fri, 14 Mar 2008 13:40:07 +0530
From: "Sridhar Raman" <sridhar.raman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Swapping between indexes
In-Reply-To: <e994873a0803061059q65c2fea9l3d3d321e037d3522@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12875_7747536.1205482207667"
References: <227621ad0803060230i485556av7b58bcd6bfbba6cc@mail.gmail.com>
	 <e994873a0803061059q65c2fea9l3d3d321e037d3522@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12875_7747536.1205482207667
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One quick doubt regarding copying of indexes.  Is the copy done on the
indexes in memory as well, or is it only done on the committed indexes?

On Fri, Mar 7, 2008 at 12:29 AM, Peter Keegan <peterlkeegan@gmail.com>
wrote:

> Sridhar,
>
> We have been using approach 2 in our production system with good results.
> We
> have separate processes for indexing and searching. The main issue that
> came
> up was in deleting old indexes (see: *http://tinyurl.com/32q8c4*). Most of
> our production problems occur during indexing, and we are able to fix
> these
> without having to interrupt searching at all. This has been a real
> benefit.
>
> Peter
>
>
> On Thu, Mar 6, 2008 at 5:30 AM, Sridhar Raman <sridhar.raman@gmail.com>
> wrote:
>
> > This is my situation.  I have an index, which has a lot of search
> requests
> > coming into it.  I use just a single instance of IndexSearcher to
> process
> > these requests.  At the same time, this index is also getting updated by
> > an
> > IndexWriter.  And I want these new changes to be reflected _only_ at
> > certain
> > intervals.  I have thought of a few ways of doing this.  Each has its
> > share
> > of problems and pluses.  I would be glad if someone can help me in
> > figuring
> > out the right approach, especially from the performance point of view,
> as
> > the number of documents that will get indexed are pretty large.
> >
> > Approach 1:
> > Have just one copy of the index for both Search & Index.  At time T,
> when
> > I
> > need to see the new changes reflected, I close the Searcher, and open it
> > again.
> > - The re-open of the Searcher might be a bit slow (which I could
> probably
> > solve by using some warm-up threads).
> > - Update and Search on the index at the same - will this affect the
> > performance?
> > - If server crashes before time T, the new Searcher would reflect the
> > changes, which is not acceptable.  I want the changes to be reflected
> only
> > at time T.  If server crashes, the index should be the previous T-1
> index.
> > - Possible problems while optimising the index (as Search is also
> > happening).
> > + Just one copy of the index being stored.
> >
> > Approach 2:
> > Keep 2 copies of the index - 1 for Search, 1 for Index.  At time T, I
> just
> > switch the Searcher to a copy of index that is being updated.
> > - Before I do the switch to the new index, I need to make a copy of it
> so
> > that the updates continue to happen on the other index.  Is there a
> > convenient way to make this copy?  Is it efficient?
> > - Time taken to create a new Searcher will still be a problem (but this
> is
> > a
> > problem in the previous approach as well, and we can live with it).
> > + Optimise can happen on an index that is not being read, as a result,
> its
> > resource requirements would be lesser.  And probably even the speed of
> > optimisation.
> > + Faster search as the index update is happening on a different index.
> >
> > So, these are the 2 approaches I am contemplating about.  Any pointers
> > which
> > would be the better approach?
> >
> > Thanks,
> > Sridhar
> >
>

------=_Part_12875_7747536.1205482207667--

From java-user-return-33134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 09:07:18 2008
Return-Path: <java-user-return-33134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71757 invoked from network); 14 Mar 2008 09:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 09:07:17 -0000
Received: (qmail 1978 invoked by uid 500); 14 Mar 2008 09:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1942 invoked by uid 500); 14 Mar 2008 09:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1924 invoked by uid 99); 14 Mar 2008 09:07:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 02:07:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 09:06:21 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 1EBCF453FB
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 10:06:37 +0100 (CET)
Message-ID: <47DA401C.4060309@garambrogne.net>
Date: Fri, 14 Mar 2008 10:06:36 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Language identification ??
References: <1e68ba6b0803132228k794cef29l38a5fb8bb47cc59c@mail.gmail.com>
In-Reply-To: <1e68ba6b0803132228k794cef29l38a5fb8bb47cc59c@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Raghu Ram a crit :
> Hi all,
>   I guess this question is  a bit off the track. Are there any language
> identification modules inside Lucene ??? If not can somebody please suggest
> me a good one.
>
> Thank You.
>
>   
nutch provide a tool for that, with ngram pattern, just like OO.o do it.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 12:18:56 2008
Return-Path: <java-user-return-33135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40193 invoked from network); 14 Mar 2008 12:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 12:18:55 -0000
Received: (qmail 60793 invoked by uid 500); 14 Mar 2008 12:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60704 invoked by uid 500); 14 Mar 2008 12:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60693 invoked by uid 99); 14 Mar 2008 12:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:18:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.142 as permitted sender)
Received: from [65.55.175.142] (HELO blu139-omc1-s2.blu139.hotmail.com) (65.55.175.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 12:18:06 +0000
Received: from BLU119-W18 ([65.55.162.181]) by blu139-omc1-s2.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 14 Mar 2008 05:18:15 -0700
Message-ID: <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_1de549ee-6245-4f60-9907-98883bafa6b8_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Search against an index on a mapped drive ...
Date: Fri, 14 Mar 2008 08:18:16 -0400
Importance: Normal
In-Reply-To: <1205496874.55076.ezmlm@lucene.apache.org>
References: <1205496874.55076.ezmlm@lucene.apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Mar 2008 12:18:15.0920 (UTC) FILETIME=[7B0B7F00:01C885CD]
X-Virus-Checked: Checked by ClamAV on apache.org

--_1de549ee-6245-4f60-9907-98883bafa6b8_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I'd like to find out if I can do the following with Lucene (on Windows).

On server A:
- An index writer creates/updates the index.  The index is physically store=
d on server A.
- An index searcher searches against the index.

On server B:
- Maps to the index directory.
- An index searcher searches against the index (physically on server A).

On server C (same setup as server B):
- Maps to the index directory.
- An index searcher searches against the index (physically on server A).

Has anyone done anything similar? Thank you.

_________________________________________________________________
Connect and share in new ways with Windows Live.
http://www.windowslive.com/share.html?ocid=3DTXT_TAGHM_Wave2_sharelife_0120=
08=

--_1de549ee-6245-4f60-9907-98883bafa6b8_--

From java-user-return-33136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 12:23:16 2008
Return-Path: <java-user-return-33136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49141 invoked from network); 14 Mar 2008 12:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 12:23:16 -0000
Received: (qmail 68322 invoked by uid 500); 14 Mar 2008 12:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68284 invoked by uid 500); 14 Mar 2008 12:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68273 invoked by uid 99); 14 Mar 2008 12:23:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:23:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 12:22:18 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 405694542B
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 13:22:38 +0100 (CET)
Message-ID: <47DA6E0D.5060401@garambrogne.net>
Date: Fri, 14 Mar 2008 13:22:37 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search against an index on a mapped drive ...
References: <1205496874.55076.ezmlm@lucene.apache.org> <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
In-Reply-To: <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dragon Fly a crit :
> Hi,
>
> I'd like to find out if I can do the following with Lucene (on Windows).
>
> On server A:
> - An index writer creates/updates the index.  The index is physically stored on server A.
> - An index searcher searches against the index.
>
> On server B:
> - Maps to the index directory.
> - An index searcher searches against the index (physically on server A).
>
> On server C (same setup as server B):
> - Maps to the index directory.
> - An index searcher searches against the index (physically on server A).
>
> Has anyone done anything similar? Thank you.
>   
With shared drive, you will have SMB latency. Why don't use copy, or RMI 
call?

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 12:39:33 2008
Return-Path: <java-user-return-33137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55870 invoked from network); 14 Mar 2008 12:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 12:39:33 -0000
Received: (qmail 89878 invoked by uid 500); 14 Mar 2008 12:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89850 invoked by uid 500); 14 Mar 2008 12:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89839 invoked by uid 99); 14 Mar 2008 12:39:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:39:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 12:38:46 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0E06330EFC1A; Fri, 14 Mar 2008 06:38:57 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-188-69.dyn.embarqhsd.net [69.68.188.69])
	by ehatchersolutions.com (Postfix) with ESMTP id 9FA6F30EFC19
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 06:38:48 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47DA6E0D.5060401@garambrogne.net>
References: <1205496874.55076.ezmlm@lucene.apache.org> <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl> <47DA6E0D.5060401@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <A9E14587-159A-4365-AB57-1B7BFAADE67A@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search against an index on a mapped drive ...
Date: Fri, 14 Mar 2008 08:38:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Mar 14, 2008, at 8:22 AM, Mathieu Lecarme wrote:

> Dragon Fly a =E9crit :
>> Hi,
>>
>> I'd like to find out if I can do the following with Lucene (on =20
>> Windows).
>>
>> On server A:
>> - An index writer creates/updates the index.  The index is =20
>> physically stored on server A.
>> - An index searcher searches against the index.
>>
>> On server B:
>> - Maps to the index directory.
>> - An index searcher searches against the index (physically on =20
>> server A).
>>
>> On server C (same setup as server B):
>> - Maps to the index directory.
>> - An index searcher searches against the index (physically on =20
>> server A).
>>
>> Has anyone done anything similar? Thank you.
>>
> With shared drive, you will have SMB latency. Why don't use copy, =20
> or RMI call?

Or Solr!  :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 12:51:52 2008
Return-Path: <java-user-return-33138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61222 invoked from network); 14 Mar 2008 12:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 12:51:52 -0000
Received: (qmail 3783 invoked by uid 500); 14 Mar 2008 12:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3738 invoked by uid 500); 14 Mar 2008 12:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3642 invoked by uid 99); 14 Mar 2008 12:51:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:51:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Mar 2008 12:51:00 +0000
Received: (qmail invoked by alias); 14 Mar 2008 12:51:08 -0000
Received: from e178092051.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.51]
  by mail.gmx.net (mp049) with SMTP; 14 Mar 2008 13:51:08 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/+ndZPy8D+4fmm5WVZt6ATEy1G43kbTY+CSBJAN+
	/RxicLyudYZtmK
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <299694.65385.qm@web50309.mail.re2.yahoo.com>
Subject: RE: Biggest index
Date: Fri, 14 Mar 2008 13:51:10 +0100
Message-ID: <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <299694.65385.qm@web50309.mail.re2.yahoo.com>
Thread-Index: AciDqzTjSCvgn+fdS0SeHGTHdAP+qACJdo1A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Yes of course, the answers to your questions are important too.
But no anwser at all until now :(

For me I can say (not production yet):

2 ID-Fields and one content field per doc. Seach on content field only.
Simple searches like "content:foo" or "content:foo*".
1,5 GB index per 1 million docs.
About 50 million docs now.
Max. 10 million docs per year increase.

So I will have 75 GB index soon.

Can searching this index be handled by a single machine?=20

Thank you.

> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
> Sent: Dienstag, 11. M=E4rz 2008 20:07
> To: java-user@lucene.apache.org
> Subject: Re: Biggest index
>=20
> Questions like these are always hard to answer well. =20
> Actually, no, they are easy, right Erik: "It depends" ;)
>=20
> Just kidding...partially.  Anyhow, you should ask a few more=20
> questions then:
>=20
> - what is the response latency? (average, median, Nth percentile...)
> - are stored fields involved, if so how many and how big are they?
> - what kind of queries are involves (some are costlier than others)
> - what is the search rate?
> ...
>=20
>=20
> Otis=20
>=20
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>=20
> ----- Original Message ----
> From: "spring@gmx.eu" <spring@gmx.eu>
> To: java-user@lucene.apache.org
> Sent: Monday, March 10, 2008 5:06:04 PM
> Subject: Biggest index
>=20
> Hi,
>=20
> I have some question about the index size on a single machine:
>=20
> What is your biggest index you use in production?
> Do you use MultiReader/Searcher?
> What hardware do you need to serve it?
> What kind of application is it?
>=20
> Thank you.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 12:59:22 2008
Return-Path: <java-user-return-33139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65157 invoked from network); 14 Mar 2008 12:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 12:59:22 -0000
Received: (qmail 13167 invoked by uid 500); 14 Mar 2008 12:59:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13144 invoked by uid 500); 14 Mar 2008 12:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13133 invoked by uid 99); 14 Mar 2008 12:59:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 05:59:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 12:58:33 +0000
Received: by rn-out-0910.google.com with SMTP id a46so2590613rne.9
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 05:58:39 -0700 (PDT)
Received: by 10.151.44.18 with SMTP id w18mr6284681ybj.184.1205499519190;
        Fri, 14 Mar 2008 05:58:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 30sm6082421hso.15.2008.03.14.05.58.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 14 Mar 2008 05:58:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
References: <1205496874.55076.ezmlm@lucene.apache.org> <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2C7669B6-15D1-428E-9CB2-0C1E47476F3E@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Search against an index on a mapped drive ...
Date: Fri, 14 Mar 2008 08:58:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


This setup should work fine, but as others said definitely explore  
options & test search performance.

Mike

Dragon Fly wrote:

> Hi,
>
> I'd like to find out if I can do the following with Lucene (on  
> Windows).
>
> On server A:
> - An index writer creates/updates the index.  The index is  
> physically stored on server A.
> - An index searcher searches against the index.
>
> On server B:
> - Maps to the index directory.
> - An index searcher searches against the index (physically on  
> server A).
>
> On server C (same setup as server B):
> - Maps to the index directory.
> - An index searcher searches against the index (physically on  
> server A).
>
> Has anyone done anything similar? Thank you.
>
> _________________________________________________________________
> Connect and share in new ways with Windows Live.
> http://www.windowslive.com/share.html? 
> ocid=TXT_TAGHM_Wave2_sharelife_012008


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 13:35:04 2008
Return-Path: <java-user-return-33140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79752 invoked from network); 14 Mar 2008 13:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 13:35:04 -0000
Received: (qmail 60761 invoked by uid 500); 14 Mar 2008 13:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60725 invoked by uid 500); 14 Mar 2008 13:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60714 invoked by uid 99); 14 Mar 2008 13:34:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 06:34:54 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 13:34:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id BD463739FE
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 06:34:23 -0700 (PDT)
Message-Id: <E1B5A823-D78B-4D61-B49B-3BA6C3F36BE1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1e68ba6b0803132228k794cef29l38a5fb8bb47cc59c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Language identification ??
Date: Fri, 14 Mar 2008 09:34:22 -0400
References: <1e68ba6b0803132228k794cef29l38a5fb8bb47cc59c@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I think Karl Wettin has one that is a patch in JIRA.  Try searching  
there.

On Mar 14, 2008, at 1:28 AM, Raghu Ram wrote:

> Hi all,
>  I guess this question is  a bit off the track. Are there any language
> identification modules inside Lucene ??? If not can somebody please  
> suggest
> me a good one.
>
> Thank You.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 14:31:29 2008
Return-Path: <java-user-return-33141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11232 invoked from network); 14 Mar 2008 14:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 14:31:29 -0000
Received: (qmail 68031 invoked by uid 500); 14 Mar 2008 14:31:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68008 invoked by uid 500); 14 Mar 2008 14:31:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67995 invoked by uid 99); 14 Mar 2008 14:31:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 07:31:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.197] (HELO out2.bezeqint.net) (192.115.188.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 14:30:40 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out2.bezeqint.net (Postfix) with ESMTPA id 40ACF2103A5
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 16:31:20 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Language identification ??
Date: Fri, 14 Mar 2008 16:30:39 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <E1B5A823-D78B-4D61-B49B-3BA6C3F36BE1@apache.org>
Thread-Index: AciF2Cy7jXsw61q9Q2i6sjmeWgXXjAABy19w
Message-Id: <20080314143120.40ACF2103A5@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


For what it worths, I did something similar in my BidiAnalyzer so I can
index both Hebrew/Semitic texts and English/Latin words without switching
analyzers, giving each the proper treatment. I did it simply by testing the
first char and looking at its numeric value - so it falls between Hebrew
Aleph and Taph then its Hebrew, else its Latin. I wonder how you would spot
a French word in an English text for instance (aren't there parallel words?)

Itamar.

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: Friday, March 14, 2008 3:34 PM
To: java-user@lucene.apache.org
Subject: Re: Language identification ??

I think Karl Wettin has one that is a patch in JIRA.  Try searching there.

On Mar 14, 2008, at 1:28 AM, Raghu Ram wrote:

> Hi all,
>  I guess this question is  a bit off the track. Are there any language 
> identification modules inside Lucene ??? If not can somebody please 
> suggest me a good one.
>
> Thank You.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 14:49:28 2008
Return-Path: <java-user-return-33142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22948 invoked from network); 14 Mar 2008 14:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 14:49:27 -0000
Received: (qmail 22380 invoked by uid 500); 14 Mar 2008 14:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22353 invoked by uid 500); 14 Mar 2008 14:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22342 invoked by uid 99); 14 Mar 2008 14:49:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 07:49:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 14:48:29 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 528FE45312
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 15:48:48 +0100 (CET)
Message-ID: <47DA904F.3070802@garambrogne.net>
Date: Fri, 14 Mar 2008 15:48:47 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Language identification ??
References: <20080314143120.40ACF2103A5@out2.bezeqint.net>
In-Reply-To: <20080314143120.40ACF2103A5@out2.bezeqint.net>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Itamar Syn-Hershko a crit :
> For what it worths, I did something similar in my BidiAnalyzer so I can
> index both Hebrew/Semitic texts and English/Latin words without switching
> analyzers, giving each the proper treatment. I did it simply by testing the
> first char and looking at its numeric value - so it falls between Hebrew
> Aleph and Taph then its Hebrew, else its Latin. I wonder how you would spot
> a French word in an English text for instance (aren't there parallel words?)
>
> Itamar.
With ngram statistic compare.
Finding foreign word in a sentence is very difficult, many words are 
very similar, and some are "faux amis" : same differents means in each 
language.
Querying in mixing language seems to be a bit vicious. Mixing alphabet 
is more common (and easier to handle).

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 14:59:17 2008
Return-Path: <java-user-return-33143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27921 invoked from network); 14 Mar 2008 14:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 14:59:17 -0000
Received: (qmail 53701 invoked by uid 500); 14 Mar 2008 14:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53666 invoked by uid 500); 14 Mar 2008 14:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53655 invoked by uid 99); 14 Mar 2008 14:59:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 07:59:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 14:58:31 +0000
Received: by fk-out-0910.google.com with SMTP id 19so161579fkr.5
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 07:58:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=c9psTIVJi9wEsqOMvm9thVDOeh3e7L6QVID78yTlj4U=;
        b=vcomHon845lx5h9v1FMsupqW8qI54UqI3navOnEwxnZjTbA54Btc0MjDw/GpKIppar7lwpAu8x6C31w8qewjCSotjetF1aUV8LdS0LlNpeL3EJuEqsefm6uC6guL/Or2j1SMBFp8YRKtPdw7Mn36DYpN4kVU5oPa+CnQa5zqwlw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DQ6FEdQwF1+7IM7gi5j9byJ1fbCd3UJSv9246e4ftyqb0ILV0xRlozeufdMVrF/UqaSg1VkxoaRDyF2lTplctuyYCYvDtvprA7HZR4UflSlZErNf7rGj0xWVCzIdq1XfSBCWIUwWR/Ph3zyGUGB0bxK97nnXLH1CWXKP1itdhL0=
Received: by 10.82.118.2 with SMTP id q2mr26743318buc.27.1205506720134;
        Fri, 14 Mar 2008 07:58:40 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Fri, 14 Mar 2008 07:58:40 -0700 (PDT)
Message-ID: <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
Date: Fri, 14 Mar 2008 10:58:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1824_27479100.1205506720122"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1824_27479100.1205506720122
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Doc IDs are assigned at index time and can change over time That is,
deleting
a document and optimizing (and other operations) can and will change
document IDs. So, yes, you have to do a search (either use a hits object
or one of the HitCollectors) in order to delete by doc ID.

You can also delete by terms, see the API.

There are other options, but you haven't explianed what you're
trying to accomplish enough to offer any more suggestions.

Best
Erick

On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:

> No. I haven't but I will. even though I would like to make my own
> implementation. So any idea of how to get the "doc num"?
>
> Thanks for replying.
> Varun
>
> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
> wrote:
>
> > Have you seen the work that Mark Harwood has done making a GWT version
> > of Luke? I think its in the latest release.
> >
> > varun sood wrote:
> > > Hi,
> > >   I am trying to delete a document without using the hits object.
> > > What is the unique field in the index that I can use to delete the
> > document?
> > >
> > > I am trying to make a web interface where index can be modified,
> smaller
> > > subset of what Luke does but using JSPs and Servlet.
> > >
> > > to use deleteDocument(int docNum)
> > > I need docNum how can I get this? or does it have to come only vis
> Hits?
> > >
> > > Thanks,
> > > Varun
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_1824_27479100.1205506720122--

From java-user-return-33144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 15:25:19 2008
Return-Path: <java-user-return-33144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14086 invoked from network); 14 Mar 2008 15:25:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 15:25:19 -0000
Received: (qmail 97562 invoked by uid 500); 14 Mar 2008 15:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97526 invoked by uid 500); 14 Mar 2008 15:25:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97515 invoked by uid 99); 14 Mar 2008 15:25:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 08:25:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghuram.nadiminti@gmail.com designates 72.14.214.239 as permitted sender)
Received: from [72.14.214.239] (HELO hu-out-0506.google.com) (72.14.214.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 15:24:33 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2789875hub.15
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 08:24:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oLI5OP3qxrwCDmQO6pY7eBJxENhtN6MhDH2KKmxsm2g=;
        b=FgaBCg+DXcuouTxjQaG8HQMr5hxvTmDh3GWD1/WyiAYPVotYi098mhAbl+s3tOW+ns9lXMqL2tSDMBJrdMrQunYTA/yPCq5Rth/zCamBKfXJ3MbOt8bV3qmEle8zcGKrsexNuscV/5swHIBQQH8IB5xC/3fEQMHcJDm8LJJ488o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j+q6efixqRy/3kVreKxKQVOqS4srqJ2cDmHu58TRjxH5Njlej9nLiTpv+pspVZuIs/P0sBH8ooyJwuy++RJU+xKuyHACPmy0aLxb2m86N4+fAKRpx9+606bvLBuwMerrvUAgDlOzPbhwPJXslpPjLq+NJma7d95z3Ee/gENJ7GA=
Received: by 10.78.81.20 with SMTP id e20mr30798387hub.19.1205508281681;
        Fri, 14 Mar 2008 08:24:41 -0700 (PDT)
Received: by 10.78.169.4 with HTTP; Fri, 14 Mar 2008 08:24:41 -0700 (PDT)
Message-ID: <1e68ba6b0803140824x21f3b847i999f7e02cbf7d4dd@mail.gmail.com>
Date: Fri, 14 Mar 2008 20:54:41 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Language identification ??
In-Reply-To: <47DA904F.3070802@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_969_8770738.1205508281634"
References: <20080314143120.40ACF2103A5@out2.bezeqint.net>
	 <47DA904F.3070802@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_969_8770738.1205508281634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

to complicate it further ... the text for which language identification has
to be done is small, in most cases a short sentence like " I like Pepsi ".
Can something be done for this ?

On Fri, Mar 14, 2008 at 8:18 PM, Mathieu Lecarme <mathieu@garambrogne.net>
wrote:

> Itamar Syn-Hershko a =E9crit :
> > For what it worths, I did something similar in my BidiAnalyzer so I can
> > index both Hebrew/Semitic texts and English/Latin words without
> switching
> > analyzers, giving each the proper treatment. I did it simply by testing
> the
> > first char and looking at its numeric value - so it falls between Hebre=
w
> > Aleph and Taph then its Hebrew, else its Latin. I wonder how you would
> spot
> > a French word in an English text for instance (aren't there parallel
> words?)
> >
> > Itamar.
> With ngram statistic compare.
> Finding foreign word in a sentence is very difficult, many words are
> very similar, and some are "faux amis" : same differents means in each
> language.
> Querying in mixing language seems to be a bit vicious. Mixing alphabet
> is more common (and easier to handle).
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_969_8770738.1205508281634--

From java-user-return-33145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 15:50:25 2008
Return-Path: <java-user-return-33145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27774 invoked from network); 14 Mar 2008 15:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 15:50:25 -0000
Received: (qmail 40077 invoked by uid 500); 14 Mar 2008 15:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40050 invoked by uid 500); 14 Mar 2008 15:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40039 invoked by uid 99); 14 Mar 2008 15:50:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 08:50:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 15:49:27 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id CD8AF45283
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 16:49:05 +0100 (CET)
Message-ID: <47DA9E70.6050701@garambrogne.net>
Date: Fri, 14 Mar 2008 16:49:04 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Language identification ??
References: <20080314143120.40ACF2103A5@out2.bezeqint.net>	 <47DA904F.3070802@garambrogne.net> <1e68ba6b0803140824x21f3b847i999f7e02cbf7d4dd@mail.gmail.com>
In-Reply-To: <1e68ba6b0803140824x21f3b847i999f7e02cbf7d4dd@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Raghu Ram a crit :
> to complicate it further ... the text for which language identification has
> to be done is small, in most cases a short sentence like " I like Pepsi ".
> Can something be done for this ?
>   
Drinking water?
More seriously, if ngram pattern language guessing is too ambigous, 
search in both language.
If user wont one specific language, give him a radio button.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 16:28:54 2008
Return-Path: <java-user-return-33146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47372 invoked from network); 14 Mar 2008 16:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 16:28:54 -0000
Received: (qmail 964 invoked by uid 500); 14 Mar 2008 16:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 931 invoked by uid 500); 14 Mar 2008 16:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 920 invoked by uid 99); 14 Mar 2008 16:28:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 09:28:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rweixiong@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 16:28:08 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3538152fga.27
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 09:28:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=2SAbTL0P44rX2VLAgy2h4I9vZZl4g6N3xrYTBkATC/Y=;
        b=rdaQU97w5wZZIv51EY1rU8ltsPuVJ3NCgysUbNEjLpqVoipOVMiBXCAX2kskkJOVMu4DmLjHagZup3C51AKhlNhD6echFZ0Rwlm5ev+dKzqHD7PtM12PKKPji0iU7Yn9vuPQthE1fOW946vEWrIp/24WCjRLTU0UGXGpPJpz4Qc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Kn4jd9KcBFN4uGbFCbRrLbyjp4ywbvSmOlgol0TWUBsfNh9Eq4Z/MM+BWjp0o071clh316/wHvyL5B3hJI08x3dAqcVGhR3xIT8NwRmVrSNTE5bAFFl+Rub7lOLSdcN9JGa+6U/JTD5BApyVvCNEMXbgeGJpgjBBcyuvv8jm0ng=
Received: by 10.82.146.10 with SMTP id t10mr27054169bud.6.1205512097128;
        Fri, 14 Mar 2008 09:28:17 -0700 (PDT)
Received: by 10.82.141.14 with HTTP; Fri, 14 Mar 2008 09:28:17 -0700 (PDT)
Message-ID: <6ab9363f0803140928u529cdb84xdc9d1a356f31fb6c@mail.gmail.com>
Date: Sat, 15 Mar 2008 00:28:17 +0800
From: "Rao WeiXiong" <rweixiong@gmail.com>
To: java-user@lucene.apache.org
Subject: HELP: how to list term score inside some document?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Dear:

If possible to list all term scores inside some document by some
simple method?  now i just use each term as the query to search the
whole index to get the score. seems very cumbersome. is there any
simple approach?



Cheers!



weixiong

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 16:56:13 2008
Return-Path: <java-user-return-33147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60220 invoked from network); 14 Mar 2008 16:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 16:56:13 -0000
Received: (qmail 37204 invoked by uid 500); 14 Mar 2008 16:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37172 invoked by uid 500); 14 Mar 2008 16:56:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37161 invoked by uid 99); 14 Mar 2008 16:56:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 09:56:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 16:55:14 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2EGrZWN001829
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 17:53:35 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: HELP: how to list term score inside some document?
Date: Fri, 14 Mar 2008 17:53:35 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <6ab9363f0803140928u529cdb84xdc9d1a356f31fb6c@mail.gmail.com>
In-Reply-To: <6ab9363f0803140928u529cdb84xdc9d1a356f31fb6c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803141753.35463.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 14 March 2008 17:28:17 schreef Rao WeiXiong:
> Dear:
>
> If possible to list all term scores inside some document by some
> simple method?  now i just use each term as the query to search the
> whole index to get the score. seems very cumbersome. is there any
> simple approach?

Have a look at Searcher.explain()

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 14 17:16:38 2008
Return-Path: <java-user-return-33148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74581 invoked from network); 14 Mar 2008 17:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Mar 2008 17:16:35 -0000
Received: (qmail 74535 invoked by uid 500); 14 Mar 2008 17:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74506 invoked by uid 500); 14 Mar 2008 17:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74495 invoked by uid 99); 14 Mar 2008 17:16:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 10:16:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.154 as permitted sender)
Received: from [65.55.175.154] (HELO blu139-omc1-s14.blu139.hotmail.com) (65.55.175.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 17:15:42 +0000
Received: from BLU119-W2 ([65.55.162.181]) by blu139-omc1-s14.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 14 Mar 2008 10:15:52 -0700
Message-ID: <BLU119-W2BA64A56FEB25595AEC5EB90A0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_6c0c2776-c947-4381-9a7b-8abd43b9fe18_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Search against an index on a mapped drive ...
Date: Fri, 14 Mar 2008 13:15:52 -0400
Importance: Normal
In-Reply-To: <2C7669B6-15D1-428E-9CB2-0C1E47476F3E@mikemccandless.com>
References: <1205496874.55076.ezmlm@lucene.apache.org>
 <BLU119-W18AC0298D54769435528C3B90A0@phx.gbl>
 <2C7669B6-15D1-428E-9CB2-0C1E47476F3E@mikemccandless.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Mar 2008 17:15:52.0660 (UTC) FILETIME=[0E7DC940:01C885F7]
X-Virus-Checked: Checked by ClamAV on apache.org

--_6c0c2776-c947-4381-9a7b-8abd43b9fe18_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thank you all.

> From: lucene@mikemccandless.com
> Subject: Re: Search against an index on a mapped drive ...
> Date: Fri, 14 Mar 2008 08:58:41 -0400
> To: java-user@lucene.apache.org
>=20
>=20
> This setup should work fine, but as others said definitely explore =20
> options & test search performance.
>=20
> Mike
>=20
> Dragon Fly wrote:
>=20
> > Hi,
> >
> > I'd like to find out if I can do the following with Lucene (on =20
> > Windows).
> >
> > On server A:
> > - An index writer creates/updates the index.  The index is =20
> > physically stored on server A.
> > - An index searcher searches against the index.
> >
> > On server B:
> > - Maps to the index directory.
> > - An index searcher searches against the index (physically on =20
> > server A).
> >
> > On server C (same setup as server B):
> > - Maps to the index directory.
> > - An index searcher searches against the index (physically on =20
> > server A).
> >
> > Has anyone done anything similar? Thank you.
> >
> > _________________________________________________________________
> > Connect and share in new ways with Windows Live.
> > http://www.windowslive.com/share.html?=20
> > ocid=3DTXT_TAGHM_Wave2_sharelife_012008
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Connect and share in new ways with Windows Live.
http://www.windowslive.com/share.html?ocid=3DTXT_TAGHM_Wave2_sharelife_0120=
08=

--_6c0c2776-c947-4381-9a7b-8abd43b9fe18_--

From java-user-return-33149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 03:02:20 2008
Return-Path: <java-user-return-33149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42920 invoked from network); 15 Mar 2008 03:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 03:02:19 -0000
Received: (qmail 17715 invoked by uid 500); 15 Mar 2008 03:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17688 invoked by uid 500); 15 Mar 2008 03:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17677 invoked by uid 99); 15 Mar 2008 03:02:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 20:02:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 03:01:20 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 8DAAC109F31
	for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 20:01:37 -0700 (PDT)
Message-Id: <1E6658DD-D70C-423B-B75E-4763EEC2EF8B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Biggest index
Date: Fri, 14 Mar 2008 23:01:38 -0400
References: <299694.65385.qm@web50309.mail.re2.yahoo.com> <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

How big is your machine and how big are your docs? (unique terms, =20
etc.)   Even if it would fit, it sounds like you are going to have to =20=

go distributed sooner or later, so you might as well start planning =20
for it.

-Grant

On Mar 14, 2008, at 8:51 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

> Yes of course, the answers to your questions are important too.
> But no anwser at all until now :(
>
> For me I can say (not production yet):
>
> 2 ID-Fields and one content field per doc. Seach on content field =20
> only.
> Simple searches like "content:foo" or "content:foo*".
> 1,5 GB index per 1 million docs.
> About 50 million docs now.
> Max. 10 million docs per year increase.
>
> So I will have 75 GB index soon.
>
> Can searching this index be handled by a single machine?
>
> Thank you.
>
>> -----Original Message-----
>> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> Sent: Dienstag, 11. M=E4rz 2008 20:07
>> To: java-user@lucene.apache.org
>> Subject: Re: Biggest index
>>
>> Questions like these are always hard to answer well.
>> Actually, no, they are easy, right Erik: "It depends" ;)
>>
>> Just kidding...partially.  Anyhow, you should ask a few more
>> questions then:
>>
>> - what is the response latency? (average, median, Nth percentile...)
>> - are stored fields involved, if so how many and how big are they?
>> - what kind of queries are involves (some are costlier than others)
>> - what is the search rate?
>> ...
>>
>>
>> Otis
>>
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: "spring@gmx.eu" <spring@gmx.eu>
>> To: java-user@lucene.apache.org
>> Sent: Monday, March 10, 2008 5:06:04 PM
>> Subject: Biggest index
>>
>> Hi,
>>
>> I have some question about the index size on a single machine:
>>
>> What is your biggest index you use in production?
>> Do you use MultiReader/Searcher?
>> What hardware do you need to serve it?
>> What kind of application is it?
>>
>> Thank you.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 04:15:11 2008
Return-Path: <java-user-return-33150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94669 invoked from network); 15 Mar 2008 04:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 04:15:10 -0000
Received: (qmail 66543 invoked by uid 500); 15 Mar 2008 04:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66512 invoked by uid 500); 15 Mar 2008 04:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66501 invoked by uid 99); 15 Mar 2008 04:15:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 21:15:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 04:14:22 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3734770fga.27
        for <java-user@lucene.apache.org>; Fri, 14 Mar 2008 21:14:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=28Xi9lfcCsPSUZR/0K+G8pjq/9bbmS4jHm99oCP1a8c=;
        b=K0WAJt3wYrGiRVULZ5+heLynJBqqdV9GioI+wtq52StftrSz1MxCG46ugDWj3LJuX+KSHB7YCIvqJ5es1FmpqxjS+EjnyKsI8w0VXq0O5IM8YeoVDEl8/PIN8Woo+jai1x/sMymUctQLePNtsbWrwtul84VxWZRqyq8q+5fSY74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nmo25capAL3M8LyxugDcEFIKp5RsD7DfPxRE5fiANY4GkSLXSK9p4QNOlwmKMawAy3UgsO6WgFA/LpRT6ZEOvhjAKxgIN7NZmoeqBqmn/Lb0fXy9Hbzlhi4+pN3/cMtTd00PUOcxaISwyox2KWcw97YOJcuj4kiyAr95tEOni3A=
Received: by 10.86.72.15 with SMTP id u15mr11488980fga.21.1205554471653;
        Fri, 14 Mar 2008 21:14:31 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Fri, 14 Mar 2008 21:14:31 -0700 (PDT)
Message-ID: <8837fb770803142114r58dc03ebyca5ea6e2d2c7d46a@mail.gmail.com>
Date: Fri, 14 Mar 2008 21:14:31 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Biggest index
In-Reply-To: <1E6658DD-D70C-423B-B75E-4763EEC2EF8B@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1979_9023113.1205554471634"
References: <299694.65385.qm@web50309.mail.re2.yahoo.com>
	 <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
	 <1E6658DD-D70C-423B-B75E-4763EEC2EF8B@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1979_9023113.1205554471634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

We are running on one box in prod with 20 million docs in one index.
-John

On Fri, Mar 14, 2008 at 8:01 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> How big is your machine and how big are your docs? (unique terms,
> etc.)   Even if it would fit, it sounds like you are going to have to
> go distributed sooner or later, so you might as well start planning
> for it.
>
> -Grant
>
> On Mar 14, 2008, at 8:51 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:
>
> > Yes of course, the answers to your questions are important too.
> > But no anwser at all until now :(
> >
> > For me I can say (not production yet):
> >
> > 2 ID-Fields and one content field per doc. Seach on content field
> > only.
> > Simple searches like "content:foo" or "content:foo*".
> > 1,5 GB index per 1 million docs.
> > About 50 million docs now.
> > Max. 10 million docs per year increase.
> >
> > So I will have 75 GB index soon.
> >
> > Can searching this index be handled by a single machine?
> >
> > Thank you.
> >
> >> -----Original Message-----
> >> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >> Sent: Dienstag, 11. M=E4rz 2008 20:07
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Biggest index
> >>
> >> Questions like these are always hard to answer well.
> >> Actually, no, they are easy, right Erik: "It depends" ;)
> >>
> >> Just kidding...partially.  Anyhow, you should ask a few more
> >> questions then:
> >>
> >> - what is the response latency? (average, median, Nth percentile...)
> >> - are stored fields involved, if so how many and how big are they?
> >> - what kind of queries are involves (some are costlier than others)
> >> - what is the search rate?
> >> ...
> >>
> >>
> >> Otis
> >>
> >> --
> >> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >>
> >> ----- Original Message ----
> >> From: "spring@gmx.eu" <spring@gmx.eu>
> >> To: java-user@lucene.apache.org
> >> Sent: Monday, March 10, 2008 5:06:04 PM
> >> Subject: Biggest index
> >>
> >> Hi,
> >>
> >> I have some question about the index size on a single machine:
> >>
> >> What is your biggest index you use in production?
> >> Do you use MultiReader/Searcher?
> >> What hardware do you need to serve it?
> >> What kind of application is it?
> >>
> >> Thank you.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1979_9023113.1205554471634--

From java-user-return-33151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 05:47:46 2008
Return-Path: <java-user-return-33151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23881 invoked from network); 15 Mar 2008 05:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 05:47:46 -0000
Received: (qmail 5325 invoked by uid 500); 15 Mar 2008 05:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5294 invoked by uid 500); 15 Mar 2008 05:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5283 invoked by uid 99); 15 Mar 2008 05:47:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 22:47:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 05:46:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JaPEY-00063e-GQ
	for java-user@lucene.apache.org; Fri, 14 Mar 2008 22:47:06 -0700
Message-ID: <16064453.post@talk.nabble.com>
Date: Fri, 14 Mar 2008 22:47:06 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting a doc field takes more time
In-Reply-To: <7BFE71C0-F9C0-43AB-A7CB-AB8F1E9E07EC@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <16024551.post@talk.nabble.com> <7BFE71C0-F9C0-43AB-A7CB-AB8F1E9E07EC@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


HI,
thnx for reply
field ,documents ,sort and sort field all are lucene classes
and after getting the results at the time of displaying am using sort class
to sort the reults based on particular field 
the code for sorting
              Query query = parser.parse(queryString);
             Sort   sort = new Sort(new SortField(field));
                Hits  hits = searcher.search(query,sort);



Grant Ingersoll-6 wrote:
> 
> What's in "field"?  What are your docs?  More info is needed to help...
> 
> -Grant
> On Mar 13, 2008, at 6:50 AM, sandyg wrote:
> 
>>
>> Hi,
>>
>> Thnxs for spending  time for the problem.
>>
>> When sorting the results of lucene search it takes more time and not  
>> looks
>> not that much usefull can any one help
>> Below is my code..
>>
>>                sort = new Sort(new SortField(field));
>>                hits = searcher.search(query,sort);
>>
>> Once again thnx
>> -- 
>> View this message in context:
>> http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16024551.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16064453.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 06:25:29 2008
Return-Path: <java-user-return-33152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62522 invoked from network); 15 Mar 2008 06:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 06:25:28 -0000
Received: (qmail 23909 invoked by uid 500); 15 Mar 2008 06:25:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23881 invoked by uid 500); 15 Mar 2008 06:25:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23870 invoked by uid 99); 15 Mar 2008 06:25:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Mar 2008 23:25:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 06:24:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JaPp4-0007Ar-32
	for java-user@lucene.apache.org; Fri, 14 Mar 2008 23:24:50 -0700
Message-ID: <16064453.post@talk.nabble.com>
Date: Fri, 14 Mar 2008 23:24:50 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting a doc field takes more time
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


HI,
thnx for reply
field ,documents ,sort and sort field all are lucene classes
and after getting the results at the time of displaying am using sort class
to sort the results based on particular field 
the code for sorting
              Query query = parser.parse(queryString);
             Sort   sort = new Sort(new SortField(field));
                Hits  hits = searcher.search(query,sort);



Grant Ingersoll-6 wrote:
> 
> What's in "field"?  What are your docs?  More info is needed to help...
> 
> -Grant
> On Mar 13, 2008, at 6:50 AM, sandyg wrote:
> 
>>
>> Hi,
>>
>> Thnxs for spending  time for the problem.
>>
>> When sorting the results of lucene search it takes more time and not  
>> looks
>> not that much usefull can any one help
>> Below is my code..
>>
>>                sort = new Sort(new SortField(field));
>>                hits = searcher.search(query,sort);
>>
>> Once again thnx
>> -- 
>> View this message in context:
>> http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16024551.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16064453.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 21:22:18 2008
Return-Path: <java-user-return-33153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46788 invoked from network); 15 Mar 2008 21:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 21:22:17 -0000
Received: (qmail 71517 invoked by uid 500); 15 Mar 2008 21:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71479 invoked by uid 500); 15 Mar 2008 21:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71468 invoked by uid 99); 15 Mar 2008 21:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 14:22:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 21:21:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4027833fga.27
        for <java-user@lucene.apache.org>; Sat, 15 Mar 2008 14:21:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5C/WqyqRZXCDBcG28LISpYDJqEkWoUw13gNlMh07VKE=;
        b=Fs1yLa5jnnNuNgty8jhDnuztDXv//P8dSuC1pkVj7CRCGZ/fjEcNsIrwkC34YbNiBc4R4Rs+pjZAb60rKjpu5qSq+T3i5+PK3h3KXl+FAHwXI4YhpLpnqGpc3zx9qTZbVCF2F1j8/J0C06UcXo1h9YAG+Fv+v0LLDIFyi1OnS0A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QLx5fx/U0idpke2OS0A6JhtO0R8oXGkZmI8ClT15m/MQy4EGTn90d1sJdNM/2gBGiavmB4I0RY/qHxQPOUZfp2u/ZtFPWz60mc2XKdJ5vIqo9PU8Y21CGBiimzRGqn2oLySVb0sS/ILm+32yeGLvrwG+UBSh9wWdpAOEsqNRUHg=
Received: by 10.82.175.17 with SMTP id x17mr30928264bue.19.1205616100717;
        Sat, 15 Mar 2008 14:21:40 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Sat, 15 Mar 2008 14:21:40 -0700 (PDT)
Message-ID: <359a92830803151421x444149bas3e4a871c72ebf319@mail.gmail.com>
Date: Sat, 15 Mar 2008 17:21:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Weird results with appendable fields
In-Reply-To: <2bfa20eb0803130148o11c5510dlc5a0e2c83945527e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5309_26548865.1205616100717"
References: <2bfa20eb0803130148o11c5510dlc5a0e2c83945527e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5309_26548865.1205616100717
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Are you using  WhitespaceAnalyzer BOTH at index and search time? If not
that is one problem, especially since, for instance, there is a comma after
Timaran,.

The two best things I've found are
1> make sure you have a copy of Luke and use it to examine your
index and see if what you *think* your index contains is actually what
it contains. You can also use Luke to see how queries parse using various
analyzers.

2> use query.toString() to see what your query looks like when you submit
it.

If neither of these help, could you post the briefest possible example that
illustrates the problem?

Best
Erick

On Thu, Mar 13, 2008 at 4:48 AM, Gustavo Corral <gustavo.corral@gmail.com>
wrote:

> Hi list,
>
> I'm new in Lucene and I'm trying to index a set of XML documents
> (document-centric) with the same structure. All this documents have a
> header, a front, and a body (where there's a lot of text).
>
> The problem is that in the header I have two fields author and title, but
> one document can have more than one author, so I tried to index as
> appendable field in this way:
>
> ArrayList <String> authors =3D front.getAuthors();
>
> for(Iterator <String> it =3D authors.iterator(); it.hasNext();){ If
>    String out (String) it.next();
>    if((aut !=3D null) && !aut.equals("")){
>         doc.add(new Field("author",aut,Field.StoreYES,
> Field.Index.TOKENIZED
> ));
>    }
> }
>
> and I was searching in my index with Lukeand I obtained rare results. For
> example: There's a document with 3 authors which appears as appendable
> fields in the index this way: Freddy Pantoja Timaran, Ph.D. Gabriel
> Pantoja
> Barrios Jorge Ivan Londo=F1o.
>
> The thing is that when I search in Luke for Freddy, Pantoja, Gabriel,
> Barrios, Iv=E1n (all in a different query) i got this document as a Hit,
> that's correct, but when I search for Timaran, Londo=F1o I get no Hits,
> which
> is not correct.
>
> I'm using by now WhiteSpaceAnalyzer. Any idea???
>
> Thanks
> Gustavo
>

------=_Part_5309_26548865.1205616100717--

From java-user-return-33154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 15 21:23:59 2008
Return-Path: <java-user-return-33154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47246 invoked from network); 15 Mar 2008 21:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Mar 2008 21:23:58 -0000
Received: (qmail 73905 invoked by uid 500); 15 Mar 2008 21:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73876 invoked by uid 500); 15 Mar 2008 21:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73865 invoked by uid 99); 15 Mar 2008 21:23:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 14:23:50 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 21:23:11 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4028271fga.27
        for <java-user@lucene.apache.org>; Sat, 15 Mar 2008 14:23:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=+3PjvgmESNxFv1cqFzPVdCZS81NQGu/j63nBVGZJUj4=;
        b=OYnL3a6Auc9AzBJHiPEqzqX8k9EjVGPisBbcl5GgDrJHKXLlf7OsGhgIUy1VDZXK6R7WMeR6O9DaWTGXVuYC8Itzh7GiJnO3Iw5q4kNTGbxMuiqMD1iXNZSP3pF3OJmMvOSqJAgK/HP6r53dXvGSNDmiHBU60lfHXc4tpDFcFmQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=clthBguKSl2ndv5xqZBLS0uPeQ8SRf/X79uKRSJHqPhGUUC8GGtZKRXVNx6hao6wMklfoIKmBp6MI/4JMhwYr0k9s5Jww0wGC7bLOYZSMDcLCNGDXIXP69ESvJa9z7mrsv5czqZ1Kv27pCP/zNclVR5HP1hrRDTRbbTHhePqpdE=
Received: by 10.82.121.15 with SMTP id t15mr30951671buc.8.1205616201604;
        Sat, 15 Mar 2008 14:23:21 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Sat, 15 Mar 2008 14:23:21 -0700 (PDT)
Message-ID: <359a92830803151423u7f030ef6u1c0926013c080b02@mail.gmail.com>
Date: Sat, 15 Mar 2008 17:23:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Minimum records to create IndexStore
In-Reply-To: <16024349.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5314_12257374.1205616201587"
References: <16024349.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5314_12257374.1205616201587
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you close your IndexWriter? This will cause any cached
items to be written to disk....

Erick

On Thu, Mar 13, 2008 at 6:23 AM, Sebastin <sebasmtech@gmail.com> wrote:

>
> Hi All,
>        How many records needed minimum to create a index store.when i try
> to create a index store with 5 records ,it creates segments file only.
> --
> View this message in context:
> http://www.nabble.com/Minimum-records-to-create-IndexStore-tp16024349p16024349.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com<http://nabble.com/>
> .
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5314_12257374.1205616201587--

From java-user-return-33155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 16 06:05:22 2008
Return-Path: <java-user-return-33155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3802 invoked from network); 16 Mar 2008 06:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Mar 2008 06:05:21 -0000
Received: (qmail 68077 invoked by uid 500); 16 Mar 2008 06:05:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68043 invoked by uid 500); 16 Mar 2008 06:05:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68027 invoked by uid 99); 16 Mar 2008 06:05:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Mar 2008 23:05:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 06:04:35 +0000
Received: by an-out-0708.google.com with SMTP id c5so1091417anc.49
        for <java-user@lucene.apache.org>; Sat, 15 Mar 2008 23:04:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=U6Kqs5lTlx6gHsjEdNGWeftYTfuU5V28IEFU0GiEsYo=;
        b=lahXSC0UEKOnAq904/QpAacvivhuldwV6Ov+qDOcF31gD+Tk33/nyFv5al/IxeQSq3J2iws2jdKFjH5HNzG3+bI9cOEjFyyw9+2bG6xuYBbjxs34vcsWk7AXDXUJ6+k0Y720urLNjJgAIyESIzB4Ru/66b9jDTcXyovUiW0vIeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ALG9brssOHhQVLIgQAK6nXxSn3K7cJX94Qeiq3vVihyp/yEuYyXlFru9r4Ro6gi78vLzLNY22dfLGxxlDF389vsWoc0mQN/xUFgc8xOgJw8h64ByC+hMIZPgLy4I6e9HhzzYYy5IL70gioi5KUwhy/e8S1OuGapeeLSINt42DsY=
Received: by 10.100.128.20 with SMTP id a20mr28424953and.19.1205647481623;
        Sat, 15 Mar 2008 23:04:41 -0700 (PDT)
Received: by 10.100.34.18 with HTTP; Sat, 15 Mar 2008 23:04:41 -0700 (PDT)
Message-ID: <2bfa20eb0803152304y2d371c9dkc865eb58fa6f3222@mail.gmail.com>
Date: Sun, 16 Mar 2008 00:04:41 -0600
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Weird results with appendable fields
In-Reply-To: <359a92830803151421x444149bas3e4a871c72ebf319@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10044_1026955.1205647481616"
References: <2bfa20eb0803130148o11c5510dlc5a0e2c83945527e@mail.gmail.com>
	 <359a92830803151421x444149bas3e4a871c72ebf319@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10044_1026955.1205647481616
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks Erick,

I have not the code with me this weekend, but as soon as I can I'll try wit=
h
others analizers, check the results in Luke, and I'll post them to the list=
.

Gustavo

On Sat, Mar 15, 2008 at 3:21 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Are you using  WhitespaceAnalyzer BOTH at index and search time? If not
> that is one problem, especially since, for instance, there is a comma
> after
> Timaran,.
>
> The two best things I've found are
> 1> make sure you have a copy of Luke and use it to examine your
> index and see if what you *think* your index contains is actually what
> it contains. You can also use Luke to see how queries parse using various
> analyzers.
>
> 2> use query.toString() to see what your query looks like when you submit
> it.
>
> If neither of these help, could you post the briefest possible example
> that
> illustrates the problem?
>
> Best
> Erick
>
> On Thu, Mar 13, 2008 at 4:48 AM, Gustavo Corral <gustavo.corral@gmail.com=
>
> wrote:
>
> > Hi list,
> >
> > I'm new in Lucene and I'm trying to index a set of XML documents
> > (document-centric) with the same structure. All this documents have a
> > header, a front, and a body (where there's a lot of text).
> >
> > The problem is that in the header I have two fields author and title,
> but
> > one document can have more than one author, so I tried to index as
> > appendable field in this way:
> >
> > ArrayList <String> authors =3D front.getAuthors();
> >
> > for(Iterator <String> it =3D authors.iterator(); it.hasNext();){ If
> >    String out (String) it.next();
> >    if((aut !=3D null) && !aut.equals("")){
> >         doc.add(new Field("author",aut,Field.StoreYES,
> > Field.Index.TOKENIZED
> > ));
> >    }
> > }
> >
> > and I was searching in my index with Lukeand I obtained rare results.
> For
> > example: There's a document with 3 authors which appears as appendable
> > fields in the index this way: Freddy Pantoja Timaran, Ph.D. Gabriel
> > Pantoja
> > Barrios Jorge Ivan Londo=F1o.
> >
> > The thing is that when I search in Luke for Freddy, Pantoja, Gabriel,
> > Barrios, Iv=E1n (all in a different query) i got this document as a Hit=
,
> > that's correct, but when I search for Timaran, Londo=F1o I get no Hits,
> > which
> > is not correct.
> >
> > I'm using by now WhiteSpaceAnalyzer. Any idea???
> >
> > Thanks
> > Gustavo
> >
>

------=_Part_10044_1026955.1205647481616--

From java-user-return-33156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 16 08:15:49 2008
Return-Path: <java-user-return-33156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46281 invoked from network); 16 Mar 2008 08:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Mar 2008 08:15:47 -0000
Received: (qmail 11492 invoked by uid 500); 16 Mar 2008 08:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11463 invoked by uid 500); 16 Mar 2008 08:15:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11452 invoked by uid 99); 16 Mar 2008 08:15:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 01:15:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 08:15:02 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5148776wah.11
        for <java-user@lucene.apache.org>; Sun, 16 Mar 2008 01:15:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=T716zoqJHijEAVmAfgvfIuMB3xJYEZdTfKiQKfXfTDw=;
        b=rkJduBYGq8Sfm1xl5DMBecaiEfg0qqd+6j9Tg/Eb0GZeWYyfqXRGq/ZiIrWWyG3omPqMng/YfkE1xwIAYzqMLv1X4tu0otJWLtQsMpsXTfozYfJ64owLsiGVceY9OhTQIampWi0L1pzsoKmK1w+fBdmLZz7fD8aibe+w6iDmQVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mekqMMCo9BSudJ7wJhsZFMJbiWEVSNh3Yv8bpyxhJyIeqeWUwwemMFQIu90+k0JUz5wOd+OC0xtsw5teo6QQbC2nSqY/9mtIy7nI9ZUet3KpRgNIVRc6VrxsAIAV3c0ClUGGzyfbdygzsnPXbmF6bmSZOsecUknp7g1AdlNXWYU=
Received: by 10.114.56.1 with SMTP id e1mr15275605waa.52.1205655313258;
        Sun, 16 Mar 2008 01:15:13 -0700 (PDT)
Received: by 10.115.79.5 with HTTP; Sun, 16 Mar 2008 01:15:13 -0700 (PDT)
Message-ID: <2c5080560803160115i3906bff2o8c766185dc22f237@mail.gmail.com>
Date: Sun, 16 Mar 2008 16:15:13 +0800
From: ZaeX <zaexage@gmail.com>
To: java-user@lucene.apache.org
Subject: how can I see the indexed,tokenized field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5569_33229288.1205655313252"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5569_33229288.1205655313252
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, all

I got some troubles on getting expected search results, so I want to check
what info is stored (more precisely, how was it tokenized) in index for some
fields. (indexed and tokenized but not stored)
Please tell me how to get that.

Thanks.


-- 
Time is mana, we must hurry

------=_Part_5569_33229288.1205655313252--

From java-user-return-33157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 16 08:46:04 2008
Return-Path: <java-user-return-33157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54275 invoked from network); 16 Mar 2008 08:46:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Mar 2008 08:46:04 -0000
Received: (qmail 17911 invoked by uid 500); 16 Mar 2008 08:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17874 invoked by uid 500); 16 Mar 2008 08:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17863 invoked by uid 99); 16 Mar 2008 08:45:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 01:45:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 08:45:19 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5158508wah.11
        for <java-user@lucene.apache.org>; Sun, 16 Mar 2008 01:45:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=sOaJ0BEZBxyHTZF0YAosVztTg9JFLImcmUE+1kktW7c=;
        b=qEajwajkZcnJI2sV7a5LqayxfH81AZRTTrqrOdJhTfLvODjfiDfGEj6hRc2oS5R28jCLrLmQ/GVv+E2Wb3bv1M9FYJckX8/myub6dMuuEFCsy353uV+i1XgVkbx96TcNf/9UaQM5KN34rMBkkX57Z8aBgvb/oa5qkFIV00jX06Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=EJYqyyfVDR6f4Sg/0neMIyxJFuM1CbXzv/xWzavtO3BsDJxWkYApHzJw4veSeZbd5An8m1yB/5KtJCuROCO/K0W8Gvdj2TPO9qv0HCJ94FV9DtfADrlPsQNyCiuEERhgwikO1bP65KBvmqzjLQ4z40bCVikhGpASsizlwfObz5I=
Received: by 10.115.32.1 with SMTP id k1mr16253059waj.107.1205657130837;
        Sun, 16 Mar 2008 01:45:30 -0700 (PDT)
Received: by 10.115.79.5 with HTTP; Sun, 16 Mar 2008 01:45:30 -0700 (PDT)
Message-ID: <2c5080560803160145v26e513y6b6f8968ef5b268f@mail.gmail.com>
Date: Sun, 16 Mar 2008 16:45:30 +0800
From: ZaeX <zaexage@gmail.com>
To: java-user@lucene.apache.org
Subject: how to see the indexed,tokenized but not stored field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5585_5791306.1205657130832"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5585_5791306.1205657130832
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, all

I got some troubles on getting expected search results, so I want to check
what info is stored (more precisely, how was it tokenized) in index for some
fields. (indexed and tokenized but not stored)
Please tell me how to get that.

Thanks.


-- 
Time is mana, we must hurry

------=_Part_5585_5791306.1205657130832--

From java-user-return-33158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 16 15:05:00 2008
Return-Path: <java-user-return-33158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50106 invoked from network); 16 Mar 2008 15:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Mar 2008 15:05:00 -0000
Received: (qmail 1625 invoked by uid 500); 16 Mar 2008 15:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1592 invoked by uid 500); 16 Mar 2008 15:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1581 invoked by uid 99); 16 Mar 2008 15:04:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 08:04:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 15:04:14 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4339178fga.27
        for <java-user@lucene.apache.org>; Sun, 16 Mar 2008 08:04:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=E0gUuxP+zPmhVrnz+17iE1kNGNm2YvfaPIv7PGaev9o=;
        b=rKkXH74wBGzkCLveDBE2vWnHvQ1vltwkZc3IEfnqDikInuC/o5cY3Zr4Yn25ob8+az6teRn5JovkrLM2+DWp53HTKntDpZ2Tv+FvRIIiBWEP1XqKpUcasEhHG7Ej69okvI/gGl+iamBpk4WjAVKzlUENocKV1QhShLrc7dXoklk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aegaZDcP9jgCdQZ29Zqnarq55BXXptZ7sHWe1TklhQGQlJARTvkAcyxRsITADmSXEd9KzPAz8449jgD1NJDuY7pTfef23z3RZFgaLoJFfrlJNrSwzGtVSRnp74ZoLpmaZdgsuqAzdC2MKbrBrdFIRVYLwiD+QNZRdn3Ksar05/U=
Received: by 10.82.115.8 with SMTP id n8mr32824284buc.28.1205679862820;
        Sun, 16 Mar 2008 08:04:22 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Sun, 16 Mar 2008 08:04:22 -0700 (PDT)
Message-ID: <359a92830803160804q7917b96bt55039b45e1030f78@mail.gmail.com>
Date: Sun, 16 Mar 2008 11:04:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to see the indexed,tokenized but not stored field
In-Reply-To: <2c5080560803160145v26e513y6b6f8968ef5b268f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6157_32635229.1205679862832"
References: <2c5080560803160145v26e513y6b6f8968ef5b268f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6157_32635229.1205679862832
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Use the Luke, force. Google Lucene and Luke and you'll find the link
to a wonderful tool that'll allow you to examine your index in great
detail.

Best
Erick

On Sun, Mar 16, 2008 at 4:45 AM, ZaeX <zaexage@gmail.com> wrote:

> Hi, all
>
> I got some troubles on getting expected search results, so I want to check
> what info is stored (more precisely, how was it tokenized) in index for
> some
> fields. (indexed and tokenized but not stored)
> Please tell me how to get that.
>
> Thanks.
>
>
> --
> Time is mana, we must hurry
>

------=_Part_6157_32635229.1205679862832--

From java-user-return-33159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 16 16:01:32 2008
Return-Path: <java-user-return-33159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70270 invoked from network); 16 Mar 2008 16:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Mar 2008 16:01:32 -0000
Received: (qmail 29404 invoked by uid 500); 16 Mar 2008 16:01:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29366 invoked by uid 500); 16 Mar 2008 16:01:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29355 invoked by uid 99); 16 Mar 2008 16:01:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 09:01:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 16:00:46 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3290208wra.14
        for <java-user@lucene.apache.org>; Sun, 16 Mar 2008 09:00:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Yqb2WV395Akhtg+2jKFkJtBR1Zr1wWav6V0gW3e5qO0=;
        b=wbCI+1o6q32xdvijujl1beCzTmyTRywJ1tZl/yjqdS/08MPT04o4v4VWRFCZ3cMSqt5TXA2YaCrmYyF+LxTqOdyqaYSvsR/YdUIHxiDeWpaOj/fdaH8lZEP8DqhSnJ7W3XVgB9Obe9pUc4R/6l4GVbB4rdDCYSmVvHF4Uj+xOZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b99ZVS2Vq9Zeoh5OAiqqw24O4ReVMy909WRjjQtmih3h6YwCu8bYKgkuJhl6C4Kr0Rp5qUiNG51G1wvfuxJfraficxLfFenDRy2x1xVffsYrKiYKS7SadzAHN++ohGs1gkt7cajHJ/eKZLP78t4Oxe2kq08/ix0ig4CiZBOglOo=
Received: by 10.114.152.17 with SMTP id z17mr16022767wad.128.1205683252576;
        Sun, 16 Mar 2008 09:00:52 -0700 (PDT)
Received: by 10.115.79.5 with HTTP; Sun, 16 Mar 2008 09:00:52 -0700 (PDT)
Message-ID: <2c5080560803160900q886ff97rdacccb27853978f1@mail.gmail.com>
Date: Mon, 17 Mar 2008 00:00:52 +0800
From: ZaeX <zaexage@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to see the indexed,tokenized but not stored field
In-Reply-To: <359a92830803160804q7917b96bt55039b45e1030f78@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6374_23846836.1205683252575"
References: <2c5080560803160145v26e513y6b6f8968ef5b268f@mail.gmail.com>
	 <359a92830803160804q7917b96bt55039b45e1030f78@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6374_23846836.1205683252575
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks very much.

2008/3/16, Erick Erickson <erickerickson@gmail.com>:
>
> Use the Luke, force. Google Lucene and Luke and you'll find the link
> to a wonderful tool that'll allow you to examine your index in great
> detail.
>
> Best
> Erick
>
> On Sun, Mar 16, 2008 at 4:45 AM, ZaeX <zaexage@gmail.com> wrote:
>
> > Hi, all
> >
> > I got some troubles on getting expected search results, so I want to
> check
> > what info is stored (more precisely, how was it tokenized) in index for
> > some
> > fields. (indexed and tokenized but not stored)
> > Please tell me how to get that.
> >
> > Thanks.
> >
> >
> > --
> > Time is mana, we must hurry
> >
>



-- 
Time is mana, we must hurry

------=_Part_6374_23846836.1205683252575--

From java-user-return-33160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 00:30:06 2008
Return-Path: <java-user-return-33160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64666 invoked from network); 17 Mar 2008 00:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 00:30:06 -0000
Received: (qmail 88118 invoked by uid 500); 17 Mar 2008 00:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88084 invoked by uid 500); 17 Mar 2008 00:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88073 invoked by uid 99); 17 Mar 2008 00:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 17:29:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 00:29:20 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6D87D4A8145
	for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 11:29:23 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Mon, 17 Mar 2008 11:24:42 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803131042.50640.daniel@nuix.com> <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
In-Reply-To: <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803171124.43064.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 13 March 2008 19:46:20 Michael McCandless wrote:
> But, when a normal merge of segments with deletions completes, your
> docIDs will shift.  In trunk we now explicitly compute the docID
> shifting that happens after a merge, because we don't always flush
> pending deletes when flushing added docs, but this is all done
> privately to IndexWriter.

I don't need to worry about deleted documents as such things don't exist in 
our system, hence the optimisation based on document IDs.

> I'm a little confused: you said optimize() introduces the problem,
> but, it sounds like optimize() should be fixing the problem because
> it compacts all docIDs to match what you were "guessing" outside of
> Lucene?  Can you post the full stack trace of the exceptions you're
> hitting?

You're misunderstanding how we're getting the ID, that's all.  We're getting 
it by calling docCount() (after adding) and subtracting 1, which is 
guaranteed to give the right ID at the time of indexing, although of course, 
later is another matter entirely.  We were operating from now out of date 
information which says the IDs don't shift unless you call delete...

Example:

  add document, assume ID 0 (docCount = 1)
  add document, assume ID 1 (docCount = 2)
  add document, FAILS - assumed not added
  re-add document minus reader fields, assume ID 3 (docCount = 4)

So the ID assumptions are correct at this point; when optimize() is called, it 
shifts the third document sucht that it then has ID 2, and our internal 
counts become wrong.

I've backported the expungeDeleted() patch into 2.3 and will be testing it out 
next; seems it will do more or less what we want and merging the deleted 
document should be relatively quick as it will only ever exist in the in 
DocumentsWriter's in-memory buffer.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 00:55:57 2008
Return-Path: <java-user-return-33161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69572 invoked from network); 17 Mar 2008 00:55:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 00:55:56 -0000
Received: (qmail 2452 invoked by uid 500); 17 Mar 2008 00:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2418 invoked by uid 500); 17 Mar 2008 00:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2407 invoked by uid 99); 17 Mar 2008 00:55:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 17:55:48 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Mar 2008 00:55:01 +0000
Received: (qmail 10298 invoked from network); 17 Mar 2008 00:55:17 -0000
Received: from unknown (HELO GEMINI) (unknown)
  by unknown with SMTP; 17 Mar 2008 00:55:17 -0000
X-pair-Authenticated: 68.84.138.127
Message-ID: <000c01c887c9$929a2150$8a01a8c0@GEMINI>
From: "Darren Govoni" <darren@ontrenet.com>
To: <java-user@lucene.apache.org>
Subject: word position operator?
Date: Sun, 16 Mar 2008 20:55:19 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0009_01C887A8.0B4F48E0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0009_01C887A8.0B4F48E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
  I want to do a query such as=20

word: first*

where I want 'first' to be the start of the string value contained in =
the word field and not somewhere inside it.
What's the best way to do this?

thanks for any tips,
Darren
------=_NextPart_000_0009_01C887A8.0B4F48E0--



From java-user-return-33162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 03:15:11 2008
Return-Path: <java-user-return-33162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7592 invoked from network); 17 Mar 2008 03:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 03:15:11 -0000
Received: (qmail 73892 invoked by uid 500); 17 Mar 2008 03:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73856 invoked by uid 500); 17 Mar 2008 03:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73845 invoked by uid 99); 17 Mar 2008 03:15:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Mar 2008 20:15:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 03:14:25 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m2H3ERUX015496
	for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 05:14:27 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m3h5e304; 17 Mar 2008 05:14:00 +0200
Message-ID: <47DDE1FB.5070508@teamware.com>
Date: Mon, 17 Mar 2008 14:14:03 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Biggest index
References: <299694.65385.qm@web50309.mail.re2.yahoo.com> <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
In-Reply-To: <B6C4960B45CF49C487743C151BEB1CE5@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 17 Mar 2008 05:14:27 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu wrote:
> Yes of course, the answers to your questions are important too.
> But no anwser at all until now :(

One example:

1.5 million documents
Approx 15 fields per document
DB is 10-15GB (can't find correct figure)
All on one machine.  No stats on search usage though.

We're about to embark on a 25-40M documents (email data) per annum, no deletes 
over 10 years.  Planning for index distribution, but haven't decided on the 
partitioning yet.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:13:20 2008
Return-Path: <java-user-return-33163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7438 invoked from network); 17 Mar 2008 08:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:13:20 -0000
Received: (qmail 95464 invoked by uid 500); 17 Mar 2008 08:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95435 invoked by uid 500); 17 Mar 2008 08:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95424 invoked by uid 99); 17 Mar 2008 08:13:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:13:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:12:33 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4630752fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:12:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kTfNtcyLQw/80FRGyvGy0GVyac8ANwbIZYp3Gibzb8A=;
        b=R7ty3lRa2c5+DfMyMzLfVkxZB70bQKz6PsswLchS2Kv5MLxl7F41SuLvsWzAgZ0J/pDvfTXlY7KVM9hzSH9T7tmpoQRX12D7X/mxpGyp+dypLEGeDKKrWULaUdttOeIkwhXJ364V6nnPDwhT/vuuFxg8gQgIvLn/V9ubBe1KrnY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V3sv8SgdGdQE+nDkcoUa5WVlrag/cUNEd4dzMvkg3iBRw9yCX8GxYeNa5W63NNStP36sF/JJoj87d6fdrOasiM1hGYwlCsDzRW/VHzPvKUi9GjZRT/9+zgyGMASQN7eT08kPoVYxOsjyTCSvvgwguamaGgMNWb2IAfs72bB0lh4=
Received: by 10.82.166.9 with SMTP id o9mr35837606bue.33.1205741563429;
        Mon, 17 Mar 2008 01:12:43 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 01:12:43 -0700 (PDT)
Message-ID: <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
Date: Mon, 17 Mar 2008 10:12:43 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9848_16856912.1205741563419"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9848_16856912.1205741563419
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Erick,

Has anyone found a way for deleting a document with a query? I understand it
can be deleted via terms, but I need to delete a document with two terms,
that is the only way I can identify my document is by looking at two terms
not one.

best.

On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Doc IDs are assigned at index time and can change over time That is,
> deleting
> a document and optimizing (and other operations) can and will change
> document IDs. So, yes, you have to do a search (either use a hits object
> or one of the HitCollectors) in order to delete by doc ID.
>
> You can also delete by terms, see the API.
>
> There are other options, but you haven't explianed what you're
> trying to accomplish enough to offer any more suggestions.
>
> Best
> Erick
>
> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:
>
> > No. I haven't but I will. even though I would like to make my own
> > implementation. So any idea of how to get the "doc num"?
> >
> > Thanks for replying.
> > Varun
> >
> > On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
> > wrote:
> >
> > > Have you seen the work that Mark Harwood has done making a GWT version
> > > of Luke? I think its in the latest release.
> > >
> > > varun sood wrote:
> > > > Hi,
> > > >   I am trying to delete a document without using the hits object.
> > > > What is the unique field in the index that I can use to delete the
> > > document?
> > > >
> > > > I am trying to make a web interface where index can be modified,
> > smaller
> > > > subset of what Luke does but using JSPs and Servlet.
> > > >
> > > > to use deleteDocument(int docNum)
> > > > I need docNum how can I get this? or does it have to come only vis
> > Hits?
> > > >
> > > > Thanks,
> > > > Varun
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_9848_16856912.1205741563419--

From java-user-return-33164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:32:18 2008
Return-Path: <java-user-return-33164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14452 invoked from network); 17 Mar 2008 08:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:32:17 -0000
Received: (qmail 24269 invoked by uid 500); 17 Mar 2008 08:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24232 invoked by uid 500); 17 Mar 2008 08:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24220 invoked by uid 99); 17 Mar 2008 08:32:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:32:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:31:29 +0000
Received: by wx-out-0506.google.com with SMTP id i28so6366091wxd.20
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:31:36 -0700 (PDT)
Received: by 10.100.33.19 with SMTP id g19mr32001015ang.48.1205742696028;
        Mon, 17 Mar 2008 01:31:36 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id y56sm16603029hsb.14.2008.03.17.01.31.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 01:31:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <47D847FE.9060105@gmail.com> <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com> <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com> <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 04:31:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


The trunk version of Lucene (eventually 2.4) now has deletion by  
query, in IndexWriter.

Mike

Cam Bazz wrote:

> Hello Erick,
>
> Has anyone found a way for deleting a document with a query? I  
> understand it
> can be deleted via terms, but I need to delete a document with two  
> terms,
> that is the only way I can identify my document is by looking at  
> two terms
> not one.
>
> best.
>
> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson  
> <erickerickson@gmail.com>
> wrote:
>
>> Doc IDs are assigned at index time and can change over time That is,
>> deleting
>> a document and optimizing (and other operations) can and will change
>> document IDs. So, yes, you have to do a search (either use a hits  
>> object
>> or one of the HitCollectors) in order to delete by doc ID.
>>
>> You can also delete by terms, see the API.
>>
>> There are other options, but you haven't explianed what you're
>> trying to accomplish enough to offer any more suggestions.
>>
>> Best
>> Erick
>>
>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:
>>
>>> No. I haven't but I will. even though I would like to make my own
>>> implementation. So any idea of how to get the "doc num"?
>>>
>>> Thanks for replying.
>>> Varun
>>>
>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
>>> wrote:
>>>
>>>> Have you seen the work that Mark Harwood has done making a GWT  
>>>> version
>>>> of Luke? I think its in the latest release.
>>>>
>>>> varun sood wrote:
>>>>> Hi,
>>>>>   I am trying to delete a document without using the hits object.
>>>>> What is the unique field in the index that I can use to delete the
>>>> document?
>>>>>
>>>>> I am trying to make a web interface where index can be modified,
>>> smaller
>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>
>>>>> to use deleteDocument(int docNum)
>>>>> I need docNum how can I get this? or does it have to come only vis
>>> Hits?
>>>>>
>>>>> Thanks,
>>>>> Varun
>>>>>
>>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:34:20 2008
Return-Path: <java-user-return-33165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15193 invoked from network); 17 Mar 2008 08:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:34:20 -0000
Received: (qmail 30266 invoked by uid 500); 17 Mar 2008 08:34:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30239 invoked by uid 500); 17 Mar 2008 08:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30228 invoked by uid 99); 17 Mar 2008 08:34:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:34:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:33:34 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4636984fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:33:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FpuVBRzXXZL7jjUjsc5Cs/vB4pzmjGW6ckc6QWUnb9o=;
        b=fBPV70UpEcpcTvX8m0pWyHMv19WjR+sgn5QctpXJz/Sysf3VJJBFvPqdv3VgHX0S8VGHat/d4jA3AiQxxRd2+gRiHvmDcAsKMaj+mt0Y4mKCk/JV9u8MITk3FNH7POBrNv5CRWqXecFQ22xk7uUZvEBjGGWl+Uz8VThVCRENkcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=yEUGGY7ETVupAo36E5oXwK2/KoxKvENUYpxDC76Ifbo2NC79sCWASrLOgfpQdy9n2pGoqYOM05wtvwQiGWGnUzRd+n/7Jt+5Tmt0OZcIlFPZ8d5CPFPykqo2x4jTzBIR1WhxRr8RPeuT0IDQ19115JiDd4Pr1VOFUw6CvbWgKTc=
Received: by 10.82.161.19 with SMTP id j19mr20835802bue.12.1205742819680;
        Mon, 17 Mar 2008 01:33:39 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 01:33:39 -0700 (PDT)
Message-ID: <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
Date: Mon, 17 Mar 2008 10:33:39 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9922_26162654.1205742819646"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
	 <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
	 <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9922_26162654.1205742819646
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nice. Thanks.

will the 2.4 have commit improvements that we previously talked about?

best regards.

-C.B.

On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> The trunk version of Lucene (eventually 2.4) now has deletion by
> query, in IndexWriter.
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello Erick,
> >
> > Has anyone found a way for deleting a document with a query? I
> > understand it
> > can be deleted via terms, but I need to delete a document with two
> > terms,
> > that is the only way I can identify my document is by looking at
> > two terms
> > not one.
> >
> > best.
> >
> > On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> > <erickerickson@gmail.com>
> > wrote:
> >
> >> Doc IDs are assigned at index time and can change over time That is,
> >> deleting
> >> a document and optimizing (and other operations) can and will change
> >> document IDs. So, yes, you have to do a search (either use a hits
> >> object
> >> or one of the HitCollectors) in order to delete by doc ID.
> >>
> >> You can also delete by terms, see the API.
> >>
> >> There are other options, but you haven't explianed what you're
> >> trying to accomplish enough to offer any more suggestions.
> >>
> >> Best
> >> Erick
> >>
> >> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:
> >>
> >>> No. I haven't but I will. even though I would like to make my own
> >>> implementation. So any idea of how to get the "doc num"?
> >>>
> >>> Thanks for replying.
> >>> Varun
> >>>
> >>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
> >>> wrote:
> >>>
> >>>> Have you seen the work that Mark Harwood has done making a GWT
> >>>> version
> >>>> of Luke? I think its in the latest release.
> >>>>
> >>>> varun sood wrote:
> >>>>> Hi,
> >>>>>   I am trying to delete a document without using the hits object.
> >>>>> What is the unique field in the index that I can use to delete the
> >>>> document?
> >>>>>
> >>>>> I am trying to make a web interface where index can be modified,
> >>> smaller
> >>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>
> >>>>> to use deleteDocument(int docNum)
> >>>>> I need docNum how can I get this? or does it have to come only vis
> >>> Hits?
> >>>>>
> >>>>> Thanks,
> >>>>> Varun
> >>>>>
> >>>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9922_26162654.1205742819646--

From java-user-return-33166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:39:27 2008
Return-Path: <java-user-return-33166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16994 invoked from network); 17 Mar 2008 08:39:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:39:27 -0000
Received: (qmail 37246 invoked by uid 500); 17 Mar 2008 08:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37216 invoked by uid 500); 17 Mar 2008 08:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37205 invoked by uid 99); 17 Mar 2008 08:39:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:39:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:38:40 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3661552wra.14
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:38:39 -0700 (PDT)
Received: by 10.151.62.11 with SMTP id p11mr523095ybk.6.1205743118812;
        Mon, 17 Mar 2008 01:38:38 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id m29sm8615621wrm.41.2008.03.17.01.38.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 01:38:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803171124.43064.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com> <200803131042.50640.daniel@nuix.com> <59BEA59D-D139-441E-8C34-A32C978FA848@mikemccandless.com> <200803171124.43064.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5592F270-3B92-4AF1-816D-8EDAD48461AA@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Mon, 17 Mar 2008 04:38:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Daniel Noll wrote:

> On Thursday 13 March 2008 19:46:20 Michael McCandless wrote:
>> But, when a normal merge of segments with deletions completes, your
>> docIDs will shift.  In trunk we now explicitly compute the docID
>> shifting that happens after a merge, because we don't always flush
>> pending deletes when flushing added docs, but this is all done
>> privately to IndexWriter.
>
> I don't need to worry about deleted documents as such things don't  
> exist in
> our system, hence the optimisation based on document IDs.
>
>> I'm a little confused: you said optimize() introduces the problem,
>> but, it sounds like optimize() should be fixing the problem because
>> it compacts all docIDs to match what you were "guessing" outside of
>> Lucene?  Can you post the full stack trace of the exceptions you're
>> hitting?
>
> You're misunderstanding how we're getting the ID, that's all.   
> We're getting
> it by calling docCount() (after adding) and subtracting 1, which is
> guaranteed to give the right ID at the time of indexing, although  
> of course,
> later is another matter entirely.  We were operating from now out  
> of date
> information which says the IDs don't shift unless you call delete...
>
> Example:
>
>   add document, assume ID 0 (docCount = 1)
>   add document, assume ID 1 (docCount = 2)
>   add document, FAILS - assumed not added
>   re-add document minus reader fields, assume ID 3 (docCount = 4)
>
> So the ID assumptions are correct at this point; when optimize() is  
> called, it
> shifts the third document sucht that it then has ID 2, and our  
> internal
> counts become wrong.

OK now I understand: docCount() is correct at the time, but then when  
a merge or optimize merges a segment that has a document that hit an  
exception, the IDs shift.

> I've backported the expungeDeleted() patch into 2.3 and will be  
> testing it out
> next; seems it will do more or less what we want and merging the  
> deleted
> document should be relatively quick as it will only ever exist in  
> the in
> DocumentsWriter's in-memory buffer.

Well ... expungeDeletes() first forces a flush, at which point the  
deletions are flushed as a .del file against the just flushed  
segment.  Still, if you call expungeDeletes after every flush  
(commit) then it's only 1 segment whose deletions need to be expunged  
so it should be fast.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:42:40 2008
Return-Path: <java-user-return-33167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17894 invoked from network); 17 Mar 2008 08:42:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:42:39 -0000
Received: (qmail 41915 invoked by uid 500); 17 Mar 2008 08:42:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41893 invoked by uid 500); 17 Mar 2008 08:42:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41882 invoked by uid 99); 17 Mar 2008 08:42:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:42:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:41:52 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3662133wra.14
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:40:03 -0700 (PDT)
Received: by 10.151.145.5 with SMTP id x5mr522584ybn.12.1205743202989;
        Mon, 17 Mar 2008 01:40:02 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm28243809wrh.24.2008.03.17.01.40.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 01:40:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <47D847FE.9060105@gmail.com> <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com> <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com> <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com> <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com> <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 04:40:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes that's already been committed to trunk as well.

IndexWriter now has a commit() method which syncs all referenced  
files in the index to stable storage (assuming your IO system doesn't  
"lie" on fsync).

Mike

On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:

> Nice. Thanks.
>
> will the 2.4 have commit improvements that we previously talked about?
>
> best regards.
>
> -C.B.
>
> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> The trunk version of Lucene (eventually 2.4) now has deletion by
>> query, in IndexWriter.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello Erick,
>>>
>>> Has anyone found a way for deleting a document with a query? I
>>> understand it
>>> can be deleted via terms, but I need to delete a document with two
>>> terms,
>>> that is the only way I can identify my document is by looking at
>>> two terms
>>> not one.
>>>
>>> best.
>>>
>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>> <erickerickson@gmail.com>
>>> wrote:
>>>
>>>> Doc IDs are assigned at index time and can change over time That  
>>>> is,
>>>> deleting
>>>> a document and optimizing (and other operations) can and will  
>>>> change
>>>> document IDs. So, yes, you have to do a search (either use a hits
>>>> object
>>>> or one of the HitCollectors) in order to delete by doc ID.
>>>>
>>>> You can also delete by terms, see the API.
>>>>
>>>> There are other options, but you haven't explianed what you're
>>>> trying to accomplish enough to offer any more suggestions.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>  
>>>> wrote:
>>>>
>>>>> No. I haven't but I will. even though I would like to make my own
>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>
>>>>> Thanks for replying.
>>>>> Varun
>>>>>
>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller  
>>>>> <markrmiller@gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Have you seen the work that Mark Harwood has done making a GWT
>>>>>> version
>>>>>> of Luke? I think its in the latest release.
>>>>>>
>>>>>> varun sood wrote:
>>>>>>> Hi,
>>>>>>>   I am trying to delete a document without using the hits  
>>>>>>> object.
>>>>>>> What is the unique field in the index that I can use to  
>>>>>>> delete the
>>>>>> document?
>>>>>>>
>>>>>>> I am trying to make a web interface where index can be modified,
>>>>> smaller
>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>
>>>>>>> to use deleteDocument(int docNum)
>>>>>>> I need docNum how can I get this? or does it have to come  
>>>>>>> only vis
>>>>> Hits?
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Varun
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 08:50:44 2008
Return-Path: <java-user-return-33168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20792 invoked from network); 17 Mar 2008 08:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 08:50:44 -0000
Received: (qmail 55169 invoked by uid 500); 17 Mar 2008 08:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54554 invoked by uid 500); 17 Mar 2008 08:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54543 invoked by uid 99); 17 Mar 2008 08:50:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 01:50:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:49:57 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4641794fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 01:50:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=HbCFJTb3CjAy63m3iGQihAXj6cn49Den/9FOmxxk4jc=;
        b=VDL8V3x2pDZfoY6br/OkXFFmBzoPgr7j057zNmJs3GMBjMY7eCdg8v5eLRaUQ/JocRup4TBolt4Fj/2CQa1GAIi2DXe09/GX+Nkh/QBPX4sbrSccmAK6+TUiqpO59cD3JRYQb3gWe3uXp6tXc+ZXOROFX+1bxjoFK3KNg1bSb40=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YqBrcLB+bzRbAzI3aKXhzn0jWyxsmiWbWUmmX0mqrhJiUmqqErJAexLF71UtbxtDGAFPdejxVdO6/RNXIDcg7hRYgtCdE1afnaTkuis/uyCuGNn8sUBu/nVQ2GkYtvIVj8czqwD7q0WTyi0kTPzSeC/4AibZhFA30Rks7C5hpuk=
Received: by 10.82.191.3 with SMTP id o3mr35905014buf.17.1205743805852;
        Mon, 17 Mar 2008 01:50:05 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 01:50:00 -0700 (PDT)
Message-ID: <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
Date: Mon, 17 Mar 2008 10:50:00 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9982_4839005.1205743805854"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
	 <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
	 <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
	 <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
	 <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9982_4839005.1205743805854
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

What do you mean by IO system lying on fsync?

Best.

On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Yes that's already been committed to trunk as well.
>
> IndexWriter now has a commit() method which syncs all referenced
> files in the index to stable storage (assuming your IO system doesn't
> "lie" on fsync).
>
> Mike
>
> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>
> > Nice. Thanks.
> >
> > will the 2.4 have commit improvements that we previously talked about?
> >
> > best regards.
> >
> > -C.B.
> >
> > On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >>
> >> The trunk version of Lucene (eventually 2.4) now has deletion by
> >> query, in IndexWriter.
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello Erick,
> >>>
> >>> Has anyone found a way for deleting a document with a query? I
> >>> understand it
> >>> can be deleted via terms, but I need to delete a document with two
> >>> terms,
> >>> that is the only way I can identify my document is by looking at
> >>> two terms
> >>> not one.
> >>>
> >>> best.
> >>>
> >>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> >>> <erickerickson@gmail.com>
> >>> wrote:
> >>>
> >>>> Doc IDs are assigned at index time and can change over time That
> >>>> is,
> >>>> deleting
> >>>> a document and optimizing (and other operations) can and will
> >>>> change
> >>>> document IDs. So, yes, you have to do a search (either use a hits
> >>>> object
> >>>> or one of the HitCollectors) in order to delete by doc ID.
> >>>>
> >>>> You can also delete by terms, see the API.
> >>>>
> >>>> There are other options, but you haven't explianed what you're
> >>>> trying to accomplish enough to offer any more suggestions.
> >>>>
> >>>> Best
> >>>> Erick
> >>>>
> >>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>
> >>>> wrote:
> >>>>
> >>>>> No. I haven't but I will. even though I would like to make my own
> >>>>> implementation. So any idea of how to get the "doc num"?
> >>>>>
> >>>>> Thanks for replying.
> >>>>> Varun
> >>>>>
> >>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
> >>>>> <markrmiller@gmail.com>
> >>>>> wrote:
> >>>>>
> >>>>>> Have you seen the work that Mark Harwood has done making a GWT
> >>>>>> version
> >>>>>> of Luke? I think its in the latest release.
> >>>>>>
> >>>>>> varun sood wrote:
> >>>>>>> Hi,
> >>>>>>>   I am trying to delete a document without using the hits
> >>>>>>> object.
> >>>>>>> What is the unique field in the index that I can use to
> >>>>>>> delete the
> >>>>>> document?
> >>>>>>>
> >>>>>>> I am trying to make a web interface where index can be modified,
> >>>>> smaller
> >>>>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>>>
> >>>>>>> to use deleteDocument(int docNum)
> >>>>>>> I need docNum how can I get this? or does it have to come
> >>>>>>> only vis
> >>>>> Hits?
> >>>>>>>
> >>>>>>> Thanks,
> >>>>>>> Varun
> >>>>>>>
> >>>>>>>
> >>>>>>
> >>>>>> -----------------------------------------------------------------
> >>>>>> --
> >>>>>> --
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9982_4839005.1205743805854--

From java-user-return-33169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 09:13:23 2008
Return-Path: <java-user-return-33169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28497 invoked from network); 17 Mar 2008 09:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 09:13:23 -0000
Received: (qmail 86311 invoked by uid 500); 17 Mar 2008 09:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86281 invoked by uid 500); 17 Mar 2008 09:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86270 invoked by uid 99); 17 Mar 2008 09:13:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 02:13:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 09:12:35 +0000
Received: by py-out-1112.google.com with SMTP id z74so5969992pyg.9
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 02:12:45 -0700 (PDT)
Received: by 10.35.70.17 with SMTP id x17mr25013432pyk.28.1205745164722;
        Mon, 17 Mar 2008 02:12:44 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 61sm31473700wry.13.2008.03.17.02.12.44
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 02:12:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <47D847FE.9060105@gmail.com> <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com> <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com> <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com> <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com> <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com> <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com> <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 05:12:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


When you write to a file, modern OSs by default just buffer those  
writes in memory rather than actually writing them immediately to  
disk.  Modern hard drives do the same (so, after the OS flushes to  
the hard drive, the hard drive actually just buffers the writes,  
too).  Then, when it's a good time, these buffered writes are spooled  
to disk in the background.  They do this to get better performance on  
write.

Then, the fsync() call, which is an OS level call, requests that all  
buffered bytes be flushed to the real underlying storage ("stable  
storage").  It is not supposed to return until all written bytes are  
on stable storage.  Lucene relies on this by fsync'ing all referenced  
files in the index, before deleting the files referenced by previous  
commits.  So, as of 2.4, this ensures the index will remain  
consistent even if the OS or computer crashes, or power is cut.

Unfortunately, there are apparently some devices which even when fsync 
() is called, return immediately even though the bytes are not  
actually written to stable storage.  If you have such a device that  
lies then Lucene 2.4 won't be able to guarantee index consistency on  
crash/power outage.

Mike

Cam Bazz wrote:

> Hello,
>
> What do you mean by IO system lying on fsync?
>
> Best.
>
> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Yes that's already been committed to trunk as well.
>>
>> IndexWriter now has a commit() method which syncs all referenced
>> files in the index to stable storage (assuming your IO system doesn't
>> "lie" on fsync).
>>
>> Mike
>>
>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>>
>>> Nice. Thanks.
>>>
>>> will the 2.4 have commit improvements that we previously talked  
>>> about?
>>>
>>> best regards.
>>>
>>> -C.B.
>>>
>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> The trunk version of Lucene (eventually 2.4) now has deletion by
>>>> query, in IndexWriter.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Hello Erick,
>>>>>
>>>>> Has anyone found a way for deleting a document with a query? I
>>>>> understand it
>>>>> can be deleted via terms, but I need to delete a document with two
>>>>> terms,
>>>>> that is the only way I can identify my document is by looking at
>>>>> two terms
>>>>> not one.
>>>>>
>>>>> best.
>>>>>
>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>>>> <erickerickson@gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Doc IDs are assigned at index time and can change over time That
>>>>>> is,
>>>>>> deleting
>>>>>> a document and optimizing (and other operations) can and will
>>>>>> change
>>>>>> document IDs. So, yes, you have to do a search (either use a hits
>>>>>> object
>>>>>> or one of the HitCollectors) in order to delete by doc ID.
>>>>>>
>>>>>> You can also delete by terms, see the API.
>>>>>>
>>>>>> There are other options, but you haven't explianed what you're
>>>>>> trying to accomplish enough to offer any more suggestions.
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>> No. I haven't but I will. even though I would like to make my  
>>>>>>> own
>>>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>>>
>>>>>>> Thanks for replying.
>>>>>>> Varun
>>>>>>>
>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
>>>>>>> <markrmiller@gmail.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>> Have you seen the work that Mark Harwood has done making a GWT
>>>>>>>> version
>>>>>>>> of Luke? I think its in the latest release.
>>>>>>>>
>>>>>>>> varun sood wrote:
>>>>>>>>> Hi,
>>>>>>>>>   I am trying to delete a document without using the hits
>>>>>>>>> object.
>>>>>>>>> What is the unique field in the index that I can use to
>>>>>>>>> delete the
>>>>>>>> document?
>>>>>>>>>
>>>>>>>>> I am trying to make a web interface where index can be  
>>>>>>>>> modified,
>>>>>>> smaller
>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>>>
>>>>>>>>> to use deleteDocument(int docNum)
>>>>>>>>> I need docNum how can I get this? or does it have to come
>>>>>>>>> only vis
>>>>>>> Hits?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> Varun
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> --
>>>>>>>> --
>>>>>>>> --
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 09:17:01 2008
Return-Path: <java-user-return-33170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30366 invoked from network); 17 Mar 2008 09:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 09:17:01 -0000
Received: (qmail 95580 invoked by uid 500); 17 Mar 2008 09:16:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95550 invoked by uid 500); 17 Mar 2008 09:16:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95528 invoked by uid 99); 17 Mar 2008 09:16:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 02:16:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cambazz@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 09:15:57 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4649480fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 02:16:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xAS+OPuiRxpuu0iYI/YGQzGYRKy7YnXHQ2pls6nZxbA=;
        b=AGCp24Yiqj5k5kxCUnCHzcCvc0lMZIS8aWm3sBQMuQI4R2TCfGxbV4xaUXJx+e2VvftENV4zYOiBMboZcKnyv28fRPnBM3LDwdWPS0AFGskzYtyScprR9A/gm7PupCTZHVz4GTPTxLrx5/suQtQf+rATZ2I0577IT7DmdMRUVfg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b5zfElWjW/GTb184u3dIqm1RQoNoD0solSd7M3HtF58vO596JpS99Jbvj0V+qBGLNf9Jt+bZa3+/bYL7zeVTQNkWfOh6AynnqbPQVcglSzkhe5uGBvrkTSV8QbXJkFjiSUEsghKdk61RowtpiLrhbKWOwjsK4pRiQoofEmuYG+Q=
Received: by 10.82.182.1 with SMTP id e1mr35481211buf.21.1205745377343;
        Mon, 17 Mar 2008 02:16:17 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 02:16:17 -0700 (PDT)
Message-ID: <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
Date: Mon, 17 Mar 2008 11:16:17 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10031_33181906.1205745377338"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
	 <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
	 <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
	 <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
	 <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
	 <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
	 <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10031_33181906.1205745377338
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I understand the issue. But I have not understood - is this hardware related
issue - i.e a harddisk? or operating system?

If I am using linux would the OS lie about fsyncing? could I do anything in
the kernel to stop it from lying? or is this just a harddrive related
issue...

Best.

On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> When you write to a file, modern OSs by default just buffer those
> writes in memory rather than actually writing them immediately to
> disk.  Modern hard drives do the same (so, after the OS flushes to
> the hard drive, the hard drive actually just buffers the writes,
> too).  Then, when it's a good time, these buffered writes are spooled
> to disk in the background.  They do this to get better performance on
> write.
>
> Then, the fsync() call, which is an OS level call, requests that all
> buffered bytes be flushed to the real underlying storage ("stable
> storage").  It is not supposed to return until all written bytes are
> on stable storage.  Lucene relies on this by fsync'ing all referenced
> files in the index, before deleting the files referenced by previous
> commits.  So, as of 2.4, this ensures the index will remain
> consistent even if the OS or computer crashes, or power is cut.
>
> Unfortunately, there are apparently some devices which even when fsync
> () is called, return immediately even though the bytes are not
> actually written to stable storage.  If you have such a device that
> lies then Lucene 2.4 won't be able to guarantee index consistency on
> crash/power outage.
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello,
> >
> > What do you mean by IO system lying on fsync?
> >
> > Best.
> >
> > On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >>
> >> Yes that's already been committed to trunk as well.
> >>
> >> IndexWriter now has a commit() method which syncs all referenced
> >> files in the index to stable storage (assuming your IO system doesn't
> >> "lie" on fsync).
> >>
> >> Mike
> >>
> >> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
> >>
> >>> Nice. Thanks.
> >>>
> >>> will the 2.4 have commit improvements that we previously talked
> >>> about?
> >>>
> >>> best regards.
> >>>
> >>> -C.B.
> >>>
> >>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>>
> >>>>
> >>>> The trunk version of Lucene (eventually 2.4) now has deletion by
> >>>> query, in IndexWriter.
> >>>>
> >>>> Mike
> >>>>
> >>>> Cam Bazz wrote:
> >>>>
> >>>>> Hello Erick,
> >>>>>
> >>>>> Has anyone found a way for deleting a document with a query? I
> >>>>> understand it
> >>>>> can be deleted via terms, but I need to delete a document with two
> >>>>> terms,
> >>>>> that is the only way I can identify my document is by looking at
> >>>>> two terms
> >>>>> not one.
> >>>>>
> >>>>> best.
> >>>>>
> >>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> >>>>> <erickerickson@gmail.com>
> >>>>> wrote:
> >>>>>
> >>>>>> Doc IDs are assigned at index time and can change over time That
> >>>>>> is,
> >>>>>> deleting
> >>>>>> a document and optimizing (and other operations) can and will
> >>>>>> change
> >>>>>> document IDs. So, yes, you have to do a search (either use a hits
> >>>>>> object
> >>>>>> or one of the HitCollectors) in order to delete by doc ID.
> >>>>>>
> >>>>>> You can also delete by terms, see the API.
> >>>>>>
> >>>>>> There are other options, but you haven't explianed what you're
> >>>>>> trying to accomplish enough to offer any more suggestions.
> >>>>>>
> >>>>>> Best
> >>>>>> Erick
> >>>>>>
> >>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>
> >>>>>> wrote:
> >>>>>>
> >>>>>>> No. I haven't but I will. even though I would like to make my
> >>>>>>> own
> >>>>>>> implementation. So any idea of how to get the "doc num"?
> >>>>>>>
> >>>>>>> Thanks for replying.
> >>>>>>> Varun
> >>>>>>>
> >>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
> >>>>>>> <markrmiller@gmail.com>
> >>>>>>> wrote:
> >>>>>>>
> >>>>>>>> Have you seen the work that Mark Harwood has done making a GWT
> >>>>>>>> version
> >>>>>>>> of Luke? I think its in the latest release.
> >>>>>>>>
> >>>>>>>> varun sood wrote:
> >>>>>>>>> Hi,
> >>>>>>>>>   I am trying to delete a document without using the hits
> >>>>>>>>> object.
> >>>>>>>>> What is the unique field in the index that I can use to
> >>>>>>>>> delete the
> >>>>>>>> document?
> >>>>>>>>>
> >>>>>>>>> I am trying to make a web interface where index can be
> >>>>>>>>> modified,
> >>>>>>> smaller
> >>>>>>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>>>>>
> >>>>>>>>> to use deleteDocument(int docNum)
> >>>>>>>>> I need docNum how can I get this? or does it have to come
> >>>>>>>>> only vis
> >>>>>>> Hits?
> >>>>>>>>>
> >>>>>>>>> Thanks,
> >>>>>>>>> Varun
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>
> >>>>>>>> ---------------------------------------------------------------
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>> help@lucene.apache.org
> >>>>>>>>
> >>>>>>>>
> >>>>>>>
> >>>>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10031_33181906.1205745377338--

From java-user-return-33171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 09:53:58 2008
Return-Path: <java-user-return-33171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41416 invoked from network); 17 Mar 2008 09:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 09:53:58 -0000
Received: (qmail 46197 invoked by uid 500); 17 Mar 2008 09:53:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46162 invoked by uid 500); 17 Mar 2008 09:53:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46151 invoked by uid 99); 17 Mar 2008 09:53:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 02:53:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 09:53:11 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5691610wah.11
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 02:53:21 -0700 (PDT)
Received: by 10.114.136.1 with SMTP id j1mr17283482wad.85.1205747601241;
        Mon, 17 Mar 2008 02:53:21 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm8801432wra.40.2008.03.17.02.53.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 02:53:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <47D847FE.9060105@gmail.com> <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com> <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com> <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com> <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com> <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com> <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com> <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com> <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com> <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 05:53:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


It's a hard drive issue.  When you call fsync, the OS asks the hard  
drive to sync.

Mike

Cam Bazz wrote:

> Hello,
>
> I understand the issue. But I have not understood - is this  
> hardware related
> issue - i.e a harddisk? or operating system?
>
> If I am using linux would the OS lie about fsyncing? could I do  
> anything in
> the kernel to stop it from lying? or is this just a harddrive related
> issue...
>
> Best.
>
> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> When you write to a file, modern OSs by default just buffer those
>> writes in memory rather than actually writing them immediately to
>> disk.  Modern hard drives do the same (so, after the OS flushes to
>> the hard drive, the hard drive actually just buffers the writes,
>> too).  Then, when it's a good time, these buffered writes are spooled
>> to disk in the background.  They do this to get better performance on
>> write.
>>
>> Then, the fsync() call, which is an OS level call, requests that all
>> buffered bytes be flushed to the real underlying storage ("stable
>> storage").  It is not supposed to return until all written bytes are
>> on stable storage.  Lucene relies on this by fsync'ing all referenced
>> files in the index, before deleting the files referenced by previous
>> commits.  So, as of 2.4, this ensures the index will remain
>> consistent even if the OS or computer crashes, or power is cut.
>>
>> Unfortunately, there are apparently some devices which even when  
>> fsync
>> () is called, return immediately even though the bytes are not
>> actually written to stable storage.  If you have such a device that
>> lies then Lucene 2.4 won't be able to guarantee index consistency on
>> crash/power outage.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello,
>>>
>>> What do you mean by IO system lying on fsync?
>>>
>>> Best.
>>>
>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> Yes that's already been committed to trunk as well.
>>>>
>>>> IndexWriter now has a commit() method which syncs all referenced
>>>> files in the index to stable storage (assuming your IO system  
>>>> doesn't
>>>> "lie" on fsync).
>>>>
>>>> Mike
>>>>
>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>>>>
>>>>> Nice. Thanks.
>>>>>
>>>>> will the 2.4 have commit improvements that we previously talked
>>>>> about?
>>>>>
>>>>> best regards.
>>>>>
>>>>> -C.B.
>>>>>
>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>>
>>>>>>
>>>>>> The trunk version of Lucene (eventually 2.4) now has deletion by
>>>>>> query, in IndexWriter.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Cam Bazz wrote:
>>>>>>
>>>>>>> Hello Erick,
>>>>>>>
>>>>>>> Has anyone found a way for deleting a document with a query? I
>>>>>>> understand it
>>>>>>> can be deleted via terms, but I need to delete a document  
>>>>>>> with two
>>>>>>> terms,
>>>>>>> that is the only way I can identify my document is by looking at
>>>>>>> two terms
>>>>>>> not one.
>>>>>>>
>>>>>>> best.
>>>>>>>
>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>>>>>> <erickerickson@gmail.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>> Doc IDs are assigned at index time and can change over time  
>>>>>>>> That
>>>>>>>> is,
>>>>>>>> deleting
>>>>>>>> a document and optimizing (and other operations) can and will
>>>>>>>> change
>>>>>>>> document IDs. So, yes, you have to do a search (either use a  
>>>>>>>> hits
>>>>>>>> object
>>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
>>>>>>>>
>>>>>>>> You can also delete by terms, see the API.
>>>>>>>>
>>>>>>>> There are other options, but you haven't explianed what you're
>>>>>>>> trying to accomplish enough to offer any more suggestions.
>>>>>>>>
>>>>>>>> Best
>>>>>>>> Erick
>>>>>>>>
>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>>> No. I haven't but I will. even though I would like to make my
>>>>>>>>> own
>>>>>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>>>>>
>>>>>>>>> Thanks for replying.
>>>>>>>>> Varun
>>>>>>>>>
>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
>>>>>>>>> <markrmiller@gmail.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>> Have you seen the work that Mark Harwood has done making a  
>>>>>>>>>> GWT
>>>>>>>>>> version
>>>>>>>>>> of Luke? I think its in the latest release.
>>>>>>>>>>
>>>>>>>>>> varun sood wrote:
>>>>>>>>>>> Hi,
>>>>>>>>>>>   I am trying to delete a document without using the hits
>>>>>>>>>>> object.
>>>>>>>>>>> What is the unique field in the index that I can use to
>>>>>>>>>>> delete the
>>>>>>>>>> document?
>>>>>>>>>>>
>>>>>>>>>>> I am trying to make a web interface where index can be
>>>>>>>>>>> modified,
>>>>>>>>> smaller
>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>>>>>
>>>>>>>>>>> to use deleteDocument(int docNum)
>>>>>>>>>>> I need docNum how can I get this? or does it have to come
>>>>>>>>>>> only vis
>>>>>>>>> Hits?
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> Varun
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ------------------------------------------------------------- 
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 10:19:12 2008
Return-Path: <java-user-return-33172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49028 invoked from network); 17 Mar 2008 10:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 10:19:12 -0000
Received: (qmail 81110 invoked by uid 500); 17 Mar 2008 10:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81053 invoked by uid 500); 17 Mar 2008 10:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81012 invoked by uid 99); 17 Mar 2008 10:19:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 03:19:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 10:18:29 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4667894fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 03:18:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SVQgUsLXU8hh4P67+oCEP6B0xDSnOuM8pfB/VQh8B0k=;
        b=ovd2zM083uUoP418AN93fKMRr0b+FwDCznmROpHJRxy4DmpcxlwB3MvBfE4EcSXdco32Mmw0KE6pGUJ06ansQxZW/lMkNrKyWqxD/oHYFDGVSfvzf7izlf7CqopERFNwqzsHZoiH7o80vDoTt/bZVs944+TbtBzQumeOrBMFFHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MwNyPXMnI32KQ42bVpdZXXCVLc6bvq/RcIa8paWp3urAzNnzaKALiNmdMOpkkT7LyMH+9cqZfCJAOphS+ud9Ub75N+dll4yAEHsWj5YC3waX8iPDlrRHNm7mfYgUJohpJ4vHX8nTJVI+k3M+yCOHHJ1srGbt2eeiwtMA4KiAo8Y=
Received: by 10.82.127.14 with SMTP id z14mr36135303buc.3.1205749118427;
        Mon, 17 Mar 2008 03:18:38 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 03:18:33 -0700 (PDT)
Message-ID: <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com>
Date: Mon, 17 Mar 2008 12:18:33 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10166_7900072.1205749113387"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
	 <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com>
	 <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
	 <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
	 <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
	 <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
	 <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
	 <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
	 <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10166_7900072.1205749113387
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another and last question;

when the user commits, will an indexreader that is reading the same thread
see the changes made or not?

I thought something was said about this, if my memory serves me correct.

Best.

On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> It's a hard drive issue.  When you call fsync, the OS asks the hard
> drive to sync.
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello,
> >
> > I understand the issue. But I have not understood - is this
> > hardware related
> > issue - i.e a harddisk? or operating system?
> >
> > If I am using linux would the OS lie about fsyncing? could I do
> > anything in
> > the kernel to stop it from lying? or is this just a harddrive related
> > issue...
> >
> > Best.
> >
> > On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >>
> >> When you write to a file, modern OSs by default just buffer those
> >> writes in memory rather than actually writing them immediately to
> >> disk.  Modern hard drives do the same (so, after the OS flushes to
> >> the hard drive, the hard drive actually just buffers the writes,
> >> too).  Then, when it's a good time, these buffered writes are spooled
> >> to disk in the background.  They do this to get better performance on
> >> write.
> >>
> >> Then, the fsync() call, which is an OS level call, requests that all
> >> buffered bytes be flushed to the real underlying storage ("stable
> >> storage").  It is not supposed to return until all written bytes are
> >> on stable storage.  Lucene relies on this by fsync'ing all referenced
> >> files in the index, before deleting the files referenced by previous
> >> commits.  So, as of 2.4, this ensures the index will remain
> >> consistent even if the OS or computer crashes, or power is cut.
> >>
> >> Unfortunately, there are apparently some devices which even when
> >> fsync
> >> () is called, return immediately even though the bytes are not
> >> actually written to stable storage.  If you have such a device that
> >> lies then Lucene 2.4 won't be able to guarantee index consistency on
> >> crash/power outage.
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello,
> >>>
> >>> What do you mean by IO system lying on fsync?
> >>>
> >>> Best.
> >>>
> >>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>>
> >>>>
> >>>> Yes that's already been committed to trunk as well.
> >>>>
> >>>> IndexWriter now has a commit() method which syncs all referenced
> >>>> files in the index to stable storage (assuming your IO system
> >>>> doesn't
> >>>> "lie" on fsync).
> >>>>
> >>>> Mike
> >>>>
> >>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
> >>>>
> >>>>> Nice. Thanks.
> >>>>>
> >>>>> will the 2.4 have commit improvements that we previously talked
> >>>>> about?
> >>>>>
> >>>>> best regards.
> >>>>>
> >>>>> -C.B.
> >>>>>
> >>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> >>>>> lucene@mikemccandless.com> wrote:
> >>>>>
> >>>>>>
> >>>>>> The trunk version of Lucene (eventually 2.4) now has deletion by
> >>>>>> query, in IndexWriter.
> >>>>>>
> >>>>>> Mike
> >>>>>>
> >>>>>> Cam Bazz wrote:
> >>>>>>
> >>>>>>> Hello Erick,
> >>>>>>>
> >>>>>>> Has anyone found a way for deleting a document with a query? I
> >>>>>>> understand it
> >>>>>>> can be deleted via terms, but I need to delete a document
> >>>>>>> with two
> >>>>>>> terms,
> >>>>>>> that is the only way I can identify my document is by looking at
> >>>>>>> two terms
> >>>>>>> not one.
> >>>>>>>
> >>>>>>> best.
> >>>>>>>
> >>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> >>>>>>> <erickerickson@gmail.com>
> >>>>>>> wrote:
> >>>>>>>
> >>>>>>>> Doc IDs are assigned at index time and can change over time
> >>>>>>>> That
> >>>>>>>> is,
> >>>>>>>> deleting
> >>>>>>>> a document and optimizing (and other operations) can and will
> >>>>>>>> change
> >>>>>>>> document IDs. So, yes, you have to do a search (either use a
> >>>>>>>> hits
> >>>>>>>> object
> >>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
> >>>>>>>>
> >>>>>>>> You can also delete by terms, see the API.
> >>>>>>>>
> >>>>>>>> There are other options, but you haven't explianed what you're
> >>>>>>>> trying to accomplish enough to offer any more suggestions.
> >>>>>>>>
> >>>>>>>> Best
> >>>>>>>> Erick
> >>>>>>>>
> >>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com>
> >>>>>>>> wrote:
> >>>>>>>>
> >>>>>>>>> No. I haven't but I will. even though I would like to make my
> >>>>>>>>> own
> >>>>>>>>> implementation. So any idea of how to get the "doc num"?
> >>>>>>>>>
> >>>>>>>>> Thanks for replying.
> >>>>>>>>> Varun
> >>>>>>>>>
> >>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
> >>>>>>>>> <markrmiller@gmail.com>
> >>>>>>>>> wrote:
> >>>>>>>>>
> >>>>>>>>>> Have you seen the work that Mark Harwood has done making a
> >>>>>>>>>> GWT
> >>>>>>>>>> version
> >>>>>>>>>> of Luke? I think its in the latest release.
> >>>>>>>>>>
> >>>>>>>>>> varun sood wrote:
> >>>>>>>>>>> Hi,
> >>>>>>>>>>>   I am trying to delete a document without using the hits
> >>>>>>>>>>> object.
> >>>>>>>>>>> What is the unique field in the index that I can use to
> >>>>>>>>>>> delete the
> >>>>>>>>>> document?
> >>>>>>>>>>>
> >>>>>>>>>>> I am trying to make a web interface where index can be
> >>>>>>>>>>> modified,
> >>>>>>>>> smaller
> >>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>>>>>>>
> >>>>>>>>>>> to use deleteDocument(int docNum)
> >>>>>>>>>>> I need docNum how can I get this? or does it have to come
> >>>>>>>>>>> only vis
> >>>>>>>>> Hits?
> >>>>>>>>>>>
> >>>>>>>>>>> Thanks,
> >>>>>>>>>>> Varun
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> -------------------------------------------------------------
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> To unsubscribe, e-mail: java-user-
> >>>>>>>>>> unsubscribe@lucene.apache.org
> >>>>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>>>> help@lucene.apache.org
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>
> >>>>>>>>
> >>>>>>
> >>>>>>
> >>>>>> -----------------------------------------------------------------
> >>>>>> --
> >>>>>> --
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10166_7900072.1205749113387--

From java-user-return-33173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 10:28:59 2008
Return-Path: <java-user-return-33173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51821 invoked from network); 17 Mar 2008 10:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 10:28:58 -0000
Received: (qmail 1278 invoked by uid 500); 17 Mar 2008 10:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1092 invoked by uid 500); 17 Mar 2008 10:28:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1073 invoked by uid 99); 17 Mar 2008 10:28:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 03:28:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 10:28:00 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3712928wra.14
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 03:28:09 -0700 (PDT)
Received: by 10.114.109.1 with SMTP id h1mr17282087wac.35.1205749687107;
        Mon, 17 Mar 2008 03:28:07 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 11sm7716712wrl.7.2008.03.17.03.28.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 03:28:06 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com> <1bcb7c7f0803170112h679584d4ud90e9e2e9b9b4190@mail.gmail.com> <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com> <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com> <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com> <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com> <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com> <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com> <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com> <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 06:28:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I'm not sure what you mean by "same thread".  Maybe you meant "same  
index"?

Yes, if the IndexReader reopens.

IndexWriter.commit() makes the changes visible to readers, and makes  
the changes durable to os/computer crash or power outage.

Mike

Cam Bazz wrote:

> Another and last question;
>
> when the user commits, will an indexreader that is reading the same  
> thread
> see the changes made or not?
>
> I thought something was said about this, if my memory serves me  
> correct.
>
> Best.
>
> On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> It's a hard drive issue.  When you call fsync, the OS asks the hard
>> drive to sync.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello,
>>>
>>> I understand the issue. But I have not understood - is this
>>> hardware related
>>> issue - i.e a harddisk? or operating system?
>>>
>>> If I am using linux would the OS lie about fsyncing? could I do
>>> anything in
>>> the kernel to stop it from lying? or is this just a harddrive  
>>> related
>>> issue...
>>>
>>> Best.
>>>
>>> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> When you write to a file, modern OSs by default just buffer those
>>>> writes in memory rather than actually writing them immediately to
>>>> disk.  Modern hard drives do the same (so, after the OS flushes to
>>>> the hard drive, the hard drive actually just buffers the writes,
>>>> too).  Then, when it's a good time, these buffered writes are  
>>>> spooled
>>>> to disk in the background.  They do this to get better  
>>>> performance on
>>>> write.
>>>>
>>>> Then, the fsync() call, which is an OS level call, requests that  
>>>> all
>>>> buffered bytes be flushed to the real underlying storage ("stable
>>>> storage").  It is not supposed to return until all written bytes  
>>>> are
>>>> on stable storage.  Lucene relies on this by fsync'ing all  
>>>> referenced
>>>> files in the index, before deleting the files referenced by  
>>>> previous
>>>> commits.  So, as of 2.4, this ensures the index will remain
>>>> consistent even if the OS or computer crashes, or power is cut.
>>>>
>>>> Unfortunately, there are apparently some devices which even when
>>>> fsync
>>>> () is called, return immediately even though the bytes are not
>>>> actually written to stable storage.  If you have such a device that
>>>> lies then Lucene 2.4 won't be able to guarantee index  
>>>> consistency on
>>>> crash/power outage.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> What do you mean by IO system lying on fsync?
>>>>>
>>>>> Best.
>>>>>
>>>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>>
>>>>>>
>>>>>> Yes that's already been committed to trunk as well.
>>>>>>
>>>>>> IndexWriter now has a commit() method which syncs all referenced
>>>>>> files in the index to stable storage (assuming your IO system
>>>>>> doesn't
>>>>>> "lie" on fsync).
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>>>>>>
>>>>>>> Nice. Thanks.
>>>>>>>
>>>>>>> will the 2.4 have commit improvements that we previously talked
>>>>>>> about?
>>>>>>>
>>>>>>> best regards.
>>>>>>>
>>>>>>> -C.B.
>>>>>>>
>>>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>
>>>>>>>>
>>>>>>>> The trunk version of Lucene (eventually 2.4) now has  
>>>>>>>> deletion by
>>>>>>>> query, in IndexWriter.
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> Cam Bazz wrote:
>>>>>>>>
>>>>>>>>> Hello Erick,
>>>>>>>>>
>>>>>>>>> Has anyone found a way for deleting a document with a query? I
>>>>>>>>> understand it
>>>>>>>>> can be deleted via terms, but I need to delete a document
>>>>>>>>> with two
>>>>>>>>> terms,
>>>>>>>>> that is the only way I can identify my document is by  
>>>>>>>>> looking at
>>>>>>>>> two terms
>>>>>>>>> not one.
>>>>>>>>>
>>>>>>>>> best.
>>>>>>>>>
>>>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>>>>>>>> <erickerickson@gmail.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>> Doc IDs are assigned at index time and can change over time
>>>>>>>>>> That
>>>>>>>>>> is,
>>>>>>>>>> deleting
>>>>>>>>>> a document and optimizing (and other operations) can and will
>>>>>>>>>> change
>>>>>>>>>> document IDs. So, yes, you have to do a search (either use a
>>>>>>>>>> hits
>>>>>>>>>> object
>>>>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
>>>>>>>>>>
>>>>>>>>>> You can also delete by terms, see the API.
>>>>>>>>>>
>>>>>>>>>> There are other options, but you haven't explianed what  
>>>>>>>>>> you're
>>>>>>>>>> trying to accomplish enough to offer any more suggestions.
>>>>>>>>>>
>>>>>>>>>> Best
>>>>>>>>>> Erick
>>>>>>>>>>
>>>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood  
>>>>>>>>>> <vsood2@gmail.com>
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>> No. I haven't but I will. even though I would like to  
>>>>>>>>>>> make my
>>>>>>>>>>> own
>>>>>>>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>>>>>>>
>>>>>>>>>>> Thanks for replying.
>>>>>>>>>>> Varun
>>>>>>>>>>>
>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
>>>>>>>>>>> <markrmiller@gmail.com>
>>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>>> Have you seen the work that Mark Harwood has done making a
>>>>>>>>>>>> GWT
>>>>>>>>>>>> version
>>>>>>>>>>>> of Luke? I think its in the latest release.
>>>>>>>>>>>>
>>>>>>>>>>>> varun sood wrote:
>>>>>>>>>>>>> Hi,
>>>>>>>>>>>>>   I am trying to delete a document without using the hits
>>>>>>>>>>>>> object.
>>>>>>>>>>>>> What is the unique field in the index that I can use to
>>>>>>>>>>>>> delete the
>>>>>>>>>>>> document?
>>>>>>>>>>>>>
>>>>>>>>>>>>> I am trying to make a web interface where index can be
>>>>>>>>>>>>> modified,
>>>>>>>>>>> smaller
>>>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>>>>>>>
>>>>>>>>>>>>> to use deleteDocument(int docNum)
>>>>>>>>>>>>> I need docNum how can I get this? or does it have to come
>>>>>>>>>>>>> only vis
>>>>>>>>>>> Hits?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Thanks,
>>>>>>>>>>>>> Varun
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ----------------------------------------------------------- 
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-
>>>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> --
>>>>>>>> --
>>>>>>>> --
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 10:31:39 2008
Return-Path: <java-user-return-33174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56796 invoked from network); 17 Mar 2008 10:31:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 10:31:39 -0000
Received: (qmail 14174 invoked by uid 500); 17 Mar 2008 10:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14138 invoked by uid 500); 17 Mar 2008 10:31:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14127 invoked by uid 99); 17 Mar 2008 10:31:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 03:31:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 10:30:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4671576fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 03:31:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kjtL0V//DnqkK7SJhlZdH5MGUaHpyItOHfAztGqvWiA=;
        b=QxFWC0vKbUVr1DNLDx4Xa+92Fr9P0vMfr94dk7SjQgJlH3EpYOidN3f/OPCisetLveytFo3JC5rXBTeLbxbGWQoUqq/b5D7UlhRh8z9f4VAYnNBALKUSgIj+cqx0dLlENH1vcmJGxRfk8Mk2/cyWrr4Tptwez1EHnH41rfpPsqw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GefDcfBSwBS8Ly43vA8wHeEB9CAv4mnrT9TOzCk5D5Ghfp6VajJMnO5S9UFfcf9iq/B2n2PFBtcBBmH0ghgDzC9UEblu9CATe1XOCNutFaFKiQt4l3dCO6cPDKILV7JQ9/NGIkVeco1Be1Bk5qhLLcO4+Fwwsi9FFqh9McTZSAc=
Received: by 10.82.177.3 with SMTP id z3mr36160147bue.23.1205749860774;
        Mon, 17 Mar 2008 03:31:00 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 03:31:00 -0700 (PDT)
Message-ID: <1bcb7c7f0803170331u6fa8817buaecb8d83f64799f5@mail.gmail.com>
Date: Mon, 17 Mar 2008 12:31:00 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10192_26781273.1205749860761"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com>
	 <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com>
	 <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
	 <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
	 <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
	 <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
	 <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com>
	 <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com>
	 <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10192_26781273.1205749860761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, I meant the same index.

I thought with the new changes - the index reader would see the changes
without re-opening.
It would be real real cool to have that.


Best.

-C.B.

On Mon, Mar 17, 2008 at 12:28 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> I'm not sure what you mean by "same thread".  Maybe you meant "same
> index"?
>
> Yes, if the IndexReader reopens.
>
> IndexWriter.commit() makes the changes visible to readers, and makes
> the changes durable to os/computer crash or power outage.
>
> Mike
>
> Cam Bazz wrote:
>
> > Another and last question;
> >
> > when the user commits, will an indexreader that is reading the same
> > thread
> > see the changes made or not?
> >
> > I thought something was said about this, if my memory serves me
> > correct.
> >
> > Best.
> >
> > On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >>
> >> It's a hard drive issue.  When you call fsync, the OS asks the hard
> >> drive to sync.
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello,
> >>>
> >>> I understand the issue. But I have not understood - is this
> >>> hardware related
> >>> issue - i.e a harddisk? or operating system?
> >>>
> >>> If I am using linux would the OS lie about fsyncing? could I do
> >>> anything in
> >>> the kernel to stop it from lying? or is this just a harddrive
> >>> related
> >>> issue...
> >>>
> >>> Best.
> >>>
> >>> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>>
> >>>>
> >>>> When you write to a file, modern OSs by default just buffer those
> >>>> writes in memory rather than actually writing them immediately to
> >>>> disk.  Modern hard drives do the same (so, after the OS flushes to
> >>>> the hard drive, the hard drive actually just buffers the writes,
> >>>> too).  Then, when it's a good time, these buffered writes are
> >>>> spooled
> >>>> to disk in the background.  They do this to get better
> >>>> performance on
> >>>> write.
> >>>>
> >>>> Then, the fsync() call, which is an OS level call, requests that
> >>>> all
> >>>> buffered bytes be flushed to the real underlying storage ("stable
> >>>> storage").  It is not supposed to return until all written bytes
> >>>> are
> >>>> on stable storage.  Lucene relies on this by fsync'ing all
> >>>> referenced
> >>>> files in the index, before deleting the files referenced by
> >>>> previous
> >>>> commits.  So, as of 2.4, this ensures the index will remain
> >>>> consistent even if the OS or computer crashes, or power is cut.
> >>>>
> >>>> Unfortunately, there are apparently some devices which even when
> >>>> fsync
> >>>> () is called, return immediately even though the bytes are not
> >>>> actually written to stable storage.  If you have such a device that
> >>>> lies then Lucene 2.4 won't be able to guarantee index
> >>>> consistency on
> >>>> crash/power outage.
> >>>>
> >>>> Mike
> >>>>
> >>>> Cam Bazz wrote:
> >>>>
> >>>>> Hello,
> >>>>>
> >>>>> What do you mean by IO system lying on fsync?
> >>>>>
> >>>>> Best.
> >>>>>
> >>>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
> >>>>> lucene@mikemccandless.com> wrote:
> >>>>>
> >>>>>>
> >>>>>> Yes that's already been committed to trunk as well.
> >>>>>>
> >>>>>> IndexWriter now has a commit() method which syncs all referenced
> >>>>>> files in the index to stable storage (assuming your IO system
> >>>>>> doesn't
> >>>>>> "lie" on fsync).
> >>>>>>
> >>>>>> Mike
> >>>>>>
> >>>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
> >>>>>>
> >>>>>>> Nice. Thanks.
> >>>>>>>
> >>>>>>> will the 2.4 have commit improvements that we previously talked
> >>>>>>> about?
> >>>>>>>
> >>>>>>> best regards.
> >>>>>>>
> >>>>>>> -C.B.
> >>>>>>>
> >>>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> >>>>>>> lucene@mikemccandless.com> wrote:
> >>>>>>>
> >>>>>>>>
> >>>>>>>> The trunk version of Lucene (eventually 2.4) now has
> >>>>>>>> deletion by
> >>>>>>>> query, in IndexWriter.
> >>>>>>>>
> >>>>>>>> Mike
> >>>>>>>>
> >>>>>>>> Cam Bazz wrote:
> >>>>>>>>
> >>>>>>>>> Hello Erick,
> >>>>>>>>>
> >>>>>>>>> Has anyone found a way for deleting a document with a query? I
> >>>>>>>>> understand it
> >>>>>>>>> can be deleted via terms, but I need to delete a document
> >>>>>>>>> with two
> >>>>>>>>> terms,
> >>>>>>>>> that is the only way I can identify my document is by
> >>>>>>>>> looking at
> >>>>>>>>> two terms
> >>>>>>>>> not one.
> >>>>>>>>>
> >>>>>>>>> best.
> >>>>>>>>>
> >>>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> >>>>>>>>> <erickerickson@gmail.com>
> >>>>>>>>> wrote:
> >>>>>>>>>
> >>>>>>>>>> Doc IDs are assigned at index time and can change over time
> >>>>>>>>>> That
> >>>>>>>>>> is,
> >>>>>>>>>> deleting
> >>>>>>>>>> a document and optimizing (and other operations) can and will
> >>>>>>>>>> change
> >>>>>>>>>> document IDs. So, yes, you have to do a search (either use a
> >>>>>>>>>> hits
> >>>>>>>>>> object
> >>>>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
> >>>>>>>>>>
> >>>>>>>>>> You can also delete by terms, see the API.
> >>>>>>>>>>
> >>>>>>>>>> There are other options, but you haven't explianed what
> >>>>>>>>>> you're
> >>>>>>>>>> trying to accomplish enough to offer any more suggestions.
> >>>>>>>>>>
> >>>>>>>>>> Best
> >>>>>>>>>> Erick
> >>>>>>>>>>
> >>>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood
> >>>>>>>>>> <vsood2@gmail.com>
> >>>>>>>>>> wrote:
> >>>>>>>>>>
> >>>>>>>>>>> No. I haven't but I will. even though I would like to
> >>>>>>>>>>> make my
> >>>>>>>>>>> own
> >>>>>>>>>>> implementation. So any idea of how to get the "doc num"?
> >>>>>>>>>>>
> >>>>>>>>>>> Thanks for replying.
> >>>>>>>>>>> Varun
> >>>>>>>>>>>
> >>>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
> >>>>>>>>>>> <markrmiller@gmail.com>
> >>>>>>>>>>> wrote:
> >>>>>>>>>>>
> >>>>>>>>>>>> Have you seen the work that Mark Harwood has done making a
> >>>>>>>>>>>> GWT
> >>>>>>>>>>>> version
> >>>>>>>>>>>> of Luke? I think its in the latest release.
> >>>>>>>>>>>>
> >>>>>>>>>>>> varun sood wrote:
> >>>>>>>>>>>>> Hi,
> >>>>>>>>>>>>>   I am trying to delete a document without using the hits
> >>>>>>>>>>>>> object.
> >>>>>>>>>>>>> What is the unique field in the index that I can use to
> >>>>>>>>>>>>> delete the
> >>>>>>>>>>>> document?
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> I am trying to make a web interface where index can be
> >>>>>>>>>>>>> modified,
> >>>>>>>>>>> smaller
> >>>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> to use deleteDocument(int docNum)
> >>>>>>>>>>>>> I need docNum how can I get this? or does it have to come
> >>>>>>>>>>>>> only vis
> >>>>>>>>>>> Hits?
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> Thanks,
> >>>>>>>>>>>>> Varun
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>> -----------------------------------------------------------
> >>>>>>>>>>>> --
> >>>>>>>>>>>> --
> >>>>>>>>>>>> --
> >>>>>>>>>>>> --
> >>>>>>>>>>>> --
> >>>>>>>>>>>> To unsubscribe, e-mail: java-user-
> >>>>>>>>>>>> unsubscribe@lucene.apache.org
> >>>>>>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>>>>>> help@lucene.apache.org
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>> ---------------------------------------------------------------
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>> help@lucene.apache.org
> >>>>>>>>
> >>>>>>>>
> >>>>>>
> >>>>>>
> >>>>>> -----------------------------------------------------------------
> >>>>>> --
> >>>>>> --
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10192_26781273.1205749860761--

From java-user-return-33175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 10:36:39 2008
Return-Path: <java-user-return-33175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59224 invoked from network); 17 Mar 2008 10:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 10:36:39 -0000
Received: (qmail 22351 invoked by uid 500); 17 Mar 2008 10:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21830 invoked by uid 500); 17 Mar 2008 10:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21819 invoked by uid 99); 17 Mar 2008 10:36:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 03:36:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 10:35:39 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3716848wra.14
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 03:35:49 -0700 (PDT)
Received: by 10.115.89.1 with SMTP id r1mr17304434wal.8.1205750148082;
        Mon, 17 Mar 2008 03:35:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h37sm14423374wxd.18.2008.03.17.03.35.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 03:35:47 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170331u6fa8817buaecb8d83f64799f5@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <B15A3E90-52BD-4ABC-9A29-06937801B5B0@mikemccandless.com> <1bcb7c7f0803170133h37a95a6dnf1fd8660cc2733ce@mail.gmail.com> <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com> <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com> <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com> <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com> <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com> <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com> <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com> <1bcb7c7f0803170331u6fa8817buaecb8d83f64799f5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CC1B1E94-74A6-4552-8660-DA52738A3111@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 06:35:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Oh, sorry, no you still must reopen the IndexReader.  IndexReader  
still searches only a point in time.

Mike

Cam Bazz wrote:

> yes, I meant the same index.
>
> I thought with the new changes - the index reader would see the  
> changes
> without re-opening.
> It would be real real cool to have that.
>
>
> Best.
>
> -C.B.
>
> On Mon, Mar 17, 2008 at 12:28 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> I'm not sure what you mean by "same thread".  Maybe you meant "same
>> index"?
>>
>> Yes, if the IndexReader reopens.
>>
>> IndexWriter.commit() makes the changes visible to readers, and makes
>> the changes durable to os/computer crash or power outage.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Another and last question;
>>>
>>> when the user commits, will an indexreader that is reading the same
>>> thread
>>> see the changes made or not?
>>>
>>> I thought something was said about this, if my memory serves me
>>> correct.
>>>
>>> Best.
>>>
>>> On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> It's a hard drive issue.  When you call fsync, the OS asks the hard
>>>> drive to sync.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I understand the issue. But I have not understood - is this
>>>>> hardware related
>>>>> issue - i.e a harddisk? or operating system?
>>>>>
>>>>> If I am using linux would the OS lie about fsyncing? could I do
>>>>> anything in
>>>>> the kernel to stop it from lying? or is this just a harddrive
>>>>> related
>>>>> issue...
>>>>>
>>>>> Best.
>>>>>
>>>>> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>>
>>>>>>
>>>>>> When you write to a file, modern OSs by default just buffer those
>>>>>> writes in memory rather than actually writing them immediately to
>>>>>> disk.  Modern hard drives do the same (so, after the OS  
>>>>>> flushes to
>>>>>> the hard drive, the hard drive actually just buffers the writes,
>>>>>> too).  Then, when it's a good time, these buffered writes are
>>>>>> spooled
>>>>>> to disk in the background.  They do this to get better
>>>>>> performance on
>>>>>> write.
>>>>>>
>>>>>> Then, the fsync() call, which is an OS level call, requests that
>>>>>> all
>>>>>> buffered bytes be flushed to the real underlying storage ("stable
>>>>>> storage").  It is not supposed to return until all written bytes
>>>>>> are
>>>>>> on stable storage.  Lucene relies on this by fsync'ing all
>>>>>> referenced
>>>>>> files in the index, before deleting the files referenced by
>>>>>> previous
>>>>>> commits.  So, as of 2.4, this ensures the index will remain
>>>>>> consistent even if the OS or computer crashes, or power is cut.
>>>>>>
>>>>>> Unfortunately, there are apparently some devices which even when
>>>>>> fsync
>>>>>> () is called, return immediately even though the bytes are not
>>>>>> actually written to stable storage.  If you have such a device  
>>>>>> that
>>>>>> lies then Lucene 2.4 won't be able to guarantee index
>>>>>> consistency on
>>>>>> crash/power outage.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Cam Bazz wrote:
>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> What do you mean by IO system lying on fsync?
>>>>>>>
>>>>>>> Best.
>>>>>>>
>>>>>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>
>>>>>>>>
>>>>>>>> Yes that's already been committed to trunk as well.
>>>>>>>>
>>>>>>>> IndexWriter now has a commit() method which syncs all  
>>>>>>>> referenced
>>>>>>>> files in the index to stable storage (assuming your IO system
>>>>>>>> doesn't
>>>>>>>> "lie" on fsync).
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>>>>>>>>
>>>>>>>>> Nice. Thanks.
>>>>>>>>>
>>>>>>>>> will the 2.4 have commit improvements that we previously  
>>>>>>>>> talked
>>>>>>>>> about?
>>>>>>>>>
>>>>>>>>> best regards.
>>>>>>>>>
>>>>>>>>> -C.B.
>>>>>>>>>
>>>>>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
>>>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> The trunk version of Lucene (eventually 2.4) now has
>>>>>>>>>> deletion by
>>>>>>>>>> query, in IndexWriter.
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> Cam Bazz wrote:
>>>>>>>>>>
>>>>>>>>>>> Hello Erick,
>>>>>>>>>>>
>>>>>>>>>>> Has anyone found a way for deleting a document with a  
>>>>>>>>>>> query? I
>>>>>>>>>>> understand it
>>>>>>>>>>> can be deleted via terms, but I need to delete a document
>>>>>>>>>>> with two
>>>>>>>>>>> terms,
>>>>>>>>>>> that is the only way I can identify my document is by
>>>>>>>>>>> looking at
>>>>>>>>>>> two terms
>>>>>>>>>>> not one.
>>>>>>>>>>>
>>>>>>>>>>> best.
>>>>>>>>>>>
>>>>>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>>>>>>>>>> <erickerickson@gmail.com>
>>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>>> Doc IDs are assigned at index time and can change over time
>>>>>>>>>>>> That
>>>>>>>>>>>> is,
>>>>>>>>>>>> deleting
>>>>>>>>>>>> a document and optimizing (and other operations) can and  
>>>>>>>>>>>> will
>>>>>>>>>>>> change
>>>>>>>>>>>> document IDs. So, yes, you have to do a search (either  
>>>>>>>>>>>> use a
>>>>>>>>>>>> hits
>>>>>>>>>>>> object
>>>>>>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
>>>>>>>>>>>>
>>>>>>>>>>>> You can also delete by terms, see the API.
>>>>>>>>>>>>
>>>>>>>>>>>> There are other options, but you haven't explianed what
>>>>>>>>>>>> you're
>>>>>>>>>>>> trying to accomplish enough to offer any more suggestions.
>>>>>>>>>>>>
>>>>>>>>>>>> Best
>>>>>>>>>>>> Erick
>>>>>>>>>>>>
>>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood
>>>>>>>>>>>> <vsood2@gmail.com>
>>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>> No. I haven't but I will. even though I would like to
>>>>>>>>>>>>> make my
>>>>>>>>>>>>> own
>>>>>>>>>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Thanks for replying.
>>>>>>>>>>>>> Varun
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
>>>>>>>>>>>>> <markrmiller@gmail.com>
>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>> Have you seen the work that Mark Harwood has done  
>>>>>>>>>>>>>> making a
>>>>>>>>>>>>>> GWT
>>>>>>>>>>>>>> version
>>>>>>>>>>>>>> of Luke? I think its in the latest release.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> varun sood wrote:
>>>>>>>>>>>>>>> Hi,
>>>>>>>>>>>>>>>   I am trying to delete a document without using the  
>>>>>>>>>>>>>>> hits
>>>>>>>>>>>>>>> object.
>>>>>>>>>>>>>>> What is the unique field in the index that I can use to
>>>>>>>>>>>>>>> delete the
>>>>>>>>>>>>>> document?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> I am trying to make a web interface where index can be
>>>>>>>>>>>>>>> modified,
>>>>>>>>>>>>> smaller
>>>>>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> to use deleteDocument(int docNum)
>>>>>>>>>>>>>>> I need docNum how can I get this? or does it have to  
>>>>>>>>>>>>>>> come
>>>>>>>>>>>>>>> only vis
>>>>>>>>>>>>> Hits?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Thanks,
>>>>>>>>>>>>>>> Varun
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> --------------------------------------------------------- 
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> --
>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-
>>>>>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ------------------------------------------------------------- 
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> --
>>>>>>>> --
>>>>>>>> --
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 11:49:00 2008
Return-Path: <java-user-return-33176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82924 invoked from network); 17 Mar 2008 11:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 11:49:00 -0000
Received: (qmail 13996 invoked by uid 500); 17 Mar 2008 11:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13958 invoked by uid 500); 17 Mar 2008 11:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13946 invoked by uid 99); 17 Mar 2008 11:48:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 04:48:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 11:48:13 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4693948fga.27
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 04:48:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8TMpzLdavnM42N8HyIe755RXvG4ZS6hpB65x8ml1PUk=;
        b=pcGWWOjm3p3mg9bg/FJhfb//4NzfDZHt+1RSwQPB0UTpba82nejFjsYkVMhr/3/Z7WHLMBmb8RRXqEi5FcYOZ909f47mJAQPjhVybibV338+Cfj98tkShy7qq8Mg4WPYyw29Mwm5g0mz7sP+S605XZD0LM1fbS0idZVPSD/GshY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tA4OpBNraps6rq+7y+F7brlzCbYtSsuL2IpMg40JZwOE3UMxkXzv2+yOT1A2SC59C/nYlgAhlmG8NkGUZ13xyq/E0e4+zZDkxXcMp0dpJysH1JrjTvaGsf2GP2tBzzJtnTF/GzI1eM9cQsLy3Ly90gdfDJtwyaOU8ytdGYumisI=
Received: by 10.82.177.3 with SMTP id z3mr36340606bue.23.1205754501798;
        Mon, 17 Mar 2008 04:48:21 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Mon, 17 Mar 2008 04:48:21 -0700 (PDT)
Message-ID: <1bcb7c7f0803170448v6f040e69r6f325585ac7d76f7@mail.gmail.com>
Date: Mon, 17 Mar 2008 13:48:21 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <CC1B1E94-74A6-4552-8660-DA52738A3111@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10577_14885181.1205754501756"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com>
	 <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com>
	 <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com>
	 <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com>
	 <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com>
	 <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com>
	 <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com>
	 <1bcb7c7f0803170331u6fa8817buaecb8d83f64799f5@mail.gmail.com>
	 <CC1B1E94-74A6-4552-8660-DA52738A3111@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10577_14885181.1205754501756
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Mike,

Is there any hope for making a lucene index that is fully transparent, i.e.
the indexreader seeing all the changes without reopening?

Best.

On Mon, Mar 17, 2008 at 12:35 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Oh, sorry, no you still must reopen the IndexReader.  IndexReader
> still searches only a point in time.
>
> Mike
>
> Cam Bazz wrote:
>
> > yes, I meant the same index.
> >
> > I thought with the new changes - the index reader would see the
> > changes
> > without re-opening.
> > It would be real real cool to have that.
> >
> >
> > Best.
> >
> > -C.B.
> >
> > On Mon, Mar 17, 2008 at 12:28 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >>
> >> I'm not sure what you mean by "same thread".  Maybe you meant "same
> >> index"?
> >>
> >> Yes, if the IndexReader reopens.
> >>
> >> IndexWriter.commit() makes the changes visible to readers, and makes
> >> the changes durable to os/computer crash or power outage.
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Another and last question;
> >>>
> >>> when the user commits, will an indexreader that is reading the same
> >>> thread
> >>> see the changes made or not?
> >>>
> >>> I thought something was said about this, if my memory serves me
> >>> correct.
> >>>
> >>> Best.
> >>>
> >>> On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>>
> >>>>
> >>>> It's a hard drive issue.  When you call fsync, the OS asks the hard
> >>>> drive to sync.
> >>>>
> >>>> Mike
> >>>>
> >>>> Cam Bazz wrote:
> >>>>
> >>>>> Hello,
> >>>>>
> >>>>> I understand the issue. But I have not understood - is this
> >>>>> hardware related
> >>>>> issue - i.e a harddisk? or operating system?
> >>>>>
> >>>>> If I am using linux would the OS lie about fsyncing? could I do
> >>>>> anything in
> >>>>> the kernel to stop it from lying? or is this just a harddrive
> >>>>> related
> >>>>> issue...
> >>>>>
> >>>>> Best.
> >>>>>
> >>>>> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
> >>>>> lucene@mikemccandless.com> wrote:
> >>>>>
> >>>>>>
> >>>>>> When you write to a file, modern OSs by default just buffer those
> >>>>>> writes in memory rather than actually writing them immediately to
> >>>>>> disk.  Modern hard drives do the same (so, after the OS
> >>>>>> flushes to
> >>>>>> the hard drive, the hard drive actually just buffers the writes,
> >>>>>> too).  Then, when it's a good time, these buffered writes are
> >>>>>> spooled
> >>>>>> to disk in the background.  They do this to get better
> >>>>>> performance on
> >>>>>> write.
> >>>>>>
> >>>>>> Then, the fsync() call, which is an OS level call, requests that
> >>>>>> all
> >>>>>> buffered bytes be flushed to the real underlying storage ("stable
> >>>>>> storage").  It is not supposed to return until all written bytes
> >>>>>> are
> >>>>>> on stable storage.  Lucene relies on this by fsync'ing all
> >>>>>> referenced
> >>>>>> files in the index, before deleting the files referenced by
> >>>>>> previous
> >>>>>> commits.  So, as of 2.4, this ensures the index will remain
> >>>>>> consistent even if the OS or computer crashes, or power is cut.
> >>>>>>
> >>>>>> Unfortunately, there are apparently some devices which even when
> >>>>>> fsync
> >>>>>> () is called, return immediately even though the bytes are not
> >>>>>> actually written to stable storage.  If you have such a device
> >>>>>> that
> >>>>>> lies then Lucene 2.4 won't be able to guarantee index
> >>>>>> consistency on
> >>>>>> crash/power outage.
> >>>>>>
> >>>>>> Mike
> >>>>>>
> >>>>>> Cam Bazz wrote:
> >>>>>>
> >>>>>>> Hello,
> >>>>>>>
> >>>>>>> What do you mean by IO system lying on fsync?
> >>>>>>>
> >>>>>>> Best.
> >>>>>>>
> >>>>>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
> >>>>>>> lucene@mikemccandless.com> wrote:
> >>>>>>>
> >>>>>>>>
> >>>>>>>> Yes that's already been committed to trunk as well.
> >>>>>>>>
> >>>>>>>> IndexWriter now has a commit() method which syncs all
> >>>>>>>> referenced
> >>>>>>>> files in the index to stable storage (assuming your IO system
> >>>>>>>> doesn't
> >>>>>>>> "lie" on fsync).
> >>>>>>>>
> >>>>>>>> Mike
> >>>>>>>>
> >>>>>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
> >>>>>>>>
> >>>>>>>>> Nice. Thanks.
> >>>>>>>>>
> >>>>>>>>> will the 2.4 have commit improvements that we previously
> >>>>>>>>> talked
> >>>>>>>>> about?
> >>>>>>>>>
> >>>>>>>>> best regards.
> >>>>>>>>>
> >>>>>>>>> -C.B.
> >>>>>>>>>
> >>>>>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
> >>>>>>>>> lucene@mikemccandless.com> wrote:
> >>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> The trunk version of Lucene (eventually 2.4) now has
> >>>>>>>>>> deletion by
> >>>>>>>>>> query, in IndexWriter.
> >>>>>>>>>>
> >>>>>>>>>> Mike
> >>>>>>>>>>
> >>>>>>>>>> Cam Bazz wrote:
> >>>>>>>>>>
> >>>>>>>>>>> Hello Erick,
> >>>>>>>>>>>
> >>>>>>>>>>> Has anyone found a way for deleting a document with a
> >>>>>>>>>>> query? I
> >>>>>>>>>>> understand it
> >>>>>>>>>>> can be deleted via terms, but I need to delete a document
> >>>>>>>>>>> with two
> >>>>>>>>>>> terms,
> >>>>>>>>>>> that is the only way I can identify my document is by
> >>>>>>>>>>> looking at
> >>>>>>>>>>> two terms
> >>>>>>>>>>> not one.
> >>>>>>>>>>>
> >>>>>>>>>>> best.
> >>>>>>>>>>>
> >>>>>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
> >>>>>>>>>>> <erickerickson@gmail.com>
> >>>>>>>>>>> wrote:
> >>>>>>>>>>>
> >>>>>>>>>>>> Doc IDs are assigned at index time and can change over time
> >>>>>>>>>>>> That
> >>>>>>>>>>>> is,
> >>>>>>>>>>>> deleting
> >>>>>>>>>>>> a document and optimizing (and other operations) can and
> >>>>>>>>>>>> will
> >>>>>>>>>>>> change
> >>>>>>>>>>>> document IDs. So, yes, you have to do a search (either
> >>>>>>>>>>>> use a
> >>>>>>>>>>>> hits
> >>>>>>>>>>>> object
> >>>>>>>>>>>> or one of the HitCollectors) in order to delete by doc ID.
> >>>>>>>>>>>>
> >>>>>>>>>>>> You can also delete by terms, see the API.
> >>>>>>>>>>>>
> >>>>>>>>>>>> There are other options, but you haven't explianed what
> >>>>>>>>>>>> you're
> >>>>>>>>>>>> trying to accomplish enough to offer any more suggestions.
> >>>>>>>>>>>>
> >>>>>>>>>>>> Best
> >>>>>>>>>>>> Erick
> >>>>>>>>>>>>
> >>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood
> >>>>>>>>>>>> <vsood2@gmail.com>
> >>>>>>>>>>>> wrote:
> >>>>>>>>>>>>
> >>>>>>>>>>>>> No. I haven't but I will. even though I would like to
> >>>>>>>>>>>>> make my
> >>>>>>>>>>>>> own
> >>>>>>>>>>>>> implementation. So any idea of how to get the "doc num"?
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> Thanks for replying.
> >>>>>>>>>>>>> Varun
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
> >>>>>>>>>>>>> <markrmiller@gmail.com>
> >>>>>>>>>>>>> wrote:
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>> Have you seen the work that Mark Harwood has done
> >>>>>>>>>>>>>> making a
> >>>>>>>>>>>>>> GWT
> >>>>>>>>>>>>>> version
> >>>>>>>>>>>>>> of Luke? I think its in the latest release.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>> varun sood wrote:
> >>>>>>>>>>>>>>> Hi,
> >>>>>>>>>>>>>>>   I am trying to delete a document without using the
> >>>>>>>>>>>>>>> hits
> >>>>>>>>>>>>>>> object.
> >>>>>>>>>>>>>>> What is the unique field in the index that I can use to
> >>>>>>>>>>>>>>> delete the
> >>>>>>>>>>>>>> document?
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>> I am trying to make a web interface where index can be
> >>>>>>>>>>>>>>> modified,
> >>>>>>>>>>>>> smaller
> >>>>>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>> to use deleteDocument(int docNum)
> >>>>>>>>>>>>>>> I need docNum how can I get this? or does it have to
> >>>>>>>>>>>>>>> come
> >>>>>>>>>>>>>>> only vis
> >>>>>>>>>>>>> Hits?
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>> Thanks,
> >>>>>>>>>>>>>>> Varun
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>> ---------------------------------------------------------
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> --
> >>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-
> >>>>>>>>>>>>>> unsubscribe@lucene.apache.org
> >>>>>>>>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>>>>>>>> help@lucene.apache.org
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> -------------------------------------------------------------
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> --
> >>>>>>>>>> To unsubscribe, e-mail: java-user-
> >>>>>>>>>> unsubscribe@lucene.apache.org
> >>>>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>>>> help@lucene.apache.org
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>> ---------------------------------------------------------------
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> --
> >>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>>> For additional commands, e-mail: java-user-
> >>>>>>>> help@lucene.apache.org
> >>>>>>>>
> >>>>>>>>
> >>>>>>
> >>>>>>
> >>>>>> -----------------------------------------------------------------
> >>>>>> --
> >>>>>> --
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10577_14885181.1205754501756--

From java-user-return-33177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 12:10:14 2008
Return-Path: <java-user-return-33177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90216 invoked from network); 17 Mar 2008 12:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 12:10:13 -0000
Received: (qmail 34516 invoked by uid 500); 17 Mar 2008 12:10:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34281 invoked by uid 500); 17 Mar 2008 12:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34268 invoked by uid 99); 17 Mar 2008 12:10:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 05:10:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 12:09:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id BCFC45B535
	for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 05:09:30 -0700 (PDT)
Message-Id: <A7ADE2D2-89A5-4A4D-A2B0-8B4599A6D3D0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16064453.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: sorting a doc field takes more time
Date: Mon, 17 Mar 2008 08:09:29 -0400
References: <16064453.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Sorting is dependent on the values in the fields.  What is actually in  
the fields?  But, yes, in general, sorting is going to be slower than  
just raw search.  It's extra operations.  It also looks like you are  
using the AUTO SortField, which means you are relying on Lucene to  
figure out how to sort.  If you know what type field is (numeric,  
etc.) then you might try setting the type using the alternate  
SortField constructor.

On Mar 15, 2008, at 2:24 AM, sandyg wrote:

>
> HI,
> thnx for reply
> field ,documents ,sort and sort field all are lucene classes
> and after getting the results at the time of displaying am using  
> sort class
> to sort the results based on particular field
> the code for sorting
>              Query query = parser.parse(queryString);
>             Sort   sort = new Sort(new SortField(field));
>                Hits  hits = searcher.search(query,sort);
>
>
>
> Grant Ingersoll-6 wrote:
>>
>> What's in "field"?  What are your docs?  More info is needed to  
>> help...
>>
>> -Grant
>> On Mar 13, 2008, at 6:50 AM, sandyg wrote:
>>
>>>
>>> Hi,
>>>
>>> Thnxs for spending  time for the problem.
>>>
>>> When sorting the results of lucene search it takes more time and not
>>> looks
>>> not that much usefull can any one help
>>> Below is my code..
>>>
>>>               sort = new Sort(new SortField(field));
>>>               hits = searcher.search(query,sort);
>>>
>>> Once again thnx
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16024551.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucenebootcamp.com
>> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/sorting-a-doc-field-takes-more-time-tp16024551p16064453.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 12:12:05 2008
Return-Path: <java-user-return-33178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90577 invoked from network); 17 Mar 2008 12:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 12:12:05 -0000
Received: (qmail 37697 invoked by uid 500); 17 Mar 2008 12:11:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37654 invoked by uid 500); 17 Mar 2008 12:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37643 invoked by uid 99); 17 Mar 2008 12:11:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 05:11:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 12:11:16 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3760984wra.14
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 05:08:36 -0700 (PDT)
Received: by 10.141.62.15 with SMTP id p15mr32563rvk.159.1205755714305;
        Mon, 17 Mar 2008 05:08:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm28512805wrl.31.2008.03.17.05.08.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 05:08:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0803170448v6f040e69r6f325585ac7d76f7@mail.gmail.com>
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com> <594DD2DE-B63A-410F-BB76-771A1F1BD909@mikemccandless.com> <1bcb7c7f0803170150r7dcdd149kb80fe4436622e7d7@mail.gmail.com> <53F056C0-74F5-4DB4-A81D-0204365AAC4C@mikemccandless.com> <1bcb7c7f0803170216v453fe2dfxb0dbd73a0ebe9b64@mail.gmail.com> <57C95CB4-0AC6-4B90-9706-48B6F56CFD94@mikemccandless.com> <1bcb7c7f0803170318q51d490e8tb6f2233d97f6d208@mail.gmail.com> <9A4EDD8C-E861-468F-BBB5-8BF90903D785@mikemccandless.com> <1bcb7c7f0803170331u6fa8817buaecb8d83f64799f5@mail.gmail.com> <CC1B1E94-74A6-4552-8660-DA52738A3111@mikemccandless.com> <1bcb7c7f0803170448v6f040e69r6f325585ac7d76f7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8DE86125-1DC1-4BD1-AF6C-233CEA7F4069@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexReader deleteDocument
Date: Mon, 17 Mar 2008 08:08:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I think that is quite a ways away.

This possibility was briefly mentioned on the java-dev list recently,  
to create an IndexReader that can access the in-memory buffered adds/ 
deletes in IndexWriter, but it would be a very large change for  
Lucene.  Various caches assume an index will not change, once opened.

That said, there is work being done to overhaul how FieldCache and  
norms work so as to greatly reduce the cost of 1) initially  
populating the FieldCache, and 2) updating only the portions of the  
FieldCache that were "dirtied" by a re-open.  So I think near term,  
making reopen faster is the priority and really is a necessary first  
step towards someday being able to have a "live" reader.

Mike

Cam Bazz wrote:

> Hello Mike,
>
> Is there any hope for making a lucene index that is fully  
> transparent, i.e.
> the indexreader seeing all the changes without reopening?
>
> Best.
>
> On Mon, Mar 17, 2008 at 12:35 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Oh, sorry, no you still must reopen the IndexReader.  IndexReader
>> still searches only a point in time.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> yes, I meant the same index.
>>>
>>> I thought with the new changes - the index reader would see the
>>> changes
>>> without re-opening.
>>> It would be real real cool to have that.
>>>
>>>
>>> Best.
>>>
>>> -C.B.
>>>
>>> On Mon, Mar 17, 2008 at 12:28 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> I'm not sure what you mean by "same thread".  Maybe you meant "same
>>>> index"?
>>>>
>>>> Yes, if the IndexReader reopens.
>>>>
>>>> IndexWriter.commit() makes the changes visible to readers, and  
>>>> makes
>>>> the changes durable to os/computer crash or power outage.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Another and last question;
>>>>>
>>>>> when the user commits, will an indexreader that is reading the  
>>>>> same
>>>>> thread
>>>>> see the changes made or not?
>>>>>
>>>>> I thought something was said about this, if my memory serves me
>>>>> correct.
>>>>>
>>>>> Best.
>>>>>
>>>>> On Mon, Mar 17, 2008 at 11:53 AM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>>
>>>>>>
>>>>>> It's a hard drive issue.  When you call fsync, the OS asks the  
>>>>>> hard
>>>>>> drive to sync.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Cam Bazz wrote:
>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> I understand the issue. But I have not understood - is this
>>>>>>> hardware related
>>>>>>> issue - i.e a harddisk? or operating system?
>>>>>>>
>>>>>>> If I am using linux would the OS lie about fsyncing? could I do
>>>>>>> anything in
>>>>>>> the kernel to stop it from lying? or is this just a harddrive
>>>>>>> related
>>>>>>> issue...
>>>>>>>
>>>>>>> Best.
>>>>>>>
>>>>>>> On Mon, Mar 17, 2008 at 11:12 AM, Michael McCandless <
>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>
>>>>>>>>
>>>>>>>> When you write to a file, modern OSs by default just buffer  
>>>>>>>> those
>>>>>>>> writes in memory rather than actually writing them  
>>>>>>>> immediately to
>>>>>>>> disk.  Modern hard drives do the same (so, after the OS
>>>>>>>> flushes to
>>>>>>>> the hard drive, the hard drive actually just buffers the  
>>>>>>>> writes,
>>>>>>>> too).  Then, when it's a good time, these buffered writes are
>>>>>>>> spooled
>>>>>>>> to disk in the background.  They do this to get better
>>>>>>>> performance on
>>>>>>>> write.
>>>>>>>>
>>>>>>>> Then, the fsync() call, which is an OS level call, requests  
>>>>>>>> that
>>>>>>>> all
>>>>>>>> buffered bytes be flushed to the real underlying storage  
>>>>>>>> ("stable
>>>>>>>> storage").  It is not supposed to return until all written  
>>>>>>>> bytes
>>>>>>>> are
>>>>>>>> on stable storage.  Lucene relies on this by fsync'ing all
>>>>>>>> referenced
>>>>>>>> files in the index, before deleting the files referenced by
>>>>>>>> previous
>>>>>>>> commits.  So, as of 2.4, this ensures the index will remain
>>>>>>>> consistent even if the OS or computer crashes, or power is cut.
>>>>>>>>
>>>>>>>> Unfortunately, there are apparently some devices which even  
>>>>>>>> when
>>>>>>>> fsync
>>>>>>>> () is called, return immediately even though the bytes are not
>>>>>>>> actually written to stable storage.  If you have such a device
>>>>>>>> that
>>>>>>>> lies then Lucene 2.4 won't be able to guarantee index
>>>>>>>> consistency on
>>>>>>>> crash/power outage.
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> Cam Bazz wrote:
>>>>>>>>
>>>>>>>>> Hello,
>>>>>>>>>
>>>>>>>>> What do you mean by IO system lying on fsync?
>>>>>>>>>
>>>>>>>>> Best.
>>>>>>>>>
>>>>>>>>> On Mon, Mar 17, 2008 at 10:40 AM, Michael McCandless <
>>>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Yes that's already been committed to trunk as well.
>>>>>>>>>>
>>>>>>>>>> IndexWriter now has a commit() method which syncs all
>>>>>>>>>> referenced
>>>>>>>>>> files in the index to stable storage (assuming your IO system
>>>>>>>>>> doesn't
>>>>>>>>>> "lie" on fsync).
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Mar 17, 2008, at 4:33 AM, Cam Bazz wrote:
>>>>>>>>>>
>>>>>>>>>>> Nice. Thanks.
>>>>>>>>>>>
>>>>>>>>>>> will the 2.4 have commit improvements that we previously
>>>>>>>>>>> talked
>>>>>>>>>>> about?
>>>>>>>>>>>
>>>>>>>>>>> best regards.
>>>>>>>>>>>
>>>>>>>>>>> -C.B.
>>>>>>>>>>>
>>>>>>>>>>> On Mon, Mar 17, 2008 at 10:31 AM, Michael McCandless <
>>>>>>>>>>> lucene@mikemccandless.com> wrote:
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> The trunk version of Lucene (eventually 2.4) now has
>>>>>>>>>>>> deletion by
>>>>>>>>>>>> query, in IndexWriter.
>>>>>>>>>>>>
>>>>>>>>>>>> Mike
>>>>>>>>>>>>
>>>>>>>>>>>> Cam Bazz wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>> Hello Erick,
>>>>>>>>>>>>>
>>>>>>>>>>>>> Has anyone found a way for deleting a document with a
>>>>>>>>>>>>> query? I
>>>>>>>>>>>>> understand it
>>>>>>>>>>>>> can be deleted via terms, but I need to delete a document
>>>>>>>>>>>>> with two
>>>>>>>>>>>>> terms,
>>>>>>>>>>>>> that is the only way I can identify my document is by
>>>>>>>>>>>>> looking at
>>>>>>>>>>>>> two terms
>>>>>>>>>>>>> not one.
>>>>>>>>>>>>>
>>>>>>>>>>>>> best.
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Fri, Mar 14, 2008 at 4:58 PM, Erick Erickson
>>>>>>>>>>>>> <erickerickson@gmail.com>
>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>> Doc IDs are assigned at index time and can change over  
>>>>>>>>>>>>>> time
>>>>>>>>>>>>>> That
>>>>>>>>>>>>>> is,
>>>>>>>>>>>>>> deleting
>>>>>>>>>>>>>> a document and optimizing (and other operations) can and
>>>>>>>>>>>>>> will
>>>>>>>>>>>>>> change
>>>>>>>>>>>>>> document IDs. So, yes, you have to do a search (either
>>>>>>>>>>>>>> use a
>>>>>>>>>>>>>> hits
>>>>>>>>>>>>>> object
>>>>>>>>>>>>>> or one of the HitCollectors) in order to delete by doc  
>>>>>>>>>>>>>> ID.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> You can also delete by terms, see the API.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> There are other options, but you haven't explianed what
>>>>>>>>>>>>>> you're
>>>>>>>>>>>>>> trying to accomplish enough to offer any more  
>>>>>>>>>>>>>> suggestions.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Best
>>>>>>>>>>>>>> Erick
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:44 PM, varun sood
>>>>>>>>>>>>>> <vsood2@gmail.com>
>>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> No. I haven't but I will. even though I would like to
>>>>>>>>>>>>>>> make my
>>>>>>>>>>>>>>> own
>>>>>>>>>>>>>>> implementation. So any idea of how to get the "doc num"?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Thanks for replying.
>>>>>>>>>>>>>>> Varun
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller
>>>>>>>>>>>>>>> <markrmiller@gmail.com>
>>>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> Have you seen the work that Mark Harwood has done
>>>>>>>>>>>>>>>> making a
>>>>>>>>>>>>>>>> GWT
>>>>>>>>>>>>>>>> version
>>>>>>>>>>>>>>>> of Luke? I think its in the latest release.
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> varun sood wrote:
>>>>>>>>>>>>>>>>> Hi,
>>>>>>>>>>>>>>>>>   I am trying to delete a document without using the
>>>>>>>>>>>>>>>>> hits
>>>>>>>>>>>>>>>>> object.
>>>>>>>>>>>>>>>>> What is the unique field in the index that I can  
>>>>>>>>>>>>>>>>> use to
>>>>>>>>>>>>>>>>> delete the
>>>>>>>>>>>>>>>> document?
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> I am trying to make a web interface where index can be
>>>>>>>>>>>>>>>>> modified,
>>>>>>>>>>>>>>> smaller
>>>>>>>>>>>>>>>>> subset of what Luke does but using JSPs and Servlet.
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> to use deleteDocument(int docNum)
>>>>>>>>>>>>>>>>> I need docNum how can I get this? or does it have to
>>>>>>>>>>>>>>>>> come
>>>>>>>>>>>>>>>>> only vis
>>>>>>>>>>>>>>> Hits?
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> Thanks,
>>>>>>>>>>>>>>>>> Varun
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> ------------------------------------------------------- 
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> --
>>>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-
>>>>>>>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ----------------------------------------------------------- 
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> --
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-
>>>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ------------------------------------------------------------- 
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> --
>>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-
>>>>>>>>>> help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> --
>>>>>>>> --
>>>>>>>> --
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 12:55:28 2008
Return-Path: <java-user-return-33179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15683 invoked from network); 17 Mar 2008 12:55:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 12:55:28 -0000
Received: (qmail 2907 invoked by uid 500); 17 Mar 2008 12:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2882 invoked by uid 500); 17 Mar 2008 12:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2871 invoked by uid 99); 17 Mar 2008 12:55:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 05:55:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luceneseme1@googlemail.com designates 216.239.58.187 as permitted sender)
Received: from [216.239.58.187] (HELO gv-out-0910.google.com) (216.239.58.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 12:54:40 +0000
Received: by gv-out-0910.google.com with SMTP id r4so1239053gve.23
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 05:54:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=8tgvErzT6fTLi4W2VFq/cJkcc5LgjTdSi9j5EY+4Zg8=;
        b=gfGWXZB3VUBnsqB7tswY8KQpu52U5zONY1N4mJUtpvllVxDJdrzHL7r9P7G/WtYaGI2De2r+KY9f4YekPccriH7YTvbAyrXxPsojHBuQEtTYNfL5+L1LO1oU9+MK3YoQCldiuhvcUmzljgFm1i6MduXSoo3uGIXkhop33cTcDt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=IEbVH4ZkSAriSjpeonhUvepYxGCy4yRv2j+mPGI1b/6bfqZudApZJnE6FnzVZjdbqKfcYBwAddJXOskpUxFhyXsix5cO5Yp9NCA2guhRuHBPUzyoD3b4GaMYYrEE5FsZPazx5x2rDjiVza5Qmh28evEMkVhNLVX4+8gfRNUhR8A=
Received: by 10.150.199.21 with SMTP id w21mr103772ybf.129.1205758486819;
        Mon, 17 Mar 2008 05:54:46 -0700 (PDT)
Received: by 10.150.204.7 with HTTP; Mon, 17 Mar 2008 05:54:46 -0700 (PDT)
Message-ID: <22f49afe0803170554k77e3dfe4sd5a3c0aacdd67467@mail.gmail.com>
Date: Mon, 17 Mar 2008 12:54:46 +0000
From: "lucene-seme1 s" <luceneseme1@googlemail.com>
To: java-user@lucene.apache.org
Subject: Indexing/Querying Annotations and Fields for a document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7538_25645956.1205758486802"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7538_25645956.1205758486802
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am a newbie here and still experimenting with Lucene. I have annotations
and features generated by GATE for many documents and would like to index
the original content of the documents in addition to the generated
annotations. The annotations are in the form of [<Person> John </Person>
loves fishing]. I would like to be able to search using the Person
attribute.

Any hint or suggestion is highly appreciated

regards,
JK

------=_Part_7538_25645956.1205758486802--

From java-user-return-33180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 14:00:29 2008
Return-Path: <java-user-return-33180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47550 invoked from network); 17 Mar 2008 14:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 14:00:28 -0000
Received: (qmail 8754 invoked by uid 500); 17 Mar 2008 14:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8724 invoked by uid 500); 17 Mar 2008 14:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8702 invoked by uid 99); 17 Mar 2008 14:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 07:00:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luceneseme1@googlemail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 13:59:34 +0000
Received: by ti-out-0910.google.com with SMTP id 28so1679244tif.11
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 06:59:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=rmWvmo2bdVii1FAFY15/7TyXMr8JDdXRFdvQ+klD7U8=;
        b=MnvM8/1BAlkFT8IG8EmqaRVnk2oP7CdmAz156dxLOByHGnAYM3NkZ1jp4PL2FKD0+DREbe/HYOISgE0zIZZj7ufjsKqtSYtVS6Bf3hBtHl25rdLgQto2HT5MJy9NHXWonCEg32nKyAaz9jxugnMPOFboxajQJgROdKI7AtmyHLA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=c58xQPhf6XLYKtDXn34gQA6mv5v/Ag2UyXmG9RnUu94OTdfrDZ4ahWLeGb2OdVewQgnVKdkNwofcrKlzBRfTOXNjmN8HpC92mDwaXbkRJRtMr4R1tNUZp1OdOtIFu6qwyIbG6e21KJFD9KANmRRVAU7wBjBZoXMGRw4f4RrrVtA=
Received: by 10.150.57.5 with SMTP id f5mr143990yba.140.1205762381392;
        Mon, 17 Mar 2008 06:59:41 -0700 (PDT)
Received: by 10.150.204.7 with HTTP; Mon, 17 Mar 2008 06:59:41 -0700 (PDT)
Message-ID: <22f49afe0803170659j3d801d25w6aba3862307ec745@mail.gmail.com>
Date: Mon, 17 Mar 2008 13:59:41 +0000
From: "lucene-seme1 s" <luceneseme1@googlemail.com>
To: java-user@lucene.apache.org
Subject: Indexing/Querying Annotations and Fields for a document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7912_8098884.1205762381378"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7912_8098884.1205762381378
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am a newbie here and still experimenting with Lucene. I have annotations
and features generated by GATE for many documents and would like to index
the original content of the documents in addition to the generated
annotations. The annotations are in the form of [<Person> John </Person>
loves fishing]. I would like to be able to search using the Person
attribute.

Any hint or suggestion is highly appreciated

regards,
JK

------=_Part_7912_8098884.1205762381378--

From java-user-return-33181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 15:45:42 2008
Return-Path: <java-user-return-33181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35722 invoked from network); 17 Mar 2008 15:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 15:45:42 -0000
Received: (qmail 27621 invoked by uid 500); 17 Mar 2008 15:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27597 invoked by uid 500); 17 Mar 2008 15:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27581 invoked by uid 99); 17 Mar 2008 15:45:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 08:45:33 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:44:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: word position operator?
Date: Mon, 17 Mar 2008 11:44:04 -0400
Message-ID: <9294E20AED46934EA459020706463F94A03E46@SUEXCL-02.ad.syr.edu>
In-Reply-To: <000c01c887c9$929a2150$8a01a8c0@GEMINI>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: word position operator?
Thread-Index: AciHyaqu/jVRLD/kQRCebTAEI7TNRgAe+rAQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Darren,

Check out SpanFirstQuery and SpanRegexQuery:

<http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/spans/S=
panFirstQuery.html>

<http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/regex/S=
panRegexQuery.html>

Steve

On 03/16/2008 at 8:55 PM, Darren Govoni wrote:
> Hi,
>   I want to do a query such as
>=20
> word: first*
>=20
> where I want 'first' to be the start of the string value
> contained in the word field and not somewhere inside it.
> What's the best way to do this?
>=20
> thanks for any tips,
> Darren
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 16:34:12 2008
Return-Path: <java-user-return-33182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59970 invoked from network); 17 Mar 2008 16:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 16:34:11 -0000
Received: (qmail 22832 invoked by uid 500); 17 Mar 2008 16:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22803 invoked by uid 500); 17 Mar 2008 16:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22792 invoked by uid 99); 17 Mar 2008 16:34:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 09:34:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 16:33:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id CE7D13BA11
	for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 09:33:28 -0700 (PDT)
Message-Id: <597C9435-1507-41E0-AA7F-FC9127237DC4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <22f49afe0803170554k77e3dfe4sd5a3c0aacdd67467@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Indexing/Querying Annotations and Fields for a document
Date: Mon, 17 Mar 2008 12:33:25 -0400
References: <22f49afe0803170554k77e3dfe4sd5a3c0aacdd67467@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I think there are a couple of ways you can approach this, although I  
have never used GATE.

If these annotations are marked in line in your content, then you can  
either preprocess the files to have them separately and index as you  
normally would, or you can use the relatively new TeeTokenFilter and  
SinkTokenizer to extract them as you go for use in other fields.  I  
have done this successfully for some apps that I have worked on and I  
think it works quite nice and beats preprocessing IMO.  Essentially,  
you set up a TeeTokenFilter that recognizes your Person and then set  
that token aside in the Sink.  Then, when you construct the Person  
field, you use the SinkTokenizer.

HTH,
Grant

On Mar 17, 2008, at 8:54 AM, lucene-seme1 s wrote:

> Hello,
>
> I am a newbie here and still experimenting with Lucene. I have  
> annotations
> and features generated by GATE for many documents and would like to  
> index
> the original content of the documents in addition to the generated
> annotations. The annotations are in the form of [<Person> John </ 
> Person>
> loves fishing]. I would like to be able to search using the Person
> attribute.
>
> Any hint or suggestion is highly appreciated
>
> regards,
> JK

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 19:51:42 2008
Return-Path: <java-user-return-33183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5197 invoked from network); 17 Mar 2008 19:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 19:51:42 -0000
Received: (qmail 63423 invoked by uid 500); 17 Mar 2008 19:51:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63393 invoked by uid 500); 17 Mar 2008 19:51:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63382 invoked by uid 99); 17 Mar 2008 19:51:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 12:51:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 19:50:55 +0000
Received: by wf-out-1314.google.com with SMTP id 28so5821762wff.20
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 12:51:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=l4jIfDfME+kgiWWOyAcp6pPy/JZGIoclc2vM3uKb+X8=;
        b=xoi+mUFBDJXqENRxU+0aVU4NyeJLVjYqZqKC5aKQIVfeFXfcZb+fbiIk+bx6a3pbrtC9ZiFg0OPTzSw17kSCABLAmFmElUoe31NbvhZ7/cRDZvjl8D6nZJD+XzijoJwvkonqznC7E/AocmMsx1J0VBRFjdpJGHKo9YfOLOQk3Zg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q5BYCVr7oiyuy4r9oWVKPzjHNUktbnwsJBC1CtpIWZhiiXHA64bKgraJYeS7dJb7D9UTs4m3HajZSJu//057B4XlvZB5gvnFKCQxNSuFdjHt/zqDG02LzWgwL/NBtHwC6MCJhccvnats4+th/ilhfimxB9dyclLZi03GwJQ+zHc=
Received: by 10.142.84.3 with SMTP id h3mr633784wfb.34.1205783466145;
        Mon, 17 Mar 2008 12:51:06 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Mon, 17 Mar 2008 12:51:05 -0700 (PDT)
Message-ID: <800d6e9c0803171251x6ddbd4f9ne6591c6f851cb115@mail.gmail.com>
Date: Mon, 17 Mar 2008 15:51:05 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13619_19870222.1205783466142"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13619_19870222.1205783466142
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,
 My idea/need is to create a simple web interface where I can manage my
index.
managing includes..
Adding new documents to index, editing the old ones, deleting, etc.. all
using a simple Web GUI so that person does not need to be a web developer to
manage the index. Besides there are other few things which I have to add to
my application, specific to my project. This all will be part of an Admin
Panel.

The discussions show that its currently not possible to get docNum by some
simple ways, infact I would have to use Hits to get my job done. Besides the
docID issue, i.e. if it changes the thing might not work as I expected..
Perhaps simple solution is just an old database style to have a unique ID
field (like a primary key) with some Auto-Incerement approach.. this way we
can query for that ID to get docID and will never go wrong. But
incorporating this new ID field.. I have to see how feasible it could be...


BTW.. where can I find the GWT version? I coudlnt' locate the reference on
Sandbox or via G!

Varun.
On Fri, Mar 14, 2008 at 10:58 AM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Doc IDs are assigned at index time and can change over time That is,
> deleting
> a document and optimizing (and other operations) can and will change
> document IDs. So, yes, you have to do a search (either use a hits object
> or one of the HitCollectors) in order to delete by doc ID.
>
> You can also delete by terms, see the API.
>
> There are other options, but you haven't explianed what you're
> trying to accomplish enough to offer any more suggestions.
>
> Best
> Erick
>
> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:
>
> > No. I haven't but I will. even though I would like to make my own
> > implementation. So any idea of how to get the "doc num"?
> >
> > Thanks for replying.
> > Varun
> >
> > On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
> > wrote:
> >
> > > Have you seen the work that Mark Harwood has done making a GWT version
> > > of Luke? I think its in the latest release.
> > >
> > > varun sood wrote:
> > > > Hi,
> > > >   I am trying to delete a document without using the hits object.
> > > > What is the unique field in the index that I can use to delete the
> > > document?
> > > >
> > > > I am trying to make a web interface where index can be modified,
> > smaller
> > > > subset of what Luke does but using JSPs and Servlet.
> > > >
> > > > to use deleteDocument(int docNum)
> > > > I need docNum how can I get this? or does it have to come only vis
> > Hits?
> > > >
> > > > Thanks,
> > > > Varun
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_13619_19870222.1205783466142--

From java-user-return-33184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 19:57:32 2008
Return-Path: <java-user-return-33184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6891 invoked from network); 17 Mar 2008 19:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 19:57:32 -0000
Received: (qmail 70457 invoked by uid 500); 17 Mar 2008 19:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70420 invoked by uid 500); 17 Mar 2008 19:57:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70409 invoked by uid 99); 17 Mar 2008 19:57:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 12:57:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 19:56:46 +0000
Received: by rn-out-0910.google.com with SMTP id a46so3217557rne.9
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 12:56:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oAt4NlR4o3Rrf9bVNhFdgpN0gSTp/u2a/ktIeSEvfhA=;
        b=boifORXb64370IE5H9zfdon9EjV1eMhYhO/FsECZ4kM+XQmL1VaxrdBHneEmUKAti72WCMzh1QF5oJ6RiOd/yPmZS7O84wpZys4d9GR3E/kRG7BJZ9IPnUwz4efYQHqo9Qo2fJ5WnduzVuGZydk6l5dB/JCpVY9Ten3eRXSSBxA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=veVns6uEPjNyIgSJxPGDOSNOgaqCvjvrRY8jB+x9Tk6uNJXFWQuo6y8dMQDC2pVoYI0FaOT5bqVIGdAfbWfF1cfm9y2IBsRAWB03M2PWsKKT9M05fN5zmDFlpXjxPhgMsGQSJVtwo/OW7wyYxz/pMTxtfq4qMNB9IkkzzHMiGwk=
Received: by 10.142.101.17 with SMTP id y17mr641212wfb.54.1205783814912;
        Mon, 17 Mar 2008 12:56:54 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Mon, 17 Mar 2008 12:56:54 -0700 (PDT)
Message-ID: <800d6e9c0803171256h1ec60f3i9e89c65d9e842d67@mail.gmail.com>
Date: Mon, 17 Mar 2008 15:56:54 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deleteDocument
In-Reply-To: <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13658_26783143.1205783814907"
References: <800d6e9c0803121359x97a8b18i78423eb3217323ed@mail.gmail.com>
	 <47D847FE.9060105@gmail.com>
	 <800d6e9c0803121444ob07cd7bv3b54ec00ee2bec66@mail.gmail.com>
	 <359a92830803140758m6da1ee5elad45bb6bd05f075f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13658_26783143.1205783814907
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,
 My idea/need is to create a simple web interface where I can manage my
index.
managing includes..
Adding new documents to index, editing the old ones, deleting, etc.. all
using a simple Web GUI so that person does not need to be a web developer to
manage the index. Besides there are other few things which I have to add to
my application, specific to my project. This all will be part of an Admin
Panel.

The discussions show that its currently not possible to get docNum by some
simple ways, infact I would have to use Hits to get my job done. Besides the
docID issue, i.e. if it changes the thing might not work as I expected..
Perhaps simple solution is just an old database style to have a unique ID
field (like a primary key) with some Auto-Incerement approach.. this way we
can query for that ID to get docID and will never go wrong. But
incorporating this new ID field.. I have to see how feasible it could be...


BTW.. where can I find the GWT version? I coudlnt' locate the reference on
Sandbox or via G!

Varun.

On Fri, Mar 14, 2008 at 10:58 AM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Doc IDs are assigned at index time and can change over time That is,
> deleting
> a document and optimizing (and other operations) can and will change
> document IDs. So, yes, you have to do a search (either use a hits object
> or one of the HitCollectors) in order to delete by doc ID.
>
> You can also delete by terms, see the API.
>
> There are other options, but you haven't explianed what you're
> trying to accomplish enough to offer any more suggestions.
>
> Best
> Erick
>
> On Wed, Mar 12, 2008 at 5:44 PM, varun sood <vsood2@gmail.com> wrote:
>
> > No. I haven't but I will. even though I would like to make my own
> > implementation. So any idea of how to get the "doc num"?
> >
> > Thanks for replying.
> > Varun
> >
> > On Wed, Mar 12, 2008 at 5:15 PM, Mark Miller <markrmiller@gmail.com>
> > wrote:
> >
> > > Have you seen the work that Mark Harwood has done making a GWT version
> > > of Luke? I think its in the latest release.
> > >
> > > varun sood wrote:
> > > > Hi,
> > > >   I am trying to delete a document without using the hits object.
> > > > What is the unique field in the index that I can use to delete the
> > > document?
> > > >
> > > > I am trying to make a web interface where index can be modified,
> > smaller
> > > > subset of what Luke does but using JSPs and Servlet.
> > > >
> > > > to use deleteDocument(int docNum)
> > > > I need docNum how can I get this? or does it have to come only vis
> > Hits?
> > > >
> > > > Thanks,
> > > > Varun
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_13658_26783143.1205783814907--

From java-user-return-33185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 21:06:11 2008
Return-Path: <java-user-return-33185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41561 invoked from network); 17 Mar 2008 21:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 21:06:11 -0000
Received: (qmail 75052 invoked by uid 500); 17 Mar 2008 21:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74456 invoked by uid 500); 17 Mar 2008 21:06:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74445 invoked by uid 99); 17 Mar 2008 21:06:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 14:06:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luceneseme1@googlemail.com designates 72.14.214.231 as permitted sender)
Received: from [72.14.214.231] (HELO hu-out-0506.google.com) (72.14.214.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 21:05:20 +0000
Received: by hu-out-0506.google.com with SMTP id 27so3753383hub.15
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 14:05:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=iJ7l/Of/W2q7E5H5GYqn1BahksyiUmAKaaFRgGPjNS8=;
        b=FyHIlEZh2paCq3hSETUEpMHmb9wpoalaPA5ebrmDqLZsAXzrmJLJepo6oTNubEhoNOcbaZbJfmqtvO4gV8r0ztXlZsFlaheOVBLMmJKeoKeE5qTPaqM9gJ1DAwVFaL+AiWpVOmM73ZvgDfL1fzpF4pa3dhSSd/ydAwuOkckUEZA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KhM7so+zw04hrQi307uJVEO3x5+OQvWiiE5uBLBS20xJ51cPURz/X98tPmP+ZJfRqmTOSWQ/WLY7AFGhG3uul7I4xQydN+v/iYA2IrqP+wcwnpneFHqjEvc+9Ydoph0R6JRnc8nYz4WsO1DX9s9XRdJxgp7brM5bWsqtD7BS7vU=
Received: by 10.151.42.13 with SMTP id u13mr411611ybj.107.1205787927238;
        Mon, 17 Mar 2008 14:05:27 -0700 (PDT)
Received: by 10.150.204.7 with HTTP; Mon, 17 Mar 2008 14:05:27 -0700 (PDT)
Message-ID: <22f49afe0803171405o5401ad19t22309e602711b6e6@mail.gmail.com>
Date: Mon, 17 Mar 2008 21:05:27 +0000
From: "lucene-seme1 s" <luceneseme1@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing/Querying Annotations and Fields for a document
In-Reply-To: <597C9435-1507-41E0-AA7F-FC9127237DC4@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10424_30035358.1205787927220"
References: <22f49afe0803170554k77e3dfe4sd5a3c0aacdd67467@mail.gmail.com>
	 <597C9435-1507-41E0-AA7F-FC9127237DC4@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10424_30035358.1205787927220
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I already have the document preprocessed and the annotations (i.e.
<Person>John</Person>) are already stored in an array with features attached
to some annotations (such as the root and lemma of the word). Can you please
elaborate some more on how to "index them as normally would" ?

Regards,
JK


On Mon, Mar 17, 2008 at 4:33 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> I think there are a couple of ways you can approach this, although I
> have never used GATE.
>
> If these annotations are marked in line in your content, then you can
> either preprocess the files to have them separately and index as you
> normally would, or you can use the relatively new TeeTokenFilter and
> SinkTokenizer to extract them as you go for use in other fields.  I
> have done this successfully for some apps that I have worked on and I
> think it works quite nice and beats preprocessing IMO.  Essentially,
> you set up a TeeTokenFilter that recognizes your Person and then set
> that token aside in the Sink.  Then, when you construct the Person
> field, you use the SinkTokenizer.
>
> HTH,
> Grant
>
> On Mar 17, 2008, at 8:54 AM, lucene-seme1 s wrote:
>
> > Hello,
> >
> > I am a newbie here and still experimenting with Lucene. I have
> > annotations
> > and features generated by GATE for many documents and would like to
> > index
> > the original content of the documents in addition to the generated
> > annotations. The annotations are in the form of [<Person> John </
> > Person>
> > loves fishing]. I would like to be able to search using the Person
> > attribute.
> >
> > Any hint or suggestion is highly appreciated
> >
> > regards,
> > JK
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10424_30035358.1205787927220--

From java-user-return-33186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 21:58:05 2008
Return-Path: <java-user-return-33186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74681 invoked from network); 17 Mar 2008 21:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 21:58:05 -0000
Received: (qmail 46452 invoked by uid 500); 17 Mar 2008 21:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46407 invoked by uid 500); 17 Mar 2008 21:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46396 invoked by uid 99); 17 Mar 2008 21:57:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 14:57:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 21:57:19 +0000
Received: from unknown (HELO ohiocas01.internal.gxs.com) ([10.160.68.73])
  by bro01smtpgxs.ohctr.gxs.com with ESMTP; 17 Mar 2008 17:57:29 -0400
Received: from AMERICASMAIL01.internal.gxs.com ([10.97.69.45]) by
 ohiocas01.internal.gxs.com ([10.160.68.73]) with mapi; Mon, 17 Mar 2008
 17:57:29 -0400
From: <Richard.Bolen@gxs.com>
To: <java-user@lucene.apache.org>
Date: Mon, 17 Mar 2008 17:57:29 -0400
Subject: Huge number of Term objects in memory gives OutOfMemory error
Thread-Topic: Huge number of Term objects in memory gives OutOfMemory error
Thread-Index: AciIeeTPMLVIlOfjTGKdLgl2VMwq6g==
Message-ID: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F023B4AFE64FC7419B5F2B6341BEC716281D6127FBAMERICASMAIL0_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F023B4AFE64FC7419B5F2B6341BEC716281D6127FBAMERICASMAIL0_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm running Lucene 2.3.1 with Java 1.5.0_14 on 64 bit linux.  We have fairl=
y large collections (~1gig collection files, ~1,000,000 documents).  When I=
 try to load test our application with 50 users, all doing simple searches =
via a web interface, we quickly get an OutOfMemory exception.  When I do a =
jmap dump of the heap, this is what I see:

Size    Count   Class description
-------------------------------------------------------
195818576       4263822 char[]
190889608       13259   byte[]
172316640       4307916 java.lang.String
164813120       4120328 org.apache.lucene.index.TermInfo
131823104       4119472 org.apache.lucene.index.Term
37729184        604     org.apache.lucene.index.TermInfo[]
37729184        604     org.apache.lucene.index.Term[]

So 4 of the top 7 memory consumers are Term related.  We have 2 gig of RAM =
available on the system but we get OOM errors no matter the java heap setti=
ngs.  Has anyone seen this issue and know how to solve it?

We do use separate MultiSearcher instances for each search.  (We actually h=
ave 2 collections that we search via a MultiSearcher.) We tried using a sin=
gleton searcher instance but our collections are constantly being updated a=
nd the singleton searcher only gives you results since the searcher was ope=
ned.  Creating new searcher objects at search time gives you up to the minu=
te search results.

I've seen some postings referring to an Index Divisor setting which could r=
educe the Terms in memory, but I have not seen how to set this value for Lu=
cene.

Any help would be greatly appreciated.

Rich

--_000_F023B4AFE64FC7419B5F2B6341BEC716281D6127FBAMERICASMAIL0_--

From java-user-return-33187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:05:28 2008
Return-Path: <java-user-return-33187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77522 invoked from network); 17 Mar 2008 22:05:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:05:28 -0000
Received: (qmail 55017 invoked by uid 500); 17 Mar 2008 22:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54530 invoked by uid 500); 17 Mar 2008 22:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54519 invoked by uid 99); 17 Mar 2008 22:05:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:05:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:04:30 +0000
Received: (qmail 3109 invoked by uid 511); 17 Mar 2008 15:04:49 -0700
Received: from 41.243.212.53 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.212.53):SA:0(-2.3/5.0):. 
 Processed in 1.353007 secs); 17 Mar 2008 22:04:49 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.212.53):SA:0(-2.3/5.0):. Processed in 1.353007 secs Process 3099)
Received: from dsl-243-212-53.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.212.53)
  by stimulussoft.com with SMTP; 17 Mar 2008 15:04:48 -0700
Message-ID: <47DEEBC4.7040500@stimulussoft.com>
Date: Tue, 18 Mar 2008 00:08:04 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 2.3.1 Index Corruption?
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
In-Reply-To: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0


Hi There

I am getting the following error while searching a given index:

java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such file or 
directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(Unknown Source)
        at 
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at 
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at 
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
        at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:308)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
        at 
org.apache.lucene.index.MultiSegmentReader.<init>(MultiSegmentReader.java:55)
        at 
org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:75)
        at 
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636)
        at 
org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
        at 
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:48)

My software used to work perfectly under earlier versions of Lucene. 
Since I upgraded to 2.3.1, this problem has arisen.

I seriously worried my customer's indexes will be corrupted. Lucene 
expects to find a file that does not exist.

Any ideas on what might be happening and how to rectify this?

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:08:39 2008
Return-Path: <java-user-return-33188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79216 invoked from network); 17 Mar 2008 22:08:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:08:39 -0000
Received: (qmail 60160 invoked by uid 500); 17 Mar 2008 22:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60134 invoked by uid 500); 17 Mar 2008 22:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60123 invoked by uid 99); 17 Mar 2008 22:08:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:08:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:07:51 +0000
Received: from [192.168.5.130] (unknown [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 6AC0692CA99
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 09:07:57 +1100 (EST)
Message-Id: <9E5EC23B-678F-4985-BA7C-45D2EB247399@aconex.com>
From: Paul Smith <psmith@aconex.com>
To: java-user@lucene.apache.org
In-Reply-To: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-7--148789349
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Huge number of Term objects in memory gives OutOfMemory error
Date: Tue, 18 Mar 2008 09:07:57 +1100
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-7--148789349
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

I'll bet the byte[] are the Norm data per field.  If you have a lot of  
fields and do not need the normalization data for every field, I'd  
suggest turning that option off for fields you don't need the  
normalization for scoring.  The calculation I understand is:

1 byte x (# fields with normalization turned on) x (# documents within  
the index)

adds up pretty quickly!

The char[] & String's will be your FieldCache's, probably used for  
sorting.  Do you do any sorting other than by relevance?

cheers,

Paul

On 18/03/2008, at 8:57 AM, <Richard.Bolen@gxs.com> wrote:

> I'm running Lucene 2.3.1 with Java 1.5.0_14 on 64 bit linux.  We  
> have fairly large collections (~1gig collection files, ~1,000,000  
> documents).  When I try to load test our application with 50 users,  
> all doing simple searches via a web interface, we quickly get an  
> OutOfMemory exception.  When I do a jmap dump of the heap, this is  
> what I see:
>
> Size    Count   Class description
> -------------------------------------------------------
> 195818576       4263822 char[]
> 190889608       13259   byte[]
> 172316640       4307916 java.lang.String
> 164813120       4120328 org.apache.lucene.index.TermInfo
> 131823104       4119472 org.apache.lucene.index.Term
> 37729184        604     org.apache.lucene.index.TermInfo[]
> 37729184        604     org.apache.lucene.index.Term[]
>
> So 4 of the top 7 memory consumers are Term related.  We have 2 gig  
> of RAM available on the system but we get OOM errors no matter the  
> java heap settings.  Has anyone seen this issue and know how to  
> solve it?
>
> We do use separate MultiSearcher instances for each search.  (We  
> actually have 2 collections that we search via a MultiSearcher.) We  
> tried using a singleton searcher instance but our collections are  
> constantly being updated and the singleton searcher only gives you  
> results since the searcher was opened.  Creating new searcher  
> objects at search time gives you up to the minute search results.
>
> I've seen some postings referring to an Index Divisor setting which  
> could reduce the Terms in memory, but I have not seen how to set  
> this value for Lucene.
>
> Any help would be greatly appreciated.
>
> Rich

Paul Smith
Core Engineering Manager

Aconex
The easy way to save time and money on your project

696 Bourke Street, Melbourne,
VIC 3000, Australia
Tel: +61 3 9240 0200  Fax: +61 3 9240 0299
Email: psmith@aconex.com  www.aconex.com

This email and any attachments are intended solely for the addressee.  
The contents may be privileged, confidential and/or subject to  
copyright or other applicable law. No confidentiality or privilege is  
lost by an erroneous transmission. If you have received this e-mail in  
error, please let us know by reply e-mail and delete or destroy this  
mail and all copies. If you are not the intended recipient of this  
message you must not disseminate, copy or take any action in reliance  
on it. The sender takes no responsibility for the effect of this  
message upon the recipient's computer system.




--Apple-Mail-7--148789349--

From java-user-return-33189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:15:55 2008
Return-Path: <java-user-return-33189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82430 invoked from network); 17 Mar 2008 22:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:15:55 -0000
Received: (qmail 72421 invoked by uid 500); 17 Mar 2008 22:15:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72389 invoked by uid 500); 17 Mar 2008 22:15:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72378 invoked by uid 99); 17 Mar 2008 22:15:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:15:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:14:58 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 447654A8145
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 09:15:12 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Tue, 18 Mar 2008 09:10:27 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <200803111645.27956.daniel@nuix.com> <200803171124.43064.daniel@nuix.com> <5592F270-3B92-4AF1-816D-8EDAD48461AA@mikemccandless.com>
In-Reply-To: <5592F270-3B92-4AF1-816D-8EDAD48461AA@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803180910.27891.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 17 March 2008 19:38:46 Michael McCandless wrote:
> Well ... expungeDeletes() first forces a flush, at which point the
> deletions are flushed as a .del file against the just flushed
> segment.  Still, if you call expungeDeletes after every flush
> (commit) then it's only 1 segment whose deletions need to be expunged
> so it should be fast.

Now I'm calling it after every failure.  It adds about 15% time if every 
addDocument fails, but because very few documents actually fail the real 
penalty isn't too great.

I can confirm that it fixed the issue, anyway.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:23:08 2008
Return-Path: <java-user-return-33190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85984 invoked from network); 17 Mar 2008 22:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:23:08 -0000
Received: (qmail 84875 invoked by uid 500); 17 Mar 2008 22:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84843 invoked by uid 500); 17 Mar 2008 22:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84832 invoked by uid 99); 17 Mar 2008 22:22:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:22:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:22:21 +0000
Received: by wx-out-0506.google.com with SMTP id i28so6772624wxd.20
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 15:22:29 -0700 (PDT)
Received: by 10.70.77.17 with SMTP id z17mr216172wxa.88.1205792549269;
        Mon, 17 Mar 2008 15:22:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i33sm453386wxd.14.2008.03.17.15.22.25
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 15:22:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47DEEBC4.7040500@stimulussoft.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.1 Index Corruption?
Date: Mon, 17 Mar 2008 18:22:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Can you describe what led up to this?  Were there any exceptions when  
adding documents to the index?  Was the index newly created with  
2.3.1 or created on 2.3.0 or 2.2?

What options are you using in your IndexWriter?

Is it easy to reproduce?  If so, can you call setInfoStream on your  
IndexWriter when creating this index and post the resulting output?

Mike

Jamie wrote:

>
> Hi There
>
> I am getting the following error while searching a given index:
>
> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such  
> file or directory)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(Unknown Source)
>        at org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
>        at org.apache.lucene.store.FSDirectory$FSIndexInput.<init> 
> (FSDirectory.java:536)
>        at org.apache.lucene.store.FSDirectory.openInput 
> (FSDirectory.java:445)
>        at org.apache.lucene.index.FieldsReader.<init> 
> (FieldsReader.java:75)
>        at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:308)
>        at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:262)
>        at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:197)
>        at org.apache.lucene.index.MultiSegmentReader.<init> 
> (MultiSegmentReader.java:55)
>        at org.apache.lucene.index.DirectoryIndexReader$1.doBody 
> (DirectoryIndexReader.java:75)
>        at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run 
> (SegmentInfos.java:636)
>        at org.apache.lucene.index.DirectoryIndexReader.open 
> (DirectoryIndexReader.java:63)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
> 209)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
> 173)
>        at org.apache.lucene.search.IndexSearcher.<init> 
> (IndexSearcher.java:48)
>
> My software used to work perfectly under earlier versions of  
> Lucene. Since I upgraded to 2.3.1, this problem has arisen.
>
> I seriously worried my customer's indexes will be corrupted. Lucene  
> expects to find a file that does not exist.
>
> Any ideas on what might be happening and how to rectify this?
>
> Jamie
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:24:52 2008
Return-Path: <java-user-return-33191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86933 invoked from network); 17 Mar 2008 22:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:24:52 -0000
Received: (qmail 90832 invoked by uid 500); 17 Mar 2008 22:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90803 invoked by uid 500); 17 Mar 2008 22:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90792 invoked by uid 99); 17 Mar 2008 22:24:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:24:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:24:05 +0000
Received: by an-out-0708.google.com with SMTP id d11so1989829and.53
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 15:24:15 -0700 (PDT)
Received: by 10.100.91.17 with SMTP id o17mr933665anb.62.1205792653527;
        Mon, 17 Mar 2008 15:24:13 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 30sm12100863hso.15.2008.03.17.15.24.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 15:24:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <200803180910.27891.daniel@nuix.com>
References: <200803111645.27956.daniel@nuix.com> <200803171124.43064.daniel@nuix.com> <5592F270-3B92-4AF1-816D-8EDAD48461AA@mikemccandless.com> <200803180910.27891.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <33125C6A-A74F-40CF-A413-EF0DAABD5B16@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Document ID shuffling under 2.3.x (on merge?)
Date: Mon, 17 Mar 2008 18:24:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Daniel Noll wrote:

> On Monday 17 March 2008 19:38:46 Michael McCandless wrote:
>> Well ... expungeDeletes() first forces a flush, at which point the
>> deletions are flushed as a .del file against the just flushed
>> segment.  Still, if you call expungeDeletes after every flush
>> (commit) then it's only 1 segment whose deletions need to be expunged
>> so it should be fast.
>
> Now I'm calling it after every failure.  It adds about 15% time if  
> every
> addDocument fails, but because very few documents actually fail the  
> real
> penalty isn't too great.
>
> I can confirm that it fixed the issue, anyway.

OK, glad to hear it!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:28:40 2008
Return-Path: <java-user-return-33192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87880 invoked from network); 17 Mar 2008 22:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:28:40 -0000
Received: (qmail 97727 invoked by uid 500); 17 Mar 2008 22:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97698 invoked by uid 500); 17 Mar 2008 22:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97683 invoked by uid 99); 17 Mar 2008 22:28:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:28:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:27:47 +0000
Received: by an-out-0708.google.com with SMTP id d11so1990489and.53
        for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 15:27:57 -0700 (PDT)
Received: by 10.100.92.9 with SMTP id p9mr1005103anb.22.1205792874113;
        Mon, 17 Mar 2008 15:27:54 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm29915030aga.18.2008.03.17.15.27.53
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Mar 2008 15:27:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9D40B54B-B4E3-4C5A-AA52-7338B9CC12EC@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Huge number of Term objects in memory gives OutOfMemory error
Date: Mon, 17 Mar 2008 18:27:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

You can call IndexReader.setTermInfosIndexDivisor(int) to reduce how  
many index terms are loaded in memory.  EG setting it to 10 will load  
1/10th what's loaded now, but will slow down searches.

Also, you should understand why your index has so many terms.  EG,  
use Luke to peek at the terms and see if they are "valid".  If for  
example you are accidentally indexing binary content as if it were  
text that can easily cause a great many, large, unwanted terms.

Mike

<Richard.Bolen@gxs.com> wrote:

> I'm running Lucene 2.3.1 with Java 1.5.0_14 on 64 bit linux.  We  
> have fairly large collections (~1gig collection files, ~1,000,000  
> documents).  When I try to load test our application with 50 users,  
> all doing simple searches via a web interface, we quickly get an  
> OutOfMemory exception.  When I do a jmap dump of the heap, this is  
> what I see:
>
> Size    Count   Class description
> -------------------------------------------------------
> 195818576       4263822 char[]
> 190889608       13259   byte[]
> 172316640       4307916 java.lang.String
> 164813120       4120328 org.apache.lucene.index.TermInfo
> 131823104       4119472 org.apache.lucene.index.Term
> 37729184        604     org.apache.lucene.index.TermInfo[]
> 37729184        604     org.apache.lucene.index.Term[]
>
> So 4 of the top 7 memory consumers are Term related.  We have 2 gig  
> of RAM available on the system but we get OOM errors no matter the  
> java heap settings.  Has anyone seen this issue and know how to  
> solve it?
>
> We do use separate MultiSearcher instances for each search.  (We  
> actually have 2 collections that we search via a MultiSearcher.) We  
> tried using a singleton searcher instance but our collections are  
> constantly being updated and the singleton searcher only gives you  
> results since the searcher was opened.  Creating new searcher  
> objects at search time gives you up to the minute search results.
>
> I've seen some postings referring to an Index Divisor setting which  
> could reduce the Terms in memory, but I have not seen how to set  
> this value for Lucene.
>
> Any help would be greatly appreciated.
>
> Rich


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 17 22:32:18 2008
Return-Path: <java-user-return-33193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89699 invoked from network); 17 Mar 2008 22:32:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Mar 2008 22:32:18 -0000
Received: (qmail 8335 invoked by uid 500); 17 Mar 2008 22:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8302 invoked by uid 500); 17 Mar 2008 22:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8291 invoked by uid 99); 17 Mar 2008 22:32:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 15:32:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 22:31:18 +0000
Received: (qmail 4634 invoked by uid 511); 17 Mar 2008 15:31:38 -0700
Received: from 41.243.212.53 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.212.53):SA:0(-2.0/5.0):. 
 Processed in 1.552287 secs); 17 Mar 2008 22:31:38 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.212.53):SA:0(-2.0/5.0):. Processed in 1.552287 secs Process 4624)
Received: from dsl-243-212-53.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.212.53)
  by stimulussoft.com with SMTP; 17 Mar 2008 15:31:37 -0700
Message-ID: <47DEF20D.7000304@stimulussoft.com>
Date: Tue, 18 Mar 2008 00:34:53 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 Index Corruption?
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com>
In-Reply-To: <47DEEBC4.7040500@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.0 required=5.0

As a further followup:

The follows files are located in the index:

 ls /usr/local/index
_0.fnm  _0.frq  _0.nrm  _0.prx  _0.tii  _0.tis  _1.cfs  indexinfo  
_j.cfs  segments.gen  segments_s

This problem appears to be intermittant and has occurred on several 
machines. Is there any incorrect way that I could be using Lucene such 
that this problem would occur?

Jamie

Jamie wrote:
> Hi There
>
> I am getting the following error while searching a given index:
>
> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such file 
> or directory)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(Unknown Source)
>        at 
> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506) 
>
>        at 
> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536) 
>
>        at 
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>        at 
> org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
>        at 
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:308)
>        at 
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>        at 
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
>        at 
> org.apache.lucene.index.MultiSegmentReader.<init>(MultiSegmentReader.java:55) 
>
>        at 
> org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:75) 
>
>        at 
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636) 
>
>        at 
> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63) 
>
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
>        at 
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:48)
>
> My software used to work perfectly under earlier versions of Lucene. 
> Since I upgraded to 2.3.1, this problem has arisen.
>
> I seriously worried my customer's indexes will be corrupted. Lucene 
> expects to find a file that does not exist.
>
> Any ideas on what might be happening and how to rectify this?
>
> Jamie
>
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 00:24:43 2008
Return-Path: <java-user-return-33194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45028 invoked from network); 18 Mar 2008 00:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 00:24:43 -0000
Received: (qmail 22855 invoked by uid 500); 18 Mar 2008 00:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22822 invoked by uid 500); 18 Mar 2008 00:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22811 invoked by uid 99); 18 Mar 2008 00:24:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Mar 2008 17:24:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 00:23:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id EB52A7FBC
	for <java-user@lucene.apache.org>; Mon, 17 Mar 2008 17:24:04 -0700 (PDT)
Message-Id: <36D720DF-26C1-45BB-BDA3-568D5F4A19A8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <22f49afe0803171405o5401ad19t22309e602711b6e6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Indexing/Querying Annotations and Fields for a document
Date: Mon, 17 Mar 2008 20:24:02 -0400
References: <22f49afe0803170554k77e3dfe4sd5a3c0aacdd67467@mail.gmail.com> <597C9435-1507-41E0-AA7F-FC9127237DC4@apache.org> <22f49afe0803171405o5401ad19t22309e602711b6e6@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You would parse the XML (or whatever) into separate strings, and put  
each piece into it's own Field in a Lucene Document

For instance:

Document doc = new Document();
String body = getBody(input);
String people = getPeople(input)
Field body = new Field("body", body);
Field people = new Field("people", people);

writer.addDocument(doc)


Essentially, you just need to implement the getPeople and getBody  
methods to extract the appropriate content from your text.


On Mar 17, 2008, at 5:05 PM, lucene-seme1 s wrote:

> I already have the document preprocessed and the annotations (i.e.
> <Person>John</Person>) are already stored in an array with features  
> attached
> to some annotations (such as the root and lemma of the word). Can  
> you please
> elaborate some more on how to "index them as normally would" ?
>
> Regards,
> JK
>
>
> On Mon, Mar 17, 2008 at 4:33 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
>> I think there are a couple of ways you can approach this, although I
>> have never used GATE.
>>
>> If these annotations are marked in line in your content, then you can
>> either preprocess the files to have them separately and index as you
>> normally would, or you can use the relatively new TeeTokenFilter and
>> SinkTokenizer to extract them as you go for use in other fields.  I
>> have done this successfully for some apps that I have worked on and I
>> think it works quite nice and beats preprocessing IMO.  Essentially,
>> you set up a TeeTokenFilter that recognizes your Person and then set
>> that token aside in the Sink.  Then, when you construct the Person
>> field, you use the SinkTokenizer.
>>
>> HTH,
>> Grant
>>
>> On Mar 17, 2008, at 8:54 AM, lucene-seme1 s wrote:
>>
>>> Hello,
>>>
>>> I am a newbie here and still experimenting with Lucene. I have
>>> annotations
>>> and features generated by GATE for many documents and would like to
>>> index
>>> the original content of the documents in addition to the generated
>>> annotations. The annotations are in the form of [<Person> John </
>>> Person>
>>> loves fishing]. I would like to be able to search using the Person
>>> attribute.
>>>
>>> Any hint or suggestion is highly appreciated
>>>
>>> regards,
>>> JK
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucenebootcamp.com
>> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 10:49:31 2008
Return-Path: <java-user-return-33195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5580 invoked from network); 18 Mar 2008 10:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 10:49:31 -0000
Received: (qmail 13864 invoked by uid 500); 18 Mar 2008 10:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13826 invoked by uid 500); 18 Mar 2008 10:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13815 invoked by uid 99); 18 Mar 2008 10:49:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 03:49:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Mar 2008 10:48:30 +0000
Received: (qmail 25121 invoked by uid 60001); 18 Mar 2008 10:48:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=bvKtJQC7g5qvBs9WNTFxtBhNa3snMENDDgz/9CUQ6ZDUy22CovGGQ2i1gSXR8tIOGYzpTSKFybXo1BnQt4OTwCn2dVjFwPhlO2ahDIOSfCr254Upep7AA0JoG5vPbs7jP8WRe9RZj2oTtQRN6LFCcJV3bo9V6w0wQAED++JY8EA=;
X-YMail-OSG: 4q7Zo3YVM1naXiwl2HmfkkF7kYoFAQd.vz2G5OqYt2tF6IgJx1YvQTxJtsgnYo7HpHFoyvZrQjrW91Uwh48384almCvBQK.k3UM3CHmFqk3kfa3ze2MY7fIv9zg-
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Tue, 18 Mar 2008 10:48:49 GMT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.162
Date: Tue, 18 Mar 2008 10:48:49 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Indexing/Querying Annotations and Fields for a document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <917461.23478.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've used a custom analyzer before now to "blend in" GATE annotations as to=
kens at the same position as the words they relate to.=0A=0AE.g. =0A    Fre=
d Smith works for Microsoft=0A=0Awould be tokenized ordinarily as the follo=
wing tokens:=0A=0A    position    offset    text=0A    =3D=3D=3D=3D=3D=3D  =
  =3D=3D=3D    =3D=3D=3D=0A    1            0        fred=0A    2          =
  6        smith=0A    3            13      works=0A    ....=0ABut in a cus=
tom analyzer you would know the offsets of all these normal tokens plus hav=
e visibility of the GATE annotations, including offsets. Your custom analyz=
er can blend these to produce as follows:=0A=0A    position    offset    te=
xt=0A    =3D=3D=3D=3D=3D=3D    =3D=3D=3D    =3D=3D=3D=0A    1            0 =
       fred=0A    1            0        GATE_PERSON=0A    2            6   =
     smith=0A    3            13      works=0A=0AThe trick to adding "GATE_=
PERSON" at the same position as "fred" is to set the "position increment" o=
f this token to zero. =0A=0ANow you can construct a Lucene query that uses =
this position info in queries. =0Ai.e. instead of searching for the specifi=
c:=0A=0A    "Fred works for Microsoft"~5=0A=0Ayou can now search for the mo=
re general:=0A=0A    "GATE_PERSON works for microsoft"~5=0A=0AThe GATE toke=
ns e.g. "GATE_PERSON" would have to be terms you wouldn't expect to find in=
 normal text so they wouldn't clash. =0AAnother way of doing this which avo=
ids this problem might be to look at the new payloads API. =0AAnyone care t=
o wade in with if this is feasible and the state of play with payloads?=0A=
=0ACheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Grant Ingersol=
l <gsingers@apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, =
18 March, 2008 12:24:02 AM=0ASubject: Re: Indexing/Querying Annotations and=
 Fields for a document=0A=0AYou would parse the XML (or whatever) into sepa=
rate strings, and put  =0Aeach piece into it's own Field in a Lucene Docume=
nt=0A=0AFor instance:=0A=0ADocument doc =3D new Document();=0AString body =
=3D getBody(input);=0AString people =3D getPeople(input)=0AField body =3D n=
ew Field("body", body);=0AField people =3D new Field("people", people);=0A=
=0Awriter.addDocument(doc)=0A=0A=0AEssentially, you just need to implement =
the getPeople and getBody  =0Amethods to extract the appropriate content fr=
om your text.=0A=0A=0AOn Mar 17, 2008, at 5:05 PM, lucene-seme1 s wrote:=0A=
=0A> I already have the document preprocessed and the annotations (i.e.=0A>=
 <Person>John</Person>) are already stored in an array with features  =0A> =
attached=0A> to some annotations (such as the root and lemma of the word). =
Can  =0A> you please=0A> elaborate some more on how to "index them as norma=
lly would" ?=0A>=0A> Regards,=0A> JK=0A>=0A>=0A> On Mon, Mar 17, 2008 at 4:=
33 PM, Grant Ingersoll <gsingers@apache.org>=0A> wrote:=0A>=0A>> I think th=
ere are a couple of ways you can approach this, although I=0A>> have never =
used GATE.=0A>>=0A>> If these annotations are marked in line in your conten=
t, then you can=0A>> either preprocess the files to have them separately an=
d index as you=0A>> normally would, or you can use the relatively new TeeTo=
kenFilter and=0A>> SinkTokenizer to extract them as you go for use in other=
 fields.  I=0A>> have done this successfully for some apps that I have work=
ed on and I=0A>> think it works quite nice and beats preprocessing IMO.  Es=
sentially,=0A>> you set up a TeeTokenFilter that recognizes your Person and=
 then set=0A>> that token aside in the Sink.  Then, when you construct the =
Person=0A>> field, you use the SinkTokenizer.=0A>>=0A>> HTH,=0A>> Grant=0A>=
>=0A>> On Mar 17, 2008, at 8:54 AM, lucene-seme1 s wrote:=0A>>=0A>>> Hello,=
=0A>>>=0A>>> I am a newbie here and still experimenting with Lucene. I have=
=0A>>> annotations=0A>>> and features generated by GATE for many documents =
and would like to=0A>>> index=0A>>> the original content of the documents i=
n addition to the generated=0A>>> annotations. The annotations are in the f=
orm of [<Person> John </=0A>>> Person>=0A>>> loves fishing]. I would like t=
o be able to search using the Person=0A>>> attribute.=0A>>>=0A>>> Any hint =
or suggestion is highly appreciated=0A>>>=0A>>> regards,=0A>>> JK=0A>>=0A>>=
 --------------------------=0A>> Grant Ingersoll=0A>> http://www.luceneboot=
camp.com=0A>> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam=
=0A>>=0A>> Lucene Helpful Hints:=0A>> http://wiki.apache.org/lucene-java/Ba=
sicsOfPerformance=0A>> http://wiki.apache.org/lucene-java/LuceneFAQ=0A>>=0A=
>>=0A>>=0A>>=0A>>=0A>>=0A>> -----------------------------------------------=
----------------------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0A>> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A>>=0A>>=0A=0A--------------------------=0AGrant Ingersoll=0A=
http://www.lucenebootcamp.com=0ANext Training: April 7, 2008 at ApacheCon E=
urope in Amsterdam=0A=0ALucene Helpful Hints:=0Ahttp://wiki.apache.org/luce=
ne-java/BasicsOfPerformance=0Ahttp://wiki.apache.org/lucene-java/LuceneFAQ=
=0A=0A=0A=0A=0A=0A=0A------------------------------------------------------=
---------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A=0A=0A=0A=0A      ________________________________________________=
___________ =0ARise to the challenge for Sport Relief with Yahoo! For Good =
 =0A=0Ahttp://uk.promotions.yahoo.com/forgood/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 11:09:53 2008
Return-Path: <java-user-return-33196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16186 invoked from network); 18 Mar 2008 11:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 11:09:52 -0000
Received: (qmail 48431 invoked by uid 500); 18 Mar 2008 11:09:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48395 invoked by uid 500); 18 Mar 2008 11:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48384 invoked by uid 99); 18 Mar 2008 11:09:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 04:09:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:09:03 +0000
Received: (qmail 20486 invoked by uid 511); 18 Mar 2008 04:09:14 -0700
Received: from 41.243.209.81 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.209.81):SA:0(-1.0/5.0):. 
 Processed in 3.726801 secs); 18 Mar 2008 11:09:14 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.209.81):SA:0(-1.0/5.0):. Processed in 3.726801 secs Process 20476)
Received: from dsl-243-209-81.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.209.81)
  by stimulussoft.com with SMTP; 18 Mar 2008 04:09:10 -0700
Message-ID: <47DFA39A.8040304@stimulussoft.com>
Date: Tue, 18 Mar 2008 13:12:26 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 Index Corruption?
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com> <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com>
In-Reply-To: <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-1.0 required=5.0

Hi Michael

Sorry for the late reply. As you guessed, it missed my attention.

Michael McCandless wrote:
>
> Hi,
>
> Can you describe what led up to this?

My application indexes emails. In this particular instance, I had 
reindexed all emails from their original sources. The error occurred 
while I was using a search to search through the index.
> Were there any exceptions when adding documents to the index?
I had a look through all my application debug logs and there were no 
exceptions outputted.

>   Was the index newly created with 2.3.1 or created on 2.3.0 or 2.2?
This index was created by v2.3.1
>
> What options are you using in your IndexWriter?
  See source code below:

      public void indexMessage(Email email) throws MessageSearchException {
          Volume volume = email.getEmailId().getVolume();
          VolumeIndex volumeIndex = volumeIndexes.get(volume);
          if (volumeIndex!=null) {
              volumeIndex.indexMessage(email);
          } else {
              volumeIndex = new VolumeIndex(volume);
              volumeIndex.indexMessage(email);
              volumeIndexes.put(volume,volumeIndex);
          }
      }
     
      public class VolumeIndex {
         
                IndexWriter writer;
                Volume volume;
                Timer closeIndexTimer = new Timer();
             AccessStatus volumeOpened = AccessStatus.CLOSED;
             Object indexLock = new Object();
             
              public synchronized AccessStatus getAccessStatus() { 
return volumeOpened;}

              public synchronized void setAccessStatus(AccessStatus 
volumeOpened) {
                  this.volumeOpened = volumeOpened;
             }
             
                public VolumeIndex(Volume volume) {
                        this.volume = volume;
                      closeIndexTimer.scheduleAtFixedRate(new TimerTask() {
                        public void run() {
                             closeIndex(writer);
                        }
                    }, indexOpenTime, indexOpenTime);
         
                }

              protected void openIndex() throws MessageSearchException {
                  synchronized(indexLock) {
                        if (getAccessStatus()==AccessStatus.CLOSED) {
                            logger.debug("openIndex() index will be 
opened. it is currently closed.");
                            openIndex(false);
                            setAccessStatus(AccessStatus.OPEN);
                        } else
                            logger.debug("openIndex() did not bother 
opening index. it is already open.");
                  }
                 
              }
             
              protected void openIndex(boolean retry) throws 
MessageSearchException {
                    if (volume == null)
                        throw new MessageSearchException("assertion 
failure: null volume",logger);
                    logger.debug("opening index for write {"+volume+"}");
                    prepareIndex(volume);
                    Index activeIndex = volume.getActiveIndex();
                    logger.debug("opening search index for write 
{indexpath='"+activeIndex.getPath()+"'}");
                    try {
                            writer = new 
IndexWriter(activeIndex.getPath(), analyzer);
                    } catch (IOException io)
                    {
                        if (!retry) {
                            // most obvious reason for error is that 
there is a lock on the index, due hard shutdown
                            // resolution delete the lock, and try again
                            logger.warn("failed to open search index for 
write. possible write lock due to hard system shutdown.",io);
                            logger.info("attempting recovery. deleting 
index lock file and retrying..");
                            File lockFile = new 
File(activeIndex.getPath()+File.separatorChar + "write.lock");
                            lockFile.delete();
                            try {
                                openIndex(true);
                            } catch (MessageSearchException mse) {
                                throw mse;
                            }
                        }
                        throw new MessageSearchException("failed to 
open/ index writer {location='"+activeIndex.getPath()+"'}",io,logger);
                    }
            }
               
             

              public void prepareIndex(Volume volume) throws 
MessageSearchException {
               
                  if (volume==null)
                            throw new MessageSearchException("assertion 
failure: null volume",logger);
               
                  if (volume.getIndexPath().startsWith("rmi://"))
                          return;
                         
                  File indexDir = new File(volume.getIndexPath());
                  if (!indexDir.exists()) {
                    logger.info("index directory does not exist. will 
proceed with creation {location='" + volume.getIndexPath() + "'}");
                    boolean success = indexDir.mkdir();
                    if (!success)
                            throw new MessageSearchException("failed to 
create index directory {location='" + volume.getIndexPath() + "'}",logger);
                    logger.info("index directory successfully created 
{location='" + volume.getIndexPath() + "'}");
                  }
           
              }
             
            public void indexMessage(Email message) throws 
MessageSearchException  {
                long s = (new Date()).getTime();
                if (message == null)
                    throw new MessageSearchException("assertion failure: 
null message",logger);
                logger.debug("indexing message {"+message+"}");
               
                Document doc = new Document();
                try {
                   writeMessageToDocument(message,doc); 
                   String language = doc.get("lang");
                   if (language==null)
                       language = getIndexLanguage();
                           synchronized (indexLock) {
                               openIndex();
                               
writer.addDocument(doc,AnalyzerFactory.getAnalyzer(language,AnalyzerFactory.Operation.INDEX));
                           }
                   logger.debug("message indexed successfully 
{"+message+",language='"+language+"'}");
                } catch (MessagingException me)
                {
                   throw new MessageSearchException("failed to decode 
message during indexing",me,logger);
                } catch (IOException me) {
                    throw new MessageSearchException("failed to index 
message {"+message+"}",me,logger);
                } catch (ExtractionException ee)
                {
                   throw new MessageSearchException("failed to decode 
attachments in message {"+message+"}",ee,logger);
                } catch (Exception e) {
                    throw new MessageSearchException("failed to index 
message",e,logger);
                }
                logger.debug("indexing message end {"+message+"}");
               
                long e = (new Date()).getTime();
                logger.debug("indexing time {time='"+(e-s)+"'}");
            }
               
            protected void closeIndex(IndexWriter writer) {

                       synchronized(indexLock) {
                          
                        if (getAccessStatus()==AccessStatus.CLOSED)
                                return;
                       
                        try {
                                if (writer!=null)
                                    writer.close();
                                try { Thread.sleep(50); } catch 
(Exception e) {}
                        } catch (Exception io) {}
                        setAccessStatus(AccessStatus.CLOSED);
                       }
               }
           
            protected void finalize() throws Throwable {
                logger.debug("volumeindex class is shutting down");
                try {
                    closeIndexTimer.cancel();
                } finally {
                super.finalize();
                }
            }
           
      }
   
>
> Is it easy to reproduce?
Its difficult to reproduce since the problem seems intermittant..
> If so, can you call setInfoStream on your IndexWriter when creating 
> this index and post the resulting output?
I'll try this but I cannot guarantee anything. Do you see anything 
obvious from the above?
>
> Mike
>
> Jamie wrote:
>
>>
>> Hi There
>>
>> I am getting the following error while searching a given index:
>>
>> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such file 
>> or directory)
>>        at java.io.RandomAccessFile.open(Native Method)
>>        at java.io.RandomAccessFile.<init>(Unknown Source)
>>        at 
>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506) 
>>
>>        at 
>> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536) 
>>
>>        at 
>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>>        at 
>> org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
>>        at 
>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:308)
>>        at 
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>>        at 
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
>>        at 
>> org.apache.lucene.index.MultiSegmentReader.<init>(MultiSegmentReader.java:55) 
>>
>>        at 
>> org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:75) 
>>
>>        at 
>> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636) 
>>
>>        at 
>> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63) 
>>
>>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
>>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
>>        at 
>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:48)
>>
>> My software used to work perfectly under earlier versions of Lucene. 
>> Since I upgraded to 2.3.1, this problem has arisen.
>>
>> I seriously worried my customer's indexes will be corrupted. Lucene 
>> expects to find a file that does not exist.
>>
>> Any ideas on what might be happening and how to rectify this?
>>
>> Jamie
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 11:33:53 2008
Return-Path: <java-user-return-33197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28849 invoked from network); 18 Mar 2008 11:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 11:33:52 -0000
Received: (qmail 90483 invoked by uid 500); 18 Mar 2008 11:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90454 invoked by uid 500); 18 Mar 2008 11:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90443 invoked by uid 99); 18 Mar 2008 11:33:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 04:33:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:32:56 +0000
Received: from unknown (HELO ohiocas01.internal.gxs.com) ([10.160.68.73])
  by bro01smtpgxs.ohctr.gxs.com with ESMTP; 18 Mar 2008 07:33:16 -0400
Received: from AMERICASMAIL01.internal.gxs.com ([10.97.69.45]) by
 ohiocas01.internal.gxs.com ([10.160.68.73]) with mapi; Tue, 18 Mar 2008
 07:33:15 -0400
From: <Richard.Bolen@gxs.com>
To: <java-user@lucene.apache.org>
Date: Tue, 18 Mar 2008 07:30:29 -0400
Subject: RE: Huge number of Term objects in memory gives OutOfMemory error
Thread-Topic: Huge number of Term objects in memory gives OutOfMemory error
Thread-Index: AciIfkBfSq2/lkSzTSGTEEb4RivPNAAbTf+C
Message-ID: <F023B4AFE64FC7419B5F2B6341BEC716281D5D0228@AMERICASMAIL01.internal.gxs.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>,<9D40B54B-B4E3-4C5A-AA52-7338B9CC12EC@mikemccandless.com>
In-Reply-To: <9D40B54B-B4E3-4C5A-AA52-7338B9CC12EC@mikemccandless.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org


Does each searchable have it's own copy of Term and TermInfo arrays?  So th=
e amount in memory would grow with each new Searchable instance? If so, it =
might be worthwhile to implement a singleton MultiSearcher that is closed a=
nd re-opened periodically.  What do you think?

Thanks again,
Rich
________________________________________
From: Michael McCandless [lucene@mikemccandless.com]
Sent: Monday, March 17, 2008 6:27 PM
To: java-user@lucene.apache.org
Subject: Re: Huge number of Term objects in memory gives OutOfMemory error

You can call IndexReader.setTermInfosIndexDivisor(int) to reduce how
many index terms are loaded in memory.  EG setting it to 10 will load
1/10th what's loaded now, but will slow down searches.

Also, you should understand why your index has so many terms.  EG,
use Luke to peek at the terms and see if they are "valid".  If for
example you are accidentally indexing binary content as if it were
text that can easily cause a great many, large, unwanted terms.

Mike

<Richard.Bolen@gxs.com> wrote:

> I'm running Lucene 2.3.1 with Java 1.5.0_14 on 64 bit linux.  We
> have fairly large collections (~1gig collection files, ~1,000,000
> documents).  When I try to load test our application with 50 users,
> all doing simple searches via a web interface, we quickly get an
> OutOfMemory exception.  When I do a jmap dump of the heap, this is
> what I see:
>
> Size    Count   Class description
> -------------------------------------------------------
> 195818576       4263822 char[]
> 190889608       13259   byte[]
> 172316640       4307916 java.lang.String
> 164813120       4120328 org.apache.lucene.index.TermInfo
> 131823104       4119472 org.apache.lucene.index.Term
> 37729184        604     org.apache.lucene.index.TermInfo[]
> 37729184        604     org.apache.lucene.index.Term[]
>
> So 4 of the top 7 memory consumers are Term related.  We have 2 gig
> of RAM available on the system but we get OOM errors no matter the
> java heap settings.  Has anyone seen this issue and know how to
> solve it?
>
> We do use separate MultiSearcher instances for each search.  (We
> actually have 2 collections that we search via a MultiSearcher.) We
> tried using a singleton searcher instance but our collections are
> constantly being updated and the singleton searcher only gives you
> results since the searcher was opened.  Creating new searcher
> objects at search time gives you up to the minute search results.
>
> I've seen some postings referring to an Index Divisor setting which
> could reduce the Terms in memory, but I have not seen how to set
> this value for Lucene.
>
> Any help would be greatly appreciated.
>
> Rich


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 11:39:24 2008
Return-Path: <java-user-return-33198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30800 invoked from network); 18 Mar 2008 11:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 11:39:23 -0000
Received: (qmail 98897 invoked by uid 500); 18 Mar 2008 11:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98861 invoked by uid 500); 18 Mar 2008 11:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98850 invoked by uid 99); 18 Mar 2008 11:39:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 04:39:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:38:37 +0000
Received: by wr-out-0506.google.com with SMTP id c30so4292938wra.14
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 04:38:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=/qckpqr1O4JT9V30yB0qEksHbFw6J5kcrFcgoav7Bxc=;
        b=srT/770afVJfn8UoGdA344cCeAHWT+xGklIINgQq8adXCLne46DROJW9O4Wa70zIrGePiU8m7wEUKbmFDm4aoIxx8eAm2YFsQAhl+By+u63ppC/W54t0FRpHaizAN2xuQIHSyZQMh8ks2Mo4Ublc9L48DMk44fXpkooiRYXD1mI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=vvyASlPApXd5Zs3hOce4ueAe+NBbBXdYacqTNM9enCNh/aZV8yiW2Rnde2J+ktSkY/IvxBWAmF5eUhyieKyUVrjZqm9WgrskJuFSqXwLNAAduTT+grKN+ulfHqzAo7yrKgL18ilx+rwLrIxNfd9MTFu/kkQ+fCqzfmOGUz+ZYew=
Received: by 10.114.127.1 with SMTP id z1mr1416499wac.26.1205840281820;
        Tue, 18 Mar 2008 04:38:01 -0700 (PDT)
Received: by 10.114.46.15 with HTTP; Tue, 18 Mar 2008 04:38:01 -0700 (PDT)
Message-ID: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
Date: Tue, 18 Mar 2008 11:38:01 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: CorruptIndexException with some versions of java
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


When bulk loading into a new index I'm seeing this exception

Exception in thread "Thread-1"
org.apache.lucene.index.MergePolicy$MergeException:
org.apache.lucene.index.CorruptIndexException: doc counts differ for
segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
67862
	at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3093)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)

when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.

With java version 1.6.0_03-b05 things work fine.

The exception happens a few hundred thousand documents into the load.

A different program updating a different index with different data on
a different server gave a similar error on version 1.6.0_05-b13 and
lucene 2.3.0.


Any ideas?  Is this maybe a known issue or am I missing something obvious?



--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 11:54:18 2008
Return-Path: <java-user-return-33199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38022 invoked from network); 18 Mar 2008 11:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 11:54:18 -0000
Received: (qmail 24666 invoked by uid 500); 18 Mar 2008 11:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24640 invoked by uid 500); 18 Mar 2008 11:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24629 invoked by uid 99); 18 Mar 2008 11:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 04:54:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:53:28 +0000
Received: by el-out-1112.google.com with SMTP id y26so2880334ele.4
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 04:53:31 -0700 (PDT)
Received: by 10.151.42.18 with SMTP id u18mr943141ybj.81.1205841210922;
        Tue, 18 Mar 2008 04:53:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm19816071hsx.5.2008.03.18.04.53.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 04:53:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <F023B4AFE64FC7419B5F2B6341BEC716281D5D0228@AMERICASMAIL01.internal.gxs.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com>,<9D40B54B-B4E3-4C5A-AA52-7338B9CC12EC@mikemccandless.com> <F023B4AFE64FC7419B5F2B6341BEC716281D5D0228@AMERICASMAIL01.internal.gxs.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DBE2BC09-600F-4A19-BBB8-E44949B803D3@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Huge number of Term objects in memory gives OutOfMemory error
Date: Tue, 18 Mar 2008 07:53:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


<Richard.Bolen@gxs.com> wrote:

>
> Does each searchable have it's own copy of Term and TermInfo  
> arrays?  So the amount in memory would grow with each new  
> Searchable instance? If so, it might be worthwhile to implement a  
> singleton MultiSearcher that is closed and re-opened periodically.   
> What do you think?

Yes, yes and yes a single shared MultiSearcher would be better.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 11:54:25 2008
Return-Path: <java-user-return-33200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38055 invoked from network); 18 Mar 2008 11:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 11:54:25 -0000
Received: (qmail 25935 invoked by uid 500); 18 Mar 2008 11:54:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25908 invoked by uid 500); 18 Mar 2008 11:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25891 invoked by uid 99); 18 Mar 2008 11:54:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 04:54:14 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:53:34 +0000
Received: by wr-out-0506.google.com with SMTP id c30so4300333wra.14
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 04:52:30 -0700 (PDT)
Received: by 10.150.95.20 with SMTP id s20mr948746ybb.58.1205841150183;
        Tue, 18 Mar 2008 04:52:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm19816071hsx.5.2008.03.18.04.52.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 04:52:26 -0700 (PDT)
In-Reply-To: <47DFA39A.8040304@stimulussoft.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com> <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com> <47DFA39A.8040304@stimulussoft.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <247C1A99-40B6-4F91-B920-594531F1A54D@mikemccandless.com>
Cc: Jamie <jamie@stimulussoft.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.1 Index Corruption?
Date: Tue, 18 Mar 2008 07:52:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like you ignore any IOException coming out of  
IndexWriter.close?  Can you put some code in the catch clause around  
writer.close to see if you are hitting some exception there?

Also, you forcefully remove the write lock if it's present.  But are  
you absolutely certain there isn't another writer actually writing to  
that index directory?

Do you copy the index or alter it in some way?  One strange thing in  
your directory listing was the file "indexinfo", which isn't a Lucene  
index file.  Something else must be writing that file.

Mike

Jamie wrote:

> Hi Michael
>
> Sorry for the late reply. As you guessed, it missed my attention.
>
> Michael McCandless wrote:
>>
>> Hi,
>>
>> Can you describe what led up to this?
>
> My application indexes emails. In this particular instance, I had  
> reindexed all emails from their original sources. The error  
> occurred while I was using a search to search through the index.
>> Were there any exceptions when adding documents to the index?
> I had a look through all my application debug logs and there were  
> no exceptions outputted.
>
>>   Was the index newly created with 2.3.1 or created on 2.3.0 or 2.2?
> This index was created by v2.3.1
>>
>> What options are you using in your IndexWriter?
>  See source code below:
>
>      public void indexMessage(Email email) throws  
> MessageSearchException {
>          Volume volume = email.getEmailId().getVolume();
>          VolumeIndex volumeIndex = volumeIndexes.get(volume);
>          if (volumeIndex!=null) {
>              volumeIndex.indexMessage(email);
>          } else {
>              volumeIndex = new VolumeIndex(volume);
>              volumeIndex.indexMessage(email);
>              volumeIndexes.put(volume,volumeIndex);
>          }
>      }
>          public class VolumeIndex {
>                        IndexWriter writer;
>                Volume volume;
>                Timer closeIndexTimer = new Timer();
>             AccessStatus volumeOpened = AccessStatus.CLOSED;
>             Object indexLock = new Object();
>                          public synchronized AccessStatus  
> getAccessStatus() { return volumeOpened;}
>
>              public synchronized void setAccessStatus(AccessStatus  
> volumeOpened) {
>                  this.volumeOpened = volumeOpened;
>             }
>                            public VolumeIndex(Volume volume) {
>                        this.volume = volume;
>                      closeIndexTimer.scheduleAtFixedRate(new  
> TimerTask() {
>                        public void run() {
>                             closeIndex(writer);
>                        }
>                    }, indexOpenTime, indexOpenTime);
>                        }
>
>              protected void openIndex() throws  
> MessageSearchException {
>                  synchronized(indexLock) {
>                        if (getAccessStatus()==AccessStatus.CLOSED) {
>                            logger.debug("openIndex() index will be  
> opened. it is currently closed.");
>                            openIndex(false);
>                            setAccessStatus(AccessStatus.OPEN);
>                        } else
>                            logger.debug("openIndex() did not bother  
> opening index. it is already open.");
>                  }
>                              }
>                          protected void openIndex(boolean retry)  
> throws MessageSearchException {
>                    if (volume == null)
>                        throw new MessageSearchException("assertion  
> failure: null volume",logger);
>                    logger.debug("opening index for write {"+volume 
> +"}");
>                    prepareIndex(volume);
>                    Index activeIndex = volume.getActiveIndex();
>                    logger.debug("opening search index for write  
> {indexpath='"+activeIndex.getPath()+"'}");
>                    try {
>                            writer = new IndexWriter 
> (activeIndex.getPath(), analyzer);
>                    } catch (IOException io)
>                    {
>                        if (!retry) {
>                            // most obvious reason for error is that  
> there is a lock on the index, due hard shutdown
>                            // resolution delete the lock, and try  
> again
>                            logger.warn("failed to open search index  
> for write. possible write lock due to hard system shutdown.",io);
>                            logger.info("attempting recovery.  
> deleting index lock file and retrying..");
>                            File lockFile = new File 
> (activeIndex.getPath()+File.separatorChar + "write.lock");
>                            lockFile.delete();
>                            try {
>                                openIndex(true);
>                            } catch (MessageSearchException mse) {
>                                throw mse;
>                            }
>                        }
>                        throw new MessageSearchException("failed to  
> open/ index writer {location='"+activeIndex.getPath()+"'}",io,logger);
>                    }
>            }
>
>              public void prepareIndex(Volume volume) throws  
> MessageSearchException {
>                                if (volume==null)
>                            throw new MessageSearchException 
> ("assertion failure: null volume",logger);
>                                if (volume.getIndexPath().startsWith 
> ("rmi://"))
>                          return;
>                                          File indexDir = new File 
> (volume.getIndexPath());
>                  if (!indexDir.exists()) {
>                    logger.info("index directory does not exist.  
> will proceed with creation {location='" + volume.getIndexPath() +  
> "'}");
>                    boolean success = indexDir.mkdir();
>                    if (!success)
>                            throw new MessageSearchException("failed  
> to create index directory {location='" + volume.getIndexPath() +  
> "'}",logger);
>                    logger.info("index directory successfully  
> created {location='" + volume.getIndexPath() + "'}");
>                  }
>                        }
>                        public void indexMessage(Email message)  
> throws MessageSearchException  {
>                long s = (new Date()).getTime();
>                if (message == null)
>                    throw new MessageSearchException("assertion  
> failure: null message",logger);
>                logger.debug("indexing message {"+message+"}");
>                              Document doc = new Document();
>                try {
>                   writeMessageToDocument 
> (message,doc);                   String language = doc.get("lang");
>                   if (language==null)
>                       language = getIndexLanguage();
>                           synchronized (indexLock) {
>                               openIndex();
>                               writer.addDocument 
> (doc,AnalyzerFactory.getAnalyzer 
> (language,AnalyzerFactory.Operation.INDEX));
>                           }
>                   logger.debug("message indexed successfully  
> {"+message+",language='"+language+"'}");
>                } catch (MessagingException me)
>                {
>                   throw new MessageSearchException("failed to  
> decode message during indexing",me,logger);
>                } catch (IOException me) {
>                    throw new MessageSearchException("failed to  
> index message {"+message+"}",me,logger);
>                } catch (ExtractionException ee)
>                {
>                   throw new MessageSearchException("failed to  
> decode attachments in message {"+message+"}",ee,logger);
>                } catch (Exception e) {
>                    throw new MessageSearchException("failed to  
> index message",e,logger);
>                }
>                logger.debug("indexing message end {"+message+"}");
>                              long e = (new Date()).getTime();
>                logger.debug("indexing time {time='"+(e-s)+"'}");
>            }
>                          protected void closeIndex(IndexWriter  
> writer) {
>
>                       synchronized(indexLock) {
>                                                 if (getAccessStatus 
> ()==AccessStatus.CLOSED)
>                                return;
>                                              try {
>                                if (writer!=null)
>                                    writer.close();
>                                try { Thread.sleep(50); } catch  
> (Exception e) {}
>                        } catch (Exception io) {}
>                        setAccessStatus(AccessStatus.CLOSED);
>                       }
>               }
>                      protected void finalize() throws Throwable {
>                logger.debug("volumeindex class is shutting down");
>                try {
>                    closeIndexTimer.cancel();
>                } finally {
>                super.finalize();
>                }
>            }
>                }
>
>>
>> Is it easy to reproduce?
> Its difficult to reproduce since the problem seems intermittant..
>> If so, can you call setInfoStream on your IndexWriter when  
>> creating this index and post the resulting output?
> I'll try this but I cannot guarantee anything. Do you see anything  
> obvious from the above?
>>
>> Mike
>>
>> Jamie wrote:
>>
>>>
>>> Hi There
>>>
>>> I am getting the following error while searching a given index:
>>>
>>> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such  
>>> file or directory)
>>>        at java.io.RandomAccessFile.open(Native Method)
>>>        at java.io.RandomAccessFile.<init>(Unknown Source)
>>>        at org.apache.lucene.store.FSDirectory$FSIndexInput 
>>> $Descriptor.<init>(FSDirectory.java:506)
>>>        at org.apache.lucene.store.FSDirectory$FSIndexInput.<init> 
>>> (FSDirectory.java:536)
>>>        at org.apache.lucene.store.FSDirectory.openInput 
>>> (FSDirectory.java:445)
>>>        at org.apache.lucene.index.FieldsReader.<init> 
>>> (FieldsReader.java:75)
>>>        at org.apache.lucene.index.SegmentReader.initialize 
>>> (SegmentReader.java:308)
>>>        at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:262)
>>>        at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:197)
>>>        at org.apache.lucene.index.MultiSegmentReader.<init> 
>>> (MultiSegmentReader.java:55)
>>>        at org.apache.lucene.index.DirectoryIndexReader$1.doBody 
>>> (DirectoryIndexReader.java:75)
>>>        at org.apache.lucene.index.SegmentInfos 
>>> $FindSegmentsFile.run(SegmentInfos.java:636)
>>>        at org.apache.lucene.index.DirectoryIndexReader.open 
>>> (DirectoryIndexReader.java:63)
>>>        at org.apache.lucene.index.IndexReader.open 
>>> (IndexReader.java:209)
>>>        at org.apache.lucene.index.IndexReader.open 
>>> (IndexReader.java:173)
>>>        at org.apache.lucene.search.IndexSearcher.<init> 
>>> (IndexSearcher.java:48)
>>>
>>> My software used to work perfectly under earlier versions of  
>>> Lucene. Since I upgraded to 2.3.1, this problem has arisen.
>>>
>>> I seriously worried my customer's indexes will be corrupted.  
>>> Lucene expects to find a file that does not exist.
>>>
>>> Any ideas on what might be happening and how to rectify this?
>>>
>>> Jamie
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> -- 
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> USA Tel: +1-713-366-8072 ext 3
> UK Tel: +44-20-80991035 ext 3
> Email: jamie@stimulussoft.com
> Web: http://www.mailarchiva.com
>
> To receive MailArchiva Enterprise Edition product announcements,  
> send a message to: <mailarchiva-enterprise-edition- 
> subscribe@stimulussoft.com>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 12:09:53 2008
Return-Path: <java-user-return-33201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44857 invoked from network); 18 Mar 2008 12:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 12:09:53 -0000
Received: (qmail 52715 invoked by uid 500); 18 Mar 2008 12:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52687 invoked by uid 500); 18 Mar 2008 12:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52675 invoked by uid 99); 18 Mar 2008 12:09:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 05:09:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 12:08:53 +0000
Received: by rn-out-0910.google.com with SMTP id a46so3372253rne.9
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 05:09:01 -0700 (PDT)
Received: by 10.150.227.9 with SMTP id z9mr936935ybg.166.1205842141007;
        Tue, 18 Mar 2008 05:09:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id s40sm19976346hsb.9.2008.03.18.05.08.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 05:08:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <58513B21-71E4-421E-8CD6-43E1A186D162@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 08:09:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you call IndexWriter.setInfoStream(...) and get the error to  
happen and post back the resulting output?  And, turn on assertions  
(java -ea) since that may catch the issue sooner.

Can you describe you are setting up IndexWriter (autoCommit,  
compound, etc.), and what your documents are like?  Do your documents  
have a fixed schema (same fields every time), or it varies such that  
some documents have no stored fields and some do?

Mike

Ian Lea wrote:

> Hi
>
>
> When bulk loading into a new index I'm seeing this exception
>
> Exception in thread "Thread-1"
> org.apache.lucene.index.MergePolicy$MergeException:
> org.apache.lucene.index.CorruptIndexException: doc counts differ for
> segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
> 	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run 
> (ConcurrentMergeScheduler.java:271)
> Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
> differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
> 67862
> 	at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:313)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3093)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
> 	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run 
> (ConcurrentMergeScheduler.java:240)
>
> when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
> lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>
> With java version 1.6.0_03-b05 things work fine.
>
> The exception happens a few hundred thousand documents into the load.
>
> A different program updating a different index with different data on
> a different server gave a similar error on version 1.6.0_05-b13 and
> lucene 2.3.0.
>
>
> Any ideas?  Is this maybe a known issue or am I missing something  
> obvious?
>
>
>
> --
> Ian.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 12:55:37 2008
Return-Path: <java-user-return-33202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75757 invoked from network); 18 Mar 2008 12:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 12:55:37 -0000
Received: (qmail 23754 invoked by uid 500); 18 Mar 2008 12:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23724 invoked by uid 500); 18 Mar 2008 12:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23713 invoked by uid 99); 18 Mar 2008 12:55:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 05:55:26 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 12:54:45 +0000
Received: by wr-out-0506.google.com with SMTP id c30so4331306wra.14
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 05:54:54 -0700 (PDT)
Received: by 10.141.37.8 with SMTP id p8mr724586rvj.178.1205844892997;
        Tue, 18 Mar 2008 05:54:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id q30sm31305449wrq.36.2008.03.18.05.54.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 05:54:52 -0700 (PDT)
In-Reply-To: <47DFB2AE.1050000@stimulussoft.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com> <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com> <47DFA39A.8040304@stimulussoft.com> <247C1A99-40B6-4F91-B920-594531F1A54D@mikemccandless.com> <47DFAE8B.2080308@stimulussoft.com> <1D0DEA08-E3B6-47CE-8514-25021090607E@mikemccandless.com> <47DFB2AE.1050000@stimulussoft.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D426A918-65AB-4B72-8953-7F61E52741AE@mikemccandless.com>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.1 Index Corruption?
Date: Tue, 18 Mar 2008 08:55:00 -0400
To: Jamie <jamie@stimulussoft.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes fdt/fdx hold stored fields.  When the first buffered document is  
added these files are created.

The only way they disappear (through Lucene's APIs) is if a writer is  
opened on that directory, and, those files are not referenced by the  
current segments file.  This is why I'm concerned about the "two  
writers at a time" risk.  If a 2nd writer is opened while 1st one is  
still open that would easily cause this issue, so triple check that  
the messages you send to your logger on having to remove the  
write.lock are definitely not happening when you hit this corruption.

Can you post the output of "ls -l" on the corrupted index directory?

One more possibility is that this file failed to be created in the  
first place, yet, IndexWriter flushed the remaining _0.* files.  I  
can see one code path that causes this, however, it only happens if  
you open a new writer, you call addDocument, you hit an exception  
specifically in the code trying to create the fdt file (eg something  
like "too many open files"), then you close the writer.  I have a  
unit test showing this particular exception would result in the _0.*  
files you see in your index with fdt/fdx missing.  Are you really  
sure you don't see any exceptions, perhaps from very long ago,  
against this index, when calling addDocument?  If you are hitting  
this case, it's already been fixed (this is LUCENE-1198) and  
backported to the 2.3 branch.  Are you able to checkout the current  
2.3 branch and run your test using the JAR from there?

Since your index has much later segment files (_1.cfs, _j.cfs), these  
exceptions could have happened quite a while back (many writers ago)  
but then only detected when you finally opened a searcher.  So if  
possible, look way back in your error logs...

Mike

Jamie wrote:

> Hi Michael
>
> I've tried to reindex the index several times and no such luck.  
> I've enabled lucene debugging as you suggested and will let you  
> know as soon as I have more information. From what I've read, fdt  
> files are used to hold field data. Could there be any reason why  
> this file is not being written? Does Lucene recreate this file  
> every time from scratch? Why would the file completely disappear?
>
> Jamie
>
>
>
> Michael McCandless wrote:
>>
>> One more thing: try running with asserts enabled (java -ea).   
>> Lucene has a number of assertions that may catch something sooner.
>>
>> Also: how often do you try to open a searcher?  Can you try  
>> opening and then closing a searcher right after you close your  
>> writer?  (Just so we detect the corruption the moment it happens).
>>
>> Mike
>>
>> Jamie wrote:
>>
>>> Hi Michael
>>>
>>> Michael McCandless wrote:
>>>>
>>>> It looks like you ignore any IOException coming out of  
>>>> IndexWriter.close?  Can you put some code in the catch clause  
>>>> around writer.close to see if you are hitting some exception there?
>>> Sure. I'll do that.
>>>>
>>>> Also, you forcefully remove the write lock if it's present.  But  
>>>> are you absolutely certain there isn't another writer actually  
>>>> writing to that index directory?
>>> Yes. There is only ever one writer writing.
>>>>
>>>> Do you copy the index or alter it in some way?
>>> No. absoutely not.
>>>>   One strange thing in your directory listing was the file  
>>>> "indexinfo", which isn't a Lucene index file.  Something else  
>>>> must be writing that file.
>>> Yes. I neglected to mentioned.... its used by my application to  
>>> deal with multiple indexes.
>>>>
>>>> Mike
>>>>
>>>> Jamie wrote:
>>>>
>>>>> Hi Michael
>>>>>
>>>>> Sorry for the late reply. As you guessed, it missed my attention.
>>>>>
>>>>> Michael McCandless wrote:
>>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> Can you describe what led up to this?
>>>>>
>>>>> My application indexes emails. In this particular instance, I  
>>>>> had reindexed all emails from their original sources. The error  
>>>>> occurred while I was using a search to search through the index.
>>>>>> Were there any exceptions when adding documents to the index?
>>>>> I had a look through all my application debug logs and there  
>>>>> were no exceptions outputted.
>>>>>
>>>>>>   Was the index newly created with 2.3.1 or created on 2.3.0  
>>>>>> or 2.2?
>>>>> This index was created by v2.3.1
>>>>>>
>>>>>> What options are you using in your IndexWriter?
>>>>>  See source code below:
>>>>>
>>>>>      public void indexMessage(Email email) throws  
>>>>> MessageSearchException {
>>>>>          Volume volume = email.getEmailId().getVolume();
>>>>>          VolumeIndex volumeIndex = volumeIndexes.get(volume);
>>>>>          if (volumeIndex!=null) {
>>>>>              volumeIndex.indexMessage(email);
>>>>>          } else {
>>>>>              volumeIndex = new VolumeIndex(volume);
>>>>>              volumeIndex.indexMessage(email);
>>>>>              volumeIndexes.put(volume,volumeIndex);
>>>>>          }
>>>>>      }
>>>>>          public class VolumeIndex {
>>>>>                        IndexWriter writer;
>>>>>                Volume volume;
>>>>>                Timer closeIndexTimer = new Timer();
>>>>>             AccessStatus volumeOpened = AccessStatus.CLOSED;
>>>>>             Object indexLock = new Object();
>>>>>                          public synchronized AccessStatus  
>>>>> getAccessStatus() { return volumeOpened;}
>>>>>
>>>>>              public synchronized void setAccessStatus 
>>>>> (AccessStatus volumeOpened) {
>>>>>                  this.volumeOpened = volumeOpened;
>>>>>             }
>>>>>                            public VolumeIndex(Volume volume) {
>>>>>                        this.volume = volume;
>>>>>                      closeIndexTimer.scheduleAtFixedRate(new  
>>>>> TimerTask() {
>>>>>                        public void run() {
>>>>>                             closeIndex(writer);
>>>>>                        }
>>>>>                    }, indexOpenTime, indexOpenTime);
>>>>>                        }
>>>>>
>>>>>              protected void openIndex() throws  
>>>>> MessageSearchException {
>>>>>                  synchronized(indexLock) {
>>>>>                        if (getAccessStatus() 
>>>>> ==AccessStatus.CLOSED) {
>>>>>                            logger.debug("openIndex() index will  
>>>>> be opened. it is currently closed.");
>>>>>                            openIndex(false);
>>>>>                            setAccessStatus(AccessStatus.OPEN);
>>>>>                        } else
>>>>>                            logger.debug("openIndex() did not  
>>>>> bother opening index. it is already open.");
>>>>>                  }
>>>>>                              }
>>>>>                          protected void openIndex(boolean  
>>>>> retry) throws MessageSearchException {
>>>>>                    if (volume == null)
>>>>>                        throw new MessageSearchException 
>>>>> ("assertion failure: null volume",logger);
>>>>>                    logger.debug("opening index for write  
>>>>> {"+volume+"}");
>>>>>                    prepareIndex(volume);
>>>>>                    Index activeIndex = volume.getActiveIndex();
>>>>>                    logger.debug("opening search index for write  
>>>>> {indexpath='"+activeIndex.getPath()+"'}");
>>>>>                    try {
>>>>>                            writer = new IndexWriter 
>>>>> (activeIndex.getPath(), analyzer);
>>>>>                    } catch (IOException io)
>>>>>                    {
>>>>>                        if (!retry) {
>>>>>                            // most obvious reason for error is  
>>>>> that there is a lock on the index, due hard shutdown
>>>>>                            // resolution delete the lock, and  
>>>>> try again
>>>>>                            logger.warn("failed to open search  
>>>>> index for write. possible write lock due to hard system  
>>>>> shutdown.",io);
>>>>>                            logger.info("attempting recovery.  
>>>>> deleting index lock file and retrying..");
>>>>>                            File lockFile = new File 
>>>>> (activeIndex.getPath()+File.separatorChar + "write.lock");
>>>>>                            lockFile.delete();
>>>>>                            try {
>>>>>                                openIndex(true);
>>>>>                            } catch (MessageSearchException mse) {
>>>>>                                throw mse;
>>>>>                            }
>>>>>                        }
>>>>>                        throw new MessageSearchException("failed  
>>>>> to open/ index writer {location='"+activeIndex.getPath() 
>>>>> +"'}",io,logger);
>>>>>                    }
>>>>>            }
>>>>>
>>>>>              public void prepareIndex(Volume volume) throws  
>>>>> MessageSearchException {
>>>>>                                if (volume==null)
>>>>>                            throw new MessageSearchException 
>>>>> ("assertion failure: null volume",logger);
>>>>>                                if (volume.getIndexPath 
>>>>> ().startsWith("rmi://"))
>>>>>                          return;
>>>>>                                          File indexDir = new  
>>>>> File(volume.getIndexPath());
>>>>>                  if (!indexDir.exists()) {
>>>>>                    logger.info("index directory does not exist.  
>>>>> will proceed with creation {location='" + volume.getIndexPath()  
>>>>> + "'}");
>>>>>                    boolean success = indexDir.mkdir();
>>>>>                    if (!success)
>>>>>                            throw new MessageSearchException 
>>>>> ("failed to create index directory {location='" +  
>>>>> volume.getIndexPath() + "'}",logger);
>>>>>                    logger.info("index directory successfully  
>>>>> created {location='" + volume.getIndexPath() + "'}");
>>>>>                  }
>>>>>                        }
>>>>>                        public void indexMessage(Email message)  
>>>>> throws MessageSearchException  {
>>>>>                long s = (new Date()).getTime();
>>>>>                if (message == null)
>>>>>                    throw new MessageSearchException("assertion  
>>>>> failure: null message",logger);
>>>>>                logger.debug("indexing message {"+message+"}");
>>>>>                              Document doc = new Document();
>>>>>                try {
>>>>>                   writeMessageToDocument 
>>>>> (message,doc);                   String language = doc.get 
>>>>> ("lang");
>>>>>                   if (language==null)
>>>>>                       language = getIndexLanguage();
>>>>>                           synchronized (indexLock) {
>>>>>                               openIndex();
>>>>>                               writer.addDocument 
>>>>> (doc,AnalyzerFactory.getAnalyzer 
>>>>> (language,AnalyzerFactory.Operation.INDEX));
>>>>>                           }
>>>>>                   logger.debug("message indexed successfully  
>>>>> {"+message+",language='"+language+"'}");
>>>>>                } catch (MessagingException me)
>>>>>                {
>>>>>                   throw new MessageSearchException("failed to  
>>>>> decode message during indexing",me,logger);
>>>>>                } catch (IOException me) {
>>>>>                    throw new MessageSearchException("failed to  
>>>>> index message {"+message+"}",me,logger);
>>>>>                } catch (ExtractionException ee)
>>>>>                {
>>>>>                   throw new MessageSearchException("failed to  
>>>>> decode attachments in message {"+message+"}",ee,logger);
>>>>>                } catch (Exception e) {
>>>>>                    throw new MessageSearchException("failed to  
>>>>> index message",e,logger);
>>>>>                }
>>>>>                logger.debug("indexing message end {"+message+"}");
>>>>>                              long e = (new Date()).getTime();
>>>>>                logger.debug("indexing time {time='"+(e-s)+"'}");
>>>>>            }
>>>>>                          protected void closeIndex(IndexWriter  
>>>>> writer) {
>>>>>
>>>>>                       synchronized(indexLock) {
>>>>>                                                 if  
>>>>> (getAccessStatus()==AccessStatus.CLOSED)
>>>>>                                return;
>>>>>                                              try {
>>>>>                                if (writer!=null)
>>>>>                                    writer.close();
>>>>>                                try { Thread.sleep(50); } catch  
>>>>> (Exception e) {}
>>>>>                        } catch (Exception io) {}
>>>>>                        setAccessStatus(AccessStatus.CLOSED);
>>>>>                       }
>>>>>               }
>>>>>                      protected void finalize() throws Throwable {
>>>>>                logger.debug("volumeindex class is shutting down");
>>>>>                try {
>>>>>                    closeIndexTimer.cancel();
>>>>>                } finally {
>>>>>                super.finalize();
>>>>>                }
>>>>>            }
>>>>>                }
>>>>>
>>>>>>
>>>>>> Is it easy to reproduce?
>>>>> Its difficult to reproduce since the problem seems intermittant..
>>>>>> If so, can you call setInfoStream on your IndexWriter when  
>>>>>> creating this index and post the resulting output?
>>>>> I'll try this but I cannot guarantee anything. Do you see  
>>>>> anything obvious from the above?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Jamie wrote:
>>>>>>
>>>>>>>
>>>>>>> Hi There
>>>>>>>
>>>>>>> I am getting the following error while searching a given index:
>>>>>>>
>>>>>>> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No  
>>>>>>> such file or directory)
>>>>>>>        at java.io.RandomAccessFile.open(Native Method)
>>>>>>>        at java.io.RandomAccessFile.<init>(Unknown Source)
>>>>>>>        at org.apache.lucene.store.FSDirectory$FSIndexInput 
>>>>>>> $Descriptor.<init>(FSDirectory.java:506)
>>>>>>>        at org.apache.lucene.store.FSDirectory 
>>>>>>> $FSIndexInput.<init>(FSDirectory.java:536)
>>>>>>>        at org.apache.lucene.store.FSDirectory.openInput 
>>>>>>> (FSDirectory.java:445)
>>>>>>>        at org.apache.lucene.index.FieldsReader.<init> 
>>>>>>> (FieldsReader.java:75)
>>>>>>>        at org.apache.lucene.index.SegmentReader.initialize 
>>>>>>> (SegmentReader.java:308)
>>>>>>>        at org.apache.lucene.index.SegmentReader.get 
>>>>>>> (SegmentReader.java:262)
>>>>>>>        at org.apache.lucene.index.SegmentReader.get 
>>>>>>> (SegmentReader.java:197)
>>>>>>>        at org.apache.lucene.index.MultiSegmentReader.<init> 
>>>>>>> (MultiSegmentReader.java:55)
>>>>>>>        at org.apache.lucene.index.DirectoryIndexReader 
>>>>>>> $1.doBody(DirectoryIndexReader.java:75)
>>>>>>>        at org.apache.lucene.index.SegmentInfos 
>>>>>>> $FindSegmentsFile.run(SegmentInfos.java:636)
>>>>>>>        at org.apache.lucene.index.DirectoryIndexReader.open 
>>>>>>> (DirectoryIndexReader.java:63)
>>>>>>>        at org.apache.lucene.index.IndexReader.open 
>>>>>>> (IndexReader.java:209)
>>>>>>>        at org.apache.lucene.index.IndexReader.open 
>>>>>>> (IndexReader.java:173)
>>>>>>>        at org.apache.lucene.search.IndexSearcher.<init> 
>>>>>>> (IndexSearcher.java:48)
>>>>>>>
>>>>>>> My software used to work perfectly under earlier versions of  
>>>>>>> Lucene. Since I upgraded to 2.3.1, this problem has arisen.
>>>>>>>
>>>>>>> I seriously worried my customer's indexes will be corrupted.  
>>>>>>> Lucene expects to find a file that does not exist.
>>>>>>>
>>>>>>> Any ideas on what might be happening and how to rectify this?
>>>>>>>
>>>>>>> Jamie
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------- 
>>>>>>> -----
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> ----
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> -- 
>>>>> Stimulus Software - MailArchiva
>>>>> Email Archiving And Compliance
>>>>> USA Tel: +1-713-366-8072 ext 3
>>>>> UK Tel: +44-20-80991035 ext 3
>>>>> Email: jamie@stimulussoft.com
>>>>> Web: http://www.mailarchiva.com
>>>>>
>>>>> To receive MailArchiva Enterprise Edition product  
>>>>> announcements, send a message to: <mailarchiva-enterprise- 
>>>>> edition-subscribe@stimulussoft.com>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>
>>>
>>> -- 
>>> Stimulus Software - MailArchiva
>>> Email Archiving And Compliance
>>> USA Tel: +1-713-366-8072 ext 3
>>> UK Tel: +44-20-80991035 ext 3
>>> Email: jamie@stimulussoft.com
>>> Web: http://www.mailarchiva.com
>>>
>>> To receive MailArchiva Enterprise Edition product announcements,  
>>> send a message to: <mailarchiva-enterprise-edition- 
>>> subscribe@stimulussoft.com>
>>
>
>
> -- 
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> USA Tel: +1-713-366-8072 ext 3
> UK Tel: +44-20-80991035 ext 3
> Email: jamie@stimulussoft.com
> Web: http://www.mailarchiva.com
>
> To receive MailArchiva Enterprise Edition product announcements,  
> send a message to: <mailarchiva-enterprise-edition- 
> subscribe@stimulussoft.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:04:56 2008
Return-Path: <java-user-return-33203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80485 invoked from network); 18 Mar 2008 13:04:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:04:56 -0000
Received: (qmail 46539 invoked by uid 500); 18 Mar 2008 13:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46510 invoked by uid 500); 18 Mar 2008 13:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46499 invoked by uid 99); 18 Mar 2008 13:04:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:04:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:03:54 +0000
Received: (qmail 22235 invoked by uid 511); 18 Mar 2008 06:03:53 -0700
Received: from 41.243.209.81 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.209.81):SA:0(-0.4/5.0):. 
 Processed in 16.225316 secs); 18 Mar 2008 13:03:53 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.209.81):SA:0(-0.4/5.0):. Processed in 16.225316 secs Process 22225)
Received: from dsl-243-209-81.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.209.81)
  by stimulussoft.com with SMTP; 18 Mar 2008 06:03:37 -0700
Message-ID: <47DFBE6A.9030602@stimulussoft.com>
Date: Tue, 18 Mar 2008 15:06:50 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 Index Corruption?
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com> <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com> <47DFA39A.8040304@stimulussoft.com> <247C1A99-40B6-4F91-B920-594531F1A54D@mikemccandless.com> <47DFAE8B.2080308@stimulussoft.com> <1D0DEA08-E3B6-47CE-8514-25021090607E@mikemccandless.com> <47DFB2AE.1050000@stimulussoft.com> <D426A918-65AB-4B72-8953-7F61E52741AE@mikemccandless.com>
In-Reply-To: <D426A918-65AB-4B72-8953-7F61E52741AE@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-0.4 required=5.0

Michael McCandless wrote:
>
> Yes fdt/fdx hold stored fields.  When the first buffered document is 
> added these files are created.
>
> The only way they disappear (through Lucene's APIs) is if a writer is 
> opened on that directory, and, those files are not referenced by the 
> current segments file.  This is why I'm concerned about the "two 
> writers at a time" risk.  If a 2nd writer is opened while 1st one is 
> still open that would easily cause this issue, so triple check that 
> the messages you send to your logger on having to remove the 
> write.lock are definitely not happening when you hit this corruption.
I think you could be right.  I am going to try the following change:

 
      public void indexMessage(Email email) throws MessageSearchException {
          VolumeIndex volumeIndex = null;
          synchronized (volumeIndexLock) { // note here
              Volume volume = email.getEmailId().getVolume();
              volumeIndex = volumeIndexes.get(volume);
              if (volumeIndex!=null) {
                  volumeIndex.indexMessage(email);
              } else {
                  volumeIndex = new VolumeIndex(volume);
                  volumeIndexes.put(volume,volumeIndex);
              }
          }
          volumeIndex.indexMessage(email);
      }

>
> Can you post the output of "ls -l" on the corrupted index directory?
>
> One more possibility is that this file failed to be created in the 
> first place, yet, IndexWriter flushed the remaining _0.* files.  I can 
> see one code path that causes this, however, it only happens if you 
> open a new writer, you call addDocument, you hit an exception 
> specifically in the code trying to create the fdt file (eg something 
> like "too many open files"), then you close the writer.  I have a unit 
> test showing this particular exception would result in the _0.* files 
> you see in your index with fdt/fdx missing.  Are you really sure you 
> don't see any exceptions, perhaps from very long ago, against this 
> index, when calling addDocument?  If you are hitting this case, it's 
> already been fixed (this is LUCENE-1198) and backported to the 2.3 
> branch.  Are you able to checkout the current 2.3 branch and run your 
> test using the JAR from there?
>
> Since your index has much later segment files (_1.cfs, _j.cfs), these 
> exceptions could have happened quite a while back (many writers ago) 
> but then only detected when you finally opened a searcher.  So if 
> possible, look way back in your error logs...
>
> Mike
>
> Jamie wrote:
>
>> Hi Michael
>>
>> I've tried to reindex the index several times and no such luck. I've 
>> enabled lucene debugging as you suggested and will let you know as 
>> soon as I have more information. From what I've read, fdt files are 
>> used to hold field data. Could there be any reason why this file is 
>> not being written? Does Lucene recreate this file every time from 
>> scratch? Why would the file completely disappear?
>>
>> Jamie
>>
>>
>>
>> Michael McCandless wrote:
>>>
>>> One more thing: try running with asserts enabled (java -ea).  Lucene 
>>> has a number of assertions that may catch something sooner.
>>>
>>> Also: how often do you try to open a searcher?  Can you try opening 
>>> and then closing a searcher right after you close your writer?  
>>> (Just so we detect the corruption the moment it happens).
>>>
>>> Mike
>>>
>>> Jamie wrote:
>>>
>>>> Hi Michael
>>>>
>>>> Michael McCandless wrote:
>>>>>
>>>>> It looks like you ignore any IOException coming out of 
>>>>> IndexWriter.close?  Can you put some code in the catch clause 
>>>>> around writer.close to see if you are hitting some exception there?
>>>> Sure. I'll do that.
>>>>>
>>>>> Also, you forcefully remove the write lock if it's present.  But 
>>>>> are you absolutely certain there isn't another writer actually 
>>>>> writing to that index directory?
>>>> Yes. There is only ever one writer writing.
>>>>>
>>>>> Do you copy the index or alter it in some way?
>>>> No. absoutely not.
>>>>>   One strange thing in your directory listing was the file 
>>>>> "indexinfo", which isn't a Lucene index file.  Something else must 
>>>>> be writing that file.
>>>> Yes. I neglected to mentioned.... its used by my application to 
>>>> deal with multiple indexes.
>>>>>
>>>>> Mike
>>>>>
>>>>> Jamie wrote:
>>>>>
>>>>>> Hi Michael
>>>>>>
>>>>>> Sorry for the late reply. As you guessed, it missed my attention.
>>>>>>
>>>>>> Michael McCandless wrote:
>>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> Can you describe what led up to this?
>>>>>>
>>>>>> My application indexes emails. In this particular instance, I had 
>>>>>> reindexed all emails from their original sources. The error 
>>>>>> occurred while I was using a search to search through the index.
>>>>>>> Were there any exceptions when adding documents to the index?
>>>>>> I had a look through all my application debug logs and there were 
>>>>>> no exceptions outputted.
>>>>>>
>>>>>>>   Was the index newly created with 2.3.1 or created on 2.3.0 or 
>>>>>>> 2.2?
>>>>>> This index was created by v2.3.1
>>>>>>>
>>>>>>> What options are you using in your IndexWriter?
>>>>>>  See source code below:
>>>>>>
>>>>>>      public void indexMessage(Email email) throws 
>>>>>> MessageSearchException {
>>>>>>          Volume volume = email.getEmailId().getVolume();
>>>>>>          VolumeIndex volumeIndex = volumeIndexes.get(volume);
>>>>>>          if (volumeIndex!=null) {
>>>>>>              volumeIndex.indexMessage(email);
>>>>>>          } else {
>>>>>>              volumeIndex = new VolumeIndex(volume);
>>>>>>              volumeIndex.indexMessage(email);
>>>>>>              volumeIndexes.put(volume,volumeIndex);
>>>>>>          }
>>>>>>      }
>>>>>>          public class VolumeIndex {
>>>>>>                        IndexWriter writer;
>>>>>>                Volume volume;
>>>>>>                Timer closeIndexTimer = new Timer();
>>>>>>             AccessStatus volumeOpened = AccessStatus.CLOSED;
>>>>>>             Object indexLock = new Object();
>>>>>>                          public synchronized AccessStatus 
>>>>>> getAccessStatus() { return volumeOpened;}
>>>>>>
>>>>>>              public synchronized void 
>>>>>> setAccessStatus(AccessStatus volumeOpened) {
>>>>>>                  this.volumeOpened = volumeOpened;
>>>>>>             }
>>>>>>                            public VolumeIndex(Volume volume) {
>>>>>>                        this.volume = volume;
>>>>>>                      closeIndexTimer.scheduleAtFixedRate(new 
>>>>>> TimerTask() {
>>>>>>                        public void run() {
>>>>>>                             closeIndex(writer);
>>>>>>                        }
>>>>>>                    }, indexOpenTime, indexOpenTime);
>>>>>>                        }
>>>>>>
>>>>>>              protected void openIndex() throws 
>>>>>> MessageSearchException {
>>>>>>                  synchronized(indexLock) {
>>>>>>                        if (getAccessStatus()==AccessStatus.CLOSED) {
>>>>>>                            logger.debug("openIndex() index will 
>>>>>> be opened. it is currently closed.");
>>>>>>                            openIndex(false);
>>>>>>                            setAccessStatus(AccessStatus.OPEN);
>>>>>>                        } else
>>>>>>                            logger.debug("openIndex() did not 
>>>>>> bother opening index. it is already open.");
>>>>>>                  }
>>>>>>                              }
>>>>>>                          protected void openIndex(boolean retry) 
>>>>>> throws MessageSearchException {
>>>>>>                    if (volume == null)
>>>>>>                        throw new 
>>>>>> MessageSearchException("assertion failure: null volume",logger);
>>>>>>                    logger.debug("opening index for write 
>>>>>> {"+volume+"}");
>>>>>>                    prepareIndex(volume);
>>>>>>                    Index activeIndex = volume.getActiveIndex();
>>>>>>                    logger.debug("opening search index for write 
>>>>>> {indexpath='"+activeIndex.getPath()+"'}");
>>>>>>                    try {
>>>>>>                            writer = new 
>>>>>> IndexWriter(activeIndex.getPath(), analyzer);
>>>>>>                    } catch (IOException io)
>>>>>>                    {
>>>>>>                        if (!retry) {
>>>>>>                            // most obvious reason for error is 
>>>>>> that there is a lock on the index, due hard shutdown
>>>>>>                            // resolution delete the lock, and try 
>>>>>> again
>>>>>>                            logger.warn("failed to open search 
>>>>>> index for write. possible write lock due to hard system 
>>>>>> shutdown.",io);
>>>>>>                            logger.info("attempting recovery. 
>>>>>> deleting index lock file and retrying..");
>>>>>>                            File lockFile = new 
>>>>>> File(activeIndex.getPath()+File.separatorChar + "write.lock");
>>>>>>                            lockFile.delete();
>>>>>>                            try {
>>>>>>                                openIndex(true);
>>>>>>                            } catch (MessageSearchException mse) {
>>>>>>                                throw mse;
>>>>>>                            }
>>>>>>                        }
>>>>>>                        throw new MessageSearchException("failed 
>>>>>> to open/ index writer 
>>>>>> {location='"+activeIndex.getPath()+"'}",io,logger);
>>>>>>                    }
>>>>>>            }
>>>>>>
>>>>>>              public void prepareIndex(Volume volume) throws 
>>>>>> MessageSearchException {
>>>>>>                                if (volume==null)
>>>>>>                            throw new 
>>>>>> MessageSearchException("assertion failure: null volume",logger);
>>>>>>                                if 
>>>>>> (volume.getIndexPath().startsWith("rmi://"))
>>>>>>                          return;
>>>>>>                                          File indexDir = new 
>>>>>> File(volume.getIndexPath());
>>>>>>                  if (!indexDir.exists()) {
>>>>>>                    logger.info("index directory does not exist. 
>>>>>> will proceed with creation {location='" + volume.getIndexPath() + 
>>>>>> "'}");
>>>>>>                    boolean success = indexDir.mkdir();
>>>>>>                    if (!success)
>>>>>>                            throw new 
>>>>>> MessageSearchException("failed to create index directory 
>>>>>> {location='" + volume.getIndexPath() + "'}",logger);
>>>>>>                    logger.info("index directory successfully 
>>>>>> created {location='" + volume.getIndexPath() + "'}");
>>>>>>                  }
>>>>>>                        }
>>>>>>                        public void indexMessage(Email message) 
>>>>>> throws MessageSearchException  {
>>>>>>                long s = (new Date()).getTime();
>>>>>>                if (message == null)
>>>>>>                    throw new MessageSearchException("assertion 
>>>>>> failure: null message",logger);
>>>>>>                logger.debug("indexing message {"+message+"}");
>>>>>>                              Document doc = new Document();
>>>>>>                try {
>>>>>>                   
>>>>>> writeMessageToDocument(message,doc);                   String 
>>>>>> language = doc.get("lang");
>>>>>>                   if (language==null)
>>>>>>                       language = getIndexLanguage();
>>>>>>                           synchronized (indexLock) {
>>>>>>                               openIndex();
>>>>>>                               
>>>>>> writer.addDocument(doc,AnalyzerFactory.getAnalyzer(language,AnalyzerFactory.Operation.INDEX)); 
>>>>>>
>>>>>>                           }
>>>>>>                   logger.debug("message indexed successfully 
>>>>>> {"+message+",language='"+language+"'}");
>>>>>>                } catch (MessagingException me)
>>>>>>                {
>>>>>>                   throw new MessageSearchException("failed to 
>>>>>> decode message during indexing",me,logger);
>>>>>>                } catch (IOException me) {
>>>>>>                    throw new MessageSearchException("failed to 
>>>>>> index message {"+message+"}",me,logger);
>>>>>>                } catch (ExtractionException ee)
>>>>>>                {
>>>>>>                   throw new MessageSearchException("failed to 
>>>>>> decode attachments in message {"+message+"}",ee,logger);
>>>>>>                } catch (Exception e) {
>>>>>>                    throw new MessageSearchException("failed to 
>>>>>> index message",e,logger);
>>>>>>                }
>>>>>>                logger.debug("indexing message end {"+message+"}");
>>>>>>                              long e = (new Date()).getTime();
>>>>>>                logger.debug("indexing time {time='"+(e-s)+"'}");
>>>>>>            }
>>>>>>                          protected void closeIndex(IndexWriter 
>>>>>> writer) {
>>>>>>
>>>>>>                       synchronized(indexLock) {
>>>>>>                                                 if 
>>>>>> (getAccessStatus()==AccessStatus.CLOSED)
>>>>>>                                return;
>>>>>>                                              try {
>>>>>>                                if (writer!=null)
>>>>>>                                    writer.close();
>>>>>>                                try { Thread.sleep(50); } catch 
>>>>>> (Exception e) {}
>>>>>>                        } catch (Exception io) {}
>>>>>>                        setAccessStatus(AccessStatus.CLOSED);
>>>>>>                       }
>>>>>>               }
>>>>>>                      protected void finalize() throws Throwable {
>>>>>>                logger.debug("volumeindex class is shutting down");
>>>>>>                try {
>>>>>>                    closeIndexTimer.cancel();
>>>>>>                } finally {
>>>>>>                super.finalize();
>>>>>>                }
>>>>>>            }
>>>>>>                }
>>>>>>
>>>>>>>
>>>>>>> Is it easy to reproduce?
>>>>>> Its difficult to reproduce since the problem seems intermittant..
>>>>>>> If so, can you call setInfoStream on your IndexWriter when 
>>>>>>> creating this index and post the resulting output?
>>>>>> I'll try this but I cannot guarantee anything. Do you see 
>>>>>> anything obvious from the above?
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> Jamie wrote:
>>>>>>>
>>>>>>>>
>>>>>>>> Hi There
>>>>>>>>
>>>>>>>> I am getting the following error while searching a given index:
>>>>>>>>
>>>>>>>> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No such 
>>>>>>>> file or directory)
>>>>>>>>        at java.io.RandomAccessFile.open(Native Method)
>>>>>>>>        at java.io.RandomAccessFile.<init>(Unknown Source)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:308) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.MultiSegmentReader.<init>(MultiSegmentReader.java:55) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:75) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63) 
>>>>>>>>
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:173)
>>>>>>>>        at 
>>>>>>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:48) 
>>>>>>>>
>>>>>>>>
>>>>>>>> My software used to work perfectly under earlier versions of 
>>>>>>>> Lucene. Since I upgraded to 2.3.1, this problem has arisen.
>>>>>>>>
>>>>>>>> I seriously worried my customer's indexes will be corrupted. 
>>>>>>>> Lucene expects to find a file that does not exist.
>>>>>>>>
>>>>>>>> Any ideas on what might be happening and how to rectify this?
>>>>>>>>
>>>>>>>> Jamie
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:23:29 2008
Return-Path: <java-user-return-33204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89368 invoked from network); 18 Mar 2008 13:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:23:28 -0000
Received: (qmail 75827 invoked by uid 500); 18 Mar 2008 13:23:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75798 invoked by uid 500); 18 Mar 2008 13:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75787 invoked by uid 99); 18 Mar 2008 13:23:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:23:18 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:22:37 +0000
Received: by wf-out-1314.google.com with SMTP id 28so6235835wff.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 06:22:45 -0700 (PDT)
Received: by 10.142.142.16 with SMTP id p16mr891458wfd.176.1205846565739;
        Tue, 18 Mar 2008 06:22:45 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i38sm5165989wxd.28.2008.03.18.06.22.26
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 06:22:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47DFBE6A.9030602@stimulussoft.com>
References: <F023B4AFE64FC7419B5F2B6341BEC716281D6127FB@AMERICASMAIL01.internal.gxs.com> <47DEEBC4.7040500@stimulussoft.com> <D11754D6-37B1-44CD-8F4B-5C7BFAC63873@mikemccandless.com> <47DFA39A.8040304@stimulussoft.com> <247C1A99-40B6-4F91-B920-594531F1A54D@mikemccandless.com> <47DFAE8B.2080308@stimulussoft.com> <1D0DEA08-E3B6-47CE-8514-25021090607E@mikemccandless.com> <47DFB2AE.1050000@stimulussoft.com> <D426A918-65AB-4B72-8953-7F61E52741AE@mikemccandless.com> <47DFBE6A.9030602@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9484AFD7-D1FD-4567-8C78-75C1B2D4133B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.1 Index Corruption?
Date: Tue, 18 Mar 2008 09:22:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

OK, opening two writers at once is definitely a recipe for disaster.

Please post back on whether this does or doesn't resolve it.

Previous versions of Lucene didn't write the fdt/fdx files until a  
segment is flushed, so it's possible you escaped index corruption  
(but, lost documents) before.  But with 2.3, Lucene has become more  
sensitive to two writers at once.

Mike

Jamie wrote:

> Michael McCandless wrote:
>>
>> Yes fdt/fdx hold stored fields.  When the first buffered document  
>> is added these files are created.
>>
>> The only way they disappear (through Lucene's APIs) is if a writer  
>> is opened on that directory, and, those files are not referenced  
>> by the current segments file.  This is why I'm concerned about the  
>> "two writers at a time" risk.  If a 2nd writer is opened while 1st  
>> one is still open that would easily cause this issue, so triple  
>> check that the messages you send to your logger on having to  
>> remove the write.lock are definitely not happening when you hit  
>> this corruption.
> I think you could be right.  I am going to try the following change:
>
>      public void indexMessage(Email email) throws  
> MessageSearchException {
>          VolumeIndex volumeIndex = null;
>          synchronized (volumeIndexLock) { // note here
>              Volume volume = email.getEmailId().getVolume();
>              volumeIndex = volumeIndexes.get(volume);
>              if (volumeIndex!=null) {
>                  volumeIndex.indexMessage(email);
>              } else {
>                  volumeIndex = new VolumeIndex(volume);
>                  volumeIndexes.put(volume,volumeIndex);
>              }
>          }
>          volumeIndex.indexMessage(email);
>      }
>
>>
>> Can you post the output of "ls -l" on the corrupted index directory?
>>
>> One more possibility is that this file failed to be created in the  
>> first place, yet, IndexWriter flushed the remaining _0.* files.  I  
>> can see one code path that causes this, however, it only happens  
>> if you open a new writer, you call addDocument, you hit an  
>> exception specifically in the code trying to create the fdt file  
>> (eg something like "too many open files"), then you close the  
>> writer.  I have a unit test showing this particular exception  
>> would result in the _0.* files you see in your index with fdt/fdx  
>> missing.  Are you really sure you don't see any exceptions,  
>> perhaps from very long ago, against this index, when calling  
>> addDocument?  If you are hitting this case, it's already been  
>> fixed (this is LUCENE-1198) and backported to the 2.3 branch.  Are  
>> you able to checkout the current 2.3 branch and run your test  
>> using the JAR from there?
>>
>> Since your index has much later segment files (_1.cfs, _j.cfs),  
>> these exceptions could have happened quite a while back (many  
>> writers ago) but then only detected when you finally opened a  
>> searcher.  So if possible, look way back in your error logs...
>>
>> Mike
>>
>> Jamie wrote:
>>
>>> Hi Michael
>>>
>>> I've tried to reindex the index several times and no such luck.  
>>> I've enabled lucene debugging as you suggested and will let you  
>>> know as soon as I have more information. From what I've read, fdt  
>>> files are used to hold field data. Could there be any reason why  
>>> this file is not being written? Does Lucene recreate this file  
>>> every time from scratch? Why would the file completely disappear?
>>>
>>> Jamie
>>>
>>>
>>>
>>> Michael McCandless wrote:
>>>>
>>>> One more thing: try running with asserts enabled (java -ea).   
>>>> Lucene has a number of assertions that may catch something sooner.
>>>>
>>>> Also: how often do you try to open a searcher?  Can you try  
>>>> opening and then closing a searcher right after you close your  
>>>> writer?  (Just so we detect the corruption the moment it happens).
>>>>
>>>> Mike
>>>>
>>>> Jamie wrote:
>>>>
>>>>> Hi Michael
>>>>>
>>>>> Michael McCandless wrote:
>>>>>>
>>>>>> It looks like you ignore any IOException coming out of  
>>>>>> IndexWriter.close?  Can you put some code in the catch clause  
>>>>>> around writer.close to see if you are hitting some exception  
>>>>>> there?
>>>>> Sure. I'll do that.
>>>>>>
>>>>>> Also, you forcefully remove the write lock if it's present.   
>>>>>> But are you absolutely certain there isn't another writer  
>>>>>> actually writing to that index directory?
>>>>> Yes. There is only ever one writer writing.
>>>>>>
>>>>>> Do you copy the index or alter it in some way?
>>>>> No. absoutely not.
>>>>>>   One strange thing in your directory listing was the file  
>>>>>> "indexinfo", which isn't a Lucene index file.  Something else  
>>>>>> must be writing that file.
>>>>> Yes. I neglected to mentioned.... its used by my application to  
>>>>> deal with multiple indexes.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Jamie wrote:
>>>>>>
>>>>>>> Hi Michael
>>>>>>>
>>>>>>> Sorry for the late reply. As you guessed, it missed my  
>>>>>>> attention.
>>>>>>>
>>>>>>> Michael McCandless wrote:
>>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> Can you describe what led up to this?
>>>>>>>
>>>>>>> My application indexes emails. In this particular instance, I  
>>>>>>> had reindexed all emails from their original sources. The  
>>>>>>> error occurred while I was using a search to search through  
>>>>>>> the index.
>>>>>>>> Were there any exceptions when adding documents to the index?
>>>>>>> I had a look through all my application debug logs and there  
>>>>>>> were no exceptions outputted.
>>>>>>>
>>>>>>>>   Was the index newly created with 2.3.1 or created on 2.3.0  
>>>>>>>> or 2.2?
>>>>>>> This index was created by v2.3.1
>>>>>>>>
>>>>>>>> What options are you using in your IndexWriter?
>>>>>>>  See source code below:
>>>>>>>
>>>>>>>      public void indexMessage(Email email) throws  
>>>>>>> MessageSearchException {
>>>>>>>          Volume volume = email.getEmailId().getVolume();
>>>>>>>          VolumeIndex volumeIndex = volumeIndexes.get(volume);
>>>>>>>          if (volumeIndex!=null) {
>>>>>>>              volumeIndex.indexMessage(email);
>>>>>>>          } else {
>>>>>>>              volumeIndex = new VolumeIndex(volume);
>>>>>>>              volumeIndex.indexMessage(email);
>>>>>>>              volumeIndexes.put(volume,volumeIndex);
>>>>>>>          }
>>>>>>>      }
>>>>>>>          public class VolumeIndex {
>>>>>>>                        IndexWriter writer;
>>>>>>>                Volume volume;
>>>>>>>                Timer closeIndexTimer = new Timer();
>>>>>>>             AccessStatus volumeOpened = AccessStatus.CLOSED;
>>>>>>>             Object indexLock = new Object();
>>>>>>>                          public synchronized AccessStatus  
>>>>>>> getAccessStatus() { return volumeOpened;}
>>>>>>>
>>>>>>>              public synchronized void setAccessStatus 
>>>>>>> (AccessStatus volumeOpened) {
>>>>>>>                  this.volumeOpened = volumeOpened;
>>>>>>>             }
>>>>>>>                            public VolumeIndex(Volume volume) {
>>>>>>>                        this.volume = volume;
>>>>>>>                      closeIndexTimer.scheduleAtFixedRate(new  
>>>>>>> TimerTask() {
>>>>>>>                        public void run() {
>>>>>>>                             closeIndex(writer);
>>>>>>>                        }
>>>>>>>                    }, indexOpenTime, indexOpenTime);
>>>>>>>                        }
>>>>>>>
>>>>>>>              protected void openIndex() throws  
>>>>>>> MessageSearchException {
>>>>>>>                  synchronized(indexLock) {
>>>>>>>                        if (getAccessStatus() 
>>>>>>> ==AccessStatus.CLOSED) {
>>>>>>>                            logger.debug("openIndex() index  
>>>>>>> will be opened. it is currently closed.");
>>>>>>>                            openIndex(false);
>>>>>>>                            setAccessStatus(AccessStatus.OPEN);
>>>>>>>                        } else
>>>>>>>                            logger.debug("openIndex() did not  
>>>>>>> bother opening index. it is already open.");
>>>>>>>                  }
>>>>>>>                              }
>>>>>>>                          protected void openIndex(boolean  
>>>>>>> retry) throws MessageSearchException {
>>>>>>>                    if (volume == null)
>>>>>>>                        throw new MessageSearchException 
>>>>>>> ("assertion failure: null volume",logger);
>>>>>>>                    logger.debug("opening index for write  
>>>>>>> {"+volume+"}");
>>>>>>>                    prepareIndex(volume);
>>>>>>>                    Index activeIndex = volume.getActiveIndex();
>>>>>>>                    logger.debug("opening search index for  
>>>>>>> write {indexpath='"+activeIndex.getPath()+"'}");
>>>>>>>                    try {
>>>>>>>                            writer = new IndexWriter 
>>>>>>> (activeIndex.getPath(), analyzer);
>>>>>>>                    } catch (IOException io)
>>>>>>>                    {
>>>>>>>                        if (!retry) {
>>>>>>>                            // most obvious reason for error  
>>>>>>> is that there is a lock on the index, due hard shutdown
>>>>>>>                            // resolution delete the lock, and  
>>>>>>> try again
>>>>>>>                            logger.warn("failed to open search  
>>>>>>> index for write. possible write lock due to hard system  
>>>>>>> shutdown.",io);
>>>>>>>                            logger.info("attempting recovery.  
>>>>>>> deleting index lock file and retrying..");
>>>>>>>                            File lockFile = new File 
>>>>>>> (activeIndex.getPath()+File.separatorChar + "write.lock");
>>>>>>>                            lockFile.delete();
>>>>>>>                            try {
>>>>>>>                                openIndex(true);
>>>>>>>                            } catch (MessageSearchException  
>>>>>>> mse) {
>>>>>>>                                throw mse;
>>>>>>>                            }
>>>>>>>                        }
>>>>>>>                        throw new MessageSearchException 
>>>>>>> ("failed to open/ index writer  
>>>>>>> {location='"+activeIndex.getPath()+"'}",io,logger);
>>>>>>>                    }
>>>>>>>            }
>>>>>>>
>>>>>>>              public void prepareIndex(Volume volume) throws  
>>>>>>> MessageSearchException {
>>>>>>>                                if (volume==null)
>>>>>>>                            throw new MessageSearchException 
>>>>>>> ("assertion failure: null volume",logger);
>>>>>>>                                if (volume.getIndexPath 
>>>>>>> ().startsWith("rmi://"))
>>>>>>>                          return;
>>>>>>>                                          File indexDir = new  
>>>>>>> File(volume.getIndexPath());
>>>>>>>                  if (!indexDir.exists()) {
>>>>>>>                    logger.info("index directory does not  
>>>>>>> exist. will proceed with creation {location='" +  
>>>>>>> volume.getIndexPath() + "'}");
>>>>>>>                    boolean success = indexDir.mkdir();
>>>>>>>                    if (!success)
>>>>>>>                            throw new MessageSearchException 
>>>>>>> ("failed to create index directory {location='" +  
>>>>>>> volume.getIndexPath() + "'}",logger);
>>>>>>>                    logger.info("index directory successfully  
>>>>>>> created {location='" + volume.getIndexPath() + "'}");
>>>>>>>                  }
>>>>>>>                        }
>>>>>>>                        public void indexMessage(Email  
>>>>>>> message) throws MessageSearchException  {
>>>>>>>                long s = (new Date()).getTime();
>>>>>>>                if (message == null)
>>>>>>>                    throw new MessageSearchException 
>>>>>>> ("assertion failure: null message",logger);
>>>>>>>                logger.debug("indexing message {"+message+"}");
>>>>>>>                              Document doc = new Document();
>>>>>>>                try {
>>>>>>>                   writeMessageToDocument 
>>>>>>> (message,doc);                   String language = doc.get 
>>>>>>> ("lang");
>>>>>>>                   if (language==null)
>>>>>>>                       language = getIndexLanguage();
>>>>>>>                           synchronized (indexLock) {
>>>>>>>                               openIndex();
>>>>>>>                               writer.addDocument 
>>>>>>> (doc,AnalyzerFactory.getAnalyzer 
>>>>>>> (language,AnalyzerFactory.Operation.INDEX));
>>>>>>>                           }
>>>>>>>                   logger.debug("message indexed successfully  
>>>>>>> {"+message+",language='"+language+"'}");
>>>>>>>                } catch (MessagingException me)
>>>>>>>                {
>>>>>>>                   throw new MessageSearchException("failed to  
>>>>>>> decode message during indexing",me,logger);
>>>>>>>                } catch (IOException me) {
>>>>>>>                    throw new MessageSearchException("failed  
>>>>>>> to index message {"+message+"}",me,logger);
>>>>>>>                } catch (ExtractionException ee)
>>>>>>>                {
>>>>>>>                   throw new MessageSearchException("failed to  
>>>>>>> decode attachments in message {"+message+"}",ee,logger);
>>>>>>>                } catch (Exception e) {
>>>>>>>                    throw new MessageSearchException("failed  
>>>>>>> to index message",e,logger);
>>>>>>>                }
>>>>>>>                logger.debug("indexing message end {"+message 
>>>>>>> +"}");
>>>>>>>                              long e = (new Date()).getTime();
>>>>>>>                logger.debug("indexing time {time='"+(e-s)+"'}");
>>>>>>>            }
>>>>>>>                          protected void closeIndex 
>>>>>>> (IndexWriter writer) {
>>>>>>>
>>>>>>>                       synchronized(indexLock) {
>>>>>>>                                                 if  
>>>>>>> (getAccessStatus()==AccessStatus.CLOSED)
>>>>>>>                                return;
>>>>>>>                                              try {
>>>>>>>                                if (writer!=null)
>>>>>>>                                    writer.close();
>>>>>>>                                try { Thread.sleep(50); }  
>>>>>>> catch (Exception e) {}
>>>>>>>                        } catch (Exception io) {}
>>>>>>>                        setAccessStatus(AccessStatus.CLOSED);
>>>>>>>                       }
>>>>>>>               }
>>>>>>>                      protected void finalize() throws  
>>>>>>> Throwable {
>>>>>>>                logger.debug("volumeindex class is shutting  
>>>>>>> down");
>>>>>>>                try {
>>>>>>>                    closeIndexTimer.cancel();
>>>>>>>                } finally {
>>>>>>>                super.finalize();
>>>>>>>                }
>>>>>>>            }
>>>>>>>                }
>>>>>>>
>>>>>>>>
>>>>>>>> Is it easy to reproduce?
>>>>>>> Its difficult to reproduce since the problem seems  
>>>>>>> intermittant..
>>>>>>>> If so, can you call setInfoStream on your IndexWriter when  
>>>>>>>> creating this index and post the resulting output?
>>>>>>> I'll try this but I cannot guarantee anything. Do you see  
>>>>>>> anything obvious from the above?
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> Jamie wrote:
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi There
>>>>>>>>>
>>>>>>>>> I am getting the following error while searching a given  
>>>>>>>>> index:
>>>>>>>>>
>>>>>>>>> java.io.FileNotFoundException: /usr/local/index/_0.fdt (No  
>>>>>>>>> such file or directory)
>>>>>>>>>        at java.io.RandomAccessFile.open(Native Method)
>>>>>>>>>        at java.io.RandomAccessFile.<init>(Unknown Source)
>>>>>>>>>        at org.apache.lucene.store.FSDirectory$FSIndexInput 
>>>>>>>>> $Descriptor.<init>(FSDirectory.java:506)
>>>>>>>>>        at org.apache.lucene.store.FSDirectory 
>>>>>>>>> $FSIndexInput.<init>(FSDirectory.java:536)
>>>>>>>>>        at org.apache.lucene.store.FSDirectory.openInput 
>>>>>>>>> (FSDirectory.java:445)
>>>>>>>>>        at org.apache.lucene.index.FieldsReader.<init> 
>>>>>>>>> (FieldsReader.java:75)
>>>>>>>>>        at org.apache.lucene.index.SegmentReader.initialize 
>>>>>>>>> (SegmentReader.java:308)
>>>>>>>>>        at org.apache.lucene.index.SegmentReader.get 
>>>>>>>>> (SegmentReader.java:262)
>>>>>>>>>        at org.apache.lucene.index.SegmentReader.get 
>>>>>>>>> (SegmentReader.java:197)
>>>>>>>>>        at org.apache.lucene.index.MultiSegmentReader.<init> 
>>>>>>>>> (MultiSegmentReader.java:55)
>>>>>>>>>        at org.apache.lucene.index.DirectoryIndexReader 
>>>>>>>>> $1.doBody(DirectoryIndexReader.java:75)
>>>>>>>>>        at org.apache.lucene.index.SegmentInfos 
>>>>>>>>> $FindSegmentsFile.run(SegmentInfos.java:636)
>>>>>>>>>        at org.apache.lucene.index.DirectoryIndexReader.open 
>>>>>>>>> (DirectoryIndexReader.java:63)
>>>>>>>>>        at org.apache.lucene.index.IndexReader.open 
>>>>>>>>> (IndexReader.java:209)
>>>>>>>>>        at org.apache.lucene.index.IndexReader.open 
>>>>>>>>> (IndexReader.java:173)
>>>>>>>>>        at org.apache.lucene.search.IndexSearcher.<init> 
>>>>>>>>> (IndexSearcher.java:48)
>>>>>>>>>
>>>>>>>>> My software used to work perfectly under earlier versions  
>>>>>>>>> of Lucene. Since I upgraded to 2.3.1, this problem has arisen.
>>>>>>>>>
>>>>>>>>> I seriously worried my customer's indexes will be  
>>>>>>>>> corrupted. Lucene expects to find a file that does not exist.
>>>>>>>>>
>>>>>>>>> Any ideas on what might be happening and how to rectify this?
>>>>>>>>>
>>>>>>>>> Jamie
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -------------------------------------------------------------- 
>>>>>>>>> -------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>>> help@lucene.apache.org
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> ------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:24:21 2008
Return-Path: <java-user-return-33205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89841 invoked from network); 18 Mar 2008 13:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:24:21 -0000
Received: (qmail 77718 invoked by uid 500); 18 Mar 2008 13:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77687 invoked by uid 500); 18 Mar 2008 13:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77676 invoked by uid 99); 18 Mar 2008 13:24:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:24:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:23:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jbbmk-0002Vn-6i
	for java-user@lucene.apache.org; Tue, 18 Mar 2008 06:23:22 -0700
Message-ID: <16121128.post@talk.nabble.com>
Date: Tue, 18 Mar 2008 06:23:22 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.OutOfMemoryError: Java heap space when sorting the fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


this is my search content

QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
Query query = parser.parse("1"); 

Sort sort = new Sort(new SortField(sortField));
         Hits       hits = searcher.search(query,sort); 

And i had huge data about 13 millions of records
i am not sure y its giving outof memory exception and 
no exception when no sorting is done
plz some one help me yar 

and also if to increase heap space how to increase it programatically i had
command prompt
java -Xms<initial heap size> -Xmx<maximum heap size>
please.....
-- 
View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16121128.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:25:06 2008
Return-Path: <java-user-return-33206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90406 invoked from network); 18 Mar 2008 13:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:25:06 -0000
Received: (qmail 80750 invoked by uid 500); 18 Mar 2008 13:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80723 invoked by uid 500); 18 Mar 2008 13:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80712 invoked by uid 99); 18 Mar 2008 13:24:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:24:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:24:12 +0000
Received: by ug-out-1314.google.com with SMTP id u40so769336ugc.29
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 06:24:08 -0700 (PDT)
Received: by 10.143.1.2 with SMTP id d2mr896245wfi.91.1205846646809;
        Tue, 18 Mar 2008 06:24:06 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i19sm1617391wxd.33.2008.03.18.06.23.59
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 06:24:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6243C6F9-EB96-431F-A554-288F0F522F11@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 09:24:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


One question: do you know whether 67,861 docs "feels like" a newly  
flushed segment, or, the result of a merge?

Ie, roughly how many docs are you buffering in IndexWriter before it  
flushes?  Are they very small documents and your RAM buffer is large?

Mike

Ian Lea wrote:

> Hi
>
>
> When bulk loading into a new index I'm seeing this exception
>
> Exception in thread "Thread-1"
> org.apache.lucene.index.MergePolicy$MergeException:
> org.apache.lucene.index.CorruptIndexException: doc counts differ for
> segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
> 	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run 
> (ConcurrentMergeScheduler.java:271)
> Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
> differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
> 67862
> 	at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:313)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3093)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
> 	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run 
> (ConcurrentMergeScheduler.java:240)
>
> when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
> lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>
> With java version 1.6.0_03-b05 things work fine.
>
> The exception happens a few hundred thousand documents into the load.
>
> A different program updating a different index with different data on
> a different server gave a similar error on version 1.6.0_05-b13 and
> lucene 2.3.0.
>
>
> Any ideas?  Is this maybe a known issue or am I missing something  
> obvious?
>
>
>
> --
> Ian.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:35:07 2008
Return-Path: <java-user-return-33207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96341 invoked from network); 18 Mar 2008 13:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:35:07 -0000
Received: (qmail 98394 invoked by uid 500); 18 Mar 2008 13:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98364 invoked by uid 500); 18 Mar 2008 13:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98353 invoked by uid 99); 18 Mar 2008 13:34:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:34:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.162.181 as permitted sender)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:34:20 +0000
Received: by el-out-1112.google.com with SMTP id y26so2921042ele.4
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 06:33:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=9m9Zj0Hjb2evu9t01p4e5rdBB4OeEYLyewPwcDmyaxk=;
        b=Ga419c86Q2eIvokqqbsomzo3WZ5N7/+mQjHzSLbDxVEFeRTZquJYBzrgY8Z3L8eSDt6DBP9qW40j17Y1wVwCsGsdMcZWmccljOZAIi+Yfy2tPD9wYC9nFbaqrariBlooc/Svcf2zfMWzq48Dcu42ERkdcuhI4wk2ZEz/b3p6VsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FeNnec2SdmZigJTIFLuADbDuRlLU1o74R7YjWhyc30mLN599No+v1qyp8b5Lm9kzu/G+TLRPwR+k0Zb5J0l/mJcG25fAlbssiC/BnxIAFCVKfQ2/pCOu2wWc4RTfO4WDNsNlrBGdpSxzEnQu3xIjmH3iwNwciTVkLpLPZbalnBo=
Received: by 10.114.88.1 with SMTP id l1mr1571777wab.126.1205847225601;
        Tue, 18 Mar 2008 06:33:45 -0700 (PDT)
Received: by 10.114.46.15 with HTTP; Tue, 18 Mar 2008 06:33:44 -0700 (PDT)
Message-ID: <8c4e68610803180633g3db3abcfn517ea9dbb51db76b@mail.gmail.com>
Date: Tue, 18 Mar 2008 13:33:44 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CorruptIndexException with some versions of java
In-Reply-To: <6243C6F9-EB96-431F-A554-288F0F522F11@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
	 <6243C6F9-EB96-431F-A554-288F0F522F11@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The data is loaded in chunks of up to 100K docs in separate runs of
the program if that helps answer the first question.  All buffers have
default values, docs are small but not tiny, JVM is running with
default settings.

Answers to previous questions, and infostream, will follow once the
job has failed again.


--
Ian.


On Tue, Mar 18, 2008 at 1:24 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  One question: do you know whether 67,861 docs "feels like" a newly
>  flushed segment, or, the result of a merge?
>
>  Ie, roughly how many docs are you buffering in IndexWriter before it
>  flushes?  Are they very small documents and your RAM buffer is large?
>
>  Mike
>
>
>
>  Ian Lea wrote:
>
>  > Hi
>  >
>  >
>  > When bulk loading into a new index I'm seeing this exception
>  >
>  > Exception in thread "Thread-1"
>  > org.apache.lucene.index.MergePolicy$MergeException:
>  > org.apache.lucene.index.CorruptIndexException: doc counts differ for
>  > segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>  >       at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run
>  > (ConcurrentMergeScheduler.java:271)
>  > Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
>  > differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
>  > 67862
>  >       at org.apache.lucene.index.SegmentReader.initialize
>  > (SegmentReader.java:313)
>  >       at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>  >       at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>  >       at org.apache.lucene.index.IndexWriter.mergeMiddle
>  > (IndexWriter.java:3093)
>  >       at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
>  >       at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run
>  > (ConcurrentMergeScheduler.java:240)
>  >
>  > when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  > lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>  >
>  > With java version 1.6.0_03-b05 things work fine.
>  >
>  > The exception happens a few hundred thousand documents into the load.
>  >
>  > A different program updating a different index with different data on
>  > a different server gave a similar error on version 1.6.0_05-b13 and
>  > lucene 2.3.0.
>  >
>  >
>  > Any ideas?  Is this maybe a known issue or am I missing something
>  > obvious?
>  >
>  >
>  >
>  > --
>  > Ian.
>  >
>
>
> > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:54:07 2008
Return-Path: <java-user-return-33208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7355 invoked from network); 18 Mar 2008 13:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:54:06 -0000
Received: (qmail 36835 invoked by uid 500); 18 Mar 2008 13:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36806 invoked by uid 500); 18 Mar 2008 13:53:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36795 invoked by uid 99); 18 Mar 2008 13:53:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:53:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:53:19 +0000
Received: by el-out-1112.google.com with SMTP id y26so2928919ele.4
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 06:53:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=EdhkMWTDtRNO1y2MEbauPt7mW324x4b7LRQk2S570Ss=;
        b=RXci8FbkIpuxR1pZAbQUd0x+w2ARIjPx/eUZIALuSUJnsMYwswc87Ok4GoIH/o36ZhJM/OCt78OJJKuwDnrSXQJ7YnFfZnCG2lUwYMHh65taBZpT3eFhWNNHT4O9oAgDlY8ahRi0Zzwyg8AYBHZJh1MF4vQCO4Cs3BbiLp/ll2A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sc1vZYgEuLbPLhSfbs5WdWlWTJJoDMKK0p0zCUWpHJlZvoIBpjTKk4W5ZMIawUUHciahcPMJgcRMfGN3FG4lL1e8dcszLy9T/qceSqJ7CgIkCNoqeCeSEkTGsyN+pa4ov/To+TCi3iyjM6Ye2i7TehPvnvGrY8QAEzm3x4cSPDg=
Received: by 10.114.111.1 with SMTP id j1mr1595450wac.141.1205848395989;
        Tue, 18 Mar 2008 06:53:15 -0700 (PDT)
Received: by 10.114.46.15 with HTTP; Tue, 18 Mar 2008 06:53:15 -0700 (PDT)
Message-ID: <8c4e68610803180653i61a0215am5f1a7992e21e7087@mail.gmail.com>
Date: Tue, 18 Mar 2008 13:53:15 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CorruptIndexException with some versions of java
In-Reply-To: <58513B21-71E4-421E-8CD6-43E1A186D162@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_188_15263056.1205848395961"
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
	 <58513B21-71E4-421E-8CD6-43E1A186D162@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_188_15263056.1205848395961
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Documents are biblio records.  All have title, author etc. stored,
some have a few extra fields as well.  Typically around 25 fields per
doc.  The index is created with compound format, everything else as
default.

I've rerun the job until failure.  Different numbers this time, but
basically the same exception. In the failing pass it was trying to
load 100K docs.

Exception in thread "Thread-1"
org.apache.lucene.index.MergePolicy$MergeException:
org.apache.lucene.index.CorruptIndexException: doc counts differ for
segment _cb: fieldsReader shows 71663 but segmentInfo shows 71664
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
differ for segment _cb: fieldsReader shows 71663 but segmentInfo shows
 71664
        at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3099)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)

As mentioned, the index is loaded in chunks - the infostream from the
failing pass is attached. All infostreams from all 19 odd runs leading
up to the failure available as well if that would help.


Running with -ea doesn't seem to have made any difference.


--
Ian.


On Tue, Mar 18, 2008 at 12:09 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  Can you call IndexWriter.setInfoStream(...) and get the error to
>  happen and post back the resulting output?  And, turn on assertions
>  (java -ea) since that may catch the issue sooner.
>
>  Can you describe you are setting up IndexWriter (autoCommit,
>  compound, etc.), and what your documents are like?  Do your documents
>  have a fixed schema (same fields every time), or it varies such that
>  some documents have no stored fields and some do?
>
>  Mike
>
>
>
>  Ian Lea wrote:
>
>  > Hi
>  >
>  >
>  > When bulk loading into a new index I'm seeing this exception
>  >
>  > Exception in thread "Thread-1"
>  > org.apache.lucene.index.MergePolicy$MergeException:
>  > org.apache.lucene.index.CorruptIndexException: doc counts differ for
>  > segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>  >       at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run
>  > (ConcurrentMergeScheduler.java:271)
>  > Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
>  > differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
>  > 67862
>  >       at org.apache.lucene.index.SegmentReader.initialize
>  > (SegmentReader.java:313)
>  >       at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>  >       at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>  >       at org.apache.lucene.index.IndexWriter.mergeMiddle
>  > (IndexWriter.java:3093)
>  >       at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
>  >       at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run
>  > (ConcurrentMergeScheduler.java:240)
>  >
>  > when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  > lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>  >
>  > With java version 1.6.0_03-b05 things work fine.
>  >
>  > The exception happens a few hundred thousand documents into the load.
>  >
>  > A different program updating a different index with different data on
>  > a different server gave a similar error on version 1.6.0_05-b13 and
>  > lucene 2.3.0.
>  >
>  >
>  > Any ideas?  Is this maybe a known issue or am I missing something
>  > obvious?
>  >
>  >
>  >
>  > --
>  > Ian.
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


------=_Part_188_15263056.1205848395961
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_188_15263056.1205848395961--

From java-user-return-33209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 13:58:37 2008
Return-Path: <java-user-return-33209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9705 invoked from network); 18 Mar 2008 13:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 13:58:37 -0000
Received: (qmail 49496 invoked by uid 500); 18 Mar 2008 13:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49467 invoked by uid 500); 18 Mar 2008 13:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49456 invoked by uid 99); 18 Mar 2008 13:58:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 06:58:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Mar 2008 13:57:39 +0000
Received: (qmail 26823 invoked by uid 60001); 18 Mar 2008 13:57:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=G3xfqV522V9Deqzwa+GHFBwuvqb/kpdSVL05lkcGNp9lshaqBVGxLuHHVRIqdFAOW6N2+Iq8HCCyTtOX9+SmGOA4vmHCk27Y26EFq9nvdXEZo2gLph/emPKfNcv03SdPW0r8+vK9n6jVXIKK8nzQT31MAD3JU06HZg1IRXaQUi0=;
X-YMail-OSG: yjSTjK4VM1loZ8rLPNPdm3AA.xd55SwE4RxTtwmKT7kdXUCCaNHzFezJ3B8EtPrBuWEibj01KUmHCaAU4Lyzha3_HbmQmHbqOex6SkGPhyRxAPs4b6V_C0SqxEY-
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Tue, 18 Mar 2008 13:57:57 GMT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.162
Date: Tue, 18 Mar 2008 13:57:57 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: PriorityQueue - something to watch for when using paging
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <714111.16155.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I came across an interesting quirk when using Lucene's PriorityQueue. =0AIt=
's not a bug per se but I thought it might be worth logging here if anyone =
else experiences it.=0A=0AI was using a PriorityQueue to support a GUI that=
 pages through the top terms in an index. It was observed that terms were o=
ften duplicated from one page to the next.=0AI can imagine other PriorityQu=
eue usage scenarios where this could be a problem e.g. a document is seen t=
o be shown on more than one page of search results.=0A=0A=0AIn my scenario =
the PriorityQueue was sized to be (pageNumber x pageSize) so given a pageSi=
ze of ten results the PriorityQueue size used to serve pages 1, 2 and 3 wou=
ld be 10, 20 and 30 respectively.=0AHaving accumulated the PriorityQueue on=
ly the last 10 results are shown i.e. 1 to 10, 11 to 20 and 21 to 30.=0AIn =
order to avoid excessive object allocation an "if currentValue > lowestValu=
e" check was used where lowest value is maintained after each insertion.=0A=
=0ASo far, so familiar. This practice is used all over.=0A=0AWhy then, was =
this leading to results moving position and why don't we see this problem e=
lsewhere? =0AWhy this happens I'll come to in a minute but I suspect the re=
ason we don't often see this elsewhere is because it only occurs when the s=
core values are duplicated. The score value used in query results is typica=
lly different for each document so is not usually a problem but if you are =
unlucky enough to have a query that produces similar scoresI would anticipa=
te you may see this. Unfortunately in my dataset the values are often dupli=
cated e.g. several "top" terms that have a document frequency of 8. =0A=0AT=
he reason this happens is that the PriorityQueue size is different for each=
 page request. For the first page request the queue size is small and there=
fore the "quality" of results in the set is high and because we use the "if=
 currentValue>lowestValue" check not all items will be passed to the insert=
 method to be ranked. This means a duplicate scored term towards the end of=
 the list of terms may not make it into the selected set because by then th=
e queue is fully populated with higher quality items. When the page number =
increases, so does the required PriorityQueue size. This larger queue size =
now means that by the time we get to our duplicate scored term it now passe=
s the (if currentValue>lowestValue) check and an insert is performed runnin=
g the associated ranking logic.  =0AWhat this means is that the exact ranki=
ng order of the same set of entries will vary dependent on the PriorityQueu=
e size used to analyse them.=0A=0AI changed my code to make the "if current=
Value > lowestValue" check to be ">=3D" which I hoped would force a consist=
ent ranking, independent of queue size. This removed some of the duplicatio=
n but did not completely eliminate it so I can only guess there is still so=
me peculiarity to the ranking logic given changing queue sizes and the sequ=
ence of inserts/ranks. My current thinking is to increase the PriorityQueue=
 size used to more than is strictly required for a page to allow enough "sp=
ace" for the queue to rank things more consistently when there are duplicat=
es. =0AThis is probably OK because I suspect I can live with the odd discre=
pancy that might squeak through. Others may have more critical requirements=
 for eliminating duplicates and will need a more robust strategy (e.g. remo=
ving the "lowestValue" check and inserting absolutely everything.=0A=0A=0AC=
heers,=0AMark=0A=0A=0A=0A=0A=0A=0A=0A=0A      _____________________________=
______________________________ =0ARise to the challenge for Sport Relief wi=
th Yahoo! For Good  =0A=0Ahttp://uk.promotions.yahoo.com/forgood/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 14:04:33 2008
Return-Path: <java-user-return-33210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13670 invoked from network); 18 Mar 2008 14:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 14:04:32 -0000
Received: (qmail 66438 invoked by uid 500); 18 Mar 2008 14:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66409 invoked by uid 500); 18 Mar 2008 14:04:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66398 invoked by uid 99); 18 Mar 2008 14:04:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 07:04:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:03:43 +0000
Received: by an-out-0708.google.com with SMTP id d11so2125110and.53
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 07:03:53 -0700 (PDT)
Received: by 10.100.216.12 with SMTP id o12mr2014704ang.21.1205849032268;
        Tue, 18 Mar 2008 07:03:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm31756066agb.13.2008.03.18.07.03.51
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 07:03:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8c4e68610803180653i61a0215am5f1a7992e21e7087@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com> <58513B21-71E4-421E-8CD6-43E1A186D162@mikemccandless.com> <8c4e68610803180653i61a0215am5f1a7992e21e7087@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1E4C74E3-829D-4EDF-8C3E-AACB4645959A@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 10:03:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I don't see an attachment here -- maybe the mailing list software  
stripped it off.  If so can you send directly to me?  Thanks.

Mike

Ian Lea wrote:

> Documents are biblio records.  All have title, author etc. stored,
> some have a few extra fields as well.  Typically around 25 fields per
> doc.  The index is created with compound format, everything else as
> default.
>
> I've rerun the job until failure.  Different numbers this time, but
> basically the same exception. In the failing pass it was trying to
> load 100K docs.
>
> Exception in thread "Thread-1"
> org.apache.lucene.index.MergePolicy$MergeException:
> org.apache.lucene.index.CorruptIndexException: doc counts differ for
> segment _cb: fieldsReader shows 71663 but segmentInfo shows 71664
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:271)
> Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
> differ for segment _cb: fieldsReader shows 71663 but segmentInfo shows
>  71664
>         at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:313)
>         at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:262)
>         at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:221)
>         at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3099)
>         at org.apache.lucene.index.IndexWriter.merge 
> (IndexWriter.java:2834)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>
> As mentioned, the index is loaded in chunks - the infostream from the
> failing pass is attached. All infostreams from all 19 odd runs leading
> up to the failure available as well if that would help.
>
>
> Running with -ea doesn't seem to have made any difference.
>
>
> --
> Ian.
>
>
> On Tue, Mar 18, 2008 at 12:09 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>>  Can you call IndexWriter.setInfoStream(...) and get the error to
>>  happen and post back the resulting output?  And, turn on assertions
>>  (java -ea) since that may catch the issue sooner.
>>
>>  Can you describe you are setting up IndexWriter (autoCommit,
>>  compound, etc.), and what your documents are like?  Do your  
>> documents
>>  have a fixed schema (same fields every time), or it varies such that
>>  some documents have no stored fields and some do?
>>
>>  Mike
>>
>>
>>
>>  Ian Lea wrote:
>>
>>> Hi
>>>
>>>
>>> When bulk loading into a new index I'm seeing this exception
>>>
>>> Exception in thread "Thread-1"
>>> org.apache.lucene.index.MergePolicy$MergeException:
>>> org.apache.lucene.index.CorruptIndexException: doc counts differ for
>>> segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>>>       at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run
>>> (ConcurrentMergeScheduler.java:271)
>>> Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
>>> differ for segment _4l: fieldsReader shows 67861 but segmentInfo  
>>> shows
>>> 67862
>>>       at org.apache.lucene.index.SegmentReader.initialize
>>> (SegmentReader.java:313)
>>>       at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:262)
>>>       at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:221)
>>>       at org.apache.lucene.index.IndexWriter.mergeMiddle
>>> (IndexWriter.java:3093)
>>>       at org.apache.lucene.index.IndexWriter.merge 
>>> (IndexWriter.java:2834)
>>>       at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run
>>> (ConcurrentMergeScheduler.java:240)
>>>
>>> when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>>> lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>>>
>>> With java version 1.6.0_03-b05 things work fine.
>>>
>>> The exception happens a few hundred thousand documents into the  
>>> load.
>>>
>>> A different program updating a different index with different  
>>> data on
>>> a different server gave a similar error on version 1.6.0_05-b13 and
>>> lucene 2.3.0.
>>>
>>>
>>> Any ideas?  Is this maybe a known issue or am I missing something
>>> obvious?
>>>
>>>
>>>
>>> --
>>> Ian.
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>   
>> ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 14:18:22 2008
Return-Path: <java-user-return-33211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26220 invoked from network); 18 Mar 2008 14:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 14:18:22 -0000
Received: (qmail 96148 invoked by uid 500); 18 Mar 2008 14:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95225 invoked by uid 500); 18 Mar 2008 14:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95214 invoked by uid 99); 18 Mar 2008 14:18:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 07:18:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:17:35 +0000
Received: by gv-out-0910.google.com with SMTP id r4so1470893gve.23
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 07:17:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=vsPmbsVLxe/ntqBV5MCS27PYXN4EIGce7Xg7tdybRKo=;
        b=EHkNGdv6D3+BveLTR+jpxvl5oCI/B/P9Va1uUphE7kj/QRxNu4BSPGUyaX6QfnaaNMy5r8gzc6TT/4XPS49Fjnsze2UFOSN0kEUMUqph8w14dxqKhBDASBGkmsnHX6d3av17CxYkEpKoWv30BdGqRswaYYqSZkm2o/lilDI3tf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Q+RwG/eoYGAcrGFVlxdtzpB6ZVg+4vJhWHVsbDzRzmexvkUkisKVYvKTAHYp2oeg97Xxj66a9Lht49OQ8fpkWrYkrhVqyx8t/ccqjcS0O+LLnjyhJ0tLqV210mrBk25eECMozxvVEj8RsK7RoBSU1brROrdc6K04sevQz32zikY=
Received: by 10.151.44.18 with SMTP id w18mr1014417ybj.184.1205849864034;
        Tue, 18 Mar 2008 07:17:44 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Tue, 18 Mar 2008 07:17:44 -0700 (PDT)
Message-ID: <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com>
Date: Tue, 18 Mar 2008 10:17:44 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: CorruptIndexException with some versions of java
In-Reply-To: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
X-Google-Sender-Auth: 462f220c5b031301
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Hi
>
>
>  When bulk loading into a new index I'm seeing this exception
>
>  Exception in thread "Thread-1"
>  org.apache.lucene.index.MergePolicy$MergeException:
>  org.apache.lucene.index.CorruptIndexException: doc counts differ for
>  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
>  Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
>  differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
>  67862
>         at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
>         at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>         at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>         at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3093)
>         at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
>         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
>
>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>
>  With java version 1.6.0_03-b05 things work fine.
>
>  The exception happens a few hundred thousand documents into the load.
>
>  A different program updating a different index with different data on
>  a different server gave a similar error on version 1.6.0_05-b13 and
>  lucene 2.3.0.
>
>  Any ideas?  Is this maybe a known issue or am I missing something obvious?

My guess is perhaps a thread safety bug, more likely in Lucene
indexing code (less likely in the JVM or specific libc).

What Linux version are you using?
What hardware are you running on (specifically, the CPU)?

If possible, it would be great if you could check out Lucene trunk,
crank up the iterations by modifying the TestStressIndexing2 and maybe
fiddle with some of the other parameters in
TestStressIndexing2.testMultiConfig(), and see if you can get it to
fail.


-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 14:38:40 2008
Return-Path: <java-user-return-33212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42179 invoked from network); 18 Mar 2008 14:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 14:38:40 -0000
Received: (qmail 32987 invoked by uid 500); 18 Mar 2008 14:38:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32960 invoked by uid 500); 18 Mar 2008 14:38:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32949 invoked by uid 99); 18 Mar 2008 14:38:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 07:38:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:37:54 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6330086wah.11
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 07:38:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=PveGMzBphxgsHYJO10UXc+UVWkBDDB20AsNGHnX9ji0=;
        b=gdLtk6nOuwOlISLXX6rM1YJyvZDZlRLlZea/jsQyjMCRHrEi2x0nH/RRklY5qVwkgwRaHnd7XHp2YzpfGx+tatTaw4oBHzZ9Rn5oK2lU3U/jq2J6x5qv5OZ2ximdxdqdOdYBDyQ5OE3OdQocAWwJF0bUdLl01e/cMHSk/n3Bl5c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G/McBL/qhnNgD+pCvutVs9CEJZ9ENb0ZCdeTSO423/UdTUkHGgr+46a8jHwsnjeMKX9xFrdAtwPYz5jZfza+n0C1HZmd1ec9ostA0PqDcjt1SCjNkLGd/NaG7zAsLdB+O62cTHpsKJjdk1/ghwbHYjJ393S1E7QEyzon+Q/XAJY=
Received: by 10.114.127.1 with SMTP id z1mr1783235wac.26.1205851085476;
        Tue, 18 Mar 2008 07:38:05 -0700 (PDT)
Received: by 10.114.46.15 with HTTP; Tue, 18 Mar 2008 07:38:05 -0700 (PDT)
Message-ID: <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com>
Date: Tue, 18 Mar 2008 14:38:05 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CorruptIndexException with some versions of java
In-Reply-To: <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
	 <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It's failed on servers running SuSE 10.0 and 8.2 (ancient!)

$ uname -a shows
Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005 x86_64
x86_64 x86_64 GNU/Linux

and

Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003 i686
unknown unknown GNU/Linux

The first one has a 2.8Ghz Intel CPU, don't know about the second.


I'll try and run the stress test.


--
Ian.



On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org> wrote:
>
> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
>  > Hi
>  >
>  >
>  >  When bulk loading into a new index I'm seeing this exception
>  >
>  >  Exception in thread "Thread-1"
>  >  org.apache.lucene.index.MergePolicy$MergeException:
>  >  org.apache.lucene.index.CorruptIndexException: doc counts differ for
>  >  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>  >         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
>  >  Caused by: org.apache.lucene.index.CorruptIndexException: doc counts
>  >  differ for segment _4l: fieldsReader shows 67861 but segmentInfo shows
>  >  67862
>  >         at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
>  >         at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>  >         at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>  >         at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3093)
>  >         at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
>  >         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
>  >
>  >  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  >  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>  >
>  >  With java version 1.6.0_03-b05 things work fine.
>  >
>  >  The exception happens a few hundred thousand documents into the load.
>  >
>  >  A different program updating a different index with different data on
>  >  a different server gave a similar error on version 1.6.0_05-b13 and
>  >  lucene 2.3.0.
>  >
>  >  Any ideas?  Is this maybe a known issue or am I missing something obvious?
>
>  My guess is perhaps a thread safety bug, more likely in Lucene
>  indexing code (less likely in the JVM or specific libc).
>
>  What Linux version are you using?
>  What hardware are you running on (specifically, the CPU)?
>
>  If possible, it would be great if you could check out Lucene trunk,
>  crank up the iterations by modifying the TestStressIndexing2 and maybe
>  fiddle with some of the other parameters in
>  TestStressIndexing2.testMultiConfig(), and see if you can get it to
>  fail.
>
>
>  -Yonik
>
>  ---------------------------------------------------------------------
>
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 14:47:45 2008
Return-Path: <java-user-return-33213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49352 invoked from network); 18 Mar 2008 14:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 14:47:45 -0000
Received: (qmail 60273 invoked by uid 500); 18 Mar 2008 14:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60242 invoked by uid 500); 18 Mar 2008 14:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60231 invoked by uid 99); 18 Mar 2008 14:47:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 07:47:35 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ramdasr@us.ibm.com designates 32.97.110.151 as permitted sender)
Received: from [32.97.110.151] (HELO e33.co.us.ibm.com) (32.97.110.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:46:46 +0000
Received: from d03relay02.boulder.ibm.com (d03relay02.boulder.ibm.com [9.17.195.227])
	by e33.co.us.ibm.com (8.13.8/8.13.8) with ESMTP id m2IEl5et007111
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 10:47:05 -0400
Received: from d03av03.boulder.ibm.com (d03av03.boulder.ibm.com [9.17.195.169])
	by d03relay02.boulder.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m2IEkvJB172470
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 08:47:01 -0600
Received: from d03av03.boulder.ibm.com (loopback [127.0.0.1])
	by d03av03.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m2IEkvwA028581
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 08:46:57 -0600
Received: from d03nm123.boulder.ibm.com (d03nm123.boulder.ibm.com [9.17.195.149])
	by d03av03.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m2IEkvWb028574
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 08:46:57 -0600
Subject: Question with Hits Interface
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC4D376DF.81DFFC8B-ON87257410.00512BAA-86257410.0050B9E2@us.ibm.com>
From: Ramdas M Ramakrishnan <ramdasr@us.ibm.com>
Date: Tue, 18 Mar 2008 09:44:33 -0500
X-MIMETrack: Serialize by Router on D03NM123/03/M/IBM(Release 7.0.2FP2HF300 | September
 14, 2007) at 03/18/2008 08:46:56
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=08BBFE83DFC2AD3A8f9e8a93df938690918c08BBFE83DFC2AD3A"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=08BBFE83DFC2AD3A8f9e8a93df938690918c08BBFE83DFC2AD3A
Content-type: text/plain; charset=US-ASCII


Hi

I am using a MultiFieldQueryParser to parse and search the index. Once I
have the Hits and iterate thru it, I need to know the following?

For every hit document I need to know under which indexed field was this
Hit originating from? Say I have indexed 2 Fields how will I know from the
Hit which Field the Hit came from?

Thanks in advance.

Rgds
Ram

--0__=08BBFE83DFC2AD3A8f9e8a93df938690918c08BBFE83DFC2AD3A--


From java-user-return-33214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 15:20:28 2008
Return-Path: <java-user-return-33214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92101 invoked from network); 18 Mar 2008 15:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 15:20:27 -0000
Received: (qmail 31190 invoked by uid 500); 18 Mar 2008 15:20:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31162 invoked by uid 500); 18 Mar 2008 15:20:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31151 invoked by uid 99); 18 Mar 2008 15:20:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 08:20:18 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 15:19:37 +0000
Received: by mu-out-0910.google.com with SMTP id g7so7806703muf.0
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 08:19:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=1DHZuzDsNuoVqCYJmgkqoW1tLRi7I77RPAMUp9Hgixk=;
        b=Wa5h3ZfGjuVttCI7rLPafAvL0D3a0jS0MmrJW8kLCctr6u3cIpROM/6Yxg3USHEmz7bPuQWQ76hzYwyt11aHoGdP27h//CRcmqE57VsV1dtPD8nOpVHf6QBhBmSDP8ajpfIBeCKqNDLQtJwZy3Y2FiqDV/+ZP4E6kQzy2qJ3Di8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PPL261Y20gtdkmH7DQtgs6jHfJs/gkCcuXlvcIm2NZvZlS+GTXQBsezQXOLKJSvtfq5tR+c1fw4rPA+8KeaCpXOIawmRL+iGKGNHoGBh5jFFaw1PZvMZnW+tTHa86J1EWrnIlWWn4wlEDRrxLmX9hWLVrICeSYnCiW3xS+fj/XU=
Received: by 10.78.100.1 with SMTP id x1mr2054213hub.16.1205853587099;
        Tue, 18 Mar 2008 08:19:47 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Tue, 18 Mar 2008 08:19:47 -0700 (PDT)
Message-ID: <6e3ae6310803180819i66636877h1bf398b1af92c227@mail.gmail.com>
Date: Tue, 18 Mar 2008 08:19:47 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the fields
In-Reply-To: <16121128.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16121128.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is because sorting will load all values in that sortFirled into memory.

If it's an integer, you will need 4*N bytes, which is additional 52M for you.

There is no programatical way to increase memory size.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Tue, Mar 18, 2008 at 6:23 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>
>  this is my search content
>
>  QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>  Query query = parser.parse("1");
>
>  Sort sort = new Sort(new SortField(sortField));
>          Hits       hits = searcher.search(query,sort);
>
>  And i had huge data about 13 millions of records
>  i am not sure y its giving outof memory exception and
>  no exception when no sorting is done
>  plz some one help me yar
>
>  and also if to increase heap space how to increase it programatically i had
>  command prompt
>  java -Xms<initial heap size> -Xmx<maximum heap size>
>  please.....
>  --
>  View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16121128.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 16:20:24 2008
Return-Path: <java-user-return-33215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35966 invoked from network); 18 Mar 2008 16:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 16:20:24 -0000
Received: (qmail 50541 invoked by uid 500); 18 Mar 2008 16:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50511 invoked by uid 500); 18 Mar 2008 16:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50500 invoked by uid 99); 18 Mar 2008 16:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 09:20:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 16:19:36 +0000
Received: by ti-out-0910.google.com with SMTP id 28so2030021tif.11
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 09:19:45 -0700 (PDT)
Received: by 10.150.157.11 with SMTP id f11mr1111788ybe.54.1205857182849;
        Tue, 18 Mar 2008 09:19:42 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 52sm1638007hsf.7.2008.03.18.09.19.39
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 09:19:41 -0700 (PDT)
In-Reply-To: <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com> <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com> <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: multipart/mixed; boundary=Apple-Mail-3--83282036
Message-Id: <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com>
Cc: Ian Lea <ian.lea@gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 12:19:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3--83282036
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


Ian,

Could you apply the attached patch applied to the head of the 2.3  
branch?

It only adds more asserts, to try to pinpoint where exactly this  
corruption starts.

Then, re-run the test with asserts enabled and infoStream turned on  
and post back.  Thanks.

Mike


--Apple-Mail-3--83282036
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed



Ian Lea wrote:

> It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>
> $ uname -a shows
> Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005 x86_64
> x86_64 x86_64 GNU/Linux
>
> and
>
> Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003 i686
> unknown unknown GNU/Linux
>
> The first one has a 2.8Ghz Intel CPU, don't know about the second.
>
>
> I'll try and run the stress test.
>
>
> --
> Ian.
>
>
>
> On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>  
> wrote:
>>
>> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> Hi
>>>
>>>
>>>  When bulk loading into a new index I'm seeing this exception
>>>
>>>  Exception in thread "Thread-1"
>>>  org.apache.lucene.index.MergePolicy$MergeException:
>>>  org.apache.lucene.index.CorruptIndexException: doc counts differ  
>>> for
>>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc  
>>> counts
>>>  differ for segment _4l: fieldsReader shows 67861 but segmentInfo  
>>> shows
>>>  67862
>>>         at org.apache.lucene.index.SegmentReader.initialize 
>>> (SegmentReader.java:313)
>>>         at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:262)
>>>         at org.apache.lucene.index.SegmentReader.get 
>>> (SegmentReader.java:221)
>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle 
>>> (IndexWriter.java:3093)
>>>         at org.apache.lucene.index.IndexWriter.merge 
>>> (IndexWriter.java:2834)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>>
>>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>>>
>>>  With java version 1.6.0_03-b05 things work fine.
>>>
>>>  The exception happens a few hundred thousand documents into the  
>>> load.
>>>
>>>  A different program updating a different index with different  
>>> data on
>>>  a different server gave a similar error on version 1.6.0_05-b13 and
>>>  lucene 2.3.0.
>>>
>>>  Any ideas?  Is this maybe a known issue or am I missing  
>>> something obvious?
>>
>>  My guess is perhaps a thread safety bug, more likely in Lucene
>>  indexing code (less likely in the JVM or specific libc).
>>
>>  What Linux version are you using?
>>  What hardware are you running on (specifically, the CPU)?
>>
>>  If possible, it would be great if you could check out Lucene trunk,
>>  crank up the iterations by modifying the TestStressIndexing2 and  
>> maybe
>>  fiddle with some of the other parameters in
>>  TestStressIndexing2.testMultiConfig(), and see if you can get it to
>>  fail.
>>
>>
>>  -Yonik
>>
>>   
>> ---------------------------------------------------------------------
>>
>>
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--Apple-Mail-3--83282036
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Apple-Mail-3--83282036--

From java-user-return-33216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 16:21:04 2008
Return-Path: <java-user-return-33216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36336 invoked from network); 18 Mar 2008 16:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 16:21:04 -0000
Received: (qmail 52967 invoked by uid 500); 18 Mar 2008 16:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52933 invoked by uid 500); 18 Mar 2008 16:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52922 invoked by uid 99); 18 Mar 2008 16:20:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 09:20:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 16:20:16 +0000
Received: by an-out-0708.google.com with SMTP id d11so2139093and.53
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 09:20:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=yGkPBTjwnBfm47aAZ49vQa+OnuqwxVpwCbCtomzBOV0=;
        b=NCnxgCcIIabkYc4E5OgsvA41Rh/sGts1YnLSNGXIe/lRKrfVHXOKT78BWWNUmi9on1WYmhHFYtkRGVjGEkoeQ/8dQ6thHUiTd5wJ68GgV+rKP7fpOb6cp3GjX5cL04N3E9uJJDE+XermYBZy7S23aoKoYs2FNeMC5x8SSsjkyC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=x64/eLbMzMaNYvLA8MAbQDxlyi1yedfakKYDmJKFZaNx4+WuKUFVjE4Gq4vu2TT7SoKHNZTU1mp0+lk1O55MYJ0uJupuCe+80hLeRbgnvhhS+IQbEii27i6YZQm/ecNYHZtW5sNCvSVe6i9WwDVn0fFHF2iNuiSABfnzr+wCAyg=
Received: by 10.100.140.12 with SMTP id n12mr2248065and.22.1205857224039;
        Tue, 18 Mar 2008 09:20:24 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.119.110])
        by mx.google.com with ESMTPS id 1sm32163258agb.8.2008.03.18.09.20.22
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 18 Mar 2008 09:20:22 -0700 (PDT)
Message-ID: <47DFEBBF.4010608@gmail.com>
Date: Tue, 18 Mar 2008 12:20:15 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031702)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
References: <16121128.post@talk.nabble.com>
In-Reply-To: <16121128.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

To sort on 13mil docs will take like at least 400 mb for the field 
cache. Thats if you only sort on one field...it can grow fast if you 
allow multi field sorting.

How much RAM are you giving your app?

sandyg wrote:
> this is my search content
>
> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
> Query query = parser.parse("1");
>
> Sort sort = new Sort(new SortField(sortField));
>           Hits       hits = searcher.search(query,sort);
>
> And i had huge data about 13 millions of records
> i am not sure y its giving outof memory exception and
> no exception when no sorting is done
> plz some one help me yar
>
> and also if to increase heap space how to increase it programatically i had
> command prompt
> java -Xms<initial heap size>  -Xmx<maximum heap size>
> please.....
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 16:27:31 2008
Return-Path: <java-user-return-33217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38940 invoked from network); 18 Mar 2008 16:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 16:27:30 -0000
Received: (qmail 66823 invoked by uid 500); 18 Mar 2008 16:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66795 invoked by uid 500); 18 Mar 2008 16:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66783 invoked by uid 99); 18 Mar 2008 16:27:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 09:27:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 16:26:42 +0000
Received: by nf-out-0910.google.com with SMTP id d3so2283213nfc.15
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 09:26:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=XleyucSODHkZNcuFjm887r0lFyhQr/NEN6E0WiCATZU=;
        b=D2+paWp6fcXy3Sx091K63ccHCcY/kz8kjC0FSbyPkNyPqk/CLsXD6AN5Q5w1T/EEsyUkqnye6FQx8dSAADPdShEs8dIrwwt+Gjwgk74RAthO8z9SCzecnvMp+MqPSMz06VCQH/R58mjWKHuqi8bCJwzlFXenRnz4qH+n6tBJurw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aDoQiWjozfQoRJ1zBLmiNHwdpN84gn7XQZJqMCli5XR97myyOReoAOqoZT0TkO9c6czHn2qKFnhNjGmv4RuHU0xUwm6VRnC5p8/oY7iUsJtWjPLNUWS1q4phtAMFyJTzzl4n2p0yttsWcW921ON3nmCSmZV3ZI0W4d4BzsS0Jec=
Received: by 10.78.170.17 with SMTP id s17mr2466315hue.17.1205857611080;
        Tue, 18 Mar 2008 09:26:51 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.119.110])
        by mx.google.com with ESMTPS id g11sm16605363gve.6.2008.03.18.09.26.48
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 18 Mar 2008 09:26:49 -0700 (PDT)
Message-ID: <47DFED42.7090000@gmail.com>
Date: Tue, 18 Mar 2008 12:26:42 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031702)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
References: <16121128.post@talk.nabble.com>
In-Reply-To: <16121128.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> Whoops...10 times to much there. more like 40 meg I think. A string 
> sort could be a bit higher though, you also need to store all of terms 
> to index into.


sandyg wrote:
> this is my search content
>
> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
> Query query = parser.parse("1");
>
> Sort sort = new Sort(new SortField(sortField));
>           Hits       hits = searcher.search(query,sort);
>
> And i had huge data about 13 millions of records
> i am not sure y its giving outof memory exception and
> no exception when no sorting is done
> plz some one help me yar
>
> and also if to increase heap space how to increase it programatically i had
> command prompt
> java -Xms<initial heap size>  -Xmx<maximum heap size>
> please.....
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 17:14:39 2008
Return-Path: <java-user-return-33218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69855 invoked from network); 18 Mar 2008 17:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 17:14:38 -0000
Received: (qmail 96603 invoked by uid 500); 18 Mar 2008 17:14:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96119 invoked by uid 500); 18 Mar 2008 17:14:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96107 invoked by uid 99); 18 Mar 2008 17:14:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 10:14:30 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 17:13:52 +0000
Received: by an-out-0708.google.com with SMTP id d11so3809and.53
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 10:14:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=wWUvrHXz2OowADp46wA6isI2YjyNt8c0FvuXvvjagpk=;
        b=V4Gu42ZoDmaNKYmwwB9fJCbbStvsuOO+AA+RiTAHryPgaV7jQqPufoOlAYkFbOzjFYojrQ2NzSNflQHykB17/rfxw/Wz8nCI78NW2Js9waECKOh5YrH77uV7Is5mL0O2j2ys/TIZ14nMZXOEgaWE1F1JQw+NAm0YJv05RRM2R44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=FHkNIsSsnUt+brE2vyXYImqK58+tPYIDJejVJPOh9KyxgPWmlKMbwPcBt2xsUZDfD+4YlPm7dO3XCRcO5AjMW6DBCx9nxQtV4Hn11XU/MUfUpfeuyydM0PqlSaV+RTMoSWNrzFmxtbutP7U/N3KrJhe+gUm+xwhRkqJjI2AFXgo=
Received: by 10.100.122.8 with SMTP id u8mr2249136anc.103.1205860442829;
        Tue, 18 Mar 2008 10:14:02 -0700 (PDT)
Received: by 10.100.43.15 with HTTP; Tue, 18 Mar 2008 10:14:02 -0700 (PDT)
Message-ID: <4b124c310803181014k541f0abdhe72d1372e5656f2f@mail.gmail.com>
Date: Tue, 18 Mar 2008 10:14:02 -0700
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: LUCENE-933 / SOLR-261
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20312_6501402.1205860442779"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20312_6501402.1205860442779
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey folks,
  I was wondering what the status of LUCENE-933 (stop words can cause the
queryparser to end up with no results, due to an e.g. +(the) clause in the
resultant BooleanQuery).  According to the tracking bug, it's resolved, and
there's a patch, but where has that patch been applied?  I tried running
solr-trunk (which links to lucene-core-2.3.1), but the same issue occurs.
I'd ask over on the solr-user list, but since SOLR-261 is marked as "blocked
by LUCENE-933", I think here might be the right place to go first.
  Any ideas?  Hoss, Doron?

   -jake

------=_Part_20312_6501402.1205860442779--

From java-user-return-33219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 17:37:28 2008
Return-Path: <java-user-return-33219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91203 invoked from network); 18 Mar 2008 17:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 17:37:28 -0000
Received: (qmail 56629 invoked by uid 500); 18 Mar 2008 17:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56595 invoked by uid 500); 18 Mar 2008 17:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56584 invoked by uid 99); 18 Mar 2008 17:37:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 10:37:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 17:36:38 +0000
Received: by wx-out-0506.google.com with SMTP id i28so7332001wxd.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 10:36:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=4BswIuuTfl7Bb97QKMV9Ma63S+/dzyYt1dm0WMfwCNw=;
        b=kgt4H5PurZ6bNKlz1Wp2Yp5hhqVwswk5rw1GvmvJI8k/FMhdO/+cP160MRRcYQk9DcS3Uewed75oxCafu0ts7zVsBVN4XIZWHYfLjLLccoBZFVs1KZ+xKzulOxxv0NHxeqtDTWoKGWipbJz2cYaK3j18bHH2+9vGocYALIhcj9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=xw27ZVYTHaHSOvOeJwJr3tQEoOr8E87EdlBRgZxvnwokFionVXI9hqJjfG2Vjh/XllAOOdiPf/qG/JitTMAZ0xy40iUVmIVAvfqbvPQiKOMiMuxHwtDREimY/ozaDHcgGuGQwuzy6ODt1lzwgShjHUxStKyEB5vdewtqoki9r4g=
Received: by 10.141.190.9 with SMTP id s9mr978881rvp.279.1205861807371;
        Tue, 18 Mar 2008 10:36:47 -0700 (PDT)
Received: by 10.140.177.19 with HTTP; Tue, 18 Mar 2008 10:36:46 -0700 (PDT)
Message-ID: <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com>
Date: Tue, 18 Mar 2008 17:36:46 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Cc: java-user@lucene.apache.org
In-Reply-To: <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_19789_19008566.1205861807356"
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
	 <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com>
	 <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com>
	 <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19789_19008566.1205861807356
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mike


Patch applied and test re-run and picked up an assertion error this time:

Exception in thread "Lucene Merge Thread #0"
org.apache.lucene.index.MergePolicy$MergeException:
java.lang.AssertionError: after mergeFields: fdx size mismatch: 72357
docs vs 578848 length in bytes of _3o.fdx
        at org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:320)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:297)
Caused by: java.lang.AssertionError: after mergeFields: fdx size
mismatch: 72357 docs vs 578848 length in bytes of _3o.fdx
        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:342)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:133)
        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3852)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3504)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:211)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:266)

The infostream output is attached.  Since this email is to you and the
list it should make it to you.



Yonik: I haven't been able to make TestStressIndexing2 fail.


--
Ian.


On Tue, Mar 18, 2008 at 4:19 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  Ian,
>
>  Could you apply the attached patch applied to the head of the 2.3
>  branch?
>
>  It only adds more asserts, to try to pinpoint where exactly this
>  corruption starts.
>
>  Then, re-run the test with asserts enabled and infoStream turned on
>  and post back.  Thanks.
>
>  Mike
>
>
>
>
>  Ian Lea wrote:
>
>  > It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>  >
>  > $ uname -a shows
>  > Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005 x86_64
>  > x86_64 x86_64 GNU/Linux
>  >
>  > and
>  >
>  > Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003 i686
>  > unknown unknown GNU/Linux
>  >
>  > The first one has a 2.8Ghz Intel CPU, don't know about the second.
>  >
>  >
>  > I'll try and run the stress test.
>  >
>  >
>  > --
>  > Ian.
>  >
>  >
>  >
>  > On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>
>  > wrote:
>  >>
>  >> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
>  >>> Hi
>  >>>
>  >>>
>  >>>  When bulk loading into a new index I'm seeing this exception
>  >>>
>  >>>  Exception in thread "Thread-1"
>  >>>  org.apache.lucene.index.MergePolicy$MergeException:
>  >>>  org.apache.lucene.index.CorruptIndexException: doc counts differ
>  >>> for
>  >>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>  >>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>  >>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>  >>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc
>  >>> counts
>  >>>  differ for segment _4l: fieldsReader shows 67861 but segmentInfo
>  >>> shows
>  >>>  67862
>  >>>         at org.apache.lucene.index.SegmentReader.initialize
>  >>> (SegmentReader.java:313)
>  >>>         at org.apache.lucene.index.SegmentReader.get
>  >>> (SegmentReader.java:262)
>  >>>         at org.apache.lucene.index.SegmentReader.get
>  >>> (SegmentReader.java:221)
>  >>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>  >>> (IndexWriter.java:3093)
>  >>>         at org.apache.lucene.index.IndexWriter.merge
>  >>> (IndexWriter.java:2834)
>  >>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>  >>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>  >>>
>  >>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  >>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>  >>>
>  >>>  With java version 1.6.0_03-b05 things work fine.
>  >>>
>  >>>  The exception happens a few hundred thousand documents into the
>  >>> load.
>  >>>
>  >>>  A different program updating a different index with different
>  >>> data on
>  >>>  a different server gave a similar error on version 1.6.0_05-b13 and
>  >>>  lucene 2.3.0.
>  >>>
>  >>>  Any ideas?  Is this maybe a known issue or am I missing
>  >>> something obvious?
>  >>
>  >>  My guess is perhaps a thread safety bug, more likely in Lucene
>  >>  indexing code (less likely in the JVM or specific libc).
>  >>
>  >>  What Linux version are you using?
>  >>  What hardware are you running on (specifically, the CPU)?
>  >>
>  >>  If possible, it would be great if you could check out Lucene trunk,
>  >>  crank up the iterations by modifying the TestStressIndexing2 and
>  >> maybe
>  >>  fiddle with some of the other parameters in
>  >>  TestStressIndexing2.testMultiConfig(), and see if you can get it to
>  >>  fail.
>  >>
>  >>
>  >>  -Yonik
>  >>
>  >>
>  >> ---------------------------------------------------------------------
>  >>
>  >>
>  >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>
>  >>
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>
>
>

------=_Part_19789_19008566.1205861807356
Content-Type: application/zip; name=infostream.zip
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fdyqwfmt1
Content-Disposition: attachment; filename=infostream.zip

UEsDBBQAAAAIAJKLcjgle3MhowEAAIwGAAAiABUAb3AuMDAubHVjaW4uaW5kZXh3cml0ZXIuaW5m
b3N0cmVhbVVUCQADw/vfR8P730dVeAQA6ANkAO1Ty27bMBC89yv22B4q0Y+6iAEBhmMYMOIgAVQg
h6IHhlzKRPkQ+EDifn0oMUqrVEAPvVonaneHMzvLPex38F1TaX6swWM4GGHr4JBq4KgwSGvurZLs
XFnXFLSl7ISFigwNFtJwfC5uENs7o85H6sO11VqG3Qi4WX4h+PWKsA+HByDTXGvg0k0w+GAdFvt6
Jx2ydD5vyqDb8nHpS+FkyaMQpW17HUBjsJm/Ci4iaHQN/kP70Tbbc8Ba/sLb3+WbxdWcz1cLke+o
E4xHhVMC8zXX1rDoHJpwOwJslos5JWLFwFG9TWLR9VTbarYqCGj6nIO4s8xXn2d/RjoP8Rs6PST2
EhU/omnCqZqR9EFPXo1tNfYJhIr+BDQAU9bjOA852/nf6CS4MlEp4JbVndX1VPBOiDSsimRkL1VQ
5fH1vxfqs+dDRY8bykzUPYh0p9ReQuS+yHtpeZCPKBL6tYu/u2M0aRPSUAWsH/fHT+9eVqAuvOXA
/5TtAx1ehU/+H0w39An+rvQN2LEBO1HToIcWDZemGQMGh9dJ5WWLLlt02aL/3KIXUEsDBBQAAAAI
AJKLcjgBwTSWzAMAAL8PAAAiABUAb3AuMDEubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVU
CQADw/vfR8P730dVeAQA6ANkALVXW2/bNhR+9684MDBgAzZZpG6WCwNeEgQwFqNFPaAPRRGo1JEj
VCI9kl7j/vpRkm+yLTZOvLzY4uF37t/naHp/B5/LJOdfRqBQT3km5lpiUkKKBepc8A+iyNl6LOTC
SZYJe0KnWDHk6OQ8xWfnL8Tle16sHxKlb0VZ5vquBZz4gYtR7LLe9BO452ONIM3lmQhKC4nO/fwu
l8jM9/VkoMvl4KuvBpnMB+kqywZiWecByUqLJv5YyxVCiXKBP8n9QSxu1hrn+Q+c7a9PvJimNPSy
xsfcwNJVgecSbNzcCs5WUiLXsxZg4ns0cbOQgUzKG5MsyjrUzZiEjgtl8twc4p1gavwHOTypeoh/
oyy3hvsci/QB+UI/jYlr/qAOPu4BfPxzNgIuvkNWrNQTTGClMN1EISEkRSHY/lHLfLFAWR+0ZwKN
g2o4i9JUM350IRVsXk1hfnr0PsvMFMdug6prqDvfPNYFtE42sM0ZX5U1JIiCsHowhRtMU7F7nFcz
4q+YGfymyl6v+VwKpXO+UJCobd5gkjx03+uxQijcJjACClleoAItNs7Mly4sgChS0+FqcqZjUeyF
pvccv99XSEzr84CSOIyjqjVqUHX2dxKEjke86uLAOBh7xHGH5Jfe9IBv1cjMrrBvS5GbyP1NCuqR
9OEz2Wak4B3kqlltGEOWFAq//C9+asYj9B9dJ+Nlv9Mm/+m0LeVzp03nymLLO21cWnJJu+Nlqe63
F+lh9mFkRs/TmqdqBPvmnLkIUOC/WEDoUOpHJA6qNQmdYRhEQ9fvBt/O5s1Mavk4Y9vs88js2ojV
S3buDhdQVutee1GwRJ6aPX9Xe5aoV5JfRn2PXER9ckp9cmXqxzQgr6H+rm02CSCtMJdJwBH2SAKG
5rchHJ5IgBfFUegfSMDQ9RxCWxIQR/QCCaBXkoAL/OzoQywSQCwSQCwSQCwSQCwSQCwSQCwSQF4i
AfQVEhB7Q0L8sBt8uQSYpRuxetteqQUt2F4REg315v+M7vSU7vTKdI9C+ia671tk4z1txbuM90fY
Nu99L6De0D/mvU+HnkfJIe/DwAmDYMd7GjtD37+A996VeH+Bnx1nqIX31MJ7auE9tfCeWnhPLbyn
Ft7Tl/Deewvvu8Bv4L3ZvhGr1+5aAsDMr39VclIAq0f/629H72A6kXpnA/UtX35Ktu9Pyiz3lFev
RycsbRCb94+XFlJlpNacmcodlqkuI7EZ6alxk4v5WFbTfxk5qIUcVfHnuNFcUI3XFNlHzLbBD1l3
diNb9sPsU8Gx+ietru+osq1yW3flP1BLAwQUAAAACACSi3I4RSz7CIgDAABgDAAAIgAVAG9wLjAy
Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA8P730fD+99HVXgEAOgDZAC1VluL2zgU
fs+vOAwUdmHX8UW2YxdDdmYYCDuhpSn0oZSgyscZU1vySnI76a9fyU4ml0k8HTabl9g6+nS+c/us
2d0tfK5pyb+koFDPeCEWWiKtIccKdSn4e1GVbJ0JuXJoQ9kDOlXLkKNT8hwfnb8Rm3e8Wt9TpW9E
XZf69gA4JYFP3SJio9kncE/7SiEv5QkPSguJzt3itpTIzPN6OtZ1M/5K1LiQ5Thvi2Ismo4H0FaL
3n+mZYtQo1zhC9zvxep6rXFR/sT5bvs0xpAmOUb9GQsDy9sKTxHsj7kRnLVSItfzA8A0KgJC43wC
ktbXhizKztV15kWOCzV97BfxVjCV/entr9gc4keU9dZwV2KV3yNf6YfMc80POufZ0k1ZGIcRLL2U
JX7owdJPWRz53gjgw1/zFLj4AUXVqgeYQqsw3/gPPKBVJdjuVctytULZLRxWC/oDbNlWtYkzWwaQ
C7aw9Vk8X3pXFKa+mdujuui6mvSvXWgHKxvYZo23dQeJ4oTYF5MSg+lz4R7z6ov/FQuD30Q5kJFR
v6MRSpd8pYCqbURg6O87Ho1YJRRuqaXgQ1FWqECLjRvzcA4LIKrc5N5W2+Ry4ibJxISCP+4sEvNu
PfRC4sexTZoa25z/EUx8xwsnduPYHJAFrhNF/pvRbG9GbTFNf7FvjSiN56sNBbX0r+Az2TJS8BZK
1Y8DZFDQSuGX/+WcTiUQrpaBU/D66qxN/nPW1sjHszZdqgFbedbG5QCX/Ly/ItdXhy12P3+fmtLz
vJttlcIuOSc2AlT4HSuIHN8nsZeEtk0iJwkmnkei8+Cb+aKvSSc5J2ybTk8Hutu0Ycq6/jsF5wJq
OyOdAwUN8tyMwNvOqUTdSn4I26kG1dDNwkuSQJ5LArmwJPjuJL6sJOySNqQN5IDB67ThCAsm27X4
bphZQc8UrbD/eLD1KZteN3ioJzHxTV/5x3LiTQLiJ8menHhJYGTdf5ITnzixF75CTsILyckrznka
RTIgJ2RATsiAnJABOSEDckIG5IQMyAn5FTkJ/4ucnANfVE5MC6es691L6QozFw+bBFoB65rht9+P
boeaSv1kA/WtbD7R7c1OmXafcXtxezb8PeLFm9FLoVmOas2Z2eewQp0zkufGDQHz19gm+LUZCQZm
xEZ8akT6Dao/NUf2AYut8/3hO9mYB/Z99rngaC+FXXxHkW2/Aq9smX8BUEsDBBQAAAAIAJKLcji8
gXtBuwEAAMoDAAAiABUAb3AuMDMubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADw/vf
R8P730dVeAQA6ANkAKVSTWvbQBC991fMsT1UX5alWCAwjjGYOqSgQg6lmM1qVl66H2J3ReP++q6k
KK2CoIToNJqZt+/NvDke9vBdEq5+FGDRHRXTlTNIJNQo0HGtvmrB6bXUpglIS+gFA9FRVBhwVeNT
8AWxvVfieiLW3WopudvPgNt0lZCIZfTD8QGiZa4Cam4WGKzTBoNDtecGqY+v29DJNnxMbcgMD+uO
sVC3gw4gndMjf+lMhyDRNPgf7Sfd7K4OK/4b7/62b3Nck02N2fhG5WF1J3BJ4PjMrVa0MwaVu5sB
thlbpSSvb8AQufNi0QxUuzLOgggkeRqTuNfUlp/jfzP9DvEbGjkVDhxFfULVuEsZR/6Dgbw8RwVd
5+sMznFBN8k6hnNS0DxLfLAqaJZvUjinBU2im3xugdK/gInOXoA4oEJbnNdhrPZeNdIPV6pOCKg1
rXpbqqXkPWPe2DIakcNYjAiLz//DUHb0Z+oYcFOb6uQAivrIr8Ijxh1Er6WNpj8i8+jnKd63CUr8
HIwrIoAOZ/Tx06uLdcS4lxrYn7x9INO1We/rUfXHtKC1b30B9mxAL0Q1aKFFVXPVzAGTG8XbJvoD
UEsDBBQAAAAIAJKLcji8gXtBuwEAAMoDAAAiABUAb3AuMDQubHVjaW4uaW5kZXh3cml0ZXIuaW5m
b3N0cmVhbVVUCQADw/vfR8P730dVeAQA6ANkAKVSTWvbQBC991fMsT1UX5alWCAwjjGYOqSgQg6l
mM1qVl66H2J3ReP++q6kKK2CoIToNJqZt+/NvDke9vBdEq5+FGDRHRXTlTNIJNQo0HGtvmrB6bXU
pglIS+gFA9FRVBhwVeNT8AWxvVfieiLW3WopudvPgNt0lZCIZfTD8QGiZa4Cam4WGKzTBoNDtecG
qY+v29DJNnxMbcgMD+uOsVC3gw4gndMjf+lMhyDRNPgf7Sfd7K4OK/4b7/62b3Nck02N2fhG5WF1
J3BJ4PjMrVa0MwaVu5sBthlbpSSvb8AQufNi0QxUuzLOgggkeRqTuNfUlp/jfzP9DvEbGjkVDhxF
fULVuEsZR/6Dgbw8RwVd5+sMznFBN8k6hnNS0DxLfLAqaJZvUjinBU2im3xugdK/gInOXoA4oEJb
nNdhrPZeNdIPV6pOCKg1rXpbqqXkPWPe2DIakcNYjAiLz//DUHb0Z+oYcFOb6uQAivrIr8Ijxh1E
r6WNpj8i8+jnKd63CUr8HIwrIoAOZ/Tx06uLdcS4lxrYn7x9INO1We/rUfXHtKC1b30B9mxAL0Q1
aKFFVXPVzAGTG8XbJvoDUEsDBBQAAAAIAJKLcji8gXtBuwEAAMoDAAAiABUAb3AuMDUubHVjaW4u
aW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADw/vfR8P730dVeAQA6ANkAKVSTWvbQBC991fMsT1U
X5alWCAwjjGYOqSgQg6lmM1qVl66H2J3ReP++q6kKK2CoIToNJqZt+/NvDke9vBdEq5+FGDRHRXT
lTNIJNQo0HGtvmrB6bXUpglIS+gFA9FRVBhwVeNT8AWxvVfieiLW3WopudvPgNt0lZCIZfTD8QGi
Za4Cam4WGKzTBoNDtecGqY+v29DJNnxMbcgMD+uOsVC3gw4gndMjf+lMhyDRNPgf7Sfd7K4OK/4b
7/62b3Nck02N2fhG5WF1J3BJ4PjMrVa0MwaVu5sBthlbpSSvb8AQufNi0QxUuzLOgggkeRqTuNfU
lp/jfzP9DvEbGjkVDhxFfULVuEsZR/6Dgbw8RwVd5+sMznFBN8k6hnNS0DxLfLAqaJZvUjinBU2i
m3xugdK/gInOXoA4oEJbnNdhrPZeNdIPV6pOCKg1rXpbqqXkPWPe2DIakcNYjAiLz//DUHb0Z+oY
cFOb6uQAivrIr8Ijxh1Er6WNpj8i8+jnKd63CUr8HIwrIoAOZ/Tx06uLdcS4lxrYn7x9INO1We/r
UfXHtKC1b30B9mxAL0Q1aKFFVXPVzAGTG8XbJvoDUEsDBBQAAAAIAJKLcji8gXtBuwEAAMoDAAAi
ABUAb3AuMDYubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADw/vfR8P730dVeAQA6ANk
AKVSTWvbQBC991fMsT1UX5alWCAwjjGYOqSgQg6lmM1qVl66H2J3ReP++q6kKK2CoIToNJqZt+/N
vDke9vBdEq5+FGDRHRXTlTNIJNQo0HGtvmrB6bXUpglIS+gFA9FRVBhwVeNT8AWxvVfieiLW3Wop
udvPgNt0lZCIZfTD8QGiZa4Cam4WGKzTBoNDtecGqY+v29DJNnxMbcgMD+uOsVC3gw4gndMjf+lM
hyDRNPgf7Sfd7K4OK/4b7/62b3Nck02N2fhG5WF1J3BJ4PjMrVa0MwaVu5sBthlbpSSvb8AQufNi
0QxUuzLOgggkeRqTuNfUlp/jfzP9DvEbGjkVDhxFfULVuEsZR/6Dgbw8RwVd5+sMznFBN8k6hnNS
0DxLfLAqaJZvUjinBU2im3xugdK/gInOXoA4oEJbnNdhrPZeNdIPV6pOCKg1rXpbqqXkPWPe2DIa
kcNYjAiLz//DUHb0Z+oYcFOb6uQAivrIr8Ijxh1Er6WNpj8i8+jnKd63CUr8HIwrIoAOZ/Tx06uL
dcS4lxrYn7x9INO1We/rUfXHtKC1b30B9mxAL0Q1aKFFVXPVzAGTG8XbJvoDUEsDBBQAAAAIAJKL
cji8gXtBuwEAAMoDAAAiABUAb3AuMDcubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQAD
w/vfR8P730dVeAQA6ANkAKVSTWvbQBC991fMsT1UX5alWCAwjjGYOqSgQg6lmM1qVl66H2J3ReP+
+q6kKK2CoIToNJqZt+/NvDke9vBdEq5+FGDRHRXTlTNIJNQo0HGtvmrB6bXUpglIS+gFA9FRVBhw
VeNT8AWxvVfieiLW3WopudvPgNt0lZCIZfTD8QGiZa4Cam4WGKzTBoNDtecGqY+v29DJNnxMbcgM
D+uOsVC3gw4gndMjf+lMhyDRNPgf7Sfd7K4OK/4b7/62b3Nck02N2fhG5WF1J3BJ4PjMrVa0MwaV
u5sBthlbpSSvb8AQufNi0QxUuzLOgggkeRqTuNfUlp/jfzP9DvEbGjkVDhxFfULVuEsZR/6Dgbw8
RwVd5+sMznFBN8k6hnNS0DxLfLAqaJZvUjinBU2im3xugdK/gInOXoA4oEJbnNdhrPZeNdIPV6pO
CKg1rXpbqqXkPWPe2DIakcNYjAiLz//DUHb0Z+oYcFOb6uQAivrIr8Ijxh1Er6WNpj8i8+jnKd63
CUr8HIwrIoAOZ/Tx06uLdcS4lxrYn7x9INO1We/rUfXHtKC1b30B9mxAL0Q1aKFFVXPVzAGTG8Xb
JvoDUEsDBBQAAAAIAJKLcjh7IRIGGggAAAQ8AAAiABUAb3AuMDgubHVjaW4uaW5kZXh3cml0ZXIu
aW5mb3N0cmVhbVVUCQADw/vfR8P730dVeAQA6ANkAM2b3W7jthKA7/MURA4O0F4cRZQoUnRhIGd3
sUDQBC2aAr1YLAyZpBKhsuRKcnfTpy8l2ZZkWxMyUX72ZmWSQw6HM584Gfvq8yf0ZRUl2dcZKlV1
lcX5bVWoaIWkSlWV5NmveZqIh3le3DnROhL3ykk3QmXKSTKpvjs/K7X+JUsfrqOy+pivVkn1aSB4
SQJXMe6Ks6s/kHt6rRmSSXFihbLKC+V8vv2UFEro54fLi2q1vliS8iIukgu5ieOLfN3ogaJNlbfr
z6tio9BKFXfqEd2v87sPD5W6Tf5RN93wS5970qN+3M5xq8XkJlWnFGyn+ZhnYlMUKqtuBgKXxPci
N6YCFdHqg1ZWFc1SH+aYOi5aRd/bRvUpF+X8f7jfUttQ/a6K1a7jc6JSea2yu+p+jl39DzWLzxfu
TAQsoGiBZ4J7AUYLbyYY9fSDPxOUcYIWZCY8N2RnCP32/5sZyvJvKE435T26RJtSya1GPkZRmuai
+1gVyd2dKpqG4fmhdoL6IO9WeufzRYBkLm7rE7s9bvoljvWJz91Wqtlvc0rtx2azg5at2LYt26wa
EZ/ozegP2khaprWOe6hX6w5LFWv57S6tbHTWyqzzskqyuxJF5W6PSG+or8rZmUjzUu2UnSEPxUmq
SlTl24X1w5gsQnkq9WnUHqGtG7qch3pz6tvnWlLJpj3wwoBqdbUZywt9CpT7DiZBPexCi8997BBC
/nt21Yvi+nC1B4o/13mi1z3fKlAu/HP0he70KdFPKCnbgEFzFEdpqb6+yDwNRxQ6XwROnK3OR/uK
v0b71sX30b4qKYG+ZLQvKwBd5Ph6sazOhy53ffPrTB98JpvoL2eoM86JgQil6m+VIup4HmGYB7WT
UIf7IcaEjgt/vLltz6SB0om+refPrLxdu+VMNP54asIsR6s6ipolS7RWmdQh8VOjRqGqTZFZEQWH
oRVR6DFR6NREoSR8aaJ0NobQQgc62aHlQNYMLdr1PJft0cJ87ZG8hxbX4W5ggRY2EVos5tmHJQXQ
QgG0UAAtFEALBdBCAbRQAC3UBC3sOWgZE35htGj/1A+1Y74IYzB9DmPYMWPY5Iyh7NUY0xkbgg0b
KGcHmwPZA9gw7lN9Nz2+x/gh5R1sPOYwjAf3GGpzjwkngo3FPPtAZQBsGAAbBsCGAbBhAGwYABsG
wIaZwCZ8DmzGhF8LNtpR6wftoe+QOuExdcLJc6WQvz51OqtD+AkHWtrh50AW6eNa5X9r7ev8eF5G
qWpzcfFwqq96WCtTZHmE4qBDlus6ns/7yMIYWyCLT4Qsi3n24R4CyAoBZIUAskIAWSGArBBAVggg
KzRBFn8OssaEXx1Z2svrLu3e75Bd/JhdfGp2hdh9Q3Z15ocgxgfq2kHsQNYQSBxz3++AFBDtuqwP
pAB7FkDSNp6GSDYT7cOZA0jiAJI4gCQOIIkDSOIAkjiAJG6CpJ51nsCkx6SRbtIS2J2hSEpU3Sfl
KUzVfU1zPXhLjJ2CU0eNdm/9UIfwlyqvohTh3Ypf3wtX9yqeXFTkWZlIVWwt9nL20aGUo0V0Ugnt
GNEmE/d1fOtjLVQk0ZfrpuyAmpNDv7eN/3FPmdXoNdGKjUy6n2jrN02Hfg9UUVE9Jtkd6lbcqkzx
NCOiJxREnuIro5uuN6ot/Gr+Aiqi30Bt8BFOcftXvsfERIPtm1b4zTfR02Z7b3gNnWrKg149/hI0
eAeOztyrL4h49wZ7fDS1Gs2sRodWo7nJ6FewX9S7VRiN3t8zTEZ3Nw+T0d1dxGx0YjG6u68Y7VLa
6N2704wOb94C2xj94UdU/pms/4iSat6cFir1ffUqq0vr5Zx6LiFhSM3ifcfwaCYacJm8aMqHTOjg
rT3QcBH937re7lP9lQD+WicyZu7aipTtOlKJ31S8U7AfGoYHZy+xcK1CHFuN9qxG+1ajyXY0fNYy
1806z23841HPOL62H967YdHdPZ45LvGYS+t7NnMYr59tJjt556q3YpXTe4FVSr88TumXk6f0TyyC
7EkA5eLLwTp2ufiBrFku7hOKMe3l4qFD6OB7GaFvWs+oaeJNkIpbzrMPpyWQiS+BTHwJZOJLIBNf
Apn4EsjEl0AmvjTJxD2TRNwwgA1y+JCQgHjjshbp7y4ItLfWN9bXKWp4nFlRRBxTRExNkcDFz6JI
Z0AIJ2KwoB1ODmTNcII9TZAeTnDgcEL638UIfN8CJ/5EOLGYZx+KAsCJAHAiAJwIACcCwIkAcCIA
nAgTnPhvg5Mxij0HJ9pt9UPtr++QK/KYK3Jqrvj0acVSwJIQYORgZTvAHMga1g4oDUhXzKTMdRjz
+vcVn1rwhUzEF4t59rEpAb5IgC8S4IsE+CIBvkiALxLgizThC3kbvoxhbRK+aPfVD7XfvkPQqGPQ
qMkvML4/MWg6k0LEGapgR5wDWVPicMx63/hyfcdl/oA4zAY5wUTIsZhnH64KQI4CkKMA5CgAOQpA
jgKQowDkKBPkBG+DnDHSTYsc7ch1i/bgZ5XLek7WhkpUoSaaHsNLfIyXeGK8eBxPlB9B5oM4Ew90
sePMgeyQM8THWkF6yBniMzfweO8XMqFDXDpInTzTr2mRiX4hYznPPkZjgDMxwJkY4EwMcCYGOBMD
nIkBzsST/UJmes6M4e2FOKM9eiYaV54KOKL+e7Y2ZJTuay8HP6scqcs0lOiXZQ6ocLr68oxNdoWZ
Za8wc9QpoE4JdSqoMz7uPFn6eSyQAyCQe4WeQQwYlXXI6egZ9Pe1P1nM2H23Z/v+ebJ3/gtQSwME
FAAAAAgAkotyOKH0p/ZrBwAAmTAAACIAFQBvcC4wOS5sdWNpbi5pbmRleHdyaXRlci5pbmZvc3Ry
ZWFtVVQJAAPD+99Hw/vfR1V4BADoA2QAzZpfb9s2EMDf8ymIDAM2YFWo/5ILA1kbFAiWoEVToA9B
YSgSZdGWKE+S22SffkdJtiVbosVUcZqX0CSPPJJ3Px7Pvv5whe4Tj7JvE5ST4pqF6V2RES9BAYlJ
QVP2KY2p/zRNs7nirTw/Ikq89gkjCmUBeVT+IWT1kcVPN15evE+ThBZXLcFLQ9c8HFr+2fVXhLvn
mqCAZh0z5EWaEeXD3RXNiA/lp8uLIlldPBj5RZjRi2AdhhfpqtQDeesireafFtmaoIRkc3JE95t0
/u6pIHf0P3K7635pE9NzA2JVY9yBWLCOSZeC1TDvU+avs4yw4rYlcGmFuuHZgYMyL3kHypKsnOrd
VLUUjBLvsaokV6mfT9+ozRq+h+QLyZJNwwdK4uCGsHkRTVUMf6icfDrzJr7hWqqNZg8TX3csKPhQ
MLGKZgEUdMtFM8JrdB3Nwomvuap6htDnv28niKU/UBiv8whdonVOglo3XUVeHKf+7mOR0fmcZGVF
+yRRNQA/0nkCezCdzVGQ+nf87O4Oqz6GIZz9FFdS5crL86o+lstu1dRidR1bJ6WIaVoq/wDbBTLV
PuF9vSrDeCAhyNerfOZunVXSqzQvKJvnyMs3q0WwtKZSZ2d+nOZko/YEaSikMclRkdYqQKFPFqE0
DuBcuJXAPjvYdR0DMfLjA5ckQVlvatiwHZNvaH7Bz+MvVcOKXva7APmpjhXX0n4/u264Nj9nMEt/
uUopTHxea5DPzHN0b28UytFbRPPKi9AUhV6ck28vMk4JF4LOZ3MlZMl5b1v2b2/bKnvsbStoLmij
vW0sE+gS9M8XBsV52/pubj9N4ORZUCIhn6Dd5nR0RCgm30mMbAUbmo0tbiS2Yru8PEHqEFFL0TTD
Vl2Ty1qKY2murk+Q1SP7/vauOs2ScR1ttftMnukyYNsTvzTqrqFZihLulOXkOVoRFoBfvS0Vykix
ztgRQKlWC1CWJgWo6BBQ0diAsrnnngpQu90WkSpqaSdHqj3ZPVLZrm7BjXRIKttwcZNUlqFYcFhb
VKkKxq4EqpyRUCUxztbNIwGqIgGqIgGqIgGqIgGqIgGqIgGqoiGock6NKkdXtX5CngxVYOVQ4OZ9
Cma5hhSz6CGz6OjMsvErMGu37SJ40ZaacvDakx0GL9Wxbc1uwQsMF1bSiLMcV5WAlzsSvCTG2To+
FcCLCuBFBfCiAnhRAbyoAF5UAC86BF7u6eHluv3MPD28wNx5wcYvQ7H201BzbSmKLQ4pthibYrr2
qhTb7b8IZ4uWvnI425Md9mrULdDfaOAMGxhO02jGYi52JHCm4pF4JjPQFgYLAdAWAqAtBEBbCIC2
EABtIQDaQgC0xRCgNXbnNESzVdPRzX6SviLSwPahwI3+BBGaLNuWh2xbjp72Muxfgm27gxBBbtlS
XA5ye7LDYja4irHTjNmwbSs61neQ0xTVlGGcOhbjJAba8mEpYNxSwLilgHFLAeOWAsYtBYxbChi3
HMS4QaAak3GOaR9HK4LBob+qTpAXBKiIaN4FPd5WVvPONXU2Kxvb38AxeB/AwH2RFl4MGtYzfvv1
KL1VtnN6P2U5DUhW793L7RR4Y4pmcacSYCDemvkRJwQccEa8AN3flN/uoPIM0Zeq8jfctcGDLp1K
rGfQ7UC1BZUNcKsUXlYck9wdby0+fflNRD/1vdNzrKZ3+XzJsNcnsxyhInCfVQ5pmKqll1fQMTG/
vANuK+FXX0RDmzoeOYVO/MoQ2nfvjaoNuFB7R258d+OHm+vweO9IqjeV6r2Q6r0c0vsE+xc3QpRB
vbdBy5DeuzBmSO9dYDOsN5XovQt+Bq0ykNG7ESD1di/vg9pH//gT5Uu6+urRYlqeFsoh+r1m/LcM
+dQyVNXBpjXM3w9pHkOJI2zI5ZM/MR8kuC0OnA7+rfjCn2u5lsBy+VNpmOFWInk1T0D8zyTcKNh0
koFHKC8xe5Bydl+qdyDVm0j1Duve4rMOUqiGl3RpH0ct4+A1oO1H5WLRxvPAtFyneh04GIoyQ3VG
YXwhUjkD3ZX7qUxymDNIxs4ZaIb1kzmDLRJEj/2kNaPcY39PFkHknKTfQRP+o6dp7sWk+oGV/9TV
lqQBhU9ZV1vxtCJd9RCmd1VXYfewZINh6NhoZVRVrFhgD41kA7B4YLaBg00fIdkgOc7WsxNBriER
5BoSQa4hEeQaEkGuIRHkGhJBriEZkmvQB6YajrNkUKLBcMFK+rMUz3qmb/wRHAfiae4xP/UybZhU
5Zoe3NPce4/Rix3Si41ML40n70aB126zRBRjzZnlINYW3YMLv09gMm9+QKP5w6rwHveZA4+kwy9x
dF1zsbUljqW7ioF3v6bRsAKhnwRvjJF4IzHO1leZgDdMwBsm4A0T8IYJeMMEvGEC3rAhvDF+Kd60
hN+oCuZyJlxbhovtl8YU+MjE584xFq58HmTCZnvx9mm09zPznmdTyZjmq2kPKsceR0eWtHsbJY23
0UEjO2zsfCYd80Fb4IONR1HLfAc9gaxuw2+1N7XvDPw3WfL6UhloIv8DUEsDBBQAAAAIAJKLcjhY
nIMu4wQAAPAbAAAiABUAb3AuMTAubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADxPvf
R8P730dVeAQA6ANkAM2ZW2/bNhSA3/0rDgIM2IBN1pW6FAKyNAgQLEGLekAfisJQJcoRKpEUKbfx
fv1IyTf5wlqr4ywvkXh0rjznEw3d393CpyopyOcIBG7uSU4nDcdJBRkucVNQ8p6WRbqIKZ8ZCUvS
J2yU8xQTbBQkw8/GXxizd6RcPCSieUurqmhue4rXrmMnZo7S0f1HMA/7iiAr+AEPoqEcG3eT24Lj
VF4vrsdNxcZfXDHOeTHO5nk+pqyNA5J5Qzv/ccPnGCrMZ/gHsT/Q2c2iwZPiH/y4efzax14SZhh1
NiZSLZuX+FCAnZm3lKRzzjFpHnsK1yh33MTPAuBJdSODxbx1dRNbyDChSp67RXxLUxH/YW2vqBri
vzGvVoK7ApfZAyaz5im2TPkHrfN4mkSpGyLLh2kprzwLOTCtotSzXQRTEqW26YwAPvz5GAGh3yEv
5+IJrmEucLaMxEKQlCVNN7cNL2YzzNuF/r5BZ0Bt4KySGcdTChlNJ2qnJvtL7/Jc7nRsdlptnu3u
dLdtkr2VpdpyjcyrVsULfFPdyOJIna4q5m5cXRt8wbnUX2Z5Um1G3bOMiqYgMwGJWOUGMpHtEEaj
tKQCr4KMwIa8KLGAhi4dyotjugC0zOQuqA6QVfVDB8k9JPj7ndLEWbvuua7lhb4qnxir6v9uOZZh
2YF6cCwNxI5tuKbzy+h+a27VtsqeS78yWkjPV8sQxNS/gk/eKiIBb6AQ3YhADHlSCvz5Rey05MBw
NaVGTqqrozJeH5Ux/nxU1hRCIyuOygjXxJId95dnzVW/2R4e30dy60nWzruIYFOcAw8ClPgbLsE3
TA+FgWoS3whMeak66ARFZNi261uhp1SREQQ+clAEzhHdt4+Tbi9bfB2QLWclOmk+ZCPLBdXBhwwR
CpWat9aVAIZJJofoTeue42bOySD22I47iD1snz3szOxBnhm8FHs2tdVBiPViGQahHV2Qm1LRbzJG
9TaJRVLi7s2VLg7JmgXDJ4LLsZAVuFvgsgPHQJ69AZclb9EAcKEzgWuAnfXQMw24mAZcTAMupgEX
04CLacDFNOBip4ALXRRcoW2GphOBe1lyyTGI0rb/L4Ew+foegrB6H2H1uRFmyxBfGmGbIutYVveC
GsayHd3TuGR7liWD2+KSa8nXjL/NJRuFA7jkn4lLA+ysZ7rWcKnWcKnWcKnWcKnWcKnWcKnWcKk+
hUv+q3Dp2DHupbkke1te2Luw+H8Aiu8Dip/9jOVeEFCbautIxXvRDSPVju6JpPIt2ZVbpHJM21Dg
3oDKCYIBoArOBKoBdtZDzjWg4hpQcQ2ouAZUXAMqrgEV14CKnwKq4FVAdezYdjFQyR5XK+5/JlZP
bcOtpIF20H4EJbEPJXFmKDmWrMDlobSprI5OohfmMDrt6P70b8Iw9P3AQ7tAs33TR0G4ffQy5W9A
5K6JZvuG5fgDiBaeiWgD7KxpIDREExqiCQ3RhIZoQkM0oSGa0BBNnEK08FWIduzAd3miyQGJ0nYy
zoW2VJ6+VImTEtK21X79bedjSJPwZi0D8bVgH5PVhwwhh+meqO8Ue/zpNAZ8CPiJ/FUiYkFSacJI
c3FMyHTCWifkOqHYFy6Tl/+Yau/Tpj/QTL+q9qHh7x4QndUMpx9wvnK+jZWDI9eTb0efUYLVqbzN
byez1UvwJXr6X1BLAwQUAAAACACSi3I4vbAq6L4DAABUDgAAIgAVAG9wLjExLmx1Y2luLmluZGV4
d3JpdGVyLmluZm9zdHJlYW1VVAkAA8T730fE+99HVXgEAOgDZADNVm1v2zYQ/u5fcQgwYAM2mbLe
VQjwkiBAsBgt6gH9UBSGSp0coRKp8qWN9+tHSnbiVyUB3K3+YvKOz93xXh7x9uYaPjZ5xT6lIFHd
spLPlcC8gQJrVBVn73hd0VXGxdLJ25zeo1NrigydihX44PyF2L5l9eoul+qKN02lrneAU9+b5KQM
6ej2A5DjvlIoKnHEg1RcoHMzv64EUrNeTceqaceffTkuRTUudFmOedvFAblWvPefKaERGhRLfCb2
O768XCmcV//g7On4NMIgTwoMextzAyt0jccC7M1ccUa1EMjUbAcwDUvPz6MiBpE3lyZYFJ2ry8wN
HQJN/tAL8ZpTmf3hbktsDvFvFM1GcVNhXdwhW6r7zCXmB53zbJGn1E9CN4JFbVaBG3qwaFIaTPwQ
FiylE2IE3AjiiMCiTWkYkBgWX81i4pojwkrsWZlSzyXeCOD9n7MUGP8OZa3lPUxBSyzWYRtIXtec
dltQolouUXSb3QJDD7aVXjYmNdlCQcHp3JZ0fih6W5amJTLSo7qEdGXst102diRr2FrGdNNBIi/x
7MZk0WD69JH9uPp++Yylwa9veP4kjnrDLZeqYksJudwkAsytt+MdjWjNJW5ulMIEyqpGCYqvozOL
U1gAXhemXLavTAmixAtNZzD8fmORWHTywEuSievZXMuxLdXvvhc4URzZg2NjIPMmjhv8MrrdIgNb
ftPI9EvLK+P4Yh2BXMQX8NElm4gkvIFK9oMHGZR5LfHTjzHUERLCxUI5JWsuTurE15O6Vjyc1KlK
DuiqkzomBmIpTvsrC3Wx25p3s3epqT0rOhqRKWxl58hJgBq/YQ2RQ4IwiW2bRE5MzNL20AuAoTOZ
+JGbBBYaOgmJCIlSiE9gr2bzvpodLR7RrUcrPf84mb5Padfwx7wyDo2d5S4uCS2ywszcmy5WgUoL
tgt7YrZcQTd8z1GXPqQufWbqCr2A/BTU9ZTrIQ7TO4G/jsP2sGCK1PBv5kL2E5fJvMb+c0pXx3Rq
1eIe7/lB7EbhAe/5vpv4cbLFewEJndAw4SPvEccj8WuIzz0X8b3C0CNp6AHi0wPEpweITw8Qnx4g
Pj1AfHqA+PSLiM/9P4gv+YmJz0yNUdlxORcDUvOMs0nPa6Bd8/36294TXeVCPepAfqnaD/nmeS3N
gN0y+3o+oKke8aOep89lxF5Nrhg15xxaylNKfahcx23+WturL5vlZGiWbaaOjXJ/QPZmC6Tvsdx4
32aJowO0o98Ov+AM7dO8u+De1Tbfuf+mQ/8FUEsDBBQAAAAIAJKLcjh3VFDI3gEAAG8EAAAiABUA
b3AuMTIubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADxPvfR8T730dVeAQA6ANkAMVT
TYvbMBC991fMsT3UkeOPJAZDyIZAaJYteGEPpRitPHJE9eFKMt3011e2N9tmCext69P4zXua0ZvR
freFb4oK/b0Ah36vuam8RaqgQYleGP3VSMFOpbFtRDvKjhjJnqHGSOgGn6IviN2dlqcDdf7GKCX8
9kK4TpM5JTxnH/YPQK7XKqAR9koF543FaFdthUUW4tN65lU3e0zdjFsxa3rOZ6Yb+wDaezPVL73t
ERTaFt/o/WDazcljJX7j7V/6eoEZXTWYT2dUQdb0Eq81OB1zYzTrrUXtby8E65wnKV00S7BUbUKz
aMdSmzLOIwKKPk0gbg1z5ef4X2TwEO/RqnNiJ1A2B9StP5YxCR+MxcuaFixd5fECahmiLM4TqFXB
snmaQ60LNicBMAFYLgjUXcHyjCyh/hmCeRwodkAGritYEg9kX7BFsgpBH1JJRi4np80v4LJ3R6Ae
mDQOL/MwZYcRtyp4UupeSmgMq4ZpVtfAO87DPpRkUo5ucCodPv+PXrhprGfGqDvTdK9GERmi4GBQ
TNaR161Nu/KIPKifb/FfDGQ0XJ8LTSWwcWk/fnr1Pjy1/iUH7ofoHuh5t13Yor0eVvfKFQfqi3Co
BuxIdYsOOtSN0O2l4DzE4l2M+ANQSwMEFAAAAAgAkotyOCaAJ0IhBQAAmRgAACIAFQBvcC4xMy5s
dWNpbi5pbmRleHdyaXRlci5pbmZvc3RyZWFtVVQJAAPE+99HxPvfR1V4BADoA2QAxVjfb6M4EH7v
XzHq6aS7hyP8CgRWSL22qlRdo11tVtqHqooomBQt4BSbLd2//saGJJAGArttty8l9ow9nvlmPJ+v
ry7hNvXj7M4FRvh1FtEFz4mfQkgSwmOafaJJHDx7NF8p/toPHoiSFAHJiBJnISmV/whZf8yS5xuf
8QuapjG/bCmemYbuq5EVnFx/BfXwXi6EcX5gB8ZpTpSrxWWckwC/n88mPF1P7k02ifJ4EhZRNKFr
aQf4BafV/h7PCwIpyVfkiO03dHX+zMki/kHmO/Ezm0x9JyRWtcYC1cIiIYcMrJa5oFlQ5DnJ+Lyl
cGZFhunb4QxyPz1HY0kutzr3NEtRIfXLapBc0oB5/2jNEeFD8oXk6WbiKiZJeEOyFX/wNBX/QG7u
LX03MB1Ls2GZ4NdUswxYpm4w1U0Llpkb6CoOUByY2Sos125gTdUZLB/xQ9dQJBcjQpa5gaEJYe4G
tuHgR4FTxlQ9Afj879yFjD5BlBTsAc6gYCSsD2Jo4CcJDXY/eR6vViSXA+2wQ7WAiP8qRYd5y+8Q
0mAhAr14OfQxihAonlppSTfJ4FY/pY9aI7VaPZYVqVQxDFsTP9C3qFM5Vd23q0LRPYlQvz7le7j2
pNpqTRmPsxUDn21cA+iH5glOToKEMrI5ows6RHFCGHBa24sfXboANAkxiAJ/GJSZ6jgzEzLydCU0
SSjHp4alGYYpvM8mGDxr6iiGKsUmqO4ZmjJzzD9Prhs1Q2AC8R58W9MY9z2tDWBL5xRuNX1jEIMP
ELMqP8GDyE8YuXubhWTdInC6/K5EWXraOZc/ds6t87JzjsesZy7unMvyHlvC7v2ikJ+2sXoz/+Ri
6LNQVhvmQsM7ByQBEvKdJGAr6tRyZgIltjJT8VNAaICipei6aWvOVKhaiqPaqmrjrmq/MuDqqKDp
LvhhCPwhZlVBbUuLOTkshNckCzENNgd75WTDrMApUQxuOeV+Atpmw7u2TRfzRQXIA/bKubpcuO9R
IrZWH7QjoBmLQ5LXPnwzj2FOUlg+HbQBgeIXWfAgCgXGGW/0EG5v5A0JMpTwpRr8Qz3kaEBXQyrK
rjwD2wTlgwxBTniRZ7Vax6LbhWogyQm8Y7if82OauzDX6t6b+xDe7+reB0+nG8TR0efvBaBeO/Bu
q/ITd1MteR0dUwvkhTCvlH/3GRrG1D3KO5gkbo9ekHdersaAu7Vz5cZNFUSbm/F32vHUuPUHSW/7
gCHSu85giPSuVxgmHY+Q3vUTg04ZjrG70XN0isviWkP9r7+BfYvXX30kXzJawLCfvM4EuWLe1NFt
QzfNYWnTVxufMGdESRhS09lzFqCGQOXAjfHfWrjgZzHs92BY8JFhEK5UWLVPSILPJNoY2EyXgcEc
r7FMhyTyVjobJU1HSa9HST+Oks5HSbNR0nyUdFFL92M0pDiMNFvi+iiiX1AEY79X71ft4wzDlzrY
lImDtJvA3bOCj0koOO6xN4Py5ZtB+cpvBrrtmK/2ZrCtW31sv2ztPY7t7+m22f4UYzhzrH22b05t
QzOdHds3VQV7ix3bVxXD1geyfVH7zFcg+yPX2SZR2cP1yx6uX/Zw/bKH65c9XL/s4fplD9cvh3B9
82ep/ou0HUD1bUtDiJjI9TuUf5Eob/ICAYxdsUDuL7HDJrhEqUS/IYnYtCh7788d7YssAs3uZS/p
hzcpHYfa9SZlozdpr97uRI7lzH1PzjT6jhbcBnUZ/mGgtuab1h+8ozbPPHVpH4yE/wFQSwMEFAAA
AAgAkotyOGrsupyGBAAA+hYAACIAFQBvcC4xNC5sdWNpbi5pbmRleHdyaXRlci5pbmZvc3RyZWFt
VVQJAAPE+99HxPvfR1V4BADoA2QAzZhtb6M4EMff51OMKp10J90Rm2dYIfXaqlJ1jXa1OWlfrFYR
NSZFCyaHybbh068NSQMpuGGVttc3BQ9/e2Y88wv45voKvmZhwr75wGl5w+J8XhY0zCCiKS2TnH3K
04RsgrxYauEqJPdUS9eEMqolLKKP2j+Urj6ydHMb8vIyz7KkvOoIz01DD1Fsk8nNF0D9a/kQJUXP
CrzMC6pdz6+SghJxvTmfltlqemfyaVwk02gdx9N8VfsB4brMm/WDslhTyGixpC/4fpsvLzYlnScV
ne0fP3eoFXoRtZs55kIWrVPa52AzzWXOyLooKCtnHcG5HRtm6EQuFGF2IZylRb3URYBtDUEWPjaD
9ConPPgLt0dkDum/tMh2huuEptEtZcvyPsBI/EG9eLAIfWJ6NnZgkYorC9sGLB58YiEX2bB49Inu
eOYE4PPfMx9Y/gBxuub3cA5rTqOtL9iGME1zUt9CWSTLJS3qm+6uQSOW27fMRLzBYgNRTuZyn+bP
hz7GsdjnADWqOsp6b5rbOsTOyFa2HWPrrJa4lmnKG5EaoWlygg79aorgjsZCv43wyMxMmqdXOS8T
tuQQ8l10IEJpOzGZkDTndOemDzrESUo5lPl2SXExpAXI00jsgawAkVfHM2yxh4w+XEsljepxCxsm
wq5MIJ/K/P/pmJaGDEM+OBUTBAbSLAf/Nrlp9a3cVFFz5PsqT8TKZ1sX+OLuDL5aO484fICENy0C
AcRhyum3V5mnJgeFs8VGi1l2Nmgr/hu0rYrHQVuZcIUtGbSxQuFLNLxeHJVn3XK7nX3yxdazqO53
7sM+OT0PAqT0B03B0ZBle64sEkcTJei5PhjHCG1N100He5aU2pqHHGS6svr6tZezebOXNb56bNtu
8Y/sEFHKPqlruG8qlkMme65ejMOKski00YfagYKW64KNYY+GTGcUf6rn/KlOzR/HtV+PP/vsqkBU
dbwZB6ID7bEgcmTYLRB5hoYliFsg8swRILJPBKIR8zw1caUAUaUAUaUAUaUAUaUAUaUAUaUAUXUM
iOw3BRHWTcsc1r4aiERNiwtZzP9DImH0HEmtsRMxyXTRGzBpn2gVnDDq+DWOTofiI/Gkm7p4K2rh
ybA03fY6eMLGCDw5J8LTiHmeWhsjBZ+kcRBQwjhMKGEcRlRtHGKUMA5DSjo0SKna+CKmnPfAlPlu
mJJVLq5kef8isDqyPbbCEupee5FJuIdJ+MRMMrHhviWTWllV0gl3PBxJpwMxiA3J8h/Cdfk5HvBQ
5Gazon3jzZEA2RwQDSHdQcg9JJpumzpGTotoYkDTrf2Xn25rhjUCaO6JgDZinj0FsApoWAU0rAIa
VgENq4CGVUDDKqDhY4DmvgfQhr463xJoskWEUvbGqdBGxMuXTG6YAqmL7fc/Ds4Oy7Aon2zAvyer
L+Hu3I+Lbrph8ljvGX0axahzs18JXcbAN4wIrUZiPmSsVEbxM6qy4ufWbXDi30pW7nH9TRT9LbPZ
197NA7yZNaLkM413i7fB0dtNHXvb+yhnVL501wEeRLb7kTtxuf4EUEsDBBQAAAAIAJKLcjhocIOg
QQYAAIInAAAiABUAb3AuMTUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADxPvfR8T7
30dVeAQA6ANkANWaW2/bNhSA3/MrDjIM2IBNFsWLLoWBrA0CBEvQoi7Qh6AwVIlyhOriiXIT99eP
lORKdmRa6pzUy0sk8hzy8Fw+kravry7hLvXj7JMHgpfXWZTPyoL7KYQ84WWcZ+/yJA7W07xYGP7S
D+65kawCnnEjzkL+aPzN+fJtlqxvfFG+ydM0Li+3FC8ItnwzYsHZ9Ucw++fyIIyLnhlEmRfcuJpd
xgUP5PP6YlKmy8lnIiZREU/CVRRN8mVlB/irMq/nn5bFikPKiwU/YPtNvni9Lvks/sZvW/ELm1Pf
DTmrx5hJtXCV8D4D62He5FmwKgqelbdbChcswsS3QwcKP30tjeVFNdXrKWKGCan/WDfyyzwQ0z9R
t0X5kH/gRbrpuIp5Et7wbFHeT5Ep/6CafDr3vYC4DNkwT+QTRQzD/MELqOmYDOaPXmDZLoH52gsc
SuTDN/lgO7ILmfKJOKZ8QlITYecM4P1ftx5k+QNEyUrcwwWsBA8bixEDP0nyoH0ti3ix4EXVsB1f
qAdQgV6k0jPTObIgzIOZCumsp+1tFMmcmJq1XuWRKo71a+WOrZZGrWnLVmmlQm1sqhfpRqlT+8/c
taxOmM88kvrNOo/qxbN6zGUuyjhbCPDFxgugVty19ewsSHLBN6vxwIIoTriAMm8skw97lQHyJJQR
U1klI2C7mMm8yPjDlVLlYdUuJTF2qHK0mKhI/WES23CprQQncoApJgYiv55dd1CgMkCmcfBlmcdy
5vPGBDEPzuHO3Vgk4BXEoq46mELkJ4J/epZxKhhxOJcuMKIsPd/fWfyzv3NZPO7vLGOh64z3d2aF
zqBQM2cUlufb2Xlz+86TKZCFFUqEB62TegQBEv6VJ2AbJmWuo5LFNmTGuo4HeIgiMyyL2MilSpUZ
LrIIJR6wPbpvbmd1TCsy9vQ1xeUdtaBU4ktNlfF9M2Y5pKqSK5sELHkWyrJ7VdlZ8HJVZAe4htEW
12xnHNdwD9fwkbnGEHN/Ntc6YdASDm9ZPZJwO8o7hHNM13XIE8I5iFLH7RAOydqyZD10CEddNgJx
yDwS48YM1JIB6yCHdZDDOshhHeSwDnJYBzmsgxweArmOl16GcjZxsQf2iWJO1YEXVAXwAsCz6Dje
kR7ekWOf41wbnw7vOvHQko9s2T+SfDvKIEOZ5l/lwtTBfyr8hNeXjGDd11eul7yvPc3DWL4VfX0y
b/qaRekX5UDyMkwsB22RFxkMkZa82KDIHkNedCzyjhioxRXRkZfoyEt05CU68hIdeYmOvERHXjKI
vOinkNc5efKqipRtqhSfhcHE/i8Mpj0MpkdnsHOSDO5ERktjurWSkTTeUd6locUwc57etBFlltm9
abu2wSy3S0OXOWNoaB2LhiMGahFCdTSkOhpSHQ2pjoZUR0OqoyHV0ZAOoqH1U2i4745/ijRUtaGe
nB/m4pZaS0e/hKpCD7KP9bCPHZl9yCbstNnXiYOWgmxrTSMpuKO8RUEmb902eXIkRPKkaNfx2EBQ
HQlpexm3mEGpNQaC+FgQHDFQSw6mgyDTQZDpIMh0EGQ6CDIdBJkOgmwQBAex7OgQPPQZAMjhpYas
BPDDEMr7WPRxUfVVzUq4wc9mZc9Tf6pOvKAixl2Zl34CaDPxp/8Tz9t19FoW5JmIQ1403n12X8ry
zeWr3WuMTCZ/lQX3CioyFQruh3B3U30pB1W04UPd+IvZF4MR+9SeQb8P1ORa1SF3qerufECzzYBG
ffpyzoRn+NrwhxNsr4eUV2Q4XjzJtAbJ3bIub+pgUn3ALw6pBdUGc1srn8xiOlY1B6KXtE1tTNrS
2Lt9kwG7996Ru1+7BdFm4x0gjseJk3HidJw4GyL+Ek60O4eiYeLfj0mDxNuD0yDx9ig1UDweI94e
t4YtNRxle+dItle+2leawv3tdxBf4uVHPy6nVdRAyIP3daZ+yiKmDBNkUtcdBoFhuwGy5aOC3pCd
TayzQKmoTB1ohPy3VP740bwONXmtrnXD0rpWEfU8IQ/e82hjYLeEBkZ2vMb8cRQL1qOkv43jjDlO
HDXi+miHuWz2k6RKkYO50Xu+UkM8/QAhUIPKK4zcmzclsvNrsz3lU935u9Xz5I6vRL8rqtlkBvpZ
58i4c/toPsQ4eIJvS+pfUEsDBBQAAAAIAJKLcjhx9UvIJwkAAMpLAAAiABUAb3AuMTYubHVjaW4u
aW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADxPvfR8T730dVeAQA6ANkANWcX2/bOBLA3/MpiBwO
uANuFVH/6YWBXFsUCC7BLjYL7ENRBLRIybJlySfJ2+Y+/ZGSHUmuNCZb2cn2JTLJoYbkzI8cUuzd
xw/o04Ym2ecZKnl1l0X5Y1VwukGMp7xK8uzXPE3C53lexAbd0nDJjXQX8owbScb4V+M/nG9/ydLn
e1pW7/PNJqk+9ARvHduiZuSFV3d/IHP4XTPEkmLgDWWVF9z4+PghKXgonp9vb6rN9mbhlDdRkdyw
XRTd5NtaD0R3Vd68f14VO442vIj5Cd3v8/jdc8Ufk//xh7b4rc9dShj3mjoehRjbpXxIwaaa93kW
7oqCZ9VDT+DWi2yH+ixABd28E8ryon7Vuzn2DBNt6NcmkX/Iw3L+E+6myD7kv/Nic8j4mPCU3fMs
rpZzbIp/qH75/InOQod42EdPqXhysWejpy+z0DUD00NP2BePge3YVwj99u+HGcryLyhKd+US3aJd
ydleG+whmqZ5WP9EVZHEMS/qH/1xQ42wHMB4I1o8f8IBYnn4KIfqcSDtlygSYz03G7m6pfX4ND/r
ZvZS9mL7tGy3qUVcgi35Q3SPkGn6xTzWrDGEBY+E/L6Nyr1z1ZTf5mWVZHGJaHloIZKt6epxdRWm
eckPms6QhaIk5SWq8v1bxcOoMEJ5ysRISEsQvesT2xNjmfEvH6UoZ3W662M78LDsxPJGjsK/zMAx
iO3LgjeigrntGKbl/P3qruO/cmiF7YXrbZ6IV1/vdSif2DX65B5UKtHPKCkbV0FzFNG05J/PUk9N
EI6uRR8YUba5Hs8s/jueuS2+jmdWSQllJuOZWQEpxIB3Rqy67pve/cOvM2EDGav9v5yhtpMGCiKU
8j95inzDdD0SSGvxDWGOJJghR0XQMyzL8TFxpahnEBMHFpkhPCL7/uGxGdMaZwN5e8+ZKXuLtGrx
KM15qLYsRxvpgvX7SrTlGRM+9XOtQ8GrXZGdgJGNOzAyTD/QAxIZABKZGkhe4J0TSJ0uBtFEehpp
oulI+AhNgUlI4HyLJtt3zB6abGIIC+yiCdtYA03eRGjSqKf1ZwKhiUBoIhCaCIQmAqGJQGgiEJqI
Cpq810CT9QpokvYtnqRhXwBS2MF6kKIDkKITQ8ozneAykOp0Nogr2tNNE1dHwmq48nzbNu0OrjAW
Jm23tLIN39WAlT8RrDTqaT2cQrCiEKwoBCsKwYpCsKIQrCgEK6oCK/+ysLKwmN1myH5VWklDn4W1
hZ+FW71Iz8CuZrS3GODWYurFlX95bnW6HSTYoqelJsGOhBVjQTswTb+74HJNwzH7Cy4v0GBYMBHD
NOppHX8BMWwBMWwBMWwBMWwBMWwBMWwBMWyhwrDgVRg2JnxphkmjF2n+uWh2tAoLNEPFcIBm4dQ0
Cyzz9WjWGQCQa2FPX02uHQkrBpKeZ+M+1wLDtoMu18TSTYNrZCKuadTTwiCEuBZCXAshroUQ10KI
ayHEtRDiWqjCNfIqXBvbWXs9rknzlyKWeZH1mi7h2ADh2OSbYQS/BcJ1hgJkHetprsm6I2HFNZzp
OWKl3WGd4xq+7XXDUKKzhMPmRKzTqaglBINgxyDYMQh2DIIdg2DHINgxCHZMBXadXrok7cY2694C
7aQryHLCB94i9/gA9/jkKzty1lPJHxoUkID9NmgS8EgYifHc5H+Kxskj6nlJU94ch4fPQ3nV85YP
pW9ylohfxVCeMJ6h5LKiRaVIYE90t987tiDYEG7W2wjEOieqGE+FYI2KWm5xCMEcQjCHEMwhBHMI
wRxCMIcQzJUQPHa+eV4Ej21Bvi0ES6+UaeRMJ7J9GFumrQfjaADG0eSbht6bCLNPDA+I5ajXGk0s
HwkrLkwtJ3CcXhDuiuF2ex+aBEQHi9ZUWNSoqGVJBGExgrAYQViMICxGEBYjCIsRhMVICYtjZ6vn
xeLYruZbxaL0D1nOu0iUrg3IeACQ8eTf0Amt3jwgOwMFojLutUsTlUfCqjG8QGVw/E0e8XsxvK9D
SnsqUmpU1OIlhkgZQ6SMIVLGECljiJQxRMoYImWsRMqxc93zknJsn/Ttk1I6iqxPeMgFzm60mbkc
YOZy8gjf9f9KzOwMGUjPZa+FmvQ8Ej5jLD/6TY/r+2aPxJZw26AXy3tasbwzFYo1Kmr5tYRQvIRQ
vIRQvIRQvIRQvIRQvIRQvFRCsRJRJ0fxqV1cJKoXEtiZIcoYqpZJOURnmVcny8J77B1adjZ/ln4n
cwWPPlV5RVOED+/+/NedWNpWDeoZ5lmZMF7su/sSnStcOhc/k0F9hIHRXRYuJWiEeRScMvTpvr4L
hGoLQL83iX8zhwZFac5sxEYqfalob391hpgUa3iekGxNYi8+v2h/Is0LSxc0utEuk90kxuc1DA/U
SUzRDQNET+0/oTglFtYT0UMj/Jba01Fsvyy7sHpyGgOd5ofuQo3W3L1SFEaHaVqhONErTvWKL/SK
h3rFmV5xrlc80ise6xVfqhS/hL0kndWiWvGX9aNS8XZFqVS8XWMqFk90irfrULWmMi3dO2vV0fL1
5LrH1D/+icp1sv2DJtW8HjVUiojkLpPXiMu5b7um7zsnp5WmLv35MKkf8cn6pRGWz1koRaTRKuoj
/mxl13yviXPAxGVUrWbhjUjZvIfx8DceHRTsepPiIPck4F5guUimaVp33ck+O33nExZtgxwsRty2
91GOJ591KhtcD8qmnHfDejWw+bKafMMan/tE78WjwN2SVU8lzd2SI2HFrxVcQtz+1wqOvE3X2+FQ
/jaWT3TJUrOeFrQraH9jBe1vrKD9jRW0v7GC9jdW0P7GCtrfWE14yVLJ8xU2OAIS2LblXfgK+MF3
pI3Xy/XvPlrribW8omJKkp52EkbrARitJ4bR2a97D3QnCKV1RzVNJPVEj/Zid+t1GX7nN10dsvmW
GRDvmGvYcoltvWDNlxNR0EIN+4bjqX5rwCe6jKlZT0uCNQS1NQS1NQS1NQS1NQS1NQS1NQS19YSX
MS8GtZ7wT9gwpZwrljJYLsNfHYbSz2bh998+/waKoVybigGh6UswcvR/Ko0EKjXHunHKEbl+NBw5
1eZOOLLqhCPf5q6/zR0MTU65dAS4dCcQ6bmBUtjBhx2ol9/VfjCkOJwi7Ge3qczs/1BLAwQUAAAA
CACSi3I4U7im12YHAABjNwAAIgAVAG9wLjE3Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJlYW1V
VAkAA8T730fE+99HVXgEAOgDZADdm19vnDgQwN/zKaycTrqT7gjG/N1qpVwbRYqaqFVTqQ9RFVEw
Gy5gszbbNvfpz4bdAFtwcI/dbK4vNbbHHs+Mfx7w5uL8DNzkYUo+zwDH5QVJ6HXJcJiDGGe4TCl5
T7M0ephTtjDCIozusJGtIkywkZIYfzfeYly8I9nDZcjLNzTP0/KsI3hqIys0Ezc6uvgEzP65ZiBO
Wc8MvKQMG+fXZynDkSg/nJ6UeXHyxeYnCUtP4lWSnNCi0gOEq5LW889LtsIgx2yBn9D9ki5eP5T4
Ov0HXzXdTz3shEGM3XqMayEWrzLcp2A9zBtKohVjmJRXHYFTN0F26MU+YGH+WiiLWTXV6zl0DRPk
4fe6Ep/RiM//hO0aaUP8EbN803Ce4iy+xGRR3s2hKf6BavL5bTiL7MCFHrjNRMmBLgK332aRY/qm
C26hJ4o+skUlTKui7An/FsUAmqJ0P4t89wiAD39dzQCh30CSrfgdOAUrjuO1qtAFYZbRqHoEJUsX
C8yqh65TQS0svbvIhTnmtzADMY2upR+ve+reJYkIhLlZy1VmqJxXP1Y26NSsxdZ1ZJVXIm5gBfJB
2E7I1EYztzWro+QLToT8eo3TmO6oHqygvEzJgoOQb5YP5FLbSh4dRRnleLOMGbBAkmaYg5KuVRKF
QWEAaBYLN8kYEqb3AuSKKCD427kUxXFV79go8H1XWpifSBf9gZBjuBDJjidigDmyDBSgX48uWjtf
+l1EbXRf0FRMfbzWgd8mx+DG36jEwSuQ8nqTgTlIwozjzzsZp2IPBsfCBkZC8uPhRrYcbizY9+HG
MuWqxnS4kTCVQrFiziQuj7txeXn1fiZigMQVOfgMNEbq6QhAhr/iDHgGFLGKkAwXz/BdWZ4BZ4yo
a1iW7cHAkbKuEZiOE7jeDKAB4TdX17VbKxb2tK131mya3SSjfhZV4d43FaEgl/u3UoaDApNY7LlX
lYIMlytGdEhmWD7Uo1neQ7N8Ypp5puk8G81a9ldyLe+oq8m1LeFxXLNs5CG7xTXbNA3PsxquQRHa
jgbXgom4pjFOA4NcxbVcxbVcxbVcxbVcxbVcxbVcxbV8DNeCZ+KafWhck/E/i6rA3wnhEOwQLvD0
CEd6CEcmJ5xtHgDhWp5Qso50FNdk3ZbwFut8Mwh8+wfWIdNEQr9WDhdYhoeCNuscBDVYJ9Y/Dex0
BmoQQVS0IyraERXtiIp2REU7oqIdUdGOjKFdy0r7xd2Q8AHgTm4GWbLNfaR2yLb1wEd7wEcnBx+0
Dwp8LZ8oEUg7S9BE4JYwEO7M6VexNvlFY87DDNdfT6KHvrbyocB99TmNU/HE+tpE7PRV8zJk5ch0
E/q2h7x2ugl9ydwGwabhezqv0RBOhWCNgRpuURWCqQrBVIVgqkIwVSGYqhBMVQimoxAMnwnB7ktA
sNyWsiT24x6yUOQEejAuemBcTA1jGBxWFtrrHSWWi85iNLG8JTwuM7Vc34d+G4uCg4EF25mpWLsO
Fq2psKgxUMOSQoXFQoXFQoXFQoXFQoXFQoXFQoXFYhQWrWfCoveysCg3iCjJnbGHbNW2LD1ALnsA
uZwakMLCBw/Ilp+UqFx2lqWJyi3hkRmkDQPYfol3kHiJh047g3Shr4NKNBUqNQZq+LJUoXKpQuVS
hcqlCpVLFSqXKlQuVahcjkLl0J3IrlE5dAd08KiUW0WUnG2A7Sar1IYm64Emm/wu2jv8rLLXY0p8
ss4CNfG5JTwu04Se3FadF3BkWKbdxqfn6tz3QHsqfGoM1DCHqfDJVPhkKnwyFT6ZCp9MhU+mwicb
hc+hq5dd43PoqukF4VNuGinr/XT22RFrcBqWoNq6T7KS97CST8xKYWL0IlnZco+SmryzVE1qbgl3
qWmJ5NKsL7/b1ES271luh5qBZSDY3JJbvmFq5ZzOVNDUGKghDVdBk6ugyVXQ5CpochU0uQqaXAVN
Pgqao8i3A2g+dWMFQCUBnRkI4xiUdynv46hsq6pl5zWXNmvb0RaUW6XiAQI3JS3DDMDNzJ//BwdA
s7xehSNKeBpjtrb67m0sdjYVj2WvNiLKwhWJ7iRuRIwwHMbg5rL6rSyowgB8rCt/Mft8o3GyDQz6
ONA6CKsGca5VNz9PSDaRsRaf79GaYMqf8+4o8gYtJ60l3LT/6FNqJE7Ymgeu6Vr1mfiUWFQdSle1
8OGspqXWOrnaq3LyOFPumsFD3x1x5g+O3P7lbJRsjusR3XO97kSvO9XrXuh1X+p1Z3rd+Zju+/Bo
2crrxnV/zPRGdW9yv1Hdm2xwZPdUp3uTMY5baqyleyurHOxfnX9rjPz2O+D3afEpTMt55TXAxavD
BZF/CcPnIpUUtAyscUj6T4dWKZAjyTzmXOYPJJIiMn5Hqib+K6SVfjbaF4pol6+x44K9FuH1PDGO
PuBko2B7Y430t76EOCf0EHG/7q62cUxFdZhllWOe9EhvTiaH+PEzRSQHFW9E4tjehOvWH44NhHL1
ZaEdyT98SZBdHwXlbMLvIWmlmVuvMutPJT/7NvAY3v8CUEsDBBQAAAAIAJKLcjj8B42jOAoAADFd
AAAiABUAb3AuMTgubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADxPvfR8T730dVeAQA
6ANkAN2cbW/bOBKAv+dXEDkccAfcKiIpUpIXBnptUSC4BrvYLLAfiiLQSnQsrC3lJPn11x8pOxXl
SGOykR33ChSVRQ415Mw8okhObz99RF/mUZp9HaFSVLfZJL+vChHNUSJmokrz7Nd8lsabcV48OtFT
FE+FM1vEIhNOmiVi7fxHiKdfstnmc1RWH/L5PK0+tgTfeZRE7oTHV7d/ILf7WSOUpEXHE8oqL4Tz
6f5jWohYXm/e3VTzp5s/vfJmUqQ3yWIyucmfaj1QtKjy3fPHVbEQaC6KR3FE98/54/tNJe7Trbhr
qr/zBYvCRPBdG/dSLFnMRJeCu2Y+5Fm8KAqRVXctgXd8Qr3ITwJURPP3UllR1I96P8bccdE8Wu9u
io95XI5/wvodNYbid1HMnws+pWKWfBbZYzUdY1f+QfXDxw/RKPZCjn30MJNXDHOKHlajmLmBy9ED
9uVlQD15E6f1paqJq1HMXU7oFUK//ftuhLJ8hSazRTlF79CiFMleR8xRNJvlcfOzKtLHR1HUN9oW
RbsGlGkf53Isxg94gZI8vldGvO+498tkIr1g7O7k6jGoLbf7WQ9A685ebH8vW8xrEd9lRP2QAydl
diPmHmq2c5E/xUTK7/v5ynG72rXylJdVmj2WKCqf+41UH3Xtrq7iWV6KZ/1HiKBJOhMlqvK9LvKi
VxihfJZIGynPkWPuh5RL22di9UmJiqS+zwgJgoCooS1vlG3+5WHPwT5XFW9kA2OKHUz5369utXhX
Rpe+Gv/1lKfy0dd7HcqHx2v0xX9WqUQ/o7TchRYao0k0K8XXk7RTE0egazkGziSbX/cXFv/tL3wq
1v2FVVpChWl/YVZACiXAMydJdd12yM93v46kD2RJzYtyhJpB6qiI0EwsxQz5DpZOSqlyF98JuLoe
IW4iyh1CPB+HTMlyJwjCwPODEcI9wh/u7ndmrQnYUbYPqdErw0i5+yiu/bzrGVmO5ipiay1K9CSy
RAbbz7VmhagWRXaEXxTr/MLMkl/LDn4th+YXd8Pz80sbeJBky5aeliQ7ED4gWeCG0gtfkAz7sidM
IxnziONzryGZK38yC5IFA5HMop0m/JcQyZYQyZYQyZYQyZYQyZYQyZYQyZYmJAvOTLJQurNHlSde
CsmU48sr5fGXyLRVB9NWQzONhvwtmaaZAKTbqqWxJd0OhA3pFoSex/V5Wug5njSpRrfAxxZ0Cwei
m0U7DRJWEN1WEN1WEN1WEN1WEN1WEN1WEN1WJnQL34hu9ALppkJAXinfPwnn2t+e1pxbd3BuPTDn
eIjxZXBOMwZIvHVLd0viHQibfZlij0qX1onnBk7oM514nNh8mWJ3IOTZNNSAYg0xbw0xbw0xbw0x
bw0xbw0xbw0xb23CPG2Uzgs976Khp+JBVlSBcAb8EWZHv00H/TZD088L3mDlzdgqIAc3rV5YcvBA
2IyDLqUhoxoHKXMd4jYcJKHCog0H8VActGiogccG4uAG4uAG4uAG4uAG4uAG4uAG4uDGiIN9i2Wn
5iD7QTioIkNeqZA4CRHlLEInIrecEG47kLgdGolquC4WiZqBQDhuW/2xhOOB8OFnMeGUBx2TRIJ9
fABH5hF9ksis5ohkKDZaNNQAZQuxcQuxcQuxcQuxcQuxcQuxcQuxcWvExr7lt1OzsU/4ctmoQkRe
qdg4x7zRkpLEfUlJ7d5Qn83+BU8cO00F8VKOj94zO14eChtOJjnzeGu716MOoaHOSzk6NsCkQwHT
oqFvlCEuAExV2AtMWdgPTFnYD8y6sA+YsrAfmEqhXmDWhceB2beid2pg9u00/wjAVNGiSv0TTTBf
iU7cgU489M4KDt90t/hVRgMhilt9tITogbDhmRmXMdZamZSTTqwm8A1Ew9C3gag3FEQtGmrIgyGI
YgiiGIIohiCKIYhiCKIYgig2gmjfCuGpIdq3yf1jQVTFjZRQAXOJOCUdOCWDHx7k7EfFqWY+EKyk
1VtLsB4IG85OQ+p5YQusniP/6mClVpNTNhRXLRpqYEQgrhKIqwTiKoG4SiCuEoirBOIqMeJq34rj
qbnat73+o3JVBZBqT0bOGY4CURLYEZZ2EJYOPmH1LuQo0ECGBFlLW/22ZO2BsNmBIsKJR1sHighV
53v1g9/UtdpW4kPB1qKhhlAUgi2FYEsh2FIIthSCLYVgSyHYUiPYGhHzBLA9tq+PZPNSAvMRipIE
VdO07OKvKqtvq8p7hD337WRRqKJF3ZNs+VLlVTRD+PnZX//fXh1NXzu1j/OsTBNR7I1wjiGXoZ7L
n16nPtLtokUWTxWApNMUIkrQl891uhSq/QL9vrv5N7fLVEZvxZ1YT6PfGtp7ZV0gX3tVVFTHJBtH
2YuPzzqeaJCcrjO6Yu9AqsGTVnsLdwR1ki/hHS9812O7LINjYnH92rrbCV9SfzTF9tOxM6unXnpg
KL0qKay3ZT23Kp48v9QNqi/tqq/sqq/tqm/sqm+tqhPXrjq2q07sqlOT6mfwF+Jpc0uz6t9mm0bV
m/mnUfVmRmpYPbWp3sxazbqaWOmuzWx769ev3D2m/vFPVP6VPv0RpdW4thoq5ffLbabyr9XiUogZ
d5kZ8gZ6SxJPsU2+BkxmBeUmi5WIcmVDLeU/T2rAvtfxp4Djq29sM7/fiZS75yQi/k1MnhXUY8zQ
9C0JeBSSXN6OZrN66I6O2fGUWFgU/lAyb6xz7qi6YrXYbb0UwzqWYtjgxy7omxxOa+IMXDthLUUt
104OhA1TE1Rd2kpN2JlOTzUNiOHayXSgVFPLdhooM2jlhEErJwxaOWHQygmDVk4YtHLCoJUTduJU
U6N8+xdJ84xxRi8haf5bRCnPV5N2epbDZNZU4x1U40MvMPO3OUzWZQOQb7ylsiXfDoRNU6/cMNAP
ODDuOQFuJZtybLoRNx0o2dSynQYKHOIbh/jGIb5xiG8c4huH+MYhvvETJ5t+F99CRgkNLiGVviO2
VAyoBY3znP2yJp3fQTp/8MMKvnshpNOsATLPbylvybwDYdOzB7Ku1zp7oM6etE7GUivmDZJuattQ
gwofop4PUc+HqOdD1PMh6vkQ9XyIev6p001fhb23z7EHA00FhCr23YsEYNABwGBoAHoXCEDNLiAK
g1Y3LFF4IGz6eUtJGOjTP+w7rsKq9nnrmWZVTYfKOLVtqOFHAKEwgFAYQCgMIBQGEAoDCIUBhMLg
1Bmnr0Lh22feG4acCg155X0/FFtiDRqjCtUBepR7YQf3woG557mXjD3NBiAAQ70/lvxry7bwR9Rp
lpcHo+QtTPQzqG6InWYWiAOHu6ZH+6dDJZTaNtTwIoTQF0LoCyH0hRD6Qgh9IYS+EEJfeOqE0pOg
ryX8E3ZcJcccn7g+di/if9K0DlcVV/JB7nDsjNV2jzRjNPu269eu1LcjWONO3xA80Ok0+36vHCht
W5Bp24IvSzlY6oOlAVgavizt3Hw8BqYUApO219gKZqOdxWk3Blrluvqdu4bPRw33L+U3jZX/AVBL
AwQUAAAACACTi3I4AL0muCcKAACfXAAAIgAVAG9wLjE5Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9z
dHJlYW1VVAkAA8X730fE+99HVXgEAOgDZADdnOtvpDgSwL/nr7CyWulOuiOYh4FetZSbGY0UbaJd
bVbaD6NRRIOh6ebRB/TO5P76s6F7eAQqdkI/knwJbbuMH1U/ioLi5vMn9CVxo/TrDBW0vEmD7L7M
qZsgn8a0jLL09yyOvMd5loeKu3G9JVXirUdTqkSpT78rv1K6+S2NH2/dovyYJUlUfuoIXhu65qoB
8S5u/kLq8LlmyI/ygTMUZZZT5fP9pyinHjt+vL4qk83Vwiiugjy68rdBcJVtqnEgd1tm9fnnZb6l
KKF5SJ8Z+20Wfngs6X30P3rXNL+2qOk6PiV1H/dMzN/GdGiAdTcfs9Tb5jlNy7uOwDUJdMO1fBvl
bvKBDZbm1ak+zDFRVJS43+tC+inzivm/cbuEryH9k+bJvuJzRGP/lqZhuZxjlf2h6uTzB3fmGQ7B
FnqI2ZGJiY4evs08U7VVgh6wxQ5t3WCFOKoOeUtczjyiEo2VasbMs1TDNNmhyUodnRcSVkgsjR1Z
vNpS2ZHNjozqyGEnUtULhP74z90Mpdk3FMTbYomu0bag/m5+OkZuHGde87PMozCkeVXQ1QZUd8DV
IkzYOs4fNBf5mXfPFeB+oOy3IGAaNFdruWr9ql2vf1aL1ynZie3K0m1SiViaQfgPtuhMpl5ttT+y
Wr0WNGDyu3mecM0v6hFssqKM0rBAbrFfM8TXpz2ziwsvzgq6n/sMaSiIYlqgMtvNgx2MCiOUxT7b
X66xbL9s1XFsA6X022cuSv2q3FTZjIjGt6W44vv6L1PFim5j3vCKdTDXVQWr5s8XNy3OcIVhNuKt
N1nETn25G0PxEF2iL1jfj6lAv6CoqG0azVHgxgX9epiOKtZRdMlWQQnS5HK8Mv/veOUm/z5eWUYF
VBmNV6Y5NCAfOGfgl5dddb69+33GtCD1K1IVM9RapYGWCMX0bxojS8FMx5mWMo2xFJvw4xmyRESJ
ommGhR2TyxLFdkxd0+0ZIiPCH+/u642t4DtQt7PI2QmtkFsLK+JmMjS+NEMJh0U1gwJtaOozW/2l
mlVOy22ePoNOTDrodAw5dC4G0LmYGJ2kosFbQmdr00CILjpzlIRoTxix/U6yv9nk+dV7XrgxrT0F
73Gornzc0D54LUcnbPBPwKtpDluwBryGaSkOW4I9eDVHcbAMd42puCvRUQOrBcTdBcTdBcTdBcTd
BcTdBcTdBcTdhRB3jRNxd0z4bXGXmxoXZTZ2BAJj1ZEjsDdAYG9q51V13pjzOrh9IIu9zmwlWdwT
FuQqcRhJ21wllmKZHX/WtmS4ak7FVYmOGhh5EFc9iKsexFUP4qoHcdWDuOpBXPWEuGqeiKv2O+Mq
NyAu4BzFx8WaKUdYf4Cw/tQ+rs39qbdO2NZGgqz1O/OWZG1PWIi1hmOxIXdYa9gK42/bhyXYloEt
mQq2Eh01hPIh2PoQbH0Itj4EWx+CrQ/B1odg6wvBduwm/tCwdd4tbLktsTJuRAfBbjcqi9lYpbBL
B7BLp3ZsDQO/J+y2thQEcHcFJAHcExaM3jqGZrcBbOpYIexmp+Xt6nLRW2sqAEt01FCLQgCmEIAp
BGAKAZhCAKYQgCkEYCoEYCGKHgDAWIWlEeueSTCbQ67vo3IZFUNM5nVVMW+8g9l+bocyQm4sXJRB
5kuZlW6M8P7UX9/v1aSZ9eA8vCwtIp/mu904wtozk8/Yz2BwOEz93G3qLTmImPLk1PXRl9vqmSuq
9AP9WRf+pA7tmdB1shYb6fRHRzvtrCrYhbB08/I5yUZjduLzYy4nOvlz4Rer5OiK8lVk23cCtQSH
xC7KNUCIiVnH/DL6nJhXXcbuauEzmk5rXDs/7bij45dA0KBGHQVbwE8Y7bn9sNQL9pd4geYLueae
XHNfrjkVaX6MRQxa7pdY8x8OmVDzxkUTat44bYLNI5nmjWMnNlVfauwt52+0fXU12pnuP/6JinW0
+cuNynm1a6hgLv5Nyt9vKubEUG3LwpoYBg5wBQlYKYekyLWzeEw9LsK1WnDA7N+Gr91LbWAF2AC/
NxUzgVqkqM/jU+8PGuwH2DY3QS2Ql2DElgMHkWtuyTW35Zo7u+bwhvsZK3bjuNKSZ9XjyQ3Tkyg9
LArfQYl3NuhM8qnIBcllozXhQLQmnDpag2391NGaH3QB4ythZ8yS8ZWesODDRF3DTGlaAW6HKBYx
Oy9pENH4CoeUM0F4RbKfxkJDKLoSQtGVEIquhFB0JYSiKyEUXQmh6EooEl0ZizK/BA0iwRUba5iY
M4TPKrq9Ny5uBKyUa/8RItOaqsuxbjnAuuXUrNPJyR8IDmwHSL1lZ/SS1OsJj7+yBr3mJhSJ1tlM
7E4kWlNM7RWkbEUoX4dKmY4awCwhVi4hVi4hVi4hVi4hVi4hVi4hVi6FItHPBISnh6WhsasuV+Dz
hiW3InbEzecI71FoWPJNtWgAm9Hk2FTPEJutjQEBGnXmIQnQnrDgexGEWLt44g6GBlbMVlIFg6Fp
ScEQTwVDiY4agkQQDCMIhhEEwwiCYQTBMIJgGEEwjIRgOObBHRqGY8kc5wdDbhv8SD0OFnXJFIrV
ABZXk7/ngM/mzvmZLQIBuerMSBKQPWHR+2psGGYHkIbisDuGjrcow0dtKj5KdNRAZQXxcQXxcQXx
cQXxcQXxcQXxcQXxcSXExzGn7WB8NBkQjBkaS7o4Zz5yI+HPy/CB7rtfScr1ACnX0+fpOm+DlK3N
Apm57sxNkpk9YdHEBgZNu5epq5FuZoPhyEBzikxd2Y4a0qwhaK4haK4haK4haK4haK4haK4haK4P
nan7KmiOZVS8DWhye6leS3COEraUxWc8gM94anzyRXxj+GxtGwjSuDNLSZD2hAVDldjSiNoGqaMr
2HTazqdtiKaIraZKvZXtqKFPDIE0hkAaQyCNIZDGEEhjCKQxBNL40Km3LwMpsZjKnNsnD15ukdxy
+Ath2nl6pMkAUpPJ7931k3/+YJINBOGadOYrCdeesOidvW5reufO3lZMw+rc2cuFPqfIv5XtqCFS
AsE1geCaQHBNILgmEFwTCK4JBNfk0Pm3r4LreX3XYArb5DbEa/WjfONAGrPpAGbT6Z8cvQvMtrYS
BG7ambkkcHvCgsC1DZs4nbAAUXArB1dXFc2SCgtMkYMr21FDqRQCbgoBN4WAm0LATSHgphBwUwi4
6aFzcF8F3PP64MG0VsqtqZJ4MXo7Yg2A3RJVNv0sXbMBumYT09U0nJMn2h5s30DOZp01kORsT7jL
Wd0gFjHsPmd1GxO7+4KTaiuGbTeOra3ohugHu1ZTpdrKdtTAKYM4m0GczSDOZhBnM4izGcTZDOJs
duhU21dx9ry+dXAoe+V2xc7NDWoq4no8TYBtoRv/yJHpNhrLn6kg2U6f6UHx4Fkyx1rcVrZN2Mq2
eVq7BGsjsHYF1q7B2hisTcDaFKzNntYO5hI9B9A1BNBW6lAHOkKJQqthXHXq28MfzIzZ1e3djjfH
gv8DUEsDBBQAAAAIAJOLcjinmfyjEwwAANRyAAAiABUAb3AuMjAubHVjaW4uaW5kZXh3cml0ZXIu
aW5mb3N0cmVhbVVUCQADxfvfR8X730dVeAQA6ANkAOWcW2+cSBaA3/0rSlmttCvtYurCrUctZTNR
pGhjzWg80jxEkcUAbTOhweHSt1+/VdBtoBsOVQm0216/uBrOKep2PqpOUefjh/fo89IN4y8zlAX5
x3iR3OZp4C6RH0RBHibxr0kUett5kt5r7qPrPQRaVHhBHGhh7Acb7b9B8PhLHG0/uVn+c7Jchvn7
luJbRomrL0zv6uMfSO9+1gz5YdrxhCxP0kD7cPs+TAOPp7dvr/Pl4/WfLLtepOG1XywW18ljWQ7k
FnlSPX+ep0WAlkF6HwyU/VNy/26bB7fhLripxd9ageE6fmBWedxyNb+Igq4CVtn8nMRekaZBnN+0
FN6aC8pcy7dR6i7f8cIGafmod3NsajpaupvqYvA+8bL5v3HzimjD4PcgXR5ufAiDyP8UxPf5wxzr
/A+VD5/fuTOPOSa20F3EUwY2KbpbzzxDt3UT3WGLJ23K+EUclkkhifOZZ+om4VcJm3mWzgyDJxf8
qoFtxpP3/Cq2xf0HnqIm4alQpHSR+ounGBZ3v/IUYQ5P8adbVY5LcZeKXOJSQ6QS/mzm4CuEfvvP
zQzFyRotoiJ7QG9RkQX+vk2widwoSrzyJ8rT8P4+SMsf7dGDKmUxjO6XvN3nd+QR+Yl3KwbMbce1
XxYLPuLmeqVXtnc5SqqfZWO3ruzV9tfiYlmq8LpQ8YN3Etepekc/Llk1HP8MFlx/X8cX1kdXVakf
kywP4/sMudmhnZFo02ZrXF15UZIFh/aaIYIWYRRkKE/2deeJXmWEksjn40FYBe9jy6EmH9dxsP4g
VAO/vG7oBjOJKboyuxZj4V8GZprj2ELwmmcwp7qmO87frz42WCYGGLdD7+tjEvJHv9mXIbv7+gZ9
xvahTBn6CYVZxQ00Rws3yoIv02RU8jRAb3graIt4+ab/Zvqt/+Zjuum/mYcZdDPsvxmnUIF84JkL
P3/TNoFPN7/O+CiI/ZKG2Qw1WqlDEqEoWAURsjTM7YJSMWIszTZFeoakVE2NEGZhxxC6pmbbpmUR
kz9Yh7URz55rYHuGXN9H+UOYVcxvS4t75WUh/BjEPreKQ90ms0JhLeU1ij7nSe5GCB+e/aVdvJ9v
bqth2lH08t6eSbMXxqG6BTrr5CVxFvpBuu+ac3QEB0DCf37rLA8fjG4Rew8CS3wo8XmNjz5/KucJ
qBwt6Pfq4t/0rg5EvAvRUrwzyvpkh87+qezaNMiLNN6r9WT6lNF+rJY3+Csyd9N8SLMePnv1+Vnb
E73IyczJAO1tXtGkvC+fY5CCZeIv7IotFjZNVr5ih9S88hV3UylfUn0aBdtP6M5cPPGCBA2sdxrh
SMwienNuvoy9xWEC8KwF+daY4MiJP015pMTrSZCUeD0tkhQPVcTrqZNcVX2lsjemV73yJeH34/8f
/0TZ1/DxD5evg8teQxmfRH+MxTo3m5t8amQaxJGzpWmh/E2YJqeOzKsp28aeUBEDXLLs/N+jaMbv
NYcIMAexKJSzhkolq57jB95vweJQwKblSQ4IdQ1OQBko1OIPauKhmvhfauJf1cQjNfGlmnisJp7s
xeHB6if8shtF5QgfHNonKyvneH0Dq8JLLfnMOueZoioD7h2KG+4dDRNDzcWTdrh40rFdPMy8JBfP
EyRBn0zaKr6iT+ZI+cgnY+uOw0ty4pPRyWHCuPfJmEwjFn7yyRBHs0xJl4xAbWOp/v0uGdWMamtN
IZdMCrlkUsglk0IumRRyyaSQSyaFXDKplEtmwDOixAkplwxh1ODP7dF9dh/GwdCEQYh5v9ntdJBY
oyt4uDVs22oIzDoQmI2OQBtfIAIbPQPCMGtVRBGGR8pyDmrMy2+TJgypGP5G00HNdCUa4rFoqJBR
jZAMomEG0TCDaJhBNMwgGmYQDTOIhpkUDfuwNBkNbWwaYiy+GBoK2xApbhRn4CLBjhoX8w4u5mNz
EdvmRXOx0UcgIfNWlRQJeaQsSUisW/xVVxOSWUyjrE1ISlUIScYipEJGNVZyiJA5RMgcImQOETKH
CJlDhMwhQuZShOxD1cSEpC+RkMJKSr+zOQ0r28toZVYWHawsRp9D8lK9DFY2egukZtGqnCI1j5Ql
F9kONcwmNQ1iacQxm9SkOlahJh2LmgoZ1agpIGoWEDULiJoFRM0ComYBUbOAqFlIUbMPXxNTk71s
agp7KXfmnIvk56qDn6ux+Wnpl70GH+g3kKSrVjUVSXqkLElSy2BW6xMyBzcpih2luScbi6IKGdXo
WUEUXUEUXUEUXUEUXUEUXUEUXUEUXUlRtA9nk1HUsRzMMWq8FowKs+EpYS/nWLzzQigBdd0B1PXY
QDUv6tPdH+hBEK3rVoUV0XqkLLm0txnFrUkqtTTLspp4tS2lSaoxFl4VMqqZtIbwuobwuobwuobw
uobwuobwuobwupbCax/mpsKrY2A+lmbIfH14FUYkvh/r+WR1ZNBSS3EDfdMB2s3YoNUZeRWgbfQl
iNxNq+qKyD1SlkMuoRYlzc13pjvcrFiNXKzxSqkg1xwLuQoZ1ZzaQMjdQMjdQMjdQMjdQMjdQMjd
QMjdSCG3D31TI9d6zcgV5lRmTi4SvtsO+G5Hd7sy+5XBt9GrIIa3rUZQxPCR8rFTwXAwNU+dCoTX
EzdnvgbVLNL6BsrGhgqGrbEwrJBRza4thOEthOEthOEthOEthOEthOEthOGtFIb7cDg1hvsOtb0y
DAvDEnLcos4BZEfR7bDrAPJubCAbpvVqgdzoXxDNu1ZzKKL5SBnxobFMVrydxHn4eebyjtg+Bl3X
qzP53lb6mDEnfesrLkvXzPYpY1vJjzHGKWPVjGoE7iCa7yCa7yCa7yCa7yCa7yCa7yCa76Y+ZfxD
NO9TfrU0F1bJU8IcL5DrVD/leuPaWJEgbOP/gOuNnoYIz5u32TBqhD9WlqQ1trBuNGnNqMZMqzX5
tpQm3zKHH8fO6Ilx/O3Sj2txsxfX/GY/rvnNflyXN/twzW/241oUqBfX5c1hXEsxdwJcDweFcMqg
EM6PBIWYyAqFtfCUgM+lB4WYHkl1Y8jFh5i+T6qz4LR7l1U+PgSeIj4ErjNSjA+Bv3THhzhje04c
H+IZxmpvS9ehIs4+XsEy1aEiGHGMwVARQu0oVMTl1KczVMQ5i9d7hhgPTi5kjjf2Zt08JThwmrkt
nqmJ52rihZr4Sk18rSa+URPfqonvlMT5VEpC/BwDhuKhmB4n4nBMj2PxgZgex+IDMT1OxcGYHsfi
AzE9TqoKx/Q4FYdjegh5+ZgeFsaYOWTwxXLOmB6CcgKE/E0hM7OownvwlhkI79GohkR4D9A0lpBp
DMX3qDtUKr5HJDs4WhpwM8gHjsCdq6+TRRCsC6/H1HNDXEgssvSeRVavPrjsOtug7l19qU29/QS5
cZI/1IuU89VgPxkBQ5f1zPyfoZBnWwBIc+tpnn55Xdaarps6E26xcr4+qduVdLhdyfhu18s8FlEP
G9BPSlo1UfSTHilL+klNymy9dYbM1gydtE4/GLLbWsuxYhOoZlRPnwjkJyWQn5RAflIC+UkJ5Ccl
kJ+UQH5SMnVsgmFXJ/wWljoswSzdeBmRXWqS8rYv1+QTnYdoHzBTJinrICkbmaTio6bLJmmjk0Cm
sladFJl6pCx5mkx8+NXce2LijANzmntPjk5UmDpGNAPVjGoQMYipDGIqg5jKIKYyiKkMYiqDmMqm
jmZwTqa+gPgwHeYqzIqLCnv6oW2MxnivLNfly35h3IMANToAaowMUIbNyzznAPcIiFKjVTtFlB4p
t1GKiW0b1sk3tBRjzNuidZSBaNRubONbmmFaKigdI8SBakY1fwwIpQaEUgNCqQGh1IBQakAoNSCU
GlOHODgnSl9AIBnQcIWB8acKy5pmb7i9WXd5To2uPbvnKOX3u5tlDvs/Q861wVO1LR6qtsVD1bZ4
qNoWD1Xb4qFqWzxUbYuHjrzFY1KbUMwsS85IDr5Szlhv7/6TIYrMFg2V2aJpyBNFeaYob5xxyygG
LG3kHSPpoamucecq7UAPxlRvSatttWNLTXww2HxbXPEjBKYmvlAT/6a2748Ho8erbwL2R20/WW95
IlM+zXOjJz61hfrYVS6Rmug6WRIJ0SdF8TRubG7cmLQcfWa5X/PNkDzO/gdQSwMEFAAAAAgAk4ty
OAuPyIP3CQAAplUAACIAFQBvcC4yMS5sdWNpbi5pbmRleHdyaXRlci5pbmZvc3RyZWFtVVQJAAPF
+99HxfvfR1V4BADoA2QAzZxtb6Q4EoC/51dYOZ10J90RXgy2e9VSbmY0UrSJdrVZaT+MRiMaDE2/
QB/Qu5P79WdDJ0AHqu0JdHq+DG277HLZ9bgwdu4+f0Jftn6Sfp2hgpd3aZQ9ljn3tyjkG14mWfpr
tkmCp3mWx4a/84MlNzb7gKfcSNKQfzd+5nz3S7p5uveL8mO23Sblp47gLeGuz0LuXd39gcz+tmYo
TPKeFooyy7nx+fFTkvNAPD/d3pTb3c0CFzdRntyE+yi6yXaVHsjfl1nd/rzM9xxteR7zE7rfZ/GH
p5I/Jv/jD03xWy9ysE9CWtfxKMTC/Yb3KVhX8zFLg32e87R86AjceiwilEcWyv3tB6Esz6umPswt
zzDR1v9eJ/JPWVDM/221U6QN+e883z5nfE74JrznaVwu55Yp/qGq8fk3x5kFnomxR9A3x54FxKGW
eMIilbpMPLmzAFuefYXQb/95mKE0+wtFm32xRLdoX/DwoI5jIX+zyYLmZ5kncczzKqE7eKiuQI5i
vBXdFkp4KMyCRzlejz1pv0SRGPC5WctV3a0Gqf5Z9bWTchA7pKX7bSVCTOrKH8JGQqY2jnmsWT0b
FjwS8od+qpvoqhbYZUWZpHGB/OK5i0h2p63I1VWwyQr+rOoM2ShKNrxAZXZoVjwMCiOUbUIxHHI+
CPNSkzGKUcr/+ixFeVilu6ZHLBNLKxY3chj+hT3PsFxXFrwRFcwd07Cw8/eru5YXy/EVMzBY77JE
NH190KH4ll6jL+6zSgX6CSVF7TBojiJ/U/Cvk9RTcYSja2EDI0q318OZ+X+HM3f59+HMMimgzGQ4
M80hhUKgzSgsr7tz7/7h15mYA2lYUaCYocZIPQUR2vA/+QZRw3QxI1ROF2pQUz7PkKUi6hm2jYnF
XCnrGZRiYrruDOEB4Y8Pj/WwVlzryTt4z0zdY+TMFrlySvdVl2ZoK/2warBAO56Gwq9+qpTIebnP
0xNUsrwOlaSZdKhEeqhERqaScF48KZVaNgb5RDoqafLpSBiJ4dlmfwpd5bIzL/wNr5e44Kkvr3za
8WOmEeZ4YpV6xTSb2sxqM80S057gF6bZzGDY1mCaNxLTNOppQEAgphGIaQRiGoGYRiCmEYhpBGIa
UWGa905MG2LppEyTfiFzhUNMQjdM2nSziK1HN9pDNzp6zCUiwfPQrWVtkHO0o5wm546Ej+Mw23M8
+opZFiaYkDazHNuwhe6tOMxlOswiIzFLo57G0SnELAoxi0LMohCzKMQsCjGLQsyiKswi52aWa7ts
GJVnQpac7DJNzPJLhBfrgRcbOzRjFjk7vFp2BzHGOmpqYuxIWA1jpoy8OqGX7RnMoW2M2SbVwBgd
CWMa9TS+zyCMMQhjDMIYgzDGIIwxCGMMwhhTwRh9H4wN0fPsGJPTXqTJ+X4GoNkO1gOa3wM0f+xo
zKLnetc8MQIg2vyOwppoOxJWQ5stinqsjTbsGCK1QZtlmBbWQBsbCW0a9TQ88CG0+RDafAhtPoQ2
H0KbD6HNh9Dmq6CNnRltTO6sOsNIfUe2SQ8QaXLqn2FHTZtyix7KLUYP2wi7CMq1xgLk3aKjuibv
joQVd9E8SrF5xDtid78MUJ0vA5Y5EvB0KmowsYCIt4CIt4CIt4CIt4CIt4CIt4CIt1AhXstK50Xe
EGovAnnSHWSa8INJ4Nf9yKkNv6AHfsHYIZ5LnQuDX2tUQAwGnU5oYvBIWO0DqeXYUucGg8JbDMft
vNG6WhS0xqKgRkUNOgKIggFEwQCiYABRMIAoGEAUDCAKBkoUVELZmBS0XVM4ykn8IlG9kLCsGfLD
EJXLpOgDo8yrkmXhA46e+zaZE0pnEWmSE1/KrPQ3QtdD218vmumN4r2qBFlaJCHPDxY9h/2E32bi
Z9irj5hD/j4NlhImYgbk3A/Rl/vq4A+qBhn9Xif+zeyzu9JyVYsNVPpS0WGKVRliPSr9vDwl2Yz6
QXx+Vnsi3dNJo86rQatIS4gheI+5BeokVsfak0W8L5qV69kpsaBaUB5q4UvqT0uxQ9BzZvXkcgT6
xeCibSus2YM1tw8HBdHzcqtQnOgVp3rFmV5xX6/4Qq94oFL8HEMUtgItteIvoZdS8SYYUyrehGeK
xROd4k0Ip9bVUEv3Vpg3WL5asg5k+Mc/UbFOdn/4STmvRg0VIpa/S+VJ3GLuEWxbmDI1yvSuMqF4
lhhVWSKLpzSQInJeKjYp/tvJ3v/oLM6AWSzfBNUmcS1S1O2EPPiNR88Kth1GcRz1JQTS9Vwf6xV3
D8XhIQkzkSze6KtxPDmAr14/7OOXAFhU831ErTIiTzWK6erI2ohB7eqHTnW9QaK0zLQ7wbxnM4SP
vRmCKX37ZsgLEMDdi26rmrsXR8LDRyShY5UqG7+26bhu+yiSa1KjOubQ7HiIripueUgWOSPseGjW
07g5hzY8OLThwaENDw5teHBow4NDGx4c2vDgKhsezsT7Hco0UdoswVQoMiz8o9sLz/4o/UZE79Jh
LvFTV9QDuGhswBHsjQe4lkFB1EWd9jVRdySshi3LY6bV/l7lEstwcJtaRPXgkYQNHglaGvU0nh5B
0IogaEUQtCIIWhEErQiCVgRBK1KB1tB9ksuEliccoSe0G51Z0hXEk/SBS/xWFffQKx6bXo5pT0Gv
lmlBjsUdTTQ5diSs9sHJNomL3fZ3d2Iajsk64RdhGiQb40aeZj2N+8cQyWKIZDFEshgiWQyRLIZI
FkMkiy/hRt4UJBsKGacgmXQLuVMr/OESI7JlD9OWozONTcy0lpFBui07OmnS7Uh4uhdSy6J29xO8
hQ1sdk4iYUI0iDjGfT7NehqMLCEiLiEiLiEiLiEiLiEiLiEiLiEiLi/hPt8URBz7frOas0qnkk/s
MtmY9LAxGZ2N1gh/gEHb3CAlk452mpQ8ElZ9l8UOdtoxIHUNG3diQOKq3gbMRroNqFlPg4kEIl4C
ES+BiJdAxEsg4iUQ8RKIeMkl3Aacgnhj337WdUHpKvLJmujPPLzxXXfVw77V2Ozz3BGu3rzB8CAF
Vx09NSl4JKx49BIzj7TfhF2XGq7ptSnoOTofIsa4TKhZT4OOFUTBFUTBFUTBFUTBFUTBFUTBFUTB
1SVcJpyCgmNfqP5xZ5ROI56kt7zp4F9rOtd+6Zeoct2TyFv3IG89MvJc1zbfE3ktK4PwW3c01oTf
kfDbX5SxKeau+QqY2HJd7NEWMEVfxdQm7T9846meVc9GuqGoWU8DmTXEyzXEyzXEyzXEyzXEyzXE
yzXEy/Ul3FCcgpdj39wew5Olx82CytXGImcgDwCJsfI3LyfMuoWGTp9VsGsfPjvSSeGM2RSmaJ1L
461zaa9zIzA3BnOXYG4C5q7A3PXr3N6Tc6fQtAPQ1Don13FnpVNxWT8IOvlt7XsPmR3yntfriV3l
/1BLAwQUAAAACACTi3I4Pg6/nLILAACyagAAIgAVAG9wLjIyLmx1Y2luLmluZGV4d3JpdGVyLmlu
Zm9zdHJlYW1VVAkAA8X730fF+99HVXgEAOgDZADtnetvnEgSwL/7r2jldNKddIeB5jmrkXLZKFJ0
sXa1Xmk/RFHEQo/NZniYx7z++usGbB4DRbcNYyxdvpiBqqbp7vp1Vc0U+fzpI/oaOH74bYVSkn0O
N9FtlhAnQB7ZksyPwl+jre8e11FyJzmx494TaZu7JCSSH3rkIP2XkPiXcHv84qTZz1EQ+NnHluJ7
DauOvDHcq89/ILn/Xivk+UnPHdIsSoj06fajnxCXHh/fX2dBfP2nll5vEv/ayzeb6ygu+oGcPIvK
+6+zJCcoIMkdGen7l+juwzEjt/6J3NTi702iO7ZHjLKNW6rm5VvS18GymZ+j0M2ThITZTUvhvbHB
mmN6Fkqc4APtLEmKW31YK4Yko8A5lCfJx8hN1/9WmmfYGJLfSRI8Xvjkk633hYR32f1akek/VNx8
/R3jlWvImmaY6Dv26LFpWzo9JCvX1CyLHm3okakZ9OiOHmFZpUf37MhmRz47UpjGX/TI0DV69GPl
6roqXyH0239uViiM9mizzdN79B7lKfGqJ1AM5Gy3kVt/zBL/7o4kxYn2fKOyATbxdwEdKdrvLfIi
95ZN8W3PuV82G7pG1nKpV4xQMa/lx2J4WmcqtepcmAeFimFjnX2gw0p1yvGUuz0rF9CfZEP1q+ec
dVSvynvEUZr54V2KnPRxVBAbgWbfr67cbZSSx6dbIRVt/C1JURZVPaUHg8oIRVuPziBbdXRGTBsb
dN2EZP+JqRKvOK8rtiEbChv49JrN3L+wbUuabTHBa9rAGsuSrSl/v/rcYAVbEnSduz/iyKe3flf1
If0ev0NfFfmxTyn6CflpaZdojTbONiXf5mmo4BVB7+goSJsweDd8MXkYvhgnh+GLmZ9CF/3hi2EC
dcgD7rnxsnftBfvl5tcVXQWhV9AmXaHGKPVIIrQlO7JFliTrmm1abMVYkiWzY6rLo2pKsmlRA8BM
15QstfjAqWxIqqqZiq0zZUOybINa0gpZA7o/39yWi6KAb8+1yl5Xs9oosyXaIDOivh6EEQoYLIo+
pigmoUct+aei3wnJ8iQUQqdiqmLoDHrQGUyMThNjbWnobEwLCNGg9RSCEO0o80FUtg0dGw2I6rIl
2UoLolizRCCqTAVRgYZq8gQQRAMIogEE0QCCaABBNIAgGkAQDbggygWzhUHUfiMQZVbF5Kg5LRGn
YQ9Ow6lxapjKcnHamCAQrGHreQTB2lFGdG6DaEcflIU269ShI3mMSd/5Mrxyj7werYJVOkYNGJtY
ki2tCWNNDMbqVDAWaKgmWAjBOIRgHEIwDiEYhxCMQwjGIQTjkAvG6huE8Zgbjqh5UAVFXSHH81B2
76d9fGbXitNMuELh47jMZvXMOpkcZdTXLMqcLR2J6t7f3srWUj9Db6/cKEx9jyTV4F5iKKn5R/Rj
1NsfupqcPHTvGZToYkiI46GvX4q8EirmG/1envyb3DcFXLtmqTbQ6FND1WorLtBtMXOSbEyzXgCV
+vqi44kukPziWmKDA8QGhc7GaywzsE90ky7t21SxbhZb5JjaPd2fyMElMUvqIi9P2HNV1s8QP6iY
kA11g+7R15ge+Wy2ouIs3dxZE3Tdb4/IpfIZ8VAeUiHCdnn6gXkRbLOIqs0CvE29t3CJT9Org1iv
RsUn6dWTj8DXKyYu4leruphbHfe41fHkCV4FvwW3ukEO0MGOW08m6GB3lDkzF7KGZavhLFPPWNLZ
qFbOsmpLpm2LOMt4KmdZoKF6ZceQsxxDznIMOcsx5CzHkLMcQ85yDDnLMZezjN+iszyi/H9n+VI8
YtxgVykwluU2P7zQbVbmcJuVZ7vNymu7zQ8LcJvPFtvgUL2CA/3A0ydBB5qpucW2dVMqL+l5Gh2r
HK4Ld2/QV1XGXAONwzMYbLn5/aq7SSGnuS0eiImHPOKXeMyHsdjgTPzJSeISr90mLvHakeIU90XE
a2eL71Hh4Oxc/MkhG5Qv9oLKuv7xT5T+8OM/HD9bF7OGUup2fw7ZD4/StSljS8PWKA3Ltsbw/UAN
rKASN2XZ4kuPocuU2WIVkI955Kt+0z8xG8LnmsIDYAosHOSzhFIlLe/jEfc3snnsYNPqOBeDuAZl
qxg/NmLid2Li92Livpj4X2LiPypxeDl5ET3tbLfFGhxdfGeRktaNOWBVwdCJrzEaTNmmRvfLKpjS
ig8ssn9Wc93wylRoMC/SuV5nlo2zUGoIa5pYbijpyQ0lk3/lio1Jc0M9fAWTOUmrK4LJnI7ybN+W
arahK5baSAAZiioZ1LNrJIB0w+BMADFU6xPkfwTbqUmSQOmfBEr/JFD6J4HSPwmU/kmg9E8CpX8S
nvSPPn/2hw9YPNkfC2N24yHdCfIl5zbKbIlFHth4bj5AiIS6LUbCtIeE6dRZcpOGbPOSsDHKIBPT
VqcEmdhR5uSbrrF0diPBjU1JM1oJbl1WBfhmTMQ3gXZqKKQQ31KIbynEtxTiWwrxLYX4lkJ8S3n4
ZrxBvg1l5GfmG7OQQlKdh3RYeRHpsh7SZVP7fJoxt8/XO94g87JW9wSZ11HuMM+Sbbv8YVubebat
G61fwBk6DQ5a3+lpIsgzJ0KeQDs1JzIIeRmEvAxCXgYhL4OQl0HIyyDkZTzIM98g8s5i60sjj5kK
S10bM7l5L4Rf3gO/fGr4yczELw6/xsiDGMxbHRXEYEeZC4O6LGNs2E3Xz9IlVVdaHDQ0AQ5aE3FQ
oJ0aHjnEwRziYA5xMIc4mEMczCEO5hAHcx4ODtWILZmDQ+H4K3CQWQ09YuayRCLueoi4m9wd1Kat
unjBHIBs3LW6LMjGjjInGw3LotFyw0XEtoSVZo2Eooug0Z4IjQLt1DzZQWjcQWjcQWjcQWjcQWjc
QWjcQWjc8aBxqPJrmWg0VV0zh0P5V2Ujsx92TusvG3jt9OC+h5L76Sl5ufQg92yAvNy3Oi/Iy44y
7+9kLaw2fyer65akyK2vSSwVCwBzktckiDZUc2YPIXMPIXMPIXMPIXMPIXMPIXMPIXO/lNckTM/M
oVzAQpjJrKk4minl+EJ6HnroeZianqotL46ejXkBOXpoPYYgRzvKnF/H2FjVtJbfKUsW+36qEZNj
IY5O8aYE0YZq+Bwgjh4gjh4gjh4gjh4gjh4gjh4gjh6W8qaE6Tk64/tmprVXZlesQVteJFGPPUQ9
Tk1U07QXTNTGDIFsPbYeSJCtHWVOHxXjdi2XocqSzgazZqttinzvM8mLD0QbqoF0hNh6hNh6hNh6
hNh6hNh6hNh6hNh6XMqLDyZkK72vNutbaOYyXGZgrLqBWtYSIXvqgexp8spZ/W1AtjFXIG5PrUcT
xG1HmRO3umHbeqt0VpVso5VCVYQ82SkqZ0UbqhF1gmh7gmh7gmh7gmh7gmh7gmh7gmh7Wkrl7OS0
HX/NTFGnq+CXVM7OZMDM0FjLlDzzV87Oz6P6cfhKZ+cf1bK0TusPHfhLZ9U5SmfVb88tnVW/9ZfO
XnA8R0tnX2G1DY5VXTt78RUH9qlRO2vJ+mjtLFPr1M4u53l6a2cv2b3Bwip1zDl4dlGp2tpik7EK
r7Z4KiaeiYnnYuI7MfG9mPhBTPwoJn7iEb/AAtDksariM3G4qrgrPlJV3BUfqSo+FwerirviI1XF
Z48KVxWfi8NVxUyev6rYsC1LkU2dj2H8O5sms0OKbp7NuiwTps9Wlwk3IpcyBHPo87AobSwg1pTz
gLhxbpqAWFf1af+vgL6BgyLY8qdKT30Ri2C7yu0IFluKYipqN4LFtmkaZvPLGMx+IGk3EoaWwMuf
Xrv2T1OAAJZdHAxg6cXhAJZeHA5gi4tDASy9OBzAsg4NBrDFxcXW/nHFzZ34lS001Ry+8aQR35PB
McNYuYVFzBPR8L/hANyWkxe84aDeTLjecMC9B4trVG+FGN3K+Ov4B4PGokT9bFtxWaPUQmiM8bhR
toWGNtFiJ2juoR3yP3urHFqAjS1SOd8ie1fVGDZTAJuNNdRCDdeKSfoh1bre7H3v9D7mnaot/9lm
/D9QSwECFwMUAAAACACSi3I4JXtzIaMBAACMBgAAIgANAAAAAAABAAAApIEAAAAAb3AuMDAubHVj
aW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4AcE0
lswDAAC/DwAAIgANAAAAAAABAAAApIH4AQAAb3AuMDEubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0
cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4RSz7CIgDAABgDAAAIgANAAAAAAABAAAA
pIEZBgAAb3AuMDIubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwEC
FwMUAAAACACSi3I4vIF7QbsBAADKAwAAIgANAAAAAAABAAAApIH2CQAAb3AuMDMubHVjaW4uaW5k
ZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4vIF7QbsBAADK
AwAAIgANAAAAAAABAAAApIEGDAAAb3AuMDQubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVU
BQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4vIF7QbsBAADKAwAAIgANAAAAAAABAAAApIEWDgAA
b3AuMDUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAA
CACSi3I4vIF7QbsBAADKAwAAIgANAAAAAAABAAAApIEmEAAAb3AuMDYubHVjaW4uaW5kZXh3cml0
ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4vIF7QbsBAADKAwAAIgAN
AAAAAAABAAAApIE2EgAAb3AuMDcubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vf
R1V4AABQSwECFwMUAAAACACSi3I4eyESBhoIAAAEPAAAIgANAAAAAAABAAAApIFGFAAAb3AuMDgu
bHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4
ofSn9msHAACZMAAAIgANAAAAAAABAAAApIG1HAAAb3AuMDkubHVjaW4uaW5kZXh3cml0ZXIuaW5m
b3N0cmVhbVVUBQADw/vfR1V4AABQSwECFwMUAAAACACSi3I4WJyDLuMEAADwGwAAIgANAAAAAAAB
AAAApIF1JAAAb3AuMTAubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4AABQ
SwECFwMUAAAACACSi3I4vbAq6L4DAABUDgAAIgANAAAAAAABAAAApIGtKQAAb3AuMTEubHVjaW4u
aW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4AABQSwECFwMUAAAACACSi3I4d1RQyN4B
AABvBAAAIgANAAAAAAABAAAApIHALQAAb3AuMTIubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVh
bVVUBQADxPvfR1V4AABQSwECFwMUAAAACACSi3I4JoAnQiEFAACZGAAAIgANAAAAAAABAAAApIHz
LwAAb3AuMTMubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4AABQSwECFwMU
AAAACACSi3I4auy6nIYEAAD6FgAAIgANAAAAAAABAAAApIFpNQAAb3AuMTQubHVjaW4uaW5kZXh3
cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4AABQSwECFwMUAAAACACSi3I4aHCDoEEGAACCJwAA
IgANAAAAAAABAAAApIFEOgAAb3AuMTUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQAD
xPvfR1V4AABQSwECFwMUAAAACACSi3I4cfVLyCcJAADKSwAAIgANAAAAAAABAAAApIHaQAAAb3Au
MTYubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4AABQSwECFwMUAAAACACS
i3I4U7im12YHAABjNwAAIgANAAAAAAABAAAApIFWSgAAb3AuMTcubHVjaW4uaW5kZXh3cml0ZXIu
aW5mb3N0cmVhbVVUBQADxPvfR1V4AABQSwECFwMUAAAACACSi3I4/AeNozgKAAAxXQAAIgANAAAA
AAABAAAApIERUgAAb3AuMTgubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxPvfR1V4
AABQSwECFwMUAAAACACTi3I4AL0muCcKAACfXAAAIgANAAAAAAABAAAApIGeXAAAb3AuMTkubHVj
aW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxfvfR1V4AABQSwECFwMUAAAACACTi3I4p5n8
oxMMAADUcgAAIgANAAAAAAABAAAApIEaZwAAb3AuMjAubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0
cmVhbVVUBQADxfvfR1V4AABQSwECFwMUAAAACACTi3I4C4/Ig/cJAACmVQAAIgANAAAAAAABAAAA
pIGCcwAAb3AuMjEubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxfvfR1V4AABQSwEC
FwMUAAAACACTi3I4Pg6/nLILAACyagAAIgANAAAAAAABAAAApIHOfQAAb3AuMjIubHVjaW4uaW5k
ZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADxfvfR1V4AABQSwUGAAAAABcAFwBbCAAA1YkAAAAA

------=_Part_19789_19008566.1205861807356
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_19789_19008566.1205861807356--

From java-user-return-33220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 18:06:57 2008
Return-Path: <java-user-return-33220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22629 invoked from network); 18 Mar 2008 18:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 18:06:56 -0000
Received: (qmail 53826 invoked by uid 500); 18 Mar 2008 18:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53799 invoked by uid 500); 18 Mar 2008 18:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53778 invoked by uid 99); 18 Mar 2008 18:06:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 11:06:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 18:05:47 +0000
Received: by wx-out-0506.google.com with SMTP id i28so7345739wxd.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 11:06:05 -0700 (PDT)
Received: by 10.70.14.20 with SMTP id 20mr1565101wxn.25.1205863564914;
        Tue, 18 Mar 2008 11:06:04 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h36sm357590wxd.29.2008.03.18.11.05.55
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 11:06:01 -0700 (PDT)
In-Reply-To: <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com> <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com> <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com> <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com> <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: multipart/mixed; boundary=Apple-Mail-3--76920701
Message-Id: <F573D2EC-D24D-4E39-B229-51CF80B6A0FC@mikemccandless.com>
Cc: java-user@lucene.apache.org
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 14:05:45 -0400
To: Ian Lea <ian.lea@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3--76920701
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


Hi Ian,

Sheesh that's odd.  The SegmentMerger produced an .fdx file that is  
one document too short.

Can you run with this patch now, again applied to head of 2.3  
branch?  I just added another assert inside the loop that does the  
field merging.

I will scrutinize this code...

Mike


--Apple-Mail-3--76920701
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed



Ian Lea wrote:
> Mike
>
>
> Patch applied and test re-run and picked up an assertion error this  
> time:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.lang.AssertionError: after mergeFields: fdx size mismatch: 72357
> docs vs 578848 length in bytes of _3o.fdx
>         at  
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException( 
> ConcurrentMergeScheduler.java:320)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:297)
> Caused by: java.lang.AssertionError: after mergeFields: fdx size
> mismatch: 72357 docs vs 578848 length in bytes of _3o.fdx
>         at org.apache.lucene.index.SegmentMerger.mergeFields 
> (SegmentMerger.java:342)
>         at org.apache.lucene.index.SegmentMerger.merge 
> (SegmentMerger.java:133)
>         at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3852)
>         at org.apache.lucene.index.IndexWriter.merge 
> (IndexWriter.java:3504)
>         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge 
> (ConcurrentMergeScheduler.java:211)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:266)
>
> The infostream output is attached.  Since this email is to you and the
> list it should make it to you.
>
>
>
> Yonik: I haven't been able to make TestStressIndexing2 fail.
>
>
> --
> Ian.
>
>
> On Tue, Mar 18, 2008 at 4:19 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>>  Ian,
>>
>>  Could you apply the attached patch applied to the head of the 2.3
>>  branch?
>>
>>  It only adds more asserts, to try to pinpoint where exactly this
>>  corruption starts.
>>
>>  Then, re-run the test with asserts enabled and infoStream turned on
>>  and post back.  Thanks.
>>
>>  Mike
>>
>>
>>
>>
>>  Ian Lea wrote:
>>
>>> It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>>>
>>> $ uname -a shows
>>> Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005  
>>> x86_64
>>> x86_64 x86_64 GNU/Linux
>>>
>>> and
>>>
>>> Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003  
>>> i686
>>> unknown unknown GNU/Linux
>>>
>>> The first one has a 2.8Ghz Intel CPU, don't know about the second.
>>>
>>>
>>> I'll try and run the stress test.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>>
>>> On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>
>>> wrote:
>>>>
>>>> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>>>> Hi
>>>>>
>>>>>
>>>>>  When bulk loading into a new index I'm seeing this exception
>>>>>
>>>>>  Exception in thread "Thread-1"
>>>>>  org.apache.lucene.index.MergePolicy$MergeException:
>>>>>  org.apache.lucene.index.CorruptIndexException: doc counts differ
>>>>> for
>>>>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>>>>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc
>>>>> counts
>>>>>  differ for segment _4l: fieldsReader shows 67861 but segmentInfo
>>>>> shows
>>>>>  67862
>>>>>         at org.apache.lucene.index.SegmentReader.initialize
>>>>> (SegmentReader.java:313)
>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>> (SegmentReader.java:262)
>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>> (SegmentReader.java:221)
>>>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>>>>> (IndexWriter.java:3093)
>>>>>         at org.apache.lucene.index.IndexWriter.merge
>>>>> (IndexWriter.java:2834)
>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>>>>
>>>>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>>>>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>>>>>
>>>>>  With java version 1.6.0_03-b05 things work fine.
>>>>>
>>>>>  The exception happens a few hundred thousand documents into the
>>>>> load.
>>>>>
>>>>>  A different program updating a different index with different
>>>>> data on
>>>>>  a different server gave a similar error on version 1.6.0_05- 
>>>>> b13 and
>>>>>  lucene 2.3.0.
>>>>>
>>>>>  Any ideas?  Is this maybe a known issue or am I missing
>>>>> something obvious?
>>>>
>>>>  My guess is perhaps a thread safety bug, more likely in Lucene
>>>>  indexing code (less likely in the JVM or specific libc).
>>>>
>>>>  What Linux version are you using?
>>>>  What hardware are you running on (specifically, the CPU)?
>>>>
>>>>  If possible, it would be great if you could check out Lucene  
>>>> trunk,
>>>>  crank up the iterations by modifying the TestStressIndexing2 and
>>>> maybe
>>>>  fiddle with some of the other parameters in
>>>>  TestStressIndexing2.testMultiConfig(), and see if you can get  
>>>> it to
>>>>  fail.
>>>>
>>>>
>>>>  -Yonik
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>>
>>>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> <infostream.zip>



--Apple-Mail-3--76920701
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Apple-Mail-3--76920701--

From java-user-return-33221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 19:09:53 2008
Return-Path: <java-user-return-33221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68684 invoked from network); 18 Mar 2008 19:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 19:09:52 -0000
Received: (qmail 163 invoked by uid 500); 18 Mar 2008 19:09:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99625 invoked by uid 500); 18 Mar 2008 19:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99614 invoked by uid 99); 18 Mar 2008 19:09:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 12:09:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luceneseme1@googlemail.com designates 72.14.246.240 as permitted sender)
Received: from [72.14.246.240] (HELO ag-out-0708.google.com) (72.14.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 19:09:02 +0000
Received: by ag-out-0708.google.com with SMTP id 35so46225aga.11
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 12:09:13 -0700 (PDT)
Received: by 10.151.146.18 with SMTP id y18mr1226803ybn.3.1205867351294;
        Tue, 18 Mar 2008 12:09:11 -0700 (PDT)
Received: by 10.150.204.7 with HTTP; Tue, 18 Mar 2008 12:09:11 -0700 (PDT)
Message-ID: <22f49afe0803181209w3959352fw4eaba61ce0b500fa@mail.gmail.com>
Date: Tue, 18 Mar 2008 19:09:11 +0000
From: "lucene-seme1 s" <luceneseme1@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing/Querying Annotations and Fields for a document
In-Reply-To: <917461.23478.qm@web26005.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14440_25365570.1205867351274"
References: <917461.23478.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14440_25365570.1205867351274
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can you please share the custom Analyzer you have ? In particular, I am
interested in knowing how to get access to the position, offset values for
each token.

Regards,
JK

On Tue, Mar 18, 2008 at 10:48 AM, mark harwood <markharw00d@yahoo.co.uk>
wrote:

> I've used a custom analyzer before now to "blend in" GATE annotations as
> tokens at the same position as the words they relate to.
>
> E.g.
>    Fred Smith works for Microsoft
>
> would be tokenized ordinarily as the following tokens:
>
>    position    offset    text
>    ======    ===    ===
>    1            0        fred
>    2            6        smith
>    3            13      works
>    ....
> But in a custom analyzer you would know the offsets of all these normal
> tokens plus have visibility of the GATE annotations, including offsets. Your
> custom analyzer can blend these to produce as follows:
>
>    position    offset    text
>    ======    ===    ===
>    1            0        fred
>    1            0        GATE_PERSON
>    2            6        smith
>    3            13      works
>
> The trick to adding "GATE_PERSON" at the same position as "fred" is to set
> the "position increment" of this token to zero.
>
> Now you can construct a Lucene query that uses this position info in
> queries.
> i.e. instead of searching for the specific:
>
>    "Fred works for Microsoft"~5
>
> you can now search for the more general:
>
>    "GATE_PERSON works for microsoft"~5
>
> The GATE tokens e.g. "GATE_PERSON" would have to be terms you wouldn't
> expect to find in normal text so they wouldn't clash.
> Another way of doing this which avoids this problem might be to look at
> the new payloads API.
> Anyone care to wade in with if this is feasible and the state of play with
> payloads?
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 18 March, 2008 12:24:02 AM
> Subject: Re: Indexing/Querying Annotations and Fields for a document
>
> You would parse the XML (or whatever) into separate strings, and put
> each piece into it's own Field in a Lucene Document
>
> For instance:
>
> Document doc = new Document();
> String body = getBody(input);
> String people = getPeople(input)
> Field body = new Field("body", body);
> Field people = new Field("people", people);
>
> writer.addDocument(doc)
>
>
> Essentially, you just need to implement the getPeople and getBody
> methods to extract the appropriate content from your text.
>
>
> On Mar 17, 2008, at 5:05 PM, lucene-seme1 s wrote:
>
> > I already have the document preprocessed and the annotations (i.e.
> > <Person>John</Person>) are already stored in an array with features
> > attached
> > to some annotations (such as the root and lemma of the word). Can
> > you please
> > elaborate some more on how to "index them as normally would" ?
> >
> > Regards,
> > JK
> >
> >
> > On Mon, Mar 17, 2008 at 4:33 PM, Grant Ingersoll <gsingers@apache.org>
> > wrote:
> >
> >> I think there are a couple of ways you can approach this, although I
> >> have never used GATE.
> >>
> >> If these annotations are marked in line in your content, then you can
> >> either preprocess the files to have them separately and index as you
> >> normally would, or you can use the relatively new TeeTokenFilter and
> >> SinkTokenizer to extract them as you go for use in other fields.  I
> >> have done this successfully for some apps that I have worked on and I
> >> think it works quite nice and beats preprocessing IMO.  Essentially,
> >> you set up a TeeTokenFilter that recognizes your Person and then set
> >> that token aside in the Sink.  Then, when you construct the Person
> >> field, you use the SinkTokenizer.
> >>
> >> HTH,
> >> Grant
> >>
> >> On Mar 17, 2008, at 8:54 AM, lucene-seme1 s wrote:
> >>
> >>> Hello,
> >>>
> >>> I am a newbie here and still experimenting with Lucene. I have
> >>> annotations
> >>> and features generated by GATE for many documents and would like to
> >>> index
> >>> the original content of the documents in addition to the generated
> >>> annotations. The annotations are in the form of [<Person> John </
> >>> Person>
> >>> loves fishing]. I would like to be able to search using the Person
> >>> attribute.
> >>>
> >>> Any hint or suggestion is highly appreciated
> >>>
> >>> regards,
> >>> JK
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> http://www.lucenebootcamp.com
> >> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
> >>
> >> Lucene Helpful Hints:
> >> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Rise to the challenge for Sport Relief with Yahoo! For Good
>
> http://uk.promotions.yahoo.com/forgood/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14440_25365570.1205867351274--

From java-user-return-33222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 20:28:03 2008
Return-Path: <java-user-return-33222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22916 invoked from network); 18 Mar 2008 20:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 20:28:03 -0000
Received: (qmail 25971 invoked by uid 500); 18 Mar 2008 20:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25946 invoked by uid 500); 18 Mar 2008 20:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25935 invoked by uid 99); 18 Mar 2008 20:27:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:27:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 20:27:16 +0000
Received: by nf-out-0910.google.com with SMTP id d3so52786nfc.15
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 13:27:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=j0gAeVblexYf3q9YOjwHg8eAM3UGGnSGQvnUtNaoopg=;
        b=szbR+38DDEGKby3wnfw7hX1WXjdDvvqbMjv59k7wQ3qUQH70Pl8J6PkESJiZriN3nIU/h+lkU8ucLSsNpacRWJqShVRDCASLRtXvoSwthrcC0TjWMblKB+qO/fxQngEgYk+OGneej9/yWCTX05fRnc3nmnLNroH44PupYu3CV+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=qi+/y00TndXNXUdV07bk1dAwU47Evs9JI3FqbPTvpc1pKZBwF3cFUBxB5qkxCn3N+YhBt9SJrUVhhFrcFEt6inVXqpTDmwz6srKULFqUzmvBoPA5Gj6dWiQEjhtjJp9IK6fVUmpUL8ex3ToSeOWLE0sl4A6E14ZXvkS+1p8Wj38=
Received: by 10.78.201.10 with SMTP id y10mr3209333huf.34.1205872043432;
        Tue, 18 Mar 2008 13:27:23 -0700 (PDT)
Received: by 10.78.184.15 with HTTP; Tue, 18 Mar 2008 13:27:23 -0700 (PDT)
Message-ID: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
Date: Tue, 18 Mar 2008 13:27:23 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Contrib Highlighter and Phrase search
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi List,

Thanks in advance for any help. I'm working with the contrib
highlighting class and am having issues when doing searches with a
phrase. I've been able to duplicate this behaviour in the
HighlighterTest class.

When calling the testGetBestFragmentsPhrase() method I get the correct:

<b>John</b> <b>Kennedy</b> has been shot

However when I add "John" to the text so it reads:

"John Kennedy has been John shot"

I get:

<b>John</b> <b>Kennedy</b> has been <b>John</b> shot

It makes sense to me that John should not be highlighted. Has anyone
else run into this problem? Anyone have a fix?

Cheers,

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 20:31:56 2008
Return-Path: <java-user-return-33223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25015 invoked from network); 18 Mar 2008 20:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 20:31:54 -0000
Received: (qmail 32639 invoked by uid 500); 18 Mar 2008 20:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32612 invoked by uid 500); 18 Mar 2008 20:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32601 invoked by uid 99); 18 Mar 2008 20:31:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:31:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 20:31:06 +0000
Received: by fg-out-1718.google.com with SMTP id d23so53584fga.27
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 13:31:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=MCTgUV23SyJYYjyaq0PvrWRF/Q2w1KoJJ2di0EsrlPY=;
        b=rovEBGueSVxej9HisI803LjUV2/oBVi7vp+49vdduNSEv9GCBD2/R/LEB5r5SmLnyig3/820BwtiViG2xmbvieGDY088Qw9cx6Lawi9zZkP6ju/AaQcEol+P3CimNXPfPIJKKaApnw8u1U/WwN6UsAN5riPjER1OHb88UO/8jwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZpIYJ0wheGx2tcemqvZoG1N8I3nCRJj41QmSEhY19h/Qw/7dQ09N/ZFH9kdtSuXf4eA7DCb4TjyEudPT+/xIVneLpPZt3+ZcqYbGYBMGpoJhS26k5VMNzKr7TnHTrFPwPTAxnbCAaUp+AN5MbK0mcDxw4RrA7mi2LEEa2hXfoTo=
Received: by 10.86.72.15 with SMTP id u15mr14760673fga.21.1205872276530;
        Tue, 18 Mar 2008 13:31:16 -0700 (PDT)
Received: by 10.86.91.5 with HTTP; Tue, 18 Mar 2008 13:31:16 -0700 (PDT)
Message-ID: <e05f0fd10803181331s7ab9145bi5e2a51efcffbf5af@mail.gmail.com>
Date: Tue, 18 Mar 2008 22:31:16 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-933 / SOLR-261
In-Reply-To: <4b124c310803181014k541f0abdhe72d1372e5656f2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_802_19725537.1205872276525"
References: <4b124c310803181014k541f0abdhe72d1372e5656f2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_802_19725537.1205872276525
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi Jake, yes it was commited in Lucene - this is visible in the JIRA issue
when if you switch to the "Subversion Commits" tab. where you can also
see the actual diffs that took place.

Best,
Doron

On Tue, Mar 18, 2008 at 7:14 PM, Jake Mannix <jake.mannix@gmail.com> wrote:

> Hey folks,
>  I was wondering what the status of LUCENE-933 (stop words can cause the
> queryparser to end up with no results, due to an e.g. +(the) clause in the
> resultant BooleanQuery).  According to the tracking bug, it's resolved,
> and
> there's a patch, but where has that patch been applied?  I tried running
> solr-trunk (which links to lucene-core-2.3.1), but the same issue occurs.
> I'd ask over on the solr-user list, but since SOLR-261 is marked as
> "blocked
> by LUCENE-933", I think here might be the right place to go first.
>  Any ideas?  Hoss, Doron?
>
>   -jake
>

------=_Part_802_19725537.1205872276525--

From java-user-return-33224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 20:46:07 2008
Return-Path: <java-user-return-33224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30515 invoked from network); 18 Mar 2008 20:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 20:46:07 -0000
Received: (qmail 58648 invoked by uid 500); 18 Mar 2008 20:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58436 invoked by uid 500); 18 Mar 2008 20:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58425 invoked by uid 99); 18 Mar 2008 20:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:45:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 20:45:16 +0000
Received: by wx-out-0506.google.com with SMTP id i28so72583wxd.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 13:45:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=0S8kDF7t+LmpGYHFDvGODXr+y6ByBExTktlVh0Yr9Hg=;
        b=iChYrflMezizA1koIkIf4EDWVazn5UIhQCJTRhR89Sb58a8u427Q/yFvuCyo9VKgeGEPf5uEjFzx/qShxWtd7J9q8Teh+FsGx7QNlCpZ4umenBPiRrCd8cgIpOz5EyXbT9I/TphsNH0yLkhzsJBHCCGcS7i2KrzcMrpoCjQeHmU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=AKLJsgwtH+OpO73jK1kEFhK12iaQRb/Sq59xdIS+CeuOTRmB/rISof5+2Tq6fs8a7Ou6NYhHc+uw4SqA5HRahi55Q4WmJ98a5AAk7yO0cidFKRQgjCeSQevlZAnSKA7Ma9BMzqCE7f9AG81OFj+I42XC2GKvaXdWHXQ9ZYWyqmo=
Received: by 10.141.171.6 with SMTP id y6mr1160199rvo.84.1205873124846;
        Tue, 18 Mar 2008 13:45:24 -0700 (PDT)
Received: by 10.140.177.19 with HTTP; Tue, 18 Mar 2008 13:45:24 -0700 (PDT)
Message-ID: <8c4e68610803181345r45b613f3p32594fc93f7df804@mail.gmail.com>
Date: Tue, 18 Mar 2008 20:45:24 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Cc: java-user@lucene.apache.org
In-Reply-To: <F573D2EC-D24D-4E39-B229-51CF80B6A0FC@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_20847_22672208.1205873124831"
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com>
	 <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com>
	 <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com>
	 <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com>
	 <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com>
	 <F573D2EC-D24D-4E39-B229-51CF80B6A0FC@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20847_22672208.1205873124831
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mike


Latest patch produces similar exception:

Exception in thread "Lucene Merge Thread #0"
org.apache.lucene.index.MergePolicy$MergeException:
java.lang.AssertionError: after mergeFields: fdx size mismatch: 65184
docs vs 521464 length in bytes of _c9.fdx
        at org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:320)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:297)
Caused by: java.lang.AssertionError: after mergeFields: fdx size
mismatch: 65184 docs vs 521464 length in bytes of _c9.fdx
        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:347)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:133)
        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3852)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3504)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:211)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:266)

Latest infostream attached.


--
Ian.


On Tue, Mar 18, 2008 at 6:05 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
>  Hi Ian,
>
>  Sheesh that's odd.  The SegmentMerger produced an .fdx file that is
>  one document too short.
>
>  Can you run with this patch now, again applied to head of 2.3
>  branch?  I just added another assert inside the loop that does the
>  field merging.
>
>  I will scrutinize this code...
>
>  Mike
>
>
>
>
>  Ian Lea wrote:
>  > Mike
>  >
>  >
>  > Patch applied and test re-run and picked up an assertion error this
>  > time:
>  >
>  > Exception in thread "Lucene Merge Thread #0"
>  > org.apache.lucene.index.MergePolicy$MergeException:
>  > java.lang.AssertionError: after mergeFields: fdx size mismatch: 72357
>  > docs vs 578848 length in bytes of _3o.fdx
>  >         at
>  > org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(
>  > ConcurrentMergeScheduler.java:320)
>  >         at org.apache.lucene.index.ConcurrentMergeScheduler
>  > $MergeThread.run(ConcurrentMergeScheduler.java:297)
>  > Caused by: java.lang.AssertionError: after mergeFields: fdx size
>  > mismatch: 72357 docs vs 578848 length in bytes of _3o.fdx
>  >         at org.apache.lucene.index.SegmentMerger.mergeFields
>  > (SegmentMerger.java:342)
>  >         at org.apache.lucene.index.SegmentMerger.merge
>  > (SegmentMerger.java:133)
>  >         at org.apache.lucene.index.IndexWriter.mergeMiddle
>  > (IndexWriter.java:3852)
>  >         at org.apache.lucene.index.IndexWriter.merge
>  > (IndexWriter.java:3504)
>  >         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge
>  > (ConcurrentMergeScheduler.java:211)
>  >         at org.apache.lucene.index.ConcurrentMergeScheduler
>  > $MergeThread.run(ConcurrentMergeScheduler.java:266)
>  >
>  > The infostream output is attached.  Since this email is to you and the
>  > list it should make it to you.
>  >
>  >
>  >
>  > Yonik: I haven't been able to make TestStressIndexing2 fail.
>  >
>  >
>  > --
>  > Ian.
>  >
>  >
>  > On Tue, Mar 18, 2008 at 4:19 PM, Michael McCandless
>  > <lucene@mikemccandless.com> wrote:
>  >>
>  >>  Ian,
>  >>
>  >>  Could you apply the attached patch applied to the head of the 2.3
>  >>  branch?
>  >>
>  >>  It only adds more asserts, to try to pinpoint where exactly this
>  >>  corruption starts.
>  >>
>  >>  Then, re-run the test with asserts enabled and infoStream turned on
>  >>  and post back.  Thanks.
>  >>
>  >>  Mike
>  >>
>  >>
>  >>
>  >>
>  >>  Ian Lea wrote:
>  >>
>  >>> It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>  >>>
>  >>> $ uname -a shows
>  >>> Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005
>  >>> x86_64
>  >>> x86_64 x86_64 GNU/Linux
>  >>>
>  >>> and
>  >>>
>  >>> Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003
>  >>> i686
>  >>> unknown unknown GNU/Linux
>  >>>
>  >>> The first one has a 2.8Ghz Intel CPU, don't know about the second.
>  >>>
>  >>>
>  >>> I'll try and run the stress test.
>  >>>
>  >>>
>  >>> --
>  >>> Ian.
>  >>>
>  >>>
>  >>>
>  >>> On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>
>  >>> wrote:
>  >>>>
>  >>>> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com> wrote:
>  >>>>> Hi
>  >>>>>
>  >>>>>
>  >>>>>  When bulk loading into a new index I'm seeing this exception
>  >>>>>
>  >>>>>  Exception in thread "Thread-1"
>  >>>>>  org.apache.lucene.index.MergePolicy$MergeException:
>  >>>>>  org.apache.lucene.index.CorruptIndexException: doc counts differ
>  >>>>> for
>  >>>>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows 67862
>  >>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>  >>>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>  >>>>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc
>  >>>>> counts
>  >>>>>  differ for segment _4l: fieldsReader shows 67861 but segmentInfo
>  >>>>> shows
>  >>>>>  67862
>  >>>>>         at org.apache.lucene.index.SegmentReader.initialize
>  >>>>> (SegmentReader.java:313)
>  >>>>>         at org.apache.lucene.index.SegmentReader.get
>  >>>>> (SegmentReader.java:262)
>  >>>>>         at org.apache.lucene.index.SegmentReader.get
>  >>>>> (SegmentReader.java:221)
>  >>>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>  >>>>> (IndexWriter.java:3093)
>  >>>>>         at org.apache.lucene.index.IndexWriter.merge
>  >>>>> (IndexWriter.java:2834)
>  >>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>  >>>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>  >>>>>
>  >>>>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux, with
>  >>>>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from yesterday.
>  >>>>>
>  >>>>>  With java version 1.6.0_03-b05 things work fine.
>  >>>>>
>  >>>>>  The exception happens a few hundred thousand documents into the
>  >>>>> load.
>  >>>>>
>  >>>>>  A different program updating a different index with different
>  >>>>> data on
>  >>>>>  a different server gave a similar error on version 1.6.0_05-
>  >>>>> b13 and
>  >>>>>  lucene 2.3.0.
>  >>>>>
>  >>>>>  Any ideas?  Is this maybe a known issue or am I missing
>  >>>>> something obvious?
>  >>>>
>  >>>>  My guess is perhaps a thread safety bug, more likely in Lucene
>  >>>>  indexing code (less likely in the JVM or specific libc).
>  >>>>
>  >>>>  What Linux version are you using?
>  >>>>  What hardware are you running on (specifically, the CPU)?
>  >>>>
>  >>>>  If possible, it would be great if you could check out Lucene
>  >>>> trunk,
>  >>>>  crank up the iterations by modifying the TestStressIndexing2 and
>  >>>> maybe
>  >>>>  fiddle with some of the other parameters in
>  >>>>  TestStressIndexing2.testMultiConfig(), and see if you can get
>  >>>> it to
>  >>>>  fail.
>  >>>>
>  >>>>
>  >>>>  -Yonik
>  >>>>
>  >>>>
>  >>>> -------------------------------------------------------------------
>  >>>> --
>  >>>>
>  >>>>
>  >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>>
>  >>>>
>  >>>
>  >>> --------------------------------------------------------------------
>  >>> -
>  >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>
>  >>
>  >>
>  >>
>  >> <infostream.zip>
>
>
>

------=_Part_20847_22672208.1205873124831
Content-Type: application/zip; name=infostream.zip
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fdyxoqd70
Content-Disposition: attachment; filename=infostream.zip

UEsDBBQAAAAIAFqlcji9+0sKtQEAAIwGAAAiABUAb3AuMDAubHVjaW4uaW5kZXh3cml0ZXIuaW5m
b3N0cmVhbVVUCQADTCngR0wp4EdVeAQA6ANkAO1TTWvcMBC991fMsT3E1n5kwy4Yls2ysHRDCi7k
UHpQpJFXRB9Gkmm2v76yFW/rxNBD6KEhPskz8/TevNHsd1v4pqk031fgMeyNsGVwSDVwVBikNV+s
kuxUWFdltKbsiJlqGBrMpOH4mH1GrG+NOh2oD9dWaxm2A+B6tpzy6WImPuzvgIxzrYBLN8Lgg3WY
7cqtdMji+bTOg67z+7nPhZM5b4TIbd3pANoEm/iL4BoEja7Cv2g/2GpzCljKn3jzu3w9n00pEQuW
7igjjDcKxwSma66tYY1zaMLNALC+wku65LgAR/UmikXXUW2KySIjoOljCuLWMl9cTP6MtB7iV3S6
T+wkKn5AU4VjMSHxg468GNpq7A8QqvFHoAGYsh6HeUjZ1v9KR8GFaZQCblnZWl2OBW+FiMMqSEJ2
UgVVHp/+O6E+ed5XdLi+zDS6A5H2FNuLiNQXeS4tDfIeRUQ/dfGyO0ajNiENVcC6cX/89OxlBerC
OQf+QdZ3tH8VPvq/N+3QR/jb0jOwZQN2pKZCDzUaLk01BPQOr6LKf75F80uCV0vC/p8t6vf+1Vt0
Xsf3LXrbW/QLUEsDBBQAAAAIAFqlcjhuaM6P1gMAAPsPAAAiABUAb3AuMDEubHVjaW4uaW5kZXh3
cml0ZXIuaW5mb3N0cmVhbVVUCQADTCngR0wp4EdVeAQA6ANkALWXbW+bSBCAv/tXjCJVupPuMC8G
gytLviSKZF2sVvVJ/VBVFYXBQYVd3+4C8f36213s2jh4EyeuvwA7O6878xjmd7fwpYxz8nUCHMWc
ZHQpGMYlpFigyCn5SIs82UwpW1nxOk4e0CqqBAlaOUnx0fobcf2BFJv7mIsbWpa5uO0ozka+jePI
Tgbzz2D3+5pAmrMeD1xQhtbd8jZnmMj7zWwoyvXw+4gPM5YP0yrLhnSt44C4ErT1PxWsQiiRrfCZ
2O/p6nojcJn/h4v99pkXuakbeFlrYynV0qrAvgBbMzeUJBVjSMSiozAbeW5sZ0ECLC6vZbDItKvr
qRNYNpTxY7uItzTh0z+dwxVVQ/wHWbkT3OVYpPdIVuJh6tjyB9r5dADw6a/FBAhtICsq/gAzqDim
Wy9OAHFR0GT/KFi+WiHTC90zgdaAOpxVKbOZfosqSGmyVMew7Fn7kGXyHKd2q6ez0LVvH3UKnZWt
2naNVKVW8cd+oB5k6lKnzdk+jqw95O+YSf1tnoNBe11TLnKy4hDzXeSgojy0PxgkBeW4i2ACLmR5
gRwE3VqTNyeVAWiRyiqr05NVG0deIOtPsLlTqpjqdd91oiAaq+LwoaruH44fWJ7jqY1DaWDqOZYd
Ou8G84OZU8cm+yX5saa5dH21jYF/c8QVfHF2MXF4Dzlv+xumkMUFx6+/xpCee4QrWQUrI+XVaSH7
97RwzR5PC0XOTcL8tJAwU0CpwWeWiqtuU90vPk5kF5BUTy2fwL5IPRsBCqyxgMBy3dHYiXzVMYEV
Bv44dE7r3iyW7dlolvTItq09UV03SXS79W0iFErV+toMhzWSVPb8e22aoagYOQ8EnnMeCOoeENQX
BkHk+s5rQLCvnJEIdcfRmUQ4Uj4iQij/LoLwCRG8cTQORgdECG3PctwOEaKxew4R3EsR4QxD+zGq
TUSoTUSoTUSoTUSoTUSoTUSoTUSoX0IE9xVEiLzQcfzTuq8gguq/SaIb75Vs6KjtCREL0FPw7Pg3
PePfXHj8x4H7tvE/KJMRBE3H5ZkgOFLugmDk+a4Xjo5BMHJDz5PJHYAg8K3A93+CwI2scDQ6BwTe
pUBwhqH99DQmEDQmEDQmEDQmEDQmEDQmEDQmEDQvAYH3BhCc0n0TCFQnThLdgpdCQiLfD1TScQGJ
boLffj/6ZhMxEz9lwH/k68/x7nuLy0afE/U59WRqW43t98oZuaig+IYkKn8ryfhJaW2UNk+l24jk
Za3a4IXTUhmmRdWgb1jaDbw1m2LyCbOd984c9jZnd8NhAiklqN7ndI5Hye2g/lzf/A9QSwMEFAAA
AAgAWqVyOL3JJCyLAwAAnAwAACIAFQBvcC4wMi5sdWNpbi5pbmRleHdyaXRlci5pbmZvc3RyZWFt
VVQJAANMKeBHTCngR1V4BADoA2QAtVZtb6NGEP7uXzGyVKmVWgyYF8MJyU2iSFZj3elc6T6cThG3
DA462KW7S5Ltr+8u2GfjwyRpXX8xzOy8P/Owq9sb+FylBf0Sg0C5ojnbSI5pBRmWKAtGP7CyICph
fGuldUoe0CobghStgmb4bP2BWL+npbpLhbxmVVXIm57h0pu7qZ0HZLL6BPZwrBiygg9EEJJxtG43
NwVHop/VciarevbVE7OcF7OsyfMZq9s8IG0k6+InkjcIFfItvpD7HdteKYmb4m9cH44vQ/TTKMOg
87HRZllT4lCCnZtrRknDOVK57hksg3zupWG2AJ5WVzpZ5G2oq8QJLBuq9LkT4g0jIvnNOZaYHuKf
yKu94rbAMrtDupUPiWPrH7TBk/uoiYkf+gHcR48xiVzf0U9PMQkD15kAfPx9HQNlT5CXjXiAJTQC
s10KcwfSsmTk8Cp5sd0ibwX9gUHnwExuW+lSdeBnyBjZmBltBmTv81wPObE7u7bEdjDda1tfT7Iz
28loU7UmQRh55kX3Rdt0DbFPM+sQ8BVzbb+rc7wtk+5QzYQs6FZAKvZlgSnhOPhkQkomcJ9eDC7k
RYkCJNuF0g9njQFYmekRmLnrli7sKFroevDp1phi1sp9x/fcMDSdEzPT+l/nC9dy/IU5ONMOkrlt
BYH702R1tK1mphpp5FvNCh16ustB3DvNFD57+5wEvINCdJsBCeRpKfDL/+OoZQyEqe6CldNqel7J
/zqvrPnzeaUsxJiyOK+kfCyhbCRmnslpH3F36w+xRgHN2n0XMRyaNHAQoMRHLCGwXNcLncg3iAms
aL5wHP+87fV6082mZaEB3Q738TjWDSZj0oJxyAVlUJmtaYMIqJFmeiPetYE5yobTvtmBSVIJ7Wa8
SBNqgCbUhWnCtRfhxWniqHWjhKF6abyRME6MQXe9Yo86P8P3iUhL7L4tRA3ppKqxTzKh52qIuacc
4yzmnhtFRxzjRHNN+e53jnE9K3T8t3CMfymOeYOjw2KqMY5RYxyjxjhGjXGMGuMYNcYxaoxj1Gs4
xv8PHHPO9uIcYwAdkxbJl2Iboq8ophFpCaQFxs+/nFwlZcrldx2Ib0X9Kd1fA4UG/4qaW94PhNBZ
vOYa9XJ9JlGhKDEnLZKLs1r1o3aXh/6rDSBeuTePI3tjKh9am+6A6NxmSD5ivo/e28hBmPYPHBeQ
MYrmItnWeFLc/ivxbxD0D1BLAwQUAAAACABapXI477xjjr4BAADZAwAAIgAVAG9wLjAzLmx1Y2lu
LmluZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA0wp4EdMKeBHVXgEAOgDZACtUk1r20AQvfdXzLE9
VJIdW4oEAuMYg6lDCirkUErY7M7KS/dD7K4aq7++KylOqyAohOg0mpm37828Oex38F0RoX8U4NAf
NDeVt0gUMJTohdFfjRS0K42tI9IQesJIthQ1RkIzPEdfEJs7Lbsjcf7GKCX8bgLcrK6WJOEp/XC4
h2SeqwAm7AyD88ZitK92wiINcbeJvWrix5WLuRUxazmPTTPoANJ6M/KX3rYICm2N/9F+NPW281iJ
33j7t32T4ZrkDNPxjSrAWCtxTuD4zI3RtLUWtb+dADYpv1qRjF2DJWobxKIdqLblIo0SUOQ8JnFn
qCs/L/7N9DvEb2jVpbAXKNkRde1P5SIJHwzk5UPeFnSdrVN4yH8VNF+uFyF6KmiWLvvoXNA0y1ch
6gq6TK6zqQ/aPAGXrTsB8UClcTitw1jtDatVmLDUrZTADK16b6q55B3nwd0yGZHDbJxIh8//w2Ru
NOnSMeAubbpVAyjpo7CPgBgXkbyWNjr/iDygn6d4h3VQEobhQhMJdDioj59e3a4n1r/UwP0UzT25
3J0LDh90f1YzgvvWF2DPBvREdI0OGtRM6HoKuFhSvGGsP1BLAwQUAAAACABapXI477xjjr4BAADZ
AwAAIgAVAG9wLjA0Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA0wp4EdMKeBHVXgE
AOgDZACtUk1r20AQvfdXzLE9VJIdW4oEAuMYg6lDCirkUErY7M7KS/dD7K4aq7++KylOqyAohOg0
mpm37828Oex38F0RoX8U4NAfNDeVt0gUMJTohdFfjRS0K42tI9IQesJIthQ1RkIzPEdfEJs7Lbsj
cf7GKCX8bgLcrK6WJOEp/XC4h2SeqwAm7AyD88ZitK92wiINcbeJvWrix5WLuRUxazmPTTPoANJ6
M/KX3rYICm2N/9F+NPW281iJ33j7t32T4ZrkDNPxjSrAWCtxTuD4zI3RtLUWtb+dADYpv1qRjF2D
JWobxKIdqLblIo0SUOQ8JnFnqCs/L/7N9DvEb2jVpbAXKNkRde1P5SIJHwzk5UPeFnSdrVN4yH8V
NF+uFyF6KmiWLvvoXNA0y1ch6gq6TK6zqQ/aPAGXrTsB8UClcTitw1jtDatVmLDUrZTADK16b6q5
5B3nwd0yGZHDbJxIh8//w2RuNOnSMeAubbpVAyjpo7CPgBgXkbyWNjr/iDygn6d4h3VQEobhQhMJ
dDioj59e3a4n1r/UwP0UzT253J0LDh90f1YzgvvWF2DPBvREdI0OGtRM6HoKuFhSvGGsP1BLAwQU
AAAACABapXI477xjjr4BAADZAwAAIgAVAG9wLjA1Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJl
YW1VVAkAA0wp4EdMKeBHVXgEAOgDZACtUk1r20AQvfdXzLE9VJIdW4oEAuMYg6lDCirkUErY7M7K
S/dD7K4aq7++KylOqyAohOg0mpm37828Oex38F0RoX8U4NAfNDeVt0gUMJTohdFfjRS0K42tI9IQ
esJIthQ1RkIzPEdfEJs7Lbsjcf7GKCX8bgLcrK6WJOEp/XC4h2SeqwAm7AyD88ZitK92wiINcbeJ
vWrix5WLuRUxazmPTTPoANJ6M/KX3rYICm2N/9F+NPW281iJ33j7t32T4ZrkDNPxjSrAWCtxTuD4
zI3RtLUWtb+dADYpv1qRjF2DJWobxKIdqLblIo0SUOQ8JnFnqCs/L/7N9DvEb2jVpbAXKNkRde1P
5SIJHwzk5UPeFnSdrVN4yH8VNF+uFyF6KmiWLvvoXNA0y1ch6gq6TK6zqQ/aPAGXrTsB8UClcTit
w1jtDatVmLDUrZTADK16b6q55B3nwd0yGZHDbJxIh8//w2RuNOnSMeAubbpVAyjpo7CPgBgXkbyW
Njr/iDygn6d4h3VQEobhQhMJdDioj59e3a4n1r/UwP0UzT253J0LDh90f1YzgvvWF2DPBvREdI0O
GtRM6HoKuFhSvGGsP1BLAwQUAAAACABapXI477xjjr4BAADZAwAAIgAVAG9wLjA2Lmx1Y2luLmlu
ZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA0wp4EdMKeBHVXgEAOgDZACtUk1r20AQvfdXzLE9VJId
W4oEAuMYg6lDCirkUErY7M7KS/dD7K4aq7++KylOqyAohOg0mpm37828Oex38F0RoX8U4NAfNDeV
t0gUMJTohdFfjRS0K42tI9IQesJIthQ1RkIzPEdfEJs7Lbsjcf7GKCX8bgLcrK6WJOEp/XC4h2Se
qwAm7AyD88ZitK92wiINcbeJvWrix5WLuRUxazmPTTPoANJ6M/KX3rYICm2N/9F+NPW281iJ33j7
t32T4ZrkDNPxjSrAWCtxTuD4zI3RtLUWtb+dADYpv1qRjF2DJWobxKIdqLblIo0SUOQ8JnFnqCs/
L/7N9DvEb2jVpbAXKNkRde1P5SIJHwzk5UPeFnSdrVN4yH8VNF+uFyF6KmiWLvvoXNA0y1ch6gq6
TK6zqQ/aPAGXrTsB8UClcTitw1jtDatVmLDUrZTADK16b6q55B3nwd0yGZHDbJxIh8//w2RuNOnS
MeAubbpVAyjpo7CPgBgXkbyWNjr/iDygn6d4h3VQEobhQhMJdDioj59e3a4n1r/UwP0UzT253J0L
Dh90f1YzgvvWF2DPBvREdI0OGtRM6HoKuFhSvGGsP1BLAwQUAAAACABapXI477xjjr4BAADZAwAA
IgAVAG9wLjA3Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA0wp4EdMKeBHVXgEAOgD
ZACtUk1r20AQvfdXzLE9VJIdW4oEAuMYg6lDCirkUErY7M7KS/dD7K4aq7++KylOqyAohOg0mpm3
7828Oex38F0RoX8U4NAfNDeVt0gUMJTohdFfjRS0K42tI9IQesJIthQ1RkIzPEdfEJs7Lbsjcf7G
KCX8bgLcrK6WJOEp/XC4h2SeqwAm7AyD88ZitK92wiINcbeJvWrix5WLuRUxazmPTTPoANJ6M/KX
3rYICm2N/9F+NPW281iJ33j7t32T4ZrkDNPxjSrAWCtxTuD4zI3RtLUWtb+dADYpv1qRjF2DJWob
xKIdqLblIo0SUOQ8JnFnqCs/L/7N9DvEb2jVpbAXKNkRde1P5SIJHwzk5UPeFnSdrVN4yH8VNF+u
FyF6KmiWLvvoXNA0y1ch6gq6TK6zqQ/aPAGXrTsB8UClcTitw1jtDatVmLDUrZTADK16b6q55B3n
wd0yGZHDbJxIh8//w2RuNOnSMeAubbpVAyjpo7CPgBgXkbyWNjr/iDygn6d4h3VQEobhQhMJdDio
j59e3a4n1r/UwP0UzT253J0LDh90f1YzgvvWF2DPBvREdI0OGtRM6HoKuFhSvGGsP1BLAwQUAAAA
CABbpXI4oT14szoIAADKPQAAIgAVAG9wLjA4Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJlYW1V
VAkAA00p4EdMKeBHVXgEAOgDZADNm19v2zYQwN/zKYgMA7aHKSIpkqIHA1lbFAiWYMNSoA9FUWgS
nQiTJU+Sk3iffqRkR5IrncVY+ZOXyCSPPJJ3v+OJ9sXHD+jLMojTrzNUqPIiXWTXZa6CJYpUoso4
S//MkjjczLP8xglWQXirnGQdqlQ5cRqpB+d3pVZ/pMnmMijK99lyGZcfOoLnHiWBu+DhycVn5PaP
NUNRnPeMUJRZrpyP1x/iXIX6eXN+Vi5XZ397xdkij8+i9WJxlq0qPVCwLrN6/HmZrxVaqvxGHdD9
Mrt5tynVdfyfumqanwvFAhkpXvdxrcWidaL6FKy7eZ+l4TrPVVpedQTO+YJ6gYh8lAfLd1pZlVdD
vZtj7rhoGTzUhepDFhbzX3C7xKyh+qTy5a7iY6yS6FKlN+XtHLv6D1WDz7/J9SxkgnH0Td7NQkkY
1k/3s1BwYp4eZiEX0tNPm1lIXF+cIPTXb1czlGb3aJGsi1t0jtaFirZqUYyCJMnC5mOZxzc3Kq8K
upuI6g7Mbt4s9fS1Mv+hKAuvzb5d95T9sVjojZ+7tVw17Wqz6o/VnDslW7FtWbpeViLU0/PRH/Ra
aZl6kdx9zWqr+FsttPx2nvZLdVILrrKijNObAgXFbqrITKut0MlJmGSF2qk8QwQt4kQVqMy2w+uH
QWGEsiTS22LsQy+z70rp6zmq+49GVEVVOSM+41pnvZrFmd4OLqmDPWaanWnxOcWO53k/nly0fNrs
srbH8J9VFuuBT7caFN/w3Sn6wncaFehXFBe1/6A5WgRJob4+T0cVVxQ61WvgLNLl6XBl/u9w5Sp/
GK4s4wKqjIcr0xxSKALGXETladcGL6/+nGkbSKOKCsUMNYvU0xChRN2pBHGHEE9gyYy9cEdSH2M2
LPv+6rrem4pVPXVbT5jZW7+x0llYmWdft2mGlsa3qoELtFJppH3k10qZXJXrPLUiDfZ9K9IE7vek
aZVNRBru+S9CmtZaQ8zRE2yrZsecfeFxzNGWSFzxyBxBtYHKFnNcR7rMhjliKuZYdPToqIELMMdU
DjJHVw4zR1cOM6eqHGKOrhxmjlFokDlV5UHmiCOYMyT7Iswx9qqfjKE+C30wP4o+uIc+eHL6cPHC
9GmtOsgh3FHSkkN7wnscEpJyfbr9/uxDfS4bDhHhCIw7Zx9udfbxp+KQRUeN82KIQxjiEIY4hCEO
YYhDGOIQhjiEx3DIP4JDQ7IvzCFjueZJm+xbJBLpIRKZPPPy5asRqbX+IJtIR11LNu0JI711y+xO
z8Ok3/MiSFSd6oebvrpys1JjeUY8jlnDM9d1CJVtnmGMbXgmp+KZRUcNBAjEMwLxjEA8IxDPCMQz
AvGMQDwjY3gmj+DZkOyr8czYvanVBv8WyUZ7yEanJpuP3TdAttZOgIyjHcUtGbcnPJJXEktKG14x
T9uzaPOKYWLDK73eEwHLpqfGzSlELAoRi0LEohCxKEQsChGLQsSiY4jVWiV7ZB0SRrpIC2B3hoIo
QuVtXPRRzNRVxabxliM7/Z7Nk4zF6yfj4F/KrAwShHdjf31zAG6U7R0+zNIijlS+XcWXWDPtcJn+
2P8SUJtNsE7DW8MBveu5CiL05bK6HEHVxqJPdeEPbt9aj4ottdhAp48dbc2qqtDBowzy8pBks9Nb
cfvLlGPWEz31BufJtjS4Emb2etlfw55AnXQoqz3WkxzXLyEPiYUV/K9q4bc0n5Zi21PJC6tnQgfo
C0CEHRFgB7tu35KEi11sPNw8cO2aY7vmxK45HdP8JVYx8FoHl3HNH48yo5o3h5tRzZvjzsjmsU3z
5kg0bqqRle6tY9Ng+yqUbL33p59R8U+8+hzE5bzaNVTow/FFar5FUMw5cT3tfCNJsKN/4M3CCm9j
wlWxSUPjzcYYrZIuwuxyLtaTc7HJc64nvt9ulgxMklhnJMskaU94XJJEPY71ujdJku94vHNB71Or
l9RkqhzJoqPGQRiUIjEoRWJQisSgFIlBKRKDUiQGpUhsTIpExmRIwnE9IlxuzEU4QppnnSA9Ibny
PY95hA0LW+Qjjy5hTNeE/qe/pR5HL/1vZRb3yRHxHoiIBhPjAmItUtQDRSr8Sy12GnY8YGRQeIKI
PsRZnSTknV3ze7vmD3bNN9vm8J5HmS7W0aSKPweP4If9Cha19LRxnY32PbtE06yMXSCWwi4S855I
zKeOxMzFx0XiFnbAmMw7Y1rG5D3hcTEZEx2GWzEZM0d6XvsLLIzSsTHZQItOEZMtO2oCGYdiModi
ModiModiModiModiModiMh8Tk+krxeShs8BxMdkYsX4y1vsCNy3WrBE9rBFTs4byp90hw8sJUkd0
Rrekzp7wyOsSzpnXXO9y4TpCkHYmQLkNdLypoGPRUeOpAoKOgKAjIOgICDoCgo6AoCMg6Igx0PFe
CTpDsJsKOsaa9ZMx47eIH78HP/7kRx1Kp8dPa2FBEPkdPSxBtCc8FkQSi9b35lzquIJ2QCSsSMSm
IpFFR437+hCJfIhEPkQiHyKRD5HIh0jkQyTyx5CIvRKJhgg4PYmMYZsybdFHvbBo2VztO0GJKvc6
iB3Zgx05MXaIxJNlWAdWEQSQ7GhkCaA94S6APIq1mnwfQB4VLiOy9aMl3/Fc3sm/yOgvut1P9aMl
y44ar5UQgCQEIAkBSEIAkhCAJAQgCQFITvajpWcA0BD4nhNAxsRnYWXbU6EoNG/N9HoGyeMV0t4P
YQeulyp6tG+X9mgxcIl07FRbl0ysumQaquVgrQBrfbBWfl/b+875oI8/AD7eesPc8Ytx75Pv+12q
26A9gd4XqLsvRW3j1JEW+z9QSwMEFAAAAAgAW6VyOPDrWMpvBwAA2TEAACIAFQBvcC4wOS5sdWNp
bi5pbmRleHdyaXRlci5pbmZvc3RyZWFtVVQJAANNKeBHTSngR1V4BADoA2QAzZrbbts4EEDf8xVE
FgvsAluFlGRdXBjItkGAoAlaNAX6EBSFTFIXVJa8ktzG/fodSnIkORItJqqbvIQmOeSQnDkcjn11
eYHuVl6UfJmjnBdXiZ/eFhn3VojxmBdRmnxI44huF2kWaN7aoyHX4g3lCdeihPF77R3n6/dJvL32
8uJtulpFxUVH8Nw0dA/7Fj25+oxw/1xzxKKsZ4a8SDOuXd5eRBmnUN6enxWr9dnSzM/8LDpjG98/
S9elHsjbFGk1/6LINhyteBbwA7pfp8GbbcFvo5/8pul+bvOZ5zJuVWPcghjbxLxPwWqYt2lCN1nG
k+KmI3Bu+Ybp2cxBmbd6A8ryrJzqzYJYGkYr776q5BcpzRevSLtG7CH/xLPVruEy4jG75klQhAuC
4Q+Vky++euacmq5FbPTVm82p4ViiZEFphgmUbCgZlgslR9QZBpTcOdVdQk4Q+vjvzRwl6Q/kx5s8
ROdok3NWa2gQ5MVxSpuPRRYFAc/Kiu55omoAcbDBCnYC9PIQS+mtOMLbnrr3vg82sMCVXLkD5blV
H8vld2pqsbou2axKkdnMIuIDbBvIVPuF9zWrDGTJfZCv1/msXTupxlineRElQY68fLdqJFbY1u3k
hMZpznfaz5GO/CjmOSrSWhMoDAojlMYMTkhYDey4g13XMVHCf1wKUc7K+pmOTduZiY3Nz8TJ/EN0
rBllvzOQXxhYcy39z5OrlquLEwczpd/WaQQzn9Yq5F/J/Sm6s3cq5eg1ivLKrdAC+V6c8y+/ZqAS
NxydwiZofrI6HW7M/htuXGf3w41FlMsao+HGJJMpxCRz+qw47drj9c2HORhBwkpY5HPUbFJPR4Ri
/p3HyNawqdvYEvZia7YrynNExohamq6bNnFnQtbSHEt3wbTnyBoQfntzW51rib+ettqj5s/yImHt
c1qaed8MSYpWwl1LHXK05gkDX3td6pXxYpMlB+BFrA68LF0NXsseeC2nhpctvPm48GptuxRjy46W
ihjbE97DmO0aFlxfjzFmmy5uY8wyNQvO7YFjRMPYVeGYMxXHFAZqnH8p49hSxrGljGNLGceWMo4t
ZRxbyji2HMMx59gccwyim8P8PDbHhOFDSVj8MYjmmmpEoz1Eo5MTzca/j2itA5CyjXb0VWTbnvA4
thHHtnW7wzawZlhPK0ZzXKLCNncqtikM1ACBythGZWyjMrZRGduojG1UxjYqYxsdwzb3+GxzXWuY
qb+PbcIFRMnGv4Zy3Uen7tpqlGM9lGNTU87QXwTlWkch5R3raK7Iuz3hcU9Sw4JlmC3eYRPD0Zrt
WM7FjgrvCJ4KeCojNZhgMuIxGfGYjHhMRjwmIx6TEY/JiMfGEK+1S8dBnk1mjjlM2pdAPOEOUBJ+
cIQIT5l9vId9fPKEm2m/LPa1DkVKwe4aFCm4Jzwu6oMrHDvtqA/btmZgo6GgrpGZEgTJZBBUGKkh
B5dBkMsgyGUQ5DIIchkEuQyCXAZBPgqCo0g2JQSdWSV8gL4IhgcJQubIYwwVYZT3gVG0ldWic82j
3dp+mRsKdxH9ABR3RVp4Mehaz/3lJTO90btXE5omecR4Vm/oMbYP/DaFj36vPmBC3iahoaAJGEDG
IVS7uy6/l0LlGaNPVeUfuG/bR11XldjAoA8D1RZWNsB9VHhZcUiyOfRafHHU/UQTfHn2ZLMa3BSx
EXACv8O0pDrB7Vj5sTkjllHeZ4fEaHmd3FTCL2k9LcXqmOfI6onLSOoWw3e2PuLKHhy6/aUU9Xe3
7YjuS7XuVK07U+vOx3Q/yi76rVBoXPeH4GhU9yZcGtW9CaBGdo9UujdB1rilMiXdW4HYYP/yVqm9
96+/Uf4tWn/2omJRnhrKId6+SsRvOfKFZRLiYMscR4K+i8CHoiDdmEss3yZUiAi7HDkj/FuLxT/Z
ircSKxaPtXFGXInk1USM04/c32nY8ZiRB/kEEQCvmvdbat1tte6OWne37i4/c5ZCNTzqS0M5aCGP
HiD6/jNALtp6kcws16keJOAMrqMyVG9YJxailL4wXMXfCwU96Ytg6vSFblrPTl888EGabwg6kyrm
G/aEEQTkq/Q7aCN+BbbIvZhXvzij2762Vcoi+JT1tRXbNe+rh+i/r7qK5sflO0zTwGYn60uwZoFV
tPIdAOexCQ+BOWOKfIfiQI2LB7J0RyBLdwSydEcgS3cEsnRHIEt3BLJ0RzAm3WGMzHYcZsuoXIfp
GsQYTpQ8MTuw807hRRB9C/d51uu3ZV6Vo3pwhQtfPgi0sAdo4cRA00U6cSKetXZMSrawPbsi2Lqy
e8ARNw1M5wWPCBUs14V3v88heFk9/vLJMHQXWw8UsgxXM3HzKyIdaxAfqjDInIpBCgM1jhvKGBTK
GBTKGBTKGBTKGBTKGBTKGBSOYZD5ohjUEX5FNCzkZnCpmS6ZHQFdwmPmVLjKVAyjIhiFDffih9fU
3i/zB15aJXbaD609zhx+Tx1cVutBFbQeVI9bw8etvY+rg275U+KWradUx5THPZy2/V7Q7dBeQO9L
YZfHr68cBXv5H1BLAwQUAAAACABbpXI4NVZaSO0EAACSHAAAIgAVAG9wLjEwLmx1Y2luLmluZGV4
d3JpdGVyLmluZm9zdHJlYW1VVAkAA00p4EdNKeBHVXgEAOgDZADNmVtv2zYUgN/9K4gAAzZgk3Wl
LoWBLAkCBEvQoh7Qh6IIVOnIkURKnki3cX/9SMmuJVdmpdaxm5dQPDyHh+fyiYbubm/QexqmxYcA
MeB3RVLOeQUhRTEQ4GlZvClJGq1nZbXQwmUYPYFGVhEUoKVFDM/aPwDL1wVZ34eMX5eUpvymo3hp
W2aoJzia3L1Dev9eAYrTqmcHxssKtNv5TVpBJMbryymny+lHm02TKp3GqySZlsvaDxSueNnsP+PV
ChCFagHf8f2+XFytOczTL/CwW37pghP6MeDGxlyoxSsCfQ42Zq7LIlpVFRT8oaNwiRPLDt3YQ1VI
r4SzUNVbXc0MrOmIhs/NJNyUEZv9ZbRnZAzhX6joVnCbAonvoVjwp5mhiz9Ubz57DO0gsn1suOgx
TMTQMbAlhosgckwbi9FTEJm6NUHo7d8PASrKzyghK/aELtGKQbzxxsAoJKSMdo+8ShcLqOqJbu5Q
Y0AmcUHFqYUPKYrLaC7TNe+Ze50kIt8zvdGrT1vnqHmsj9qZ2aht5ooVrVUcz9XlgwiR0Glio+97
1hTDR0iE/uacgyM0adYvS8bTYsFQyLYnRPI0bT8mk4iUDLaeBshESUqAIV5udhWDg8oIlSQW2ZDV
IKLr+hYW+Szg861Uhbied2zbcHxXBpFNZRb+NCxDM0xPLpwKAzPL1Gzd+m1y1+phmV5Rf1G+LFOx
9cXGB/ZofLlA752tTwy9Qilr+gXNUBISBh9exlDNEUAXIgpaUtCLw8Lqv8PCZfV8WMhTphKmh4VF
pXIoVuyZxPyiW3z3D28CUQVFXFOABWgXpJ6FCBH4BAS5mu5g35P14mqeLoaymAYoYs00bdfwHamK
Nc9zsYXdAFkHlK8f5k1Wa6r1yDbNEwxuGFnYYkpWdJ+1okRUdmG9H0NLKGLRVq9qHyrgq6oYxSTT
sscxKethUnZkJmFH916SSa0QK+mUdTwaSac9ZSSyQ8tPwlX5ypmxkEDzeovWfTK+XsJAolkGNjy7
RTTTszTsmDuiGeIRjyEaPhbRRhjaYSBTES1TES1TES1TES1TES1TES1TES0bQjR8UqL5pu4bAbLP
ADTZFUFUt8Mp0CZe86PQlvegLT822kzh5EnQ1gq2EnJ5x7eRkNtTHgYs0zEM4V8LWLYhXkRuG1gm
9scAyz0WsEYY2nV5rgJWrgJWrgJWrgJWrgJWrgJWrgJWPgRY7jmAdejedxpgyVoXI3MfI78IukgP
usjRb2X2ydHVCrsSYqTj5UiI7SkPhJhriDJtQczSTU2yfccwy/PGMMw7FsNGGNo1PlExjKgYRlQM
IyqGERXDiIphRMUwMoRh3jkYduimd2qGyaKXc/YP06yjtmNayFHdet8FFu0BFj0ysCxDxOFswGrF
WIku2vF3JLr2lH/6R6bvu67n4H3ama7uYs9vX9l08aMS219xZ7qaYbljcOcfC3cjDO0YQVW4oyrc
URXuqAp3VIU7qsIdVeGODsGdfw7cHbonng93smWCqO6VY4EvEvc2GWpxjYjq0vv9j72PMjys+FcZ
Ynm6fBduP6gw0V53hfxe8g2bGo2RHyR+NhDyRGxdRNKOFiXsoDRTSnOllCil9FvpJhTi31JW/TA4
mLoCDjL4fWxoFrDGbAzRW0i2u3ew09uL3QXtA8RlAfKCX59x73Dbd+aLVvv/UEsDBBQAAAAIAFul
cjh1OByowgMAAL4OAAAiABUAb3AuMTEubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQAD
TSngR00p4EdVeAQA6ANkANVWW2/bNhR+9684MFBgAzaZulsqDHhJEMBYjBb1gD4URcBSR44WidRI
qo3360dKdmM7spIASbf5xeQ5/Hjun7i4vIBPFS345xQU6gXPxUpLpBVkWKIuBH8vyoJtZkKuHVpT
doNO2TDk6BQ8wzvnd8T6HS83V1Tpc1FVhb44AM4D36Mkj9ho8RFIv60UskL2WFBaSHQuVxeFRGbW
m/lEV/XkS6AmuSwmWZPnE1G3fgBttOjsz7RsECqUa3zE9yuxPttoXBV/4/L++DzGkCYZRt0dKwPL
mhL7HOyuORecNVIi18sDwDzK/YDG2RQkrc6MsyhbU2czN3IIVPSuE+KFYGr2q7svsTnEP1BWO8Vl
gWV2hXytb2YuMT9ojc+uaZCyIIncGK5pbpahG/lmuU5Z6AWRWd2kzCNWVBjRNCZm9WfKopBMzerW
rDzXHiutrAVUKfNd4o8APvy2TIGLb5CXjbqBOTQKs63/BkTLUrB2C1oW6zXKdnNYaejAtuTryuTI
eMwhE2xli7vqkb3Lc9MdM9Lh2ty0Fe22bWIOJFvYVsabqoXEfuLbjUmowXSZJMeeda3zBXOD38b4
ivkcdRZqoXTB1wqo2uUEbPz7no9GrBQKd7Gl4EFelKhAi62fZnESDCDKzNTOdpupR5z4kekXjt8u
LRSzVh76SeK5vk27mti6/RL4oRNPY3twYi6Y+Z7jhm9Giz2KsL1g2pvd1qIwlsdbF9S1R8bwySU7
nxS8hUJ18wgzyGmp8PMr3dQSFcLYpMHJeTU+rZR/nVbW8u60UhdqSFmcVnI55FA2YDPP9PiwX6+W
71PTBjxraUalsJelnpMAJX7FEmKHhFEytR0TO1NilradngCMHM8LYjcJLTRyEhITEscpTE+Az5er
rq4tb/botgOXvuKQ2WFIWTsFffa5gMrOeuuhghp5Zkbxbeu1RN1Ifgi75z6qoR3JR8lN9JCbeGFy
i/yQ/LfIbS/vgzQnDmJ4Js0dgcGUrBJfTXD22zhTtMTuO8w2fTq9qfGIGoNw6sbRA2oMAjcJpske
NYYkciJDlt+pkTg+mT6LG90X48Zn3HRPKGKIG8UQN4ohbhRD3CiGuFEMcaMY4kbxJG50/xVuTP4X
3GhnyWjtEL0USzLzGLQFoCWwtiF/+vnoxa+p1N91oG6L+iPdvdaVGbsFt4/xB0TWIV79tft4cmyU
asOZPemwXJ3UiofabRDmr7Zd/MRpd4em3eatb9i7A6q7N0P2AfOd+QMi6R2uwwP7EWSCo33wt0Ee
Rbf7Nv7w5v0HUEsDBBQAAAAIAFulcjhAf+Qp3wEAAJAEAAAiABUAb3AuMTIubHVjaW4uaW5kZXh3
cml0ZXIuaW5mb3N0cmVhbVVUCQADTSngR00p4EdVeAQA6ANkAMVTTYvbMBC991fo2B5qy/FHEoMh
ZEMgNMsWXNhDKYtWHtnq6sNIMt3011eyN9t6MfTW+vT8Zp5m9GZ0Oh7QV0m4+lYiC+6kmK6dASJR
AwIc1+qzFpxeKm3aiPSEdhCJgYKCiKsGnqNPAP2dEpczse5GS8ndYSbcZemKYFbQd6d7hJdrlajh
ZqGCddpAdKwP3AD1+LKLnezjx8zGzPC4GRiLdT/2gcjg9FS/cmYAJMG08Jfez7rdXxzU/Cfc/k7f
rSEn2waK6Yzay5pBwFKD0zE3WtHBGFDudibYFSzNyLrZIEPk3jcLZiy1r5IiwkiS54mEg6a2+pj8
yQQP4QsYeQ0cOYjmDKp1XZVg/6GxePVAspJm2yJZowfCPMyTIvWwLWm+ygqPupKucKC4pzZr7NH3
khY53nj05NEqCWkicKNAljRNRoUq6TrdBqR9NM3xfIhK/0BMDLZDxCEqtIV5HE3RMO1WensqNQiB
Gk3rMNh6ibxjzK9GhSflaAwjwsLL/2iLnSZ8zRh11zQ1yFGEA/JmesXkIn7b2rQ2j8C8+uUW/9tL
SrwTjCsiEB1X+f2HN6/GEeNeY8g+8f6eXDfe+t06qbDQC7cNqa/CUA3RjqgWLOpBNVy1c8F1nuW/
9uQXUEsDBBQAAAAIAFulcjgUmB3Y9wQAAIIYAAAiABUAb3AuMTMubHVjaW4uaW5kZXh3cml0ZXIu
aW5mb3N0cmVhbVVUCQADTSngR00p4EdVeAQA6ANkAM1Y30/jOBB+718x6umku4dL8ztNVpU4QEjo
qHa1XWkfEELZxGmzJHax3Vu4v/7GTkpbSEKCWFhecMYznvF45vPnnp+dwmUZ5/QqAkHkOc3YQnIS
l5CSgsic0U+syJP7GeNLI17HyYoYxSYhlBg5Tcmd8Q8h64+0uL+IhTxhZZnL0wPDI9exYzPzk9H5
VzCbfUWQ5rzBg5CME+NscZpzkuD4/mgiy/XkmysmGc8n6SbLJmyt44B4I1nlfyb5hkBJ+JI8E/sF
Wx7fS7LI/yPznfpRQLw4TIlfrbFAs3RTkKYAq2VOGE02nBMq5wcGR37muHGQToHH5TEGS7h2dTyz
fMOEMr6rhOSUJWL2l7UvUTkkXwgvtxNnOSnSC0KXcjWzTPwD7Xx2HbtR4oa+FcB1nOHQs3wHh8so
8WzXx9EqSmxTiXIUTQMTR9+jxPfMKY5ucGRbSq1QMm1QRoljaQsaJYETqhHDWcczRwCf/55HQNkP
yIqNWMERbARJ6z05FsRFwZLdp+T5ckm4FhxWAFQLqFJYlpg73MkaUpYs1KEvGmQfswyrZmZWdjpn
+qSrT52wA0ltVsvoptQmjhNY6gMTjTZVhs3HkVUl9Y1kaF/v843zPKq8rpmQOV0KiMU2T6Bysr+b
0SgpmCDb/UZgQ5YXRIBkdew4aDUGYEWKZ6oqE89oaobh1AVKfpwpU5Jquef4luO46ijEBM/S90LD
MbXaBM1njmVMQ/f30fkemqgSwU5IbtYsR8fjOgJxbVtjuLTsbUgCPkAuqtaFGWRxIcjVT1pJYxqB
MWbByGg5bp/kt+2Ta37XPilz0TWZt09S3hVQ2uEzS+X4sIQv5p8irAKaakQSEexlqUEToCD/kgIC
w/T8cKoKJjCmJg5VNfUw9A3bdgMr9JSpb4RmYJpBgG7NbmvA5dHCsiOI0xTkKhcV6h5qqzktVspr
QlPsie3OflYLqlbBWQUXl5LJuABr6/rqMLqT+aIq0obI9VwNKNEbg8huB40xJYyKPCW8zuwb5BG7
l+HnbWM4WErxhiYrBSpYCMgLUri80Pcs6LOGL5XwN7Mp/4AnAKXCa70dsT2rD/pkOJEbTmuzlkUf
FqorTU/g9SRjLp+z3J1+bT57y3TCu3CBJ+XVmh2VETyKdyixzpDwqqwaG52avr7cDgtrx3JiCfqS
fZbC8AYKw1+ZwthB6P76FGavPDrJDD/Y10Ay88j4kMx4eJlNQ/8xmXG9wLHccEdmXNPAgHdkxjSc
wB5EZpxXIzMDVtoxAN5FZngXmeFdZIZ3kRneRWZ4F5nhXWSG9yIzzvuQGetVyEwjXWgFqkRXwLyC
q18IQPfiqoHrbaNT1dN5Hbc3mdujx1qX3ufdSSbGL6F7t9FJdeVgvWOeFHK9lNC8fxpu98Cnn/oD
HPVS3wFUL/UdZPVUz4eo72Ct31bTQbHvQV+rvqajdff98SeIm3z9Nc7lTJ8aCLzgzqn6UUvMvNAO
HNuz+3XyMxTyFtu4sWQ7i0/c00QZq04ZoM/76Ndh47+1yuCLW8HuaAVFu/p1QmUiKkcpST6TbBvh
Qdv1rIYXmCD61oDUU301TD0fpv59mPrNMPVimHo5TJ0OU2f7F0G7PkNxXBS6yJ+t7sanqFri6Qsl
UYsiPcKHzBYWHv3W3gIZ+lGxjxhPHhFK9cFQecMeiuneZfToZ5r6ldR18z2Bkf8BUEsDBBQAAAAI
AFulcji/6NSHfAQAAF4XAAAiABUAb3AuMTQubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVU
CQADTSngR00p4EdVeAQA6ANkAM2YbW/bNhDH3/tTEAEGbMAm6/mpMJAlQYBgMVrUA/qiKAJVOjlC
JVLlgxrv04+U7FlyZdYqnGR5E4qnP3l3vPtZ0t3tDfpYJQX+FCMG/A7nZMUpJBXKoAReEPyOlEW6
WRC6NpI6SR/BKEUKGIwCZ/Bk/AVQv8Xl5j5h/JpUVcFvBsLLALwkysCf3X1A5vheMcoKOrID44SC
cbu6KSikcry5nPOqnn922TynxTwTeT4ndesHSgQn3f4LTgWgCugafuD7PVlfbTisin9gub/90s8d
NwmysFtjJWWZKGHMwW6Za4JTQSlgvhwILv0oD0LILUST6ko6C7Td6mph+YaJquSpm4QbkrLFH1Z/
RuUQ/gZa7Qy3BZTZPeA1f1xYpvxD7eaLh8SNUzfyrQA9JLkcepbvyOHXOPXM0PTlkMapHUTuDKH3
fy5jhMk3lJeCPaJLJBhkW38sHyVlSdL2EnFarNdA24vhyaFOrI5wXcmYpQcMZSRdqcNajcy9zXN5
2guz07WxtifUXbaBDma2su0cFlUrCT3XVRcyQVLTZcY89Kwrhc+QS/02xgn5mXWKmjBe4DVDMoZt
jEjF0/dkNktLwmDna4xslBclMMTJdl85OCpGiJSZPAtVDTK/QeT48jwxfLtVUsjaec9yXNMKVRrZ
XJ3D74HrGabjqBvncoGFYxpeYP0yu+v1sDpcWX/pl5oUcuuLrQ/swbYv0Edv5xNDb1DBun5BC5Qn
JYNPz7NQyxFAFzILRo6ri+NG+vW4saZPx428YDpjcdyIqc6hTLNnnvGLYfndL9/Fsgpw1lKAxWif
pJEbESqhgRIFhun5UajqJTBkPUZhjJxThL5h225gRZ6S+kZkBqYbqkIc114vV92htlAbsW27J57Q
Maqy47Qt6bH1MEGVasR2R4ZqwJnsqzetFxS4oHgKkgzTDaZhiY9giZ8bS0HoPy+WeknWAooPfJoI
qAPxqYAKVPQ9QEWOYSlM9wAVuVMA5Z8LUBMW2nc11wGK6wDFdYDiOkBxHaC4DlBcByh+CqD8FwWU
Zbue6x8XPy+hVJHLkaru/yOrxAirxLlZ5YbmS7Gql24ttcTAu4nUOhCfSC3bteVDVI9ajmfYfjSg
luVMoVZwLmpNWGjf6kJHLaGjltBRS+ioJXTUEjpqCR21xCnUCl6FWu4rU0uVuxypOv9Jfg1ke4rJ
3/626X6IqGYEUc2ZEeVaTvjyiOrlVgurZuDnRFgdiJE8loo0MgD1Yr9giczQpoax+e7jQro5AJxp
2oFphoeAs33XtsygBzg5Ydje/r3R9g3Hm8K38Fx8m7DQHgqNjm+Njm+Njm+Njm+Njm+Njm+Njm/N
KXwLX4Vvx15WX55vqlekWjXJuUiXykczleOkRGlbc7/+dvA5kieU/2dD7EtRf0h2nxKZbKs7rL4U
fgejTjH5U9zPJUBFwjY4VWojzdlRK9dahdbafG/dBin/1aqQT+x3R9PvKq1j7d7dwLplM0jfQ77b
fUCS0fYa3tAPICMY1NN5G+NBcLufv2ep338BUEsDBBQAAAAIAFulcjg+QcdsWQYAAPUnAAAiABUA
b3AuMTUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADTSngR00p4EdVeAQA6ANkANWa
W2+cOBSA3/MrrKxW2pV2CeZiLtVI2TaKFG2iVp1KfYiqigEzQeUyxUwK8+v32DCBmYAHspM07UuN
fY59fC6fDZOrywt0m3hR+sVFjBZXaZjNi5x6CQpoTIsoSz9kceRXsyxfKt7K8++oEq99mlIlSgNa
Kv9SunqfxtW1x4p3WZJExcWO4rmha54aEv/k6jNS+9dyURDlPSuwIsupcjm/iHLqQ7s6PyuS1dnC
YGdhHp0F6zA8y1bCDuSti6xef1bka4oSmi/pAduvs+XbqqDzaENvWvFzi5qeE1BSzzEHtWAd0z4D
62neZam/znOaFjc7Cuck1A3PCmyUe8lbMJbmYqm3M0wUFSVeWXfSi8xns79xt4f7kH6iebIduIxo
HFzTdFnczbAK/5BYfPbVM1zfcAi20FcvhKaJiQ7N765vqrZKoJm7vmY5BrSY69umwVsFtCybj66h
ZdgqtO5BG+v2CUIf/7lxUZr9QGG8ZnfoHK0ZDRq7MUFeHGd++1jk0XJJc9GxG2VUT8DDvUzAP2Dt
DxRk/pwHdt7T9z4MITNmaq0n/CKiWT8Kp+z0NGpNX7pOhIpp6Sp/AGeCTu1Fdd+yOm0WNAT9Zp/P
4MuTeuZVxoooXTLksa0vEN931+KTEz/OGN3uyUUaCqOYMlRkjX3QGFRGKIsDiBvPMIiD5egEciSl
Py65Kg1EP0jqum1yd7MzHq+/VMNSHNPigmcwwUw3FGz8fnLVwQLPA0hp/9sqi2Dl08YE9lXTT9Gt
szWJoTcoYnUJohkKvZjRL88zkUATRafgBCVMk9Phwfz78OAqL4cHi4jJBqPhwTSXGRRI1gyD4nQ3
S69vPriQBGkgwMJc1DqpRxChmN7TGFmKahLH5uliKZC2ju0ifYwiUTTNsLBjclWiOFgzTIO4iAwo
v7uZ11EVoOwZa6rMfYbK4hUAyjz1+9ZNM5TwwhaWMbSiaQD190ZYm9NinacHMKfjHcxZ9jTMlT2Y
K4+MOYKJ8zow1wmGFHjlju0TgbenvAc8W3Uc23gEPBubpu10gIexpmhQHB3gmQ6ZQjysHgt5U2Zq
QVHKmFfKmFfKmFfKmFfKmFfKmFfKmFeOYV7HSy8DPctwdBdZrxp6vB5cXxTCC+BPM6fRr+qhX3Xs
S55j6a+Nfp2oSDlY7exiIgf3lBEENMnuYXv8DWHGvJjWbyN+1TdWVCva159kQQRPed8YZE9fNyu8
vBjJYaIbmo13OIwVgo2Ww7piYmsSh/HRODxhphZelYzDlYzDlYzDlYzDlYzDlYzDlYzD1SgO45/C
YfsX4TCvTOjjJfksRDas/0PkTQ+RN0cnsv2KidyJj5TNm539TGTznvI+GzWiE/vxSzk2iaZ2X8od
SyGa02WjQ+xJbNSOxsYJM7VA2cjYuJGxcSNj40bGxo2MjRsZGzcyNm5GsVH7KWwc+hzwetnIa4S3
7CdTcketZaVXIFGph0i4UB+TsNN3HBJiyyC/Agk70ZAxcaHu7GwaE/eVd5hI4P3cMh5dFzHcIi1M
ukjk10WzfW3XiGKa2iQk6kdD4oSZHjiyUCVI5IODSITBYSTC4DASxeAQEmFwGIncoEEkisHDSBxF
tqMj8dDXAgTTgwYGUS8IUHEXsT5K8jHRzYUbDG139mxFyIvF9QU8bous8GKEt2t/+fUA3+6m1z4/
S1kU0Lxx80s4FWo5g0fcaw8klrdO/TuOGEiLnHoBur0Wv/MhEXn0qe78Te0LxoSza2DSh4mavBMD
cHKJt+wDmm0qNOqzF/UnerYfI5+cbIOu4u6BuPyMhJPaBOdoXfOmrRu6OPoOqfni4LmplV/TfjqG
NXemFzaPH1vSYhk+3Y0Rh/vg1N2f8/xwey6PEC+niVfTxDeTxOF8HyH+El5c4M6laZz4wzVqlHh7
sRol3l61RopHU8Tb69i4rQaTbO9c2QblxVnTVO8ffyL2LVp99qJiJqKGGFzNr1L+FzNsRnQDq6bj
jCPB6ONhgaHJ+TfmwGNV6nMVnq0j7YD/VtwlT85tQ5Lb/BVwXGrXKqxeKKD+RxpuLdypo5HhfYIK
4HgaQtg08WKa+Hqa+H0jLo95kEG3F8ciUQ5mSO/li0/x+IuDzyeFdx04rLe1svfXbQN1JD4SdMvo
0UcBLvqgyFeDPPTSzn1y7zWl+eox5p7f1tZ/UEsDBBQAAAAIAFulcjjHjmFHHgkAAEFMAAAiABUA
b3AuMTYubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQADTSngR00p4EdVeAQA6ANkANWc
/2+jOBbAf+9fYfV00p10SzE2/pJVpN7MaKRqW+1qu9L+MBpVBJwWDYEskN3p/fVnQ1IgAy+4S5LO
/FJi+5ln+72P/Ww8Nx8/oE+rIE4/z1Chypt0md2XuQpWKFKJKuMs/SVL4vB5nuWPTrAOwiflJJtQ
pcqJ00h9dX5Sav1zmjzfBkX5Plut4vJDR/CaEi9wlyy8uPkduf3vmqEoznveUJRZrpyP9x/iXIX6
+fn6qlytrxa0uFrm8VW0WS6vsnWlBwo2ZVa/f17mG4VWKn9UB3S/zR7fPZfqPv6fumuKX3PlBzJS
rK7jXotFm0T1KVhX8z5Lw02eq7S86whcsyWhAY8EyoPVO62syqtXvZtj5rhoFXytE9WHLCzmP+B2
iulD9ZvKV7uMj7FKoluVPpZPc+zqf6h6+fwhoLOQSoY5egiW+tHHjOjHP2ah7wqXoYcF1o+CUHKB
0K//vZuhNPsLLZNN8YSu0aZQ0VYhzFCQJFlY/URlHj8+qrz60R06VAubMXxc6UbPHxYeirLw3ozW
fU/az8ulHu65W8tVja2GqP5ZtbSTshXbpqWbVSXiS+yZH7qHtEzdNe6+ZrUtLNRSy2/baNNBF7XI
OivKOH0sUFDsGolMg9qqXFyESVaonbIz5KFlnKgCldn2xfphUBihLIn0YBh70B3MJWF6RFP110cj
qqIq3eeYCIZNPxZXZiD+4wrqSMJNwStdwZxQx/XoPy9uWl5sRldbYPhlncX61ZdbHYoHj16iT/5O
pwL9iOKi9hg0R8sgKdTn41RUkUShS90LzjJdXQ5n5n8MZ67zr8OZZVxAmfFwZppDCkXAO5dRedm1
v9u7X2baCtKo4kAxQ00n9RREKFF/qgRxx/WZFMZeuKMNUooZomMEmeN5lGPpG1HmSBcLT84QHpB9
f3dfD2qFtZ68rfvMbFzGmLZ+NDbdV2GaoZVxxeqVBVqrNNKO9WOlRq7KTZ4egBLBLSg5Lhd2YCI9
YCJTg4kJdmQwtXoZRBTpKGWJqD3hPUQJV0pBv0UU4dTtIIpIR9thG1GYYBtEsakQZVFR49cEQhSB
EEUgRBEIUQRCFIEQRSBEkTGIYudAlHceRBkj10/Guk8AK0yxHaxoD6zoxLBiLhUng1Wrv0Fs0Y56
ltjaEx6HLcYJcUkLWxhrwyYNtYjDfRto8amgZVFR4+kUghaFoEUhaFEIWhSCFoWgRSFo0THQ4qeF
lof1PDdD5NzUMtY+CyszPwq/OhGgg33LKNDv4Zc/9WKLn4VfrZ4HSeZ3FLUk2Z7wyBiRCNfl7QWY
7zrU7S7AmLBhmZiKZRYVNQDwIZb5EMt8iGU+xDIfYpkPscyHWOaPYZk4C8uGhM/AMmP5Oo0fi2p7
qzJhGUKyHqqxqakmPPesVGuNAcg31lHZkm97wiMDTMYI7vJNOISINt/0Us6Gb3IqvllU1ECBQXxj
EN8YxDcG8Y1BfGMQ3xjENzaGb/IsfBvaeTsr34wPGBHPPcn6zZZ0vId0fPLNMonfCOlaowEyj3eU
t2TenvDINZ3LqM/azKO+wwlrh6fSakmH3amYZ1NTQwoOQY9D0OMQ9DgEPQ5Bj0PQ4xD0+BjotXrp
lNQb2sx7I9Qz/mDKaUd4i/wTPfwTk6/05LFPMf/WuIAkFJ1mWJJwTxjpIV1lf+r2mYPteREkqj5E
D5/78srntepLX2VRrH/lfXnafvqSizLIy5EkZrrDeed4Q2JHO1tnoxBbncBiPBmKLWpq+CUgFAsI
xQJCsYBQLCAUCwjFAkKxGIXiofPQ46J4aIvyzaHYuKZJk0c6we1C2XOJHZRlD5Tl5JuK7K2E3wdG
CMSz7DTIEs97wiMXqh4VlHaCc1+PuN/5QEVIKzx6k+HRoqaGKRLCo4TwKCE8SgiPEsKjhPAoITzK
UXgcOos9Lh6Hdj3fMB6Nk5hy7CTRuzUogx5QBpN/g+eS7wKUrbECkRl0mmaJzD3hsbG9RqbY/6ZP
8k5sz62ISSYjpkVNDWYCiJgBRMwAImYAETOAiBlAxAwgYgajiDl0DnxcYg7to34XxDTeYurTbnKC
Mx5rdi562LmYPPL3+XfGztaogRRddBppSdE94SPG+IPfAvmcux0ie9p5RSfGZ3YxPp0MyRY1NRxb
QEheQEheQEheQEheQEheQEheQEhejELyKLJOjuRDu7xIV68lMJ2hIIpQ+RQXfZQ2eVWyKbxl365l
R/No43kmV0PpU5mVQYLw7t2fv+sJpmlYr6phlhZxpPJtj5+if7VbZ/pn2KuPtrFgk4ZPhjbaQnIV
ROjTbXW9CFVGgH6rE//h9o3LqLmzFhuo9KWirQlWGXpyrAh6QLKxiq34/KT9iezvQJ3Q7gZ7zfSU
HqJz2B6ok56qaxLontp+cnFILKymo7ta+C21p6XYdoV2YvXMZAb6zd+7WjVYdfuGUrjczdYjihO7
4tSuuG9XnNkV53bFhV1xaVc8sCu+GFP8JAYTtlaN44q/rCNHFW9WlqOKN2vNkcVjm+LNenRcUyMr
3Vtr1sHy1Qy7BdW//o2KL/H69yAu59WooULHJjepuZ5czDnxXc7pwYmlrutVk2JYPeKDrzCGWDyn
oRExhjtSJf1nbXrn1WbuA2ZuwuxxVl6LFPWLIhX+qpY7DTsuNXKkuyJwR0SZTg6SpOq9g912+CYp
LNqEPFiPOiHbmIeZZ5vKepeGpinH3cuOevZjosn3svEJDv1e/ArcQIk6WlluoOwJj/ywwZfS737Y
QM31vM6mx/jPav2p7m1aVtQwN4K2PCJoyyOCtjwiaMsjgrY8ImjLI4K2PKIJ722Ocv8Rex5CCkI8
dvrb5TsHMoZeLd9fffrWEWu4FejZybjbQSipHiipiaF0ipvkPT0KwqmtnSWaOqJ727SbL1+K8JWf
gbUIxz1XSLbPN+z5kngveONmThIN3DB3KBv9WYI/1f1Oy4oaIigIbgqCm4LgpiC4KQhuCoKbguCm
JrzfeTK4dYR/wI5r5Hy9rsFmZf4WoGicbRa+/mL7N3AMzVpVj0mQvIQoe/+D00D4UvGsHb3sEWyC
IOVQs1tBStQKUr7NVd/m9gYsBz2bAZ7dCk863jAuGPH7HalboN2A3kBjd9KwnesmtLf/A1BLAwQU
AAAACABbpXI43VEMF28HAAC0NwAAIgAVAG9wLjE3Lmx1Y2luLmluZGV4d3JpdGVyLmluZm9zdHJl
YW1VVAkAA00p4EdNKeBHVXgEAOgDZADdm19vnDgQwN/zKaycTrqT7gjmP1utlGujSFETtWoq9SGq
IgIGvGtgC2zb3Kc/G3YDbGGCW3aTXF9qbI89nhn/PODNxfkZukk8mn6eoYKUF2mYXZc58RIUEEZK
mqXvM0b9+3mWR4q38vyYKGztk5QoNA3Id+UtIat3Kbu/9IryTZYktDzrCJ7axPTcgFhHF5+Q2j/X
DAU075mhKLOcKOfXZzQnPi/fn56UyerkzihOwpyeBOswPMlWlR7IW5dZPf+8zNcEJSSPyCO6X2bR
6/uSXNN/yVXT/dQKdcOzA6ce45qLBWtG+hSsh3mTpf46z0laXnUETi03tB0SYpR7yWuuLMmrqV7P
saWoKPG+15XkLPOL+d+4XSNsSD6SPNk2nFPCgkuSRmU8xyr/h6rJ57eeMfMN18I2uvVCXjSxpfPi
l5lvqo5qods7zIuObvDaO78qir53AS+6WOUlMvMd6wihD/9czVCafUMhWxcxOkXrggQbbbGFPMYy
v3pEZU6jiOTVQ9evqBYWDo4SbpH57V2Igsy/Fq687ql7F4Y8FuZqLVdZovJf/ViZoVOzEdvUpeuk
ErFczRUP3HxcprabuqtZHSh3JOTymzVOZr2jerxVVpQ0jQrkFVsLILHatp5HRz7LCrJdyQxpKKSM
FKjMNlrxwqAwQhkLuKdEJHHr265u8VhIybdzIUqCqt40dNdxLGHk4kR46S9dNxUL66LjCR9grmuK
7uq/H1209r9wPY9df7nKKJ/6eKNDcatZx+jG2epUoFeIFvVeQ3MUeqwgn/czUMUggo65FZQwTY6H
G/Mvw42r/PtwY0kLqJEON6Y5pFAAzBkG5XE3OC+v3s94FKRBRZBihhoj9XREiJGvhCFbwTxcdV0E
jK04lijPkDlG1FI0zbCxawpZS3FV03Qte4b0AeE3V9e1Xysm9rRtttdssi0lQn/mVzHfN1uaoUTs
40qfAq1IGvCN96rSMSflOk9liKZoDpajWtRDtWhiqtmqaj4l1VouAPkWdTSW5NuO8Di+aYZu60aL
b4aqKratNXzDPMBNGb65U/FNYqAGChHEtwjiWwTxLYL4FkF8iyC+RRDfojF8c5+Ib8Yz5JvYBDO/
iv69kE7HHdK5thzp4h7SxZOTzlCfB+lazgCZF3d0l2TejvAO8xzVdR3jB+bpqqpz/Vo5nasptu62
mWfqWIZ53AATQU9mpAYVMUS9GKJeDFEvhqgXQ9SLIerFEPXiMdRrWemw2BsSfh7YEztClAz1EKme
bhhyAKQ9AKSTAxAbzw2ALbeAKKSdVUiicEcYcY8m2Ve+PPG9Y154jNTfVvz7vrbyfkX66pMsoPwp
72vj4dNXXZReXo5MP7Fj2LrdTj+xI9jboFhVHFvq9RrjyVAsMVLDLwqhmEIophCKKYRiCqGYQiim
EIrpKBTjJ0Kx9UJQLPamKPFNeYCsVDddOSgveqC8mBrK2H12WWmvg0A8LzrrkcTzjvC4TFWzHAc7
bTxyHroabmeqfO1SeNQmw6PESA1TFhAeFxAeFxAeFxAeFxAeFxAeFxAeF6PwqD0RHu0Xh0exS3hJ
bI8DZK+GpsmBctkDyuXUoOQmfgmgbLkKROayszJJZO4Ij8woDezi9su9qfOXe2y2M0oLO1LI1CdD
psRIDWeWEDKXEDKXEDKXEDKXEDKXEDKXEDKXo5A5dHeyb2QO3RW9BGSK/cJL5i7I9pNlSsOT9cCT
TX53bb+ILLPXaSBGWWeNkhjdER6XeWJbbK7Oi7muaKrRxqhtSd0LYWMyjEqM1LCHQRhlEEYZhFEG
YZRBGGUQRhmEUTYKo0NXNPvG6NCV1MvCqNg5Qtb+6Wy0I9Zg1StRtX8fZWbSw8xkYmZyI+svlZkt
D4H0TDqrlaTnjnCXnhpPNtX6srxNT91wbM3q0NPVFB03t+qao6hyOag5GTwlRmqIk0DwTCB4JhA8
EwieCQTPBIJnAsEzGQXPUQTcAzwfu9lCqJLA5gx5QYDKmBZ9PBVtVbXovIHTdm172oRis1RM0NFN
mZUeQ3g78+f/x0HQrLBXZz9LCxqQfGP4/ZuZ7+6MP6a92vBA89apHwvm8DDJiRegm8vq57aoigT0
sa78Te1zj8QJNzDow0CbOKwa+PlWXQ89ItkEx0Z8fkBrool/Ebyn4Bs0njAY99ThAxDUiJ+0NRUs
1dLqs/ExMb86mq5q4eezmpZamzzroMqJQw3cOMNnvzXi6B8cuv3DWz/cntojukdy3WO57lSu+0Ku
+1KuO5PrnozpfhCXpq38blz3h4xvVPcmBxzVvckKR3anMt2bzHHcUgMp3VvZ5WD/6hDcgOSPP1Gx
pKtPHi3nlddQwV8iLlLxFzXFnKeUnJeuNg5Kv3pypZw7As9jzufiPvWFiIjhkdrx/1bCUD8d8TYQ
8eK9dlzA1yJFPVFA/A8k3GrY2V0jnf4TIvy8kCMF2XSHzRxkvNpjrPLNo07pTc/EED9+ufDFoPz9
iB/f26Dd+TO0gYCuPja04/mHjwui64OgmI273ktbGefOi83m68kvvBs8BPl/UEsDBBQAAAAIAFul
cjhjqGoZPgoAAMBdAAAiABUAb3AuMTgubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUCQAD
TSngR00p4EdVeAQA6ANkAN2cbW+juBaAv/dXWL260r3SXYptXrOK1J0ZjVRtq11tV9oPo1FFwWnR
JkB4SdL8+mtDUiCFU3tKUrojjYZgH3Psc86DsX3m6usX9G3hhdH3CcpYfhXN4ts8Zd4CBWzO8jCO
fo/nof80jdMHzUs8/5Fp88JnEdPCKGAb7VfGkt+i+dO1l+Wf48UizL+0BC8NSjx9ZvlnV38hvftZ
ExSEaccTsjxOmfb19kuYMp9fP11e5Ivk4t7ILmZpeBEUs9lFnJR6IK/I4+r50zwtGFqw9IG9ovt1
/PDpKWe34Zbd1NUvbWZ6bsCsqo1bLhYUc9alYNXM5zjyizRlUX7TEri0ZtTw7MBBqbf4xJVlafmo
T1NsaTpaeJvqJvsS+9n0J9y8I8aQ/cnSxb7ga8jmwTWLHvLHKdb5H1Q+fHrnGRPfcC1soztvxi9N
bFF+uZz4pu7oFrq7x/zSoQa/e++Xl6LufTTxLd0i9AyhP365maAoXqPZvMge0SUqMhbs1MQW8ubz
2K9/5mn48MDS8kbbqKhqQFj3YcGHY3p3H6Mg9m+FHW877v02m3FHmOqVXDkMpfGqn+UYtO7sxHb3
omJRiti6ScQPPnZcpho0/VCzykvu2YzL7/r59qE7qxpK4iwPo4cMedm+60h0s6ng2Zk/jzO278IE
ETQL5yxDebxTh1/0CiMUzwNuJuE/fNhtl1rcAyK2/ipEWVDeNwlxHIeI0c0uhHn+Z2BDw7YlKl7w
BqYUa5ha/z67akS9sDv3WP/vJA75o893OmR3xD5H3+y9Thn6GYVZFWFoimbePGPfj9NQSR6Gzvko
aLNocd5fmC77C5N001+YhxlUGPYXRimkUAA8cxbk522vvL75fcK9IApKbmQTVA9SR0WE5mzF5sjW
MPdTSoXD2JpjiesJsmRELY0Qw8auKWQtzXFcx7CdCcI9wp9vbiu7liTsKNvF1eTtsSR8fuKXzt71
mChGCxG5pSIZSlgU8Ij7uVQuZXmRRq9wjOImx7CpyLGkg2PJ0ByzdPddONYYe5BoSUtVRaIdCB8Q
zdFd7osviIZt3hWzQTTTIJptGTXRdP7TVCGaMxTRFBqqMZBAREsgoiUQ0RKIaAlEtAQiWgIRLZEh
mnNiorncoQ0qfHFERBPez6+E24+RbcsOti2HZht1rXdmW8MKIOWWLaUVKXcgLEk5xzUMqzlvcw3N
4FZtUM6xsQrl3KEop9BQjYYlRLklRLklRLklRLklRLklRLklRLmlDOXcd6IcHSflRBzwKxEAR+Fd
+5tUmXdpB+/SgXlnuRiPhncNe4DkS1vqK5LvQFjuixUblDt2k3y6o7m22SSfRZS+WLE+FPpUWqqB
kULsSyH2pRD7Uoh9KcS+FGJfCrEvlWFfY5ROCz9j7PATQcErimg4AQaJqUbBrIOC2dAUNJz3WZmT
NgzIw6zVEUUeHgjL8VCn1DVpg4fU1DWi1zwkrsCjEg/xYDxUaKmGSAbxMIN4mEE8zCAeZhAPM4iH
GcTDTIqHfYtpx+ah+XF4KMKDX4m4OAoZ+ZSiSUZLcYKYd6AxHxqNYrjGjMaGjUBI5q0uKULyQPjw
c5lY1HI6Jo0E2/gAkqZBmpNGU23OSAZjpEJLNVhyiJE5xMgcYmQOMTKHGJlDjMwhRuZSjOxbnjs2
I/uER81IESf8SgTIKeaRqrQsOmhZDP45bY97ItlpLZCbRatzitw8EJacXFqmYbW2hw2qEeo2ucmH
RwmcdDBwKrRU06aAwFlA4CwgcBYQOAsInAUEzgICZyEFzr4Vv2ODs29n+oOAU4SMKLWPNOF8I0JX
HQhdDb0Dg9333l1+k91AmK5a3VSE6YGw5Fkb3TTN1soln4RiMaevYeq6thJMjcFgqtBSTaAVBNMV
BNMVBNMVBNMVBNMVBNMVBNOVFEz7VhCPDdO+TfEPB1MRPFxCRM0YsbruwOp68MOHlvmBsdqwIAjY
davDioA9EJacrbrUMNwWYA2N/20ClqpNVs3B+KrQUg2lNcTXNcTXNcTXNcTXNcTXNcTXNcTXtRRf
+1Ykj83Xvu34D8xXEUWiPR4+JzhCRImjRtpNB2k3g09gjfEcIRrIliBzN62uKzL3QFjuIBKxiEFb
B5EIFaeEmwfIqa62/WQNBl2FlmpSbSDobiDobiDobiDobiDobiDobiDobqSgK0XOI0D3tXMAiDfP
JbA1QV4QoPwxzLo4LMrK26LyjmP7vh0tDkW8iHscMN/yOPfmCO+f/f0f+Aqpu9vZAT+OsjBg6c4O
pxh1Hu4x//nUqQ/3PK+I/EdBIe43KfMC9O26zMBCpWugP6ub/9K7rCX1dqzEehp9bmjnmGUBf/3l
Xpq/Jln7yk58etLxREOliZ3QG3vHUowfN9x7eCSoE38ZV9SwdcOsshVeE/PLl9dNJTym/jQU283M
TqyeePWB0fS2HLPeppupWv5s/26XqJ6oVV+qVU/Vqmdq1XO16oVa9ZVa9bVa9Y1M9ZM4zFNjjilX
/XnWKVW9nodKVa9nppLVQ5Xq9exVrquBku6NGW5v/fK9uwPVf/6Lsr/D5C8vzKel1VDGv2SuIpHX
LZabXGxauikHvQFflU8CcPxdIDM7yJ4iX4gId5ZUlP+TiDH7Yed3AOcXH91yvl+JZNWDAub/wWZ7
DVuBJmn/tgg8EEHMb3vzeTl6rw7b64m2sCj82STfWOc0UnRFaR1ceXVm27E6sx38hAZ9t/Nsz9EG
LqdsW7oqLqccCEtmN4i6tJXdUFmvmb3qENnlFGeo7FXFhmo+b6HFlC20mLKFFlO20GLKFlpM2UKL
KVtoMWV75OxVqVT+F/n4pmmZdCz5+PuwEu4vJvH0JOfPVOnm6y/p1rg3VGr++50/6zADxDne96bW
apw7FJbN4tJdp3kWwrQMzcGt/FULS+/VOUPlryo29AwHXwc4Jwp7OccL+znHC/s5Vxb2cY4X9nNO
KNTLubLwmPmrP8Q516SEOmPJ0n8ZYCIQxELHaY6LKRMPdxAPD36uwdbHQ7yGQUD24Zb+iuw7EJY9
psDrGq1jCuKkSutQLVVj3zAZrKot1cjAEP0wRD8M0Q9D9MMQ/TBEPwzRDx87g/VN+BtH+j4UbSIq
RLGtjxKEpAOEZGgQGuMEYcM0IBJJqyeKSDwQlv3spcR1mtNBbGs6sVufvYZ0gpYzWBKraks1RwiE
RAIhkUBIJBASCYREAiGRQEgkx05ifRMSx5HULxd3Ij74lfHjcGyJ1Yj0clRG6av8ox38owPzz9BH
jr+GGUAQ0maXFDnYlm1hkIjjLy/PUvFbmDSPr+ou1upZIXY0S5fODnAGy1FVbanmBoUQSCEEUgiB
FEIghRBIIQRSCIH02DmqR0FgS/gnrOlCztRsottYH81/4qkasyK4+JP04Rjqi20hbklv/rxH2K7U
t39YYq+5fXig09F2Cd84Vo1NxG1jE/FFqa+DpRgsJWApfVnauVX5Kp9ciE+NnclWTMvtQzrdOGhX
aPagc49xf0xx94p+76D5P1BLAwQUAAAACABbpXI40zhGgMgKAABAZAAAIgAVAG9wLjE5Lmx1Y2lu
LmluZGV4d3JpdGVyLmluZm9zdHJlYW1VVAkAA04p4EdNKeBHVXgEAOgDZADtnFtv2zgWgN/zK4gO
BtgFdhVRF5LywEC2LQoU22AGkwHmoSgCWqJseWTJI8mdZn79krJTSY50TCay4wSbl9DkORRv59Ph
Rfz44T36vOJJ9mWCSlF9zOL8pioEX6FIpKJK8uyXPE3Cu2lezC2+5uFCWOkmFJmwkiwS36z/CrH+
OUvvPvGyepevVkn1vqN45bkOt2MSXnz8Hdn9z5qgKCl6nlBWeSGsDzfvk0KEMnx3dVmt1pczr7yM
i+Qy2sTxZb6uy4H4psq3z59WxUaglSjm4kDZP+Xzt3eVuEn+FteN+BUVPg8iQbZ53Ei1aJOKvgJu
s3mXZ+GmKERWXXcUrkjsepxGDBV89VYWVhT1o95OMbFstOLftpHifR6W03/jdoxqQ/GbKFb3CR8S
kUafRDavFlNsyz9UP3x6y71J6AUEU3TLYxn0MXFl8M9J6NvMJuh2hmWQuZ6MnYV1UMnOsklIbOKo
2LtJSG3P92XwbxkbuDIytGUkoY4MYZVMbRlyZMirQ658km1fIPTrf64nKMv/QnG6KRfoCm1KEe2q
6GLE0zQPm59VkcznoqgjugMCbTNQI2O+kk05vQ09FOXhjRoDNz1xP8exHERTe6tXN2Hd8dufdft1
YnZqu7hss6pVqOMR9UO2u9TZNri9X7LtCJuJWOrv6vm8zX6xLcQ6L6skm5eIl/fNhlQTtSt3cRGm
eSnuqz9BDoqTVJSoyndVkYFBZYTyNJJdrMat7DJmBwGTIuKvD0pVRHW8b8saEUf1THmpuvZfvo0t
l2EleCkzmLq2hW3/x4uPLdqoMSMtJfxjnSfy0W92ZShvneAN+ozd+0KV6CeUlFvTRlMU87QUX46U
U808gd7IdrDibPVmOLH4czhxXXwbTqySEkpMhhOzAipQBDwzjqo33TH96fqXiRwHWVQTq5ygViv1
SCKUiq8iRdTCcpjLcSrHDLUYUeEJojqqxHIcj+LAV7rEYoHvOi6bIDKg/O76ZtuzNYR70nZmOXle
U1QmI6OUrfQVMcvRSkGjrkSJ1iKLpMH+VFesENWmyA4gFJMOQgPPDKF+D0L9kRFKaiS8MIS2+g2E
qd+ppiFM95SR7PJV/lXWX73LpyVPxdZvCO/60qq7tdgHMA1cIgv/AMCOE8gGawDs+dQKZBPcA9gJ
rAAb8dcbjb8GOTXQ8iH++hB/fYi/PsRfH+KvD/HXh/jra/HXeyb+Dim/OP4qe1Oq0tBOQGJsB2Yk
Jj0kJmM7s3bw8pzZ3h4EmUw6FTZk8p6yJl9JIIna5iuhFvU7/i2jRnz1R+OrQU4NlAjEVwLxlUB8
JRBfCcRXAvGVQHwlWnz1n4mv7PXxVVmRUghO4vNixzcjLe0hLR3b52XKuXoFpG31Jchc2qm6IXP3
lLWY6wVUFrnDXI9ZksNtn5ZgZgRdMhp0DXJqSEUh6FIIuhSCLoWgSyHoUgi6FIIu1YLu0OT+2NAN
XjN0lUHJOGVJR8Fvd9UWy7Ia4Zf14JeN7eh6Hn5l+G31Kghi1mkEQxDvKWuu7gaew9og9l1sETn/
aXm/ruHqLh0NxAY5NfRiEIgZBGIGgZhBIGYQiBkEYgaBmGmBWIumRwAxtmFtJLOXGphOEI8iVC2S
so/NKq2OVsI7ot3X7VhmqMxFqUrSfK7yiqcI3z/6y6t+qzQV761KmGdlEoli1yEnaH5p9rn8GfQW
R45AvsnChaKRHD+F4BH6/KnenkX1EEG/bSN/sPu6Tet9uVUbyPR7RrsBWifIF2LFi+qQZjNodurT
UzYnOoct5EePysFGVQ0pe/AZRiZYJPly3mKE+JjV29jlIbWFfJOJb6FYq+MUKNoUqlo7yKiXwaBi
IWLpMy3Q57UMJbKHw6COXeVfVRbSVNI7FEr5SkRok0khobYh5A/lPajXSrB7rYCPad5CWuLjlOqb
WakOio9Squ/ehF6plLjRGoipE857nHA+thOOmftqnfAWbkB3nHeaw9Ad31PWXIt2HSyr21oXCYhF
id/Z6yNm7jgbzR03yKmxCA654xxyxznkjnPIHeeQO84hd5xD7jjXcseHFoWP7o7j/7vjL9cdV8SQ
IYWKs3LMZ090zPExHHP8aMccP7NjPnupjvmD8TnYvKd30Wc6RTJ00ZVaWL/grrfKZ1SdVrl2Dt1p
SzfoC+ODPkSg4UIMZt0+9hjGJeSVd8V9M3FiJk7NxJmO+ElacXZobvNA/LuzpiXeuG9a4o1Dpyme
mIg3Tp9eVeHJ5UPx747hoHz9ctoZ7z/+ico/kvXvPKmmda+hUk4APmbqk4VySjybUYodPRAc5YUS
zmRsTUpt8KsxW95loVJWY9xAnuvI72or/61Vwz/agjhgQWoSrGdAW5Vy+6BIhL+K+L6EHWvVHESP
UJHMNyOPbSaOzcQdM3F3Jw73eZTLaJ6m9UA5OEIeTMYe7BXDqvDs7MHETi+z/fkaww4mvpyvaWfX
6+qqljHa7HVs12ydKexZZwrHXmdyyRmctemDHbgyFHYqYLgytKc8fDocOlGutbnrypqwzuauY/nO
Y1eTFDdbe35PWE0yzamhRgitJoXQalIIrSaF0GpSCK0mhdBqUgitJoVaq0kH9liNeKWzmsQ8hwau
GsLndcqmx0SVKcmQsqETHFV0sOGh8KgHn9Ho+LTPE5+tvgFBGnWqYgjSPWXNo4eE0N38fwdFD1t+
63tGCUWfmkERjwZFg5wakkQQFCMIihEExQiCYgRBMYKgGEFQjLSgeGCl+2hQHPqO8iyhqAxEhezT
4NE1/HpR9OBRjH6UEJ/BLqZuL4Gg7FbKEJR7yrp7kdjz/A4oPSuQk4iO92jESWc0Thrk1MBFQJwU
ECcFxEkBcVJAnBQQJwXESaHFySEn7mic9CUVvAka+t7xzDmpLEUtduP+PbjnJmbcQ8x4/CszghdD
zFZ/geyMO9UzZOeesu43hRKebO/SDId0Pyr0AiN4jnJphmlODXFiCJ4xBM8YgmcMwTOG4BlD8Iwh
eMbHvjTjSfAc+pjxxcBTGU29t9h/qHfkb1iMMTrvweh8bIyqRnx5GG31HAjUeaeihkDdU9ZcysTU
IXYbqIFrYT9oO6PM0/5Km492C4ZpTg2F5hBQ5xBQ5xBQ5xBQ5xBQ5xBQ5xBQ58e+BeNxQCVUDprz
u4XoCWapzEed7nDO00Nd9KB1Mfqc3j2DG4nG6UMQsotOlQ0hu6esO+N3meN2ZvzM8j3amfEbLo2O
chWGaU4NmRYQZBcQZBcQZBcQZBcQZBcQZBcQZBfHvgrjSZA9t6uGRjFQZUgq1T3JtUPGuE16cJuM
v8P0WnDb6k0QvEmn8obg3VPWBC/zGAk6ywXEwq3rMFzbcqjZcsEo12GY5tTQKoHAm0DgTSDwJhB4
Ewi8CQTeBAJvcuzrMJ4E3nO7g2hkU1UmVWs8GsEdtQbEvEK1YR+k7LKHssuRKet7wRnceXG8rgN5
u+w0gyFv95S7vHU9QonH9nnrMkxY92CUzSyPscbRZZbrad+pyUe79cI0pwZSS4i3S4i3S4i3S4i3
S4i3S4i3S4i3y2PfevEk3p7b9UNHM1plXPLZyqrGIm+oTvLKXuTp92PwXaGhI/I1LNsn5PfgeNqD
8Mdt39ax+LB1LP5hagSmCjA1BlPnYOoCTE3A1OXD1N5j/QdJOYNI2TrF36GL3pl93g+mrkC7Br2H
1Hdp927GSzT7/wFQSwECFwMUAAAACABapXI4vftLCrUBAACMBgAAIgANAAAAAAABAAAApIEAAAAA
b3AuMDAubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTCngR1V4AABQSwECFwMUAAAA
CABapXI4bmjOj9YDAAD7DwAAIgANAAAAAAABAAAApIEKAgAAb3AuMDEubHVjaW4uaW5kZXh3cml0
ZXIuaW5mb3N0cmVhbVVUBQADTCngR1V4AABQSwECFwMUAAAACABapXI4vckkLIsDAACcDAAAIgAN
AAAAAAABAAAApIE1BgAAb3AuMDIubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTCng
R1V4AABQSwECFwMUAAAACABapXI477xjjr4BAADZAwAAIgANAAAAAAABAAAApIEVCgAAb3AuMDMu
bHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTCngR1V4AABQSwECFwMUAAAACABapXI4
77xjjr4BAADZAwAAIgANAAAAAAABAAAApIEoDAAAb3AuMDQubHVjaW4uaW5kZXh3cml0ZXIuaW5m
b3N0cmVhbVVUBQADTCngR1V4AABQSwECFwMUAAAACABapXI477xjjr4BAADZAwAAIgANAAAAAAAB
AAAApIE7DgAAb3AuMDUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTCngR1V4AABQ
SwECFwMUAAAACABapXI477xjjr4BAADZAwAAIgANAAAAAAABAAAApIFOEAAAb3AuMDYubHVjaW4u
aW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTCngR1V4AABQSwECFwMUAAAACABapXI477xjjr4B
AADZAwAAIgANAAAAAAABAAAApIFhEgAAb3AuMDcubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVh
bVVUBQADTCngR1V4AABQSwECFwMUAAAACABbpXI4oT14szoIAADKPQAAIgANAAAAAAABAAAApIF0
FAAAb3AuMDgubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMU
AAAACABbpXI48OtYym8HAADZMQAAIgANAAAAAAABAAAApIEDHQAAb3AuMDkubHVjaW4uaW5kZXh3
cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABbpXI4NVZaSO0EAACSHAAA
IgANAAAAAAABAAAApIHHJAAAb3AuMTAubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQAD
TSngR1V4AABQSwECFwMUAAAACABbpXI4dTgcqMIDAAC+DgAAIgANAAAAAAABAAAApIEJKgAAb3Au
MTEubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABb
pXI4QH/kKd8BAACQBAAAIgANAAAAAAABAAAApIEgLgAAb3AuMTIubHVjaW4uaW5kZXh3cml0ZXIu
aW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABbpXI4FJgd2PcEAACCGAAAIgANAAAA
AAABAAAApIFUMAAAb3AuMTMubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4
AABQSwECFwMUAAAACABbpXI4v+jUh3wEAABeFwAAIgANAAAAAAABAAAApIGgNQAAb3AuMTQubHVj
aW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABbpXI4PkHH
bFkGAAD1JwAAIgANAAAAAAABAAAApIFxOgAAb3AuMTUubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0
cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABbpXI4x45hRx4JAABBTAAAIgANAAAAAAABAAAA
pIEfQQAAb3AuMTYubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwEC
FwMUAAAACABbpXI43VEMF28HAAC0NwAAIgANAAAAAAABAAAApIGSSgAAb3AuMTcubHVjaW4uaW5k
ZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTSngR1V4AABQSwECFwMUAAAACABbpXI4Y6hqGT4KAADA
XQAAIgANAAAAAAABAAAApIFWUgAAb3AuMTgubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVU
BQADTSngR1V4AABQSwECFwMUAAAACABbpXI40zhGgMgKAABAZAAAIgANAAAAAAABAAAApIHpXAAA
b3AuMTkubHVjaW4uaW5kZXh3cml0ZXIuaW5mb3N0cmVhbVVUBQADTingR1V4AABQSwUGAAAAABQA
FABEBwAABmgAAAAA

------=_Part_20847_22672208.1205873124831
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_20847_22672208.1205873124831--

From java-user-return-33225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 20:51:27 2008
Return-Path: <java-user-return-33225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33238 invoked from network); 18 Mar 2008 20:51:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 20:51:27 -0000
Received: (qmail 64018 invoked by uid 500); 18 Mar 2008 20:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63985 invoked by uid 500); 18 Mar 2008 20:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63974 invoked by uid 99); 18 Mar 2008 20:51:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:51:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 20:50:39 +0000
Received: by wf-out-1314.google.com with SMTP id 28so59994wff.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 13:50:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Hwp3QmyQjOvqbSvXw9+qlBFfewV8pLFgIdsb5pdZxwQ=;
        b=dwn5d6lU9Ak+MM591jHtMhFqgdaGNF6Lf0v5grH1PJ7vbvoKUTwvY6AxETTT0QNQIwvQUHUoUF/k2Qu/95d3EdBcNCVC5gf05YX0Aa1Vd3XlEfaf3VcMNc6YxF7iqaHfUYi/NZvAMC7Lh0muKU7V9qb74NkTFnwBrQdimDAjwYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NoJq+YyDXKv3TKnEhqFHEFvVSzoih9k8OwZpOQAsMRfJWLQI97HQeSTIJnYMQPlBN6lr3cfORv3teXW9uTv4sIcTfvjR2L0pscJirIxFWwIHr1CLdCegKVEm5ntPwNsiW87Rttse7itWuPSgh67nVw3mHBCwl7eWuAtXgLjib5A=
Received: by 10.142.131.18 with SMTP id e18mr1487699wfd.39.1205873450555;
        Tue, 18 Mar 2008 13:50:50 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.119.110])
        by mx.google.com with ESMTPS id i12sm14341749wxd.31.2008.03.18.13.50.47
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 18 Mar 2008 13:50:49 -0700 (PDT)
Message-ID: <47E02B1C.1010007@gmail.com>
Date: Tue, 18 Mar 2008 16:50:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031702)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search
References: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
In-Reply-To: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The contrib Highlighter is not position sensitive. You can try out the 
patch I have been working here if you are interested: 
https://issues.apache.org/jira/browse/LUCENE-794

Spencer Tickner wrote:
> Hi List,
>
> Thanks in advance for any help. I'm working with the contrib
> highlighting class and am having issues when doing searches with a
> phrase. I've been able to duplicate this behaviour in the
> HighlighterTest class.
>
> When calling the testGetBestFragmentsPhrase() method I get the correct:
>
> <b>John</b>  <b>Kennedy</b>  has been shot
>
> However when I add "John" to the text so it reads:
>
> "John Kennedy has been John shot"
>
> I get:
>
> <b>John</b>  <b>Kennedy</b>  has been<b>John</b>  shot
>
> It makes sense to me that John should not be highlighted. Has anyone
> else run into this problem? Anyone have a fix?
>
> Cheers,
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 20:54:07 2008
Return-Path: <java-user-return-33226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35059 invoked from network); 18 Mar 2008 20:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 20:54:06 -0000
Received: (qmail 69391 invoked by uid 500); 18 Mar 2008 20:54:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68450 invoked by uid 500); 18 Mar 2008 20:53:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68438 invoked by uid 99); 18 Mar 2008 20:53:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 13:53:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 20:53:09 +0000
Received: by wf-out-1314.google.com with SMTP id 28so61077wff.20
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 13:53:28 -0700 (PDT)
Received: by 10.142.187.2 with SMTP id k2mr1487941wff.77.1205873607943;
        Tue, 18 Mar 2008 13:53:27 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 33sm32240932wra.23.2008.03.18.13.53.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 18 Mar 2008 13:53:27 -0700 (PDT)
In-Reply-To: <8c4e68610803181345r45b613f3p32594fc93f7df804@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com> <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com> <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com> <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com> <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com> <F573D2EC-D24D-4E39-B229-51CF80B6A0FC@mikemccandless.com> <8c4e68610803181345r45b613f3p32594fc93f7df804@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A724C3C7-3FA8-4D95-8BE2-56D336C5B34B@mikemccandless.com>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Tue, 18 Mar 2008 16:53:25 -0400
To: Ian Lea <ian.lea@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Ian can you attach your version of SegmentMerger.java?  Somehow my  
lines are off from yours.

Mike

Ian Lea wrote:
> Mike
>
>
> Latest patch produces similar exception:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.lang.AssertionError: after mergeFields: fdx size mismatch: 65184
> docs vs 521464 length in bytes of _c9.fdx
>         at  
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException( 
> ConcurrentMergeScheduler.java:320)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:297)
> Caused by: java.lang.AssertionError: after mergeFields: fdx size
> mismatch: 65184 docs vs 521464 length in bytes of _c9.fdx
>         at org.apache.lucene.index.SegmentMerger.mergeFields 
> (SegmentMerger.java:347)
>         at org.apache.lucene.index.SegmentMerger.merge 
> (SegmentMerger.java:133)
>         at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3852)
>         at org.apache.lucene.index.IndexWriter.merge 
> (IndexWriter.java:3504)
>         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge 
> (ConcurrentMergeScheduler.java:211)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:266)
>
> Latest infostream attached.
>
>
> --
> Ian.
>
>
> On Tue, Mar 18, 2008 at 6:05 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>>  Hi Ian,
>>
>>  Sheesh that's odd.  The SegmentMerger produced an .fdx file that is
>>  one document too short.
>>
>>  Can you run with this patch now, again applied to head of 2.3
>>  branch?  I just added another assert inside the loop that does the
>>  field merging.
>>
>>  I will scrutinize this code...
>>
>>  Mike
>>
>>
>>
>>
>>  Ian Lea wrote:
>>> Mike
>>>
>>>
>>> Patch applied and test re-run and picked up an assertion error this
>>> time:
>>>
>>> Exception in thread "Lucene Merge Thread #0"
>>> org.apache.lucene.index.MergePolicy$MergeException:
>>> java.lang.AssertionError: after mergeFields: fdx size mismatch:  
>>> 72357
>>> docs vs 578848 length in bytes of _3o.fdx
>>>         at
>>> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeExceptio 
>>> n(
>>> ConcurrentMergeScheduler.java:320)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>> $MergeThread.run(ConcurrentMergeScheduler.java:297)
>>> Caused by: java.lang.AssertionError: after mergeFields: fdx size
>>> mismatch: 72357 docs vs 578848 length in bytes of _3o.fdx
>>>         at org.apache.lucene.index.SegmentMerger.mergeFields
>>> (SegmentMerger.java:342)
>>>         at org.apache.lucene.index.SegmentMerger.merge
>>> (SegmentMerger.java:133)
>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>>> (IndexWriter.java:3852)
>>>         at org.apache.lucene.index.IndexWriter.merge
>>> (IndexWriter.java:3504)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge
>>> (ConcurrentMergeScheduler.java:211)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>> $MergeThread.run(ConcurrentMergeScheduler.java:266)
>>>
>>> The infostream output is attached.  Since this email is to you  
>>> and the
>>> list it should make it to you.
>>>
>>>
>>>
>>> Yonik: I haven't been able to make TestStressIndexing2 fail.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Tue, Mar 18, 2008 at 4:19 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>>  Ian,
>>>>
>>>>  Could you apply the attached patch applied to the head of the 2.3
>>>>  branch?
>>>>
>>>>  It only adds more asserts, to try to pinpoint where exactly this
>>>>  corruption starts.
>>>>
>>>>  Then, re-run the test with asserts enabled and infoStream  
>>>> turned on
>>>>  and post back.  Thanks.
>>>>
>>>>  Mike
>>>>
>>>>
>>>>
>>>>
>>>>  Ian Lea wrote:
>>>>
>>>>> It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>>>>>
>>>>> $ uname -a shows
>>>>> Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005
>>>>> x86_64
>>>>> x86_64 x86_64 GNU/Linux
>>>>>
>>>>> and
>>>>>
>>>>> Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003
>>>>> i686
>>>>> unknown unknown GNU/Linux
>>>>>
>>>>> The first one has a 2.8Ghz Intel CPU, don't know about the second.
>>>>>
>>>>>
>>>>> I'll try and run the stress test.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>
>>>>> wrote:
>>>>>>
>>>>>> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com>  
>>>>>> wrote:
>>>>>>> Hi
>>>>>>>
>>>>>>>
>>>>>>>  When bulk loading into a new index I'm seeing this exception
>>>>>>>
>>>>>>>  Exception in thread "Thread-1"
>>>>>>>  org.apache.lucene.index.MergePolicy$MergeException:
>>>>>>>  org.apache.lucene.index.CorruptIndexException: doc counts  
>>>>>>> differ
>>>>>>> for
>>>>>>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows  
>>>>>>> 67862
>>>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>>>>>>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc
>>>>>>> counts
>>>>>>>  differ for segment _4l: fieldsReader shows 67861 but  
>>>>>>> segmentInfo
>>>>>>> shows
>>>>>>>  67862
>>>>>>>         at org.apache.lucene.index.SegmentReader.initialize
>>>>>>> (SegmentReader.java:313)
>>>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>>>> (SegmentReader.java:262)
>>>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>>>> (SegmentReader.java:221)
>>>>>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>>>>>>> (IndexWriter.java:3093)
>>>>>>>         at org.apache.lucene.index.IndexWriter.merge
>>>>>>> (IndexWriter.java:2834)
>>>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>>>>>>
>>>>>>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux,  
>>>>>>> with
>>>>>>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from  
>>>>>>> yesterday.
>>>>>>>
>>>>>>>  With java version 1.6.0_03-b05 things work fine.
>>>>>>>
>>>>>>>  The exception happens a few hundred thousand documents into the
>>>>>>> load.
>>>>>>>
>>>>>>>  A different program updating a different index with different
>>>>>>> data on
>>>>>>>  a different server gave a similar error on version 1.6.0_05-
>>>>>>> b13 and
>>>>>>>  lucene 2.3.0.
>>>>>>>
>>>>>>>  Any ideas?  Is this maybe a known issue or am I missing
>>>>>>> something obvious?
>>>>>>
>>>>>>  My guess is perhaps a thread safety bug, more likely in Lucene
>>>>>>  indexing code (less likely in the JVM or specific libc).
>>>>>>
>>>>>>  What Linux version are you using?
>>>>>>  What hardware are you running on (specifically, the CPU)?
>>>>>>
>>>>>>  If possible, it would be great if you could check out Lucene
>>>>>> trunk,
>>>>>>  crank up the iterations by modifying the TestStressIndexing2 and
>>>>>> maybe
>>>>>>  fiddle with some of the other parameters in
>>>>>>  TestStressIndexing2.testMultiConfig(), and see if you can get
>>>>>> it to
>>>>>>  fail.
>>>>>>
>>>>>>
>>>>>>  -Yonik
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>>
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>  For additional commands, e-mail: java-user- 
>>>>>> help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> --
>>>>> -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> <infostream.zip>
>>
>>
>>
>> <infostream.zip>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 21:39:58 2008
Return-Path: <java-user-return-33227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70509 invoked from network); 18 Mar 2008 21:39:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 21:39:58 -0000
Received: (qmail 55949 invoked by uid 500); 18 Mar 2008 21:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55918 invoked by uid 500); 18 Mar 2008 21:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55906 invoked by uid 99); 18 Mar 2008 21:39:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:39:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 21:39:12 +0000
Received: by an-out-0708.google.com with SMTP id c5so28794anc.49
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 14:39:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=UNtfVufalrtc5rgzK0l+MMxHFMGmpgY6WQiUs2fP34o=;
        b=R02QSjaM4t+20g23K9uX0vqUYWoIMaHvh66plqW6CoXy7b2za+DNka09uhVhb/sAweeK30OV5/TWzPlX1utA7tPpuTiU5BvpZyzd9W1tiXQAtnt+7d4TcR4HM5j8P4Xb73zXIUQY3aoL8s0wnzP4Hl+HdXTbi6XOFR1maa8U27c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f/FOaQVA7ZJQur4gnAf5uORQ3tI6HGyszUEoLEG+89U2bhmENewlrFYaQMf2HuSpD3OJums7VZ61a/8BOEPHJRzpdYHHsl+UOxBlZRre179KZWN2dJ9grKI39ZMLRhYciJQNR4JeeHYRlCaY+blv/fQXeqRZb6yKlh0wLDNWil8=
Received: by 10.100.41.9 with SMTP id o9mr147152ano.42.1205876362636;
        Tue, 18 Mar 2008 14:39:22 -0700 (PDT)
Received: by 10.100.43.15 with HTTP; Tue, 18 Mar 2008 14:39:22 -0700 (PDT)
Message-ID: <4b124c310803181439r7e7b2692mc5f68ea1e6fe95af@mail.gmail.com>
Date: Tue, 18 Mar 2008 14:39:22 -0700
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-933 / SOLR-261
In-Reply-To: <e05f0fd10803181331s7ab9145bi5e2a51efcffbf5af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22320_23546023.1205876362583"
References: <4b124c310803181014k541f0abdhe72d1372e5656f2f@mail.gmail.com>
	 <e05f0fd10803181331s7ab9145bi5e2a51efcffbf5af@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22320_23546023.1205876362583
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ah, thanks.  So since solr-1.2.0 is using
lucene-*-2007-05-20_00_04-53.jarin its distribution,
is this why SOLR-261 is still open?

I thought that maybe it would be a simple drop in replacement, but when I
tossed in
lucene-*-2.3.1.jar to solr, it didn't fix the problem, so maybe something in
solr needs to
change to take advantage of your patch...

  -jake

On Tue, Mar 18, 2008 at 1:31 PM, Doron Cohen <cdoronc@gmail.com> wrote:

> hi Jake, yes it was commited in Lucene - this is visible in the JIRA issue
> when if you switch to the "Subversion Commits" tab. where you can also
> see the actual diffs that took place.
>
> Best,
> Doron
>
> On Tue, Mar 18, 2008 at 7:14 PM, Jake Mannix <jake.mannix@gmail.com>
> wrote:
>
> > Hey folks,
> >  I was wondering what the status of LUCENE-933 (stop words can cause the
> > queryparser to end up with no results, due to an e.g. +(the) clause in
> the
> > resultant BooleanQuery).  According to the tracking bug, it's resolved,
> > and
> > there's a patch, but where has that patch been applied?  I tried running
> > solr-trunk (which links to lucene-core-2.3.1), but the same issue
> occurs.
> > I'd ask over on the solr-user list, but since SOLR-261 is marked as
> > "blocked
> > by LUCENE-933", I think here might be the right place to go first.
> >  Any ideas?  Hoss, Doron?
> >
> >   -jake
> >
>

------=_Part_22320_23546023.1205876362583--

From java-user-return-33228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 21:49:12 2008
Return-Path: <java-user-return-33228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76306 invoked from network); 18 Mar 2008 21:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 21:49:11 -0000
Received: (qmail 67804 invoked by uid 500); 18 Mar 2008 21:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67768 invoked by uid 500); 18 Mar 2008 21:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67738 invoked by uid 99); 18 Mar 2008 21:48:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 14:48:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 21:48:14 +0000
Received: by gv-out-0910.google.com with SMTP id r4so92887gve.23
        for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 14:48:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=ij3ZF8444i8oNY1zcbmvgVsfnaclBU/zcHcwYhrFJkI=;
        b=Y6zQ9YJ/LR3Oh+vhxzSS09Y8hWKzriDQQG9FN1IgeHrV51ZjMrBY21xfvw44IfVlw0VOt903yydrUaHtknUgaDAJ1b4hVqaugdD4ACfGLkTh7tMHBTqsv1M0rVhtWSC6yeoTnz4sAN4CaDdGZJbzediED54u/GEfzCNYI79z4SI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ApIXvoUaZtFGcdoljS3Jy4gAjFpzH+BHsCFLy3QgHddYdTQyPIXCgNWR9YoGaWBIWdAnJUTa2ekkTHTUpkAwzqxmp0uiDPww3gs+AFyW8b2ks+8hXtRm1aoQJMeQr7w21GeT7zpU9+DQPJx/TtckrkVSSCLWvDujA10ybUljaQk=
Received: by 10.78.166.1 with SMTP id o1mr3628552hue.74.1205876903870;
        Tue, 18 Mar 2008 14:48:23 -0700 (PDT)
Received: by 10.78.184.15 with HTTP; Tue, 18 Mar 2008 14:48:23 -0700 (PDT)
Message-ID: <2d72c9c50803181448j296fa848l93cd5d30ec0d14a@mail.gmail.com>
Date: Tue, 18 Mar 2008 14:48:23 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search
In-Reply-To: <47E02B1C.1010007@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
	 <47E02B1C.1010007@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, I'll give that a try.

Cheers,

Spencer

On Tue, Mar 18, 2008 at 1:50 PM, Mark Miller <markrmiller@gmail.com> wrote:
> The contrib Highlighter is not position sensitive. You can try out the
>  patch I have been working here if you are interested:
>  https://issues.apache.org/jira/browse/LUCENE-794
>
>
>
>  Spencer Tickner wrote:
>  > Hi List,
>  >
>  > Thanks in advance for any help. I'm working with the contrib
>  > highlighting class and am having issues when doing searches with a
>  > phrase. I've been able to duplicate this behaviour in the
>  > HighlighterTest class.
>  >
>  > When calling the testGetBestFragmentsPhrase() method I get the correct:
>  >
>  > <b>John</b>  <b>Kennedy</b>  has been shot
>  >
>  > However when I add "John" to the text so it reads:
>  >
>  > "John Kennedy has been John shot"
>  >
>  > I get:
>  >
>  > <b>John</b>  <b>Kennedy</b>  has been<b>John</b>  shot
>  >
>  > It makes sense to me that John should not be highlighted. Has anyone
>  > else run into this problem? Anyone have a fix?
>  >
>  > Cheers,
>  >
>  > Spencer
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 18 23:36:57 2008
Return-Path: <java-user-return-33229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22263 invoked from network); 18 Mar 2008 23:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Mar 2008 23:36:57 -0000
Received: (qmail 50798 invoked by uid 500); 18 Mar 2008 23:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50769 invoked by uid 500); 18 Mar 2008 23:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50758 invoked by uid 99); 18 Mar 2008 23:36:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 16:36:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 23:36:00 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 468B34A81E4
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 10:35:09 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Question with Hits Interface
Date: Wed, 19 Mar 2008 10:30:13 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <OFC4D376DF.81DFFC8B-ON87257410.00512BAA-86257410.0050B9E2@us.ibm.com>
In-Reply-To: <OFC4D376DF.81DFFC8B-ON87257410.00512BAA-86257410.0050B9E2@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803191030.14232.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 19 March 2008 01:44:33 Ramdas M Ramakrishnan wrote:
> I am using a MultiFieldQueryParser to parse and search the index. Once I
> have the Hits and iterate thru it, I need to know the following?
>
> For every hit document I need to know under which indexed field was this
> Hit originating from? Say I have indexed 2 Fields how will I know from the
> Hit which Field the Hit came from?

query.createWeight(searcher).explain(reader, docId) ?

Or just look at the text.

Why do you need to know this anyway?  If it's for sorting title matches 
higher, you're supposed to use boosting for that.  If it's for highlighting 
then the highlighter would do nothing if there are no matches.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 00:03:25 2008
Return-Path: <java-user-return-33230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32766 invoked from network); 19 Mar 2008 00:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 00:03:23 -0000
Received: (qmail 84271 invoked by uid 500); 19 Mar 2008 00:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84244 invoked by uid 500); 19 Mar 2008 00:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84233 invoked by uid 99); 19 Mar 2008 00:03:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 17:03:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:02:37 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B457B71C363; Tue, 18 Mar 2008 17:02:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B0DEB71C362
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 17:02:48 -0700 (PDT)
Date: Tue, 18 Mar 2008 17:02:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-933 / SOLR-261
In-Reply-To: <4b124c310803181439r7e7b2692mc5f68ea1e6fe95af@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803181659180.12234@radix.cryptio.net>
References: <4b124c310803181014k541f0abdhe72d1372e5656f2f@mail.gmail.com> 
 <e05f0fd10803181331s7ab9145bi5e2a51efcffbf5af@mail.gmail.com>
 <4b124c310803181439r7e7b2692mc5f68ea1e6fe95af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Ah, thanks.  So since solr-1.2.0 is using
: lucene-*-2007-05-20_00_04-53.jarin its distribution,
: is this why SOLR-261 is still open?

SOLR-261 was left open because it hadn't been verified yet -- I just did 
that and resolved the issue against the trunk.

: I thought that maybe it would be a simple drop in replacement, but when I
: tossed in
: lucene-*-2.3.1.jar to solr, it didn't fix the problem, so maybe something in
: solr needs to
: change to take advantage of your patch...

Actualy, i just tried that and worked fine for me ... make sure the older 
lucene jars are removed from the lib dir before you add the new ones, then 
rebuild the war and it should work.

If you are still having problems please start a thread on solr-user 
describing your schema fieldtypes, request handler configs, what query 
URL isn't working the way you expect, and whatthe debugQuery=true output 
looks like.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 00:20:57 2008
Return-Path: <java-user-return-33231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47350 invoked from network); 19 Mar 2008 00:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 00:20:57 -0000
Received: (qmail 2214 invoked by uid 500); 19 Mar 2008 00:20:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2008 invoked by uid 500); 19 Mar 2008 00:20:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1997 invoked by uid 99); 19 Mar 2008 00:20:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 17:20:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:20:01 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D05B771C2A7; Tue, 18 Mar 2008 17:20:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CDB2A71C149
	for <java-user@lucene.apache.org>; Tue, 18 Mar 2008 17:20:20 -0700 (PDT)
Date: Tue, 18 Mar 2008 17:20:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: phrase search with custom TokenFilter
In-Reply-To: <EBD2043717E77E4687F27264C03F97D1028B198084@HQEXMB1.vignette.com>
Message-ID: <Pine.LNX.4.62.0803181714090.12234@radix.cryptio.net>
References: <EBD2043717E77E4687F27264C03F97D10284DA7634@HQEXMB1.vignette.com>
 <EBD2043717E77E4687F27264C03F97D1028B198084@HQEXMB1.vignette.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


You're going to want to change your TokenFilter so that it emits the split 
pieces tokens immediately after the original token and with a 
positionIncrement of "0" .. don't buffer then up and wait for the entire 
stream to finish first.

it true order of the tokens in the tokenstream and the positionIncrement 
are what matter when doing a PhraseQuery -- not the start/end offsets

Incidently: you might want to take a look at Solr's WordDelimiterFilter, 
both as an example of how to do this, and because it may already meet all 
the needs you've anticipated and some you might not have thought of but 
might want to use once you take a look at them...

http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/analysis/WordDelimiterFilter.java?view=markup
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#WordDelimiterFilter



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 00:53:43 2008
Return-Path: <java-user-return-33232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62957 invoked from network); 19 Mar 2008 00:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 00:53:43 -0000
Received: (qmail 38603 invoked by uid 500); 19 Mar 2008 00:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38573 invoked by uid 500); 19 Mar 2008 00:53:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38562 invoked by uid 99); 19 Mar 2008 00:53:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 17:53:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.149] (HELO n32.bullet.mail.ukl.yahoo.com) (87.248.110.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Mar 2008 00:52:44 +0000
Received: from [217.12.4.214] by n32.bullet.mail.ukl.yahoo.com with NNFMP; 19 Mar 2008 00:53:05 -0000
Received: from [87.248.110.109] by t1.bullet.ukl.yahoo.com with NNFMP; 19 Mar 2008 00:53:05 -0000
Received: from [127.0.0.1] by omp214.mail.ukl.yahoo.com with NNFMP; 19 Mar 2008 00:53:05 -0000
X-Yahoo-Newman-Id: 2388.3786.bm@omp214.mail.ukl.yahoo.com
Received: (qmail 5673 invoked from network); 18 Mar 2008 20:31:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=gkUTKx2MTE+sZ6fvtH4gERQKxXgGx3EO4OE3EdJJtpFAOfdkWLdRZ6Bu0HaLsKEevj5Hr2iJKact8gFB/WxWEfIjnIYn+xJWxphE/1MCopT5rIvTlw7lgHOcx51+ZE/SmLqjNuF631ws2T+8Q8R5G2IsMro7REoJbteMaqqZdBc=  ;
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp107.mail.ukl.yahoo.com with SMTP; 18 Mar 2008 20:31:08 -0000
X-YMail-OSG: jmaKu_kVM1lzMFeGXwEmNObS5MemQ1MXnafwr9T2DYj.bAFDTZ6ZMnJ0WpqcXfW5FeTP1.my0rQKP0Egu94x006OZcjCnkriW7SE11KjLAAUkj8EW7YzsMRZpgY-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <47E0268B.9020908@yahoo.co.uk>
Date: Tue, 18 Mar 2008 20:31:07 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search
References: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
In-Reply-To: <2d72c9c50803181327k508c23b1w8be68f850a719914@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

See https://issues.apache.org/jira/browse/LUCENE-794

Spencer Tickner wrote:
> Hi List,
>
> Thanks in advance for any help. I'm working with the contrib
> highlighting class and am having issues when doing searches with a
> phrase. I've been able to duplicate this behaviour in the
> HighlighterTest class.
>
> When calling the testGetBestFragmentsPhrase() method I get the correct:
>
> <b>John</b> <b>Kennedy</b> has been shot
>
> However when I add "John" to the text so it reads:
>
> "John Kennedy has been John shot"
>
> I get:
>
> <b>John</b> <b>Kennedy</b> has been <b>John</b> shot
>
> It makes sense to me that John should not be highlighted. Has anyone
> else run into this problem? Anyone have a fix?
>
> Cheers,
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 05:10:17 2008
Return-Path: <java-user-return-33233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92537 invoked from network); 19 Mar 2008 05:10:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 05:10:17 -0000
Received: (qmail 88364 invoked by uid 500); 19 Mar 2008 05:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88335 invoked by uid 500); 19 Mar 2008 05:10:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88324 invoked by uid 99); 19 Mar 2008 05:10:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 22:10:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.144] (HELO n27.bullet.mail.ukl.yahoo.com) (87.248.110.144)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Mar 2008 05:09:27 +0000
Received: from [217.146.182.178] by n27.bullet.mail.ukl.yahoo.com with NNFMP; 19 Mar 2008 05:09:37 -0000
Received: from [87.248.111.144] by t4.bullet.ukl.yahoo.com with NNFMP; 19 Mar 2008 05:09:37 -0000
Received: from [127.0.0.1] by omp201.mail.ukl.yahoo.com with NNFMP; 19 Mar 2008 05:09:37 -0000
X-Yahoo-Newman-Id: 176877.54580.bm@omp201.mail.ukl.yahoo.com
Received: (qmail 34566 invoked from network); 18 Mar 2008 19:45:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Ocqc3mrlnJ1NGOBwr5rDVVv3b0nCsU89C5mGiq8+qlwMr6hrSaRVsxs2vE2gr5srDklW2lTMcAKC5kPPVhj43YvePfqC8BvVXuTzSjyZwuPt2TKlvm9E+gdbLcMDs6lNUW4vsVPRJFp6h1QkGBshUMh50v+0zboSJm9jnLyOdWA=  ;
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp107.mail.ukl.yahoo.com with SMTP; 18 Mar 2008 19:45:18 -0000
X-YMail-OSG: nKogjKgVM1nYFbXJ4aPBv.IYB9ZfurrflxGt0NaAOROZQEy_7Gz1Q0Qh7OdP5WaSGd_pXDv8eg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <47E01BC8.7030709@yahoo.co.uk>
Date: Tue, 18 Mar 2008 19:45:12 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing/Querying Annotations and Fields for a document
References: <917461.23478.qm@web26005.mail.ukl.yahoo.com> <22f49afe0803181209w3959352fw4eaba61ce0b500fa@mail.gmail.com>
In-Reply-To: <22f49afe0803181209w3959352fw4eaba61ce0b500fa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

lucene-seme1 s wrote:
> Can you please share the custom Analyzer you have ? 

Unfortunately it's not mine to share but see the Lucene Token and 
Analyzer classes - it's not particularly hard to code.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 06:34:05 2008
Return-Path: <java-user-return-33234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39755 invoked from network); 19 Mar 2008 06:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 06:34:04 -0000
Received: (qmail 43451 invoked by uid 500); 19 Mar 2008 06:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43418 invoked by uid 500); 19 Mar 2008 06:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43407 invoked by uid 99); 19 Mar 2008 06:33:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 23:33:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:33:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jbrrb-0004oJ-If
	for java-user@lucene.apache.org; Tue, 18 Mar 2008 23:33:27 -0700
Message-ID: <16137836.post@talk.nabble.com>
Date: Tue, 18 Mar 2008 23:33:27 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
In-Reply-To: <47DFEBBF.4010608@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <16121128.post@talk.nabble.com> <47DFEBBF.4010608@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply.
Actually am sorting on a specific field that is on keyword feild which is
unique
and i had 1 gb ram 

markrmiller wrote:
> 
> To sort on 13mil docs will take like at least 400 mb for the field 
> cache. Thats if you only sort on one field...it can grow fast if you 
> allow multi field sorting.
> 
> How much RAM are you giving your app?
> 
> sandyg wrote:
>> this is my search content
>>
>> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>> Query query = parser.parse("1");
>>
>> Sort sort = new Sort(new SortField(sortField));
>>           Hits       hits = searcher.search(query,sort);
>>
>> And i had huge data about 13 millions of records
>> i am not sure y its giving outof memory exception and
>> no exception when no sorting is done
>> plz some one help me yar
>>
>> and also if to increase heap space how to increase it programatically i
>> had
>> command prompt
>> java -Xms<initial heap size>  -Xmx<maximum heap size>
>> please.....
>>    
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16137836.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 06:38:30 2008
Return-Path: <java-user-return-33235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42005 invoked from network); 19 Mar 2008 06:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 06:38:30 -0000
Received: (qmail 47447 invoked by uid 500); 19 Mar 2008 06:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47417 invoked by uid 500); 19 Mar 2008 06:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47406 invoked by uid 99); 19 Mar 2008 06:38:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Mar 2008 23:38:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:37:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jbrvs-0004u1-Ah
	for java-user@lucene.apache.org; Tue, 18 Mar 2008 23:37:52 -0700
Message-ID: <16137871.post@talk.nabble.com>
Date: Tue, 18 Mar 2008 23:37:52 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
In-Reply-To: <6e3ae6310803180819i66636877h1bf398b1af92c227@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <16121128.post@talk.nabble.com> <6e3ae6310803180819i66636877h1bf398b1af92c227@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


How can i do sorting on the results i get  (if already hits are there then
how to sort on the hits),instead of sorting on all the values b4 getting
results

Chris Lu wrote:
> 
> This is because sorting will load all values in that sortFirled into
> memory.
> 
> If it's an integer, you will need 4*N bytes, which is additional 52M for
> you.
> 
> There is no programatical way to increase memory size.
> 
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
> 
> 
> On Tue, Mar 18, 2008 at 6:23 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>>
>>  this is my search content
>>
>>  QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>>  Query query = parser.parse("1");
>>
>>  Sort sort = new Sort(new SortField(sortField));
>>          Hits       hits = searcher.search(query,sort);
>>
>>  And i had huge data about 13 millions of records
>>  i am not sure y its giving outof memory exception and
>>  no exception when no sorting is done
>>  plz some one help me yar
>>
>>  and also if to increase heap space how to increase it programatically i
>> had
>>  command prompt
>>  java -Xms<initial heap size> -Xmx<maximum heap size>
>>  please.....
>>  --
>>  View this message in context:
>> http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16121128.html
>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16137871.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 07:05:16 2008
Return-Path: <java-user-return-33236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50963 invoked from network); 19 Mar 2008 07:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 07:05:16 -0000
Received: (qmail 66208 invoked by uid 500); 19 Mar 2008 07:05:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66036 invoked by uid 500); 19 Mar 2008 07:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66025 invoked by uid 99); 19 Mar 2008 07:05:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:05:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:04:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JbsLn-0000Bc-82
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 00:04:39 -0700
Message-ID: <16138043.post@talk.nabble.com>
Date: Wed, 19 Mar 2008 00:04:39 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
In-Reply-To: <47DFEBBF.4010608@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <16121128.post@talk.nabble.com> <47DFEBBF.4010608@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
And is it not passibe to sort on the result we get instead of on all the
values like
Hits       hits = searcher.search(query);
and it will be good if got sorting on the hits i.e on the result
thanks for the reply


markrmiller wrote:
> 
> To sort on 13mil docs will take like at least 400 mb for the field 
> cache. Thats if you only sort on one field...it can grow fast if you 
> allow multi field sorting.
> 
> How much RAM are you giving your app?
> 
> sandyg wrote:
>> this is my search content
>>
>> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>> Query query = parser.parse("1");
>>
>> Sort sort = new Sort(new SortField(sortField));
>>           Hits       hits = searcher.search(query,sort);
>>
>> And i had huge data about 13 millions of records
>> i am not sure y its giving outof memory exception and
>> no exception when no sorting is done
>> plz some one help me yar
>>
>> and also if to increase heap space how to increase it programatically i
>> had
>> command prompt
>> java -Xms<initial heap size>  -Xmx<maximum heap size>
>> please.....
>>    
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16138043.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 07:17:44 2008
Return-Path: <java-user-return-33237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55206 invoked from network); 19 Mar 2008 07:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 07:17:43 -0000
Received: (qmail 78272 invoked by uid 500); 19 Mar 2008 07:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78237 invoked by uid 500); 19 Mar 2008 07:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78226 invoked by uid 99); 19 Mar 2008 07:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:17:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:16:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JbsXr-00075f-6h
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 00:17:07 -0700
Message-ID: <16138043.post@talk.nabble.com>
Date: Wed, 19 Mar 2008 00:17:07 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
And is it not passibe to sort on the result we get instead of on all the
values like
Hits       hits = searcher.search(query);
and it will be good if got sorting on the hits i.e on the result
because my sorting is based on specific  field and that field should be
sorted when i click on it.
thanks for the reply


markrmiller wrote:
> 
> To sort on 13mil docs will take like at least 400 mb for the field 
> cache. Thats if you only sort on one field...it can grow fast if you 
> allow multi field sorting.
> 
> How much RAM are you giving your app?
> 
> sandyg wrote:
>> this is my search content
>>
>> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>> Query query = parser.parse("1");
>>
>> Sort sort = new Sort(new SortField(sortField));
>>           Hits       hits = searcher.search(query,sort);
>>
>> And i had huge data about 13 millions of records
>> i am not sure y its giving outof memory exception and
>> no exception when no sorting is done
>> plz some one help me yar
>>
>> and also if to increase heap space how to increase it programatically i
>> had
>> command prompt
>> java -Xms<initial heap size>  -Xmx<maximum heap size>
>> please.....
>>    
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/java.lang.OutOfMemoryError%3A-Java-heap-space-when-sorting-the-fields-tp16121128p16138043.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 07:29:10 2008
Return-Path: <java-user-return-33238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57354 invoked from network); 19 Mar 2008 07:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 07:29:10 -0000
Received: (qmail 88892 invoked by uid 500); 19 Mar 2008 07:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88473 invoked by uid 500); 19 Mar 2008 07:29:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88462 invoked by uid 99); 19 Mar 2008 07:29:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:29:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.196] (HELO out1.bezeqint.net) (192.115.188.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:28:23 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out1.bezeqint.net (Postfix) with ESMTPA id 70EE7BA544A
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 09:24:33 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Contrib Highlighter and Phrase search
Date: Wed, 19 Mar 2008 09:28:15 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <47E02B1C.1010007@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
thread-index: AciJOcfmAENk7wzWR1udzahsBy95HgAUM2hg
Message-Id: <20080319072433.70EE7BA544A@out1.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm not sure how the current Highlighter works - haven't had the time to
look into it yet - but I thought about the following implementation. Judging
by your question, this works in a slightly different way than the current
Highlighter:

1. Build a Radix tree (PATRICIA) and populate it with all search terms.
Phrase queries will be considered as one big string, regardless their
spaces.

2. Iterate through your text ignoring spaces and punctuation marks, and for
each word start a Radix lookup by letter, e.g. for the word John you will
initialize a "tavel" upon the tree with j, then o, h, and so on, so if "John
Kennedy" was your term it will not ignore the space (I'd say you'd want to
keep only one instance of it and ignore the rest). On a dead end (no
relevant branch on the tree) just skip to the next space or punctuation mark
and restart the process.

3. If an iteration has touched base - completed a lookup successfully, the
MyHighlighter object will boldify or surround the text with a span. It is
then possible to give the span different IDs based on the term (each term a
different ID) so each term will be highlighted with a different color.

This allows for fast and exact highlighting of large texts as well as
smaller ones. I would love to hear any comments on the above.

Itamar.

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Tuesday, March 18, 2008 10:51 PM
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search

The contrib Highlighter is not position sensitive. You can try out the patch
I have been working here if you are interested: 
https://issues.apache.org/jira/browse/LUCENE-794

Spencer Tickner wrote:
> Hi List,
>
> Thanks in advance for any help. I'm working with the contrib 
> highlighting class and am having issues when doing searches with a 
> phrase. I've been able to duplicate this behaviour in the 
> HighlighterTest class.
>
> When calling the testGetBestFragmentsPhrase() method I get the correct:
>
> <b>John</b>  <b>Kennedy</b>  has been shot
>
> However when I add "John" to the text so it reads:
>
> "John Kennedy has been John shot"
>
> I get:
>
> <b>John</b>  <b>Kennedy</b>  has been<b>John</b>  shot
>
> It makes sense to me that John should not be highlighted. Has anyone 
> else run into this problem? Anyone have a fix?
>
> Cheers,
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 07:43:45 2008
Return-Path: <java-user-return-33239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62842 invoked from network); 19 Mar 2008 07:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 07:43:45 -0000
Received: (qmail 3338 invoked by uid 500); 19 Mar 2008 07:43:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3314 invoked by uid 500); 19 Mar 2008 07:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3303 invoked by uid 99); 19 Mar 2008 07:43:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 00:43:37 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:42:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jbsx1-0007m3-2v
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 00:43:07 -0700
Message-ID: <16139007.post@talk.nabble.com>
Date: Wed, 19 Mar 2008 00:43:07 -0700 (PDT)
From: luceneuser <ajith@clickjobs.com>
To: java-user@lucene.apache.org
Subject: Relevance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajith@clickjobs.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,


 I need help on retrieving results based on relevance + freshness. As of
now, i get based on either of the fields, either on relevance or freshness.

 how can i achieve this. Lucene retrieves results on relevance but also
fetches old results too. i need more relevant results with freshness too.



Regards,
Destin~ed
-- 
View this message in context: http://www.nabble.com/Relevance-tp16139007p16139007.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 10:43:18 2008
Return-Path: <java-user-return-33240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65973 invoked from network); 19 Mar 2008 10:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 10:43:18 -0000
Received: (qmail 34394 invoked by uid 500); 19 Mar 2008 10:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34367 invoked by uid 500); 19 Mar 2008 10:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34356 invoked by uid 99); 19 Mar 2008 10:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 03:43:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 10:42:30 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 5976F45182
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 11:42:38 +0100 (CET)
Message-ID: <47E0EE1C.4030704@garambrogne.net>
Date: Wed, 19 Mar 2008 11:42:36 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Relevance
References: <16139007.post@talk.nabble.com>
In-Reply-To: <16139007.post@talk.nabble.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

luceneuser a crit :
> Hi All,
>
>
>  I need help on retrieving results based on relevance + freshness. As of
> now, i get based on either of the fields, either on relevance or freshness.
>
>  how can i achieve this. Lucene retrieves results on relevance but also
> fetches old results too. i need more relevant results with freshness too.
>
>
>
> Regards,
> Destin~ed
>   
You have to build your own Similarity for that.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 11:22:16 2008
Return-Path: <java-user-return-33241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87099 invoked from network); 19 Mar 2008 11:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 11:22:16 -0000
Received: (qmail 6200 invoked by uid 500); 19 Mar 2008 11:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5513 invoked by uid 500); 19 Mar 2008 11:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5502 invoked by uid 99); 19 Mar 2008 11:22:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 04:22:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 11:21:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 199C115D412
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 04:21:33 -0700 (PDT)
Message-Id: <1D38915C-E622-402E-9F00-40A1A0D0F748@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16139007.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Relevance
Date: Wed, 19 Mar 2008 07:21:33 -0400
References: <16139007.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the FunctionQuery capabilities in Lucene in  
org.apache.lucene.search.function

You can use this to have field values factor into the score.

-Grant

On Mar 19, 2008, at 3:43 AM, luceneuser wrote:

>
> Hi All,
>
>
> I need help on retrieving results based on relevance + freshness. As  
> of
> now, i get based on either of the fields, either on relevance or  
> freshness.
>
> how can i achieve this. Lucene retrieves results on relevance but also
> fetches old results too. i need more relevant results with freshness  
> too.
>
>
>
> Regards,
> Destin~ed
> -- 
> View this message in context: http://www.nabble.com/Relevance-tp16139007p16139007.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 13:17:41 2008
Return-Path: <java-user-return-33242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42851 invoked from network); 19 Mar 2008 13:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 13:17:40 -0000
Received: (qmail 98374 invoked by uid 500); 19 Mar 2008 13:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98353 invoked by uid 500); 19 Mar 2008 13:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98342 invoked by uid 99); 19 Mar 2008 13:17:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:17:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:16:54 +0000
Received: by wf-out-1314.google.com with SMTP id 28so399883wff.20
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 06:17:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=Ych+Vh18LcbU6f+ePB9RNMXdlQ2DQg641YG8GYTbugg=;
        b=mJGeoJ0JouI9cHGsFUa5CCavzRpDKeAIldk/dcHCyN8TT3+Eq5OqL3mLK5AI7hRADuKku8XD0Yr3DFz40PRi7snt76qIH1fm0Il/dK8/SxuqOSZCFKfd4JfOhC6eww5u+upyOH2OOCccKbQjytL5GuNYaEdbXYYmIbDqq1hqZgg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WTpCCFxaCae5yoMZesDTsHah2Ea6RrsV7A3/N/pcEFJ/DJeSmN4ooQaT09sICot0mCh9248rpn8cYrSKUESOM+pz02ohFFHxbNpu7hPVR/NNk9uhnCRhwMlApXjkaxXx/AB4qxo425yo8FZDwMXpSgX538UMk0yWjCCiLo72nxI=
Received: by 10.142.232.20 with SMTP id e20mr133901wfh.187.1205932626042;
        Wed, 19 Mar 2008 06:17:06 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Wed, 19 Mar 2008 06:17:06 -0700 (PDT)
Message-ID: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
Date: Wed, 19 Mar 2008 09:17:06 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader getFieldNames()
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
  Can someone please guide me on how to use IndexReader's
getFieldNames()	method properly?
I want to get all the filed names in the index. Currently I am getitng
it via Document object but that not wt i want.
I am implementing the code below and what I get is a very long string
of characters.. perhaps equivalent to the number of records in the
index.

Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
int i = 0;
while (c.iterator().hasNext()) {
    Field s = (Field) c.iterator().next();
    out.print(s.name());
    i++;
}

Thanks,
Varun.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 13:20:46 2008
Return-Path: <java-user-return-33243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44333 invoked from network); 19 Mar 2008 13:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 13:20:45 -0000
Received: (qmail 5788 invoked by uid 500); 19 Mar 2008 13:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5716 invoked by uid 500); 19 Mar 2008 13:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5705 invoked by uid 99); 19 Mar 2008 13:20:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:20:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:19:59 +0000
Received: by rv-out-0910.google.com with SMTP id k20so196617rvb.5
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 06:20:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lt1kM+zjy8MpAthJUdCuwnw6QAf5/RxXdOltJM/P3X8=;
        b=MhPQKzla9ohiikxBOsjD3Qye77kUKyxqMXdypASkhPfTnvF3WcOggKLICqXRutOPKxZUZGJz2qBrFG+qLLvXC0deqmHLnDLVtdYXYp1hozFJW0mp4N8nbE2m6CDVf+9am8YwDjbfv4kX0SzhH926Pr6Eo69k2kz1rA3rR0r1oFs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kg4RDfu7tbAP61PRhL3ZGybBia2PQyZPxSJD1ZLfRIyQh0DgvigbAnZ6ljGV65HxtPml7BPTMrWDjcbkZuEB6dAv9aOOtTL17DDY/aZLh37wknHk6c+CM7LrAq98bBBt1D8WTS9YjqsffkuoqUSxCx0EEg8RTgUUStYoPnYB41A=
Received: by 10.140.132.8 with SMTP id f8mr87328rvd.198.1205932810455;
        Wed, 19 Mar 2008 06:20:10 -0700 (PDT)
Received: by 10.141.154.21 with HTTP; Wed, 19 Mar 2008 06:20:10 -0700 (PDT)
Message-ID: <786fde50803190620x8bc5987pc2a7815ee912b987@mail.gmail.com>
Date: Wed, 19 Mar 2008 15:20:10 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader getFieldNames()
In-Reply-To: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8959_6942282.1205932810442"
References: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8959_6942282.1205932810442
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can you give an example of the output?
What does out.print() do? Does it print spaces between records on new-lines?

On Wed, Mar 19, 2008 at 3:17 PM, varun sood <vsood2@gmail.com> wrote:

> Hi All,
>  Can someone please guide me on how to use IndexReader's
> getFieldNames() method properly?
> I want to get all the filed names in the index. Currently I am getitng
> it via Document object but that not wt i want.
> I am implementing the code below and what I get is a very long string
> of characters.. perhaps equivalent to the number of records in the
> index.
>
> Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
> int i = 0;
> while (c.iterator().hasNext()) {
>    Field s = (Field) c.iterator().next();
>    out.print(s.name());
>    i++;
> }
>
> Thanks,
> Varun.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_8959_6942282.1205932810442--

From java-user-return-33244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 13:55:20 2008
Return-Path: <java-user-return-33244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63075 invoked from network); 19 Mar 2008 13:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 13:55:20 -0000
Received: (qmail 77966 invoked by uid 500); 19 Mar 2008 13:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77940 invoked by uid 500); 19 Mar 2008 13:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77929 invoked by uid 99); 19 Mar 2008 13:55:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:55:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:54:33 +0000
Received: by wf-out-1314.google.com with SMTP id 28so413534wff.20
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 06:54:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=zOO4yS6kAcFiKGs2VnTgZ4cppuVH9xeh5Yl8bA/4y3c=;
        b=FCDp0d4mPzhT7UDc22EcgBxyP+jDNRWJyu8MIBWzcfZPERAaTfpgDT2dbjxQwzy2nRlEgz77a5ebqArcGihvukZsBiAPgeYP6KMo8zt4KWoNiKR3i7tB+gxiiXOkhQxexlWqN4t1aKdC47PGv3l3N6GpO7oYnoK5DeblFLZfoJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rjhAXWxn1ZbMfOPrzGVt3GaVTlzijDDcUG2ydv3sIsU2AT6VILlAWqNM1Byipqzpe3F/VysBf9nlxN4tgHuBIOl9NDEmR29I3Xly1gaI6CvPWOpHlTtLOsox07Ivdv7kk2PeM9m/+qvUUo28FI6QMynyFyCl1K0dxFljgtYwDdA=
Received: by 10.143.164.19 with SMTP id r19mr160737wfo.179.1205934884790;
        Wed, 19 Mar 2008 06:54:44 -0700 (PDT)
Received: by 10.142.245.20 with HTTP; Wed, 19 Mar 2008 06:54:44 -0700 (PDT)
Message-ID: <74f928500803190654j61cd6ebcg117547f22783472d@mail.gmail.com>
Date: Wed, 19 Mar 2008 15:54:44 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi process writer access to an index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17583_7284592.1205934884787"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17583_7284592.1205934884787
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,


I'm trying to write to a specific index from several different processes and
encounter problems with locked files (deletable for example).

I don't perform any specific locking because as I understand it there should
be file-specific locking mechanism used by lucene API. This doesn't seem to
be working as I am able to instantiate an IndexWriter on the same index
simultaneously, but I encounter problems when I try to close/optimize it .



Please help me understand if lucene doesn't support this kind of access, and
what's the proper way to write to the same index from two or more different
processes/computers.



Thanks,

Eran S.

------=_Part_17583_7284592.1205934884787--

From java-user-return-33245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 13:59:20 2008
Return-Path: <java-user-return-33245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65252 invoked from network); 19 Mar 2008 13:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 13:59:20 -0000
Received: (qmail 89244 invoked by uid 500); 19 Mar 2008 13:59:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89214 invoked by uid 500); 19 Mar 2008 13:59:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89200 invoked by uid 99); 19 Mar 2008 13:59:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:59:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:58:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so367708fga.27
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 06:58:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PKkHRT/beYyunucCxRL1QQ+PFbqPWwl2G5jtvfps+KY=;
        b=oG8br6Am9GVoyHck8Rl4Gl9bcRiEjzPwRc1LGulRL3L9CP9yOPIrFa80EgQtqI9i06aPhQZ7wfhjo4BhkmogdaiQWlOol1KbG8LwHWgP/oesdP2+ZvlpLI+UQNWLBq47QfTQh9JCXKCxMOVNIBwTAzQSPXutptyG7jNFIXk8OyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pf+PuefYBobPYnbDZqUZNo/MjoxyGqaWbwvs/z9AoY0Vl0znExOU8jnDT2TPT5Y7UNCoV17Tv1/2URZpU7V8UcXfw5MEcK4KF2pEG777DtuS0zeAtMEfIvs0ocAMwz9vh3KGsthF0y6DX1ZxIidH9x+zmGBqHer3co8afudUXAI=
Received: by 10.82.124.10 with SMTP id w10mr778346buc.18.1205935117567;
        Wed, 19 Mar 2008 06:58:37 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Wed, 19 Mar 2008 06:58:37 -0700 (PDT)
Message-ID: <359a92830803190658y52e6f007v1d6a75af94511bae@mail.gmail.com>
Date: Wed, 19 Mar 2008 09:58:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi process writer access to an index
In-Reply-To: <74f928500803190654j61cd6ebcg117547f22783472d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16928_28865446.1205935117555"
References: <74f928500803190654j61cd6ebcg117547f22783472d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16928_28865446.1205935117555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You'll get more meaningful answers if you provide some details:
Things that come to mind:

op system (windows? *nix?)

file system (NFS? local? NTFS?)

An example of the error you receive (a stack trace would be good).

The code you're executing when you get the error.

Imagine you're trying to advise someone else and think about
what you'd find useful and try to provide that, please.

Best
Erick


On Wed, Mar 19, 2008 at 9:54 AM, Eran Sevi <eransevi@gmail.com> wrote:

> Hi,
>
>
> I'm trying to write to a specific index from several different processes
> and
> encounter problems with locked files (deletable for example).
>
> I don't perform any specific locking because as I understand it there
> should
> be file-specific locking mechanism used by lucene API. This doesn't seem
> to
> be working as I am able to instantiate an IndexWriter on the same index
> simultaneously, but I encounter problems when I try to close/optimize it .
>
>
>
> Please help me understand if lucene doesn't support this kind of access,
> and
> what's the proper way to write to the same index from two or more
> different
> processes/computers.
>
>
>
> Thanks,
>
> Eran S.
>

------=_Part_16928_28865446.1205935117555--

From java-user-return-33246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 13:59:37 2008
Return-Path: <java-user-return-33246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65491 invoked from network); 19 Mar 2008 13:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 13:59:37 -0000
Received: (qmail 91376 invoked by uid 500); 19 Mar 2008 13:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91350 invoked by uid 500); 19 Mar 2008 13:59:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91339 invoked by uid 99); 19 Mar 2008 13:59:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 06:59:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:58:49 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1043618ugc.29
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 06:58:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=CXrXHLJzUsUzg2MJN/FKYkscsp2EtijtEmbX42j7ftQ=;
        b=gedo8leCsLDa16JgO3D2DdzEnOsT1lgnLVJHKnPGpwQwefscgJADG09I/OkBf4YIGvLF96YXLeFxRlTw42sVHFnVflsHYto4Y75GLatmpzztl0FwsNFvbIKsXCRKSB93/MZlSGNRukMizdC9B1TFjPR7MSHXtZ/7Gn4InyuXfUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=M2hO/ntAOvpWjQFjMuZr0QwO2Qid2XdLz/bn6bj2wxW3U+yDbxKlfCcipGUtfjYEqlhG0lvvXhaDYTxZ7lduwGYzBCsukd2ySh6hil1nfwOqY4/7kNQYGcJKGzkGzAO+FU5f7kMyZZNxk5knqJrx6jn5skrrD32zX9swliAAdtU=
Received: by 10.142.158.17 with SMTP id g17mr159559wfe.234.1205935137174;
        Wed, 19 Mar 2008 06:58:57 -0700 (PDT)
Received: by 10.142.245.20 with HTTP; Wed, 19 Mar 2008 06:58:57 -0700 (PDT)
Message-ID: <74f928500803190658q70c0e0a2x7f6ba7101057139a@mail.gmail.com>
Date: Wed, 19 Mar 2008 15:58:57 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi process writer access to an index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17591_368200.1205935137183"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17591_368200.1205935137183
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm trying to write to a specific index from several different processes and
encounter problems with locked files (deletable for example).
I don't perform any specific locking because as I understand it there should
be file-specific locking mechanism used by lucene API. This doesn't seem to
be working as I am able to instantiate an IndexWriter on the same index
simultaneously, but I encounter problems when I try to close/optimize it .

Please help me understand if lucene doesn't support this kind of access, and
what's the proper way to write to the same index from two or more different
processes/computers.

Thanks,
Eran.

------=_Part_17591_368200.1205935137183--

From java-user-return-33247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 14:09:37 2008
Return-Path: <java-user-return-33247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70231 invoked from network); 19 Mar 2008 14:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 14:09:37 -0000
Received: (qmail 14592 invoked by uid 500); 19 Mar 2008 14:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14404 invoked by uid 500); 19 Mar 2008 14:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14393 invoked by uid 99); 19 Mar 2008 14:09:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:09:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 14:08:49 +0000
Received: by qb-out-0506.google.com with SMTP id o21so399467qba.9
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 07:08:57 -0700 (PDT)
Received: by 10.143.166.18 with SMTP id t18mr176123wfo.175.1205935737451;
        Wed, 19 Mar 2008 07:08:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i12sm396106wxd.31.2008.03.19.07.08.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 19 Mar 2008 07:08:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <74f928500803190658q70c0e0a2x7f6ba7101057139a@mail.gmail.com>
References: <74f928500803190658q70c0e0a2x7f6ba7101057139a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <02550D6D-AE3D-4D8E-BEF5-BAE7FA4E574E@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Multi process writer access to an index
Date: Wed, 19 Mar 2008 10:08:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you using multiple computers?

Probably what's happening is: because older versions of Lucene store  
the lock file in the /tmp directory by default, multiple computers  
sharing an index will be able to open multiple writers because they  
have their own /tmp directories.  They don't see each other's lock.

Newer versions of Lucene store the write lock in the directory  
itself, which resolves this.  You can also change the lock directory  
to a shared mount point.

But ... are you using NFS?

Mike

Eran Sevi wrote:
> Hi,
>
> I'm trying to write to a specific index from several different  
> processes and
> encounter problems with locked files (deletable for example).
> I don't perform any specific locking because as I understand it  
> there should
> be file-specific locking mechanism used by lucene API. This doesn't  
> seem to
> be working as I am able to instantiate an IndexWriter on the same  
> index
> simultaneously, but I encounter problems when I try to close/ 
> optimize it .
>
> Please help me understand if lucene doesn't support this kind of  
> access, and
> what's the proper way to write to the same index from two or more  
> different
> processes/computers.
>
> Thanks,
> Eran.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 14:11:25 2008
Return-Path: <java-user-return-33248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71912 invoked from network); 19 Mar 2008 14:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 14:11:25 -0000
Received: (qmail 20972 invoked by uid 500); 19 Mar 2008 14:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20946 invoked by uid 500); 19 Mar 2008 14:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20935 invoked by uid 99); 19 Mar 2008 14:11:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:11:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 14:10:35 +0000
Received: by wf-out-1314.google.com with SMTP id 28so419482wff.20
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 07:10:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=izJvengcTkBqMqe7skb/PoIx4IGHlvF7r5Xl6rb7RYA=;
        b=pJ0vhUx/z+JZEcJBnOKsHKzQhAFBCLQ/n/cLhXs+gGW9rJP43Z2usM3CjieoLTpQdE4wnOYR9YP+DOFaryeUOca9S6QyVSJ7bheoUsuo4HDd075phZ9vQmNomXW0E2dpT4qSp+i81BgKQJ1bDIPSY7QWKgYcbdHYOAXKtkZ84IQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=oMMcqhQ/bemLY431uVlHd3iz7hPl0qZoTof90WwefdgDWLQ0KsIqNME9WCm1Y/MfM+9bXrsoPGHIGN4eH/AWi25sbF6YN6EGOduc/QnKOuiI+xzu6asttJdBJ836DaA/wWbttsDO6hrGTwGGfiR1NAhyASpO+pTmMZTlYh3/1h0=
Received: by 10.142.142.16 with SMTP id p16mr184112wfd.123.1205935846651;
        Wed, 19 Mar 2008 07:10:46 -0700 (PDT)
Received: by 10.142.245.20 with HTTP; Wed, 19 Mar 2008 07:10:46 -0700 (PDT)
Message-ID: <74f928500803190710w30085608h599abfd1963578d1@mail.gmail.com>
Date: Wed, 19 Mar 2008 16:10:46 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi process writer access to an index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17617_25885706.1205935846638"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17617_25885706.1205935846638
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry for any duplicate posts.

Actually I'm using the latest "final" Lucene.Net and I hope this problem is
not unique to this version.
The OS is windows, FS - NTFS.


Here's an example of what I do in each process (which may reside on a
different computer):



            writer = new IndexWriter(fi, new StandardAnalyzer(
threadData.stopwords), true);



            while (currentFile < threadData.files.Length)

            {

                //Add document

                AddDocument(threadData.files[currentFile], writer);



               writer.Close();



               currentFile++;

            }

The error I get is (each time it's a different file):

"The process cannot access the file
'D:\\Temp\\xml\\Lucene\\R3MTIndex\\_1.fdt' because it is being used by
another process."
"   at System.IO.__Error.WinIOError(Int32 errorCode, String
maybeFullPath)\r\n   at System.IO.File.Delete(String path)\r\n   at
Lucene.Net.Store.FSDirectory.CreateOutput(String name)\r\n   at
Lucene.Net.Index.FieldsWriter..ctor(Directory d, String segment, FieldInfos
fn)\r\n   at Lucene.Net.Index.SegmentMerger.MergeFields()\r\n   at
Lucene.Net.Index.SegmentMerger.Merge()\r\n   at
Lucene.Net.Index.IndexWriter.MergeSegments(Int32 minSegment, Int32
end)\r\n   at Lucene.Net.Index.IndexWriter.MergeSegments(Int32
minSegment)\r\n   at Lucene.Net.Index.IndexWriter.FlushRamSegments()\r\n
at Lucene.Net.Index.IndexWriter.Close()\r\n   at AAIndexer.RunThread(Object
data) in D:\\LuceneWrapper\\AAIndexer.cs:line 169\r\n   at
System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n   at
System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
ContextCallback callback, Object state)\r\n   at
System.Threading.ThreadHelper.ThreadStart(Object obj)"

Thanks.


=============================================
You'll get more meaningful answers if you provide some details:

Things that come to mind:



op system (windows? *nix?)



file system (NFS? local? NTFS?)



An example of the error you receive (a stack trace would be good).



The code you're executing when you get the error.



Imagine you're trying to advise someone else and think about what you'd find
useful and try to provide that, please.



Best

Erick





On Wed, Mar 19, 2008 at 9:54 AM, Eran Sevi <eransevi@gmail.com> wrote:



> Hi,

>

>

> I'm trying to write to a specific index from several different

> processes and encounter problems with locked files (deletable for

> example).

>

> I don't perform any specific locking because as I understand it there

> should be file-specific locking mechanism used by lucene API. This

> doesn't seem to be working as I am able to instantiate an IndexWriter

> on the same index simultaneously, but I encounter problems when I try

> to close/optimize it .

>

>

>

> Please help me understand if lucene doesn't support this kind of

> access, and what's the proper way to write to the same index from two

> or more different processes/computers.

>

>

>

> Thanks,

>

> Eran S.

>

------=_Part_17617_25885706.1205935846638--

From java-user-return-33249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 14:17:50 2008
Return-Path: <java-user-return-33249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75064 invoked from network); 19 Mar 2008 14:17:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 14:17:50 -0000
Received: (qmail 36985 invoked by uid 500); 19 Mar 2008 14:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36946 invoked by uid 500); 19 Mar 2008 14:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36935 invoked by uid 99); 19 Mar 2008 14:17:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 07:17:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 14:17:03 +0000
Received: by rn-out-0910.google.com with SMTP id a46so295872rne.9
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 07:17:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=W/eiM3O83EWpN5eko8WAklA0k5iCp2mHXbiVCH/E22U=;
        b=SKdV8xGM1XKSE7GA1oNucOMX9BH2L0vN3fF4bkMjHQIvRVTrhj9Y+/RiF+dXajUx8vx6FTjZFM5arCWvYlt7ptBnumwAWy7xX7S3tN169GvhP8O8r+IXts7Erxgd/03PZZFccXbVRidPQk9LjUbTuBnQhicM/haoCf9KYC3aNys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=SKu2TZ5l/KY8uPG5JYfKqOAR9UeY5eqAFT96cJ8z095P1cnZ31tMfyjkLQhKXl1GX/92Stf0JvHlYMHcrLzW2gja7t05jU7MHcbTzWHL4OTV7ahoU3Ati1qxUjmyzM44RXfwFCd8UWGjhCfFBg9adGxWtdLLymBG9DPqVrhPPgY=
Received: by 10.114.134.20 with SMTP id h20mr1354393wad.91.1205936233185;
        Wed, 19 Mar 2008 07:17:13 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Wed, 19 Mar 2008 07:17:13 -0700 (PDT)
Message-ID: <9d2777b60803190717x143fdc4fh86d90ba901c27c63@mail.gmail.com>
Date: Wed, 19 Mar 2008 11:17:13 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene on a cluster environment
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24025_25666069.1205936233173"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24025_25666069.1205936233173
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello there! I have just started with lucene. Bought the Lucene in action
book [right now I'm at chap 4, plus the 10th chapter, great explanation by
Terence from jGuru, really nice stuff], also I'm reading most that I can at
the wiki :)
Still a bit lost with some stuff, mostly with clusters :)
Our app is running in a cluster environment, now we are going to add search
support for it, and lucene was the choice for it. Since I have many SLSB
spread across the cluster, I would like to know some blueprints to use
lucene in these situation.

Our first idea, was to store the IndexWriter as an MBean inside Jboss and
use it as an HA-Singleton, which would guarantee its uniqueness inside the
cluster. I just would like to get some feedback from you guys on it :)

Best regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_24025_25666069.1205936233173--

From java-user-return-33250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 15:17:44 2008
Return-Path: <java-user-return-33250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54000 invoked from network); 19 Mar 2008 15:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 15:17:43 -0000
Received: (qmail 82080 invoked by uid 500); 19 Mar 2008 15:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82049 invoked by uid 500); 19 Mar 2008 15:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82038 invoked by uid 99); 19 Mar 2008 15:17:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 08:17:34 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:16:46 +0000
In-Reply-To: <9d2777b60803190717x143fdc4fh86d90ba901c27c63@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene on a cluster environment
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF9E5D8350.D31CB102-ON86257411.0051D6AE-86257411.0053F46C@nasi.com>
From: Robert.Hastings@ancept.com
Date: Wed, 19 Mar 2008 10:16:29 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 03/19/2008
 10:16:53,
	Serialize complete at 03/19/2008 10:16:53
Content-Type: multipart/alternative; boundary="=_alternative 0053F46686257411_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0053F46686257411_=
Content-Type: text/plain; charset="US-ASCII"

We went through this a couple of years ago.  I couldn't find the thread in 
the archive but the jist of it is as follows:

1.  We have a singleton thread that does all of the writing.  new 
Documents and deletions are queued to the writer via a database table.
2.  Since searchers are "point in time" you can user the same searcher in 
each cluster member ( this limits the amount of open files), but you need 
to refresh the searcher when the index changes.  We use a SearcherHolder 
and a single SearcherManager class to manage this.  Events are sent by the 
writer and received by the searcher holder when the index changes.
3.  Finally, older versions (1.4 and earlier) of Lucene had problems with 
having the index on a shared directory.  I think most of these issues have 
been resolved.

Good Luck.



"Vinicius Carvalho" <viniciusccarvalho@gmail.com> 
03/19/2008 09:17 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Lucene on a cluster environment






Hello there! I have just started with lucene. Bought the Lucene in action
book [right now I'm at chap 4, plus the 10th chapter, great explanation by
Terence from jGuru, really nice stuff], also I'm reading most that I can 
at
the wiki :)
Still a bit lost with some stuff, mostly with clusters :)
Our app is running in a cluster environment, now we are going to add 
search
support for it, and lucene was the choice for it. Since I have many SLSB
spread across the cluster, I would like to know some blueprints to use
lucene in these situation.

Our first idea, was to store the IndexWriter as an MBean inside Jboss and
use it as an HA-Singleton, which would guarantee its uniqueness inside the
cluster. I just would like to get some feedback from you guys on it :)

Best regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"


--=_alternative 0053F46686257411_=--

From java-user-return-33251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 15:36:43 2008
Return-Path: <java-user-return-33251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74787 invoked from network); 19 Mar 2008 15:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 15:36:41 -0000
Received: (qmail 31879 invoked by uid 500); 19 Mar 2008 15:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31242 invoked by uid 500); 19 Mar 2008 15:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31231 invoked by uid 99); 19 Mar 2008 15:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 08:36:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:35:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jc0K9-0002Sr-QR
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 08:35:29 -0700
Message-ID: <16139007.post@talk.nabble.com>
Date: Wed, 19 Mar 2008 08:35:29 -0700 (PDT)
From: luceneuser <ajith@clickjobs.com>
To: java-user@lucene.apache.org
Subject: Relevance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajith@clickjobs.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,


 I need help on retrieving results based on relevance + freshness. As of
now, i get based on either of the fields, either on relevance or freshness.

 how can i achieve this. Lucene retrieves results on relevance but also
fetches old results too. i need more relevant results with freshness too.



Regards,
Destin~ed
-- 
View this message in context: http://www.nabble.com/Relevance-tp16139007p16139007.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 16:01:54 2008
Return-Path: <java-user-return-33252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1798 invoked from network); 19 Mar 2008 16:01:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 16:01:52 -0000
Received: (qmail 2177 invoked by uid 500); 19 Mar 2008 16:01:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2119 invoked by uid 500); 19 Mar 2008 16:01:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2038 invoked by uid 99); 19 Mar 2008 16:01:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 09:01:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:00:53 +0000
Received: by rn-out-0910.google.com with SMTP id a46so365669rne.9
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 09:01:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Mo58tlonIzq2mdgJs0TWU0/9ZA9W4bZ0t6gIa5xXRcM=;
        b=ODs5Z7+vQyaI1nO0pYtnN6oAkxuVdFLxtnhZnA0+/n3ArT4r0f2f6EPnTeevGpPi5f+Gx8pTx8YtK+6D4GhJrk55Np9HtwL645KLXBgO1QiQSK/tyEFDwaAldcxt1aEkK8UZmSbK2BXq7U4JX4M2rk8jvF+tWPi2TlKpauTkWyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jbG0/M/8XaEYrvzh3q4wfTIbBgrrw9UobtsXZx+Ng5dX4vZjil9i2Oih5oTupTerVu4AfpUs8Liv4zmadBdJVWNcGhXktz7MaDkHEdO4vHl8gif/OEu9jxi/RE7rsqu/ws24H7CeN8l9tpj3niYEH1Kx2rjt3N4bmJXSgL120HE=
Received: by 10.114.12.9 with SMTP id 9mr1624222wal.23.1205942468427;
        Wed, 19 Mar 2008 09:01:08 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Wed, 19 Mar 2008 09:01:08 -0700 (PDT)
Message-ID: <9d2777b60803190901g41139e6dje091938141d839d1@mail.gmail.com>
Date: Wed, 19 Mar 2008 13:01:08 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Lucene on a cluster environment
In-Reply-To: <OF9E5D8350.D31CB102-ON86257411.0051D6AE-86257411.0053F46C@nasi.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24815_24695185.1205942468424"
References: <9d2777b60803190717x143fdc4fh86d90ba901c27c63@mail.gmail.com>
	 <OF9E5D8350.D31CB102-ON86257411.0051D6AE-86257411.0053F46C@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24815_24695185.1205942468424
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot for sharing this :)
I'll try to follow your guidelines

Regards

---------- Forwarded message ----------
From: <Robert.Hastings@ancept.com>
Date: Wed, Mar 19, 2008 at 12:16 PM
Subject: Re: Lucene on a cluster environment
To: java-user@lucene.apache.org


We went through this a couple of years ago.  I couldn't find the thread in
the archive but the jist of it is as follows:

1.  We have a singleton thread that does all of the writing.  new
Documents and deletions are queued to the writer via a database table.
2.  Since searchers are "point in time" you can user the same searcher in
each cluster member ( this limits the amount of open files), but you need
to refresh the searcher when the index changes.  We use a SearcherHolder
and a single SearcherManager class to manage this.  Events are sent by the
writer and received by the searcher holder when the index changes.
3.  Finally, older versions (1.4 and earlier) of Lucene had problems with
having the index on a shared directory.  I think most of these issues have
been resolved.

Good Luck.



"Vinicius Carvalho" <viniciusccarvalho@gmail.com>
03/19/2008 09:17 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Lucene on a cluster environment






Hello there! I have just started with lucene. Bought the Lucene in action
book [right now I'm at chap 4, plus the 10th chapter, great explanation by
Terence from jGuru, really nice stuff], also I'm reading most that I can
at
the wiki :)
Still a bit lost with some stuff, mostly with clusters :)
Our app is running in a cluster environment, now we are going to add
search
support for it, and lucene was the choice for it. Since I have many SLSB
spread across the cluster, I would like to know some blueprints to use
lucene in these situation.

Our first idea, was to store the IndexWriter as an MBean inside Jboss and
use it as an HA-Singleton, which would guarantee its uniqueness inside the
cluster. I just would like to get some feedback from you guys on it :)

Best regards

--
"In a world without fences and walls, who needs Gates and Windows?"




-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_24815_24695185.1205942468424--

From java-user-return-33253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 16:09:35 2008
Return-Path: <java-user-return-33253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12068 invoked from network); 19 Mar 2008 16:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 16:09:34 -0000
Received: (qmail 36556 invoked by uid 500); 19 Mar 2008 16:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36528 invoked by uid 500); 19 Mar 2008 16:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36517 invoked by uid 99); 19 Mar 2008 16:09:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 09:09:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:08:43 +0000
Received: by rn-out-0910.google.com with SMTP id a46so371031rne.9
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 09:08:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=EkvjkE7a0w0GfRdVHqnO8xuaNxVYSBIPR5Nj68E8isE=;
        b=RnHfpn2Kgd0r5FSY1A3SK+eBaO/HNy2ffdJwoFrxTkCTAddw88mGt1epR6GhSE9YPdtIuDwan+PGj8CXXlu18HwDR+Xire1vKOxbu8fifOPO2dWrgeX/6nnWEnROdBRxiPxOEDZpMrL/rRiS5SS+Xi1YwVWncqv5FJTLO3gXUBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WlrbwZin08s/aITZBAbIJU1v5qWXM1CbMvecpObNjtnxEGjQTPW7ZkAobt2b1WjzfVTdH13GUuAdphrZV41zz61yeGuXi+NzphcqvWiR+gs2jI9EnVhAxbF3f9GQMgDM0Rmw5w+6+REVzYqsh5vjpS28gqkFELRF2MIIFrLEiUo=
Received: by 10.115.47.1 with SMTP id z1mr1529685waj.149.1205942930118;
        Wed, 19 Mar 2008 09:08:50 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Wed, 19 Mar 2008 09:08:50 -0700 (PDT)
Message-ID: <9d2777b60803190908p57c6d1c6qe3638cc4fe364f3e@mail.gmail.com>
Date: Wed, 19 Mar 2008 13:08:50 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Adding new documents to index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24869_899971.1205942930118"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24869_899971.1205942930118
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello there! Since I've just begun with lucene, some concepts are kinda new
for me :). One of the is the whole indexing process. Well, AFAIK, indexing
should happen in a batch process right, to maximize the time spent on this
operation. One issue tough, is that our client wants "instants search
results", I mean, after something is added, the next search should have it
available. Well, it's almost impossible to convince him (and I believe you
guys know how this works) that indexing should not happen online (maybe I'm
just wrong here as well).

Well, my question is, when I have a reasonable amount of indexed data, how
expensive is to add a new document? Does it re-builds the entire index? I
believe we'll have a small amount of data (when compare to things I've seen
lucene is capable of), probably 50k of html docs, 10k of pdf, and 5--6
million rows of database information. With that scenario, an online index
(plus optimize) would be a good idea?

Best regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_24869_899971.1205942930118--

From java-user-return-33254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 16:27:15 2008
Return-Path: <java-user-return-33254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25598 invoked from network); 19 Mar 2008 16:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 16:27:15 -0000
Received: (qmail 68686 invoked by uid 500); 19 Mar 2008 16:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68658 invoked by uid 500); 19 Mar 2008 16:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68647 invoked by uid 99); 19 Mar 2008 16:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 09:27:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:26:28 +0000
Received: by wf-out-1314.google.com with SMTP id 28so476752wff.20
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 09:26:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=EW8N8P+XL5WDwmLMjY0tfQ8Kji6FPpLmA7nCFPjtJd0=;
        b=Ep5jZ4F0eHHTcRZVVEM/7yebgxg3+/oSK4J85RVNH3aj7LmB89CeRpQXTXGj/iYT3j7zez+bNsZ/EvfJMQf/wAxhq9WWYHDrkdzV9dR46tGQqLaOt14S1GFzDmzc6AKYVWRmM/DlySV/nPxUxSw23hwkrWfxP49GVg+m/KuNYLQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=g7rVZWSaVKCAol2H+4eM4lNDFfjkIJ9CZvgKbPHdAq0hXcil1+nZzqrp4NRAMXhkdW+sjfOwX+DfmXNXwkkBYQ1xZUxUe/tIsDxsZueWToRj/oGpTLoppJuyyuZC207SM3k1nMD6raNh2uh8BBPru4CB7GVJZw8KnjTZ/e9Z5HQ=
Received: by 10.143.162.8 with SMTP id p8mr380635wfo.49.1205943999947;
        Wed, 19 Mar 2008 09:26:39 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Wed, 19 Mar 2008 09:26:39 -0700 (PDT)
Message-ID: <800d6e9c0803190926q5d10fa4td77334830f6c3d88@mail.gmail.com>
Date: Wed, 19 Mar 2008 12:26:39 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader getFieldNames()
In-Reply-To: <786fde50803190620x8bc5987pc2a7815ee912b987@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
	 <786fde50803190620x8bc5987pc2a7815ee912b987@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,
 The code I pasted is not working.. sorry abt that..
 The code which is working is ..

 Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
 int i = 0;
 while (c.iterator().hasNext()) {
    out.print(c.iterator().next(););
    i++;
 }

This hangs my machine for minutes minutes on my dual core to optuput
the result.
I am doing sth wrong.
"I mean I do not know where the field names are stored.. " in the enum
and how to get them.
Perhaps its a trivial thing for a person who has used indexReader to
list all the fields in the index.

On Wed, Mar 19, 2008 at 9:20 AM, Shai Erera <serera@gmail.com> wrote:
> Can you give an example of the output?
> What does out.print() do? Does it print spaces between records on new-lines?
>
>
> On Wed, Mar 19, 2008 at 3:17 PM, varun sood <vsood2@gmail.com> wrote:
>
> > Hi All,
> >  Can someone please guide me on how to use IndexReader's
> > getFieldNames() method properly?
> > I want to get all the filed names in the index. Currently I am getitng
> > it via Document object but that not wt i want.
> > I am implementing the code below and what I get is a very long string
> > of characters.. perhaps equivalent to the number of records in the
> > index.
> >
> > Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
> > int i = 0;
> > while (c.iterator().hasNext()) {
> >    Field s = (Field) c.iterator().next();
> >    out.print(s.name());
> >    i++;
> > }
> >
> > Thanks,
> > Varun.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
>
> Shai Erera
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 16:43:29 2008
Return-Path: <java-user-return-33255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35373 invoked from network); 19 Mar 2008 16:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 16:43:29 -0000
Received: (qmail 95174 invoked by uid 500); 19 Mar 2008 16:43:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95149 invoked by uid 500); 19 Mar 2008 16:43:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95138 invoked by uid 99); 19 Mar 2008 16:43:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 09:43:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of constantin.radchenko@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:42:42 +0000
Received: by fk-out-0910.google.com with SMTP id 19so614327fkr.5
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 09:42:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kiZX8fcr4aYYhJ6WU1EQzCxG6hpX1GA49N18H2PVGnw=;
        b=TkH1XW6g/acVNYOMa3IgAkt5DJvMHPCgFJ0SHrMC5jmSU3rfOZv9ImqyBnjZgzYHOBucIkiEyDBH5pDRD7xsM/7nakxM3+AjDCA7pk3tTp6RUd0NJhq6vJRer7MTqqzEsn+xnfCJOEBJk93b+jAlgwJqShu7UaY4sP1L1isbuAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZhF3IpM2lggi6gWsQ5l5nbNuH3qFbDIUYTAiP5lKo3TXufQaQ59T+HS6/uFpRy4wyFYjGZeTdCeqM4kZajqxsf7PQnKmkqtOZa1S+DuyB4Vz2/JPawzhSDOtLb0hgbovBX+t2ITwoHkN7lIX2OsREi+/zxLnas4hQR9027DIFDE=
Received: by 10.82.124.10 with SMTP id w10mr1160220buc.18.1205944969865;
        Wed, 19 Mar 2008 09:42:49 -0700 (PDT)
Received: by 10.82.116.14 with HTTP; Wed, 19 Mar 2008 09:42:49 -0700 (PDT)
Message-ID: <d7b3e9930803190942r55d0330cte6d8e974186688fe@mail.gmail.com>
Date: Wed, 19 Mar 2008 18:42:49 +0200
From: "Constantin Radchenko" <constantin.radchenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader getFieldNames()
In-Reply-To: <800d6e9c0803190926q5d10fa4td77334830f6c3d88@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18585_33000874.1205944969824"
References: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
	 <786fde50803190620x8bc5987pc2a7815ee912b987@mail.gmail.com>
	 <800d6e9c0803190926q5d10fa4td77334830f6c3d88@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18585_33000874.1205944969824
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try this :

for (Iterator iter = reader.getFieldNames(FieldOption.ALL).iterator();
iter.hasNext();) {
                String fieldName = (String)iter.next();
}

Your code creates iterator each time when you call next()
Also,  if your method  out.print() gets String as parameter, casting is
redundant

Regards

On Wed, Mar 19, 2008 at 6:26 PM, varun sood <vsood2@gmail.com> wrote:

> Hi Shai,
>  The code I pasted is not working.. sorry abt that..
>  The code which is working is ..
>
>  Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
>  int i = 0;
>  while (c.iterator().hasNext()) {
>     out.print(c.iterator().next(););
>    i++;
>  }
>
> This hangs my machine for minutes minutes on my dual core to optuput
> the result.
> I am doing sth wrong.
> "I mean I do not know where the field names are stored.. " in the enum
> and how to get them.
> Perhaps its a trivial thing for a person who has used indexReader to
> list all the fields in the index.
>
> On Wed, Mar 19, 2008 at 9:20 AM, Shai Erera <serera@gmail.com> wrote:
> > Can you give an example of the output?
> > What does out.print() do? Does it print spaces between records on
> new-lines?
> >
> >
> > On Wed, Mar 19, 2008 at 3:17 PM, varun sood <vsood2@gmail.com> wrote:
> >
> > > Hi All,
> > >  Can someone please guide me on how to use IndexReader's
> > > getFieldNames() method properly?
> > > I want to get all the filed names in the index. Currently I am getitng
> > > it via Document object but that not wt i want.
> > > I am implementing the code below and what I get is a very long string
> > > of characters.. perhaps equivalent to the number of records in the
> > > index.
> > >
> > > Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
> > > int i = 0;
> > > while (c.iterator().hasNext()) {
> > >    Field s = (Field) c.iterator().next();
> > >    out.print(s.name());
> > >    i++;
> > > }
> > >
> > > Thanks,
> > > Varun.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> >
> > Shai Erera
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18585_33000874.1205944969824--

From java-user-return-33256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 16:47:50 2008
Return-Path: <java-user-return-33256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37658 invoked from network); 19 Mar 2008 16:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 16:47:50 -0000
Received: (qmail 6188 invoked by uid 500); 19 Mar 2008 16:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5238 invoked by uid 500); 19 Mar 2008 16:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5227 invoked by uid 99); 19 Mar 2008 16:47:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 09:47:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.143 as permitted sender)
Received: from [65.55.175.143] (HELO blu139-omc1-s3.blu139.hotmail.com) (65.55.175.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:47:00 +0000
Received: from BLU119-W39 ([65.55.162.183]) by blu139-omc1-s3.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 19 Mar 2008 09:47:10 -0700
Message-ID: <BLU119-W392DE50FC2A1DD5BF0DDB0B9070@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_548ac722-ba91-41ab-ac40-ae99bbce246e_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene on a cluster environment
Date: Wed, 19 Mar 2008 12:47:10 -0400
Importance: Normal
In-Reply-To:
 <OF9E5D8350.D31CB102-ON86257411.0051D6AE-86257411.0053F46C@nasi.com>
References: <9d2777b60803190717x143fdc4fh86d90ba901c27c63@mail.gmail.com>
 <OF9E5D8350.D31CB102-ON86257411.0051D6AE-86257411.0053F46C@nasi.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 19 Mar 2008 16:47:10.0508 (UTC) FILETIME=[E012FEC0:01C889E0]
X-Virus-Checked: Checked by ClamAV on apache.org

--_548ac722-ba91-41ab-ac40-ae99bbce246e_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Robert,

Did you run into any performance issues (because multiple searchers accesse=
d a single index on a shared directory)? Also, did you employ some redundan=
cy scheme to ensure that the shared directory is always "available"? Thank =
you.

> To: java-user@lucene.apache.org
> Subject: Re: Lucene on a cluster environment
> From: Robert.Hastings@ancept.com
> Date: Wed, 19 Mar 2008 10:16:29 -0500
>=20
> We went through this a couple of years ago.  I couldn't find the thread i=
n=20
> the archive but the jist of it is as follows:
>=20
> 1.  We have a singleton thread that does all of the writing.  new=20
> Documents and deletions are queued to the writer via a database table.
> 2.  Since searchers are "point in time" you can user the same searcher in=
=20
> each cluster member ( this limits the amount of open files), but you need=
=20
> to refresh the searcher when the index changes.  We use a SearcherHolder=
=20
> and a single SearcherManager class to manage this.  Events are sent by th=
e=20
> writer and received by the searcher holder when the index changes.
> 3.  Finally, older versions (1.4 and earlier) of Lucene had problems with=
=20
> having the index on a shared directory.  I think most of these issues hav=
e=20
> been resolved.
>=20
> Good Luck.
>=20
>=20
>=20
> "Vinicius Carvalho" <viniciusccarvalho@gmail.com>=20
> 03/19/2008 09:17 AM
> Please respond to
> java-user@lucene.apache.org
>=20
>=20
> To
> java-user@lucene.apache.org
> cc
>=20
> Subject
> Lucene on a cluster environment
>=20
>=20
>=20
>=20
>=20
>=20
> Hello there! I have just started with lucene. Bought the Lucene in action
> book [right now I'm at chap 4, plus the 10th chapter, great explanation b=
y
> Terence from jGuru, really nice stuff], also I'm reading most that I can=
=20
> at
> the wiki :)
> Still a bit lost with some stuff, mostly with clusters :)
> Our app is running in a cluster environment, now we are going to add=20
> search
> support for it, and lucene was the choice for it. Since I have many SLSB
> spread across the cluster, I would like to know some blueprints to use
> lucene in these situation.
>=20
> Our first idea, was to store the IndexWriter as an MBean inside Jboss and
> use it as an HA-Singleton, which would guarantee its uniqueness inside th=
e
> cluster. I just would like to get some feedback from you guys on it :)
>=20
> Best regards
>=20
> --=20
> "In a world without fences and walls, who needs Gates and Windows?"
>=20

_________________________________________________________________
Don't get caught with egg on your face. Play chicktionary!
http://club.live.com/chicktionary.aspx?icid=3Dchick_wlhmtextlink1_feb=

--_548ac722-ba91-41ab-ac40-ae99bbce246e_--

From java-user-return-33257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 17:01:23 2008
Return-Path: <java-user-return-33257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43835 invoked from network); 19 Mar 2008 17:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 17:01:23 -0000
Received: (qmail 25820 invoked by uid 500); 19 Mar 2008 17:01:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25785 invoked by uid 500); 19 Mar 2008 17:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25774 invoked by uid 99); 19 Mar 2008 17:01:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 10:01:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Mar 2008 17:00:35 +0000
Received: (qmail 5907 invoked by uid 60001); 19 Mar 2008 17:00:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=fZsW8TRuW6ZkoBTGCLXMlzaa+RgsW7WZ9PhzbJqOZn6bFQr9TQ6dNyhkSOXxvbkZYTDrgjuBBqfFUwwLcFJnaiE7Dzt2qYJKw2zmXGerZ/uk4uVeNeKu4udha4Rcx+NfxEssZBvqihVRFV9FIXuRmeW6cntuhm+A623Q0O3IQZA=;
X-YMail-OSG: CE.1lVwVM1mzY4I4xDgJvHqEOZ1GB9DmTIL0xD_QrL6U5cTpFqYL.RmcQq6uiiIK0EiPnOC7vDz6RjTOMJDYpEWuZqr0G6.3LUDW32t2sNQIQA2aoZKJwMNsXAM-
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Wed, 19 Mar 2008 17:00:43 GMT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.185
Date: Wed, 19 Mar 2008 17:00:43 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: IndexReader getFieldNames()
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <67485.4462.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You are asking for a new iterator each time around the loop - you'll just b=
e printing the first field forever.....=0A=0A----- Original Message ----=0A=
From: varun sood <vsood2@gmail.com>=0ATo: java-user@lucene.apache.org=0ASen=
t: Wednesday, 19 March, 2008 4:26:39 PM=0ASubject: Re: IndexReader getField=
Names()=0A=0AHi Shai,=0A The code I pasted is not working.. sorry abt that.=
.=0A The code which is working is ..=0A=0A Collection c =3D ir.getFieldName=
s(IndexReader.FieldOption.ALL);=0A int i =3D 0;=0A while (c.iterator().hasN=
ext()) {=0A    out.print(c.iterator().next(););=0A    i++;=0A }=0A=0AThis h=
angs my machine for minutes minutes on my dual core to optuput=0Athe result=
.=0AI am doing sth wrong.=0A"I mean I do not know where the field names are=
 stored.. " in the enum=0Aand how to get them.=0APerhaps its a trivial thin=
g for a person who has used indexReader to=0Alist all the fields in the ind=
ex.=0A=0AOn Wed, Mar 19, 2008 at 9:20 AM, Shai Erera <serera@gmail.com> wro=
te:=0A> Can you give an example of the output?=0A> What does out.print() do=
? Does it print spaces between records on new-lines?=0A>=0A>=0A> On Wed, Ma=
r 19, 2008 at 3:17 PM, varun sood <vsood2@gmail.com> wrote:=0A>=0A> > Hi Al=
l,=0A> >  Can someone please guide me on how to use IndexReader's=0A> > get=
FieldNames() method properly?=0A> > I want to get all the filed names in th=
e index. Currently I am getitng=0A> > it via Document object but that not w=
t i want.=0A> > I am implementing the code below and what I get is a very l=
ong string=0A> > of characters.. perhaps equivalent to the number of record=
s in the=0A> > index.=0A> >=0A> > Collection c =3D ir.getFieldNames(IndexRe=
ader.FieldOption.ALL);=0A> > int i =3D 0;=0A> > while (c.iterator().hasNext=
()) {=0A> >    Field s =3D (Field) c.iterator().next();=0A> >    out.print(=
s.name());=0A> >    i++;=0A> > }=0A> >=0A> > Thanks,=0A> > Varun.=0A> >=0A>=
 > ---------------------------------------------------------------------=0A=
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A> >=0A> =
>=0A>=0A>=0A> --=0A> Regards,=0A>=0A> Shai Erera=0A>=0A=0A-----------------=
----------------------------------------------------=0ATo unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ____________=
_______________________________________________ =0ARise to the challenge fo=
r Sport Relief with Yahoo! For Good  =0A=0Ahttp://uk.promotions.yahoo.com/f=
orgood/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 17:54:37 2008
Return-Path: <java-user-return-33258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73423 invoked from network); 19 Mar 2008 17:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 17:54:37 -0000
Received: (qmail 40243 invoked by uid 500); 19 Mar 2008 17:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40209 invoked by uid 500); 19 Mar 2008 17:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40192 invoked by uid 99); 19 Mar 2008 17:53:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 10:53:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vsood2@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 17:53:19 +0000
Received: by ik-out-1112.google.com with SMTP id c28so284741ika.5
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 10:53:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=ZhJoKZCZBMXuJ+REy2sOq8rWL8c32JP6rcMz4h89A/g=;
        b=JJrgNBW0vEN2QQzehAHk0bnTLIIDI7JzcAOkM0VuANUah7wIX71OkO4Aj6QiqbT0//6T5/crtKpilemmlIjAqNoDQQMdmkGdFvUXKbHLh7CSRf1fJN/pltumoV4WZu5ozxAy6bq0kFLUcDJCwiJxP8eAzUH3HOZTDg+cK/DD25w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X8VHR9h9QJml4p4PKaZSqs6YdmjzVF7biRvn/8iSwgZvI5g9/+FTXDbdqpahsNpNzFUeDJkAUXjbe9GbQdWhBszzuzL3ZhhMwp7zwpf/S8d7mBd6/NXBLwPq8jvxIgNuWWiBYd7BmCGMwnrvDAikPC/Owe+wZPo7ZvpKzHBsRyE=
Received: by 10.142.127.10 with SMTP id z10mr496917wfc.122.1205949209208;
        Wed, 19 Mar 2008 10:53:29 -0700 (PDT)
Received: by 10.143.156.18 with HTTP; Wed, 19 Mar 2008 10:53:29 -0700 (PDT)
Message-ID: <800d6e9c0803191053k1aa79c1cs2132ddc2a994a125@mail.gmail.com>
Date: Wed, 19 Mar 2008 13:53:29 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader getFieldNames()
In-Reply-To: <d7b3e9930803190942r55d0330cte6d8e974186688fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <800d6e9c0803190617u591f9da9yccd7b4798a32f30d@mail.gmail.com>
	 <786fde50803190620x8bc5987pc2a7815ee912b987@mail.gmail.com>
	 <800d6e9c0803190926q5d10fa4td77334830f6c3d88@mail.gmail.com>
	 <d7b3e9930803190942r55d0330cte6d8e974186688fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Constantin and others,

Thanks very much for the reply.
The code fragment works.

thanks
Varun

On Wed, Mar 19, 2008 at 12:42 PM, Constantin Radchenko
<constantin.radchenko@gmail.com> wrote:
> Try this :
>
> for (Iterator iter = reader.getFieldNames(FieldOption.ALL).iterator();
> iter.hasNext();) {
>                String fieldName = (String)iter.next();
> }
>
> Your code creates iterator each time when you call next()
> Also,  if your method  out.print() gets String as parameter, casting is
> redundant
>
> Regards
>
>
> On Wed, Mar 19, 2008 at 6:26 PM, varun sood <vsood2@gmail.com> wrote:
>
> > Hi Shai,
> >  The code I pasted is not working.. sorry abt that..
> >  The code which is working is ..
> >
> >  Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
> >  int i = 0;
> >  while (c.iterator().hasNext()) {
> >     out.print(c.iterator().next(););
> >    i++;
> >  }
> >
> > This hangs my machine for minutes minutes on my dual core to optuput
> > the result.
> > I am doing sth wrong.
> > "I mean I do not know where the field names are stored.. " in the enum
> > and how to get them.
> > Perhaps its a trivial thing for a person who has used indexReader to
> > list all the fields in the index.
> >
> > On Wed, Mar 19, 2008 at 9:20 AM, Shai Erera <serera@gmail.com> wrote:
> > > Can you give an example of the output?
> > > What does out.print() do? Does it print spaces between records on
> > new-lines?
> > >
> > >
> > > On Wed, Mar 19, 2008 at 3:17 PM, varun sood <vsood2@gmail.com> wrote:
> > >
> > > > Hi All,
> > > >  Can someone please guide me on how to use IndexReader's
> > > > getFieldNames() method properly?
> > > > I want to get all the filed names in the index. Currently I am getitng
> > > > it via Document object but that not wt i want.
> > > > I am implementing the code below and what I get is a very long string
> > > > of characters.. perhaps equivalent to the number of records in the
> > > > index.
> > > >
> > > > Collection c = ir.getFieldNames(IndexReader.FieldOption.ALL);
> > > > int i = 0;
> > > > while (c.iterator().hasNext()) {
> > > >    Field s = (Field) c.iterator().next();
> > > >    out.print(s.name());
> > > >    i++;
> > > > }
> > > >
> > > > Thanks,
> > > > Varun.
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Regards,
> > >
> > > Shai Erera
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 18:06:58 2008
Return-Path: <java-user-return-33259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81774 invoked from network); 19 Mar 2008 18:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 18:06:58 -0000
Received: (qmail 76904 invoked by uid 500); 19 Mar 2008 18:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76874 invoked by uid 500); 19 Mar 2008 18:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76859 invoked by uid 99); 19 Mar 2008 18:06:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 11:06:49 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 18:05:56 +0000
In-Reply-To: <BLU119-W392DE50FC2A1DD5BF0DDB0B9070@phx.gbl>
To: java-user@lucene.apache.org
Subject: RE: Lucene on a cluster environment
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF13AF1F9E.548475F4-ON86257411.006323F0-86257411.0063721F@nasi.com>
From: Robert.Hastings@ancept.com
Date: Wed, 19 Mar 2008 13:05:41 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 03/19/2008
 13:06:03,
	Serialize complete at 03/19/2008 13:06:03
Content-Type: multipart/alternative; boundary="=_alternative 0063721886257411_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0063721886257411_=
Content-Type: text/plain; charset="US-ASCII"

No noticeable performance hit, searches are not a bottleneck in our 
system.  We don't have disk redundancy.




Dragon Fly <dragon-fly999@hotmail.com> 
03/19/2008 11:47 AM
Please respond to
java-user@lucene.apache.org


To
<java-user@lucene.apache.org>
cc

Subject
RE: Lucene on a cluster environment






Hi Robert,

Did you run into any performance issues (because multiple searchers 
accessed a single index on a shared directory)? Also, did you employ some 
redundancy scheme to ensure that the shared directory is always 
"available"? Thank you.

> To: java-user@lucene.apache.org
> Subject: Re: Lucene on a cluster environment
> From: Robert.Hastings@ancept.com
> Date: Wed, 19 Mar 2008 10:16:29 -0500
> 
> We went through this a couple of years ago.  I couldn't find the thread 
in 
> the archive but the jist of it is as follows:
> 
> 1.  We have a singleton thread that does all of the writing.  new 
> Documents and deletions are queued to the writer via a database table.
> 2.  Since searchers are "point in time" you can user the same searcher 
in 
> each cluster member ( this limits the amount of open files), but you 
need 
> to refresh the searcher when the index changes.  We use a SearcherHolder 

> and a single SearcherManager class to manage this.  Events are sent by 
the 
> writer and received by the searcher holder when the index changes.
> 3.  Finally, older versions (1.4 and earlier) of Lucene had problems 
with 
> having the index on a shared directory.  I think most of these issues 
have 
> been resolved.
> 
> Good Luck.
> 
> 
> 
> "Vinicius Carvalho" <viniciusccarvalho@gmail.com> 
> 03/19/2008 09:17 AM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> Lucene on a cluster environment
> 
> 
> 
> 
> 
> 
> Hello there! I have just started with lucene. Bought the Lucene in 
action
> book [right now I'm at chap 4, plus the 10th chapter, great explanation 
by
> Terence from jGuru, really nice stuff], also I'm reading most that I can 

> at
> the wiki :)
> Still a bit lost with some stuff, mostly with clusters :)
> Our app is running in a cluster environment, now we are going to add 
> search
> support for it, and lucene was the choice for it. Since I have many SLSB
> spread across the cluster, I would like to know some blueprints to use
> lucene in these situation.
> 
> Our first idea, was to store the IndexWriter as an MBean inside Jboss 
and
> use it as an HA-Singleton, which would guarantee its uniqueness inside 
the
> cluster. I just would like to get some feedback from you guys on it :)
> 
> Best regards
> 
> -- 
> "In a world without fences and walls, who needs Gates and Windows?"
> 

_________________________________________________________________
Don't get caught with egg on your face. Play chicktionary!
http://club.live.com/chicktionary.aspx?icid=chick_wlhmtextlink1_feb

--=_alternative 0063721886257411_=--

From java-user-return-33260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 20:23:20 2008
Return-Path: <java-user-return-33260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91749 invoked from network); 19 Mar 2008 20:23:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 20:23:20 -0000
Received: (qmail 81611 invoked by uid 500); 19 Mar 2008 20:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81502 invoked by uid 500); 19 Mar 2008 20:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81489 invoked by uid 99); 19 Mar 2008 20:23:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 13:23:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 20:22:32 +0000
Received: by rn-out-0910.google.com with SMTP id a46so546305rne.9
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 13:22:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=t6ftL02M3+lKyJcifSeRT/8habNhT3NMhMJlfMxab2U=;
        b=QG8VjnGqLzJ5G1KnZkLm7sfgvk0Dg+IL+A7S1hstM8tkYLWGa8U9ng2foP6D446A3r4zOeTBXda64LY0LN85PQTnNo2DkjnzdVjpPKy0Qusgt4U++JUweWgd4I7Q3HDgqf6hHtWU9wOIkBgnXQLBz+dXCYJ3pTojGTzEjBYI8Lw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jAnEkHOrCIRv4T5JXgLrdbewTmYfkEdSF2Dp/YchysUr8CwFeLNsFgq+igfw9UAr5CYydmNFhu9CTkS6itjbrOajUSn6iijniMYdCkkaJEAS7buLcyKZW/mlVu8IY7y1mmrGTC3LehDhEwRiKRyCZl76CPP196XKT6i2EjisWDM=
Received: by 10.142.79.15 with SMTP id c15mr622812wfb.105.1205958161428;
        Wed, 19 Mar 2008 13:22:41 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.119.110])
        by mx.google.com with ESMTPS id i17sm1267659wxd.19.2008.03.19.13.22.39
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 19 Mar 2008 13:22:39 -0700 (PDT)
Message-ID: <47E17603.8010501@gmail.com>
Date: Wed, 19 Mar 2008 16:22:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008031802)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
References: <16138043.post@talk.nabble.com>
In-Reply-To: <16138043.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Heres what happens: in order to sort all of the hits you get back on a 
field, you need to get the value of that field for comparisons right? 
Well it turns out that reading a field value from the index is pretty 
slow (its on the disk after all)...so Lucene will read all of the terms 
in the field off disk once (on the first sort/search request) and cache 
them. So if your field is an Int your talking numDocs*32 bits for your 
cache. For a Long field its numDocs*64. For a String field Lucene caches 
a String array with every unique term and then an int array indexing 
into the term array.

You might think, if I only ask for the top 10 docs, don't i only read 10 
field values? But of course you don't know what docs will be returned as 
each search comes in...so you have to cache them all.
Like the other answer said, one field is going to be roughly 50 MB. You 
can do the math yourself...I ripped the 40 doing some rough stuff in my 
head, but around 50mb is prob closer.

So anyway, you *are* only sorting on the hits you get back...but youll 
get different hits all the time so you still have to cache all the field 
values. The FieldCache class does this, and thats whats taking up the 
RAM. You should have 50 to give it though I would assume...how much RAM 
are you giving the JVM?

- mark

sandyg wrote:
> Hi,
> And is it not passibe to sort on the result we get instead of on all the
> values like
> Hits       hits = searcher.search(query);
> and it will be good if got sorting on the hits i.e on the result
> because my sorting is based on specific  field and that field should be
> sorted when i click on it.
> thanks for the reply
>
>
> markrmiller wrote:
>    
>> To sort on 13mil docs will take like at least 400 mb for the field
>> cache. Thats if you only sort on one field...it can grow fast if you
>> allow multi field sorting.
>>
>> How much RAM are you giving your app?
>>
>> sandyg wrote:
>>      
>>> this is my search content
>>>
>>> QueryParser parser = new QueryParser("keyword",new StandardAnalyzer());
>>> Query query = parser.parse("1");
>>>
>>> Sort sort = new Sort(new SortField(sortField));
>>>            Hits       hits = searcher.search(query,sort);
>>>
>>> And i had huge data about 13 millions of records
>>> i am not sure y its giving outof memory exception and
>>> no exception when no sorting is done
>>> plz some one help me yar
>>>
>>> and also if to increase heap space how to increase it programatically i
>>> had
>>> command prompt
>>> java -Xms<initial heap size>   -Xmx<maximum heap size>
>>> please.....
>>>
>>>        
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>      
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:13:07 2008
Return-Path: <java-user-return-33261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80711 invoked from network); 19 Mar 2008 22:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:13:07 -0000
Received: (qmail 27970 invoked by uid 500); 19 Mar 2008 22:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27931 invoked by uid 500); 19 Mar 2008 22:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27920 invoked by uid 99); 19 Mar 2008 22:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:12:58 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:12:18 +0000
Received: from sls-370-25.csail.mit.edu ([128.30.34.47])
	by outgoing.csail.mit.edu with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1Jc6WJ-0000TA-PS
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 18:12:27 -0400
Received: from ghinwa (helo=localhost)
	by sls-370-25.csail.mit.edu with local-esmtp (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1Jc6WJ-0001Iq-MV
	for java-user@lucene.apache.org; Wed, 19 Mar 2008 18:12:27 -0400
Date: Wed, 19 Mar 2008 18:12:27 -0400 (EDT)
From: Ghinwa Choueiter <ghinwa@csail.mit.edu>
To: java-user@lucene.apache.org
Subject: Re: Scoring a query with OR's
In-Reply-To: <47D42EE3.9040808@gmail.com>
Message-ID: <Pine.LNX.4.64.0803191809400.9852@sls-370-25.csail.mit.edu>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com>
 <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com>
 <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F>
 <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com>
 <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F> <47D42EE3.9040808@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Sender: Ghinwa Choueiter <ghinwa@csail.mit.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I emailed a question earlier about the difference between OR and AND in a 
Boolean query. So in what I am trying to do, I need AND to behave like an 
OR ( or what I like to call "soft AND"), and I need OR to behave like a 
logic OR, meaning that I don't want to reward documents that have more of 
the OR operands. It is easy for me to fix the AND, but is there a 
straightforward way of fixing the OR?

Many thanks!
-Ghinwa

On Sun, 9 Mar 2008, Mark Miller wrote:

> I have been trying to understand all of this better myself, so while I am no 
> expert, here is my take:
>
> Lucene is really a combined Vector Space / Boolean Model search engine.
>
> At its core, Lucene is essentially a Vector Space Model search engine: 
> scoring is done by comparing a query term vector to each of the document term 
> vectors. However, on top of this, Lucene allows a Boolean Model by 
> constraining results using a BooleanQuery.
>
> So when Lucene finds the score for "mark OR mandy", the idea is the same as 
> for "mark AND mandy". The difference is that the BooleanQuery will treat the 
> Must and Should clause differently: if a term is labeled Must but is not in 
> the document, the document won't match. If a Should term is not in the 
> document, the BooleanQuery excludes no extra documents on that account, but 
> the term may contribute 0 towards the similarity score. The BooleanQuery kind 
> of clamps down on top of the Vector Space TermVector similarity scoring, 
> allowing for a hybrid system.
>
> The coord factor essentially juices the term vector similarity score based on 
> how many query terms are in the document. Term overlap is already taken into 
> account during the term vector similarity part, but apparently users don't 
> like how that ranks eg users intuitively think that sharing more terms 
> between document and query is more important than sharing fewer very highly 
> weighted terms. So basically, coord is just trying to reorder things a bit 
> based on reported user expectations.
>
> - Mark
>
>
>
> Ghinwa Choueiter wrote:
>> but shouldn't the coord factor kick in with AND instead of OR? I understand 
>> why you would want to use coord in the case of AND, where you reward more 
>> the documents that contain most of the terms in the query. However in the 
>> case of OR, it should not matter if all the OR  operands are in the 
>> document?
>> 
>> -Ghinwa
>> 
>> ----- Original Message ----- From: "Erik Hatcher" 
>> <erik@ehatchersolutions.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Sunday, March 09, 2008 1:22 PM
>> Subject: Re: Scoring a query with OR's
>> 
>> 
>>> 
>>> On Mar 9, 2008, at 12:39 PM, Ghinwa Choueiter wrote:
>>>> but what exactly happens when there are OR's, for eg.  (life OR  place OR 
>>>> time)
>>>> 
>>>> The scoring equation can get a score for life, place, time  separately, 
>>>> but what does it do with them then? Does it also add them.
>>> 
>>> The coord factor kicks in then:
>>> 
>>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
>>> apache/lucene/search/DefaultSimilarity.html#coord(int,%20int)>
>>> 
>>> the formula listed here should help too:
>>> 
>>> <http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/ 
>>> apache/lucene/search/Similarity.html>
>>> 
>>> Erik
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:22:02 2008
Return-Path: <java-user-return-33262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86046 invoked from network); 19 Mar 2008 22:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:22:02 -0000
Received: (qmail 41729 invoked by uid 500); 19 Mar 2008 22:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41684 invoked by uid 500); 19 Mar 2008 22:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41673 invoked by uid 99); 19 Mar 2008 22:21:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:21:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:21:15 +0000
Received: by wr-out-0506.google.com with SMTP id c30so628101wra.14
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 15:21:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Y7msadutLgdf8yjfZy3HN4SgqUHtrmZHv4lDF1Jr+eQ=;
        b=hJeUkySia0SeJptvOdi1pRmjeTx+/HZMXWuCI31JYAYzl4v4LKbmfr6czLsZnC38AefFArJ5ZqiNbQ2aF3DPFtR/cm+839pCNYJtX8CgDSbohm8QMXpe5oxWwgEbxfWUUbDFrmjfk+q39dQ1OkRIc8uyNKNqPeOHULRYMRIzqWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=M4H7Rz/sLyjJ1YPmcoLy7ewN6do1e+qnM3G/9MLhfw2tlCZ8Q13Jjgv6qksHk4Tk//eBcfx+8/qhEJNpbqjtVb0SN4TmLUuIbW7nw5E2CS69ZilWmgfhUPpi3eV2qrI7jXozgy+X5tk5OlA+UUekJENMDKff6AgGlb+Qo0fiJTI=
Received: by 10.114.57.1 with SMTP id f1mr2329900waa.78.1205965285092;
        Wed, 19 Mar 2008 15:21:25 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Wed, 19 Mar 2008 15:21:25 -0700 (PDT)
Message-ID: <9d2777b60803191521x712992bbl7cf1466e7eaee5d8@mail.gmail.com>
Date: Wed, 19 Mar 2008 19:21:25 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: [noobie question] Can't index :(
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27261_21165548.1205965285088"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27261_21165548.1205965285088
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello there! This is really a dumb question, but I just need to get things
started :( I'm just trying to get things working here, and I'm not being
able to index :(. Here's my code:

public abstract class AbstractLuceneIndexer implements LuceneIndexer{

    protected String INDEX_DIR = "";


    public void add(Document document) {
        try {
            if(!IndexReader.isLocked(INDEX_DIR)){
                getIndexWriter().setMaxFieldLength(Integer.MAX_VALUE);
                getIndexWriter().addDocument(document);
                optimize();
                System.out.println(getIndexWriter().docCount());
                getIndexWriter().close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void delete(Document document) {
        try {
            if(!IndexReader.isLocked(INDEX_DIR)){
                getIndexReader().deleteDocument(findDocumentNum(document));
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private int findDocumentNum(Document doc){
        return 0;
    }

    public void optimize() {

    }

    public Hits query() {
        return null;
    }

    protected abstract IndexWriter getIndexWriter();

    protected abstract IndexReader getIndexReader();

    protected abstract Analyzer getAnalyzer();


}

public class LocalLuceneIndexer extends AbstractLuceneIndexer {
    private Directory dir;
    public LocalLuceneIndexer() {
        INDEX_DIR = "/java/lucene/index";
        try {
            this.dir = FSDirectory.getDirectory(INDEX_DIR);

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    @Override
    protected IndexReader getIndexReader() {
        IndexReader reader = null;
        try {
            reader = IndexReader.open(dir);
        } catch (CorruptIndexException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return reader;
    }

    @Override
    protected IndexWriter getIndexWriter() {
        IndexWriter writer = null;
        try {
            writer = new IndexWriter(INDEX_DIR,new StandardAnalyzer(),true);
        } catch (CorruptIndexException e) {
            e.printStackTrace();
        } catch (LockObtainFailedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return writer;
    }

    @Override
    protected Analyzer getAnalyzer() {
        return new StandardAnalyzer();
    }

}

@Test
    public void testAddPDF() throws Exception{
        LocalLuceneIndexer indexer = new LocalLuceneIndexer();
        DocumentHandler handler = new PDFDocumentHandler();
        File file = new File("/home/vinicius/samplePDF.pdf");
        FileInputStream fin = new FileInputStream(file);
        Document doc = handler.getDocument(fin);
        indexer.add(doc);
      }

Well, after running the test above, I have only 2 files stored at disk :
segments.gen and segments_5. Luke can not open the index dir. What am I
missing here?

Regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_27261_21165548.1205965285088--

From java-user-return-33263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:43:03 2008
Return-Path: <java-user-return-33263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96241 invoked from network); 19 Mar 2008 22:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:43:03 -0000
Received: (qmail 78925 invoked by uid 500); 19 Mar 2008 22:42:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78654 invoked by uid 500); 19 Mar 2008 22:42:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78638 invoked by uid 99); 19 Mar 2008 22:42:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:42:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:42:16 +0000
Received: by wr-out-0506.google.com with SMTP id c30so638031wra.14
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 15:42:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=UkfF8p3UaNIzsLeZC+IV95QHo9AQHGvvtNZQPJcSpkM=;
        b=k+O3QN4cBP5wdoKfz4vmcf7t3jXxvV29DGZnM4p8c3zyCbC61i6SDohZ+e9HUtrI2BnXe2jlCAVpRoo+rsiPpsCSzZtDBQdaVtjZy7yhTH8bl1gS9VJRJ0HPlvjqEUVCAsCY6SdgswokZN8V3H2gBopmAvAoZw0/QYDGlZuw5NQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TWOpLXpNGX9knA6XY/bs59etdo5QyVX29EhcSxhYKvwNxq/9nPE/Vt7590j4SIEILtczjbZnv5a1peNNFjC/b5caXIszol++iplFTy3tAdFYVYCFcIhCd7LDJXZOmqc5gDcVO6nyhHlpyGU2S5ruiYo6R/16X3ej/8oLYcWEch0=
Received: by 10.115.110.6 with SMTP id n6mr2337567wam.92.1205966544416;
        Wed, 19 Mar 2008 15:42:24 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Wed, 19 Mar 2008 15:42:24 -0700 (PDT)
Message-ID: <9d2777b60803191542h3f94eb94ofb30eeab613a961e@mail.gmail.com>
Date: Wed, 19 Mar 2008 19:42:24 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [noobie question] Can't index :(
In-Reply-To: <9d2777b60803191521x712992bbl7cf1466e7eaee5d8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27279_6149937.1205966544413"
References: <9d2777b60803191521x712992bbl7cf1466e7eaee5d8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27279_6149937.1205966544413
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Doh!!!! Sorry, never mind, returning different indexWriter instances :P

On Wed, Mar 19, 2008 at 7:21 PM, Vinicius Carvalho <
viniciusccarvalho@gmail.com> wrote:

> Hello there! This is really a dumb question, but I just need to get things
> started :( I'm just trying to get things working here, and I'm not being
> able to index :(. Here's my code:
>
> public abstract class AbstractLuceneIndexer implements LuceneIndexer{
>
>     protected String INDEX_DIR = "";
>
>
>     public void add(Document document) {
>         try {
>             if(!IndexReader.isLocked(INDEX_DIR)){
>                 getIndexWriter().setMaxFieldLength(Integer.MAX_VALUE);
>                 getIndexWriter().addDocument(document);
>                 optimize();
>                 System.out.println(getIndexWriter().docCount());
>                 getIndexWriter().close();
>             }
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>     }
>
>     public void delete(Document document) {
>         try {
>             if(!IndexReader.isLocked(INDEX_DIR)){
>
> getIndexReader().deleteDocument(findDocumentNum(document));
>             }
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>     }
>
>     private int findDocumentNum(Document doc){
>         return 0;
>     }
>
>     public void optimize() {
>
>     }
>
>     public Hits query() {
>         return null;
>     }
>
>     protected abstract IndexWriter getIndexWriter();
>
>     protected abstract IndexReader getIndexReader();
>
>     protected abstract Analyzer getAnalyzer();
>
>
> }
>
> public class LocalLuceneIndexer extends AbstractLuceneIndexer {
>     private Directory dir;
>     public LocalLuceneIndexer() {
>         INDEX_DIR = "/java/lucene/index";
>         try {
>             this.dir = FSDirectory.getDirectory(INDEX_DIR);
>
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>     }
>     @Override
>     protected IndexReader getIndexReader() {
>         IndexReader reader = null;
>         try {
>             reader = IndexReader.open(dir);
>         } catch (CorruptIndexException e) {
>             e.printStackTrace();
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>         return reader;
>     }
>
>     @Override
>     protected IndexWriter getIndexWriter() {
>         IndexWriter writer = null;
>         try {
>             writer = new IndexWriter(INDEX_DIR,new
> StandardAnalyzer(),true);
>         } catch (CorruptIndexException e) {
>             e.printStackTrace();
>         } catch (LockObtainFailedException e) {
>             e.printStackTrace();
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>         return writer;
>     }
>
>     @Override
>     protected Analyzer getAnalyzer() {
>         return new StandardAnalyzer();
>     }
>
> }
>
> @Test
>     public void testAddPDF() throws Exception{
>         LocalLuceneIndexer indexer = new LocalLuceneIndexer();
>         DocumentHandler handler = new PDFDocumentHandler();
>         File file = new File("/home/vinicius/samplePDF.pdf");
>         FileInputStream fin = new FileInputStream(file);
>         Document doc = handler.getDocument(fin);
>         indexer.add(doc);
>       }
>
> Well, after running the test above, I have only 2 files stored at disk :
> segments.gen and segments_5. Luke can not open the index dir. What am I
> missing here?
>
> Regards
>
> --
> "In a world without fences and walls, who needs Gates and Windows?"




-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_27279_6149937.1205966544413--

From java-user-return-33264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:47:25 2008
Return-Path: <java-user-return-33264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97437 invoked from network); 19 Mar 2008 22:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:47:25 -0000
Received: (qmail 87451 invoked by uid 500); 19 Mar 2008 22:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87414 invoked by uid 500); 19 Mar 2008 22:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87403 invoked by uid 99); 19 Mar 2008 22:47:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:47:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:46:28 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7ED9B4A81E4
	for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 09:46:45 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the fields
Date: Thu, 20 Mar 2008 09:41:51 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <16138043.post@talk.nabble.com> <47E17603.8010501@gmail.com>
In-Reply-To: <47E17603.8010501@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803200941.51362.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 20 March 2008 07:22:27 Mark Miller wrote:
> You might think, if I only ask for the top 10 docs, don't i only read 10
> field values? But of course you don't know what docs will be returned as
> each search comes in...so you have to cache them all.

If it lazily cached one field at a time, I guess this wouldn't be a problem... 
but you would still eventually still run out of memory after performing a 
certain number of queries.

I guess one solution would be a FieldCache backed by storage on hard disk.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:49:22 2008
Return-Path: <java-user-return-33265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97864 invoked from network); 19 Mar 2008 22:49:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:49:22 -0000
Received: (qmail 92382 invoked by uid 500); 19 Mar 2008 22:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92354 invoked by uid 500); 19 Mar 2008 22:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92340 invoked by uid 99); 19 Mar 2008 22:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:49:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:48:33 +0000
Received: by ag-out-0708.google.com with SMTP id 35so1112060aga.11
        for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 15:48:42 -0700 (PDT)
Received: by 10.150.137.8 with SMTP id k8mr517066ybd.61.1205966921872;
        Wed, 19 Mar 2008 15:48:41 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 35sm1166434wra.37.2008.03.19.15.48.41
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 19 Mar 2008 15:48:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <9d2777b60803190908p57c6d1c6qe3638cc4fe364f3e@mail.gmail.com>
References: <9d2777b60803190908p57c6d1c6qe3638cc4fe364f3e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D9D3F4B8-EB1C-458B-B01F-11227BC76174@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Adding new documents to index
Date: Wed, 19 Mar 2008 18:48:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Adding new documents to the index is not very costly even when the  
index is large.  The newly added documents result in additional  
segment(s).  If you then optimize then that is extremely costly for a  
large index.  Test your search performance to see if you really need  
to optimize.

The costly part is re-opening your searchers.  There are plans  
underway to improve the re-open performance so that the cost is more  
in proportion to what new segments were newly added (unlike today  
where cost is in proportion to total size of the index), but those  
are just plans at this point.

Mike

Vinicius Carvalho wrote:
> Hello there! Since I've just begun with lucene, some concepts are  
> kinda new
> for me :). One of the is the whole indexing process. Well, AFAIK,  
> indexing
> should happen in a batch process right, to maximize the time spent  
> on this
> operation. One issue tough, is that our client wants "instants search
> results", I mean, after something is added, the next search should  
> have it
> available. Well, it's almost impossible to convince him (and I  
> believe you
> guys know how this works) that indexing should not happen online  
> (maybe I'm
> just wrong here as well).
>
> Well, my question is, when I have a reasonable amount of indexed  
> data, how
> expensive is to add a new document? Does it re-builds the entire  
> index? I
> believe we'll have a small amount of data (when compare to things  
> I've seen
> lucene is capable of), probably 50k of html docs, 10k of pdf, and 5--6
> million rows of database information. With that scenario, an online  
> index
> (plus optimize) would be a good idea?
>
> Best regards
>
> -- 
> "In a world without fences and walls, who needs Gates and Windows?"


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:49:38 2008
Return-Path: <java-user-return-33266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97934 invoked from network); 19 Mar 2008 22:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:49:37 -0000
Received: (qmail 93987 invoked by uid 500); 19 Mar 2008 22:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93961 invoked by uid 500); 19 Mar 2008 22:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93950 invoked by uid 99); 19 Mar 2008 22:49:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:49:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:48:41 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EA3EA4A8145
	for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 09:48:59 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search
Date: Thu, 20 Mar 2008 09:44:06 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080319072433.70EE7BA544A@out1.bezeqint.net>
In-Reply-To: <20080319072433.70EE7BA544A@out1.bezeqint.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803200944.06599.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 19 March 2008 18:28:15 Itamar Syn-Hershko wrote:
> 1. Build a Radix tree (PATRICIA) and populate it with all search terms.
> Phrase queries will be considered as one big string, regardless their
> spaces.
>
> 2. Iterate through your text ignoring spaces and punctuation marks, and for
> each word start a Radix lookup by letter, e.g. for the word John you will
> initialize a "tavel" upon the tree with j, then o, h, and so on, so if
> "John Kennedy" was your term it will not ignore the space (I'd say you'd
> want to keep only one instance of it and ignore the rest). On a dead end
> (no relevant branch on the tree) just skip to the next space or punctuation
> mark and restart the process.
>
> 3. If an iteration has touched base - completed a lookup successfully, the
> MyHighlighter object will boldify or surround the text with a span. It is
> then possible to give the span different IDs based on the term (each term a
> different ID) so each term will be highlighted with a different color.
>
> This allows for fast and exact highlighting of large texts as well as
> smaller ones. I would love to hear any comments on the above.

I guess this would work, on the assumption that no analysis was performed on 
the text.  Otherwise stemming would break it instantly.

But why not perform the same logic but with terms instead of letters?  Or 
would that be what the current highlighter is already doing?

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 22:53:25 2008
Return-Path: <java-user-return-33267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99373 invoked from network); 19 Mar 2008 22:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 22:53:25 -0000
Received: (qmail 3860 invoked by uid 500); 19 Mar 2008 22:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3686 invoked by uid 500); 19 Mar 2008 22:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3674 invoked by uid 99); 19 Mar 2008 22:53:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 15:53:16 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.197] (HELO out2.bezeqint.net) (192.115.188.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 22:52:37 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out2.bezeqint.net (Postfix) with ESMTPA id B144321021E
	for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 00:52:41 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Contrib Highlighter and Phrase search
Date: Thu, 20 Mar 2008 00:52:29 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <200803200944.06599.daniel@nuix.com>
Thread-Index: AciKE3RIMBOlkSzuREyaFeoC0R2N0wAACyDg
Message-Id: <20080319225241.B144321021E@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm building this for my application which uses (will at least) query
inflation - no stemming, just basic tokenizing.

I'm using Radix and letter based lookup (which is how Radix works) since I
want to execute the highlighting on large documents too, possibly with a lot
of terms (since I'm inflating the query). Does this make sense?

Itamar.

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com] 
Sent: Thursday, March 20, 2008 12:44 AM
To: java-user@lucene.apache.org
Subject: Re: Contrib Highlighter and Phrase search

On Wednesday 19 March 2008 18:28:15 Itamar Syn-Hershko wrote:
> 1. Build a Radix tree (PATRICIA) and populate it with all search terms.
> Phrase queries will be considered as one big string, regardless their 
> spaces.
>
> 2. Iterate through your text ignoring spaces and punctuation marks, 
> and for each word start a Radix lookup by letter, e.g. for the word 
> John you will initialize a "tavel" upon the tree with j, then o, h, 
> and so on, so if "John Kennedy" was your term it will not ignore the 
> space (I'd say you'd want to keep only one instance of it and ignore 
> the rest). On a dead end (no relevant branch on the tree) just skip to 
> the next space or punctuation mark and restart the process.
>
> 3. If an iteration has touched base - completed a lookup successfully, 
> the MyHighlighter object will boldify or surround the text with a 
> span. It is then possible to give the span different IDs based on the 
> term (each term a different ID) so each term will be highlighted with a
different color.
>
> This allows for fast and exact highlighting of large texts as well as 
> smaller ones. I would love to hear any comments on the above.

I guess this would work, on the assumption that no analysis was performed on
the text.  Otherwise stemming would break it instantly.

But why not perform the same logic but with terms instead of letters?  Or
would that be what the current highlighter is already doing?

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 19 23:53:40 2008
Return-Path: <java-user-return-33268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32499 invoked from network); 19 Mar 2008 23:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Mar 2008 23:53:39 -0000
Received: (qmail 9120 invoked by uid 500); 19 Mar 2008 23:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9007 invoked by uid 500); 19 Mar 2008 23:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8996 invoked by uid 99); 19 Mar 2008 23:53:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 16:53:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 23:52:52 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 683E471C366; Wed, 19 Mar 2008 16:53:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 620B771C363
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 16:53:01 -0700 (PDT)
Date: Wed, 19 Mar 2008 16:53:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError: Java heap space when sorting the
 fields
In-Reply-To: <47E17603.8010501@gmail.com>
Message-ID: <Pine.LNX.4.62.0803191643390.17437@radix.cryptio.net>
References: <16138043.post@talk.nabble.com> <47E17603.8010501@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: You might think, if I only ask for the top 10 docs, don't i only read 10 field
: values? But of course you don't know what docs will be returned as each search
: comes in...so you have to cache them all.

Arguements have been made in the past that when you have an index 
large enough that the FieldCache is prohibitively expensive, and you 
expect the number of *matching* documents to be significantly smaller then 
the total number of documents, it might make sense to Sort using 
LazyLoaded "stored" field values ... it's a pretty radical shift from the 
current sorting approach, and would require some explicit work on the part 
of the indexing/searching code, but a patch along that lines was created a 
while back...

https://issues.apache.org/jira/browse/LUCENE-769

...based on the last comment i posted in that issue, i clearly 
thought it showed a lot of promise, but needed cleaned up.  I admittedly 
lost track of it as other things took priority in life.  if people want 
to dust it off, try it out, and make comments about it's effectiveness I'm 
sure it could be revived.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 00:08:58 2008
Return-Path: <java-user-return-33269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39293 invoked from network); 20 Mar 2008 00:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 00:08:58 -0000
Received: (qmail 30772 invoked by uid 500); 20 Mar 2008 00:08:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30570 invoked by uid 500); 20 Mar 2008 00:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30559 invoked by uid 99); 20 Mar 2008 00:08:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 17:08:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 00:08:02 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 695D871C36A; Wed, 19 Mar 2008 17:08:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4D5DB71C365
	for <java-user@lucene.apache.org>; Wed, 19 Mar 2008 17:08:20 -0700 (PDT)
Date: Wed, 19 Mar 2008 17:08:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Scoring a query with OR's
In-Reply-To: <Pine.LNX.4.64.0803191809400.9852@sls-370-25.csail.mit.edu>
Message-ID: <Pine.LNX.4.62.0803191705180.17437@radix.cryptio.net>
References: <300114.21874.qm@web26510.mail.ukl.yahoo.com>
 <359a92830803081700j69b0ee4bkd400ef483a064075@mail.gmail.com>
 <0d6001c88204$362f78e0$0602a8c0@IBM3D2E684396F>
 <375F38A3-7AF6-4AE6-9586-770AF9A35033@ehatchersolutions.com>
 <0d9301c8820c$627c4970$0602a8c0@IBM3D2E684396F> <47D42EE3.9040808@gmail.com>
 <Pine.LNX.4.64.0803191809400.9852@sls-370-25.csail.mit.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I emailed a question earlier about the difference between OR and AND in a
: Boolean query. So in what I am trying to do, I need AND to behave like an OR (
: or what I like to call "soft AND"), and I need OR to behave like a logic OR,
: meaning that I don't want to reward documents that have more of the OR
: operands. It is easy for me to fix the AND, but is there a straightforward way
: of fixing the OR?

Assuming I understand you correctly, i think the DisjunctionMaxQuery will 
do what you want in your "OR" case if you set the tiebreaker value to 0.0f 
... then the score of hte final query will consist solely of the score of 
the highest scoring clause.

You may also need to change the coord function of your Similarity, ... off 
the top of my head i'm not certain.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 03:21:10 2008
Return-Path: <java-user-return-33270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28471 invoked from network); 20 Mar 2008 03:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 03:21:10 -0000
Received: (qmail 73345 invoked by uid 500); 20 Mar 2008 03:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72378 invoked by uid 500); 20 Mar 2008 03:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72367 invoked by uid 99); 20 Mar 2008 03:21:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Mar 2008 20:21:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=NORMAL_HTTP_TO_IP,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 03:20:13 +0000
Received: from memnon.xs4all.nl (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2K3KXTW050255
	for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 04:20:34 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-ID: <47E1D7FC.3050605@gmail.com>
Date: Thu, 20 Mar 2008 04:20:28 +0100
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Relevance
References: <16139007.post@talk.nabble.com>
In-Reply-To: <16139007.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

luceneuser skrev:
> Hi All,
> 
> 
>  I need help on retrieving results based on relevance + freshness. As of
> now, i get based on either of the fields, either on relevance or freshness.
> 
>  how can i achieve this. Lucene retrieves results on relevance but also
> fetches old results too. i need more relevant results with freshness too.

You want a bit less score the older the document is?

Search the archives for CustomScoreQuery and System.currentTimeMillis.

Here is something I found in the Google cache:

<http://64.233.183.104/search?q=cache:SG1CFDkgucMJ:blog.mindbridge.com/%3Fp%3D55+CustomScoreQuery+System.currentTimeMillis>


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 13:55:42 2008
Return-Path: <java-user-return-33271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73888 invoked from network); 20 Mar 2008 13:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 13:55:42 -0000
Received: (qmail 42852 invoked by uid 500); 20 Mar 2008 13:55:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42819 invoked by uid 500); 20 Mar 2008 13:55:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42805 invoked by uid 99); 20 Mar 2008 13:55:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 06:55:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.159 as permitted sender)
Received: from [65.55.175.159] (HELO blu139-omc1-s19.blu139.hotmail.com) (65.55.175.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 13:54:42 +0000
Received: from BLU119-W32 ([65.55.162.183]) by blu139-omc1-s19.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 20 Mar 2008 06:55:02 -0700
Message-ID: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_813ed426-2f94-4efe-9aec-7a2a02570ad0_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Field values ...
Date: Thu, 20 Mar 2008 09:55:01 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Mar 2008 13:55:02.0079 (UTC) FILETIME=[FE438CF0:01C88A91]
X-Virus-Checked: Checked by ClamAV on apache.org

--_813ed426-2f94-4efe-9aec-7a2a02570ad0_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

What's the easiest way to extract the values of 2 fields from each document=
 in the index.  For example, each document has 5 fields:
    Id     Name     Address     Phone     Preference
I'd like to extract the values for the Id and Phone fields for each documen=
t in the index.  Thank you.

_________________________________________________________________
Watch =93Cause Effect,=94 a show about real people making a real difference=
.  Learn more.
http://im.live.com/Messenger/IM/MTV/?source=3Dtext_watchcause=

--_813ed426-2f94-4efe-9aec-7a2a02570ad0_--

From java-user-return-33272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 14:06:10 2008
Return-Path: <java-user-return-33272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80112 invoked from network); 20 Mar 2008 14:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 14:06:10 -0000
Received: (qmail 63766 invoked by uid 500); 20 Mar 2008 14:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63562 invoked by uid 500); 20 Mar 2008 14:06:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63551 invoked by uid 99); 20 Mar 2008 14:06:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 07:06:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 14:05:19 +0000
Received: by fk-out-0910.google.com with SMTP id 19so1212457fkr.5
        for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 07:05:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PhD6IUTpGitOjYTGtgcYT+xaxNtZKKJ4YZzsLVcgcgg=;
        b=sTMpJWTUeZW05dlGAETCItPajWmXdHsOoqsYfkkeurw2OEGPxE6ND4H+zSqkl2AOPmopwZcrCTigOWo4Hj5AwSikXYe0KAzsITNBVA5u0ynnEuunU1iGutdtFZoGKlo9o04TYLbeuCsbaxWxgRnC+Td8rdahKR85wskZ5uzJl0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W7oq2WdUI8qO5s4XAUtcikK1XKSbF7KCWvfTsWEvFPqQ82GpSKCc2K8IRPn0vKpAmSINu9EQmkcIcfbP+jGD/xW/ZnhQMUTTZkHekfnaq10sYQ4X+QnfONI25mZpVryY/cCMQuWByH8hKQ9T5HU6T1UvKlGnTAuO6PMcF1oJ8X8=
Received: by 10.82.115.8 with SMTP id n8mr2126515buc.10.1206021917418;
        Thu, 20 Mar 2008 07:05:17 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Thu, 20 Mar 2008 07:05:17 -0700 (PDT)
Message-ID: <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
Date: Thu, 20 Mar 2008 10:05:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field values ...
In-Reply-To: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_527_1742825.1206021917355"
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_527_1742825.1206021917355
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See TermDocs/TermEnum. The trick is to start one of your enumerations
with "" (I forget exactly which), and that'll iterate them all.

Best
Erick

On Thu, Mar 20, 2008 at 9:55 AM, Dragon Fly <dragon-fly999@hotmail.com>
wrote:

> What's the easiest way to extract the values of 2 fields from each
> document in the index.  For example, each document has 5 fields:
>    Id     Name     Address     Phone     Preference
> I'd like to extract the values for the Id and Phone fields for each
> document in the index.  Thank you.
>
> _________________________________________________________________
> Watch "Cause Effect," a show about real people making a real difference.
>  Learn more.
> http://im.live.com/Messenger/IM/MTV/?source=text_watchcause

------=_Part_527_1742825.1206021917355--

From java-user-return-33273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 14:26:31 2008
Return-Path: <java-user-return-33273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88719 invoked from network); 20 Mar 2008 14:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 14:26:31 -0000
Received: (qmail 96634 invoked by uid 500); 20 Mar 2008 14:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96597 invoked by uid 500); 20 Mar 2008 14:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96586 invoked by uid 99); 20 Mar 2008 14:26:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 07:26:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 14:25:43 +0000
Received: by fg-out-1718.google.com with SMTP id d23so775521fga.27
        for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 07:25:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=e2G0voaiWoJILVITz4O8NTWdQbTkx/lHL+8nvdwx3m8=;
        b=c9mqiQXy4nZ57xVGL/TRPczrWVbNVETUSojFXxVevsTjHY72MySl3EPuvxaxyk/+9NK2hExhIOAw6KoU3OaR5GWoqDMv7I6TslyzZurEXd+Ybxb+NLCjQyAfi/NVELuolkbLBxmWTvwABnN4B3VZ8tpvPYyL14u5XYbHSWjJolU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WlvsNOcsFnwnwntv4M19aIIXlMn5C0+gvC3ucFKZ+jozF9Xyu5FkjW+nu2OtQsYnphDvxpddSp2oEAYjieTHxONAKzHTIwm+8DMgWjpBhVrBuCenUke1+1aBH/ScmMsjNL4/3fcsMEcHWEiASWjm9/w+7OlL7GZWYpZMIMAwcZs=
Received: by 10.82.127.14 with SMTP id z14mr4220213buc.3.1206023129623;
        Thu, 20 Mar 2008 07:25:29 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Thu, 20 Mar 2008 07:25:29 -0700 (PDT)
Message-ID: <1bcb7c7f0803200725m54df3031v8b861a3a742a77b@mail.gmail.com>
Date: Thu, 20 Mar 2008 16:25:29 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: using hitcollector and scoring at the same time
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_690_434884.1206023129622"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_690_434884.1206023129622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I recently changed my query logic. Before, I was getting a hits object, and
now I am using a bitSet with a hitcollector.
The reason for using bitSet is document caching, and being able to count how
many hits belong to which categories.

Although my new logic works, I have noticed that now the resulting documents
is not in order of boost (naturally).

Is there an easy way to accomplish this?

Any ideas / recomendations greatly appreciated.

Best.
-C.B.

------=_Part_690_434884.1206023129622--

From java-user-return-33274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 15:09:16 2008
Return-Path: <java-user-return-33274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31081 invoked from network); 20 Mar 2008 15:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 15:09:15 -0000
Received: (qmail 73842 invoked by uid 500); 20 Mar 2008 15:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73814 invoked by uid 500); 20 Mar 2008 15:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73803 invoked by uid 99); 20 Mar 2008 15:09:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 08:09:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.160 as permitted sender)
Received: from [65.55.175.160] (HELO blu139-omc1-s20.blu139.hotmail.com) (65.55.175.160)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 15:08:25 +0000
Received: from BLU119-W28 ([65.55.162.182]) by blu139-omc1-s20.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 20 Mar 2008 08:08:36 -0700
Message-ID: <BLU119-W28CAE7213252F898DAC243B9000@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_d86e2e71-e36a-451c-840c-5d2a1c48a0a2_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Field values ...
Date: Thu, 20 Mar 2008 11:08:36 -0400
Importance: Normal
In-Reply-To: <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Mar 2008 15:08:36.0324 (UTC) FILETIME=[455BE240:01C88A9C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_d86e2e71-e36a-451c-840c-5d2a1c48a0a2_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I was able to get a list of all the values for the Id field and another lis=
t of all the values for the Phone field using TermEnum (i.e. two independen=
t lists).  However, what I really wanted was:

- Get the first Id
- Get the Phone associated with the first Id.
- Get the second Id
- Get the Phone associated with the second Id.
...
...

I want to do something like:

    List<Info> infoList =3D new ArrayList<Info> ();
    foreach (Document doc in LuceneIndex)
    {
       String id =3D doc.get ("Id");
       String phone =3D doc.get ("Phone");
       infoList.add (new Info (id, phone));
    }

Thank you.

> Date: Thu, 20 Mar 2008 10:05:17 -0400
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Field values ...
>=20
> See TermDocs/TermEnum. The trick is to start one of your enumerations
> with "" (I forget exactly which), and that'll iterate them all.
>=20
> Best
> Erick
>=20
> On Thu, Mar 20, 2008 at 9:55 AM, Dragon Fly <dragon-fly999@hotmail.com>
> wrote:
>=20
> > What's the easiest way to extract the values of 2 fields from each
> > document in the index.  For example, each document has 5 fields:
> >    Id     Name     Address     Phone     Preference
> > I'd like to extract the values for the Id and Phone fields for each
> > document in the index.  Thank you.
> >
> > _________________________________________________________________
> > Watch "Cause Effect," a show about real people making a real difference=
.
> >  Learn more.
> > http://im.live.com/Messenger/IM/MTV/?source=3Dtext_watchcause

_________________________________________________________________
Test your Star IQ
http://club.live.com/red_carpet_reveal.aspx?icid=3Dredcarpet_HMTAGMAR=

--_d86e2e71-e36a-451c-840c-5d2a1c48a0a2_--

From java-user-return-33275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 15:12:38 2008
Return-Path: <java-user-return-33275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33215 invoked from network); 20 Mar 2008 15:12:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 15:12:38 -0000
Received: (qmail 82880 invoked by uid 500); 20 Mar 2008 15:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82850 invoked by uid 500); 20 Mar 2008 15:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82834 invoked by uid 99); 20 Mar 2008 15:12:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 08:12:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 15:11:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so788817fga.27
        for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 08:12:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=4amzu6/yRSuPE1b1ZpSznAfSMaLSYJ6BqD3QgM/E+BE=;
        b=hbPL6fnszT1zovIIQstXvnpTnumGGPBlxL6xcvFFUHqaFPXuc2Nm3FEgISyUsshwbP4KKXrG8JqjQY+a3tEo0W2B/x4lp/G1/juGP17rfGR8OzFCnm9SkilH8KJ1yqoBfwjXZnn3MIlg4WHPNmFrdlRkXW2sZZkO2dEYqt/msPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=odyoWA0HZJxh18CzyRHMvalh2p42wFsSquwaaD+74NxZgZpl2toktk/CF8I4YxIyYJ+8qVjOlPP/cmw3kDDgzL0kRfxHnygDm4kAXBwxWTYcvH8ZlYlbht+EtUpW194bd8n9hAPZ7PkPMd5/uHUrbujOE09ubDmjm7nTp0pMNUg=
Received: by 10.82.184.2 with SMTP id h2mr4353606buf.1.1206025920427;
        Thu, 20 Mar 2008 08:12:00 -0700 (PDT)
Received: by 10.82.173.16 with HTTP; Thu, 20 Mar 2008 08:12:00 -0700 (PDT)
Message-ID: <1bcb7c7f0803200812v605f604es1187fe0c68f6d7f6@mail.gmail.com>
Date: Thu, 20 Mar 2008 17:12:00 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: document scoring
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_979_25734929.1206025920415"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_979_25734929.1206025920415
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am querying an index by using custom boost factors for each field. Usually
a query looks like:

fieldA:"term1"^0.2 fieldB:"term2"^4

when I get scores from HitCollector, they are not necessarily between 0 and
1.

How can I normalize these scores?

Best.
-C.A.

------=_Part_979_25734929.1206025920415--

From java-user-return-33276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 15:40:33 2008
Return-Path: <java-user-return-33276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49005 invoked from network); 20 Mar 2008 15:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 15:40:33 -0000
Received: (qmail 47316 invoked by uid 500); 20 Mar 2008 15:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47289 invoked by uid 500); 20 Mar 2008 15:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47278 invoked by uid 99); 20 Mar 2008 15:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 08:40:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 15:39:46 +0000
Received: by fg-out-1718.google.com with SMTP id d23so796454fga.27
        for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 08:39:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SPh/Q8ZVnfysQ03+0jhLhwmbhu3TSlq8vtNZC4C2Pnw=;
        b=Zd8OadvOgwdwfdyyOs9XEtLrILg5eGunIO8u3Od267zGnYlznUvGZv8vl4NJsRMg3xwO2LwiJFXYtkl9S6ZUIAWceuChXSjMVT44PqzUvSqwxkjk2G12JqyaNaPiukjpmV5FqDTAmc3DiAxKmRAtxuWW1aZM3PpwwQH0Mus28Ao=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZDvqT6C9IEIe2X8xiY6zK0OYol5L/St+cAXFfF1W+VeO/dszHW1AEZNA+cxIzaqI85ds4R4Octf9KVX+KYOZM18XhoXaHf4WJRkOM9av9J3TkQOUw9w2q1DJRFHITXJrPzziyAZEUo8UX4wh5cHnC6dXiHM8yHBRIsHmTV80m8s=
Received: by 10.82.134.12 with SMTP id h12mr4310909bud.34.1206027596080;
        Thu, 20 Mar 2008 08:39:56 -0700 (PDT)
Received: by 10.82.151.7 with HTTP; Thu, 20 Mar 2008 08:39:56 -0700 (PDT)
Message-ID: <359a92830803200839n2e6ffd72x5b384d556fa5798e@mail.gmail.com>
Date: Thu, 20 Mar 2008 11:39:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document scoring
In-Reply-To: <1bcb7c7f0803200812v605f604es1187fe0c68f6d7f6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_906_32393223.1206027596071"
References: <1bcb7c7f0803200812v605f604es1187fe0c68f6d7f6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_906_32393223.1206027596071
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try TopDocs. You can use getMaxScore and divide....

Best
Erick

On Thu, Mar 20, 2008 at 11:12 AM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> I am querying an index by using custom boost factors for each field.
> Usually
> a query looks like:
>
> fieldA:"term1"^0.2 fieldB:"term2"^4
>
> when I get scores from HitCollector, they are not necessarily between 0
> and
> 1.
>
> How can I normalize these scores?
>
> Best.
> -C.A.
>

------=_Part_906_32393223.1206027596071--

From java-user-return-33277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 18:16:56 2008
Return-Path: <java-user-return-33277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44328 invoked from network); 20 Mar 2008 18:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 18:16:56 -0000
Received: (qmail 75445 invoked by uid 500); 20 Mar 2008 18:16:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75408 invoked by uid 500); 20 Mar 2008 18:16:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75397 invoked by uid 99); 20 Mar 2008 18:16:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 11:16:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 18:16:09 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1124390wah.11
        for <java-user@lucene.apache.org>; Thu, 20 Mar 2008 11:15:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=5GljVDRr+RQoS264XJ0d7tm9/KBSgpv8OST/9FWueAs=;
        b=Ezt8FiKv0urPZSXgjEUh4MMNdhqf2LOOLXKn0wQN0BMUZMZueVWXLqzdgvXvGopxGkVknGpysDuu2nxIeZ6BM0jua9DJ6MioLlbZuA4XCleX8sw6XOGpS/EmmSvptTyIkdf+2ZfHmP9l27JBgErCXPl6v63HjFAOxJ4/D8ukJao=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=bY1g8LJr+esKxH3IZrC6I5rmLKOPmS0BKHqfl77L+tNqL8kUW+RPKIOgFqAVZ4LhlE02jLo46TjSqs734BNgObxuTGsZOYa0GYkiDGneOF7WI5XAhiDvkwlSHbJZs1ekG9i3haVpKPMsTTh7PprkIcwonMAs0JGz+OnyT5oXlIE=
Received: by 10.115.88.1 with SMTP id q1mr3846110wal.98.1206036943808;
        Thu, 20 Mar 2008 11:15:43 -0700 (PDT)
Received: by 10.114.131.10 with HTTP; Thu, 20 Mar 2008 11:15:43 -0700 (PDT)
Message-ID: <9d2777b60803201115g56b31d47j665eb39f6d940570@mail.gmail.com>
Date: Thu, 20 Mar 2008 15:15:43 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Chaining analyzers
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33323_16232832.1206036943804"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33323_16232832.1206036943804
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello there! Is it possible to chain analyzers? If I don't know what is the
locale of my document, and considering that all of my docs will always
either be in English/Spanish/Portuguese, is it possible to chain analyzers
to remove stop-words from all those locales? I know that stem would be a
much more complicated (or even not possible) solution.

Regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_33323_16232832.1206036943804--

From java-user-return-33278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 18:48:41 2008
Return-Path: <java-user-return-33278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65455 invoked from network); 20 Mar 2008 18:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 18:48:40 -0000
Received: (qmail 22149 invoked by uid 500); 20 Mar 2008 18:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22119 invoked by uid 500); 20 Mar 2008 18:48:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22108 invoked by uid 99); 20 Mar 2008 18:48:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 11:48:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.163.179.111] (HELO web35402.mail.mud.yahoo.com) (66.163.179.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Mar 2008 18:47:42 +0000
Received: (qmail 50404 invoked by uid 60001); 20 Mar 2008 18:47:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=lGAreGoMN1PbDmc/NmzdKbxiCTqUx2h+JCCGCop2D2akDKgBv24mRnt1/QZdovhA76dLQ0y7uCf8OrgiM0zxuK0DoCrYxTdZi8pp0n6CjxedEr4iepDzGOXEgIoOti3koV00WUaKAvC8TlsU9tz/ILhRVQuCxGjPnRPpkQae8ZU=;
X-YMail-OSG: LaZY1kkVM1kp6eU1CtqeFj1nwn7syZn81QFo1c.6uCS5tSKcrQFwmuo0VgvffsdhQW3_c00Qv6bdfcA67OCCEZUsEU6IaC7hSTDEKRBMiskBzT8u8VY-
Received: from [147.21.16.3] by web35402.mail.mud.yahoo.com via HTTP; Thu, 20 Mar 2008 11:47:58 PDT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.162
Date: Thu, 20 Mar 2008 11:47:58 -0700 (PDT)
From: roger dimitri <rogerdimitri@yahoo.com>
Subject: backup RAMDirectory to file
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-309385512-1206038878=:50366"
Message-ID: <58882.50366.qm@web35402.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-309385512-1206038878=:50366
Content-Type: text/plain; charset=us-ascii

Hi,
  I am using the Directory class's copy method to periodically sync my RAM based index to a file based index that's supposed to serve as a hot backup. I want to know if this is the right way to maintain a periodic backup of my RAM based index and, if Yes, then is it reliable in a production instance with almost 12 to 15 GB of Lucene index loaded into the RAMDirectory. 
Any advice is greatly appreciated.
I have a sample working code snippet here:

public class RAMtoFILEcopy_test1 {


    static String[] queries = {
        "a OR b AND c",
        "(a OR b) AND c",
        "a OR (b AND c)",
        "a AND b",
        "a AND b OR c AND d",
        "(a AND b) OR (c AND d)",
        "a AND (b OR c) AND d",
        "((a AND b) OR c) AND d",
        "a AND (b OR (c AND d))",
        "a AND b AND c AND d",

        "a OR b AND NOT c",
        "(a OR b) AND NOT c",
        "a OR (b AND NOT c)",
        "a AND NOT d",
        "a AND NOT b OR c AND NOT d",
        "(a AND NOT b) OR (c AND NOT d)",
        "a AND NOT (b OR c) AND NOT d",
        "((a AND NOT b) OR c) AND NOT d",
        "a AND NOT (b OR (c AND NOT d))",
        "a AND NOT b AND NOT c AND NOT d",
    
    "a OR NOT b",
    "a OR NOT a",

    "a b",
    "a b c",
    "a b (c d e)",
    "+a +b",
    "a -b",
    "a +b -c",
    "+a b -c",
    "+a -b c",
    "a -b -c",
    "-a b c",

    "a OR b c AND d",
    "a OR b c",
    "a AND b c",
    "a OR b c OR d",
    "a OR b c d OR e",
    "a AND b c AND d",
    "a AND b c d AND e"
    };

    public static void main(String argv[]) throws Exception {
        Directory dir = new RAMDirectory();
        Analyzer analyzer = new StandardAnalyzer();
        
        IndexWriter writer = new IndexWriter(dir, analyzer, true);

        for ( int i=0; i < queries.length; i++ ) {
            Document doc = new Document();
            doc.add(new Field("text", queries[i], Field.Store.YES, Field.Index.TOKENIZED));
            writer.addDocument(doc);
        }
        writer.close();

        
        Directory dir2 = FSDirectory.getDirectory("/tmp/TestHotbackup", true);
        dir.copy(dir, dir2, true);

    }

}


Thanks a lot,
Roger




      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-309385512-1206038878=:50366--

From java-user-return-33279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 20 19:24:24 2008
Return-Path: <java-user-return-33279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88553 invoked from network); 20 Mar 2008 19:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Mar 2008 19:24:22 -0000
Received: (qmail 78875 invoked by uid 500); 20 Mar 2008 19:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78848 invoked by uid 500); 20 Mar 2008 19:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78835 invoked by uid 99); 20 Mar 2008 19:24:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 12:24:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.145 as permitted sender)
Received: from [65.55.175.145] (HELO blu139-omc1-s5.blu139.hotmail.com) (65.55.175.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2008 19:23:14 +0000
Received: from BLU119-W41 ([65.55.162.182]) by blu139-omc1-s5.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 20 Mar 2008 12:23:33 -0700
Message-ID: <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_20bdafad-6f4b-4355-8a8b-8b97a0438239_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Field values ...
Date: Thu, 20 Mar 2008 15:23:33 -0400
Importance: Normal
In-Reply-To: <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Mar 2008 19:23:33.0881 (UTC) FILETIME=[E369D690:01C88ABF]
X-Virus-Checked: Checked by ClamAV on apache.org

--_20bdafad-6f4b-4355-8a8b-8b97a0438239_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I was able to get a list of all the values for the Id field and another lis=
t of all the values for the Phone field using TermEnum (i.e. two independen=
t lists).  However, what I really wanted was:
=20
- Get the first Id
- Get the Phone associated with the first Id.
- Get the second Id
- Get the Phone associated with the second Id.
...
...
=20
I want to do something like:
=20
    List<Info> infoList =3D new ArrayList<Info> ();
    foreach (Document doc in LuceneIndex)
    {
       String id =3D doc.get ("Id");
       String phone =3D doc.get ("Phone");
       infoList.add (new Info (id, phone));
    }
=20
Thank you.

> Date: Thu, 20 Mar 2008 10:05:17 -0400
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Field values ...
>=20
> See TermDocs/TermEnum. The trick is to start one of your enumerations
> with "" (I forget exactly which), and that'll iterate them all.
>=20
> Best
> Erick
>=20
> On Thu, Mar 20, 2008 at 9:55 AM, Dragon Fly <dragon-fly999@hotmail.com>
> wrote:
>=20
> > What's the easiest way to extract the values of 2 fields from each
> > document in the index.  For example, each document has 5 fields:
> >    Id     Name     Address     Phone     Preference
> > I'd like to extract the values for the Id and Phone fields for each
> > document in the index.  Thank you.
> >
> > _________________________________________________________________
> > Watch "Cause Effect," a show about real people making a real difference=
.
> >  Learn more.
> > http://im.live.com/Messenger/IM/MTV/?source=3Dtext_watchcause

_________________________________________________________________
How well do you know your celebrity gossip?
http://originals.msn.com/thebigdebate?ocid=3DT002MSN03N0707A=

--_20bdafad-6f4b-4355-8a8b-8b97a0438239_--

From java-user-return-33280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 10:57:18 2008
Return-Path: <java-user-return-33280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59771 invoked from network); 21 Mar 2008 10:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 10:57:18 -0000
Received: (qmail 34187 invoked by uid 500); 21 Mar 2008 10:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34144 invoked by uid 500); 21 Mar 2008 10:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34133 invoked by uid 99); 21 Mar 2008 10:57:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 03:57:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 10:56:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 709C31619E7
	for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 03:56:38 -0700 (PDT)
Message-Id: <FA47BD8F-7CD6-427B-A6D9-CCAE30030A49@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <58882.50366.qm@web35402.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: backup RAMDirectory to file
Date: Fri, 21 Mar 2008 06:56:37 -0400
References: <58882.50366.qm@web35402.mail.mud.yahoo.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I think you could try:

IndexWriter writer = new IndexWriter(fileDirectory, ...)
writer.addIndexes(ramDir)

-Grant

On Mar 20, 2008, at 2:47 PM, roger dimitri wrote:

> Hi,
>  I am using the Directory class's copy method to periodically sync  
> my RAM based index to a file based index that's supposed to serve as  
> a hot backup. I want to know if this is the right way to maintain a  
> periodic backup of my RAM based index and, if Yes, then is it  
> reliable in a production instance with almost 12 to 15 GB of Lucene  
> index loaded into the RAMDirectory.
> Any advice is greatly appreciated.
> I have a sample working code snippet here:
>
> public class RAMtoFILEcopy_test1 {
>
>
>    static String[] queries = {
>        "a OR b AND c",
>        "(a OR b) AND c",
>        "a OR (b AND c)",
>        "a AND b",
>        "a AND b OR c AND d",
>        "(a AND b) OR (c AND d)",
>        "a AND (b OR c) AND d",
>        "((a AND b) OR c) AND d",
>        "a AND (b OR (c AND d))",
>        "a AND b AND c AND d",
>
>        "a OR b AND NOT c",
>        "(a OR b) AND NOT c",
>        "a OR (b AND NOT c)",
>        "a AND NOT d",
>        "a AND NOT b OR c AND NOT d",
>        "(a AND NOT b) OR (c AND NOT d)",
>        "a AND NOT (b OR c) AND NOT d",
>        "((a AND NOT b) OR c) AND NOT d",
>        "a AND NOT (b OR (c AND NOT d))",
>        "a AND NOT b AND NOT c AND NOT d",
>
>    "a OR NOT b",
>    "a OR NOT a",
>
>    "a b",
>    "a b c",
>    "a b (c d e)",
>    "+a +b",
>    "a -b",
>    "a +b -c",
>    "+a b -c",
>    "+a -b c",
>    "a -b -c",
>    "-a b c",
>
>    "a OR b c AND d",
>    "a OR b c",
>    "a AND b c",
>    "a OR b c OR d",
>    "a OR b c d OR e",
>    "a AND b c AND d",
>    "a AND b c d AND e"
>    };
>
>    public static void main(String argv[]) throws Exception {
>        Directory dir = new RAMDirectory();
>        Analyzer analyzer = new StandardAnalyzer();
>
>        IndexWriter writer = new IndexWriter(dir, analyzer, true);
>
>        for ( int i=0; i < queries.length; i++ ) {
>            Document doc = new Document();
>            doc.add(new Field("text", queries[i], Field.Store.YES,  
> Field.Index.TOKENIZED));
>            writer.addDocument(doc);
>        }
>        writer.close();
>
>
>        Directory dir2 = FSDirectory.getDirectory("/tmp/ 
> TestHotbackup", true);
>        dir.copy(dir, dir2, true);
>
>    }
>
> }
>
>
> Thanks a lot,
> Roger
>
>
>
>
>       
> ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page.
> http://www.yahoo.com/r/hs

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 11:24:57 2008
Return-Path: <java-user-return-33281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67757 invoked from network); 21 Mar 2008 11:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 11:24:57 -0000
Received: (qmail 67365 invoked by uid 500); 21 Mar 2008 11:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67335 invoked by uid 500); 21 Mar 2008 11:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67324 invoked by uid 99); 21 Mar 2008 11:24:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 04:24:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 11:23:56 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1776171wxd.20
        for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 04:24:15 -0700 (PDT)
Received: by 10.70.39.3 with SMTP id m3mr3871400wxm.48.1206098655307;
        Fri, 21 Mar 2008 04:24:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h18sm2879902wxd.37.2008.03.21.04.24.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 21 Mar 2008 04:24:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <FA47BD8F-7CD6-427B-A6D9-CCAE30030A49@apache.org>
References: <58882.50366.qm@web35402.mail.mud.yahoo.com> <FA47BD8F-7CD6-427B-A6D9-CCAE30030A49@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E1365CAE-CED6-4F3F-98ED-09C73C39B232@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: backup RAMDirectory to file
Date: Fri, 21 Mar 2008 07:24:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I think both the original approach and addIndexes below will work  
here, though the original approach should be faster.

But, there are some caveats.  You have to make sure you do the backup  
with the writer on the ramDir closed.  If there is a writer open, it  
could be changing files during your backup which will corrupt the  
backup image.

Alternatively, you could do a true "hot backup" (not having to close  
the writer on the ramDir) by using SnapshotDeletionPolicy.

You may want to do an incremental backup of the index.  Since Lucene  
is write-once, you only have to look for new filenames to copy (old  
filenames will never be changed).

Mike

Grant Ingersoll wrote:
> I think you could try:
>
> IndexWriter writer = new IndexWriter(fileDirectory, ...)
> writer.addIndexes(ramDir)
>
> -Grant
>
> On Mar 20, 2008, at 2:47 PM, roger dimitri wrote:
>
>> Hi,
>>  I am using the Directory class's copy method to periodically sync  
>> my RAM based index to a file based index that's supposed to serve  
>> as a hot backup. I want to know if this is the right way to  
>> maintain a periodic backup of my RAM based index and, if Yes, then  
>> is it reliable in a production instance with almost 12 to 15 GB of  
>> Lucene index loaded into the RAMDirectory.
>> Any advice is greatly appreciated.
>> I have a sample working code snippet here:
>>
>> public class RAMtoFILEcopy_test1 {
>>
>>
>>    static String[] queries = {
>>        "a OR b AND c",
>>        "(a OR b) AND c",
>>        "a OR (b AND c)",
>>        "a AND b",
>>        "a AND b OR c AND d",
>>        "(a AND b) OR (c AND d)",
>>        "a AND (b OR c) AND d",
>>        "((a AND b) OR c) AND d",
>>        "a AND (b OR (c AND d))",
>>        "a AND b AND c AND d",
>>
>>        "a OR b AND NOT c",
>>        "(a OR b) AND NOT c",
>>        "a OR (b AND NOT c)",
>>        "a AND NOT d",
>>        "a AND NOT b OR c AND NOT d",
>>        "(a AND NOT b) OR (c AND NOT d)",
>>        "a AND NOT (b OR c) AND NOT d",
>>        "((a AND NOT b) OR c) AND NOT d",
>>        "a AND NOT (b OR (c AND NOT d))",
>>        "a AND NOT b AND NOT c AND NOT d",
>>
>>    "a OR NOT b",
>>    "a OR NOT a",
>>
>>    "a b",
>>    "a b c",
>>    "a b (c d e)",
>>    "+a +b",
>>    "a -b",
>>    "a +b -c",
>>    "+a b -c",
>>    "+a -b c",
>>    "a -b -c",
>>    "-a b c",
>>
>>    "a OR b c AND d",
>>    "a OR b c",
>>    "a AND b c",
>>    "a OR b c OR d",
>>    "a OR b c d OR e",
>>    "a AND b c AND d",
>>    "a AND b c d AND e"
>>    };
>>
>>    public static void main(String argv[]) throws Exception {
>>        Directory dir = new RAMDirectory();
>>        Analyzer analyzer = new StandardAnalyzer();
>>
>>        IndexWriter writer = new IndexWriter(dir, analyzer, true);
>>
>>        for ( int i=0; i < queries.length; i++ ) {
>>            Document doc = new Document();
>>            doc.add(new Field("text", queries[i], Field.Store.YES,  
>> Field.Index.TOKENIZED));
>>            writer.addDocument(doc);
>>        }
>>        writer.close();
>>
>>
>>        Directory dir2 = FSDirectory.getDirectory("/tmp/ 
>> TestHotbackup", true);
>>        dir.copy(dir, dir2, true);
>>
>>    }
>>
>> }
>>
>>
>> Thanks a lot,
>> Roger
>>
>>
>>
>>
>>       
>> _____________________________________________________________________ 
>> _______________
>> Never miss a thing.  Make Yahoo your home page.
>> http://www.yahoo.com/r/hs
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 15:25:45 2008
Return-Path: <java-user-return-33282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67294 invoked from network); 21 Mar 2008 15:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 15:25:45 -0000
Received: (qmail 71105 invoked by uid 500); 21 Mar 2008 15:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71078 invoked by uid 500); 21 Mar 2008 15:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71067 invoked by uid 99); 21 Mar 2008 15:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 08:25:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 15:24:45 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 274B624001
	for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 17:25:05 +0200 (EET)
Message-ID: <47E3D350.8070200@sirma.bg>
Date: Fri, 21 Mar 2008 17:25:04 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Uwe,

Could you tell what Analyzer do you use when you marked so big indexing 
speedup?
If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
reason is in it. You can see the pre last report in the thread "Indexing 
Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
that now is generated by JFlex instead of JavaCC.
I am asking because I noticed a great speedup in adding documents to 
index in our system. We have time control on this in the debug mode. NOW 
THEY ARE ADDED 5 TIMES FASTER!!!
But in the same time the total process of indexing in our case has 
improvement of about 8%. As our system is very big and complex I am 
wondering if really the whole process of indexing is reduces so 
remarkably and our system causes this slowdown or may be Lucene does 
some optimizations on the index, merges or something else and this is 
the reason the total process of indexing to be not so reasonably faster.

Best Regards,
Ivan



Uwe Goetzke wrote:
> This week I switched the lucene library version on one customer system.
> The indexing speed went down from 46m32s to 16m20s for the complete task
> including optimisation. Great Job!
> We index product catalogs from several suppliers, in this case around
> 56.000 product groups and 360.000 products including descriptions were
> indexed.
>
> Regards
>
> Uwe
>
>
>
> -----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2913 (20080301) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 17:46:49 2008
Return-Path: <java-user-return-33283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32679 invoked from network); 21 Mar 2008 17:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 17:46:49 -0000
Received: (qmail 65541 invoked by uid 500); 21 Mar 2008 17:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65515 invoked by uid 500); 21 Mar 2008 17:46:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65504 invoked by uid 99); 21 Mar 2008 17:46:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 10:46:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.179.116] (HELO web35407.mail.mud.yahoo.com) (66.163.179.116)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Mar 2008 17:45:59 +0000
Received: (qmail 42490 invoked by uid 60001); 21 Mar 2008 17:46:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=5Az2MxfBHfRcv9oefhelQpHJeR6XZ2yMwRfFy8+C0X/dF6UtM2wQGAXiYq/bAtCm3TydMQTKe77KESc5XBaBoqpLgKwCUdB3brEK90txVAMaOaqdOOO5lmJ+8/q94tmcl6fLSMoBMK9MSofD3f/CgdAxKoc9Fx2w09NvdXJW9VU=;
X-YMail-OSG: KO31zsEVM1lgOFkibb6haVIjipbkYIc7tMdBL3Dh2W7NgpxQ61kDIU3DJGC8ZHr8.jg.julDD5m1qK_ScoJQQlj9pBvh6MaZlH.92DvSD9C4.VMOY6A-
Received: from [147.21.16.3] by web35407.mail.mud.yahoo.com via HTTP; Fri, 21 Mar 2008 10:46:08 PDT
X-Mailer: YahooMailRC/902.38 YahooMailWebService/0.7.162
Date: Fri, 21 Mar 2008 10:46:08 -0700 (PDT)
From: roger dimitri <rogerdimitri@yahoo.com>
Subject: Re: backup RAMDirectory to file
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1393408663-1206121568=:42118"
Message-ID: <891394.42118.qm@web35407.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1393408663-1206121568=:42118
Content-Type: text/plain; charset=us-ascii

Thank you so much Michael and Grant for your suggestions. I haven't tried SnapshotDeletionPolicy yet (thanks for the hint, I will do it now) and I guess Incremental back up may not work in my case since I have periodic Index cleaning jobs in RAMDirectory.

Thanks again,
Roger 

----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Friday, March 21, 2008 4:24:13 AM
Subject: Re: backup RAMDirectory to file


I think both the original approach and addIndexes below will work  
here, though the original approach should be faster.

But, there are some caveats.  You have to make sure you do the backup  
with the writer on the ramDir closed.  If there is a writer open, it  
could be changing files during your backup which will corrupt the  
backup image.

Alternatively, you could do a true "hot backup" (not having to close  
the writer on the ramDir) by using SnapshotDeletionPolicy.

You may want to do an incremental backup of the index.  Since Lucene  
is write-once, you only have to look for new filenames to copy (old  
filenames will never be changed).

Mike

Grant Ingersoll wrote:
> I think you could try:
>
> IndexWriter writer = new IndexWriter(fileDirectory, ...)
> writer.addIndexes(ramDir)
>
> -Grant
>
> On Mar 20, 2008, at 2:47 PM, roger dimitri wrote:
>
>> Hi,
>>  I am using the Directory class's copy method to periodically sync  
>> my RAM based index to a file based index that's supposed to serve  
>> as a hot backup. I want to know if this is the right way to  
>> maintain a periodic backup of my RAM based index and, if Yes, then  
>> is it reliable in a production instance with almost 12 to 15 GB of  
>> Lucene index loaded into the RAMDirectory.
>> Any advice is greatly appreciated.
>> I have a sample working code snippet here:
>>
>> public class RAMtoFILEcopy_test1 {
>>
>>
>>    static String[] queries = {
>>        "a OR b AND c",
>>        "(a OR b) AND c",
>>        "a OR (b AND c)",
>>        "a AND b",
>>        "a AND b OR c AND d",
>>        "(a AND b) OR (c AND d)",
>>        "a AND (b OR c) AND d",
>>        "((a AND b) OR c) AND d",
>>        "a AND (b OR (c AND d))",
>>        "a AND b AND c AND d",
>>
>>        "a OR b AND NOT c",
>>        "(a OR b) AND NOT c",
>>        "a OR (b AND NOT c)",
>>        "a AND NOT d",
>>        "a AND NOT b OR c AND NOT d",
>>        "(a AND NOT b) OR (c AND NOT d)",
>>        "a AND NOT (b OR c) AND NOT d",
>>        "((a AND NOT b) OR c) AND NOT d",
>>        "a AND NOT (b OR (c AND NOT d))",
>>        "a AND NOT b AND NOT c AND NOT d",
>>
>>    "a OR NOT b",
>>    "a OR NOT a",
>>
>>    "a b",
>>    "a b c",
>>    "a b (c d e)",
>>    "+a +b",
>>    "a -b",
>>    "a +b -c",
>>    "+a b -c",
>>    "+a -b c",
>>    "a -b -c",
>>    "-a b c",
>>
>>    "a OR b c AND d",
>>    "a OR b c",
>>    "a AND b c",
>>    "a OR b c OR d",
>>    "a OR b c d OR e",
>>    "a AND b c AND d",
>>    "a AND b c d AND e"
>>    };
>>
>>    public static void main(String argv[]) throws Exception {
>>        Directory dir = new RAMDirectory();
>>        Analyzer analyzer = new StandardAnalyzer();
>>
>>        IndexWriter writer = new IndexWriter(dir, analyzer, true);
>>
>>        for ( int i=0; i < queries.length; i++ ) {
>>            Document doc = new Document();
>>            doc.add(new Field("text", queries[i], Field.Store.YES,  
>> Field.Index.TOKENIZED));
>>            writer.addDocument(doc);
>>        }
>>        writer.close();
>>
>>
>>        Directory dir2 = FSDirectory.getDirectory("/tmp/ 
>> TestHotbackup", true);
>>        dir.copy(dir, dir2, true);
>>
>>    }
>>
>> }
>>
>>
>> Thanks a lot,
>> Roger
>>
>>
>>
>>
>>       
>> _____________________________________________________________________ 
>> _______________
>> Never miss a thing.  Make Yahoo your home page.
>> http://www.yahoo.com/r/hs
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-1393408663-1206121568=:42118--

From java-user-return-33284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 20:25:14 2008
Return-Path: <java-user-return-33284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82844 invoked from network); 21 Mar 2008 20:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 20:25:14 -0000
Received: (qmail 36407 invoked by uid 500); 21 Mar 2008 20:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36371 invoked by uid 500); 21 Mar 2008 20:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36360 invoked by uid 99); 21 Mar 2008 20:25:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 13:25:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 20:24:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jcnn3-0004TO-Pu
	for java-user@lucene.apache.org; Fri, 21 Mar 2008 13:24:37 -0700
Message-ID: <16207418.post@talk.nabble.com>
Date: Fri, 21 Mar 2008 13:24:37 -0700 (PDT)
From: milu07 <longvu2@gmail.com>
To: java-user@lucene.apache.org
Subject: Call Lucene default command line Search from PHP script
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: longvu2@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

My machine is Ubuntu 7.10. I am working with Apache Lucene. I have done with
indexer and tried with command line Searcher (the default command line
included in Lucene package: http://lucene.apache.org/java/2_3_1/demo2.html).
When I use this at command line:

java Searcher -query algorithm

it works and returns a list of results to me. Here 'algorithm' is the
keyword to search.

However, I want to have a web search interface written in PHP, I use PHP
exec() to call this Searcher from my PHP script:

exec("java Searcher -query algorithm ", $arr, $retVal);
[I also tried: exec("java Searcher -query 'algorithm' ", $arr, $retVal)]

It does not work. I print the value of $retVal, it is 1.

I come back and try: exec("java Searcher -query algorithm 2>&1 ", $arr,
$retVal);
I receive: 
Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/analysis/Analyzer  
and $retVal is 1

In the command line Searcher.java of Lucene, it imports many libraries, is
this the problem?
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyz er;
....

I guess this is the problem of path. However, I do not know how to fix it
because it works in command line ($CLASSPATH points to the .jar file of
Lucene library). May be PHP does not know $CLASSPATH. So, I add Lucene lib
to $PATH:

export PATH=$PATH:/usr/lib/lucene-core-2.3.1.jar:/usr/lib

However, I get the same error message when I try: exec("java Searcher -query
algorithm 2>&1 ", $arr, $retVal);
Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/analysis/Analyzer

Could you please help?

Thank you,
-- 
View this message in context: http://www.nabble.com/Call-Lucene-default-command-line-Search-from-PHP-script-tp16207418p16207418.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 23:33:01 2008
Return-Path: <java-user-return-33285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32179 invoked from network); 21 Mar 2008 23:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 23:33:00 -0000
Received: (qmail 33452 invoked by uid 500); 21 Mar 2008 23:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33423 invoked by uid 500); 21 Mar 2008 23:32:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33412 invoked by uid 99); 21 Mar 2008 23:32:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 16:32:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 23:32:00 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2LNWK5j010005
	for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 00:32:20 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Call Lucene default command line Search from PHP script
Date: Sat, 22 Mar 2008 00:32:32 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <16207418.post@talk.nabble.com>
In-Reply-To: <16207418.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803220032.32289.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Milu,

This is a PHP problem, not a Lucene one, so you might get better
response at a PHP mailing list.

The easy way around your problem is probably by invoking a shell
script from php that exports the class path as you indicated,
so that java can see the correct classes.

Having said that, you'll probably want to use the PHP/Java extension
to avoid initializing a JVM for each call to lucene.  Try this:
http://www.google.nl/search?q=php+java+org+apache+lucene&ie=UTF-8&oe=UTF-8

This was one of the results:
http://www.idimmu.net/index.php?blog%5Bpagenum%5D=3


Regards,
Paul Elschot


Op Friday 21 March 2008 21:24:37 schreef milu07:
> Hello,
>
> My machine is Ubuntu 7.10. I am working with Apache Lucene. I have
> done with indexer and tried with command line Searcher (the default
> command line included in Lucene package:
> http://lucene.apache.org/java/2_3_1/demo2.html). When I use this at
> command line:
>
> java Searcher -query algorithm
>
> it works and returns a list of results to me. Here 'algorithm' is the
> keyword to search.
>
> However, I want to have a web search interface written in PHP, I use
> PHP exec() to call this Searcher from my PHP script:
>
> exec("java Searcher -query algorithm ", $arr, $retVal);
> [I also tried: exec("java Searcher -query 'algorithm' ", $arr,
> $retVal)]
>
> It does not work. I print the value of $retVal, it is 1.
>
> I come back and try: exec("java Searcher -query algorithm 2>&1 ",
> $arr, $retVal);
> I receive:
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/analysis/Analyzer
> and $retVal is 1
>
> In the command line Searcher.java of Lucene, it imports many
> libraries, is this the problem?
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyz er;
> ....
>
> I guess this is the problem of path. However, I do not know how to
> fix it because it works in command line ($CLASSPATH points to the
> .jar file of Lucene library). May be PHP does not know $CLASSPATH.
> So, I add Lucene lib to $PATH:
>
> export PATH=$PATH:/usr/lib/lucene-core-2.3.1.jar:/usr/lib
>
> However, I get the same error message when I try: exec("java Searcher
> -query algorithm 2>&1 ", $arr, $retVal);
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/analysis/Analyzer
>
> Could you please help?
>
> Thank you,



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 21 23:37:08 2008
Return-Path: <java-user-return-33286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33140 invoked from network); 21 Mar 2008 23:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Mar 2008 23:37:08 -0000
Received: (qmail 36327 invoked by uid 500); 21 Mar 2008 23:37:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36296 invoked by uid 500); 21 Mar 2008 23:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36285 invoked by uid 99); 21 Mar 2008 23:37:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 16:37:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 23:36:21 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2LNaUUq024920
	for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 00:36:31 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Call Lucene default command line Search from PHP script
Date: Sat, 22 Mar 2008 00:36:42 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <16207418.post@talk.nabble.com> <200803220032.32289.paul.elschot@xs4all.nl>
In-Reply-To: <200803220032.32289.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803220036.42830.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 22 March 2008 00:32:32 schreef Paul Elschot:
> Milu,
>
> This is a PHP problem, not a Lucene one, so you might get better
> response at a PHP mailing list.
>
> The easy way around your problem is probably by invoking a shell
> script from php that exports the class path as you indicated,
> so that java can see the correct classes.

I meant a shell script that exports the class path, and invokes
java from the same shell.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 01:21:32 2008
Return-Path: <java-user-return-33287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82533 invoked from network); 22 Mar 2008 01:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 01:21:32 -0000
Received: (qmail 2638 invoked by uid 500); 22 Mar 2008 01:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2609 invoked by uid 500); 22 Mar 2008 01:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2598 invoked by uid 99); 22 Mar 2008 01:21:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 18:21:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 01:20:43 +0000
Received: by fk-out-0910.google.com with SMTP id 19so2224133fkr.5
        for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 18:20:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=ZugF7r6TwfRjnRyY2lj8DYBEjRPYYS4IfVnxS4G8C2c=;
        b=lgwDya1uPy1msLlpldUCPMxwFIwbZiDRMyS6gGo8p+0ZmAiTyNAb2JxbkuRX0N4GEPKBdcJciFwW/VHpn78CYuX1GxLyI58X9ggx6zhTpVnKztnnlpMH4ZZKc75YURCOXxPuZgDgH8cL27VOj0NB6dDb3FbBmCRCAv1Jw0/+wq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=kec8qsX9PNotSgvlhphirkDvgevrzjfBaUUj8yNCvj6v5oNG6hDBHf+lK34hR1Zp6Bpky0K0QDUp1OJkUGpIL90ri1Jd3zYKL/HpXqfirUwcoBP4v+sAdmTpIi4shY7muJEG8+TRuedMYnc6tAL2l1mBcbbAJomJUXjdLitYkxU=
Received: by 10.78.197.9 with SMTP id u9mr6190124huf.56.1206148852976;
        Fri, 21 Mar 2008 18:20:52 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Fri, 21 Mar 2008 18:20:52 -0700 (PDT)
Message-ID: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
Date: Fri, 21 Mar 2008 18:20:52 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: factor in stopwords when searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Let's say "the" is considered stopword. And for example two documents are
document A, content: "... search the database..."
document B, content: "... search database..."

So when the user's input is "search the database", searching with
query content:"search database"~1 can return both.
But is there any way to translate that into a query that can rank the
document A higher than document B?

Thanks!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 02:32:30 2008
Return-Path: <java-user-return-33288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6346 invoked from network); 22 Mar 2008 02:32:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 02:32:30 -0000
Received: (qmail 34311 invoked by uid 500); 22 Mar 2008 02:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34284 invoked by uid 500); 22 Mar 2008 02:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34273 invoked by uid 99); 22 Mar 2008 02:32:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 19:32:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 02:31:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 5698D190E32
	for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 19:31:49 -0700 (PDT)
Message-Id: <25381FF7-2817-49CA-B07D-6B51BBB83DC2@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: factor in stopwords when searching
Date: Fri, 21 Mar 2008 22:31:47 -0400
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Don't throw away the stopwords?  :-)  Lucene can't score something it  
doesn't know exists.  I suppose you could try to get fancy w/ payloads  
and add payloads if stopwords exist, but I am just thinking out loud  
there.


On Mar 21, 2008, at 9:20 PM, Chris Lu wrote:

> Let's say "the" is considered stopword. And for example two  
> documents are
> document A, content: "... search the database..."
> document B, content: "... search database..."
>
> So when the user's input is "search the database", searching with
> query content:"search database"~1 can return both.
> But is there any way to translate that into a query that can rank the
> document A higher than document B?
>
> Thanks!
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 03:58:50 2008
Return-Path: <java-user-return-33289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40732 invoked from network); 22 Mar 2008 03:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 03:58:49 -0000
Received: (qmail 93612 invoked by uid 500); 22 Mar 2008 03:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93581 invoked by uid 500); 22 Mar 2008 03:58:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93568 invoked by uid 99); 22 Mar 2008 03:58:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Mar 2008 20:58:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.247 as permitted sender)
Received: from [72.14.246.247] (HELO ag-out-0708.google.com) (72.14.246.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 03:58:00 +0000
Received: by ag-out-0708.google.com with SMTP id 35so3066885aga.11
        for <java-user@lucene.apache.org>; Fri, 21 Mar 2008 20:58:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=fMEBtfhtM/uzUhyk/qZnpnuIo99aQaMLJkvj5lvUpzM=;
        b=CeFeNCEcoXNqPtsUajJpopPrdtf+Ce8BCg8pINfXUeeuwnTn8b4IB2ecSeOShhOdeigNybT6c9mJ7BnXXEZH8o8MwDVWLijSJMl3Lk95GmXNvJ1Sp39F8/a7kPS2hxex+eXzYxaFvWlQsfJhet/sE8GBVn2XhUSaSSvQW6xUgms=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cYkOfrD1IoCXtNlC0bcGG8YKLY1a5UWcIFvVTc2QWoBFzz+z3X9r/C2a7F0L9y36AFyiAkTdX4EXUaNTaNhW/XReR8UiFmDbI9uzk5wVxExpBIrIloDu0iwRkVPnKyOFMJQqkj+tiX1Vcd4VQ/B+VI0GH3pnOB/fwx9OxZcERtU=
Received: by 10.100.10.11 with SMTP id 11mr4330404anj.10.1206158291438;
        Fri, 21 Mar 2008 20:58:11 -0700 (PDT)
Received: by 10.100.42.8 with HTTP; Fri, 21 Mar 2008 20:58:11 -0700 (PDT)
Message-ID: <4b124c310803212058k5db39752x5f6e3340ac1e9eca@mail.gmail.com>
Date: Fri, 21 Mar 2008 20:58:11 -0700
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: factor in stopwords when searching
In-Reply-To: <25381FF7-2817-49CA-B07D-6B51BBB83DC2@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7412_27554825.1206158291441"
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
	 <25381FF7-2817-49CA-B07D-6B51BBB83DC2@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7412_27554825.1206158291441
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think the way I've seen it done most often is to either index some
bi-grams which
contain stop words (so "the database" and "search the" are in the index as
individual
tokens), or else to index that piece of content twice - once with stop words
removed
(and stemming, if you use it), and then again in another field which leaves
stop words
in (and doesn't do the stemming).

  This can be simply done with a PerFieldAnalyzer(Wrapper?), and some
creative
query expansion: "searches the databases" =>
+(contents:"search database" orig_contents:"searches the databases")
This former query clause will always match if the latter does, so exact
matches will
get weighted higher than ones which only match the inexact ones.

  -jake

On Fri, Mar 21, 2008 at 7:31 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> Don't throw away the stopwords?  :-)  Lucene can't score something it
> doesn't know exists.  I suppose you could try to get fancy w/ payloads
> and add payloads if stopwords exist, but I am just thinking out loud
> there.
>
>
> On Mar 21, 2008, at 9:20 PM, Chris Lu wrote:
>
> > Let's say "the" is considered stopword. And for example two
> > documents are
> > document A, content: "... search the database..."
> > document B, content: "... search database..."
> >
> > So when the user's input is "search the database", searching with
> > query content:"search database"~1 can return both.
> > But is there any way to translate that into a query that can rank the
> > document A higher than document B?
> >
> > Thanks!
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request)
> > got 2.6 Million Euro funding!
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7412_27554825.1206158291441--

From java-user-return-33290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 12:24:43 2008
Return-Path: <java-user-return-33290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90444 invoked from network); 22 Mar 2008 12:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 12:24:43 -0000
Received: (qmail 67542 invoked by uid 500); 22 Mar 2008 12:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67181 invoked by uid 500); 22 Mar 2008 12:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67166 invoked by uid 99); 22 Mar 2008 12:24:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 05:24:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeet232@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 12:23:54 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2081740wah.11
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 05:24:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=YKcK1BTyv2Ig+0MnIft7gsbtLTzDPxCL2HzrUZjd4S8=;
        b=HOQMws/30tV0DOhIci56A9HzMC5mxyWjer2KDl9q/WsHj7DVEugfLnaQ/kJ/9911pdSagkZuJDH1qhuoCsSpvgQHVZqlvx2FMyf0rFsLb6QQ4gDuewsKIKVjWyDL7qUx0FJzt09AxfnIG/xlPE4z8LiVbLlSju2j4mzhOYH2Z1I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=hM/eFFelGeMq3Phb2oB94rlOGfx+hZ3g4RxkYUoYhUPhmbbrKIzAZ5e82idHevwxWUrt4+IW3Dye+EOtdwV/3u+4KDKCCXXuw6RePws2BWEI2aOhTUd2Jsx8GlanI0U2Z5KC1r5J1QtTIGOyQex8LYvvLcGRU7tIkW+UG5SML8g=
Received: by 10.115.79.1 with SMTP id g1mr7870225wal.43.1206188646073;
        Sat, 22 Mar 2008 05:24:06 -0700 (PDT)
Received: from ?117.97.54.24? ( [117.97.54.24])
        by mx.google.com with ESMTPS id m24sm9694940waf.57.2008.03.22.05.24.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 22 Mar 2008 05:24:04 -0700 (PDT)
Message-ID: <47E4FA4E.9060108@gmail.com>
Date: Sat, 22 Mar 2008 17:53:42 +0530
From: Jeet Singh <jeet232@gmail.com>
User-Agent: Thunderbird 3.0a1pre (Windows/2008011003)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Access Denied in opening IndexSearcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

This is my first post to this group.
I'm using Lucene 2.3 on XP machine. I've an index of 3000 pages in a dir 
named 'wcrawl', that I want to search through.

In the code, when i'm trying to open IndexSearcher at a specific 
'Directory' location, it gives error of
FileNotFound: c:\raw\wcrawl\segments (Access Denied )

There are no software running in background (like antivirus etc.).

Please help
Thanks
Jeet Singh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 13:11:53 2008
Return-Path: <java-user-return-33291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1725 invoked from network); 22 Mar 2008 13:11:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 13:11:53 -0000
Received: (qmail 9154 invoked by uid 500); 22 Mar 2008 13:11:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9124 invoked by uid 500); 22 Mar 2008 13:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9112 invoked by uid 99); 22 Mar 2008 13:11:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 06:11:45 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=FORGED_AOL_TAGS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johnmunir@aol.com designates 64.12.137.5 as permitted sender)
Received: from [64.12.137.5] (HELO imo-m24.mx.aol.com) (64.12.137.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 13:10:56 +0000
Received: from johnmunir@aol.com
	by imo-m24.mx.aol.com (mail_out_v38_r9.3.) id h.d2e.1a1f0cb6 (34928)
	 for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 09:11:13 -0400 (EDT)
Received: from MBLK-M35 (mblk-m35.mblk.aol.com [64.12.136.79]) by cia-da04.mx.aol.com (v121.4) with ESMTP id MAILCIADA041-887047e5057117f; Sat, 22 Mar 2008 09:11:13 -0400
To: java-user@lucene.apache.org
Subject: Field name size and index size
Date: Sat, 22 Mar 2008 09:11:13 -0400
X-MB-Message-Source: WebUI
X-AOL-IP: 96.237.168.95
X-MB-Message-Type: User
MIME-Version: 1.0
From: John <johnmunir@aol.com>
Content-Type: multipart/alternative; 
 boundary="--------MB_8CA5A3556C555DF_964_4453_MBLK-M35.sysops.aol.com"
X-Mailer: AOL Webmail 35304-STANDARD
Received: from 96.237.168.95 by MBLK-M35.sysops.aol.com (64.12.136.79) with HTTP (WebMailUI); Sat, 22 Mar 2008 09:11:13 -0400
Message-Id: <8CA5A3556C2F38C-964-21CA@MBLK-M35.sysops.aol.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

----------MB_8CA5A3556C555DF_964_4453_MBLK-M35.sysops.aol.com
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"

Hi,

Lets say my data source consists of records like so (the example is Field=Value):

? AAAAAAAAAA=Value1
? BBBBBBBBBB=Value2
? CCCCCCCCCC=Value3
? DDDDDDDDDD=Value4

And lets say I a second copy of my data but this time it looks like so:

? A=Value1
? B=Value2
? C=Value3
? D=Value4

I..e, same data, the only change is the field names?are now shorter

Now if?i create two Lucene indexes ... one using the long field name and one using the short field name (my data has not changed) .. will the Lucene index size be smaller for the short field name one?? Will updating and optimizing the index be faster?? Will searching be faster?

That is, i'm I better off using short field names vs. long field names?

Yes, i will do some performance analyses .. but i want to know if this matters before I do so.

Thanks in advance!

-JM

----------MB_8CA5A3556C555DF_964_4453_MBLK-M35.sysops.aol.com--

From java-user-return-33292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 14:27:54 2008
Return-Path: <java-user-return-33292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23984 invoked from network); 22 Mar 2008 14:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 14:27:54 -0000
Received: (qmail 46015 invoked by uid 500); 22 Mar 2008 14:27:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45976 invoked by uid 500); 22 Mar 2008 14:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45965 invoked by uid 99); 22 Mar 2008 14:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 07:27:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 14:27:07 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2330346wxd.20
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 07:27:17 -0700 (PDT)
Received: by 10.70.32.2 with SMTP id f2mr5810768wxf.63.1206196036668;
        Sat, 22 Mar 2008 07:27:16 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id i16sm3640320wxd.30.2008.03.22.07.27.13
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 22 Mar 2008 07:27:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8CA5A3556C2F38C-964-21CA@MBLK-M35.sysops.aol.com>
References: <8CA5A3556C2F38C-964-21CA@MBLK-M35.sysops.aol.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <19D19950-25D1-4367-8B70-E132D2CE258E@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Field name size and index size
Date: Sat, 22 Mar 2008 10:27:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Summary: I think there will be no real impact if you use longer field  
names.

Details:

Index size will be just a tiny bit bigger.  There is a single file  
per segment (*.fnm) that resolves the field names into integer IDs,  
then the rest of the index uses these integer IDs.  So only that  
file, which holds one copy of the string name of each field, will be  
bigger.

Indexing may be a bit faster with shorter names just because Lucene  
does a hashtable lookup of that string (one per field per document)  
to find the corresponding integer.  My guess is this is a very  
negligible impact, especially if the content of each field is long.   
Searching goes through a similar hashtable lookup, after which the  
field name is interned, but for a largish index that time is surely  
negligible as well.  But you should test!  And please report back :)

Mike

John wrote:
> Hi,
>
> Lets say my data source consists of records like so (the example is  
> Field=Value):
>
> ? AAAAAAAAAA=Value1
> ? BBBBBBBBBB=Value2
> ? CCCCCCCCCC=Value3
> ? DDDDDDDDDD=Value4
>
> And lets say I a second copy of my data but this time it looks like  
> so:
>
> ? A=Value1
> ? B=Value2
> ? C=Value3
> ? D=Value4
>
> I..e, same data, the only change is the field names?are now shorter
>
> Now if?i create two Lucene indexes ... one using the long field  
> name and one using the short field name (my data has not  
> changed) .. will the Lucene index size be smaller for the short  
> field name one?? Will updating and optimizing the index be faster??  
> Will searching be faster?
>
> That is, i'm I better off using short field names vs. long field  
> names?
>
> Yes, i will do some performance analyses .. but i want to know if  
> this matters before I do so.
>
> Thanks in advance!
>
> -JM


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 17:54:10 2008
Return-Path: <java-user-return-33293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 731 invoked from network); 22 Mar 2008 17:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 17:54:10 -0000
Received: (qmail 46891 invoked by uid 500); 22 Mar 2008 17:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46847 invoked by uid 500); 22 Mar 2008 17:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46835 invoked by uid 99); 22 Mar 2008 17:54:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 10:54:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 17:53:20 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1745254fga.27
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 10:53:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Dz2Cn5vWQ56+LoqMraLNpAZukhlSqnqyPHVlGO9cbuo=;
        b=tfPjZubyFeBJ1V0sqg9aV1ozMi/iKrM3QmObfoWOzGYJVEIWigH17N49nsOCXW+VxFxyPL/9sOtg4iH9k2j+r5bzF1rru9wznDl5U1TYAI1ehQ8NOICcr2xI7oIv/4C4vY2GnFyDkxP3C/VNBY46ar8/zxQkx2T06Slkn20mKpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K1TjHiZnVtHN/ncf3uDshhdLNCmvpyeHeCentSVxM/Jr8vH4wYFOfs4Q/TL+8Zpcuu2XdN4x+k4qqKKjFUKi05SdFxe5FozqbqDIcsn7YIJcwGrfqDnJvAN8fBI/p+Ybb3vVy25JJQO/AyeZ38X55UEGYaDQbhd1DaFsO3ZL4Ig=
Received: by 10.82.191.3 with SMTP id o3mr11373920buf.17.1206208409428;
        Sat, 22 Mar 2008 10:53:29 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Sat, 22 Mar 2008 10:53:29 -0700 (PDT)
Message-ID: <359a92830803221053t10be4671h44076882206562a8@mail.gmail.com>
Date: Sat, 22 Mar 2008 13:53:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: factor in stopwords when searching
In-Reply-To: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6044_29219347.1206208409414"
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6044_29219347.1206208409414
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What's your reason for trying? The whole point of stop words is that
they should be considered "no ops". That is, they add nothing to the
semantics of whatever is being processed. I' don't understand the use
case for why you want to go outside that assumption.

Another way of asking this is "what tangible benefit to your users
are you trying to implement"?

Best
Erick

On Fri, Mar 21, 2008 at 9:20 PM, Chris Lu <chris.lu@gmail.com> wrote:

> Let's say "the" is considered stopword. And for example two documents are
> document A, content: "... search the database..."
> document B, content: "... search database..."
>
> So when the user's input is "search the database", searching with
> query content:"search database"~1 can return both.
> But is there any way to translate that into a query that can rank the
> document A higher than document B?
>
> Thanks!
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6044_29219347.1206208409414--

From java-user-return-33294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 17:57:45 2008
Return-Path: <java-user-return-33294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1912 invoked from network); 22 Mar 2008 17:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 17:57:45 -0000
Received: (qmail 50773 invoked by uid 500); 22 Mar 2008 17:57:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50733 invoked by uid 500); 22 Mar 2008 17:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50715 invoked by uid 99); 22 Mar 2008 17:57:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 10:57:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 17:56:49 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1746324fga.27
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 10:57:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yLsqfIGYJ7KyKtsK15n+YUkM8trI/Yg0OYmjGm8edbM=;
        b=UNPxBj+GxyO9rNRrhyELDnxIKz24+QeAYF5chsqiglR7UoCenJyD9wX54oetO9UkVjmUY1lPqb1F+iDTj1ck9iqUZItqlCFNj3DzwsAZHf7kKeSFtLtEdHkyUrsHmSWFTIp2AoZXOXY8Tghhf3unO8z+e23RcBTSIYkgxvn7yVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r+UVB2hOa9fSRqgsdLbFKN8PoXXg0pBNVOW6zRo6eR/pQuzucIhbCUtauZdn2wB/yMxkHSi2V0ICNDAC3kzHTuni25v5nJSWRRvkPSCrvGPaLbL7N/JTetfqPlEKhvKeGqebY/3OruQGHSDPQ7xkEMZLTFNZrCuakyAXyZszqcc=
Received: by 10.82.161.19 with SMTP id j19mr11393381bue.12.1206208629873;
        Sat, 22 Mar 2008 10:57:09 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Sat, 22 Mar 2008 10:57:09 -0700 (PDT)
Message-ID: <359a92830803221057x533eeeeas374e1093efcfbb4e@mail.gmail.com>
Date: Sat, 22 Mar 2008 13:57:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Access Denied in opening IndexSearcher
In-Reply-To: <47E4FA4E.9060108@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6052_20758615.1206208629869"
References: <47E4FA4E.9060108@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6052_20758615.1206208629869
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Two things:

1> get a copy of Luke and try to navigate to your dir and open it.
That'll tell you if you are looking in the right place.

2> Post the code snippets where you open your index for
writing and where you open it for reading. That'll give folks
something to analyze.

Best
Erick

On Sat, Mar 22, 2008 at 8:23 AM, Jeet Singh <jeet232@gmail.com> wrote:

> Hi,
>
> This is my first post to this group.
> I'm using Lucene 2.3 on XP machine. I've an index of 3000 pages in a dir
> named 'wcrawl', that I want to search through.
>
> In the code, when i'm trying to open IndexSearcher at a specific
> 'Directory' location, it gives error of
> FileNotFound: c:\raw\wcrawl\segments (Access Denied )
>
> There are no software running in background (like antivirus etc.).
>
> Please help
> Thanks
> Jeet Singh
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6052_20758615.1206208629869--

From java-user-return-33295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 18:39:31 2008
Return-Path: <java-user-return-33295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24837 invoked from network); 22 Mar 2008 18:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 18:39:31 -0000
Received: (qmail 89104 invoked by uid 500); 22 Mar 2008 18:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88893 invoked by uid 500); 22 Mar 2008 18:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88882 invoked by uid 99); 22 Mar 2008 18:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 11:39:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 18:38:41 +0000
Received: by fk-out-0910.google.com with SMTP id 19so2645077fkr.5
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 11:38:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=x6z7UAwtazFpKbBrzCWLL/yUqO7kbnYbbZcSEt1KbDw=;
        b=pfSvuKSoJmUwmMFEIt2+6Nkymb/VjOvsI5/n5MdAxqu3f8ClZp4OgPOYeGDD/iviAeQSXcgUoWAMmqtO804umz1Eb6gcdrPC/SiccUvY8+7B7kK+ntP9ajjy9lLFndZ91/TXgSDj4vqDrSpBces/nnxi0lBJWR5g2L+4pcGKHr0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AfcOXa1bLvrXoBl2YKjPxIgkwCrM09ZXkTOFBct8CWZMtanppO7paYln8AYhU6C16FjGni8CE8cid5AChbxb92rbpu0b8MrFiqRoUWiza7PYGU9r1h1eFxyLupUT/slEEhF9ENnNdXwnKuKeimVeFBssG3/t6jIh4MSvflkYNnE=
Received: by 10.78.118.5 with SMTP id q5mr8488187huc.62.1206211130965;
        Sat, 22 Mar 2008 11:38:50 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Sat, 22 Mar 2008 11:38:50 -0700 (PDT)
Message-ID: <6e3ae6310803221138m2b8ce1d0o93b7f0d5419f6e0c@mail.gmail.com>
Date: Sat, 22 Mar 2008 11:38:50 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: factor in stopwords when searching
In-Reply-To: <359a92830803221053t10be4671h44076882206562a8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
	 <359a92830803221053t10be4671h44076882206562a8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is asked by some customer, who may not know what's "stop words" at all.

Jake's approach should be quite similar to what some search engine
companies are doing. It'll cost some storage, but can achieve a good
user experience.

The benefit is kind of obvious in real world. When users enter some
query, they do not really know stop words like "the" are not in the
index at all.
If they are looking for something, like a book titled "search the
database", other books like "search database" is ranked top, which is
not a good user experience.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Sat, Mar 22, 2008 at 10:53 AM, Erick Erickson
<erickerickson@gmail.com> wrote:
> What's your reason for trying? The whole point of stop words is that
>  they should be considered "no ops". That is, they add nothing to the
>  semantics of whatever is being processed. I' don't understand the use
>  case for why you want to go outside that assumption.
>
>  Another way of asking this is "what tangible benefit to your users
>  are you trying to implement"?
>
>  Best
>  Erick
>
>
>
>  On Fri, Mar 21, 2008 at 9:20 PM, Chris Lu <chris.lu@gmail.com> wrote:
>
>  > Let's say "the" is considered stopword. And for example two documents are
>  > document A, content: "... search the database..."
>  > document B, content: "... search database..."
>  >
>  > So when the user's input is "search the database", searching with
>  > query content:"search database"~1 can return both.
>  > But is there any way to translate that into a query that can rank the
>  > document A higher than document B?
>  >
>  > Thanks!
>  >
>  > --
>  > Chris Lu
>  > -------------------------
>  > Instant Scalable Full-Text Search On Any Database/Application
>  > site: http://www.dbsight.net
>  > demo: http://search.dbsight.com
>  > Lucene Database Search in 3 minutes:
>  >
>  > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>  > DBSight customer, a shopping comparison site, (anonymous per request)
>  > got 2.6 Million Euro funding!
>  >
>
>
> > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 21:13:16 2008
Return-Path: <java-user-return-33296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77650 invoked from network); 22 Mar 2008 21:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 21:13:16 -0000
Received: (qmail 3767 invoked by uid 500); 22 Mar 2008 21:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3731 invoked by uid 500); 22 Mar 2008 21:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3719 invoked by uid 99); 22 Mar 2008 21:13:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 14:13:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.225 as permitted sender)
Received: from [72.14.214.225] (HELO hu-out-0506.google.com) (72.14.214.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 21:12:25 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1184226hub.15
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 14:12:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=C64cO8n3Mbvjkzlj+Xs/nvFNixTuVUSftHsfqMl3pH4=;
        b=pCaEogFlyhGhwtgAcOG+lUDAKT70pLyVtQ6Xo2Jn52kZOjwQeQWabQDTZpkHXiwY5kD3bM0i5Ob3a1MPDYClSvXG4cpEWGkRrGA8RDtod2d7ApbqtFtAmQHIhLi9+y3TCp1KNmrTRnENPuUrxftK65J0MuVfW3+M/Ao3lxHP0oQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lp7bgm8Ij3ls4+xMYgq8m50E/DB+pLxWGExSE+bAIsH0cJ7yg0C8q0HhFrTHaxvVRj0Hdd2YemQUHQahW8I5HzgIxZzrYLJdrXqdekbWpx0w2IeBlwUerHaSa3Ah8KXNG0wePsfx/gszYyZEYPCJI+vxEQhnP912WIPCv+2olhM=
Received: by 10.82.184.2 with SMTP id h2mr11853917buf.1.1206220355356;
        Sat, 22 Mar 2008 14:12:35 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Sat, 22 Mar 2008 14:12:35 -0700 (PDT)
Message-ID: <359a92830803221412o31d2a932xdbc20345067077a5@mail.gmail.com>
Date: Sat, 22 Mar 2008 17:12:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: factor in stopwords when searching
In-Reply-To: <6e3ae6310803221138m2b8ce1d0o93b7f0d5419f6e0c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6315_31553038.1206220355347"
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
	 <359a92830803221053t10be4671h44076882206562a8@mail.gmail.com>
	 <6e3ae6310803221138m2b8ce1d0o93b7f0d5419f6e0c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6315_31553038.1206220355347
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, whether it's a good user experience is exactly the question. I've
spent far too much time satisfying customer (or product manager)
requests that add zero value to the product *in the user's eyes*.

And I quote:
"This is asked by some customer, who may not know what's "stop words" at
all."

which raises red flags to me. You might be far ahead spending the time up
front to work with the customer and see if it's really worthwhile.
Especially
when asking them to provide actual examples that show the "better user
experience". The question is *always* "is the benefit *in the real world* to
the user worth the extra time and money it'll cost to develop this?".
Especially
when you factor in ongoing maintenance, and the next developer having to
spend time  figuring out what the heck is going on, and ......

Double especially when you ask the customer "would you rather have this
feature or some other feature?". It's amazing how often customers don't
need a particular feature when the costs are made explicit. Either in
additional time or other features not getting worked on.

As a profession, we spend way too much time doing whatever the customer
asks for, rather than what the customer actually needs. We've done a pretty
poor job of reminding the customer what something costs and letting *them*
make the decision. Usually, we say something like "sure, we can do that".
The
problem is that the customer never gets a chance to say "but it's not worth
it",
because we often neglect to add "and it'll cost 6 developer-weeks which
means
we won't be able to do X, Y and Z in the time frame".

Anyway, enough ranting <G>. If the customers are willing to pay for it
that's
their business I guess..

Best
Erick

On Sat, Mar 22, 2008 at 2:38 PM, Chris Lu <chris.lu@gmail.com> wrote:

> This is asked by some customer, who may not know what's "stop words" at
> all.
>
> Jake's approach should be quite similar to what some search engine
> companies are doing. It'll cost some storage, but can achieve a good
> user experience.
>
> The benefit is kind of obvious in real world. When users enter some
> query, they do not really know stop words like "the" are not in the
> index at all.
> If they are looking for something, like a book titled "search the
> database", other books like "search database" is ranked top, which is
> not a good user experience.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
>
> On Sat, Mar 22, 2008 at 10:53 AM, Erick Erickson
> <erickerickson@gmail.com> wrote:
> > What's your reason for trying? The whole point of stop words is that
> >  they should be considered "no ops". That is, they add nothing to the
> >  semantics of whatever is being processed. I' don't understand the use
> >  case for why you want to go outside that assumption.
> >
> >  Another way of asking this is "what tangible benefit to your users
> >  are you trying to implement"?
> >
> >  Best
> >  Erick
> >
> >
> >
> >  On Fri, Mar 21, 2008 at 9:20 PM, Chris Lu <chris.lu@gmail.com> wrote:
> >
> >  > Let's say "the" is considered stopword. And for example two documents
> are
> >  > document A, content: "... search the database..."
> >  > document B, content: "... search database..."
> >  >
> >  > So when the user's input is "search the database", searching with
> >  > query content:"search database"~1 can return both.
> >  > But is there any way to translate that into a query that can rank the
> >  > document A higher than document B?
> >  >
> >  > Thanks!
> >  >
> >  > --
> >  > Chris Lu
> >  > -------------------------
> >  > Instant Scalable Full-Text Search On Any Database/Application
> >  > site: http://www.dbsight.net
> >  > demo: http://search.dbsight.com
> >  > Lucene Database Search in 3 minutes:
> >  >
> >  >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >  > DBSight customer, a shopping comparison site, (anonymous per request)
> >  > got 2.6 Million Euro funding!
> >  >
> >
> >
> > > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6315_31553038.1206220355347--

From java-user-return-33297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 22 23:04:30 2008
Return-Path: <java-user-return-33297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3431 invoked from network); 22 Mar 2008 23:04:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Mar 2008 23:04:30 -0000
Received: (qmail 67767 invoked by uid 500); 22 Mar 2008 23:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67729 invoked by uid 500); 22 Mar 2008 23:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67718 invoked by uid 99); 22 Mar 2008 23:04:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 16:04:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 23:03:34 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6A9FA71C2AC; Sat, 22 Mar 2008 16:03:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6686D71C197
	for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 16:03:54 -0700 (PDT)
Date: Sat, 22 Mar 2008 16:03:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Field values ...
In-Reply-To: <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl>
Message-ID: <Pine.LNX.4.62.0803221600450.24525@radix.cryptio.net>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
 <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to do something like:
:  
:     List<Info> infoList = new ArrayList<Info> ();
:     foreach (Document doc in LuceneIndex)
:     {
:        String id = doc.get ("Id");
:        String phone = doc.get ("Phone");
:        infoList.add (new Info (id, phone));
:     }

If "Id" and "Phone" are stored values then that code will pretty much work 
as is ... jut change "Document doc in LuceneIndex" to be something that 
does a MtchAllQuery (putting your code in a HitCollector would probably be 
pretty straight forward.

But it won't neccessarily be very efficient, particularly if you've got a 
lot of other stored fields, but a FieldSelector can help make it faster.

if Id and Phone are both indexed fields, and ever doc has only one value 
for each then you can use the FieldCache to get an array for each of them, 
and then just iterate over the arrays in parallel (watch out for deleted 
documents)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 23 02:48:15 2008
Return-Path: <java-user-return-33298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71895 invoked from network); 23 Mar 2008 02:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Mar 2008 02:48:15 -0000
Received: (qmail 71255 invoked by uid 500); 23 Mar 2008 02:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71228 invoked by uid 500); 23 Mar 2008 02:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71217 invoked by uid 99); 23 Mar 2008 02:48:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Mar 2008 19:48:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Mar 2008 02:47:26 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1902943fga.27
        for <java-user@lucene.apache.org>; Sat, 22 Mar 2008 19:47:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7R490JFkiHRi8WZpqoO/rTABQjpMqFh1Ya2livdaTO4=;
        b=FvivnG/2HFVAFcY1Hj58qFo9HWjZ7G2qTioQL20ARmOqpPw9J6fL8KNLEmX5UtQT7drNIEQPaPwGRdgOjtc/kWbOHjKwaMRtJ51dGMyDua/UmtVL3CDjmCI3Gb8LosOx6WPUjMrfLW+Tjxl5Yuz/XtmHXo3oMZpLE87rFufFoP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DeKHdEU0oZ6HpHd/2I3c9ig3Mfh9z7JQ4UiPfu+ZpfCYDdE0MsV3uCdhUZe3mVqqmZ2J7wRcMplwg4j96CE1JfZFmh4SxkC339lZAdEL1elNIrfiqsl/Mheke+O3ueM5aGtiLiftupIuBj/JkS2vTFV9hcp3IHNFbp1AtlM0hf0=
Received: by 10.78.118.5 with SMTP id q5mr9627044huc.62.1206240455838;
        Sat, 22 Mar 2008 19:47:35 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Sat, 22 Mar 2008 19:47:35 -0700 (PDT)
Message-ID: <6e3ae6310803221947w5dc7ce2bve4def9e42ab8baeb@mail.gmail.com>
Date: Sat, 22 Mar 2008 19:47:35 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: factor in stopwords when searching
In-Reply-To: <359a92830803221412o31d2a932xdbc20345067077a5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e3ae6310803211820t7c2f2420ud375a3a7c2d742d2@mail.gmail.com>
	 <359a92830803221053t10be4671h44076882206562a8@mail.gmail.com>
	 <6e3ae6310803221138m2b8ce1d0o93b7f0d5419f6e0c@mail.gmail.com>
	 <359a92830803221412o31d2a932xdbc20345067077a5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Erik, I understand your rant. :) Well, the solution I finalized
with is this, as suggested by Jake and Grant.

For those stop words, when indexing content, I will treat them as normal words.
When processing the user query, there will be normal query with stop
words skipped, and another part that has the full query strings trying
to get an exact match. For example, "search the database" will be
parsed like:

content:"search" content:"database" content:"search the database"^1000

This should rank exact match of "search the database" to the top. And
this should be what companies like Yahoo/Google are already doing, I
guess. Can someone confirm this?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Sat, Mar 22, 2008 at 2:12 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> Well, whether it's a good user experience is exactly the question. I've
>  spent far too much time satisfying customer (or product manager)
>  requests that add zero value to the product *in the user's eyes*.
>
>  And I quote:
>
> "This is asked by some customer, who may not know what's "stop words" at
>  all."
>
>  which raises red flags to me. You might be far ahead spending the time up
>  front to work with the customer and see if it's really worthwhile.
>  Especially
>  when asking them to provide actual examples that show the "better user
>  experience". The question is *always* "is the benefit *in the real world* to
>  the user worth the extra time and money it'll cost to develop this?".
>  Especially
>  when you factor in ongoing maintenance, and the next developer having to
>  spend time  figuring out what the heck is going on, and ......
>
>  Double especially when you ask the customer "would you rather have this
>  feature or some other feature?". It's amazing how often customers don't
>  need a particular feature when the costs are made explicit. Either in
>  additional time or other features not getting worked on.
>
>  As a profession, we spend way too much time doing whatever the customer
>  asks for, rather than what the customer actually needs. We've done a pretty
>  poor job of reminding the customer what something costs and letting *them*
>  make the decision. Usually, we say something like "sure, we can do that".
>  The
>  problem is that the customer never gets a chance to say "but it's not worth
>  it",
>  because we often neglect to add "and it'll cost 6 developer-weeks which
>  means
>  we won't be able to do X, Y and Z in the time frame".
>
>  Anyway, enough ranting <G>. If the customers are willing to pay for it
>  that's
>  their business I guess..
>
>  Best
>  Erick
>
>
>
>  On Sat, Mar 22, 2008 at 2:38 PM, Chris Lu <chris.lu@gmail.com> wrote:
>
>  > This is asked by some customer, who may not know what's "stop words" at
>  > all.
>  >
>  > Jake's approach should be quite similar to what some search engine
>  > companies are doing. It'll cost some storage, but can achieve a good
>  > user experience.
>  >
>  > The benefit is kind of obvious in real world. When users enter some
>  > query, they do not really know stop words like "the" are not in the
>  > index at all.
>  > If they are looking for something, like a book titled "search the
>  > database", other books like "search database" is ranked top, which is
>  > not a good user experience.
>  >
>  > --
>  > Chris Lu
>  > -------------------------
>  > Instant Scalable Full-Text Search On Any Database/Application
>  > site: http://www.dbsight.net
>  > demo: http://search.dbsight.com
>  > Lucene Database Search in 3 minutes:
>  >
>  > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>  > DBSight customer, a shopping comparison site, (anonymous per request)
>  > got 2.6 Million Euro funding!
>  >
>  >
>  > On Sat, Mar 22, 2008 at 10:53 AM, Erick Erickson
>  > <erickerickson@gmail.com> wrote:
>  > > What's your reason for trying? The whole point of stop words is that
>  > >  they should be considered "no ops". That is, they add nothing to the
>  > >  semantics of whatever is being processed. I' don't understand the use
>  > >  case for why you want to go outside that assumption.
>  > >
>  > >  Another way of asking this is "what tangible benefit to your users
>  > >  are you trying to implement"?
>  > >
>  > >  Best
>  > >  Erick
>  > >
>  > >
>  > >
>  > >  On Fri, Mar 21, 2008 at 9:20 PM, Chris Lu <chris.lu@gmail.com> wrote:
>  > >
>  > >  > Let's say "the" is considered stopword. And for example two documents
>  > are
>  > >  > document A, content: "... search the database..."
>  > >  > document B, content: "... search database..."
>  > >  >
>  > >  > So when the user's input is "search the database", searching with
>  > >  > query content:"search database"~1 can return both.
>  > >  > But is there any way to translate that into a query that can rank the
>  > >  > document A higher than document B?
>  > >  >
>  > >  > Thanks!
>  > >  >
>  > >  > --
>  > >  > Chris Lu
>  > >  > -------------------------
>  > >  > Instant Scalable Full-Text Search On Any Database/Application
>  > >  > site: http://www.dbsight.net
>  > >  > demo: http://search.dbsight.com
>  > >  > Lucene Database Search in 3 minutes:
>  > >  >
>  > >  >
>  > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>  > >  > DBSight customer, a shopping comparison site, (anonymous per request)
>  > >  > got 2.6 Million Euro funding!
>  > >  >
>  > >
>  > >
>  > > > ---------------------------------------------------------------------
>  > >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >  >
>  > >  >
>  > >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 23 23:37:31 2008
Return-Path: <java-user-return-33299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14040 invoked from network); 23 Mar 2008 23:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Mar 2008 23:37:31 -0000
Received: (qmail 50390 invoked by uid 500); 23 Mar 2008 23:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50349 invoked by uid 500); 23 Mar 2008 23:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50332 invoked by uid 99); 23 Mar 2008 23:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Mar 2008 16:37:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of climbingrose@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Mar 2008 23:36:45 +0000
Received: by py-out-1112.google.com with SMTP id z74so2815388pyg.9
        for <java-user@lucene.apache.org>; Sun, 23 Mar 2008 16:36:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=LBpbsE2F8yXWKhZ7vw7Ueer+2wYf/e+PA0Xtt9L46Gs=;
        b=k3mbQnzp5ojIIZNMU/6MXdBD4Fxq5xN6cOw0UgrQ9RhTtWPrH4gVTjBBD6CgjLwSLlqWulyALf8gSPj+gbj0+hT3weWLU3xPu52jl2s6rrL0nRKjg3sRoGTkKvyjHsGYGAeB6n+VZa0iSJxpy18SQVmraF4ps5qCLk5ADvpLArU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VgKKNiqyhA/N6TQNU2/QyrCPNtDiZ/bZJz9IZtxWJU2mHoz7U7A7niq6FfNWD7A+yHq9zWimgII+BCMLtkWRDzfdJro72VvmKQjfTHdMDBUBgYEtBrcqn8flZYh3HdzCAH91JKGB1pSXNW650OI9EQuvCwDOHfN9XTWR8arKhUE=
Received: by 10.141.202.12 with SMTP id e12mr1906357rvq.169.1206315416157;
        Sun, 23 Mar 2008 16:36:56 -0700 (PDT)
Received: by 10.140.250.7 with HTTP; Sun, 23 Mar 2008 16:36:56 -0700 (PDT)
Message-ID: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
Date: Mon, 24 Mar 2008 10:36:56 +1100
From: climbingrose <climbingrose@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Implement a relaxed PhraseQuery?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4807_19609761.1206315416145"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4807_19609761.1206315416145
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I posted this in Solr mailing but then I thought it would be more
appropriate to have it here.

I thought many people would encounter the situation I'm having here.
Basically, we'd like to have a PhraseQuery with "minimum should match"
property similar to BooleanQuery. Consider the query "Senior Java
Developer":

1) I'd like to do a PhraseQuery on "Senior Java Developer" with a slop of
say 2, so that the query only matches documents with these words located in
proximity. I don't want to match documents like "Senior <Huge block of text>
Java <Huge block of Text> Developer".
2) I also want to relax PhraseQuery a bit so that it not only match "Senior
Java Developer"~2 but also matches "Java Developer"~2 but of course with a
lower score. I can programmatically generate on the combination but it's not
gonna be efficient if user issues query with many terms.

It looks like the only solution is to hack PhraseScorer and its subclasses.
Has anyone done this before? If yes, please share your experience.


-- 
Regards,

Cuong Hoang

------=_Part_4807_19609761.1206315416145--

From java-user-return-33300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 03:19:06 2008
Return-Path: <java-user-return-33300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88534 invoked from network); 24 Mar 2008 03:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 03:19:05 -0000
Received: (qmail 30693 invoked by uid 500); 24 Mar 2008 03:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30662 invoked by uid 500); 24 Mar 2008 03:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30651 invoked by uid 99); 24 Mar 2008 03:18:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Mar 2008 20:18:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.5.72.225] (HELO EXHUB016-4.exch016.msoutlookonline.net) (207.5.72.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 03:18:16 +0000
Received: from [192.168.1.35] (70.0.54.240) by smtpx16.msoutlookonline.net
 (207.5.72.190) with Microsoft SMTP Server (TLS) id 8.1.263.0; Sun, 23 Mar
 2008 20:18:24 -0700
MIME-Version: 1.0
Message-ID: <p06240812c40ccd5ae5b4@[192.168.1.35]>
In-Reply-To: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
References: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
Date: Sun, 23 Mar 2008 20:17:56 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Implement a relaxed PhraseQuery?
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cuong,

>I posted this in Solr mailing but then I thought it would be more
>appropriate to have it here.
>
>I thought many people would encounter the situation I'm having here.
>Basically, we'd like to have a PhraseQuery with "minimum should match"
>property similar to BooleanQuery. Consider the query "Senior Java
>Developer":
>
>1) I'd like to do a PhraseQuery on "Senior Java Developer" with a slop of
>say 2, so that the query only matches documents with these words located in
>proximity. I don't want to match documents like "Senior <Huge block of text>
>Java <Huge block of Text> Developer".
>2) I also want to relax PhraseQuery a bit so that it not only match "Senior
>Java Developer"~2 but also matches "Java Developer"~2 but of course with a
>lower score. I can programmatically generate on the combination but it's not
>gonna be efficient if user issues query with many terms.
>
>It looks like the only solution is to hack PhraseScorer and its subclasses.
>Has anyone done this before? If yes, please share your experience.

Back in March 2007 there was a similar thread, where Philipp Nanz 
pinged this list about his "FuzzyPhraseQuery". Search on subject == 
"alternative scoring algorithm for PhraseQuery".

I believe Paul Elschot gave him some useful input, but then Philipp 
seemed to have dropped off the list...and he didn't respond to my 
email asking him if he was able to complete this work.

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"If you can't find it, you can't fix it"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 06:17:52 2008
Return-Path: <java-user-return-33301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48310 invoked from network); 24 Mar 2008 06:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 06:17:49 -0000
Received: (qmail 23715 invoked by uid 500); 24 Mar 2008 06:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23673 invoked by uid 500); 24 Mar 2008 06:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23662 invoked by uid 99); 24 Mar 2008 06:17:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Mar 2008 23:17:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.137.233.110] (HELO rediff.co.in) (202.137.233.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 06:16:53 +0000
Received: (qmail 7549 invoked from network); 24 Mar 2008 11:49:22 +0530
Received: from unknown (HELO NizamulHlaptop) (192.168.30.9)
  by mailserver with SMTP; 24 Mar 2008 11:49:22 +0530
Message-ID: <006101c88d78$01e388e0$9b21fea9@NizamulHlaptop>
Reply-To: "Nizamul" <nizamulh@rediff.co.in>
From: "Nizamul" <nizamulh@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: is it possible to change the way score from different field combine to give final lucene score
Date: Mon, 24 Mar 2008 11:56:34 +0530
Organization: Rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_005E_01C88DA6.1B8D6D00"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_005E_01C88DA6.1B8D6D00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Suppose I have two field field1 and field2 and let the score for a query =
from field1 and field2 are score1 and score2 respectively.now when =
computing the final lucene score I instead of score1,I want to use some =
function (f(score1)) of that score.
------=_NextPart_000_005E_01C88DA6.1B8D6D00--


From java-user-return-33302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 08:07:12 2008
Return-Path: <java-user-return-33302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80041 invoked from network); 24 Mar 2008 08:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 08:07:12 -0000
Received: (qmail 73225 invoked by uid 500); 24 Mar 2008 08:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73193 invoked by uid 500); 24 Mar 2008 08:07:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73182 invoked by uid 99); 24 Mar 2008 08:07:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 01:07:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 08:06:12 +0000
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Date: Mon, 24 Mar 2008 09:06:24 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
In-Reply-To: <47E3D350.8070200@sirma.bg>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: feedback: Indexing speed improvement lucene 2.2->2.3.1
thread-index: AciLZ9XgZ9tttlhbT921cLHDmQSUrwCGkn6g
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com> <47E3D350.8070200@sirma.bg>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ivan,
No, we do not use StandardAnalyser or StandardTokenizer.

Most data is processed by=20
	fTextTokenStream =3D result =3D new =
org.apache.lucene.analysis.WhitespaceTokenizer(reader);
	result =3D new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  =
modified that =F6 -> oe
	result =3D new org.apache.lucene.analysis.LowerCaseFilter(result);
	result =3D new org.apache.lucene.analysis.NGramStemFilter(result,2); =
//just a bigram tokenizer

We use our own queryparser. The bigramms are searched with a tolerant =
phrase query, scoring in a doc the greatest bigramms clusters covering =
the phrase token.=20

Best Regards

Uwe

-----Urspr=FCngliche Nachricht-----
Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]=20
Gesendet: Freitag, 21. M=E4rz 2008 16:25
An: java-user@lucene.apache.org
Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1

Hi Uwe,

Could you tell what Analyzer do you use when you marked so big indexing=20
speedup?
If you use StandardAnalyzer (that uses StandardTokenizer) may be the=20
reason is in it. You can see the pre last report in the thread "Indexing =

Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake=20
Mannix this is because now StandardTokenizer uses StandardTokenizerImpl=20
that now is generated by JFlex instead of JavaCC.
I am asking because I noticed a great speedup in adding documents to=20
index in our system. We have time control on this in the debug mode. NOW =

THEY ARE ADDED 5 TIMES FASTER!!!
But in the same time the total process of indexing in our case has=20
improvement of about 8%. As our system is very big and complex I am=20
wondering if really the whole process of indexing is reduces so=20
remarkably and our system causes this slowdown or may be Lucene does=20
some optimizations on the index, merges or something else and this is=20
the reason the total process of indexing to be not so reasonably faster.

Best Regards,
Ivan



Uwe Goetzke wrote:
> This week I switched the lucene library version on one customer =
system.
> The indexing speed went down from 46m32s to 16m20s for the complete =
task
> including optimisation. Great Job!
> We index product catalogs from several suppliers, in this case around
> 56.000 product groups and 360.000 products including descriptions were
> indexed.
>
> Regards
>
> Uwe
>
>
>
> =
-----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empfanger sind, durfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen =
Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender =
zuruckschicken. Bitte loschen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2913 (20080301) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen =
Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender =
zur=FCckschicken. Bitte l=F6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 08:42:18 2008
Return-Path: <java-user-return-33303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89354 invoked from network); 24 Mar 2008 08:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 08:42:18 -0000
Received: (qmail 92003 invoked by uid 500); 24 Mar 2008 08:42:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91972 invoked by uid 500); 24 Mar 2008 08:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91961 invoked by uid 99); 24 Mar 2008 08:42:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 01:42:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 08:41:31 +0000
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Implement a relaxed PhraseQuery?
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Date: Mon, 24 Mar 2008 09:41:40 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE822@owamz.healy-hudson.com>
In-Reply-To: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Implement a relaxed PhraseQuery?
thread-index: AciNPt5ds+FIFzAOQF+0K4UdBZFZbAASNwSA
References: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cuong ,

I have written a TolerantPhraseScorer starting with the code from =
PhraseScorer but I think I have modified it to much to be generally =
useful. We use it with bigramm clusters and therefore does not need the =
slop factor for scoring but have a tolerance factor (depending on the =
length of the phrase). Here are the most relevant code fragments to =
start with...=20
So the idea is to keep queue ordered (calling firstToLast2 and =
moveLast). I have not yet checked the code for optimisations. If you =
find one, I would be glad to hear about it... ;-)


protected TolerantPhrasePositions first, last, reallast; // last point =
to the last tpp for the doc varying from tolerance to phrase size =
(reallast)

protected int tolerance;

/**
	 * similar to PhraseScorer but with a tolerance factor
	 *
	 * @see PhraseScorer
	 */
	TolerantPhraseScorer(Weight weight, TermPositions[] tps, int[] =
positions, Similarity similarity,
	                     byte[] norms, int tolerance)
	{
		super(similarity);
		this.norms =3D norms;
		this.weight =3D weight;
		this.value =3D weight.getValue();
		this.tolerance =3D tolerance;
		termsize =3D 0;
		// convert tps to a list
		for (int i =3D 0; i < tps.length; i++) {
			if (tps[i] !=3D null) {
				TolerantPhrasePositions pp =3D new TolerantPhrasePositions(tps[i], =
positions[i]);
				termsize++;
				if (reallast !=3D null) {			  // add next to end of list
					reallast.next =3D pp;
					pp.previous =3D reallast;
				}
				else
					first =3D pp;
				reallast =3D pp;
				if ((termsize >=3D tolerance) && (last =3D=3D null))
					last =3D pp;
			}
		}
		pq =3D new TolerantPhraseQueue(termsize);             // construct =
empty pq
	}


public boolean next() throws IOException
	{
		if (firstTime) {
			init();
			firstTime =3D false;
		}
		else if (more) {
			int doc =3D last.doc;
			while (doc =3D=3D last.doc) {
				more =3D last.next();                     // trigger further =
scanning
				moveLast();
			}
		}
		return doNext();
	}

	// next without initial increment
	private boolean doNext() throws IOException
	{
		while (more) {
			while (more && first.doc < last.doc) {      // find doc w/ all the =
terms
				more =3D first.skipTo(last.doc);            // skip first upto last
				firstToLast2();                            // and move it to the end
			}
			if (more) {
				// found a doc with all of the terms
				freq =3D phraseFreq();                      // check for phrase
				if (freq =3D=3D 0.0f) {                        // no match
					int doc =3D last.doc;
					while (doc =3D=3D last.doc) {
						more =3D last.next();                     // trigger further =
scanning
						moveLast();
					}
				}
				else
					return true;                            // found a match
			}
		}
		return false;                                 // no more matches
	}


private void firstToLast2()
	{
		TolerantPhrasePositions newfirst =3D first.next;
		TolerantPhrasePositions test =3D last;
		TolerantPhrasePositions insertp =3D test;
		while ((test !=3D null) && (first.doc >=3D test.doc)) {
			insertp =3D test;
			test =3D test.next;
		}
		if (insertp =3D=3D null) { // last elem should not happen
			System.out.println("firstToLast2->insertp=3D=3Dnull");
		}
		else {
			first.previous =3D insertp;  // einkoppeln
			first.next =3D insertp.next;
			if (first.next !=3D null)
				first.next.previous =3D first;
			insertp.next =3D first;
			if (test =3D=3D null) {
				reallast =3D first;
				reallast.next =3D null;
			}
		}
		last =3D last.next;
		first =3D newfirst;
		first.previous =3D null;
	}

private void moveLast()
	{
		TolerantPhrasePositions test =3D last;
		TolerantPhrasePositions insertp =3D null;
		while ((test !=3D null) && (last.doc >=3D test.doc)) {
			insertp =3D test;
			test =3D test.next;
		}
		if (insertp =3D=3D null) { // last elem should not happen
			System.out.println("insertp=3D=3Dnull");
		}
		else {
			if (insertp !=3D last) {
				TolerantPhrasePositions prev =3D last.previous;   // dequeue
				if (prev !=3D null) { // if only 1 character!
					prev.next =3D last.next;
					prev.next.previous =3D prev;
				}
				last.previous =3D insertp;  // enqueue
				last.next =3D insertp.next;
				if (last.next !=3D null)
					last.next.previous =3D last;
				insertp.next =3D last;

				if (test =3D=3D null) {
					reallast =3D last;
					reallast.next =3D null;
				}
				if (prev !=3D null) { // if only 1 character!
					last =3D prev.next;
				}
			}
		}
	}

Best Regards

Uwe


-----Urspr=FCngliche Nachricht-----
Von: climbingrose [mailto:climbingrose@gmail.com]=20
Gesendet: Montag, 24. M=E4rz 2008 00:37
An: java-user
Betreff: Implement a relaxed PhraseQuery?

Hi all,

I posted this in Solr mailing but then I thought it would be more
appropriate to have it here.

I thought many people would encounter the situation I'm having here.
Basically, we'd like to have a PhraseQuery with "minimum should match"
property similar to BooleanQuery. Consider the query "Senior Java
Developer":

1) I'd like to do a PhraseQuery on "Senior Java Developer" with a slop =
of
say 2, so that the query only matches documents with these words located =
in
proximity. I don't want to match documents like "Senior <Huge block of =
text>
Java <Huge block of Text> Developer".
2) I also want to relax PhraseQuery a bit so that it not only match =
"Senior
Java Developer"~2 but also matches "Java Developer"~2 but of course with =
a
lower score. I can programmatically generate on the combination but it's =
not
gonna be efficient if user issues query with many terms.

It looks like the only solution is to hack PhraseScorer and its =
subclasses.
Has anyone done this before? If yes, please share your experience.


--=20
Regards,

Cuong Hoang

-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen =
Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender =
zur=FCckschicken. Bitte l=F6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 08:55:33 2008
Return-Path: <java-user-return-33304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92851 invoked from network); 24 Mar 2008 08:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 08:55:31 -0000
Received: (qmail 4500 invoked by uid 500); 24 Mar 2008 08:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4478 invoked by uid 500); 24 Mar 2008 08:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4467 invoked by uid 99); 24 Mar 2008 08:55:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 01:55:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 08:54:41 +0000
Received: by an-out-0708.google.com with SMTP id c5so589573anc.49
        for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 01:54:51 -0700 (PDT)
Received: by 10.100.255.17 with SMTP id c17mr17624421ani.37.1206348891336;
        Mon, 24 Mar 2008 01:54:51 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm10091192hsx.5.2008.03.24.01.54.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 24 Mar 2008 01:54:50 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com> <47E3D350.8070200@sirma.bg> <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <E3A90667-EA6C-4157-8470-EA6366A5BEBD@mikemccandless.com>
Content-Transfer-Encoding: quoted-printable
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
Date: Mon, 24 Mar 2008 04:54:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Ivan can you describe more about your application?

The overall time for indexing has gotten much faster in 2.3, but this =20=

is assuming things like retrieving a document from its original =20
source, filtering it, etc, are minimal.  If you have an application =20
where most of the time is spent outside Lucene then the 2.3 speedups =20
won't result in a very large speedup for your application.

Mike

Uwe Goetzke wrote:
> Hi Ivan,
> No, we do not use StandardAnalyser or StandardTokenizer.
>
> Most data is processed by
> 	fTextTokenStream =3D result =3D new =20
> org.apache.lucene.analysis.WhitespaceTokenizer(reader);
> 	result =3D new ISOLatin2AccentFilter(result); // =20
> ISOLatin1AccentFilter  modified that =F6 -> oe
> 	result =3D new =
org.apache.lucene.analysis.LowerCaseFilter(result);
> 	result =3D new =
org.apache.lucene.analysis.NGramStemFilter(result,=20
> 2); //just a bigram tokenizer
>
> We use our own queryparser. The bigramms are searched with a =20
> tolerant phrase query, scoring in a doc the greatest bigramms =20
> clusters covering the phrase token.
>
> Best Regards
>
> Uwe
>
> -----Urspr=FCngliche Nachricht-----
> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Gesendet: Freitag, 21. M=E4rz 2008 16:25
> An: java-user@lucene.apache.org
> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>
> Hi Uwe,
>
> Could you tell what Analyzer do you use when you marked so big =20
> indexing
> speedup?
> If you use StandardAnalyzer (that uses StandardTokenizer) may be the
> reason is in it. You can see the pre last report in the thread =20
> "Indexing
> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter =20
> Jake
> Mannix this is because now StandardTokenizer uses =20
> StandardTokenizerImpl
> that now is generated by JFlex instead of JavaCC.
> I am asking because I noticed a great speedup in adding documents to
> index in our system. We have time control on this in the debug =20
> mode. NOW
> THEY ARE ADDED 5 TIMES FASTER!!!
> But in the same time the total process of indexing in our case has
> improvement of about 8%. As our system is very big and complex I am
> wondering if really the whole process of indexing is reduces so
> remarkably and our system causes this slowdown or may be Lucene does
> some optimizations on the index, merges or something else and this is
> the reason the total process of indexing to be not so reasonably =20
> faster.
>
> Best Regards,
> Ivan
>
>
>
> Uwe Goetzke wrote:
>> This week I switched the lucene library version on one customer =20
>> system.
>> The indexing speed went down from 46m32s to 16m20s for the =20
>> complete task
>> including optimisation. Great Job!
>> We index product catalogs from several suppliers, in this case around
>> 56.000 product groups and 360.000 products including descriptions =20
>> were
>> indexed.
>>
>> Regards
>>
>> Uwe
>>
>>
>>
>> ---------------------------------------------------------------------=20=

>> --
>> Healy Hudson GmbH - D-55252 Mainz Kastel
>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>
>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =20
>> Empfanger sind, durfen Sie die Informationen nicht offen legen =20
>> oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen =20
>> haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese =20
>> Email an den Absender zuruckschicken. Bitte loschen Sie danach =20
>> diese Email.
>> This email is confidential. If you are not the intended recipient, =20=

>> you must not disclose or use this information contained in it. If =20
>> you have received this email in error please tell us immediately =20
>> by return email and delete the document.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> __________ NOD32 2913 (20080301) Information __________
>>
>> This message was checked by NOD32 antivirus system.
>> http://www.eset.com
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ----------------------------------------------------------------------=20=

> -
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =20
> Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen =
oder =20
> benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, =20
> teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an =20
> den Absender zur=FCckschicken. Bitte l=F6schen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, =20
> you must not disclose or use this information contained in it. If =20
> you have received this email in error please tell us immediately by =20=

> return email and delete the document.
>
>
> ---------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 09:12:26 2008
Return-Path: <java-user-return-33305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99463 invoked from network); 24 Mar 2008 09:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 09:12:26 -0000
Received: (qmail 20794 invoked by uid 500); 24 Mar 2008 09:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20768 invoked by uid 500); 24 Mar 2008 09:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20757 invoked by uid 99); 24 Mar 2008 09:12:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 02:12:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 09:11:38 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2487459qba.9
        for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 02:11:48 -0700 (PDT)
Received: by 10.114.193.1 with SMTP id q1mr10880198waf.75.1206349907648;
        Mon, 24 Mar 2008 02:11:47 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 39sm10477833wrl.29.2008.03.24.02.11.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 24 Mar 2008 02:11:47 -0700 (PDT)
In-Reply-To: <8c4e68610803181345r45b613f3p32594fc93f7df804@mail.gmail.com>
References: <8c4e68610803180438x39737565q9f97b4802ed774a5@mail.gmail.com> <c68e39170803180717n65c0298fg7f297ecf50c27ff1@mail.gmail.com> <8c4e68610803180738o54ad1945x1dc2ba8501788faf@mail.gmail.com> <41FC01A5-C674-4D08-9C98-936550C6ABD2@mikemccandless.com> <8c4e68610803181036g4b206cc1x166a4e8a7240e36b@mail.gmail.com> <F573D2EC-D24D-4E39-B229-51CF80B6A0FC@mikemccandless.com> <8c4e68610803181345r45b613f3p32594fc93f7df804@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0A1EC9EC-3406-497F-A22F-6B80B6EF4A8E@mikemccandless.com>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CorruptIndexException with some versions of java
Date: Mon, 24 Mar 2008 05:11:48 -0400
To: Ian Lea <ian.lea@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Just to bring closure here: this in fact looks like some sort of JVM  
hotspot compiler issue, as best we can tell.

Running java with -Xbatch (forces up front compilation) prevents  
(works around) the issue.

I've committed some additional assertions to the particular Lucene  
code (merging of stored fields) that was tripping this issue, which  
will be in 2.3.2 and 2.4.

Mike

Ian Lea wrote:
> Mike
>
>
> Latest patch produces similar exception:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.lang.AssertionError: after mergeFields: fdx size mismatch: 65184
> docs vs 521464 length in bytes of _c9.fdx
>         at  
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException( 
> ConcurrentMergeScheduler.java:320)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:297)
> Caused by: java.lang.AssertionError: after mergeFields: fdx size
> mismatch: 65184 docs vs 521464 length in bytes of _c9.fdx
>         at org.apache.lucene.index.SegmentMerger.mergeFields 
> (SegmentMerger.java:347)
>         at org.apache.lucene.index.SegmentMerger.merge 
> (SegmentMerger.java:133)
>         at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3852)
>         at org.apache.lucene.index.IndexWriter.merge 
> (IndexWriter.java:3504)
>         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge 
> (ConcurrentMergeScheduler.java:211)
>         at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:266)
>
> Latest infostream attached.
>
>
> --
> Ian.
>
>
> On Tue, Mar 18, 2008 at 6:05 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>>  Hi Ian,
>>
>>  Sheesh that's odd.  The SegmentMerger produced an .fdx file that is
>>  one document too short.
>>
>>  Can you run with this patch now, again applied to head of 2.3
>>  branch?  I just added another assert inside the loop that does the
>>  field merging.
>>
>>  I will scrutinize this code...
>>
>>  Mike
>>
>>
>>
>>
>>  Ian Lea wrote:
>>> Mike
>>>
>>>
>>> Patch applied and test re-run and picked up an assertion error this
>>> time:
>>>
>>> Exception in thread "Lucene Merge Thread #0"
>>> org.apache.lucene.index.MergePolicy$MergeException:
>>> java.lang.AssertionError: after mergeFields: fdx size mismatch:  
>>> 72357
>>> docs vs 578848 length in bytes of _3o.fdx
>>>         at
>>> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeExceptio 
>>> n(
>>> ConcurrentMergeScheduler.java:320)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>> $MergeThread.run(ConcurrentMergeScheduler.java:297)
>>> Caused by: java.lang.AssertionError: after mergeFields: fdx size
>>> mismatch: 72357 docs vs 578848 length in bytes of _3o.fdx
>>>         at org.apache.lucene.index.SegmentMerger.mergeFields
>>> (SegmentMerger.java:342)
>>>         at org.apache.lucene.index.SegmentMerger.merge
>>> (SegmentMerger.java:133)
>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>>> (IndexWriter.java:3852)
>>>         at org.apache.lucene.index.IndexWriter.merge
>>> (IndexWriter.java:3504)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge
>>> (ConcurrentMergeScheduler.java:211)
>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>> $MergeThread.run(ConcurrentMergeScheduler.java:266)
>>>
>>> The infostream output is attached.  Since this email is to you  
>>> and the
>>> list it should make it to you.
>>>
>>>
>>>
>>> Yonik: I haven't been able to make TestStressIndexing2 fail.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Tue, Mar 18, 2008 at 4:19 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>>  Ian,
>>>>
>>>>  Could you apply the attached patch applied to the head of the 2.3
>>>>  branch?
>>>>
>>>>  It only adds more asserts, to try to pinpoint where exactly this
>>>>  corruption starts.
>>>>
>>>>  Then, re-run the test with asserts enabled and infoStream  
>>>> turned on
>>>>  and post back.  Thanks.
>>>>
>>>>  Mike
>>>>
>>>>
>>>>
>>>>
>>>>  Ian Lea wrote:
>>>>
>>>>> It's failed on servers running SuSE 10.0 and 8.2 (ancient!)
>>>>>
>>>>> $ uname -a shows
>>>>> Linux phoebe 2.6.13-15-smp #1 SMP Tue Sep 13 14:56:15 UTC 2005
>>>>> x86_64
>>>>> x86_64 x86_64 GNU/Linux
>>>>>
>>>>> and
>>>>>
>>>>> Linux phobos 2.4.20-64GB-SMP #1 SMP Mon Mar 17 17:56:03 UTC 2003
>>>>> i686
>>>>> unknown unknown GNU/Linux
>>>>>
>>>>> The first one has a 2.8Ghz Intel CPU, don't know about the second.
>>>>>
>>>>>
>>>>> I'll try and run the stress test.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Mar 18, 2008 at 2:17 PM, Yonik Seeley <yonik@apache.org>
>>>>> wrote:
>>>>>>
>>>>>> On Tue, Mar 18, 2008 at 7:38 AM, Ian Lea <ian.lea@gmail.com>  
>>>>>> wrote:
>>>>>>> Hi
>>>>>>>
>>>>>>>
>>>>>>>  When bulk loading into a new index I'm seeing this exception
>>>>>>>
>>>>>>>  Exception in thread "Thread-1"
>>>>>>>  org.apache.lucene.index.MergePolicy$MergeException:
>>>>>>>  org.apache.lucene.index.CorruptIndexException: doc counts  
>>>>>>> differ
>>>>>>> for
>>>>>>>  segment _4l: fieldsReader shows 67861 but segmentInfo shows  
>>>>>>> 67862
>>>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>>>>>>>  Caused by: org.apache.lucene.index.CorruptIndexException: doc
>>>>>>> counts
>>>>>>>  differ for segment _4l: fieldsReader shows 67861 but  
>>>>>>> segmentInfo
>>>>>>> shows
>>>>>>>  67862
>>>>>>>         at org.apache.lucene.index.SegmentReader.initialize
>>>>>>> (SegmentReader.java:313)
>>>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>>>> (SegmentReader.java:262)
>>>>>>>         at org.apache.lucene.index.SegmentReader.get
>>>>>>> (SegmentReader.java:221)
>>>>>>>         at org.apache.lucene.index.IndexWriter.mergeMiddle
>>>>>>> (IndexWriter.java:3093)
>>>>>>>         at org.apache.lucene.index.IndexWriter.merge
>>>>>>> (IndexWriter.java:2834)
>>>>>>>         at org.apache.lucene.index.ConcurrentMergeScheduler
>>>>>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>>>>>>
>>>>>>>  when use java version 1.6.0_05-b13 or 1.6.0_04-b12 on linux,  
>>>>>>> with
>>>>>>>  lucene 2.3.0 or 2.3.1 or lucene-core-2.3-SNAPSHOT from  
>>>>>>> yesterday.
>>>>>>>
>>>>>>>  With java version 1.6.0_03-b05 things work fine.
>>>>>>>
>>>>>>>  The exception happens a few hundred thousand documents into the
>>>>>>> load.
>>>>>>>
>>>>>>>  A different program updating a different index with different
>>>>>>> data on
>>>>>>>  a different server gave a similar error on version 1.6.0_05-
>>>>>>> b13 and
>>>>>>>  lucene 2.3.0.
>>>>>>>
>>>>>>>  Any ideas?  Is this maybe a known issue or am I missing
>>>>>>> something obvious?
>>>>>>
>>>>>>  My guess is perhaps a thread safety bug, more likely in Lucene
>>>>>>  indexing code (less likely in the JVM or specific libc).
>>>>>>
>>>>>>  What Linux version are you using?
>>>>>>  What hardware are you running on (specifically, the CPU)?
>>>>>>
>>>>>>  If possible, it would be great if you could check out Lucene
>>>>>> trunk,
>>>>>>  crank up the iterations by modifying the TestStressIndexing2 and
>>>>>> maybe
>>>>>>  fiddle with some of the other parameters in
>>>>>>  TestStressIndexing2.testMultiConfig(), and see if you can get
>>>>>> it to
>>>>>>  fail.
>>>>>>
>>>>>>
>>>>>>  -Yonik
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>>
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>  For additional commands, e-mail: java-user- 
>>>>>> help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> --
>>>>> -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> <infostream.zip>
>>
>>
>>
>> <infostream.zip>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 09:33:50 2008
Return-Path: <java-user-return-33306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8388 invoked from network); 24 Mar 2008 09:33:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 09:33:50 -0000
Received: (qmail 35683 invoked by uid 500); 24 Mar 2008 09:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35436 invoked by uid 500); 24 Mar 2008 09:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35425 invoked by uid 99); 24 Mar 2008 09:33:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 02:33:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 09:32:49 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 194B524001
	for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 11:33:10 +0200 (EET)
Message-ID: <47E77555.6030300@sirma.bg>
Date: Mon, 24 Mar 2008 11:33:09 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com> <47E3D350.8070200@sirma.bg> <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com> <E3A90667-EA6C-4157-8470-EA6366A5BEBD@mikemccandless.com>
In-Reply-To: <E3A90667-EA6C-4157-8470-EA6366A5BEBD@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes Michael it seems our app takes time to retrieve docs from their 
sources. I have to run some profiler tool to see where is the bottleneck 
in our case.
Thanks to you and Uwe for the answers!

Ivan

Michael McCandless wrote:
>
> Ivan can you describe more about your application?
>
> The overall time for indexing has gotten much faster in 2.3, but this 
> is assuming things like retrieving a document from its original 
> source, filtering it, etc, are minimal.  If you have an application 
> where most of the time is spent outside Lucene then the 2.3 speedups 
> won't result in a very large speedup for your application.
>
> Mike
>
> Uwe Goetzke wrote:
>> Hi Ivan,
>> No, we do not use StandardAnalyser or StandardTokenizer.
>>
>> Most data is processed by
>>     fTextTokenStream = result = new 
>> org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>     result = new ISOLatin2AccentFilter(result); // 
>> ISOLatin1AccentFilter  modified that  -> oe
>>     result = new org.apache.lucene.analysis.LowerCaseFilter(result);
>>     result = new 
>> org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram 
>> tokenizer
>>
>> We use our own queryparser. The bigramms are searched with a tolerant 
>> phrase query, scoring in a doc the greatest bigramms clusters 
>> covering the phrase token.
>>
>> Best Regards
>>
>> Uwe
>>
>> -----Ursprngliche Nachricht-----
>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Gesendet: Freitag, 21. Mrz 2008 16:25
>> An: java-user@lucene.apache.org
>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>
>> Hi Uwe,
>>
>> Could you tell what Analyzer do you use when you marked so big indexing
>> speedup?
>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the
>> reason is in it. You can see the pre last report in the thread "Indexing
>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake
>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl
>> that now is generated by JFlex instead of JavaCC.
>> I am asking because I noticed a great speedup in adding documents to
>> index in our system. We have time control on this in the debug mode. NOW
>> THEY ARE ADDED 5 TIMES FASTER!!!
>> But in the same time the total process of indexing in our case has
>> improvement of about 8%. As our system is very big and complex I am
>> wondering if really the whole process of indexing is reduces so
>> remarkably and our system causes this slowdown or may be Lucene does
>> some optimizations on the index, merges or something else and this is
>> the reason the total process of indexing to be not so reasonably faster.
>>
>> Best Regards,
>> Ivan
>>
>>
>>
>> Uwe Goetzke wrote:
>>> This week I switched the lucene library version on one customer system.
>>> The indexing speed went down from 46m32s to 16m20s for the complete 
>>> task
>>> including optimisation. Great Job!
>>> We index product catalogs from several suppliers, in this case around
>>> 56.000 product groups and 360.000 products including descriptions were
>>> indexed.
>>>
>>> Regards
>>>
>>> Uwe
>>>
>>>
>>>
>>> -----------------------------------------------------------------------
>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>>
>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte 
>>> Empfanger sind, durfen Sie die Informationen nicht offen legen oder 
>>> benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, 
>>> teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den 
>>> Absender zuruckschicken. Bitte loschen Sie danach diese Email.
>>> This email is confidential. If you are not the intended recipient, 
>>> you must not disclose or use this information contained in it. If 
>>> you have received this email in error please tell us immediately by 
>>> return email and delete the document.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> __________ NOD32 2913 (20080301) Information __________
>>>
>>> This message was checked by NOD32 antivirus system.
>>> http://www.eset.com
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> -----------------------------------------------------------------------
>> Healy Hudson GmbH - D-55252 Mainz Kastel
>> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
>>
>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte 
>> Empfnger sind, drfen Sie die Informationen nicht offen legen oder 
>> benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, 
>> teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den 
>> Absender zurckschicken. Bitte lschen Sie danach diese Email.
>> This email is confidential. If you are not the intended recipient, 
>> you must not disclose or use this information contained in it. If you 
>> have received this email in error please tell us immediately by 
>> return email and delete the document.
>>
>>
>> ---------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2968 (20080324) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 11:42:47 2008
Return-Path: <java-user-return-33307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31883 invoked from network); 24 Mar 2008 11:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 11:42:47 -0000
Received: (qmail 46573 invoked by uid 500); 24 Mar 2008 11:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45646 invoked by uid 500); 24 Mar 2008 11:42:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45635 invoked by uid 99); 24 Mar 2008 11:42:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 04:42:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of climbingrose@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 11:41:59 +0000
Received: by wx-out-0506.google.com with SMTP id i28so3212371wxd.20
        for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 04:42:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=CpmuCg68hD8yhXEtHb0NMQa+9PyjeQM4ZJ8h9e9WYaQ=;
        b=kLifjVJvHideFGwhpskGtlVX5JXdYSVpV7qfWnLNgZlqleJHPM2ZiGa9KExp7fFHqmoEuNLuxr21tKR/Cu6Mg8YdaQ7aYX5o9rkfTpV3VAxGTaZYdya/viv1QKVg6RMgXUAizNoBSxouRdDFjWcnQv6G//HCTbx/5P2XwR8jA3E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q2G/a7Dplu/yEvcMWPvKhvk3e3jso9XdS0lCQ3Tf2pYsI63IJfuJflT1c26RkEpoLlHHN/UtkKQ84c0Su5vUNLGwhpi6lQ9ePb8A9m/Ko8uU6Y6A30SOqBVoVJK8mWpKYmCgWxMU2eHClS5jCXighoDygxZDAqeD90b6zOgQ0+A=
Received: by 10.140.127.20 with SMTP id z20mr2032548rvc.77.1206358929986;
        Mon, 24 Mar 2008 04:42:09 -0700 (PDT)
Received: by 10.140.250.7 with HTTP; Mon, 24 Mar 2008 04:42:09 -0700 (PDT)
Message-ID: <3e7716cd0803240442p57b53fc1x25193f73b8638ea9@mail.gmail.com>
Date: Mon, 24 Mar 2008 22:42:09 +1100
From: climbingrose <climbingrose@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a relaxed PhraseQuery?
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE822@owamz.healy-hudson.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6013_5396752.1206358929974"
References: <3e7716cd0803231636i39befe0bw45c127780c0f30b2@mail.gmail.com>
	 <D7206503EB5BE94497458AF4FE4AE8AB6EE822@owamz.healy-hudson.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6013_5396752.1206358929974
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Uwe,

Thanks a lot for the code. I'm digging into it now!

Cheers,

Cuong

On Mon, Mar 24, 2008 at 7:41 PM, Uwe Goetzke <uwe.goetzke@healy-hudson.com>
wrote:

> Hi Cuong ,
>
> I have written a TolerantPhraseScorer starting with the code from
> PhraseScorer but I think I have modified it to much to be generally usefu=
l.
> We use it with bigramm clusters and therefore does not need the slop fact=
or
> for scoring but have a tolerance factor (depending on the length of the
> phrase). Here are the most relevant code fragments to start with...
> So the idea is to keep queue ordered (calling firstToLast2 and moveLast).
> I have not yet checked the code for optimisations. If you find one, I wou=
ld
> be glad to hear about it... ;-)
>
>
> protected TolerantPhrasePositions first, last, reallast; // last point to
> the last tpp for the doc varying from tolerance to phrase size (reallast)
>
> protected int tolerance;
>
> /**
>         * similar to PhraseScorer but with a tolerance factor
>         *
>         * @see PhraseScorer
>         */
>        TolerantPhraseScorer(Weight weight, TermPositions[] tps, int[]
> positions, Similarity similarity,
>                             byte[] norms, int tolerance)
>        {
>                super(similarity);
>                this.norms =3D norms;
>                this.weight =3D weight;
>                this.value =3D weight.getValue();
>                this.tolerance =3D tolerance;
>                termsize =3D 0;
>                // convert tps to a list
>                for (int i =3D 0; i < tps.length; i++) {
>                        if (tps[i] !=3D null) {
>                                TolerantPhrasePositions pp =3D new
> TolerantPhrasePositions(tps[i], positions[i]);
>                                termsize++;
>                                if (reallast !=3D null) {
> // add next to end of list
>                                        reallast.next =3D pp;
>                                        pp.previous =3D reallast;
>                                }
>                                else
>                                        first =3D pp;
>                                reallast =3D pp;
>                                if ((termsize >=3D tolerance) && (last =3D=
=3D
> null))
>                                        last =3D pp;
>                        }
>                }
>                pq =3D new TolerantPhraseQueue(termsize);             //
> construct empty pq
>        }
>
>
> public boolean next() throws IOException
>        {
>                if (firstTime) {
>                        init();
>                        firstTime =3D false;
>                }
>                else if (more) {
>                        int doc =3D last.doc;
>                        while (doc =3D=3D last.doc) {
>                                more =3D last.next();                     =
//
> trigger further scanning
>                                moveLast();
>                        }
>                }
>                return doNext();
>        }
>
>        // next without initial increment
>        private boolean doNext() throws IOException
>        {
>                while (more) {
>                        while (more && first.doc < last.doc) {      // fin=
d
> doc w/ all the terms
>                                more =3D first.skipTo(last.doc);
>  // skip first upto last
>                                firstToLast2();
>  // and move it to the end
>                        }
>                        if (more) {
>                                // found a doc with all of the terms
>                                freq =3D phraseFreq();
>  // check for phrase
>                                if (freq =3D=3D 0.0f) {
>  // no match
>                                        int doc =3D last.doc;
>                                        while (doc =3D=3D last.doc) {
>                                                more =3D last.next();
>             // trigger further scanning
>                                                moveLast();
>                                        }
>                                }
>                                else
>                                        return true;
>      // found a match
>                        }
>                }
>                return false;                                 // no more
> matches
>        }
>
>
> private void firstToLast2()
>        {
>                TolerantPhrasePositions newfirst =3D first.next;
>                TolerantPhrasePositions test =3D last;
>                TolerantPhrasePositions insertp =3D test;
>                while ((test !=3D null) && (first.doc >=3D test.doc)) {
>                        insertp =3D test;
>                        test =3D test.next;
>                }
>                if (insertp =3D=3D null) { // last elem should not happen
>                        System.out.println("firstToLast2->insertp=3D=3Dnul=
l");
>                }
>                else {
>                        first.previous =3D insertp;  // einkoppeln
>                        first.next =3D insertp.next;
>                        if (first.next !=3D null)
>                                first.next.previous =3D first;
>                        insertp.next =3D first;
>                        if (test =3D=3D null) {
>                                reallast =3D first;
>                                reallast.next =3D null;
>                        }
>                }
>                last =3D last.next;
>                first =3D newfirst;
>                first.previous =3D null;
>        }
>
> private void moveLast()
>        {
>                TolerantPhrasePositions test =3D last;
>                TolerantPhrasePositions insertp =3D null;
>                while ((test !=3D null) && (last.doc >=3D test.doc)) {
>                        insertp =3D test;
>                        test =3D test.next;
>                }
>                if (insertp =3D=3D null) { // last elem should not happen
>                        System.out.println("insertp=3D=3Dnull");
>                }
>                else {
>                        if (insertp !=3D last) {
>                                TolerantPhrasePositions prev =3D
> last.previous;   // dequeue
>                                if (prev !=3D null) { // if only 1 charact=
er!
>                                        prev.next =3D last.next;
>                                        prev.next.previous =3D prev;
>                                }
>                                last.previous =3D insertp;  // enqueue
>                                last.next =3D insertp.next;
>                                if (last.next !=3D null)
>                                        last.next.previous =3D last;
>                                insertp.next =3D last;
>
>                                if (test =3D=3D null) {
>                                        reallast =3D last;
>                                        reallast.next =3D null;
>                                }
>                                if (prev !=3D null) { // if only 1 charact=
er!
>                                        last =3D prev.next;
>                                }
>                        }
>                }
>        }
>
> Best Regards
>
> Uwe
>
>
> -----Urspr=FCngliche Nachricht-----
> Von: climbingrose [mailto:climbingrose@gmail.com]
> Gesendet: Montag, 24. M=E4rz 2008 00:37
> An: java-user
> Betreff: Implement a relaxed PhraseQuery?
>
> Hi all,
>
> I posted this in Solr mailing but then I thought it would be more
> appropriate to have it here.
>
> I thought many people would encounter the situation I'm having here.
> Basically, we'd like to have a PhraseQuery with "minimum should match"
> property similar to BooleanQuery. Consider the query "Senior Java
> Developer":
>
> 1) I'd like to do a PhraseQuery on "Senior Java Developer" with a slop of
> say 2, so that the query only matches documents with these words located
> in
> proximity. I don't want to match documents like "Senior <Huge block of
> text>
> Java <Huge block of Text> Developer".
> 2) I also want to relax PhraseQuery a bit so that it not only match
> "Senior
> Java Developer"~2 but also matches "Java Developer"~2 but of course with =
a
> lower score. I can programmatically generate on the combination but it's
> not
> gonna be efficient if user issues query with many terms.
>
> It looks like the only solution is to hack PhraseScorer and its
> subclasses.
> Has anyone done this before? If yes, please share your experience.
>
>
> --
> Regards,
>
> Cuong Hoang
>
> -----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB 120=
76
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empf=E4nger
> sind, d=FCrfen Sie die Informationen nicht offen legen oder benutzen. Wen=
n Sie
> diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte
> umgehend mit, indem Sie diese Email an den Absender zur=FCckschicken. Bit=
te
> l=F6schen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you
> must not disclose or use this information contained in it. If you have
> received this email in error please tell us immediately by return email a=
nd
> delete the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6013_5396752.1206358929974--

From java-user-return-33308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 12:13:38 2008
Return-Path: <java-user-return-33308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39830 invoked from network); 24 Mar 2008 12:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 12:13:38 -0000
Received: (qmail 69988 invoked by uid 500); 24 Mar 2008 12:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69955 invoked by uid 500); 24 Mar 2008 12:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69943 invoked by uid 99); 24 Mar 2008 12:13:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 05:13:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.165 as permitted sender)
Received: from [65.55.175.165] (HELO blu139-omc1-s25.blu139.hotmail.com) (65.55.175.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 12:12:47 +0000
Received: from BLU119-W43 ([65.55.162.181]) by blu139-omc1-s25.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 24 Mar 2008 05:12:58 -0700
Message-ID: <BLU119-W439257D722FAE9D4E2B724B9FD0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_725da17c-4893-44a1-ba18-b2760cdb5eb1_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Field values ...
Date: Mon, 24 Mar 2008 08:12:58 -0400
Importance: Normal
In-Reply-To: <Pine.LNX.4.62.0803221600450.24525@radix.cryptio.net>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com>
  <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl> 
 <Pine.LNX.4.62.0803221600450.24525@radix.cryptio.net>
MIME-Version: 1.0
X-OriginalArrivalTime: 24 Mar 2008 12:12:58.0280 (UTC) FILETIME=[65D8FA80:01C88DA8]
X-Virus-Checked: Checked by ClamAV on apache.org

--_725da17c-4893-44a1-ba18-b2760cdb5eb1_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

The Id and Phone fields are stored.  So I can just do a MatchAllQuery as yo=
u suggested.  I have read about field selectors on this mailing list but ha=
ve never used it.  Does anyone know where I can find some sample code? Than=
k you.

> Date: Sat, 22 Mar 2008 16:03:54 -0700
> From: hossman_lucene@fucit.org
> To: java-user@lucene.apache.org
> Subject: RE: Field values ...
>=20
>=20
> : I want to do something like:
> : =20
> :     List<Info> infoList =3D new ArrayList<Info> ();
> :     foreach (Document doc in LuceneIndex)
> :     {
> :        String id =3D doc.get ("Id");
> :        String phone =3D doc.get ("Phone");
> :        infoList.add (new Info (id, phone));
> :     }
>=20
> If "Id" and "Phone" are stored values then that code will pretty much wor=
k=20
> as is ... jut change "Document doc in LuceneIndex" to be something that=20
> does a MtchAllQuery (putting your code in a HitCollector would probably b=
e=20
> pretty straight forward.
>=20
> But it won't neccessarily be very efficient, particularly if you've got a=
=20
> lot of other stored fields, but a FieldSelector can help make it faster.
>=20
> if Id and Phone are both indexed fields, and ever doc has only one value=
=20
> for each then you can use the FieldCache to get an array for each of them=
,=20
> and then just iterate over the arrays in parallel (watch out for deleted=
=20
> documents)
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Test your Star IQ
http://club.live.com/red_carpet_reveal.aspx?icid=3Dredcarpet_HMTAGMAR=

--_725da17c-4893-44a1-ba18-b2760cdb5eb1_--

From java-user-return-33309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 24 22:33:37 2008
Return-Path: <java-user-return-33309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6578 invoked from network); 24 Mar 2008 22:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Mar 2008 22:33:37 -0000
Received: (qmail 16299 invoked by uid 500); 24 Mar 2008 22:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16274 invoked by uid 500); 24 Mar 2008 22:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16263 invoked by uid 99); 24 Mar 2008 22:33:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 15:33:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 22:32:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id DEA7D7D179
	for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 15:32:58 -0700 (PDT)
Message-Id: <254F594E-C77D-4BFB-9229-01D1A4E41E62@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <006101c88d78$01e388e0$9b21fea9@NizamulHlaptop>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: is it possible to change the way score from different field combine to give final lucene score
X-Priority: 3
Date: Mon, 24 Mar 2008 18:32:56 -0400
References: <006101c88d78$01e388e0$9b21fea9@NizamulHlaptop>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

See the FunctionQuery and the org.apache.lucene.search.function  
package.  You can also implement your own query, as it's not clear to  
me how exactly you want to calculate the score.  Essentially, you have  
your implementation of BooleanQuery, I think.  Perhaps more details  
would help.

-Grant


On Mar 24, 2008, at 2:26 AM, Nizamul wrote:

> Suppose I have two field field1 and field2 and let the score for a  
> query from field1 and field2 are score1 and score2 respectively.now  
> when computing the final lucene score I instead of score1,I want to  
> use some function (f(score1)) of that score.

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 01:35:32 2008
Return-Path: <java-user-return-33310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72699 invoked from network); 25 Mar 2008 01:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 01:35:32 -0000
Received: (qmail 90129 invoked by uid 500); 25 Mar 2008 01:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90060 invoked by uid 500); 25 Mar 2008 01:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90042 invoked by uid 99); 25 Mar 2008 01:35:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 18:35:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Mar 2008 01:34:38 +0000
Received: (qmail 60172 invoked by uid 60001); 25 Mar 2008 01:34:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=bNoZLr3xuqoC/RVrFs36bft7FHbisN63l1G7Cou5rwdyxc8mVzNUX8KUHCIBJ9j5VC/1pkaJQAaS+wTbugn1ufl4+RbyUih8KTCFaTRgfx96yDaS0vyoIfjRcu/RP7wcwINHVJz7yWuacP4ba6cysKZ+Lwx302E1hxiyOZn+YwU=;
X-YMail-OSG: MGxED3cVM1kEfUnKmraVjPgGZzi_jjrwSxa46SvIIVgZr6nwRkx1q.KanMztm7ea9fmmcH2PKUJ74lUJxq4g8IQx06Ce5Z15b2PBbtxCwd3dY0P_xFfABj5GZfIj0aFKNxyHCTcE1mAAjw--
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Mon, 24 Mar 2008 18:34:48 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Mon, 24 Mar 2008 18:34:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to control the disk size of the indices
To: general@lucene.apache.org
Cc: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <331829.59350.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yannis,

I don't think there is anything of that sort in Lucene, but this shouldn't be hard to do with a process outside Lucene.  Of course. optimizing an index increases its size temporarily, so your external process would have to take that into account and play it safe.  You could also set mergeFactor to 1, which should keep your index in a fully optimized state if you don't do any deletions and near-optimized state if you do deletions.

You should discuss this on java-user list, though, so I'm CCing that list where you can continue the discussion.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Yannis Pavlidis <ypavlidis@me.dium.com>
To: general@lucene.apache.org
Sent: Monday, March 24, 2008 7:33:26 PM
Subject: how to control the disk size of the indices


Hi all,

I wanted to ask the list whether there is an easy and efficient way to manage the size (in bytes) of a lucene index stored on disk.

Basically I would like to limit lucene storing only 100 GB of information. When lucene reaches that limit then I would delete the documents (using an LRU algorithm based on timestaps) but in no case the disk space occupied by Lucene should exceed 100GB.

I experimented with lucene 2.3.1 and the only I could accomplish that was by calling the optimize method (after the index size exceeded the max size) on the IndexWriter. I was looking for a more performant way to "perhaps control" Lucene on when to merge the segments so as to not exceed the pre-set limit.

Any ideas or suggestions would be highly appreciated.

Thanks in advance,

Yannis.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 01:43:29 2008
Return-Path: <java-user-return-33311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74813 invoked from network); 25 Mar 2008 01:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 01:43:29 -0000
Received: (qmail 99647 invoked by uid 500); 25 Mar 2008 01:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99609 invoked by uid 500); 25 Mar 2008 01:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99598 invoked by uid 99); 25 Mar 2008 01:43:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 18:43:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Mar 2008 01:42:40 +0000
Received: (qmail 35069 invoked by uid 60001); 25 Mar 2008 01:42:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=aXUe2y/+nTOgLEKZtOVl1SrFZz79XvYOPvriZc6/Kx/eDBnH2emxsG/vYHAolJehzY4+OPEGyyLGOtsN01tlSuneGmG2z+/QDK8Hg7Ek0k1mK3jdII5QUaoAPinekZ/EndW1fCrZ/D7UO30eWQg+K1zzBV1L5sczSTJo3i82NMs=;
X-YMail-OSG: jL31WxAVM1mT_Mcc22ymMKVlUIDodFFjPMINk6dSte4Grrvx48dt1Nt63wP1fTyBD9eVq3Lif5yK9tBMot_3Y9FXwFGDzjhBDUvAE5pXb4fttN0IR1A68c4UQpKmIgBkXLni2bSD2BZftg--
Received: from [72.231.9.236] by web50305.mail.re2.yahoo.com via HTTP; Mon, 24 Mar 2008 18:42:49 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Mon, 24 Mar 2008 18:42:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Chaining analyzers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <693824.34954.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hm, if all you are after is removing stop words for all 3 languages, why not create a single Analyzer that includes a StopFilter and give it a list of stop words for all 3 languages?

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Vinicius Carvalho <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, March 20, 2008 2:15:43 PM
Subject: Chaining analyzers

Hello there! Is it possible to chain analyzers? If I don't know what is the
locale of my document, and considering that all of my docs will always
either be in English/Spanish/Portuguese, is it possible to chain analyzers
to remove stop-words from all those locales? I know that stem would be a
much more complicated (or even not possible) solution.

Regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 01:48:21 2008
Return-Path: <java-user-return-33312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76219 invoked from network); 25 Mar 2008 01:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 01:48:21 -0000
Received: (qmail 3997 invoked by uid 500); 25 Mar 2008 01:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3967 invoked by uid 500); 25 Mar 2008 01:48:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3956 invoked by uid 99); 25 Mar 2008 01:48:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 18:48:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Mar 2008 01:47:31 +0000
Received: (qmail 31579 invoked by uid 60001); 25 Mar 2008 01:47:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=af2sgFfsHGfOMlywzOsM3WpKhR9XcwmV6/d0qorJxHmWkMsLRNCKRAzF0yHp/fwl4VHzoeqjQAuL/PzGAvHQwmNovQFjM9l0teo8W11iO+VW/W3BXYdJBT79hoQn+tlUrjy/yH/lPG2RkvMBLIy+qcqlYdf/tHuNbog01jYe+AY=;
X-YMail-OSG: uS2wAdcVM1l5biHRI.qBBrzAkwsrRduBhs4ERPtxK3i2vW8mGg1493X8DW3KabfKSyXSIndYIrfRgQ5jzTkI9HHCXE7w8.i.Wd4VwZz67MBsrNeQmSR8HaqL_ROjwooMvYmQP_oZdpFbN50ZSUzFa6V2866i_9ZQSGGA8plfVQ--
Received: from [72.231.9.236] by web50302.mail.re2.yahoo.com via HTTP; Mon, 24 Mar 2008 18:47:41 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Mon, 24 Mar 2008 18:47:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multi process writer access to an index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <451084.30775.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't see the answer to this question.  This is Windows-specific.  I'm not a Windows user, so I never had this problem, but I believe we've had code to work around this issue in Java Lucene for years now.  It could be that Lucene.Net doesn't have that.  In any case, it would be best to check on the Lucene.Net list.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Eran Sevi <eransevi@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, March 19, 2008 10:10:46 AM
Subject: Re: Multi process writer access to an index

Sorry for any duplicate posts.

Actually I'm using the latest "final" Lucene.Net and I hope this problem is
not unique to this version.
The OS is windows, FS - NTFS.


Here's an example of what I do in each process (which may reside on a
different computer):



            writer = new IndexWriter(fi, new StandardAnalyzer(
threadData.stopwords), true);



            while (currentFile < threadData.files.Length)

            {

                //Add document

                AddDocument(threadData.files[currentFile], writer);



               writer.Close();



               currentFile++;

            }

The error I get is (each time it's a different file):

"The process cannot access the file
'D:\\Temp\\xml\\Lucene\\R3MTIndex\\_1.fdt' because it is being used by
another process."
"   at System.IO.__Error.WinIOError(Int32 errorCode, String
maybeFullPath)\r\n   at System.IO.File.Delete(String path)\r\n   at
Lucene.Net.Store.FSDirectory.CreateOutput(String name)\r\n   at
Lucene.Net.Index.FieldsWriter..ctor(Directory d, String segment, FieldInfos
fn)\r\n   at Lucene.Net.Index.SegmentMerger.MergeFields()\r\n   at
Lucene.Net.Index.SegmentMerger.Merge()\r\n   at
Lucene.Net.Index.IndexWriter.MergeSegments(Int32 minSegment, Int32
end)\r\n   at Lucene.Net.Index.IndexWriter.MergeSegments(Int32
minSegment)\r\n   at Lucene.Net.Index.IndexWriter.FlushRamSegments()\r\n
at Lucene.Net.Index.IndexWriter.Close()\r\n   at AAIndexer.RunThread(Object
data) in D:\\LuceneWrapper\\AAIndexer.cs:line 169\r\n   at
System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n   at
System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
ContextCallback callback, Object state)\r\n   at
System.Threading.ThreadHelper.ThreadStart(Object obj)"

Thanks.


=============================================
You'll get more meaningful answers if you provide some details:

Things that come to mind:



op system (windows? *nix?)



file system (NFS? local? NTFS?)



An example of the error you receive (a stack trace would be good).



The code you're executing when you get the error.



Imagine you're trying to advise someone else and think about what you'd find
useful and try to provide that, please.



Best

Erick





On Wed, Mar 19, 2008 at 9:54 AM, Eran Sevi <eransevi@gmail.com> wrote:



> Hi,

>

>

> I'm trying to write to a specific index from several different

> processes and encounter problems with locked files (deletable for

> example).

>

> I don't perform any specific locking because as I understand it there

> should be file-specific locking mechanism used by lucene API. This

> doesn't seem to be working as I am able to instantiate an IndexWriter

> on the same index simultaneously, but I encounter problems when I try

> to close/optimize it .

>

>

>

> Please help me understand if lucene doesn't support this kind of

> access, and what's the proper way to write to the same index from two

> or more different processes/computers.

>

>

>

> Thanks,

>

> Eran S.

>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 01:50:00 2008
Return-Path: <java-user-return-33313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76717 invoked from network); 25 Mar 2008 01:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 01:50:00 -0000
Received: (qmail 8980 invoked by uid 500); 25 Mar 2008 01:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8718 invoked by uid 500); 25 Mar 2008 01:49:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8707 invoked by uid 99); 25 Mar 2008 01:49:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 18:49:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 01:49:13 +0000
Received: by el-out-1112.google.com with SMTP id y26so1447245ele.4
        for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 18:49:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=1OsXE809uNYSI2R3VGJDOTMyR7ye0gQWcq5FKm3vH2Y=;
        b=uXMTLjG0QIBeUNCGCeYTc47bZGtdgsv98yHaXblyFN6sEUE8oxUZVoOtUWogpGyMGBo1Hbn9cRgoEy7x8THe3jk/F5VcqFsbb93Ks93MVFUqYUtWT5tpSV3LVkBLtZ0nlJGLz802GO4Mkq1Qd6t8DYGOHYRGOSJnYg6BrFiz4sc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=B6QA00OC1G/D4MqKzFZpB7nK7NfPpodHBcKOaYJQIC3z0eVmaj5OBasyPPVq9dAttB/ufFXT+NxUqP3/mMzkbsdESIM3UCU0ZvzLLkePwnjaysHygXHrTxBPF7yGys3lSWny+BCc20q7ictaT4U4aPtv1VfRZv++Tepnu8fhrzQ=
Received: by 10.150.195.21 with SMTP id s21mr3642658ybf.9.1206409764447;
        Mon, 24 Mar 2008 18:49:24 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Mon, 24 Mar 2008 18:49:24 -0700 (PDT)
Message-ID: <c68e39170803241849q671f4adbscdfb2e60edc74e72@mail.gmail.com>
Date: Mon, 24 Mar 2008 21:49:24 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: general@lucene.apache.org
Subject: Re: how to control the disk size of the indices
Cc: java-user@lucene.apache.org
In-Reply-To: <331829.59350.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <331829.59350.qm@web50304.mail.re2.yahoo.com>
X-Google-Sender-Auth: d9528d18cebfa44e
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Mar 24, 2008 at 9:34 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Hi Yannis,
>
>  I don't think there is anything of that sort in Lucene, but this shouldn't be hard to do with a process outside Lucene.  Of course. optimizing an index increases its size temporarily, so your external process would have to take that into account and play it safe.  You could also set mergeFactor to 1, which should keep your index in a fully optimized state

MergeFactor must be >= 2

You will always need to allow for double the index size due to
increased temporary disk usage during segment merges (including
optimize).   Peak use on a system being searched and indexed
concurrently will often be even higher since currently open readers
reference files that have been deleted.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 04:03:55 2008
Return-Path: <java-user-return-33314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19281 invoked from network); 25 Mar 2008 04:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 04:03:54 -0000
Received: (qmail 47413 invoked by uid 500); 25 Mar 2008 04:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47117 invoked by uid 500); 25 Mar 2008 04:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47106 invoked by uid 99); 25 Mar 2008 04:03:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Mar 2008 21:03:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 04:02:54 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9C30271C364; Mon, 24 Mar 2008 21:03:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8340D71C356
	for <java-user@lucene.apache.org>; Mon, 24 Mar 2008 21:03:13 -0700 (PDT)
Date: Mon, 24 Mar 2008 21:03:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Field values ...
In-Reply-To: <BLU119-W439257D722FAE9D4E2B724B9FD0@phx.gbl>
Message-ID: <Pine.LNX.4.62.0803242102330.17425@radix.cryptio.net>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com> 
 <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl>  <Pine.LNX.4.62.0803221600450.24525@radix.cryptio.net>
 <BLU119-W439257D722FAE9D4E2B724B9FD0@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The Id and Phone fields are stored.  So I can just do a MatchAllQuery as 
: you suggested.  I have read about field selectors on this mailing list 
: but have never used it.  Does anyone know where I can find some sample 
: code? Thank you.

there's a couple of reusable implementations in subversion...

http://www.krugle.org/kse/files?query=%22implements%20FieldSelector%22%20lucene&lang=java&findin=code



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 08:50:46 2008
Return-Path: <java-user-return-33315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17823 invoked from network); 25 Mar 2008 08:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 08:50:46 -0000
Received: (qmail 7033 invoked by uid 500); 25 Mar 2008 08:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7002 invoked by uid 500); 25 Mar 2008 08:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6991 invoked by uid 99); 25 Mar 2008 08:50:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 01:50:38 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 08:49:56 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 7C51C45449
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 09:50:02 +0100 (CET)
Message-ID: <47E8BCB2.4090809@garambrogne.net>
Date: Tue, 25 Mar 2008 09:49:54 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Call Lucene default command line Search from PHP script
References: <16207418.post@talk.nabble.com>
In-Reply-To: <16207418.post@talk.nabble.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=windows-1250; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

milu07 a crit :
> Hello,
>
> My machine is Ubuntu 7.10. I am working with Apache Lucene. I have done with
> indexer and tried with command line Searcher (the default command line
> included in Lucene package: http://lucene.apache.org/java/2_3_1/demo2.html).
> When I use this at command line:
>
> java Searcher -query algorithm
>
> it works and returns a list of results to me. Here 'algorithm' is the
> keyword to search.
>
> However, I want to have a web search interface written in PHP, I use PHP
> exec() to call this Searcher from my PHP script:
>
> exec("java Searcher -query algorithm ", $arr, $retVal);
> [I also tried: exec("java Searcher -query 'algorithm' ", $arr, $retVal)]
>
> It does not work. I print the value of $retVal, it is 1.
>
> I come back and try: exec("java Searcher -query algorithm 2>&1 ", $arr,
> $retVal);
> I receive: 
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/analysis/Analyzer  
> and $retVal is 1
>
> In the command line Searcher.java of Lucene, it imports many libraries, is
> this the problem?
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyz er;
> ....
>
> I guess this is the problem of path. However, I do not know how to fix it
> because it works in command line ($CLASSPATH points to the .jar file of
> Lucene library). May be PHP does not know $CLASSPATH. So, I add Lucene lib
> to $PATH:
>
> export PATH=$PATH:/usr/lib/lucene-core-2.3.1.jar:/usr/lib
>
> However, I get the same error message when I try: exec("java Searcher -query
> algorithm 2>&1 ", $arr, $retVal);
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/analysis/Analyzer
>
> Could you please help?
>
> Thank you,
>   
using command line from PHP is a bad idea.
socket is a better way :
https://admin.garambrogne.net/projets/passerelle/browser/trunk/goniometre

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 11:34:22 2008
Return-Path: <java-user-return-33316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67295 invoked from network); 25 Mar 2008 11:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 11:34:22 -0000
Received: (qmail 7290 invoked by uid 500); 25 Mar 2008 11:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6749 invoked by uid 500); 25 Mar 2008 11:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6738 invoked by uid 99); 25 Mar 2008 11:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 04:34:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.162 as permitted sender)
Received: from [65.55.175.162] (HELO blu139-omc1-s22.blu139.hotmail.com) (65.55.175.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 11:33:31 +0000
Received: from BLU119-W46 ([65.55.162.181]) by blu139-omc1-s22.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 25 Mar 2008 04:33:42 -0700
Message-ID: <BLU119-W46E542BAC4B069DA144D1DB9FC0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_2d9f0b5d-f817-44d4-ac2c-5b9b2663d2b1_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Field values ...
Date: Tue, 25 Mar 2008 07:33:42 -0400
Importance: Normal
In-Reply-To: <Pine.LNX.4.62.0803242102330.17425@radix.cryptio.net>
References: <BLU119-W32656CBFD87764EE842D5DB9000@phx.gbl>
 <359a92830803200705i3e0753ddg640f33812039552@mail.gmail.com> 
  <BLU119-W417FDC61769578D57B84B7B9000@phx.gbl>
  <Pine.LNX.4.62.0803221600450.24525@radix.cryptio.net>
  <BLU119-W439257D722FAE9D4E2B724B9FD0@phx.gbl> 
 <Pine.LNX.4.62.0803242102330.17425@radix.cryptio.net>
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Mar 2008 11:33:42.0437 (UTC) FILETIME=[14119D50:01C88E6C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_2d9f0b5d-f817-44d4-ac2c-5b9b2663d2b1_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Thanks.

> Date: Mon, 24 Mar 2008 21:03:13 -0700
> From: hossman_lucene@fucit.org
> To: java-user@lucene.apache.org
> Subject: RE: Field values ...
>=20
>=20
> : The Id and Phone fields are stored.  So I can just do a MatchAllQuery a=
s=20
> : you suggested.  I have read about field selectors on this mailing list=
=20
> : but have never used it.  Does anyone know where I can find some sample=
=20
> : code? Thank you.
>=20
> there's a couple of reusable implementations in subversion...
>=20
> http://www.krugle.org/kse/files?query=3D%22implements%20FieldSelector%22%=
20lucene&lang=3Djava&findin=3Dcode
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Watch =93Cause Effect,=94 a show about real people making a real difference=
.  Learn more.
http://im.live.com/Messenger/IM/MTV/?source=3Dtext_watchcause=

--_2d9f0b5d-f817-44d4-ac2c-5b9b2663d2b1_--

From java-user-return-33317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 12:43:56 2008
Return-Path: <java-user-return-33317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94000 invoked from network); 25 Mar 2008 12:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 12:43:56 -0000
Received: (qmail 16749 invoked by uid 500); 25 Mar 2008 12:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16716 invoked by uid 500); 25 Mar 2008 12:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16705 invoked by uid 99); 25 Mar 2008 12:43:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 05:43:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 12:43:09 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1867121rvb.5
        for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 05:43:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=vmDuC8bQwZ2ZvVYExx1fQLSRyWWmtxE7pL8DIjawPjY=;
        b=BBfB9LAXH2sryMMjLfBrS0VADI5f3+2PXg8mlVhK9bpXD2VbY3YFBYCW/P+gJIJHajWOFJCllkWCkN8bwHiJKJQOcOrDuw5QqwTwjEeHjWuaEITdgv1QNXLGCbEVfUF8vnd+OAWGIlJ3/gClRZJVxxU4Sp5Tt5pM1/Wiq+q6mis=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Fr6Es/T84DttCK28sTDGZxftXKtPl7xTuBQpgAoWZiTJ0nx6MCokbqD2MrbTzGyqGLcynDo4BpFchT9Z6s6qAXFgtIyKHWm6HIsBIKhQFhhjwYGvp9DtWkiUYRGNdma4q8+/Nv3Dy+ilHk6ZcpIjCXL471dk9nU6d7MwzEtXoL4=
Received: by 10.141.33.21 with SMTP id l21mr3230655rvj.140.1206449000626;
        Tue, 25 Mar 2008 05:43:20 -0700 (PDT)
Received: by 10.141.29.13 with HTTP; Tue, 25 Mar 2008 05:43:18 -0700 (PDT)
Message-ID: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
Date: Tue, 25 Mar 2008 18:13:18 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Improving Index Search Performance
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9516_9792794.1206449000606"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9516_9792794.1206449000606
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Everyone,

We are using Lucene to search on a index of around 20G size with around 3
million documents. We are facing performance issues loading large results
from the index. Based on the various posts on the forum and documentation,
we have made the following code changes to improve the performance:

i. Modified the code to use HitCollector instead of Hits since we will be
loading all the documents in the index based on keyword matching
ii. Added MapFieldSelector to load only selected fields(2 fields only)
instead of all the 14

After all these changes, it seems to be  taking around 90 secs to load 17k
documents. After profiling, we found that the max time is spent in *
searcher.doc(id,selector).

*Here is the code:

*                public void collect(int id, float score) {
                    try {
                        MapFieldSelector selector = new MapFieldSelector(new
String[] {COMPANY_ID, ID});
                        doc = searcher.doc(id, selector);
                        mappedCompanies = doc.getValues(COMPANY_ID);
                    } catch (IOException e) {
                        logger.debug("inside IDCollector.collect()
:"+e.getMessage());
                    }
                }*

*
*We also read in one of the posts that we should use bitSet.set(doc)
instead of calling searcher.doc(id). But we are unable to to understand how
this might help in our case since we will anyway have to load the document
to get the other required field(company_id). Also we observed that the
searcher is actually using only 1G RAM though we have 4G allocated to it.

Can someone suggest if there is any other optimization that can done to
improve the search performance on MultiSearcher. Any help would be
appreciated.

Thanks,
Vipin

------=_Part_9516_9792794.1206449000606--

From java-user-return-33318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 12:59:00 2008
Return-Path: <java-user-return-33318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 545 invoked from network); 25 Mar 2008 12:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 12:58:59 -0000
Received: (qmail 46107 invoked by uid 500); 25 Mar 2008 12:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46073 invoked by uid 500); 25 Mar 2008 12:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46062 invoked by uid 99); 25 Mar 2008 12:58:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 05:58:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 12:58:03 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 38D5A24010
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 14:58:23 +0200 (EET)
Message-ID: <47E8F6EE.6050301@sirma.bg>
Date: Tue, 25 Mar 2008 14:58:22 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Integrating Spell Checker contributed to Lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Has anybody integrated the Spell Checker contributed to Lucene. I need 
advise from where to get free dictionary file (one that contains all 
words in English) that could be used to create instance of 
PlainTextDictionary class. I currently use for my tests responding files 
from Jazzy and JADT projects, but I think I do not have right to use 
them officially outside of their applications.
 
Best Regards,
Ivan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 13:13:19 2008
Return-Path: <java-user-return-33319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9044 invoked from network); 25 Mar 2008 13:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 13:13:18 -0000
Received: (qmail 76669 invoked by uid 500); 25 Mar 2008 13:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76642 invoked by uid 500); 25 Mar 2008 13:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76631 invoked by uid 99); 25 Mar 2008 13:13:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 06:13:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 13:12:20 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id BA02A450EE
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 14:12:35 +0100 (CET)
Message-ID: <47E8FA3A.5020105@garambrogne.net>
Date: Tue, 25 Mar 2008 14:12:26 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg>
In-Reply-To: <47E8F6EE.6050301@sirma.bg>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ivan Vasilev a crit :
> Hi Guys,
>
> Has anybody integrated the Spell Checker contributed to Lucene. 
http://blog.garambrogne.net/index.php?post/2008/03/07/A-lexicon-approach-for-Lucene-index
https://issues.apache.org/jira/browse/LUCENE-1190

> I need advise from where to get free dictionary file (one that 
> contains all words in English) that could be used to create instance 
> of PlainTextDictionary class.
all english word is a nonsense. Have a look at wordnet and hunspell.

> I currently use for my tests responding files from Jazzy and JADT 
> projects, but I think I do not have right to use them officially 
> outside of their applications.
>
> Best Regards,
> Ivan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 14:47:14 2008
Return-Path: <java-user-return-33320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51411 invoked from network); 25 Mar 2008 14:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 14:47:12 -0000
Received: (qmail 68481 invoked by uid 500); 25 Mar 2008 14:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67509 invoked by uid 500); 25 Mar 2008 14:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67495 invoked by uid 99); 25 Mar 2008 14:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 07:47:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 14:46:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JeAQ7-000188-N3
	for java-user@lucene.apache.org; Tue, 25 Mar 2008 07:46:35 -0700
Message-ID: <16275287.post@talk.nabble.com>
Date: Tue, 25 Mar 2008 07:46:35 -0700 (PDT)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: hitcollector topdocs
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hi everybody,

I was searching for informations about the hitcollector. I was wondering if
the value of the fields have to be stored or not. i tested it and it worked
both but i'm still not really sure about it.
Second question is,  can i work with tokenized fields?

Best regards

Jens
-- 
View this message in context: http://www.nabble.com/hitcollector-topdocs-tp16275287p16275287.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 15:53:01 2008
Return-Path: <java-user-return-33321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5237 invoked from network); 25 Mar 2008 15:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 15:53:01 -0000
Received: (qmail 21948 invoked by uid 500); 25 Mar 2008 15:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21914 invoked by uid 500); 25 Mar 2008 15:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21896 invoked by uid 99); 25 Mar 2008 15:52:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 08:52:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 15:52:03 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JYA00L4BMRBBM@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 25 Mar 2008 16:52:23 +0100 (MET)
Date: Tue, 25 Mar 2008 16:52:23 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Improving Index Search Performance
In-reply-to: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1206460343.9126.401.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-03-25 at 18:13 +0530, Shailendra Mudgal wrote:
> We are using Lucene to search on a index of around 20G size with around 3
> million documents. We are facing performance issues loading large results
> from the index. [...]
> After all these changes, it seems to be  taking around 90 secs to load 17k
> documents. [...]

That's fairly slow. Are you doing any warm-up? It is my experience that
it helps tremendously with performance.

I tried requesting a stored field from all hits for all searches with
logged queries on our index (9 million documents, 37GB), no fancy
tricks, just Hits and hit.get(fieldname). For the first couple of
minutes, using standard harddisks, performance was about 2-300
field-requests/second. After that, the speed increased to about 2-3000
field-requests/second.

Using solid state drives, the same pattern could be seen, just with much
lower warm-up time before the full speed kicked in.

> *Here is the code:
> 
> *                public void collect(int id, float score) {
>                     try {
>                         MapFieldSelector selector = new MapFieldSelector(new
> String[] {COMPANY_ID, ID});
>                         doc = searcher.doc(id, selector);
>                         mappedCompanies = doc.getValues(COMPANY_ID);
>                     } catch (IOException e) {
>                         logger.debug("inside IDCollector.collect()
> :"+e.getMessage());
>                     }
>                 }*
> 
> *

There's no need to initialize the selector for every collect-call.
Try moving the initialization outside of the collect method.

> [...] Also we observed that the searcher is actually using only 1G RAM though
>  we have 4G allocated to it.

The system will (hopefully) utilize the free RAM for disk-cache, so the
last 3GB are not wasted.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 16:11:19 2008
Return-Path: <java-user-return-33322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15246 invoked from network); 25 Mar 2008 16:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 16:11:19 -0000
Received: (qmail 78963 invoked by uid 500); 25 Mar 2008 16:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78925 invoked by uid 500); 25 Mar 2008 16:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78914 invoked by uid 99); 25 Mar 2008 16:11:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 09:11:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 16:10:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JeBjV-0004vP-PI
	for java-user@lucene.apache.org; Tue, 25 Mar 2008 09:10:41 -0700
Message-ID: <16276999.post@talk.nabble.com>
Date: Tue, 25 Mar 2008 09:10:41 -0700 (PDT)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: explain() - fieldnorm
In-Reply-To: <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15717182.post@talk.nabble.com> <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


another problem just occurred. These are the results from explain() :

0.27576536 = (MATCH) product of:
  0.827296 = (MATCH) sum of:
    0.827296 = (MATCH) sum of:
      0.24544832 = (MATCH) weight(ti:genetik in 1849319), product of:
        0.015469407 = queryWeight(ti:genetik), product of:
          10.577795 = idf(docFreq=270)
          0.0014624415 = queryNorm
        15.866693 = (MATCH) fieldWeight(ti:genetik in 1849319), product of:
          1.0 = tf(termFreq(ti:genetik)=1)
          10.577795 = idf(docFreq=270)
          1.5 = fieldNorm(field=ti, doc=1849319)
      0.58184767 = (MATCH) weight(au:knippers in 1849319), product of:
        0.020028148 = queryWeight(au:knippers), product of:
          13.695007 = idf(docFreq=11)
          0.0014624415 = queryNorm
        29.051497 = (MATCH) fieldWeight(au:knippers in 1849319), product of:
          1.4142135 = tf(termFreq(au:knippers)=2)
          13.695007 = idf(docFreq=11)
          1.5 = fieldNorm(field=au, doc=1849319)
  0.33333334 = coord(1/3)

0.27576536 = (MATCH) product of:
  0.827296 = (MATCH) sum of:
    0.827296 = (MATCH) sum of:
      0.24544832 = (MATCH) weight(ti:genetik in 3221603), product of:
        0.015469407 = queryWeight(ti:genetik), product of:
          10.577795 = idf(docFreq=270)
          0.0014624415 = queryNorm
        15.866693 = (MATCH) fieldWeight(ti:genetik in 3221603), product of:
          1.0 = tf(termFreq(ti:genetik)=1)
          10.577795 = idf(docFreq=270)
          1.5 = fieldNorm(field=ti, doc=3221603)
      0.58184767 = (MATCH) weight(au:knippers in 3221603), product of:
        0.020028148 = queryWeight(au:knippers), product of:
          13.695007 = idf(docFreq=11)
          0.0014624415 = queryNorm
        29.051497 = (MATCH) fieldWeight(au:knippers in 3221603), product of:
          1.4142135 = tf(termFreq(au:knippers)=2)
          13.695007 = idf(docFreq=11)
          1.5 = fieldNorm(field=au, doc=3221603)
  0.33333334 = coord(1/3)

As you can see, both are exactly the same. The thing i don't understand is,
that the two documents have different documentboosts (the first one got an
boost of 1.62 , the second of 1.65) - the boosts are different because the
two books got different publication years - but explain() tells me that my
fieldNorm value is 1.5.
While indexing i use a new similarity class where lengthNorm just returns 1,
so the field length does not matter anymore.

Best Regards 

Jens Burkhardt


hossman wrote:
> 
> : As my subject is telling, i have a little problem with analyzing the
> : explain() output.
> : I know, that the fieldnorm value consists out of "documentboost,
> fieldboost
> : and lengthNorm". 
> : Is is possible to recieve the single values? I know that they are
> multiplied
> : while indexing but
> : can they be stored so that i can read them when i analyze my search?
> 
> the number of terms the docs have in a given field can be determined by 
> doing a nested iteration over a TermEnum and TermDoc and keeping count, 
> but there is no way to keep extract the document boost vs the field boost 
> -- if you want to know what those were later you have to store them 
> yourselves (in a stored field perhaps).
> 
> : The Problem is, that i have 2 Documents I want to compare but the only
> : difference is the fieldnorm value
> : and i don't know which value exactly makes this difference.
> 
> typically the answer to that question for me is "length" because i don't 
> use field boosts and doc boosts -- if you *do* use field boosts or doc 
> boosts, you would typically know what you had, and could check what boost 
> values you had used later (based on whatever source you orriginally built 
> your index from)
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/explain%28%29---fieldnorm-tp15717182p16276999.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 16:13:23 2008
Return-Path: <java-user-return-33323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16736 invoked from network); 25 Mar 2008 16:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 16:13:23 -0000
Received: (qmail 86131 invoked by uid 500); 25 Mar 2008 16:13:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86104 invoked by uid 500); 25 Mar 2008 16:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86087 invoked by uid 99); 25 Mar 2008 16:13:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 09:13:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 16:12:32 +0000
Received: by an-out-0708.google.com with SMTP id c5so742403anc.49
        for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 09:12:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=QcezUNeCM1nsuEneUfdoqx9T+W5PTVTxFrxCYkEWK34=;
        b=cB5A7cRCeGt7UlB2IS5NQHPe6CMk/2OOzG+2cANdLkKAOBsmygoAxoEhDpVb+7smNIl0YTNmSEm0ewHoljddDnqPDUX7LILGptbjaiLVhSSQXaJv4neX2kcOqGqw8/zT3D5k9/mw0lj/mMYHAxCekrM8sZgJ9YBoOCaJh5qWe/g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AIeimmesiWRmawx9UpM/uidMUgkwLiivi5mz6oXLzSI/CGlYkOm9ux1J+urGkNB/DQydSEfXLVDh8TBbL++Q5LNfkj7RdpSo/pNF26mYY93as+uYork8Aq5nppFoZ+TBSafi2wh/HE72a7uu5dnFBOeGfrRrdTwGikVbrVc5vE0=
Received: by 10.100.41.8 with SMTP id o8mr22153464ano.82.1206461561138;
        Tue, 25 Mar 2008 09:12:41 -0700 (PDT)
Received: by 10.100.42.8 with HTTP; Tue, 25 Mar 2008 09:12:40 -0700 (PDT)
Message-ID: <4b124c310803250912w5e405ca7mae67a284c2e040d@mail.gmail.com>
Date: Tue, 25 Mar 2008 09:12:40 -0700
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com>
	 <47E3D350.8070200@sirma.bg>
	 <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe,
  This is a little off thread-topic, but I was wondering how your
search relevance and search performance has fared with this
bigram-based index.  Is it significantly better than before you use
the NGramAnalyzer?
   -jake



On 3/24/08, Uwe Goetzke <uwe.goetzke@healy-hudson.com> wrote:
> Hi Ivan,
> No, we do not use StandardAnalyser or StandardTokenizer.
>
> Most data is processed by
> =09fTextTokenStream =3D result =3D new
> org.apache.lucene.analysis.WhitespaceTokenizer(reader);
> =09result =3D new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter
> modified that =F6 -> oe
> =09result =3D new org.apache.lucene.analysis.LowerCaseFilter(result);
> =09result =3D new org.apache.lucene.analysis.NGramStemFilter(result,2); /=
/just a
> bigram tokenizer
>
> We use our own queryparser. The bigramms are searched with a tolerant phr=
ase
> query, scoring in a doc the greatest bigramms clusters covering the phras=
e
> token.
>
> Best Regards
>
> Uwe
>
> -----Urspr=FCngliche Nachricht-----
> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Gesendet: Freitag, 21. M=E4rz 2008 16:25
> An: java-user@lucene.apache.org
> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>
> Hi Uwe,
>
> Could you tell what Analyzer do you use when you marked so big indexing
> speedup?
> If you use StandardAnalyzer (that uses StandardTokenizer) may be the
> reason is in it. You can see the pre last report in the thread "Indexing
> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake
> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl
> that now is generated by JFlex instead of JavaCC.
> I am asking because I noticed a great speedup in adding documents to
> index in our system. We have time control on this in the debug mode. NOW
> THEY ARE ADDED 5 TIMES FASTER!!!
> But in the same time the total process of indexing in our case has
> improvement of about 8%. As our system is very big and complex I am
> wondering if really the whole process of indexing is reduces so
> remarkably and our system causes this slowdown or may be Lucene does
> some optimizations on the index, merges or something else and this is
> the reason the total process of indexing to be not so reasonably faster.
>
> Best Regards,
> Ivan
>
>
>
> Uwe Goetzke wrote:
> > This week I switched the lucene library version on one customer system.
> > The indexing speed went down from 46m32s to 16m20s for the complete tas=
k
> > including optimisation. Great Job!
> > We index product catalogs from several suppliers, in this case around
> > 56.000 product groups and 360.000 products including descriptions were
> > indexed.
> >
> > Regards
> >
> > Uwe
> >
> >
> >
> > -----------------------------------------------------------------------
> > Healy Hudson GmbH - D-55252 Mainz Kastel
> > Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
> >
> > Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger
> sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn =
Sie
> diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte
> umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte
> loschen Sie danach diese Email.
> > This email is confidential. If you are not the intended recipient, you
> must not disclose or use this information contained in it. If you have
> received this email in error please tell us immediately by return email a=
nd
> delete the document.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > __________ NOD32 2913 (20080301) Information __________
> >
> > This message was checked by NOD32 antivirus system.
> > http://www.eset.com
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB 120=
76
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empf=E4nger
> sind, d=FCrfen Sie die Informationen nicht offen legen oder benutzen. Wen=
n Sie
> diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte
> umgehend mit, indem Sie diese Email an den Absender zur=FCckschicken. Bit=
te
> l=F6schen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you mu=
st
> not disclose or use this information contained in it. If you have receive=
d
> this email in error please tell us immediately by return email and delete
> the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 16:41:48 2008
Return-Path: <java-user-return-33324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27872 invoked from network); 25 Mar 2008 16:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 16:41:47 -0000
Received: (qmail 69467 invoked by uid 500); 25 Mar 2008 16:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69445 invoked by uid 500); 25 Mar 2008 16:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69434 invoked by uid 99); 25 Mar 2008 16:41:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 09:41:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 16:40:46 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 25 Mar 2008 17:41:04 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE891@owamz.healy-hudson.com>
In-Reply-To: <4b124c310803250912w5e405ca7mae67a284c2e040d@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: feedback: Indexing speed improvement lucene 2.2->2.3.1
Thread-Index: AciOkygLuxv2LuGVRxi6zGL0eaCcOgAAEF/A
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com> <47E3D350.8070200@sirma.bg> <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com> <4b124c310803250912w5e405ca7mae67a284c2e040d@mail.gmail.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Jake,

With the bigram-based index we gave up for the struggle to find a well =
working language based index.
We had implemented soundex (or different "sound"-alikes) and hyphenating =
but failed to deliver a user explainable search result ("why is this =
ranked higher" and so on...). One reason may be that product =
descriptions contain a lot of abbreviations.

The index size grew about 30%.
The search performance seems a bit slower but I no concrete figures. The =
evaluation for a for one document is a bit more complex than a phrase =
query. One reason of course is that there a more terms evaluated. But =
nevertheless it is quite good.

The search relevance improved tremendously. Missing characters, switched =
letters and partial word fragments are no real problems any more (of =
course dependent on the length of the search word).
Search term "weekday" finds also "day of the week", "disabigaute" finds =
"disambiguate".
The algorithms I developed might not fit other domains but for multi =
language catalogs of products it works quite well for us. So far...


Regards Uwe

-----Urspr=FCngliche Nachricht-----
Von: Jake Mannix [mailto:jake.mannix@gmail.com]=20
Gesendet: Dienstag, 25. M=E4rz 2008 17:13
An: java-user@lucene.apache.org
Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1

Uwe,
  This is a little off thread-topic, but I was wondering how your
search relevance and search performance has fared with this
bigram-based index.  Is it significantly better than before you use
the NGramAnalyzer?
   -jake



On 3/24/08, Uwe Goetzke <uwe.goetzke@healy-hudson.com> wrote:
> Hi Ivan,
> No, we do not use StandardAnalyser or StandardTokenizer.
>
> Most data is processed by
> 	fTextTokenStream =3D result =3D new
> org.apache.lucene.analysis.WhitespaceTokenizer(reader);
> 	result =3D new ISOLatin2AccentFilter(result); // =
ISOLatin1AccentFilter
> modified that =F6 -> oe
> 	result =3D new org.apache.lucene.analysis.LowerCaseFilter(result);
> 	result =3D new org.apache.lucene.analysis.NGramStemFilter(result,2); =
//just a
> bigram tokenizer
>
> We use our own queryparser. The bigramms are searched with a tolerant =
phrase
> query, scoring in a doc the greatest bigramms clusters covering the =
phrase
> token.
>
> Best Regards
>
> Uwe
>
> -----Urspr=FCngliche Nachricht-----
> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Gesendet: Freitag, 21. M=E4rz 2008 16:25
> An: java-user@lucene.apache.org
> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>
> Hi Uwe,
>
> Could you tell what Analyzer do you use when you marked so big =
indexing
> speedup?
> If you use StandardAnalyzer (that uses StandardTokenizer) may be the
> reason is in it. You can see the pre last report in the thread =
"Indexing
> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter =
Jake
> Mannix this is because now StandardTokenizer uses =
StandardTokenizerImpl
> that now is generated by JFlex instead of JavaCC.
> I am asking because I noticed a great speedup in adding documents to
> index in our system. We have time control on this in the debug mode. =
NOW
> THEY ARE ADDED 5 TIMES FASTER!!!
> But in the same time the total process of indexing in our case has
> improvement of about 8%. As our system is very big and complex I am
> wondering if really the whole process of indexing is reduces so
> remarkably and our system causes this slowdown or may be Lucene does
> some optimizations on the index, merges or something else and this is
> the reason the total process of indexing to be not so reasonably =
faster.
>
> Best Regards,
> Ivan
>
>
>
> Uwe Goetzke wrote:
> > This week I switched the lucene library version on one customer =
system.
> > The indexing speed went down from 46m32s to 16m20s for the complete =
task
> > including optimisation. Great Job!
> > We index product catalogs from several suppliers, in this case =
around
> > 56.000 product groups and 360.000 products including descriptions =
were
> > indexed.
> >
> > Regards
> >
> > Uwe
> >
> >
> >
> > =
-----------------------------------------------------------------------
> > Healy Hudson GmbH - D-55252 Mainz Kastel
> > Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB =
12076
> >
> > Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empfanger
> sind, durfen Sie die Informationen nicht offen legen oder benutzen. =
Wenn Sie
> diese Email durch einen Fehler bekommen haben, teilen Sie uns dies =
bitte
> umgehend mit, indem Sie diese Email an den Absender zuruckschicken. =
Bitte
> loschen Sie danach diese Email.
> > This email is confidential. If you are not the intended recipient, =
you
> must not disclose or use this information contained in it. If you have
> received this email in error please tell us immediately by return =
email and
> delete the document.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > __________ NOD32 2913 (20080301) Information __________
> >
> > This message was checked by NOD32 antivirus system.
> > http://www.eset.com
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> =
-----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076
>
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=E4nger
> sind, d=FCrfen Sie die Informationen nicht offen legen oder benutzen. =
Wenn Sie
> diese Email durch einen Fehler bekommen haben, teilen Sie uns dies =
bitte
> umgehend mit, indem Sie diese Email an den Absender zur=FCckschicken. =
Bitte
> l=F6schen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you =
must
> not disclose or use this information contained in it. If you have =
received
> this email in error please tell us immediately by return email and =
delete
> the document.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 17:32:45 2008
Return-Path: <java-user-return-33325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48893 invoked from network); 25 Mar 2008 17:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 17:32:45 -0000
Received: (qmail 2129 invoked by uid 500); 25 Mar 2008 17:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2096 invoked by uid 500); 25 Mar 2008 17:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2085 invoked by uid 99); 25 Mar 2008 17:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 10:32:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 17:31:58 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3091114fga.27
        for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 10:32:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=/+MrCUjE9DIXCQKQJkiIfCwjK/qR87VzMC9ik5erc/4=;
        b=mMoXh613Aw6seJBoODpJG770Q7QOfQDe3vREmce3omwD/a/aDRDXhS4bI4ZAa9QGk4GkV6t/uMDNwMJhAMrYHDbqiVhlrPQcYd/ulo+HcRXmVnoNtgaGjF/DGvq1qGu1HOcCOqF8atLFyiUStk1KQGb6nHuKXjxK85/5hRyNAzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=KQjSZcWwHTz/Q3ixABwfHKRPr3CizbJlWx9kpbYU7d1a6793t7FedYC6Aw7FxRVdv240jG8yjaeuBza1tFT3uHSOlYrGqCQqWvDXNXmu8ye6P5ao9w1IqQU3Gy1+MY4OrmdkFhZgcJShJ1rDQc7jNNAWjt0IrxXKfHvcuJbOk30=
Received: by 10.82.107.15 with SMTP id f15mr21603322buc.39.1206466325605;
        Tue, 25 Mar 2008 10:32:05 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Tue, 25 Mar 2008 10:32:05 -0700 (PDT)
Message-ID: <8837fb770803251032l297ca5b4u80fae729b2990324@mail.gmail.com>
Date: Tue, 25 Mar 2008 10:32:05 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: random accessing term value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21118_28173337.1206466325536"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21118_28173337.1206466325536
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

   Is there a way to random accessing term value in a field? e.g.

   in my field, content, the terms are: lucene, is, cool

   Is there a way to access content[2] -> cool?

Thanks

-John

------=_Part_21118_28173337.1206466325536--

From java-user-return-33326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 17:33:10 2008
Return-Path: <java-user-return-33326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49012 invoked from network); 25 Mar 2008 17:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 17:33:10 -0000
Received: (qmail 3774 invoked by uid 500); 25 Mar 2008 17:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3752 invoked by uid 500); 25 Mar 2008 17:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3741 invoked by uid 99); 25 Mar 2008 17:33:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 10:33:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 17:32:20 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m2PHWTk25949
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 10:32:30 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008032510322923656
 for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 10:32:29 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JeD0f-0003pU-00
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 10:32:29 -0700
Message-ID: <47E93728.2050800@ai.sri.com>
Date: Tue, 25 Mar 2008 10:32:24 -0700
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <D7206503EB5BE94497458AF4FE4AE8AB6EE2A1@owamz.healy-hudson.com> <47E3D350.8070200@sirma.bg> <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE821@owamz.healy-hudson.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Uwe,

I am curious what NGramStemFilter is? Is it a combination of porter 
stemming and word ngram identification?

Thanks!

Jay

Uwe Goetzke wrote:
> Hi Ivan,
> No, we do not use StandardAnalyser or StandardTokenizer.
> 
> Most data is processed by 
> 	fTextTokenStream = result = new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
> 	result = new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  modified that  -> oe
> 	result = new org.apache.lucene.analysis.LowerCaseFilter(result);
> 	result = new org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer
> 
> We use our own queryparser. The bigramms are searched with a tolerant phrase query, scoring in a doc the greatest bigramms clusters covering the phrase token. 
> 
> Best Regards
> 
> Uwe
> 
> -----Ursprngliche Nachricht-----
> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg] 
> Gesendet: Freitag, 21. Mrz 2008 16:25
> An: java-user@lucene.apache.org
> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
> 
> Hi Uwe,
> 
> Could you tell what Analyzer do you use when you marked so big indexing 
> speedup?
> If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
> reason is in it. You can see the pre last report in the thread "Indexing 
> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
> that now is generated by JFlex instead of JavaCC.
> I am asking because I noticed a great speedup in adding documents to 
> index in our system. We have time control on this in the debug mode. NOW 
> THEY ARE ADDED 5 TIMES FASTER!!!
> But in the same time the total process of indexing in our case has 
> improvement of about 8%. As our system is very big and complex I am 
> wondering if really the whole process of indexing is reduces so 
> remarkably and our system causes this slowdown or may be Lucene does 
> some optimizations on the index, merges or something else and this is 
> the reason the total process of indexing to be not so reasonably faster.
> 
> Best Regards,
> Ivan
> 
> 
> 
> Uwe Goetzke wrote:
>> This week I switched the lucene library version on one customer system.
>> The indexing speed went down from 46m32s to 16m20s for the complete task
>> including optimisation. Great Job!
>> We index product catalogs from several suppliers, in this case around
>> 56.000 product groups and 360.000 products including descriptions were
>> indexed.
>>
>> Regards
>>
>> Uwe
>>
>>
>>
>> -----------------------------------------------------------------------
>> Healy Hudson GmbH - D-55252 Mainz Kastel
>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>
>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> __________ NOD32 2913 (20080301) Information __________
>>
>> This message was checked by NOD32 antivirus system.
>> http://www.eset.com
>>
>>
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> -----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
> 
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfnger sind, drfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zurckschicken. Bitte lschen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 18:17:25 2008
Return-Path: <java-user-return-33327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71897 invoked from network); 25 Mar 2008 18:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 18:17:25 -0000
Received: (qmail 88530 invoked by uid 500); 25 Mar 2008 18:17:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88011 invoked by uid 500); 25 Mar 2008 18:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88000 invoked by uid 99); 25 Mar 2008 18:17:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 11:17:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 18:16:27 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 646C130EFC20; Tue, 25 Mar 2008 12:16:47 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-191-156.dyn.embarqhsd.net [69.68.191.156])
	by ehatchersolutions.com (Postfix) with ESMTP id C97E830EFC17
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 12:16:44 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8837fb770803251032l297ca5b4u80fae729b2990324@mail.gmail.com>
References: <8837fb770803251032l297ca5b4u80fae729b2990324@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <07445C02-005F-4DEE-A639-8E907411A2EE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: random accessing term value
Date: Tue, 25 Mar 2008 14:16:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Mar 25, 2008, at 1:32 PM, John Wang wrote:
>    Is there a way to random accessing term value in a field? e.g.
>
>    in my field, content, the terms are: lucene, is, cool
>
>    Is there a way to access content[2] -> cool?

Via term vectors, or reanalysis of the field are two that come to  
mind.  Maybe other ways?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 19:16:18 2008
Return-Path: <java-user-return-33328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99108 invoked from network); 25 Mar 2008 19:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 19:16:18 -0000
Received: (qmail 85842 invoked by uid 500); 25 Mar 2008 19:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85805 invoked by uid 500); 25 Mar 2008 19:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85770 invoked by uid 99); 25 Mar 2008 19:15:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 12:15:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 19:15:19 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2PJFTp4087288
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:15:29 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
Date: Tue, 25 Mar 2008 20:15:28 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
In-Reply-To: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803252015.28396.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Shailendra,

Have a look at the javadocs of HitCollector:
http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/search/HitCollector.html

The problem is with the use of the disk head, when retrieving
the documents during collecting, the disk head has to move
between the inverted index and the stored documents; see also
the file formats.

To avoid such excessive disk head movement, you need to collect
all (or at least many more than 1 of) your document ids during
collect(), for example into an int[].
After collecting retrieve the all the docs with Searcher.doc().

Also, for the same reason, retrieving docs is best done in doc id
order, but that is unlikely to go wrong as doc ids are normally
collected in increasing order.

Regards,
Paul Elschot


Op Tuesday 25 March 2008 13:43:18 schreef Shailendra Mudgal:
> Hi Everyone,
>
> We are using Lucene to search on a index of around 20G size with
> around 3 million documents. We are facing performance issues loading
> large results from the index. Based on the various posts on the forum
> and documentation, we have made the following code changes to improve
> the performance:
>
> i. Modified the code to use HitCollector instead of Hits since we
> will be loading all the documents in the index based on keyword
> matching ii. Added MapFieldSelector to load only selected fields(2
> fields only) instead of all the 14
>
> After all these changes, it seems to be  taking around 90 secs to
> load 17k documents. After profiling, we found that the max time is
> spent in * searcher.doc(id,selector).
>
> *Here is the code:
>
> *                public void collect(int id, float score) {
>                     try {
>                         MapFieldSelector selector = new
> MapFieldSelector(new String[] {COMPANY_ID, ID});
>                         doc = searcher.doc(id, selector);
>                         mappedCompanies = doc.getValues(COMPANY_ID);
>                     } catch (IOException e) {
>                         logger.debug("inside IDCollector.collect()
>
> :"+e.getMessage());
>
>                     }
>                 }*
>
> *
> *We also read in one of the posts that we should use bitSet.set(doc)
> instead of calling searcher.doc(id). But we are unable to to
> understand how this might help in our case since we will anyway have
> to load the document to get the other required field(company_id).
> Also we observed that the searcher is actually using only 1G RAM
> though we have 4G allocated to it.
>
> Can someone suggest if there is any other optimization that can done
> to improve the search performance on MultiSearcher. Any help would be
> appreciated.
>
> Thanks,
> Vipin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 19:33:04 2008
Return-Path: <java-user-return-33329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5656 invoked from network); 25 Mar 2008 19:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 19:33:04 -0000
Received: (qmail 8940 invoked by uid 500); 25 Mar 2008 19:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8903 invoked by uid 500); 25 Mar 2008 19:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8892 invoked by uid 99); 25 Mar 2008 19:32:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 12:32:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 19:32:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8174771C324; Tue, 25 Mar 2008 12:32:28 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7DADD71C032
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 12:32:28 -0700 (PDT)
Date: Tue, 25 Mar 2008 12:32:28 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
In-Reply-To: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: *We also read in one of the posts that we should use bitSet.set(doc)
: instead of calling searcher.doc(id). But we are unable to to understand how
: this might help in our case since we will anyway have to load the document
: to get the other required field(company_id). Also we observed that the
: searcher is actually using only 1G RAM though we have 4G allocated to it.

in addition to Paul's previous excellent suggestion, note that if:
  * companyId is a single value field (ie: no document has more then one)
  * companyId is indexed

you can use the FieldCache to lookup the compnayId for each doc.  on the 
aggregate this will most likely be much faster then accessing the stored 
fields.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 22:02:32 2008
Return-Path: <java-user-return-33330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90425 invoked from network); 25 Mar 2008 22:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 22:02:32 -0000
Received: (qmail 96375 invoked by uid 500); 25 Mar 2008 22:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96342 invoked by uid 500); 25 Mar 2008 22:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96331 invoked by uid 99); 25 Mar 2008 22:02:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 15:02:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Mar 2008 22:01:40 +0000
Received: (qmail 16919 invoked by uid 60001); 25 Mar 2008 22:01:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=iC8n19GUvx0NF+tDaRo22yoSaFI4OLRNt03+BfYilHjRCSyI/ROpug8dM/96rRl7OCMDqlved16ToVxs+wsfp2VZkD0sar8N4LhN6Xeh/v51+k9bX0amxW0D9eVrDmEL0/8zxMcatmnXqih9wy2oC7binTO9qnEJrbpeCAZgqFI=;
Received: from [71.249.227.161] by web50306.mail.re2.yahoo.com via HTTP; Tue, 25 Mar 2008 15:01:50 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Tue, 25 Mar 2008 15:01:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <923168.12354.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Jay,=0A=0AHave a look at Lucene config, it's all there, including tests.  T=
his filter will take a token such as "foobar" and chop it up into n-grams (=
e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can specify=
 the n-gram size and even min and max n-gram size.=0A=0AOtis=0A--=0ASematex=
t -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Mess=
age ----=0AFrom: Jay <yu@AI.SRI.COM>=0ATo: java-user@lucene.apache.org=0ASe=
nt: Tuesday, March 25, 2008 1:32:24 PM=0ASubject: Re: AW: feedback: Indexin=
g speed improvement lucene 2.2->2.3.1=0A=0AHi Uwe,=0A=0AI am curious what N=
GramStemFilter is? Is it a combination of porter =0Astemming and word ngram=
 identification?=0A=0AThanks!=0A=0AJay=0A=0AUwe Goetzke wrote:=0A> Hi Ivan,=
=0A> No, we do not use StandardAnalyser or StandardTokenizer.=0A> =0A> Most=
 data is processed by =0A>     fTextTokenStream =3D result =3D new org.apac=
he.lucene.analysis.WhitespaceTokenizer(reader);=0A>     result =3D new ISOL=
atin2AccentFilter(result); // ISOLatin1AccentFilter  modified that =F6 -> o=
e=0A>     result =3D new org.apache.lucene.analysis.LowerCaseFilter(result)=
;=0A>     result =3D new org.apache.lucene.analysis.NGramStemFilter(result,=
2); //just a bigram tokenizer=0A> =0A> We use our own queryparser. The bigr=
amms are searched with a tolerant phrase query, scoring in a doc the greate=
st bigramms clusters covering the phrase token. =0A> =0A> Best Regards=0A> =
=0A> Uwe=0A> =0A> -----Urspr=FCngliche Nachricht-----=0A> Von: Ivan Vasilev=
 [mailto:ivasilev@sirma.bg] =0A> Gesendet: Freitag, 21. M=E4rz 2008 16:25=
=0A> An: java-user@lucene.apache.org=0A> Betreff: Re: feedback: Indexing sp=
eed improvement lucene 2.2->2.3.1=0A> =0A> Hi Uwe,=0A> =0A> Could you tell =
what Analyzer do you use when you marked so big indexing =0A> speedup?=0A> =
If you use StandardAnalyzer (that uses StandardTokenizer) may be the =0A> r=
eason is in it. You can see the pre last report in the thread "Indexing =0A=
> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake =
=0A> Mannix this is because now StandardTokenizer uses StandardTokenizerImp=
l =0A> that now is generated by JFlex instead of JavaCC.=0A> I am asking be=
cause I noticed a great speedup in adding documents to =0A> index in our sy=
stem. We have time control on this in the debug mode. NOW =0A> THEY ARE ADD=
ED 5 TIMES FASTER!!!=0A> But in the same time the total process of indexing=
 in our case has =0A> improvement of about 8%. As our system is very big an=
d complex I am =0A> wondering if really the whole process of indexing is re=
duces so =0A> remarkably and our system causes this slowdown or may be Luce=
ne does =0A> some optimizations on the index, merges or something else and =
this is =0A> the reason the total process of indexing to be not so reasonab=
ly faster.=0A> =0A> Best Regards,=0A> Ivan=0A> =0A> =0A> =0A> Uwe Goetzke w=
rote:=0A>> This week I switched the lucene library version on one customer =
system.=0A>> The indexing speed went down from 46m32s to 16m20s for the com=
plete task=0A>> including optimisation. Great Job!=0A>> We index product ca=
talogs from several suppliers, in this case around=0A>> 56.000 product grou=
ps and 360.000 products including descriptions were=0A>> indexed.=0A>>=0A>>=
 Regards=0A>>=0A>> Uwe=0A>>=0A>>=0A>>=0A>> --------------------------------=
---------------------------------------=0A>> Healy Hudson GmbH - D-55252 Ma=
inz Kastel=0A>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden=
 HRB 12076=0A>>=0A>> Diese Email ist vertraulich. Wenn Sie nicht der beabsi=
chtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder=
 benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen S=
ie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruc=
kschicken. Bitte loschen Sie danach diese Email.=0A>> This email is confide=
ntial. If you are not the intended recipient, you must not disclose or use =
this information contained in it. If you have received this email in error =
please tell us immediately by return email and delete the document.=0A>>=0A=
>>=0A>> -------------------------------------------------------------------=
--=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
> For additional commands, e-mail: java-user-help@lucene.apache.org=0A>>=0A=
>>=0A>> __________ NOD32 2913 (20080301) Information __________=0A>>=0A>> T=
his message was checked by NOD32 antivirus system.=0A>> http://www.eset.com=
=0A>>=0A>>=0A>>=0A>>   =0A> =0A> =0A> -------------------------------------=
--------------------------------=0A> To unsubscribe, e-mail: java-user-unsu=
bscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-he=
lp@lucene.apache.org=0A> =0A> =0A> ----------------------------------------=
-------------------------------=0A> Healy Hudson GmbH - D-55252 Mainz Kaste=
l=0A> Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB=
 12076=0A> =0A> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtig=
te Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Si=
e uns dies bitte umgehend mit, indem Sie diese Email an den Absender zur=FC=
ckschicken. Bitte l=F6schen Sie danach diese Email.=0A> This email is confi=
dential. If you are not the intended recipient, you must not disclose or us=
e this information contained in it. If you have received this email in erro=
r please tell us immediately by return email and delete the document.=0A> =
=0A> =0A> -----------------------------------------------------------------=
----=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
> For additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 25 22:16:35 2008
Return-Path: <java-user-return-33331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97956 invoked from network); 25 Mar 2008 22:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Mar 2008 22:16:35 -0000
Received: (qmail 22213 invoked by uid 500); 25 Mar 2008 22:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22175 invoked by uid 500); 25 Mar 2008 22:16:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22164 invoked by uid 99); 25 Mar 2008 22:16:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 15:16:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 22:15:43 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m2PMFsk15908
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 15:15:55 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008032515155413836
 for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 15:15:54 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JeHQw-0006De-00
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 15:15:54 -0700
Message-ID: <47E9799A.30202@ai.sri.com>
Date: Tue, 25 Mar 2008 15:15:54 -0700
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <923168.12354.qm@web50306.mail.re2.yahoo.com>
In-Reply-To: <923168.12354.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I could not find the filter in the 2.3 API class list (core + 
contrib + test). I am not ware of lucene config file either. Could you 
please tell me where it is in 2.3 release?

Thanks!

Jay

Otis Gospodnetic wrote:
> Jay,
> 
> Have a look at Lucene config, it's all there, including tests.  This filter will take a token such as "foobar" and chop it up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can specify the n-gram size and even min and max n-gram size.
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> ----- Original Message ----
> From: Jay <yu@AI.SRI.COM>
> To: java-user@lucene.apache.org
> Sent: Tuesday, March 25, 2008 1:32:24 PM
> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
> 
> Hi Uwe,
> 
> I am curious what NGramStemFilter is? Is it a combination of porter 
> stemming and word ngram identification?
> 
> Thanks!
> 
> Jay
> 
> Uwe Goetzke wrote:
>> Hi Ivan,
>> No, we do not use StandardAnalyser or StandardTokenizer.
>>
>> Most data is processed by 
>>     fTextTokenStream = result = new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>     result = new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  modified that  -> oe
>>     result = new org.apache.lucene.analysis.LowerCaseFilter(result);
>>     result = new org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer
>>
>> We use our own queryparser. The bigramms are searched with a tolerant phrase query, scoring in a doc the greatest bigramms clusters covering the phrase token. 
>>
>> Best Regards
>>
>> Uwe
>>
>> -----Ursprngliche Nachricht-----
>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg] 
>> Gesendet: Freitag, 21. Mrz 2008 16:25
>> An: java-user@lucene.apache.org
>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>
>> Hi Uwe,
>>
>> Could you tell what Analyzer do you use when you marked so big indexing 
>> speedup?
>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
>> reason is in it. You can see the pre last report in the thread "Indexing 
>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
>> that now is generated by JFlex instead of JavaCC.
>> I am asking because I noticed a great speedup in adding documents to 
>> index in our system. We have time control on this in the debug mode. NOW 
>> THEY ARE ADDED 5 TIMES FASTER!!!
>> But in the same time the total process of indexing in our case has 
>> improvement of about 8%. As our system is very big and complex I am 
>> wondering if really the whole process of indexing is reduces so 
>> remarkably and our system causes this slowdown or may be Lucene does 
>> some optimizations on the index, merges or something else and this is 
>> the reason the total process of indexing to be not so reasonably faster.
>>
>> Best Regards,
>> Ivan
>>
>>
>>
>> Uwe Goetzke wrote:
>>> This week I switched the lucene library version on one customer system.
>>> The indexing speed went down from 46m32s to 16m20s for the complete task
>>> including optimisation. Great Job!
>>> We index product catalogs from several suppliers, in this case around
>>> 56.000 product groups and 360.000 products including descriptions were
>>> indexed.
>>>
>>> Regards
>>>
>>> Uwe
>>>
>>>
>>>
>>> -----------------------------------------------------------------------
>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>>
>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
>>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> __________ NOD32 2913 (20080301) Information __________
>>>
>>> This message was checked by NOD32 antivirus system.
>>> http://www.eset.com
>>>
>>>
>>>
>>>   
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> -----------------------------------------------------------------------
>> Healy Hudson GmbH - D-55252 Mainz Kastel
>> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
>>
>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfnger sind, drfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zurckschicken. Bitte lschen Sie danach diese Email.
>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 02:13:50 2008
Return-Path: <java-user-return-33332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75017 invoked from network); 26 Mar 2008 02:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 02:13:49 -0000
Received: (qmail 66499 invoked by uid 500); 26 Mar 2008 02:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66465 invoked by uid 500); 26 Mar 2008 02:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66454 invoked by uid 99); 26 Mar 2008 02:13:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 19:13:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 02:12:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id A09F03BA00
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 19:13:04 -0700 (PDT)
Message-Id: <B363BAEB-AFC6-4772-BE5A-CAF3E4DC8AD5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16275287.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: hitcollector topdocs
Date: Tue, 25 Mar 2008 22:13:05 -0400
References: <16275287.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jens,

I'm having a bit of a hard time following this, so perhaps you could  
rephrase, or show your sample code or explain a bit more about what  
you are trying to do at a higher level?

Cheers,
Grant

On Mar 25, 2008, at 10:46 AM, JensBurkhardt wrote:

>
> Hi everybody,
>
> I was searching for informations about the hitcollector. I was  
> wondering if
> the value of the fields have to be stored or not. i tested it and it  
> worked
> both but i'm still not really sure about it.
> Second question is,  can i work with tokenized fields?
>
> Best regards
>
> Jens
> -- 
> View this message in context: http://www.nabble.com/hitcollector-topdocs-tp16275287p16275287.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 02:24:28 2008
Return-Path: <java-user-return-33333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78745 invoked from network); 26 Mar 2008 02:24:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 02:24:27 -0000
Received: (qmail 73864 invoked by uid 500); 26 Mar 2008 02:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73833 invoked by uid 500); 26 Mar 2008 02:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73822 invoked by uid 99); 26 Mar 2008 02:24:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 19:24:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 02:23:30 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 365077FB3
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 19:23:50 -0700 (PDT)
Message-Id: <B0386820-B125-439C-B233-B4A5BEDB6C5A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16276999.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: explain() - fieldnorm
Date: Tue, 25 Mar 2008 22:23:49 -0400
References: <15717182.post@talk.nabble.com> <Pine.LNX.4.62.0803021435000.1796@radix.cryptio.net> <16276999.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 25, 2008, at 12:10 PM, JensBurkhardt wrote:
>
> As you can see, both are exactly the same. The thing i don't  
> understand is,
> that the two documents have different documentboosts (the first one  
> got an
> boost of 1.62 , the second of 1.65) - the boosts are different  
> because the
> two books got different publication years - but explain() tells me  
> that my
> fieldNorm value is 1.5.

Document boosts do not have much granularity due to the limited number  
of bits in the norm.  I seem to recall Yonik publishing a list of  
values at one time on the mailing list, but I can't for the life of me  
conjure the keywords to find it at the moment, as it was one a related  
topic.  Perhaps his memory is better than mine...

HTH,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 02:55:52 2008
Return-Path: <java-user-return-33334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87009 invoked from network); 26 Mar 2008 02:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 02:55:52 -0000
Received: (qmail 2740 invoked by uid 500); 26 Mar 2008 02:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2711 invoked by uid 500); 26 Mar 2008 02:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2699 invoked by uid 99); 26 Mar 2008 02:55:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 19:55:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Mar 2008 02:55:00 +0000
Received: (qmail 58030 invoked by uid 60001); 26 Mar 2008 02:55:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=euGzfs4hrG0J14eqaMHNu8hOe/u/mi8FwYfzmcUsoTScAUXsk77kf6zEj0aZuASq11f5NaBdOFd+ECcEw+6xKPVdHhHEP+HjQ/2VoGHnXV3uA9KUmQWhocotU7WqDnrSMG9SlZYiUY6Y3WGzsFqTawGlJlh1SUTwiUKVPOvGYOY=;
X-YMail-OSG: xJjP0coVM1lUeF0UGbc8BRLXVXoRuea60Bb8afOsY3r92J587C66MFiDa1FVt4ORdEArT0wFFhu6jCzoDp9aFWo8tsv30L9bwFxuyUzh2lmoim2rRVfpPKZwTXso9mCF7eeV2IpHiX4fbA--
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Tue, 25 Mar 2008 19:55:10 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Tue, 25 Mar 2008 19:55:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <815278.57184.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jay,=0A=0ASorry, lapsus calami, that would be Lucene *contrib*.=0AHave a=
 look:=0Ahttp://lucene.apache.org/java/2_3_1/api/contrib-analyzers/index.ht=
ml=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -- Lucene - Solr - Nut=
ch=0A=0A----- Original Message ----=0AFrom: Jay <yu@AI.SRI.COM>=0ATo: java-=
user@lucene.apache.org=0ASent: Tuesday, March 25, 2008 6:15:54 PM=0ASubject=
: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1=0A=0ASorry=
, I could not find the filter in the 2.3 API class list (core + =0Acontrib =
+ test). I am not ware of lucene config file either. Could you =0Aplease te=
ll me where it is in 2.3 release?=0A=0AThanks!=0A=0AJay=0A=0AOtis Gospodnet=
ic wrote:=0A> Jay,=0A> =0A> Have a look at Lucene config, it's all there, i=
ncluding tests.  This filter will take a token such as "foobar" and chop it=
 up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set of bi-grams)=
.  You can specify the n-gram size and even min and max n-gram size.=0A> =
=0A> Otis=0A> --=0A> Sematext -- http://sematext.com/ -- Lucene - Solr - Nu=
tch=0A> =0A> ----- Original Message ----=0A> From: Jay <yu@AI.SRI.COM>=0A> =
To: java-user@lucene.apache.org=0A> Sent: Tuesday, March 25, 2008 1:32:24 P=
M=0A> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3=
.1=0A> =0A> Hi Uwe,=0A> =0A> I am curious what NGramStemFilter is? Is it a =
combination of porter =0A> stemming and word ngram identification?=0A> =0A>=
 Thanks!=0A> =0A> Jay=0A> =0A> Uwe Goetzke wrote:=0A>> Hi Ivan,=0A>> No, we=
 do not use StandardAnalyser or StandardTokenizer.=0A>>=0A>> Most data is p=
rocessed by =0A>>     fTextTokenStream =3D result =3D new org.apache.lucene=
.analysis.WhitespaceTokenizer(reader);=0A>>     result =3D new ISOLatin2Acc=
entFilter(result); // ISOLatin1AccentFilter  modified that =F6 -> oe=0A>>  =
   result =3D new org.apache.lucene.analysis.LowerCaseFilter(result);=0A>> =
    result =3D new org.apache.lucene.analysis.NGramStemFilter(result,2); //=
just a bigram tokenizer=0A>>=0A>> We use our own queryparser. The bigramms =
are searched with a tolerant phrase query, scoring in a doc the greatest bi=
gramms clusters covering the phrase token. =0A>>=0A>> Best Regards=0A>>=0A>=
> Uwe=0A>>=0A>> -----Urspr=FCngliche Nachricht-----=0A>> Von: Ivan Vasilev =
[mailto:ivasilev@sirma.bg] =0A>> Gesendet: Freitag, 21. M=E4rz 2008 16:25=
=0A>> An: java-user@lucene.apache.org=0A>> Betreff: Re: feedback: Indexing =
speed improvement lucene 2.2->2.3.1=0A>>=0A>> Hi Uwe,=0A>>=0A>> Could you t=
ell what Analyzer do you use when you marked so big indexing =0A>> speedup?=
=0A>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the =
=0A>> reason is in it. You can see the pre last report in the thread "Index=
ing =0A>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporte=
r Jake =0A>> Mannix this is because now StandardTokenizer uses StandardToke=
nizerImpl =0A>> that now is generated by JFlex instead of JavaCC.=0A>> I am=
 asking because I noticed a great speedup in adding documents to =0A>> inde=
x in our system. We have time control on this in the debug mode. NOW =0A>> =
THEY ARE ADDED 5 TIMES FASTER!!!=0A>> But in the same time the total proces=
s of indexing in our case has =0A>> improvement of about 8%. As our system =
is very big and complex I am =0A>> wondering if really the whole process of=
 indexing is reduces so =0A>> remarkably and our system causes this slowdow=
n or may be Lucene does =0A>> some optimizations on the index, merges or so=
mething else and this is =0A>> the reason the total process of indexing to =
be not so reasonably faster.=0A>>=0A>> Best Regards,=0A>> Ivan=0A>>=0A>>=0A=
>>=0A>> Uwe Goetzke wrote:=0A>>> This week I switched the lucene library ve=
rsion on one customer system.=0A>>> The indexing speed went down from 46m32=
s to 16m20s for the complete task=0A>>> including optimisation. Great Job!=
=0A>>> We index product catalogs from several suppliers, in this case aroun=
d=0A>>> 56.000 product groups and 360.000 products including descriptions w=
ere=0A>>> indexed.=0A>>>=0A>>> Regards=0A>>>=0A>>> Uwe=0A>>>=0A>>>=0A>>>=0A=
>>> -----------------------------------------------------------------------=
=0A>>> Healy Hudson GmbH - D-55252 Mainz Kastel=0A>>> Geschaftsfuhrer Chris=
tian Konhauser - Amtsgericht Wiesbaden HRB 12076=0A>>>=0A>>> Diese Email is=
t vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie =
die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email dur=
ch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, ind=
em Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach=
 diese Email.=0A>>> This email is confidential. If you are not the intended=
 recipient, you must not disclose or use this information contained in it. =
If you have received this email in error please tell us immediately by retu=
rn email and delete the document.=0A>>>=0A>>>=0A>>> -----------------------=
----------------------------------------------=0A>>> To unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0A>>> For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A>>>=0A>>>=0A>>> __________ NOD32 2=
913 (20080301) Information __________=0A>>>=0A>>> This message was checked =
by NOD32 antivirus system.=0A>>> http://www.eset.com=0A>>>=0A>>>=0A>>>=0A>>=
>   =0A>>=0A>> ------------------------------------------------------------=
---------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org=0A>> For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A>>=0A>>=0A>> -----------------------------------------------------------=
------------=0A>> Healy Hudson GmbH - D-55252 Mainz Kastel=0A>> Gesch=E4fts=
f=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB 12076=0A>>=0A>> =
Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empf=E4nger s=
ind, d=FCrfen Sie die Informationen nicht offen legen oder benutzen. Wenn S=
ie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte=
 umgehend mit, indem Sie diese Email an den Absender zur=FCckschicken. Bitt=
e l=F6schen Sie danach diese Email.=0A>> This email is confidential. If you=
 are not the intended recipient, you must not disclose or use this informat=
ion contained in it. If you have received this email in error please tell u=
s immediately by return email and delete the document.=0A>>=0A>>=0A>> -----=
----------------------------------------------------------------=0A>> To un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>> For additio=
nal commands, e-mail: java-user-help@lucene.apache.org=0A>>=0A> =0A> ------=
---------------------------------------------------------------=0A> To unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =0A> =0A>=
 =0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A=0A-=
--------------------------------------------------------------------=0ATo u=
nsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 03:04:54 2008
Return-Path: <java-user-return-33335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91954 invoked from network); 26 Mar 2008 03:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 03:04:54 -0000
Received: (qmail 20032 invoked by uid 500); 26 Mar 2008 03:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20013 invoked by uid 500); 26 Mar 2008 03:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20002 invoked by uid 99); 26 Mar 2008 03:04:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 20:04:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:03:52 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m2Q34Bk24901
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:04:11 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008032520041110371
 for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:04:11 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.147] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JeLvu-0008MG-00
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:04:10 -0700
Message-ID: <47E9CB51.5050102@ai.sri.com>
Date: Tue, 25 Mar 2008 20:04:33 -0800
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <815278.57184.qm@web50303.mail.re2.yahoo.com>
In-Reply-To: <815278.57184.qm@web50303.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,
I checked that contrib before and could not find NgramStemFilter. Am I 
missing other contrib?
Thanks for the link!

Jay

Otis Gospodnetic wrote:
> Hi Jay,
>
> Sorry, lapsus calami, that would be Lucene *contrib*.
> Have a look:
> http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/index.html
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Jay <yu@AI.SRI.COM>
> To: java-user@lucene.apache.org
> Sent: Tuesday, March 25, 2008 6:15:54 PM
> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>
> Sorry, I could not find the filter in the 2.3 API class list (core + 
> contrib + test). I am not ware of lucene config file either. Could you 
> please tell me where it is in 2.3 release?
>
> Thanks!
>
> Jay
>
> Otis Gospodnetic wrote:
>   
>> Jay,
>>
>> Have a look at Lucene config, it's all there, including tests.  This filter will take a token such as "foobar" and chop it up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can specify the n-gram size and even min and max n-gram size.
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: Jay <yu@AI.SRI.COM>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, March 25, 2008 1:32:24 PM
>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>
>> Hi Uwe,
>>
>> I am curious what NGramStemFilter is? Is it a combination of porter 
>> stemming and word ngram identification?
>>
>> Thanks!
>>
>> Jay
>>
>> Uwe Goetzke wrote:
>>     
>>> Hi Ivan,
>>> No, we do not use StandardAnalyser or StandardTokenizer.
>>>
>>> Most data is processed by 
>>>     fTextTokenStream = result = new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>>     result = new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  modified that  -> oe
>>>     result = new org.apache.lucene.analysis.LowerCaseFilter(result);
>>>     result = new org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer
>>>
>>> We use our own queryparser. The bigramms are searched with a tolerant phrase query, scoring in a doc the greatest bigramms clusters covering the phrase token. 
>>>
>>> Best Regards
>>>
>>> Uwe
>>>
>>> -----Ursprngliche Nachricht-----
>>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg] 
>>> Gesendet: Freitag, 21. Mrz 2008 16:25
>>> An: java-user@lucene.apache.org
>>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>
>>> Hi Uwe,
>>>
>>> Could you tell what Analyzer do you use when you marked so big indexing 
>>> speedup?
>>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
>>> reason is in it. You can see the pre last report in the thread "Indexing 
>>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
>>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
>>> that now is generated by JFlex instead of JavaCC.
>>> I am asking because I noticed a great speedup in adding documents to 
>>> index in our system. We have time control on this in the debug mode. NOW 
>>> THEY ARE ADDED 5 TIMES FASTER!!!
>>> But in the same time the total process of indexing in our case has 
>>> improvement of about 8%. As our system is very big and complex I am 
>>> wondering if really the whole process of indexing is reduces so 
>>> remarkably and our system causes this slowdown or may be Lucene does 
>>> some optimizations on the index, merges or something else and this is 
>>> the reason the total process of indexing to be not so reasonably faster.
>>>
>>> Best Regards,
>>> Ivan
>>>
>>>
>>>
>>> Uwe Goetzke wrote:
>>>       
>>>> This week I switched the lucene library version on one customer system.
>>>> The indexing speed went down from 46m32s to 16m20s for the complete task
>>>> including optimisation. Great Job!
>>>> We index product catalogs from several suppliers, in this case around
>>>> 56.000 product groups and 360.000 products including descriptions were
>>>> indexed.
>>>>
>>>> Regards
>>>>
>>>> Uwe
>>>>
>>>>
>>>>
>>>> -----------------------------------------------------------------------
>>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>>>
>>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
>>>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> __________ NOD32 2913 (20080301) Information __________
>>>>
>>>> This message was checked by NOD32 antivirus system.
>>>> http://www.eset.com
>>>>
>>>>
>>>>
>>>>   
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> -----------------------------------------------------------------------
>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
>>>
>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfnger sind, drfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zurckschicken. Bitte lschen Sie danach diese Email.
>>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 03:13:45 2008
Return-Path: <java-user-return-33336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95607 invoked from network); 26 Mar 2008 03:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 03:13:45 -0000
Received: (qmail 27602 invoked by uid 500); 26 Mar 2008 03:13:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27574 invoked by uid 500); 26 Mar 2008 03:13:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27563 invoked by uid 99); 26 Mar 2008 03:13:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 20:13:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Mar 2008 03:12:45 +0000
Received: (qmail 18956 invoked by uid 60001); 26 Mar 2008 03:13:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=nTKi0PeIs/ltBEizy+7geJBVh0V2o3M0daPdlhu8b+z7a9AAtzyH0H9ksOytCFP9iXHeAxmxI1Po+gYmKtXJhoRvog3yY4/8/T5EilQJzONq2Cw7txD8bnOJQgis8t/z7u+EIeSumLOFLFerx66WIh8DcvKmr41Wtdic4mjP41Y=;
X-YMail-OSG: IGgK5rUVM1k9odhzHOuQQXXiahI811r7ruaBNLrGIEZz4pMJtMHZswwVaqTiVsDFA18Edp9OGRBeygE38TZMre6XRDodm8RcKR7ZKbmq0mWpoCnNm98YifZC5pctcIgK0eyU_Y.vIxih2g--
Received: from [72.231.9.236] by web50305.mail.re2.yahoo.com via HTTP; Tue, 25 Mar 2008 20:13:04 PDT
X-Mailer: YahooMailRC/902.40 YahooMailWebService/0.7.185
Date: Tue, 25 Mar 2008 20:13:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <972815.18435.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I wrote this stuff, but forgot the naming.=0ALook: http://lucene.apa=
che.org/java/2_3_1/api/contrib-analyzers/org/apache/lucene/analysis/ngram/p=
ackage-summary.html=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -- Lu=
cene - Solr - Nutch=0A=0A----- Original Message ----=0AFrom: yu <yu@AI.SRI.=
COM>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, March 26, 2008 12=
:04:33 AM=0ASubject: Re: AW: feedback: Indexing speed improvement lucene 2.=
2->2.3.1=0A=0AHi Otis,=0AI checked that contrib before and could not find N=
gramStemFilter. Am I =0Amissing other contrib?=0AThanks for the link!=0A=0A=
Jay=0A=0AOtis Gospodnetic wrote:=0A> Hi Jay,=0A>=0A> Sorry, lapsus calami, =
that would be Lucene *contrib*.=0A> Have a look:=0A> http://lucene.apache.o=
rg/java/2_3_1/api/contrib-analyzers/index.html=0A>=0A> Otis=0A> --=0A> Sema=
text -- http://sematext.com/ -- Lucene - Solr - Nutch=0A>=0A> ----- Origina=
l Message ----=0A> From: Jay <yu@AI.SRI.COM>=0A> To: java-user@lucene.apach=
e.org=0A> Sent: Tuesday, March 25, 2008 6:15:54 PM=0A> Subject: Re: AW: fee=
dback: Indexing speed improvement lucene 2.2->2.3.1=0A>=0A> Sorry, I could =
not find the filter in the 2.3 API class list (core + =0A> contrib + test).=
 I am not ware of lucene config file either. Could you =0A> please tell me =
where it is in 2.3 release?=0A>=0A> Thanks!=0A>=0A> Jay=0A>=0A> Otis Gospod=
netic wrote:=0A>   =0A>> Jay,=0A>>=0A>> Have a look at Lucene config, it's =
all there, including tests.  This filter will take a token such as "foobar"=
 and chop it up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set =
of bi-grams).  You can specify the n-gram size and even min and max n-gram =
size.=0A>>=0A>> Otis=0A>> --=0A>> Sematext -- http://sematext.com/ -- Lucen=
e - Solr - Nutch=0A>>=0A>> ----- Original Message ----=0A>> From: Jay <yu@A=
I.SRI.COM>=0A>> To: java-user@lucene.apache.org=0A>> Sent: Tuesday, March 2=
5, 2008 1:32:24 PM=0A>> Subject: Re: AW: feedback: Indexing speed improveme=
nt lucene 2.2->2.3.1=0A>>=0A>> Hi Uwe,=0A>>=0A>> I am curious what NGramSte=
mFilter is? Is it a combination of porter =0A>> stemming and word ngram ide=
ntification?=0A>>=0A>> Thanks!=0A>>=0A>> Jay=0A>>=0A>> Uwe Goetzke wrote:=
=0A>>     =0A>>> Hi Ivan,=0A>>> No, we do not use StandardAnalyser or Stand=
ardTokenizer.=0A>>>=0A>>> Most data is processed by =0A>>>     fTextTokenSt=
ream =3D result =3D new org.apache.lucene.analysis.WhitespaceTokenizer(read=
er);=0A>>>     result =3D new ISOLatin2AccentFilter(result); // ISOLatin1Ac=
centFilter  modified that =F6 -> oe=0A>>>     result =3D new org.apache.luc=
ene.analysis.LowerCaseFilter(result);=0A>>>     result =3D new org.apache.l=
ucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer=0A>>>=
=0A>>> We use our own queryparser. The bigramms are searched with a toleran=
t phrase query, scoring in a doc the greatest bigramms clusters covering th=
e phrase token. =0A>>>=0A>>> Best Regards=0A>>>=0A>>> Uwe=0A>>>=0A>>> -----=
Urspr=FCngliche Nachricht-----=0A>>> Von: Ivan Vasilev [mailto:ivasilev@sir=
ma.bg] =0A>>> Gesendet: Freitag, 21. M=E4rz 2008 16:25=0A>>> An: java-user@=
lucene.apache.org=0A>>> Betreff: Re: feedback: Indexing speed improvement l=
ucene 2.2->2.3.1=0A>>>=0A>>> Hi Uwe,=0A>>>=0A>>> Could you tell what Analyz=
er do you use when you marked so big indexing =0A>>> speedup?=0A>>> If you =
use StandardAnalyzer (that uses StandardTokenizer) may be the =0A>>> reason=
 is in it. You can see the pre last report in the thread "Indexing =0A>>> S=
peed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake =0A>=
>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl =
=0A>>> that now is generated by JFlex instead of JavaCC.=0A>>> I am asking =
because I noticed a great speedup in adding documents to =0A>>> index in ou=
r system. We have time control on this in the debug mode. NOW =0A>>> THEY A=
RE ADDED 5 TIMES FASTER!!!=0A>>> But in the same time the total process of =
indexing in our case has =0A>>> improvement of about 8%. As our system is v=
ery big and complex I am =0A>>> wondering if really the whole process of in=
dexing is reduces so =0A>>> remarkably and our system causes this slowdown =
or may be Lucene does =0A>>> some optimizations on the index, merges or som=
ething else and this is =0A>>> the reason the total process of indexing to =
be not so reasonably faster.=0A>>>=0A>>> Best Regards,=0A>>> Ivan=0A>>>=0A>=
>>=0A>>>=0A>>> Uwe Goetzke wrote:=0A>>>       =0A>>>> This week I switched =
the lucene library version on one customer system.=0A>>>> The indexing spee=
d went down from 46m32s to 16m20s for the complete task=0A>>>> including op=
timisation. Great Job!=0A>>>> We index product catalogs from several suppli=
ers, in this case around=0A>>>> 56.000 product groups and 360.000 products =
including descriptions were=0A>>>> indexed.=0A>>>>=0A>>>> Regards=0A>>>>=0A=
>>>> Uwe=0A>>>>=0A>>>>=0A>>>>=0A>>>> --------------------------------------=
---------------------------------=0A>>>> Healy Hudson GmbH - D-55252 Mainz =
Kastel=0A>>>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden H=
RB 12076=0A>>>>=0A>>>> Diese Email ist vertraulich. Wenn Sie nicht der beab=
sichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen od=
er benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen=
 Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zur=
uckschicken. Bitte loschen Sie danach diese Email.=0A>>>> This email is con=
fidential. If you are not the intended recipient, you must not disclose or =
use this information contained in it. If you have received this email in er=
ror please tell us immediately by return email and delete the document.=0A>=
>>>=0A>>>>=0A>>>> ---------------------------------------------------------=
------------=0A>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.ap=
ache.org=0A>>>> For additional commands, e-mail: java-user-help@lucene.apac=
he.org=0A>>>>=0A>>>>=0A>>>> __________ NOD32 2913 (20080301) Information __=
________=0A>>>>=0A>>>> This message was checked by NOD32 antivirus system.=
=0A>>>> http://www.eset.com=0A>>>>=0A>>>>=0A>>>>=0A>>>>   =0A>>>>         =
=0A>>> --------------------------------------------------------------------=
-=0A>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
>> For additional commands, e-mail: java-user-help@lucene.apache.org=0A>>>=
=0A>>>=0A>>> --------------------------------------------------------------=
---------=0A>>> Healy Hudson GmbH - D-55252 Mainz Kastel=0A>>> Gesch=E4ftsf=
=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB 12076=0A>>>=0A>>>=
 Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empf=E4nger =
sind, d=FCrfen Sie die Informationen nicht offen legen oder benutzen. Wenn =
Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitt=
e umgehend mit, indem Sie diese Email an den Absender zur=FCckschicken. Bit=
te l=F6schen Sie danach diese Email.=0A>>> This email is confidential. If y=
ou are not the intended recipient, you must not disclose or use this inform=
ation contained in it. If you have received this email in error please tell=
 us immediately by return email and delete the document.=0A>>>=0A>>>=0A>>> =
---------------------------------------------------------------------=0A>>>=
 To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>>> For =
additional commands, e-mail: java-user-help@lucene.apache.org=0A>>>=0A>>>  =
     =0A>> ----------------------------------------------------------------=
-----=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A>> For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=
>=0A>>=0A>>=0A>>=0A>>=0A>> ------------------------------------------------=
---------------------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0A>> For additional commands, e-mail: java-user-help@lucene=
.apache.org=0A>>=0A>>     =0A>=0A> ----------------------------------------=
-----------------------------=0A> To unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@=
lucene.apache.org=0A>=0A>=0A>=0A>=0A>=0A> ---------------------------------=
------------------------------------=0A> To unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-use=
r-help@lucene.apache.org=0A>=0A>   =0A=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 03:25:56 2008
Return-Path: <java-user-return-33337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99802 invoked from network); 26 Mar 2008 03:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 03:25:56 -0000
Received: (qmail 35628 invoked by uid 500); 26 Mar 2008 03:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35586 invoked by uid 500); 26 Mar 2008 03:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35575 invoked by uid 99); 26 Mar 2008 03:25:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 20:25:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:24:56 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m2Q3PFk00558
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:25:15 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008032520251512004
 for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:25:15 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.147] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JeMGJ-0008Pc-00
	for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:25:15 -0700
Message-ID: <47E9D046.9090405@ai.sri.com>
Date: Tue, 25 Mar 2008 20:25:42 -0800
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <972815.18435.qm@web50305.mail.re2.yahoo.com>
In-Reply-To: <972815.18435.qm@web50305.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for my ignorance, I am looking for

NgramStemFilter specifically.
Are you suggesting that it's the same as NGramTokenFilter? Does it have stemming in it?

Thanks again.

Jay


Otis Gospodnetic wrote:
> Sorry, I wrote this stuff, but forgot the naming.
> Look: http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/org/apache/lucene/analysis/ngram/package-summary.html
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: yu <yu@AI.SRI.COM>
> To: java-user@lucene.apache.org
> Sent: Wednesday, March 26, 2008 12:04:33 AM
> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>
> Hi Otis,
> I checked that contrib before and could not find NgramStemFilter. Am I 
> missing other contrib?
> Thanks for the link!
>
> Jay
>
> Otis Gospodnetic wrote:
>   
>> Hi Jay,
>>
>> Sorry, lapsus calami, that would be Lucene *contrib*.
>> Have a look:
>> http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/index.html
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: Jay <yu@AI.SRI.COM>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, March 25, 2008 6:15:54 PM
>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>
>> Sorry, I could not find the filter in the 2.3 API class list (core + 
>> contrib + test). I am not ware of lucene config file either. Could you 
>> please tell me where it is in 2.3 release?
>>
>> Thanks!
>>
>> Jay
>>
>> Otis Gospodnetic wrote:
>>   
>>     
>>> Jay,
>>>
>>> Have a look at Lucene config, it's all there, including tests.  This filter will take a token such as "foobar" and chop it up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can specify the n-gram size and even min and max n-gram size.
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>> ----- Original Message ----
>>> From: Jay <yu@AI.SRI.COM>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, March 25, 2008 1:32:24 PM
>>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>
>>> Hi Uwe,
>>>
>>> I am curious what NGramStemFilter is? Is it a combination of porter 
>>> stemming and word ngram identification?
>>>
>>> Thanks!
>>>
>>> Jay
>>>
>>> Uwe Goetzke wrote:
>>>     
>>>       
>>>> Hi Ivan,
>>>> No, we do not use StandardAnalyser or StandardTokenizer.
>>>>
>>>> Most data is processed by 
>>>>     fTextTokenStream = result = new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>>>     result = new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  modified that  -> oe
>>>>     result = new org.apache.lucene.analysis.LowerCaseFilter(result);
>>>>     result = new org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer
>>>>
>>>> We use our own queryparser. The bigramms are searched with a tolerant phrase query, scoring in a doc the greatest bigramms clusters covering the phrase token. 
>>>>
>>>> Best Regards
>>>>
>>>> Uwe
>>>>
>>>> -----Ursprngliche Nachricht-----
>>>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg] 
>>>> Gesendet: Freitag, 21. Mrz 2008 16:25
>>>> An: java-user@lucene.apache.org
>>>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>>
>>>> Hi Uwe,
>>>>
>>>> Could you tell what Analyzer do you use when you marked so big indexing 
>>>> speedup?
>>>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
>>>> reason is in it. You can see the pre last report in the thread "Indexing 
>>>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
>>>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
>>>> that now is generated by JFlex instead of JavaCC.
>>>> I am asking because I noticed a great speedup in adding documents to 
>>>> index in our system. We have time control on this in the debug mode. NOW 
>>>> THEY ARE ADDED 5 TIMES FASTER!!!
>>>> But in the same time the total process of indexing in our case has 
>>>> improvement of about 8%. As our system is very big and complex I am 
>>>> wondering if really the whole process of indexing is reduces so 
>>>> remarkably and our system causes this slowdown or may be Lucene does 
>>>> some optimizations on the index, merges or something else and this is 
>>>> the reason the total process of indexing to be not so reasonably faster.
>>>>
>>>> Best Regards,
>>>> Ivan
>>>>
>>>>
>>>>
>>>> Uwe Goetzke wrote:
>>>>       
>>>>         
>>>>> This week I switched the lucene library version on one customer system.
>>>>> The indexing speed went down from 46m32s to 16m20s for the complete task
>>>>> including optimisation. Great Job!
>>>>> We index product catalogs from several suppliers, in this case around
>>>>> 56.000 product groups and 360.000 products including descriptions were
>>>>> indexed.
>>>>>
>>>>> Regards
>>>>>
>>>>> Uwe
>>>>>
>>>>>
>>>>>
>>>>> -----------------------------------------------------------------------
>>>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>>>> Geschaftsfuhrer Christian Konhauser - Amtsgericht Wiesbaden HRB 12076
>>>>>
>>>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfanger sind, durfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zuruckschicken. Bitte loschen Sie danach diese Email.
>>>>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> __________ NOD32 2913 (20080301) Information __________
>>>>>
>>>>> This message was checked by NOD32 antivirus system.
>>>>> http://www.eset.com
>>>>>
>>>>>
>>>>>
>>>>>   
>>>>>         
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> -----------------------------------------------------------------------
>>>> Healy Hudson GmbH - D-55252 Mainz Kastel
>>>> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
>>>>
>>>> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfnger sind, drfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zurckschicken. Bitte lschen Sie danach diese Email.
>>>> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>       
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>     
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 03:59:46 2008
Return-Path: <java-user-return-33338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9599 invoked from network); 26 Mar 2008 03:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 03:59:46 -0000
Received: (qmail 70837 invoked by uid 500); 26 Mar 2008 03:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70795 invoked by uid 500); 26 Mar 2008 03:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70784 invoked by uid 99); 26 Mar 2008 03:59:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Mar 2008 20:59:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:58:59 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2168321hub.15
        for <java-user@lucene.apache.org>; Tue, 25 Mar 2008 20:59:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uAuAXGb/Bk0d0OpNU7gIT5E82LkUDK3XveiXZbbHgw8=;
        b=qrUBnBW/9iga5Shy8O/6OgJfDfVAhVLrDlD9xFnz6kMjXHXm2iRE5/MPC79vYWkwazdSVKlBfxkYxiAb0wN7SOI29U3AzJi2sm4DUVsK+7iKrTs6UxN3QrAUjVCehxmPL+NWVrDQpZpUCcqAhS1XksYZ6Ik8sHndPk6WJxP4n6M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a7vQ2P/MwV/u5k+cp42dAiuuZmcee/N2kxMpxQ4WGSL6zmbLwVYt+hh99XxD4pTjak7Ck1CeDnx2se4RemSXzc4BoOGpJYFHs+ehjlKYSli8qC/sE67dKalnFRiQc6ibFI7JFzAZAElCo+PYQqVhqSBcaRwIaqJ+Z/MbDodbPpQ=
Received: by 10.86.100.7 with SMTP id x7mr6043499fgb.41.1206503949495;
        Tue, 25 Mar 2008 20:59:09 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Tue, 25 Mar 2008 20:59:09 -0700 (PDT)
Message-ID: <8837fb770803252059l46a9137dhe9669bf84f25068f@mail.gmail.com>
Date: Tue, 25 Mar 2008 20:59:09 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: random accessing term value
In-Reply-To: <07445C02-005F-4DEE-A639-8E907411A2EE@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2077_8759827.1206503949493"
References: <8837fb770803251032l297ca5b4u80fae729b2990324@mail.gmail.com>
	 <07445C02-005F-4DEE-A639-8E907411A2EE@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2077_8759827.1206503949493
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am not sure how term vectors would help me. Term vectors are ordered by
frequency, not in lex order. Since I know in the dictionary the terms are
ordered by lex, seems it is possible for me to randomly get the nth term in
the dictionary without having to seek to it.

Thoughts?

Thanks

-John

On Tue, Mar 25, 2008 at 11:16 AM, Erik Hatcher <erik@ehatchersolutions.com>
wrote:

>
> On Mar 25, 2008, at 1:32 PM, John Wang wrote:
> >    Is there a way to random accessing term value in a field? e.g.
> >
> >    in my field, content, the terms are: lucene, is, cool
> >
> >    Is there a way to access content[2] -> cool?
>
> Via term vectors, or reanalysis of the field are two that come to
> mind.  Maybe other ways?
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2077_8759827.1206503949493--

From java-user-return-33339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 08:34:40 2008
Return-Path: <java-user-return-33339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28903 invoked from network); 26 Mar 2008 08:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 08:34:40 -0000
Received: (qmail 96804 invoked by uid 500); 26 Mar 2008 08:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96778 invoked by uid 500); 26 Mar 2008 08:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96767 invoked by uid 99); 26 Mar 2008 08:34:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 01:34:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.238 as permitted sender)
Received: from [72.14.214.238] (HELO hu-out-0506.google.com) (72.14.214.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 08:33:51 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2204134hub.15
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 01:34:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=nj4e2Qb+UaHFEv5E6B0xdv0EtbHhkGsploOkTCopLpU=;
        b=HtbgOfwYeACwY7fLwfDD0qWasmwEm2fFeVIZNEJQoDkY2bkbJnulsDx1pxnzq753c2WBSF/aHeBoN8HtOsg767jiWfgigWf6KwOk8HEbbplTyfeiitAZufPCaXva8wzzyDemSHMfCRdLZHfCqYDEb0UQ/kDm2G1QFIzMyzoCd/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K8VvlglJsY1pRl1KnzMC4XGi9iY46heCndUBwDckcgT4ECtV9uv1BHu1uHCCtakVLHC0H/iZra/XoGpi/XoVjh92RxSrOz1z/wqHjmFEyX2DHBoTR5dZZompH7yD6mhkyMfH9UOgfPMZ/JPmoPUTQe6QvqtRBRTGEvNU9hYxoLo=
Received: by 10.86.53.8 with SMTP id b8mr6225429fga.32.1206520441603;
        Wed, 26 Mar 2008 01:34:01 -0700 (PDT)
Received: by 10.86.73.2 with HTTP; Wed, 26 Mar 2008 01:34:01 -0700 (PDT)
Message-ID: <8837fb770803260134l358f1a15p754ad0f5c7306aa5@mail.gmail.com>
Date: Wed, 26 Mar 2008 01:34:01 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is it possible to change the way score from different field combine to give final lucene score
In-Reply-To: <254F594E-C77D-4BFB-9229-01D1A4E41E62@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2775_3172884.1206520441593"
References: <006101c88d78$01e388e0$9b21fea9@NizamulHlaptop>
	 <254F594E-C77D-4BFB-9229-01D1A4E41E62@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2775_3172884.1206520441593
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

HI Grant:

     I don't see FunctionQuery in the javadocs. Can you post a link?

Thanks

-john

On Mon, Mar 24, 2008 at 3:32 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> See the FunctionQuery and the org.apache.lucene.search.function
> package.  You can also implement your own query, as it's not clear to
> me how exactly you want to calculate the score.  Essentially, you have
> your implementation of BooleanQuery, I think.  Perhaps more details
> would help.
>
> -Grant
>
>
> On Mar 24, 2008, at 2:26 AM, Nizamul wrote:
>
> > Suppose I have two field field1 and field2 and let the score for a
> > query from field1 and field2 are score1 and score2 respectively.now
> > when computing the final lucene score I instead of score1,I want to
> > use some function (f(score1)) of that score.
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2775_3172884.1206520441593--

From java-user-return-33340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 09:13:10 2008
Return-Path: <java-user-return-33340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44582 invoked from network); 26 Mar 2008 09:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 09:13:10 -0000
Received: (qmail 65065 invoked by uid 500); 26 Mar 2008 09:13:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65039 invoked by uid 500); 26 Mar 2008 09:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65024 invoked by uid 99); 26 Mar 2008 09:13:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 02:13:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 09:12:21 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2113673rvb.5
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 02:12:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Ng5RPbQanKR+M0h0Zp4gFt2DXO0X09JM4h2Elp8tnxw=;
        b=GhQrE7/CV9UqPnNjEV2Q5eJIDy2biyDbK0t0CDONRsN0lLJDbgjTEMzFYFWaN1Cj+18/clW/QftpuWa62zhY2SxG+M/D1yjovA8elvroH4dRy+WWUHokxyDDD0CucJ6Xn6N6SscR7d1KEsk+9zwvg6prt62YWeuQ25CibX8Wb9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NEjdCTCyPyeMypZYNiqUo3KjTzm4kWmSp9qZGedKi5wJ4T8aV96zUKh7Wog9LIGKA2Cc4ESwT5qFUYKyU6ORKFLX5RoJSaLlMUQY8J4/7dAoUMwerGtD4G5EM3x2Y67lZqm6lh1OKHvEuFsDObNvPaLk/Ed1C/nwmuHG1nU5Neg=
Received: by 10.141.88.3 with SMTP id q3mr4219338rvl.46.1206522752825;
        Wed, 26 Mar 2008 02:12:32 -0700 (PDT)
Received: by 10.141.29.13 with HTTP; Wed, 26 Mar 2008 02:12:32 -0700 (PDT)
Message-ID: <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
Date: Wed, 26 Mar 2008 14:42:32 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
In-Reply-To: <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13681_11946207.1206522752814"
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
	 <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13681_11946207.1206522752814
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

Thanks for your reply. I would like to mention here is that the companyId is
a multivalued field. I tried paul's suggestions also but doesn't seem much
gain. Still the searcher.doc() method is taking almost the same amount of
time.


> you can use the FieldCache to lookup the compnayId for each doc.  on the
> aggregate this will most likely be much faster then accessing the stored
> fields.
>

As i understand the FieldCache, it will load fields for all the documents.
But in our case we want to load fields only for the matched documents.

Here is the code snippet after using the BitSet:


               *public Map getIds() {
                    MapFieldSelector selector = new MapFieldSelector(new
String[] {COMPANY_ID, ID});
                    for(int i=bitSet.nextSetBit(0); i>=0; i=
bitSet.nextSetBit(i+1)) {
                        try {
                            doc = searcher.doc(i, selector);
                            mappedCompanies = doc.getValues(COMPANY_ID);
                        } catch (CorruptIndexException e) {
                        } catch (IOException e) {
                        }
                    }
                    return results;
                }
*
Any suggestions for further optimizing the code.

Thanks and Regards,
Vipin

------=_Part_13681_11946207.1206522752814--

From java-user-return-33341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 09:49:23 2008
Return-Path: <java-user-return-33341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61018 invoked from network); 26 Mar 2008 09:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 09:49:23 -0000
Received: (qmail 28153 invoked by uid 500); 26 Mar 2008 09:49:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28122 invoked by uid 500); 26 Mar 2008 09:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28111 invoked by uid 99); 26 Mar 2008 09:49:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 02:49:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 09:48:36 +0000
Received: by an-out-0708.google.com with SMTP id c5so836979anc.49
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 02:48:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=XqW6uimdSHDe50VQLPt+g5/Esi2jXwqzteyNf+KLhHI=;
        b=m9lPkwNZrC52KxADgooLUDBv6IR228deB9jB+VsdalKtyRwfMifTAbaTt2TKDmuoWVpiB6lb3sXuqtc0j33MtsIhaltBtnR/eNsjy1UxdGU6r+FRJExRXWyn5+2CT7UJzRSYeptVC3TL7IqXKB6xLPCww48arMlle+6/0UqhV1I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Ej5qmoRLOaCF7Vbhl+O5HJZZhyoX62b1IhH/LPB3ELKlF97kNSNBcAHsz8a4ekt9/TjP61bu8c0Rt79DkrksLXqZS2swJCPRe5kPqXbCAlOAB81C3K1GeQa+si0yvqbRpc/D9Wb4YPMTpW61TgZtenKYowQTJZwENkpWbF3lvPs=
Received: by 10.100.5.16 with SMTP id 16mr24658136ane.102.1206524927447;
        Wed, 26 Mar 2008 02:48:47 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Wed, 26 Mar 2008 02:48:47 -0700 (PDT)
Message-ID: <329a6c830803260248h2efa053di30c46b51fb3deb0@mail.gmail.com>
Date: Wed, 26 Mar 2008 10:48:47 +0100
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: The best way to iterate over document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10511_14815283.1206524927427"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10511_14815283.1206524927427
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

our problem is to choose the best (the fastest) way to iterate over huge set
of documents (basic and most important case is to iterate over all documents
in the index). Some slow process accesses documents and now it is done via
repeating query (for instance MatchAllDocsQuery). It processess first N docs
then repeats query and processes next N docs and so on. Repeating query
means in fact quadratic time! So we think about changing the way docs are
accessed.
In case of generic query the only way to speed it up we see is to keep
HitCollector in memory between requests for docs. Isn't this approach too
memory consuming?
In case of iterating over all documents I was wondering if there is a way to
determine set of index ids over which we could iterate (and of course
control index changes - if index is changed between requests we should
probably invalidate 'iterating session').
What is the best solution for this problem?
Thanks and regards,

wojtek

------=_Part_10511_14815283.1206524927427--

From java-user-return-33342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 10:10:32 2008
Return-Path: <java-user-return-33342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72693 invoked from network); 26 Mar 2008 10:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 10:10:32 -0000
Received: (qmail 47450 invoked by uid 500); 26 Mar 2008 10:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47422 invoked by uid 500); 26 Mar 2008 10:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47411 invoked by uid 99); 26 Mar 2008 10:10:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:10:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 10:09:42 +0000
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Date: Wed, 26 Mar 2008 11:08:37 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB6EE8B7@owamz.healy-hudson.com>
In-Reply-To: <47E9D046.9090405@ai.sri.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
thread-index: AciPKVu4IJnwmbQVRIaqvuXtS65e8A==
References: <972815.18435.qm@web50305.mail.re2.yahoo.com> <47E9D046.9090405@ai.sri.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jay,

Sorry for the confusion, I wrote NgramStemFilter in an early stage of =
the project which is essentially the same as NGramTokenFilter from Otis =
with the addition that I add begin and end token markers (e.g. word gets =
and _word_ and so  _w wo rd d_ ).=20

As I modified a lot of our lucene code which we developed since lucene =
version 1.2 to move to a 2.x version, I did not notice of the existence =
of NGramTokenFilter.

Stemming is anyway not useful for our problem domain (product catalogs).
We chained WhiteSpace Tokenizer with a modified version of =
ISOLatin1AccentFilter to nomalize some character based language aspects =
(e.g. =DF =3D ss, =F6 =3D oe), then make the token Lowercase before =
getting the bigrams.=20
The advantage for us is anyway the TolerantPhraseQuery (see my other =
post " AW: Implement a relaxed PhraseQuery?") which gives us a first =
step for less language dependent searching.

Regards Uwe

-----Urspr=FCngliche Nachricht-----
Von: yu [mailto:yu@AI.SRI.COM]=20
Gesendet: Mittwoch, 26. M=E4rz 2008 05:26
An: java-user@lucene.apache.org
Betreff: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1

Sorry for my ignorance, I am looking for

NgramStemFilter specifically.
Are you suggesting that it's the same as NGramTokenFilter? Does it have =
stemming in it?

Thanks again.

Jay


Otis Gospodnetic wrote:
> Sorry, I wrote this stuff, but forgot the naming.
> Look: =
http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/org/apache/luce=
ne/analysis/ngram/package-summary.html
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: yu <yu@AI.SRI.COM>
> To: java-user@lucene.apache.org
> Sent: Wednesday, March 26, 2008 12:04:33 AM
> Subject: Re: AW: feedback: Indexing speed improvement lucene =
2.2->2.3.1
>
> Hi Otis,
> I checked that contrib before and could not find NgramStemFilter. Am I =

> missing other contrib?
> Thanks for the link!
>
> Jay
>
> Otis Gospodnetic wrote:
>  =20
>> Hi Jay,
>>
>> Sorry, lapsus calami, that would be Lucene *contrib*.
>> Have a look:
>> http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/index.html
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: Jay <yu@AI.SRI.COM>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, March 25, 2008 6:15:54 PM
>> Subject: Re: AW: feedback: Indexing speed improvement lucene =
2.2->2.3.1
>>
>> Sorry, I could not find the filter in the 2.3 API class list (core +=20
>> contrib + test). I am not ware of lucene config file either. Could =
you=20
>> please tell me where it is in 2.3 release?
>>
>> Thanks!
>>
>> Jay
>>
>> Otis Gospodnetic wrote:
>>  =20
>>    =20
>>> Jay,
>>>
>>> Have a look at Lucene config, it's all there, including tests.  This =
filter will take a token such as "foobar" and chop it up into n-grams =
(e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can =
specify the n-gram size and even min and max n-gram size.
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>> ----- Original Message ----
>>> From: Jay <yu@AI.SRI.COM>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, March 25, 2008 1:32:24 PM
>>> Subject: Re: AW: feedback: Indexing speed improvement lucene =
2.2->2.3.1
>>>
>>> Hi Uwe,
>>>
>>> I am curious what NGramStemFilter is? Is it a combination of porter=20
>>> stemming and word ngram identification?
>>>
>>> Thanks!
>>>
>>> Jay
>>>
>>> Uwe Goetzke wrote:
>>>    =20
>>>      =20
>>>> Hi Ivan,
>>>> No, we do not use StandardAnalyser or StandardTokenizer.
>>>>
>>>> Most data is processed by=20
>>>>     fTextTokenStream =3D result =3D new =
org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>>>     result =3D new ISOLatin2AccentFilter(result); // =
ISOLatin1AccentFilter  modified that =F6 -> oe
>>>>     result =3D new =
org.apache.lucene.analysis.LowerCaseFilter(result);
>>>>     result =3D new =
org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram =
tokenizer
>>>>
>>>> We use our own queryparser. The bigramms are searched with a =
tolerant phrase query, scoring in a doc the greatest bigramms clusters =
covering the phrase token.=20
>>>>
>>>> Best Regards
>>>>
>>>> Uwe
>>>>
>>>> -----Urspr=FCngliche Nachricht-----
>>>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg]=20
>>>> Gesendet: Freitag, 21. M=E4rz 2008 16:25
>>>> An: java-user@lucene.apache.org
>>>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>>
>>>> Hi Uwe,
>>>>
>>>> Could you tell what Analyzer do you use when you marked so big =
indexing=20
>>>> speedup?
>>>> If you use StandardAnalyzer (that uses StandardTokenizer) may be =
the=20
>>>> reason is in it. You can see the pre last report in the thread =
"Indexing=20
>>>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter =
Jake=20
>>>> Mannix this is because now StandardTokenizer uses =
StandardTokenizerImpl=20
>>>> that now is generated by JFlex instead of JavaCC.
>>>> I am asking because I noticed a great speedup in adding documents =
to=20
>>>> index in our system. We have time control on this in the debug =
mode. NOW=20
>>>> THEY ARE ADDED 5 TIMES FASTER!!!
>>>> But in the same time the total process of indexing in our case has=20
>>>> improvement of about 8%. As our system is very big and complex I am =

>>>> wondering if really the whole process of indexing is reduces so=20
>>>> remarkably and our system causes this slowdown or may be Lucene =
does=20
>>>> some optimizations on the index, merges or something else and this =
is=20
>>>> the reason the total process of indexing to be not so reasonably =
faster.
>>>>
>>>> Best Regards,
>>>> Ivan
>>>>
>>>>
>>>>
>>>> Uwe Goetzke wrote:
>>>>      =20
>>>>        =20
>>>>> This week I switched the lucene library version on one customer =
system.
>>>>> The indexing speed went down from 46m32s to 16m20s for the =
complete task
>>>>> including optimisation. Great Job!
>>>>> We index product catalogs from several suppliers, in this case =
around
>>>>> 56.000 product groups and 360.000 products including descriptions =
were
>>>>> indexed.
>>>>>
>>>>> Regards
>>>>>
>>>>> Uwe
>>>>>
>>>>>
>>>>>


-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=E4ftsf=FChrer Christian Konh=E4user - Amtsgericht Wiesbaden HRB =
12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=E4nger sind, d=FCrfen Sie die Informationen nicht offen legen oder =
benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen =
Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender =
zur=FCckschicken. Bitte l=F6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 10:42:23 2008
Return-Path: <java-user-return-33343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88933 invoked from network); 26 Mar 2008 10:42:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 10:42:22 -0000
Received: (qmail 92286 invoked by uid 500); 26 Mar 2008 10:42:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92254 invoked by uid 500); 26 Mar 2008 10:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92242 invoked by uid 99); 26 Mar 2008 10:42:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:42:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 10:41:32 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 5B11424006
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 12:41:41 +0200 (EET)
Message-ID: <47EA2865.4050604@sirma.bg>
Date: Wed, 26 Mar 2008 12:41:41 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg> <47E8FA3A.5020105@garambrogne.net>
In-Reply-To: <47E8FA3A.5020105@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mathieu for your help!

The contribution that you have made to Lucene by this patch seems to be 
great, but the hunspell dictionary is under LGPL which the lawyer of our 
company does not like. Wordnet dictionary seems to be more free and may 
be could help together with your patch.
In the Lucene's Jira I found the issue LUCENE-1190 
<https://issues.apache.org/jira/browse/LUCENE-1190> and I have the 
following questions about it:
1. There are two apthone-lexicon.patch - is one of them out of date? Is 
the 336 KB current version?
2. In the Lucene SVN 
(http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/) I can not 
find the code of your contribution. In the same time the link from Jira 
opens a very long file containing all the classes and packages of your 
patch and each row is prefixed by "+". It is very inconvenient to 
recreate the source code packages out of it. If possible could you give 
a link from where to get these sources as they are?

Best Regards,
Ivan



Mathieu Lecarme wrote:
> Ivan Vasilev a crit :
>> Hi Guys,
>>
>> Has anybody integrated the Spell Checker contributed to Lucene. 
> http://blog.garambrogne.net/index.php?post/2008/03/07/A-lexicon-approach-for-Lucene-index 
>
> https://issues.apache.org/jira/browse/LUCENE-1190
>
>> I need advise from where to get free dictionary file (one that 
>> contains all words in English) that could be used to create instance 
>> of PlainTextDictionary class.
> all english word is a nonsense. Have a look at wordnet and hunspell.
>
>> I currently use for my tests responding files from Jazzy and JADT 
>> projects, but I think I do not have right to use them officially 
>> outside of their applications.
>>
>> Best Regards,
>> Ivan
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2970 (20080325) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 10:46:20 2008
Return-Path: <java-user-return-33344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90805 invoked from network); 26 Mar 2008 10:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 10:46:20 -0000
Received: (qmail 98714 invoked by uid 500); 26 Mar 2008 10:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98687 invoked by uid 500); 26 Mar 2008 10:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98676 invoked by uid 99); 26 Mar 2008 10:46:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 03:46:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 10:45:33 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2127280rvb.5
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 03:45:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=+Mj7HEdNXEjEvPpsANC+BDJypoh7skzyDqwCxq9KzCg=;
        b=DnKACShIDTQ6RRuhpXETgDLtElBfA5ms1EW9Bew+2g7tdK/dmAM/c+3a9wK94VPy8O1sr78Op3AUsvdPvYYQwjc93T+C2sHDlLUZWRweUbBMf5IP7YxKp1uLNl7t1nnox9EDMvy4k29c9U0Tb3kDBcvrAKlMWR+xQ6A0BLD0U+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sH2SlNQkI8lxaa0WE25i+doVHmpKj4OOYbmwcXprW+ug++ZWfDJGgVinfYk+iEgF0q3nUSmkC+SbgVFQC8vtO0kC0KDgm5zWgtpH+xFlhD9zZmcC5s5r2oGzptLjWNybS/6p0J7Skl8JloUx+L9Z3J7wE/8vw7kidSdKg1+EZN0=
Received: by 10.141.48.10 with SMTP id a10mr4280045rvk.35.1206528341106;
        Wed, 26 Mar 2008 03:45:41 -0700 (PDT)
Received: by 10.141.185.18 with HTTP; Wed, 26 Mar 2008 03:45:41 -0700 (PDT)
Message-ID: <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
Date: Wed, 26 Mar 2008 10:45:41 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
In-Reply-To: <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
	 <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
	 <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


The bottom line is that reading fields from docs is expensive.
FieldCache will, I believe, load fields for all documents but only
once - so the second and subsequent times it will be fast.  Even
without using a cache it is likely that things will speed up because
of caching by the OS.

If you've got plenty of memory vs index size you could look at
RAMDirectory or MMapDirectory.  Or how about some solid state disks?
Someone recently posted some very impressive performance stats.

Another approach we've used is to implement our own simple in-memory
cache of field values.  Read values from cache if present otherwise
read from lucene and cache. This works for us on an index of 3.5
million+ docs.  It helps a lot that we only update the index once a
day so only open new readers once a day and the cache has plenty of
time to fill up.


--
Ian.


On Wed, Mar 26, 2008 at 9:12 AM, Shailendra Mudgal
<mudgal.shailendra@gmail.com> wrote:
> Hi All,
>
>  Thanks for your reply. I would like to mention here is that the companyId is
>  a multivalued field. I tried paul's suggestions also but doesn't seem much
>  gain. Still the searcher.doc() method is taking almost the same amount of
>  time.
>
>
>
>  > you can use the FieldCache to lookup the compnayId for each doc.  on the
>  > aggregate this will most likely be much faster then accessing the stored
>  > fields.
>  >
>
>  As i understand the FieldCache, it will load fields for all the documents.
>  But in our case we want to load fields only for the matched documents.
>
>  Here is the code snippet after using the BitSet:
>
>
>                *public Map getIds() {
>
>                     MapFieldSelector selector = new MapFieldSelector(new
>  String[] {COMPANY_ID, ID});
>                     for(int i=bitSet.nextSetBit(0); i>=0; i=
>  bitSet.nextSetBit(i+1)) {
>                         try {
>                             doc = searcher.doc(i, selector);
>
>                             mappedCompanies = doc.getValues(COMPANY_ID);
>                         } catch (CorruptIndexException e) {
>                         } catch (IOException e) {
>                         }
>                     }
>                     return results;
>                 }
>  *
>  Any suggestions for further optimizing the code.
>
>  Thanks and Regards,
>  Vipin
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 11:14:44 2008
Return-Path: <java-user-return-33345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8025 invoked from network); 26 Mar 2008 11:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 11:14:43 -0000
Received: (qmail 45270 invoked by uid 500); 26 Mar 2008 11:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45241 invoked by uid 500); 26 Mar 2008 11:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45230 invoked by uid 99); 26 Mar 2008 11:14:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 04:14:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:13:51 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 4E6C045117
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 12:13:44 +0100 (CET)
Message-ID: <47EA2FE2.20002@garambrogne.net>
Date: Wed, 26 Mar 2008 12:13:38 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg> <47E8FA3A.5020105@garambrogne.net> <47EA2865.4050604@sirma.bg>
In-Reply-To: <47EA2865.4050604@sirma.bg>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ivan Vasilev a crit :
> Thanks Mathieu for your help!
>
> The contribution that you have made to Lucene by this patch seems to 
> be great, but the hunspell dictionary is under LGPL which the lawyer 
> of our company does not like.
It's the spell tool used by Openoffice and firefox. Data must be multi 
licencied. Maybe you'll find the right licence for you. Older version 
(aspell and ispell) may fit you more.
> Wordnet dictionary seems to be more free and may be could help 
> together with your patch.
> In the Lucene's Jira I found the issue LUCENE-1190 
> <https://issues.apache.org/jira/browse/LUCENE-1190> and I have the 
> following questions about it:
> 1. There are two apthone-lexicon.patch - is one of them out of date? 
> Is the 336 KB current version?
bigger is newer. I'm working on a third version.
> 2. In the Lucene SVN 
> (http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/) I can not 
> find the code of your contribution.
the patch is submited, but not yet approved.
> In the same time the link from Jira opens a very long file containing 
> all the classes and packages of your patch and each row is prefixed by 
> "+". It is very inconvenient to recreate the source code packages out 
> of it. If possible could you give a link from where to get these 
> sources as they are?
It's a standard patch (man patch).
Here is the svn :
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java
You can do a svn checkout.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 11:43:19 2008
Return-Path: <java-user-return-33346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20548 invoked from network); 26 Mar 2008 11:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 11:43:18 -0000
Received: (qmail 90303 invoked by uid 500); 26 Mar 2008 11:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90266 invoked by uid 500); 26 Mar 2008 11:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90255 invoked by uid 99); 26 Mar 2008 11:43:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 04:43:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:42:22 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JYC005655V7Z6@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 26 Mar 2008 12:42:43 +0100 (MET)
Date: Wed, 26 Mar 2008 12:42:42 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Improving Index Search Performance
In-reply-to: <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1206531762.9126.415.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
 <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
 <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
 <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-03-26 at 10:45 +0000, Ian Lea wrote:
> If you've got plenty of memory vs index size you could look at
> RAMDirectory or MMapDirectory.  Or how about some solid state disks?
> Someone recently posted some very impressive performance stats.

That was probably me. A (very) quick test for field-look-ups the stupid
way (hit.get(fieldname)) showed about a factor 10 in speed for SSDs over
harddisks. It doesn't seem to be enough in this case though - 9 seconds
instead of 90 is still a long time to wait.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 12:01:19 2008
Return-Path: <java-user-return-33347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26380 invoked from network); 26 Mar 2008 12:01:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 12:01:18 -0000
Received: (qmail 13593 invoked by uid 500); 26 Mar 2008 12:01:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13555 invoked by uid 500); 26 Mar 2008 12:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13544 invoked by uid 99); 26 Mar 2008 12:01:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 05:01:11 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=MIME_QP_LONG_LINE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.219.78.209] (HELO smtpin.livedns.co.il) (62.219.78.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 12:00:31 +0000
Received: from ([127.0.0.1]) with MailEnable ESMTP; Wed, 26 Mar 2008 14:09:53 +0200
Received: from ([80.250.149.60]) by mail.livedns.co.il with MailEnable WebMail; Wed, 26 Mar 2008 14:00:08 +0200
To: <java-user@lucene.apache.org>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
Subject: setPositionIncrement questions
Date: Wed, 26 Mar 2008 14:00:08 +0200
Message-ID: <4F16A37C073944A9BA3A47C3C3CDAA36.MAI@mail.livedns.co.il>
MIME-Version: 1.0
X-Mailer: MailEnable WebMail.NET
X-MimeOLE: Produced By MailEnable WebMail.NET V3.14.0.0
X-Read: 0
Content-Type: multipart/mixed;
	boundary="--=_Part_3ABD342D72D04193BD2A36F5018D22F4"
X-Priority: 3
X-MSMail-Priority: Medium
X-Virus-Checked: Checked by ClamAV on apache.org

----=_Part_3ABD342D72D04193BD2A36F5018D22F4
Content-Type: text/plain; charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hi all,
 
Breaking proximity data has been discussed several times before, and concluded that setPositionIncrement is the way to go. In regards of it:
 
1. Where should it be called exactly to create the gap properly=3F
 
2. Is there a way to call it directly somehow while indexing (e.g. after adding a new paragraph to an existing field) instead of appending $$$ for example after the new string I'm indexing, and having to update my tokenizer and filters so they will retain the $$$ chars, indicating the gap request=3F
 
3. What is the recommended value to pass setPositionIncrement to create a reasonable gap, and not risk large documents being indexed improperly (I mean, is there some sort of high-bound for the position value=3F).
 
4. What are the consequences of setting PositionIncrement to 0=3F Does this mean I can index synonyms or stems aside of the "real" words without risking data corruption=3F
 
Itamar.



----=_Part_3ABD342D72D04193BD2A36F5018D22F4
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
----=_Part_3ABD342D72D04193BD2A36F5018D22F4--



From java-user-return-33348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 13:02:18 2008
Return-Path: <java-user-return-33348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57064 invoked from network); 26 Mar 2008 13:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 13:02:18 -0000
Received: (qmail 22853 invoked by uid 500); 26 Mar 2008 13:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22832 invoked by uid 500); 26 Mar 2008 13:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22821 invoked by uid 99); 26 Mar 2008 13:02:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 06:02:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 13:01:29 +0000
Received: by rn-out-0910.google.com with SMTP id a46so2229926rne.9
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 06:01:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1BdQmtj5dUh7syicp59gyMKG9F5wkg5tP+DYjwmUdtU=;
        b=gB9lfCOlYlagTlETJeX7w3HDTUtHSDBkYUv+xuuhQvvfbQOYLgyJ7VPXVVmxqoSb2VmkWwRYqHKz6r/rPebwU/eY+OpZRfWk/TED9fVBxvJpCVYUqnTv5ay87ehZ9BjpSd4bfnACzN+cBhV9aGpQwNymx1dy/GFM2wQ+YkaVNrc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yyx6uLAsf/uLny9qwgvSqpLmHelYOekZLUGY+kF7ucW57myZMa945x2Cn+C5oWDz8Sm63UYNWxBgEABN08bywSxgW7Fttva0xRbeKCK6PqnWra82kGckg5KKn/fzLZZDmJ/ezmyevSxRQbBy/fLnbremuVXXfGrSZm5gpGbo0XI=
Received: by 10.141.122.20 with SMTP id z20mr4366117rvm.293.1206535884862;
        Wed, 26 Mar 2008 05:51:24 -0700 (PDT)
Received: by 10.141.29.13 with HTTP; Wed, 26 Mar 2008 05:51:24 -0700 (PDT)
Message-ID: <fa7518640803260551u1d5ddb0eua1627ba55085aee@mail.gmail.com>
Date: Wed, 26 Mar 2008 18:21:24 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
In-Reply-To: <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14445_25517886.1206535884862"
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
	 <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
	 <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
	 <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14445_25517886.1206535884862
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> The bottom line is that reading fields from docs is expensive.
> FieldCache will, I believe, load fields for all documents but only
> once - so the second and subsequent times it will be fast.  Even
> without using a cache it is likely that things will speed up because
> of caching by the OS.


As i mentioned in my previous mail that the companyId is a multivalued
field, so caching it will consume a lot of memory. And this way we'll have
to keep the document vs field mapping also in the memory.


> If you've got plenty of memory vs index size you could look at
> RAMDirectory or MMapDirectory.  Or how about some solid state disks?
> Someone recently posted some very impressive performance stats.


The index size is around 20G and the available Memory is 4G so, keeping the
entire index into the memory  is not possible.   But as i mentioned earlier
that it is using only 1 G out of 4 G, so is their a way to specify the
lucene to cache more documents , say use 2G for caching the index ??

I'll appreciate more suggestions on the same problem.

Regards,
Vipin

------=_Part_14445_25517886.1206535884862--

From java-user-return-33349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 14:24:36 2008
Return-Path: <java-user-return-33349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1054 invoked from network); 26 Mar 2008 14:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 14:24:36 -0000
Received: (qmail 37051 invoked by uid 500); 26 Mar 2008 14:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37018 invoked by uid 500); 26 Mar 2008 14:24:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36956 invoked by uid 99); 26 Mar 2008 14:24:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 07:24:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 14:23:45 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 3A82724008
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 16:23:54 +0200 (EET)
Message-ID: <47EA5C79.7070608@sirma.bg>
Date: Wed, 26 Mar 2008 16:23:53 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg> <47E8FA3A.5020105@garambrogne.net> <47EA2865.4050604@sirma.bg> <47EA2FE2.20002@garambrogne.net>
In-Reply-To: <47EA2FE2.20002@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mathieu,

I tryed to checkout but without success. Anyway I can do it manually, 
but as the contribution is still not approved from Lucene our chiefs 
will not whant it to be included to our project by now.
OK Thanks once again :)

Ivan

PS: Here is the output from the SVN version win32-1.4.5:

E:\SVN\svn-win32-1.4.5\bin>svn co 
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java 
temp
Error validating server certificate for 'https://admin.garambrogne.net:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
 - The certificate hostname does not match.
 - The certificate has expired.
Certificate information:
 - Hostname: admin.garambogne.net
 - Valid: from Wed, 09 Mar 2005 19:21:51 GMT until Thu, 09 Mar 2006 
19:21:51 GMT
 - Issuer: Quihou, Garambrogne, Saint Mande, Val de Marne, FR
 - Fingerprint: f4:f4:09:14:e5:4e:33:f8:05:d1:a2:73:b6:0c:b4:03:d9:13:83:9b
(R)eject, accept (t)emporarily or accept (p)ermanently? t
svn: PROPFIND request failed on 
'/projets/revuedepresse/browser/trunk/src/java'
svn: PROPFIND of '/projets/revuedepresse/browser/trunk/src/java': 200 OK 
(https://admin.garambrogne.net)


Mathieu Lecarme wrote:
> Ivan Vasilev a crit :
>> Thanks Mathieu for your help!
>>
>> The contribution that you have made to Lucene by this patch seems to 
>> be great, but the hunspell dictionary is under LGPL which the lawyer 
>> of our company does not like.
> It's the spell tool used by Openoffice and firefox. Data must be multi 
> licencied. Maybe you'll find the right licence for you. Older version 
> (aspell and ispell) may fit you more.
>> Wordnet dictionary seems to be more free and may be could help 
>> together with your patch.
>> In the Lucene's Jira I found the issue LUCENE-1190 
>> <https://issues.apache.org/jira/browse/LUCENE-1190> and I have the 
>> following questions about it:
>> 1. There are two apthone-lexicon.patch - is one of them out of date? 
>> Is the 336 KB current version?
> bigger is newer. I'm working on a third version.
>> 2. In the Lucene SVN 
>> (http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/) I can 
>> not find the code of your contribution.
> the patch is submited, but not yet approved.
>> In the same time the link from Jira opens a very long file containing 
>> all the classes and packages of your patch and each row is prefixed 
>> by "+". It is very inconvenient to recreate the source code packages 
>> out of it. If possible could you give a link from where to get these 
>> sources as they are?
> It's a standard patch (man patch).
> Here is the svn :
> https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java 
>
> You can do a svn checkout.
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2973 (20080326) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 14:43:13 2008
Return-Path: <java-user-return-33350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14846 invoked from network); 26 Mar 2008 14:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 14:43:13 -0000
Received: (qmail 84645 invoked by uid 500); 26 Mar 2008 14:43:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84615 invoked by uid 500); 26 Mar 2008 14:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84604 invoked by uid 99); 26 Mar 2008 14:43:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 07:43:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 14:42:22 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id D38AB45264
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 15:42:30 +0100 (CET)
Message-ID: <47EA60CF.8010507@garambrogne.net>
Date: Wed, 26 Mar 2008 15:42:23 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg> <47E8FA3A.5020105@garambrogne.net> <47EA2865.4050604@sirma.bg> <47EA2FE2.20002@garambrogne.net> <47EA5C79.7070608@sirma.bg>
In-Reply-To: <47EA5C79.7070608@sirma.bg>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ivan Vasilev a crit :
> Thanks Mathieu,
>
> I tryed to checkout but without success. Anyway I can do it manually, 
> but as the contribution is still not approved from Lucene our chiefs 
> will not whant it to be included to our project by now.
It's a right decision. I hope the third patch will be good enough.
> OK Thanks once again :)
>
> Ivan
>
> PS: Here is the output from the SVN version win32-1.4.5:
>
> E:\SVN\svn-win32-1.4.5\bin>svn co 
> https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java 
> temp
> Error validating server certificate for 
> 'https://admin.garambrogne.net:443':
> - The certificate is not issued by a trusted authority. Use the
>   fingerprint to validate the certificate manually!
> - The certificate hostname does not match.
> - The certificate has expired.
> Certificate information:
> - Hostname: admin.garambogne.net
> - Valid: from Wed, 09 Mar 2005 19:21:51 GMT until Thu, 09 Mar 2006 
> 19:21:51 GMT
> - Issuer: Quihou, Garambrogne, Saint Mande, Val de Marne, FR
> - Fingerprint: 
> f4:f4:09:14:e5:4e:33:f8:05:d1:a2:73:b6:0c:b4:03:d9:13:83:9b
> (R)eject, accept (t)emporarily or accept (p)ermanently? t
> svn: PROPFIND request failed on 
> '/projets/revuedepresse/browser/trunk/src/java'
> svn: PROPFIND of '/projets/revuedepresse/browser/trunk/src/java': 200 
> OK (https://admin.garambrogne.net)
the svn url is : 
https://admin.garambrogne.net/subversion/revuedepresse/trunk/src/java 
and the certificat is self signed. you can use any login, like "anonymous".

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 14:45:51 2008
Return-Path: <java-user-return-33351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17858 invoked from network); 26 Mar 2008 14:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 14:45:51 -0000
Received: (qmail 92430 invoked by uid 500); 26 Mar 2008 14:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92178 invoked by uid 500); 26 Mar 2008 14:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92167 invoked by uid 99); 26 Mar 2008 14:45:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 07:45:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 14:45:02 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id DF5E341230
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 11:45:11 -0300 (BRST)
Message-ID: <47EA6155.1000304@accurate.com.br>
Date: Wed, 26 Mar 2008 11:44:37 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: LuceneJavaUsers <java-user@lucene.apache.org>
X-Picturemail: Y
Subject: Index "corruption" makes it return a different result
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-1, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all!

I had a problem this week, and I like to share with you all.
My weblogic server that generate my index hrows its logs in a shared 
storage. During my indexing process (SOLR+Lucene), this shared storage 
became 100% full, and everything collapsed (all servers that uses this 
shared storage). But my index (that is generated in the local 
filesystem, just "grabbed" some logs of the server (who knows weblogic 
knows the managed server accesslog, that's the guy) from the buffer (my 
supposition), and put inside my index files! Take a look how my 
"_al1.cfs" became between some binary parts of the file:

2008-03-19    -    02:31:03    -    [ip]    -    POST    -    200    
-    /AcomProductSyncServiceWeb/AcomProductSyncService
2008-03-19    -    02:31:03    -    [ip]    -    POST    -    200    
-    /AcomProductSyncServiceWeb/AcomProductSyncService
2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
-    /AcomProductSyncServiceWeb/AcomProductSyncService
2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
-    /AcomProductSyncServiceWeb/AcomProductSyncService
2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
-    /AcomProductSyncServiceWeb/AcomProductSyncService

The most incredible thing, is that I can open the index without a 
CorruptedIndexException, normally. That's really bad for me, cause the 
application didn't warn about a corrupted index (of course, it is not). 
I can open it with the Luke App, and with this simple code snippet 
accessing directly the lucene index without solr:

        IndexReader indexReader = 
IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19"));
        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
       
        TermQuery termQuery = new TermQuery(new Term("itemId", "680804"));
        Hits hits = indexSearcher.search(termQuery);
       
        Iterator itHits = hits.iterator();
        while (itHits.hasNext()) {
            Hit hit = (Hit) itHits.next();
            Document document = hit.getDocument();
            String itemId = document.getField("itemId").stringValue();
            System.out.println("itemId="+itemId);
        }
       
        indexSearcher.close();
        indexReader.close();


Ok, ok. But, if it's opening, whats my real problem?  Making this little 
search above, the Document that I got, was another one, with other 
information different from the original one that I was looking for (the 
one with the itemId field = 680804). The whole document was another 
document (but a valid document, that I've indexed before). The itemId 
value that I got, the one that was printed from that application above 
was 578340. Wow!!

I can reproduce this error anytime with this code or with luke on this 
corrupted index, but was terrible for me to find the exact point of this 
fault.

I've reindexed everything, it solves my problem. But I wants to know if 
someone have any idea why this happened...

Thanks people!

[]s,

Lucas Teixeira
lucas.teixeira@accurate.com.br


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 14:52:31 2008
Return-Path: <java-user-return-33352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21455 invoked from network); 26 Mar 2008 14:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 14:52:31 -0000
Received: (qmail 10748 invoked by uid 500); 26 Mar 2008 14:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10723 invoked by uid 500); 26 Mar 2008 14:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10712 invoked by uid 99); 26 Mar 2008 14:52:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 07:52:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 14:51:43 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2171450rvb.5
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 07:51:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=kyfFMQnpYzvaZ/pGd/ik7NUOTRChsf9heL1k3nCtHCM=;
        b=hxsM/oUc+6K4j8WBjiL9KH/uh44tbPPqjgIkDl4/Rd8Sa4G8u8v6Jo6OAbrFFKjYLfiClzVkDAlrpVQC46D4EFX8Vh/YtM2N6Azwh641HJ9hiRQxfk9mDOF7gCGQjnv3YlvrBdANp7THHNt6LUQ3eEFNBncWL4ncPU5RwGWPOA8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=frJMU+tlgaYOiR7Gc71xzSzZAyYzqhppP7Sd+czbTCeCUWFbLrCcdt1pnD/lelxQJm1qRIthfLaieyFgH9Flkr+er1kuuG8GJ9vXfUn/61VzXJaeMPbsqSL6SfqK0LI/Pj4qwl+3wKY1rMWe2P9cJ5VZB3Pw7khYOsZ2mXBGADY=
Received: by 10.140.125.1 with SMTP id x1mr78666rvc.287.1206543114894;
        Wed, 26 Mar 2008 07:51:54 -0700 (PDT)
Received: by 10.141.185.18 with HTTP; Wed, 26 Mar 2008 07:51:54 -0700 (PDT)
Message-ID: <8c4e68610803260751n5ed7838s1ce464cadac1df82@mail.gmail.com>
Date: Wed, 26 Mar 2008 14:51:54 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
In-Reply-To: <fa7518640803260551u1d5ddb0eua1627ba55085aee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com>
	 <Pine.LNX.4.62.0803251230270.18471@radix.cryptio.net>
	 <fa7518640803260212s2651225ep43964a14fcbe34b1@mail.gmail.com>
	 <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com>
	 <fa7518640803260551u1d5ddb0eua1627ba55085aee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, caching is designed to use memory.  If you are saying that you
haven't got enough memory to cache all your values then caching them
all isn't going to work, at any level. If you implemented your own
cache you could control memory usage with an LRU algorithm or whatever
made sense for your application.  We use an array as the cache with
the lucene document id as the index, so don't have to store document
vs field mapping.

I'm not aware of any way to tell lucene to cache documents, let alone
up to a user-supplied memory threshold.

If you are on a unix type OS and your lucene app is the only or main
thing on the machine, the OS is likely using the spare memory as cache
behind the scenes.  Don't know if the same applies to MS Win.


--
Ian.


On Wed, Mar 26, 2008 at 12:51 PM, Shailendra Mudgal
<mudgal.shailendra@gmail.com> wrote:
> > The bottom line is that reading fields from docs is expensive.
>  > FieldCache will, I believe, load fields for all documents but only
>  > once - so the second and subsequent times it will be fast.  Even
>  > without using a cache it is likely that things will speed up because
>  > of caching by the OS.
>
>
>  As i mentioned in my previous mail that the companyId is a multivalued
>  field, so caching it will consume a lot of memory. And this way we'll have
>  to keep the document vs field mapping also in the memory.
>
>
>
>  > If you've got plenty of memory vs index size you could look at
>  > RAMDirectory or MMapDirectory.  Or how about some solid state disks?
>  > Someone recently posted some very impressive performance stats.
>
>
>  The index size is around 20G and the available Memory is 4G so, keeping the
>  entire index into the memory  is not possible.   But as i mentioned earlier
>  that it is using only 1 G out of 4 G, so is their a way to specify the
>  lucene to cache more documents , say use 2G for caching the index ??
>
>  I'll appreciate more suggestions on the same problem.
>
>  Regards,
>  Vipin
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 15:05:39 2008
Return-Path: <java-user-return-33353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47774 invoked from network); 26 Mar 2008 15:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 15:05:38 -0000
Received: (qmail 48855 invoked by uid 500); 26 Mar 2008 15:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48823 invoked by uid 500); 26 Mar 2008 15:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48812 invoked by uid 99); 26 Mar 2008 15:05:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 08:05:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 15:04:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3490914fga.27
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 08:05:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KpF1LOwdt4GEDZuuYdXdaOY0upckqB2vNYO3LRqNMbU=;
        b=buR/zHCC7MKaIeWjxUnaoiYr3MpqctPURhvdOgYSPzmHUU5UbiXY1bdBzvrL7yWqrOvS0Fyoxg5Hpo6xvCBB72v1qyUyr7tQkFYqfdUquSmRF5wPx7YmM+QLNFvEX6vbdla6gcTD+tpCtJoHVUEhfsDjUQiI+QI8Qd8GFWq/Zdg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jn9AVGPkTYyLUVrQiDfgwo7mMexLzOzJOHZ/r3GiQXtUbWiFsUovXCzYQKyDoArx9iK8tsxXVRRtBoGHyRN13b0XeJfWvpOadi3nWxjqSXWJoHM+7sJUo0txQDZVJXYZaQ7p8JUgHyZxGCcnRyMYI6+KHo9mgHa7XsF1wdKFWiI=
Received: by 10.82.177.3 with SMTP id z3mr151852bue.23.1206543901717;
        Wed, 26 Mar 2008 08:05:01 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Wed, 26 Mar 2008 08:05:01 -0700 (PDT)
Message-ID: <359a92830803260805o6f0dfaa1s29f2df4beda26a45@mail.gmail.com>
Date: Wed, 26 Mar 2008 11:05:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best way to iterate over document
In-Reply-To: <329a6c830803260248h2efa053di30c46b51fb3deb0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20597_31156803.1206543901700"
References: <329a6c830803260248h2efa053di30c46b51fb3deb0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20597_31156803.1206543901700
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why not keep a Filter in memory? It consists of a single bit per document
and the ordinal position of that bit is the Lucene doc ID. You could create
this reasonably quickly for the *first* query that came in via HitCollector.

Then each time you wanted another chunk, use the filter to know which
docs to return. You could either, say, extend the Filter class and add
some bookeeping or just zero out each bit that you returned to the user.

NOTE: you don't get relevance this way, but for the case of returning all
docs do you really want it?

About updating the index. Remember that there is no "update in place".
So you'll only have to check whether any document in the filter has been
deleted when you are returning. Then you'd have to do something about
looking for any new additions as you returned the last document in the
set...
But remember that until you close/reopen the searcher, you won't see changes
anyway.....

But you may not need to do any of this. If, each time you return a chunk,
you're using a Hits object, then this is the first thing I'd change. A Hits
object re-executes the query every 100th element you look at. So, assume
you have something like

(bad pseudo code here)
for (int idx = 0; idx < firstdocinchunk && Hits.next(); ++idx)
{
}

for (idx = 0; idx < chunksize && Hits.next(); ++idx)
{
    assemble doc for return
}
and the first doc you want to return is number 1,000, you'll actually
be re-executing the query 10 times. Which probably accounts for your
quadratic time.

So I'd try just using a new HitCollector each time and see if that solves
your problems before getting fancy. There really shouldn't be any
noticeable difference between the first and last request unless you're
doing something like accessing the documents before you get to
the first one you expect to return. And a TopDocs should even
preserve scoring.......

Best
Erick



On Wed, Mar 26, 2008 at 5:48 AM, Wojtek H <wojtekh2@gmail.com> wrote:

> Hi all,
>
> our problem is to choose the best (the fastest) way to iterate over huge
> set
> of documents (basic and most important case is to iterate over all
> documents
> in the index). Some slow process accesses documents and now it is done via
> repeating query (for instance MatchAllDocsQuery). It processess first N
> docs
> then repeats query and processes next N docs and so on. Repeating query
> means in fact quadratic time! So we think about changing the way docs are
> accessed.
> In case of generic query the only way to speed it up we see is to keep
> HitCollector in memory between requests for docs. Isn't this approach too
> memory consuming?
> In case of iterating over all documents I was wondering if there is a way
> to
> determine set of index ids over which we could iterate (and of course
> control index changes - if index is changed between requests we should
> probably invalidate 'iterating session').
> What is the best solution for this problem?
> Thanks and regards,
>
> wojtek
>

------=_Part_20597_31156803.1206543901700--

From java-user-return-33354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 15:20:36 2008
Return-Path: <java-user-return-33354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61854 invoked from network); 26 Mar 2008 15:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 15:20:32 -0000
Received: (qmail 79217 invoked by uid 500); 26 Mar 2008 15:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79183 invoked by uid 500); 26 Mar 2008 15:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79172 invoked by uid 99); 26 Mar 2008 15:20:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 08:20:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 15:19:34 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 062A030EFC18; Wed, 26 Mar 2008 09:19:52 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-190-107.dyn.embarqhsd.net [69.68.190.107])
	by ehatchersolutions.com (Postfix) with ESMTP id 1579C30EFC17
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 09:19:37 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8837fb770803252059l46a9137dhe9669bf84f25068f@mail.gmail.com>
References: <8837fb770803251032l297ca5b4u80fae729b2990324@mail.gmail.com> <07445C02-005F-4DEE-A639-8E907411A2EE@ehatchersolutions.com> <8837fb770803252059l46a9137dhe9669bf84f25068f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B16A8B98-E81F-4D72-9D6D-80CDFF00F252@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: random accessing term value
Date: Wed, 26 Mar 2008 11:19:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

You can store term vectors with positions too.  Wouldn't that work  
for this case?

	Erik


On Mar 25, 2008, at 11:59 PM, John Wang wrote:
> I am not sure how term vectors would help me. Term vectors are  
> ordered by
> frequency, not in lex order. Since I know in the dictionary the  
> terms are
> ordered by lex, seems it is possible for me to randomly get the nth  
> term in
> the dictionary without having to seek to it.
>
> Thoughts?
>
> Thanks
>
> -John
>
> On Tue, Mar 25, 2008 at 11:16 AM, Erik Hatcher  
> <erik@ehatchersolutions.com>
> wrote:
>
>>
>> On Mar 25, 2008, at 1:32 PM, John Wang wrote:
>>>    Is there a way to random accessing term value in a field? e.g.
>>>
>>>    in my field, content, the terms are: lucene, is, cool
>>>
>>>    Is there a way to access content[2] -> cool?
>>
>> Via term vectors, or reanalysis of the field are two that come to
>> mind.  Maybe other ways?
>>
>>        Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 15:29:47 2008
Return-Path: <java-user-return-33355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70055 invoked from network); 26 Mar 2008 15:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 15:29:46 -0000
Received: (qmail 6170 invoked by uid 500); 26 Mar 2008 15:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6142 invoked by uid 500); 26 Mar 2008 15:29:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6131 invoked by uid 99); 26 Mar 2008 15:29:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 08:29:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 15:28:59 +0000
Received: by an-out-0708.google.com with SMTP id c5so3058anc.49
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 08:29:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=R2ngHgOkawWBZx9doU58DskZbkjEGPGSivES2akr95E=;
        b=ENkGufvogQfjxwvlKK5iBkjwMQG1pTltGuhMttQucowUW3un/0geEO1BS7nZ+/OqcAOTEUP0Whe6/abd45QzXXoutgnp0BqNl/HFC2V2/ee2jVUf7QG0YwzFk3zmkzbpeZTiP7h0pv5ordf0qoSrTHDeEFebErZAlrvW6ON4WaI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NU0NpNfAvAlXR5MnyLHI4P8NqGkbmI8QjMhyLw/FlLOShp6Abb9xotLunW6paKp3wWMDvLljBxxIZtlkXu8Rz3KwbVcvn71TZgENL1aYYtbcGUc7CF3km/LHVptEFBHOW7zhNYH+NeEXBnYz6UEUdx7y5B1OtIaTM/CNH1kvoXg=
Received: by 10.101.69.10 with SMTP id w10mr182907ank.68.1206545346861;
        Wed, 26 Mar 2008 08:29:06 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Wed, 26 Mar 2008 08:29:06 -0700 (PDT)
Message-ID: <329a6c830803260829g56a8696dod4d2d21abe2ddb08@mail.gmail.com>
Date: Wed, 26 Mar 2008 16:29:06 +0100
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best way to iterate over document
In-Reply-To: <359a92830803260805o6f0dfaa1s29f2df4beda26a45@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <329a6c830803260248h2efa053di30c46b51fb3deb0@mail.gmail.com>
	 <359a92830803260805o6f0dfaa1s29f2df4beda26a45@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for reply. What I did not mention before was that for
iteration we don't care about scoring, so that's not the issue at all.
Creating Filter with BitSet seems much better idea than keeping
HitIterator in memory. Am I right that in such a case with
MatchAllDocsQuery memory usage would be around
( NUM_OF_DOCS_IN_INDEX / 8 )   bytes?
We didn't check it yet, but do you think that time for accessing
documents (reader.doc(i)) is big enough to make iteration in
HitCollector (without accessing any objects) over documents
already returned almost un-noticable?
And another question - if I don't care about scoring is there a way to
make Lucene don't spend time on calculating score (I don't know if
that time matters)? HitCollector receives doc and its score (as far as
I remember the difference here is that it is not normalized to value
between 0 and 1). Is there a way (and does it make sense) to make
scoring faster in such a case?
And to make things clear - am I right that if I operate on the same
searcher over requests for docs chunks I don't see neither additions
nor deletions which could happen meanwhile? So if I would like to
iterate over point-in-time keeping the same searcher opened would do.
Thanks and regards,
wojtek


2008/3/26, Erick Erickson <erickerickson@gmail.com>:
> Why not keep a Filter in memory? It consists of a single bit per document
>  and the ordinal position of that bit is the Lucene doc ID. You could create
>  this reasonably quickly for the *first* query that came in via HitCollector.
>
>  Then each time you wanted another chunk, use the filter to know which
>  docs to return. You could either, say, extend the Filter class and add
>  some bookeeping or just zero out each bit that you returned to the user.
>
>  NOTE: you don't get relevance this way, but for the case of returning all
>  docs do you really want it?
>
>  About updating the index. Remember that there is no "update in place".
>  So you'll only have to check whether any document in the filter has been
>  deleted when you are returning. Then you'd have to do something about
>  looking for any new additions as you returned the last document in the
>  set...
>  But remember that until you close/reopen the searcher, you won't see changes
>  anyway.....
>
>  But you may not need to do any of this. If, each time you return a chunk,
>  you're using a Hits object, then this is the first thing I'd change. A Hits
>  object re-executes the query every 100th element you look at. So, assume
>  you have something like
>
>  (bad pseudo code here)
>  for (int idx = 0; idx < firstdocinchunk && Hits.next(); ++idx)
>  {
>  }
>
>  for (idx = 0; idx < chunksize && Hits.next(); ++idx)
>  {
>     assemble doc for return
>  }
>  and the first doc you want to return is number 1,000, you'll actually
>  be re-executing the query 10 times. Which probably accounts for your
>  quadratic time.
>
>  So I'd try just using a new HitCollector each time and see if that solves
>  your problems before getting fancy. There really shouldn't be any
>  noticeable difference between the first and last request unless you're
>  doing something like accessing the documents before you get to
>  the first one you expect to return. And a TopDocs should even
>  preserve scoring.......
>
>  Best
>
> Erick
>
>
>
>
>  On Wed, Mar 26, 2008 at 5:48 AM, Wojtek H <wojtekh2@gmail.com> wrote:
>
>  > Hi all,
>  >
>  > our problem is to choose the best (the fastest) way to iterate over huge
>  > set
>  > of documents (basic and most important case is to iterate over all
>  > documents
>  > in the index). Some slow process accesses documents and now it is done via
>  > repeating query (for instance MatchAllDocsQuery). It processess first N
>  > docs
>  > then repeats query and processes next N docs and so on. Repeating query
>  > means in fact quadratic time! So we think about changing the way docs are
>  > accessed.
>  > In case of generic query the only way to speed it up we see is to keep
>  > HitCollector in memory between requests for docs. Isn't this approach too
>  > memory consuming?
>  > In case of iterating over all documents I was wondering if there is a way
>  > to
>  > determine set of index ids over which we could iterate (and of course
>  > control index changes - if index is changed between requests we should
>  > probably invalidate 'iterating session').
>  > What is the best solution for this problem?
>  > Thanks and regards,
>  >
>  > wojtek
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 16:22:44 2008
Return-Path: <java-user-return-33356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4472 invoked from network); 26 Mar 2008 16:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 16:22:44 -0000
Received: (qmail 40516 invoked by uid 500); 26 Mar 2008 16:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39890 invoked by uid 500); 26 Mar 2008 16:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39879 invoked by uid 99); 26 Mar 2008 16:22:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 09:22:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 16:21:44 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 6A76F2400A
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 18:22:03 +0200 (EET)
Message-ID: <47EA782B.3030603@sirma.bg>
Date: Wed, 26 Mar 2008 18:22:03 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Integrating Spell Checker contributed to Lucene
References: <47E8F6EE.6050301@sirma.bg> <47E8FA3A.5020105@garambrogne.net> <47EA2865.4050604@sirma.bg> <47EA2FE2.20002@garambrogne.net> <47EA5C79.7070608@sirma.bg> <47EA60CF.8010507@garambrogne.net>
In-Reply-To: <47EA60CF.8010507@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

This is! Now I finally got it :)
OK will use it only for test integration by now (if there will time for 
this :) ) and will expect the third patch.
Have a nice time :)
Ivan


Mathieu Lecarme wrote:
> Ivan Vasilev a crit :
>> Thanks Mathieu,
>>
>> I tryed to checkout but without success. Anyway I can do it manually, 
>> but as the contribution is still not approved from Lucene our chiefs 
>> will not whant it to be included to our project by now.
> It's a right decision. I hope the third patch will be good enough.
>> OK Thanks once again :)
>>
>> Ivan
>>
>> PS: Here is the output from the SVN version win32-1.4.5:
>>
>> E:\SVN\svn-win32-1.4.5\bin>svn co 
>> https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java 
>> temp
>> Error validating server certificate for 
>> 'https://admin.garambrogne.net:443':
>> - The certificate is not issued by a trusted authority. Use the
>>   fingerprint to validate the certificate manually!
>> - The certificate hostname does not match.
>> - The certificate has expired.
>> Certificate information:
>> - Hostname: admin.garambogne.net
>> - Valid: from Wed, 09 Mar 2005 19:21:51 GMT until Thu, 09 Mar 2006 
>> 19:21:51 GMT
>> - Issuer: Quihou, Garambrogne, Saint Mande, Val de Marne, FR
>> - Fingerprint: 
>> f4:f4:09:14:e5:4e:33:f8:05:d1:a2:73:b6:0c:b4:03:d9:13:83:9b
>> (R)eject, accept (t)emporarily or accept (p)ermanently? t
>> svn: PROPFIND request failed on 
>> '/projets/revuedepresse/browser/trunk/src/java'
>> svn: PROPFIND of '/projets/revuedepresse/browser/trunk/src/java': 200 
>> OK (https://admin.garambrogne.net)
> the svn url is : 
> https://admin.garambrogne.net/subversion/revuedepresse/trunk/src/java 
> and the certificat is self signed. you can use any login, like 
> "anonymous".
>
> M.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2974 (20080326) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 16:43:04 2008
Return-Path: <java-user-return-33357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16920 invoked from network); 26 Mar 2008 16:43:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 16:43:04 -0000
Received: (qmail 73907 invoked by uid 500); 26 Mar 2008 16:42:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73878 invoked by uid 500); 26 Mar 2008 16:42:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73867 invoked by uid 99); 26 Mar 2008 16:42:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 09:42:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 16:42:06 +0000
Received: by ag-out-0708.google.com with SMTP id 35so7121804aga.11
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 09:32:22 -0700 (PDT)
Received: by 10.100.249.9 with SMTP id w9mr317597anh.63.1206548332009;
        Wed, 26 Mar 2008 09:18:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 17sm1289720hsq.16.2008.03.26.09.18.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 26 Mar 2008 09:18:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47EA6155.1000304@accurate.com.br>
References: <47EA6155.1000304@accurate.com.br>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Index "corruption" makes it return a different result
Date: Wed, 26 Mar 2008 12:18:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I couldn't quite follow the part about "_al1.cfs".

It sounds like your indexing process hit a disk full event, that led  
to this error? Can you post the full exception(s) from the disk full?

Which version of Lucene are you using?

Mike

Lucas F. A. Teixeira wrote:
> Hello all!
>
> I had a problem this week, and I like to share with you all.
> My weblogic server that generate my index hrows its logs in a  
> shared storage. During my indexing process (SOLR+Lucene), this  
> shared storage became 100% full, and everything collapsed (all  
> servers that uses this shared storage). But my index (that is  
> generated in the local filesystem, just "grabbed" some logs of the  
> server (who knows weblogic knows the managed server accesslog,  
> that's the guy) from the buffer (my supposition), and put inside my  
> index files! Take a look how my "_al1.cfs" became between some  
> binary parts of the file:
>
> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>
> The most incredible thing, is that I can open the index without a  
> CorruptedIndexException, normally. That's really bad for me, cause  
> the application didn't warn about a corrupted index (of course, it  
> is not). I can open it with the Luke App, and with this simple code  
> snippet accessing directly the lucene index without solr:
>
>        IndexReader indexReader = IndexReader.open 
> (FSDirectory.getDirectory("C/index/index.2008-03-19"));
>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>              TermQuery termQuery = new TermQuery(new Term("itemId",  
> "680804"));
>        Hits hits = indexSearcher.search(termQuery);
>              Iterator itHits = hits.iterator();
>        while (itHits.hasNext()) {
>            Hit hit = (Hit) itHits.next();
>            Document document = hit.getDocument();
>            String itemId = document.getField("itemId").stringValue();
>            System.out.println("itemId="+itemId);
>        }
>              indexSearcher.close();
>        indexReader.close();
>
>
> Ok, ok. But, if it's opening, whats my real problem?  Making this  
> little search above, the Document that I got, was another one, with  
> other information different from the original one that I was  
> looking for (the one with the itemId field = 680804). The whole  
> document was another document (but a valid document, that I've  
> indexed before). The itemId value that I got, the one that was  
> printed from that application above was 578340. Wow!!
>
> I can reproduce this error anytime with this code or with luke on  
> this corrupted index, but was terrible for me to find the exact  
> point of this fault.
>
> I've reindexed everything, it solves my problem. But I wants to  
> know if someone have any idea why this happened...
>
> Thanks people!
>
> []s,
>
> Lucas Teixeira
> lucas.teixeira@accurate.com.br
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 17:55:41 2008
Return-Path: <java-user-return-33358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55104 invoked from network); 26 Mar 2008 17:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 17:55:41 -0000
Received: (qmail 34609 invoked by uid 500); 26 Mar 2008 17:55:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34580 invoked by uid 500); 26 Mar 2008 17:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34569 invoked by uid 99); 26 Mar 2008 17:55:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 10:55:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 17:54:43 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m2QHt4qe023140
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 18:55:04 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Improving Index Search Performance
Date: Wed, 26 Mar 2008 18:55:04 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <fa7518640803250543i6c1a5a81x2ea0ddb584576ff5@mail.gmail.com> <8c4e68610803260345q2e231ad6sce41ae946fe4efb7@mail.gmail.com> <fa7518640803260551u1d5ddb0eua1627ba55085aee@mail.gmail.com>
In-Reply-To: <fa7518640803260551u1d5ddb0eua1627ba55085aee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200803261855.04293.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Since you're using all the results for a query, and ignoring the
score value, you might try and do the same thing with a relational
database. But I would not expect that to be much faster,
especially when using a field cache.

Other than that, you could also go the other way, and try and 
add more data to the lucene index that can be used to reduce
the number of results to be fetched.

Regards,
Paul Elschot



Op Wednesday 26 March 2008 13:51:24 schreef Shailendra Mudgal:
> > The bottom line is that reading fields from docs is expensive.
> > FieldCache will, I believe, load fields for all documents but only
> > once - so the second and subsequent times it will be fast.  Even
> > without using a cache it is likely that things will speed up
> > because of caching by the OS.
>
> As i mentioned in my previous mail that the companyId is a
> multivalued field, so caching it will consume a lot of memory. And
> this way we'll have to keep the document vs field mapping also in the
> memory.
>
> > If you've got plenty of memory vs index size you could look at
> > RAMDirectory or MMapDirectory.  Or how about some solid state
> > disks? Someone recently posted some very impressive performance
> > stats.
>
> The index size is around 20G and the available Memory is 4G so,
> keeping the entire index into the memory  is not possible.   But as i
> mentioned earlier that it is using only 1 G out of 4 G, so is their a
> way to specify the lucene to cache more documents , say use 2G for
> caching the index ??
>
> I'll appreciate more suggestions on the same problem.
>
> Regards,
> Vipin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 18:14:26 2008
Return-Path: <java-user-return-33359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65201 invoked from network); 26 Mar 2008 18:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 18:14:23 -0000
Received: (qmail 75207 invoked by uid 500); 26 Mar 2008 18:14:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75176 invoked by uid 500); 26 Mar 2008 18:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75165 invoked by uid 99); 26 Mar 2008 18:14:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:14:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 18:13:34 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id 9A74D41836
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 15:13:43 -0300 (BRST)
Message-ID: <47EA9231.1010601@accurate.com.br>
Date: Wed, 26 Mar 2008 15:13:05 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Index "corruption" makes it return a different result
References: <47EA6155.1000304@accurate.com.br> <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>
In-Reply-To: <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-2, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

This is just one of the index files.

As I said, the local disk where the index is generated, it's not full, 
the full disk it's the shared storage where my application server store 
its logs.
When this disk hitted 100%, all the indexing process stop (of course, 
all the processing instances of this managed server stopped).

The "thing" is that the index was not corrupted, one of the index files 
has these log messages from my application server inside it, problably a 
JVM problem on mixing two IO buffers when one of them coudn't flush (the 
logs partition). For me it would be normal if it causes index 
corruption... :-)

The second and most weird thing it's that my clients application just 
read the index, and did some queries on it, always returning different 
(but consistent) results.

I tried to edit the index file, and remove the application server logs 
that was inside it, and after that?? Index Corrupted Exception! :-)

Wow!

I think this issue involves more stuff than just lucene... I had some 
problems in my JVM IO buffer handling of course. But my point(s) is the 
both above... ;-)

[]s,

Lucas




Michael McCandless wrote:
>
> I couldn't quite follow the part about "_al1.cfs".
>
> It sounds like your indexing process hit a disk full event, that led 
> to this error? Can you post the full exception(s) from the disk full?
>
> Which version of Lucene are you using?
>
> Mike
>
> Lucas F. A. Teixeira wrote:
>> Hello all!
>>
>> I had a problem this week, and I like to share with you all.
>> My weblogic server that generate my index hrows its logs in a shared 
>> storage. During my indexing process (SOLR+Lucene), this shared 
>> storage became 100% full, and everything collapsed (all servers that 
>> uses this shared storage). But my index (that is generated in the 
>> local filesystem, just "grabbed" some logs of the server (who knows 
>> weblogic knows the managed server accesslog, that's the guy) from the 
>> buffer (my supposition), and put inside my index files! Take a look 
>> how my "_al1.cfs" became between some binary parts of the file:
>>
>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    200    
>> -    /AcomProductSyncServiceWeb/AcomProductSyncService
>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    200    
>> -    /AcomProductSyncServiceWeb/AcomProductSyncService
>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
>> -    /AcomProductSyncServiceWeb/AcomProductSyncService
>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
>> -    /AcomProductSyncServiceWeb/AcomProductSyncService
>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    200    
>> -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>
>> The most incredible thing, is that I can open the index without a 
>> CorruptedIndexException, normally. That's really bad for me, cause 
>> the application didn't warn about a corrupted index (of course, it is 
>> not). I can open it with the Luke App, and with this simple code 
>> snippet accessing directly the lucene index without solr:
>>
>>        IndexReader indexReader = 
>> IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19"));
>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>>              TermQuery termQuery = new TermQuery(new Term("itemId", 
>> "680804"));
>>        Hits hits = indexSearcher.search(termQuery);
>>              Iterator itHits = hits.iterator();
>>        while (itHits.hasNext()) {
>>            Hit hit = (Hit) itHits.next();
>>            Document document = hit.getDocument();
>>            String itemId = document.getField("itemId").stringValue();
>>            System.out.println("itemId="+itemId);
>>        }
>>              indexSearcher.close();
>>        indexReader.close();
>>
>>
>> Ok, ok. But, if it's opening, whats my real problem?  Making this 
>> little search above, the Document that I got, was another one, with 
>> other information different from the original one that I was looking 
>> for (the one with the itemId field = 680804). The whole document was 
>> another document (but a valid document, that I've indexed before). 
>> The itemId value that I got, the one that was printed from that 
>> application above was 578340. Wow!!
>>
>> I can reproduce this error anytime with this code or with luke on 
>> this corrupted index, but was terrible for me to find the exact point 
>> of this fault.
>>
>> I've reindexed everything, it solves my problem. But I wants to know 
>> if someone have any idea why this happened...
>>
>> Thanks people!
>>
>> []s,
>>
>> Lucas Teixeira
>> lucas.teixeira@accurate.com.br
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 18:33:17 2008
Return-Path: <java-user-return-33360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81606 invoked from network); 26 Mar 2008 18:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 18:33:17 -0000
Received: (qmail 5243 invoked by uid 500); 26 Mar 2008 18:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5206 invoked by uid 500); 26 Mar 2008 18:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5195 invoked by uid 99); 26 Mar 2008 18:33:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:33:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 18:32:27 +0000
Received: by qb-out-0506.google.com with SMTP id o21so3598769qba.9
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 11:32:37 -0700 (PDT)
Received: by 10.142.131.18 with SMTP id e18mr517172wfd.207.1206556356632;
        Wed, 26 Mar 2008 11:32:36 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 31sm4444504wri.14.2008.03.26.11.32.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 26 Mar 2008 11:32:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47EA9231.1010601@accurate.com.br>
References: <47EA6155.1000304@accurate.com.br> <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com> <47EA9231.1010601@accurate.com.br>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Index "corruption" makes it return a different result
Date: Wed, 26 Mar 2008 14:32:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I think I follow now.

Which version of Lucene was this?

If it's not too large, can you post the CFS file that got mixed up?   
Be sure to cc me directly on the mail because the mailing list  
software removes attachments.

Mike

Lucas F. A. Teixeira wrote:
> This is just one of the index files.
>
> As I said, the local disk where the index is generated, it's not  
> full, the full disk it's the shared storage where my application  
> server store its logs.
> When this disk hitted 100%, all the indexing process stop (of  
> course, all the processing instances of this managed server stopped).
>
> The "thing" is that the index was not corrupted, one of the index  
> files has these log messages from my application server inside it,  
> problably a JVM problem on mixing two IO buffers when one of them  
> coudn't flush (the logs partition). For me it would be normal if it  
> causes index corruption... :-)
>
> The second and most weird thing it's that my clients application  
> just read the index, and did some queries on it, always returning  
> different (but consistent) results.
>
> I tried to edit the index file, and remove the application server  
> logs that was inside it, and after that?? Index Corrupted  
> Exception! :-)
>
> Wow!
>
> I think this issue involves more stuff than just lucene... I had  
> some problems in my JVM IO buffer handling of course. But my point 
> (s) is the both above... ;-)
>
> []s,
>
> Lucas
>
>
>
>
> Michael McCandless wrote:
>>
>> I couldn't quite follow the part about "_al1.cfs".
>>
>> It sounds like your indexing process hit a disk full event, that  
>> led to this error? Can you post the full exception(s) from the  
>> disk full?
>>
>> Which version of Lucene are you using?
>>
>> Mike
>>
>> Lucas F. A. Teixeira wrote:
>>> Hello all!
>>>
>>> I had a problem this week, and I like to share with you all.
>>> My weblogic server that generate my index hrows its logs in a  
>>> shared storage. During my indexing process (SOLR+Lucene), this  
>>> shared storage became 100% full, and everything collapsed (all  
>>> servers that uses this shared storage). But my index (that is  
>>> generated in the local filesystem, just "grabbed" some logs of  
>>> the server (who knows weblogic knows the managed server  
>>> accesslog, that's the guy) from the buffer (my supposition), and  
>>> put inside my index files! Take a look how my "_al1.cfs" became  
>>> between some binary parts of the file:
>>>
>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>
>>> The most incredible thing, is that I can open the index without a  
>>> CorruptedIndexException, normally. That's really bad for me,  
>>> cause the application didn't warn about a corrupted index (of  
>>> course, it is not). I can open it with the Luke App, and with  
>>> this simple code snippet accessing directly the lucene index  
>>> without solr:
>>>
>>>        IndexReader indexReader = IndexReader.open 
>>> (FSDirectory.getDirectory("C/index/index.2008-03-19"));
>>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>>>              TermQuery termQuery = new TermQuery(new Term 
>>> ("itemId", "680804"));
>>>        Hits hits = indexSearcher.search(termQuery);
>>>              Iterator itHits = hits.iterator();
>>>        while (itHits.hasNext()) {
>>>            Hit hit = (Hit) itHits.next();
>>>            Document document = hit.getDocument();
>>>            String itemId = document.getField("itemId").stringValue 
>>> ();
>>>            System.out.println("itemId="+itemId);
>>>        }
>>>              indexSearcher.close();
>>>        indexReader.close();
>>>
>>>
>>> Ok, ok. But, if it's opening, whats my real problem?  Making this  
>>> little search above, the Document that I got, was another one,  
>>> with other information different from the original one that I was  
>>> looking for (the one with the itemId field = 680804). The whole  
>>> document was another document (but a valid document, that I've  
>>> indexed before). The itemId value that I got, the one that was  
>>> printed from that application above was 578340. Wow!!
>>>
>>> I can reproduce this error anytime with this code or with luke on  
>>> this corrupted index, but was terrible for me to find the exact  
>>> point of this fault.
>>>
>>> I've reindexed everything, it solves my problem. But I wants to  
>>> know if someone have any idea why this happened...
>>>
>>> Thanks people!
>>>
>>> []s,
>>>
>>> Lucas Teixeira
>>> lucas.teixeira@accurate.com.br
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 18:35:22 2008
Return-Path: <java-user-return-33361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83148 invoked from network); 26 Mar 2008 18:35:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 18:35:22 -0000
Received: (qmail 8100 invoked by uid 500); 26 Mar 2008 18:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8061 invoked by uid 500); 26 Mar 2008 18:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8050 invoked by uid 99); 26 Mar 2008 18:35:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:35:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 18:34:35 +0000
Received: by an-out-0708.google.com with SMTP id c5so21329anc.49
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 11:34:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=Pv7o5tAJXEwkz6Dstnd965gi5P8yuQ7o60lQ4ss2rqQ=;
        b=Vja02lluVrVs2kNCfBHOPd3tv1x88XBOfhouTxlceznk/kUnR5Boy0bbpZyhUH15cPwWyL+/Yvp90s1K/CgOPtMR1yEPiqSAbSTenl++IOmfQ4jrwG2N+dc9ksIoVy9oB9+18fL3N8Qu62nTpm5+qY49G3sNOFsD5iPzY9TNbHI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=EwazCyammCY4WSzypIQaoyxZ3Yf9jM+/iIoQC4YVLpuFFIcjAd3mU0tyoGBg+HCZ2PhyyH6tQufrt/0YULS2OJIBLzrSP83FhWWkUhfn6RHsLrCie4Fjm5DCtkftD1SWHdEg7kuanMmJbjUkPix8U7rVTUgpP0ooys14MRBcdXA=
Received: by 10.100.251.5 with SMTP id y5mr697253anh.56.1206556486254;
        Wed, 26 Mar 2008 11:34:46 -0700 (PDT)
Received: by 10.100.229.4 with HTTP; Wed, 26 Mar 2008 11:34:46 -0700 (PDT)
Message-ID: <329a6c830803261134y80e6580u857a6ad51907a026@mail.gmail.com>
Date: Wed, 26 Mar 2008 19:34:46 +0100
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Is there a way to speed up boolean query if I don't care about score?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Suppose my query has "normal" part for which I want score as usual and
other part which is big disjunction (OR) query for which I just want
documents to match and don't care about scoring. Is there a way to
make it fast?
As far as I understand if 'no-score' part was the same in many queries
I could create filter for documents matching it and then make other
searches with 'normal' query and filter for 'no-score' part. But what
can I do in situation when this 'no-score' part is changing all the
time?
Thanks and regards,

wojtek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 18:38:57 2008
Return-Path: <java-user-return-33362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85999 invoked from network); 26 Mar 2008 18:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 18:38:57 -0000
Received: (qmail 12551 invoked by uid 500); 26 Mar 2008 18:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12512 invoked by uid 500); 26 Mar 2008 18:38:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12501 invoked by uid 99); 26 Mar 2008 18:38:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 11:38:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 18:38:10 +0000
Received: by ti-out-0910.google.com with SMTP id 28so1467580tif.11
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 11:38:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=21b5bCV69PPF4I6WPmFeNdmL+LwPnc3vcyX7/UCzxi8=;
        b=bQobeT6Pgc/giLlpnAL7y1A6tN0c2ClvNmSpLOroCZ7q3AmsdVMS11ItU0ycPELSGJKCMqSE6SeRxVVGsnSb5NHmUWTiG6wG+hpca7SP1XaR1n5PonN+o1gpRgOsjYtcZF7NT4RnH2wSp1N6PdJWeQM/wUf2Z5djBKw0Q271F1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=DZ1TBhWumwC7p0pdT74PZYZ9AoDyFapyI1wVteW2+vinwVOMquBSrEWzliJLYWsry/bzYVQvmhmSFKqPkVFNg9akdoPu+ZFxuLzYoCdhAoEsgeltg1ntPVd1KTLEAp0BIQ8UvSLyjOZ0rjHC1woD56FJCVBmoCd0So/xH7HUWrA=
Received: by 10.150.189.9 with SMTP id m9mr220555ybf.142.1206556699802;
        Wed, 26 Mar 2008 11:38:19 -0700 (PDT)
Received: by 10.150.156.2 with HTTP; Wed, 26 Mar 2008 11:38:19 -0700 (PDT)
Message-ID: <c68e39170803261138x2c0837b4uc44e6e74ce7fa60d@mail.gmail.com>
Date: Wed, 26 Mar 2008 14:38:19 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Index "corruption" makes it return a different result
In-Reply-To: <47EA9231.1010601@accurate.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47EA6155.1000304@accurate.com.br>
	 <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>
	 <47EA9231.1010601@accurate.com.br>
X-Google-Sender-Auth: 7669e1a827317ae7
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Mar 26, 2008 at 2:13 PM, Lucas F. A. Teixeira
<lucas.teixeira@accurate.com.br> wrote:
>  one of the index files
>  has these log messages from my application server inside it,

Wow!  That's a new one...

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 19:40:11 2008
Return-Path: <java-user-return-33363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21380 invoked from network); 26 Mar 2008 19:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 19:40:10 -0000
Received: (qmail 13278 invoked by uid 500); 26 Mar 2008 19:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13250 invoked by uid 500); 26 Mar 2008 19:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13239 invoked by uid 99); 26 Mar 2008 19:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 12:40:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 19:39:16 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id 4311B41899
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 16:39:26 -0300 (BRST)
Message-ID: <47EAA65E.4020107@accurate.com.br>
Date: Wed, 26 Mar 2008 16:39:10 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Index "corruption" makes it return a different result
References: <47EA6155.1000304@accurate.com.br> <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com> <47EA9231.1010601@accurate.com.br> <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com>
In-Reply-To: <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-2, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Michael!

Lucene version: 2.3.0

Here is some screenshot of editing the cfs file: 
http://img296.imageshack.us/my.php?image=indexow4.jpg

Take a look!

[]s,

Lucas

Michael McCandless wrote:
>
> OK I think I follow now.
>
> Which version of Lucene was this?
>
> If it's not too large, can you post the CFS file that got mixed up?  
> Be sure to cc me directly on the mail because the mailing list 
> software removes attachments.
>
> Mike
>
> Lucas F. A. Teixeira wrote:
>> This is just one of the index files.
>>
>> As I said, the local disk where the index is generated, it's not 
>> full, the full disk it's the shared storage where my application 
>> server store its logs.
>> When this disk hitted 100%, all the indexing process stop (of course, 
>> all the processing instances of this managed server stopped).
>>
>> The "thing" is that the index was not corrupted, one of the index 
>> files has these log messages from my application server inside it, 
>> problably a JVM problem on mixing two IO buffers when one of them 
>> coudn't flush (the logs partition). For me it would be normal if it 
>> causes index corruption... :-)
>>
>> The second and most weird thing it's that my clients application just 
>> read the index, and did some queries on it, always returning 
>> different (but consistent) results.
>>
>> I tried to edit the index file, and remove the application server 
>> logs that was inside it, and after that?? Index Corrupted Exception! :-)
>>
>> Wow!
>>
>> I think this issue involves more stuff than just lucene... I had some 
>> problems in my JVM IO buffer handling of course. But my point(s) is 
>> the both above... ;-)
>>
>> []s,
>>
>> Lucas
>>
>>
>>
>>
>> Michael McCandless wrote:
>>>
>>> I couldn't quite follow the part about "_al1.cfs".
>>>
>>> It sounds like your indexing process hit a disk full event, that led 
>>> to this error? Can you post the full exception(s) from the disk full?
>>>
>>> Which version of Lucene are you using?
>>>
>>> Mike
>>>
>>> Lucas F. A. Teixeira wrote:
>>>> Hello all!
>>>>
>>>> I had a problem this week, and I like to share with you all.
>>>> My weblogic server that generate my index hrows its logs in a 
>>>> shared storage. During my indexing process (SOLR+Lucene), this 
>>>> shared storage became 100% full, and everything collapsed (all 
>>>> servers that uses this shared storage). But my index (that is 
>>>> generated in the local filesystem, just "grabbed" some logs of the 
>>>> server (who knows weblogic knows the managed server accesslog, 
>>>> that's the guy) from the buffer (my supposition), and put inside my 
>>>> index files! Take a look how my "_al1.cfs" became between some 
>>>> binary parts of the file:
>>>>
>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    
>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    
>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>
>>>> The most incredible thing, is that I can open the index without a 
>>>> CorruptedIndexException, normally. That's really bad for me, cause 
>>>> the application didn't warn about a corrupted index (of course, it 
>>>> is not). I can open it with the Luke App, and with this simple code 
>>>> snippet accessing directly the lucene index without solr:
>>>>
>>>>        IndexReader indexReader = 
>>>> IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19")); 
>>>>
>>>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>>>>              TermQuery termQuery = new TermQuery(new Term("itemId", 
>>>> "680804"));
>>>>        Hits hits = indexSearcher.search(termQuery);
>>>>              Iterator itHits = hits.iterator();
>>>>        while (itHits.hasNext()) {
>>>>            Hit hit = (Hit) itHits.next();
>>>>            Document document = hit.getDocument();
>>>>            String itemId = document.getField("itemId").stringValue();
>>>>            System.out.println("itemId="+itemId);
>>>>        }
>>>>              indexSearcher.close();
>>>>        indexReader.close();
>>>>
>>>>
>>>> Ok, ok. But, if it's opening, whats my real problem?  Making this 
>>>> little search above, the Document that I got, was another one, with 
>>>> other information different from the original one that I was 
>>>> looking for (the one with the itemId field = 680804). The whole 
>>>> document was another document (but a valid document, that I've 
>>>> indexed before). The itemId value that I got, the one that was 
>>>> printed from that application above was 578340. Wow!!
>>>>
>>>> I can reproduce this error anytime with this code or with luke on 
>>>> this corrupted index, but was terrible for me to find the exact 
>>>> point of this fault.
>>>>
>>>> I've reindexed everything, it solves my problem. But I wants to 
>>>> know if someone have any idea why this happened...
>>>>
>>>> Thanks people!
>>>>
>>>> []s,
>>>>
>>>> Lucas Teixeira
>>>> lucas.teixeira@accurate.com.br
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 19:40:31 2008
Return-Path: <java-user-return-33364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21514 invoked from network); 26 Mar 2008 19:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 19:40:31 -0000
Received: (qmail 15277 invoked by uid 500); 26 Mar 2008 19:40:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15251 invoked by uid 500); 26 Mar 2008 19:40:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15240 invoked by uid 99); 26 Mar 2008 19:40:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 12:40:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 19:39:29 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id BA0E0418BC
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 16:39:48 -0300 (BRST)
Message-ID: <47EAA674.50300@accurate.com.br>
Date: Wed, 26 Mar 2008 16:39:32 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Index "corruption" makes it return a different result
References: <47EA6155.1000304@accurate.com.br>	 <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>	 <47EA9231.1010601@accurate.com.br> <c68e39170803261138x2c0837b4uc44e6e74ce7fa60d@mail.gmail.com>
In-Reply-To: <c68e39170803261138x2c0837b4uc44e6e74ce7fa60d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-2, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

LOL, I know....
Take a look, editing the cfs file: 
http://img296.imageshack.us/my.php?image=indexow4.jpg

[]s,

Lucas

Yonik Seeley wrote:
> On Wed, Mar 26, 2008 at 2:13 PM, Lucas F. A. Teixeira
> <lucas.teixeira@accurate.com.br> wrote:
>   
>>  one of the index files
>>  has these log messages from my application server inside it,
>>     
>
> Wow!  That's a new one...
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 19:47:25 2008
Return-Path: <java-user-return-33365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23630 invoked from network); 26 Mar 2008 19:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 19:47:24 -0000
Received: (qmail 23936 invoked by uid 500); 26 Mar 2008 19:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23900 invoked by uid 500); 26 Mar 2008 19:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23889 invoked by uid 99); 26 Mar 2008 19:47:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 12:47:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 19:46:34 +0000
Received: by qb-out-0506.google.com with SMTP id o21so3622926qba.9
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 12:46:43 -0700 (PDT)
Received: by 10.143.164.19 with SMTP id r19mr655332wfo.179.1206560801662;
        Wed, 26 Mar 2008 12:46:41 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id q30sm15347203wrq.36.2008.03.26.12.46.40
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 26 Mar 2008 12:46:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47EAA65E.4020107@accurate.com.br>
References: <47EA6155.1000304@accurate.com.br> <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com> <47EA9231.1010601@accurate.com.br> <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com> <47EAA65E.4020107@accurate.com.br>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <278F5344-CB5A-4C51-B78D-FAA6F66A69C7@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Index "corruption" makes it return a different result
Date: Wed, 26 Mar 2008 15:46:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK.

I would recommend upgrading to 2.3.1.  There were some corruption  
issues with term vectors that could cause the wrong document's term  
vectors to come back.

That screen shot is spooky!  Is it possible that one of the documents  
you indexed had that content?  (It could simply be a stored field).

Mike

Lucas F. A. Teixeira wrote:
> Thanks Michael!
>
> Lucene version: 2.3.0
>
> Here is some screenshot of editing the cfs file: http:// 
> img296.imageshack.us/my.php?image=indexow4.jpg
>
> Take a look!
>
> []s,
>
> Lucas
>
> Michael McCandless wrote:
>>
>> OK I think I follow now.
>>
>> Which version of Lucene was this?
>>
>> If it's not too large, can you post the CFS file that got mixed  
>> up?  Be sure to cc me directly on the mail because the mailing  
>> list software removes attachments.
>>
>> Mike
>>
>> Lucas F. A. Teixeira wrote:
>>> This is just one of the index files.
>>>
>>> As I said, the local disk where the index is generated, it's not  
>>> full, the full disk it's the shared storage where my application  
>>> server store its logs.
>>> When this disk hitted 100%, all the indexing process stop (of  
>>> course, all the processing instances of this managed server  
>>> stopped).
>>>
>>> The "thing" is that the index was not corrupted, one of the index  
>>> files has these log messages from my application server inside  
>>> it, problably a JVM problem on mixing two IO buffers when one of  
>>> them coudn't flush (the logs partition). For me it would be  
>>> normal if it causes index corruption... :-)
>>>
>>> The second and most weird thing it's that my clients application  
>>> just read the index, and did some queries on it, always returning  
>>> different (but consistent) results.
>>>
>>> I tried to edit the index file, and remove the application server  
>>> logs that was inside it, and after that?? Index Corrupted  
>>> Exception! :-)
>>>
>>> Wow!
>>>
>>> I think this issue involves more stuff than just lucene... I had  
>>> some problems in my JVM IO buffer handling of course. But my point 
>>> (s) is the both above... ;-)
>>>
>>> []s,
>>>
>>> Lucas
>>>
>>>
>>>
>>>
>>> Michael McCandless wrote:
>>>>
>>>> I couldn't quite follow the part about "_al1.cfs".
>>>>
>>>> It sounds like your indexing process hit a disk full event, that  
>>>> led to this error? Can you post the full exception(s) from the  
>>>> disk full?
>>>>
>>>> Which version of Lucene are you using?
>>>>
>>>> Mike
>>>>
>>>> Lucas F. A. Teixeira wrote:
>>>>> Hello all!
>>>>>
>>>>> I had a problem this week, and I like to share with you all.
>>>>> My weblogic server that generate my index hrows its logs in a  
>>>>> shared storage. During my indexing process (SOLR+Lucene), this  
>>>>> shared storage became 100% full, and everything collapsed (all  
>>>>> servers that uses this shared storage). But my index (that is  
>>>>> generated in the local filesystem, just "grabbed" some logs of  
>>>>> the server (who knows weblogic knows the managed server  
>>>>> accesslog, that's the guy) from the buffer (my supposition),  
>>>>> and put inside my index files! Take a look how my "_al1.cfs"  
>>>>> became between some binary parts of the file:
>>>>>
>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -     
>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -     
>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>
>>>>> The most incredible thing, is that I can open the index without  
>>>>> a CorruptedIndexException, normally. That's really bad for me,  
>>>>> cause the application didn't warn about a corrupted index (of  
>>>>> course, it is not). I can open it with the Luke App, and with  
>>>>> this simple code snippet accessing directly the lucene index  
>>>>> without solr:
>>>>>
>>>>>        IndexReader indexReader = IndexReader.open 
>>>>> (FSDirectory.getDirectory("C/index/index.2008-03-19"));
>>>>>        IndexSearcher indexSearcher = new IndexSearcher 
>>>>> (indexReader);
>>>>>              TermQuery termQuery = new TermQuery(new Term 
>>>>> ("itemId", "680804"));
>>>>>        Hits hits = indexSearcher.search(termQuery);
>>>>>              Iterator itHits = hits.iterator();
>>>>>        while (itHits.hasNext()) {
>>>>>            Hit hit = (Hit) itHits.next();
>>>>>            Document document = hit.getDocument();
>>>>>            String itemId = document.getField 
>>>>> ("itemId").stringValue();
>>>>>            System.out.println("itemId="+itemId);
>>>>>        }
>>>>>              indexSearcher.close();
>>>>>        indexReader.close();
>>>>>
>>>>>
>>>>> Ok, ok. But, if it's opening, whats my real problem?  Making  
>>>>> this little search above, the Document that I got, was another  
>>>>> one, with other information different from the original one  
>>>>> that I was looking for (the one with the itemId field =  
>>>>> 680804). The whole document was another document (but a valid  
>>>>> document, that I've indexed before). The itemId value that I  
>>>>> got, the one that was printed from that application above was  
>>>>> 578340. Wow!!
>>>>>
>>>>> I can reproduce this error anytime with this code or with luke  
>>>>> on this corrupted index, but was terrible for me to find the  
>>>>> exact point of this fault.
>>>>>
>>>>> I've reindexed everything, it solves my problem. But I wants to  
>>>>> know if someone have any idea why this happened...
>>>>>
>>>>> Thanks people!
>>>>>
>>>>> []s,
>>>>>
>>>>> Lucas Teixeira
>>>>> lucas.teixeira@accurate.com.br
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 19:57:12 2008
Return-Path: <java-user-return-33366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27618 invoked from network); 26 Mar 2008 19:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 19:57:12 -0000
Received: (qmail 37611 invoked by uid 500); 26 Mar 2008 19:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37583 invoked by uid 500); 26 Mar 2008 19:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37572 invoked by uid 99); 26 Mar 2008 19:57:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 12:57:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 19:56:21 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id 3ABF7417FA
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 16:56:30 -0300 (BRST)
Message-ID: <47EAAA60.1020706@accurate.com.br>
Date: Wed, 26 Mar 2008 16:56:16 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Index "corruption" makes it return a different result
References: <47EA6155.1000304@accurate.com.br> <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com> <47EA9231.1010601@accurate.com.br> <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com> <47EAA65E.4020107@accurate.com.br> <278F5344-CB5A-4C51-B78D-FAA6F66A69C7@mikemccandless.com>
In-Reply-To: <278F5344-CB5A-4C51-B78D-FAA6F66A69C7@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-2, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

100% Impossible...

My index has 1 xml, 3 number fields, 1 aphanumeric field. *always*

:-)

Lucas



Michael McCandless wrote:
>
> OK.
>
> I would recommend upgrading to 2.3.1.  There were some corruption 
> issues with term vectors that could cause the wrong document's term 
> vectors to come back.
>
> That screen shot is spooky!  Is it possible that one of the documents 
> you indexed had that content?  (It could simply be a stored field).
>
> Mike
>
> Lucas F. A. Teixeira wrote:
>> Thanks Michael!
>>
>> Lucene version: 2.3.0
>>
>> Here is some screenshot of editing the cfs file: 
>> http://img296.imageshack.us/my.php?image=indexow4.jpg
>>
>> Take a look!
>>
>> []s,
>>
>> Lucas
>>
>> Michael McCandless wrote:
>>>
>>> OK I think I follow now.
>>>
>>> Which version of Lucene was this?
>>>
>>> If it's not too large, can you post the CFS file that got mixed up?  
>>> Be sure to cc me directly on the mail because the mailing list 
>>> software removes attachments.
>>>
>>> Mike
>>>
>>> Lucas F. A. Teixeira wrote:
>>>> This is just one of the index files.
>>>>
>>>> As I said, the local disk where the index is generated, it's not 
>>>> full, the full disk it's the shared storage where my application 
>>>> server store its logs.
>>>> When this disk hitted 100%, all the indexing process stop (of 
>>>> course, all the processing instances of this managed server stopped).
>>>>
>>>> The "thing" is that the index was not corrupted, one of the index 
>>>> files has these log messages from my application server inside it, 
>>>> problably a JVM problem on mixing two IO buffers when one of them 
>>>> coudn't flush (the logs partition). For me it would be normal if it 
>>>> causes index corruption... :-)
>>>>
>>>> The second and most weird thing it's that my clients application 
>>>> just read the index, and did some queries on it, always returning 
>>>> different (but consistent) results.
>>>>
>>>> I tried to edit the index file, and remove the application server 
>>>> logs that was inside it, and after that?? Index Corrupted 
>>>> Exception! :-)
>>>>
>>>> Wow!
>>>>
>>>> I think this issue involves more stuff than just lucene... I had 
>>>> some problems in my JVM IO buffer handling of course. But my 
>>>> point(s) is the both above... ;-)
>>>>
>>>> []s,
>>>>
>>>> Lucas
>>>>
>>>>
>>>>
>>>>
>>>> Michael McCandless wrote:
>>>>>
>>>>> I couldn't quite follow the part about "_al1.cfs".
>>>>>
>>>>> It sounds like your indexing process hit a disk full event, that 
>>>>> led to this error? Can you post the full exception(s) from the 
>>>>> disk full?
>>>>>
>>>>> Which version of Lucene are you using?
>>>>>
>>>>> Mike
>>>>>
>>>>> Lucas F. A. Teixeira wrote:
>>>>>> Hello all!
>>>>>>
>>>>>> I had a problem this week, and I like to share with you all.
>>>>>> My weblogic server that generate my index hrows its logs in a 
>>>>>> shared storage. During my indexing process (SOLR+Lucene), this 
>>>>>> shared storage became 100% full, and everything collapsed (all 
>>>>>> servers that uses this shared storage). But my index (that is 
>>>>>> generated in the local filesystem, just "grabbed" some logs of 
>>>>>> the server (who knows weblogic knows the managed server 
>>>>>> accesslog, that's the guy) from the buffer (my supposition), and 
>>>>>> put inside my index files! Take a look how my "_al1.cfs" became 
>>>>>> between some binary parts of the file:
>>>>>>
>>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    
>>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -    
>>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -    
>>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>>>>>
>>>>>> The most incredible thing, is that I can open the index without a 
>>>>>> CorruptedIndexException, normally. That's really bad for me, 
>>>>>> cause the application didn't warn about a corrupted index (of 
>>>>>> course, it is not). I can open it with the Luke App, and with 
>>>>>> this simple code snippet accessing directly the lucene index 
>>>>>> without solr:
>>>>>>
>>>>>>        IndexReader indexReader = 
>>>>>> IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19")); 
>>>>>>
>>>>>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>>>>>>              TermQuery termQuery = new TermQuery(new 
>>>>>> Term("itemId", "680804"));
>>>>>>        Hits hits = indexSearcher.search(termQuery);
>>>>>>              Iterator itHits = hits.iterator();
>>>>>>        while (itHits.hasNext()) {
>>>>>>            Hit hit = (Hit) itHits.next();
>>>>>>            Document document = hit.getDocument();
>>>>>>            String itemId = 
>>>>>> document.getField("itemId").stringValue();
>>>>>>            System.out.println("itemId="+itemId);
>>>>>>        }
>>>>>>              indexSearcher.close();
>>>>>>        indexReader.close();
>>>>>>
>>>>>>
>>>>>> Ok, ok. But, if it's opening, whats my real problem?  Making this 
>>>>>> little search above, the Document that I got, was another one, 
>>>>>> with other information different from the original one that I was 
>>>>>> looking for (the one with the itemId field = 680804). The whole 
>>>>>> document was another document (but a valid document, that I've 
>>>>>> indexed before). The itemId value that I got, the one that was 
>>>>>> printed from that application above was 578340. Wow!!
>>>>>>
>>>>>> I can reproduce this error anytime with this code or with luke on 
>>>>>> this corrupted index, but was terrible for me to find the exact 
>>>>>> point of this fault.
>>>>>>
>>>>>> I've reindexed everything, it solves my problem. But I wants to 
>>>>>> know if someone have any idea why this happened...
>>>>>>
>>>>>> Thanks people!
>>>>>>
>>>>>> []s,
>>>>>>
>>>>>> Lucas Teixeira
>>>>>> lucas.teixeira@accurate.com.br
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 20:49:34 2008
Return-Path: <java-user-return-33367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49658 invoked from network); 26 Mar 2008 20:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 20:49:34 -0000
Received: (qmail 25617 invoked by uid 500); 26 Mar 2008 20:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25587 invoked by uid 500); 26 Mar 2008 20:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25576 invoked by uid 99); 26 Mar 2008 20:49:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 13:49:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 20:48:33 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m2QKmrk18419
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 13:48:53 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008032613485202480
 for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 13:48:52 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JecYG-0006oD-00
	for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 13:48:52 -0700
Message-ID: <47EAB6AF.3080808@ai.sri.com>
Date: Wed, 26 Mar 2008 13:48:47 -0700
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
References: <972815.18435.qm@web50305.mail.re2.yahoo.com> <47E9D046.9090405@ai.sri.com> <D7206503EB5BE94497458AF4FE4AE8AB6EE8B7@owamz.healy-hudson.com>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB6EE8B7@owamz.healy-hudson.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Uwe, for your clarification and for sharing your experience 
which is very helpful!


Jay

Uwe Goetzke wrote:
> Hi Jay,
> 
> Sorry for the confusion, I wrote NgramStemFilter in an early stage of the project which is essentially the same as NGramTokenFilter from Otis with the addition that I add begin and end token markers (e.g. word gets and _word_ and so  _w wo rd d_ ). 
> 
> As I modified a lot of our lucene code which we developed since lucene version 1.2 to move to a 2.x version, I did not notice of the existence of NGramTokenFilter.
> 
> Stemming is anyway not useful for our problem domain (product catalogs).
> We chained WhiteSpace Tokenizer with a modified version of ISOLatin1AccentFilter to nomalize some character based language aspects (e.g.  = ss,  = oe), then make the token Lowercase before getting the bigrams. 
> The advantage for us is anyway the TolerantPhraseQuery (see my other post " AW: Implement a relaxed PhraseQuery?") which gives us a first step for less language dependent searching.
> 
> Regards Uwe
> 
> -----Ursprngliche Nachricht-----
> Von: yu [mailto:yu@AI.SRI.COM] 
> Gesendet: Mittwoch, 26. Mrz 2008 05:26
> An: java-user@lucene.apache.org
> Betreff: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
> 
> Sorry for my ignorance, I am looking for
> 
> NgramStemFilter specifically.
> Are you suggesting that it's the same as NGramTokenFilter? Does it have stemming in it?
> 
> Thanks again.
> 
> Jay
> 
> 
> Otis Gospodnetic wrote:
>> Sorry, I wrote this stuff, but forgot the naming.
>> Look: http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/org/apache/lucene/analysis/ngram/package-summary.html
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: yu <yu@AI.SRI.COM>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, March 26, 2008 12:04:33 AM
>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>
>> Hi Otis,
>> I checked that contrib before and could not find NgramStemFilter. Am I 
>> missing other contrib?
>> Thanks for the link!
>>
>> Jay
>>
>> Otis Gospodnetic wrote:
>>   
>>> Hi Jay,
>>>
>>> Sorry, lapsus calami, that would be Lucene *contrib*.
>>> Have a look:
>>> http://lucene.apache.org/java/2_3_1/api/contrib-analyzers/index.html
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>> ----- Original Message ----
>>> From: Jay <yu@AI.SRI.COM>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, March 25, 2008 6:15:54 PM
>>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>
>>> Sorry, I could not find the filter in the 2.3 API class list (core + 
>>> contrib + test). I am not ware of lucene config file either. Could you 
>>> please tell me where it is in 2.3 release?
>>>
>>> Thanks!
>>>
>>> Jay
>>>
>>> Otis Gospodnetic wrote:
>>>   
>>>     
>>>> Jay,
>>>>
>>>> Have a look at Lucene config, it's all there, including tests.  This filter will take a token such as "foobar" and chop it up into n-grams (e.g. foobar -> fo oo ob ba ar would be a set of bi-grams).  You can specify the n-gram size and even min and max n-gram size.
>>>>
>>>> Otis
>>>> --
>>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>>
>>>> ----- Original Message ----
>>>> From: Jay <yu@AI.SRI.COM>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Tuesday, March 25, 2008 1:32:24 PM
>>>> Subject: Re: AW: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>>
>>>> Hi Uwe,
>>>>
>>>> I am curious what NGramStemFilter is? Is it a combination of porter 
>>>> stemming and word ngram identification?
>>>>
>>>> Thanks!
>>>>
>>>> Jay
>>>>
>>>> Uwe Goetzke wrote:
>>>>     
>>>>       
>>>>> Hi Ivan,
>>>>> No, we do not use StandardAnalyser or StandardTokenizer.
>>>>>
>>>>> Most data is processed by 
>>>>>     fTextTokenStream = result = new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
>>>>>     result = new ISOLatin2AccentFilter(result); // ISOLatin1AccentFilter  modified that  -> oe
>>>>>     result = new org.apache.lucene.analysis.LowerCaseFilter(result);
>>>>>     result = new org.apache.lucene.analysis.NGramStemFilter(result,2); //just a bigram tokenizer
>>>>>
>>>>> We use our own queryparser. The bigramms are searched with a tolerant phrase query, scoring in a doc the greatest bigramms clusters covering the phrase token. 
>>>>>
>>>>> Best Regards
>>>>>
>>>>> Uwe
>>>>>
>>>>> -----Ursprngliche Nachricht-----
>>>>> Von: Ivan Vasilev [mailto:ivasilev@sirma.bg] 
>>>>> Gesendet: Freitag, 21. Mrz 2008 16:25
>>>>> An: java-user@lucene.apache.org
>>>>> Betreff: Re: feedback: Indexing speed improvement lucene 2.2->2.3.1
>>>>>
>>>>> Hi Uwe,
>>>>>
>>>>> Could you tell what Analyzer do you use when you marked so big indexing 
>>>>> speedup?
>>>>> If you use StandardAnalyzer (that uses StandardTokenizer) may be the 
>>>>> reason is in it. You can see the pre last report in the thread "Indexing 
>>>>> Speed: 2.3 vs 2.2 (real world numbers)". According to the reporter Jake 
>>>>> Mannix this is because now StandardTokenizer uses StandardTokenizerImpl 
>>>>> that now is generated by JFlex instead of JavaCC.
>>>>> I am asking because I noticed a great speedup in adding documents to 
>>>>> index in our system. We have time control on this in the debug mode. NOW 
>>>>> THEY ARE ADDED 5 TIMES FASTER!!!
>>>>> But in the same time the total process of indexing in our case has 
>>>>> improvement of about 8%. As our system is very big and complex I am 
>>>>> wondering if really the whole process of indexing is reduces so 
>>>>> remarkably and our system causes this slowdown or may be Lucene does 
>>>>> some optimizations on the index, merges or something else and this is 
>>>>> the reason the total process of indexing to be not so reasonably faster.
>>>>>
>>>>> Best Regards,
>>>>> Ivan
>>>>>
>>>>>
>>>>>
>>>>> Uwe Goetzke wrote:
>>>>>       
>>>>>         
>>>>>> This week I switched the lucene library version on one customer system.
>>>>>> The indexing speed went down from 46m32s to 16m20s for the complete task
>>>>>> including optimisation. Great Job!
>>>>>> We index product catalogs from several suppliers, in this case around
>>>>>> 56.000 product groups and 360.000 products including descriptions were
>>>>>> indexed.
>>>>>>
>>>>>> Regards
>>>>>>
>>>>>> Uwe
>>>>>>
>>>>>>
>>>>>>
> 
> 
> -----------------------------------------------------------------------
> Healy Hudson GmbH - D-55252 Mainz Kastel
> Geschftsfhrer Christian Konhuser - Amtsgericht Wiesbaden HRB 12076
> 
> Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte Empfnger sind, drfen Sie die Informationen nicht offen legen oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den Absender zurckschicken. Bitte lschen Sie danach diese Email.
> This email is confidential. If you are not the intended recipient, you must not disclose or use this information contained in it. If you have received this email in error please tell us immediately by return email and delete the document.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 26 21:54:25 2008
Return-Path: <java-user-return-33368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87607 invoked from network); 26 Mar 2008 21:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Mar 2008 21:54:24 -0000
Received: (qmail 39104 invoked by uid 500); 26 Mar 2008 21:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39078 invoked by uid 500); 26 Mar 2008 21:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39067 invoked by uid 99); 26 Mar 2008 21:54:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 14:54:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.246] (HELO ag-out-0708.google.com) (72.14.246.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 21:53:32 +0000
Received: by ag-out-0708.google.com with SMTP id 35so7291243aga.11
        for <java-user@lucene.apache.org>; Wed, 26 Mar 2008 14:53:41 -0700 (PDT)
Received: by 10.100.105.15 with SMTP id d15mr1178809anc.53.1206568420915;
        Wed, 26 Mar 2008 14:53:40 -0700 (PDT)
Received: by 10.100.135.6 with HTTP; Wed, 26 Mar 2008 14:53:40 -0700 (PDT)
Message-ID: <9ac0c6aa0803261453w33ea9bave055341984ed5b8f@mail.gmail.com>
Date: Wed, 26 Mar 2008 17:53:40 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Index "corruption" makes it return a different result
In-Reply-To: <47EAAA60.1020706@accurate.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47EA6155.1000304@accurate.com.br>
	 <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>
	 <47EA9231.1010601@accurate.com.br>
	 <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com>
	 <47EAA65E.4020107@accurate.com.br>
	 <278F5344-CB5A-4C51-B78D-FAA6F66A69C7@mikemccandless.com>
	 <47EAAA60.1020706@accurate.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

[Lucas sent me a zip of the index - thanks!]

I ran CheckIndex on the index and it said this on your _al1 segment:

java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1000
	at org.apache.lucene.util.BitVector.get(BitVector.java:72)
	at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:120)
	at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:95)
	at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:205)
	at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:382)

I unpacked the CFS file and sure enough the file _al1.frq, which
holds the frequency of each term in each doc, was somehow modified: it
had 78 of those log lines (8148 bytes) inserted in the front.  When I
removed those lines then CheckIndex runs fine.

This is very odd.  Somehow your app server modified the frq file
before it was added to the CFS file.  Very strange.

Mike

Lucas F. A. Teixeira <lucas.teixeira@accurate.com.br> wrote:
> 100% Impossible...
>
>  My index has 1 xml, 3 number fields, 1 aphanumeric field. *always*
>
>  :-)
>
>
>
>  Lucas
>
>
>
>  Michael McCandless wrote:
>  >
>  > OK.
>  >
>  > I would recommend upgrading to 2.3.1.  There were some corruption
>  > issues with term vectors that could cause the wrong document's term
>  > vectors to come back.
>  >
>  > That screen shot is spooky!  Is it possible that one of the documents
>  > you indexed had that content?  (It could simply be a stored field).
>  >
>  > Mike
>  >
>  > Lucas F. A. Teixeira wrote:
>  >> Thanks Michael!
>  >>
>  >> Lucene version: 2.3.0
>  >>
>  >> Here is some screenshot of editing the cfs file:
>  >> http://img296.imageshack.us/my.php?image=indexow4.jpg
>  >>
>  >> Take a look!
>  >>
>  >> []s,
>  >>
>  >> Lucas
>  >>
>  >> Michael McCandless wrote:
>  >>>
>  >>> OK I think I follow now.
>  >>>
>  >>> Which version of Lucene was this?
>  >>>
>  >>> If it's not too large, can you post the CFS file that got mixed up?
>  >>> Be sure to cc me directly on the mail because the mailing list
>  >>> software removes attachments.
>  >>>
>  >>> Mike
>  >>>
>  >>> Lucas F. A. Teixeira wrote:
>  >>>> This is just one of the index files.
>  >>>>
>  >>>> As I said, the local disk where the index is generated, it's not
>  >>>> full, the full disk it's the shared storage where my application
>  >>>> server store its logs.
>  >>>> When this disk hitted 100%, all the indexing process stop (of
>  >>>> course, all the processing instances of this managed server stopped).
>  >>>>
>  >>>> The "thing" is that the index was not corrupted, one of the index
>  >>>> files has these log messages from my application server inside it,
>  >>>> problably a JVM problem on mixing two IO buffers when one of them
>  >>>> coudn't flush (the logs partition). For me it would be normal if it
>  >>>> causes index corruption... :-)
>  >>>>
>  >>>> The second and most weird thing it's that my clients application
>  >>>> just read the index, and did some queries on it, always returning
>  >>>> different (but consistent) results.
>  >>>>
>  >>>> I tried to edit the index file, and remove the application server
>  >>>> logs that was inside it, and after that?? Index Corrupted
>  >>>> Exception! :-)
>  >>>>
>  >>>> Wow!
>  >>>>
>  >>>> I think this issue involves more stuff than just lucene... I had
>  >>>> some problems in my JVM IO buffer handling of course. But my
>  >>>> point(s) is the both above... ;-)
>  >>>>
>  >>>> []s,
>  >>>>
>  >>>> Lucas
>  >>>>
>  >>>>
>  >>>>
>  >>>>
>  >>>> Michael McCandless wrote:
>  >>>>>
>  >>>>> I couldn't quite follow the part about "_al1.cfs".
>  >>>>>
>  >>>>> It sounds like your indexing process hit a disk full event, that
>  >>>>> led to this error? Can you post the full exception(s) from the
>  >>>>> disk full?
>  >>>>>
>  >>>>> Which version of Lucene are you using?
>  >>>>>
>  >>>>> Mike
>  >>>>>
>  >>>>> Lucas F. A. Teixeira wrote:
>  >>>>>> Hello all!
>  >>>>>>
>  >>>>>> I had a problem this week, and I like to share with you all.
>  >>>>>> My weblogic server that generate my index hrows its logs in a
>  >>>>>> shared storage. During my indexing process (SOLR+Lucene), this
>  >>>>>> shared storage became 100% full, and everything collapsed (all
>  >>>>>> servers that uses this shared storage). But my index (that is
>  >>>>>> generated in the local filesystem, just "grabbed" some logs of
>  >>>>>> the server (who knows weblogic knows the managed server
>  >>>>>> accesslog, that's the guy) from the buffer (my supposition), and
>  >>>>>> put inside my index files! Take a look how my "_al1.cfs" became
>  >>>>>> between some binary parts of the file:
>  >>>>>>
>  >>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -
>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>  >>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -
>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>  >>>>>>
>  >>>>>> The most incredible thing, is that I can open the index without a
>  >>>>>> CorruptedIndexException, normally. That's really bad for me,
>  >>>>>> cause the application didn't warn about a corrupted index (of
>  >>>>>> course, it is not). I can open it with the Luke App, and with
>  >>>>>> this simple code snippet accessing directly the lucene index
>  >>>>>> without solr:
>  >>>>>>
>  >>>>>>        IndexReader indexReader =
>  >>>>>> IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19"));
>  >>>>>>
>  >>>>>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>  >>>>>>              TermQuery termQuery = new TermQuery(new
>  >>>>>> Term("itemId", "680804"));
>  >>>>>>        Hits hits = indexSearcher.search(termQuery);
>  >>>>>>              Iterator itHits = hits.iterator();
>  >>>>>>        while (itHits.hasNext()) {
>  >>>>>>            Hit hit = (Hit) itHits.next();
>  >>>>>>            Document document = hit.getDocument();
>  >>>>>>            String itemId =
>  >>>>>> document.getField("itemId").stringValue();
>  >>>>>>            System.out.println("itemId="+itemId);
>  >>>>>>        }
>  >>>>>>              indexSearcher.close();
>  >>>>>>        indexReader.close();
>  >>>>>>
>  >>>>>>
>  >>>>>> Ok, ok. But, if it's opening, whats my real problem?  Making this
>  >>>>>> little search above, the Document that I got, was another one,
>  >>>>>> with other information different from the original one that I was
>  >>>>>> looking for (the one with the itemId field = 680804). The whole
>  >>>>>> document was another document (but a valid document, that I've
>  >>>>>> indexed before). The itemId value that I got, the one that was
>  >>>>>> printed from that application above was 578340. Wow!!
>  >>>>>>
>  >>>>>> I can reproduce this error anytime with this code or with luke on
>  >>>>>> this corrupted index, but was terrible for me to find the exact
>  >>>>>> point of this fault.
>  >>>>>>
>  >>>>>> I've reindexed everything, it solves my problem. But I wants to
>  >>>>>> know if someone have any idea why this happened...
>  >>>>>>
>  >>>>>> Thanks people!
>  >>>>>>
>  >>>>>> []s,
>  >>>>>>
>  >>>>>> Lucas Teixeira
>  >>>>>> lucas.teixeira@accurate.com.br
>  >>>>>>
>  >>>>>>
>  >>>>>> ---------------------------------------------------------------------
>  >>>>>>
>  >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>>>>
>  >>>>>
>  >>>>>
>  >>>>> ---------------------------------------------------------------------
>  >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>
>  >>>> ---------------------------------------------------------------------
>  >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>>
>  >>>
>  >>>
>  >>> ---------------------------------------------------------------------
>  >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>>
>  >>>
>  >>>
>  >>
>  >> ---------------------------------------------------------------------
>  >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>
>  >
>  >
>  > ---------------------------------------------------------------------
>
>
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 04:16:46 2008
Return-Path: <java-user-return-33369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53165 invoked from network); 27 Mar 2008 04:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 04:16:46 -0000
Received: (qmail 60677 invoked by uid 500); 27 Mar 2008 04:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60634 invoked by uid 500); 27 Mar 2008 04:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60623 invoked by uid 99); 27 Mar 2008 04:16:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 21:16:38 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 04:15:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JejX6-0000kD-2i
	for java-user@lucene.apache.org; Wed, 26 Mar 2008 21:16:08 -0700
Message-ID: <16321424.post@talk.nabble.com>
Date: Wed, 26 Mar 2008 21:16:08 -0700 (PDT)
From: dillongeo <dillongeo@yahoo.com>
To: java-user@lucene.apache.org
Subject: How to get the a term weight (tf*idf)?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dillongeo@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
Given a term (e.g. "apple") and a document in index, how can I get the term
weight in this document? Is this weight equal to the tf*idf value of this
term?

Thanks!
-- 
View this message in context: http://www.nabble.com/How-to-get-the-a-term-weight-%28tf*idf%29--tp16321424p16321424.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 04:16:57 2008
Return-Path: <java-user-return-33370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53235 invoked from network); 27 Mar 2008 04:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 04:16:54 -0000
Received: (qmail 62018 invoked by uid 500); 27 Mar 2008 04:16:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61990 invoked by uid 500); 27 Mar 2008 04:16:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61976 invoked by uid 99); 27 Mar 2008 04:16:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 21:16:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 04:15:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JejX9-0000kP-LJ
	for java-user@lucene.apache.org; Wed, 26 Mar 2008 21:16:11 -0700
Message-ID: <16321425.post@talk.nabble.com>
Date: Wed, 26 Mar 2008 21:16:11 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re:Retreive Compressed Fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
       I try to store a string Variable as Field.Store.Compress,during
search is there any any inbuilt method to uncompress these records else we
can go for some other algorithm to retreive these records?
-- 
View this message in context: http://www.nabble.com/Re%3ARetreive-Compressed-Fields-tp16321425p16321425.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 04:17:54 2008
Return-Path: <java-user-return-33371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53521 invoked from network); 27 Mar 2008 04:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 04:17:54 -0000
Received: (qmail 65220 invoked by uid 500); 27 Mar 2008 04:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65187 invoked by uid 500); 27 Mar 2008 04:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65176 invoked by uid 99); 27 Mar 2008 04:17:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Mar 2008 21:17:47 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 04:16:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JejYD-0000mG-CV
	for java-user@lucene.apache.org; Wed, 26 Mar 2008 21:17:17 -0700
Message-ID: <16321424.post@talk.nabble.com>
Date: Wed, 26 Mar 2008 21:17:17 -0700 (PDT)
From: dillongeo <dillongeo@yahoo.com>
To: java-user@lucene.apache.org
Subject: How to get the a term weight (tf*idf)?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dillongeo@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
Given a term (e.g. "apple") and a document in index, how can I get the term
weight in this document? Is this weight equal to the tf*idf value of this
term? If no, how can I get the tf*idf value? (In fact this value is what I
am interested in looking for).

Thanks!
-- 
View this message in context: http://www.nabble.com/How-to-get-the-a-term-weight-%28tf*idf%29--tp16321424p16321424.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 08:59:45 2008
Return-Path: <java-user-return-33372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56175 invoked from network); 27 Mar 2008 08:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 08:59:44 -0000
Received: (qmail 9079 invoked by uid 500); 27 Mar 2008 08:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9007 invoked by uid 500); 27 Mar 2008 08:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8982 invoked by uid 99); 27 Mar 2008 08:59:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 01:59:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 08:58:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Jenww-0007AJ-Rj
	for java-user@lucene.apache.org; Thu, 27 Mar 2008 01:59:06 -0700
Message-ID: <16323371.post@talk.nabble.com>
Date: Thu, 27 Mar 2008 01:59:06 -0700 (PDT)
From: fanfy <elvis.ciocoiu@trp.ro>
To: java-user@lucene.apache.org
Subject: Re: from  2.2.0 to 2.3.0
In-Reply-To: <op.t6ki6muv2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: elvis.ciocoiu@trp.ro
References: <op.t6ki6muv2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm also having a similar problem. Can you help me solve it? I'm only
beginning to use lucene. This is the stack trace from a simple test that
adds a document in the repository. I just created the jackrabbit repository
so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you help me
with some hints? 
The tests are running under a nightly building server using jdk6 and maven2.
Thank you.
  
Caused by: java.lang.AssertionError: Terms are out of order:
field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
text=3:autoCreated lastText=3:autoCreated
	at org.apache.lucene.index.TermInfosWriter.add(TermInfosWriter.java:154)
	at
org.apache.lucene.index.DocumentsWriter.appendPostings(DocumentsWriter.java:2316)
	at
org.apache.lucene.index.DocumentsWriter.writeSegment(DocumentsWriter.java:2011)
	at org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java:548)
	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2497)
	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
	at org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1204)
	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
	at
org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit(AbstractIndex.java:326)
	at
org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit(VolatileIndex.java:139)
	at
org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex(PersistentIndex.java:121)
	at
org.apache.jackrabbit.core.query.lucene.MultiIndex$VolatileCommit.execute(MultiIndex.java:1911)
	at
org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog(MultiIndex.java:936)
	at
org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileIndex(MultiIndex.java:986)
	at
org.apache.jackrabbit.core.query.lucene.MultiIndex.flush(MultiIndex.java:868)
	at
org.apache.jackrabbit.core.query.lucene.MultiIndex.close(MultiIndex.java:760)
	at
org.apache.jackrabbit.core.query.lucene.SearchIndex.close(SearchIndex.java:630)
	at
org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler(SearchManager.java:588)
	at org.apache.jackrabbit.core.SearchManager.close(SearchManager.java:264)
	at
org.apache.jackrabbit.core.RepositoryImpl.doShutdown(RepositoryImpl.java:987)
	at
org.apache.jackrabbit.core.RepositoryImpl.shutdown(RepositoryImpl.java:948)
	at
org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt;(RepositoryImpl.java:348)
	at
org.apache.jackrabbit.core.RepositoryImpl.create(RepositoryImpl.java:557)
	at
org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createRepository(RepositoryFactoryBean.java:57)
	at
org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet(RepositoryFactoryBean.java:57)
	at
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1333)
	at
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1299)
	... 75 more



Sergey Kabashnyuk-3 wrote:
> 
> Hi
> I want to update  from lucene 2.2.0 to 2.3.0
> but I have assert it TermInfosWriter line 143.
> 
> What is it mean
> assert compareToLastTerm(fieldNumber, termText, termTextStart,
> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
> lastTermTextLength == 0);
> 
> Can you help me?
> 
> Sergey Kabashnyuk
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/from--2.2.0-to-2.3.0-tp15501449p16323371.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 09:34:49 2008
Return-Path: <java-user-return-33373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71261 invoked from network); 27 Mar 2008 09:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 09:34:49 -0000
Received: (qmail 51560 invoked by uid 500); 27 Mar 2008 09:34:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51078 invoked by uid 500); 27 Mar 2008 09:34:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51067 invoked by uid 99); 27 Mar 2008 09:34:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 02:34:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.246] (HELO hs-out-0708.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 09:34:00 +0000
Received: by hs-out-0708.google.com with SMTP id 4so3317049hsl.5
        for <java-user@lucene.apache.org>; Thu, 27 Mar 2008 02:34:10 -0700 (PDT)
Received: by 10.100.140.1 with SMTP id n1mr2757108and.70.1206610449891;
        Thu, 27 Mar 2008 02:34:09 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm15335204agc.26.2008.03.27.02.34.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 27 Mar 2008 02:34:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <16321425.post@talk.nabble.com>
References: <16321425.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1901A41D-1A25-4D6E-A13E-D32A820B90EB@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Retreive Compressed Fields
Date: Thu, 27 Mar 2008 05:34:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Compressed fields are automatically uncompressed when you retrieve  
them.  You get the original text back.

Mike

Sebastin wrote:
>
> Hi All,
>        I try to store a string Variable as Field.Store.Compress,during
> search is there any any inbuilt method to uncompress these records  
> else we
> can go for some other algorithm to retreive these records?
> -- 
> View this message in context: http://www.nabble.com/Re%3ARetreive- 
> Compressed-Fields-tp16321425p16321425.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 09:54:55 2008
Return-Path: <java-user-return-33374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79471 invoked from network); 27 Mar 2008 09:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 09:54:55 -0000
Received: (qmail 80232 invoked by uid 500); 27 Mar 2008 09:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80206 invoked by uid 500); 27 Mar 2008 09:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80195 invoked by uid 99); 27 Mar 2008 09:54:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 02:54:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 09:54:06 +0000
Received: by yw-out-2324.google.com with SMTP id 5so57632ywh.5
        for <java-user@lucene.apache.org>; Thu, 27 Mar 2008 02:54:16 -0700 (PDT)
Received: by 10.151.112.5 with SMTP id p5mr656495ybm.120.1206611656884;
        Thu, 27 Mar 2008 02:54:16 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 74sm15209wra.26.2008.03.27.02.54.16
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 27 Mar 2008 02:54:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <16323371.post@talk.nabble.com>
References: <op.t6ki6muv2ic4zu@sj-desktop> <16323371.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Thu, 27 Mar 2008 05:54:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Which version of Jackrabbit are you using?

Can you post the code of the simple test?  Is it only adding a single  
document?

Mike

fanfy wrote:
>
> I'm also having a similar problem. Can you help me solve it? I'm only
> beginning to use lucene. This is the stack trace from a simple test  
> that
> adds a document in the repository. I just created the jackrabbit  
> repository
> so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you  
> help me
> with some hints?
> The tests are running under a nightly building server using jdk6  
> and maven2.
> Thank you.
>
> Caused by: java.lang.AssertionError: Terms are out of order:
> field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
> text=3:autoCreated lastText=3:autoCreated
> 	at org.apache.lucene.index.TermInfosWriter.add 
> (TermInfosWriter.java:154)
> 	at
> org.apache.lucene.index.DocumentsWriter.appendPostings 
> (DocumentsWriter.java:2316)
> 	at
> org.apache.lucene.index.DocumentsWriter.writeSegment 
> (DocumentsWriter.java:2011)
> 	at org.apache.lucene.index.DocumentsWriter.flush 
> (DocumentsWriter.java:548)
> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2497)
> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
> 	at org.apache.lucene.index.IndexWriter.closeInternal 
> (IndexWriter.java:1204)
> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
> 	at
> org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit 
> (AbstractIndex.java:326)
> 	at
> org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit 
> (VolatileIndex.java:139)
> 	at
> org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex 
> (PersistentIndex.java:121)
> 	at
> org.apache.jackrabbit.core.query.lucene.MultiIndex 
> $VolatileCommit.execute(MultiIndex.java:1911)
> 	at
> org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog 
> (MultiIndex.java:936)
> 	at
> org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileIndex 
> (MultiIndex.java:986)
> 	at
> org.apache.jackrabbit.core.query.lucene.MultiIndex.flush 
> (MultiIndex.java:868)
> 	at
> org.apache.jackrabbit.core.query.lucene.MultiIndex.close 
> (MultiIndex.java:760)
> 	at
> org.apache.jackrabbit.core.query.lucene.SearchIndex.close 
> (SearchIndex.java:630)
> 	at
> org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler 
> (SearchManager.java:588)
> 	at org.apache.jackrabbit.core.SearchManager.close 
> (SearchManager.java:264)
> 	at
> org.apache.jackrabbit.core.RepositoryImpl.doShutdown 
> (RepositoryImpl.java:987)
> 	at
> org.apache.jackrabbit.core.RepositoryImpl.shutdown 
> (RepositoryImpl.java:948)
> 	at
> org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt; 
> (RepositoryImpl.java:348)
> 	at
> org.apache.jackrabbit.core.RepositoryImpl.create 
> (RepositoryImpl.java:557)
> 	at
> org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createRepositor 
> y(RepositoryFactoryBean.java:57)
> 	at
> org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet 
> (RepositoryFactoryBean.java:57)
> 	at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanF 
> actory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1333)
> 	at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanF 
> actory.initializeBean(AbstractAutowireCapableBeanFactory.java:1299)
> 	... 75 more
>
>
>
> Sergey Kabashnyuk-3 wrote:
>>
>> Hi
>> I want to update  from lucene 2.2.0 to 2.3.0
>> but I have assert it TermInfosWriter line 143.
>>
>> What is it mean
>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>> lastTermTextLength == 0);
>>
>> Can you help me?
>>
>> Sergey Kabashnyuk
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/from--2.2.0- 
> to-2.3.0-tp15501449p16323371.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 12:10:52 2008
Return-Path: <java-user-return-33375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61009 invoked from network); 27 Mar 2008 12:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 12:10:51 -0000
Received: (qmail 55692 invoked by uid 500); 27 Mar 2008 12:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55656 invoked by uid 500); 27 Mar 2008 12:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55645 invoked by uid 99); 27 Mar 2008 12:10:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 05:10:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 12:10:00 +0000
Received: from [127.0.0.1] (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id DF2D4416AF
	for <java-user@lucene.apache.org>; Thu, 27 Mar 2008 09:10:08 -0300 (BRST)
Message-ID: <47EB8E7E.5060603@accurate.com.br>
Date: Thu, 27 Mar 2008 09:09:34 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Index "corruption" makes it return a different result
References: <47EA6155.1000304@accurate.com.br>	 <F4F8A326-5DF6-421D-8B9E-2EBA986AAAB1@mikemccandless.com>	 <47EA9231.1010601@accurate.com.br>	 <C1D03675-482F-4150-A7CD-488278095E62@mikemccandless.com>	 <47EAA65E.4020107@accurate.com.br>	 <278F5344-CB5A-4C51-B78D-FAA6F66A69C7@mikemccandless.com>	 <47EAAA60.1020706@accurate.com.br> <9ac0c6aa0803261453w33ea9bave055341984ed5b8f@mail.gmail.com>
In-Reply-To: <9ac0c6aa0803261453w33ea9bave055341984ed5b8f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 080326-3, 26/03/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

I see...

I think we will CheckIndex before opening it. With fix option set to 
true. If the fix is needed, we will lose some entries, but the index 
will not be corrupted. We can alarm this to generate another index, and 
replace the missed entries one.

Thanks everybody, if I get any other clue about how those logs got 
there, I'll report.

Thanks Michael for your support!

[]s,

Lucas

Michael McCandless wrote:
> [Lucas sent me a zip of the index - thanks!]
>
> I ran CheckIndex on the index and it said this on your _al1 segment:
>
> java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1000
> 	at org.apache.lucene.util.BitVector.get(BitVector.java:72)
> 	at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:120)
> 	at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:95)
> 	at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:205)
> 	at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:382)
>
> I unpacked the CFS file and sure enough the file _al1.frq, which
> holds the frequency of each term in each doc, was somehow modified: it
> had 78 of those log lines (8148 bytes) inserted in the front.  When I
> removed those lines then CheckIndex runs fine.
>
> This is very odd.  Somehow your app server modified the frq file
> before it was added to the CFS file.  Very strange.
>
> Mike
>
> Lucas F. A. Teixeira <lucas.teixeira@accurate.com.br> wrote:
>   
>> 100% Impossible...
>>
>>  My index has 1 xml, 3 number fields, 1 aphanumeric field. *always*
>>
>>  :-)
>>
>>
>>
>>  Lucas
>>
>>
>>
>>  Michael McCandless wrote:
>>  >
>>  > OK.
>>  >
>>  > I would recommend upgrading to 2.3.1.  There were some corruption
>>  > issues with term vectors that could cause the wrong document's term
>>  > vectors to come back.
>>  >
>>  > That screen shot is spooky!  Is it possible that one of the documents
>>  > you indexed had that content?  (It could simply be a stored field).
>>  >
>>  > Mike
>>  >
>>  > Lucas F. A. Teixeira wrote:
>>  >> Thanks Michael!
>>  >>
>>  >> Lucene version: 2.3.0
>>  >>
>>  >> Here is some screenshot of editing the cfs file:
>>  >> http://img296.imageshack.us/my.php?image=indexow4.jpg
>>  >>
>>  >> Take a look!
>>  >>
>>  >> []s,
>>  >>
>>  >> Lucas
>>  >>
>>  >> Michael McCandless wrote:
>>  >>>
>>  >>> OK I think I follow now.
>>  >>>
>>  >>> Which version of Lucene was this?
>>  >>>
>>  >>> If it's not too large, can you post the CFS file that got mixed up?
>>  >>> Be sure to cc me directly on the mail because the mailing list
>>  >>> software removes attachments.
>>  >>>
>>  >>> Mike
>>  >>>
>>  >>> Lucas F. A. Teixeira wrote:
>>  >>>> This is just one of the index files.
>>  >>>>
>>  >>>> As I said, the local disk where the index is generated, it's not
>>  >>>> full, the full disk it's the shared storage where my application
>>  >>>> server store its logs.
>>  >>>> When this disk hitted 100%, all the indexing process stop (of
>>  >>>> course, all the processing instances of this managed server stopped).
>>  >>>>
>>  >>>> The "thing" is that the index was not corrupted, one of the index
>>  >>>> files has these log messages from my application server inside it,
>>  >>>> problably a JVM problem on mixing two IO buffers when one of them
>>  >>>> coudn't flush (the logs partition). For me it would be normal if it
>>  >>>> causes index corruption... :-)
>>  >>>>
>>  >>>> The second and most weird thing it's that my clients application
>>  >>>> just read the index, and did some queries on it, always returning
>>  >>>> different (but consistent) results.
>>  >>>>
>>  >>>> I tried to edit the index file, and remove the application server
>>  >>>> logs that was inside it, and after that?? Index Corrupted
>>  >>>> Exception! :-)
>>  >>>>
>>  >>>> Wow!
>>  >>>>
>>  >>>> I think this issue involves more stuff than just lucene... I had
>>  >>>> some problems in my JVM IO buffer handling of course. But my
>>  >>>> point(s) is the both above... ;-)
>>  >>>>
>>  >>>> []s,
>>  >>>>
>>  >>>> Lucas
>>  >>>>
>>  >>>>
>>  >>>>
>>  >>>>
>>  >>>> Michael McCandless wrote:
>>  >>>>>
>>  >>>>> I couldn't quite follow the part about "_al1.cfs".
>>  >>>>>
>>  >>>>> It sounds like your indexing process hit a disk full event, that
>>  >>>>> led to this error? Can you post the full exception(s) from the
>>  >>>>> disk full?
>>  >>>>>
>>  >>>>> Which version of Lucene are you using?
>>  >>>>>
>>  >>>>> Mike
>>  >>>>>
>>  >>>>> Lucas F. A. Teixeira wrote:
>>  >>>>>> Hello all!
>>  >>>>>>
>>  >>>>>> I had a problem this week, and I like to share with you all.
>>  >>>>>> My weblogic server that generate my index hrows its logs in a
>>  >>>>>> shared storage. During my indexing process (SOLR+Lucene), this
>>  >>>>>> shared storage became 100% full, and everything collapsed (all
>>  >>>>>> servers that uses this shared storage). But my index (that is
>>  >>>>>> generated in the local filesystem, just "grabbed" some logs of
>>  >>>>>> the server (who knows weblogic knows the managed server
>>  >>>>>> accesslog, that's the guy) from the buffer (my supposition), and
>>  >>>>>> put inside my index files! Take a look how my "_al1.cfs" became
>>  >>>>>> between some binary parts of the file:
>>  >>>>>>
>>  >>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -
>>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>  >>>>>> 2008-03-19    -    02:31:03    -    [ip]    -    POST    -
>>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>  >>>>>> 2008-03-19    -    02:31:04    -    [ip]    -    POST    -
>>  >>>>>> 200    -    /AcomProductSyncServiceWeb/AcomProductSyncService
>>  >>>>>>
>>  >>>>>> The most incredible thing, is that I can open the index without a
>>  >>>>>> CorruptedIndexException, normally. That's really bad for me,
>>  >>>>>> cause the application didn't warn about a corrupted index (of
>>  >>>>>> course, it is not). I can open it with the Luke App, and with
>>  >>>>>> this simple code snippet accessing directly the lucene index
>>  >>>>>> without solr:
>>  >>>>>>
>>  >>>>>>        IndexReader indexReader =
>>  >>>>>> IndexReader.open(FSDirectory.getDirectory("C/index/index.2008-03-19"));
>>  >>>>>>
>>  >>>>>>        IndexSearcher indexSearcher = new IndexSearcher(indexReader);
>>  >>>>>>              TermQuery termQuery = new TermQuery(new
>>  >>>>>> Term("itemId", "680804"));
>>  >>>>>>        Hits hits = indexSearcher.search(termQuery);
>>  >>>>>>              Iterator itHits = hits.iterator();
>>  >>>>>>        while (itHits.hasNext()) {
>>  >>>>>>            Hit hit = (Hit) itHits.next();
>>  >>>>>>            Document document = hit.getDocument();
>>  >>>>>>            String itemId =
>>  >>>>>> document.getField("itemId").stringValue();
>>  >>>>>>            System.out.println("itemId="+itemId);
>>  >>>>>>        }
>>  >>>>>>              indexSearcher.close();
>>  >>>>>>        indexReader.close();
>>  >>>>>>
>>  >>>>>>
>>  >>>>>> Ok, ok. But, if it's opening, whats my real problem?  Making this
>>  >>>>>> little search above, the Document that I got, was another one,
>>  >>>>>> with other information different from the original one that I was
>>  >>>>>> looking for (the one with the itemId field = 680804). The whole
>>  >>>>>> document was another document (but a valid document, that I've
>>  >>>>>> indexed before). The itemId value that I got, the one that was
>>  >>>>>> printed from that application above was 578340. Wow!!
>>  >>>>>>
>>  >>>>>> I can reproduce this error anytime with this code or with luke on
>>  >>>>>> this corrupted index, but was terrible for me to find the exact
>>  >>>>>> point of this fault.
>>  >>>>>>
>>  >>>>>> I've reindexed everything, it solves my problem. But I wants to
>>  >>>>>> know if someone have any idea why this happened...
>>  >>>>>>
>>  >>>>>> Thanks people!
>>  >>>>>>
>>  >>>>>> []s,
>>  >>>>>>
>>  >>>>>> Lucas Teixeira
>>  >>>>>> lucas.teixeira@accurate.com.br
>>  >>>>>>
>>  >>>>>>
>>  >>>>>> ---------------------------------------------------------------------
>>  >>>>>>
>>  >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>>>>>
>>  >>>>>
>>  >>>>>
>>  >>>>> ---------------------------------------------------------------------
>>  >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>>>>
>>  >>>>>
>>  >>>>>
>>  >>>>
>>  >>>> ---------------------------------------------------------------------
>>  >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>>>
>>  >>>
>>  >>>
>>  >>> ---------------------------------------------------------------------
>>  >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>>
>>  >>>
>>  >>>
>>  >>
>>  >> ---------------------------------------------------------------------
>>  >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>
>>  >
>>  >
>>  > ---------------------------------------------------------------------
>>
>>
>>     
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>       
>>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >
>>  >
>>  >
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 19:23:57 2008
Return-Path: <java-user-return-33376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26946 invoked from network); 27 Mar 2008 19:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 19:23:56 -0000
Received: (qmail 72135 invoked by uid 500); 27 Mar 2008 19:23:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72103 invoked by uid 500); 27 Mar 2008 19:23:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72085 invoked by uid 99); 27 Mar 2008 19:23:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 12:23:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 19:22:54 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2682975hub.15
        for <java-user@lucene.apache.org>; Thu, 27 Mar 2008 12:23:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Hp/0yFwUNMBeKdFKYznTCfwGOwyjOs4sxX9XKMW+RY8=;
        b=HoNGk3QR6yJoKoXPqRyKmF3CYDomHO7srDlSxqjWUHVLZ/iFTpztmw72lgDUxxlQ7rffJJQ+0c8V8+8NWnNTNsheTR479bSmAF5ntxJRfSb7atnmFex6MoCc4XoADMo75CKoqN355qV+n62DxgubSwTX+483l4/lkUIayoUbEQo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uus04o0LhY6HgFBBkL/dIUl4q/onVm/yQ+kqE5aGyRGKTmCockosYQPJx/wArRSGlNYCggu5ItbN5eZJvfWdaRAfDILQYEENqCYue6dkOq/Xe8eViqO4tMjha/JPyjjGekouFKXQ1DcoHQ+23e2VKsS5lV4E8VKDjU2HVcSNXyc=
Received: by 10.82.181.8 with SMTP id d8mr3051094buf.17.1206645784871;
        Thu, 27 Mar 2008 12:23:04 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Thu, 27 Mar 2008 12:22:59 -0700 (PDT)
Message-ID: <359a92830803271222v504157coab9ff3d6bc5aa45f@mail.gmail.com>
Date: Thu, 27 Mar 2008 15:22:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best way to iterate over document
In-Reply-To: <329a6c830803260829g56a8696dod4d2d21abe2ddb08@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26842_7660214.1206645784866"
References: <329a6c830803260248h2efa053di30c46b51fb3deb0@mail.gmail.com>
	 <359a92830803260805o6f0dfaa1s29f2df4beda26a45@mail.gmail.com>
	 <329a6c830803260829g56a8696dod4d2d21abe2ddb08@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26842_7660214.1206645784866
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On Wed, Mar 26, 2008 at 11:29 AM, Wojtek H <wojtekh2@gmail.com> wrote:

> Thank you for reply. What I did not mention before was that for
> iteration we don't care about scoring, so that's not the issue at all.
> Creating Filter with BitSet seems much better idea than keeping
> HitIterator in memory. Am I right that in such a case with
> MatchAllDocsQuery memory usage would be around
> ( NUM_OF_DOCS_IN_INDEX / 8 )   bytes?


Yes, it's very close to that number as far as I can tell.


>
> We didn't check it yet, but do you think that time for accessing
> documents (reader.doc(i)) is big enough to make iteration in
> HitCollector (without accessing any objects) over documents
> already returned almost un-noticable?


I don't quite understand this. Accessing a single document
in HitCollector via reader.doc(i) is probably unnoticeable. Accessing
every documents in the HitCollector is bad, very bad. If you're doing
something like spinning through the HitCollector N times, then
returning the Nth document and breaking, I don't know. You'll just have
to experiment I'm afraid.



> And another question - if I don't care about scoring is there a way to
> make Lucene don't spend time on calculating score (I don't know if
> that time matters)? HitCollector receives doc and its score (as far as
> I remember the difference here is that it is not normalized to value
> between 0 and 1). Is there a way (and does it make sense) to make
> scoring faster in such a case?


I *think* ConstantScoreQuery is your friend here, although I haven't
used it personally.


>
> And to make things clear - am I right that if I operate on the same
> searcher over requests for docs chunks I don't see neither additions
> nor deletions which could happen meanwhile? So if I would like to
> iterate over point-in-time keeping the same searcher opened would do.
> Thanks and regards,
>

You must close and re-open a reader to see any changes since the last
time you opened that reader. So I think your assumption is OK.

Have fun,
Erick


> wojtek
>
>
> 2008/3/26, Erick Erickson <erickerickson@gmail.com>:
> > Why not keep a Filter in memory? It consists of a single bit per
> document
> >  and the ordinal position of that bit is the Lucene doc ID. You could
> create
> >  this reasonably quickly for the *first* query that came in via
> HitCollector.
> >
> >  Then each time you wanted another chunk, use the filter to know which
> >  docs to return. You could either, say, extend the Filter class and add
> >  some bookeeping or just zero out each bit that you returned to the
> user.
> >
> >  NOTE: you don't get relevance this way, but for the case of returning
> all
> >  docs do you really want it?
> >
> >  About updating the index. Remember that there is no "update in place".
> >  So you'll only have to check whether any document in the filter has
> been
> >  deleted when you are returning. Then you'd have to do something about
> >  looking for any new additions as you returned the last document in the
> >  set...
> >  But remember that until you close/reopen the searcher, you won't see
> changes
> >  anyway.....
> >
> >  But you may not need to do any of this. If, each time you return a
> chunk,
> >  you're using a Hits object, then this is the first thing I'd change. A
> Hits
> >  object re-executes the query every 100th element you look at. So,
> assume
> >  you have something like
> >
> >  (bad pseudo code here)
> >  for (int idx = 0; idx < firstdocinchunk && Hits.next(); ++idx)
> >  {
> >  }
> >
> >  for (idx = 0; idx < chunksize && Hits.next(); ++idx)
> >  {
> >     assemble doc for return
> >  }
> >  and the first doc you want to return is number 1,000, you'll actually
> >  be re-executing the query 10 times. Which probably accounts for your
> >  quadratic time.
> >
> >  So I'd try just using a new HitCollector each time and see if that
> solves
> >  your problems before getting fancy. There really shouldn't be any
> >  noticeable difference between the first and last request unless you're
> >  doing something like accessing the documents before you get to
> >  the first one you expect to return. And a TopDocs should even
> >  preserve scoring.......
> >
> >  Best
> >
> > Erick
> >
> >
> >
> >
> >  On Wed, Mar 26, 2008 at 5:48 AM, Wojtek H <wojtekh2@gmail.com> wrote:
> >
> >  > Hi all,
> >  >
> >  > our problem is to choose the best (the fastest) way to iterate over
> huge
> >  > set
> >  > of documents (basic and most important case is to iterate over all
> >  > documents
> >  > in the index). Some slow process accesses documents and now it is
> done via
> >  > repeating query (for instance MatchAllDocsQuery). It processess first
> N
> >  > docs
> >  > then repeats query and processes next N docs and so on. Repeating
> query
> >  > means in fact quadratic time! So we think about changing the way docs
> are
> >  > accessed.
> >  > In case of generic query the only way to speed it up we see is to
> keep
> >  > HitCollector in memory between requests for docs. Isn't this approach
> too
> >  > memory consuming?
> >  > In case of iterating over all documents I was wondering if there is a
> way
> >  > to
> >  > determine set of index ids over which we could iterate (and of course
> >  > control index changes - if index is changed between requests we
> should
> >  > probably invalidate 'iterating session').
> >  > What is the best solution for this problem?
> >  > Thanks and regards,
> >  >
> >  > wojtek
> >  >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26842_7660214.1206645784866--

From java-user-return-33377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 27 21:00:08 2008
Return-Path: <java-user-return-33377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71906 invoked from network); 27 Mar 2008 21:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Mar 2008 21:00:08 -0000
Received: (qmail 31052 invoked by uid 500); 27 Mar 2008 20:59:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31030 invoked by uid 500); 27 Mar 2008 20:59:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31019 invoked by uid 99); 27 Mar 2008 20:59:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 13:59:58 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Mar 2008 20:59:15 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id CA4661638A7
	for <java-user@lucene.apache.org>; Thu, 27 Mar 2008 13:59:26 -0700 (PDT)
Message-Id: <C7DC97B5-13B4-4FF2-B13A-B5EA570E3767@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <16321424.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to get the a term weight (tf*idf)?
Date: Thu, 27 Mar 2008 16:59:25 -0400
References: <16321424.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Your best bet is probably the explain() method.

On Mar 27, 2008, at 12:16 AM, dillongeo wrote:

>
> Hi all,
> Given a term (e.g. "apple") and a document in index, how can I get  
> the term
> weight in this document? Is this weight equal to the tf*idf value of  
> this
> term?
>
> Thanks!
> -- 
> View this message in context: http://www.nabble.com/How-to-get-the-a-term-weight-%28tf*idf%29--tp16321424p16321424.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 28 16:42:38 2008
Return-Path: <java-user-return-33378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54107 invoked from network); 28 Mar 2008 16:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Mar 2008 16:42:38 -0000
Received: (qmail 96228 invoked by uid 500); 28 Mar 2008 16:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96185 invoked by uid 500); 28 Mar 2008 16:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96174 invoked by uid 99); 28 Mar 2008 16:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 09:42:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 16:41:50 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2991288hub.15
        for <java-user@lucene.apache.org>; Fri, 28 Mar 2008 09:38:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=GPSB7Lc1xtSLnw5knZ3C3HLwzgpS3nWS1vGxX3tyDm4=;
        b=nXwV1Vfq19XHjPR0BuFCaX+bnWSPvuCChWZrXu+04FBTzaFqSgAxnHGSwkp4TV7ntH8YZxlmqlIyC2heLtUI+yqBx/H2lxD6T7NDp8KWYOzpeLJlBonnWLMiStwCuPa7VeYNWIDYVCJGrGrxpvzB3qXM/D18nstgxcILV+8iLsI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YXuScjb8CVKy9SxnRHlhRVzjK/p63ZJUoUCbllAkl/klu7Y9mSOPteEcZJ+oCLFuMoaUlWGc8YX6dYHLxostekh+IsBHS8YS0djwrIA9uyhIu9oZ/cZa4vi4YAVR4Mc72nbX60zV65GVKee6f3qyAZuFV40p6CX+O5FelB6byIk=
Received: by 10.82.175.7 with SMTP id x7mr6070352bue.36.1206722331207;
        Fri, 28 Mar 2008 09:38:51 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Fri, 28 Mar 2008 09:38:51 -0700 (PDT)
Message-ID: <359a92830803280938m26e2604ao7f640c81537fe232@mail.gmail.com>
Date: Fri, 28 Mar 2008 12:38:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is there a way to speed up boolean query if I don't care about score?
In-Reply-To: <329a6c830803261134y80e6580u857a6ad51907a026@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2838_26261474.1206722331224"
References: <329a6c830803261134y80e6580u857a6ad51907a026@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2838_26261474.1206722331224
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What about ConstantScoreQuery?

Erick

On Wed, Mar 26, 2008 at 2:34 PM, Wojtek H <wojtekh2@gmail.com> wrote:

> Hi all,
>
> Suppose my query has "normal" part for which I want score as usual and
> other part which is big disjunction (OR) query for which I just want
> documents to match and don't care about scoring. Is there a way to
> make it fast?
> As far as I understand if 'no-score' part was the same in many queries
> I could create filter for documents matching it and then make other
> searches with 'normal' query and filter for 'no-score' part. But what
> can I do in situation when this 'no-score' part is changing all the
> time?
> Thanks and regards,
>
> wojtek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2838_26261474.1206722331224--

From java-user-return-33379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 28 17:10:13 2008
Return-Path: <java-user-return-33379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69451 invoked from network); 28 Mar 2008 17:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Mar 2008 17:10:13 -0000
Received: (qmail 53153 invoked by uid 500); 28 Mar 2008 17:10:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53116 invoked by uid 500); 28 Mar 2008 17:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53102 invoked by uid 99); 28 Mar 2008 17:10:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 10:10:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 17:09:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JfI59-0003ju-P3
	for java-user@lucene.apache.org; Fri, 28 Mar 2008 10:09:35 -0700
Message-ID: <16354912.post@talk.nabble.com>
Date: Fri, 28 Mar 2008 10:09:35 -0700 (PDT)
From: fanfy <elvis.ciocoiu@trp.ro>
To: java-user@lucene.apache.org
Subject: Re: from  2.2.0 to 2.3.0
In-Reply-To: <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: elvis.ciocoiu@trp.ro
References: <op.t6ki6muv2ic4zu@sj-desktop> <16323371.post@talk.nabble.com> <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using jackrabbit 1.4.2. The error doesn't appear all the time but when it
does the solution is to delete the repository. The test is:

    	@Test
	public void addDocument() 
	{
		documentService.importFile("Ana", "doc", new byte[200]);
	}

documentService:
    public void importFile(final String name, final String contentType,
final byte[] content) {
		jcrTemplate.execute(new JcrCallback() {

			public Object doInJcr(Session session) throws IOException,
					RepositoryException {
				Node rootNode = session.getRootNode();
				Node fileNode = rootNode.addNode(name, "nt:file");
				fileNode.addMixin("mix:referenceable");
				Node resNode = fileNode.addNode("jcr:content", "nt:resource");

				resNode.setProperty("jcr:data", new BinaryValue(content));
				resNode.setProperty("jcr:mimeType", contentType);
				resNode.setProperty("jcr:lastModified", Calendar.getInstance());
				session.save();
				return resNode;
			}
		});
	}


Michael McCandless-2 wrote:
> 
> 
> Which version of Jackrabbit are you using?
> 
> Can you post the code of the simple test?  Is it only adding a single  
> document?
> 
> Mike
> 
> fanfy wrote:
>>
>> I'm also having a similar problem. Can you help me solve it? I'm only
>> beginning to use lucene. This is the stack trace from a simple test  
>> that
>> adds a document in the repository. I just created the jackrabbit  
>> repository
>> so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you  
>> help me
>> with some hints?
>> The tests are running under a nightly building server using jdk6  
>> and maven2.
>> Thank you.
>>
>> Caused by: java.lang.AssertionError: Terms are out of order:
>> field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
>> text=3:autoCreated lastText=3:autoCreated
>> 	at org.apache.lucene.index.TermInfosWriter.add 
>> (TermInfosWriter.java:154)
>> 	at
>> org.apache.lucene.index.DocumentsWriter.appendPostings 
>> (DocumentsWriter.java:2316)
>> 	at
>> org.apache.lucene.index.DocumentsWriter.writeSegment 
>> (DocumentsWriter.java:2011)
>> 	at org.apache.lucene.index.DocumentsWriter.flush 
>> (DocumentsWriter.java:548)
>> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2497)
>> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
>> 	at org.apache.lucene.index.IndexWriter.closeInternal 
>> (IndexWriter.java:1204)
>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit 
>> (AbstractIndex.java:326)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit 
>> (VolatileIndex.java:139)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex 
>> (PersistentIndex.java:121)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.MultiIndex 
>> $VolatileCommit.execute(MultiIndex.java:1911)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog 
>> (MultiIndex.java:936)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileIndex 
>> (MultiIndex.java:986)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.MultiIndex.flush 
>> (MultiIndex.java:868)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.MultiIndex.close 
>> (MultiIndex.java:760)
>> 	at
>> org.apache.jackrabbit.core.query.lucene.SearchIndex.close 
>> (SearchIndex.java:630)
>> 	at
>> org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler 
>> (SearchManager.java:588)
>> 	at org.apache.jackrabbit.core.SearchManager.close 
>> (SearchManager.java:264)
>> 	at
>> org.apache.jackrabbit.core.RepositoryImpl.doShutdown 
>> (RepositoryImpl.java:987)
>> 	at
>> org.apache.jackrabbit.core.RepositoryImpl.shutdown 
>> (RepositoryImpl.java:948)
>> 	at
>> org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt; 
>> (RepositoryImpl.java:348)
>> 	at
>> org.apache.jackrabbit.core.RepositoryImpl.create 
>> (RepositoryImpl.java:557)
>> 	at
>> org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createRepositor 
>> y(RepositoryFactoryBean.java:57)
>> 	at
>> org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet 
>> (RepositoryFactoryBean.java:57)
>> 	at
>> org.springframework.beans.factory.support.AbstractAutowireCapableBeanF 
>> actory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1333)
>> 	at
>> org.springframework.beans.factory.support.AbstractAutowireCapableBeanF 
>> actory.initializeBean(AbstractAutowireCapableBeanFactory.java:1299)
>> 	... 75 more
>>
>>
>>
>> Sergey Kabashnyuk-3 wrote:
>>>
>>> Hi
>>> I want to update  from lucene 2.2.0 to 2.3.0
>>> but I have assert it TermInfosWriter line 143.
>>>
>>> What is it mean
>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>>> lastTermTextLength == 0);
>>>
>>> Can you help me?
>>>
>>> Sergey Kabashnyuk
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/from--2.2.0- 
>> to-2.3.0-tp15501449p16323371.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/from--2.2.0-to-2.3.0-tp15501449p16354912.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 28 18:49:18 2008
Return-Path: <java-user-return-33380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27086 invoked from network); 28 Mar 2008 18:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Mar 2008 18:49:17 -0000
Received: (qmail 44478 invoked by uid 500); 28 Mar 2008 18:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44437 invoked by uid 500); 28 Mar 2008 18:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44426 invoked by uid 99); 28 Mar 2008 18:49:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 11:49:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.252.156] (HELO po-out-1718.google.com) (72.14.252.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 18:48:27 +0000
Received: by po-out-1718.google.com with SMTP id b23so9540590poe.0
        for <java-user@lucene.apache.org>; Fri, 28 Mar 2008 11:48:37 -0700 (PDT)
Received: by 10.141.193.1 with SMTP id v1mr1667568rvp.245.1206730116941;
        Fri, 28 Mar 2008 11:48:36 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 74sm4424599wra.26.2008.03.28.11.48.34
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 28 Mar 2008 11:48:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <16354912.post@talk.nabble.com>
References: <op.t6ki6muv2ic4zu@sj-desktop> <16323371.post@talk.nabble.com> <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com> <16354912.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E087AE3E-B14E-4CEE-A898-DFD083CD9103@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 28 Mar 2008 14:48:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


But, Jackrabbit 1.4.2 was released only yesterday, I think?  Also, I  
think it's based on Lucene 2.2 not 2.3, yet your exception below is a  
2.3 exception.

Is it possible you're actually using a trunk build of Jackrabbit?

Mike

fanfy wrote:
>
> I'm using jackrabbit 1.4.2. The error doesn't appear all the time  
> but when it
> does the solution is to delete the repository. The test is:
>
>     	@Test
> 	public void addDocument()
> 	{
> 		documentService.importFile("Ana", "doc", new byte[200]);
> 	}
>
> documentService:
>     public void importFile(final String name, final String  
> contentType,
> final byte[] content) {
> 		jcrTemplate.execute(new JcrCallback() {
>
> 			public Object doInJcr(Session session) throws IOException,
> 					RepositoryException {
> 				Node rootNode = session.getRootNode();
> 				Node fileNode = rootNode.addNode(name, "nt:file");
> 				fileNode.addMixin("mix:referenceable");
> 				Node resNode = fileNode.addNode("jcr:content", "nt:resource");
>
> 				resNode.setProperty("jcr:data", new BinaryValue(content));
> 				resNode.setProperty("jcr:mimeType", contentType);
> 				resNode.setProperty("jcr:lastModified", Calendar.getInstance());
> 				session.save();
> 				return resNode;
> 			}
> 		});
> 	}
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Which version of Jackrabbit are you using?
>>
>> Can you post the code of the simple test?  Is it only adding a single
>> document?
>>
>> Mike
>>
>> fanfy wrote:
>>>
>>> I'm also having a similar problem. Can you help me solve it? I'm  
>>> only
>>> beginning to use lucene. This is the stack trace from a simple test
>>> that
>>> adds a document in the repository. I just created the jackrabbit
>>> repository
>>> so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you
>>> help me
>>> with some hints?
>>> The tests are running under a nightly building server using jdk6
>>> and maven2.
>>> Thank you.
>>>
>>> Caused by: java.lang.AssertionError: Terms are out of order:
>>> field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
>>> text=3:autoCreated lastText=3:autoCreated
>>> 	at org.apache.lucene.index.TermInfosWriter.add
>>> (TermInfosWriter.java:154)
>>> 	at
>>> org.apache.lucene.index.DocumentsWriter.appendPostings
>>> (DocumentsWriter.java:2316)
>>> 	at
>>> org.apache.lucene.index.DocumentsWriter.writeSegment
>>> (DocumentsWriter.java:2011)
>>> 	at org.apache.lucene.index.DocumentsWriter.flush
>>> (DocumentsWriter.java:548)
>>> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java: 
>>> 2497)
>>> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
>>> 	at org.apache.lucene.index.IndexWriter.closeInternal
>>> (IndexWriter.java:1204)
>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit
>>> (AbstractIndex.java:326)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit
>>> (VolatileIndex.java:139)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex
>>> (PersistentIndex.java:121)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.MultiIndex
>>> $VolatileCommit.execute(MultiIndex.java:1911)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog
>>> (MultiIndex.java:936)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileInd 
>>> ex
>>> (MultiIndex.java:986)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.flush
>>> (MultiIndex.java:868)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.close
>>> (MultiIndex.java:760)
>>> 	at
>>> org.apache.jackrabbit.core.query.lucene.SearchIndex.close
>>> (SearchIndex.java:630)
>>> 	at
>>> org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler
>>> (SearchManager.java:588)
>>> 	at org.apache.jackrabbit.core.SearchManager.close
>>> (SearchManager.java:264)
>>> 	at
>>> org.apache.jackrabbit.core.RepositoryImpl.doShutdown
>>> (RepositoryImpl.java:987)
>>> 	at
>>> org.apache.jackrabbit.core.RepositoryImpl.shutdown
>>> (RepositoryImpl.java:948)
>>> 	at
>>> org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt;
>>> (RepositoryImpl.java:348)
>>> 	at
>>> org.apache.jackrabbit.core.RepositoryImpl.create
>>> (RepositoryImpl.java:557)
>>> 	at
>>> org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createReposit 
>>> or
>>> y(RepositoryFactoryBean.java:57)
>>> 	at
>>> org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet
>>> (RepositoryFactoryBean.java:57)
>>> 	at
>>> org.springframework.beans.factory.support.AbstractAutowireCapableBea 
>>> nF
>>> actory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java: 
>>> 1333)
>>> 	at
>>> org.springframework.beans.factory.support.AbstractAutowireCapableBea 
>>> nF
>>> actory.initializeBean(AbstractAutowireCapableBeanFactory.java:1299)
>>> 	... 75 more
>>>
>>>
>>>
>>> Sergey Kabashnyuk-3 wrote:
>>>>
>>>> Hi
>>>> I want to update  from lucene 2.2.0 to 2.3.0
>>>> but I have assert it TermInfosWriter line 143.
>>>>
>>>> What is it mean
>>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>>>> lastTermTextLength == 0);
>>>>
>>>> Can you help me?
>>>>
>>>> Sergey Kabashnyuk
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context: http://www.nabble.com/from--2.2.0-
>>> to-2.3.0-tp15501449p16323371.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/from--2.2.0- 
> to-2.3.0-tp15501449p16354912.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 28 20:15:12 2008
Return-Path: <java-user-return-33381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61295 invoked from network); 28 Mar 2008 20:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Mar 2008 20:15:12 -0000
Received: (qmail 84954 invoked by uid 500); 28 Mar 2008 20:15:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84926 invoked by uid 500); 28 Mar 2008 20:15:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84915 invoked by uid 99); 28 Mar 2008 20:15:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 13:15:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 20:14:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JfKy9-00025J-Bk
	for java-user@lucene.apache.org; Fri, 28 Mar 2008 13:14:33 -0700
Message-ID: <16361119.post@talk.nabble.com>
Date: Fri, 28 Mar 2008 13:14:33 -0700 (PDT)
From: fanfy <elvis.ciocoiu@trp.ro>
To: java-user@lucene.apache.org
Subject: Re: from  2.2.0 to 2.3.0
In-Reply-To: <E087AE3E-B14E-4CEE-A898-DFD083CD9103@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: elvis.ciocoiu@trp.ro
References: <op.t6ki6muv2ic4zu@sj-desktop> <16323371.post@talk.nabble.com> <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com> <16354912.post@talk.nabble.com> <E087AE3E-B14E-4CEE-A898-DFD083CD9103@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, my mistake, it was 1.4.1 with lucene 2.3.1. Today I upgraded to 1.4.2
and in the same time I downgraded the lucene to 2.2.0 and now it works
(don't know for how long). So, do you think that this error is related to
jackrabbit being developed with an older lucene version? I'll use the 2.2.0
version and hope the error doesn't appear. Thank you for the quick reply. 


Michael McCandless-2 wrote:
> 
> 
> But, Jackrabbit 1.4.2 was released only yesterday, I think?  Also, I  
> think it's based on Lucene 2.2 not 2.3, yet your exception below is a  
> 2.3 exception.
> 
> Is it possible you're actually using a trunk build of Jackrabbit?
> 
> Mike
> 
> fanfy wrote:
>>
>> I'm using jackrabbit 1.4.2. The error doesn't appear all the time  
>> but when it
>> does the solution is to delete the repository. The test is:
>>
>>     	@Test
>> 	public void addDocument()
>> 	{
>> 		documentService.importFile("Ana", "doc", new byte[200]);
>> 	}
>>
>> documentService:
>>     public void importFile(final String name, final String  
>> contentType,
>> final byte[] content) {
>> 		jcrTemplate.execute(new JcrCallback() {
>>
>> 			public Object doInJcr(Session session) throws IOException,
>> 					RepositoryException {
>> 				Node rootNode = session.getRootNode();
>> 				Node fileNode = rootNode.addNode(name, "nt:file");
>> 				fileNode.addMixin("mix:referenceable");
>> 				Node resNode = fileNode.addNode("jcr:content", "nt:resource");
>>
>> 				resNode.setProperty("jcr:data", new BinaryValue(content));
>> 				resNode.setProperty("jcr:mimeType", contentType);
>> 				resNode.setProperty("jcr:lastModified", Calendar.getInstance());
>> 				session.save();
>> 				return resNode;
>> 			}
>> 		});
>> 	}
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Which version of Jackrabbit are you using?
>>>
>>> Can you post the code of the simple test?  Is it only adding a single
>>> document?
>>>
>>> Mike
>>>
>>> fanfy wrote:
>>>>
>>>> I'm also having a similar problem. Can you help me solve it? I'm  
>>>> only
>>>> beginning to use lucene. This is the stack trace from a simple test
>>>> that
>>>> adds a document in the repository. I just created the jackrabbit
>>>> repository
>>>> so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you
>>>> help me
>>>> with some hints?
>>>> The tests are running under a nightly building server using jdk6
>>>> and maven2.
>>>> Thank you.
>>>>
>>>> Caused by: java.lang.AssertionError: Terms are out of order:
>>>> field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
>>>> text=3:autoCreated lastText=3:autoCreated
>>>> 	at org.apache.lucene.index.TermInfosWriter.add
>>>> (TermInfosWriter.java:154)
>>>> 	at
>>>> org.apache.lucene.index.DocumentsWriter.appendPostings
>>>> (DocumentsWriter.java:2316)
>>>> 	at
>>>> org.apache.lucene.index.DocumentsWriter.writeSegment
>>>> (DocumentsWriter.java:2011)
>>>> 	at org.apache.lucene.index.DocumentsWriter.flush
>>>> (DocumentsWriter.java:548)
>>>> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java: 
>>>> 2497)
>>>> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
>>>> 	at org.apache.lucene.index.IndexWriter.closeInternal
>>>> (IndexWriter.java:1204)
>>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
>>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit
>>>> (AbstractIndex.java:326)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit
>>>> (VolatileIndex.java:139)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex
>>>> (PersistentIndex.java:121)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex
>>>> $VolatileCommit.execute(MultiIndex.java:1911)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog
>>>> (MultiIndex.java:936)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileInd 
>>>> ex
>>>> (MultiIndex.java:986)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.flush
>>>> (MultiIndex.java:868)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.close
>>>> (MultiIndex.java:760)
>>>> 	at
>>>> org.apache.jackrabbit.core.query.lucene.SearchIndex.close
>>>> (SearchIndex.java:630)
>>>> 	at
>>>> org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler
>>>> (SearchManager.java:588)
>>>> 	at org.apache.jackrabbit.core.SearchManager.close
>>>> (SearchManager.java:264)
>>>> 	at
>>>> org.apache.jackrabbit.core.RepositoryImpl.doShutdown
>>>> (RepositoryImpl.java:987)
>>>> 	at
>>>> org.apache.jackrabbit.core.RepositoryImpl.shutdown
>>>> (RepositoryImpl.java:948)
>>>> 	at
>>>> org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt;
>>>> (RepositoryImpl.java:348)
>>>> 	at
>>>> org.apache.jackrabbit.core.RepositoryImpl.create
>>>> (RepositoryImpl.java:557)
>>>> 	at
>>>> org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createReposit 
>>>> or
>>>> y(RepositoryFactoryBean.java:57)
>>>> 	at
>>>> org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet
>>>> (RepositoryFactoryBean.java:57)
>>>> 	at
>>>> org.springframework.beans.factory.support.AbstractAutowireCapableBea 
>>>> nF
>>>> actory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java: 
>>>> 1333)
>>>> 	at
>>>> org.springframework.beans.factory.support.AbstractAutowireCapableBea 
>>>> nF
>>>> actory.initializeBean(AbstractAutowireCapableBeanFactory.java:1299)
>>>> 	... 75 more
>>>>
>>>>
>>>>
>>>> Sergey Kabashnyuk-3 wrote:
>>>>>
>>>>> Hi
>>>>> I want to update  from lucene 2.2.0 to 2.3.0
>>>>> but I have assert it TermInfosWriter line 143.
>>>>>
>>>>> What is it mean
>>>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>>>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>>>>> lastTermTextLength == 0);
>>>>>
>>>>> Can you help me?
>>>>>
>>>>> Sergey Kabashnyuk
>>>>>
>>>>> ------------------------------------------------------------------- 
>>>>> --
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> -- 
>>>> View this message in context: http://www.nabble.com/from--2.2.0-
>>>> to-2.3.0-tp15501449p16323371.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/from--2.2.0- 
>> to-2.3.0-tp15501449p16354912.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/from--2.2.0-to-2.3.0-tp15501449p16361119.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 28 21:04:59 2008
Return-Path: <java-user-return-33382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78365 invoked from network); 28 Mar 2008 21:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Mar 2008 21:04:59 -0000
Received: (qmail 53166 invoked by uid 500); 28 Mar 2008 21:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53132 invoked by uid 500); 28 Mar 2008 21:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53121 invoked by uid 99); 28 Mar 2008 21:04:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 14:04:50 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 21:04:08 +0000
Received: by po-out-1718.google.com with SMTP id b23so9617388poe.0
        for <java-user@lucene.apache.org>; Fri, 28 Mar 2008 14:04:19 -0700 (PDT)
Received: by 10.140.191.14 with SMTP id o14mr1800262rvf.130.1206738258461;
        Fri, 28 Mar 2008 14:04:18 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id l22sm4701629wrl.34.2008.03.28.14.04.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 28 Mar 2008 14:04:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <16361119.post@talk.nabble.com>
References: <op.t6ki6muv2ic4zu@sj-desktop> <16323371.post@talk.nabble.com> <B311E708-D6D7-45E7-B375-48363F55C3BA@mikemccandless.com> <16354912.post@talk.nabble.com> <E087AE3E-B14E-4CEE-A898-DFD083CD9103@mikemccandless.com> <16361119.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <97DBDE8F-E631-45D8-8A44-897500DB862F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 28 Mar 2008 17:04:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, yes, I'm guessing this explains your issue:

     https://issues.apache.org/jira/browse/JCR-1363

I think Jackrabbit doesn't yet work with Lucene 2.3.

But please post back if you see issues with Lucene 2.2!

Mike

fanfy wrote:
>
> Sorry, my mistake, it was 1.4.1 with lucene 2.3.1. Today I upgraded  
> to 1.4.2
> and in the same time I downgraded the lucene to 2.2.0 and now it works
> (don't know for how long). So, do you think that this error is  
> related to
> jackrabbit being developed with an older lucene version? I'll use  
> the 2.2.0
> version and hope the error doesn't appear. Thank you for the quick  
> reply.
>
>
> Michael McCandless-2 wrote:
>>
>>
>> But, Jackrabbit 1.4.2 was released only yesterday, I think?  Also, I
>> think it's based on Lucene 2.2 not 2.3, yet your exception below is a
>> 2.3 exception.
>>
>> Is it possible you're actually using a trunk build of Jackrabbit?
>>
>> Mike
>>
>> fanfy wrote:
>>>
>>> I'm using jackrabbit 1.4.2. The error doesn't appear all the time
>>> but when it
>>> does the solution is to delete the repository. The test is:
>>>
>>>     	@Test
>>> 	public void addDocument()
>>> 	{
>>> 		documentService.importFile("Ana", "doc", new byte[200]);
>>> 	}
>>>
>>> documentService:
>>>     public void importFile(final String name, final String
>>> contentType,
>>> final byte[] content) {
>>> 		jcrTemplate.execute(new JcrCallback() {
>>>
>>> 			public Object doInJcr(Session session) throws IOException,
>>> 					RepositoryException {
>>> 				Node rootNode = session.getRootNode();
>>> 				Node fileNode = rootNode.addNode(name, "nt:file");
>>> 				fileNode.addMixin("mix:referenceable");
>>> 				Node resNode = fileNode.addNode("jcr:content", "nt:resource");
>>>
>>> 				resNode.setProperty("jcr:data", new BinaryValue(content));
>>> 				resNode.setProperty("jcr:mimeType", contentType);
>>> 				resNode.setProperty("jcr:lastModified", Calendar.getInstance());
>>> 				session.save();
>>> 				return resNode;
>>> 			}
>>> 		});
>>> 	}
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> Which version of Jackrabbit are you using?
>>>>
>>>> Can you post the code of the simple test?  Is it only adding a  
>>>> single
>>>> document?
>>>>
>>>> Mike
>>>>
>>>> fanfy wrote:
>>>>>
>>>>> I'm also having a similar problem. Can you help me solve it? I'm
>>>>> only
>>>>> beginning to use lucene. This is the stack trace from a simple  
>>>>> test
>>>>> that
>>>>> adds a document in the repository. I just created the jackrabbit
>>>>> repository
>>>>> so mine is not an upgrade from 2.2 to 2.3 problem. Anyway can you
>>>>> help me
>>>>> with some hints?
>>>>> The tests are running under a nightly building server using jdk6
>>>>> and maven2.
>>>>> Thank you.
>>>>>
>>>>> Caused by: java.lang.AssertionError: Terms are out of order:
>>>>> field=_:PROPERTIES (number 4) lastField=_:PROPERTIES (number 4)
>>>>> text=3:autoCreated lastText=3:autoCreated
>>>>> 	at org.apache.lucene.index.TermInfosWriter.add
>>>>> (TermInfosWriter.java:154)
>>>>> 	at
>>>>> org.apache.lucene.index.DocumentsWriter.appendPostings
>>>>> (DocumentsWriter.java:2316)
>>>>> 	at
>>>>> org.apache.lucene.index.DocumentsWriter.writeSegment
>>>>> (DocumentsWriter.java:2011)
>>>>> 	at org.apache.lucene.index.DocumentsWriter.flush
>>>>> (DocumentsWriter.java:548)
>>>>> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:
>>>>> 2497)
>>>>> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java: 
>>>>> 2397)
>>>>> 	at org.apache.lucene.index.IndexWriter.closeInternal
>>>>> (IndexWriter.java:1204)
>>>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java: 
>>>>> 1178)
>>>>> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java: 
>>>>> 1153)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.AbstractIndex.commit
>>>>> (AbstractIndex.java:326)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.VolatileIndex.commit
>>>>> (VolatileIndex.java:139)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.PersistentIndex.copyIndex
>>>>> (PersistentIndex.java:121)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex
>>>>> $VolatileCommit.execute(MultiIndex.java:1911)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.executeAndLog
>>>>> (MultiIndex.java:936)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.commitVolatileI 
>>>>> nd
>>>>> ex
>>>>> (MultiIndex.java:986)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.flush
>>>>> (MultiIndex.java:868)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.MultiIndex.close
>>>>> (MultiIndex.java:760)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.query.lucene.SearchIndex.close
>>>>> (SearchIndex.java:630)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.SearchManager.shutdownQueryHandler
>>>>> (SearchManager.java:588)
>>>>> 	at org.apache.jackrabbit.core.SearchManager.close
>>>>> (SearchManager.java:264)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.RepositoryImpl.doShutdown
>>>>> (RepositoryImpl.java:987)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.RepositoryImpl.shutdown
>>>>> (RepositoryImpl.java:948)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.RepositoryImpl.&lt;init&gt;
>>>>> (RepositoryImpl.java:348)
>>>>> 	at
>>>>> org.apache.jackrabbit.core.RepositoryImpl.create
>>>>> (RepositoryImpl.java:557)
>>>>> 	at
>>>>> org.springmodules.jcr.jackrabbit.RepositoryFactoryBean.createRepos 
>>>>> it
>>>>> or
>>>>> y(RepositoryFactoryBean.java:57)
>>>>> 	at
>>>>> org.springmodules.jcr.RepositoryFactoryBean.afterPropertiesSet
>>>>> (RepositoryFactoryBean.java:57)
>>>>> 	at
>>>>> org.springframework.beans.factory.support.AbstractAutowireCapableB 
>>>>> ea
>>>>> nF
>>>>> actory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:
>>>>> 1333)
>>>>> 	at
>>>>> org.springframework.beans.factory.support.AbstractAutowireCapableB 
>>>>> ea
>>>>> nF
>>>>> actory.initializeBean(AbstractAutowireCapableBeanFactory.java: 
>>>>> 1299)
>>>>> 	... 75 more
>>>>>
>>>>>
>>>>>
>>>>> Sergey Kabashnyuk-3 wrote:
>>>>>>
>>>>>> Hi
>>>>>> I want to update  from lucene 2.2.0 to 2.3.0
>>>>>> but I have assert it TermInfosWriter line 143.
>>>>>>
>>>>>> What is it mean
>>>>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>>>>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>>>>>> lastTermTextLength == 0);
>>>>>>
>>>>>> Can you help me?
>>>>>>
>>>>>> Sergey Kabashnyuk
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> -- 
>>>>> View this message in context: http://www.nabble.com/from--2.2.0-
>>>>> to-2.3.0-tp15501449p16323371.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> --
>>>>> -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context: http://www.nabble.com/from--2.2.0-
>>> to-2.3.0-tp15501449p16354912.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/from--2.2.0- 
> to-2.3.0-tp15501449p16361119.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 06:28:58 2008
Return-Path: <java-user-return-33383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39710 invoked from network); 29 Mar 2008 06:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 06:28:58 -0000
Received: (qmail 44005 invoked by uid 500); 29 Mar 2008 06:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43970 invoked by uid 500); 29 Mar 2008 06:28:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43958 invoked by uid 99); 29 Mar 2008 06:28:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Mar 2008 23:28:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 06:27:58 +0000
Received: (qmail 29095 invoked by uid 511); 28 Mar 2008 23:28:16 -0700
Received: from 41.243.255.163 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.255.163):SA:0(-2.3/5.0):. 
 Processed in 2.403146 secs); 29 Mar 2008 06:28:16 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.255.163):SA:0(-2.3/5.0):. Processed in 2.403146 secs Process 29085)
Received: from dsl-243-255-163.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.255.163)
  by stimulussoft.com with SMTP; 28 Mar 2008 23:28:14 -0700
Message-ID: <47EDE24B.7070907@stimulussoft.com>
Date: Sat, 29 Mar 2008 08:31:39 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

HI There

I keep getting the following error when simultaneously reindexing my 
documents and searching through the index.

java.io.IOException: Cannot overwrite: C:\index9121\_2.cfs
    at 
org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
    at 
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:150)
    at 
org.apache.lucene.index.DocumentsWriter.createCompoundFile(DocumentsWriter.java:569)
    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2565)
    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
    at 
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1204)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)

Consequently, often documents are missing from the index. Does one have 
to perform any synchronized across IndexWriter and IndexReader? I 
assumed that Lucene took care of this. I sincerely appreciate any 
guidance on offer!'

Many thanks
Jamie

PS: Here is the Lucene indexing debug information.

IFD [http-8090-2]: setInfoStream 
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ae3b4d
IW 27 [http-8090-2]: setInfoStream: 
dir=org.apache.lucene.store.FSDirectory@C:\index9121 autoCommit=false 
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@1b7682d 
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@1873a6 
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1 
maxFieldLength=50000 index=_3:c113 _4:c70 _5:c44 _6:c68
IW 27 [Timer-0]: now flush at close
IW 27 [Timer-0]:   flush: segment=_7 docStoreSegment=_7 docStoreOffset=0 
flushDocs=true flushDeletes=false flushDocStores=true numDocs=27 
numBufDelTerms=0
IW 27 [Timer-0]:   index before flush _3:c113 _4:c70 _5:c44 _6:c68

flush postings as segment _7 numDocs=27

closeDocStore: 2 files to flush to segment _7 numDocs=27
  oldRAMSize=212992 newFlushedSize=32784 docs/MB=863.578 new/old=15.392%
IFD [Timer-0]: now checkpoint "segments_5" [5 segments ; isCommit = false]
IFD [Timer-0]: delete pending file _9s.cfs
IFD [Timer-0]: delete "_9s.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9y.cfs
IFD [Timer-0]: delete "_9y.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfs
IFD [Timer-0]: delete "_9x.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9v.cfs
IFD [Timer-0]: delete "_9v.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9z.cfs
IFD [Timer-0]: delete "_9z.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfs
IFD [Timer-0]: delete "_9t.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfx
IFD [Timer-0]: delete "_9x.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re-try later.
IFD [Timer-0]: delete pending file _9u.cfs
IFD [Timer-0]: delete "_9u.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9w.cfs
IFD [Timer-0]: delete "_9w.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfx
IFD [Timer-0]: delete "_9t.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re-try later.
IFD [Timer-0]: now checkpoint "segments_5" [5 segments ; isCommit = false]
IFD [Timer-0]: delete pending file _9s.cfs
IFD [Timer-0]: delete "_9s.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9y.cfs
IFD [Timer-0]: delete "_9y.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfs
IFD [Timer-0]: delete "_9x.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9v.cfs
IFD [Timer-0]: delete "_9v.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9z.cfs
IFD [Timer-0]: delete "_9z.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfs
IFD [Timer-0]: delete "_9t.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfx
IFD [Timer-0]: delete "_9x.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re-try later.
IFD [Timer-0]: delete pending file _9u.cfs
IFD [Timer-0]: delete "_9u.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9w.cfs
IFD [Timer-0]: delete "_9w.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfx
IFD [Timer-0]: delete "_9t.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re-try later.
IFD [Timer-0]: delete "_7.fnm"
IFD [Timer-0]: delete "_7.frq"
IFD [Timer-0]: delete "_7.prx"
IFD [Timer-0]: delete "_7.tis"
IFD [Timer-0]: delete "_7.tii"
IFD [Timer-0]: delete "_7.nrm"
IFD [Timer-0]: delete "_7.fdx"
IFD [Timer-0]: delete "_7.fdt"
IW 27 [Timer-0]: LMP: findMerges: 5 segments
IW 27 [Timer-0]: LMP:   level -1.0 to 5.250432: 5 segments
IW 27 [Timer-0]: CMS: now merge
IW 27 [Timer-0]: CMS:   index: _3:c113 _4:c70 _5:c44 _6:c68 _7:c27
IW 27 [Timer-0]: CMS:   no more merges pending; now return
IW 27 [Timer-0]: close: wrote segments file "segments_6"
IFD [Timer-0]: now checkpoint "segments_6" [5 segments ; isCommit = true]
IFD [Timer-0]: delete pending file _9s.cfs
IFD [Timer-0]: delete "_9s.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9y.cfs
IFD [Timer-0]: delete "_9y.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfs
IFD [Timer-0]: delete "_9x.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9v.cfs
IFD [Timer-0]: delete "_9v.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9z.cfs
IFD [Timer-0]: delete "_9z.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfs
IFD [Timer-0]: delete "_9t.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfx
IFD [Timer-0]: delete "_9x.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re-try later.
IFD [Timer-0]: delete pending file _9u.cfs
IFD [Timer-0]: delete "_9u.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9w.cfs
IFD [Timer-0]: delete "_9w.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfx
IFD [Timer-0]: delete "_9t.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re-try later.
IFD [Timer-0]: deleteCommits: now remove commit "segments_5"
IFD [Timer-0]: delete "segments_5"
IW 27 [Timer-0]: at close: _3:c113 _4:c70 _5:c44 _6:c68 _7:c27
IFD [Timer-0]: delete pending file _9s.cfs
IFD [Timer-0]: delete "_9s.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9y.cfs
IFD [Timer-0]: delete "_9y.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfs
IFD [Timer-0]: delete "_9x.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9v.cfs
IFD [Timer-0]: delete "_9v.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9z.cfs
IFD [Timer-0]: delete "_9z.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfs
IFD [Timer-0]: delete "_9t.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9x.cfx
IFD [Timer-0]: delete "_9x.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re-try later.
IFD [Timer-0]: delete pending file _9u.cfs
IFD [Timer-0]: delete "_9u.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9w.cfs
IFD [Timer-0]: delete "_9w.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs": 
java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _9t.cfx
IFD [Timer-0]: delete "_9t.cfx"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx": 
java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re-try later.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 07:14:25 2008
Return-Path: <java-user-return-33384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48927 invoked from network); 29 Mar 2008 07:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 07:14:25 -0000
Received: (qmail 65121 invoked by uid 500); 29 Mar 2008 07:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65093 invoked by uid 500); 29 Mar 2008 07:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65082 invoked by uid 99); 29 Mar 2008 07:14:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 00:14:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 07:13:34 +0000
Received: by an-out-0708.google.com with SMTP id c5so158338anc.49
        for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 00:13:44 -0700 (PDT)
Received: by 10.100.57.6 with SMTP id f6mr7671975ana.99.1206774824554;
        Sat, 29 Mar 2008 00:13:44 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b45sm1199858hsa.10.2008.03.29.00.13.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 29 Mar 2008 00:13:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47EDE24B.7070907@stimulussoft.com>
References: <47EDE24B.7070907@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
Date: Sat, 29 Mar 2008 03:13:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


That use case of Lucene should be fine, ie no further synchronization  
should be necessary.

Your debug output below is great, but it doesn't seem to cover the  
occurrence of that exception.  Can you post the full debug output?

Can you describe how you reindex in more detail?  Are you manually  
removing files from the index and then opening a new IndexWriter with  
create=true?

Mike

Jamie wrote:
> HI There
>
> I keep getting the following error when simultaneously reindexing  
> my documents and searching through the index.
>
> java.io.IOException: Cannot overwrite: C:\index9121\_2.cfs
>    at org.apache.lucene.store.FSDirectory.createOutput 
> (FSDirectory.java:433)
>    at org.apache.lucene.index.CompoundFileWriter.close 
> (CompoundFileWriter.java:150)
>    at org.apache.lucene.index.DocumentsWriter.createCompoundFile 
> (DocumentsWriter.java:569)
>    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java: 
> 2565)
>    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
>    at org.apache.lucene.index.IndexWriter.closeInternal 
> (IndexWriter.java:1204)
>    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
>    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)
>
> Consequently, often documents are missing from the index. Does one  
> have to perform any synchronized across IndexWriter and  
> IndexReader? I assumed that Lucene took care of this. I sincerely  
> appreciate any guidance on offer!'
>
> Many thanks
> Jamie
>
> PS: Here is the Lucene indexing debug information.
>
> IFD [http-8090-2]: setInfoStream  
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolic 
> y@1ae3b4d
> IW 27 [http-8090-2]: setInfoStream:  
> dir=org.apache.lucene.store.FSDirectory@C:\index9121  
> autoCommit=false  
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@1b7682d  
> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@1873a6 
>  ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1  
> maxFieldLength=50000 index=_3:c113 _4:c70 _5:c44 _6:c68
> IW 27 [Timer-0]: now flush at close
> IW 27 [Timer-0]:   flush: segment=_7 docStoreSegment=_7  
> docStoreOffset=0 flushDocs=true flushDeletes=false  
> flushDocStores=true numDocs=27 numBufDelTerms=0
> IW 27 [Timer-0]:   index before flush _3:c113 _4:c70 _5:c44 _6:c68
>
> flush postings as segment _7 numDocs=27
>
> closeDocStore: 2 files to flush to segment _7 numDocs=27
>  oldRAMSize=212992 newFlushedSize=32784 docs/MB=863.578 new/ 
> old=15.392%
> IFD [Timer-0]: now checkpoint "segments_5" [5 segments ; isCommit =  
> false]
> IFD [Timer-0]: delete pending file _9s.cfs
> IFD [Timer-0]: delete "_9s.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9y.cfs
> IFD [Timer-0]: delete "_9y.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfs
> IFD [Timer-0]: delete "_9x.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9v.cfs
> IFD [Timer-0]: delete "_9v.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9z.cfs
> IFD [Timer-0]: delete "_9z.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfs
> IFD [Timer-0]: delete "_9t.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfx
> IFD [Timer-0]: delete "_9x.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9u.cfs
> IFD [Timer-0]: delete "_9u.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9w.cfs
> IFD [Timer-0]: delete "_9w.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfx
> IFD [Timer-0]: delete "_9t.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re- 
> try later.
> IFD [Timer-0]: now checkpoint "segments_5" [5 segments ; isCommit =  
> false]
> IFD [Timer-0]: delete pending file _9s.cfs
> IFD [Timer-0]: delete "_9s.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9y.cfs
> IFD [Timer-0]: delete "_9y.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfs
> IFD [Timer-0]: delete "_9x.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9v.cfs
> IFD [Timer-0]: delete "_9v.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9z.cfs
> IFD [Timer-0]: delete "_9z.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfs
> IFD [Timer-0]: delete "_9t.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfx
> IFD [Timer-0]: delete "_9x.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9u.cfs
> IFD [Timer-0]: delete "_9u.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9w.cfs
> IFD [Timer-0]: delete "_9w.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfx
> IFD [Timer-0]: delete "_9t.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re- 
> try later.
> IFD [Timer-0]: delete "_7.fnm"
> IFD [Timer-0]: delete "_7.frq"
> IFD [Timer-0]: delete "_7.prx"
> IFD [Timer-0]: delete "_7.tis"
> IFD [Timer-0]: delete "_7.tii"
> IFD [Timer-0]: delete "_7.nrm"
> IFD [Timer-0]: delete "_7.fdx"
> IFD [Timer-0]: delete "_7.fdt"
> IW 27 [Timer-0]: LMP: findMerges: 5 segments
> IW 27 [Timer-0]: LMP:   level -1.0 to 5.250432: 5 segments
> IW 27 [Timer-0]: CMS: now merge
> IW 27 [Timer-0]: CMS:   index: _3:c113 _4:c70 _5:c44 _6:c68 _7:c27
> IW 27 [Timer-0]: CMS:   no more merges pending; now return
> IW 27 [Timer-0]: close: wrote segments file "segments_6"
> IFD [Timer-0]: now checkpoint "segments_6" [5 segments ; isCommit =  
> true]
> IFD [Timer-0]: delete pending file _9s.cfs
> IFD [Timer-0]: delete "_9s.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9y.cfs
> IFD [Timer-0]: delete "_9y.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfs
> IFD [Timer-0]: delete "_9x.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9v.cfs
> IFD [Timer-0]: delete "_9v.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9z.cfs
> IFD [Timer-0]: delete "_9z.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfs
> IFD [Timer-0]: delete "_9t.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfx
> IFD [Timer-0]: delete "_9x.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9u.cfs
> IFD [Timer-0]: delete "_9u.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9w.cfs
> IFD [Timer-0]: delete "_9w.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfx
> IFD [Timer-0]: delete "_9t.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfx; Will re- 
> try later.
> IFD [Timer-0]: deleteCommits: now remove commit "segments_5"
> IFD [Timer-0]: delete "segments_5"
> IW 27 [Timer-0]: at close: _3:c113 _4:c70 _5:c44 _6:c68 _7:c27
> IFD [Timer-0]: delete pending file _9s.cfs
> IFD [Timer-0]: delete "_9s.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9s.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9s.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9y.cfs
> IFD [Timer-0]: delete "_9y.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9y.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9y.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfs
> IFD [Timer-0]: delete "_9x.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9v.cfs
> IFD [Timer-0]: delete "_9v.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9v.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9v.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9z.cfs
> IFD [Timer-0]: delete "_9z.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9z.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9z.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfs
> IFD [Timer-0]: delete "_9t.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9t.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9x.cfx
> IFD [Timer-0]: delete "_9x.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9x.cfx":  
> java.io.IOException: Cannot delete C:\index9121\_9x.cfx; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9u.cfs
> IFD [Timer-0]: delete "_9u.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9u.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9u.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9w.cfs
> IFD [Timer-0]: delete "_9w.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9w.cfs":  
> java.io.IOException: Cannot delete C:\index9121\_9w.cfs; Will re- 
> try later.
> IFD [Timer-0]: delete pending file _9t.cfx
> IFD [Timer-0]: delete "_9t.cfx"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_9t.cfx": jav


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 09:38:16 2008
Return-Path: <java-user-return-33385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89655 invoked from network); 29 Mar 2008 09:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 09:38:15 -0000
Received: (qmail 20892 invoked by uid 500); 29 Mar 2008 09:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20853 invoked by uid 500); 29 Mar 2008 09:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20842 invoked by uid 99); 29 Mar 2008 09:38:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 02:38:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 09:37:14 +0000
Received: (qmail 29573 invoked by uid 511); 29 Mar 2008 02:37:32 -0700
Received: from 41.243.255.163 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.255.163):SA:0(-0.1/5.0):. 
 Processed in 3.810397 secs); 29 Mar 2008 09:37:32 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.255.163):SA:0(-0.1/5.0):. Processed in 3.810397 secs Process 29563)
Received: from dsl-243-255-163.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.255.163)
  by stimulussoft.com with SMTP; 29 Mar 2008 02:37:28 -0700
Message-ID: <47EE0EA6.9090801@stimulussoft.com>
Date: Sat, 29 Mar 2008 11:40:54 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
References: <47EDE24B.7070907@stimulussoft.com> <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com>
In-Reply-To: <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com>
Content-Type: multipart/mixed;
 boundary="------------040803090309010402040701"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-0.1 required=5.0

--------------040803090309010402040701
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Michael

Glad you asked and thanks in advance for your help! I am trying to 
reindex 325 emails. Its a pretty straight forward use of Lucene. I 
create an IndexWriter, write a whole bunch of documents and then close 
the Index every 2 seconds. See the attached source code. In case, you 
are wondering there is only ever one VolumeIndex ever created. 
Following, there is only ever one IndexWriter created in the entire 
application. After further testing I dont think the problem is related 
to IndexReader since the problem still occurs even if I dont execute a 
search. The amount emails indexed varies between around 305 and 325. The 
exception that gets thrown prevents the emails from being indexed. I've 
tried  removing the synchronization and doing a simple:

synchronized(this) {
    openIndex()
    write()
    closeIndex()
}

i.e. open and close the index between every document write and the 
problem still appears.

For a recap, here is the exception:

java.io.IOException: Cannot overwrite: C:\index9121\_1.cfs
    at 
org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
    at 
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:150)
    at 
org.apache.lucene.index.DocumentsWriter.createCompoundFile(DocumentsWriter.java:587)
    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3251)
    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3110)
    at 
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1659)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1633)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1601)

I cleared out the logs and executed another reindex and the following 
debug information was outputted by Lucene. Unfortunately, the debug 
output does not include any information on the error. I am not sure why 
this is the case, but I can assure you that the log information was 
generated by the reindexing operation. Any ideas on what this might be? 
Can you suggest a workaround?

As an aside note, is Lucene 2.2.0 compatible with Lucene 2.3.0 indexes? 
If I cant sort this out in the next couple of days, I may need to switch 
everyone back to Lucene 2.2.0 temporarily until this problem is resolved.

IFD [http-8090-2]: setInfoStream 
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ebf305
IW 22 [http-8090-2]: setInfoStream: 
dir=org.apache.lucene.store.FSDirectory@C:\index9121 autoCommit=false 
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@19ffd6f 
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@b799cf 
ramBufferSizeMB=16.0 maxBufferedDocs=-1 maxBuffereDeleteTerms=-1 
maxFieldLength=50000 index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 _6:c53
IW 22 [Timer-0]: now flush at close
IW 22 [Timer-0]:   flush: segment=_7 docStoreSegment=_7 docStoreOffset=0 
flushDocs=true flushDeletes=true flushDocStores=true numDocs=28 
numBufDelTerms=0
IW 22 [Timer-0]:   index before flush _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 
_5:c52 _6:c53
IW 22 [Timer-0]: DW: flush postings as segment _7 numDocs=28
IW 22 [Timer-0]: DW: closeDocStore: 2 files to flush to segment _7 
numDocs=28
IW 22 [Timer-0]: DW:   oldRAMSize=245760 newFlushedSize=38119 
docs/MB=770.223 new/old=15.511%
IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit = false]
IFD [Timer-0]: delete pending file _f.cfs
IFD [Timer-0]: delete "_f.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _h.cfs
IFD [Timer-0]: delete "_h.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _d.cfs
IFD [Timer-0]: delete "_d.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _c.cfs
IFD [Timer-0]: delete "_c.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _b.cfs
IFD [Timer-0]: delete "_b.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _g.cfs
IFD [Timer-0]: delete "_g.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _e.cfs
IFD [Timer-0]: delete "_e.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try later.
IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit = false]
IFD [Timer-0]: delete pending file _f.cfs
IFD [Timer-0]: delete "_f.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _h.cfs
IFD [Timer-0]: delete "_h.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _d.cfs
IFD [Timer-0]: delete "_d.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _c.cfs
IFD [Timer-0]: delete "_c.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _b.cfs
IFD [Timer-0]: delete "_b.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _g.cfs
IFD [Timer-0]: delete "_g.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _e.cfs
IFD [Timer-0]: delete "_e.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try later.
IFD [Timer-0]: delete "_7.fnm"
IFD [Timer-0]: delete "_7.frq"
IFD [Timer-0]: delete "_7.prx"
IFD [Timer-0]: delete "_7.tis"
IFD [Timer-0]: delete "_7.tii"
IFD [Timer-0]: delete "_7.nrm"
IFD [Timer-0]: delete "_7.fdx"
IFD [Timer-0]: delete "_7.fdt"
IW 22 [Timer-0]: LMP: findMerges: 8 segments
IW 22 [Timer-0]: LMP:   level -1.0 to 5.202747: 8 segments
IW 22 [Timer-0]: CMS: now merge
IW 22 [Timer-0]: CMS:   index: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
_6:c53 _7:c28
IW 22 [Timer-0]: CMS:   no more merges pending; now return
IW 22 [Timer-0]: now call final commit()
IW 22 [Timer-0]: start commit() skipWait=true sizeInBytes=0
IW 22 [Timer-0]: commit index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
_6:c53 _7:c28
IW 22 [Timer-0]: now sync _7.cfs
IW 22 [Timer-0]: commit complete
IFD [Timer-0]: now checkpoint "segments_9" [8 segments ; isCommit = true]
IFD [Timer-0]: delete pending file _f.cfs
IFD [Timer-0]: delete "_f.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _h.cfs
IFD [Timer-0]: delete "_h.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _d.cfs
IFD [Timer-0]: delete "_d.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _c.cfs
IFD [Timer-0]: delete "_c.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _b.cfs
IFD [Timer-0]: delete "_b.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _g.cfs
IFD [Timer-0]: delete "_g.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _e.cfs
IFD [Timer-0]: delete "_e.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try later.
IFD [Timer-0]: deleteCommits: now decRef commit "segments_8"
IFD [Timer-0]: delete "segments_8"
IW 22 [Timer-0]: done all syncs
IW 22 [Timer-0]: at close: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
_6:c53 _7:c28
IFD [Timer-0]: delete pending file _f.cfs
IFD [Timer-0]: delete "_f.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _h.cfs
IFD [Timer-0]: delete "_h.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _d.cfs
IFD [Timer-0]: delete "_d.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _c.cfs
IFD [Timer-0]: delete "_c.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _b.cfs
IFD [Timer-0]: delete "_b.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _g.cfs
IFD [Timer-0]: delete "_g.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try later.
IFD [Timer-0]: delete pending file _e.cfs
IFD [Timer-0]: delete "_e.cfs"
IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try later.


Michael McCandless wrote:
>
> That use case of Lucene should be fine, ie no further synchronization 
> should be necessary.
>
> Your debug output below is great, but it doesn't seem to cover the 
> occurrence of that exception.  Can you post the full debug output?
>
> Can you describe how you reindex in more detail?  Are you manually 
> removing files from the index and then opening a new IndexWriter with 
> create=true?
>
> Mike


--------------040803090309010402040701
Content-Type: text/plain;
 name="VolumeIndex.java"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="VolumeIndex.java"

cGFja2FnZSBjb20uc3RpbXVsdXMuYXJjaGl2YS5pbmRleDsNCg0KaW1wb3J0IGphdmEuaW8u
RmlsZTsNCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KaW1wb3J0IGphdmEuaW8uUHJp
bnRTdHJlYW07DQppbXBvcnQgamF2YS51dGlsLkRhdGU7DQppbXBvcnQgamF2YS51dGlsLlRp
bWVyOw0KaW1wb3J0IGphdmEudXRpbC5UaW1lclRhc2s7DQppbXBvcnQgamF2YXgubWFpbC5N
ZXNzYWdpbmdFeGNlcHRpb247DQppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5MZXZlbDsNCmlt
cG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2Vu
ZS5kb2N1bWVudC5Eb2N1bWVudDsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5J
bmRleFdyaXRlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5GU0RpcmVjdG9y
eTsNCmltcG9ydCBjb20uc3RpbXVsdXMuYXJjaGl2YS5kb21haW4uQ29uZmlnOw0KaW1wb3J0
IGNvbS5zdGltdWx1cy5hcmNoaXZhLmRvbWFpbi5FbWFpbDsNCmltcG9ydCBjb20uc3RpbXVs
dXMuYXJjaGl2YS5kb21haW4uSW5kZXg7DQppbXBvcnQgY29tLnN0aW11bHVzLmFyY2hpdmEu
ZG9tYWluLkluZGV4ZXI7DQppbXBvcnQgY29tLnN0aW11bHVzLmFyY2hpdmEuZG9tYWluLlZv
bHVtZTsNCmltcG9ydCBjb20uc3RpbXVsdXMuYXJjaGl2YS5leGNlcHRpb24uRXh0cmFjdGlv
bkV4Y2VwdGlvbjsNCmltcG9ydCBjb20uc3RpbXVsdXMuYXJjaGl2YS5leGNlcHRpb24uTWVz
c2FnZVNlYXJjaEV4Y2VwdGlvbjsNCmltcG9ydCBjb20uc3RpbXVsdXMuYXJjaGl2YS5sYW5n
dWFnZS5BbmFseXplckZhY3Rvcnk7DQppbXBvcnQgY29tLnN0aW11bHVzLmFyY2hpdmEuc2Vh
cmNoLkFyY2hpdmFBbmFseXplcjsNCg0KcHVibGljIGNsYXNzIFZvbHVtZUluZGV4IHsNCgkN
CgkJIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRM
b2dnZXIoVm9sdW1lSW5kZXguY2xhc3MuZ2V0TmFtZSgpKTsNCgkJIHB1YmxpYyBzdGF0aWMg
ZmluYWwgaW50IGluZGV4T3BlblRpbWUgPSAyMDAwOw0KCSAgIAkgSW5kZXhXcml0ZXIgd3Jp
dGVyID0gbnVsbDsNCgkgICAJIFZvbHVtZSB2b2x1bWU7DQoJICAgCSBUaW1lciBjbG9zZUlu
ZGV4VGltZXIgPSBuZXcgVGltZXIoKTsNCgkJIE9iamVjdCBpbmRleExvY2sgPSBuZXcgT2Jq
ZWN0KCk7DQoJCSBBcmNoaXZhQW5hbHl6ZXIgYW5hbHl6ZXIgCT0gbmV3IEFyY2hpdmFBbmFs
eXplcigpOw0KCQkgSW5kZXhlciBpbmRleGVyID0gbnVsbDsNCgkJIA0KCSAgCSAgcHVibGlj
IFZvbHVtZUluZGV4KEluZGV4ZXIgaW5kZXhlciwgVm9sdW1lIHZvbHVtZSkgew0KCSAgCQkg
IAl0aGlzLnZvbHVtZSA9IHZvbHVtZTsNCgkgIAkJICAJdGhpcy5pbmRleGVyID0gaW5kZXhl
cjsNCgkJICAJCWNsb3NlSW5kZXhUaW1lci5zY2hlZHVsZUF0Rml4ZWRSYXRlKG5ldyBUaW1l
clRhc2soKSB7DQoJCSAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCgkJICAgICAg
ICAgICAgIAljbG9zZUluZGV4KCk7DQoJCSAgICAgICAgICAgIH0NCgkJICAgICAgICB9LCBp
bmRleE9wZW5UaW1lLCBpbmRleE9wZW5UaW1lKTsNCgkgIAkgIH0NCg0KCQkgIHByb3RlY3Rl
ZCB2b2lkIG9wZW5JbmRleCgpIHRocm93cyBNZXNzYWdlU2VhcmNoRXhjZXB0aW9uIHsNCgkJ
CSBFeGNlcHRpb24gbGFzdEVycm9yID0gbnVsbDsNCgkJCSBzeW5jaHJvbml6ZWQoaW5kZXhM
b2NrKSB7DQoJCSAgICAJaWYgKHdyaXRlcj09bnVsbCkgew0KCQkgICAgCQlsb2dnZXIuZGVi
dWcoIm9wZW5JbmRleCgpIGluZGV4IHdpbGwgYmUgb3BlbmVkLiBpdCBpcyBjdXJyZW50bHkg
Y2xvc2VkLiIpOw0KCQkgICAgCX0gZWxzZSB7DQoJCSAgICAJCWxvZ2dlci5kZWJ1Zygib3Bl
bkluZGV4KCkgZGlkIG5vdCBib3RoZXIgb3BlbmluZyBpbmRleC4gaXQgaXMgYWxyZWFkeSBv
cGVuLiIpOw0KCQkgICAgCQlyZXR1cm47IA0KCQkgICAgCX0NCgkJICAgIAkNCgkJICAgIAkN
CgkJCQlpZiAodm9sdW1lID09IG51bGwpDQoJCQkJICAgIHRocm93IG5ldyBNZXNzYWdlU2Vh
cmNoRXhjZXB0aW9uKCJhc3NlcnRpb24gZmFpbHVyZTogbnVsbCB2b2x1bWUiLGxvZ2dlcik7
DQoJCQkJbG9nZ2VyLmRlYnVnKCJvcGVuaW5nIGluZGV4IGZvciB3cml0ZSB7Iit2b2x1bWUr
In0iKTsNCgkJCQlpbmRleGVyLnByZXBhcmVJbmRleCh2b2x1bWUpOw0KCQkJCUluZGV4IGFj
dGl2ZUluZGV4ID0gdm9sdW1lLmdldEFjdGl2ZUluZGV4KCk7DQoJCQkJbG9nZ2VyLmRlYnVn
KCJvcGVuaW5nIHNlYXJjaCBpbmRleCBmb3Igd3JpdGUge2luZGV4cGF0aD0nIithY3RpdmVJ
bmRleC5nZXRQYXRoKCkrIid9Iik7DQoJCQkJaW50IGF0dGVtcHQgPSAwOw0KCQkJICAgIGRv
IHsNCgkJCQkJdHJ5IHsNCgkJCQkJCQl3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIoRlNEaXJl
Y3RvcnkuZ2V0RGlyZWN0b3J5KGFjdGl2ZUluZGV4LmdldFBhdGgoKSksZmFsc2UsIGFuYWx5
emVyKTsNCgkJCQkJCQl3cml0ZXIuc2V0TWF4RmllbGRMZW5ndGgoNTAwMDApOw0KCQkJCQkJ
CWlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgew0KCQkJCQkJCQlGaWxlIGZpbGUgPSBu
ZXcgRmlsZShDb25maWcuZ2V0RmlsZVN5c3RlbSgpLmdldExvZ1BhdGgoKStGaWxlLnNlcGFy
YXRvcisiaW5kZXgubG9nIik7DQoJCQkJCQkJCVByaW50U3RyZWFtIGRlYnVnb3V0ID0gbmV3
IFByaW50U3RyZWFtKGZpbGUpOw0KCQkJCQkJCQl3cml0ZXIuc2V0SW5mb1N0cmVhbShkZWJ1
Z291dCk7DQoJCQkJCQkJfQ0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQ0KCQkJCQl9IGNhdGNo
IChJT0V4Y2VwdGlvbiBpbykNCgkJCQkJew0KCQkJCQkJaW8ucHJpbnRTdGFja1RyYWNlKCk7
DQoJCQkJCQlpZiAoYXR0ZW1wdD09OSkgew0KCQkJCQkJCS8vIG1vc3Qgb2J2aW91cyByZWFz
b24gZm9yIGVycm9yIGlzIHRoYXQgdGhlcmUgaXMgYSBsb2NrIG9uIHRoZSBpbmRleCwgZHVl
IGhhcmQgc2h1dGRvd24NCgkJCQkJCSAgICAvLyByZXNvbHV0aW9uIGRlbGV0ZSB0aGUgbG9j
aywgYW5kIHRyeSBhZ2Fpbg0KCQkJCQkJICAgIGxvZ2dlci53YXJuKCJmYWlsZWQgdG8gb3Bl
biBzZWFyY2ggaW5kZXggZm9yIHdyaXRlLiBwb3NzaWJsZSB3cml0ZSBsb2NrIGR1ZSB0byBo
YXJkIHN5c3RlbSBzaHV0ZG93bi4iLGlvKTsNCgkJCQkJCSAgICBsb2dnZXIuaW5mbygiYXR0
ZW1wdGluZyByZWNvdmVyeS4gZGVsZXRpbmcgaW5kZXggbG9jayBmaWxlIGFuZCByZXRyeWlu
Zy4uIik7DQoJCQkJCQkgICAgRmlsZSBsb2NrRmlsZSA9IG5ldyBGaWxlKGFjdGl2ZUluZGV4
LmdldFBhdGgoKStGaWxlLnNlcGFyYXRvckNoYXIgKyAid3JpdGUubG9jayIpOw0KCQkJCQkJ
ICAgIGxvY2tGaWxlLmRlbGV0ZSgpOw0KCQkJCQkJfSANCgkJCQkJCWF0dGVtcHQrKzsNCgkJ
CQkJCXRyeSB7IFRocmVhZC5zbGVlcCgxMCk7IH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7fSAN
CgkJCQkJCWxhc3RFcnJvciA9IGlvOw0KCQkJCQl9DQoJCQkgIH0gd2hpbGUgKGF0dGVtcHQ8
MTApOyANCgkJCSAgICBpZiAoYXR0ZW1wdD49MTApDQoJCQkgICAgCXRocm93IG5ldyBNZXNz
YWdlU2VhcmNoRXhjZXB0aW9uKCJmYWlsZWQgdG8gb3Blbi8gaW5kZXggd3JpdGVyIHtsb2Nh
dGlvbj0nIithY3RpdmVJbmRleC5nZXRQYXRoKCkrIid9IixsYXN0RXJyb3IsbG9nZ2VyKTsN
CgkJCX0NCgkJfQ0KCQkNCgkJcHVibGljIHZvaWQgaW5kZXhNZXNzYWdlKEVtYWlsIG1lc3Nh
Z2UpIHRocm93cyBNZXNzYWdlU2VhcmNoRXhjZXB0aW9uICB7DQoJCQkNCgkJCWxvbmcgcyA9
IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7DQoJCQlpZiAobWVzc2FnZSA9PSBudWxsKQ0KCQkJ
ICAgIHRocm93IG5ldyBNZXNzYWdlU2VhcmNoRXhjZXB0aW9uKCJhc3NlcnRpb24gZmFpbHVy
ZTogbnVsbCBtZXNzYWdlIixsb2dnZXIpOw0KCQkJbG9nZ2VyLmRlYnVnKCJpbmRleGluZyBt
ZXNzYWdlIHsiK21lc3NhZ2UrIn0iKTsNCgkJCQ0KCQkJRG9jdW1lbnQgZG9jID0gbmV3IERv
Y3VtZW50KCk7DQoJCQl0cnkgew0KCQkJICAgRG9jdW1lbnRJbmRleCBkb2NJbmRleCA9IG5l
dyBEb2N1bWVudEluZGV4KGluZGV4ZXIpOw0KCQkJICAgZG9jSW5kZXgud3JpdGUobWVzc2Fn
ZSxkb2MpOyAgDQoJCQkgICBTdHJpbmcgbGFuZ3VhZ2UgPSBkb2MuZ2V0KCJsYW5nIik7DQoJ
CQkgICBpZiAobGFuZ3VhZ2U9PW51bGwpDQoJCQkJICAgbGFuZ3VhZ2UgPSBpbmRleGVyLmdl
dEluZGV4TGFuZ3VhZ2UoKTsNCgkJCSAgIAkJc3luY2hyb25pemVkIChpbmRleExvY2spIHsN
CgkJCSAgIAkJCW9wZW5JbmRleCgpOw0KCQkJICAgCQkJd3JpdGVyLmFkZERvY3VtZW50KGRv
YyxBbmFseXplckZhY3RvcnkuZ2V0QW5hbHl6ZXIobGFuZ3VhZ2UsQW5hbHl6ZXJGYWN0b3J5
Lk9wZXJhdGlvbi5JTkRFWCkpOw0KCQkJICAgCQkJDQoJCQkgICAJCX0NCgkJCSAgIGxvZ2dl
ci5kZWJ1ZygibWVzc2FnZSBpbmRleGVkIHN1Y2Nlc3NmdWxseSB7IittZXNzYWdlKyIsbGFu
Z3VhZ2U9JyIrbGFuZ3VhZ2UrIid9Iik7DQoJCQl9IGNhdGNoIChNZXNzYWdpbmdFeGNlcHRp
b24gbWUpDQoJCQl7DQoJCQkgICB0aHJvdyBuZXcgTWVzc2FnZVNlYXJjaEV4Y2VwdGlvbigi
ZmFpbGVkIHRvIGRlY29kZSBtZXNzYWdlIGR1cmluZyBpbmRleGluZyIsbWUsbG9nZ2VyLCBM
ZXZlbC5ERUJVRyk7DQoJCQl9IGNhdGNoIChJT0V4Y2VwdGlvbiBtZSkgew0KCQkJICAgIHRo
cm93IG5ldyBNZXNzYWdlU2VhcmNoRXhjZXB0aW9uKCJmYWlsZWQgdG8gaW5kZXggbWVzc2Fn
ZSB7IittZXNzYWdlKyJ9IixtZSxsb2dnZXIsIExldmVsLkRFQlVHKTsNCgkJCX0gY2F0Y2gg
KEV4dHJhY3Rpb25FeGNlcHRpb24gZWUpDQoJCQl7DQoJCQkJLy8gd2Ugd2lsbCB3YW50IHRv
IGNvbnRpbnVlIGluZGV4bmcNCgkJCSAgIC8vdGhyb3cgbmV3IE1lc3NhZ2VTZWFyY2hFeGNl
cHRpb24oImZhaWxlZCB0byBkZWNvZGUgYXR0YWNobWVudHMgaW4gbWVzc2FnZSB7IittZXNz
YWdlKyJ9IixlZSxsb2dnZXIsIExldmVsLkRFQlVHKTsNCgkJCX0gY2F0Y2ggKEV4Y2VwdGlv
biBlKSB7DQoJCQkgICAgdGhyb3cgbmV3IE1lc3NhZ2VTZWFyY2hFeGNlcHRpb24oImZhaWxl
ZCB0byBpbmRleCBtZXNzYWdlIixlLGxvZ2dlciwgTGV2ZWwuREVCVUcpOw0KCQkJfQ0KCQkJ
bG9nZ2VyLmRlYnVnKCJpbmRleGluZyBtZXNzYWdlIGVuZCB7IittZXNzYWdlKyJ9Iik7DQoJ
CQkNCgkJCWxvbmcgZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7DQoJCSAgICBsb2dnZXIu
ZGVidWcoImluZGV4aW5nIHRpbWUge3RpbWU9JyIrKGUtcykrIid9Iik7DQoJCX0NCgkJCQ0K
CQlwcm90ZWN0ZWQgdm9pZCBjbG9zZUluZGV4KCkgew0KCQkJICAgc3luY2hyb25pemVkKGlu
ZGV4TG9jaykgew0KCQkJICAgICAgICBpZiAod3JpdGVyPT1udWxsKQ0KCQkJICAgICAgICAJ
CXJldHVybjsNCgkJCSAgICAgICAgaW50IGF0dGVtcHQgPSAwOw0KCQkJICAgICAgICBkbyB7
DQoJCQkJICAgICAgICB0cnkgew0KCQkJCSAgICAgICAgCXdyaXRlci5jbG9zZSgpOw0KCQkJ
CQkJICAgIGxvZ2dlci5kZWJ1Zygid3JpdGVyIGNsb3NlZCIpOw0KCQkJCQkJICAgIGJyZWFr
Ow0KCQkJCQkJfSBjYXRjaCAoRXhjZXB0aW9uIGlvKSB7DQoJCQkJCQkJaW8ucHJpbnRTdGFj
a1RyYWNlKCk7DQoJCQkJCQkJbG9nZ2VyLmVycm9yKCJmYWlsZWQgdG8gY2xvc2UgaW5kZXgg
d3JpdGVyOiIraW8uZ2V0TWVzc2FnZSgpLGlvKTsNCgkJCQkJCQlhdHRlbXB0Kys7DQoJCQkJ
CQkJdHJ5IHsgVGhyZWFkLnNsZWVwKDEwKTsgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHt9IA0K
CQkJCQkJCWNvbnRpbnVlOw0KCQkJCQkJfQ0KCQkJICAgICAgICB9IHdoaWxlIChhdHRlbXB0
PDEwKTsgDQoJCQkgICAgICAgIHdyaXRlciA9IG51bGw7DQoJCQkgICAJfQ0KCSAgIAl9DQoJ
CSAvLwkgZGVsaWJlcmF0ZWx5IG5vbiByZWN1cnNpdmUgKHNvIHdlIGF2b2lkIHNpdHVhdGlv
bnMgd2hlcmUgdGhlIHdob2xlIGgvZCBpcyBkZWxldGVkKQ0KCQkgIHB1YmxpYyB2b2lkIGRl
bGV0ZUluZGV4KCkgdGhyb3dzIE1lc3NhZ2VTZWFyY2hFeGNlcHRpb24gew0KCQkJIGxvZ2dl
ci5kZWJ1ZygiZGVsZXRlIGluZGV4IHtpbmRleHBhdGg9JyIrdm9sdW1lLmdldEluZGV4UGF0
aCgpKyInfSIpOw0KCQkgICAgICBzeW5jaHJvbml6ZWQoaW5kZXhMb2NrKSB7DQoJCQkgICAg
ICBDb25maWcuZ2V0Q29uZmlnKCkuZ2V0U2VydmljZXMoKS5zdG9wKEluZGV4ZXIuY2xhc3Mp
Ow0KCQkJICAgICAgRmlsZSBpbmRleERpciA9IG5ldyBGaWxlKHZvbHVtZS5nZXRJbmRleFBh
dGgoKSk7DQoJCQkgICAgICBpZiAoIWluZGV4RGlyLmV4aXN0cygpKSByZXR1cm47DQoJCQkg
ICAgICBpZiAoaW5kZXhEaXIuaXNEaXJlY3RvcnkoKSkgew0KCQkJICAgICAgICAgICAgU3Ry
aW5nW10gY2hpbGRyZW4gPSBpbmRleERpci5saXN0KCk7DQoJCQkgICAgICAgICAgICBmb3Ig
KGludCBpPTA7IGk8Y2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsNCgkJCSAgICAgICAgICAgICAg
ICBTdHJpbmcgZmlsZXBhdGggPSB2b2x1bWUuZ2V0SW5kZXhQYXRoKCkrRmlsZS5zZXBhcmF0
b3JDaGFyK2NoaWxkcmVuW2ldOw0KCQkJICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zygi
ZGVsZXRpbmcgZmlsZSB7cGF0aD0nIiArIGZpbGVwYXRoICsiJ30iKTsNCgkJCSAgICAgICAg
ICAgICAgICBGaWxlIGZpbGUgPSBuZXcgRmlsZShmaWxlcGF0aCk7DQoJCQkgICAgICAgICAg
ICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZmlsZS5kZWxldGUoKTsNCgkJCSAgICAgICAgICAg
ICAgICBpZiAoIXN1Y2Nlc3MpIHsNCgkJCSAgICAgICAgICAgICAgICAJdHJ5IHsNCgkJCSAg
ICAgICAgICAgICAgICAJCUZpbGUgbmV3RmlsZSA9IEZpbGUuY3JlYXRlVGVtcEZpbGUoInRl
bXAiLCJpZHgiKTsNCgkJCSAgICAgICAgICAgICAgICAJCWZpbGUucmVuYW1lVG8obmV3Rmls
ZSk7DQoJCQkgICAgICAgICAgICAgICAgCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQoJCQkg
ICAgICAgICAgICAgICAgCQlsb2dnZXIuZXJyb3IoImZhaWxlZCB0byBkZWxldGUgZmlsZSBp
biBleGlzdGluZyBpbmRleCB7ZmlsZXBhdGg9JyIrZmlsZXBhdGgrIid9Iik7DQoJCQkgICAg
ICAgICAgICAgICAgCQkvL3Rocm93IG5ldyBNZXNzYWdlU2VhcmNoRXhjZXB0aW9uKCJmYWls
ZWQgdG8gZGVsZXRlIGZpbGUgaW4gZXhpc3RpbmcgaW5kZXgge2ZpbGVwYXRoPSciK2ZpbGVw
YXRoKyInfSIsbG9nZ2VyKTsNCgkJCSAgICAgICAgICAgICAgICAJfQ0KCQkJICAgICAgICAg
ICAgICAgIH0gZWxzZQ0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVn
KCJkZWxldGVkIGZpbGUgc3VjY2Vzc2Z1bGx5IHtmaWxlcGF0aD0nIiArIGZpbGVwYXRoICsi
J30iKTsNCgkJCSAgICAgICAgICAgIH0NCgkJCSAgICAgIH0NCgkJICAgICAgfQ0KCQkgIH0N
CgkJDQoJCXByb3RlY3RlZCB2b2lkIGZpbmFsaXplKCkgdGhyb3dzIFRocm93YWJsZSB7DQoJ
CSAgICBsb2dnZXIuZGVidWcoInZvbHVtZWluZGV4IGNsYXNzIGlzIHNodXR0aW5nIGRvd24i
KTsNCgkJICAgIHRyeSB7DQoJCSAgICAJY2xvc2VJbmRleFRpbWVyLmNhbmNlbCgpOw0KCQkg
ICAgCWNsb3NlSW5kZXgoKTsNCgkJICAgIH0gZmluYWxseSB7DQoJCQlzdXBlci5maW5hbGl6
ZSgpOw0KCQkgICAgfQ0KCQl9DQoJCQ0KfQ0KDQoJ

--------------040803090309010402040701
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------040803090309010402040701--

From java-user-return-33386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 09:47:10 2008
Return-Path: <java-user-return-33386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90831 invoked from network); 29 Mar 2008 09:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 09:47:10 -0000
Received: (qmail 25856 invoked by uid 500); 29 Mar 2008 09:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25821 invoked by uid 500); 29 Mar 2008 09:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25810 invoked by uid 99); 29 Mar 2008 09:47:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 02:47:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 09:46:12 +0000
Received: (qmail 29615 invoked by uid 511); 29 Mar 2008 02:46:31 -0700
Received: from 41.243.255.163 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.255.163):SA:0(-1.7/5.0):. 
 Processed in 2.581968 secs); 29 Mar 2008 09:46:31 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.255.163):SA:0(-1.7/5.0):. Processed in 2.581968 secs Process 29605)
Received: from dsl-243-255-163.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.255.163)
  by stimulussoft.com with SMTP; 29 Mar 2008 02:46:28 -0700
Message-ID: <47EE10C2.7050002@stimulussoft.com>
Date: Sat, 29 Mar 2008 11:49:54 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
References: <47EDE24B.7070907@stimulussoft.com> <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com> <47EE0EA6.9090801@stimulussoft.com>
In-Reply-To: <47EE0EA6.9090801@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-1.7 required=5.0

By the way, the line numbers in the last email apply to the SVN trunk 
code. I switch over to the latest code to see if this would make a 
difference. Alas, the problem still exists!

Jamie wrote:
> Hi Michael
>
> Glad you asked and thanks in advance for your help! I am trying to 
> reindex 325 emails. Its a pretty straight forward use of Lucene. I 
> create an IndexWriter, write a whole bunch of documents and then close 
> the Index every 2 seconds. See the attached source code. In case, you 
> are wondering there is only ever one VolumeIndex ever created. 
> Following, there is only ever one IndexWriter created in the entire 
> application. After further testing I dont think the problem is related 
> to IndexReader since the problem still occurs even if I dont execute a 
> search. The amount emails indexed varies between around 305 and 325. 
> The exception that gets thrown prevents the emails from being indexed. 
> I've tried  removing the synchronization and doing a simple:
>
> synchronized(this) {
>    openIndex()
>    write()
>    closeIndex()
> }
>
> i.e. open and close the index between every document write and the 
> problem still appears.
>
> For a recap, here is the exception:
>
> java.io.IOException: Cannot overwrite: C:\index9121\_1.cfs
>    at 
> org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
>    at 
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:150) 
>
>    at 
> org.apache.lucene.index.DocumentsWriter.createCompoundFile(DocumentsWriter.java:587) 
>
>    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3251)
>    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3110)
>    at 
> org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1659)
>    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1633)
>    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1601)
>
> I cleared out the logs and executed another reindex and the following 
> debug information was outputted by Lucene. Unfortunately, the debug 
> output does not include any information on the error. I am not sure 
> why this is the case, but I can assure you that the log information 
> was generated by the reindexing operation. Any ideas on what this 
> might be? Can you suggest a workaround?
>
> As an aside note, is Lucene 2.2.0 compatible with Lucene 2.3.0 
> indexes? If I cant sort this out in the next couple of days, I may 
> need to switch everyone back to Lucene 2.2.0 temporarily until this 
> problem is resolved.
>
> IFD [http-8090-2]: setInfoStream 
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ebf305 
>
> IW 22 [http-8090-2]: setInfoStream: 
> dir=org.apache.lucene.store.FSDirectory@C:\index9121 autoCommit=false 
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@19ffd6f 
> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@b799cf 
> ramBufferSizeMB=16.0 maxBufferedDocs=-1 maxBuffereDeleteTerms=-1 
> maxFieldLength=50000 index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
> _6:c53
> IW 22 [Timer-0]: now flush at close
> IW 22 [Timer-0]:   flush: segment=_7 docStoreSegment=_7 
> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=true 
> numDocs=28 numBufDelTerms=0
> IW 22 [Timer-0]:   index before flush _0:C54 _1:C82 _2:C14 _3:c36 
> _4:c6 _5:c52 _6:c53
> IW 22 [Timer-0]: DW: flush postings as segment _7 numDocs=28
> IW 22 [Timer-0]: DW: closeDocStore: 2 files to flush to segment _7 
> numDocs=28
> IW 22 [Timer-0]: DW:   oldRAMSize=245760 newFlushedSize=38119 
> docs/MB=770.223 new/old=15.511%
> IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit = 
> false]
> IFD [Timer-0]: delete pending file _f.cfs
> IFD [Timer-0]: delete "_f.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _h.cfs
> IFD [Timer-0]: delete "_h.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _d.cfs
> IFD [Timer-0]: delete "_d.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _c.cfs
> IFD [Timer-0]: delete "_c.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _b.cfs
> IFD [Timer-0]: delete "_b.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _g.cfs
> IFD [Timer-0]: delete "_g.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _e.cfs
> IFD [Timer-0]: delete "_e.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try 
> later.
> IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit = 
> false]
> IFD [Timer-0]: delete pending file _f.cfs
> IFD [Timer-0]: delete "_f.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _h.cfs
> IFD [Timer-0]: delete "_h.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _d.cfs
> IFD [Timer-0]: delete "_d.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _c.cfs
> IFD [Timer-0]: delete "_c.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _b.cfs
> IFD [Timer-0]: delete "_b.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _g.cfs
> IFD [Timer-0]: delete "_g.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _e.cfs
> IFD [Timer-0]: delete "_e.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete "_7.fnm"
> IFD [Timer-0]: delete "_7.frq"
> IFD [Timer-0]: delete "_7.prx"
> IFD [Timer-0]: delete "_7.tis"
> IFD [Timer-0]: delete "_7.tii"
> IFD [Timer-0]: delete "_7.nrm"
> IFD [Timer-0]: delete "_7.fdx"
> IFD [Timer-0]: delete "_7.fdt"
> IW 22 [Timer-0]: LMP: findMerges: 8 segments
> IW 22 [Timer-0]: LMP:   level -1.0 to 5.202747: 8 segments
> IW 22 [Timer-0]: CMS: now merge
> IW 22 [Timer-0]: CMS:   index: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 
> _5:c52 _6:c53 _7:c28
> IW 22 [Timer-0]: CMS:   no more merges pending; now return
> IW 22 [Timer-0]: now call final commit()
> IW 22 [Timer-0]: start commit() skipWait=true sizeInBytes=0
> IW 22 [Timer-0]: commit index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
> _6:c53 _7:c28
> IW 22 [Timer-0]: now sync _7.cfs
> IW 22 [Timer-0]: commit complete
> IFD [Timer-0]: now checkpoint "segments_9" [8 segments ; isCommit = true]
> IFD [Timer-0]: delete pending file _f.cfs
> IFD [Timer-0]: delete "_f.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _h.cfs
> IFD [Timer-0]: delete "_h.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _d.cfs
> IFD [Timer-0]: delete "_d.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _c.cfs
> IFD [Timer-0]: delete "_c.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _b.cfs
> IFD [Timer-0]: delete "_b.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _g.cfs
> IFD [Timer-0]: delete "_g.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _e.cfs
> IFD [Timer-0]: delete "_e.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try 
> later.
> IFD [Timer-0]: deleteCommits: now decRef commit "segments_8"
> IFD [Timer-0]: delete "segments_8"
> IW 22 [Timer-0]: done all syncs
> IW 22 [Timer-0]: at close: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52 
> _6:c53 _7:c28
> IFD [Timer-0]: delete pending file _f.cfs
> IFD [Timer-0]: delete "_f.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _h.cfs
> IFD [Timer-0]: delete "_h.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _d.cfs
> IFD [Timer-0]: delete "_d.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _c.cfs
> IFD [Timer-0]: delete "_c.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _b.cfs
> IFD [Timer-0]: delete "_b.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _g.cfs
> IFD [Timer-0]: delete "_g.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try 
> later.
> IFD [Timer-0]: delete pending file _e.cfs
> IFD [Timer-0]: delete "_e.cfs"
> IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs": 
> java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try 
> later.
>
>
> Michael McCandless wrote:
>>
>> That use case of Lucene should be fine, ie no further synchronization 
>> should be necessary.
>>
>> Your debug output below is great, but it doesn't seem to cover the 
>> occurrence of that exception.  Can you post the full debug output?
>>
>> Can you describe how you reindex in more detail?  Are you manually 
>> removing files from the index and then opening a new IndexWriter with 
>> create=true?
>>
>> Mike
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 10:44:45 2008
Return-Path: <java-user-return-33387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3310 invoked from network); 29 Mar 2008 10:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 10:44:45 -0000
Received: (qmail 61962 invoked by uid 500); 29 Mar 2008 10:44:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61548 invoked by uid 500); 29 Mar 2008 10:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61537 invoked by uid 99); 29 Mar 2008 10:44:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 03:44:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 10:43:55 +0000
Received: by an-out-0708.google.com with SMTP id c5so172978anc.49
        for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 03:43:56 -0700 (PDT)
Received: by 10.101.69.6 with SMTP id w6mr9454802ank.92.1206787436530;
        Sat, 29 Mar 2008 03:43:56 -0700 (PDT)
Received: by 10.100.154.5 with HTTP; Sat, 29 Mar 2008 03:43:56 -0700 (PDT)
Message-ID: <9ac0c6aa0803290343o1b231997s85b66015e6612cc3@mail.gmail.com>
Date: Sat, 29 Mar 2008 06:43:56 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
In-Reply-To: <47EE10C2.7050002@stimulussoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47EDE24B.7070907@stimulussoft.com>
	 <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com>
	 <47EE0EA6.9090801@stimulussoft.com>
	 <47EE10C2.7050002@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

OK indeed from your code you are manually removing files from the
index (the "deleteIndex" method).  You shouldn't do that.

I think what's happening is deleteIndex is called when an IndexReader
has the index open (do you see those "failed to delete file in
existing index" log messages?), then you open a writer on that
directory.  That would exactly explain your exception.

The fix is simple: never remove files from the index yourself.  Let
IndexWriter do it, by opening with create=true.  It will take care of
removing the old files, retrying over time, etc.

And, most importantly, this allows you to create a new index in a
directory even while an IndexReader is still using it.  The reader
will be fine, and then when it reopens it will switch to the new
index.

Lucene 2.3 can read 2.2 indices but not vice versa, so you can't
downgrade unless you completely remove your index.

Mike

Jamie <jamie@stimulussoft.com> wrote:
> By the way, the line numbers in the last email apply to the SVN trunk
>  code. I switch over to the latest code to see if this would make a
>  difference. Alas, the problem still exists!
>
>
>
>  Jamie wrote:
>  > Hi Michael
>  >
>  > Glad you asked and thanks in advance for your help! I am trying to
>  > reindex 325 emails. Its a pretty straight forward use of Lucene. I
>  > create an IndexWriter, write a whole bunch of documents and then close
>  > the Index every 2 seconds. See the attached source code. In case, you
>  > are wondering there is only ever one VolumeIndex ever created.
>  > Following, there is only ever one IndexWriter created in the entire
>  > application. After further testing I dont think the problem is related
>  > to IndexReader since the problem still occurs even if I dont execute a
>  > search. The amount emails indexed varies between around 305 and 325.
>  > The exception that gets thrown prevents the emails from being indexed.
>  > I've tried  removing the synchronization and doing a simple:
>  >
>  > synchronized(this) {
>  >    openIndex()
>  >    write()
>  >    closeIndex()
>  > }
>  >
>  > i.e. open and close the index between every document write and the
>  > problem still appears.
>  >
>  > For a recap, here is the exception:
>  >
>  > java.io.IOException: Cannot overwrite: C:\index9121\_1.cfs
>  >    at
>  > org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
>  >    at
>  > org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:150)
>  >
>  >    at
>  > org.apache.lucene.index.DocumentsWriter.createCompoundFile(DocumentsWriter.java:587)
>  >
>  >    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3251)
>  >    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3110)
>  >    at
>  > org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1659)
>  >    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1633)
>  >    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1601)
>  >
>  > I cleared out the logs and executed another reindex and the following
>  > debug information was outputted by Lucene. Unfortunately, the debug
>  > output does not include any information on the error. I am not sure
>  > why this is the case, but I can assure you that the log information
>  > was generated by the reindexing operation. Any ideas on what this
>  > might be? Can you suggest a workaround?
>  >
>  > As an aside note, is Lucene 2.2.0 compatible with Lucene 2.3.0
>  > indexes? If I cant sort this out in the next couple of days, I may
>  > need to switch everyone back to Lucene 2.2.0 temporarily until this
>  > problem is resolved.
>  >
>  > IFD [http-8090-2]: setInfoStream
>  > deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ebf305
>  >
>  > IW 22 [http-8090-2]: setInfoStream:
>  > dir=org.apache.lucene.store.FSDirectory@C:\index9121 autoCommit=false
>  > mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@19ffd6f
>  > mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@b799cf
>  > ramBufferSizeMB=16.0 maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
>  > maxFieldLength=50000 index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>  > _6:c53
>  > IW 22 [Timer-0]: now flush at close
>  > IW 22 [Timer-0]:   flush: segment=_7 docStoreSegment=_7
>  > docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=true
>  > numDocs=28 numBufDelTerms=0
>  > IW 22 [Timer-0]:   index before flush _0:C54 _1:C82 _2:C14 _3:c36
>  > _4:c6 _5:c52 _6:c53
>  > IW 22 [Timer-0]: DW: flush postings as segment _7 numDocs=28
>  > IW 22 [Timer-0]: DW: closeDocStore: 2 files to flush to segment _7
>  > numDocs=28
>  > IW 22 [Timer-0]: DW:   oldRAMSize=245760 newFlushedSize=38119
>  > docs/MB=770.223 new/old=15.511%
>  > IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit =
>  > false]
>  > IFD [Timer-0]: delete pending file _f.cfs
>  > IFD [Timer-0]: delete "_f.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _h.cfs
>  > IFD [Timer-0]: delete "_h.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _d.cfs
>  > IFD [Timer-0]: delete "_d.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _c.cfs
>  > IFD [Timer-0]: delete "_c.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _b.cfs
>  > IFD [Timer-0]: delete "_b.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _g.cfs
>  > IFD [Timer-0]: delete "_g.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _e.cfs
>  > IFD [Timer-0]: delete "_e.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit =
>  > false]
>  > IFD [Timer-0]: delete pending file _f.cfs
>  > IFD [Timer-0]: delete "_f.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _h.cfs
>  > IFD [Timer-0]: delete "_h.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _d.cfs
>  > IFD [Timer-0]: delete "_d.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _c.cfs
>  > IFD [Timer-0]: delete "_c.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _b.cfs
>  > IFD [Timer-0]: delete "_b.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _g.cfs
>  > IFD [Timer-0]: delete "_g.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _e.cfs
>  > IFD [Timer-0]: delete "_e.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete "_7.fnm"
>  > IFD [Timer-0]: delete "_7.frq"
>  > IFD [Timer-0]: delete "_7.prx"
>  > IFD [Timer-0]: delete "_7.tis"
>  > IFD [Timer-0]: delete "_7.tii"
>  > IFD [Timer-0]: delete "_7.nrm"
>  > IFD [Timer-0]: delete "_7.fdx"
>  > IFD [Timer-0]: delete "_7.fdt"
>  > IW 22 [Timer-0]: LMP: findMerges: 8 segments
>  > IW 22 [Timer-0]: LMP:   level -1.0 to 5.202747: 8 segments
>  > IW 22 [Timer-0]: CMS: now merge
>  > IW 22 [Timer-0]: CMS:   index: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6
>  > _5:c52 _6:c53 _7:c28
>  > IW 22 [Timer-0]: CMS:   no more merges pending; now return
>  > IW 22 [Timer-0]: now call final commit()
>  > IW 22 [Timer-0]: start commit() skipWait=true sizeInBytes=0
>  > IW 22 [Timer-0]: commit index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>  > _6:c53 _7:c28
>  > IW 22 [Timer-0]: now sync _7.cfs
>  > IW 22 [Timer-0]: commit complete
>  > IFD [Timer-0]: now checkpoint "segments_9" [8 segments ; isCommit = true]
>  > IFD [Timer-0]: delete pending file _f.cfs
>  > IFD [Timer-0]: delete "_f.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _h.cfs
>  > IFD [Timer-0]: delete "_h.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _d.cfs
>  > IFD [Timer-0]: delete "_d.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _c.cfs
>  > IFD [Timer-0]: delete "_c.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _b.cfs
>  > IFD [Timer-0]: delete "_b.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _g.cfs
>  > IFD [Timer-0]: delete "_g.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _e.cfs
>  > IFD [Timer-0]: delete "_e.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: deleteCommits: now decRef commit "segments_8"
>  > IFD [Timer-0]: delete "segments_8"
>  > IW 22 [Timer-0]: done all syncs
>  > IW 22 [Timer-0]: at close: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>  > _6:c53 _7:c28
>  > IFD [Timer-0]: delete pending file _f.cfs
>  > IFD [Timer-0]: delete "_f.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _h.cfs
>  > IFD [Timer-0]: delete "_h.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _d.cfs
>  > IFD [Timer-0]: delete "_d.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _c.cfs
>  > IFD [Timer-0]: delete "_c.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _b.cfs
>  > IFD [Timer-0]: delete "_b.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _g.cfs
>  > IFD [Timer-0]: delete "_g.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>  > later.
>  > IFD [Timer-0]: delete pending file _e.cfs
>  > IFD [Timer-0]: delete "_e.cfs"
>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>  > later.
>  >
>  >
>  > Michael McCandless wrote:
>  >>
>  >> That use case of Lucene should be fine, ie no further synchronization
>  >> should be necessary.
>  >>
>  >> Your debug output below is great, but it doesn't seem to cover the
>  >> occurrence of that exception.  Can you post the full debug output?
>  >>
>  >> Can you describe how you reindex in more detail?  Are you manually
>  >> removing files from the index and then opening a new IndexWriter with
>  >> create=true?
>  >>
>  >> Mike
>  >
>  > ------------------------------------------------------------------------
>
> >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  --
>  Stimulus Software - MailArchiva
>  Email Archiving And Compliance
>  USA Tel: +1-713-366-8072 ext 3
>  UK Tel: +44-20-80991035 ext 3
>  Email: jamie@stimulussoft.com
>  Web: http://www.mailarchiva.com
>
>  To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 29 10:57:57 2008
Return-Path: <java-user-return-33388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6568 invoked from network); 29 Mar 2008 10:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Mar 2008 10:57:57 -0000
Received: (qmail 69049 invoked by uid 500); 29 Mar 2008 10:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69009 invoked by uid 500); 29 Mar 2008 10:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68998 invoked by uid 99); 29 Mar 2008 10:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 03:57:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 10:57:06 +0000
Received: (qmail 29801 invoked by uid 511); 29 Mar 2008 03:57:17 -0700
Received: from 41.243.255.163 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.255.163):SA:0(-1.7/5.0):. 
 Processed in 3.156034 secs); 29 Mar 2008 10:57:17 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.255.163):SA:0(-1.7/5.0):. Processed in 3.156034 secs Process 29791)
Received: from dsl-243-255-163.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.255.163)
  by stimulussoft.com with SMTP; 29 Mar 2008 03:57:14 -0700
Message-ID: <47EE2158.9060901@stimulussoft.com>
Date: Sat, 29 Mar 2008 13:00:40 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.3.1 IndexReader and IndexWriter Synchronization Issues
References: <47EDE24B.7070907@stimulussoft.com>	 <B9DBB072-1E5B-4381-8757-78652B1A7BA6@mikemccandless.com>	 <47EE0EA6.9090801@stimulussoft.com>	 <47EE10C2.7050002@stimulussoft.com> <9ac0c6aa0803290343o1b231997s85b66015e6612cc3@mail.gmail.com>
In-Reply-To: <9ac0c6aa0803290343o1b231997s85b66015e6612cc3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-1.7 required=5.0

H Michael

Well spotted! Thanks for the tip and your precious time.

Thanks!

Jamie


Michael McCandless wrote:
> OK indeed from your code you are manually removing files from the
> index (the "deleteIndex" method).  You shouldn't do that.
>
> I think what's happening is deleteIndex is called when an IndexReader
> has the index open (do you see those "failed to delete file in
> existing index" log messages?), then you open a writer on that
> directory.  That would exactly explain your exception.
>
> The fix is simple: never remove files from the index yourself.  Let
> IndexWriter do it, by opening with create=true.  It will take care of
> removing the old files, retrying over time, etc.
>
> And, most importantly, this allows you to create a new index in a
> directory even while an IndexReader is still using it.  The reader
> will be fine, and then when it reopens it will switch to the new
> index.
>
> Lucene 2.3 can read 2.2 indices but not vice versa, so you can't
> downgrade unless you completely remove your index.
>
> Mike
>
> Jamie <jamie@stimulussoft.com> wrote:
>   
>> By the way, the line numbers in the last email apply to the SVN trunk
>>  code. I switch over to the latest code to see if this would make a
>>  difference. Alas, the problem still exists!
>>
>>
>>
>>  Jamie wrote:
>>  > Hi Michael
>>  >
>>  > Glad you asked and thanks in advance for your help! I am trying to
>>  > reindex 325 emails. Its a pretty straight forward use of Lucene. I
>>  > create an IndexWriter, write a whole bunch of documents and then close
>>  > the Index every 2 seconds. See the attached source code. In case, you
>>  > are wondering there is only ever one VolumeIndex ever created.
>>  > Following, there is only ever one IndexWriter created in the entire
>>  > application. After further testing I dont think the problem is related
>>  > to IndexReader since the problem still occurs even if I dont execute a
>>  > search. The amount emails indexed varies between around 305 and 325.
>>  > The exception that gets thrown prevents the emails from being indexed.
>>  > I've tried  removing the synchronization and doing a simple:
>>  >
>>  > synchronized(this) {
>>  >    openIndex()
>>  >    write()
>>  >    closeIndex()
>>  > }
>>  >
>>  > i.e. open and close the index between every document write and the
>>  > problem still appears.
>>  >
>>  > For a recap, here is the exception:
>>  >
>>  > java.io.IOException: Cannot overwrite: C:\index9121\_1.cfs
>>  >    at
>>  > org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
>>  >    at
>>  > org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:150)
>>  >
>>  >    at
>>  > org.apache.lucene.index.DocumentsWriter.createCompoundFile(DocumentsWriter.java:587)
>>  >
>>  >    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3251)
>>  >    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3110)
>>  >    at
>>  > org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1659)
>>  >    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1633)
>>  >    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1601)
>>  >
>>  > I cleared out the logs and executed another reindex and the following
>>  > debug information was outputted by Lucene. Unfortunately, the debug
>>  > output does not include any information on the error. I am not sure
>>  > why this is the case, but I can assure you that the log information
>>  > was generated by the reindexing operation. Any ideas on what this
>>  > might be? Can you suggest a workaround?
>>  >
>>  > As an aside note, is Lucene 2.2.0 compatible with Lucene 2.3.0
>>  > indexes? If I cant sort this out in the next couple of days, I may
>>  > need to switch everyone back to Lucene 2.2.0 temporarily until this
>>  > problem is resolved.
>>  >
>>  > IFD [http-8090-2]: setInfoStream
>>  > deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ebf305
>>  >
>>  > IW 22 [http-8090-2]: setInfoStream:
>>  > dir=org.apache.lucene.store.FSDirectory@C:\index9121 autoCommit=false
>>  > mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@19ffd6f
>>  > mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@b799cf
>>  > ramBufferSizeMB=16.0 maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
>>  > maxFieldLength=50000 index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>>  > _6:c53
>>  > IW 22 [Timer-0]: now flush at close
>>  > IW 22 [Timer-0]:   flush: segment=_7 docStoreSegment=_7
>>  > docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=true
>>  > numDocs=28 numBufDelTerms=0
>>  > IW 22 [Timer-0]:   index before flush _0:C54 _1:C82 _2:C14 _3:c36
>>  > _4:c6 _5:c52 _6:c53
>>  > IW 22 [Timer-0]: DW: flush postings as segment _7 numDocs=28
>>  > IW 22 [Timer-0]: DW: closeDocStore: 2 files to flush to segment _7
>>  > numDocs=28
>>  > IW 22 [Timer-0]: DW:   oldRAMSize=245760 newFlushedSize=38119
>>  > docs/MB=770.223 new/old=15.511%
>>  > IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit =
>>  > false]
>>  > IFD [Timer-0]: delete pending file _f.cfs
>>  > IFD [Timer-0]: delete "_f.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _h.cfs
>>  > IFD [Timer-0]: delete "_h.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _d.cfs
>>  > IFD [Timer-0]: delete "_d.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _c.cfs
>>  > IFD [Timer-0]: delete "_c.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _b.cfs
>>  > IFD [Timer-0]: delete "_b.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _g.cfs
>>  > IFD [Timer-0]: delete "_g.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _e.cfs
>>  > IFD [Timer-0]: delete "_e.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: now checkpoint "segments_8" [8 segments ; isCommit =
>>  > false]
>>  > IFD [Timer-0]: delete pending file _f.cfs
>>  > IFD [Timer-0]: delete "_f.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _h.cfs
>>  > IFD [Timer-0]: delete "_h.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _d.cfs
>>  > IFD [Timer-0]: delete "_d.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _c.cfs
>>  > IFD [Timer-0]: delete "_c.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _b.cfs
>>  > IFD [Timer-0]: delete "_b.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _g.cfs
>>  > IFD [Timer-0]: delete "_g.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _e.cfs
>>  > IFD [Timer-0]: delete "_e.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete "_7.fnm"
>>  > IFD [Timer-0]: delete "_7.frq"
>>  > IFD [Timer-0]: delete "_7.prx"
>>  > IFD [Timer-0]: delete "_7.tis"
>>  > IFD [Timer-0]: delete "_7.tii"
>>  > IFD [Timer-0]: delete "_7.nrm"
>>  > IFD [Timer-0]: delete "_7.fdx"
>>  > IFD [Timer-0]: delete "_7.fdt"
>>  > IW 22 [Timer-0]: LMP: findMerges: 8 segments
>>  > IW 22 [Timer-0]: LMP:   level -1.0 to 5.202747: 8 segments
>>  > IW 22 [Timer-0]: CMS: now merge
>>  > IW 22 [Timer-0]: CMS:   index: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6
>>  > _5:c52 _6:c53 _7:c28
>>  > IW 22 [Timer-0]: CMS:   no more merges pending; now return
>>  > IW 22 [Timer-0]: now call final commit()
>>  > IW 22 [Timer-0]: start commit() skipWait=true sizeInBytes=0
>>  > IW 22 [Timer-0]: commit index=_0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>>  > _6:c53 _7:c28
>>  > IW 22 [Timer-0]: now sync _7.cfs
>>  > IW 22 [Timer-0]: commit complete
>>  > IFD [Timer-0]: now checkpoint "segments_9" [8 segments ; isCommit = true]
>>  > IFD [Timer-0]: delete pending file _f.cfs
>>  > IFD [Timer-0]: delete "_f.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _h.cfs
>>  > IFD [Timer-0]: delete "_h.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _d.cfs
>>  > IFD [Timer-0]: delete "_d.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _c.cfs
>>  > IFD [Timer-0]: delete "_c.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _b.cfs
>>  > IFD [Timer-0]: delete "_b.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _g.cfs
>>  > IFD [Timer-0]: delete "_g.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _e.cfs
>>  > IFD [Timer-0]: delete "_e.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: deleteCommits: now decRef commit "segments_8"
>>  > IFD [Timer-0]: delete "segments_8"
>>  > IW 22 [Timer-0]: done all syncs
>>  > IW 22 [Timer-0]: at close: _0:C54 _1:C82 _2:C14 _3:c36 _4:c6 _5:c52
>>  > _6:c53 _7:c28
>>  > IFD [Timer-0]: delete pending file _f.cfs
>>  > IFD [Timer-0]: delete "_f.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_f.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_f.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _h.cfs
>>  > IFD [Timer-0]: delete "_h.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_h.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_h.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _d.cfs
>>  > IFD [Timer-0]: delete "_d.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_d.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_d.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _c.cfs
>>  > IFD [Timer-0]: delete "_c.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_c.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_c.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _b.cfs
>>  > IFD [Timer-0]: delete "_b.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_b.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_b.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _g.cfs
>>  > IFD [Timer-0]: delete "_g.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_g.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_g.cfs; Will re-try
>>  > later.
>>  > IFD [Timer-0]: delete pending file _e.cfs
>>  > IFD [Timer-0]: delete "_e.cfs"
>>  > IFD [Timer-0]: IndexFileDeleter: unable to remove file "_e.cfs":
>>  > java.io.IOException: Cannot delete C:\index9121\_e.cfs; Will re-try
>>  > later.
>>  >
>>  >
>>  > Michael McCandless wrote:
>>  >>
>>  >> That use case of Lucene should be fine, ie no further synchronization
>>  >> should be necessary.
>>  >>
>>  >> Your debug output below is great, but it doesn't seem to cover the
>>  >> occurrence of that exception.  Can you post the full debug output?
>>  >>
>>  >> Can you describe how you reindex in more detail?  Are you manually
>>  >> removing files from the index and then opening a new IndexWriter with
>>  >> create=true?
>>  >>
>>  >> Mike
>>  >
>>  > ------------------------------------------------------------------------
>>
>>     
>>  > ---------------------------------------------------------------------
>>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  --
>>  Stimulus Software - MailArchiva
>>  Email Archiving And Compliance
>>  USA Tel: +1-713-366-8072 ext 3
>>  UK Tel: +44-20-80991035 ext 3
>>  Email: jamie@stimulussoft.com
>>  Web: http://www.mailarchiva.com
>>
>>  To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>
>>
>>
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 01:36:18 2008
Return-Path: <java-user-return-33389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79092 invoked from network); 30 Mar 2008 01:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 01:36:18 -0000
Received: (qmail 99477 invoked by uid 500); 30 Mar 2008 01:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99442 invoked by uid 500); 30 Mar 2008 01:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99418 invoked by uid 99); 30 Mar 2008 01:36:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 18:36:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 01:35:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 281E674EAD
	for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 18:35:36 -0700 (PDT)
Message-Id: <D87F130D-E9C4-40BC-93B3-79CD244845CD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770803260134l358f1a15p754ad0f5c7306aa5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: is it possible to change the way score from different field combine to give final lucene score
Date: Sat, 29 Mar 2008 21:35:32 -0400
References: <006101c88d78$01e388e0$9b21fea9@NizamulHlaptop> <254F594E-C77D-4BFB-9229-01D1A4E41E62@apache.org> <8837fb770803260134l358f1a15p754ad0f5c7306aa5@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/function/package-summary.html

Sorry, they are called FunctionQuery in Solr, but Lucene calls 'em  
FieldScoreQuery, etc.  Sounds like CustomScoreQuery may do the trick.

HTH
-Grant

On Mar 26, 2008, at 4:34 AM, John Wang wrote:

> HI Grant:
>
>     I don't see FunctionQuery in the javadocs. Can you post a link?
>
> Thanks
>
> -john
>
> On Mon, Mar 24, 2008 at 3:32 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
>> See the FunctionQuery and the org.apache.lucene.search.function
>> package.  You can also implement your own query, as it's not clear to
>> me how exactly you want to calculate the score.  Essentially, you  
>> have
>> your implementation of BooleanQuery, I think.  Perhaps more details
>> would help.
>>
>> -Grant
>>
>>
>> On Mar 24, 2008, at 2:26 AM, Nizamul wrote:
>>
>>> Suppose I have two field field1 and field2 and let the score for a
>>> query from field1 and field2 are score1 and score2 respectively.now
>>> when computing the final lucene score I instead of score1,I want to
>>> use some function (f(score1)) of that score.
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucenebootcamp.com
>> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 05:56:31 2008
Return-Path: <java-user-return-33390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62804 invoked from network); 30 Mar 2008 05:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 05:56:31 -0000
Received: (qmail 87940 invoked by uid 500); 30 Mar 2008 05:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87908 invoked by uid 500); 30 Mar 2008 05:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87897 invoked by uid 99); 30 Mar 2008 05:56:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 22:56:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 05:55:34 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 58F7D71C348; Sat, 29 Mar 2008 22:55:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 55EF971C324
	for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 22:55:54 -0700 (PDT)
Date: Sat, 29 Mar 2008 22:55:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: setPositionIncrement questions
In-Reply-To: <4F16A37C073944A9BA3A47C3C3CDAA36.MAI@mail.livedns.co.il>
Message-ID: <Pine.LNX.4.62.0803292249110.16762@radix.cryptio.net>
References: <4F16A37C073944A9BA3A47C3C3CDAA36.MAI@mail.livedns.co.il>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Breaking proximity data has been discussed several times before, and 
: concluded that setPositionIncrement is the way to go. In regards of it:
: 
: 1. Where should it be called exactly to create the gap properly?

any part of your Analyzer can set the position increment on any token to 
indicate how far after the previous token it should be.

: 2. Is there a way to call it directly somehow while indexing (e.g. after 
: adding a new paragraph to an existing field) instead of appending $$$ 
: for example after the new string I'm indexing, and having to update my 
: tokenizer and filters so they will retain the $$$ chars, indicating the 
: gap request?

if you add multiple Fields with the same name, Lucene will call the  
"getPositionIncrementGap" method on your Analyzer to determine how much 
positionIncreiment to put in between the last token of the first Field and 
the first token of the second Field -- so you could just pass each 
paragraph as a seperate Field instance .. alternately you can have a 
single Field instance, and your Analyzer can use whatever mechanims it 
wants to decide to set the position incriment to something high (a line 
break, a magic char sequence you put in the string, ... whatever you want)

: 3. What is the recommended value to pass setPositionIncrement to create 
: a reasonable gap, and not risk large documents being indexed improperly 
: (I mean, is there some sort of high-bound for the position value?).

MAX_INT .. pick gaps based on your data and the queries you expect (if you 
want gaps betwen paragraps, and your paragraphs tend to be under 200 words 
long, make the gap 500 so "lucene java"~300 can find those words in 
the same paragram, but can never span multiple paragraphs

: 4. What are the consequences of setting PositionIncrement to 0? Does 
: this mean I can index synonyms or stems aside of the "real" words 
: without risking data corruption?

it means the words appear at the same position - synonyms is a great 
example of this use case.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 06:28:59 2008
Return-Path: <java-user-return-33391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97526 invoked from network); 30 Mar 2008 06:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 06:28:59 -0000
Received: (qmail 99433 invoked by uid 500); 30 Mar 2008 06:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99402 invoked by uid 500); 30 Mar 2008 06:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99391 invoked by uid 99); 30 Mar 2008 06:28:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 23:28:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 06:28:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A2FD371C348; Sat, 29 Mar 2008 23:28:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9F62871C234
	for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 23:28:23 -0700 (PDT)
Date: Sat, 29 Mar 2008 23:28:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: CheckIndex:  pos -1 is out of bounds
Message-ID: <Pine.LNX.4.62.0803292323350.16762@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


Hey guys, a Solr user just encountered an interesting situation...

...due to a naive "LengthFilter", an Analyzer is produce a TokenStream 
where the first Token has a positionIncrement of "0" which seems to 
produce this error from CheckIndex...

     WARNING: would remove reference to this segment (-fix was not 
specified); full exception:
java.lang.RuntimeException: term features:usa: doc 0: pos -1 is out of 
bounds
         at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:205)
         at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:362)

...but as far as i can tell, the index is still usable.

Questions are:
   1) is CheckIndex over paranoid?
   2) shouldn't IndexWriter have protected against this if it is incorrect?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 06:30:19 2008
Return-Path: <java-user-return-33392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97916 invoked from network); 30 Mar 2008 06:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 06:30:18 -0000
Received: (qmail 1362 invoked by uid 500); 30 Mar 2008 06:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1325 invoked by uid 500); 30 Mar 2008 06:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1314 invoked by uid 99); 30 Mar 2008 06:30:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Mar 2008 23:30:11 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 06:29:21 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 45C2D71C352; Sat, 29 Mar 2008 23:29:41 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4271C71C348
	for <java-user@lucene.apache.org>; Sat, 29 Mar 2008 23:29:41 -0700 (PDT)
Date: Sat, 29 Mar 2008 23:29:41 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: CheckIndex:  pos -1 is out of bounds
In-Reply-To: <Pine.LNX.4.62.0803292323350.16762@radix.cryptio.net>
Message-ID: <Pine.LNX.4.62.0803292329190.16762@radix.cryptio.net>
References: <Pine.LNX.4.62.0803292323350.16762@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Hey guys, a Solr user just encountered an interesting situation...

sorry, i forgot to paste the refrence...

http://www.nabble.com/WordDelimiterFilter%2BLenghtFilter-results-in-termPosition%3D%3D-1-to16306788.html



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 08:38:43 2008
Return-Path: <java-user-return-33393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34601 invoked from network); 30 Mar 2008 08:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 08:38:42 -0000
Received: (qmail 45429 invoked by uid 500); 30 Mar 2008 08:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45392 invoked by uid 500); 30 Mar 2008 08:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45381 invoked by uid 99); 30 Mar 2008 08:38:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 01:38:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 08:37:51 +0000
Received: by an-out-0708.google.com with SMTP id c5so270944anc.49
        for <java-user@lucene.apache.org>; Sun, 30 Mar 2008 01:37:59 -0700 (PDT)
Received: by 10.100.140.19 with SMTP id n19mr12223519and.23.1206866278939;
        Sun, 30 Mar 2008 01:37:58 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 33sm6253288wra.23.2008.03.30.01.37.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 30 Mar 2008 01:37:58 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <Pine.LNX.4.62.0803292329190.16762@radix.cryptio.net>
References: <Pine.LNX.4.62.0803292323350.16762@radix.cryptio.net> <Pine.LNX.4.62.0803292329190.16762@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9F51CE4B-0789-437B-8563-B44E8D2A4EBF@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: CheckIndex:  pos -1 is out of bounds
Date: Sun, 30 Mar 2008 04:38:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Interesting!

I would be inclined to allow this, and fix CheckIndex's paranoia.  As  
far as I can tell, Lucene itself does not mind if the position is -1  
(at least PhraseQuery, SpanTermQuery happily find that Term at  
position -1), although we do prevent setting positionIncrement to a  
negative number in Token.java so you can't get less than -1.  Does  
anyone know of actual cases where Lucene would choke on this?

Mike

Chris Hostetter wrote:
>
> : Hey guys, a Solr user just encountered an interesting situation...
>
> sorry, i forgot to paste the refrence...
>
> http://www.nabble.com/WordDelimiterFilter%2BLenghtFilter-results-in- 
> termPosition%3D%3D-1-to16306788.html
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 30 23:42:51 2008
Return-Path: <java-user-return-33394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20154 invoked from network); 30 Mar 2008 23:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Mar 2008 23:42:51 -0000
Received: (qmail 24008 invoked by uid 500); 30 Mar 2008 23:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23967 invoked by uid 500); 30 Mar 2008 23:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23955 invoked by uid 99); 30 Mar 2008 23:42:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 16:42:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Mar 2008 23:42:04 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1735206wah.11
        for <java-user@lucene.apache.org>; Sun, 30 Mar 2008 16:42:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=q7XkwvXqWac8Pc3YMM1qLT/qJ9zoz4a6LbGeTy0qtxk=;
        b=GpkDE87ZAePPq/8cvEH26F3u2WDDZqZjkHaQVhVB8XiqZfzvyjnQqaNUzMAUdi7PEka/w9c1H5yjbmHMNjfClW96Ash9rW/XIPQFkPes4CHrthFFPU4i1fTa4Unjojc6xo4slwYS6rMPCiMu9s3wlyzRdfptm+A4Y+OyqPcYtJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=QH8+ckdN3klx3dz9DpPz16NWPcDMQn7kfuS+bIHMcO9hv2NND8Lql7tnSXSjvr84EWBd9roRXdDzzRDZua26I3Y9NIxpCaVd9hnG7Y7/LT29DBYlIqjFeIJsL/HWvdeIgstW2PrxveM+mf5a1zGx4hXEB71KushIBJuW9U+hN64=
Received: by 10.114.120.1 with SMTP id s1mr8775224wac.82.1206920536273;
        Sun, 30 Mar 2008 16:42:16 -0700 (PDT)
Received: by 10.114.255.19 with HTTP; Sun, 30 Mar 2008 16:42:15 -0700 (PDT)
Message-ID: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com>
Date: Mon, 31 Mar 2008 00:42:15 +0100
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.IllegalArgumentException: Segment is too large
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

 I'm using 2.3.0 Lucene build and have following merge parameters,

mergeFactor = 100
maxMergeDocs = 99999
maxBufferedDocs = 10000
maxRAMBufferSizeMB = 200


After running with this setting for a month without problem  all the
sudden I'm getting following exception,

java.lang.IllegalArgumentException: Segment is too large (100001 docs
vs max docs 99999)
        at org.apache.lucene.index.LogMergePolicy.findMerges(LogMergePolicy.java:274)
        at org.apache.lucene.index.IndexWriter.updatePendingMerges(IndexWriter.java:1824)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:1799)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:1795)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:1791)
        at org.apache.lucene.index.IndexWriter.addIndexesNoOptimize(IndexWriter.java:2231)


I thought Lucene should control the number of documents in a segment
during merge. Is there a different configuration I need to set? Should
I leave the maxMergeDocs to its default value, Integer#MAX_VALUE?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 07:09:08 2008
Return-Path: <java-user-return-33395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24592 invoked from network); 31 Mar 2008 07:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 07:09:08 -0000
Received: (qmail 18305 invoked by uid 500); 31 Mar 2008 07:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18273 invoked by uid 500); 31 Mar 2008 07:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18262 invoked by uid 99); 31 Mar 2008 07:09:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 00:09:01 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 07:08:20 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1536303wff.20
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 00:08:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=YX3NAlb7Qeyd5OMw7W8K8Gem4IFEDRgmvayFeP3dJ4Q=;
        b=rD0aWIXpf5mU/4rDgRT+4Jg/Xv5ULfrb8qIRFu5ZPd5H3FXSfP3Tfwun8cQPyC9jUGrfkfRruOAuDx/MkmxNGu+Zh/5pFlF6Jc+JHSj/JjHSS0hcHikQ1B+CNkD5QbL5Ay2lYuR14vUPoTSweRPAQ/ncypvKGg9NkHVHSQ5JxQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=nbuAneWM0rC0mL4ygUfco/Km7mW316B4ic+cOiYqBndiZa1QyJcJw46b0nr9NQB/9diBlejHbQyxU+w6X5XMwTTtR6pSNtSoqtPh2J5tCZUY3z0JwrGBb/AHxgJ9SGKeybRbh8r//To1jQBSUbx4pc90+chPI4Qlvfe6gZ2XQX8=
Received: by 10.142.100.1 with SMTP id x1mr3454703wfb.131.1206947312465;
        Mon, 31 Mar 2008 00:08:32 -0700 (PDT)
Received: from wuqi ( [125.33.120.104])
        by mx.google.com with ESMTPS id 28sm7864731wfd.1.2008.03.31.00.08.29
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 31 Mar 2008 00:08:31 -0700 (PDT)
Message-ID: <009101c892fd$d4fd4b50$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Problems about using Lucene to generate tag cloud..
Date: Mon, 31 Mar 2008 15:07:02 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQpJIGFtIHRyeWluZyB0byB1c2UgTHVjZW5lIGluZGV4IHRvIGltcGxlbWVudCBhIHRhZyBj
bG91ZCAgc3lzdGVtLiBJIGFkZCBhIG5ldyBmaWVsZCAgbmFtZWQgInRhZ3MiIGluIGluZGV4IHRv
ICBzdG9yZSBhbGwgdGhlIHRhZ3MsYW5kIHdlIGRvbid0IHN1cHBvcnQgdGFncyB3aXRoIG1vcmUg
dGhhbiBvbmUgd29yZCwgc28gZGlmZmVyZW50IHRhZ3Mgb2YgdGhlIHNhbWUgZG9jdW1lbnQganVz
dCBhcmUgc2VwYXJhdGUgYnkgd2hpdGUgc3BhY2UuICBUaGUgInRhZ3MiIGZpbGVkIGluIG9uZSBk
b2N1bWVudCAgbWF5IGxvb2tzIGxpa2UgdGhpcyA6DQpkb2MxICB0YWdzIDogdHJhdmVsIEJlaWpp
bmcgIG5ld3MNCmRvYzIgIHRhZ3M6ICBiZWlqaW5nIHNwb3J0cyBuZXdzDQpJIGNhbiBlYXNpbHkg
cmV0cmlldmUgdGFncyByZWxhdGVkIHdpdGggc2luZ2xlIGRvY3VtZW50LGFuZCBhbHNvIGdldCB0
aGUgZG9jdW1lbnRzIHJlbGF0ZWQgd2l0aCBjZXJ0YWluIHRhZywgYnV0IGl0J3MgaGFyZCAgZmlu
ZCBhICJlZmZpY2llbnQiIHdheSB0byAgZ2V0IGZyZXF1ZW50IHRhZ3MgIGZyb20gYSAic2V0IiBv
ZiBkb2N1bWVudHMgb2YgdGhpcyBpbmRleC5UdGhlIHNldCBvZiB0aGUgZG9jdW1lbnRzIGlzIGFs
d2F5cyBnZW5lcmF0ZWQgZHluYW1pY2FsbHksIG1heSBiZSBhIHNlYXJjaCByZXN1bHQsIGEgIGR5
bmFtaWNhbGx5IGdlbmVyYXRlZCBjYXRlZ29yeSB0aHJvdWdoIGNsdXN0ZXJpbmcuIFRoZSBkb2N1
bWVudCBzZXQgaXMgdmVyeSBsYXJnZSwgbWF5YmUgc2V2ZXJhbCB0ZW4gdGhvdXNhbmRzIG9yIHNl
dmVyYWwgaHVuZHJlZCB0aG91c2FuZHMuU28gc2ltcGx5ICBpdGVyYXRlIGFsbCAgdGhlIGRvY3Vt
ZW50cyBpbiB0aGUgc2V0IGFuZCBmaW5kIHRoZSBmcmVxdWVudCB0YWdzIG1pZ2h0IG5vdCBiZSBh
cHBsaWNhYmxlLkRvIHlvdSBoYXZlIGFueSBiZXR0ZXIgaWRlYSA/DQoNClRoYW5rcw0KLVFp



From java-user-return-33396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 08:02:41 2008
Return-Path: <java-user-return-33396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40479 invoked from network); 31 Mar 2008 08:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 08:02:40 -0000
Received: (qmail 65522 invoked by uid 500); 31 Mar 2008 08:02:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65492 invoked by uid 500); 31 Mar 2008 08:02:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65481 invoked by uid 99); 31 Mar 2008 08:02:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 01:02:34 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 08:01:53 +0000
Received: by rv-out-0910.google.com with SMTP id k20so928995rvb.5
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 01:02:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=fa92nzKNIhuFHSikrZcm2vkZT76tC4kpX0X1F5iX/vc=;
        b=fS1XgO5GPfyTAygNEIfk0xfQE+OT/gqnRmS7SEnIJXpKF0EuBTqZUaOPcLhSP/P2eWTHPZQdOJSksR3tWQUPu9DvRZySglnTS/4lDPiknavPFkkGJYap2//ikspMIcwMZSlw2jMTnDAVVLZRQ5rUyP+qa7UVvs5BglLqIi8Uk8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:from:to:subject:date:mime-version:content-type:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=awC22qAIbo7X8ZdNgDS7PX3FJFu4/jEScPRPybWPzBHDdq2FM5VhZfR0yO0GrPd6Or7mSuPysdJxWEJPM5blEAHsrTxpvQoxiNFNPv52/1y4i/nLZznnhRqTvn5jJK5BD5QokjG6E9zKzDUEu4F8eUJWBDvpnEmj8ZmSBSkfCE0=
Received: by 10.141.68.12 with SMTP id v12mr3143821rvk.111.1206950525033;
        Mon, 31 Mar 2008 01:02:05 -0700 (PDT)
Received: from wuqi ( [125.33.120.104])
        by mx.google.com with ESMTPS id l38sm281139rvb.12.2008.03.31.01.02.01
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 31 Mar 2008 01:02:03 -0700 (PDT)
Message-ID: <000d01c89305$4f8e3b20$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Problems about using Lucene to generate tag cloud..
Date: Mon, 31 Mar 2008 16:00:35 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000A_01C89348.5AFE1AF0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000A_01C89348.5AFE1AF0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SGksDQpJIGFtIHRyeWluZyB0byB1c2UgTHVjZW5lIGluZGV4IHRvIGltcGxlbWVudCBhIHRhZyBj
bG91ZCAgc3lzdGVtLiBJIGFkZCBhIG5ldyBmaWVsZCAgbmFtZWQgInRhZ3MiIGluIGluZGV4IHRv
ICBzdG9yZSBhbGwgdGhlIHRhZ3MsYW5kIHdlIGRvbid0IHN1cHBvcnQgdGFncyB3aXRoIG1vcmUg
dGhhbiBvbmUgd29yZCwgc28gZGlmZmVyZW50IHRhZ3Mgb2YgdGhlIHNhbWUgZG9jdW1lbnQganVz
dCBhcmUgc2VwYXJhdGUgYnkgd2hpdGUgc3BhY2UuICBUaGUgInRhZ3MiIGZpbGVkIGluIG9uZSBk
b2N1bWVudCAgbWF5IGxvb2tzIGxpa2UgdGhpcyA6DQpkb2MxICB0YWdzIDogdHJhdmVsIEJlaWpp
bmcgIG5ld3MNCmRvYzIgIHRhZ3M6ICBiZWlqaW5nIHNwb3J0cyBuZXdzDQpJIGNhbiBlYXNpbHkg
cmV0cmlldmUgdGFncyByZWxhdGVkIHdpdGggc2luZ2xlIGRvY3VtZW50LGFuZCBhbHNvIGdldCB0
aGUgZG9jdW1lbnRzIHJlbGF0ZWQgd2l0aCBjZXJ0YWluIHRhZywgYnV0IGl0J3MgaGFyZCAgZmlu
ZCBhICJlZmZpY2llbnQiIHdheSB0byAgZ2V0IGZyZXF1ZW50IHRhZ3MgIGZyb20gYSAic2V0IiBv
ZiBkb2N1bWVudHMgb2YgdGhpcyBpbmRleC5UdGhlIHNldCBvZiB0aGUgZG9jdW1lbnRzIGlzIGFs
d2F5cyBnZW5lcmF0ZWQgZHluYW1pY2FsbHksIG1heSBiZSBhIHNlYXJjaCByZXN1bHQsIGEgIGR5
bmFtaWNhbGx5IGdlbmVyYXRlZCBjYXRlZ29yeSB0aHJvdWdoIGNsdXN0ZXJpbmcuIFRoZSBkb2N1
bWVudCBzZXQgaXMgdmVyeSBsYXJnZSwgbWF5YmUgc2V2ZXJhbCB0ZW4gdGhvdXNhbmRzIG9yIHNl
dmVyYWwgaHVuZHJlZCB0aG91c2FuZHMuU28gc2ltcGx5ICBpdGVyYXRlIGFsbCAgdGhlIGRvY3Vt
ZW50cyBpbiB0aGUgc2V0IGFuZCBmaW5kIHRoZSBmcmVxdWVudCB0YWdzIG1pZ2h0IG5vdCBiZSBh
cHBsaWNhYmxlLkRvIHlvdSBoYXZlIGFueSBiZXR0ZXIgaWRlYSA/DQoNClRoYW5rcw0KLVFp

------=_NextPart_000_000A_01C89348.5AFE1AF0--


From java-user-return-33397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 09:19:59 2008
Return-Path: <java-user-return-33397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66394 invoked from network); 31 Mar 2008 09:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 09:19:59 -0000
Received: (qmail 67601 invoked by uid 500); 31 Mar 2008 09:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67560 invoked by uid 500); 31 Mar 2008 09:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67530 invoked by uid 99); 31 Mar 2008 09:19:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 02:19:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 09:19:02 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1591210wxd.20
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 02:19:12 -0700 (PDT)
Received: by 10.151.156.2 with SMTP id i2mr3189727ybo.121.1206955152656;
        Mon, 31 Mar 2008 02:19:12 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 34sm7845693wra.20.2008.03.31.02.19.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 31 Mar 2008 02:19:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com>
References: <a206fb7e0803301642j66ad9a32o296d00f107c5b61e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <736FEDAD-F66B-46E0-BC83-9F4A96F91377@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: java.lang.IllegalArgumentException: Segment is too large
Date: Mon, 31 Mar 2008 05:19:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


This happens when addIndexesNoOptimize finds a segment that's larger  
than maxMergeDocs in the index(es) it's given.

If you leave maxMergeDocs at Integer.MAX_VALUE it will fix that.

Though really it's being a little too pedantic because that setting  
(maxMergeDocs) sets the maximum size of a segment that's may be  
selected for merging.  So it's easily possible to have segments in  
your index that are larger than this (eg by merging segments that  
were all just a bit smaller than the limit).

I think we should remove those checks and allow addIndexesNoOptimize  
to import and index even if it has segments over this limit.  I'll  
open an issue.

Mike

vivek sar wrote:
> Hi,
>
>  I'm using 2.3.0 Lucene build and have following merge parameters,
>
> mergeFactor = 100
> maxMergeDocs = 99999
> maxBufferedDocs = 10000
> maxRAMBufferSizeMB = 200
>
>
> After running with this setting for a month without problem  all the
> sudden I'm getting following exception,
>
> java.lang.IllegalArgumentException: Segment is too large (100001 docs
> vs max docs 99999)
>         at org.apache.lucene.index.LogMergePolicy.findMerges 
> (LogMergePolicy.java:274)
>         at org.apache.lucene.index.IndexWriter.updatePendingMerges 
> (IndexWriter.java:1824)
>         at org.apache.lucene.index.IndexWriter.maybeMerge 
> (IndexWriter.java:1799)
>         at org.apache.lucene.index.IndexWriter.maybeMerge 
> (IndexWriter.java:1795)
>         at org.apache.lucene.index.IndexWriter.maybeMerge 
> (IndexWriter.java:1791)
>         at org.apache.lucene.index.IndexWriter.addIndexesNoOptimize 
> (IndexWriter.java:2231)
>
>
> I thought Lucene should control the number of documents in a segment
> during merge. Is there a different configuration I need to set? Should
> I leave the maxMergeDocs to its default value, Integer#MAX_VALUE?
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 09:41:49 2008
Return-Path: <java-user-return-33398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78455 invoked from network); 31 Mar 2008 09:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 09:41:49 -0000
Received: (qmail 96854 invoked by uid 500); 31 Mar 2008 09:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96829 invoked by uid 500); 31 Mar 2008 09:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96818 invoked by uid 99); 31 Mar 2008 09:41:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 02:41:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fiaz.khan@ntlworld.com designates 81.103.221.48 as permitted sender)
Received: from [81.103.221.48] (HELO mtaout02-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 09:40:59 +0000
Received: from aamtaout02-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout02-winn.ispmail.ntl.com with ESMTP
          id <20080331094357.PJLG27871.mtaout02-winn.ispmail.ntl.com@aamtaout02-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Mon, 31 Mar 2008 10:43:57 +0100
Received: from smtp.ntlworld.com ([81.103.221.25])
          by aamtaout02-winn.ispmail.ntl.com with SMTP
          id <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
          for <java-user@lucene.apache.org>;
          Mon, 31 Mar 2008 10:43:06 +0100
X-Mailer: Openwave WebEngine, version 2.8.19 (webedge20-101-1110-20050615)
X-Originating-IP: [91.84.219.242]
From: <fiaz.khan@ntlworld.com>
To: <java-user@lucene.apache.org>
Subject: Tokenize on another character
Date: Mon, 31 Mar 2008 10:42:01 +0100
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Message-Id: <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I just joined the list and need some help.

I have a database of music tracks.These tracks have been added to an
index. They are classified using keywords, so a track can have up to
20 keywords assigned to them. I took the keywords and create a
"keyword" FIELD which was not stored and tokenized. The problem is
this... if a user searches for a specific keyword such as "ROCK", it
is finding as well as ROCK tracks, ROCK AND ROLL tracks. I realise
this is due to the tokenization of the keyword FIELD. My question is
this, how can i stop the analyser from tokenizing on the space
character and instead tokenize on one i specifiy. That way, if i chose
to tokenize on a comma, i could add a comma at the end of every
keyword. Or have i gone about this the wrong way?

Many thanks, any insight will be appreciated.

Fiaz

-----------------------------------------
Email sent from www.virginmedia.com/email
Virus-checked using McAfee(R) Software and scanned for spam


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 11:03:51 2008
Return-Path: <java-user-return-33399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14300 invoked from network); 31 Mar 2008 11:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 11:03:51 -0000
Received: (qmail 2826 invoked by uid 500); 31 Mar 2008 11:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2791 invoked by uid 500); 31 Mar 2008 11:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2780 invoked by uid 99); 31 Mar 2008 11:03:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 04:03:44 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.198] (HELO out3.bezeqint.net) (192.115.188.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 11:03:01 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out3.bezeqint.net (Postfix) with ESMTPA id 7A0735E0718
	for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 14:02:25 -0400 (EDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: setPositionIncrement questions
Date: Mon, 31 Mar 2008 14:02:59 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-reply-to: <Pine.LNX.4.62.0803292249110.16762@radix.cryptio.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AciSMx7utLH+7cY0SpWY0tOd1VwB4wA4Z32Q
Message-Id: <20080331180225.7A0735E0718@out3.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Chris,

Thanks for your input.

Please let me make sure that I get this right: while iterating through the
words in a document, I can use my tokenizer to setPositionIncrement(150) on
a specific token, what would make it be more distant from the previous token
than it should have been. The next token will already have position
increment of 1 and therefore will immediately follow that token, with no
extra handling. If I get this right, the best way to achieve that is by
appending a predefined string like $$$, such that will not occur accidently
in my documents, and have my tokenizer set the position increment as well
instead of just tokenizing upon it.

>>>  Lucene will call the "getPositionIncrementGap" method on your Analyzer
to determine how much positionIncreiment to put in between the last token of
the first Field and the first token of the second Field -- so you could just
pass each paragraph as a seperate Field instance

This sounds good, but is risky, since I will have to concatenate my
paragraphs that I DO want to have proximity data in between, and if I forget
to, or accidently don't do that this will corrupt proximity-based searches.
My documents can become very big as well. I guess what I was looking for was
a simpler way - say tell Lucene when I do doc.add(new Field) to set the
position increment for the last token. The "magic char sequence" will do,
but I was wondering if there is a way to do that without ammending my
Tokenizer?

>>> it means the words appear at the same position

... And what does this mean exactly? How can this affect standard searches?
What I might do with this is store stems side-by-side with the original
word. From what I've heard so far this is NOT how you do this for English
texts - you rather store them in a different field, why is that? I thought
if you store them side-by-side you could write a Scorer (or similar) that
will return all relevant results for the stem of a given word, boosting
words with the same exact syntax more than others. Any ideas on that?

Itamar.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: Sunday, March 30, 2008 8:56 AM
To: Lucene Users
Subject: Re: setPositionIncrement questions


: Breaking proximity data has been discussed several times before, and
: concluded that setPositionIncrement is the way to go. In regards of it:
: 
: 1. Where should it be called exactly to create the gap properly?

any part of your Analyzer can set the position increment on any token to
indicate how far after the previous token it should be.

: 2. Is there a way to call it directly somehow while indexing (e.g. after
: adding a new paragraph to an existing field) instead of appending $$$
: for example after the new string I'm indexing, and having to update my
: tokenizer and filters so they will retain the $$$ chars, indicating the
: gap request?

if you add multiple Fields with the same name, Lucene will call the
"getPositionIncrementGap" method on your Analyzer to determine how much
positionIncreiment to put in between the last token of the first Field and
the first token of the second Field -- so you could just pass each paragraph
as a seperate Field instance .. alternately you can have a single Field
instance, and your Analyzer can use whatever mechanims it wants to decide to
set the position incriment to something high (a line break, a magic char
sequence you put in the string, ... whatever you want)

: 3. What is the recommended value to pass setPositionIncrement to create
: a reasonable gap, and not risk large documents being indexed improperly
: (I mean, is there some sort of high-bound for the position value?).

MAX_INT .. pick gaps based on your data and the queries you expect (if you
want gaps betwen paragraps, and your paragraphs tend to be under 200 words
long, make the gap 500 so "lucene java"~300 can find those words in the same
paragram, but can never span multiple paragraphs

: 4. What are the consequences of setting PositionIncrement to 0? Does
: this mean I can index synonyms or stems aside of the "real" words
: without risking data corruption?

it means the words appear at the same position - synonyms is a great example
of this use case.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 13:06:27 2008
Return-Path: <java-user-return-33400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67215 invoked from network); 31 Mar 2008 13:06:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 13:06:27 -0000
Received: (qmail 87612 invoked by uid 500); 31 Mar 2008 13:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86649 invoked by uid 500); 31 Mar 2008 13:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86638 invoked by uid 99); 31 Mar 2008 13:06:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 06:06:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.227 as permitted sender)
Received: from [72.14.214.227] (HELO hu-out-0506.google.com) (72.14.214.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 13:05:36 +0000
Received: by hu-out-0506.google.com with SMTP id 27so22558hub.15
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 06:05:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=gA+dZ1eZxdQRxYeIssMe/TeE9pdMTW6S/cC2HpW1t+E=;
        b=rqIpNCLu+Yf6r2tEkqjultn/2+SLDvt7ld8Aa6lur6LY28iuVF26tG6N79IAMyXsmdLsq3vLhOba6+MflhbRrdX5QYLirv5En0lv7+8oiik/wQCP/Ojfs7iOVA7U2uvjVg83cBp40cgbmn9pw1/aK7sZOXHF4WLqvA8Dg6ha48c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cMvnETGScnz57LWAqZLarAMRar/tsj957jRQCvboL50KFUmE9qeweVQjrVKdRFyNPJ4sQVYaKIFgD4EZhfqA3ylLk+Oztx9WsDpN+2FdcG+voW+NfB6XR/S3GQF4OCS4iB3pM+YAK7RRKnCDGGJvNlCF8RodtbyroGekv0sI2TY=
Received: by 10.82.153.5 with SMTP id a5mr17013643bue.5.1206968747057;
        Mon, 31 Mar 2008 06:05:47 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Mon, 31 Mar 2008 06:05:47 -0700 (PDT)
Message-ID: <359a92830803310605q72801d05w73e3b4a76a0a38d4@mail.gmail.com>
Date: Mon, 31 Mar 2008 09:05:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tokenize on another character
In-Reply-To: <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9735_8996537.1206968747041"
References: <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9735_8996537.1206968747041
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm confused on the use case you're trying to implement,
could you add a bit more explanation?

In particular, do you ever want ROCK to match
ROCK AND ROLL? If you want both, that is
some searches match partial keywords and some
match entire keywords, I recommend you create a
second field in your document KEYWORD_EXACT or
some such and index it UN_TOKENIZED (storage is
optional). Also, you can index the KEYWORD field
as TOKENIZED. Then, when you want to match exactly,
you search against the first field, when you want to search
on any piece, search the second.

If this is completely off base, could you post the use-cases
you're interested in?

Best
Erick

On Mon, Mar 31, 2008 at 5:42 AM, <fiaz.khan@ntlworld.com> wrote:

> Hello
>
> I just joined the list and need some help.
>
> I have a database of music tracks.These tracks have been added to an
> index. They are classified using keywords, so a track can have up to
> 20 keywords assigned to them. I took the keywords and create a
> "keyword" FIELD which was not stored and tokenized. The problem is
> this... if a user searches for a specific keyword such as "ROCK", it
> is finding as well as ROCK tracks, ROCK AND ROLL tracks. I realise
> this is due to the tokenization of the keyword FIELD. My question is
> this, how can i stop the analyser from tokenizing on the space
> character and instead tokenize on one i specifiy. That way, if i chose
> to tokenize on a comma, i could add a comma at the end of every
> keyword. Or have i gone about this the wrong way?
>
> Many thanks, any insight will be appreciated.
>
> Fiaz
>
> -----------------------------------------
> Email sent from www.virginmedia.com/email
> Virus-checked <http://www.virginmedia.com/emailVirus-checked> using
> McAfee(R) Software and scanned for spam
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9735_8996537.1206968747041--

From java-user-return-33401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 13:25:16 2008
Return-Path: <java-user-return-33401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74362 invoked from network); 31 Mar 2008 13:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 13:25:16 -0000
Received: (qmail 10175 invoked by uid 500); 31 Mar 2008 13:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10147 invoked by uid 500); 31 Mar 2008 13:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10136 invoked by uid 99); 31 Mar 2008 13:25:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 06:25:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 13:24:29 +0000
Received: by fk-out-0910.google.com with SMTP id 19so2187130fkr.5
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 06:24:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uwlG0Pp1DuT7V86lb6drG1qrE3z0fG1Q9J7oGi64nP0=;
        b=fASjgRXF6IZ5ADXu/uD7oVS/4H1/55KaMXP+4kkdhat85TCo/GiAMeypqatet2VSjykIiJKWjwF6cGpu2mNlog71FKT8ObTCKwBsH+5kan096y42UvuXM5mOT4qk99i+SXSKWI+JsXOUF4EVfvhzmmLMbmfi1N1Cv95RNsrf8Lk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hA2x6oB0CdZ9SzWEpsMgy96cRBB3PLCnFjkjnQgzGySFr2byVyHnjesb9kfIPFWV3J3DB/4MXlI9jJCwhK0G7MtJAooXlfxe7kN/LNL4xtCulq6nBGY870+xBtuWHECLsInxQUWaU0J6cWqmnLqseQQbFnJ8YShFBIxWCP8yCeY=
Received: by 10.82.166.9 with SMTP id o9mr15742946bue.32.1206969879638;
        Mon, 31 Mar 2008 06:24:39 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Mon, 31 Mar 2008 06:24:39 -0700 (PDT)
Message-ID: <359a92830803310624r5871080eufa795c4b3b8c7400@mail.gmail.com>
Date: Mon, 31 Mar 2008 09:24:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setPositionIncrement questions
In-Reply-To: <20080331180225.7A0735E0718@out3.bezeqint.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9886_4149299.1206969879622"
References: <Pine.LNX.4.62.0803292249110.16762@radix.cryptio.net>
	 <20080331180225.7A0735E0718@out3.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9886_4149299.1206969879622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On Mon, Mar 31, 2008 at 7:02 AM, Itamar Syn-Hershko <itamar@divrei-tora.com>
wrote:

>
> Chris,
>
> Thanks for your input.
>
> Please let me make sure that I get this right: while iterating through the
> words in a document, I can use my tokenizer to setPositionIncrement(150)
> on
> a specific token, what would make it be more distant from the previous
> token
> than it should have been. The next token will already have position
> increment of 1 and therefore will immediately follow that token, with no
> extra handling. If I get this right, the best way to achieve that is by
> appending a predefined string like $$$, such that will not occur
> accidently
> in my documents, and have my tokenizer set the position increment as well
> instead of just tokenizing upon it.


Not really. Somewhere in the indexing code is something that behaves like
this...

say you have the following lines...
doc.add("field", "word1 word2 word3", blah, blah)
doc.add("field", "word4 word5 word6", blah, blah)
doc.add("field", "word7 word8 word9", blah, blah)
IndexWriter.add(doc).

Now say your analyzer returns 100 for getPositionIncrementGap. The
words will have the following offsets
word1 - 0
word2 - 1
word3 - 2
word4 - 103 (perhaps 102, but you get the idea)
word5 - 104
word6 - 105
word7 - 206
word8 - 207
word9 - 208

There's no need to have any special tokens for this to occur.


>
>
> >>>  Lucene will call the "getPositionIncrementGap" method on your
> Analyzer
> to determine how much positionIncreiment to put in between the last token
> of
> the first Field and the first token of the second Field -- so you could
> just
> pass each paragraph as a seperate Field instance
>
> This sounds good, but is risky, since I will have to concatenate my
> paragraphs that I DO want to have proximity data in between, and if I
> forget
> to, or accidently don't do that this will corrupt proximity-based
> searches.
> My documents can become very big as well. I guess what I was looking for
> was
> a simpler way - say tell Lucene when I do doc.add(new Field) to set the
> position increment for the last token. The "magic char sequence" will do,
> but I was wondering if there is a way to do that without ammending my
> Tokenizer?
>

No, you must deal with your tokenizer, but this is pretty trivial. You can
simply
subclass whichever one you choose and override getPositionIncrementGap.

This seems no riskier that adding your special token since you have to deal
with differentiating between paragraphs you *do* want to be adjacent and
ones
you *don't* in that case as well. Or am I missing something?

As to size of documents, somewhere you do need to worry about exceeding
a position of 2^31, but if that's really an issue you have other problems
<G>.
Although this somewhat depends upon how far you need the paragraphs to be
apart. Are you going to allow proximity searches of 10,000,000? Or 10?



>
> >>> it means the words appear at the same position
>
> ... And what does this mean exactly? How can this affect standard
> searches?
> What I might do with this is store stems side-by-side with the original
> word. From what I've heard so far this is NOT how you do this for English
> texts - you rather store them in a different field, why is that? I thought
> if you store them side-by-side you could write a Scorer (or similar) that
> will return all relevant results for the stem of a given word, boosting
> words with the same exact syntax more than others. Any ideas on that?
>

I don't really understand what you're trying to accomplish, a use case would
help. So this may be totally off base....

the words "in the same position" means that if you store, say, blivet and
blort
at the same position, and the next token is bonkers, then the following two
matches will be found:
"blivet bonkers" "blort bonkers" (these are as exact pharses). You can
answer
much of this by getting a copy of Luke and examining test indexes you build.

To boost exact matches, you have to do some fancy dancing. For instance, you
could store the original word with a special token (say $) at the end, and
*also* the
stemmed version at the same position. Then you have to mangle your queries
to produce something like (word$^10 OR <stemmed version of word>) for each
search term.

Best
Erick



>
> Itamar.
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Sunday, March 30, 2008 8:56 AM
> To: Lucene Users
> Subject: Re: setPositionIncrement questions
>
>
> : Breaking proximity data has been discussed several times before, and
> : concluded that setPositionIncrement is the way to go. In regards of it:
> :
> : 1. Where should it be called exactly to create the gap properly?
>
> any part of your Analyzer can set the position increment on any token to
> indicate how far after the previous token it should be.
>
> : 2. Is there a way to call it directly somehow while indexing (e.g. after
> : adding a new paragraph to an existing field) instead of appending $$$
> : for example after the new string I'm indexing, and having to update my
> : tokenizer and filters so they will retain the $$$ chars, indicating the
> : gap request?
>
> if you add multiple Fields with the same name, Lucene will call the
> "getPositionIncrementGap" method on your Analyzer to determine how much
> positionIncreiment to put in between the last token of the first Field and
> the first token of the second Field -- so you could just pass each
> paragraph
> as a seperate Field instance .. alternately you can have a single Field
> instance, and your Analyzer can use whatever mechanims it wants to decide
> to
> set the position incriment to something high (a line break, a magic char
> sequence you put in the string, ... whatever you want)
>
> : 3. What is the recommended value to pass setPositionIncrement to create
> : a reasonable gap, and not risk large documents being indexed improperly
> : (I mean, is there some sort of high-bound for the position value?).
>
> MAX_INT .. pick gaps based on your data and the queries you expect (if you
> want gaps betwen paragraps, and your paragraphs tend to be under 200 words
> long, make the gap 500 so "lucene java"~300 can find those words in the
> same
> paragram, but can never span multiple paragraphs
>
> : 4. What are the consequences of setting PositionIncrement to 0? Does
> : this mean I can index synonyms or stems aside of the "real" words
> : without risking data corruption?
>
> it means the words appear at the same position - synonyms is a great
> example
> of this use case.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9886_4149299.1206969879622--

From java-user-return-33402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 13:47:08 2008
Return-Path: <java-user-return-33402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84032 invoked from network); 31 Mar 2008 13:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 13:47:08 -0000
Received: (qmail 46943 invoked by uid 500); 31 Mar 2008 13:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46921 invoked by uid 500); 31 Mar 2008 13:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 34085 invoked by uid 99); 31 Mar 2008 13:41:26 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Message-ID: <2f9136240803310640w211fb2d1jb56e926ca05205ab@mail.gmail.com>
Date: Mon, 31 Mar 2008 14:40:52 +0100
From: "Fiaz Khan" <fiaz.khan@ntlworld.com>
Sender: fiaz@nextbigleap.com
To: java-user@lucene.apache.org
Subject: Re: Tokenize on another character
In-Reply-To: <359a92830803310605q72801d05w73e3b4a76a0a38d4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
	 <359a92830803310605q72801d05w73e3b4a76a0a38d4@mail.gmail.com>
X-Google-Sender-Auth: 8596684d97940373
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick....

Ok,..

I have a track called METAL MAN, this has 4 categories assigned to it like so:

GUITAR
ROCK
ROCK AND ROLL
METAL

I have another track called NOISE with the following 3 categories:

GUITAR
ROCK AND ROLL
METAL

When a user searches using the keyword ROCK, it is finding both when
really it should only find METAL MAN.

The reason for this is because... when i created the lucene index, i
concatenated all categories into one field called KEYWORDS like so:
METAL MAN keywords are: GUITAR, ROCK, ROCK AND ROLL, METAL,
NOISE keywords are: GUITAR, ROCK AND ROLL, METAL,

So therefore, when tokenized using the standardanalyser, they end up as
METAL MAN keywords are: GUITAR, ROCK, ROCK, ROLL, METAL,
NOISE keywords are: GUITAR, ROCK, ROLL, METAL,
i.e. they are tokenized on the space char words like AND are removed.

What i would like is for the tokenizer to split on the comma and leave
each keyword as is and not, for example, turn ROCK AND ROLL into ROCK,
ROLL

My attempts so far were to replace spaces with "another" char, e.g. ~.
Strip spaces from the keyword. This broke the rest of the search
engine which doesnt need to work like this.
Un tokenize, issue with this was that i could no longer partial string
search as the work ROCK was being picked up in the word FROCK.

Am i going about this the wrong way?
Caveat is that i am using .net version (2.1). Hopefully it is possible
with this version.

Hope this explains it a bit better.

On Mon, Mar 31, 2008 at 2:05 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> I'm confused on the use case you're trying to implement,
>  could you add a bit more explanation?
>
>  In particular, do you ever want ROCK to match
>  ROCK AND ROLL? If you want both, that is
>  some searches match partial keywords and some
>  match entire keywords, I recommend you create a
>  second field in your document KEYWORD_EXACT or
>  some such and index it UN_TOKENIZED (storage is
>  optional). Also, you can index the KEYWORD field
>  as TOKENIZED. Then, when you want to match exactly,
>  you search against the first field, when you want to search
>  on any piece, search the second.
>
>  If this is completely off base, could you post the use-cases
>  you're interested in?
>
>  Best
>  Erick
>
>
>  On Mon, Mar 31, 2008 at 5:42 AM, <fiaz.khan@ntlworld.com> wrote:
>
>  > Hello
>  >
>  > I just joined the list and need some help.
>  >
>  > I have a database of music tracks.These tracks have been added to an
>  > index. They are classified using keywords, so a track can have up to
>  > 20 keywords assigned to them. I took the keywords and create a
>  > "keyword" FIELD which was not stored and tokenized. The problem is
>  > this... if a user searches for a specific keyword such as "ROCK", it
>  > is finding as well as ROCK tracks, ROCK AND ROLL tracks. I realise
>  > this is due to the tokenization of the keyword FIELD. My question is
>  > this, how can i stop the analyser from tokenizing on the space
>  > character and instead tokenize on one i specifiy. That way, if i chose
>  > to tokenize on a comma, i could add a comma at the end of every
>  > keyword. Or have i gone about this the wrong way?
>  >
>  > Many thanks, any insight will be appreciated.
>  >
>  > Fiaz
>  >
>  > -----------------------------------------
>  > Email sent from www.virginmedia.com/email
>  > Virus-checked <http://www.virginmedia.com/emailVirus-checked> using
>
>
> > McAfee(R) Software and scanned for spam
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-33403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 14:55:35 2008
Return-Path: <java-user-return-33403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17772 invoked from network); 31 Mar 2008 14:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 14:55:34 -0000
Received: (qmail 65943 invoked by uid 500); 31 Mar 2008 14:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65907 invoked by uid 500); 31 Mar 2008 14:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65896 invoked by uid 99); 31 Mar 2008 14:55:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 07:55:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.234 as permitted sender)
Received: from [72.14.214.234] (HELO hu-out-0506.google.com) (72.14.214.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 14:54:42 +0000
Received: by hu-out-0506.google.com with SMTP id 27so43578hub.15
        for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 07:54:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3a6I4l58bVbaCl9BO/Mg2yiGwaMfEgYL25dTFOhQuyY=;
        b=EoqZ/sZV+Khb265VZXTMBETbyDGjFlauOkHKWDK2BsKdjDQTZbe0Bw2FvJgzU6SpLm+Iytv3Ui1hFITRduS+NKuLsHT3vlPhnrGirkA8Co08U/PuiKEqCmSOCHt6l4dt+/hICeBC6gUPftp/y6iY7ejZ8oS/qAar5cK1d2Wi4dU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mUFHZ4jEhciDtYotktDwGR01X9NiWn7nTbqazVcEJU8k4VMj2LkFksvw3YTXksonb9gg7NdktECH7dhgJwqdk/16WFeuZh/NpuEHtkxsunZqEoKMMzmefbFI2gOtGOHJpTpBEjNSSGh4BFOjj9wIYOZaVepZxCjq74AxidWjQ0s=
Received: by 10.82.174.20 with SMTP id w20mr15655197bue.38.1206975292337;
        Mon, 31 Mar 2008 07:54:52 -0700 (PDT)
Received: by 10.82.191.6 with HTTP; Mon, 31 Mar 2008 07:54:52 -0700 (PDT)
Message-ID: <359a92830803310754g530a3a64t4ebace2ad249e8f7@mail.gmail.com>
Date: Mon, 31 Mar 2008 10:54:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tokenize on another character
In-Reply-To: <2f9136240803310640w211fb2d1jb56e926ca05205ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10321_12578555.1206975292333"
References: <20080331094306.CRMZ17393.aamtaout02-winn.ispmail.ntl.com@smtp.ntlworld.com>
	 <359a92830803310605q72801d05w73e3b4a76a0a38d4@mail.gmail.com>
	 <2f9136240803310640w211fb2d1jb56e926ca05205ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10321_12578555.1206975292333
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Much clearer. Here's what I'd try.
Index UN_TOKENIZED as follows:

for METAL MAN (bad pseudo-code...)
Document doc = new Document();
doc.add("category", "GUITAR", Store.NO, UN_TOKENIZED);
doc.add("category", "ROCK", Store.NO, UN_TOKENIZED);
doc.add("category", "ROCK AND ROLL" , Store.NO, UN_TOKENIZED);
doc.add("category", "METAL", Store.NO, UN_TOKENIZED);
IndexWriter.add(doc);


And similar for NOISE.

Now, when you search for ROCK you should only get NOISE

I think you can compose your own analyzer that chains some filters
together to handle, say, lowercasing, removing punctuation, etc.

Be sure you use the same analyzer for your query parsing. Note
that you can use PerFieldAnalyzerWrapper to use a different
analyzer for different fields if that's necessary...

Best
Erick

On Mon, Mar 31, 2008 at 9:40 AM, Fiaz Khan <fiaz.khan@ntlworld.com> wrote:

> Thanks Erick....
>
> Ok,..
>
> I have a track called METAL MAN, this has 4 categories assigned to it like
> so:
>
> GUITAR
> ROCK
> ROCK AND ROLL
> METAL
>
> I have another track called NOISE with the following 3 categories:
>
> GUITAR
> ROCK AND ROLL
> METAL
>
> When a user searches using the keyword ROCK, it is finding both when
> really it should only find METAL MAN.
>
> The reason for this is because... when i created the lucene index, i
> concatenated all categories into one field called KEYWORDS like so:
> METAL MAN keywords are: GUITAR, ROCK, ROCK AND ROLL, METAL,
> NOISE keywords are: GUITAR, ROCK AND ROLL, METAL,
>
> So therefore, when tokenized using the standardanalyser, they end up as
> METAL MAN keywords are: GUITAR, ROCK, ROCK, ROLL, METAL,
> NOISE keywords are: GUITAR, ROCK, ROLL, METAL,
> i.e. they are tokenized on the space char words like AND are removed.
>
> What i would like is for the tokenizer to split on the comma and leave
> each keyword as is and not, for example, turn ROCK AND ROLL into ROCK,
> ROLL
>
> My attempts so far were to replace spaces with "another" char, e.g. ~.
> Strip spaces from the keyword. This broke the rest of the search
> engine which doesnt need to work like this.
> Un tokenize, issue with this was that i could no longer partial string
> search as the work ROCK was being picked up in the word FROCK.
>
> Am i going about this the wrong way?
> Caveat is that i am using .net version (2.1). Hopefully it is possible
> with this version.
>
> Hope this explains it a bit better.
>
> On Mon, Mar 31, 2008 at 2:05 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > I'm confused on the use case you're trying to implement,
> >  could you add a bit more explanation?
> >
> >  In particular, do you ever want ROCK to match
> >  ROCK AND ROLL? If you want both, that is
> >  some searches match partial keywords and some
> >  match entire keywords, I recommend you create a
> >  second field in your document KEYWORD_EXACT or
> >  some such and index it UN_TOKENIZED (storage is
> >  optional). Also, you can index the KEYWORD field
> >  as TOKENIZED. Then, when you want to match exactly,
> >  you search against the first field, when you want to search
> >  on any piece, search the second.
> >
> >  If this is completely off base, could you post the use-cases
> >  you're interested in?
> >
> >  Best
> >  Erick
> >
> >
> >  On Mon, Mar 31, 2008 at 5:42 AM, <fiaz.khan@ntlworld.com> wrote:
> >
> >  > Hello
> >  >
> >  > I just joined the list and need some help.
> >  >
> >  > I have a database of music tracks.These tracks have been added to an
> >  > index. They are classified using keywords, so a track can have up to
> >  > 20 keywords assigned to them. I took the keywords and create a
> >  > "keyword" FIELD which was not stored and tokenized. The problem is
> >  > this... if a user searches for a specific keyword such as "ROCK", it
> >  > is finding as well as ROCK tracks, ROCK AND ROLL tracks. I realise
> >  > this is due to the tokenization of the keyword FIELD. My question is
> >  > this, how can i stop the analyser from tokenizing on the space
> >  > character and instead tokenize on one i specifiy. That way, if i
> chose
> >  > to tokenize on a comma, i could add a comma at the end of every
> >  > keyword. Or have i gone about this the wrong way?
> >  >
> >  > Many thanks, any insight will be appreciated.
> >  >
> >  > Fiaz
> >  >
> >  > -----------------------------------------
> >  > Email sent from www.virginmedia.com/email
> >  > Virus-checked <http://www.virginmedia.com/emailVirus-checked> using
> >
> >
> > > McAfee(R) Software and scanned for spam
> >  >
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10321_12578555.1206975292333--

From java-user-return-33404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 31 14:56:53 2008
Return-Path: <java-user-return-33404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18386 invoked from network); 31 Mar 2008 14:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Mar 2008 14:56:52 -0000
Received: (qmail 71105 invoked by uid 500); 31 Mar 2008 14:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71073 invoked by uid 500); 31 Mar 2008 14:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71062 invoked by uid 99); 31 Mar 2008 14:56:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 07:56:45 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Mar 2008 14:56:03 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out4.bezeqint.net (Postfix) with ESMTPA id 9A525B08904
	for <java-user@lucene.apache.org>; Mon, 31 Mar 2008 17:54:13 +0300 (IDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: setPositionIncrement questions
Date: Mon, 31 Mar 2008 17:56:01 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-reply-to: <359a92830803310624r5871080eufa795c4b3b8c7400@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AciTOwcCyv2C4a77ToKk3MkhkgP7EgAATaAA
Message-Id: <20080331145413.9A525B08904@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, here is the thing - I don't necessarily want to get results per
paragraphs - which your code will do just fine for. I want to have my
article titles and sub-headers in the main text field, after I have
duplicated them to give the words they contain more weight. So I will not
want to return higher PositionIncrement for each instance of a field, just
those which I'm interested in (title/headers). Can this be done somehow
without injecting a "magic string", as Chris called it?
Just so I couldn't be clearer, here is pseudo-code of my case:

doc.add("field", "my title", blah, blah) /// I want to create proximity gap
here
doc.add("field", "word1 word2 word3", blah, blah)
doc.add("field", "word4 word5 word6", blah, blah)
doc.add("field", "my sub-header", blah, blah) /// here as well
doc.add("field", "word7 word8 word9", blah, blah)
IndexWriter.add(doc)

>>> You can simply subclass whichever one you choose and override
getPositionIncrementGap

getPositionIncrementGap is a member function of StandardAnalyzer, not
StandardTokenizer. Since my use case is a bit different than what you
initially thought, I think I will wait for your thoughts on this. So far I
have concluded that I will have to perform a check at
StandardTokenizer::next for the "magic string", and if found set the current
Token there to have PositionIncrement of about 500. Please let me know if
there is a better way to do that (ideally without magic...).

You have pretty much understood my use case for position increment 0 - but I
thought this is possible to do with customizing a Scorer? I haven't gotten
that deep into Lucene myself (yet)...
I'm not entirely sure I understand the consequences of storing more than one
Term in the same position. What I understood from your explanation is that
if I store both "b" and "c" at the same position x, Lucene will get to x for
both "b" and "c", meaning this could save me query inflation, or as I first
suggested, auto-apply synonyms. The only question is, I guess, are there any
drawbacks for using this?

Thanks.

Itamar.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Monday, March 31, 2008 4:25 PM
To: java-user@lucene.apache.org
Subject: Re: setPositionIncrement questions

See below...

On Mon, Mar 31, 2008 at 7:02 AM, Itamar Syn-Hershko <itamar@divrei-tora.com>
wrote:

>
> Chris,
>
> Thanks for your input.
>
> Please let me make sure that I get this right: while iterating through 
> the words in a document, I can use my tokenizer to 
> setPositionIncrement(150) on a specific token, what would make it be 
> more distant from the previous token than it should have been. The 
> next token will already have position increment of 1 and therefore 
> will immediately follow that token, with no extra handling. If I get 
> this right, the best way to achieve that is by appending a predefined 
> string like $$$, such that will not occur accidently in my documents, 
> and have my tokenizer set the position increment as well instead of 
> just tokenizing upon it.


Not really. Somewhere in the indexing code is something that behaves like
this...

say you have the following lines...
doc.add("field", "word1 word2 word3", blah, blah) doc.add("field", "word4
word5 word6", blah, blah) doc.add("field", "word7 word8 word9", blah, blah)
IndexWriter.add(doc).

Now say your analyzer returns 100 for getPositionIncrementGap. The words
will have the following offsets
word1 - 0
word2 - 1
word3 - 2
word4 - 103 (perhaps 102, but you get the idea)
word5 - 104
word6 - 105
word7 - 206
word8 - 207
word9 - 208

There's no need to have any special tokens for this to occur.


>
>
> >>>  Lucene will call the "getPositionIncrementGap" method on your
> Analyzer
> to determine how much positionIncreiment to put in between the last 
> token of the first Field and the first token of the second Field -- so 
> you could just pass each paragraph as a seperate Field instance
>
> This sounds good, but is risky, since I will have to concatenate my 
> paragraphs that I DO want to have proximity data in between, and if I 
> forget to, or accidently don't do that this will corrupt 
> proximity-based searches.
> My documents can become very big as well. I guess what I was looking 
> for was a simpler way - say tell Lucene when I do doc.add(new Field) 
> to set the position increment for the last token. The "magic char 
> sequence" will do, but I was wondering if there is a way to do that 
> without ammending my Tokenizer?
>

No, you must deal with your tokenizer, but this is pretty trivial. You can
simply subclass whichever one you choose and override
getPositionIncrementGap.

This seems no riskier that adding your special token since you have to deal
with differentiating between paragraphs you *do* want to be adjacent and
ones you *don't* in that case as well. Or am I missing something?

As to size of documents, somewhere you do need to worry about exceeding a
position of 2^31, but if that's really an issue you have other problems <G>.
Although this somewhat depends upon how far you need the paragraphs to be
apart. Are you going to allow proximity searches of 10,000,000? Or 10?



>
> >>> it means the words appear at the same position
>
> ... And what does this mean exactly? How can this affect standard 
> searches?
> What I might do with this is store stems side-by-side with the 
> original word. From what I've heard so far this is NOT how you do this 
> for English texts - you rather store them in a different field, why is 
> that? I thought if you store them side-by-side you could write a 
> Scorer (or similar) that will return all relevant results for the stem 
> of a given word, boosting words with the same exact syntax more than
others. Any ideas on that?
>

I don't really understand what you're trying to accomplish, a use case would
help. So this may be totally off base....

the words "in the same position" means that if you store, say, blivet and
blort at the same position, and the next token is bonkers, then the
following two matches will be found:
"blivet bonkers" "blort bonkers" (these are as exact pharses). You can
answer much of this by getting a copy of Luke and examining test indexes you
build.

To boost exact matches, you have to do some fancy dancing. For instance, you
could store the original word with a special token (say $) at the end, and
*also* the
stemmed version at the same position. Then you have to mangle your queries
to produce something like (word$^10 OR <stemmed version of word>) for each
search term.

Best
Erick



>
> Itamar.
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Sunday, March 30, 2008 8:56 AM
> To: Lucene Users
> Subject: Re: setPositionIncrement questions
>
>
> : Breaking proximity data has been discussed several times before, and
> : concluded that setPositionIncrement is the way to go. In regards of it:
> :
> : 1. Where should it be called exactly to create the gap properly?
>
> any part of your Analyzer can set the position increment on any token 
> to indicate how far after the previous token it should be.
>
> : 2. Is there a way to call it directly somehow while indexing (e.g. 
> after
> : adding a new paragraph to an existing field) instead of appending 
> $$$
> : for example after the new string I'm indexing, and having to update 
> my
> : tokenizer and filters so they will retain the $$$ chars, indicating 
> the
> : gap request?
>
> if you add multiple Fields with the same name, Lucene will call the 
> "getPositionIncrementGap" method on your Analyzer to determine how 
> much positionIncreiment to put in between the last token of the first 
> Field and the first token of the second Field -- so you could just 
> pass each paragraph as a seperate Field instance .. alternately you 
> can have a single Field instance, and your Analyzer can use whatever 
> mechanims it wants to decide to set the position incriment to 
> something high (a line break, a magic char sequence you put in the 
> string, ... whatever you want)
>
> : 3. What is the recommended value to pass setPositionIncrement to 
> create
> : a reasonable gap, and not risk large documents being indexed 
> improperly
> : (I mean, is there some sort of high-bound for the position value?).
>
> MAX_INT .. pick gaps based on your data and the queries you expect (if 
> you want gaps betwen paragraps, and your paragraphs tend to be under 
> 200 words long, make the gap 500 so "lucene java"~300 can find those 
> words in the same paragram, but can never span multiple paragraphs
>
> : 4. What are the consequences of setting PositionIncrement to 0? Does
> : this mean I can index synonyms or stems aside of the "real" words
> : without risking data corruption?
>
> it means the words appear at the same position - synonyms is a great 
> example of this use case.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


