From lucene-user-return-8517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 07:20:26 2004
Return-Path: <lucene-user-return-8517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82381 invoked from network); 1 Jun 2004 07:20:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 07:20:26 -0000
Received: (qmail 83222 invoked by uid 500); 1 Jun 2004 07:20:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83154 invoked by uid 500); 1 Jun 2004 07:20:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83074 invoked by uid 99); 1 Jun 2004 07:20:09 -0000
Received: from [203.111.30.226] (HELO FIREBIRD) (203.111.30.226)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 00:20:09 -0700
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: a list of matching search term
Date: Tue, 1 Jun 2004 17:20:29 +1000
Message-ID: <20040601172029.A5D72C9F.95365F20@FIREBIRD>
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

Eg. Lets say someone do a search on the terms 'apple orange banana'.

In the search results, is it possible to find out for each hit, which of
those terms did match?

Ie. The document with the highest score has all three words so the matching
terms are all of those words.

A lesser document may only have 'apple' and 'orange' inside it.  So the
matching terms will be 'apple' and 'orange'.


Thanks,

Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8518-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 09:58:57 2004
Return-Path: <lucene-user-return-8518-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89339 invoked from network); 1 Jun 2004 09:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 09:58:57 -0000
Received: (qmail 19903 invoked by uid 500); 1 Jun 2004 09:58:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19734 invoked by uid 500); 1 Jun 2004 09:58:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19720 invoked by uid 99); 1 Jun 2004 09:58:53 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 02:58:53 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id DB7A31117F3
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 11:58:29 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : Lockfile Problem Solved
Date: Tue, 1 Jun 2004 11:58:19 +0200
Message-ID: <000f01c447be$fb3cca40$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <002301c4474a$ddef8370$bb72ead8@POWERPACK>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello

> (Why this happens only with the Tomcat application, and not
> commandline apps, I don't know. =20
>Probably has something to do with JVM properties.)

Tomcat 5++ uses a relative and sometimes uncreated java.io.tmpdir. A =
number of people, including myself ran into this problem with the the =
1.4rc3 and so there was a patch added to Lucene (FSDirectory) last week =
or the week before to handle such cases. You may want to use the code in =
the Lucene HEAD......


Regards,
RBP=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8519-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 10:01:52 2004
Return-Path: <lucene-user-return-8519-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91284 invoked from network); 1 Jun 2004 10:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 10:01:51 -0000
Received: (qmail 24154 invoked by uid 500); 1 Jun 2004 10:01:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24049 invoked by uid 500); 1 Jun 2004 10:01:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24016 invoked by uid 99); 1 Jun 2004 10:01:40 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 03:01:40 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id F2BC0743F72
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 06:01:24 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <BA681B95-B32E-11D8-A78E-000A95CDCC98@media-style.com>
References: <20040531181016.52275.qmail@web90107.mail.scd.yahoo.com> <BA681B95-B32E-11D8-A78E-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A37DEFF0-B3B2-11D8-BFCD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts
Date: Tue, 1 Jun 2004 06:01:23 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On May 31, 2004, at 2:17 PM, Stefan Groschupf wrote:
> Lucene can't help you.

What about using term vectors though?  I've been able to do rudimentary 
document similarity calculations using the new support in Lucene 1.4.  
Search the 'net for more info on term vectors and the formulas needed 
(elementary vector angle calculation, actually).

	Erik

> Am 31.05.2004 um 20:10 schrieb uddam chukmol:
>
>> Hi,
>>
>> I'm a newbie to Lucene and heard that it helps in the information 
>> retrieval process. However, my problem is not really related to the 
>> information retrieval but to the comparison of two texts. I think 
>> Lucene may help resolving it.
>>
>> I would like to have a clue on how to compare two given texts and 
>> finally say how much they are similar.
>>
>> Has anyone had this kind of experience? I will be very grateful to 
>> hear your ideas and your recommendations.
>>
>> Thanks before hand!
>>
>> Uddam CHUKMOL
>>
>>
>>
>> 		
>> ---------------------------------
>> Do you Yahoo!?
>> Friends.  Fun. Try the all-new Yahoo! Messenger
> ---------------------------------------------------------------
> open technology:   http://www.media-style.com
> open source:           http://www.weta-group.net
> open discussion:    http://www.text-mining.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8520-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 10:17:40 2004
Return-Path: <lucene-user-return-8520-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2250 invoked from network); 1 Jun 2004 10:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 10:17:40 -0000
Received: (qmail 49187 invoked by uid 500); 1 Jun 2004 10:17:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49143 invoked by uid 500); 1 Jun 2004 10:17:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49113 invoked by uid 99); 1 Jun 2004 10:17:17 -0000
Received: from [212.122.43.147] (HELO sioux.media-style.com) (212.122.43.147)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 03:17:17 -0700
Received: from www-data by sioux.media-style.com with local (Exim 3.35 #1 (Debian))
	id 1BV6Ae-0004np-00
	for <lucene-user@jakarta.apache.org>; Tue, 01 Jun 2004 12:07:00 +0200
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts
Message-ID: <1086084419.40bc5543ca6d5@www.media-style.com>
Date: Tue, 01 Jun 2004 12:06:59 +0200 (CEST)
From: sg@media-style.com
References: <20040531181016.52275.qmail@web90107.mail.scd.yahoo.com> <BA681B95-B32E-11D8-A78E-000A95CDCC98@media-style.com> <A37DEFF0-B3B2-11D8-BFCD-000393A564E6@ehatchersolutions.com>
In-Reply-To: <A37DEFF0-B3B2-11D8-BFCD-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.6
X-Originating-IP: 192.109.50.40
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Zitiere Erik Hatcher <erik@ehatchersolutions.com>:

> On May 31, 2004, at 2:17 PM, Stefan Groschupf wrote:
> > Lucene can't help you.
> 
> What about using term vectors though?  I've been able to do rudimentary
> 
> document similarity calculations using the new support in Lucene 1.4. 

Ups?! Is it build-in Lucene 1.4?! Cool, I miss that!
So that would be very useful for similarity calculation.
 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8521-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 10:29:59 2004
Return-Path: <lucene-user-return-8521-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9560 invoked from network); 1 Jun 2004 10:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 10:29:59 -0000
Received: (qmail 69963 invoked by uid 500); 1 Jun 2004 10:29:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69849 invoked by uid 500); 1 Jun 2004 10:29:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69746 invoked by uid 99); 1 Jun 2004 10:29:34 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 03:29:34 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 4576874423E
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 06:29:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <1086084419.40bc5543ca6d5@www.media-style.com>
References: <20040531181016.52275.qmail@web90107.mail.scd.yahoo.com> <BA681B95-B32E-11D8-A78E-000A95CDCC98@media-style.com> <A37DEFF0-B3B2-11D8-BFCD-000393A564E6@ehatchersolutions.com> <1086084419.40bc5543ca6d5@www.media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7DF4F85F-B3B6-11D8-BFCD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts
Date: Tue, 1 Jun 2004 06:28:58 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 1, 2004, at 6:06 AM, sg@media-style.com wrote:

> Zitiere Erik Hatcher <erik@ehatchersolutions.com>:
>
>> On May 31, 2004, at 2:17 PM, Stefan Groschupf wrote:
>>> Lucene can't help you.
>>
>> What about using term vectors though?  I've been able to do 
>> rudimentary
>>
>> document similarity calculations using the new support in Lucene 1.4.
>
> Ups?! Is it build-in Lucene 1.4?! Cool, I miss that!
> So that would be very useful for similarity calculation.

Indeed it is!

Look at the new Field constructors and overloaded methods on Field.Text 
and such.  Also look at IndexReader.getTermFreq* methods.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8522-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 10:35:49 2004
Return-Path: <lucene-user-return-8522-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13974 invoked from network); 1 Jun 2004 10:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 10:35:48 -0000
Received: (qmail 78824 invoked by uid 500); 1 Jun 2004 10:35:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78748 invoked by uid 500); 1 Jun 2004 10:35:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78735 invoked by uid 99); 1 Jun 2004 10:35:43 -0000
Received: from [66.218.94.74] (HELO web90103.mail.scd.yahoo.com) (66.218.94.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 03:35:43 -0700
Message-ID: <20040601103541.69284.qmail@web90103.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90103.mail.scd.yahoo.com via HTTP; Tue, 01 Jun 2004 03:35:41 PDT
Date: Tue, 1 Jun 2004 03:35:41 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: Re: similarity of two texts
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <7DF4F85F-B3B6-11D8-BFCD-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1453732719-1086086141=:68302"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1453732719-1086086141=:68302
Content-Type: text/plain; charset=us-ascii

Thanks guys for ur invaluable help and ideas. I'll take a look at Lucene 1.4 and tell you more whether it could deal with my problem.
 

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-1453732719-1086086141=:68302--

From lucene-user-return-8523-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 12:02:51 2004
Return-Path: <lucene-user-return-8523-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60111 invoked from network); 1 Jun 2004 12:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 12:02:51 -0000
Received: (qmail 4155 invoked by uid 500); 1 Jun 2004 12:02:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4115 invoked by uid 500); 1 Jun 2004 12:02:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4084 invoked by uid 99); 1 Jun 2004 12:02:43 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 05:02:42 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HYMPZQ00.UM5 for <lucene-user@jakarta.apache.org>; Tue,
          1 Jun 2004 17:44:14 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Range Query Sombody HELP please
Date: Tue, 1 Jun 2004 17:40:43 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGEGMCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <200405311710.46048.ykingma@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Ype/Erick

  Apologies please

   I sent u guys some code as per mail
   did u recieve it or shall i re send them.

with regards
Karthik

-----Original Message-----
From: Ype Kingma [mailto:ykingma@xs4all.nl]
Sent: Monday, May 31, 2004 8:41 PM
To: lucene-user@jakarta.apache.org
Subject: Re: Range Query Sombody HELP please


Karthik,

On Monday 31 May 2004 13:47, Karthik N S wrote:
> Hey Ype...
>
> 1) I switched Off the Multi search Senerio.
>
> 2) Changing the Field type from Text to Keyword
>     will fail When I search for the the Field type  "filename"
>     so,I still maintained it to be Text

Just make sure the file name is indexed as you show it,
ie. the underscore should be in the indexed term.
The best way to do that is to index the filename as keyword.
Check the output of the analyzer, or use luke to see what is in the index
for the filename field.

> D:\JAVA\lucene\src\demo>java org.lucene.src.indexer.search.SearchFiles
> Search Keyword : b10181_p388
> Source path [ E:/po/aaaa ] : e:/indexer3/b10181
> Query: ['b10181_p388'] in Folder e:/indexer3/b10181/b10181_indx_
>
> Found document(s) that matched : 'b10181_p388' no of hits :'1' in query
> Field :'filename'
> File Name     : B10181_P388
>
>
> 3)On Search for range between 2 file names  B10181_P702   to  B01081_P355
>     still returns me  0 hits  [Included space before the 2nd '+' ]
>
> D:\JAVA\lucene\src\demo>java org.lucene.src.indexer.search.SearchFiles
> Search Keyword : +button +filename:[b10181_p702 TO b10181_p355]

Could you try this:

+button +filename:[b10181_p355 TO b10181_p702]

?
If this does not work, please narrow your problem down to a java test
program
of 10-20 lines, and post the code.

Regards,
Ype


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8524-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 13:09:06 2004
Return-Path: <lucene-user-return-8524-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6431 invoked from network); 1 Jun 2004 13:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 13:09:06 -0000
Received: (qmail 60253 invoked by uid 500); 1 Jun 2004 13:08:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59793 invoked by uid 500); 1 Jun 2004 13:08:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59067 invoked by uid 99); 1 Jun 2004 13:07:54 -0000
Received: from [128.143.103.198] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.198)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 06:07:54 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id D5E7274474D
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 09:07:50 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIGEGMCAAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIGEGMCAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <AED7AE44-B3CC-11D8-82D8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Range Query Sombody HELP please
Date: Tue, 1 Jun 2004 09:07:49 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 1, 2004, at 8:10 AM, Karthik N S wrote:

> Hey Ype/Erick
>
>   Apologies please
>
>    I sent u guys some code as per mail
>    did u recieve it or shall i re send them.

I did not send it.  Please just copy/paste it into an e-mail to the 
list.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8525-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 13:24:04 2004
Return-Path: <lucene-user-return-8525-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23645 invoked from network); 1 Jun 2004 13:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 13:24:03 -0000
Received: (qmail 8917 invoked by uid 500); 1 Jun 2004 13:24:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8830 invoked by uid 500); 1 Jun 2004 13:23:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8817 invoked by uid 99); 1 Jun 2004 13:23:59 -0000
Received: from [217.12.10.66] (HELO web25206.mail.ukl.yahoo.com) (217.12.10.66)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 06:23:59 -0700
Message-ID: <20040601132348.47999.qmail@web25206.mail.ukl.yahoo.com>
Received: from [80.47.205.170] by web25206.mail.ukl.yahoo.com via HTTP; Tue, 01 Jun 2004 14:23:48 BST
Date: Tue, 1 Jun 2004 14:23:48 +0100 (BST)
From: =?iso-8859-1?q?jt=20oob?= <jt2oob@yahoo.co.uk>
Subject: Distributed searches and RAM Dir
To: Lucene-Users-List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I posted this message a few weeks back, its the first time i haven't
had a reply from the list! If anyone could comment on the 3 questions I
raised that would be great.

Original:

# From: jt oob
# Subject: (Distributed) Search system designs
# Date: Fri, 14 May 2004 07:20:08 -0700

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07388.html

Thanks,

jt



	
	
		
____________________________________________________________
Yahoo! Messenger - Communicate instantly..."Ping" 
your friends today! Download Messenger Now 
http://uk.messenger.yahoo.com/download/index.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8526-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 13:24:39 2004
Return-Path: <lucene-user-return-8526-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24013 invoked from network); 1 Jun 2004 13:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 13:24:39 -0000
Received: (qmail 10761 invoked by uid 500); 1 Jun 2004 13:24:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10689 invoked by uid 500); 1 Jun 2004 13:24:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10676 invoked by uid 99); 1 Jun 2004 13:24:34 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 06:24:34 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Tue, 01 Jun 2004 09:24:24 -0400
Message-Id: <s0bc4b48.010@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Tue, 01 Jun 2004 09:24:14 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Eric,

What did you do to calc similarity?  I haven't had time, but was thinking =
of ways to add the ability to get the similarity score (as calculated when =
doing a search) given a term vector (or just a document id).  Any ideas on =
how to approach this would be appreciated.  The scoring in Lucene has =
always been a bit confusing to me, despite looking at the code several =
times, especially once you get into boolean queries, etc.

Thanks,
Grant

>>> erik@ehatchersolutions.com 06/01/04 06:01AM >>>
On May 31, 2004, at 2:17 PM, Stefan Groschupf wrote:
> Lucene can't help you.

What about using term vectors though?  I've been able to do rudimentary=20
document similarity calculations using the new support in Lucene 1.4. =20
Search the 'net for more info on term vectors and the formulas needed=20
(elementary vector angle calculation, actually).

	Erik

> Am 31.05.2004 um 20:10 schrieb uddam chukmol:
>
>> Hi,
>>
>> I'm a newbie to Lucene and heard that it helps in the information=20
>> retrieval process. However, my problem is not really related to the=20
>> information retrieval but to the comparison of two texts. I think=20
>> Lucene may help resolving it.
>>
>> I would like to have a clue on how to compare two given texts and=20
>> finally say how much they are similar.
>>
>> Has anyone had this kind of experience? I will be very grateful to=20
>> hear your ideas and your recommendations.
>>
>> Thanks before hand!
>>
>> Uddam CHUKMOL
>>
>>
>>
>> 	=09
>> ---------------------------------
>> Do you Yahoo!?
>> Friends.  Fun. Try the all-new Yahoo! Messenger
> ---------------------------------------------------------------
> open technology:   http://www.media-style.com=20
> open source:           http://www.weta-group.net=20
> open discussion:    http://www.text-mining.org=20
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8527-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 13:40:13 2004
Return-Path: <lucene-user-return-8527-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36470 invoked from network); 1 Jun 2004 13:40:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 13:40:13 -0000
Received: (qmail 64813 invoked by uid 500); 1 Jun 2004 13:39:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64759 invoked by uid 500); 1 Jun 2004 13:39:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64718 invoked by uid 99); 1 Jun 2004 13:39:49 -0000
Received: from [128.143.103.198] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.198)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 06:39:49 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id B012D744913
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 09:39:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <s0bc4b48.010@gwia201.syr.edu>
References: <s0bc4b48.010@gwia201.syr.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <20EB0665-B3D1-11D8-82D8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts
Date: Tue, 1 Jun 2004 09:39:38 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 1, 2004, at 9:24 AM, Grant Ingersoll wrote:
> Hey Eric,

Eri*K*  :)

> What did you do to calc similarity?

I computed the angle between two vectors.  The vectors are obtained 
from IndexReader.getTermFreqVector(docId, "field").

>   I haven't had time, but was thinking of ways to add the ability to 
> get the similarity score (as calculated when doing a search) given a 
> term vector (or just a document id).

It would be quite compute-intensive to do something like this.  This 
could be done through a custom sort as well, if applying it at the 
scoring level doesn't work.  I haven't given any thought to how this 
could work for scoring or sorting before, but does sound quite 
interesting.

>   Any ideas on how to approach this would be appreciated.  The scoring 
> in Lucene has always been a bit confusing to me, despite looking at 
> the code several times, especially once you get into boolean queries, 
> etc.

No doubt that it is confusing - to me also.  But Explanation is your 
friend.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8528-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 13:50:45 2004
Return-Path: <lucene-user-return-8528-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46773 invoked from network); 1 Jun 2004 13:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 13:50:45 -0000
Received: (qmail 92703 invoked by uid 500); 1 Jun 2004 13:50:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92621 invoked by uid 500); 1 Jun 2004 13:50:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92606 invoked by uid 99); 1 Jun 2004 13:50:42 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 06:50:42 -0700
Message-ID: <20040601135028.46640.qmail@web12705.mail.yahoo.com>
Received: from [195.29.121.154] by web12705.mail.yahoo.com via HTTP; Tue, 01 Jun 2004 06:50:28 PDT
Date: Tue, 1 Jun 2004 06:50:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Distributed searches and RAM Dir
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040601132348.47999.qmail@web25206.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

1) Look up Mark Harwood and Lucene.  He used Lucene to distribute
searches some time ago (1> year ago) and provided some nice sequential
UML diagrams with notes.  I believe I saw something similar from Kevin
Burton, also a long time ago, and of course Nutch system is designed
with a cluster of search servers in mind.

2) I think that depends on your needs.  For everything I used Lucene
for, having a duplicate copy of an index was always sufficient, as I
could always scp it to a live machine in a few seconds or minutes.

3) I would not call it pointless, although with time the FS caches
'warm up' and the search performance may approach that of
RAMDirectory-backed indices.  Converting a FSDirectory based index to a
RAMDirectory one is so easy, that there is no point in trying to
optimize early.  I would keep my code simple and just try using
FSDirectory first, until I start having performance issues.

Otis


--- jt oob <jt2oob@yahoo.co.uk> wrote:
> Hi,
> 
> I posted this message a few weeks back, its the first time i haven't
> had a reply from the list! If anyone could comment on the 3 questions
> I
> raised that would be great.
> 
> Original:
> 
> # From: jt oob
> # Subject: (Distributed) Search system designs
> # Date: Fri, 14 May 2004 07:20:08 -0700
> 
>
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07388.html
> 
> Thanks,
> 
> jt
> 
> 
> 
> 	
> 	
> 		
> ____________________________________________________________
> Yahoo! Messenger - Communicate instantly..."Ping" 
> your friends today! Download Messenger Now 
> http://uk.messenger.yahoo.com/download/index.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8529-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 14:13:27 2004
Return-Path: <lucene-user-return-8529-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62228 invoked from network); 1 Jun 2004 14:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 14:13:27 -0000
Received: (qmail 55185 invoked by uid 500); 1 Jun 2004 14:13:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55102 invoked by uid 500); 1 Jun 2004 14:13:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55086 invoked by uid 99); 1 Jun 2004 14:13:26 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 07:13:26 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Tue, 01 Jun 2004 10:13:13 -0400
Message-Id: <s0bc56b9.057@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Tue, 01 Jun 2004 10:13:09 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorry, about the mispelling, Erik!

Thanks for the insight.

Explain is my friend as an end user, but it, too, is confusing at the code =
level!  At some point I will have time to dig deeper and step through the =
scoring code.

>>> erik@ehatchersolutions.com 06/01/04 09:39AM >>>
On Jun 1, 2004, at 9:24 AM, Grant Ingersoll wrote:
> Hey Eric,

Eri*K*  :)

> What did you do to calc similarity?

I computed the angle between two vectors.  The vectors are obtained=20
from IndexReader.getTermFreqVector(docId, "field").

>   I haven't had time, but was thinking of ways to add the ability to=20
> get the similarity score (as calculated when doing a search) given a=20
> term vector (or just a document id).

It would be quite compute-intensive to do something like this.  This=20
could be done through a custom sort as well, if applying it at the=20
scoring level doesn't work.  I haven't given any thought to how this=20
could work for scoring or sorting before, but does sound quite=20
interesting.

>   Any ideas on how to approach this would be appreciated.  The scoring=20=

> in Lucene has always been a bit confusing to me, despite looking at=20
> the code several times, especially once you get into boolean queries,=20
> etc.

No doubt that it is confusing - to me also.  But Explanation is your=20
friend.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8530-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 14:56:52 2004
Return-Path: <lucene-user-return-8530-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88374 invoked from network); 1 Jun 2004 14:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 14:56:52 -0000
Received: (qmail 52848 invoked by uid 500); 1 Jun 2004 14:56:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52819 invoked by uid 500); 1 Jun 2004 14:56:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52789 invoked by uid 99); 1 Jun 2004 14:56:45 -0000
Received: from [206.190.38.224] (HELO web51706.mail.yahoo.com) (206.190.38.224)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 07:56:45 -0700
Message-ID: <20040601145627.53938.qmail@web51706.mail.yahoo.com>
Received: from [65.88.120.250] by web51706.mail.yahoo.com via HTTP; Tue, 01 Jun 2004 07:56:27 PDT
Date: Tue, 1 Jun 2004 07:56:27 -0700 (PDT)
From: Greg Gershman <greggersh@yahoo.com>
Subject: 1.4 Sort API compatible with 1.3 index?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I looked around a bit, but couldn't find an answer to
this question.  There doesn't seem to be any reason
why it wouldn't, from what I can see, but I just want
to make sure I don't have to rebuild my index to use
the Sort functionality provided in 1.4 with an index
build with 1.3.

Thanks!

Greg Gershman


	
		
__________________________________
Do you Yahoo!?
Friends.  Fun.  Try the all-new Yahoo! Messenger.
http://messenger.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8531-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 15:23:29 2004
Return-Path: <lucene-user-return-8531-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2370 invoked from network); 1 Jun 2004 15:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 15:23:29 -0000
Received: (qmail 45650 invoked by uid 500); 1 Jun 2004 15:23:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45509 invoked by uid 500); 1 Jun 2004 15:23:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45423 invoked by uid 99); 1 Jun 2004 15:23:03 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 08:23:03 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i51FMfLe7872554
	for <lucene-user@jakarta.apache.org>; Tue, 1 Jun 2004 17:22:42 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i51FMfoN8986776
	for <lucene-user@jakarta.apache.org>; Tue, 1 Jun 2004 17:22:41 +0200
To: <lucene-user@jakarta.apache.org>
Subject: optimeze() is not merging into single file?
MIME-Version: 1.0
Message-ID: <OF09F3D9A9.31E8861B-ONC1256EA6.005374E1-C1256EA6.005478E8@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Tue, 1 Jun 2004 17:22:39 +0200
Content-Type: multipart/alternative; boundary="=_alternative 005478C7C1256EA6_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 005478C7C1256EA6_=
Content-Type: text/plain; charset="us-ascii"

I optimize and close the index after that, but don't get just one .cvs 
file as it promised in doc. Instead of it I see something like small 
segments and a couple of big.
This weird behavor seems started since i changed from v 1.4-rc2 to 
1.4-rc3.
Before I got just one cvs segment . Any ideas?
Thanks in advance
J.
--=_alternative 005478C7C1256EA6_=--

From lucene-user-return-8532-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 16:22:04 2004
Return-Path: <lucene-user-return-8532-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45825 invoked from network); 1 Jun 2004 16:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 16:22:04 -0000
Received: (qmail 24107 invoked by uid 500); 1 Jun 2004 16:22:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24054 invoked by uid 500); 1 Jun 2004 16:22:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24035 invoked by uid 99); 1 Jun 2004 16:22:06 -0000
Received: from [64.233.170.202] (HELO mproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 09:22:06 -0700
Received: by mproxy.gmail.com with SMTP id 72so3729443rnf
        for <lucene-user@jakarta.apache.org>; Tue, 01 Jun 2004 09:21:48 -0700 (PDT)
Received: by 10.11.118.80 with SMTP id q80mr452226cwc;
        Tue, 01 Jun 2004 09:21:48 -0700 (PDT)
Message-ID: <55b2c6b904060109217f28fe3b@mail.gmail.com>
Date: Tue, 1 Jun 2004 09:21:48 -0700
From: Andy Goodell <goodell@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: 1.4 Sort API compatible with 1.3 index?
In-Reply-To: <20040601145627.53938.qmail@web51706.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20040601145627.53938.qmail@web51706.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

In my experience, the only barrier to using Sort with a 1.3 index is
that the Sort interface requires sortable fields to be indexed in a
certain way (not analyzed, indexed, and it doesnt matter if stored),
from the javadoc:

document.add (new Field ("byNumber", Integer.toString(x), false, true, false));

so unless you have fields of this prototype already in your index, you
may need to do some degree of re-indexing.  if you do already have the
fields indexed in this fashion, then you should be in good shape,
although i have only done cursory testing of this setup, since i have
migrated my setup entirely to 1.4.

- andy g

On Tue, 1 Jun 2004 07:56:27 -0700 (PDT), Greg Gershman
<greggersh@yahoo.com> wrote:
> 
> I looked around a bit, but couldn't find an answer to
> this question.  There doesn't seem to be any reason
> why it wouldn't, from what I can see, but I just want
> to make sure I don't have to rebuild my index to use
> the Sort functionality provided in 1.4 with an index
> build with 1.3.
> 
> Thanks!
> 
> Greg Gershman
> 
> __________________________________
> Do you Yahoo!?
> Friends.  Fun.  Try the all-new Yahoo! Messenger.
> http://messenger.yahoo.com/
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8533-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 17:24:22 2004
Return-Path: <lucene-user-return-8533-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75755 invoked from network); 1 Jun 2004 17:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 17:24:22 -0000
Received: (qmail 36512 invoked by uid 500); 1 Jun 2004 17:24:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36438 invoked by uid 500); 1 Jun 2004 17:24:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36408 invoked by uid 99); 1 Jun 2004 17:24:25 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 10:24:24 -0700
Received: (qmail 11888 invoked by uid 532); 1 Jun 2004 17:23:29 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.233997 secs); 01 Jun 2004 17:23:29 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 1 Jun 2004 17:23:28 -0000
Message-ID: <40BCBBB1.1030802@tropo.com>
Date: Tue, 01 Jun 2004 10:24:01 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Page ranking
References: <002d01c43cfa$396e0a60$0300a8c0@dargo>
In-Reply-To: <002d01c43cfa$396e0a60$0300a8c0@dargo>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Scott Sayles wrote:

>Is there anyone out there that has page ranking implemented on top of
>Lucene?
>  
>

I recently discovered JUNG which has 2 impls of PageRank:

http://jung.sourceforge.net/api/1.4.1/edu/uci/ics/jung/algorithms/importance/PageRank.html

I did a test of hooking it up to my spider and calculating pagerank of 
all pages in a javadoc tree (experimented with both 
http://jakarta.apache.org/lucene/docs/api/overview-summary.html and 
http://java.sun.com/j2se/1.4.2/docs/api/overview-summary.html). 

The basic prodcedure is
[1] grab all pages to a local cache while building a table of page->page 
links
[2] using the page->page link data, calculate pageranks with JUNG and 
cache this
[3] go thru cache and index the pages ( to a Lucene index), setting each 
documents boost (Document.setBoost()) to the pagerank value

I've just got this going over the weekend. Prelim results are 
disappointing.  Pages like 
http://java.sun.com/j2se/1.4.2/docs/api/deprecated-list.html get a high 
pagerank as all kinds of pages link to it, though when I search javadoc 
I never want that page. It might be this turns out better however - I'm 
not doing any query expansion now, though next pass I'll auto-boost for 
title matches.

I can make available a table of pageranks (URL,pagerank pairs) for these 
runs if people want.

>Just in case anyone may be thinking otherwise, when I say page ranking
>I'm not referring to the ranking of results from searches.  I'm talking
>about something similar to how google computes what page may be more
>relevant or important (often referred to as PageRank) which is effected
>in part by how many other pages reference that page.
>
>I've been through the examples listed here:
>
>http://www.iprcom.com/papers/pagerank/index.html
>
>which provides information from the origianl google paper about page
>ranking.  Running the examples are fairly easy, but the big question I
>have is how can I practically update such data?  
>

I think this is a batch operation, you have to precalc it when indexing 
the entire collection.

>And is there any
>potential integration with Lucene? 
>

My thoughts are Doc.setBoost or just a plain field and store it there 
and use it to sort the results.

> It would seem that one could store
>the computed ranking values in the actual Lucene Document itself, but
>the updates 
>

Unless something has changed, index are "write-only". You really can't 
update an index other than deleting a doc and readding it, and to calc 
pagerank you need all links between pages.

>would be fairly laborious as a few minor changes in rankings
>can produce a large ripple in other related document rankings.  This, of
>course, would be the same issue if the ranking information were stored
>outside of Lucene.  One could potentially store this in a separate
>database and then look up the ranking information for each document
>found and then perform updates as an external asynchronous task.
>
>Anyone have any experience with maintaining page rankings?
>  
>

It might be of interest to see what Nutch does. It doesn't use pagerank 
but it does seem to care about the # of incoming links. I think the key 
file is IndexSegment ( see the src, not the jdoc).

>
>Thanks,
>
>Scott
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8534-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 17:28:44 2004
Return-Path: <lucene-user-return-8534-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78141 invoked from network); 1 Jun 2004 17:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 17:28:44 -0000
Received: (qmail 41290 invoked by uid 500); 1 Jun 2004 17:28:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41073 invoked by uid 500); 1 Jun 2004 17:28:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41058 invoked by uid 99); 1 Jun 2004 17:28:50 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 10:28:50 -0700
Received: (qmail 12278 invoked by uid 532); 1 Jun 2004 17:27:48 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.099002 secs); 01 Jun 2004 17:27:48 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 1 Jun 2004 17:27:48 -0000
Message-ID: <40BCBCB4.5080105@tropo.com>
Date: Tue, 01 Jun 2004 10:28:20 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: about search and update one index simultaneously
References: <1497.128.82.7.71.1084917646.squirrel@mail.cs.odu.edu>
In-Reply-To: <1497.128.82.7.71.1084917646.squirrel@mail.cs.odu.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

xuemei li wrote:

>Hi,all,
>  
>

see this:

http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

>Can we do search and update one index simultaneously?Is someone know sth
>about it? I had done some experiments.Now the search will be blocked
>when the index is being updated.The error in search node is like this:
>    caught a class java.io.IOException
>    with message:Stale NFS file handle
>
>Thanks
>
>Xuemei Li
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8535-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 20:42:01 2004
Return-Path: <lucene-user-return-8535-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97452 invoked from network); 1 Jun 2004 20:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 20:42:01 -0000
Received: (qmail 83107 invoked by uid 500); 1 Jun 2004 20:42:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83055 invoked by uid 500); 1 Jun 2004 20:42:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82963 invoked by uid 99); 1 Jun 2004 20:42:02 -0000
Received: from [66.218.94.72] (HELO web90101.mail.scd.yahoo.com) (66.218.94.72)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 01 Jun 2004 13:42:02 -0700
Message-ID: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90101.mail.scd.yahoo.com via HTTP; Tue, 01 Jun 2004 13:41:00 PDT
Date: Tue, 1 Jun 2004 13:41:00 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: similarity of two texts - another question
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <s0bc4b48.010@gwia201.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1081485929-1086122460=:4525"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1081485929-1086122460=:4525
Content-Type: text/plain; charset=us-ascii

Hi all, 
 
Thanks alot to Erik and others for your invaluable indications.
 
I tried something simple today to calculate the similarity between two texts. I took the first text and indexed it and the second served as the query. The two texts are analysed by the same "Analyser". 
 
Then, at the end, I got the score of similarity between those two texts. 
 
Well, a question again, how does Lucene compute the score between a document and a query?
 
I'll try Erik's recommendation later.
 
Uddam
 
 

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-1081485929-1086122460=:4525--

From lucene-user-return-8536-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 01 20:51:39 2004
Return-Path: <lucene-user-return-8536-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2023 invoked from network); 1 Jun 2004 20:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jun 2004 20:51:38 -0000
Received: (qmail 4740 invoked by uid 500); 1 Jun 2004 20:51:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4602 invoked by uid 500); 1 Jun 2004 20:51:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4589 invoked by uid 99); 1 Jun 2004 20:51:48 -0000
Received: from [128.143.103.198] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.198)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 13:51:48 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 8B1BB748735
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 16:51:28 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com>
References: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7365951C-B40D-11D8-8A05-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts - another question
Date: Tue, 1 Jun 2004 16:51:27 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 1, 2004, at 4:41 PM, uddam chukmol wrote:
> Well, a question again, how does Lucene compute the score between a  
> document and a query?

Using the equation here:

	http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
Similarity.html



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8537-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 00:26:08 2004
Return-Path: <lucene-user-return-8537-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4225 invoked from network); 2 Jun 2004 00:26:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 00:26:08 -0000
Received: (qmail 3405 invoked by uid 500); 2 Jun 2004 00:26:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3372 invoked by uid 500); 2 Jun 2004 00:26:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3358 invoked by uid 99); 2 Jun 2004 00:26:22 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 17:26:22 -0700
Received: (qmail 5535 invoked by uid 532); 2 Jun 2004 00:25:10 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.421793 secs); 02 Jun 2004 00:25:10 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 2 Jun 2004 00:25:10 -0000
Message-ID: <40BD1E88.7070905@tropo.com>
Date: Tue, 01 Jun 2004 17:25:44 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts - another question
References: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com> <7365951C-B40D-11D8-8A05-000393A564E6@ehatchersolutions.com>
In-Reply-To: <7365951C-B40D-11D8-8A05-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Jun 1, 2004, at 4:41 PM, uddam chukmol wrote:
>
>> Well, a question again, how does Lucene compute the score between a  
>> document and a query?
>

And I might add, thus, this approach to similarity gives more weight to 
rare terms that match, which one might want for this kind of similarity 
measure.

>
> Using the equation here:
>
>     http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
> Similarity.html
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8538-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 01:03:19 2004
Return-Path: <lucene-user-return-8538-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16333 invoked from network); 2 Jun 2004 01:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 01:03:19 -0000
Received: (qmail 55752 invoked by uid 500); 2 Jun 2004 01:03:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55684 invoked by uid 500); 2 Jun 2004 01:03:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55669 invoked by uid 99); 2 Jun 2004 01:03:31 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 18:03:31 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 81CC97487BF
	for <lucene-user@jakarta.apache.org>; Tue,  1 Jun 2004 21:03:05 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com>
References: <20040601204100.6358.qmail@web90101.mail.scd.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7365951C-B40D-11D8-8A05-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts - another question
Date: Tue, 1 Jun 2004 16:51:27 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 1, 2004, at 4:41 PM, uddam chukmol wrote:
> Well, a question again, how does Lucene compute the score between a  
> document and a query?

Using the equation here:

	http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
Similarity.html



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8539-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 01:19:13 2004
Return-Path: <lucene-user-return-8539-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24855 invoked from network); 2 Jun 2004 01:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 01:19:13 -0000
Received: (qmail 79210 invoked by uid 500); 2 Jun 2004 01:19:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79141 invoked by uid 500); 2 Jun 2004 01:19:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79113 invoked by uid 99); 2 Jun 2004 01:19:27 -0000
Received: from [203.111.30.226] (HELO FIREBIRD) (203.111.30.226)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 01 Jun 2004 18:19:27 -0700
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: a list of matching search term
Date: Wed, 2 Jun 2004 11:19:34 +1000
Message-ID: <20040602111934.9EBB27B2.6FB8127F@FIREBIRD>
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <20040601172029.A5D72C9F.95365F20@FIREBIRD>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Further to my previous email: The highlighter package should be able to pick
up the matching search terms.  Can some experienced highlighter package
users tell me if I should look down that line?

Thanks a lot.

Anson

-----Original Message-----
From: Anson Lau [mailto:alau@fulfil-net.com]
Sent: Tuesday, June 01, 2004 5:20 PM
To: 'Lucene Users List'
Subject: a list of matching search term

Hi All,

Eg. Lets say someone do a search on the terms 'apple orange banana'.

In the search results, is it possible to find out for each hit, which of
those terms did match?

Ie. The document with the highest score has all three words so the matching
terms are all of those words.

A lesser document may only have 'apple' and 'orange' inside it.  So the
matching terms will be 'apple' and 'orange'.


Thanks,

Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8540-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 09:11:52 2004
Return-Path: <lucene-user-return-8540-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72201 invoked from network); 2 Jun 2004 09:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 09:11:52 -0000
Received: (qmail 70040 invoked by uid 500); 2 Jun 2004 09:12:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69969 invoked by uid 500); 2 Jun 2004 09:12:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69955 invoked by uid 99); 2 Jun 2004 09:12:08 -0000
Received: from [194.159.73.20] (HELO post-21.mail.nl.demon.net) (194.159.73.20)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 02:12:08 -0700
Received: from [212.238.156.229] (helo=[127.0.0.1])
	by post-21.mail.nl.demon.net with esmtp (Exim 3.36 #2)
	id 1BVRV9-0004o5-00; Wed, 02 Jun 2004 08:53:35 +0000
Message-ID: <40BD9579.205@zilverline.org>
Date: Wed, 02 Jun 2004 10:53:13 +0200
From: Zilverline <info@zilverline.org>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Tool for analyzing analyzers
References: <200405280646.i4S6kRU9018574@outmail.freedom2surf.net> <31C669D8-B08E-11D8-8791-000393A564E6@ehatchersolutions.com> <40B71979.80108@zilverline.org> <3126DBEA-B222-11D8-95B3-000393A564E6@ehatchersolutions.com>
In-Reply-To: <3126DBEA-B222-11D8-95B3-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

Thanks for your reply. Have you tried it on a collection yet? I'd love 
the get some of your feedback. I have limited knowledge of the 
underlying capabilities of the lucene library, which is a complement to 
you, since it was extremely easy to integrate lucene. But I'd like to 
get more out of  lucene, such as incremental indexing, to name one. On 
the otherhand I'm interested in general requirements and wishes for the app.

regards,

  Michael Franken

Erik Hatcher wrote:

> On May 28, 2004, at 6:50 AM, Zilverline info wrote:
>
>>> But I'd love to build a Lucene "demo" application that is powerful 
>>> enough to be used as a foundation for folks to use out-of-the-box.
>>
>>
>> That's just what I thought. Here's one: http://www.zilverline.org
>
>
> Michael - zilverline is nicely done!  I downloaded it and dropped it 
> into Tomcat and it came right up.  I did not actually configure a 
> collection yet, but from the docs on the website it looks like you 
> have built something quite nice.  Maybe you could embed a built-in 
> collection of the zilverline docs so something comes up right away and 
> is searchable :)
>
> Nice work.  I'll definitely stay tuned into your project.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8541-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 09:28:53 2004
Return-Path: <lucene-user-return-8541-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80907 invoked from network); 2 Jun 2004 09:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 09:28:53 -0000
Received: (qmail 99907 invoked by uid 500); 2 Jun 2004 09:29:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99704 invoked by uid 500); 2 Jun 2004 09:29:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99683 invoked by uid 99); 2 Jun 2004 09:29:09 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 02:29:08 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 1902E748DBD
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 05:28:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040602111934.9EBB27B2.6FB8127F@FIREBIRD>
References: <20040602111934.9EBB27B2.6FB8127F@FIREBIRD>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <349E3808-B477-11D8-BEE2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: a list of matching search term
Date: Wed, 2 Jun 2004 05:28:28 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 1, 2004, at 9:19 PM, Anson Lau wrote:
> Further to my previous email: The highlighter package should be able 
> to pick
> up the matching search terms.  Can some experienced highlighter package
> users tell me if I should look down that line?

Yes, Highlighter (available in the sandbox) picks out matching terms.  
If you used a custom Formatter with Highlighter, you could pick out 
matching terms and have a list of them.  This would not be something 
you do for every hit, though, as it would take a little time to do for 
each document.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8542-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 10:12:41 2004
Return-Path: <lucene-user-return-8542-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6538 invoked from network); 2 Jun 2004 10:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 10:12:41 -0000
Received: (qmail 60724 invoked by uid 500); 2 Jun 2004 10:12:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60615 invoked by uid 500); 2 Jun 2004 10:12:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60601 invoked by uid 99); 2 Jun 2004 10:12:56 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 03:12:56 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HYOFK200.O10 for <lucene-user@jakarta.apache.org>; Wed,
          2 Jun 2004 15:54:02 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Range Query Sombody HELP please
Date: Wed, 2 Jun 2004 15:50:32 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOEHACAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <200405311710.46048.ykingma@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hey Ype/Erick

Thx in advance in helping me for the Range of Queries.
Finally I was able to trace the wrong process within my code and closed
them.

I still have 3 small Questions.

1)While creating the Range Query Is it possible for Lucene to do somthing
similar..

     +(button AND shirt) +filename:[b10181_p100 TO b10181_p200]

     [Do you think this will work]  It's not on returning hits , but it does
return hits with either one of them  "Shirt" or "button" Only.

2)When the indexer start indexing does it do according to alphabetic order
or is it some other way...

3)The Field Type  "Keyword"  is not accepting name of Files as it indexes
   [ Try indexing filenames and then do a search on them ,the hits will
return u 0 defnitly,  lucene1.3-final version ]

     doc.add(Field.Text("filename",file.getName()))
          < --------------------  Will return Hits

    doc.add(Field.Keyword("filename",file.getName()))
<--------------------  Will Not return Hits


 why???



with regards
Karthik


On Monday 31 May 2004 13:47, Karthik N S wrote:
> Hey Ype...
>
> 1) I switched Off the Multi search Senerio.
>
> 2) Changing the Field type from Text to Keyword
>     will fail When I search for the the Field type  "filename"
>     so,I still maintained it to be Text

Just make sure the file name is indexed as you show it,
ie. the underscore should be in the indexed term.
The best way to do that is to index the filename as keyword.
Check the output of the analyzer, or use luke to see what is in the index
for the filename field.

> D:\JAVA\lucene\src\demo>java org.lucene.src.indexer.search.SearchFiles
> Search Keyword : b10181_p388
> Source path [ E:/po/aaaa ] : e:/indexer3/b10181
> Query: ['b10181_p388'] in Folder e:/indexer3/b10181/b10181_indx_
>
> Found document(s) that matched : 'b10181_p388' no of hits :'1' in query
> Field :'filename'
> File Name     : B10181_P388
>
>
> 3)On Search for range between 2 file names  B10181_P702   to  B01081_P355
>     still returns me  0 hits  [Included space before the 2nd '+' ]
>
> D:\JAVA\lucene\src\demo>java org.lucene.src.indexer.search.SearchFiles
> Search Keyword : +button +filename:[b10181_p702 TO b10181_p355]

Could you try this:

+button +filename:[b10181_p355 TO b10181_p702]

?
If this does not work, please narrow your problem down to a java test
program
of 10-20 lines, and post the code.

Regards,
Ype


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8543-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 11:53:37 2004
Return-Path: <lucene-user-return-8543-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64679 invoked from network); 2 Jun 2004 11:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 11:53:37 -0000
Received: (qmail 24507 invoked by uid 500); 2 Jun 2004 11:53:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24425 invoked by uid 500); 2 Jun 2004 11:53:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24396 invoked by uid 99); 2 Jun 2004 11:53:31 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 04:53:31 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i52BrLCH10264640
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 13:53:21 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i52BrL0O7086080
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 13:53:21 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: optimize() is not merging into single file?  !!!!!!
MIME-Version: 1.0
Message-ID: <OF9402B63C.2C093EEA-ONC1256EA7.003FC490-C1256EA7.00414EB5@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 2 Jun 2004 13:53:19 +0200
Content-Type: multipart/alternative; boundary="=_alternative 00414E94C1256EA7_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 00414E94C1256EA7_=
Content-Type: text/plain; charset="us-ascii"

I rechecked  the results. Here they are:

IndexWriter compiled with v.1.4-rc2 generates after optimization
_36d.cfs    3779 kb

IndexWriter compiled with v.1.4-rc3 generates after optimization

_36d.cfs   3778 kb
_36c.cfs    31 kb
_35z.cfs    14 kb
_35o.cfs   14  kb
.....
....etc.

I both cases segment file contains _36d.cfs

Looks like new version just "foget" to clean up






Iouli Golovatyi/X/GP/Novartis@PH
01.06.2004 17:22
Please respond to "Lucene Users List"

 
        To:     <lucene-user@jakarta.apache.org>
        cc: 
        Subject:        optimeze() is not merging into single file?
        Category: 



I optimize and close the index after that, but don't get just one .cvs 
file as it promised in doc. Instead of it I see something like small 
segments and a couple of big.
This weird behavor seems started since i changed from v 1.4-rc2 to 
1.4-rc3.
Before I got just one cvs segment . Any ideas?
Thanks in advance
J.


--=_alternative 00414E94C1256EA7_=--

From lucene-user-return-8544-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 12:46:26 2004
Return-Path: <lucene-user-return-8544-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92452 invoked from network); 2 Jun 2004 12:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 12:46:26 -0000
Received: (qmail 5504 invoked by uid 500); 2 Jun 2004 12:46:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5359 invoked by uid 500); 2 Jun 2004 12:46:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5345 invoked by uid 99); 2 Jun 2004 12:46:22 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 05:46:22 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 3F95774AD14
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 08:46:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIOEHACAAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIOEHACAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D395E552-B492-11D8-BEE2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Range Query Sombody HELP please
Date: Wed, 2 Jun 2004 08:46:11 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 2, 2004, at 6:20 AM, Karthik N S wrote:
>
> Hey Ype/Erick

If you're gonna ask for help, the least ya could do is spell my name 
correctly :)

> I still have 3 small Questions.
>
> 1)While creating the Range Query Is it possible for Lucene to do 
> somthing
> similar..
>
>      +(button AND shirt) +filename:[b10181_p100 TO b10181_p200]
>
>      [Do you think this will work]  It's not on returning hits , but 
> it does
> return hits with either one of them  "Shirt" or "button" Only.

My guess is you have documents none of your documents in that range 
have button AND shirt in them.

> 2)When the indexer start indexing does it do according to alphabetic 
> order
> or is it some other way...

I don't understand the question, sorry.  Terms in the index are ordered 
lexicographically, if that is what you mean.

> 3)The Field Type  "Keyword"  is not accepting name of Files as it 
> indexes
>    [ Try indexing filenames and then do a search on them ,the hits will
> return u 0 defnitly,  lucene1.3-final version ]
>
>      doc.add(Field.Text("filename",file.getName()))
>           < --------------------  Will return Hits
>
>     doc.add(Field.Keyword("filename",file.getName()))
> <--------------------  Will Not return Hits
>
>
>  why???

Because of your analyzer.  Try indexing as a Keyword and search using a 
TermQuery.  Don't use QueryParser at first - it gets in the way of 
understanding what is really going on.  For fun, look at the .toString 
of the Query generated by QueryParser if you like.  Look at the 
AnalysisParalysis page on the wiki for more details.  Read my java.net 
articles to get a better understanding.   The short answer is that it 
is analysis that is bogging you down here.

You need to decide how to index file names on how you plan on querying 
for them.  We cannot answer this for you.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8545-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 12:52:43 2004
Return-Path: <lucene-user-return-8545-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95245 invoked from network); 2 Jun 2004 12:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 12:52:43 -0000
Received: (qmail 17083 invoked by uid 500); 2 Jun 2004 12:52:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16971 invoked by uid 500); 2 Jun 2004 12:52:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16948 invoked by uid 99); 2 Jun 2004 12:52:38 -0000
Received: from [213.228.0.79] (HELO postfix1-c.free.fr) (213.228.0.79)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 05:52:37 -0700
Received: from postfix3-2.free.fr (postfix3-2.free.fr [213.228.0.169])
	by postfix1-c.free.fr (Postfix) with ESMTP id 8C9C373FABC
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 14:52:25 +0200 (CEST)
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix3-2.free.fr (Postfix) with ESMTP id 3CB79C0C2
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 14:51:55 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : optimize() is not merging into single file?  !!!!!!
Date: Wed, 2 Jun 2004 14:51:45 +0200
Message-ID: <000501c448a0$5fcb4220$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <OF9402B63C.2C093EEA-ONC1256EA7.003FC490-C1256EA7.00414EB5@EU.novartis.net>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I am running a two-week old version of Lucene from the CVS HEAD and =
seeing the same behavior.....?

Regards,
RBP=20

> -----Message d'origine-----
> De : iouli.golovatyi@group.novartis.com
> [mailto:iouli.golovatyi@group.novartis.com]
> Envoy=C3=A9 : mercredi 2 juin 2004 13:53
> =C3=80 : Lucene Users List
> Objet : Re: optimize() is not merging into single file? !!!!!!
>=20
> I rechecked  the results. Here they are:
>=20
> IndexWriter compiled with v.1.4-rc2 generates after
> optimization
> _36d.cfs    3779 kb
>=20
> IndexWriter compiled with v.1.4-rc3 generates after
> optimization
>=20
> _36d.cfs   3778 kb
> _36c.cfs    31 kb
> _35z.cfs    14 kb
> _35o.cfs   14  kb
> .....
> ....etc.
>=20
> I both cases segment file contains _36d.cfs
>=20
> Looks like new version just "foget" to clean up
>=20
>=20
>=20
>=20
>=20
>=20
> Iouli Golovatyi/X/GP/Novartis@PH
> 01.06.2004 17:22
> Please respond to "Lucene Users List"
>=20
>=20
>         To:     <lucene-user@jakarta.apache.org>
>         cc:
>         Subject:        optimeze() is not merging into single
> file?
>         Category:
>=20
>=20
>=20
> I optimize and close the index after that, but don't get just
> one .cvs
> file as it promised in doc. Instead of it I see something like
> small
> segments and a couple of big.
> This weird behavor seems started since i changed from v 1.4-rc2
> to
> 1.4-rc3.
> Before I got just one cvs segment . Any ideas?
> Thanks in advance
> J.




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8546-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 13:08:22 2004
Return-Path: <lucene-user-return-8546-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4298 invoked from network); 2 Jun 2004 13:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 13:08:22 -0000
Received: (qmail 46707 invoked by uid 500); 2 Jun 2004 13:08:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46566 invoked by uid 500); 2 Jun 2004 13:08:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46546 invoked by uid 99); 2 Jun 2004 13:08:18 -0000
Received: from [160.218.43.220] (HELO smtp.etmail.cz) (160.218.43.220)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 06:08:18 -0700
Received: from COM (gprs40-5.eurotel.cz [160.218.40.5])
	by smtp.etmail.cz (Postfix) with SMTP id BFD0E27A93
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 15:07:40 +0200 (CEST)
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Tool for analyzing analyzers
From: "Leo Galambos" <lgs@centrum.cz>
Date: Wed, 2 Jun 2004 15:09:00 0200
Mime-Version: 1.0
X-Mailer: MultiMail(c) Deluxe 1998-2001 2.61, Palm, Inc.
X-Sender: lgs@centrum.cz
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 8bit
Message-Id: <20040602130740.BFD0E27A93@smtp.etmail.cz>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Zilverline <info@zilverline.org> wrote:
__________

>get more out of  lucene, such as incremental indexing, to name one. On 

Hello,

as far as I know, the incremental indexing
could be a real bottleneck if you implemented
your system without some knowledge
about Lucene internals.

The respective test is here:
http://www.egothor.org/twiki/bin/view/Know/LuceneIssue

Cheers,
Leo



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8547-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 15:11:34 2004
Return-Path: <lucene-user-return-8547-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8056 invoked from network); 2 Jun 2004 15:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 15:11:34 -0000
Received: (qmail 78161 invoked by uid 500); 2 Jun 2004 15:10:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77574 invoked by uid 500); 2 Jun 2004 15:10:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77247 invoked by uid 99); 2 Jun 2004 15:10:28 -0000
Received: from [66.218.94.80] (HELO web90109.mail.scd.yahoo.com) (66.218.94.80)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 08:10:27 -0700
Message-ID: <20040602151019.58532.qmail@web90109.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90109.mail.scd.yahoo.com via HTTP; Wed, 02 Jun 2004 08:10:19 PDT
Date: Wed, 2 Jun 2004 08:10:19 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: indexing french text with Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <s0bc56b9.057@gwia201.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-69846470-1086189019=:58530"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-69846470-1086189019=:58530
Content-Type: text/plain; charset=us-ascii

Hi all, 
 
Lucene is a very powerful tool for english document indexing. I really wonder if it's that powerful to index french text.
 
In fact, I need to compute the similarity between 2 french texts. So, if somebody has already had the experience of indexing french text, your ideas and recommendation are mostly welcome. 
 
Thanks before hand.
 
Uddam
 
 

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-69846470-1086189019=:58530--

From lucene-user-return-8548-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 17:20:53 2004
Return-Path: <lucene-user-return-8548-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97790 invoked from network); 2 Jun 2004 17:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 17:20:53 -0000
Received: (qmail 43092 invoked by uid 500); 2 Jun 2004 17:20:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43043 invoked by uid 500); 2 Jun 2004 17:20:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43005 invoked by uid 99); 2 Jun 2004 17:20:52 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 10:20:52 -0700
Received: from h-66-167-147-50.mclnva23.dynamic.covad.net ([66.167.147.50] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BVZPp-0007ty-00
	for lucene-user@jakarta.apache.org; Wed, 02 Jun 2004 13:20:37 -0400
Message-ID: <00f601c448c5$ec1d5900$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <s0bc4b48.010@gwia201.syr.edu> <20EB0665-B3D1-11D8-82D8-000393A564E6@ehatchersolutions.com>
Subject: Re: similarity of two texts
Date: Wed, 2 Jun 2004 13:20:37 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

Could you expand on this just a wee bit, perhaps with an example of how to
compute this vector angle?

TIA,

Terry

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, June 01, 2004 9:39 AM
Subject: Re: similarity of two texts


> On Jun 1, 2004, at 9:24 AM, Grant Ingersoll wrote:
> > Hey Eric,
>
> Eri*K*  :)
>
> > What did you do to calc similarity?
>
> I computed the angle between two vectors.  The vectors are obtained
> from IndexReader.getTermFreqVector(docId, "field").
>
> >   I haven't had time, but was thinking of ways to add the ability to
> > get the similarity score (as calculated when doing a search) given a
> > term vector (or just a document id).
>
> It would be quite compute-intensive to do something like this.  This
> could be done through a custom sort as well, if applying it at the
> scoring level doesn't work.  I haven't given any thought to how this
> could work for scoring or sorting before, but does sound quite
> interesting.
>
> >   Any ideas on how to approach this would be appreciated.  The scoring
> > in Lucene has always been a bit confusing to me, despite looking at
> > the code several times, especially once you get into boolean queries,
> > etc.
>
> No doubt that it is confusing - to me also.  But Explanation is your
> friend.
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8549-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 17:22:40 2004
Return-Path: <lucene-user-return-8549-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98569 invoked from network); 2 Jun 2004 17:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 17:22:40 -0000
Received: (qmail 48599 invoked by uid 500); 2 Jun 2004 17:22:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48566 invoked by uid 500); 2 Jun 2004 17:22:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48552 invoked by uid 99); 2 Jun 2004 17:22:42 -0000
Received: from [64.233.170.199] (HELO mproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 10:22:42 -0700
Received: by mproxy.gmail.com with SMTP id 72so293977rnf
        for <lucene-user@jakarta.apache.org>; Wed, 02 Jun 2004 10:22:23 -0700 (PDT)
Received: by 10.11.118.76 with SMTP id q76mr419475cwc;
        Wed, 02 Jun 2004 10:22:22 -0700 (PDT)
Message-ID: <55b2c6b90406021022471f890b@mail.gmail.com>
Date: Wed, 2 Jun 2004 10:22:22 -0700
From: Andy Goodell <goodell@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Can I prevent Sort fields from influencing score?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have been using the new lucene 1.4 SortField implementation wih some
custom fields added to old indexes so that the results can be sorted
by them.  My problem here is that some of the String fields that I add
to the index come up in the search terms, so my results in sort by
score order are different.  Here's an example:

I added the field AUTHOR_SORTABLE to most of the documents in the
index.  But if one of the AUTHOR_SORTABLE field in a document is set
to "andy", and i search for "andy", this document gets a very
different score than it used to.

Since my added fields aren't set in stone, I'm interested in a general
solution, where all fields containing the text "SORTABLE" in the name
aren't considered for matches, only for sorting.  Could I do this by
overriding Similarity?  I tried doing this to set the lengthNorm() for
each of my sortable fields to 0, but it hasnt worked yet.  Is there a
different way to store the sortable fields that will prevent this?

Any help would be greatly appreciated.

- andy g

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8550-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 17:39:51 2004
Return-Path: <lucene-user-return-8550-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8594 invoked from network); 2 Jun 2004 17:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 17:39:51 -0000
Received: (qmail 91908 invoked by uid 500); 2 Jun 2004 17:39:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91887 invoked by uid 500); 2 Jun 2004 17:39:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91872 invoked by uid 99); 2 Jun 2004 17:39:54 -0000
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 10:39:54 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i52HdKH16613
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 18:39:28 +0100
Message-ID: <40BE10C8.5070307@tropo.com>
Date: Wed, 02 Jun 2004 10:39:20 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts
References: <s0bc4b48.010@gwia201.syr.edu> <20EB0665-B3D1-11D8-82D8-000393A564E6@ehatchersolutions.com> <00f601c448c5$ec1d5900$6501a8c0@POWERPACK>
In-Reply-To: <00f601c448c5$ec1d5900$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Terry Steichen wrote:

> Erik,
> 
> Could you expand on this just a wee bit, perhaps with an example of how to
> compute this vector angle?

I'm tempted to write the code to see how it works, but FYI this doc 
seems to nicely explain the concepts:

http://www.la2600.org/talks/files/20040102/Vector_Space_Search_Engine_Theory.pdf
> 
> TIA,
> 
> Terry
> 
> ----- Original Message ----- 
> From: "Erik Hatcher" <erik@ehatchersolutions.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, June 01, 2004 9:39 AM
> Subject: Re: similarity of two texts
> 
> 
> 
>>On Jun 1, 2004, at 9:24 AM, Grant Ingersoll wrote:
>>
>>>Hey Eric,
>>
>>Eri*K*  :)
>>
>>
>>>What did you do to calc similarity?
>>
>>I computed the angle between two vectors.  The vectors are obtained
>>from IndexReader.getTermFreqVector(docId, "field").
>>
>>
>>>  I haven't had time, but was thinking of ways to add the ability to
>>>get the similarity score (as calculated when doing a search) given a
>>>term vector (or just a document id).
>>
>>It would be quite compute-intensive to do something like this.  This
>>could be done through a custom sort as well, if applying it at the
>>scoring level doesn't work.  I haven't given any thought to how this
>>could work for scoring or sorting before, but does sound quite
>>interesting.
>>
>>
>>>  Any ideas on how to approach this would be appreciated.  The scoring
>>>in Lucene has always been a bit confusing to me, despite looking at
>>>the code several times, especially once you get into boolean queries,
>>>etc.
>>
>>No doubt that it is confusing - to me also.  But Explanation is your
>>friend.
>>
>>Erik
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8551-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 18:05:42 2004
Return-Path: <lucene-user-return-8551-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23450 invoked from network); 2 Jun 2004 18:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 18:05:42 -0000
Received: (qmail 51267 invoked by uid 500); 2 Jun 2004 18:05:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51223 invoked by uid 500); 2 Jun 2004 18:05:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51210 invoked by uid 99); 2 Jun 2004 18:05:46 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 11:05:46 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 5661074B6A3
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 14:05:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40BE10C8.5070307@tropo.com>
References: <s0bc4b48.010@gwia201.syr.edu> <20EB0665-B3D1-11D8-82D8-000393A564E6@ehatchersolutions.com> <00f601c448c5$ec1d5900$6501a8c0@POWERPACK> <40BE10C8.5070307@tropo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6A59B4E1-B4BF-11D8-87A7-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: similarity of two texts
Date: Wed, 2 Jun 2004 14:05:22 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 2, 2004, at 1:39 PM, David Spencer wrote:
>> Erik,
>> Could you expand on this just a wee bit, perhaps with an example of  
>> how to
>> compute this vector angle?
>
> I'm tempted to write the code to see how it works, but FYI this doc  
> seems to nicely explain the concepts:
>
> http://www.la2600.org/talks/files/20040102/ 
> Vector_Space_Search_Engine_Theory.pdf

This is, in fact, one of the documents I referenced to get a grasp on  
how to do it.

My code has some built-in assumptions on parts of the equation that get  
short-circuited (there is only 1 of each term in my case, for example)  
so it would not be a general-purpose algorithm.  It's basically just  
using the TermFreqVector information and plugging it into an equation  
like found in that PDF - nothing more than that actually.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8552-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 18:23:13 2004
Return-Path: <lucene-user-return-8552-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31633 invoked from network); 2 Jun 2004 18:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 18:23:12 -0000
Received: (qmail 83039 invoked by uid 500); 2 Jun 2004 18:23:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82969 invoked by uid 500); 2 Jun 2004 18:23:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82903 invoked by uid 99); 2 Jun 2004 18:23:09 -0000
Received: from [205.142.197.62] (HELO n6mcgw16.cchmc.org) (205.142.197.62)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 11:23:09 -0700
Received: from DOMSVC03-MTA by n6mcgw16.cchmc.org
	with Novell_GroupWise; Wed, 02 Jun 2004 14:22:46 -0400
Message-Id: <s0bde2b6.008@n6mcgw16.cchmc.org>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Wed, 02 Jun 2004 14:22:23 -0400
From: "Gerard Sychay" <Gerard.Sychay@cchmc.org>
To: <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts - another question
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hmm, the term vector does not have to consist of only term frequencies,
does it? To give weight to rare terms, could you create a term vector of
(TF*IDF) values for each term?  Then, a distance function would measure
how many terms two vectors have in common, giving weight to how many
rare terms two vectors have in common.

>>> David Spencer <dave-lucene-user@tropo.com> 06/01/04 08:25PM >>>
Erik Hatcher wrote:

> On Jun 1, 2004, at 4:41 PM, uddam chukmol wrote:
>
>> Well, a question again, how does Lucene compute the score between a 

>> document and a query?
>

And I might add, thus, this approach to similarity gives more weight to

rare terms that match, which one might want for this kind of similarity

measure.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8553-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 18:37:48 2004
Return-Path: <lucene-user-return-8553-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38136 invoked from network); 2 Jun 2004 18:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 18:37:48 -0000
Received: (qmail 11122 invoked by uid 500); 2 Jun 2004 18:37:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11073 invoked by uid 500); 2 Jun 2004 18:37:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11035 invoked by uid 99); 2 Jun 2004 18:37:38 -0000
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 11:37:38 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i52IbDH23829
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 19:37:20 +0100
Message-ID: <40BE1E59.4040308@tropo.com>
Date: Wed, 02 Jun 2004 11:37:13 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity of two texts - another question
References: <s0bde2b6.008@n6mcgw16.cchmc.org>
In-Reply-To: <s0bde2b6.008@n6mcgw16.cchmc.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Gerard Sychay wrote:

> Hmm, the term vector does not have to consist of only term frequencies,
> does it? To give weight to rare terms, could you create a term vector of
> (TF*IDF) values for each term?  Then, a distance function would measure
> how many terms two vectors have in common, giving weight to how many
> rare terms two vectors have in common.

Yeah, but if you're gonna do that why not just form a query with all 
words in the source document, and let the Lucene engine do the idf/tf 
calculations? I've done this and it seems to work fine.

Here's code I've used. It could be done better by avoiding QueryParser, 
and odds are it could hit that exception for too many clauses in a 
boolean expression unless you configure lucene from its default, but 
this is the idea. "srch" is the entire body of the source document.


     public static Query formSimilarQuery( String srch, Analyzer a)
		throws org.apache.lucene.queryParser.ParseException, IOException
	{
		StringBuffer sb = new StringBuffer();
		TokenStream ts = a.tokenStream( "foo", new StringReader( srch));
		org.apache.lucene.analysis.Token t;		
		while ( (t = ts.next()) != null)
		{
			sb.append( t.termText() + " ");
		}
		return QueryParser.parse( sb.toString(),DFields.CONTENTS, a);
	}


> 
> 
>>>>David Spencer <dave-lucene-user@tropo.com> 06/01/04 08:25PM >>>
> 
> Erik Hatcher wrote:
> 
> 
>>On Jun 1, 2004, at 4:41 PM, uddam chukmol wrote:
>>
>>
>>>Well, a question again, how does Lucene compute the score between a 
> 
> 
>>>document and a query?
>>
> 
> And I might add, thus, this approach to similarity gives more weight to
> 
> rare terms that match, which one might want for this kind of similarity
> 
> measure.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8555-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 19:21:33 2004
Return-Path: <lucene-user-return-8555-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21476 invoked from network); 2 Jun 2004 19:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 19:21:33 -0000
Received: (qmail 5706 invoked by uid 500); 2 Jun 2004 19:21:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5680 invoked by uid 500); 2 Jun 2004 19:21:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5664 invoked by uid 99); 2 Jun 2004 19:21:43 -0000
Received: from [66.179.38.26] (HELO hamhock.hoovers.com) (66.179.38.26)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 12:21:43 -0700
Received: from exchange.hoovers.com (gamma.hoovers.com [66.179.38.8])
	by hamhock.hoovers.com (HamHock-OUTBOUND) with ESMTP id 43126143E0C
	for <lucene-user@jakarta.apache.org>; Wed,  2 Jun 2004 14:21:26 -0500 (CDT)
Received: by gamma.hoovers.com with Internet Mail Service (5.5.2657.72)
	id <L5WVA96N>; Wed, 2 Jun 2004 14:21:25 -0500
Message-ID: <4810C017B52BD4118EEA00B0D020B0ED14085669@gamma.hoovers.com>
From: Tim Jones <TJones@hoovers.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: Re: Can I prevent Sort fields from influencing score?
Date: Wed, 2 Jun 2004 14:21:24 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This seems like it would be determined by how you generate your query - if
your query doesn't search in the sorted fields, they shouldn't affect the
scoring of your documents ...


> -----Original Message-----
> From: Andy Goodell [mailto:goodell@gmail.com]
> Sent: Wednesday, June 02, 2004 12:22 PM
> To: lucene-user@jakarta.apache.org
> Subject: Can I prevent Sort fields from influencing score?
> 
> 
> I have been using the new lucene 1.4 SortField implementation wih some
> custom fields added to old indexes so that the results can be sorted
> by them.  My problem here is that some of the String fields that I add
> to the index come up in the search terms, so my results in sort by
> score order are different.  Here's an example:
> 
> I added the field AUTHOR_SORTABLE to most of the documents in the
> index.  But if one of the AUTHOR_SORTABLE field in a document is set
> to "andy", and i search for "andy", this document gets a very
> different score than it used to.
> 
> Since my added fields aren't set in stone, I'm interested in a general
> solution, where all fields containing the text "SORTABLE" in the name
> aren't considered for matches, only for sorting.  Could I do this by
> overriding Similarity?  I tried doing this to set the lengthNorm() for
> each of my sortable fields to 0, but it hasnt worked yet.  Is there a
> different way to store the sortable fields that will prevent this?
> 
> Any help would be greatly appreciated.
> 
> - andy g
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8554-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 19:23:39 2004
Return-Path: <lucene-user-return-8554-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23236 invoked from network); 2 Jun 2004 19:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 19:23:39 -0000
Received: (qmail 44989 invoked by uid 500); 2 Jun 2004 18:55:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44753 invoked by uid 500); 2 Jun 2004 18:55:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44740 invoked by uid 99); 2 Jun 2004 18:55:52 -0000
Received: from [194.109.24.5] (HELO smtp-out4.xs4all.nl) (194.109.24.5)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 11:55:52 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-out4.xs4all.nl (8.12.10/8.12.10) with ESMTP id i52ItZ5Z064452
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 20:55:35 +0200 (CEST)
From: Ype Kingma <ykingma@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Range Query Sombody HELP please
Date: Wed, 2 Jun 2004 20:55:34 +0200
User-Agent: KMail/1.5.4
References: <LOEGLEEGOAKBOLAJCCKIOEHACAAA.karthik@controlnet.co.in> <D395E552-B492-11D8-BEE2-000393A564E6@ehatchersolutions.com>
In-Reply-To: <D395E552-B492-11D8-BEE2-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200406022055.34752.ykingma@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 02 June 2004 14:46, Erik Hatcher wrote:
> On Jun 2, 2004, at 6:20 AM, Karthik N S wrote:
...
> > I still have 3 small Questions.
> >
> > 1)While creating the Range Query Is it possible for Lucene to do
> > somthing
> > similar..
> >
> >      +(button AND shirt) +filename:[b10181_p100 TO b10181_p200]
> >
> >      [Do you think this will work]  It's not on returning hits , but
> > it does
> > return hits with either one of them  "Shirt" or "button" Only.
>
> My guess is you have documents none of your documents in that range
> have button AND shirt in them.

You can also try this:

+button +shirt +filename:[b10181_p100 TO b10181_p200]

I never got to completely understand the way the query parser deals with
AND and OR, so I prefer to avoid them.

Regards,
Ype


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8556-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 20:30:42 2004
Return-Path: <lucene-user-return-8556-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64584 invoked from network); 2 Jun 2004 20:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 20:30:42 -0000
Received: (qmail 51798 invoked by uid 500); 2 Jun 2004 20:30:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51720 invoked by uid 500); 2 Jun 2004 20:30:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51705 invoked by uid 99); 2 Jun 2004 20:30:50 -0000
Received: from [64.233.170.203] (HELO mproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 13:30:50 -0700
Received: by mproxy.gmail.com with SMTP id 72so345747rnf
        for <lucene-user@jakarta.apache.org>; Wed, 02 Jun 2004 13:30:27 -0700 (PDT)
Received: by 10.11.118.56 with SMTP id q56mr424157cwc;
        Wed, 02 Jun 2004 13:30:27 -0700 (PDT)
Message-ID: <55b2c6b9040602133033d659ea@mail.gmail.com>
Date: Wed, 2 Jun 2004 13:30:27 -0700
From: Andy Goodell <goodell@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Can I prevent Sort fields from influencing score?
In-Reply-To: <4810C017B52BD4118EEA00B0D020B0ED14085669@gamma.hoovers.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <4810C017B52BD4118EEA00B0D020B0ED14085669@gamma.hoovers.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks that was my problem, i had code extending the search out to all
the fields, now it only extends the search out to the fields i'm
interested in.

- andy g

On Wed, 2 Jun 2004 14:21:24 -0500 , Tim Jones <tjones@hoovers.com> wrote:
> 
> This seems like it would be determined by how you generate your query - if
> your query doesn't search in the sorted fields, they shouldn't affect the
> scoring of your documents ...
> 
> 
> 
> > -----Original Message-----
> > From: Andy Goodell [mailto:goodell@gmail.com]
> > Sent: Wednesday, June 02, 2004 12:22 PM
> > To: lucene-user@jakarta.apache.org
> > Subject: Can I prevent Sort fields from influencing score?
> >
> >
> > I have been using the new lucene 1.4 SortField implementation wih some
> > custom fields added to old indexes so that the results can be sorted
> > by them.  My problem here is that some of the String fields that I add
> > to the index come up in the search terms, so my results in sort by
> > score order are different.  Here's an example:
> >
> > I added the field AUTHOR_SORTABLE to most of the documents in the
> > index.  But if one of the AUTHOR_SORTABLE field in a document is set
> > to "andy", and i search for "andy", this document gets a very
> > different score than it used to.
> >
> > Since my added fields aren't set in stone, I'm interested in a general
> > solution, where all fields containing the text "SORTABLE" in the name
> > aren't considered for matches, only for sorting.  Could I do this by
> > overriding Similarity?  I tried doing this to set the lengthNorm() for
> > each of my sortable fields to 0, but it hasnt worked yet.  Is there a
> > different way to store the sortable fields that will prevent this?
> >
> > Any help would be greatly appreciated.
> >
> > - andy g
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8557-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 20:43:39 2004
Return-Path: <lucene-user-return-8557-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70498 invoked from network); 2 Jun 2004 20:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 20:43:39 -0000
Received: (qmail 76997 invoked by uid 500); 2 Jun 2004 20:43:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76902 invoked by uid 500); 2 Jun 2004 20:43:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76887 invoked by uid 99); 2 Jun 2004 20:43:49 -0000
Received: from [63.251.175.11] (HELO mail.altrec.com) (63.251.175.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 13:43:49 -0700
Received: by DENALI with Internet Mail Service (5.5.2656.59)
	id <CPTVXZCB>; Wed, 2 Jun 2004 13:43:42 -0700
Message-ID: <55903574BD75D311B8A0009027CCC22B03F9E1FF@DENALI>
From: Gus Kormeier <gusk@altrec.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Can I prevent Sort fields from influencing score?
Date: Wed, 2 Jun 2004 13:43:41 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Just curious,
	Are you building your query or using a particular Query Parser?
which one?

Are you using MultiFieldQueryParser?  I had problems with MFQP before and
was looking for other solutions besides dumping fields into a massive
"content" field.

TIA,
-Gus

-----Original Message-----
From: Andy Goodell [mailto:goodell@gmail.com]
Sent: Wednesday, June 02, 2004 1:30 PM
To: Lucene Users List
Subject: Re: Can I prevent Sort fields from influencing score?


thanks that was my problem, i had code extending the search out to all
the fields, now it only extends the search out to the fields i'm
interested in.

- andy g

On Wed, 2 Jun 2004 14:21:24 -0500 , Tim Jones <tjones@hoovers.com> wrote:
> 
> This seems like it would be determined by how you generate your query - if
> your query doesn't search in the sorted fields, they shouldn't affect the
> scoring of your documents ...
> 
> 
> 
> > -----Original Message-----
> > From: Andy Goodell [mailto:goodell@gmail.com]
> > Sent: Wednesday, June 02, 2004 12:22 PM
> > To: lucene-user@jakarta.apache.org
> > Subject: Can I prevent Sort fields from influencing score?
> >
> >
> > I have been using the new lucene 1.4 SortField implementation wih some
> > custom fields added to old indexes so that the results can be sorted
> > by them.  My problem here is that some of the String fields that I add
> > to the index come up in the search terms, so my results in sort by
> > score order are different.  Here's an example:
> >
> > I added the field AUTHOR_SORTABLE to most of the documents in the
> > index.  But if one of the AUTHOR_SORTABLE field in a document is set
> > to "andy", and i search for "andy", this document gets a very
> > different score than it used to.
> >
> > Since my added fields aren't set in stone, I'm interested in a general
> > solution, where all fields containing the text "SORTABLE" in the name
> > aren't considered for matches, only for sorting.  Could I do this by
> > overriding Similarity?  I tried doing this to set the lengthNorm() for
> > each of my sortable fields to 0, but it hasnt worked yet.  Is there a
> > different way to store the sortable fields that will prevent this?
> >
> > Any help would be greatly appreciated.
> >
> > - andy g
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8558-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 21:36:28 2004
Return-Path: <lucene-user-return-8558-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 403 invoked from network); 2 Jun 2004 21:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 21:36:28 -0000
Received: (qmail 86078 invoked by uid 500); 2 Jun 2004 21:36:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85940 invoked by uid 500); 2 Jun 2004 21:36:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85779 invoked by uid 99); 2 Jun 2004 21:35:59 -0000
Received: from [203.199.70.64] (HELO web8004.mail.in.yahoo.com) (203.199.70.64)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 14:35:59 -0700
Message-ID: <20040602213535.38271.qmail@web8004.mail.in.yahoo.com>
Received: from [129.110.131.102] by web8004.mail.in.yahoo.com via HTTP; Wed, 02 Jun 2004 22:35:35 BST
Date: Wed, 2 Jun 2004 22:35:35 +0100 (BST)
From: =?iso-8859-1?q?milind=20honrao?= <mhonrao@yahoo.co.in>
Subject: help needed in starting lucene
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-615806709-1086212135=:26208"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-615806709-1086212135=:26208
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
 
I am just a beginner. I installed lucene according to the intsructions provided. 
I did all the changed to the environment variables
when i try to run the test program for building indexes using the following command:  java  org.apache.lucene.demo.IndexFiles test/Doc
I am getting the following exception 
Exception in thread "main" class java.lang.ExceptionInInitializerError: java.lang.RuntimeException: java.security.NoSuchAlgorithmException: MD5: Class not found.

 

 

Yahoo! India Matrimony: Find your partner online.
--0-615806709-1086212135=:26208--

From lucene-user-return-8559-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 21:39:43 2004
Return-Path: <lucene-user-return-8559-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3360 invoked from network); 2 Jun 2004 21:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 21:39:43 -0000
Received: (qmail 95292 invoked by uid 500); 2 Jun 2004 21:39:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95168 invoked by uid 500); 2 Jun 2004 21:39:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95153 invoked by uid 99); 2 Jun 2004 21:39:54 -0000
Received: from [63.100.163.104] (HELO mercury.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 14:39:54 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <KMGDHBZZ>; Wed, 2 Jun 2004 17:39:29 -0400
Message-ID: <E65AE9703B683F4C81B5B39C692EB26D1B01D9@mercury.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: help needed in starting lucene
Date: Wed, 2 Jun 2004 17:39:28 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It sounds to me like you need a newer version of Java.

-----Original Message-----
From: milind honrao [mailto:mhonrao@yahoo.co.in]
Sent: Wednesday, June 02, 2004 5:36 PM
To: lucene-user@jakarta.apache.org
Subject: help needed in starting lucene


Hi,
 
I am just a beginner. I installed lucene according to the intsructions
provided. 
I did all the changed to the environment variables
when i try to run the test program for building indexes using the following
command:  java  org.apache.lucene.demo.IndexFiles test/Doc
I am getting the following exception 
Exception in thread "main" class java.lang.ExceptionInInitializerError:
java.lang.RuntimeException: java.security.NoSuchAlgorithmException: MD5:
Class not found.

 

 

Yahoo! India Matrimony: Find your partner online.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8560-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 21:40:29 2004
Return-Path: <lucene-user-return-8560-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3897 invoked from network); 2 Jun 2004 21:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 21:40:29 -0000
Received: (qmail 96694 invoked by uid 500); 2 Jun 2004 21:40:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96648 invoked by uid 500); 2 Jun 2004 21:40:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96632 invoked by uid 99); 2 Jun 2004 21:40:26 -0000
Received: from [64.233.170.199] (HELO mproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 14:40:26 -0700
Received: by mproxy.gmail.com with SMTP id 72so379447rnf
        for <lucene-user@jakarta.apache.org>; Wed, 02 Jun 2004 14:40:04 -0700 (PDT)
Received: by 10.11.118.76 with SMTP id q76mr426004cwc;
        Wed, 02 Jun 2004 14:40:04 -0700 (PDT)
Message-ID: <55b2c6b9040602144034a1183c@mail.gmail.com>
Date: Wed, 2 Jun 2004 14:40:04 -0700
From: Andy Goodell <goodell@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Can I prevent Sort fields from influencing score?
In-Reply-To: <55903574BD75D311B8A0009027CCC22B03F9E1FF@DENALI>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <55903574BD75D311B8A0009027CCC22B03F9E1FF@DENALI>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I build the query myself, its really easy, I just use the normal query
parser with IndexReader.getFieldNames(true) and loop through all of
them to search everything at once.  You can either make a really big
BooleanQuery or make a bunch of small queries and merge the results,
depending on what kind of results you are looking for.  It's probably
not as fast as the one big data field method, but speed is not an
issue yet for anything i've done, whereas code maintenance is a pain,
witness my question that started this thread.

- andy g

On Wed, 2 Jun 2004 13:43:41 -0700 , Gus Kormeier <gusk@altrec.com> wrote:
> 
> Just curious,
>         Are you building your query or using a particular Query Parser?
> which one?
> 
> Are you using MultiFieldQueryParser?  I had problems with MFQP before and
> was looking for other solutions besides dumping fields into a massive
> "content" field.
> 
> TIA,
> -Gus
> 
> 
> 
> -----Original Message-----
> From: Andy Goodell [mailto:goodell@gmail.com]
> Sent: Wednesday, June 02, 2004 1:30 PM
> To: Lucene Users List
> Subject: Re: Can I prevent Sort fields from influencing score?
> 
> thanks that was my problem, i had code extending the search out to all
> the fields, now it only extends the search out to the fields i'm
> interested in.
> 
> - andy g
> 
> On Wed, 2 Jun 2004 14:21:24 -0500 , Tim Jones <tjones@hoovers.com> wrote:
> >
> > This seems like it would be determined by how you generate your query - if
> > your query doesn't search in the sorted fields, they shouldn't affect the
> > scoring of your documents ...
> >
> >
> >
> > > -----Original Message-----
> > > From: Andy Goodell [mailto:goodell@gmail.com]
> > > Sent: Wednesday, June 02, 2004 12:22 PM
> > > To: lucene-user@jakarta.apache.org
> > > Subject: Can I prevent Sort fields from influencing score?
> > >
> > >
> > > I have been using the new lucene 1.4 SortField implementation wih some
> > > custom fields added to old indexes so that the results can be sorted
> > > by them.  My problem here is that some of the String fields that I add
> > > to the index come up in the search terms, so my results in sort by
> > > score order are different.  Here's an example:
> > >
> > > I added the field AUTHOR_SORTABLE to most of the documents in the
> > > index.  But if one of the AUTHOR_SORTABLE field in a document is set
> > > to "andy", and i search for "andy", this document gets a very
> > > different score than it used to.
> > >
> > > Since my added fields aren't set in stone, I'm interested in a general
> > > solution, where all fields containing the text "SORTABLE" in the name
> > > aren't considered for matches, only for sorting.  Could I do this by
> > > overriding Similarity?  I tried doing this to set the lengthNorm() for
> > > each of my sortable fields to 0, but it hasnt worked yet.  Is there a
> > > different way to store the sortable fields that will prevent this?
> > >
> > > Any help would be greatly appreciated.
> > >
> > > - andy g
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8561-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 23:01:35 2004
Return-Path: <lucene-user-return-8561-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47810 invoked from network); 2 Jun 2004 23:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 23:01:35 -0000
Received: (qmail 17356 invoked by uid 500); 2 Jun 2004 23:01:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17318 invoked by uid 500); 2 Jun 2004 23:01:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17300 invoked by uid 99); 2 Jun 2004 23:01:49 -0000
Received: from [199.217.212.90] (HELO stlspfw1.sial.com) (199.217.212.90)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 16:01:49 -0700
Received: from stllnhub01.sial.com ([141.247.245.88])
	by stlspfw1.sial.com with ESMTP id i52N5Q2b014170
	for <lucene-user@jakarta.apache.org>; Wed, 2 Jun 2004 18:05:48 -0500 (CDT)
Subject: Marten Senkel/IS/EUROPE/SIALEUROPE is out of the office.
From: Marten Senkel <MSenkel@europe.sial.com>
To: lucene-user@jakarta.apache.org
Message-ID: <OFE8A05E00.13C61AF4-ONC1256EA7.007E778A-C1256EA7.007E778A@sial.com>
Date: Thu, 3 Jun 2004 01:01:21 +0200
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=4EBBE434DFEDF11A8f9e8a93df938690918c4EBBE434DFEDF11A"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0__=4EBBE434DFEDF11A8f9e8a93df938690918c4EBBE434DFEDF11A
Content-type: text/plain; charset=US-ASCII





I will be out of the office starting  2004-06-02 and will not return until
2004-06-04.

Please contact Nicolas Guala-Molino for any request.

Thanks!
--0__=4EBBE434DFEDF11A8f9e8a93df938690918c4EBBE434DFEDF11A--


From lucene-user-return-8562-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 02 23:05:57 2004
Return-Path: <lucene-user-return-8562-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49637 invoked from network); 2 Jun 2004 23:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Jun 2004 23:05:57 -0000
Received: (qmail 26831 invoked by uid 500); 2 Jun 2004 23:06:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26713 invoked by uid 500); 2 Jun 2004 23:06:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26700 invoked by uid 99); 2 Jun 2004 23:06:11 -0000
Received: from [63.94.84.150] (HELO nj320exchsrv.enterprise.com) (63.94.84.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 16:06:11 -0700
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C448F6.4EB0C24D"
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Subject: building custom-stemmer
Date: Wed, 2 Jun 2004 19:06:59 -0400
Message-ID: <F48023593BB6D4428EC1E89FA36DAD4CD32C8A@nj320exchsrv.enterprise.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: building custom-stemmer
Thread-Index: AcRI9iI4vxmV3MV5TGKmE7Ln83T/ZA==
From: "Musku, Anil (LA)" <amusku@Lotusinterworks.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C448F6.4EB0C24D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I have a fairly decent idea of using Lucene. I need to use it with some
non-European, Indian and CJK languages. There are some languages among =
these
that do not currently have a stemmer (I've looked in Snowball). I was
wondering how I could write my own stemmer, say for e.g. for Hindi.
=20
Regards,
Anil

------_=_NextPart_001_01C448F6.4EB0C24D--

From lucene-user-return-8563-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 03:46:18 2004
Return-Path: <lucene-user-return-8563-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77363 invoked from network); 3 Jun 2004 03:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 03:46:18 -0000
Received: (qmail 58111 invoked by uid 500); 3 Jun 2004 03:46:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57938 invoked by uid 500); 3 Jun 2004 03:46:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57905 invoked by uid 99); 3 Jun 2004 03:46:11 -0000
Received: from [203.111.30.226] (HELO FIREBIRD) (203.111.30.226)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 20:46:11 -0700
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: a list of matching search term
Date: Thu, 3 Jun 2004 13:46:21 +1000
Message-ID: <20040603134621.D9536696.2C3EDCF3@FIREBIRD>
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <349E3808-B477-11D8-BEE2-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Erik I'll give that a try.

Anson

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, June 02, 2004 7:28 PM
To: Lucene Users List
Subject: Re: a list of matching search term

On Jun 1, 2004, at 9:19 PM, Anson Lau wrote:
> Further to my previous email: The highlighter package should be able
> to pick
> up the matching search terms.  Can some experienced highlighter package
> users tell me if I should look down that line?

Yes, Highlighter (available in the sandbox) picks out matching terms.
If you used a custom Formatter with Highlighter, you could pick out
matching terms and have a list of them.  This would not be something
you do for every hit, though, as it would take a little time to do for
each document.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8564-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 03:48:18 2004
Return-Path: <lucene-user-return-8564-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78347 invoked from network); 3 Jun 2004 03:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 03:48:17 -0000
Received: (qmail 63626 invoked by uid 500); 3 Jun 2004 03:48:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63399 invoked by uid 500); 3 Jun 2004 03:48:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63378 invoked by uid 99); 3 Jun 2004 03:48:32 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 20:48:32 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HYPSFS00.F3A for <lucene-user@jakarta.apache.org>; Thu,
          3 Jun 2004 09:29:52 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: help needed in starting lucene
Date: Thu, 3 Jun 2004 09:26:23 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIKEHECAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20040602213535.38271.qmail@web8004.mail.in.yahoo.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey I think u have a file path problem in there try giving the full path

java  org.apache.lucene.demo.IndexFiles  e:/lucene/../test/Doc

Also set classpath for lucene1.3-final.jar or lucene-1.4-rc2.jar
before start indexing....


with regards
Karthik

-----Original Message-----
From: milind honrao [mailto:mhonrao@yahoo.co.in]
Sent: Thursday, June 03, 2004 3:06 AM
To: lucene-user@jakarta.apache.org
Subject: help needed in starting lucene


Hi,

I am just a beginner. I installed lucene according to the intsructions
provided.
I did all the changed to the environment variables
when i try to run the test program for building indexes using the following
command:  java  org.apache.lucene.demo.IndexFiles test/Doc
I am getting the following exception
Exception in thread "main" class java.lang.ExceptionInInitializerError:
java.lang.RuntimeException: java.security.NoSuchAlgorithmException: MD5:
Class not found.





Yahoo! India Matrimony: Find your partner online.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8565-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 03:48:56 2004
Return-Path: <lucene-user-return-8565-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78585 invoked from network); 3 Jun 2004 03:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 03:48:56 -0000
Received: (qmail 64646 invoked by uid 500); 3 Jun 2004 03:49:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64601 invoked by uid 500); 3 Jun 2004 03:49:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64575 invoked by uid 99); 3 Jun 2004 03:49:09 -0000
Received: from [203.199.122.32] (HELO web8302.mail.in.yahoo.com) (203.199.122.32)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 20:49:09 -0700
Message-ID: <20040603034841.10071.qmail@web8302.mail.in.yahoo.com>
Received: from [210.7.75.237] by web8302.mail.in.yahoo.com via HTTP; Thu, 03 Jun 2004 04:48:41 BST
Date: Thu, 3 Jun 2004 04:48:41 +0100 (BST)
From: =?iso-8859-1?q?Jayant=20Kumar?= <jayantlists@yahoo.co.in>
Subject: problems with lucene in multithreaded environment
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We recently tested lucene with an index size of 2 GB
which has about 1,500,000 documents, each document
having about 25 fields. The frequency of search was
about 20 queries per second. This resulted in an
average response time of about 20 seconds approx
per search. What we observed was that lucene queues
the queries and does not release them until the
results are found. so the queries that have come in
later take up about 500 seconds. Please let us know
whether there is a technique to optimize lucene in
such circumstances. 

Please note that we have created a single object for
the searcher (IndexSearcher) and all queries are
passed to this searcher only. We are using a P4 dual
processor machine with 6 gb of ram. We need results at
the rate of about 60 queries/second at peak load. Is
there a way to optimize lucene to get this performance
from this machine? What other ways can i optimize
lucene for this output?

Regards
Jayant

________________________________________________________________________
Yahoo! India Matrimony: Find your partner online. http://yahoo.shaadi.com/india-matrimony/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8566-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 04:32:34 2004
Return-Path: <lucene-user-return-8566-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4883 invoked from network); 3 Jun 2004 04:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 04:32:34 -0000
Received: (qmail 24612 invoked by uid 500); 3 Jun 2004 04:32:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24475 invoked by uid 500); 3 Jun 2004 04:32:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24366 invoked by uid 99); 3 Jun 2004 04:32:44 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 21:32:44 -0700
Received: (qmail 4884 invoked by uid 89); 3 Jun 2004 04:32:16 -0000
Received: from unknown (HELO apache.org) (doug@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 3 Jun 2004 04:32:16 -0000
Message-ID: <40BEA9C7.2000007@apache.org>
Date: Wed, 02 Jun 2004 21:32:07 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problems with lucene in multithreaded environment
References: <20040603034841.10071.qmail@web8302.mail.in.yahoo.com>
In-Reply-To: <20040603034841.10071.qmail@web8302.mail.in.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jayant Kumar wrote:
> We recently tested lucene with an index size of 2 GB
> which has about 1,500,000 documents, each document
> having about 25 fields. The frequency of search was
> about 20 queries per second. This resulted in an
> average response time of about 20 seconds approx
> per search.

That sounds slow, unless your queries are very complex.  What are your 
queries like?

> What we observed was that lucene queues
> the queries and does not release them until the
> results are found. so the queries that have come in
> later take up about 500 seconds. Please let us know
> whether there is a technique to optimize lucene in
> such circumstances. 

Multiple queries executed from different threads using a single searcher 
should not queue, but should run in parallel.  A technique to find out 
where threads are queueing is to get a thread dump and see where all of 
the threads are stuck.  In Solaris and Linux, sending the JVM a SIGQUIT 
will give a thread dump.  On Windows, use Control-Break.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8567-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 05:03:03 2004
Return-Path: <lucene-user-return-8567-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21021 invoked from network); 3 Jun 2004 05:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 05:03:02 -0000
Received: (qmail 66672 invoked by uid 500); 3 Jun 2004 05:03:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66640 invoked by uid 500); 3 Jun 2004 05:03:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66624 invoked by uid 99); 3 Jun 2004 05:03:18 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 02 Jun 2004 22:03:18 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HYPVVM00.73H for <lucene-user@jakarta.apache.org>; Thu,
          3 Jun 2004 10:44:10 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Range Query Sombody HELP please
Date: Thu, 3 Jun 2004 10:40:41 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIKEHGCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <200406022055.34752.ykingma@xs4all.nl>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey

   Ype the Query  of range

   +button +shirt +filename:[b10181_p100 TO b10181_p200]

  did not work for me but on other way around

  +(button OR shirt) +filename:[b10181_p100 TO b10181_p200]

  resulted to me in 2 hits with either one term  "button / shirt "  in each
page,but not both of them

 I found from the Html file that both words are present  in more then 2
files,

 Are there any other possibilities  for getting both words.


with regards
Karthik


-----Original Message-----
From: Ype Kingma [mailto:ykingma@xs4all.nl]
Sent: Thursday, June 03, 2004 12:26 AM
To: lucene-user@jakarta.apache.org
Subject: Re: Range Query Sombody HELP please


On Wednesday 02 June 2004 14:46, Erik Hatcher wrote:
> On Jun 2, 2004, at 6:20 AM, Karthik N S wrote:
...
> > I still have 3 small Questions.
> >
> > 1)While creating the Range Query Is it possible for Lucene to do
> > somthing
> > similar..
> >
> >      +(button AND shirt) +filename:[b10181_p100 TO b10181_p200]
> >
> >      [Do you think this will work]  It's not on returning hits , but
> > it does
> > return hits with either one of them  "Shirt" or "button" Only.
>
> My guess is you have documents none of your documents in that range
> have button AND shirt in them.

You can also try this:

+button +shirt +filename:[b10181_p100 TO b10181_p200]

I never got to completely understand the way the query parser deals with
AND and OR, so I prefer to avoid them.

Regards,
Ype


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8568-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 06:53:37 2004
Return-Path: <lucene-user-return-8568-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84300 invoked from network); 3 Jun 2004 06:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 06:53:37 -0000
Received: (qmail 92045 invoked by uid 500); 3 Jun 2004 06:53:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91894 invoked by uid 500); 3 Jun 2004 06:53:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91880 invoked by uid 99); 3 Jun 2004 06:53:53 -0000
Received: from [194.109.24.13] (HELO smtp-out3.xs4all.nl) (194.109.24.13)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 02 Jun 2004 23:53:53 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-out3.xs4all.nl (8.12.10/8.12.10) with ESMTP id i536r8d1004961
	for <lucene-user@jakarta.apache.org>; Thu, 3 Jun 2004 08:53:08 +0200 (CEST)
From: Ype Kingma <ykingma@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Range Query Sombody HELP please
Date: Thu, 3 Jun 2004 08:53:08 +0200
User-Agent: KMail/1.5.4
References: <LOEGLEEGOAKBOLAJCCKIKEHGCAAA.karthik@controlnet.co.in>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIKEHGCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200406030853.08057.ykingma@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 03 June 2004 07:10, Karthik N S wrote:
> Hey
>
>    Ype the Query  of range
>
>    +button +shirt +filename:[b10181_p100 TO b10181_p200]
>
>   did not work for me but on other way around
>
>   +(button OR shirt) +filename:[b10181_p100 TO b10181_p200]
>
>   resulted to me in 2 hits with either one term  "button / shirt "  in each
> page,but not both of them
>
>  I found from the Html file that both words are present  in more then 2
> files,
>
>  Are there any other possibilities  for getting both words.

Your index contains book pages as Lucene documents.
In this case you need to index larger parts of the books
as Lucene documents in order to retrieve books with multiple
subjects on different pages.


Kind regards,
Ype


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8569-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 11:22:01 2004
Return-Path: <lucene-user-return-8569-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65815 invoked from network); 3 Jun 2004 11:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 11:22:01 -0000
Received: (qmail 85242 invoked by uid 500); 3 Jun 2004 11:21:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85154 invoked by uid 500); 3 Jun 2004 11:21:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85134 invoked by uid 99); 3 Jun 2004 11:21:56 -0000
Received: from [66.218.94.79] (HELO web90108.mail.scd.yahoo.com) (66.218.94.79)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 04:21:56 -0700
Message-ID: <20040603112146.83900.qmail@web90108.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90108.mail.scd.yahoo.com via HTTP; Thu, 03 Jun 2004 04:21:46 PDT
Date: Thu, 3 Jun 2004 04:21:46 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: why the score is not 1.0?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1239502092-1086261706=:83354"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1239502092-1086261706=:83354
Content-Type: text/plain; charset=us-ascii

Dear all,
 
I have another trouble in one of my program using Lucene. I tried to compare the same string and use the same analyzer to index it. You can see my code as following:
 
-----------------------------------------------------------------------------------------------------------------------------

import org.apache.lucene.analysis.Analyzer;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.search.Hits;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.search.Searcher;



public class LuceneIndexExample {



private static final String _indexDir ="c://lucene-index-dir";



public static void main(String args[]) throws Exception {



String sss = "All work and no play makes Jack a dull boy";



Analyzer analyzer = new StandardAnalyzer();

boolean flag = true;

IndexWriter writer = new IndexWriter(_indexDir, analyzer, flag);



Document document = new Document();

document.add(Field.Text("champs", sss));

writer.addDocument(document);

writer.close();



Searcher s = new IndexSearcher(_indexDir);

String str = "All work and no play makes Jack a dull boy";

Query q = QueryParser.parse(str, "champs", analyzer);

Hits hits = s.search(q);



try {

for (int i=0; i<=hits.length();i++){

System.out.println("score of "+ i +" = "+hits.score(i));

}

} catch (IndexOutOfBoundsException e){

}

}

}

------------------------------------------------------------------------------------------------------------------
 
I think i should get "1.0" as the score from the hits collection but got "0.30444607" instead. 
 
SOMEBODY KNOWS WHY IT'S GONE LIKE THIS? PLEASE HELP! 
 
Thanks before hand.
 
Uddam

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-1239502092-1086261706=:83354--

From lucene-user-return-8570-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 12:44:10 2004
Return-Path: <lucene-user-return-8570-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60797 invoked from network); 3 Jun 2004 12:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 12:44:10 -0000
Received: (qmail 21309 invoked by uid 500); 3 Jun 2004 12:44:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21258 invoked by uid 500); 3 Jun 2004 12:44:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21243 invoked by uid 99); 3 Jun 2004 12:44:05 -0000
Received: from [128.143.103.163] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.163)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 05:44:05 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 5A29474EE73
	for <lucene-user@jakarta.apache.org>; Thu,  3 Jun 2004 08:43:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040603112146.83900.qmail@web90108.mail.scd.yahoo.com>
References: <20040603112146.83900.qmail@web90108.mail.scd.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A6533124-B55B-11D8-90CB-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: why the score is not 1.0?
Date: Thu, 3 Jun 2004 08:43:44 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Without looking at your code, a good first suggestion is to se  
IndexSearcher.explain(Query,docId) to see why scores are they way they  
are.

	Erik


On Jun 3, 2004, at 7:21 AM, uddam chukmol wrote:

> Dear all,
>
> I have another trouble in one of my program using Lucene. I tried to  
> compare the same string and use the same analyzer to index it. You can  
> see my code as following:
>
> ----------------------------------------------------------------------- 
> ------------------------------------------------------
>
> import org.apache.lucene.analysis.Analyzer;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.index.IndexWriter;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.search.Searcher;
>
>
>
> public class LuceneIndexExample {
>
>
>
> private static final String _indexDir ="c://lucene-index-dir";
>
>
>
> public static void main(String args[]) throws Exception {
>
>
>
> String sss = "All work and no play makes Jack a dull boy";
>
>
>
> Analyzer analyzer = new StandardAnalyzer();
>
> boolean flag = true;
>
> IndexWriter writer = new IndexWriter(_indexDir, analyzer, flag);
>
>
>
> Document document = new Document();
>
> document.add(Field.Text("champs", sss));
>
> writer.addDocument(document);
>
> writer.close();
>
>
>
> Searcher s = new IndexSearcher(_indexDir);
>
> String str = "All work and no play makes Jack a dull boy";
>
> Query q = QueryParser.parse(str, "champs", analyzer);
>
> Hits hits = s.search(q);
>
>
>
> try {
>
> for (int i=0; i<=hits.length();i++){
>
> System.out.println("score of "+ i +" = "+hits.score(i));
>
> }
>
> } catch (IndexOutOfBoundsException e){
>
> }
>
> }
>
> }
>
> ----------------------------------------------------------------------- 
> -------------------------------------------
>
> I think i should get "1.0" as the score from the hits collection but  
> got "0.30444607" instead.
>
> SOMEBODY KNOWS WHY IT'S GONE LIKE THIS? PLEASE HELP!
>
> Thanks before hand.
>
> Uddam
>
> 		
> ---------------------------------
> Do you Yahoo!?
> Friends.  Fun. Try the all-new Yahoo! Messenger


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8571-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 14:07:53 2004
Return-Path: <lucene-user-return-8571-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55753 invoked from network); 3 Jun 2004 14:07:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 14:07:53 -0000
Received: (qmail 81397 invoked by uid 500); 3 Jun 2004 14:07:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81365 invoked by uid 500); 3 Jun 2004 14:07:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81351 invoked by uid 99); 3 Jun 2004 14:07:49 -0000
Received: from [66.218.94.79] (HELO web90108.mail.scd.yahoo.com) (66.218.94.79)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 07:07:49 -0700
Message-ID: <20040603140731.38886.qmail@web90108.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90108.mail.scd.yahoo.com via HTTP; Thu, 03 Jun 2004 07:07:31 PDT
Date: Thu, 3 Jun 2004 07:07:31 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: flush an index directory
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <A6533124-B55B-11D8-90CB-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1012067993-1086271651=:38335"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1012067993-1086271651=:38335
Content-Type: text/plain; charset=us-ascii

Hi all,
 
I'm in real trouble with the way Lucene organizes its index. First time, i run an application to index a text. Then, I changed the text and executed it once again, but still can not get my index refreshed.
 
Is there anyway to do this? PLEASE HELP!!!
 
Thanks you before hand!
 
Uddam


		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-1012067993-1086271651=:38335--

From lucene-user-return-8572-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 14:53:01 2004
Return-Path: <lucene-user-return-8572-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3419 invoked from network); 3 Jun 2004 14:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 14:53:01 -0000
Received: (qmail 41057 invoked by uid 500); 3 Jun 2004 14:52:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40993 invoked by uid 500); 3 Jun 2004 14:52:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40929 invoked by uid 99); 3 Jun 2004 14:52:52 -0000
Received: from [217.12.10.70] (HELO web25210.mail.ukl.yahoo.com) (217.12.10.70)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 07:52:52 -0700
Message-ID: <20040603145232.51764.qmail@web25210.mail.ukl.yahoo.com>
Received: from [80.47.202.7] by web25210.mail.ukl.yahoo.com via HTTP; Thu, 03 Jun 2004 15:52:32 BST
Date: Thu, 3 Jun 2004 15:52:32 +0100 (BST)
From: =?iso-8859-1?q?jt=20oob?= <jt2oob@yahoo.co.uk>
Subject: Re: flush an index directory
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040603140731.38886.qmail@web90108.mail.scd.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If I understand your question correctly you have document, you index
it, you change the document, you index the document again.

This will lead to the document being in your index twice, once with
each version. Searches will return hits for either the old or new
version of the document. If you change a document you must remove it
from the index and then re-add it.

If you want to delete your entire index just remove all files in your
index directory.

hope that helps,
jt

 --- uddam chukmol <uddam_chukmol@yahoo.com> wrote: > Hi all,
>  
> I'm in real trouble with the way Lucene organizes its index. First
> time, i run an application to index a text. Then, I changed the text
> and executed it once again, but still can not get my index refreshed.
>  
> Is there anyway to do this? PLEASE HELP!!!
>  
> Thanks you before hand!
>  
> Uddam
> 
> 
> 		
> ---------------------------------
> Do you Yahoo!?
> Friends.  Fun. Try the all-new Yahoo! Messenger 


	
	
		
____________________________________________________________
Yahoo! Messenger - Communicate instantly..."Ping" 
your friends today! Download Messenger Now 
http://uk.messenger.yahoo.com/download/index.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8573-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 17:00:06 2004
Return-Path: <lucene-user-return-8573-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47644 invoked from network); 3 Jun 2004 17:00:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 17:00:06 -0000
Received: (qmail 91559 invoked by uid 500); 3 Jun 2004 16:59:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91451 invoked by uid 500); 3 Jun 2004 16:59:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91302 invoked by uid 99); 3 Jun 2004 16:59:57 -0000
Received: from [66.163.169.223] (HELO smtp104.mail.sc5.yahoo.com) (66.163.169.223)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 09:59:57 -0700
Received: from unknown (HELO KPR) (ganguri@64.223.175.63 with login)
  by smtp104.mail.sc5.yahoo.com with SMTP; 3 Jun 2004 16:59:38 -0000
Message-ID: <006501c4498c$286f2c00$0200a8c0@KPR>
From: "Prasad Ganguri" <ganguri@yahoo.com>
To: <lucene-user@jakarta.apache.org>
Subject: FileNotFoundException when trying to indexing.
Date: Thu, 3 Jun 2004 12:59:38 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0062_01C4496A.A0D28A10"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Disposition-Notification-To: "Prasad Ganguri" <ganguri@yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0062_01C4496A.A0D28A10
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am using Lucene for buiding our document management system. I tested =
it in
Windows2000 Professional and got successful execution.

Recently, when we ported the code onto an WindowsXP Professional, we are
getting the following exception. I tried to create segments folder using =
my
code, but throwing Access denied error.

Could some one help me, what is wrong with my code?

java.io.FileNotFoundException: C:\cms\index\segments (The system cannot =
find
the file specified)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at =
org.apache.lucene.store.FSInputStream$Descriptor.<init>(Unknown
Source)
        at org.apache.lucene.store.FSInputStream.<init>(Unknown Source)
        at org.apache.lucene.store.FSDirectory.openFile(Unknown Source)
        at org.apache.lucene.index.SegmentInfos.read(Unknown Source)
        at org.apache.lucene.index.IndexWriter$1.doBody(Unknown Source)
        at org.apache.lucene.store.Lock$With.run(Unknown Source)
        at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
        at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
        at
com.ganguri.cms.contentmanagement.index.FileIndexer.index(FileIndexer.jav=
a:6
2)
        at
com.ganguri.cms.contentmanagement.filemanager.Document.moveFileToReposito=
ry(
Document.java:215)
        at
jsp_servlet._content._indexcardprocess._jspService(_indexcardprocess.java=
:19
3)
        at com.ganguri.cms.jsp.CMSJSPPage.service(CMSJSPPage.java:20)
        at
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.j=
ava
:105)
        at
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.j=
ava
:123)
        at
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContext=
Imp
l.java:742)
        at
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContext=
Imp
l.java:686)
        at
weblogic.servlet.internal.ServletContextManager.invokeServlet(ServletCont=
ext
Manager.java:247)
        at
weblogic.socket.MuxableSocketHTTP.invokeServlet(MuxableSocketHTTP.java:36=
1)
        at
weblogic.socket.MuxableSocketHTTP.execute(MuxableSocketHTTP.java:261)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:120)

The corresponding code is as follows:

public static void index(File indexDir, File dataDir, boolean isNew) =
throws
Exception
{
if (!dataDir.exists())
throw new IOException(dataDir.getName() + " does not exist.");
System.out.println("############ indexDir existing.....? " +
indexDir.exists());
IndexWriter writer =3D null;
if (!indexDir.exists())
{
indexDir.mkdirs();
}
try
{
writer =3D new IndexWriter(indexDir, getAnalyzer(), isNew);  // Here the
exception is thrown
if (dataDir.isFile())
indexFile(writer, dataDir);
else if (dataDir.isDirectory())
indexDirectory(writer, dataDir);
else
return;
writer.optimize();
writer.close();
}
catch (Exception e)
{
e.printStackTrace();
}
finally
{
if (writer !=3D null)
writer.close();
}
}

Thanks in advance..


Prasad

------=_NextPart_000_0062_01C4496A.A0D28A10--



From lucene-user-return-8574-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 18:23:57 2004
Return-Path: <lucene-user-return-8574-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43169 invoked from network); 3 Jun 2004 18:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 18:23:57 -0000
Received: (qmail 66481 invoked by uid 500); 3 Jun 2004 18:24:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66454 invoked by uid 500); 3 Jun 2004 18:24:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66441 invoked by uid 99); 3 Jun 2004 18:24:04 -0000
Received: from [69.104.69.114] (HELO mail.office.vtourist.com) (69.104.69.114)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 11:24:04 -0700
Received: from [192.168.207.198] (adsl-69-104-69-113.dsl.irvnca.pacbell.net [69.104.69.113])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i53INdvJ014619
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 3 Jun 2004 11:23:39 -0700
Mime-Version: 1.0 (Apple Message framework v618)
Content-Transfer-Encoding: 7bit
Message-Id: <20D049CA-B58B-11D8-97BF-000A95DB7BCC@office.vtourist.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Supun Edirisinghe <supun@office.vtourist.com>
Subject: disableLuceneLocks system property
Date: Thu, 3 Jun 2004 11:23:36 -0700
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

why is disableLuceneLocks not in the list at 
http://jakarta.apache.org/lucene/docs/systemproperties.html ?

is it not advisable to use anymore? is it still valid?
will it be supported in version 1.4?

how is the usage? java ... -DdisableLuceneLocks ... or java ... 
-DdisableLuceneLocks=true

thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8575-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 18:58:38 2004
Return-Path: <lucene-user-return-8575-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81903 invoked from network); 3 Jun 2004 18:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 18:58:38 -0000
Received: (qmail 48186 invoked by uid 500); 3 Jun 2004 18:58:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48094 invoked by uid 500); 3 Jun 2004 18:58:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48077 invoked by uid 99); 3 Jun 2004 18:58:48 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 11:58:48 -0700
Received: from h-69-3-159-34.mclnva23.dynamic.covad.net ([69.3.159.34] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BVxQ1-00047X-00
	for lucene-user@jakarta.apache.org; Thu, 03 Jun 2004 14:58:25 -0400
Message-ID: <024901c4499c$c12379f0$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <006501c4498c$286f2c00$0200a8c0@KPR>
Subject: Re: FileNotFoundException when trying to indexing.
Date: Thu, 3 Jun 2004 14:58:27 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Prasad,

I think you'll have to provide more code so we can see what's actually going
on.  BTW, I don't see you calling the UseCompoundFile method (unless you do
it inside indexFile/Directory) - I wonder if that could be an issue?

Regards,

Terry

PS: I run on XP/Pro just fine, so there's nothing intrinsically wrong with
the platform.

----- Original Message ----- 
From: "Prasad Ganguri" <ganguri@yahoo.com>
To: <lucene-user@jakarta.apache.org>
Sent: Thursday, June 03, 2004 12:59 PM
Subject: FileNotFoundException when trying to indexing.


I am using Lucene for buiding our document management system. I tested it in
Windows2000 Professional and got successful execution.

Recently, when we ported the code onto an WindowsXP Professional, we are
getting the following exception. I tried to create segments folder using my
code, but throwing Access denied error.

Could some one help me, what is wrong with my code?

java.io.FileNotFoundException: C:\cms\index\segments (The system cannot find
the file specified)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(Unknown
Source)
        at org.apache.lucene.store.FSInputStream.<init>(Unknown Source)
        at org.apache.lucene.store.FSDirectory.openFile(Unknown Source)
        at org.apache.lucene.index.SegmentInfos.read(Unknown Source)
        at org.apache.lucene.index.IndexWriter$1.doBody(Unknown Source)
        at org.apache.lucene.store.Lock$With.run(Unknown Source)
        at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
        at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
        at
com.ganguri.cms.contentmanagement.index.FileIndexer.index(FileIndexer.java:6
2)
        at
com.ganguri.cms.contentmanagement.filemanager.Document.moveFileToRepository(
Document.java:215)
        at
jsp_servlet._content._indexcardprocess._jspService(_indexcardprocess.java:19
3)
        at com.ganguri.cms.jsp.CMSJSPPage.service(CMSJSPPage.java:20)
        at
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java
:105)
        at
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java
:123)
        at
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContextImp
l.java:742)
        at
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContextImp
l.java:686)
        at
weblogic.servlet.internal.ServletContextManager.invokeServlet(ServletContext
Manager.java:247)
        at
weblogic.socket.MuxableSocketHTTP.invokeServlet(MuxableSocketHTTP.java:361)
        at
weblogic.socket.MuxableSocketHTTP.execute(MuxableSocketHTTP.java:261)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:120)

The corresponding code is as follows:

public static void index(File indexDir, File dataDir, boolean isNew) throws
Exception
{
if (!dataDir.exists())
throw new IOException(dataDir.getName() + " does not exist.");
System.out.println("############ indexDir existing.....? " +
indexDir.exists());
IndexWriter writer = null;
if (!indexDir.exists())
{
indexDir.mkdirs();
}
try
{
writer = new IndexWriter(indexDir, getAnalyzer(), isNew);  // Here the
exception is thrown
if (dataDir.isFile())
indexFile(writer, dataDir);
else if (dataDir.isDirectory())
indexDirectory(writer, dataDir);
else
return;
writer.optimize();
writer.close();
}
catch (Exception e)
{
e.printStackTrace();
}
finally
{
if (writer != null)
writer.close();
}
}

Thanks in advance..


Prasad


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8576-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 19:11:31 2004
Return-Path: <lucene-user-return-8576-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94829 invoked from network); 3 Jun 2004 19:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 19:11:30 -0000
Received: (qmail 70879 invoked by uid 500); 3 Jun 2004 19:11:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70749 invoked by uid 500); 3 Jun 2004 19:11:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70736 invoked by uid 99); 3 Jun 2004 19:11:41 -0000
Received: from [69.104.69.114] (HELO mail.office.vtourist.com) (69.104.69.114)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 12:11:41 -0700
Received: from [192.168.207.198] (adsl-69-104-69-113.dsl.irvnca.pacbell.net [69.104.69.113])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i53JBIvJ015461
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 3 Jun 2004 12:11:18 -0700
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <40BEA9C7.2000007@apache.org>
References: <20040603034841.10071.qmail@web8302.mail.in.yahoo.com> <40BEA9C7.2000007@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C8B18B61-B591-11D8-90B4-000A95DB7BCC@office.vtourist.com>
Content-Transfer-Encoding: 7bit
From: Supun Edirisinghe <supun@office.vtourist.com>
Subject: Re: problems with lucene in multithreaded environment
Date: Thu, 3 Jun 2004 12:11:14 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I noticed delays when concurrent threads query an IndexSearcher too.

our index is about 550MB with about 850,000 docs. each doc with 20-30 
fields of which only 3 are indexed. Our queries are not very complex -- 
just 3 required term queries.

this is what my test did:

intialilize an array of terms that are known to appear in the
initialize a IndexSearcher
start a number of threads
	that query the indexsearcher and extract
	each thread picks random terms that are known to appear in the indexed 
Keyword fields and builds a boolean query
	and then extracts all 20-30 fields from the 1st 10 hits.
	waits .5 seconds    each thread does this 30 times.

typical queries returned 20 - 100 hits

with just one thread: 30 queries ran over a span about 20 seconds. 
search time for each query generally took 40ms to 75ms. The longest 
search time was 445ms but searches that took more than 100ms were rare.

with 5 threads: 150 queries ran over a span of 62 seconds. search time 
for each query for the most part increased to 120ms to 300ms. big 
delays were more prevalent and took 3 or 4 seconds.

with 10 or more threads things got bad. and I didn't run enough tests. 
but most searches took 1 to 2 seconds and some searches did take 20 to 
30 seconds.

when I ran the test with 5 concurrent thread each doing one query 
search times were like 100ms to 200 ms with a max of 700ms.

I have not looked into the code Lucene much and I didn't think queries 
were queued.

I ran my test with the -DdisableLuceneLocks in the command line. But I 
wasn't sure it did anything.

I ran the test on Lucene1.3 final on my powerbook G4 and tests ran with 
alot of other processes going on.

I was interested in this discussion because I could not figure out the 
delay if queries are run in parallel.


On Jun 2, 2004, at 9:32 PM, Doug Cutting wrote:

> Jayant Kumar wrote:
>> We recently tested lucene with an index size of 2 GB
>> which has about 1,500,000 documents, each document
>> having about 25 fields. The frequency of search was
>> about 20 queries per second. This resulted in an
>> average response time of about 20 seconds approx
>> per search.
>
> That sounds slow, unless your queries are very complex.  What are your 
> queries like?
>
>> What we observed was that lucene queues
>> the queries and does not release them until the
>> results are found. so the queries that have come in
>> later take up about 500 seconds. Please let us know
>> whether there is a technique to optimize lucene in
>> such circumstances.
>
> Multiple queries executed from different threads using a single 
> searcher should not queue, but should run in parallel.  A technique to 
> find out where threads are queueing is to get a thread dump and see 
> where all of the threads are stuck.  In Solaris and Linux, sending the 
> JVM a SIGQUIT will give a thread dump.  On Windows, use Control-Break.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8577-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 20:08:29 2004
Return-Path: <lucene-user-return-8577-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57523 invoked from network); 3 Jun 2004 20:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 20:08:29 -0000
Received: (qmail 87190 invoked by uid 500); 3 Jun 2004 20:08:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87167 invoked by uid 500); 3 Jun 2004 20:08:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87152 invoked by uid 99); 3 Jun 2004 20:08:38 -0000
Received: from [63.94.84.150] (HELO nj320exchsrv.enterprise.com) (63.94.84.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 13:08:38 -0700
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Subject: Writing a stemmer
Date: Thu, 3 Jun 2004 16:09:23 -0400
Message-ID: <F48023593BB6D4428EC1E89FA36DAD4C01B70ECA@nj320exchsrv.enterprise.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Writing a stemmer
Thread-Index: AcRJnrv/OTdreY8bTD20XAypPYT9eQAB3LIg
From: "Musku, Anil (LA)" <amusku@Lotusinterworks.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,

Can anyone provide some help on writing a stemmer for non-english =
languages?
How proficient must I be in a language for which I wish to write the =
stemmer?

Regards,
Anil

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8578-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 20:10:09 2004
Return-Path: <lucene-user-return-8578-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58905 invoked from network); 3 Jun 2004 20:10:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 20:10:09 -0000
Received: (qmail 91639 invoked by uid 500); 3 Jun 2004 20:10:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91459 invoked by uid 500); 3 Jun 2004 20:10:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91443 invoked by uid 99); 3 Jun 2004 20:10:21 -0000
Received: from [66.163.169.222] (HELO smtp103.mail.sc5.yahoo.com) (66.163.169.222)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 13:10:21 -0700
Received: from unknown (HELO KPR) (ganguri@64.223.175.63 with login)
  by smtp103.mail.sc5.yahoo.com with SMTP; 3 Jun 2004 20:09:53 -0000
Message-ID: <00f201c449a6$bb8f8380$0200a8c0@KPR>
From: "Prasad Ganguri" <ganguri@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <006501c4498c$286f2c00$0200a8c0@KPR> <024901c4499c$c12379f0$6501a8c0@POWERPACK>
Subject: Re: FileNotFoundException when trying to indexing.
Date: Thu, 3 Jun 2004 16:09:52 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Disposition-Notification-To: "Prasad Ganguri" <ganguri@yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Terry,

Thanks for your reply.

I identified the problem. I am creating a new index, but passing a parameter
that the index is existing one. So, it is looking for segment file (thinking
that the index is existing).

You rightly pointed out that, i am not calling UseCompoundFile method. I
will incorporate this call.

regards
Prasad

----- Original Message ----- 
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 03, 2004 2:58 PM
Subject: Re: FileNotFoundException when trying to indexing.


> Prasad,
>
> I think you'll have to provide more code so we can see what's actually
going
> on.  BTW, I don't see you calling the UseCompoundFile method (unless you
do
> it inside indexFile/Directory) - I wonder if that could be an issue?
>
> Regards,
>
> Terry
>
> PS: I run on XP/Pro just fine, so there's nothing intrinsically wrong with
> the platform.
>
> ----- Original Message ----- 
> From: "Prasad Ganguri" <ganguri@yahoo.com>
> To: <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 03, 2004 12:59 PM
> Subject: FileNotFoundException when trying to indexing.
>
>
> I am using Lucene for buiding our document management system. I tested it
in
> Windows2000 Professional and got successful execution.
>
> Recently, when we ported the code onto an WindowsXP Professional, we are
> getting the following exception. I tried to create segments folder using
my
> code, but throwing Access denied error.
>
> Could some one help me, what is wrong with my code?
>
> java.io.FileNotFoundException: C:\cms\index\segments (The system cannot
find
> the file specified)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>         at org.apache.lucene.store.FSInputStream$Descriptor.<init>(Unknown
> Source)
>         at org.apache.lucene.store.FSInputStream.<init>(Unknown Source)
>         at org.apache.lucene.store.FSDirectory.openFile(Unknown Source)
>         at org.apache.lucene.index.SegmentInfos.read(Unknown Source)
>         at org.apache.lucene.index.IndexWriter$1.doBody(Unknown Source)
>         at org.apache.lucene.store.Lock$With.run(Unknown Source)
>         at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>         at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>         at
>
com.ganguri.cms.contentmanagement.index.FileIndexer.index(FileIndexer.java:6
> 2)
>         at
>
com.ganguri.cms.contentmanagement.filemanager.Document.moveFileToRepository(
> Document.java:215)
>         at
>
jsp_servlet._content._indexcardprocess._jspService(_indexcardprocess.java:19
> 3)
>         at com.ganguri.cms.jsp.CMSJSPPage.service(CMSJSPPage.java:20)
>         at
>
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java
> :105)
>         at
>
weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java
> :123)
>         at
>
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContextImp
> l.java:742)
>         at
>
weblogic.servlet.internal.ServletContextImpl.invokeServlet(ServletContextImp
> l.java:686)
>         at
>
weblogic.servlet.internal.ServletContextManager.invokeServlet(ServletContext
> Manager.java:247)
>         at
>
weblogic.socket.MuxableSocketHTTP.invokeServlet(MuxableSocketHTTP.java:361)
>         at
> weblogic.socket.MuxableSocketHTTP.execute(MuxableSocketHTTP.java:261)
>         at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:120)
>
> The corresponding code is as follows:
>
> public static void index(File indexDir, File dataDir, boolean isNew)
throws
> Exception
> {
> if (!dataDir.exists())
> throw new IOException(dataDir.getName() + " does not exist.");
> System.out.println("############ indexDir existing.....? " +
> indexDir.exists());
> IndexWriter writer = null;
> if (!indexDir.exists())
> {
> indexDir.mkdirs();
> }
> try
> {
> writer = new IndexWriter(indexDir, getAnalyzer(), isNew);  // Here the
> exception is thrown
> if (dataDir.isFile())
> indexFile(writer, dataDir);
> else if (dataDir.isDirectory())
> indexDirectory(writer, dataDir);
> else
> return;
> writer.optimize();
> writer.close();
> }
> catch (Exception e)
> {
> e.printStackTrace();
> }
> finally
> {
> if (writer != null)
> writer.close();
> }
> }
>
> Thanks in advance..
>
>
> Prasad
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8579-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 20:18:18 2004
Return-Path: <lucene-user-return-8579-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63911 invoked from network); 3 Jun 2004 20:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 20:18:18 -0000
Received: (qmail 7239 invoked by uid 500); 3 Jun 2004 20:18:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7218 invoked by uid 500); 3 Jun 2004 20:18:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7204 invoked by uid 99); 3 Jun 2004 20:18:30 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 13:18:29 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Thu, 03 Jun 2004 16:18:05 -0400
Message-Id: <s0bf4f3d.087@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Thu, 03 Jun 2004 16:17:56 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: Writing a stemmer
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anil,

I suppose it depends on how complex the language is and what is acceptable =
for your program.  I have written a couple of stemmers that are fairly =
straightforward based on papers that I have read and work well for the =
langs. we are using.  Your best bet is probably to do a literature search =
for the languages you are interested in and go from there. =20

I am, of course, assumming stemmers for your languages don't already =
exist.  If your languages are common, there probably is a stemmer =
available in some form that you can use or adapt. You'd be suprised at =
what you get by doing a simple google search for "<lang X> stemmer" where =
lang X is the language you are interested in and no quotes.

Hooking them into Lucene is straightforward and there are several examples =
of this available in the docs and code.

-Grant

>>> amusku@Lotusinterworks.com 06/03/04 04:09PM >>>

Hi,

Can anyone provide some help on writing a stemmer for non-english =
languages?
How proficient must I be in a language for which I wish to write the =
stemmer?

Regards,
Anil

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8580-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 20:27:37 2004
Return-Path: <lucene-user-return-8580-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68849 invoked from network); 3 Jun 2004 20:27:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 20:27:36 -0000
Received: (qmail 22456 invoked by uid 500); 3 Jun 2004 20:26:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22256 invoked by uid 500); 3 Jun 2004 20:26:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22117 invoked by uid 99); 3 Jun 2004 20:26:08 -0000
Received: from [216.12.13.89] (HELO postfix.mail.ehatchersolutions.com) (216.12.13.89)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 13:26:08 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 0F841750600
	for <lucene-user@jakarta.apache.org>; Thu,  3 Jun 2004 16:25:47 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <F48023593BB6D4428EC1E89FA36DAD4C01B70ECA@nj320exchsrv.enterprise.com>
References: <F48023593BB6D4428EC1E89FA36DAD4C01B70ECA@nj320exchsrv.enterprise.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <321B9756-B59C-11D8-989D-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Writing a stemmer
Date: Thu, 3 Jun 2004 16:25:46 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 3, 2004, at 4:09 PM, Musku, Anil (LA) wrote:
> Can anyone provide some help on writing a stemmer for non-english 
> languages?

Have a look at the snowball project in the Lucene sandbox.  If its 
non-European-based languages, I suspect it's quite complex.  It's 
highly language dependent.

> How proficient must I be in a language for which I wish to write the 
> stemmer?

I would venture to say you would need to be an expert in a language to 
write a decent stemmer.  The SnowballAnalyzer is quite hairy 
underneath, that's for sure.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8581-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 03 21:19:29 2004
Return-Path: <lucene-user-return-8581-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1986 invoked from network); 3 Jun 2004 21:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Jun 2004 21:19:29 -0000
Received: (qmail 21494 invoked by uid 500); 3 Jun 2004 21:19:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20919 invoked by uid 500); 3 Jun 2004 21:19:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20904 invoked by uid 99); 3 Jun 2004 21:19:43 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 14:19:43 -0700
Received: (qmail 8282 invoked by uid 532); 3 Jun 2004 21:18:40 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.171982 secs); 03 Jun 2004 21:18:40 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 3 Jun 2004 21:18:40 -0000
Message-ID: <40BF95D4.7050806@tropo.com>
Date: Thu, 03 Jun 2004 14:19:16 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: bonus for exact case match
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does anyone have any experiences with giving a bonus for exactly 
matching case in queries?

One use case is in the java world maybe I want to see references to 
"Map" (java.util.Map)  but am not interested in a (geographical) "map".

I believe, in the context of Lucene, one way is to have an Analyzer that 
returns a TokenStream which, in cases where a word has some upper case 
characters, returns the word twice in that position, once as-is and once 
in lower case,  using the magic of Token.getPositionIncrement(). Then 
you'll need a query expander or whatnot which, when given a query like 
"Map", expands it to "Map^2 map".

Thoughts/comments?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8582-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 01:52:54 2004
Return-Path: <lucene-user-return-8582-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51266 invoked from network); 4 Jun 2004 01:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 01:52:54 -0000
Received: (qmail 70015 invoked by uid 500); 4 Jun 2004 01:53:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69966 invoked by uid 500); 4 Jun 2004 01:53:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69952 invoked by uid 99); 4 Jun 2004 01:53:08 -0000
Received: from [160.218.43.220] (HELO smtp.etmail.cz) (160.218.43.220)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 03 Jun 2004 18:53:08 -0700
Received: from COM (gprs40-2.eurotel.cz [160.218.40.2])
	by smtp.etmail.cz (Postfix) with SMTP id 97D0027299
	for <lucene-user@jakarta.apache.org>; Fri,  4 Jun 2004 03:52:33 +0200 (CEST)
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Writing a stemmer
From: "Leo Galambos" <lgs@centrum.cz>
Date: Fri, 4 Jun 2004 3:54:00 0200
Mime-Version: 1.0
X-Mailer: MultiMail(c) Deluxe 1998-2001 2.61, Palm, Inc.
X-Sender: lgs@centrum.cz
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 8bit
Message-Id: <20040604015233.97D0027299@smtp.etmail.cz>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher <erik@ehatchersolutions.com> wrote:
__________

>> How proficient must I be in a language for which I wish to write the 
>> stemmer?
>I would venture to say you would need to be an expert in a language to 
>write a decent stemmer.

I'm sorry for a self-promo ;), but
the stemmer of egothor project can be
adapted to any language, and you needn't be
a language expert. Moreover, the stemmer
achieves better F-measure than Porter's stemmers.

Cheers,
Leo



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8583-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 05:44:11 2004
Return-Path: <lucene-user-return-8583-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64200 invoked from network); 4 Jun 2004 05:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 05:44:11 -0000
Received: (qmail 60720 invoked by uid 500); 4 Jun 2004 05:44:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60694 invoked by uid 500); 4 Jun 2004 05:44:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60677 invoked by uid 99); 4 Jun 2004 05:44:25 -0000
Received: from [203.199.122.36] (HELO web8306.mail.in.yahoo.com) (203.199.122.36)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 03 Jun 2004 22:44:25 -0700
Message-ID: <20040604054344.44706.qmail@web8306.mail.in.yahoo.com>
Received: from [210.7.75.237] by web8306.mail.in.yahoo.com via HTTP; Fri, 04 Jun 2004 06:43:44 BST
Date: Fri, 4 Jun 2004 06:43:44 +0100 (BST)
From: =?iso-8859-1?q?Jayant=20Kumar?= <jayantlists@yahoo.co.in>
Subject: Re: problems with lucene in multithreaded environment
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40BEA9C7.2000007@apache.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-626897822-1086327824=:43546"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-626897822-1086327824=:43546
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Content-Id: 
Content-Disposition: inline

We conducted a test on our search for 500 requests
given in 27 seconds. We noticed that in the first 5
seconds, the results were coming in 100 to 500 ms. But
as the queue size kept increasing, the response time
of the search increased drastically to approx 80-100
seconds. 

Please find enclosed jvmdump.txt which contains a dump
of our search program after about 20 seconds of
starting the program.

Also enclosed is the file queries.txt which contains
few sample search queries.

Please note that this is done on a sample of 400,000
documents (450MB) on P4 having 1GB RAM.

Kindly let us know if this helps to identify the cause
of slow response.

Jayant

 --- Doug Cutting <cutting@apache.org> wrote: > Jayant
Kumar wrote:
> > We recently tested lucene with an index size of 2
> GB
> > which has about 1,500,000 documents, each document
> > having about 25 fields. The frequency of search
> was
> > about 20 queries per second. This resulted in an
> > average response time of about 20 seconds approx
> > per search.
> 
> That sounds slow, unless your queries are very
> complex.  What are your 
> queries like?
> 
> > What we observed was that lucene queues
> > the queries and does not release them until the
> > results are found. so the queries that have come
> in
> > later take up about 500 seconds. Please let us
> know
> > whether there is a technique to optimize lucene in
> > such circumstances. 
> 
> Multiple queries executed from different threads
> using a single searcher 
> should not queue, but should run in parallel.  A
> technique to find out 
> where threads are queueing is to get a thread dump
> and see where all of 
> the threads are stuck.  In Solaris and Linux,
> sending the JVM a SIGQUIT 
> will give a thread dump.  On Windows, use
> Control-Break.
> 
> Doug
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>  

________________________________________________________________________
Yahoo! India Matrimony: Find your partner online. http://yahoo.shaadi.com/india-matrimony/
--0-626897822-1086327824=:43546
Content-Type: text/plain; name="jvmdump.txt"
Content-Description: jvmdump.txt
Content-Disposition: inline; filename="jvmdump.txt"

"Thread-14" prio=1 tid=0x080a7420 nid=0x468e waiting for monitor entry [4d61a000..4d61ac18]
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
        - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:59)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at resdex.searchinc.getHits(searchinc.java:752)
        at resdex.searchinc.Search(searchinc.java:943)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:64)
        at java.lang.Thread.run(Thread.java:534)

"Thread-12" prio=1 tid=0x080a58e0 nid=0x468e waiting for monitor entry [4d51a000..4d51ad18]
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
        - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:59)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at resdex.searchinc.getHits(searchinc.java:752)
        at resdex.searchinc.Search(searchinc.java:943)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:64)
        at java.lang.Thread.run(Thread.java:534)

"Thread-11" prio=1 tid=0x080a4b40 nid=0x468e waiting for monitor entry [4d49a000..4d49ad98]
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
        - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:59)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at resdex.searchinc.getHits(searchinc.java:752)
        at resdex.searchinc.Search(searchinc.java:943)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:64)
        at java.lang.Thread.run(Thread.java:534)

"Thread-8" prio=1 tid=0x080a2260 nid=0x468e waiting for monitor entry [4d31a000..4d31af18]
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
        - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:59)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at resdex.searchinc.getHits(searchinc.java:752)
        at resdex.searchinc.Search(searchinc.java:943)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:64)
        at java.lang.Thread.run(Thread.java:534)

"DestroyJavaVM" prio=1 tid=0x08052140 nid=0x468e waiting on condition [0..bfffd004]

"Thread-0" prio=1 tid=0x0820cdb0 nid=0x468e runnable [4cf0a000..4cf0a318]
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)
        - locked <0x44ef91e0> (a java.net.PlainSocketImpl)
        at java.net.ServerSocket.implAccept(ServerSocket.java:448)
        at java.net.ServerSocket.accept(ServerSocket.java:419)
        at resdex.Server.run(Server.java:95)
        at java.lang.Thread.run(Thread.java:534)

"Signal Dispatcher" daemon prio=1 tid=0x0809ce70 nid=0x468e waiting on condition [0..0]

"Finalizer" daemon prio=1 tid=0x080884d8 nid=0x468e in Object.wait() [4c921000..4c921598]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x44c29be0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked <0x44c29be0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=1 tid=0x080878e8 nid=0x468e in Object.wait() [4c8a1000..4c8a1618]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x44c29c48> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:429)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)
        - locked <0x44c29c48> (a java.lang.ref.Reference$Lock)

"VM Thread" prio=1 tid=0x080865c8 nid=0x468e runnable

"VM Periodic Task Thread" prio=1 tid=0x0809f680 nid=0x468e waiting on condition
"Suspend Checker Thread" prio=1 tid=0x0809c4b8 nid=0x468e runnable

--0-626897822-1086327824=:43546
Content-Type: text/plain; name="queries.txt"
Content-Description: queries.txt
Content-Disposition: inline; filename="queries.txt"

Query : (  (  (  (  (  FIELD1: proof OR  FIELD2: proof OR  FIELD3: proof OR  FIELD4: proof OR  FIELD5: proof OR  FIELD6: proof OR  FIELD7: proof ) AND (  FIELD1: "george bush" OR  FIELD2: "george bush" OR  FIELD3: "george bush" OR  FIELD4: "george bush" OR  FIELD5: "george bush" OR  FIELD6: "george bush" OR  FIELD7: "george bush" )  ) AND (  FIELD1: script OR  FIELD2: script OR  FIELD3: script OR  FIELD4: script OR  FIELD5: script OR  FIELD6: script OR  FIELD7: script )  ) AND (  (  FIELD1: san OR  FIELD2: san OR  FIELD3: san OR  FIELD4: san OR  FIELD5: san OR  FIELD6: san OR  FIELD7: san ) OR (  (  FIELD1: war OR  FIELD2: war OR  FIELD3: war OR  FIELD4: war OR  FIELD5: war OR  FIELD6: war OR  FIELD7: war ) OR (  (  FIELD1: gulf OR  FIELD2: gulf OR  FIELD3: gulf OR  FIELD4: gulf OR  FIELD5: gulf OR  FIELD6: gulf OR  FIELD7: gulf ) OR (  (  FIELD1: laden OR  FIELD2: laden OR  FIELD3: laden OR  FIELD4: laden OR  FIELD5: laden OR  FIELD6: laden OR  FIELD7: laden ) OR (  (  FIELD1: ttouristeat OR  FIELD2: ttouristeat OR  FIELD3: ttouristeat OR  FIELD4: ttouristeat OR  FIELD5: ttouristeat OR  FIELD6: ttouristeat OR  FIELD7: ttouristeat ) OR (  (  FIELD1: pow OR  FIELD2: pow OR  FIELD3: pow OR  FIELD4: pow OR  FIELD5: pow OR  FIELD6: pow OR  FIELD7: pow ) OR (  FIELD1: bin OR  FIELD2: bin OR  FIELD3: bin OR  FIELD4: bin OR  FIELD5: bin OR  FIELD6: bin OR  FIELD7: bin )  )  )  )  )  )  )  )  ) AND  RANGE: ([ 0800 TO 1100 ]) AND  (  S_IDa: (7 OR 8 OR 9 OR 10 OR 11 OR 12 OR 13 OR 14 OR 15 OR 16 OR 17 )  or  S_IDb: (2 )  )
Time taken : 86304 ms

Query : (  (  (  FIELD1: india OR  FIELD2: india OR  FIELD3: india OR  FIELD4: india OR  FIELD5: india OR  FIELD6: india OR  FIELD7: india ) AND (  (  FIELD1: tourist OR  FIELD2: tourist OR  FIELD3: tourist OR  FIELD4: tourist OR  FIELD5: tourist OR  FIELD6: tourist OR  FIELD7: tourist ) OR (  (  FIELD1: attraction OR  FIELD2: attraction OR  FIELD3: attraction OR  FIELD4: attraction OR  FIELD5: attraction OR  FIELD6: attraction OR  FIELD7: attraction ) OR (  (  FIELD1: ps OR  FIELD2: ps OR  FIELD3: ps OR  FIELD4: ps OR  FIELD5: ps OR  FIELD6: ps OR  FIELD7: ps ) OR (  (  FIELD1: pm OR  FIELD2: pm OR  FIELD3: pm OR  FIELD4: pm OR  FIELD5: pm OR  FIELD6: pm OR  FIELD7: pm ) OR (  (  FIELD1: fico OR  FIELD2: fico OR  FIELD3: fico OR  FIELD4: fico OR  FIELD5: fico OR  FIELD6: fico OR  FIELD7: fico ) OR (  (  FIELD1: basis OR  FIELD2: basis OR  FIELD3: basis OR  FIELD4: basis OR  FIELD5: basis OR  FIELD6: basis OR  FIELD7: basis ) OR (  (  FIELD1: abap OR  FIELD2: abap OR  FIELD3: abap OR  FIELD4: abap OR  FIELD5: abap OR  FIELD6: abap OR  FIELD7: abap ) OR (  FIELD1: destination OR  FIELD2: destination OR  FIELD3: destination OR  FIELD4: destination OR  FIELD5: destination OR  FIELD6: destination OR  FIELD7: destination )  )  )  )  )  )  )  )  )  ) AND  LOC_A: (27 )
Time taken : 83067 ms

Query : (  (  (  (  (  (  (  (  (  FIELD1: usa OR  FIELD2: usa OR  FIELD3: usa OR  FIELD4: usa OR  FIELD5: usa OR  FIELD6: usa OR  FIELD7: usa ) OR (  FIELD1: "vegas / chicago" OR  FIELD2: "vegas / chicago" OR  FIELD3: "vegas / chicago" OR  FIELD4: "vegas / chicago" OR  FIELD5: "vegas / chicago" OR  FIELD6: "vegas / chicago" OR  FIELD7: "vegas / chicago" )  ) AND (  (  FIELD1: " & " OR  FIELD2: " & " OR  FIELD3: " & " OR  FIELD4: " & " OR  FIELD5: " & " OR  FIELD6: " & " OR  FIELD7: " & " ) AND (  (  FIELD1: fun OR  FIELD2: fun OR  FIELD3: fun OR  FIELD4: fun OR  FIELD5: fun OR  FIELD6: fun OR  FIELD7: fun ) AND (  FIELD1: large OR  FIELD2: large OR  FIELD3: large OR  FIELD4: large OR  FIELD5: large OR  FIELD6: large OR  FIELD7: large )  )  )  ) AND (  (  FIELD1: fc OR  FIELD2: fc OR  FIELD3: fc OR  FIELD4: fc OR  FIELD5: fc OR  FIELD6: fc OR  FIELD7: fc ) AND (  (  FIELD1: san OR  FIELD2: san OR  FIELD3: san OR  FIELD4: san OR  FIELD5: san OR  FIELD6: san OR  FIELD7: san ) AND (  (  FIELD1: tourist OR  FIELD2: tourist OR  FIELD3: tourist OR  FIELD4: tourist OR  FIELD5: tourist OR  FIELD6: tourist OR  FIELD7: tourist ) AND (  FIELD1: casino OR  FIELD2: casino OR  FIELD3: casino OR  FIELD4: casino OR  FIELD5: casino OR  FIELD6: casino OR  FIELD7: casino )  )  )  )  ) AND (  (  FIELD1: fc OR  FIELD2: fc OR  FIELD3: fc OR  FIELD4: fc OR  FIELD5: fc OR  FIELD6: fc OR  FIELD7: fc ) OR (  (  FIELD1: san OR  FIELD2: san OR  FIELD3: san OR  FIELD4: san OR  FIELD5: san OR  FIELD6: san OR  FIELD7: san ) OR (  (  FIELD1: tourist OR  FIELD2: tourist OR  FIELD3: tourist OR  FIELD4: tourist OR  FIELD5: tourist OR  FIELD6: tourist OR  FIELD7: tourist ) OR (  FIELD1: casino OR  FIELD2: casino OR  FIELD3: casino OR  FIELD4: casino OR  FIELD5: casino OR  FIELD6: casino OR  FIELD7: casino )  )  )  )  ) AND (  (  FIELD1: fc OR  FIELD2: fc OR  FIELD3: fc OR  FIELD4: fc OR  FIELD5: fc OR  FIELD6: fc OR  FIELD7: fc ) OR (  (  FIELD1: san OR  FIELD2: san OR  FIELD3: san OR  FIELD4: san OR  FIELD5: san OR  FIELD6: san OR  FIELD7: san ) OR (  (  FIELD1: tourist OR  FIELD2: tourist OR  FIELD3: tourist OR  FIELD4: tourist OR  FIELD5: tourist OR  FIELD6: tourist OR  FIELD7: tourist ) OR (  FIELD1: casino OR  FIELD2: casino OR  FIELD3: casino OR  FIELD4: casino OR  FIELD5: casino OR  FIELD6: casino OR  FIELD7: casino )  )  )  )  ) AND (  FIELD1: war OR  FIELD2: war OR  FIELD3: war OR  FIELD4: war OR  FIELD5: war OR  FIELD6: war OR  FIELD7: war )  ) AND (  FIELD1: war OR  FIELD2: war OR  FIELD3: war OR  FIELD4: war OR  FIELD5: war OR  FIELD6: war OR  FIELD7: war )  )  ) AND  RANGE: ([ 0000 TO 0100 ]) AND  S_IDa: (7 OR 8 OR 9 OR 10 OR 11 OR 12 OR 13 OR 14 OR 15 OR 16 OR 17 )
Time taken : 86874 ms

Query : (  (  (  (  FIELD1: india OR  FIELD2: india OR  FIELD3: india OR  FIELD4: india OR  FIELD5: india OR  FIELD6: india OR  FIELD7: india ) AND (  (  FIELD1: touristms OR  FIELD2: touristms OR  FIELD3: touristms OR  FIELD4: touristms OR  FIELD5: touristms OR  FIELD6: touristms OR  FIELD7: touristms ) OR (  (  FIELD1: touristis OR  FIELD2: touristis OR  FIELD3: touristis OR  FIELD4: touristis OR  FIELD5: touristis OR  FIELD6: touristis OR  FIELD7: touristis ) OR (  FIELD1: tourist OR  FIELD2: tourist OR  FIELD3: tourist OR  FIELD4: tourist OR  FIELD5: tourist OR  FIELD6: tourist OR  FIELD7: tourist )  )  )  ) AND (  (  FIELD1: h1 OR  FIELD2: h1 OR  FIELD3: h1 OR  FIELD4: h1 OR  FIELD5: h1 OR  FIELD6: h1 OR  FIELD7: h1 ) OR (  (  FIELD1: b1 OR  FIELD2: b1 OR  FIELD3: b1 OR  FIELD4: b1 OR  FIELD5: b1 OR  FIELD6: b1 OR  FIELD7: b1 ) OR (  (  FIELD1: "h1 / b1" OR  FIELD2: "h1 / b1" OR  FIELD3: "h1 / b1" OR  FIELD4: "h1 / b1" OR  FIELD5: "h1 / b1" OR  FIELD6: "h1 / b1" OR  FIELD7: "h1 / b1" ) OR (  (  FIELD1: h OR  FIELD2: h OR  FIELD3: h OR  FIELD4: h OR  FIELD5: h OR  FIELD6: h OR  FIELD7: h ) OR (  FIELD1: "b 1" OR  FIELD2: "b 1" OR  FIELD3: "b 1" OR  FIELD4: "b 1" OR  FIELD5: "b 1" OR  FIELD6: "b 1" OR  FIELD7: "b 1" )  )  )  )  )  )  )
Time taken : 78696 ms

Query : (  (  (  FIELD1: relationship OR  FIELD2: relationship OR  FIELD3: relationship OR  FIELD4: relationship OR  FIELD5: relationship OR  FIELD6: relationship OR  FIELD7: relationship ) OR (  (  FIELD1: liability OR  FIELD2: liability OR  FIELD3: liability OR  FIELD4: liability OR  FIELD5: liability OR  FIELD6: liability OR  FIELD7: liability ) OR (  (  FIELD1: banks OR  FIELD2: banks OR  FIELD3: banks OR  FIELD4: banks OR  FIELD5: banks OR  FIELD6: banks OR  FIELD7: banks ) OR (  (  FIELD1: mutual OR  FIELD2: mutual OR  FIELD3: mutual OR  FIELD4: mutual OR  FIELD5: mutual OR  FIELD6: mutual OR  FIELD7: mutual ) OR (  (  FIELD1: funds OR  FIELD2: funds OR  FIELD3: funds OR  FIELD4: funds OR  FIELD5: funds OR  FIELD6: funds OR  FIELD7: funds ) OR (  (  FIELD1: sales OR  FIELD2: sales OR  FIELD3: sales OR  FIELD4: sales OR  FIELD5: sales OR  FIELD6: sales OR  FIELD7: sales ) OR (  FIELD1: hni OR  FIELD2: hni OR  FIELD3: hni OR  FIELD4: hni OR  FIELD5: hni OR  FIELD6: hni OR  FIELD7: hni )  )  )  )  )  )  )  ) AND  RANGE: ([ 0200 TO 0900 ]) AND  REFIDa: (44 OR 44 OR 45 ) AND  C_IDa: (14 )
Time taken : 66183 ms


--0-626897822-1086327824=:43546
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0-626897822-1086327824=:43546--

From lucene-user-return-8584-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 07:07:52 2004
Return-Path: <lucene-user-return-8584-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14152 invoked from network); 4 Jun 2004 07:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 07:07:52 -0000
Received: (qmail 79922 invoked by uid 500); 4 Jun 2004 07:08:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79841 invoked by uid 500); 4 Jun 2004 07:08:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79828 invoked by uid 99); 4 Jun 2004 07:08:08 -0000
Received: from [217.12.10.64] (HELO web25204.mail.ukl.yahoo.com) (217.12.10.64)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 04 Jun 2004 00:08:08 -0700
Message-ID: <20040604070724.75535.qmail@web25204.mail.ukl.yahoo.com>
Received: from [213.30.157.202] by web25204.mail.ukl.yahoo.com via HTTP; Fri, 04 Jun 2004 09:07:24 CEST
Date: Fri, 4 Jun 2004 09:07:24 +0200 (CEST)
From: =?iso-8859-1?q?Antoine=20Brun?= <antoine_spam_brun@yahoo.fr>
Subject: using previous results on a new search
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2055165935-1086332844=:75530"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-2055165935-1086332844=:75530
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello,
 
I am new to Lucene and more generally to search engines. As my company has decided to base its new software on Lucene, I have one first question about Lucene querying functionnalities.
 
We are investigating the possibility to insert previous search results to a new query.  
 
Does anyone knows if it is possible or if such an evolution is under development
 
Thanks
 
    Antoine Brun

		
---------------------------------
Yahoo! Mail : votre e-mail personnel et gratuit qui vous suit partout !
Crez votre Yahoo! Mail

Dialoguez en direct avec vos amis grce  Yahoo! Messenger !
--0-2055165935-1086332844=:75530--

From lucene-user-return-8585-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 07:46:17 2004
Return-Path: <lucene-user-return-8585-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51896 invoked from network); 4 Jun 2004 07:46:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 07:46:17 -0000
Received: (qmail 50899 invoked by uid 500); 4 Jun 2004 07:46:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50876 invoked by uid 500); 4 Jun 2004 07:46:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50852 invoked by uid 99); 4 Jun 2004 07:46:32 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 00:46:32 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i546u6d00453
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 01:56:07 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Fri, 04 Jun 2004 12:26:17 +0530
Message-ID: <007101c44a00$8db6cf40$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: <lucene-user@jakarta.apache.org>
Subject: score and frequency
Date: Fri, 4 Jun 2004 12:22:50 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_006E_01C44A2E.A754CC80"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_006E_01C44A2E.A754CC80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am having some problems with the score of lucene.=20
I am trying to get the results displayed according to hits.score and it =
is giving the results correctly.=20
However I do not want the frequency factor to be used for the =
computation of the score.=20

Is it possible to get the score which does not have the frequency factor =
in it ?=20


Regards,
Niraj=20

------=_NextPart_000_006E_01C44A2E.A754CC80--




From lucene-user-return-8586-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 08:16:21 2004
Return-Path: <lucene-user-return-8586-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74374 invoked from network); 4 Jun 2004 08:16:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 08:16:21 -0000
Received: (qmail 95009 invoked by uid 500); 4 Jun 2004 08:16:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94870 invoked by uid 500); 4 Jun 2004 08:16:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94800 invoked by uid 99); 4 Jun 2004 08:16:21 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 01:16:21 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 9CACA750EA3
	for <lucene-user@jakarta.apache.org>; Fri,  4 Jun 2004 04:15:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040604070724.75535.qmail@web25204.mail.ukl.yahoo.com>
References: <20040604070724.75535.qmail@web25204.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5A45A188-B5FF-11D8-9D57-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using previous results on a new search
Date: Fri, 4 Jun 2004 04:15:34 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 4, 2004, at 3:07 AM, Antoine Brun wrote:
> We are investigating the possibility to insert previous search results 
> to a new query.
>
> Does anyone knows if it is possible or if such an evolution is under 
> development

I suppose you mean "search within search", so that the second search is 
constrained by the results of the first query.  If so....

There are two primary options:

   - Use QueryFilter with the previous query as the filter (search the 
archives for QueryFilter and Doug's recommendations against using it 
for this purpose)

   - Combine the previous query with the current query using 
BooleanQuery, using the previous query as required.

The BooleanQuery is the most recommended way.

	Erik

p.s. This ought to go on the wiki :)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8587-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 08:25:45 2004
Return-Path: <lucene-user-return-8587-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81079 invoked from network); 4 Jun 2004 08:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 08:25:45 -0000
Received: (qmail 17409 invoked by uid 500); 4 Jun 2004 08:26:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17305 invoked by uid 500); 4 Jun 2004 08:26:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17290 invoked by uid 99); 4 Jun 2004 08:26:03 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 01:26:03 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 14ECD7510E2
	for <lucene-user@jakarta.apache.org>; Fri,  4 Jun 2004 04:25:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <007101c44a00$8db6cf40$b101a8c0@emacmillan.edu>
References: <007101c44a00$8db6cf40$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <B8DE3ACA-B600-11D8-9D57-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: score and frequency
Date: Fri, 4 Jun 2004 04:25:22 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> Hi,
>
> I am having some problems with the score of lucene.
> I am trying to get the results displayed according to hits.score and 
> it is giving the results correctly.
> However I do not want the frequency factor to be used for the 
> computation of the score.
>
> Is it possible to get the score which does not have the frequency 
> factor in it ?

Have a look at the javadocs for Similarity.  DefaultSimilarity is used 
unless otherwise specified.  You could subclass that and override this:

   public float tf(float freq) {
     return (float)Math.sqrt(freq);
   }

and return 1.0.  This might give you the effect you want.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8588-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 08:40:12 2004
Return-Path: <lucene-user-return-8588-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92208 invoked from network); 4 Jun 2004 08:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 08:40:12 -0000
Received: (qmail 42712 invoked by uid 500); 4 Jun 2004 08:40:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42647 invoked by uid 500); 4 Jun 2004 08:40:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42609 invoked by uid 99); 4 Jun 2004 08:40:28 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 04 Jun 2004 01:40:28 -0700
Message-ID: <20040604083947.43198.qmail@web12702.mail.yahoo.com>
Received: from [194.152.216.3] by web12702.mail.yahoo.com via HTTP; Fri, 04 Jun 2004 01:39:47 PDT
Date: Fri, 4 Jun 2004 01:39:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: using previous results on a new search
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <5A45A188-B5FF-11D8-9D57-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> p.s. This ought to go on the wiki :)

It's now included in a Lucene FAQ.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8589-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 09:47:23 2004
Return-Path: <lucene-user-return-8589-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38170 invoked from network); 4 Jun 2004 09:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 09:47:22 -0000
Received: (qmail 64833 invoked by uid 500); 4 Jun 2004 09:47:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64732 invoked by uid 500); 4 Jun 2004 09:47:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64707 invoked by uid 99); 4 Jun 2004 09:47:41 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 02:47:41 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i549kqd06317
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 04:46:52 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Fri, 04 Jun 2004 15:16:55 +0530
Message-ID: <00ea01c44a18$666e6d40$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <007101c44a00$8db6cf40$b101a8c0@emacmillan.edu> <B8DE3ACA-B600-11D8-9D57-000393A564E6@ehatchersolutions.com>
Subject: Re: score and frequency
Date: Fri, 4 Jun 2004 15:13:32 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

Thanks for the suggestion.

I tried this:
public class RelevanceSimilarity extends DefaultSimilarity

{

public float tf(float freq) {

System.out.println("discounting frequency");

return (float)1;

}

}



and in my query class, I used :

Similarity.setDefault(similarity);

Hits hits = is.search(query);

for(i = 0; i < hits.length(); i ++)

  result = result + hits.score(i);



However, this is still not giving me the expected result. Do I need to do
something else?


Regards,
Niraj

----- Original Message -----
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, June 04, 2004 1:55 PM
Subject: Re: score and frequency


> On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> > Hi,
> >
> > I am having some problems with the score of lucene.
> > I am trying to get the results displayed according to hits.score and
> > it is giving the results correctly.
> > However I do not want the frequency factor to be used for the
> > computation of the score.
> >
> > Is it possible to get the score which does not have the frequency
> > factor in it ?
>
> Have a look at the javadocs for Similarity.  DefaultSimilarity is used
> unless otherwise specified.  You could subclass that and override this:
>
>    public float tf(float freq) {
>      return (float)Math.sqrt(freq);
>    }
>
> and return 1.0.  This might give you the effect you want.
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8590-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 09:57:04 2004
Return-Path: <lucene-user-return-8590-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45170 invoked from network); 4 Jun 2004 09:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 09:57:04 -0000
Received: (qmail 84722 invoked by uid 500); 4 Jun 2004 09:57:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84681 invoked by uid 500); 4 Jun 2004 09:57:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84646 invoked by uid 99); 4 Jun 2004 09:57:22 -0000
Received: from [62.67.200.156] (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 02:57:22 -0700
Received: (qmail 21039 invoked from network); 4 Jun 2004 09:56:33 -0000
Received: from unknown (HELO tcn.local) (652696@[217.93.29.143])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 4 Jun 2004 09:56:33 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 802FF3567
	for <lucene-user@jakarta.apache.org>; Fri,  4 Jun 2004 11:56:31 +0200 (CEST)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Author or SearchBean
Date: Fri, 4 Jun 2004 11:56:30 +0200
User-Agent: KMail/1.6.2
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200406041156.31092.lucene@nitwit.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Where can I get the mail address of the author of SearchBean (sandbox) from?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8591-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 12:14:35 2004
Return-Path: <lucene-user-return-8591-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38348 invoked from network); 4 Jun 2004 12:14:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 12:14:35 -0000
Received: (qmail 62494 invoked by uid 500); 4 Jun 2004 12:14:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62400 invoked by uid 500); 4 Jun 2004 12:14:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62376 invoked by uid 99); 4 Jun 2004 12:14:30 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 05:14:30 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 86E1F754543
	for <lucene-user@jakarta.apache.org>; Fri,  4 Jun 2004 08:14:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406041156.31092.lucene@nitwit.de>
References: <200406041156.31092.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <B2A053C3-B620-11D8-A3EA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Author or SearchBean
Date: Fri, 4 Jun 2004 08:14:15 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

SearchBean should be discussed on this list - no need to contact the 
original developer directly (in fact, it's a better practice to discuss 
open source code in the appropriate public forums).

	Erik


On Jun 4, 2004, at 5:56 AM, lucene@nitwit.de wrote:

> Hi!
>
> Where can I get the mail address of the author of SearchBean (sandbox) 
> from?
>
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8592-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 12:40:11 2004
Return-Path: <lucene-user-return-8592-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53914 invoked from network); 4 Jun 2004 12:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 12:40:11 -0000
Received: (qmail 16025 invoked by uid 500); 4 Jun 2004 12:40:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15995 invoked by uid 500); 4 Jun 2004 12:40:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15980 invoked by uid 99); 4 Jun 2004 12:40:07 -0000
Received: from [66.218.94.75] (HELO web90104.mail.scd.yahoo.com) (66.218.94.75)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 04 Jun 2004 05:40:07 -0700
Message-ID: <20040604123954.59830.qmail@web90104.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90104.mail.scd.yahoo.com via HTTP; Fri, 04 Jun 2004 05:39:54 PDT
Date: Fri, 4 Jun 2004 05:39:54 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: why the score is not always 1.0 when comparing two identical strings?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <A6533124-B55B-11D8-90CB-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1845640017-1086352794=:59819"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1845640017-1086352794=:59819
Content-Type: text/plain; charset=us-ascii

hi,
 
i'm not so convinced by the way Lucene compute the score. 
 
I tried to compare two string by using a program. In the program, i index the first string as if i indexed a document and use the queryParser with the same analyzer that I used to index the first string to analyze my second string and to form a query from it. 

I run the program for the first time with the first string as: 
"This is the text to index with Lucene CREATE TABLE Elements ( TYPELEMENT varchar (255) NULL , CLEELEMENT varchar (255) NULL , LIBELEM varchar (255) NULL , CODENTITE varchar (255) NULL , CLEENTITE varchar (255) NULL , DONNNEEA1 varchar (255) NULL , DONNEEB1 varchar (255) NULL , DONNEEA2 varchar (255) NULL , DONNEEB2 varchar (255) NULL , DONNEEA3 varchar (255) NULL , DONNEEB3 varchar (255) NULL , DONNEEA4 varchar (255) NULL , DONNEEB4 varchar (255) NULL , DONNEEA5 varchar (255) NULL , DONNEEB5 varchar (255) NULL , TOP1 varchar (255) NULL , TOP2 varchar (255) NULL , TOP3 varchar (255) NULL , TOP4 varchar (255) NULL , TOP5 varchar (255) NULL , QTE1 varchar (255) NULL , QTE2 varchar (255) NULL , QTE3 varchar (255) NULL , MONTANT1 varchar (255) NULL , MONTANT2 varchar (255) NULL , MONTANT3 varchar (255) NULL , DATE1 varchar (255) NULL , DATE2 varchar (255) NULL , DATE3 varchar (255) NULL , STATUT varchar (255) NULL , DATPRISENCPTSTAT varchar (255) NULL )".
 
I used the same string as to form my query and i got the final score of these two string which is 1.0.
 
Then something suprised me when i changed to two strings into "All work and no play makes Jack a dull boy" and compared them by using one as a document and other to form the query. The result was just not 1.0. it was 0.3033.. instead. 
 
I used Eclipse as my Java Editor. Any conflict with Lucene?
 
Any idea/suggestion of what went wrong over here?
 
Uddam

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-1845640017-1086352794=:59819--

From lucene-user-return-8593-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 14:39:05 2004
Return-Path: <lucene-user-return-8593-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56408 invoked from network); 4 Jun 2004 14:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 14:39:05 -0000
Received: (qmail 74692 invoked by uid 500); 4 Jun 2004 14:39:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74606 invoked by uid 500); 4 Jun 2004 14:39:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74574 invoked by uid 99); 4 Jun 2004 14:39:05 -0000
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 07:39:05 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i54EcH4c027861
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 16:38:27 +0200
Message-ID: <40C08956.9090404@kelkoo.net>
Date: Fri, 04 Jun 2004 16:38:14 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: why the score is not always 1.0 when comparing two identical
 strings?
References: <20040604123954.59830.qmail@web90104.mail.scd.yahoo.com>
In-Reply-To: <20040604123954.59830.qmail@web90104.mail.scd.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You're not the first one to ask this question.
I suggest you to have a look in the mailing list archive and to search 
for the messages 'Lucene Scoring Behavior'.
Here is the link below:
http://issues.apache.org/eyebrowse/SearchList?listId=&listName=lucene-user%40jakarta.apache.org&searchText=%22lucene+scoring+behavior%22&defaultField=subject&Search=Search

Cheers,
Franck

uddam chukmol wrote:
> hi,
>  
> i'm not so convinced by the way Lucene compute the score. 
>  
> I tried to compare two string by using a program. In the program, i index the first string as if i indexed a document and use the queryParser with the same analyzer that I used to index the first string to analyze my second string and to form a query from it. 
> 
> I run the program for the first time with the first string as: 
> "This is the text to index with Lucene CREATE TABLE Elements ( TYPELEMENT varchar (255) NULL , CLEELEMENT varchar (255) NULL , LIBELEM varchar (255) NULL , CODENTITE varchar (255) NULL , CLEENTITE varchar (255) NULL , DONNNEEA1 varchar (255) NULL , DONNEEB1 varchar (255) NULL , DONNEEA2 varchar (255) NULL , DONNEEB2 varchar (255) NULL , DONNEEA3 varchar (255) NULL , DONNEEB3 varchar (255) NULL , DONNEEA4 varchar (255) NULL , DONNEEB4 varchar (255) NULL , DONNEEA5 varchar (255) NULL , DONNEEB5 varchar (255) NULL , TOP1 varchar (255) NULL , TOP2 varchar (255) NULL , TOP3 varchar (255) NULL , TOP4 varchar (255) NULL , TOP5 varchar (255) NULL , QTE1 varchar (255) NULL , QTE2 varchar (255) NULL , QTE3 varchar (255) NULL , MONTANT1 varchar (255) NULL , MONTANT2 varchar (255) NULL , MONTANT3 varchar (255) NULL , DATE1 varchar (255) NULL , DATE2 varchar (255) NULL , DATE3 varchar (255) NULL , STATUT varchar (255) NULL , DATPRISENCPTSTAT varchar (255) NULL )".
>  
> I used the same string as to form my query and i got the final score of these two string which is 1.0.
>  
> Then something suprised me when i changed to two strings into "All work and no play makes Jack a dull boy" and compared them by using one as a document and other to form the query. The result was just not 1.0. it was 0.3033.. instead. 
>  
> I used Eclipse as my Java Editor. Any conflict with Lucene?
>  
> Any idea/suggestion of what went wrong over here?
>  
> Uddam
> 
> 		
> ---------------------------------
> Do you Yahoo!?
> Friends.  Fun. Try the all-new Yahoo! Messenger


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8594-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 15:07:00 2004
Return-Path: <lucene-user-return-8594-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77437 invoked from network); 4 Jun 2004 15:07:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 15:07:00 -0000
Received: (qmail 49867 invoked by uid 500); 4 Jun 2004 15:07:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49648 invoked by uid 500); 4 Jun 2004 15:07:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49633 invoked by uid 99); 4 Jun 2004 15:07:01 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 08:07:01 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BWGHM-0003CF-00
	for lucene-user@jakarta.apache.org; Fri, 04 Jun 2004 11:06:44 -0400
Message-ID: <035f01c44a45$8f5d9410$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040604123954.59830.qmail@web90104.mail.scd.yahoo.com>
Subject: Re: why the score is not always 1.0 when comparing two identical strings?
Date: Fri, 4 Jun 2004 11:06:48 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nothing is wrong.  When the maximum relevance score is greater than one, all
hit scores are normalized (making the highest score 1.0).  When the maximum
score is less than 1, normalization does not occur.  The more complex the
query, the more likely that the raw (non-normalized) score will be less than
one.  Use searcher.explain() to get the details.

HTH,

Terry

----- Original Message ----- 
From: "uddam chukmol" <uddam_chukmol@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, June 04, 2004 8:39 AM
Subject: why the score is not always 1.0 when comparing two identical
strings?


> hi,
>
> i'm not so convinced by the way Lucene compute the score.
>
> I tried to compare two string by using a program. In the program, i index
the first string as if i indexed a document and use the queryParser with the
same analyzer that I used to index the first string to analyze my second
string and to form a query from it.
>
> I run the program for the first time with the first string as:
> "This is the text to index with Lucene CREATE TABLE Elements ( TYPELEMENT
varchar (255) NULL , CLEELEMENT varchar (255) NULL , LIBELEM varchar (255)
NULL , CODENTITE varchar (255) NULL , CLEENTITE varchar (255) NULL ,
DONNNEEA1 varchar (255) NULL , DONNEEB1 varchar (255) NULL , DONNEEA2
varchar (255) NULL , DONNEEB2 varchar (255) NULL , DONNEEA3 varchar (255)
NULL , DONNEEB3 varchar (255) NULL , DONNEEA4 varchar (255) NULL , DONNEEB4
varchar (255) NULL , DONNEEA5 varchar (255) NULL , DONNEEB5 varchar (255)
NULL , TOP1 varchar (255) NULL , TOP2 varchar (255) NULL , TOP3 varchar
(255) NULL , TOP4 varchar (255) NULL , TOP5 varchar (255) NULL , QTE1
varchar (255) NULL , QTE2 varchar (255) NULL , QTE3 varchar (255) NULL ,
MONTANT1 varchar (255) NULL , MONTANT2 varchar (255) NULL , MONTANT3 varchar
(255) NULL , DATE1 varchar (255) NULL , DATE2 varchar (255) NULL , DATE3
varchar (255) NULL , STATUT varchar (255) NULL , DATPRISENCPTSTAT varchar
(255) NULL )".
>
> I used the same string as to form my query and i got the final score of
these two string which is 1.0.
>
> Then something suprised me when i changed to two strings into "All work
and no play makes Jack a dull boy" and compared them by using one as a
document and other to form the query. The result was just not 1.0. it was
0.3033.. instead.
>
> I used Eclipse as my Java Editor. Any conflict with Lucene?
>
> Any idea/suggestion of what went wrong over here?
>
> Uddam
>
>
> ---------------------------------
> Do you Yahoo!?
> Friends.  Fun. Try the all-new Yahoo! Messenger


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8595-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 15:10:48 2004
Return-Path: <lucene-user-return-8595-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79950 invoked from network); 4 Jun 2004 15:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 15:10:48 -0000
Received: (qmail 60760 invoked by uid 500); 4 Jun 2004 15:10:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60692 invoked by uid 500); 4 Jun 2004 15:10:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60629 invoked by uid 99); 4 Jun 2004 15:10:26 -0000
Received: from [207.68.165.42] (HELO hotmail.com) (207.68.165.42)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 08:10:26 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 4 Jun 2004 08:10:05 -0700
Received: from 213.11.44.138 by sea2fd.sea2.hotmail.msn.com with HTTP;
	Fri, 04 Jun 2004 15:10:05 GMT
X-Originating-IP: [213.11.44.138]
X-Originating-Email: [philouchat@hotmail.com]
X-Sender: philouchat@hotmail.com
From: "Phil brunet" <philouchat@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: score and frequency
Date: Fri, 04 Jun 2004 15:10:05 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1; format=flowed
Message-ID: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com>
X-OriginalArrivalTime: 04 Jun 2004 15:10:05.0850 (UTC) FILETIME=[0498B7A0:01C44A46]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi to all.

Maybe the term frequency is not the only parameter you need to override to 
"customize" the score attributed by Lucene.

Maybe you should consider the normalisation factor, the idf and the coord 
factor ?

Philippe

>From: "Niraj Alok" <niraj@emacmillan.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Subject: Re: score and frequency
>Date: Fri, 4 Jun 2004 15:13:32 +0530
>
>Hi Erik,
>
>Thanks for the suggestion.
>
>I tried this:
>public class RelevanceSimilarity extends DefaultSimilarity
>
>{
>
>public float tf(float freq) {
>
>System.out.println("discounting frequency");
>
>return (float)1;
>
>}
>
>}
>
>
>
>and in my query class, I used :
>
>Similarity.setDefault(similarity);
>
>Hits hits = is.search(query);
>
>for(i = 0; i < hits.length(); i ++)
>
>   result = result + hits.score(i);
>
>
>
>However, this is still not giving me the expected result. Do I need to do
>something else?
>
>
>Regards,
>Niraj
>
>----- Original Message -----
>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Friday, June 04, 2004 1:55 PM
>Subject: Re: score and frequency
>
>
> > On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> > > Hi,
> > >
> > > I am having some problems with the score of lucene.
> > > I am trying to get the results displayed according to hits.score and
> > > it is giving the results correctly.
> > > However I do not want the frequency factor to be used for the
> > > computation of the score.
> > >
> > > Is it possible to get the score which does not have the frequency
> > > factor in it ?
> >
> > Have a look at the javadocs for Similarity.  DefaultSimilarity is used
> > unless otherwise specified.  You could subclass that and override this:
> >
> >    public float tf(float freq) {
> >      return (float)Math.sqrt(freq);
> >    }
> >
> > and return 1.0.  This might give you the effect you want.
> >
> > Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8596-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 15:17:14 2004
Return-Path: <lucene-user-return-8596-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85989 invoked from network); 4 Jun 2004 15:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 15:17:14 -0000
Received: (qmail 82803 invoked by uid 500); 4 Jun 2004 15:17:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82771 invoked by uid 500); 4 Jun 2004 15:17:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82678 invoked by uid 99); 4 Jun 2004 15:17:11 -0000
Received: from [194.98.147.102] (HELO smtp.kelkoo.net) (194.98.147.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 08:17:11 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i54FGqS2009051
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 17:16:52 +0200
Message-ID: <40C09261.3060509@kelkoo.net>
Date: Fri, 04 Jun 2004 17:16:49 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com>
In-Reply-To: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Be careful to set the default similarity 
'Similarity.setDefault(similarity)' before creating your search instance 
(IndexSearcher).
If you change the default similarity after, you'll still use the old one.
You'd better use the 'searcher.setSimilarity' method on your searcher.

Franck


Phil brunet wrote:
> Hi to all.
> 
> Maybe the term frequency is not the only parameter you need to override 
> to "customize" the score attributed by Lucene.
> 
> Maybe you should consider the normalisation factor, the idf and the 
> coord factor ?
> 
> Philippe
> 
>> From: "Niraj Alok" <niraj@emacmillan.com>
>> Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> Subject: Re: score and frequency
>> Date: Fri, 4 Jun 2004 15:13:32 +0530
>>
>> Hi Erik,
>>
>> Thanks for the suggestion.
>>
>> I tried this:
>> public class RelevanceSimilarity extends DefaultSimilarity
>>
>> {
>>
>> public float tf(float freq) {
>>
>> System.out.println("discounting frequency");
>>
>> return (float)1;
>>
>> }
>>
>> }
>>
>>
>>
>> and in my query class, I used :
>>
>> Similarity.setDefault(similarity);
>>
>> Hits hits = is.search(query);
>>
>> for(i = 0; i < hits.length(); i ++)
>>
>>   result = result + hits.score(i);
>>
>>
>>
>> However, this is still not giving me the expected result. Do I need to do
>> something else?
>>
>>
>> Regards,
>> Niraj
>>
>> ----- Original Message -----
>> From: "Erik Hatcher" <erik@ehatchersolutions.com>
>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> Sent: Friday, June 04, 2004 1:55 PM
>> Subject: Re: score and frequency
>>
>>
>> > On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>> > > Hi,
>> > >
>> > > I am having some problems with the score of lucene.
>> > > I am trying to get the results displayed according to hits.score and
>> > > it is giving the results correctly.
>> > > However I do not want the frequency factor to be used for the
>> > > computation of the score.
>> > >
>> > > Is it possible to get the score which does not have the frequency
>> > > factor in it ?
>> >
>> > Have a look at the javadocs for Similarity.  DefaultSimilarity is used
>> > unless otherwise specified.  You could subclass that and override this:
>> >
>> >    public float tf(float freq) {
>> >      return (float)Math.sqrt(freq);
>> >    }
>> >
>> > and return 1.0.  This might give you the effect you want.
>> >
>> > Erik
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>> >
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> _________________________________________________________________
> Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8597-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 20:30:29 2004
Return-Path: <lucene-user-return-8597-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63894 invoked from network); 4 Jun 2004 20:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 20:30:29 -0000
Received: (qmail 35570 invoked by uid 500); 4 Jun 2004 20:30:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35504 invoked by uid 500); 4 Jun 2004 20:30:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35484 invoked by uid 99); 4 Jun 2004 20:30:37 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 13:30:37 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i54KUCU9020976
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 21:30:12 +0100
Date: Fri, 4 Jun 2004 21:30:12 +0100
Message-Id: <200406042030.i54KUCU9020976@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: Distributed searches and RAM Dir
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>> Look up Mark Harwood and Lucene. ..provided some nice sequential
>>UML diagrams with notes

Those notes went missing recently when the ISP canned my free account.

I've resurrected them at my new site here:
http://www.inperspective.com/lucene/distrib/index.htm

Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8598-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 20:57:29 2004
Return-Path: <lucene-user-return-8598-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76008 invoked from network); 4 Jun 2004 20:57:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 20:57:29 -0000
Received: (qmail 76040 invoked by uid 500); 4 Jun 2004 20:57:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75971 invoked by uid 500); 4 Jun 2004 20:57:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75955 invoked by uid 99); 4 Jun 2004 20:57:40 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 13:57:40 -0700
Received: (qmail 80359 invoked by uid 89); 4 Jun 2004 20:57:16 -0000
Received: from unknown (HELO apache.org) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 4 Jun 2004 20:57:15 -0000
Message-ID: <40C0E20C.8020908@apache.org>
Date: Fri, 04 Jun 2004 13:56:44 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problems with lucene in multithreaded environment
References: <20040604054344.44706.qmail@web8306.mail.in.yahoo.com>
In-Reply-To: <20040604054344.44706.qmail@web8306.mail.in.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jayant Kumar wrote:
> Please find enclosed jvmdump.txt which contains a dump
> of our search program after about 20 seconds of
> starting the program.
> 
> Also enclosed is the file queries.txt which contains
> few sample search queries.

Thanks for the data.  This is exactly what I was looking for.

> "Thread-14" prio=1 tid=0x080a7420 nid=0x468e waiting for monitor entry [4d61a000..4d61ac18]
>         at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
>         - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)
> 
> "Thread-12" prio=1 tid=0x080a58e0 nid=0x468e waiting for monitor entry [4d51a000..4d51ad18]
>         at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:112)
>         - waiting to lock <0x44c95228> (a org.apache.lucene.index.TermInfosReader)

These are all stuck looking terms up in the dictionary (TermInfos). 
Things would be much faster if your queries didn't have so many terms.

> Query : (  (  (  (  (  FIELD1: proof OR  FIELD2: proof OR  FIELD3: proof OR  FIELD4: proof OR  FIELD5: proof OR  FIELD6: proof OR  FIELD7: proof ) AND (  FIELD1: "george bush" OR  FIELD2: "george bush" OR  FIELD3: "george bush" OR  FIELD4: "george bush" OR  FIELD5: "george bush" OR  FIELD6: "george bush" OR  FIELD7: "george bush" )  ) AND (  FIELD1: script OR  FIELD2: script OR  FIELD3: script OR  FIELD4: script OR  FIELD5: script OR  FIELD6: script OR  FIELD7: script )  ) AND (  (  FIELD1: san OR  FIELD2: san OR  FIELD3: san OR  FIELD4: san OR  FIELD5: san OR  FIELD6: san OR  FIELD7: san ) OR (  (  FIELD1: war OR  FIELD2: war OR  FIELD3: war OR  FIELD4: war OR  FIELD5: war OR  FIELD6: war OR  FIELD7: war ) OR (  (  FIELD1: gulf OR  FIELD2: gulf OR  FIELD3: gulf OR  FIELD4: gulf OR  FIELD5: gulf OR  FIELD6: gulf OR  FIELD7: gulf ) OR (  (  FIELD1: laden OR  FIELD2: laden OR  FIELD3: laden OR  FIELD4: laden OR  FIELD5: laden OR  FIELD6: laden OR  FIELD7: laden ) OR (  (  FIE
LD1: ttouristeat OR  FIELD2: ttouristeat OR  FIELD3: ttouristeat OR  FIELD4: ttouristeat OR  FIELD5: ttouristeat OR  FIELD6: ttouristeat OR  FIELD7: ttouristeat ) OR (  (  FIELD1: pow OR  FIELD2: pow OR  FIELD3: pow OR  FIELD4: pow OR  FIELD5: pow OR  FIELD6: pow OR  FIELD7: pow ) OR (  FIELD1: bin OR  FIELD2: bin OR  FIELD3: bin OR  FIELD4: bin OR  FIELD5: bin OR  FIELD6: bin OR  FIELD7: bin )  )  )  )  )  )  )  )  ) AND  RANGE: ([ 0800 TO 1100 ]) AND  (  S_IDa: (7 OR 8 OR 9 OR 10 OR 11 OR 12 OR 13 OR 14 OR 15 OR 16 OR 17 )  or  S_IDb: (2 )  )

All your queries look for terms in fields 1-7.  If you instead combined 
the contents of fields 1-7 in a single field, and searched that field, 
then your searches would contain far fewer terms and be much faster.

Also, I don't know how many terms your RANGE queries match, but that 
could also be introducing large numbers of terms which would slow things 
down too.

But, still, you have identified a bottleneck: TermInfosReader caches a 
TermEnum and hence access to it must be synchronized.  Caching the enum 
greatly speeds sequential access to terms, e.g., when merging, 
performing range or prefix queries, etc.  Perhaps however the cache 
should be done through a ThreadLocal, giving each thread its own cache 
and obviating the need for synchronization...

Please tell me if you are able to simplify your queries and if that 
speeds things.  I'll look into a ThreadLocal-based solution too.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8599-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 21:48:57 2004
Return-Path: <lucene-user-return-8599-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94552 invoked from network); 4 Jun 2004 21:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 21:48:57 -0000
Received: (qmail 52891 invoked by uid 500); 4 Jun 2004 21:49:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52847 invoked by uid 500); 4 Jun 2004 21:49:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52829 invoked by uid 99); 4 Jun 2004 21:49:07 -0000
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 14:49:07 -0700
Received: from getopt.org (r-213-158-202-78.ppp.eranet.pl [213.158.202.78])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i54Lmjp21817
	for <lucene-user@jakarta.apache.org>; Fri, 4 Jun 2004 16:48:47 -0500
Message-ID: <40C0EE34.3090209@getopt.org>
Date: Fri, 04 Jun 2004 23:48:36 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Writing a stemmer
References: <20040604015233.97D0027299@smtp.etmail.cz>
In-Reply-To: <20040604015233.97D0027299@smtp.etmail.cz>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Leo Galambos wrote:

> Erik Hatcher <erik@ehatchersolutions.com> wrote:
> __________
> 
> 
>>>How proficient must I be in a language for which I wish to write the 
>>>stemmer?
>>
>>I would venture to say you would need to be an expert in a language to 
>>write a decent stemmer.
> 
> 
> I'm sorry for a self-promo ;), but
> the stemmer of egothor project can be
> adapted to any language, and you needn't be
> a language expert. Moreover, the stemmer
> achieves better F-measure than Porter's stemmers.

No reason to be too modest, Leo.. I tested your stemmer on English, 
Swedish and Polish texts (including F-measure vs. training set size 
plots), and it works exceptionally well indeed. Highly recommended!

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8600-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 21:50:08 2004
Return-Path: <lucene-user-return-8600-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95152 invoked from network); 4 Jun 2004 21:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 21:50:08 -0000
Received: (qmail 55852 invoked by uid 500); 4 Jun 2004 21:50:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55793 invoked by uid 500); 4 Jun 2004 21:50:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55778 invoked by uid 99); 4 Jun 2004 21:50:14 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 14:50:14 -0700
Received: (qmail 28412 invoked by uid 89); 4 Jun 2004 21:49:45 -0000
Received: from unknown (HELO apache.org) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 4 Jun 2004 21:49:45 -0000
Message-ID: <40C0EE59.80007@apache.org>
Date: Fri, 04 Jun 2004 14:49:13 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problems with lucene in multithreaded environment
References: <20040604054344.44706.qmail@web8306.mail.in.yahoo.com> <40C0E20C.8020908@apache.org>
In-Reply-To: <40C0E20C.8020908@apache.org>
Content-Type: multipart/mixed;
 boundary="------------010100000007060306000600"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------010100000007060306000600
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Doug Cutting wrote:
> Please tell me if you are able to simplify your queries and if that 
> speeds things.  I'll look into a ThreadLocal-based solution too.

I've attached a patch that should help with the thread contention, 
although I've not tested it extensively.

I still don't fully understand why your searches are so slow, though. 
Are the indexes stored on the local disk of the machine?  Indexes 
accessed over the network can be very slow.

Anyway, give this patch a try.  Also, if anyone else can try this and 
report back whether it makes multi-threaded searching faster, or 
anything else slower, or is buggy, that would be great.

Thanks,

Doug

--------------010100000007060306000600
Content-Type: text/x-patch;
 name="threadlocal.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="threadlocal.patch"

Index: src/java/org/apache/lucene/index/TermInfosReader.java
===================================================================
RCS file: /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v
retrieving revision 1.6
diff -u -u -r1.6 TermInfosReader.java
--- src/java/org/apache/lucene/index/TermInfosReader.java	20 May 2004 11:23:53 -0000	1.6
+++ src/java/org/apache/lucene/index/TermInfosReader.java	4 Jun 2004 21:45:15 -0000
@@ -29,7 +29,8 @@
   private String segment;
   private FieldInfos fieldInfos;
 
-  private SegmentTermEnum enumerator;
+  private ThreadLocal enumerators = new ThreadLocal();
+  private SegmentTermEnum origEnum;
   private long size;
 
   TermInfosReader(Directory dir, String seg, FieldInfos fis)
@@ -38,19 +39,19 @@
     segment = seg;
     fieldInfos = fis;
 
-    enumerator = new SegmentTermEnum(directory.openFile(segment + ".tis"),
-			       fieldInfos, false);
-    size = enumerator.size;
+    origEnum = new SegmentTermEnum(directory.openFile(segment + ".tis"),
+                                   fieldInfos, false);
+    size = origEnum.size;
     readIndex();
   }
 
   public int getSkipInterval() {
-    return enumerator.skipInterval;
+    return origEnum.skipInterval;
   }
 
   final void close() throws IOException {
-    if (enumerator != null)
-      enumerator.close();
+    if (origEnum != null)
+      origEnum.close();
   }
 
   /** Returns the number of term/value pairs in the set. */
@@ -58,6 +59,15 @@
     return size;
   }
 
+  private SegmentTermEnum getEnum() {
+    SegmentTermEnum enum = (SegmentTermEnum)enumerators.get();
+    if (enum == null) {
+      enum = terms();
+      enumerators.set(enum);
+    }
+    return enum;
+  }
+
   Term[] indexTerms = null;
   TermInfo[] indexInfos;
   long[] indexPointers;
@@ -102,16 +112,17 @@
   }
 
   private final void seekEnum(int indexOffset) throws IOException {
-    enumerator.seek(indexPointers[indexOffset],
-	      (indexOffset * enumerator.indexInterval) - 1,
+    getEnum().seek(indexPointers[indexOffset],
+	      (indexOffset * getEnum().indexInterval) - 1,
 	      indexTerms[indexOffset], indexInfos[indexOffset]);
   }
 
   /** Returns the TermInfo for a Term in the set, or null. */
-  final synchronized TermInfo get(Term term) throws IOException {
+  TermInfo get(Term term) throws IOException {
     if (size == 0) return null;
 
-    // optimize sequential access: first try scanning cached enumerator w/o seeking
+    // optimize sequential access: first try scanning cached enum w/o seeking
+    SegmentTermEnum enumerator = getEnum();
     if (enumerator.term() != null                 // term is at or past current
 	&& ((enumerator.prev != null && term.compareTo(enumerator.prev) > 0)
 	    || term.compareTo(enumerator.term()) >= 0)) {
@@ -128,6 +139,7 @@
 
   /** Scans within block for matching term. */
   private final TermInfo scanEnum(Term term) throws IOException {
+    SegmentTermEnum enumerator = getEnum();
     while (term.compareTo(enumerator.term()) > 0 && enumerator.next()) {}
     if (enumerator.term() != null && term.compareTo(enumerator.term()) == 0)
       return enumerator.termInfo();
@@ -136,10 +148,12 @@
   }
 
   /** Returns the nth term in the set. */
-  final synchronized Term get(int position) throws IOException {
+  final Term get(int position) throws IOException {
     if (size == 0) return null;
 
-    if (enumerator != null && enumerator.term() != null && position >= enumerator.position &&
+    SegmentTermEnum enumerator = getEnum();
+    if (enumerator != null && enumerator.term() != null &&
+        position >= enumerator.position &&
 	position < (enumerator.position + enumerator.indexInterval))
       return scanEnum(position);		  // can avoid seek
 
@@ -148,6 +162,7 @@
   }
 
   private final Term scanEnum(int position) throws IOException {
+    SegmentTermEnum enumerator = getEnum();
     while(enumerator.position < position)
       if (!enumerator.next())
 	return null;
@@ -156,12 +171,13 @@
   }
 
   /** Returns the position of a Term in the set or -1. */
-  final synchronized long getPosition(Term term) throws IOException {
+  final long getPosition(Term term) throws IOException {
     if (size == 0) return -1;
 
     int indexOffset = getIndexOffset(term);
     seekEnum(indexOffset);
 
+    SegmentTermEnum enumerator = getEnum();
     while(term.compareTo(enumerator.term()) > 0 && enumerator.next()) {}
 
     if (term.compareTo(enumerator.term()) == 0)
@@ -171,17 +187,13 @@
   }
 
   /** Returns an enumeration of all the Terms and TermInfos in the set. */
-  final synchronized SegmentTermEnum terms() throws IOException {
-    if (enumerator.position != -1)			  // if not at start
-      seekEnum(0);				  // reset to start
-    return (SegmentTermEnum)enumerator.clone();
+  public SegmentTermEnum terms() {
+    return (SegmentTermEnum)origEnum.clone();
   }
 
   /** Returns an enumeration of terms starting at or after the named term. */
-  final synchronized SegmentTermEnum terms(Term term) throws IOException {
-    get(term);					  // seek enumerator to term
-    return (SegmentTermEnum)enumerator.clone();
+  public SegmentTermEnum terms(Term term) throws IOException {
+    get(term);
+    return (SegmentTermEnum)getEnum().clone();
   }
-
-
 }


--------------010100000007060306000600
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------010100000007060306000600--

From lucene-user-return-8601-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 04 22:08:06 2004
Return-Path: <lucene-user-return-8601-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2843 invoked from network); 4 Jun 2004 22:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Jun 2004 22:08:06 -0000
Received: (qmail 72473 invoked by uid 500); 4 Jun 2004 22:08:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72320 invoked by uid 500); 4 Jun 2004 22:08:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72306 invoked by uid 99); 4 Jun 2004 22:08:18 -0000
Received: from [63.94.84.150] (HELO nj320exchsrv.enterprise.com) (63.94.84.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 15:08:18 -0700
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Subject: RE: Writing a stemmer
Date: Fri, 4 Jun 2004 18:09:03 -0400
Message-ID: <F48023593BB6D4428EC1E89FA36DAD4C732FDB@nj320exchsrv.enterprise.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Writing a stemmer
Thread-Index: AcRJ1syGWSoJ7iEKSimde96/a7/2WAAqRqEw
From: "Musku, Anil (LA)" <amusku@Lotusinterworks.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Leo

Thanks for your reply. I have taken a look at egothor.org. It does =
appear to
be pretty simple. However, I need to use Lucene as my search engine.

>From what I understand, it appears that I need to be pretty conversant =
(if
not an expert) with a language for which I wish to write a stemmer. =
Moreover,
this stemmer can be used with the egothor search engine only? Can I use =
this
stemmer with Lucene? If yes, how?

Regards,
Anil

-----Original Message-----
From: Leo Galambos [mailto:lgs@centrum.cz]=20
Sent: Thursday, June 03, 2004 8:54 PM
To: Lucene Users List
Subject: Re: Writing a stemmer

Erik Hatcher <erik@ehatchersolutions.com> wrote:
__________

>> How proficient must I be in a language for which I wish to write the=20
>> stemmer?
>I would venture to say you would need to be an expert in a language to=20
>write a decent stemmer.

I'm sorry for a self-promo ;), but
the stemmer of egothor project can be
adapted to any language, and you needn't be
a language expert. Moreover, the stemmer
achieves better F-measure than Porter's stemmers.

Cheers,
Leo



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8602-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 05:17:40 2004
Return-Path: <lucene-user-return-8602-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44374 invoked from network); 5 Jun 2004 05:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 05:17:40 -0000
Received: (qmail 20357 invoked by uid 500); 5 Jun 2004 05:17:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20335 invoked by uid 500); 5 Jun 2004 05:17:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20319 invoked by uid 99); 5 Jun 2004 05:17:50 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 22:17:50 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i555HCd24296
	for <lucene-user@jakarta.apache.org>; Sat, 5 Jun 2004 00:17:13 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Sat, 05 Jun 2004 10:47:20 +0530
Message-ID: <017901c44abb$e63836c0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net>
Subject: Re: score and frequency
Date: Sat, 5 Jun 2004 10:43:55 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have set the searcher.setSimilarity  as well as also tried setting the
coord factor to 1.

The problem as given by an example is : Lets say I have titles to be
displayed depending upon the search.
E.g if i have "ice hockey" as the search item and if it is default
similarity, my results are :

ice hockey0.99999994
ice hockey0.75
ice hockey0.75
winter Olympics: hockey, ice, medallists0.17402513
ice age0.073680125
National Hockey League0.020266924
Cracking the Ice Age0.018420031
ground-ice0.011512519
ice hockey: British Sekonda Superleague Play-Off Championship:
finals0.0069075115
 (the numbers indicating the score).


But if i set the similarity as my overridden one, the results become:
ice hockey0.99999994
ice hockey0.75
ice hockey0.75
ice age0.22104037
winter Olympics: hockey, ice, medallists0.17402513
National Hockey League0.060800765
Cracking the Ice Age0.055260092
ground-ice0.034537554
ice hockey: British Sekonda Superleague Play-Off Championship:
finals0.020722535


I want all the titles which have both "ice" and "hockey" to come above the
rest (to have higher scores)
Meaning i would wish the results to appear like:

ice hockey
ice hockey
ice hockey
winter Olympics: hockey, ice, medallists
ice hockey: British Sekonda Superleague Play-Off Championship: finals
ice age
National Hockey League
Cracking the Ice Age
ground-ice

My overriden similarity class contains just this method:
public float coord(int overlap, int maxOverlap) {

return 1.0f;

}





I feel it is the weight factor which is producing indesirable results. Any
help in this regard would be highly appreciated.

Regards,
Niraj

----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, June 04, 2004 8:46 PM
Subject: Re: score and frequency


> Hi,
>
> Be careful to set the default similarity
> 'Similarity.setDefault(similarity)' before creating your search instance
> (IndexSearcher).
> If you change the default similarity after, you'll still use the old one.
> You'd better use the 'searcher.setSimilarity' method on your searcher.
>
> Franck
>
>
> Phil brunet wrote:
> > Hi to all.
> >
> > Maybe the term frequency is not the only parameter you need to override
> > to "customize" the score attributed by Lucene.
> >
> > Maybe you should consider the normalisation factor, the idf and the
> > coord factor ?
> >
> > Philippe
> >
> >> From: "Niraj Alok" <niraj@emacmillan.com>
> >> Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >> Subject: Re: score and frequency
> >> Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>
> >> Hi Erik,
> >>
> >> Thanks for the suggestion.
> >>
> >> I tried this:
> >> public class RelevanceSimilarity extends DefaultSimilarity
> >>
> >> {
> >>
> >> public float tf(float freq) {
> >>
> >> System.out.println("discounting frequency");
> >>
> >> return (float)1;
> >>
> >> }
> >>
> >> }
> >>
> >>
> >>
> >> and in my query class, I used :
> >>
> >> Similarity.setDefault(similarity);
> >>
> >> Hits hits = is.search(query);
> >>
> >> for(i = 0; i < hits.length(); i ++)
> >>
> >>   result = result + hits.score(i);
> >>
> >>
> >>
> >> However, this is still not giving me the expected result. Do I need to
do
> >> something else?
> >>
> >>
> >> Regards,
> >> Niraj
> >>
> >> ----- Original Message -----
> >> From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >> Sent: Friday, June 04, 2004 1:55 PM
> >> Subject: Re: score and frequency
> >>
> >>
> >> > On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >> > > Hi,
> >> > >
> >> > > I am having some problems with the score of lucene.
> >> > > I am trying to get the results displayed according to hits.score
and
> >> > > it is giving the results correctly.
> >> > > However I do not want the frequency factor to be used for the
> >> > > computation of the score.
> >> > >
> >> > > Is it possible to get the score which does not have the frequency
> >> > > factor in it ?
> >> >
> >> > Have a look at the javadocs for Similarity.  DefaultSimilarity is
used
> >> > unless otherwise specified.  You could subclass that and override
this:
> >> >
> >> >    public float tf(float freq) {
> >> >      return (float)Math.sqrt(freq);
> >> >    }
> >> >
> >> > and return 1.0.  This might give you the effect you want.
> >> >
> >> > Erik
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >> >
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> > _________________________________________________________________
> > Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8603-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 06:16:24 2004
Return-Path: <lucene-user-return-8603-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57087 invoked from network); 5 Jun 2004 06:16:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 06:16:24 -0000
Received: (qmail 68216 invoked by uid 500); 5 Jun 2004 06:16:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68189 invoked by uid 500); 5 Jun 2004 06:16:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68176 invoked by uid 99); 5 Jun 2004 06:16:36 -0000
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 04 Jun 2004 23:16:36 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 6456783DE7
	for <lucene-user@jakarta.apache.org>; Sat,  5 Jun 2004 10:16:04 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 32721789 for lucene-user@jakarta.apache.org; Sat, 05 Jun 2004 10:16:04 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: Writing a stemmer
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Sat, 05 Jun 2004 10:16:04 +0400
Message-ID: <web-32721789@mail5.rambler.ru>
In-Reply-To: <40C0EE34.3090209@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, Andjej!

How you tested the Polish texts with what stemer?
Thanks,
Vladimir.

>
>No reason to be too modest, Leo.. I tested your stemmer on English, 
>Swedish and Polish texts (including F-measure vs. training set size 
>plots), and it works exceptionally well indeed. Highly recommended!
>
>-- 
>Best regards,
>Andrzej Bialecki
>
>-------------------------------------------------
>Software Architect, System Integration Specialist
>CEN/ISSS EC Workshop, ECIMF project chair
>EU FP6 E-Commerce Expert/Evaluator
>-------------------------------------------------
>FreeBSD developer (http://www.freebsd.org)
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8604-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 08:50:36 2004
Return-Path: <lucene-user-return-8604-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5803 invoked from network); 5 Jun 2004 08:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 08:50:36 -0000
Received: (qmail 86329 invoked by uid 500); 5 Jun 2004 08:50:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86298 invoked by uid 500); 5 Jun 2004 08:50:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86253 invoked by uid 99); 5 Jun 2004 08:50:45 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 05 Jun 2004 01:50:45 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id C103A756755
	for <lucene-user@jakarta.apache.org>; Sat,  5 Jun 2004 04:50:12 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <017901c44abb$e63836c0$b101a8c0@emacmillan.edu>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5712A99C-B6CD-11D8-9E7D-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: score and frequency
Date: Sat, 5 Jun 2004 04:50:05 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 5, 2004, at 1:13 AM, Niraj Alok wrote:
> I want all the titles which have both "ice" and "hockey" to come above 
> the
> rest (to have higher scores)
> Meaning i would wish the results to appear like:
>
> ice hockey
> ice hockey
> ice hockey
> winter Olympics: hockey, ice, medallists
> ice hockey: British Sekonda Superleague Play-Off Championship: finals
> ice age
> National Hockey League
> Cracking the Ice Age
> ground-ice
>
> My overriden similarity class contains just this method:
> public float coord(int overlap, int maxOverlap) {
>
> return 1.0f;
>
> }
>
>

Use IndexSearcher.explain(Query, docId) to see how the various factors 
in the equation are being set.

You are better off using DefaultSimilarity's implementation of coord() 
than just returning 1.0.  You want, if overlap is greater, to return a 
greater number.  Look at the numbers being passed to coord(), and in 
the cases where both "ice" and "hockey" are present you are probably 
getting 2.  Maybe just return (float) overlap as a first try and see 
the results then.  The explain feature should give you the details you 
need to adjust the equation though - although the default 
implementation does boost the score of documents that have multiple 
terms matching.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8605-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 11:07:21 2004
Return-Path: <lucene-user-return-8605-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39815 invoked from network); 5 Jun 2004 11:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 11:07:21 -0000
Received: (qmail 2997 invoked by uid 500); 5 Jun 2004 11:07:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2951 invoked by uid 500); 5 Jun 2004 11:07:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2937 invoked by uid 99); 5 Jun 2004 11:07:11 -0000
Received: from [203.199.122.31] (HELO web8301.mail.in.yahoo.com) (203.199.122.31)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Sat, 05 Jun 2004 04:07:11 -0700
Message-ID: <20040605110703.80644.qmail@web8301.mail.in.yahoo.com>
Received: from [210.7.75.237] by web8301.mail.in.yahoo.com via HTTP; Sat, 05 Jun 2004 12:07:03 BST
Date: Sat, 5 Jun 2004 12:07:03 +0100 (BST)
From: =?iso-8859-1?q?Jayant=20Kumar?= <jayantlists@yahoo.co.in>
Subject: Re: problems with lucene in multithreaded environment
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40C0EE59.80007@apache.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-758429129-1086433623=:79955"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-758429129-1086433623=:79955
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Content-Id: 
Content-Disposition: inline

Thanks for the patch. It helped in increasing the
search speed to a good extent. But when we tried to
give about 100 queries in 10 seconds, then again we
found that after about 15 seconds, the response time
per query increased. Enclosed is the dump which we
took after about 30 seconds of starting the search.
The maximum query time has reduced from 200-300
seconds to about 50 seconds.

We were able to simplify the searches further by
consolidating the fields in the index but that
resulted in increasing the index size to 2.5 GB as we
required fields 2-5 and fields 1-7 in different
searches. Our indexes are on the local disk therefor
there is no network i/o involved.

Thanks
Jayant

 --- Doug Cutting <cutting@apache.org> wrote: > Doug
Cutting wrote:
> > Please tell me if you are able to simplify your
> queries and if that 
> > speeds things.  I'll look into a ThreadLocal-based
> solution too.
> 
> I've attached a patch that should help with the
> thread contention, 
> although I've not tested it extensively.
> 
> I still don't fully understand why your searches are
> so slow, though. 
> Are the indexes stored on the local disk of the
> machine?  Indexes 
> accessed over the network can be very slow.
> 
> Anyway, give this patch a try.  Also, if anyone else
> can try this and 
> report back whether it makes multi-threaded
> searching faster, or 
> anything else slower, or is buggy, that would be
> great.
> 
> Thanks,
> 
> Doug
> > Index:
>
src/java/org/apache/lucene/index/TermInfosReader.java
>
===================================================================
> RCS file:
>
/home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v
> retrieving revision 1.6
> diff -u -u -r1.6 TermInfosReader.java
> ---
>
src/java/org/apache/lucene/index/TermInfosReader.java
> 20 May 2004 11:23:53 -0000	1.6
> +++
>
src/java/org/apache/lucene/index/TermInfosReader.java
> 4 Jun 2004 21:45:15 -0000
> @@ -29,7 +29,8 @@
>    private String segment;
>    private FieldInfos fieldInfos;
>  
> -  private SegmentTermEnum enumerator;
> +  private ThreadLocal enumerators = new
> ThreadLocal();
> +  private SegmentTermEnum origEnum;
>    private long size;
>  
>    TermInfosReader(Directory dir, String seg,
> FieldInfos fis)
> @@ -38,19 +39,19 @@
>      segment = seg;
>      fieldInfos = fis;
>  
> -    enumerator = new
> SegmentTermEnum(directory.openFile(segment +
> ".tis"),
> -			       fieldInfos, false);
> -    size = enumerator.size;
> +    origEnum = new
> SegmentTermEnum(directory.openFile(segment +
> ".tis"),
> +                                   fieldInfos,
> false);
> +    size = origEnum.size;
>      readIndex();
>    }
>  
>    public int getSkipInterval() {
> -    return enumerator.skipInterval;
> +    return origEnum.skipInterval;
>    }
>  
>    final void close() throws IOException {
> -    if (enumerator != null)
> -      enumerator.close();
> +    if (origEnum != null)
> +      origEnum.close();
>    }
>  
>    /** Returns the number of term/value pairs in the
> set. */
> @@ -58,6 +59,15 @@
>      return size;
>    }
>  
> +  private SegmentTermEnum getEnum() {
> +    SegmentTermEnum enum =
> (SegmentTermEnum)enumerators.get();
> +    if (enum == null) {
> +      enum = terms();
> +      enumerators.set(enum);
> +    }
> +    return enum;
> +  }
> +
>    Term[] indexTerms = null;
>    TermInfo[] indexInfos;
>    long[] indexPointers;
> @@ -102,16 +112,17 @@
>    }
>  
>    private final void seekEnum(int indexOffset)
> throws IOException {
> -    enumerator.seek(indexPointers[indexOffset],
> -	      (indexOffset * enumerator.indexInterval) -
> 1,
> +    getEnum().seek(indexPointers[indexOffset],
> +	      (indexOffset * getEnum().indexInterval) - 1,
>  	      indexTerms[indexOffset],
> indexInfos[indexOffset]);
>    }
>  
>    /** Returns the TermInfo for a Term in the set,
> or null. */
> -  final synchronized TermInfo get(Term term) throws
> IOException {
> +  TermInfo get(Term term) throws IOException {
>      if (size == 0) return null;
>  
> -    // optimize sequential access: first try
> scanning cached enumerator w/o seeking
> +    // optimize sequential access: first try
> scanning cached enum w/o seeking
> +    SegmentTermEnum enumerator = getEnum();
>      if (enumerator.term() != null                
> // term is at or past current
>  	&& ((enumerator.prev != null &&
> term.compareTo(enumerator.prev) > 0)
>  	    || term.compareTo(enumerator.term()) >= 0)) {
> @@ -128,6 +139,7 @@
>  
>    /** Scans within block for matching term. */
>    private final TermInfo scanEnum(Term term) throws
> IOException {
> +    SegmentTermEnum enumerator = getEnum();
>      while (term.compareTo(enumerator.term()) > 0 &&
> enumerator.next()) {}
>      if (enumerator.term() != null &&
> term.compareTo(enumerator.term()) == 0)
>        return enumerator.termInfo();
> @@ -136,10 +148,12 @@
>    }
>  
>    /** Returns the nth term in the set. */
> -  final synchronized Term get(int position) throws
> IOException {
> +  final Term get(int position) throws IOException {
>      if (size == 0) return null;
>  
> -    if (enumerator != null && enumerator.term() !=
> null && position >= enumerator.position &&
> +    SegmentTermEnum enumerator = getEnum();
> +    if (enumerator != null && enumerator.term() !=
> null &&
> +        position >= enumerator.position &&
>  	position < (enumerator.position +
> enumerator.indexInterval))
>        return scanEnum(position);		  // can avoid
> seek
>  
> @@ -148,6 +162,7 @@
>    }
>  
>    private final Term scanEnum(int position) throws
> IOException {
> +    SegmentTermEnum enumerator = getEnum();
>      while(enumerator.position < position)
>        if (!enumerator.next())
>  	return null;
> @@ -156,12 +171,13 @@
>    }
>  
>    /** Returns the position of a Term in the set or
> -1. */
> -  final synchronized long getPosition(Term term)
> throws IOException {
> +  final long getPosition(Term term) throws
> IOException {
>      if (size == 0) return -1;
>  
>      int indexOffset = getIndexOffset(term);
>      seekEnum(indexOffset);
>  
> +    SegmentTermEnum enumerator = getEnum();
>      while(term.compareTo(enumerator.term()) > 0 &&
> enumerator.next()) {}
>  
>      if (term.compareTo(enumerator.term()) == 0)
> @@ -171,17 +187,13 @@
>    }
>  
>    /** Returns an enumeration of all the Terms and
> TermInfos in the set. */
> -  final synchronized SegmentTermEnum terms() throws
> IOException {
> -    if (enumerator.position != -1)			  // if not at
> start
> -      seekEnum(0);				  // reset to start
> -    return (SegmentTermEnum)enumerator.clone();
> +  public SegmentTermEnum terms() {
> +    return (SegmentTermEnum)origEnum.clone();
>    }
>  
>    /** Returns an enumeration of terms starting at
> or after the named term. */
> -  final synchronized SegmentTermEnum terms(Term
> term) throws IOException {
> -    get(term);					  // seek enumerator to term
> -    return (SegmentTermEnum)enumerator.clone();
> +  public SegmentTermEnum terms(Term term) throws
> IOException {
> +    get(term);
> +    return (SegmentTermEnum)getEnum().clone();
>    }
> -
> -
>  }
> 
> >
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
lucene-user-help@jakarta.apache.org 

________________________________________________________________________
Yahoo! India Matrimony: Find your partner online. http://yahoo.shaadi.com/india-matrimony/
--0-758429129-1086433623=:79955
Content-Type: text/plain; name="jvmdump1.txt"
Content-Description: jvmdump1.txt
Content-Disposition: inline; filename="jvmdump1.txt"

Thread-24" prio=1 tid=0x0816a390 nid=0x2868 waiting for monitor entry [69c55000..69c558c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:102)
        at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:60)
        at org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:195)
        at org.apache.lucene.search.PhrasePositions.skipTo(PhrasePositions.java:47)
        at org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:72)
        at org.apache.lucene.search.PhraseScorer.next(PhraseScorer.java:65)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-23" prio=1 tid=0x08169f38 nid=0x2867 waiting for monitor entry [69bd4000..69bd48c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:58)
        at org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:195)
        at org.apache.lucene.search.PhrasePositions.skipTo(PhrasePositions.java:47)
        at org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:72)
        at org.apache.lucene.search.PhraseScorer.next(PhraseScorer.java:65)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-22" prio=1 tid=0x08159f78 nid=0x2866 waiting for monitor entry [69b53000..69b538c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:86)
        at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-21" prio=1 tid=0x08169bd8 nid=0x2865 waiting for monitor entry [69ad2000..69ad28c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:86)
        at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:58)
        at org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:195)
        at org.apache.lucene.search.PhrasePositions.skipTo(PhrasePositions.java:47)
        at org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:72)
        at org.apache.lucene.search.PhraseScorer.next(PhraseScorer.java:65)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-19" prio=1 tid=0x081695f0 nid=0x2863 waiting for monitor entry [698f8000..698f88c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermPositions.nextPosition(SegmentTermPositions.java:48)
        at org.apache.lucene.search.PhrasePositions.nextPosition(PhrasePositions.java:65)
        at org.apache.lucene.search.PhrasePositions.firstPosition(PhrasePositions.java:60)
        at org.apache.lucene.search.ExactPhraseScorer.phraseFreq(ExactPhraseScorer.java:32)
        at org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:78)
        at org.apache.lucene.search.PhraseScorer.skipTo(PhraseScorer.java:100)
        at org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:53)
        at org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:48)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-18" prio=1 tid=0x0815ae40 nid=0x2862 waiting for monitor entry [69877000..698778c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-8" prio=1 tid=0x080c13c8 nid=0x2858 waiting for monitor entry [694f0000..694f08c8]
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
        - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:131)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:46)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.BooleanScorer$SubScorer.<init>(BooleanScorer.java:48)
        at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:76)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:166)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:164)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:113)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"Thread-2" prio=1 tid=0x080f93e8 nid=0x2852 runnable [69112000..691128c8]
        at java.io.RandomAccessFile.readBytes(Native Method)
        at java.io.RandomAccessFile.read(RandomAccessFile.java:307)
        at org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:410)
        - locked <0x46f1be28> (a org.apache.lucene.store.FSInputStream$Descriptor)
        at org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
        at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:222)
        - locked <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:121)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at resdex.searchinc.getHits(searchinc.java:744)
        at resdex.searchinc.Search(searchinc.java:937)
        at resdex.searchinctest.conductTestSearch(searchinctest.java:99)
        at resdex.Server$Handler.run(Server.java:62)
        at java.lang.Thread.run(Thread.java:534)

"DestroyJavaVM" prio=1 tid=0x68f02ae0 nid=0x2842 waiting on condition [0..bfffd5c4]

"Thread-0" prio=1 tid=0x68f00658 nid=0x284b runnable [68ef2000..68ef28c8]
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)
        - locked <0x47663a28> (a java.net.PlainSocketImpl)
        at java.net.ServerSocket.implAccept(ServerSocket.java:448)
        at java.net.ServerSocket.accept(ServerSocket.java:419)
        at resdex.Server.run(Server.java:93)
        at java.lang.Thread.run(Thread.java:534)

"Signal Dispatcher" daemon prio=1 tid=0x0808faa0 nid=0x2848 waiting on condition [0..0]

"Finalizer" daemon prio=1 tid=0x0808a5b8 nid=0x2846 in Object.wait() [68ad1000..68ad18c8]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x46e89e40> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked <0x46e89e40> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=1 tid=0x08089940 nid=0x2845 in Object.wait() [68a50000..68a508c8]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x46e89ea8> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:429)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)
        - locked <0x46e89ea8> (a java.lang.ref.Reference$Lock)

"VM Thread" prio=1 tid=0x08086730 nid=0x2844 runnable

"VM Periodic Task Thread" prio=1 tid=0x080ab790 nid=0x284a waiting on condition
"Suspend Checker Thread" prio=1 tid=0x0808f068 nid=0x2847 runnable


--0-758429129-1086433623=:79955
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0-758429129-1086433623=:79955--

From lucene-user-return-8606-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 19:16:02 2004
Return-Path: <lucene-user-return-8606-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53210 invoked from network); 5 Jun 2004 19:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 19:16:01 -0000
Received: (qmail 55685 invoked by uid 500); 5 Jun 2004 19:16:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55647 invoked by uid 500); 5 Jun 2004 19:16:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55634 invoked by uid 99); 5 Jun 2004 19:15:59 -0000
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 05 Jun 2004 12:15:59 -0700
Received: from getopt.org (r-213-158-201-93.ppp.eranet.pl [213.158.201.93])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i55JFlF12903
	for <lucene-user@jakarta.apache.org>; Sat, 5 Jun 2004 14:15:49 -0500
Message-ID: <40C21BCB.8000401@getopt.org>
Date: Sat, 05 Jun 2004 21:15:23 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Writing a stemmer
References: <web-32721789@mail5.rambler.ru>
In-Reply-To: <web-32721789@mail5.rambler.ru>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Vladimir Yuryev wrote:

> Hi, Andjej!
> 
> How you tested the Polish texts with what stemer?
> Thanks,
> Vladimir.
> 
>>
>> No reason to be too modest, Leo.. I tested your stemmer on English, 
>> Swedish and Polish texts (including F-measure vs. training set size 
>> plots), and it works exceptionally well indeed. Highly recommended!

Well, I have several corpora of Polish language, which together amount 
to roughly 90,000 words (nouns and verbs) having at least 4 inflected 
forms. This set is randomized (i.e. lines of words + forms are in random 
order). I've split this into two parts - one of a fixed size, as a test 
set, and one of variable size as a training set. Then I compile stemmer 
tables using variable number of training examples, and using differnt 
settings (trie, multi-trie, different optimizations, etc..). Then for 
each output table I test the precision/recall of correct base forms 
(lemmatization), and of ability to create unique stems (stemming). 
Finally, I select the "best" table, which gives reasonably good results 
vs. table size. To put it in plain terms, e.g. for tables roughly 300kB 
in size (created from training set of 3000 unique words + their forms) 
in best cases I get ~90% of correct stems, and ~70% of correct lemmas. 
Which is a _very_ good result!

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8607-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 05 21:38:02 2004
Return-Path: <lucene-user-return-8607-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3635 invoked from network); 5 Jun 2004 21:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Jun 2004 21:38:02 -0000
Received: (qmail 88568 invoked by uid 500); 5 Jun 2004 21:38:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88541 invoked by uid 500); 5 Jun 2004 21:38:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88526 invoked by uid 99); 5 Jun 2004 21:38:01 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 05 Jun 2004 14:38:01 -0700
Received: (qmail 24576 invoked by uid 532); 5 Jun 2004 21:37:12 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.066022 secs); 05 Jun 2004 21:37:12 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 5 Jun 2004 21:37:12 -0000
Message-ID: <40C23D30.4090100@tropo.com>
Date: Sat, 05 Jun 2004 14:37:52 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: "No tvx reader"
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Using 1.4rc3.

Running an app that indexes 50k documents (thus it just uses an 
IndexWriter).
One field has that boolean set for it to have a term vector stored for 
it, while other 11 fields don't.

On stdout I see "No tvx file" 13 times.

Glancing thru the src it seems this comes from TermVectorReader.

The generated index seeems fine.

What could be causing this and is this normal?

thx,
 Dave


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8608-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 04:24:40 2004
Return-Path: <lucene-user-return-8608-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25510 invoked from network); 7 Jun 2004 04:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 04:24:39 -0000
Received: (qmail 60239 invoked by uid 500); 7 Jun 2004 04:24:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60057 invoked by uid 500); 7 Jun 2004 04:24:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60043 invoked by uid 99); 7 Jun 2004 04:24:32 -0000
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 06 Jun 2004 21:24:32 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 4207483E0A
	for <lucene-user@jakarta.apache.org>; Mon,  7 Jun 2004 08:24:21 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 33179315 for lucene-user@jakarta.apache.org; Mon, 07 Jun 2004 08:24:21 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: Writing a stemmer
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Mon, 07 Jun 2004 08:24:21 +0400
Message-ID: <web-33179315@mail5.rambler.ru>
In-Reply-To: <40C21BCB.8000401@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sat, 05 Jun 2004 21:15:23 +0200
  Andrzej Bialecki <ab@getopt.org> wrote:
>Vladimir Yuryev wrote:
>
>> Hi, Andjej!
>> 
>> How you tested the Polish texts with what stemer?
>> Thanks,
>> Vladimir.
>> 
>>>
>>> No reason to be too modest, Leo.. I tested your stemmer on English, 
>>> Swedish and Polish texts (including F-measure vs. training set size 
>>> plots), and it works exceptionally well indeed. Highly recommended!
>
>Well, I have several corpora of Polish language, which together 
>amount to roughly 90,000 words (nouns and verbs) having at least 4 
>inflected forms. This set is randomized (i.e. lines of words + forms 
>are in random order). I've split this into two parts - one of a fixed 
>size, as a test set, and one of variable size as a training set. Then 
>I compile stemmer tables using variable number of training examples, 
>and using differnt settings (trie, multi-trie, different 
>optimizations, etc..). Then for each output table I test the 
>precision/recall of correct base forms (lemmatization), and of 
>ability to create unique stems (stemming). Finally, I select the 
>"best" table, which gives reasonably good results vs. table size. To 
>put it in plain terms, e.g. for tables roughly 300kB in size (created 
>from training set of 3000 unique words + their forms) in best cases I 
>get ~90% of correct stems, and ~70% of correct lemmas. Which is a 
>_very_ good result!
>
>-- 
>Best regards,
>Andrzej Bialecki
>
Thanks for the detailed description of the test of the Polish texts. 
It was very important for me.
Vladimir.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8609-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 08:46:44 2004
Return-Path: <lucene-user-return-8609-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55058 invoked from network); 7 Jun 2004 08:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 08:46:44 -0000
Received: (qmail 23100 invoked by uid 500); 7 Jun 2004 08:46:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23081 invoked by uid 500); 7 Jun 2004 08:46:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23067 invoked by uid 99); 7 Jun 2004 08:46:36 -0000
Received: from [194.98.147.102] (HELO smtp.kelkoo.net) (194.98.147.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 07 Jun 2004 01:46:36 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i577KEvR029704
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Mon, 7 Jun 2004 09:20:15 +0200
Message-ID: <40C41728.8020005@kelkoo.net>
Date: Mon, 07 Jun 2004 09:20:08 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu>
In-Reply-To: <017901c44abb$e63836c0$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It seems that you don't the length norm to be used. It's a factor which 
normalize the score of a doc depending on the size of the searched field 
of the doc. It's the field which make that 'ground ice' has a higher 
score than 'ice hockey: British Sekonda Superleague Play-Off 
Championship: finals' because it only has 2 terms.
So, I suggest you to override the lengthNorm method and to ignore the 
numTokens parameter.
NB: The length norm is computed during the indexation and the norm are 
store in the index (in the _aaa.f# files). So, you need to do re-index 
your data, and use this similarity during the indexation.

Cheers,
Franck


Niraj Alok wrote:
> I have set the searcher.setSimilarity  as well as also tried setting the
> coord factor to 1.
> 
> The problem as given by an example is : Lets say I have titles to be
> displayed depending upon the search.
> E.g if i have "ice hockey" as the search item and if it is default
> similarity, my results are :
> 
> ice hockey0.99999994
> ice hockey0.75
> ice hockey0.75
> winter Olympics: hockey, ice, medallists0.17402513
> ice age0.073680125
> National Hockey League0.020266924
> Cracking the Ice Age0.018420031
> ground-ice0.011512519
> ice hockey: British Sekonda Superleague Play-Off Championship:
> finals0.0069075115
>  (the numbers indicating the score).
> 
> 
> But if i set the similarity as my overridden one, the results become:
> ice hockey0.99999994
> ice hockey0.75
> ice hockey0.75
> ice age0.22104037
> winter Olympics: hockey, ice, medallists0.17402513
> National Hockey League0.060800765
> Cracking the Ice Age0.055260092
> ground-ice0.034537554
> ice hockey: British Sekonda Superleague Play-Off Championship:
> finals0.020722535
> 
> 
> I want all the titles which have both "ice" and "hockey" to come above the
> rest (to have higher scores)
> Meaning i would wish the results to appear like:
> 
> ice hockey
> ice hockey
> ice hockey
> winter Olympics: hockey, ice, medallists
> ice hockey: British Sekonda Superleague Play-Off Championship: finals
> ice age
> National Hockey League
> Cracking the Ice Age
> ground-ice
> 
> My overriden similarity class contains just this method:
> public float coord(int overlap, int maxOverlap) {
> 
> return 1.0f;
> 
> }
> 
> 
> 
> 
> 
> I feel it is the weight factor which is producing indesirable results. Any
> help in this regard would be highly appreciated.
> 
> Regards,
> Niraj
> 
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Friday, June 04, 2004 8:46 PM
> Subject: Re: score and frequency
> 
> 
> 
>>Hi,
>>
>>Be careful to set the default similarity
>>'Similarity.setDefault(similarity)' before creating your search instance
>>(IndexSearcher).
>>If you change the default similarity after, you'll still use the old one.
>>You'd better use the 'searcher.setSimilarity' method on your searcher.
>>
>>Franck
>>
>>
>>Phil brunet wrote:
>>
>>>Hi to all.
>>>
>>>Maybe the term frequency is not the only parameter you need to override
>>>to "customize" the score attributed by Lucene.
>>>
>>>Maybe you should consider the normalisation factor, the idf and the
>>>coord factor ?
>>>
>>>Philippe
>>>
>>>
>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>Subject: Re: score and frequency
>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>
>>>>Hi Erik,
>>>>
>>>>Thanks for the suggestion.
>>>>
>>>>I tried this:
>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>
>>>>{
>>>>
>>>>public float tf(float freq) {
>>>>
>>>>System.out.println("discounting frequency");
>>>>
>>>>return (float)1;
>>>>
>>>>}
>>>>
>>>>}
>>>>
>>>>
>>>>
>>>>and in my query class, I used :
>>>>
>>>>Similarity.setDefault(similarity);
>>>>
>>>>Hits hits = is.search(query);
>>>>
>>>>for(i = 0; i < hits.length(); i ++)
>>>>
>>>>  result = result + hits.score(i);
>>>>
>>>>
>>>>
>>>>However, this is still not giving me the expected result. Do I need to
> 
> do
> 
>>>>something else?
>>>>
>>>>
>>>>Regards,
>>>>Niraj
>>>>
>>>>----- Original Message -----
>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>Subject: Re: score and frequency
>>>>
>>>>
>>>>
>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>
>>>>>>Hi,
>>>>>>
>>>>>>I am having some problems with the score of lucene.
>>>>>>I am trying to get the results displayed according to hits.score
> 
> and
> 
>>>>>>it is giving the results correctly.
>>>>>>However I do not want the frequency factor to be used for the
>>>>>>computation of the score.
>>>>>>
>>>>>>Is it possible to get the score which does not have the frequency
>>>>>>factor in it ?
>>>>>
>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> 
> used
> 
>>>>>unless otherwise specified.  You could subclass that and override
> 
> this:
> 
>>>>>   public float tf(float freq) {
>>>>>     return (float)Math.sqrt(freq);
>>>>>   }
>>>>>
>>>>>and return 1.0.  This might give you the effect you want.
>>>>>
>>>>>Erik
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>
>>>_________________________________________________________________
>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>>--
>>Franck Brisbart
>>R&D
>>http://www.kelkoo.com
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8610-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 14:16:26 2004
Return-Path: <lucene-user-return-8610-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66587 invoked from network); 7 Jun 2004 14:16:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 14:16:26 -0000
Received: (qmail 42990 invoked by uid 500); 7 Jun 2004 14:16:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42957 invoked by uid 500); 7 Jun 2004 14:16:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42942 invoked by uid 99); 7 Jun 2004 14:16:21 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 07 Jun 2004 07:16:21 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Mon, 07 Jun 2004 09:54:20 -0400
Message-Id: <s0c43b4c.056@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Mon, 07 Jun 2004 09:53:59 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: "No tvx reader"
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It can safely be removed.    I am pretty sure it happens during merging on =
fields that don't have term vector information included.  Of course, the =
real fix is to not attempt to not even call this method when there  is not =
term vector info.

It is normal, for now.  Should probably be removed, though.

>>> dave-lucene-user@tropo.com 06/05/04 05:37PM >>>

Using 1.4rc3.

Running an app that indexes 50k documents (thus it just uses an=20
IndexWriter).
One field has that boolean set for it to have a term vector stored for=20
it, while other 11 fields don't.

On stdout I see "No tvx file" 13 times.

Glancing thru the src it seems this comes from TermVectorReader.

The generated index seeems fine.

What could be causing this and is this normal?

thx,
 Dave


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8611-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 16:33:39 2004
Return-Path: <lucene-user-return-8611-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56131 invoked from network); 7 Jun 2004 16:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 16:33:38 -0000
Received: (qmail 7719 invoked by uid 500); 7 Jun 2004 16:33:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7002 invoked by uid 500); 7 Jun 2004 16:33:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6987 invoked by uid 99); 7 Jun 2004 16:33:39 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 07 Jun 2004 09:33:39 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i57GXId30644
	for <lucene-user@jakarta.apache.org>; Mon, 7 Jun 2004 11:33:19 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Mon, 07 Jun 2004 22:04:17 +0530
Message-ID: <000701c44cac$ca0e7ed0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net>
Subject: Re: score and frequency
Date: Mon, 7 Jun 2004 22:00:47 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Frank,

Thanks for the suggestion. I would try that and let you know.

Regards,
Niraj

----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 07, 2004 12:50 PM
Subject: Re: score and frequency


> It seems that you don't the length norm to be used. It's a factor which
> normalize the score of a doc depending on the size of the searched field
> of the doc. It's the field which make that 'ground ice' has a higher
> score than 'ice hockey: British Sekonda Superleague Play-Off
> Championship: finals' because it only has 2 terms.
> So, I suggest you to override the lengthNorm method and to ignore the
> numTokens parameter.
> NB: The length norm is computed during the indexation and the norm are
> store in the index (in the _aaa.f# files). So, you need to do re-index
> your data, and use this similarity during the indexation.
>
> Cheers,
> Franck
>
>
> Niraj Alok wrote:
> > I have set the searcher.setSimilarity  as well as also tried setting the
> > coord factor to 1.
> >
> > The problem as given by an example is : Lets say I have titles to be
> > displayed depending upon the search.
> > E.g if i have "ice hockey" as the search item and if it is default
> > similarity, my results are :
> >
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > winter Olympics: hockey, ice, medallists0.17402513
> > ice age0.073680125
> > National Hockey League0.020266924
> > Cracking the Ice Age0.018420031
> > ground-ice0.011512519
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.0069075115
> >  (the numbers indicating the score).
> >
> >
> > But if i set the similarity as my overridden one, the results become:
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > ice age0.22104037
> > winter Olympics: hockey, ice, medallists0.17402513
> > National Hockey League0.060800765
> > Cracking the Ice Age0.055260092
> > ground-ice0.034537554
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.020722535
> >
> >
> > I want all the titles which have both "ice" and "hockey" to come above
the
> > rest (to have higher scores)
> > Meaning i would wish the results to appear like:
> >
> > ice hockey
> > ice hockey
> > ice hockey
> > winter Olympics: hockey, ice, medallists
> > ice hockey: British Sekonda Superleague Play-Off Championship: finals
> > ice age
> > National Hockey League
> > Cracking the Ice Age
> > ground-ice
> >
> > My overriden similarity class contains just this method:
> > public float coord(int overlap, int maxOverlap) {
> >
> > return 1.0f;
> >
> > }
> >
> >
> >
> >
> >
> > I feel it is the weight factor which is producing indesirable results.
Any
> > help in this regard would be highly appreciated.
> >
> > Regards,
> > Niraj
> >
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Friday, June 04, 2004 8:46 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>Hi,
> >>
> >>Be careful to set the default similarity
> >>'Similarity.setDefault(similarity)' before creating your search instance
> >>(IndexSearcher).
> >>If you change the default similarity after, you'll still use the old
one.
> >>You'd better use the 'searcher.setSimilarity' method on your searcher.
> >>
> >>Franck
> >>
> >>
> >>Phil brunet wrote:
> >>
> >>>Hi to all.
> >>>
> >>>Maybe the term frequency is not the only parameter you need to override
> >>>to "customize" the score attributed by Lucene.
> >>>
> >>>Maybe you should consider the normalisation factor, the idf and the
> >>>coord factor ?
> >>>
> >>>Philippe
> >>>
> >>>
> >>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Subject: Re: score and frequency
> >>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>
> >>>>Hi Erik,
> >>>>
> >>>>Thanks for the suggestion.
> >>>>
> >>>>I tried this:
> >>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>
> >>>>{
> >>>>
> >>>>public float tf(float freq) {
> >>>>
> >>>>System.out.println("discounting frequency");
> >>>>
> >>>>return (float)1;
> >>>>
> >>>>}
> >>>>
> >>>>}
> >>>>
> >>>>
> >>>>
> >>>>and in my query class, I used :
> >>>>
> >>>>Similarity.setDefault(similarity);
> >>>>
> >>>>Hits hits = is.search(query);
> >>>>
> >>>>for(i = 0; i < hits.length(); i ++)
> >>>>
> >>>>  result = result + hits.score(i);
> >>>>
> >>>>
> >>>>
> >>>>However, this is still not giving me the expected result. Do I need to
> >
> > do
> >
> >>>>something else?
> >>>>
> >>>>
> >>>>Regards,
> >>>>Niraj
> >>>>
> >>>>----- Original Message -----
> >>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>Subject: Re: score and frequency
> >>>>
> >>>>
> >>>>
> >>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>
> >>>>>>Hi,
> >>>>>>
> >>>>>>I am having some problems with the score of lucene.
> >>>>>>I am trying to get the results displayed according to hits.score
> >
> > and
> >
> >>>>>>it is giving the results correctly.
> >>>>>>However I do not want the frequency factor to be used for the
> >>>>>>computation of the score.
> >>>>>>
> >>>>>>Is it possible to get the score which does not have the frequency
> >>>>>>factor in it ?
> >>>>>
> >>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> >
> > used
> >
> >>>>>unless otherwise specified.  You could subclass that and override
> >
> > this:
> >
> >>>>>   public float tf(float freq) {
> >>>>>     return (float)Math.sqrt(freq);
> >>>>>   }
> >>>>>
> >>>>>and return 1.0.  This might give you the effect you want.
> >>>>>
> >>>>>Erik
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>_________________________________________________________________
> >>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8612-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 16:50:59 2004
Return-Path: <lucene-user-return-8612-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65665 invoked from network); 7 Jun 2004 16:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 16:50:59 -0000
Received: (qmail 38068 invoked by uid 500); 7 Jun 2004 16:50:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38043 invoked by uid 500); 7 Jun 2004 16:50:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38025 invoked by uid 99); 7 Jun 2004 16:50:59 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 07 Jun 2004 09:50:59 -0700
Received: (qmail 74960 invoked by uid 89); 7 Jun 2004 16:50:43 -0000
Received: from unknown (HELO apache.org) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 7 Jun 2004 16:50:43 -0000
Message-ID: <40C49CBD.8050806@apache.org>
Date: Mon, 07 Jun 2004 09:50:05 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problems with lucene in multithreaded environment
References: <20040605110703.80644.qmail@web8301.mail.in.yahoo.com>
In-Reply-To: <20040605110703.80644.qmail@web8301.mail.in.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jayant Kumar wrote:
> Thanks for the patch. It helped in increasing the
> search speed to a good extent.

Good.  I'll commit it.  Thanks for testing it.

> But when we tried to
> give about 100 queries in 10 seconds, then again we
> found that after about 15 seconds, the response time
> per query increased.

This still sounds very slow to me.  Is your index optimized?  What JVM 
are you using?

You might also consider ramping up your benchmark more slowly, to warm 
the filesystem's cache.  So, when you first launch the server, give it a 
few queries at a lower rate, then, after those have completed, try a 
higher rate.

> We were able to simplify the searches further by
> consolidating the fields in the index but that
> resulted in increasing the index size to 2.5 GB as we
> required fields 2-5 and fields 1-7 in different
> searches.

That will slow updates a bit, but searching should be faster.

How about your range searches?  Do you know how many terms they match? 
The easiest way to determine this might be to insert a print statement 
in RangeQuery.rewrite() that shows the query before it is returned.

> Our indexes are on the local disk therefor
> there is no network i/o involved.

It does like file i/o is now your bottleneck.  The traces below show 
that you're using the compound file format, which combines many files 
into one.  When two threads try to read two logically different files 
(.prx and .frq below) they must sychronize when the compound format is 
used.  But if your application did not use the compound format this 
synchronization would not be required.  So you should try rebuilding 
your index with the compound format turned off.  (The fastest way to do 
this is simply to add and/or delete a single document, then re-optimize 
the index with compound format turned off.  This will cause the index to 
be re-written in non-compound format.)

Is this on linux?  If so, please try running 'iostat -x 1' while you 
perform your benchmark (iostat is installed by the 'sysstat' package). 
What percentage is the disk utilized (%util)?  What is the percentage of 
idle CPU (%idle)?  What is the rate of data that is read (rkB/s)?  If 
things really are i/o bound then you might consider spreading the data 
over multiple disks, e.g., with lvm striping or a RAID controller.

If you have a lot of RAM, then you could also consider moving certain 
files of the index onto a ramfs-based drive.  For example, moving the 
.tis, .frq and .prx can greatly improve performance.  Also, having these 
files in RAM means that the cache does not need to be warmed.

Hope this helps!

Doug

  > "Thread-23" prio=1 tid=0x08169f38 nid=0x2867 waiting for monitor 
entry [69bd4000..69bd48c8]
>         at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
>         - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
>         at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
>         at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>         at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
>         at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:58)
> 
> "Thread-22" prio=1 tid=0x08159f78 nid=0x2866 waiting for monitor entry [69b53000..69b538c8]
>         at org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:217)
>         - waiting to lock <0x46f1b828> (a org.apache.lucene.store.FSInputStream)
>         at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
>         at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>         at org.apache.lucene.store.InputStream.readVInt(InputStream.java:86)
>         at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8613-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 23:14:31 2004
Return-Path: <lucene-user-return-8613-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8394 invoked from network); 7 Jun 2004 23:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 23:14:31 -0000
Received: (qmail 44907 invoked by uid 500); 7 Jun 2004 23:14:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44879 invoked by uid 500); 7 Jun 2004 23:14:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44828 invoked by uid 99); 7 Jun 2004 23:14:03 -0000
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 07 Jun 2004 16:14:03 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i57JMkH11270
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Mon, 7 Jun 2004 20:22:54 +0100
Message-ID: <40C4C086.1090702@tropo.com>
Date: Mon, 07 Jun 2004 12:22:46 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Setting Similarity in IndexWriter and IndexSearcher
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does it ever make sense to set the Similartity obj in either (only one 
of..) IndexWriter or IndexSearcher? i.e. If I set it in IndexWriter can 
I avoid setting it in IndexSearcher? Also, can I avoid setting it in 
IndexWriter and only set it in IndexSearcher? I noticed Nutch sets it in 
both places and was wondering about what's going on behind the scenes...

thx,
  Dave

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8614-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 07 23:35:22 2004
Return-Path: <lucene-user-return-8614-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25507 invoked from network); 7 Jun 2004 23:35:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Jun 2004 23:35:22 -0000
Received: (qmail 16926 invoked by uid 500); 7 Jun 2004 23:35:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16889 invoked by uid 500); 7 Jun 2004 23:35:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16876 invoked by uid 99); 7 Jun 2004 23:35:23 -0000
Received: from [194.159.73.20] (HELO post-21.mail.nl.demon.net) (194.159.73.20)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 07 Jun 2004 16:35:23 -0700
Received: from [212.238.156.229] (helo=zilverline.org)
	by post-21.mail.nl.demon.net with esmtp (Exim 3.36 #2)
	id 1BXTda-000LDh-00; Mon, 07 Jun 2004 23:34:43 +0000
Message-ID: <40C4FBD4.8060404@zilverline.org>
Date: Tue, 08 Jun 2004 01:35:48 +0200
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Zilverline release candidate 1.0-rc3 available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

All,

I've just released a new candidate (*1.0-rc3*) that now supports 
plugins. You can create your own extractors
for various file formats. I've provided Extractors for Text, PDF, Word, 
and HTML.

It's also possible to specify your own handlers for archives. Say you 
have a RAR archive, and you have a program on your system that can 
extract the content from it, then you can specify that zilverline should 
use this program.

Zilverline is an free search engine based on lucene that's ready to 
roll, and can be simply dropped in a Servlet
Engine. It runs out of the box, and supports PDF, WORD, HTM, TXT, and 
CHM, and can  index zip, rar, and many other formats.
Both on Windows and Linux. 

Please take look at http://www.zilverline.org, and have a swing at it.

cheers,

   Michael Franken


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8615-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 01:27:46 2004
Return-Path: <lucene-user-return-8615-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2203 invoked from network); 8 Jun 2004 01:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 01:27:45 -0000
Received: (qmail 29174 invoked by uid 500); 8 Jun 2004 01:27:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29094 invoked by uid 500); 8 Jun 2004 01:27:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29080 invoked by uid 99); 8 Jun 2004 01:27:49 -0000
Received: from [219.238.232.76] (HELO mail.chinabidding.com) (219.238.232.76)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 07 Jun 2004 18:27:49 -0700
Received: (qmail 19598 invoked by uid 505); 8 Jun 2004 01:23:08 -0000
Received: from lujuan@bidlink.cn by mail.chinabidding.com by uid 444 with qmail-scanner-1.20rc1 
 ( Clear:RC:1:. 
 Processed in 0.038588 secs); 08 Jun 2004 01:23:08 -0000
Received: from unknown (HELO lujuan) (218.247.247.236)
  by 0 with SMTP; 8 Jun 2004 01:23:08 -0000
Message-ID: <002b01c44cf8$27856330$4d00a8c0@lujuan>
From: "juan lu" <lujuan@bidlink.cn>
To: <lucene-user@jakarta.apache.org>
Subject: Too many open files error occurs when changing 1.3 final to 1.4 rc2
Date: Tue, 8 Jun 2004 09:30:07 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0026_01C44D3B.2FF32690"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0026_01C44D3B.2FF32690
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SSBoYWQgYmVlbiB1c2luZyAxLjMgZmluYWwgZm9yIDEgbW9udGgsIGV2ZXJ5dGhpbmcgd2FzIG9r
LiBBIHdlZWsgYWdvLCBpIGNoYW5nZWQgMS4zIGZpbmFsIHRvIDEuNCByYzIsIGFkZGVkIHNvcnQg
d2hlbiBzZWFyY2hpbmcgLHRoZW4gZXJyb3JzIGJlbG93IG9jY3Vycy4gV2h5IGlzIHRoYXQ/IFdo
YXQgY2hhbmdlZCBpbiByZWxlYXNlIDEuNCA/IFRoYW5rcyBhIGxvdCENCg0KamF2YS5sYW5nLk51
bGxQb2ludGVyRXhjZXB0aW9uDQogICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguQ29t
cG91bmRGaWxlUmVhZGVyLjxpbml0PihDb21wb3VuZEZpbGVSZWFkZXIuamF2YTo5NCkgICAgICAg
IA0KICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LlNlZ21lbnRSZWFkZXIuPGluaXQ+
KFNlZ21lbnRSZWFkZXIuamF2YTo5NykNCiAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRl
eC5TZWdtZW50UmVhZGVyLjxpbml0PihTZWdtZW50UmVhZGVyLmphdmE6ODQpDQogICAgICAgYXQg
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIkMS5kb0JvZHkoSW5kZXhSZWFkZXIu
amF2YTo4NCkgICAgICAgIA0KICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkxvY2sk
V2l0aC5ydW4oTG9jay5qYXZhOjEwOSkNCiAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRl
eC5JbmRleFJlYWRlci5vcGVuKEluZGV4UmVhZGVyLmphdmE6NzMpDQogICAgICAgYXQgb3JnLmFw
YWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIub3BlbihJbmRleFJlYWRlci5qYXZhOjYxKQ0K
ICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5JbmRleFNlYXJjaGVyLjxpbml0PihJ
bmRleFNlYXJjaGVyLmphdmE6MzgpDQoNCmphdmEuaW8uSU9FeGNlcHRpb246IFRvbyBtYW55IG9w
ZW4gZmlsZXMNCiAgICAgICAgYXQgamF2YS5pby5Vbml4RmlsZVN5c3RlbS5jcmVhdGVGaWxlRXhj
bHVzaXZlbHkoTmF0aXZlIE1ldGhvZCkNCiAgICAgICAgYXQgamF2YS5pby5GaWxlLmNyZWF0ZU5l
d0ZpbGUoRmlsZS5qYXZhOjgyOCkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUu
RlNEaXJlY3RvcnkkMS5vYnRhaW4oRlNEaXJlY3RvcnkuamF2YToyOTcpDQogICAgICAgIGF0IG9y
Zy5hcGFjaGUubHVjZW5lLnN0b3JlLkxvY2sub2J0YWluKExvY2suamF2YTo1MykNCiAgICAgICAg
YXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuTG9jayRXaXRoLnJ1bihMb2NrLmphdmE6MTA4KQ0K
ICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlci5vcGVuKEluZGV4
UmVhZGVyLmphdmE6NzMpDQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4
UmVhZGVyLm9wZW4oSW5kZXhSZWFkZXIuamF2YTo2MSkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5s
dWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXIuPGluaXQ+KEluZGV4U2VhcmNoZXIuamF2YTozOCkN
Cg0KamF2YS5pby5GaWxlTm90Rm91bmRFeGNlcHRpb246IC9ob21lL2RiamgvamFrYXJ0YS10b21j
YXQtNC4xLjMwL3dlYmFwcHMvZGJqaC9zZWFyY2gvSW5kZXgvXzJkcWUuZmR4IChUb28gbWFueSBv
cGVuIGZpbGVzKQ0KICAgICAgICBhdCBqYXZhLmlvLlJhbmRvbUFjY2Vzc0ZpbGUub3BlbihOYXRp
dmUgTWV0aG9kKQ0KICAgICAgICBhdCBqYXZhLmlvLlJhbmRvbUFjY2Vzc0ZpbGUuPGluaXQ+KFJh
bmRvbUFjY2Vzc0ZpbGUuamF2YToyMDQpDQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0
b3JlLkZTSW5wdXRTdHJlYW0kRGVzY3JpcHRvci48aW5pdD4oRlNEaXJlY3RvcnkuamF2YTozNjYp
DQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkZTSW5wdXRTdHJlYW0uPGluaXQ+
KEZTRGlyZWN0b3J5LmphdmE6Mzk1KQ0KICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9y
ZS5GU0RpcmVjdG9yeS5vcGVuRmlsZShGU0RpcmVjdG9yeS5qYXZhOjI2NSkNCiAgICAgICAgYXQg
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRmllbGRzUmVhZGVyLjxpbml0PihGaWVsZHNSZWFkZXIu
amF2YTo0MykNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVudFJlYWRl
ci48aW5pdD4oU2VnbWVudFJlYWRlci5qYXZhOjEwMykNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5s
dWNlbmUuaW5kZXguU2VnbWVudFJlYWRlci48aW5pdD4oU2VnbWVudFJlYWRlci5qYXZhOjg0KQ0K
ICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlciQxLmRvQm9keShJ
bmRleFJlYWRlci5qYXZhOjg0KQ0KICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5M
b2NrJFdpdGgucnVuKExvY2suamF2YToxMDkpDQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5l
LmluZGV4LkluZGV4UmVhZGVyLm9wZW4oSW5kZXhSZWFkZXIuamF2YTo3MykNCiAgICAgICAgYXQg
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIub3BlbihJbmRleFJlYWRlci5qYXZh
OjYxKQ0KICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlci48
aW5pdD4oSW5kZXhTZWFyY2hlci5qYXZhOjM4KQ0K

------=_NextPart_000_0026_01C44D3B.2FF32690--


From lucene-user-return-8616-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 06:46:28 2004
Return-Path: <lucene-user-return-8616-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59899 invoked from network); 8 Jun 2004 06:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 06:46:27 -0000
Received: (qmail 14067 invoked by uid 500); 8 Jun 2004 06:46:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13855 invoked by uid 500); 8 Jun 2004 06:46:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13701 invoked by uid 99); 8 Jun 2004 06:46:13 -0000
Received: from [203.197.74.149] (HELO smtp1.iitb.ac.in) (203.197.74.149)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 07 Jun 2004 23:46:12 -0700
Received: (qmail 2079 invoked by uid 505); 8 Jun 2004 06:45:39 -0000
Received: from satishk@it.iitb.ac.in by smtp1.iitb.ac.in by uid 502 with qmail-scanner-1.16 
 (clamscan: 0.54. spamassassin: 2.54.  Clear:. 
 Processed in 0.471877 secs); 08 Jun 2004 06:45:39 -0000
Received: from unknown (HELO fornax.it.iitb.ac.in) (10.129.1.105)
  by smtp1.iitb.ac.in with SMTP; 8 Jun 2004 06:45:38 -0000
Received: (qmail 21292 invoked by uid 5073); 8 Jun 2004 07:06:50 -0000
Date: Tue, 8 Jun 2004 12:36:50 +0530 (IST)
From: Satish Kagathare <satishk@it.iitb.ac.in>
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  <lucene-dev@jakarta.apache.org>
Subject: Does Lucene support UNICODE?
In-Reply-To: <40C4C086.1090702@tropo.com>
Message-ID: <Pine.LNX.4.44.0406081148440.19197-100000@fornax.it.iitb.ac.in>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello,

Does Lucene support UNICODE search and indexing of UNICODE 
data(especially..Devnagari unicode data)?
Does it make any difference between utf-8 & utf-16 unicode docs? Bcoz 
java strings supports utf-16.

Bcoz i tried indexing(using indexFiles & indexHTML from lucene Demo) 
devnagari uni data(utf-8 & utf-16) & seraching for query using tomcat, 
but it shows only utf-8 files and also shows files which does not 
contain query. Also It does not show summary of fetched docs in correct 
format.

Also i have changed unicode range in HTMLparser.jj, StandardTokenizer.jj & 
QueryParser.jj and analyzer while indexing and parsing query but it does 
not reflect any changes in output.
 
shall i have to write my own analyzer for devnagari unicode data or 
Standaranalyzer will work for any languages?

Or does it require more changes? Plz mention problems and solutions. 

Thanks in advance
Satish Kagathara,
IIT Bombay.      

  


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8617-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 07:59:38 2004
Return-Path: <lucene-user-return-8617-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10750 invoked from network); 8 Jun 2004 07:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 07:59:38 -0000
Received: (qmail 18894 invoked by uid 500); 8 Jun 2004 07:59:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18856 invoked by uid 500); 8 Jun 2004 07:59:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18839 invoked by uid 99); 8 Jun 2004 07:59:45 -0000
Received: from [203.199.122.38] (HELO web8308.mail.in.yahoo.com) (203.199.122.38)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 00:59:45 -0700
Message-ID: <20040608075909.89295.qmail@web8308.mail.in.yahoo.com>
Received: from [210.7.75.237] by web8308.mail.in.yahoo.com via HTTP; Tue, 08 Jun 2004 08:59:09 BST
Date: Tue, 8 Jun 2004 08:59:09 +0100 (BST)
From: =?iso-8859-1?q?Jayant=20Kumar?= <jayantlists@yahoo.co.in>
Subject: Re: problems with lucene in multithreaded environment
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40C49CBD.8050806@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 --- Doug Cutting <cutting@apache.org> wrote: > Jayant
Kumar wrote:
> > Thanks for the patch. It helped in increasing the
> > search speed to a good extent.
> 
> Good.  I'll commit it.  Thanks for testing it.
> 
> > But when we tried to
> > give about 100 queries in 10 seconds, then again
> we
> > found that after about 15 seconds, the response
> time
> > per query increased.
> 
> This still sounds very slow to me.  Is your index
> optimized?  What JVM 
> are you using?

Yes our index is optimized and we are using java
version 1.4.2. What would be the difference between
search on a optimized index and that on an unoptimized
index.

> 
> You might also consider ramping up your benchmark
> more slowly, to warm 
> the filesystem's cache.  So, when you first launch
> the server, give it a 
> few queries at a lower rate, then, after those have
> completed, try a 
> higher rate.
> 

We have tried this out and since we have lots of ram,
once the indexes go into the os cache, results come
out fast.

> > We were able to simplify the searches further by
> > consolidating the fields in the index but that
> > resulted in increasing the index size to 2.5 GB as
> we
> > required fields 2-5 and fields 1-7 in different
> > searches.
> 
> That will slow updates a bit, but searching should
> be faster.
> 
> How about your range searches?  Do you know how many
> terms they match? 
> The easiest way to determine this might be to insert
> a print statement 
> in RangeQuery.rewrite() that shows the query before
> it is returned.
> 
> > Our indexes are on the local disk therefor
> > there is no network i/o involved.
> 
> It does like file i/o is now your bottleneck.  The
> traces below show 
> that you're using the compound file format, which
> combines many files 
> into one.  When two threads try to read two
> logically different files 
> (.prx and .frq below) they must sychronize when the
> compound format is 
> used.  But if your application did not use the
> compound format this 
> synchronization would not be required.  So you
> should try rebuilding 
> your index with the compound format turned off. 
> (The fastest way to do 
> this is simply to add and/or delete a single
> document, then re-optimize 
> the index with compound format turned off.  This
> will cause the index to 
> be re-written in non-compound format.)

We have changed the indexwriter to write index in
non-compound format and have noticed a little
difference in the response time.

> 
> Is this on linux?  If so, please try running 'iostat
> -x 1' while you 
> perform your benchmark (iostat is installed by the
> 'sysstat' package). 
> What percentage is the disk utilized (%util)?  What
> is the percentage of 
> idle CPU (%idle)?  What is the rate of data that is
> read (rkB/s)?  If 
> things really are i/o bound then you might consider
> spreading the data 
> over multiple disks, e.g., with lvm striping or a
> RAID controller.
> 
> If you have a lot of RAM, then you could also
> consider moving certain 
> files of the index onto a ramfs-based drive.  For
> example, moving the 
> .tis, .frq and .prx can greatly improve performance.
>  Also, having these 
> files in RAM means that the cache does not need to
> be warmed.
> 
> Hope this helps!

Thanks for the help. We will continue interacting with
you as and when we face problems. We would also like
you to know that lucene is an excellent search engine
compared to any other.

Jayant
  

________________________________________________________________________
Yahoo! India Matrimony: Find your partner online. http://yahoo.shaadi.com/india-matrimony/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8618-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 08:07:55 2004
Return-Path: <lucene-user-return-8618-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18023 invoked from network); 8 Jun 2004 08:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 08:07:54 -0000
Received: (qmail 28550 invoked by uid 500); 8 Jun 2004 08:07:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28441 invoked by uid 500); 8 Jun 2004 08:07:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28248 invoked by uid 99); 8 Jun 2004 08:07:51 -0000
Received: from [203.59.3.38] (HELO mail.iinet.net.au) (203.59.3.38)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 01:07:49 -0700
Received: (qmail 10582 invoked from network); 8 Jun 2004 08:02:19 -0000
Received: from unknown (HELO peterbecker.de) (203.173.58.65)
  by mail.iinet.net.au with SMTP; 8 Jun 2004 08:02:18 -0000
Message-ID: <40C57164.30105@peterbecker.de>
Date: Tue, 08 Jun 2004 17:57:24 +1000
From: Peter Becker <peter@peterbecker.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Zilverline release candidate 1.0-rc3 available
References: <40C4FBD4.8060404@zilverline.org>
In-Reply-To: <40C4FBD4.8060404@zilverline.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Michael,

I wonder if you would be interested in cooperating on the 
extracting/index management bit. We use Lucene and our own extractor 
plugins for a Swing-application:

  http://tockit.sf.net/docco

Code can be found here:

  http://cvs.sourceforge.net/viewcvs.py/toscanaj/docco/

It is BSD-Style licenced. You did some more things than we (Zip/Rar and 
CHM for example), we have simple OOo support:

 http://cvs.sourceforge.net/viewcvs.py/toscanaj/docco/source/org/tockit/docco/documenthandler/OpenOfficeDocumentHandler.java?rev=1.4&view=auto

We also have dynamic class loading -- although only with a very simple 
approach, we were considering moving on to Eclipse's model.

One thing I wanted to look at is PPT support -- but I don't know when. 
The thing is that I am running this little project on my own at the 
moment and it is not highest priority. But I'd be happy to synchronize 
some aspects with your project since I think it would be very valuable 
to have a generic document indexing framework which can be used in any 
Lucene application.

Cheers,
   Peter




Zilverline info wrote:

> All,
>
> I've just released a new candidate (*1.0-rc3*) that now supports 
> plugins. You can create your own extractors
> for various file formats. I've provided Extractors for Text, PDF, 
> Word, and HTML.
>
> It's also possible to specify your own handlers for archives. Say you 
> have a RAR archive, and you have a program on your system that can 
> extract the content from it, then you can specify that zilverline 
> should use this program.
>
> Zilverline is an free search engine based on lucene that's ready to 
> roll, and can be simply dropped in a Servlet
> Engine. It runs out of the box, and supports PDF, WORD, HTM, TXT, and 
> CHM, and can  index zip, rar, and many other formats.
> Both on Windows and Linux.
> Please take look at http://www.zilverline.org, and have a swing at it.
>
> cheers,
>
>   Michael Franken
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8619-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 09:23:13 2004
Return-Path: <lucene-user-return-8619-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64622 invoked from network); 8 Jun 2004 09:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 09:23:13 -0000
Received: (qmail 40097 invoked by uid 500); 8 Jun 2004 09:23:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40028 invoked by uid 500); 8 Jun 2004 09:23:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39980 invoked by uid 99); 8 Jun 2004 09:23:18 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 02:23:18 -0700
Message-ID: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
Received: from [195.29.121.221] by web12702.mail.yahoo.com via HTTP; Tue, 08 Jun 2004 02:22:45 PDT
Date: Tue, 8 Jun 2004 02:22:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Performance: compound vs. multi-file index, indexing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I was wondering if anyone can comment on the performance difference of
compound versus multi-file indices.  I am interested in both indexing
and searching performance, and have tried testing indexing performance
of both formats.

My tests so far show no indexing performance differences between the
two formats, but I do remember one person reporting compound index
format being 7% slower, so perhaps my tests are flawed.

Can anyone comment on performance differences?

Thanks,
Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8620-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 09:34:34 2004
Return-Path: <lucene-user-return-8620-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71731 invoked from network); 8 Jun 2004 09:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 09:34:34 -0000
Received: (qmail 58867 invoked by uid 500); 8 Jun 2004 09:34:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58624 invoked by uid 500); 8 Jun 2004 09:34:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58451 invoked by uid 99); 8 Jun 2004 09:34:36 -0000
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 02:34:36 -0700
Message-ID: <20040608093353.93420.qmail@web12707.mail.yahoo.com>
Received: from [195.29.121.221] by web12707.mail.yahoo.com via HTTP; Tue, 08 Jun 2004 02:33:53 PDT
Date: Tue, 8 Jun 2004 02:33:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Too many open files error occurs when changing 1.3 final to 1.4 rc2
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <002b01c44cf8$27856330$4d00a8c0@lujuan>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am not 100% certain now, but I _think_ there were some changes that
required that you re-index your data when upgrading to 1.4rc2.  I would
check the CHANGES file (link on the site, just look at the complete
file).

Otis

--- juan lu <lujuan@bidlink.cn> wrote:
> I had been using 1.3 final for 1 month, everything was ok. A week
> ago, i changed 1.3 final to 1.4 rc2, added sort when searching ,then
> errors below occurs. Why is that? What changed in release 1.4 ?
> Thanks a lot!
> 
> java.lang.NullPointerException
>        at
>
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:94)
>        
>        at
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:97)
>        at
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:84)
>        at
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:84)    
>    
>        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>        at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:73)
>        at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:61)
>        at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 
> java.io.IOException: Too many open files
>         at java.io.UnixFileSystem.createFileExclusively(Native
> Method)
>         at java.io.File.createNewFile(File.java:828)
>         at
> org.apache.lucene.store.FSDirectory$1.obtain(FSDirectory.java:297)
>         at org.apache.lucene.store.Lock.obtain(Lock.java:53)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:108)
>         at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:73)
>         at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:61)
>         at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 
> java.io.FileNotFoundException:
> /home/dbjh/jakarta-tomcat-4.1.30/webapps/dbjh/search/Index/_2dqe.fdx
> (Too many open files)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>         at
>
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:366)
>         at
> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:395)
>         at
> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:265)
>         at
> org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:43)
>         at
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:103)
>         at
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:84)
>         at
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:84)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>         at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:73)
>         at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:61)
>         at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8621-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 12:07:06 2004
Return-Path: <lucene-user-return-8621-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64574 invoked from network); 8 Jun 2004 12:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 12:07:06 -0000
Received: (qmail 75213 invoked by uid 500); 8 Jun 2004 12:07:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75184 invoked by uid 500); 8 Jun 2004 12:07:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75170 invoked by uid 99); 8 Jun 2004 12:07:00 -0000
Received: from [66.218.94.73] (HELO web90102.mail.scd.yahoo.com) (66.218.94.73)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 05:07:00 -0700
Message-ID: <20040608120650.62724.qmail@web90102.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90102.mail.scd.yahoo.com via HTTP; Tue, 08 Jun 2004 05:06:50 PDT
Date: Tue, 8 Jun 2004 05:06:50 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: lucene scoring 
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-106232061-1086696410=:62255"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-106232061-1086696410=:62255
Content-Type: text/plain; charset=us-ascii

Hi all,
 
It's so confusing the way Lucence computes the score. I tried to see what happaned but am blocked with some parameters' mystery.
 
- in DefaultSimilarity.queryNorm(float sumOfSquareWeights) : how does it compute the query weight?
- How does it compute the weight of each field in the index (fieldWeight, fieldNorm)?
 
Regards
 
Uddam

		
---------------------------------
Do you Yahoo!?
Friends.  Fun. Try the all-new Yahoo! Messenger
--0-106232061-1086696410=:62255--

From lucene-user-return-8622-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 14:38:52 2004
Return-Path: <lucene-user-return-8622-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77661 invoked from network); 8 Jun 2004 14:38:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 14:38:51 -0000
Received: (qmail 61644 invoked by uid 500); 8 Jun 2004 14:38:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61580 invoked by uid 500); 8 Jun 2004 14:38:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61567 invoked by uid 99); 8 Jun 2004 14:38:51 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 07:38:51 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i58EcU16003235
	for <lucene-user@jakarta.apache.org>; Tue, 8 Jun 2004 16:38:31 +0200
Message-ID: <40C5CF68.6050703@isb-sib.ch>
Date: Tue, 08 Jun 2004 16:38:32 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
References: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Can anyone comment on performance differences?

I just ran a comparison, indexing about 250'000 small documents. Both 
the time for indexing (239s) and the final disk space used (16.6MB) were 
identical. Haven't compared search performance, though I suspect I can 
save myself the effort...

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8623-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 15:10:49 2004
Return-Path: <lucene-user-return-8623-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2460 invoked from network); 8 Jun 2004 15:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 15:10:49 -0000
Received: (qmail 41240 invoked by uid 500); 8 Jun 2004 15:10:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41199 invoked by uid 500); 8 Jun 2004 15:10:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41183 invoked by uid 99); 8 Jun 2004 15:10:49 -0000
Received: from [38.112.109.12] (HELO mail.blueprint.org) (38.112.109.12)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 08:10:49 -0700
Received: from blueprint.org (mail.blueprint.org [38.112.108.69])
 by mail.blueprint.org
 (iPlanet Messaging Server 5.2 Patch 1 (built Aug 19 2002))
 with ESMTP id <0HYZ00E98WS78Y@mail.blueprint.org> for
 lucene-user@jakarta.apache.org; Tue, 08 Jun 2004 11:09:43 -0400 (EDT)
Date: Tue, 08 Jun 2004 11:09:43 -0400
From: Yue Sun <ysun@blueprint.org>
Subject: out of memory while indexing one single file
To: lucene-user@jakarta.apache.org
Message-id: <40C5D6B7.7050908@blueprint.org>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.0.1) Gecko/20020921
 Netscape/7.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

First, I am not sure if I should post my question here, since I am using 
CLucene (C++ port of Lucene) to build indexes. Hope someone here could 
help me.

I am indexing at a solaris machine with 1G memory. I use ram writer and 
fs writer, and write into fs index once a while. Now I am testing to 
index single input files. While testing on files < 50M, the program 
works well. While indexing bigger file, it runs out of 1G memory and 
crashes, whatever I set some parameters such as merge factor and the 
frequency writing to disk. My input files are in ASN.1 format, each with 
nested entries, and each entry with various number of fields. I index 
every outermost entry as a lucene document, and each data field as a 
lucene field. So what is different from others, the number of fields 
indexed in my program is quite big. Some files have more than 1000 
different field names. There is no problem with max file descriptors. 
For those failed, some lucene documents have more than 40,000 field 
pairs (duplicate field names with different values). I think it is the 
reason why memory is consumed vastly. One of the failed cases is with an 
input file size: 66M, and crashes after processing about 3800 documents.

Is there any way to improve the program to use less memory? Any 
suggestion would be apprecited!

Regards,
Yue Sun


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8624-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 15:39:02 2004
Return-Path: <lucene-user-return-8624-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25024 invoked from network); 8 Jun 2004 15:39:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 15:39:02 -0000
Received: (qmail 8203 invoked by uid 500); 8 Jun 2004 15:38:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8007 invoked by uid 500); 8 Jun 2004 15:38:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7906 invoked by uid 99); 8 Jun 2004 15:38:49 -0000
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 08:38:49 -0700
Message-ID: <20040608153833.51252.qmail@web12707.mail.yahoo.com>
Received: from [195.29.121.221] by web12707.mail.yahoo.com via HTTP; Tue, 08 Jun 2004 08:38:33 PDT
Date: Tue, 8 Jun 2004 08:38:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: out of memory while indexing one single file
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40C5D6B7.7050908@blueprint.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I don't know if the author of CLucene is on this list.  You may get
better help on CLucene mailing list or forum on sf.net.

Otis

--- Yue Sun <ysun@blueprint.org> wrote:
> Hi,
> 
> First, I am not sure if I should post my question here, since I am
> using 
> CLucene (C++ port of Lucene) to build indexes. Hope someone here
> could 
> help me.
> 
> I am indexing at a solaris machine with 1G memory. I use ram writer
> and 
> fs writer, and write into fs index once a while. Now I am testing to 
> index single input files. While testing on files < 50M, the program 
> works well. While indexing bigger file, it runs out of 1G memory and 
> crashes, whatever I set some parameters such as merge factor and the 
> frequency writing to disk. My input files are in ASN.1 format, each
> with 
> nested entries, and each entry with various number of fields. I index
> 
> every outermost entry as a lucene document, and each data field as a 
> lucene field. So what is different from others, the number of fields 
> indexed in my program is quite big. Some files have more than 1000 
> different field names. There is no problem with max file descriptors.
> 
> For those failed, some lucene documents have more than 40,000 field 
> pairs (duplicate field names with different values). I think it is
> the 
> reason why memory is consumed vastly. One of the failed cases is with
> an 
> input file size: 66M, and crashes after processing about 3800
> documents.
> 
> Is there any way to improve the program to use less memory? Any 
> suggestion would be apprecited!
> 
> Regards,
> Yue Sun
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8625-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 16:46:45 2004
Return-Path: <lucene-user-return-8625-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73696 invoked from network); 8 Jun 2004 16:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 16:46:45 -0000
Received: (qmail 16035 invoked by uid 500); 8 Jun 2004 16:46:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15938 invoked by uid 500); 8 Jun 2004 16:46:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15843 invoked by uid 99); 8 Jun 2004 16:46:25 -0000
Received: from [216.74.150.80] (HELO germany.prod.thop-ny.triplehop.com) (216.74.150.80)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 09:46:25 -0700
Received: from hui2000 ([208.246.29.6]) by germany.prod.thop-ny.triplehop.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 8 Jun 2004 12:45:50 -0400
From: "hui" <hui@triplehop.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Performance: compound vs. multi-file index, indexing and searching
Date: Tue, 8 Jun 2004 12:50:00 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcRNOii6oZh2bJSXQtKK8fnkyhnPWQAPYELw
Message-ID: <GERMANYYZSMZ1pzn5UJ000013c1@germany.prod.thop-ny.triplehop.com>
X-OriginalArrivalTime: 08 Jun 2004 16:45:51.0500 (UTC) FILETIME=[0EEC54C0:01C44D78]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I did the test earlier on 1.3
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apac
he.org&msgId=1408808



Regards,
Hui

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Tuesday, June 08, 2004 5:23 AM
To: Lucene Users List
Subject: Performance: compound vs. multi-file index, indexing and searching

Hello,

I was wondering if anyone can comment on the performance difference of
compound versus multi-file indices.  I am interested in both indexing
and searching performance, and have tried testing indexing performance
of both formats.

My tests so far show no indexing performance differences between the
two formats, but I do remember one person reporting compound index
format being 7% slower, so perhaps my tests are flawed.

Can anyone comment on performance differences?

Thanks,
Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8626-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 17:30:44 2004
Return-Path: <lucene-user-return-8626-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95819 invoked from network); 8 Jun 2004 17:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 17:30:44 -0000
Received: (qmail 3910 invoked by uid 500); 8 Jun 2004 17:30:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3878 invoked by uid 500); 8 Jun 2004 17:30:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3857 invoked by uid 99); 8 Jun 2004 17:30:45 -0000
Received: from [207.172.4.61] (HELO smtp02.mrf.mail.rcn.net) (207.172.4.61)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 10:30:45 -0700
X-Info: This message was accepted for relay by
	smtp02.mrf.mail.rcn.net as the sender used SMTP authentication
X-Trace: QRNzTB+HWiO71D6ZQTNFRCI4WTD///hKyuO97fpLzM8=
Received: from 206.173.21.105.ptr.us.xo.net ([206.173.21.105])
	by smtp02.mrf.mail.rcn.net with asmtp (Exim 3.35 #7)
	id 1BXkQW-0005Zc-00
	for lucene-user@jakarta.apache.org; Tue, 08 Jun 2004 13:30:20 -0400
User-Agent: Microsoft-Entourage/10.1.4.030702.0
Date: Tue, 08 Jun 2004 10:30:17 -0700
Subject: Lucene Scoring question
From: Ram Subbaroyan <rams@rcn.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-ID: <BCEB45B9.AAB7%rams@rcn.com>
In-Reply-To: <20040608120650.62724.qmail@web90102.mail.scd.yahoo.com>
Mime-version: 1.0
Content-type: text/plain; charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have been trying to follow Lucene scoring across multiple searchables. And
I do not see where the IDF gets normalized between searchables? (Sum DF
across searchables in first half of query and use in second half of query
execution to calculate right IDF across searchables.)

Lets say you have one searchable where every document has the word "foo" (
just once) and the other searchable has the the word "foo" in just 10
documents. If you run a query on "foo" your top 10 results will only come
from the second searchable( all else being equal).

I am guessing this is not to important since most users will be randomizing
documents between searchables?

I am new to the code base, and may be missing something. Wanted to check
before I start implementing it.

Thanks

ram


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8627-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 17:30:44 2004
Return-Path: <lucene-user-return-8627-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95867 invoked from network); 8 Jun 2004 17:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 17:30:44 -0000
Received: (qmail 4710 invoked by uid 500); 8 Jun 2004 17:30:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4670 invoked by uid 500); 8 Jun 2004 17:30:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4457 invoked by uid 99); 8 Jun 2004 17:30:51 -0000
Received: from [207.172.4.61] (HELO smtp02.mrf.mail.rcn.net) (207.172.4.61)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 10:30:51 -0700
X-Info: This message was accepted for relay by
	smtp02.mrf.mail.rcn.net as the sender used SMTP authentication
X-Trace: QRNzTB+HWiMW2d9cB5/a1UvMdFJmyRSp2QpOM9eukao=
Received: from 206.173.21.105.ptr.us.xo.net ([206.173.21.105])
	by smtp02.mrf.mail.rcn.net with asmtp (Exim 3.35 #7)
	id 1BXkQe-0005bH-00
	for lucene-user@jakarta.apache.org; Tue, 08 Jun 2004 13:30:28 -0400
User-Agent: Microsoft-Entourage/10.1.4.030702.0
Date: Tue, 08 Jun 2004 10:19:53 -0700
Subject: Re: lucene scoring 
From: Ram Subbaroyan <rams@rcn.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-ID: <BCEB4349.AAB4%rams@rcn.com>
In-Reply-To: <20040608120650.62724.qmail@web90102.mail.scd.yahoo.com>
Mime-version: 1.0
Content-type: text/plain; charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Uddam answers inline:

> - in DefaultSimilarity.queryNorm(float sumOfSquareWeights) : how does it
> compute the query weight?

To understand Lucene scoring it is easiest if you follow a query with only
one term on a searchable.

Here is the general flow of control for such a query:

-IndexSearcher line 132 calls
    -Query.java line 118
        Here is where the weight is created
    - TermQuery.java line 94
    - TermScorer.java line 76
    - TermScorer.java line 112

After you follow this control flow you can try to follow the control flow
for a Phrase, Boolean and Range query.

> - How does it compute the weight of each field in the index (fieldWeight,
> fieldNorm)?

The code for this is found in

DocumentWriter.java - line 110 and 321

Hope this helps.

ram

On 6/8/04 5:06 AM, "uddam chukmol" <uddam_chukmol@yahoo.com> wrote:

> Hi all,
> 
> It's so confusing the way Lucence computes the score. I tried to see what
> happaned but am blocked with some parameters' mystery.
> 
> - in DefaultSimilarity.queryNorm(float sumOfSquareWeights) : how does it
> compute the query weight?
> - How does it compute the weight of each field in the index (fieldWeight,
> fieldNorm)?
> 
> Regards
> 
> Uddam
> 
> 
> ---------------------------------
> Do you Yahoo!?
> Friends.  Fun. Try the all-new Yahoo! Messenger


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8628-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 17:43:06 2004
Return-Path: <lucene-user-return-8628-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1579 invoked from network); 8 Jun 2004 17:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 17:43:06 -0000
Received: (qmail 26425 invoked by uid 500); 8 Jun 2004 17:43:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26391 invoked by uid 500); 8 Jun 2004 17:43:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26376 invoked by uid 99); 8 Jun 2004 17:43:10 -0000
Received: from [149.173.6.17] (HELO merc94.na.sas.com) (149.173.6.17)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 10:43:10 -0700
Received: from MERC23.na.sas.com ([10.19.9.179]) by merc94.na.sas.com with InterScan Messaging Security Suite; Tue, 08 Jun 2004 13:42:37 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Does Lucene support UNICODE?
Date: Tue, 8 Jun 2004 13:42:37 -0400
Message-ID: <38BCC8D26B88894DB8D921BD95121CAC09937D@MERC23.na.sas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does Lucene support UNICODE?
Thread-Index: AcRNJEtwOXQgL1LOSM6NiDU+TTOMEgAWxaIw
From: "Eric Isakson" <Eric.Isakson@sas.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

org.apache.lucene.demo.FileDocument.Document(File) is invoked from =
IndexFiles and does:

    Reader reader =3D new BufferedReader(new InputStreamReader(is));

Notice that the InputStreamReader does not specify an encoding so your =
default encoding is being used.

You should probably write your own glue to create your index that knows =
how to properly read your files in the appropriate encoding.

Also, please don't cross post to the dev and user lists, this is an =
appropriate question for the user list.

Eric

-----Original Message-----
From: Satish Kagathare [mailto:satishk@it.iitb.ac.in]=20
Sent: Tuesday, June 08, 2004 3:07 AM
To: Lucene Users List; lucene-dev@jakarta.apache.org
Subject: Does Lucene support UNICODE?



Hello,

Does Lucene support UNICODE search and indexing of UNICODE=20
data(especially..Devnagari unicode data)?
Does it make any difference between utf-8 & utf-16 unicode docs? Bcoz=20
java strings supports utf-16.

Bcoz i tried indexing(using indexFiles & indexHTML from lucene Demo)=20
devnagari uni data(utf-8 & utf-16) & seraching for query using tomcat,=20
but it shows only utf-8 files and also shows files which does not=20
contain query. Also It does not show summary of fetched docs in correct=20
format.

Also i have changed unicode range in HTMLparser.jj, StandardTokenizer.jj =
&=20
QueryParser.jj and analyzer while indexing and parsing query but it does =

not reflect any changes in output.
=20
shall i have to write my own analyzer for devnagari unicode data or=20
Standaranalyzer will work for any languages?

Or does it require more changes? Plz mention problems and solutions.=20

Thanks in advance
Satish Kagathara,
IIT Bombay.     =20

 =20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8629-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 21:33:24 2004
Return-Path: <lucene-user-return-8629-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25863 invoked from network); 8 Jun 2004 21:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 21:33:24 -0000
Received: (qmail 96003 invoked by uid 500); 8 Jun 2004 21:33:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95938 invoked by uid 500); 8 Jun 2004 21:33:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95920 invoked by uid 99); 8 Jun 2004 21:33:33 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 14:33:33 -0700
Received: (qmail 12308 invoked by uid 89); 8 Jun 2004 21:33:09 -0000
Received: from unknown (HELO apache.org) (208.54.15.1)
  by londo.swishmail.com with SMTP; 8 Jun 2004 21:33:09 -0000
Message-ID: <40C6172F.1050703@apache.org>
Date: Tue, 08 Jun 2004 12:44:47 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Setting Similarity in IndexWriter and IndexSearcher
References: <40C4C086.1090702@tropo.com>
In-Reply-To: <40C4C086.1090702@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> Does it ever make sense to set the Similartity obj in either (only one 
> of..) IndexWriter or IndexSearcher? i.e. If I set it in IndexWriter can 
> I avoid setting it in IndexSearcher? Also, can I avoid setting it in 
> IndexWriter and only set it in IndexSearcher? I noticed Nutch sets it in 
> both places and was wondering about what's going on behind the scenes...

No, it probably doesn't make sense to use a different Similarity 
implementation when indexing than when searching.  Ideally perhaps we'd 
have a LuceneConfiguration object, which encapsulates the Similarity, 
Analysis and Directory implementations, as well as perhaps other 
parameters.  And perhaps this could even be stored with the index, using 
Java object serialization.  However I worry that this could cause more 
confusion than it solves.  For example, one might not easily be able to 
search and index if a class used when it was indexed is no longer 
available when searching.  Tools like Luke could become more difficult 
to write and use.

By design, one does not have to declare things up-front with Lucene. 
For example, one never has to declare the set of fields and their types. 
  Different documents in the same index can use different fields, or 
even use the same field name differently.  Saving analyzers and 
similarity implementations with the index reduces this sort of 
flexibility somewhat.  If you rename your analysis or similarity class, 
does your index become invalid?  Lucene currently avoids such issues, at 
the expense of potential confusion about using different analyzers and 
similarity at index and search time.  But I don't think the latter is in 
practice a problem that needs more than a little documentation.

Sorry for the long-winded answer!

Doug



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8630-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 21:33:30 2004
Return-Path: <lucene-user-return-8630-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25923 invoked from network); 8 Jun 2004 21:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 21:33:30 -0000
Received: (qmail 96481 invoked by uid 500); 8 Jun 2004 21:33:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96242 invoked by uid 500); 8 Jun 2004 21:33:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96151 invoked by uid 99); 8 Jun 2004 21:33:34 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 14:33:34 -0700
Received: (qmail 12337 invoked by uid 89); 8 Jun 2004 21:33:10 -0000
Received: from unknown (HELO apache.org) (208.54.15.1)
  by londo.swishmail.com with SMTP; 8 Jun 2004 21:33:10 -0000
Message-ID: <40C61882.6040504@apache.org>
Date: Tue, 08 Jun 2004 12:50:26 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
References: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040608092245.1108.qmail@web12702.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> Can anyone comment on performance differences?

I'd expect multi-threaded performance to be a bit worse with the 
compound format, but single-threaded performance should be nearly identical.

Doug



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8631-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 08 21:47:06 2004
Return-Path: <lucene-user-return-8631-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33388 invoked from network); 8 Jun 2004 21:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Jun 2004 21:47:06 -0000
Received: (qmail 20256 invoked by uid 500); 8 Jun 2004 21:47:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20183 invoked by uid 500); 8 Jun 2004 21:47:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20170 invoked by uid 99); 8 Jun 2004 21:47:17 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 08 Jun 2004 14:47:17 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Tue, 08 Jun 2004 17:46:53 -0400
Message-Id: <s0c5fb8d.055@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Tue, 08 Jun 2004 17:46:44 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: Setting Similarity in IndexWriter and IndexSearcher
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I do these kind of things as part of a layer between Lucene and my =
application, but often have thought it would be nice to have a metadata =
layer available that wasn't part of the Lucene core, but was packaged w/ =
Lucene.  It could provide the information necessary and have tools for =
updating with out messing w/ the index.

For instance, one of the things I store is the name of the field that is =
the "true" document identifier (a unique String that won't change across =
Indexing) for that Document (which, as Doug pointed out, can vary from =
Document to Document w/in the Index).

Cheers,
Grant


>>> cutting@apache.org 06/08/04 03:44PM >>>
David Spencer wrote:
> Does it ever make sense to set the Similartity obj in either (only =
one=20
> of..) IndexWriter or IndexSearcher? i.e. If I set it in IndexWriter =
can=20
> I avoid setting it in IndexSearcher? Also, can I avoid setting it in=20
> IndexWriter and only set it in IndexSearcher? I noticed Nutch sets it =
in=20
> both places and was wondering about what's going on behind the scenes...

No, it probably doesn't make sense to use a different Similarity=20
implementation when indexing than when searching.  Ideally perhaps we'd=20
have a LuceneConfiguration object, which encapsulates the Similarity,=20
Analysis and Directory implementations, as well as perhaps other=20
parameters.  And perhaps this could even be stored with the index, =
using=20
Java object serialization.  However I worry that this could cause more=20
confusion than it solves.  For example, one might not easily be able to=20
search and index if a class used when it was indexed is no longer=20
available when searching.  Tools like Luke could become more difficult=20
to write and use.

By design, one does not have to declare things up-front with Lucene.=20
For example, one never has to declare the set of fields and their =
types.=20
  Different documents in the same index can use different fields, or=20
even use the same field name differently.  Saving analyzers and=20
similarity implementations with the index reduces this sort of=20
flexibility somewhat.  If you rename your analysis or similarity class,=20
does your index become invalid?  Lucene currently avoids such issues, =
at=20
the expense of potential confusion about using different analyzers and=20
similarity at index and search time.  But I don't think the latter is =
in=20
practice a problem that needs more than a little documentation.

Sorry for the long-winded answer!

Doug



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8632-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 02:56:10 2004
Return-Path: <lucene-user-return-8632-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57653 invoked from network); 9 Jun 2004 02:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 02:56:10 -0000
Received: (qmail 78457 invoked by uid 500); 9 Jun 2004 02:56:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78419 invoked by uid 500); 9 Jun 2004 02:56:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78400 invoked by uid 99); 9 Jun 2004 02:56:25 -0000
Received: from [129.79.225.189] (HELO cricket.bio.indiana.edu) (129.79.225.189)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 19:56:25 -0700
Received: (from gilbertd@localhost)
	by cricket.bio.indiana.edu (8.11.7+Sun/8.11.6) id i592tmq23566
	for lucene-user@jakarta.apache.org; Tue, 8 Jun 2004 21:55:48 -0500 (EST)
Date: Tue, 8 Jun 2004 21:55:48 -0500 (EST)
From: Don Gilbert <gilbertd@bio.indiana.edu>
Message-Id: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
To: lucene-user@jakarta.apache.org
Subject: Another way to handle large numeric range queries
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I ran into this problem using current Lucene implementation
of rangeQuery applied to genome data (search a chromosome
range from 1..20MB).  We wanted to use lucene queries like

  +organism:fruitfly +chromosome:X +location:[1000000 5000000]
  
to find all the genome features (1000s to 100,000s) that are
listed in some megabase range of a genome.  This failed
quickly with small ranges using the basic Lucene RangeQuery.
My solution was to scores each document that falls in the
query range into a BitSet:

class NumRangeQuery extends Query
  public NumRangeQuery(Term first, Term last, boolean inc);

-- full numeric (integer) range query, can handle large ranges.
-- makes a BitSet of documents within range once, and feeds back to
Searcher thru score(HitCollector c, int end) as often as called.
-- query semantics are same as for RangeQuery
-- implicit assumptions are
 -- first, last Term have integer values, as does indexed field
 -- indexed field is recoded for alphanumeric sorting;
   e.g.  2 -> 0000000002, 10 -> 0000000010, -3 ->  -0000000003

Find this as part of the 'LuceGene' package for searching
genome and bioinformatics databases at http://www.gmod.org/lucegene/
with lucene related source code in cvs here:

http://cvs.sourceforge.net/viewcvs.py/gmod/lucegene/src/org/eugenes/index/
NumRangeQuery.java -- range searches of integer fields.
LGQueryParser.java -- extension of QueryParser for NumRangeQuery (& other)
BioDataAnalyzer.java -- NumberField formats field for indexing 

-- Don Gilbert
> Date: Tue, 18 May 2004 13:35:55 -0700
> From: Andy Goodell <goodell@gmail.com>
> Subject: How to handle range queries over large ranges and avoid Too Many Boolean cla
> 
> In our application we had a similar problem with non-date ranges until
> we realized that it wasnt so much that we were searching for the
> values in the range as restricting the search to that range, and then
> we used an extension to the org.apache.lucene.search.Filter class, and
> our implementation got much simpler and faster.

-- d.gilbert--bioinformatics--indiana-u--bloomington-in-47405
-- gilbertd@indiana.edu--http://marmot.bio.indiana.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8633-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 06:43:45 2004
Return-Path: <lucene-user-return-8633-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48652 invoked from network); 9 Jun 2004 06:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 06:43:45 -0000
Received: (qmail 55436 invoked by uid 500); 9 Jun 2004 06:44:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55330 invoked by uid 500); 9 Jun 2004 06:44:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55302 invoked by uid 99); 9 Jun 2004 06:44:00 -0000
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 08 Jun 2004 23:44:00 -0700
Received: from tucholsky.office.tanto.de (morus.office.tanto.de [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id AAA8423BD4
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 08:43:31 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i596h9GL004692
	for <lucene-user@jakarta.apache.org>; Wed, 9 Jun 2004 08:43:09 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i596h8hb004688;
	Wed, 9 Jun 2004 08:43:08 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16582.45436.893270.898907@tanto-xipolis.de>
Date: Wed, 9 Jun 2004 08:43:08 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Another way to handle large numeric range queries
In-Reply-To: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
References: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don Gilbert writes:
> 
> I ran into this problem using current Lucene implementation
> of rangeQuery applied to genome data (search a chromosome
> range from 1..20MB).  We wanted to use lucene queries like
> 
>   +organism:fruitfly +chromosome:X +location:[1000000 5000000]
>   
> to find all the genome features (1000s to 100,000s) that are
> listed in some megabase range of a genome.  This failed
> quickly with small ranges using the basic Lucene RangeQuery.

Look at 
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=8038
and the answers in that thread.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8634-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 08:42:34 2004
Return-Path: <lucene-user-return-8634-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22628 invoked from network); 9 Jun 2004 08:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 08:42:34 -0000
Received: (qmail 33472 invoked by uid 500); 9 Jun 2004 08:42:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33280 invoked by uid 500); 9 Jun 2004 08:42:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33164 invoked by uid 99); 9 Jun 2004 08:42:47 -0000
Received: from [129.195.254.32] (HELO sim.hcuge.ch) (129.195.254.32)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 01:42:47 -0700
Received: from [129.195.142.38] ([129.195.142.38])
	by sim.hcuge.ch (Switch-2.2.8/Switch-2.2.8) with ESMTP id i598OWv03894
	for <lucene-user@jakarta.apache.org>; Wed, 9 Jun 2004 10:24:32 +0200 (MEST)
Message-ID: <40C6C9C9.9010005@healthonnet.org>
Date: Wed, 09 Jun 2004 10:26:49 +0200
From: gaudinat <arnaud.gaudinat@healthonnet.org>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Proximity Searches  behavior
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What does exactly happen with three words or more when we do a proximity 
search?
such as:  "lucene jakarta best"~10
Is each word can be at a distance of  10 of each others, or is there an 
other behaviour?

By the way, I would like to know  if someone use this lucene feature 
regularly?
For my part I would like to use this feature to improve the precision of 
the finding documents by using the word position.

Thanks in advance for your help,

Arnaud.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8635-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 09:09:37 2004
Return-Path: <lucene-user-return-8635-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37114 invoked from network); 9 Jun 2004 09:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 09:09:37 -0000
Received: (qmail 65296 invoked by uid 500); 9 Jun 2004 09:09:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64973 invoked by uid 500); 9 Jun 2004 09:09:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64959 invoked by uid 99); 9 Jun 2004 09:09:55 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 02:09:55 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id B1082766581
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 05:09:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C6C9C9.9010005@healthonnet.org>
References: <40C6C9C9.9010005@healthonnet.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A6BACA22-B9F4-11D8-BA77-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 05:09:02 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 4:26 AM, gaudinat wrote:
> What does exactly happen with three words or more when we do a 
> proximity search?
> such as:  "lucene jakarta best"~10
> Is each word can be at a distance of  10 of each others, or is there 
> an other behaviour?

The total number of "hops" to put the words in order is calculated and 
if it is less than or equal to 10 there is a match.

For example, a field was indexed with "the quick brown fox jumps...".

"quick brown" matches
"quick fox"~1 matches (# of hops = 1)
"quick jumps"~1 does not match (# hops = 2)
"the brown jumps"~1 does not match (# hops = 2)
"fox brown"~1 does NOT match (# hops is actually 2)

> By the way, I would like to know  if someone use this lucene feature 
> regularly?

I suspect many people do.  You can also set a default slop factor on 
QueryParser so users don't have to use the ~10 syntax.

> For my part I would like to use this feature to improve the precision 
> of the finding documents by using the word position.

Also have a look at the new (in Lucene 1.4) SpanQuery family.  It has a 
less confusing "slop factor" and you can control whether the terms must 
be in order or not (with SpanNearQuery).  QueryParser does not support 
it currently, but subclassing and overriding getFieldQuery makes it 
possible.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8636-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 09:26:52 2004
Return-Path: <lucene-user-return-8636-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49060 invoked from network); 9 Jun 2004 09:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 09:26:52 -0000
Received: (qmail 97538 invoked by uid 500); 9 Jun 2004 09:27:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97444 invoked by uid 500); 9 Jun 2004 09:27:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97430 invoked by uid 99); 9 Jun 2004 09:27:09 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 02:27:09 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 3997C7666E8
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 05:26:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
References: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1031719C-B9F7-11D8-BA77-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Another way to handle large numeric range queries
Date: Wed, 9 Jun 2004 05:26:18 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 8, 2004, at 10:55 PM, Don Gilbert wrote:
> Find this as part of the 'LuceGene' package for searching
> genome and bioinformatics databases at http://www.gmod.org/lucegene/
> with lucene related source code in cvs here:

Nice stuff!

> http://cvs.sourceforge.net/viewcvs.py/gmod/lucegene/src/org/eugenes/ 
> index/
> LGQueryParser.java -- extension of QueryParser for NumRangeQuery (&  
> other)

I'm particularly interested in the XPath stuff I saw in LGQueryParser.   
Could you tell us more about what you do with that and how it works?

> BioDataAnalyzer.java -- NumberField formats field for indexing

*whew* - that is one complex piece of code.  I like the DebugFilter  
idea.

	Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8637-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 11:34:23 2004
Return-Path: <lucene-user-return-8637-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16740 invoked from network); 9 Jun 2004 11:34:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 11:34:23 -0000
Received: (qmail 95283 invoked by uid 500); 9 Jun 2004 11:34:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95049 invoked by uid 500); 9 Jun 2004 11:34:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95031 invoked by uid 99); 9 Jun 2004 11:34:17 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 04:34:17 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 956637669F2
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 07:34:04 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C6C9C9.9010005@healthonnet.org>
References: <40C6C9C9.9010005@healthonnet.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 07:34:03 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 4:26 AM, gaudinat wrote:
> What does exactly happen with three words or more when we do a 
> proximity search?
> such as:  "lucene jakarta best"~10
> Is each word can be at a distance of  10 of each others, or is there 
> an other behaviour?

The total number of "hops" to put the words in order is calculated and 
if it is less than or equal to 10 there is a match.

For example, a field was indexed with "the quick brown fox jumps...".

"quick brown" matches
"quick fox"~1 matches (# of hops = 1)
"quick jumps"~1 does not match (# hops = 2)
"the brown jumps"~1 does not match (# hops = 2)
"fox brown"~1 does NOT match (# hops is actually 2)

> By the way, I would like to know  if someone use this lucene feature 
> regularly?

I suspect many people do.  You can also set a default slop factor on 
QueryParser so users don't have to use the ~10 syntax.

> For my part I would like to use this feature to improve the precision 
> of the finding documents by using the word position.

Also have a look at the new (in Lucene 1.4) SpanQuery family.  It has a 
less confusing "slop factor" and you can control whether the terms must 
be in order or not (with SpanNearQuery).  QueryParser does not support 
it currently, but subclassing and overriding getFieldQuery makes it 
possible.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8638-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 12:06:04 2004
Return-Path: <lucene-user-return-8638-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34992 invoked from network); 9 Jun 2004 12:06:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 12:06:03 -0000
Received: (qmail 40576 invoked by uid 500); 9 Jun 2004 12:05:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40510 invoked by uid 500); 9 Jun 2004 12:05:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40481 invoked by uid 99); 9 Jun 2004 12:05:34 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 05:05:34 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 24C82766A47
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 08:05:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C6C9C9.9010005@healthonnet.org>
References: <40C6C9C9.9010005@healthonnet.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 07:34:03 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 4:26 AM, gaudinat wrote:
> What does exactly happen with three words or more when we do a 
> proximity search?
> such as:  "lucene jakarta best"~10
> Is each word can be at a distance of  10 of each others, or is there 
> an other behaviour?

The total number of "hops" to put the words in order is calculated and 
if it is less than or equal to 10 there is a match.

For example, a field was indexed with "the quick brown fox jumps...".

"quick brown" matches
"quick fox"~1 matches (# of hops = 1)
"quick jumps"~1 does not match (# hops = 2)
"the brown jumps"~1 does not match (# hops = 2)
"fox brown"~1 does NOT match (# hops is actually 2)

> By the way, I would like to know  if someone use this lucene feature 
> regularly?

I suspect many people do.  You can also set a default slop factor on 
QueryParser so users don't have to use the ~10 syntax.

> For my part I would like to use this feature to improve the precision 
> of the finding documents by using the word position.

Also have a look at the new (in Lucene 1.4) SpanQuery family.  It has a 
less confusing "slop factor" and you can control whether the terms must 
be in order or not (with SpanNearQuery).  QueryParser does not support 
it currently, but subclassing and overriding getFieldQuery makes it 
possible.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8639-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 12:54:05 2004
Return-Path: <lucene-user-return-8639-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65604 invoked from network); 9 Jun 2004 12:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 12:54:04 -0000
Received: (qmail 27778 invoked by uid 500); 9 Jun 2004 12:53:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27714 invoked by uid 500); 9 Jun 2004 12:53:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27699 invoked by uid 99); 9 Jun 2004 12:53:57 -0000
Received: from [207.69.200.25] (HELO barry.mail.mindspring.net) (207.69.200.25)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 05:53:57 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by barry.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BY2aS-0001XW-00
	for lucene-user@jakarta.apache.org; Wed, 09 Jun 2004 08:53:48 -0400
Message-ID: <013e01c44e20$cf777910$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 08:53:49 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This poses a couple of additional questions:

1) If you set the default slop factor in QueryProcessor to something greater
than 1, can you also use wildcards?  (I ask that question because, to my
understanding, you can't combine the explicit proximity query syntax with
wildcards.  That is, something like "quick fox*"~3 is not legal.)

2) Regarding the SpanQuery family, do we have any documentation on (a) what
led to their emergence (what problem they solve), (b) what their syntax is
(other than what can be discerned from the JUnit tests), and (c) examples of
their use?

3) Is there a plan for adding QueryParser support for the SpanQuery family?

Regards,

Terry

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 09, 2004 7:34 AM
Subject: Re: Proximity Searches behavior


> On Jun 9, 2004, at 4:26 AM, gaudinat wrote:
> > What does exactly happen with three words or more when we do a
> > proximity search?
> > such as:  "lucene jakarta best"~10
> > Is each word can be at a distance of  10 of each others, or is there
> > an other behaviour?
>
> The total number of "hops" to put the words in order is calculated and
> if it is less than or equal to 10 there is a match.
>
> For example, a field was indexed with "the quick brown fox jumps...".
>
> "quick brown" matches
> "quick fox"~1 matches (# of hops = 1)
> "quick jumps"~1 does not match (# hops = 2)
> "the brown jumps"~1 does not match (# hops = 2)
> "fox brown"~1 does NOT match (# hops is actually 2)
>
> > By the way, I would like to know  if someone use this lucene feature
> > regularly?
>
> I suspect many people do.  You can also set a default slop factor on
> QueryParser so users don't have to use the ~10 syntax.
>
> > For my part I would like to use this feature to improve the precision
> > of the finding documents by using the word position.
>
> Also have a look at the new (in Lucene 1.4) SpanQuery family.  It has a
> less confusing "slop factor" and you can control whether the terms must
> be in order or not (with SpanNearQuery).  QueryParser does not support
> it currently, but subclassing and overriding getFieldQuery makes it
> possible.
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8640-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 13:23:47 2004
Return-Path: <lucene-user-return-8640-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91701 invoked from network); 9 Jun 2004 13:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 13:23:47 -0000
Received: (qmail 6502 invoked by uid 500); 9 Jun 2004 13:23:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6447 invoked by uid 500); 9 Jun 2004 13:23:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6398 invoked by uid 99); 9 Jun 2004 13:23:31 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 06:23:30 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 6E1FC766E9D
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 09:23:12 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <013e01c44e20$cf777910$6501a8c0@POWERPACK>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <27631243-BA18-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 09:23:11 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 8:53 AM, Terry Steichen wrote:
> 1) If you set the default slop factor in QueryProcessor to something 
> greater
> than 1, can you also use wildcards?  (I ask that question because, to 
> my
> understanding, you can't combine the explicit proximity query syntax 
> with
> wildcards.  That is, something like "quick fox*"~3 is not legal.)

Wildcard queries and phrase queries are completely different entities 
with QueryParser.  The default slop factor has no relation to wildcard 
queries whatsoever.

"quick fox*"~3 is legal, technically.  But it analyzes "quick fox" 
(probably into "quick" and "fox", dropping the asterisk) and then uses 
a slop of 3.  Specifying the slop explicitly overrides the default 
value.

If you want something that does "quick fox*" where "quick" must be 
followed by something starting with "fox", you'll have to do this 
through the API, perhaps using the awkwardly named PhrasePrefixQuery, 
which does support slop also.  It would be up to you to do the term 
expansions for all terms beginning with "fox" in order to use this.

> 2) Regarding the SpanQuery family, do we have any documentation on (a) 
> what
> led to their emergence (what problem they solve), (b) what their 
> syntax is
> (other than what can be discerned from the JUnit tests), and (c) 
> examples of
> their use?

The unit tests are always my first stop :)

Span queries allow you to say things like:

	"foo bar" near "xyz pdq"

	all docs that have "foo bar" within 10 positions in order (which you 
cannot do with phrase query)

	all docs that have "foo bar" within 10 positions but within that span 
it may not have "baz"

	all docs that have "foo" in the first 3 positions of the field

None of these are possible without this new span feature.

> 3) Is there a plan for adding QueryParser support for the SpanQuery 
> family?

I think QueryParser is overloaded enough.  It is pretty simple to have 
phrase queries turned into span queries with a QueryParser subclass, 
forcing terms to be in order:

   /**
    * Replace PhraseQuery with SpanNearQuery to force in-order
    * phrase matching rather than reverse.
    */
   protected Query getFieldQuery(
       String field, Analyzer analyzer, String queryText, int slop)
                                            throws ParseException {
     // let QueryParser's implementation do the analysis
     Query orig = super.getFieldQuery(
         field, analyzer, queryText, slop);

     if (! (orig instanceof PhraseQuery)) {
       return orig;
     }

     PhraseQuery pq = (PhraseQuery) orig;
     Term[] terms = pq.getTerms();
     SpanTermQuery[] clauses = new SpanTermQuery[terms.length];
     for (int i = 0; i < terms.length; i++) {
       clauses[i] = new SpanTermQuery(terms[i]);
     }

     SpanNearQuery query = new SpanNearQuery(
         clauses, slop, true);

     return query;
   }

I built this example for Lucene in Action recently.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8641-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 13:40:06 2004
Return-Path: <lucene-user-return-8641-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 942 invoked from network); 9 Jun 2004 13:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 13:40:06 -0000
Received: (qmail 54614 invoked by uid 500); 9 Jun 2004 13:40:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54525 invoked by uid 500); 9 Jun 2004 13:40:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54499 invoked by uid 99); 9 Jun 2004 13:40:02 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 06:40:02 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 66709766F08
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 09:39:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <013e01c44e20$cf777910$6501a8c0@POWERPACK>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 09:39:45 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 8:53 AM, Terry Steichen wrote:
> 3) Is there a plan for adding QueryParser support for the SpanQuery 
> family?

Another important facet to Terry's question here is what syntax to use 
to express all various types of queries?  I suspect that Google stats 
show us that most folks query with 1 - 3 words and do not use the any 
of the advanced features.

The elegance of the query syntax is quite important, and QueryParser 
has gotten a bit hairy.  I would enjoy discussions on creating new 
query parsers (one size doesn't fit all, I don't think) and what syntax 
should be used.

Paul Elschot created a "surround" query parser that he posted about to 
the list in April.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8642-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 16:22:04 2004
Return-Path: <lucene-user-return-8642-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13535 invoked from network); 9 Jun 2004 16:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 16:22:04 -0000
Received: (qmail 26718 invoked by uid 500); 9 Jun 2004 16:21:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26503 invoked by uid 500); 9 Jun 2004 16:21:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26281 invoked by uid 99); 9 Jun 2004 16:21:40 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 09:21:40 -0700
Received: (qmail 12883 invoked by uid 532); 9 Jun 2004 16:20:39 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.154638 secs); 09 Jun 2004 16:20:39 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 9 Jun 2004 16:20:39 -0000
Message-ID: <40C73905.50108@tropo.com>
Date: Wed, 09 Jun 2004 09:21:25 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Proximity Searches  behavior
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com>
In-Reply-To: <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Jun 9, 2004, at 8:53 AM, Terry Steichen wrote:
>
>> 3) Is there a plan for adding QueryParser support for the SpanQuery 
>> family?
>
>
> Another important facet to Terry's question here is what syntax to use 
> to express all various types of queries?  I suspect that Google stats

And others - Altavista logs I think...

> show us that most folks query with 1 - 3 words and do not use the any 
> of the advanced features.


But with automagic query expansion these things might be done behind the 
scenes.  Nutch, for one, expands simple queries to check against 
multiple fields, with different boosts, and even gives a bonus for terms 
that are near each other.

>
> The elegance of the query syntax is quite important, and QueryParser 
> has gotten a bit hairy.  I would enjoy discussions on creating new 
> query parsers (one size doesn't fit all, I don't think) and what syntax


I suggested in some email a while ago making the QueryParser extensible 
at, runtime or startup time, so you can add other types if queries that 
it doesn't support - so you have a way of registering these other query 
types (SpanQuery, SubstringQuery etc) and then some syntax like 
"span:foo" to invoke the query expander registered w/ "span" on "foo"...

> should be used.
>
> Paul Elschot created a "surround" query parser that he posted about to 
> the list in April.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8643-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 16:26:02 2004
Return-Path: <lucene-user-return-8643-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17065 invoked from network); 9 Jun 2004 16:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 16:26:02 -0000
Received: (qmail 39370 invoked by uid 500); 9 Jun 2004 16:25:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39296 invoked by uid 500); 9 Jun 2004 16:25:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39189 invoked by uid 99); 9 Jun 2004 16:25:50 -0000
Received: from [149.28.9.33] (HELO mail2.ridge.aps.org) (149.28.9.33)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 09:25:50 -0700
Received: from aps.org (ws-duval.aps.org [149.28.3.184])
	by mail2.ridge.aps.org (8.12.9/8.12.9) with ESMTP id i59GPT4p082911;
	Wed, 9 Jun 2004 12:25:29 -0400 (EDT)
	(envelope-from duval@aps.org)
Message-ID: <40C739F9.2010806@aps.org>
Date: Wed, 09 Jun 2004 12:25:29 -0400
From: Michael Duval <duval@aps.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i386; en-US; rv:1.4) Gecko/20030624 Netscape/7.1
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
CC: Michael Duval <duval@aps.org>, Mark Doyle <doyle@aps.org>
Subject: phrase query not working in boolean clause
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -4.901 () BAYES_00
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello,

I'm using lucene 1.4 rc2 and I've come across a problem using exact 
phrase queries as
part of a composite query.

A little background on the problem:

We have two fields in the index:
    title:  Field.Text (tokenized)
    journal: Field.Keyword

When doing an exact phrase query on the title the expected results are 
returned:

    +(title:"Mass Asymmetry")
       after tokenizing/filtering:  +title:"mass asymmetri"
    returns 20 Hits
    example hit: "Mass asymmetry, equation of state, and nuclear 
multifragmentation"

When attempting to confine the results to a particular journal the query 
used is:
    +(journal:L) +(title:"Mass Asymmetry")
       after t/f :  +journal:L +title:"mass asymmetri"

    returns 315 Hits!!
    example hit 1:  Towards dynamical mass calculations
    example hit 2:  Up down-asymmetric gravitational fields of spinning 
masses

It would seem that the search engine is treating
    +title:"mass asymmetri"  as +title:mass asymmetri

However, this behavior is only apparent on composite queries as shown 
previously.

For a sanity check I built the query using both the standard query 
parser and
the lucene search api (TermQuery, PhraseQuery, BooleanQuery).   The results
were the same both ways.

Is this a well known limitation of the lucene search engine?  Is there a 
different
means of obtaining the desired results?

Any help with this problem would be greatly appreciated.

Thanks in advance,

Mike Duval
   

-- 
Michael R. Duval   <duval@aps.org >
E-Journal Programmer/Analyst
The American Physical Society
1 Research Road
Ridge, NY 11961

www.aps.org
631 591 4127



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8644-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 17:06:09 2004
Return-Path: <lucene-user-return-8644-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37954 invoked from network); 9 Jun 2004 17:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 17:06:09 -0000
Received: (qmail 38331 invoked by uid 500); 9 Jun 2004 17:06:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38301 invoked by uid 500); 9 Jun 2004 17:06:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38278 invoked by uid 99); 9 Jun 2004 17:06:12 -0000
Received: from [129.79.225.189] (HELO cricket.bio.indiana.edu) (129.79.225.189)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 10:06:12 -0700
Received: (from gilbertd@localhost)
	by cricket.bio.indiana.edu (8.11.7+Sun/8.11.6) id i59H5v126250
	for lucene-user@jakarta.apache.org; Wed, 9 Jun 2004 12:05:57 -0500 (EST)
Date: Wed, 9 Jun 2004 12:05:57 -0500 (EST)
From: Don Gilbert <gilbertd@bio.indiana.edu>
Message-Id: <200406091705.i59H5v126250@cricket.bio.indiana.edu>
To: lucene-user@jakarta.apache.org
Subject: Re: Another way to handle large numeric range queries
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Erik,

Thanks for the comments.  

> I'm particularly interested in the XPath stuff I saw in LGQueryParser.   

   * xpathFieldParse
   'xpath' parser: param allfields[], with query or field[] possibly
    having wild-card notation:   *.start  annotation.*.text 
    allowing '/' and '.' field separator

This is an *unfinished* attempt to support xpath style queries with
wild-cards or parts when you have indexed XML data, such as 

  query: /annotation/*/text:term
       
I had to put this aside when I saw the problem of pulling the xpath
fields from a query string would take a fair amount of thought and code.

> > BioDataAnalyzer.java -- NumberField formats field for indexing
> 
> *whew* - that is one complex piece of code.  I like the DebugFilter  

Mostly it is just a collection of small 10 line classes, packaged
as inner classes (I hate java's insistence on 1 file/class :)
Some of the complexity there is because the standard lucene analyzer
won't work for biology data (which uses a lot of symbols, upper/lowercase,
etc.) and this code allows one to build an analyzer/indexer 
which is tuned to different types in each field of data.
The configuration for a given biology database parsing includes 
statements like:

## field tokenizers - base CharTokenizer, work before Filters 
tokenizer.SYM=org.eugenes.index.BiodataAnalyzer$DataTokenizer

## field filters - base TokenFilter, only are used if fieldtype=Text or UnStored
tokenfilter.BLOC.start=org.eugenes.index.BiodataAnalyzer$NumberFilter

## fieldrecoder classes manipulate data before indexing, maybe making new fields
fieldrecoder.BLOC=LucegeneIndexers$Location_FieldRecoder

This method then generates TokenStream using such field-specific parsers, 
  public TokenStream tokenStream( String fieldName, Reader reader) {
    TokenStream result = null;
    try { result= getTokenizer(fieldName, reader);  }
    catch (Exception e) {
      result = new org.apache.lucene.analysis.standard.StandardTokenizer(reader);
      }
    try { result= getFilter(fieldName, result); }
    catch (Exception e) {
      LowerDataFilter ldf= new LowerDataFilter(); 
      ldf.setInput(result); result= ldf;
      }
    return result;
  }


-- Don Gilbert
-- d.gilbert--bioinformatics--indiana-u--bloomington-in-47405
-- gilbertd@indiana.edu--http://marmot.bio.indiana.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8645-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 17:28:28 2004
Return-Path: <lucene-user-return-8645-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47933 invoked from network); 9 Jun 2004 17:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 17:28:28 -0000
Received: (qmail 2845 invoked by uid 500); 9 Jun 2004 17:28:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2816 invoked by uid 500); 9 Jun 2004 17:28:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2800 invoked by uid 99); 9 Jun 2004 17:28:33 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 10:28:33 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id DDA2E767AB6
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 13:28:15 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C73905.50108@tropo.com>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C73905.50108@tropo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity Searches  behavior
Date: Wed, 9 Jun 2004 13:28:14 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 12:21 PM, David Spencer wrote:
>> show us that most folks query with 1 - 3 words and do not use the any 
>> of the advanced features.
>
>
> But with automagic query expansion these things might be done behind 
> the scenes.  Nutch, for one, expands simple queries to check against 
> multiple fields, with different boosts, and even gives a bonus for 
> terms that are near each other.

Ah yes!  Don't worry, I hadn't forgotten about Nutch.  I'm tinkering 
with its query parsing and analysis as we speak in fact.  Very clever 
indeed.

>> The elegance of the query syntax is quite important, and QueryParser 
>> has gotten a bit hairy.  I would enjoy discussions on creating new 
>> query parsers (one size doesn't fit all, I don't think) and what 
>> syntax
>
>
> I suggested in some email a while ago making the QueryParser 
> extensible at, runtime or startup time, so you can add other types if 
> queries that it doesn't support - so you have a way of registering 
> these other query types (SpanQuery, SubstringQuery etc) and then some 
> syntax like "span:foo" to invoke the query expander registered w/ 
> "span" on "foo"...

I would be curious to see how an implementation of this played out.  
For example, could I add my own syntax such that

	"some phrase" <-3-> "another phrase"

could be parsed into a SpanNearQuery of two SpanNearQuery's?

I like the idea of a flexible run-time grammar, but it sounds too good 
to be true in a general purpose kinda way.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8646-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 17:42:21 2004
Return-Path: <lucene-user-return-8646-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55205 invoked from network); 9 Jun 2004 17:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 17:42:21 -0000
Received: (qmail 30082 invoked by uid 500); 9 Jun 2004 17:42:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29965 invoked by uid 500); 9 Jun 2004 17:42:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29902 invoked by uid 99); 9 Jun 2004 17:42:13 -0000
Received: from [128.143.103.197] (HELO postfix.mail.ehatchersolutions.com) (128.143.103.197)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 10:42:13 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 088D5767B84
	for <lucene-user@jakarta.apache.org>; Wed,  9 Jun 2004 13:41:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C739F9.2010806@aps.org>
References: <40C739F9.2010806@aps.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4CB46AAD-BA3C-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: phrase query not working in boolean clause
Date: Wed, 9 Jun 2004 13:41:55 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 12:25 PM, Michael Duval wrote:
> When doing an exact phrase query on the title the expected results are 
> returned:
>
>    +(title:"Mass Asymmetry")
>       after tokenizing/filtering:  +title:"mass asymmetri"
>    returns 20 Hits
>    example hit: "Mass asymmetry, equation of state, and nuclear 
> multifragmentation"
>
> When attempting to confine the results to a particular journal the 
> query used is:
>    +(journal:L) +(title:"Mass Asymmetry")
>       after t/f :  +journal:L +title:"mass asymmetri"
>
>    returns 315 Hits!!
>    example hit 1:  Towards dynamical mass calculations
>    example hit 2:  Up down-asymmetric gravitational fields of spinning 
> masses
>
> It would seem that the search engine is treating
>    +title:"mass asymmetri"  as +title:mass asymmetri
>
> However, this behavior is only apparent on composite queries as shown 
> previously.
>
> For a sanity check I built the query using both the standard query 
> parser and
> the lucene search api (TermQuery, PhraseQuery, BooleanQuery).   The 
> results
> were the same both ways.
>
> Is this a well known limitation of the lucene search engine?  Is there 
> a different
> means of obtaining the desired results?

Could you work up a JUnit test case example indexing a couple of 
documents like this into a RAMDirectory and a testXXX method that shows 
the failure?

I cannot really make sense of what you have going on with the textual 
queries and obviously some stemming going on to.  Show us the code. :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8647-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 17:58:15 2004
Return-Path: <lucene-user-return-8647-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70501 invoked from network); 9 Jun 2004 17:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 17:58:15 -0000
Received: (qmail 63018 invoked by uid 500); 9 Jun 2004 17:58:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62858 invoked by uid 500); 9 Jun 2004 17:58:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62660 invoked by uid 99); 9 Jun 2004 17:58:14 -0000
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 10:58:14 -0700
Received: from [128.218.15.87] (beani.library.ucsf.edu [128.218.15.87])
	by gossamer.ckm.ucsf.edu (8.11.6-20030924/8.11.6) with ESMTP id i59Hvu700402
	for <lucene-user@jakarta.apache.org>; Wed, 9 Jun 2004 10:57:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
References: <200406090255.i592tmq23566@cricket.bio.indiana.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-2--1024994796
Message-Id: <8656CCA3-BA3E-11D8-B006-003065E21F90@library.ucsf.edu>
From: Claude Devarenne <claude@library.ucsf.edu>
Subject: Re: Another way to handle large numeric range queries
Date: Wed, 9 Jun 2004 10:57:51 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Filter-Version: 1.14 (gossamer)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-2--1024994796
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi,

Very nice, thank you!  I finally got around writing a filter to handle  
date ranges in YYYYMMDD format and it seems to work fine. I basically  
adapted the DateFilter code for my purposes.  I was wondering if  
someone could quickly review the code and tell me if I am missing  
something.  Thank you in advance for your time.

Claude

RangeFilter.java
------------------------
package org.apache.lucene.search;

/**
  * Copyright 2004 The Apache Software Foundation
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *     http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or  
implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */

import java.util.BitSet;
import java.io.IOException;

//import org.apache.lucene.document.DateField;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.index.TermEnum;
import org.apache.lucene.index.IndexReader;

/**
  * A Filter that restricts search results to a range of time.
  *
  */
public class RangeFilter extends Filter {
   String field;
   // dates are expected to be in the format YYYYMMDD
   String start = "00000000";
   String end = "99999999";

   private RangeFilter(String f) {
     field = f;
   }

   /**
    * Constructs a filter for field <code>f</code> matching dates
    * between <code>from</code> and <code>to</code> inclusively.
    */
   public RangeFilter(String f, String from, String to) {
     field = f;
     start = from;
     end = to;
   }

   /**
    * Constructs a filter for field <code>f</code> matching
    * dates on or before before <code>date</code>.
    */
   public static RangeFilter Before(String field, String date) {
     RangeFilter result = new RangeFilter(field);
     result.end = date;
     return result;
   }

   /**
    * Constructs a filter for field <code>f</code> matching
    * dates on or after <code>date</code>.
    */
   public static RangeFilter After(String field, String date) {
     RangeFilter result = new RangeFilter(field);
     result.start = date;
     return result;
   }


   /**
    * Returns a BitSet with true for documents which should be
    * permitted in search results, and false for those that should
    * not.
    */
   public BitSet bits(IndexReader reader) throws IOException {
     BitSet bits = new BitSet(reader.maxDoc());
     TermEnum enumerator = reader.terms(new Term(field, start));
     TermDocs termDocs = reader.termDocs();
     if (enumerator.term() == null) {
       return bits;
     }

     try {
       Term stop = new Term(field, end);
       while (enumerator.term().compareTo(stop) <= 0) {
         termDocs.seek(enumerator.term());
         while (termDocs.next()) {
           bits.set(termDocs.doc());
         }
         if (!enumerator.next()) {
           break;
         }
       }
     } finally {
       enumerator.close();
       termDocs.close();
     }
     return bits;
   }

   public String toString() {
     StringBuffer buffer = new StringBuffer();
     buffer.append(field);
     buffer.append(":");
     buffer.append(start);
     buffer.append("-");
     buffer.append(end);
     return buffer.toString();
   }
}

------------------------

poor man's unit test: TestRangefilter.java
------------------------

import org.apache.lucene.index.Term;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.search.*;
import org.apache.lucene.search.RangeFilter;
import org.apache.lucene.index.IndexReader;
import java.io.IOException;


  /**
   * RangeFilter unit tests.
   *
   * @author
   * @version $Revision: 1.5 $
   */
public class TestRangeFilter
{

	String dirRealPath = "/web/gfdocs/index";
	Searcher searcher = null;
	IndexReader idxReader = null;
	Analyzer analyzer = new StandardAnalyzer();
	
	public void initSearch()  throws IOException {
			this.idxReader = IndexReader.open(this.dirRealPath);
			this.searcher = new IndexSearcher(this.idxReader);
			System.out.println("Searcher created successfully!");
	}
	
     public void testBefore() throws IOException {
		// filter that should preserve matches
		RangeFilter df1 = RangeFilter.Before("normdd", "19900000");

		// filter that should discard matches
		RangeFilter df2 = RangeFilter.Before("normdd", "00000000");

		// search something that doesn't exist with DateFilter
		Query query1 = new TermQuery(new Term("ti", "NoMatchForThis"));

		// search for something that does exists
		Query query2 = new TermQuery(new Term("ti", "excretion"));

		Hits result;
		
		System.out.println("testBefore");

		// ensure that queries return expected results without RangeFilter  
first
		result = searcher.search(query1);
		System.out.println("zero is " +result.length());

		result = searcher.search(query2);
		System.out.println("not zero is " + result.length());


		// run queries with TestRangeFilter
		result = searcher.search(query1, df1);
		System.out.println("zero is " + result.length());

		result = searcher.search(query1, df2);
		System.out.println("zero is " + result.length());

		result = searcher.search(query2, df1);
		System.out.println("not zero is " + result.length());

		result = searcher.search(query2, df2);
		System.out.println("zero is " + result.length());
     }

     public void testAfter() throws IOException {

		// filter that should preserve matches
		RangeFilter df1 = RangeFilter.After("normdd", "19740000");

		// filter that should discard matches
		RangeFilter df2 = RangeFilter.After("normdd", "99999999");

		// search something that doesn't exist with TestRangeFilter
		Query query1 = new TermQuery(new Term("ti", "NoMatchForThis"));

		// search for something that does exists
		Query query2 = new TermQuery(new Term("ti", "excretion"));

		Hits result;
		
		System.out.println("\ntestAfter\n");

		// ensure that queries return expected results without RangeFilter  
first
		result = searcher.search(query1);
		System.out.println("zero is " + result.length());

		result = searcher.search(query2);
		System.out.println("not zero is " + result.length());

		// run queries with TestRangeFilter
		result = searcher.search(query1, df1);
		System.out.println("zero is " + result.length());

		result = searcher.search(query1, df2);
		System.out.println("zero is " + result.length());

		result = searcher.search(query2, df1);
		System.out.println("not zero is " + result.length());

		result = searcher.search(query2, df2);
		System.out.println("zero is " + result.length());
     }
	
     public void testBetween() throws IOException {
		
		// filter that should preserve matches
		RangeFilter df1 = new RangeFilter("normdd", "19740000", "19841231");
		
		// filter that should discard matches
		RangeFilter df2 = new RangeFilter("normdd", "19000000", "19200000");
		
		// search something that doesn't exist with TestRangeFilter
		Query query1 = new TermQuery(new Term("ti", "NoMatchForThis"));
		
		// search for something that does exists
		Query query2 = new TermQuery(new Term("ti", "excretion"));
		
		Hits result;
		
		System.out.println("\ntestBetween\n");
		
		// ensure that queries return expected results without RangeFilter  
first
		result = searcher.search(query1);
		System.out.println("zero is " + result.length());
		
		result = searcher.search(query2);
		System.out.println("not zero is " + result.length());
		
		// run queries with TestRangeFilter
		result = searcher.search(query1, df1);
		System.out.println("zero is " + result.length());
		
		result = searcher.search(query1, df2);
		System.out.println("zero is " + result.length());
		
		result = searcher.search(query2, df1);
		System.out.println("not zero is " + result.length());
		
		result = searcher.search(query2, df2);
		System.out.println("zero is " + result.length());
     }
	
	public static void main(String [] args) {
		
		TestRangeFilter app = new TestRangeFilter();
		try {
			app.initSearch();
			app.testBefore();
			app.testAfter();
			app.testBetween();
		} catch (IOException ioe) {
			System.out.println("Caught error: " + ioe.toString());
			if (app.searcher != null) {
				try {
					app.searcher.close();
					app.searcher = null;
				} catch (IOException ie) {
					System.out.println("Caught error: " + ie.toString());
				}
			}
		}
	}
}
------------------------


On Jun 8, 2004, at 7:55 PM, Don Gilbert wrote:

>
> I ran into this problem using current Lucene implementation
> of rangeQuery applied to genome data (search a chromosome
> range from 1..20MB).  We wanted to use lucene queries like
>
>   +organism:fruitfly +chromosome:X +location:[1000000 5000000]
>
> to find all the genome features (1000s to 100,000s) that are
> listed in some megabase range of a genome.  This failed
> quickly with small ranges using the basic Lucene RangeQuery.
> My solution was to scores each document that falls in the
> query range into a BitSet:
>
> class NumRangeQuery extends Query
>   public NumRangeQuery(Term first, Term last, boolean inc);
>
> -- full numeric (integer) range query, can handle large ranges.
> -- makes a BitSet of documents within range once, and feeds back to
> Searcher thru score(HitCollector c, int end) as often as called.
> -- query semantics are same as for RangeQuery
> -- implicit assumptions are
>  -- first, last Term have integer values, as does indexed field
>  -- indexed field is recoded for alphanumeric sorting;
>    e.g.  2 -> 0000000002, 10 -> 0000000010, -3 ->  -0000000003
>
> Find this as part of the 'LuceGene' package for searching
> genome and bioinformatics databases at http://www.gmod.org/lucegene/
> with lucene related source code in cvs here:
>
> http://cvs.sourceforge.net/viewcvs.py/gmod/lucegene/src/org/eugenes/ 
> index/
> NumRangeQuery.java -- range searches of integer fields.
> LGQueryParser.java -- extension of QueryParser for NumRangeQuery (&  
> other)
> BioDataAnalyzer.java -- NumberField formats field for indexing
>
> -- Don Gilbert
>> Date: Tue, 18 May 2004 13:35:55 -0700
>> From: Andy Goodell <goodell@gmail.com>
>> Subject: How to handle range queries over large ranges and avoid Too  
>> Many Boolean cla
>>
>> In our application we had a similar problem with non-date ranges until
>> we realized that it wasnt so much that we were searching for the
>> values in the range as restricting the search to that range, and then
>> we used an extension to the org.apache.lucene.search.Filter class, and
>> our implementation got much simpler and faster.
>
> -- d.gilbert--bioinformatics--indiana-u--bloomington-in-47405
> -- gilbertd@indiana.edu--http://marmot.bio.indiana.edu/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

--Apple-Mail-2--1024994796--


From lucene-user-return-8648-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 18:29:46 2004
Return-Path: <lucene-user-return-8648-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85841 invoked from network); 9 Jun 2004 18:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 18:29:45 -0000
Received: (qmail 37666 invoked by uid 500); 9 Jun 2004 18:29:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37531 invoked by uid 500); 9 Jun 2004 18:29:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37518 invoked by uid 99); 9 Jun 2004 18:29:51 -0000
Received: from [128.231.90.112] (HELO NIHHUBIMS2.hub.nih.gov) (128.231.90.112)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 11:29:51 -0700
Received: by nihhubims2.hub.nih.gov with Internet Mail Service (5.5.2657.72)
	id <LYMR1XYC>; Wed, 9 Jun 2004 14:29:32 -0400
Message-ID: <C761DBF11F04AE4CB11521B0DF7F6536D7C8B8@nihexchange28.nih.gov>
From: "Nguyen, Tri (NIH/NLM/LHC)" <nguyent@ceb.nlm.nih.gov>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: remove from mailing list
Date: Wed, 9 Jun 2004 14:29:21 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

sorry, but i forgot how to get removed from the mailing list?

help.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8649-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 18:49:40 2004
Return-Path: <lucene-user-return-8649-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95866 invoked from network); 9 Jun 2004 18:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 18:49:40 -0000
Received: (qmail 91464 invoked by uid 500); 9 Jun 2004 18:49:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91384 invoked by uid 500); 9 Jun 2004 18:49:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91368 invoked by uid 99); 9 Jun 2004 18:49:45 -0000
Received: from [194.109.24.5] (HELO smtp-out4.xs4all.nl) (194.109.24.5)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 11:49:45 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-out4.xs4all.nl (8.12.10/8.12.10) with ESMTP id i59InO34064277
	for <lucene-user@jakarta.apache.org>; Wed, 9 Jun 2004 20:49:25 +0200 (CEST)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Syntax for query parsers
Date: Wed, 9 Jun 2004 20:49:24 +0200
User-Agent: KMail/1.5.4
References: <40C6C9C9.9010005@healthonnet.org> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com>
In-Reply-To: <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200406092049.24495.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 09 June 2004 15:39, Erik Hatcher wrote:
> On Jun 9, 2004, at 8:53 AM, Terry Steichen wrote:
> > 3) Is there a plan for adding QueryParser support for the SpanQuery
> > family?
>
> Another important facet to Terry's question here is what syntax to use
> to express all various types of queries?  I suspect that Google stats
> show us that most folks query with 1 - 3 words and do not use the any
> of the advanced features.
>
> The elegance of the query syntax is quite important, and QueryParser
> has gotten a bit hairy.  I would enjoy discussions on creating new
> query parsers (one size doesn't fit all, I don't think) and what syntax
> should be used.
>
> Paul Elschot created a "surround" query parser that he posted about to
> the list in April.
>
> 	Erik

Here is a bit about the syntax for Surround (mostly taken from the
posted tgz file). Basically one has to use an operator for everything,
including AND and OR. I don't expect this to be used for normal
web searches, the target audience is one that wants
to use span queries, boolean operators, and truncations.

Surround consists of operators (uppercase/lowercase):

AND/OR/NOT/nW/nN/() as infix and
AND/OR/nW/nN        as prefix.

Distance operators W and N have default n=1, max 99.
Implemented as SpanQuery with slop = (n - 1).
An example prefix form is:

20n(aa*, bb*, cc*)

The name Surround was chosen because of this prefix form
and because it uses the newly introduced span queries
to implement the proximity operators.
The names of the operators and the prefix and suffix
forms have been borrowed from various other query
languages described on the internet.
AND/OR/NOT are mapped to Lucene's BooleanQuery.


Query terms from the Lucene standard query parser:

field:termtext
^ boost
* internal and suffix truncation
? one character


Some examples:

aa
aa and bb
aa and bb or cc        same effect as:  (aa and bb) or cc
aa NOT bb NOT cc       same effect as:  (aa NOT bb) NOT cc

and(aa,bb,cc)          aa and bb and cc
99w(aa,bb,cc)          ordered span query with slop 98
99n(aa,bb,cc)          unordered span query with slop 98

20n(aa*,bb*)
3w(a?a or bb?, cc*)

title: text: aa
title : text : aa or bb
title:text: aa not bb
title:aa not text:bb        this parses as:   title:(aa not text:bb)

cc 3w dd               infix: dual.

cc N dd N ee           same effect as:   (cc N dd) N ee

text: aa 3d bb       the field applies to the rest of the query.

The OR operator can be used in subqueries for N and W.
Finally, double quotes can be used to search for any
single term. This is different from Lucene, where
double quotes are used for phrases.


Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8650-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 18:53:23 2004
Return-Path: <lucene-user-return-8650-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97645 invoked from network); 9 Jun 2004 18:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 18:53:23 -0000
Received: (qmail 98801 invoked by uid 500); 9 Jun 2004 18:53:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98715 invoked by uid 500); 9 Jun 2004 18:53:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98630 invoked by uid 99); 9 Jun 2004 18:53:17 -0000
Received: from [65.248.4.171] (HELO main.mvdb.net) (65.248.4.171)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 09 Jun 2004 11:53:17 -0700
Received: (qmail 25408 invoked from network); 9 Jun 2004 18:52:57 -0000
Received: from unknown (HELO [10.21.21.9]) (80.126.215.98)
 by 65.248.4.171 with SMTP; Wed, 09 Jun 2004 18:52:57 +0000
Subject: Re: remove from mailing list
From: Martin van den Bemt <mllist@mvdb.net>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <C761DBF11F04AE4CB11521B0DF7F6536D7C8B8@nihexchange28.nih.gov>
References: <C761DBF11F04AE4CB11521B0DF7F6536D7C8B8@nihexchange28.nih.gov>
Content-Type: text/plain
Message-Id: <1086807165.6328.527.camel@jedi.mvdb.net>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 (1.4.5-7) 
Date: Wed, 09 Jun 2004 20:52:46 +0200
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You created your own answer by sending a mail to this list.. 
Look at the mail footer..

Mvgr,
Martin

On Wed, 2004-06-09 at 20:29, Nguyen, Tri (NIH/NLM/LHC) wrote:
> sorry, but i forgot how to get removed from the mailing list?
> 
> help.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8651-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 20:40:17 2004
Return-Path: <lucene-user-return-8651-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73870 invoked from network); 9 Jun 2004 20:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 20:40:17 -0000
Received: (qmail 78716 invoked by uid 500); 9 Jun 2004 20:40:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78617 invoked by uid 500); 9 Jun 2004 20:40:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78485 invoked by uid 99); 9 Jun 2004 20:40:12 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 13:40:12 -0700
Received: (qmail 23571 invoked by uid 532); 9 Jun 2004 20:38:58 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.61.  Clear:. 
 Processed in 0.272472 secs); 09 Jun 2004 20:38:58 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 9 Jun 2004 20:38:58 -0000
Message-ID: <40C77593.5020502@tropo.com>
Date: Wed, 09 Jun 2004 13:39:47 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: extensible query parser - Re: Proximity Searches  behavior
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C73905.50108@tropo.com> <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com>
In-Reply-To: <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Jun 9, 2004, at 12:21 PM, David Spencer wrote:
>
>>> show us that most folks query with 1 - 3 words and do not use the 
>>> any of the advanced features.
>>
>>
>>
>> But with automagic query expansion these things might be done behind 
>> the scenes.  Nutch, for one, expands simple queries to check against 
>> multiple fields, with different boosts, and even gives a bonus for 
>> terms that are near each other.
>
>
> Ah yes!  Don't worry, I hadn't forgotten about Nutch.  I'm tinkering 
> with its query parsing and analysis as we speak in fact.  Very clever 
> indeed.
>
>>> The elegance of the query syntax is quite important, and QueryParser 
>>> has gotten a bit hairy.  I would enjoy discussions on creating new 
>>> query parsers (one size doesn't fit all, I don't think) and what syntax
>>
>>
>>
>> I suggested in some email a while ago making the QueryParser 
>> extensible at, runtime or startup time, so you can add other types if 
>> queries that it doesn't support - so you have a way of registering 
>> these other query types (SpanQuery, SubstringQuery etc) and then some 
>> syntax like "span:foo" to invoke the query expander registered w/ 
>> "span" on "foo"...
>
>
> I would be curious to see how an implementation of this played out.  
> For example, could I add my own syntax such that
>
>     "some phrase" <-3-> "another phrase"
>
> could be parsed into a SpanNearQuery of two SpanNearQuery's?
>
> I like the idea of a flexible run-time grammar, but it sounds too good 
> to be true in a general purpose kinda way.

My idea isn't perfect for humans, but at least lets you use queries not 
hard coded.

You have something like

[1] how you register, could be in existing QueryParser

void register( String name,  SubqueryParser qp)

[2] what you register

interface SubQueryParser
{
Query parse( String s); // parses string user enters, forms a Query...
}

[3] example of registration

register( "substring", new SubstringQP());  // instead of prefix matches 
allows term anywhere
register( "span", new SurroundQP());
register( "syn", new SynonymExpanderQP()); // expands a word to include 
synonyms

[4]  syntax

normal query parser syntax but add something else like "NAME::TEXT" 
(note 2 colons) so

this:          "black syn::bird"

expands to calls in the new extensible query parser,  something like

BooleanQuery bq = ...
bq.add( new TermQuery( "contents", "black"))
bq.add( SubstringParser.parse( "bird")) // really SynonymExpanderQP
return bq

behind the scenes SynonymExpanderQP expanded "bird" to the query 
equivalent of, um, "bird avian^.5 wingedanimal^.5" or whatnot.

[5] the point

Be backward  compatible and "natural" for existing query syntax, but 
leave a hook so that if you innovate and define new query expansion code 
there's some hope of someone using it as they can in theory drop it in 
and use it w/o coding. Right now if you create some code in this area I 
suspect there's little chance people will try it out as there's too much 
friction to try it out.















>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8652-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 21:37:51 2004
Return-Path: <lucene-user-return-8652-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3677 invoked from network); 9 Jun 2004 21:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 21:37:51 -0000
Received: (qmail 46030 invoked by uid 500); 9 Jun 2004 21:38:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45976 invoked by uid 500); 9 Jun 2004 21:38:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45956 invoked by uid 99); 9 Jun 2004 21:38:02 -0000
Received: from [216.82.255.51] (HELO mail64.messagelabs.com) (216.82.255.51)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 09 Jun 2004 14:38:02 -0700
X-VirusChecked: Checked
X-Env-Sender: BPryor@widen.com
X-Msg-Ref: server-7.tower-64.messagelabs.com!1086817054!6254748
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [69.8.156.101]
Received: (qmail 6926 invoked from network); 9 Jun 2004 21:37:34 -0000
Received: from mailhost.widen.com (HELO exchange2k.widen.com) (69.8.156.101)
  by server-7.tower-64.messagelabs.com with SMTP; 9 Jun 2004 21:37:34 -0000
Received: by exchange.corp.widen.com with Internet Mail Service (5.5.2657.72)
	id <MDR0MJ32>; Wed, 9 Jun 2004 16:37:34 -0500
Message-ID: <CFAF6F2213792F4FBA1E08561BB701D404735846@exchange.corp.widen.com>
From: Ben Pryor <BPryor@widen.com>
To: lucene-user@jakarta.apache.org
Subject: building a search query
Date: Wed, 9 Jun 2004 16:37:28 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C44E69.F64A65E0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C44E69.F64A65E0
Content-Type: text/plain

I am working on a UI to allow a user to build a search query. The user
creates individual "clauses", each of which is basically a simple search
query. The user selects boolean operators (AND, OR, NOT), to connect these
clauses. When the user is finished constructing the search, there will be N
clauses and N-1 boolean connectors.

 

Each clause is backed by an object that knows how to generate a Lucene Query
from the clause. The objective is to combine the clauses and the boolean
operators into a BooleanQuery. 

 

What is the best way to programmatically make the final BooleanQuery object?
It seems there is a modeling mismatch: the user sees N clauses connected
with N-1 connectors, but the BooleanQuery will require N Querys with each
Query having its own required and prohibited flags set correctly.

 

I looked briefly at the QueryParser class - it appears to have logic to
bridge these two different ways of modeling complex queries (in the
addClause method). Is this the best approach? What have others done?

 

Thanks,

 Ben


------_=_NextPart_001_01C44E69.F64A65E0--

From lucene-user-return-8653-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 21:50:18 2004
Return-Path: <lucene-user-return-8653-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8262 invoked from network); 9 Jun 2004 21:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 21:50:18 -0000
Received: (qmail 72059 invoked by uid 500); 9 Jun 2004 21:50:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72015 invoked by uid 500); 9 Jun 2004 21:50:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72001 invoked by uid 99); 9 Jun 2004 21:50:31 -0000
Received: from [65.174.157.4] (HELO balasmtpout.primavera.com) (65.174.157.4)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 14:50:31 -0700
Subject: Wildcards and complete words
Date: Wed, 9 Jun 2004 14:50:39 -0700
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Cc: 
From: MMcGowan@primavera.com
X-Mailer: Microsoft Outlook v 10.00.2627, MSOC v 1.00.2411.00
Message-ID: <OF558E34D5.388557AD-ON07256EAE.0077D3C8@primavera.com>
X-MIMETrack: Serialize by Router on BalaSMTPOut/Primavera(Release 6.5|September 26, 2003) at
 06/09/2004 05:50:06 PM,
	Serialize complete at 06/09/2004 05:50:06 PM
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_036B_01C44E31.220CBA40"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.132
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_036B_01C44E31.220CBA40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I noticed that if I append a * to the words, create, created, creating,
creates, etc. then the search does not return the expected document. But
if I use creat* then the search does return the expected document.=20
=20
I would like to be able to use the complete words and append a wildcard
to the end. Any help would be greatly appreciated. Thanks!!!
=20
Regards,
Michael
=20

------=_NextPart_000_036B_01C44E31.220CBA40--


From lucene-user-return-8654-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 22:01:13 2004
Return-Path: <lucene-user-return-8654-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13889 invoked from network); 9 Jun 2004 22:01:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 22:01:13 -0000
Received: (qmail 94216 invoked by uid 500); 9 Jun 2004 22:01:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94196 invoked by uid 500); 9 Jun 2004 22:01:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94180 invoked by uid 99); 9 Jun 2004 22:01:26 -0000
Received: from [64.204.123.110] (HELO mail.savagebeast.com) (64.204.123.110)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 15:01:26 -0700
Received: from jeffwong (192-168-1-193.SavageBeast.com [192.168.1.193])
	by mail.savagebeast.com (8.9.3p2/8.9.3) with SMTP id PAA09261
	for <lucene-user@jakarta.apache.org>; Wed, 9 Jun 2004 15:00:13 -0700
Message-ID: <000e01c44e6c$85041bd0$c101a8c0@jeffwong>
From: "Jeff Wong" <jeffwong@savagebeast.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <CFAF6F2213792F4FBA1E08561BB701D404735846@exchange.corp.widen.com>
Subject: Re: building a search query
Date: Wed, 9 Jun 2004 14:55:46 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well, I can offer you advice on 2 fronts:

1)  I recommend against using the QueryParser unless you have nothing to add
to the users input.  In my situation, I was generating Lucene query object
using the query parser.  It was kind of cumbersome because I was doing
things like joining some terms with ORs and ANDs within parentheses.  Since
I was using Python to prototype at the time,  it was just more convenient to
do string manipulation and pass it to the QueryParser.  However, when you do
that, you risk introducing another class of bugs because you can pass a
string to QueryParser which is syntactically incorrect. You have to be
careful to escape characters which having meaning to the Lucene QueryParser.

Later on, I was combining terms and creating new query terms
programmatically and it was easier to do this on the object Query object
that came out of the QueryParser.  It's kind of disorganized right now.  If
I had to go back and do it again, I would have just left out the
QueryParser.

2) Also,  you should be wary of the possibility that your users may not know
Boolean logic.  AND and OR may have different meanings for them.  For most
people, AND is an inclusive operator and OR is basically XOR.  It may seem
strange to you, but it's kind of like those optical illusions.  Is the
picture of an old woman or a young lady?  Is that a wine glass or two people
in profile?


To answer your question about using the BooleanQuery object,  you only need
a single clause object to connect multiple terms.

To make a BooleanQuery like this:
A OR B OR C


q = new BooleanQuery()
q.add( a, false, false)
q.add( b, false, false)
q.add( c, false, false)



----- Original Message ----- 
From: "Ben Pryor" <BPryor@widen.com>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 09, 2004 2:37 PM
Subject: building a search query


> I am working on a UI to allow a user to build a search query. The user
> creates individual "clauses", each of which is basically a simple search
> query. The user selects boolean operators (AND, OR, NOT), to connect these
> clauses. When the user is finished constructing the search, there will be
N
> clauses and N-1 boolean connectors.
>
> Each clause is backed by an object that knows how to generate a Lucene
Query
> from the clause. The objective is to combine the clauses and the boolean
> operators into a BooleanQuery.
>
> What is the best way to programmatically make the final BooleanQuery
object?
> It seems there is a modeling mismatch: the user sees N clauses connected
> with N-1 connectors, but the BooleanQuery will require N Querys with each
> Query having its own required and prohibited flags set correctly.
>
> I looked briefly at the QueryParser class - it appears to have logic to
> bridge these two different ways of modeling complex queries (in the
> addClause method). Is this the best approach? What have others done?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8655-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 09 23:48:16 2004
Return-Path: <lucene-user-return-8655-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55825 invoked from network); 9 Jun 2004 23:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Jun 2004 23:48:16 -0000
Received: (qmail 71353 invoked by uid 500); 9 Jun 2004 23:48:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71207 invoked by uid 500); 9 Jun 2004 23:48:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71194 invoked by uid 99); 9 Jun 2004 23:48:30 -0000
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 09 Jun 2004 16:48:30 -0700
Message-ID: <20040609234759.73137.qmail@web12707.mail.yahoo.com>
Received: from [195.29.49.180] by web12707.mail.yahoo.com via HTTP; Wed, 09 Jun 2004 16:47:59 PDT
Date: Wed, 9 Jun 2004 16:47:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Wildcards and complete words
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <OF558E34D5.388557AD-ON07256EAE.0077D3C8@primavera.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I believe I covered this in a Lucene FAQ entry at jGuru.

Otis

--- MMcGowan@primavera.com wrote:
> Hi,
>  
> I noticed that if I append a * to the words, create, created,
> creating,
> creates, etc. then the search does not return the expected document.
> But
> if I use creat* then the search does return the expected document. 
>  
> I would like to be able to use the complete words and append a
> wildcard
> to the end. Any help would be greatly appreciated. Thanks!!!
>  
> Regards,
> Michael
>  
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8656-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 02:09:06 2004
Return-Path: <lucene-user-return-8656-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24394 invoked from network); 10 Jun 2004 02:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 02:09:06 -0000
Received: (qmail 4300 invoked by uid 500); 10 Jun 2004 02:09:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4251 invoked by uid 500); 10 Jun 2004 02:09:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4232 invoked by uid 99); 10 Jun 2004 02:09:20 -0000
Received: from [62.112.223.117] (HELO incze.adsl.enternet.hu) (62.112.223.117)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 09 Jun 2004 19:09:20 -0700
Received: from g40.incze.hu (g40.incze.hu [192.168.10.18])
	by incze.adsl.enternet.hu (8.11.6/8.11.6) with ESMTP id i5A28kh04239
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 04:08:46 +0200
Received: from g40.incze.hu (localhost [127.0.0.1])
	by g40.incze.hu (8.12.10/8.12.10) with ESMTP id i5A28iPU022336
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 04:08:44 +0200
Received: (from incze@localhost)
	by g40.incze.hu (8.12.10/8.12.8/Submit) id i5A28iQA022334
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 04:08:44 +0200
X-Authentication-Warning: g40.incze.hu: incze set sender to incze@mail.matav.hu using -f
Date: Thu, 10 Jun 2004 04:08:44 +0200
From: Incze Lajos <incze@mail.matav.hu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: phrase query not working in boolean clause
Message-ID: <20040610020843.GA16685@incze.adsl.enternet.hu>
References: <40C739F9.2010806@aps.org> <4CB46AAD-BA3C-11D8-A592-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4CB46AAD-BA3C-11D8-A592-000393A564E6@ehatchersolutions.com>
User-Agent: Mutt/1.4.1i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, Jun 09, 2004 at 01:41:55PM -0400, Erik Hatcher wrote:
> On Jun 9, 2004, at 12:25 PM, Michael Duval wrote:
> >When doing an exact phrase query on the title the expected results are 
> >returned:
> >
> >   +(title:"Mass Asymmetry")
> >      after tokenizing/filtering:  +title:"mass asymmetri"
> >   returns 20 Hits
> >   example hit: "Mass asymmetry, equation of state, and nuclear 
> >multifragmentation"
> >
> >When attempting to confine the results to a particular journal the 
> >query used is:
> >   +(journal:L) +(title:"Mass Asymmetry")
> >      after t/f :  +journal:L +title:"mass asymmetri"
> >
> >   returns 315 Hits!!
> >   example hit 1:  Towards dynamical mass calculations
> >   example hit 2:  Up down-asymmetric gravitational fields of spinning 
> >masses
> >
> >It would seem that the search engine is treating
> >   +title:"mass asymmetri"  as +title:mass asymmetri
> >
> >However, this behavior is only apparent on composite queries as shown 
> >previously.
> >
> >For a sanity check I built the query using both the standard query 
> >parser and
> >the lucene search api (TermQuery, PhraseQuery, BooleanQuery).   The 
> >results
> >were the same both ways.
> >
> >Is this a well known limitation of the lucene search engine?  Is there 
> >a different
> >means of obtaining the desired results?
> 
> Could you work up a JUnit test case example indexing a couple of 
> documents like this into a RAMDirectory and a testXXX method that shows 
> the failure?
> 
> I cannot really make sense of what you have going on with the textual 
> queries and obviously some stemming going on to.  Show us the code. :)
> 
> 	Erik

This was fixed cca a 2 months ago by Mr. Goller. You have to upgrade,
if you can.

incze

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8657-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 05:22:19 2004
Return-Path: <lucene-user-return-8657-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21779 invoked from network); 10 Jun 2004 05:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 05:22:19 -0000
Received: (qmail 26264 invoked by uid 500); 10 Jun 2004 05:22:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26199 invoked by uid 500); 10 Jun 2004 05:22:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26106 invoked by uid 99); 10 Jun 2004 05:22:21 -0000
Received: from [203.199.51.149] (HELO smtp2.iitb.ac.in) (203.199.51.149)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 09 Jun 2004 22:22:21 -0700
Received: (qmail 31703 invoked by uid 505); 10 Jun 2004 05:12:29 -0000
Received: from satishk@it.iitb.ac.in by smtp2.iitb.ac.in by uid 502 with qmail-scanner-1.16 
 (clamscan: 0.54. spamassassin: 2.54.  Clear:. 
 Processed in 0.485815 secs); 10 Jun 2004 05:12:29 -0000
Received: from unknown (HELO fornax.it.iitb.ac.in) (10.129.1.105)
  by smtp2.iitb.ac.in with SMTP; 10 Jun 2004 05:12:28 -0000
Received: (qmail 20707 invoked by uid 5073); 10 Jun 2004 05:34:05 -0000
Date: Thu, 10 Jun 2004 11:04:05 +0530 (IST)
From: Satish Kagathare <satishk@it.iitb.ac.in>
To: lucene-user@jakarta.apache.org
Subject: Devnagari Search?
Message-ID: <Pine.LNX.4.44.0406101049480.20290-100000@fornax.it.iitb.ac.in>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Any one have built lucene for Devnagari UNICODE search? PLZ help me wht 
kind of changes i have to do in lucene.

Also if any one have built StandardTokenizer,Analyzer,Stemmer,Indexer
,queryParser for Hindi & Marathi Plz let me know.

Thanks,
Satish.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8658-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 07:59:54 2004
Return-Path: <lucene-user-return-8658-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8024 invoked from network); 10 Jun 2004 07:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 07:59:54 -0000
Received: (qmail 49254 invoked by uid 500); 10 Jun 2004 08:00:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49224 invoked by uid 500); 10 Jun 2004 08:00:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49210 invoked by uid 99); 10 Jun 2004 08:00:10 -0000
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 01:00:10 -0700
Message-ID: <20040610075933.98973.qmail@web12706.mail.yahoo.com>
Received: from [83.131.119.93] by web12706.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 00:59:33 PDT
Date: Thu, 10 Jun 2004 00:59:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Performance: compound vs. multi-file index, indexing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <GERMANYYZSMZ1pzn5UJ000013c1@germany.prod.thop-ny.triplehop.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Hui,

You are actually the person whose email I was referring to.  Have you,
by any chance, done the same test with newever versions of Lucene?  I
am using the latest RC, and see very little or no difference in
indexing speed.

Thanks,
Otis

--- hui <hui@triplehop.com> wrote:
> I did the test earlier on 1.3
>
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apac
> he.org&msgId=1408808
> 
> 
> 
> Regards,
> Hui
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Tuesday, June 08, 2004 5:23 AM
> To: Lucene Users List
> Subject: Performance: compound vs. multi-file index, indexing and
> searching
> 
> Hello,
> 
> I was wondering if anyone can comment on the performance difference
> of
> compound versus multi-file indices.  I am interested in both indexing
> and searching performance, and have tried testing indexing
> performance
> of both formats.
> 
> My tests so far show no indexing performance differences between the
> two formats, but I do remember one person reporting compound index
> format being 7% slower, so perhaps my tests are flawed.
> 
> Can anyone comment on performance differences?
> 
> Thanks,
> Otis
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8659-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 08:02:55 2004
Return-Path: <lucene-user-return-8659-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9683 invoked from network); 10 Jun 2004 08:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 08:02:55 -0000
Received: (qmail 55246 invoked by uid 500); 10 Jun 2004 08:03:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55216 invoked by uid 500); 10 Jun 2004 08:03:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55202 invoked by uid 99); 10 Jun 2004 08:03:13 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 01:03:13 -0700
Message-ID: <20040610080234.9621.qmail@web12705.mail.yahoo.com>
Received: from [83.131.119.93] by web12705.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 01:02:34 PDT
Date: Thu, 10 Jun 2004 01:02:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40C5CF68.6050703@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Eric.

Otis

--- Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> > Can anyone comment on performance differences?
> 
> I just ran a comparison, indexing about 250'000 small documents. Both
> 
> the time for indexing (239s) and the final disk space used (16.6MB)
> were 
> identical. Haven't compared search performance, though I suspect I
> can 
> save myself the effort...
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8660-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 09:04:59 2004
Return-Path: <lucene-user-return-8660-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45524 invoked from network); 10 Jun 2004 09:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 09:04:59 -0000
Received: (qmail 96796 invoked by uid 500); 10 Jun 2004 09:05:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96774 invoked by uid 500); 10 Jun 2004 09:05:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96760 invoked by uid 99); 10 Jun 2004 09:05:14 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 02:05:14 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 0B19A7686E8
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 05:04:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C77593.5020502@tropo.com>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C73905.50108@tropo.com> <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C77593.5020502@tropo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3243C5C0-BABD-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: extensible query parser - Re: Proximity Searches  behavior
Date: Thu, 10 Jun 2004 05:04:36 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 9, 2004, at 4:39 PM, David Spencer wrote:
>> I like the idea of a flexible run-time grammar, but it sounds too 
>> good to be true in a general purpose kinda way.
>
> My idea isn't perfect for humans, but at least lets you use queries 
> not hard coded.

But in my idealistic view, getting something (near) perfect for humans 
is what a QueryParser is all about.  And, of course, this is domain and 
application specific in a lot of ways.

> [5] the point
>
> Be backward  compatible and "natural" for existing query syntax, but 
> leave a hook so that if you innovate and define new query expansion 
> code there's some hope of someone using it as they can in theory drop 
> it in and use it w/o coding. Right now if you create some code in this 
> area I suspect there's little chance people will try it out as there's 
> too much friction to try it out.

I'm still grasping for a happy medium between the current QueryParser 
and this idea of an awkward syntax general purpose pluggable parser.

Interestingly the current QueryParser is pluggable in some interesting 
ways thanks to the getters for each query time being overridable.  For 
example, disallowing wildcard and fuzzy queries, enhancing range query 
to handle different formats, and changing PhraseQuery into a 
SpanNearQuery are all tricks I'm including in Lucene in Action.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8661-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 10:44:04 2004
Return-Path: <lucene-user-return-8661-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4759 invoked from network); 10 Jun 2004 10:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 10:44:03 -0000
Received: (qmail 41888 invoked by uid 500); 10 Jun 2004 10:41:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41862 invoked by uid 500); 10 Jun 2004 10:41:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41848 invoked by uid 99); 10 Jun 2004 10:41:05 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 03:41:05 -0700
Message-ID: <20040610104101.81449.qmail@web12702.mail.yahoo.com>
Received: from [195.29.54.82] by web12702.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 03:41:01 PDT
Date: Thu, 10 Jun 2004 03:41:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40C61882.6040504@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I haven't tested the two in a multi-threaded setup, but my
single-threaded unit test now clearly shows that there _is_ a
consistent indexing performance difference between the two index
structures.  The multi-file structure seems to beat the compound index
structure by about 7% in my tests, which matches Hui's report, and what
I thought unit tests would show.

Hui used Lucene 1.3, and I used the latest RC, and the results are
about the same.

Otis

--- Doug Cutting <cutting@apache.org> wrote:
> Otis Gospodnetic wrote:
> > Can anyone comment on performance differences?
> 
> I'd expect multi-threaded performance to be a bit worse with the 
> compound format, but single-threaded performance should be nearly
> identical.


=====
http://www.simpy.com/ - social bookmarking and personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8662-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 12:50:25 2004
Return-Path: <lucene-user-return-8662-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83616 invoked from network); 10 Jun 2004 12:50:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 12:50:24 -0000
Received: (qmail 99229 invoked by uid 500); 10 Jun 2004 12:50:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99189 invoked by uid 500); 10 Jun 2004 12:50:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99116 invoked by uid 99); 10 Jun 2004 12:50:16 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 05:50:16 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Thu, 10 Jun 2004 08:50:10 -0400
Message-Id: <s0c820c2.096@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Thu, 10 Jun 2004 08:49:36 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: Devnagari Search?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don't have experience with those particular languages, but I can tell you =
that dealing with UNICODE is just a matter of making sure you read in the =
input using the correct encoding.  Java will take care of the rest.  If =
you are using a Reader for your Field, you probably have to do something =
like:

new InputStreamReader(new FileInputStream(file), "UTF-8")

assuming your files are stored in UTF-8.  If they are a different =
encoding, then you will have to pass that in place of UTF-8.

I would do a google search for stemmers and tokenizers for the languages =
you are interested in.  I also believe someone had a "generic" stemmer =
that performed very well.  I believe they posted to this list a week or so =
ago w/ a topic of "Writing a stemmer" or something along those lines.

>>> satishk@it.iitb.ac.in 06/10/04 01:34AM >>>

Any one have built lucene for Devnagari UNICODE search? PLZ help me wht=20
kind of changes i have to do in lucene.

Also if any one have built StandardTokenizer,Analyzer,Stemmer,Indexer
,queryParser for Hindi & Marathi Plz let me know.

Thanks,
Satish.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8663-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:08:04 2004
Return-Path: <lucene-user-return-8663-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94693 invoked from network); 10 Jun 2004 13:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:08:03 -0000
Received: (qmail 77352 invoked by uid 500); 10 Jun 2004 13:07:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77306 invoked by uid 500); 10 Jun 2004 13:07:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77290 invoked by uid 99); 10 Jun 2004 13:07:27 -0000
Received: from [209.228.33.242] (HELO c007.snv.cp.net) (209.228.33.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 06:07:27 -0700
Received: (cpmta 16390 invoked from network); 10 Jun 2004 06:07:17 -0700
Received: from 213.132.40.2 (HELO ?192.168.1.24?)
  by smtp.bayt.net (209.228.33.242) with SMTP; 10 Jun 2004 06:07:17 -0700
X-Sent: 10 Jun 2004 13:07:17 GMT
Message-ID: <40C85D03.50302@bayt.net>
Date: Thu, 10 Jun 2004 17:07:15 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Devnagari Search?
References: <Pine.LNX.4.44.0406101049480.20290-100000@fornax.it.iitb.ac.in>
In-Reply-To: <Pine.LNX.4.44.0406101049480.20290-100000@fornax.it.iitb.ac.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Have faith in the UNICODE standard it's well thought out and if you have 
any internationalization queries there was an excellent article on Java 
World entitled end-to-end internationalization here's the link: 
http://www.javaworld.com/javaworld/jw-05-2004/jw-0524-i18n_p.html  have 
a read it helps clear out some myths.

Nader Henein

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8664-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:17:52 2004
Return-Path: <lucene-user-return-8664-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4128 invoked from network); 10 Jun 2004 13:17:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:17:52 -0000
Received: (qmail 14621 invoked by uid 500); 10 Jun 2004 13:17:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14463 invoked by uid 500); 10 Jun 2004 13:17:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14239 invoked by uid 99); 10 Jun 2004 13:17:38 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 06:17:38 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i5ADHQ16020373
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 15:17:26 +0200
Message-ID: <40C85F6F.1080700@isb-sib.ch>
Date: Thu, 10 Jun 2004 15:17:35 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: CachedQuery
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I noticed that searching for terms that appear in a significant number
of documents tends to be relatively slow. For example

   foo AND (bar:yes OR xyz)

where every document has a field 'bar' with a value of either 'yes' or
'no'. Had a look at CachingWrapperFilter, unfortunately this class
doesn't seem to be any help here. Perhaps I need to create a CachedQuery
class that caches Weight objects for wrapped Query objects (and subclass
QueryParser to make use of this)? But would this work? Any ideas?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8665-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:28:41 2004
Return-Path: <lucene-user-return-8665-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17850 invoked from network); 10 Jun 2004 13:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:28:41 -0000
Received: (qmail 49947 invoked by uid 500); 10 Jun 2004 13:28:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49795 invoked by uid 500); 10 Jun 2004 13:28:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49519 invoked by uid 99); 10 Jun 2004 13:28:23 -0000
Received: from [213.56.31.31] (HELO smtp9.clb.oleane.net) (213.56.31.31)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 06:28:23 -0700
Received: from teck ([217.167.130.37]) (authenticated)
	by smtp9.clb.oleane.net with ESMTP id i5ADSC6h003402
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 15:28:13 +0200
Message-ID: <004901c44eef$003bb600$6a0010ac@teck>
From: "Julien Nioche" <Julien.Nioche@lingway.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040610104101.81449.qmail@web12702.mail.yahoo.com>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
Date: Thu, 10 Jun 2004 15:29:45 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Has anyone tried comparing the performance of regular (multi-file) indexing
and specifying a value for minMergeDocs?
Using parameter limits the number of files and is supposed to improve the
speed of indexation.

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 10, 2004 12:41 PM
Subject: Re: Performance: compound vs. multi-file index, indexing and
searching


> I haven't tested the two in a multi-threaded setup, but my
> single-threaded unit test now clearly shows that there _is_ a
> consistent indexing performance difference between the two index
> structures.  The multi-file structure seems to beat the compound index
> structure by about 7% in my tests, which matches Hui's report, and what
> I thought unit tests would show.
>
> Hui used Lucene 1.3, and I used the latest RC, and the results are
> about the same.
>
> Otis
>
> --- Doug Cutting <cutting@apache.org> wrote:
> > Otis Gospodnetic wrote:
> > > Can anyone comment on performance differences?
> >
> > I'd expect multi-threaded performance to be a bit worse with the
> > compound format, but single-threaded performance should be nearly
> > identical.
>
>
> =====
> http://www.simpy.com/ - social bookmarking and personal search engine
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8666-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:34:49 2004
Return-Path: <lucene-user-return-8666-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22339 invoked from network); 10 Jun 2004 13:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:34:48 -0000
Received: (qmail 72361 invoked by uid 500); 10 Jun 2004 13:34:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72214 invoked by uid 500); 10 Jun 2004 13:34:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72066 invoked by uid 99); 10 Jun 2004 13:34:38 -0000
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 06:34:38 -0700
Message-ID: <20040610133429.78336.qmail@web12703.mail.yahoo.com>
Received: from [194.152.216.177] by web12703.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 06:34:29 PDT
Date: Thu, 10 Jun 2004 06:34:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance: compound vs. multi-file index, indexing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <004901c44eef$003bb600$6a0010ac@teck>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am going to cover this for Lucene in Action very very soon, so I'll
try to remember and post my findings to this list.  If nobody else
answers your question and you still haven't heard from me in a week or
so, feel free to remind me.

Otis

--- Julien Nioche <Julien.Nioche@lingway.com> wrote:
> Has anyone tried comparing the performance of regular (multi-file)
> indexing and specifying a value for minMergeDocs?
> Using parameter limits the number of files and is supposed to improve
> the speed of indexation.


=====
http://www.simpy.com/ - social bookmarking and personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8667-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:38:46 2004
Return-Path: <lucene-user-return-8667-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25308 invoked from network); 10 Jun 2004 13:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:38:46 -0000
Received: (qmail 85579 invoked by uid 500); 10 Jun 2004 13:38:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85240 invoked by uid 500); 10 Jun 2004 13:38:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85170 invoked by uid 99); 10 Jun 2004 13:38:39 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 06:38:39 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i5ADcR16022709
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 15:38:27 +0200
Message-ID: <40C8645C.2070708@isb-sib.ch>
Date: Thu, 10 Jun 2004 15:38:36 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: Open-ended range queries
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I see that with RangeQueries either the upperTerm or the lowerTerm are 
optional - very useful. However, it seems the QueryParser doesn't 
support this, or is there a syntax trick I have overlooked?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8668-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:44:35 2004
Return-Path: <lucene-user-return-8668-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29004 invoked from network); 10 Jun 2004 13:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:44:35 -0000
Received: (qmail 6917 invoked by uid 500); 10 Jun 2004 13:44:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6689 invoked by uid 500); 10 Jun 2004 13:44:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6418 invoked by uid 99); 10 Jun 2004 13:44:16 -0000
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 06:44:16 -0700
Received: (qmail 29603 invoked by uid 89); 10 Jun 2004 13:44:07 -0000
Received: from unknown (HELO apache.org) (212.42.228.228)
  by londo.swishmail.com with SMTP; 10 Jun 2004 13:44:07 -0000
Message-ID: <40C8659C.6010502@apache.org>
Date: Thu, 10 Jun 2004 06:43:56 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Proximity Searches  behavior
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <27631243-BA18-11D8-A592-000393A564E6@ehatchersolutions.com>
In-Reply-To: <27631243-BA18-11D8-A592-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> If you want something that does "quick fox*" where "quick" must be 
> followed by something starting with "fox", you'll have to do this 
> through the API, perhaps using the awkwardly named PhrasePrefixQuery, 
> which does support slop also.  It would be up to you to do the term 
> expansions for all terms beginning with "fox" in order to use this.

Note that, instead of using PhrasePrefixQuery, you could also implement 
this with SpanNear and SpanOr.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8669-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 13:50:23 2004
Return-Path: <lucene-user-return-8669-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33366 invoked from network); 10 Jun 2004 13:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 13:50:23 -0000
Received: (qmail 20915 invoked by uid 500); 10 Jun 2004 13:50:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20814 invoked by uid 500); 10 Jun 2004 13:50:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20790 invoked by uid 99); 10 Jun 2004 13:50:21 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 06:50:21 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 3017F7693D1
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 09:50:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C85F6F.1080700@isb-sib.ch>
References: <40C85F6F.1080700@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <15E736FA-BAE5-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CachedQuery
Date: Thu, 10 Jun 2004 09:50:08 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 9:17 AM, Eric Jain wrote:
> I noticed that searching for terms that appear in a significant number
> of documents tends to be relatively slow. For example
>
>   foo AND (bar:yes OR xyz)
>
> where every document has a field 'bar' with a value of either 'yes' or
> 'no'. Had a look at CachingWrapperFilter, unfortunately this class
> doesn't seem to be any help here. Perhaps I need to create a 
> CachedQuery
> class that caches Weight objects for wrapped Query objects (and 
> subclass
> QueryParser to make use of this)? But would this work? Any ideas?

How about the new FilteredQuery (added in the latest Lucene 1.4 release 
- or earlier?).  I'm not sure it would suffice for that particular 
query though.  It would, however, work well for:

	foo OR (bar:yes AND xyz)

as you could use a QueryFilter on bar:yes nested in a FilteredQuery 
with a TermQuery for xyz, and then wrapped in a BooleanQuery as two 
non-required clauses.  As for QueryParser... FilteredQuery is not 
currently supported, although you could perhaps inject it by 
subclassing (?).

Maybe FilteredQuery would work for you?  But I'm not seeing how with 
the query you provided.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8670-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 14:26:40 2004
Return-Path: <lucene-user-return-8670-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58362 invoked from network); 10 Jun 2004 14:26:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 14:26:39 -0000
Received: (qmail 40730 invoked by uid 500); 10 Jun 2004 14:26:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40705 invoked by uid 500); 10 Jun 2004 14:26:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40685 invoked by uid 99); 10 Jun 2004 14:26:30 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 07:26:30 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BYQVV-000507-00
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 10:26:17 -0400
Message-ID: <002101c44ef6$e5907ef0$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C73905.50108@tropo.com> <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C77593.5020502@tropo.com> <3243C5C0-BABD-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Subject: Re: extensible query parser - Re: Proximity Searches  behavior
Date: Thu, 10 Jun 2004 10:26:18 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

When is "Lucene in Action" scheduled to be out?

Regards,

Terry

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 10, 2004 5:04 AM
Subject: Re: extensible query parser - Re: Proximity Searches behavior


> On Jun 9, 2004, at 4:39 PM, David Spencer wrote:
> >> I like the idea of a flexible run-time grammar, but it sounds too 
> >> good to be true in a general purpose kinda way.
> >
> > My idea isn't perfect for humans, but at least lets you use queries 
> > not hard coded.
> 
> But in my idealistic view, getting something (near) perfect for humans 
> is what a QueryParser is all about.  And, of course, this is domain and 
> application specific in a lot of ways.
> 
> > [5] the point
> >
> > Be backward  compatible and "natural" for existing query syntax, but 
> > leave a hook so that if you innovate and define new query expansion 
> > code there's some hope of someone using it as they can in theory drop 
> > it in and use it w/o coding. Right now if you create some code in this 
> > area I suspect there's little chance people will try it out as there's 
> > too much friction to try it out.
> 
> I'm still grasping for a happy medium between the current QueryParser 
> and this idea of an awkward syntax general purpose pluggable parser.
> 
> Interestingly the current QueryParser is pluggable in some interesting 
> ways thanks to the getters for each query time being overridable.  For 
> example, disallowing wildcard and fuzzy queries, enhancing range query 
> to handle different formats, and changing PhraseQuery into a 
> SpanNearQuery are all tricks I'm including in Lucene in Action.
> 
> Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8671-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 14:35:54 2004
Return-Path: <lucene-user-return-8671-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66181 invoked from network); 10 Jun 2004 14:35:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 14:35:54 -0000
Received: (qmail 74104 invoked by uid 500); 10 Jun 2004 14:35:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74051 invoked by uid 500); 10 Jun 2004 14:35:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73985 invoked by uid 99); 10 Jun 2004 14:35:31 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 07:35:31 -0700
Message-ID: <20040610143519.17531.qmail@web12702.mail.yahoo.com>
Received: from [194.152.216.177] by web12702.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 07:35:19 PDT
Date: Thu, 10 Jun 2004 07:35:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: extensible query parser - Re: Proximity Searches  behavior
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <002101c44ef6$e5907ef0$6501a8c0@POWERPACK>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Terry, LIA is currently scheduled to be out in August, but we may get
it done a bit later than that.

Otis

--- Terry Steichen <terry@net-frame.com> wrote:
> Erik,
> 
> When is "Lucene in Action" scheduled to be out?
> 
> Regards,
> 
> Terry
> 
> ----- Original Message ----- 
> From: "Erik Hatcher" <erik@ehatchersolutions.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 10, 2004 5:04 AM
> Subject: Re: extensible query parser - Re: Proximity Searches
> behavior
> 
> 
> > On Jun 9, 2004, at 4:39 PM, David Spencer wrote:
> > >> I like the idea of a flexible run-time grammar, but it sounds
> too 
> > >> good to be true in a general purpose kinda way.
> > >
> > > My idea isn't perfect for humans, but at least lets you use
> queries 
> > > not hard coded.
> > 
> > But in my idealistic view, getting something (near) perfect for
> humans 
> > is what a QueryParser is all about.  And, of course, this is domain
> and 
> > application specific in a lot of ways.
> > 
> > > [5] the point
> > >
> > > Be backward  compatible and "natural" for existing query syntax,
> but 
> > > leave a hook so that if you innovate and define new query
> expansion 
> > > code there's some hope of someone using it as they can in theory
> drop 
> > > it in and use it w/o coding. Right now if you create some code in
> this 
> > > area I suspect there's little chance people will try it out as
> there's 
> > > too much friction to try it out.
> > 
> > I'm still grasping for a happy medium between the current
> QueryParser 
> > and this idea of an awkward syntax general purpose pluggable
> parser.
> > 
> > Interestingly the current QueryParser is pluggable in some
> interesting 
> > ways thanks to the getters for each query time being overridable. 
> For 
> > example, disallowing wildcard and fuzzy queries, enhancing range
> query 
> > to handle different formats, and changing PhraseQuery into a 
> > SpanNearQuery are all tricks I'm including in Lucene in Action.
> > 
> > Erik
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8672-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 14:48:11 2004
Return-Path: <lucene-user-return-8672-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75757 invoked from network); 10 Jun 2004 14:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 14:48:11 -0000
Received: (qmail 16046 invoked by uid 500); 10 Jun 2004 14:48:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15947 invoked by uid 500); 10 Jun 2004 14:48:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15907 invoked by uid 99); 10 Jun 2004 14:48:02 -0000
Received: from [216.82.240.51] (HELO mail63.messagelabs.com) (216.82.240.51)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 07:48:02 -0700
X-VirusChecked: Checked
X-Env-Sender: BPryor@widen.com
X-Msg-Ref: server-2.tower-63.messagelabs.com!1086878870!6383981
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [69.8.156.101]
Received: (qmail 8724 invoked from network); 10 Jun 2004 14:47:50 -0000
Received: from mailhost.widen.com (HELO exchange2k.widen.com) (69.8.156.101)
  by server-2.tower-63.messagelabs.com with SMTP; 10 Jun 2004 14:47:50 -0000
Received: by exchange.corp.widen.com with Internet Mail Service (5.5.2657.72)
	id <MTT4R71J>; Thu, 10 Jun 2004 09:47:50 -0500
Message-ID: <CFAF6F2213792F4FBA1E08561BB701D404735877@exchange.corp.widen.com>
From: Ben Pryor <BPryor@widen.com>
To: lucene-user@jakarta.apache.org
Subject: queryparser: parsing boolean logic
Date: Thu, 10 Jun 2004 09:47:48 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C44EF9.E6186C40"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C44EF9.E6186C40
Content-Type: text/plain

Here is a follow-up to a previous message I posted, dealing with converting
user-entered boolean logic into a Query. Why does the QueryParser construct
the same query for the following two strings?

 

"apple AND orange OR pear AND grape"

"apple AND orange AND pear AND grape"

 

I think a user's expectation would be that the first query matches things
containing apple and orange, or containing pear and grape. And that the
second query would only match things containing all four items. However, the
same query is constructed both times (the constructed query requires all
four).

 

package collective.search.lucene.tests;

 

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.queryParser.ParseException;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.search.Query;

 

import junit.framework.TestCase;

 

public class QPTest extends TestCase

{

            public QPTest(String arg0)

            {

                        super(arg0);

            }

 

            private void display(String s, Query q)

            {

                        System.out.println("\"" + s + "\" = \"" +
q.toString() + "\"");

            }

 

            public void testBooleanConstruction() throws ParseException

            {

                        String test1 = "apple AND orange OR pear AND grape";

                        String test2 = "apple AND orange AND pear AND
grape";

                        

                        QueryParser qp = new QueryParser("df", new
StandardAnalyzer());

                        

                        Query query1 = qp.parse(test1);

                        Query query2 = qp.parse(test2);

                        

                        display(test1, query1);

                        display(test2, query2);                

            }

}


------_=_NextPart_001_01C44EF9.E6186C40--

From lucene-user-return-8673-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:30:49 2004
Return-Path: <lucene-user-return-8673-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9569 invoked from network); 10 Jun 2004 15:30:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:30:48 -0000
Received: (qmail 95364 invoked by uid 500); 10 Jun 2004 15:30:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95330 invoked by uid 500); 10 Jun 2004 15:30:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95305 invoked by uid 99); 10 Jun 2004 15:30:48 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:30:48 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 7D7E876956A
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:30:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <002101c44ef6$e5907ef0$6501a8c0@POWERPACK>
References: <40C6C9C9.9010005@healthonnet.org> <E8CF4596-BA08-11D8-9C12-000393A564E6@ehatchersolutions.com> <013e01c44e20$cf777910$6501a8c0@POWERPACK> <78244575-BA1A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C73905.50108@tropo.com> <639F0746-BA3A-11D8-A592-000393A564E6@ehatchersolutions.com> <40C77593.5020502@tropo.com> <3243C5C0-BABD-11D8-9DDD-000393A564E6@ehatchersolutions.com> <002101c44ef6$e5907ef0$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1D6C2F27-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: extensible query parser - Re: Proximity Searches  behavior
Date: Thu, 10 Jun 2004 11:30:34 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 10:26 AM, Terry Steichen wrote:
> Erik,
>
> When is "Lucene in Action" scheduled to be out?

To add to what Otis said - I've been working feverishly to come to 
"terms" with SpanQuery*, the new sorting feature, Highlighter, Nutch 
analysis and much more.  Lucene in Action will be accurate with Lucene 
1.4, so it has been a tough job to learn and keep up.  We are nearing 
the end though, and I can pretty confidently say that Otis and I will 
be completely done with the manuscript sometime in July.  We are behind 
where we wanted to be, but thankfully that has worked out well with the 
timing of a Lucene 1.4 final release.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8674-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:34:57 2004
Return-Path: <lucene-user-return-8674-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11972 invoked from network); 10 Jun 2004 15:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:34:56 -0000
Received: (qmail 6839 invoked by uid 500); 10 Jun 2004 15:34:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6626 invoked by uid 500); 10 Jun 2004 15:34:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6422 invoked by uid 99); 10 Jun 2004 15:34:28 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:34:28 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id AD9F3769570
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:34:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C8645C.2070708@isb-sib.ch>
References: <40C8645C.2070708@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 11:32:59 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 9:38 AM, Eric Jain wrote:
> I see that with RangeQueries either the upperTerm or the lowerTerm are 
> optional - very useful. However, it seems the QueryParser doesn't 
> support this, or is there a syntax trick I have overlooked?

Correct, QueryParser does not support open-ended range queries.  A 
hack, of course, is to use some text that comes ahead of the first or 
beyond the last term on either end of the range.  [term TO ZZZZZ] for 
example.

What would you suggest as a way to denote an open end?

FYI - You could override getRangeQuery on a custom QueryParser subclass 
and implement this yourself.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8675-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:36:48 2004
Return-Path: <lucene-user-return-8675-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13435 invoked from network); 10 Jun 2004 15:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:36:48 -0000
Received: (qmail 16118 invoked by uid 500); 10 Jun 2004 15:36:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16014 invoked by uid 500); 10 Jun 2004 15:36:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15997 invoked by uid 99); 10 Jun 2004 15:36:48 -0000
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:36:48 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5AFaV15050846
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:36:32 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.0.6.0.20040610113706.01b85e30@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.0.6
Date: Thu, 10 Jun 2004 11:37:08 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Supported Languages
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_81264656==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_81264656==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

HI all,

I've noticed from the documentation that Russian and German languages are 
supported by Lucene, but does Lucene support the french language.

What is the definition of support in regards to language for Lucene?  Being 
able to index a document?  Or being able to search a document?  Or is it 
simply being able to sort results?

Thanks

At 04:39 PM 09/06/2004, you wrote:
>Erik Hatcher wrote:
>
>>On Jun 9, 2004, at 12:21 PM, David Spencer wrote:
>>
>>>>show us that most folks query with 1 - 3 words and do not use the any 
>>>>of the advanced features.
>>>
>>>
>>>
>>>But with automagic query expansion these things might be done behind the 
>>>scenes.  Nutch, for one, expands simple queries to check against 
>>>multiple fields, with different boosts, and even gives a bonus for terms 
>>>that are near each other.
>>
>>
>>Ah yes!  Don't worry, I hadn't forgotten about Nutch.  I'm tinkering with 
>>its query parsing and analysis as we speak in fact.  Very clever indeed.
>>
>>>>The elegance of the query syntax is quite important, and QueryParser 
>>>>has gotten a bit hairy.  I would enjoy discussions on creating new 
>>>>query parsers (one size doesn't fit all, I don't think) and what syntax
>>>
>>>
>>>
>>>I suggested in some email a while ago making the QueryParser extensible 
>>>at, runtime or startup time, so you can add other types if queries that 
>>>it doesn't support - so you have a way of registering these other query 
>>>types (SpanQuery, SubstringQuery etc) and then some syntax like 
>>>"span:foo" to invoke the query expander registered w/ "span" on "foo"...
>>
>>
>>I would be curious to see how an implementation of this played out.
>>For example, could I add my own syntax such that
>>
>>     "some phrase" <-3-> "another phrase"
>>
>>could be parsed into a SpanNearQuery of two SpanNearQuery's?
>>
>>I like the idea of a flexible run-time grammar, but it sounds too good to 
>>be true in a general purpose kinda way.
>
>My idea isn't perfect for humans, but at least lets you use queries not 
>hard coded.
>
>You have something like
>
>[1] how you register, could be in existing QueryParser
>
>void register( String name,  SubqueryParser qp)
>
>[2] what you register
>
>interface SubQueryParser
>{
>Query parse( String s); // parses string user enters, forms a Query...
>}
>
>[3] example of registration
>
>register( "substring", new SubstringQP());  // instead of prefix matches 
>allows term anywhere
>register( "span", new SurroundQP());
>register( "syn", new SynonymExpanderQP()); // expands a word to include 
>synonyms
>
>[4]  syntax
>
>normal query parser syntax but add something else like "NAME::TEXT" (note 
>2 colons) so
>
>this:          "black syn::bird"
>
>expands to calls in the new extensible query parser,  something like
>
>BooleanQuery bq = ...
>bq.add( new TermQuery( "contents", "black"))
>bq.add( SubstringParser.parse( "bird")) // really SynonymExpanderQP
>return bq
>
>behind the scenes SynonymExpanderQP expanded "bird" to the query 
>equivalent of, um, "bird avian^.5 wingedanimal^.5" or whatnot.
>
>[5] the point
>
>Be backward  compatible and "natural" for existing query syntax, but leave 
>a hook so that if you innovate and define new query expansion code there's 
>some hope of someone using it as they can in theory drop it in and use it 
>w/o coding. Right now if you create some code in this area I suspect 
>there's little chance people will try it out as there's too much friction 
>to try it out.
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>>
>>     Erik
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com





This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.













--=====================_81264656==.ALT--


From lucene-user-return-8676-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:36:58 2004
Return-Path: <lucene-user-return-8676-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13608 invoked from network); 10 Jun 2004 15:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:36:58 -0000
Received: (qmail 17015 invoked by uid 500); 10 Jun 2004 15:36:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16821 invoked by uid 500); 10 Jun 2004 15:36:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16727 invoked by uid 99); 10 Jun 2004 15:36:55 -0000
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:36:55 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5AFac85050877
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:36:38 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.0.6.0.20040610113712.0198dec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.0.6
Date: Thu, 10 Jun 2004 11:37:15 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Analyzers
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_81271546==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_81271546==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

I have recently downloaded the latest version of Lucene 1.3 and was 
wondering where some of the classes are.

For example all of the analyzers except for Standard are missing from the 
binary.  Are these documented, but incomplete classes which will be 
available later, although some articles that I have read seem to have 
tested these analyzers.

Thanks


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com





This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.













--=====================_81271546==.ALT--


From lucene-user-return-8677-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:44:16 2004
Return-Path: <lucene-user-return-8677-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17916 invoked from network); 10 Jun 2004 15:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:44:16 -0000
Received: (qmail 37589 invoked by uid 500); 10 Jun 2004 15:44:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37569 invoked by uid 500); 10 Jun 2004 15:44:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37556 invoked by uid 99); 10 Jun 2004 15:44:19 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 08:44:19 -0700
Message-ID: <20040610154400.87321.qmail@web12705.mail.yahoo.com>
Received: from [194.152.216.177] by web12705.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 08:44:00 PDT
Date: Thu, 10 Jun 2004 08:44:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Supported Languages
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.0.6.0.20040610113706.01b85e30@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Don,

--- Don Vaillancourt <donv@webimpact.com> wrote:
> HI all,
> 
> I've noticed from the documentation that Russian and German languages
> are 
> supported by Lucene, but does Lucene support the french language.

It does, but classes for supporting French are not included in the
Lucene core, which is what you downloaded, most likely.

> What is the definition of support in regards to language for Lucene? 
> Being 
> able to index a document?  Or being able to search a document?  Or is
> it simply being able to sort results?

Pretty much any text can be indexed with Lucene, but in order to index
a text properly, one has to tokenize the input properly (i.e. break
input into indexable units, like words).  In the process, the text has
to be encoded properly using Java's character encoding mechanisms. 
Optionally, one may want to have support for stemming (cutting (hah!)
tokens down to their roots), etc.

If you want to index and search French text, I suggest you look at the
Snowball Analyzers section of Lucene Sandbox.  You will have to check
that out of CVS yourself and build a Jar yourself though, as we
currently don't have a mechanism that does this in place.

I hope this helps.

Otis

=====
http://www.simpy.com/ - social bookmarking and personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8678-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:44:51 2004
Return-Path: <lucene-user-return-8678-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18168 invoked from network); 10 Jun 2004 15:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:44:51 -0000
Received: (qmail 39324 invoked by uid 500); 10 Jun 2004 15:44:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39298 invoked by uid 500); 10 Jun 2004 15:44:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39271 invoked by uid 99); 10 Jun 2004 15:44:54 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:44:54 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id AC85476975D
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:44:41 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <6.1.0.6.0.20040610113712.0198dec0@localhost>
References: <6.1.0.6.0.20040610113712.0198dec0@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <15B05702-BAF5-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzers
Date: Thu, 10 Jun 2004 11:44:40 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 11:37 AM, Don Vaillancourt wrote:
> I have recently downloaded the latest version of Lucene 1.3 and was 
> wondering where some of the classes are.
>
> For example all of the analyzers except for Standard are missing from 
> the binary.  Are these documented, but incomplete classes which will 
> be available later, although some articles that I have read seem to 
> have tested these analyzers.

No analyzers are missing.  I just downloaded 1.3 final:

% unzip -v lucene-1.3-final.jar | grep Analyzer
     3840  Defl:N     1376  64%  12-26-03 10:09  8827fec9  
org/apache/lucene/analysis/de/GermanAnalyzer.class
      712  Defl:N      376  47%  12-26-03 10:09  17fe9b2e  
org/apache/lucene/analysis/Analyzer.class
     5761  Defl:N     2366  59%  12-26-03 10:09  2fd8476f  
org/apache/lucene/analysis/ru/RussianAnalyzer.class
     1224  Defl:N      584  52%  12-26-03 10:09  5a11fe8d  
org/apache/lucene/analysis/PerFieldAnalyzerWrapper.class
      662  Defl:N      352  47%  12-26-03 10:09  cf7da5a4  
org/apache/lucene/analysis/SimpleAnalyzer.class
     1687  Defl:N      899  47%  12-26-03 10:09  b76b429d  
org/apache/lucene/analysis/StopAnalyzer.class
      675  Defl:N      349  48%  12-26-03 10:09  824530e8  
org/apache/lucene/analysis/WhitespaceAnalyzer.class
     1541  Defl:N      687  55%  12-26-03 10:09  14c63871  
org/apache/lucene/analysis/standard/StandardAnalyzer.class


How are you determining the classes are not there?

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8679-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:47:02 2004
Return-Path: <lucene-user-return-8679-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19389 invoked from network); 10 Jun 2004 15:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:47:01 -0000
Received: (qmail 45423 invoked by uid 500); 10 Jun 2004 15:46:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45249 invoked by uid 500); 10 Jun 2004 15:46:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45129 invoked by uid 99); 10 Jun 2004 15:46:47 -0000
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 10 Jun 2004 08:46:47 -0700
Message-ID: <20040610154632.17078.qmail@web12708.mail.yahoo.com>
Received: from [194.152.216.177] by web12708.mail.yahoo.com via HTTP; Thu, 10 Jun 2004 08:46:32 PDT
Date: Thu, 10 Jun 2004 08:46:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Analyzers
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.0.6.0.20040610113712.0198dec0@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don,

You should get Snowball Analyzers:
http://jakarta.apache.org/lucene/docs/lucene-sandbox/

Lucene core includes Russian and German Analyzers, but in the long run
they, too, will most likely get moved out of the core.

Otis

--- Don Vaillancourt <donv@webimpact.com> wrote:
> I have recently downloaded the latest version of Lucene 1.3 and was 
> wondering where some of the classes are.
> 
> For example all of the analyzers except for Standard are missing from
> the 
> binary.  Are these documented, but incomplete classes which will be 
> available later, although some articles that I have read seem to have
> tested these analyzers.


=====
http://www.simpy.com/ - social bookmarking and personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8680-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 15:48:52 2004
Return-Path: <lucene-user-return-8680-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21308 invoked from network); 10 Jun 2004 15:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 15:48:52 -0000
Received: (qmail 54895 invoked by uid 500); 10 Jun 2004 15:48:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54840 invoked by uid 500); 10 Jun 2004 15:48:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54826 invoked by uid 99); 10 Jun 2004 15:48:48 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 08:48:48 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 02D9076976D
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 11:48:34 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <6.1.0.6.0.20040610113706.01b85e30@localhost>
References: <6.1.0.6.0.20040610113706.01b85e30@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A15E6336-BAF5-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Supported Languages
Date: Thu, 10 Jun 2004 11:48:34 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 11:37 AM, Don Vaillancourt wrote:
> I've noticed from the documentation that Russian and German languages 
> are supported by Lucene, but does Lucene support the french language.

Look in Lucene's sandbox for analyzers for all sorts of languages.

> What is the definition of support in regards to language for Lucene?  
> Being able to index a document?  Or being able to search a document?  
> Or is it simply being able to sort results?

I suspect this is a highly subjective situation.  Indexing and 
searching of documents of any language is "supported" by the core 
Lucene API.  Analysis is where the differences come out.  Stemming, 
stop word removal, and dealing with normalizing diacritical characters 
seem to be the common issues needed for various languages.

The short answer is: if you can get text into Lucene, you can search on 
it.  How that text gets in is up to you.  The Analyzers in the sandbox 
may just help you on your way, but they are far from the only way to do 
it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8681-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 16:36:59 2004
Return-Path: <lucene-user-return-8681-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53116 invoked from network); 10 Jun 2004 16:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 16:36:58 -0000
Received: (qmail 11365 invoked by uid 500); 10 Jun 2004 16:37:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11320 invoked by uid 500); 10 Jun 2004 16:37:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11303 invoked by uid 99); 10 Jun 2004 16:36:59 -0000
Received: from [129.79.225.189] (HELO cricket.bio.indiana.edu) (129.79.225.189)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 09:36:59 -0700
Received: (from gilbertd@localhost)
	by cricket.bio.indiana.edu (8.11.7+Sun/8.11.6) id i5AGaiw01590
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 11:36:44 -0500 (EST)
Date: Thu, 10 Jun 2004 11:36:44 -0500 (EST)
From: Don Gilbert <gilbertd@bio.indiana.edu>
Message-Id: <200406101636.i5AGaiw01590@cricket.bio.indiana.edu>
To: lucene-user@jakarta.apache.org
Subject: Re: Open-ended range queries
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


SRS is a biology databank equivalent of Lucene 
and it uses this query syntax for range searches:
  [lib-field#100:200]  -- lower:upper bounded
  [lib-field#:200]  -- upper bounded only
  [lib-field#200:]  -- lower bounded only
('field#' denotes numeric range search,  'field:' denotes text searches)

A lucene range search syntax equivalent:
  field:[100 TO 200] -- lower and upper bounded
  field:[ TO 200] -- upper bounded only
  field:[100 TO ] -- lower bounded only

> QueryParser does not support open-ended range queries ..
> What would you suggest as a way to denote an open end?

- Don

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8682-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 16:49:09 2004
Return-Path: <lucene-user-return-8682-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64084 invoked from network); 10 Jun 2004 16:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 16:49:09 -0000
Received: (qmail 49944 invoked by uid 500); 10 Jun 2004 16:49:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49860 invoked by uid 500); 10 Jun 2004 16:49:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49735 invoked by uid 99); 10 Jun 2004 16:49:09 -0000
Received: from [128.143.135.119] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.119)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 09:49:09 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 63496769ABE
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 12:48:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406101636.i5AGaiw01590@cricket.bio.indiana.edu>
References: <200406101636.i5AGaiw01590@cricket.bio.indiana.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0D7D443E-BAFE-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 12:48:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 12:36 PM, Don Gilbert wrote:
> A lucene range search syntax equivalent:
>   field:[100 TO 200] -- lower and upper bounded
>   field:[ TO 200] -- upper bounded only
>   field:[100 TO ] -- lower bounded only

really?  I get hideous parse exceptions trying those last two:

org.apache.lucene.queryParser.ParseException: Encountered "]" at line  
1, column 8.
Was expecting one of:
     <RANGEIN_QUOTED> ...
     <RANGEIN_GOOP> ...

	at  
org.apache.lucene.queryParser.QueryParser.generateParseException(QueryPa 
rser.java:1045)
	at  
org.apache.lucene.queryParser.QueryParser.jj_consume_token(QueryParser.j 
ava:925)
	at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:692)
	at  
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:557)
	at  
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
	at  
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:108)
	at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:87)
	at  
lia.searching.QueryParserTest.testRangeQuery(QueryParserTest.java:68)

How did you get the open-ended syntax to work?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8683-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 16:53:41 2004
Return-Path: <lucene-user-return-8683-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66991 invoked from network); 10 Jun 2004 16:53:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 16:53:41 -0000
Received: (qmail 61986 invoked by uid 500); 10 Jun 2004 16:53:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61882 invoked by uid 500); 10 Jun 2004 16:53:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61839 invoked by uid 99); 10 Jun 2004 16:53:40 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 09:53:40 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i5AGrK16010833
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 18:53:20 +0200
Message-ID: <40C89209.9090303@isb-sib.ch>
Date: Thu, 10 Jun 2004 18:53:29 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Open-ended range queries
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com>
In-Reply-To: <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> What would you suggest as a way to denote an open end?

'test:[TO 100] test[200 TO]' would seem okay, though this would preclude 
the string 'TO' from being used to begin or end of a range - but who cares?


> FYI - You could override getRangeQuery on a custom QueryParser subclass 
> and implement this yourself.

The problem I see here is that the QueryParser will most likely complain 
already before calling getRangeQuery. Nevertheless useful for padding 
numbers, e.g. '1' to '00000001'.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8684-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 16:54:07 2004
Return-Path: <lucene-user-return-8684-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67192 invoked from network); 10 Jun 2004 16:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 16:54:07 -0000
Received: (qmail 64185 invoked by uid 500); 10 Jun 2004 16:54:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64157 invoked by uid 500); 10 Jun 2004 16:54:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64134 invoked by uid 99); 10 Jun 2004 16:54:08 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 09:54:08 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i5AGrm16010898
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 18:53:48 +0200
Message-ID: <40C89225.8020900@isb-sib.ch>
Date: Thu, 10 Jun 2004 18:53:57 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: CachedQuery
References: <40C85F6F.1080700@isb-sib.ch> <15E736FA-BAE5-11D8-9DDD-000393A564E6@ehatchersolutions.com>
In-Reply-To: <15E736FA-BAE5-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> How about the new FilteredQuery (added in the latest Lucene 1.4 release 
> - or earlier?).  I'm not sure it would suffice for that particular query 
> though.  It would, however, work well for:
> 
>     foo OR (bar:yes AND xyz)
> 
> as you could use a QueryFilter on bar:yes nested in a FilteredQuery with 
> a TermQuery for xyz, and then wrapped in a BooleanQuery as two 
> non-required clauses.  As for QueryParser... FilteredQuery is not 
> currently supported, although you could perhaps inject it by subclassing 
> (?).

Unfortunately it is also possible (and frequent) for the entire query to 
be nothing but

   bar:yes

in which case the FilteredQuery approach wouldn't work, as far as I can 
see. On the other hand, I just realize that caching query objects won't 
do any good either, as most work is done when the score method of the 
query object is called (wild speculation).

Perhaps what I need is some kind of rule-based query optimizer...

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8685-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 18:14:08 2004
Return-Path: <lucene-user-return-8685-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22472 invoked from network); 10 Jun 2004 18:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 18:14:07 -0000
Received: (qmail 25157 invoked by uid 500); 10 Jun 2004 18:14:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25102 invoked by uid 500); 10 Jun 2004 18:14:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25075 invoked by uid 99); 10 Jun 2004 18:14:12 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 11:14:12 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BYU3i-0003yn-00
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 14:13:51 -0400
Message-ID: <009401c44f16$afb5d260$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 14:13:52 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Actually, QueryParser does support open-ended ranges like :  [term TO null].
Doesn't work for the lower end of the range (though that's usually less of a
problem).

Regards,

Terry

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 10, 2004 11:32 AM
Subject: Re: Open-ended range queries


> On Jun 10, 2004, at 9:38 AM, Eric Jain wrote:
> > I see that with RangeQueries either the upperTerm or the lowerTerm are
> > optional - very useful. However, it seems the QueryParser doesn't
> > support this, or is there a syntax trick I have overlooked?
>
> Correct, QueryParser does not support open-ended range queries.  A
> hack, of course, is to use some text that comes ahead of the first or
> beyond the last term on either end of the range.  [term TO ZZZZZ] for
> example.
>
> What would you suggest as a way to denote an open end?
>
> FYI - You could override getRangeQuery on a custom QueryParser subclass
> and implement this yourself.
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8686-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 18:25:04 2004
Return-Path: <lucene-user-return-8686-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29778 invoked from network); 10 Jun 2004 18:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 18:25:04 -0000
Received: (qmail 58219 invoked by uid 500); 10 Jun 2004 18:25:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58193 invoked by uid 500); 10 Jun 2004 18:25:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58174 invoked by uid 99); 10 Jun 2004 18:25:12 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 11:25:12 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 1415776A034
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 14:24:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <009401c44f16$afb5d260$6501a8c0@POWERPACK>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 14:24:48 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 2:13 PM, Terry Steichen wrote:
> Actually, QueryParser does support open-ended ranges like :  [term TO 
> null].
> Doesn't work for the lower end of the range (though that's usually 
> less of a
> problem).

It supports "null"?  Are you sure?  If so, I'm very confused about it 
because I don't see where in the grammar it has any special handling 
like that.  Could you show an example that demonstrates this?

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8687-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 18:32:45 2004
Return-Path: <lucene-user-return-8687-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36026 invoked from network); 10 Jun 2004 18:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 18:32:45 -0000
Received: (qmail 81521 invoked by uid 500); 10 Jun 2004 18:32:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81489 invoked by uid 500); 10 Jun 2004 18:32:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81467 invoked by uid 99); 10 Jun 2004 18:32:54 -0000
Received: from [149.28.9.33] (HELO mail2.ridge.aps.org) (149.28.9.33)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 11:32:53 -0700
Received: from aps.org (ws-duval.aps.org [149.28.3.184])
	by mail2.ridge.aps.org (8.12.9/8.12.9) with ESMTP id i5AIWU4p000793
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 14:32:30 -0400 (EDT)
	(envelope-from duval@aps.org)
Message-ID: <40C8A93E.7060807@aps.org>
Date: Thu, 10 Jun 2004 14:32:30 -0400
From: Michael Duval <duval@aps.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i386; en-US; rv:1.4) Gecko/20030624 Netscape/7.1
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: phrase query not working in boolean clause
References: <40C739F9.2010806@aps.org> <4CB46AAD-BA3C-11D8-A592-000393A564E6@ehatchersolutions.com> <20040610020843.GA16685@incze.adsl.enternet.hu>
In-Reply-To: <20040610020843.GA16685@incze.adsl.enternet.hu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -4.901 () BAYES_00
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Incze,

Thanks for the heads up on this bug fix.   I downloaded and installed it and
wala! my Boolean, Conjunctive Phrase query works as expected.

I had also gotten the query to work previously by removing the
PorterStemFilter from my Analyzer.  Can't say why this worked but I'm glad
that I don't have to look any further, nor remove my stemmer.

Thanks again.

Mike Duval


Incze Lajos wrote:

>On Wed, Jun 09, 2004 at 01:41:55PM -0400, Erik Hatcher wrote:
>  
>
>>On Jun 9, 2004, at 12:25 PM, Michael Duval wrote:
>>    
>>
>>>When doing an exact phrase query on the title the expected results are 
>>>returned:
>>>
>>>  +(title:"Mass Asymmetry")
>>>     after tokenizing/filtering:  +title:"mass asymmetri"
>>>  returns 20 Hits
>>>  example hit: "Mass asymmetry, equation of state, and nuclear 
>>>multifragmentation"
>>>
>>>When attempting to confine the results to a particular journal the 
>>>query used is:
>>>  +(journal:L) +(title:"Mass Asymmetry")
>>>     after t/f :  +journal:L +title:"mass asymmetri"
>>>
>>>  returns 315 Hits!!
>>>  example hit 1:  Towards dynamical mass calculations
>>>  example hit 2:  Up down-asymmetric gravitational fields of spinning 
>>>masses
>>>
>>>It would seem that the search engine is treating
>>>  +title:"mass asymmetri"  as +title:mass asymmetri
>>>
>>>However, this behavior is only apparent on composite queries as shown 
>>>previously.
>>>
>>>For a sanity check I built the query using both the standard query 
>>>parser and
>>>the lucene search api (TermQuery, PhraseQuery, BooleanQuery).   The 
>>>results
>>>were the same both ways.
>>>
>>>Is this a well known limitation of the lucene search engine?  Is there 
>>>a different
>>>means of obtaining the desired results?
>>>      
>>>
>>Could you work up a JUnit test case example indexing a couple of 
>>documents like this into a RAMDirectory and a testXXX method that shows 
>>the failure?
>>
>>I cannot really make sense of what you have going on with the textual 
>>queries and obviously some stemming going on to.  Show us the code. :)
>>
>>	Erik
>>    
>>
>
>This was fixed cca a 2 months ago by Mr. Goller. You have to upgrade,
>if you can.
>
>incze
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8688-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 19:02:54 2004
Return-Path: <lucene-user-return-8688-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56008 invoked from network); 10 Jun 2004 19:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 19:02:54 -0000
Received: (qmail 64791 invoked by uid 500); 10 Jun 2004 19:03:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64765 invoked by uid 500); 10 Jun 2004 19:03:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64751 invoked by uid 99); 10 Jun 2004 19:03:03 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 12:03:03 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 1577476A24D
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 15:02:42 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <CFAF6F2213792F4FBA1E08561BB701D404735877@exchange.corp.widen.com>
References: <CFAF6F2213792F4FBA1E08561BB701D404735877@exchange.corp.widen.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C0177DAA-BB10-11D8-97B2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: queryparser: parsing boolean logic
Date: Thu, 10 Jun 2004 15:02:42 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 10:47 AM, Ben Pryor wrote:
> Here is a follow-up to a previous message I posted, dealing with 
> converting
> user-entered boolean logic into a Query. Why does the QueryParser 
> construct
> the same query for the following two strings?

It has no precedence rules.  AND and OR appear to be to connect two 
terms in some kind of relationship, but BooleanQuery clauses don't work 
that way - each clause has a required/prohibited flags.  A parser would 
need to be more clever to do what you expect here...

> "apple AND orange OR pear AND grape"

(apple AND orange) OR (pear AND grape)  does what you expect.

> I think a user's expectation would be that the first query matches 
> things
> containing apple and orange, or containing pear and grape. And that the
> second query would only match things containing all four items. 
> However, the
> same query is constructed both times (the constructed query requires 
> all
> four).

I think we are running in circles with QueryParser more often than not. 
  What we really need to admit is that no single expression syntax is 
going to make everyone happy and that each application really deserves 
its own custom one.  Many thanks to the creator and maintainers of 
QueryParser, though, it is pretty decent for general purpose use.

If it's any consolation, though, I do agree with your issue here and 
think that the precedence rules should work like mathematics naturally 
does with AND and OR operators.  Changing it presents a backwards 
compatibility issue, though (which is of no concern to me personally).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8689-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 19:12:48 2004
Return-Path: <lucene-user-return-8689-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61249 invoked from network); 10 Jun 2004 19:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 19:12:48 -0000
Received: (qmail 1051 invoked by uid 500); 10 Jun 2004 19:12:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1017 invoked by uid 500); 10 Jun 2004 19:12:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1003 invoked by uid 99); 10 Jun 2004 19:12:55 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 12:12:55 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id B860576A2FD
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 15:12:34 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406091705.i59H5v126250@cricket.bio.indiana.edu>
References: <200406091705.i59H5v126250@cricket.bio.indiana.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <20EC875F-BB12-11D8-97B2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Another way to handle large numeric range queries
Date: Thu, 10 Jun 2004 15:12:34 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 9, 2004, at 1:05 PM, Don Gilbert wrote:
>> I'm particularly interested in the XPath stuff I saw in LGQueryParser.
>
>    * xpathFieldParse
>    'xpath' parser: param allfields[], with query or field[] possibly
>     having wild-card notation:   *.start  annotation.*.text
>     allowing '/' and '.' field separator
>
> This is an *unfinished* attempt to support xpath style queries with
> wild-cards or parts when you have indexed XML data, such as
>
>   query: /annotation/*/text:term
>
> I had to put this aside when I saw the problem of pulling the xpath
> fields from a query string would take a fair amount of thought and 
> code.

Keep us posted if/when you return to this.  I would love to see XPath 
query capability on "hierarchical" content indexed in Lucene.  Jakarta 
Slide, for example, is starting to build in Lucene indexing capability 
- although I don't think they are doing anything with XPath query 
expressions yet.

Anyone doing anything similar?  Implementation ideas?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8690-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 19:47:42 2004
Return-Path: <lucene-user-return-8690-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90158 invoked from network); 10 Jun 2004 19:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 19:47:42 -0000
Received: (qmail 94346 invoked by uid 500); 10 Jun 2004 19:47:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94293 invoked by uid 500); 10 Jun 2004 19:47:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94163 invoked by uid 99); 10 Jun 2004 19:47:44 -0000
Received: from [63.240.76.165] (HELO sccimhc91.asp.att.net) (63.240.76.165)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 12:47:44 -0700
Received: from [10.1.132.45] (unknown[208.0.121.20])
          by sccimhc91.asp.att.net (sccimhc91) with SMTP
          id <20040610194720i9100hkhije>
          (Authid: sganyo@insightbb.com);
          Thu, 10 Jun 2004 19:47:20 +0000
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-14--932026091; protocol="application/pkcs7-signature"
Message-Id: <FC015AA3-BB16-11D8-909A-000A95D01A94@ganyo.com>
From: Scott ganyo <scott@ganyo.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 14:47:19 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-14--932026091
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

At one point it definitely supported null for either term.  I think 
that has been removed/forgotten in the later revisions of the 
QueryParser...

Scott

On Jun 10, 2004, at 1:24 PM, Erik Hatcher wrote:

> On Jun 10, 2004, at 2:13 PM, Terry Steichen wrote:
>> Actually, QueryParser does support open-ended ranges like :  [term TO 
>> null].
>> Doesn't work for the lower end of the range (though that's usually 
>> less of a
>> problem).
>
> It supports "null"?  Are you sure?  If so, I'm very confused about it 
> because I don't see where in the grammar it has any special handling 
> like that.  Could you show an example that demonstrates this?
>
> 	Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

--Apple-Mail-14--932026091
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGEjCCAssw
ggI0oAMCAQICAwtKHTANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDMxMjA4MTk0NTI5WhcNMDQxMjA3MTk0NTI5WjBBMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMR4wHAYJKoZIhvcNAQkBFg9zY290dEBnYW55by5jb20w
ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC2ptQeyZPoLu2i4pPIHtrUiJ05HhAcXGyf
qMsrhx45ToVW4qrKmBNBfARFOe+PWiYUun8U7wKi3GmVWfxvQ7yqeiUu6DnLWMVGmFgx8xZQiIG2
6aa9to5xGL/SOTo7ET2+cSx7zX7CKiFSMALKrVzCXiAunGFp6ONkpqOCMj3Mk0U8QxFIkN3yuTO+
f7a9VH0tM6SPjyOWnR6SMbtU6WBlfO4JWCKnE2u1zzh6vOiYfjiKRpWYkaZu9BCYHAYHNwAHosT5
JaaY/+hV7QSlxHERz08kQv9V3K6PRIr6Ey68BeZnQbZp6E3ua9DWmlZL9gnbRPDob0kMbNiBJTkW
Zo9fAgMBAAGjLDAqMBoGA1UdEQQTMBGBD3Njb3R0QGdhbnlvLmNvbTAMBgNVHRMBAf8EAjAAMA0G
CSqGSIb3DQEBBAUAA4GBAFEM8YLGdg6q71DscLXqUrklI8I3OQ3KpkWMrPHiAnMH3ZG82xyGMe/v
/pRCT60gaC9xLoRi8AmMeUB8ykcVsgGi5YfrO2k4LbFR52tYk9fg0OU7VtpGZW0ehJuiuPrIupX8
R58ex+L0qZcGQ7c/f1ZyGZiaDNV/iQneGskM8p8wMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0B
AQUFADCB0TELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2Fw
ZSBUb3duMRowGAYDVQQKExFUaGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlv
biBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENB
MSswKQYJKoZIhvcNAQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAw
MDAwMFoXDTEzMDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25z
dWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1
aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoT
zyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GU
MIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3
dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQi
MCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQ
g+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsA
xRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXe
JLHTHUb/XV9lTzGCAucwggLjAgEBMGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBD
b25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJ
c3N1aW5nIENBAgMLSh0wCQYFKw4DAhoFAKCCAVMwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAc
BgkqhkiG9w0BCQUxDxcNMDQwNjEwMTk0NzIwWjAjBgkqhkiG9w0BCQQxFgQUELsoUPdrvzhBwZ+F
/GbTMOiW3zsweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3Rl
IENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWls
IElzc3VpbmcgQ0ECAwtKHTB6BgsqhkiG9w0BCRACCzFroGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMLSh0wDQYJKoZIhvcNAQEBBQAEggEAslQoPc1ckloPug31
wYmoT4pUcLfNRm73L/SvoIulqg++D5vSS88Jsyw68b/kZn/sTKc8hrWmxHQJnP0K0+5rkV3dcGE2
74wz14tq+zXXvzHFBOwy9P57J2BrFa2W64ptPK0t2RxqxGnS10hQScWlCdnUbdWnBSh+WHiikpGa
0nmkZq66XFrFNwk0LybqF+UaVBbgSpX1YWtrCap35CfQIVi4w/mVyyCK8NCThXYGLMtC9QB64PtQ
rS9R18PQElQOO2Aq5/KQUa0XQ7GGYPkW8Trybqo3cToP/ZdN5c8hFaef/R/aV0AcFg7rRWf3b0bK
v9BP/pM+BbfAh5tG6eMXJQAAAAAAAA==

--Apple-Mail-14--932026091--


From lucene-user-return-8691-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 20:07:42 2004
Return-Path: <lucene-user-return-8691-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 998 invoked from network); 10 Jun 2004 20:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 20:07:41 -0000
Received: (qmail 54464 invoked by uid 500); 10 Jun 2004 20:07:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54442 invoked by uid 500); 10 Jun 2004 20:07:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54415 invoked by uid 99); 10 Jun 2004 20:07:43 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 13:07:43 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BYVpX-0001K0-00
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 16:07:19 -0400
Message-ID: <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 16:07:20 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well, I'm using 1.4 RC3 and the "null" range upper limit works just fine for
searches in two of my fields; one is in the form of a cannonical date (eg,
20040610) and the other is in the form of a padded word count (e.g., 01500
for 1500).  The syntax would be pub_date:[20040501 TO null] (dates later
than April 30, 2004) and s_words:[01000 TO null] (articles with 1000 or more
words).

Regards,

Terry

PS: This use of "null" has worked this way since at least 1.2.  As I recall,
way back when, "null" also worked as the first term limit (but no longer
does).

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 10, 2004 2:24 PM
Subject: Re: Open-ended range queries


> On Jun 10, 2004, at 2:13 PM, Terry Steichen wrote:
> > Actually, QueryParser does support open-ended ranges like :  [term TO
> > null].
> > Doesn't work for the lower end of the range (though that's usually
> > less of a
> > problem).
>
> It supports "null"?  Are you sure?  If so, I'm very confused about it
> because I don't see where in the grammar it has any special handling
> like that.  Could you show an example that demonstrates this?
>
> Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8692-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 20:26:25 2004
Return-Path: <lucene-user-return-8692-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13098 invoked from network); 10 Jun 2004 20:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 20:26:25 -0000
Received: (qmail 14496 invoked by uid 500); 10 Jun 2004 20:26:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14473 invoked by uid 500); 10 Jun 2004 20:26:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14460 invoked by uid 99); 10 Jun 2004 20:26:33 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 13:26:33 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 73CF677F43B
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 16:26:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 16:26:05 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 10, 2004, at 4:07 PM, Terry Steichen wrote:

> Well, I'm using 1.4 RC3 and the "null" range upper limit works just 
> fine for
> searches in two of my fields; one is in the form of a cannonical date 
> (eg,
> 20040610) and the other is in the form of a padded word count (e.g., 
> 01500
> for 1500).  The syntax would be pub_date:[20040501 TO null] (dates 
> later
> than April 30, 2004) and s_words:[01000 TO null] (articles with 1000 
> or more
> words).

Ah....

It "works" for you because you have numeric values and lexically "null" 
is greater than any of them.  It is still using it as a lexical term 
value, and not truly making the end open-ended.

This is why "null" doesn't work at the beginning for you either.  It's 
just being treated as text, just like your numbers are.

> PS: This use of "null" has worked this way since at least 1.2.  As I 
> recall,
> way back when, "null" also worked as the first term limit (but no 
> longer
> does).

If so, then something serious broke.  I've not the time to check the 
cvs logs on this, but I cannot imagine that we removed something like 
this.  If anyone cares to dig up the diff where we removed/broke this, 
I'd be gracious.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8693-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 10 20:55:25 2004
Return-Path: <lucene-user-return-8693-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28984 invoked from network); 10 Jun 2004 20:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Jun 2004 20:55:25 -0000
Received: (qmail 95805 invoked by uid 500); 10 Jun 2004 20:55:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95704 invoked by uid 500); 10 Jun 2004 20:55:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95658 invoked by uid 99); 10 Jun 2004 20:55:10 -0000
Received: from [63.240.76.165] (HELO sccimhc91.asp.att.net) (63.240.76.165)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 13:55:10 -0700
Received: from [10.1.132.45] (unknown[208.0.121.20])
          by sccimhc91.asp.att.net (sccimhc91) with SMTP
          id <20040610205444i9100hkef6e>
          (Authid: sganyo@insightbb.com);
          Thu, 10 Jun 2004 20:54:44 +0000
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-16--927982192; protocol="application/pkcs7-signature"
Message-Id: <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com>
From: Scott ganyo <scott@ganyo.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 15:54:43 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-16--927982192
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

It looks to me like Revision 1.18 broke it.

On Jun 10, 2004, at 3:26 PM, Erik Hatcher wrote:

>
> On Jun 10, 2004, at 4:07 PM, Terry Steichen wrote:
>
>> Well, I'm using 1.4 RC3 and the "null" range upper limit works just 
>> fine for
>> searches in two of my fields; one is in the form of a cannonical date 
>> (eg,
>> 20040610) and the other is in the form of a padded word count (e.g., 
>> 01500
>> for 1500).  The syntax would be pub_date:[20040501 TO null] (dates 
>> later
>> than April 30, 2004) and s_words:[01000 TO null] (articles with 1000 
>> or more
>> words).
>
> Ah....
>
> It "works" for you because you have numeric values and lexically 
> "null" is greater than any of them.  It is still using it as a lexical 
> term value, and not truly making the end open-ended.
>
> This is why "null" doesn't work at the beginning for you either.  It's 
> just being treated as text, just like your numbers are.
>
>> PS: This use of "null" has worked this way since at least 1.2.  As I 
>> recall,
>> way back when, "null" also worked as the first term limit (but no 
>> longer
>> does).
>
> If so, then something serious broke.  I've not the time to check the 
> cvs logs on this, but I cannot imagine that we removed something like 
> this.  If anyone cares to dig up the diff where we removed/broke this, 
> I'd be gracious.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

--Apple-Mail-16--927982192
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGEjCCAssw
ggI0oAMCAQICAwtKHTANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDMxMjA4MTk0NTI5WhcNMDQxMjA3MTk0NTI5WjBBMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMR4wHAYJKoZIhvcNAQkBFg9zY290dEBnYW55by5jb20w
ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC2ptQeyZPoLu2i4pPIHtrUiJ05HhAcXGyf
qMsrhx45ToVW4qrKmBNBfARFOe+PWiYUun8U7wKi3GmVWfxvQ7yqeiUu6DnLWMVGmFgx8xZQiIG2
6aa9to5xGL/SOTo7ET2+cSx7zX7CKiFSMALKrVzCXiAunGFp6ONkpqOCMj3Mk0U8QxFIkN3yuTO+
f7a9VH0tM6SPjyOWnR6SMbtU6WBlfO4JWCKnE2u1zzh6vOiYfjiKRpWYkaZu9BCYHAYHNwAHosT5
JaaY/+hV7QSlxHERz08kQv9V3K6PRIr6Ey68BeZnQbZp6E3ua9DWmlZL9gnbRPDob0kMbNiBJTkW
Zo9fAgMBAAGjLDAqMBoGA1UdEQQTMBGBD3Njb3R0QGdhbnlvLmNvbTAMBgNVHRMBAf8EAjAAMA0G
CSqGSIb3DQEBBAUAA4GBAFEM8YLGdg6q71DscLXqUrklI8I3OQ3KpkWMrPHiAnMH3ZG82xyGMe/v
/pRCT60gaC9xLoRi8AmMeUB8ykcVsgGi5YfrO2k4LbFR52tYk9fg0OU7VtpGZW0ehJuiuPrIupX8
R58ex+L0qZcGQ7c/f1ZyGZiaDNV/iQneGskM8p8wMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0B
AQUFADCB0TELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2Fw
ZSBUb3duMRowGAYDVQQKExFUaGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlv
biBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENB
MSswKQYJKoZIhvcNAQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAw
MDAwMFoXDTEzMDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25z
dWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1
aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoT
zyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GU
MIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3
dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQi
MCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQ
g+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsA
xRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXe
JLHTHUb/XV9lTzGCAucwggLjAgEBMGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBD
b25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJ
c3N1aW5nIENBAgMLSh0wCQYFKw4DAhoFAKCCAVMwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAc
BgkqhkiG9w0BCQUxDxcNMDQwNjEwMjA1NDQ0WjAjBgkqhkiG9w0BCQQxFgQUXNxcQcJXCjqvVaiQ
sx1jBXczu6oweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3Rl
IENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWls
IElzc3VpbmcgQ0ECAwtKHTB6BgsqhkiG9w0BCRACCzFroGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMLSh0wDQYJKoZIhvcNAQEBBQAEggEAE0wh23OSf4wKvEqQ
5FSviHAyuOWiw4+13ytOmocs2A0RidNTy/cm8SLQoIlAMRn4ESmJvCGxFGDJnTalg6iYFNWe9dg6
LA7TIOnsvsh+wYNGEVmrYgGaHPmcAVR0xO0PLKUmfBe2zwZ2/F1lLCcnMpUrMGthPKHEwm027KNT
RfGbNU4luN/zbsNWVwp7AJNXYnI56zejN6GvIlznZ/NBohtVYmbLLks5Bu20JW3j3wkjhI96RzqU
Snr417kDYYWkWkaQ+VW/bZDyyutW8LbnN3efmh5++JjLX7BYOTf+d0ZU0QxakVRFsG9jW4Py30Ep
TJ887ifqu1pbyQEsolNsJgAAAAAAAA==

--Apple-Mail-16--927982192--


From lucene-user-return-8694-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 00:10:09 2004
Return-Path: <lucene-user-return-8694-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16744 invoked from network); 11 Jun 2004 00:10:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 00:10:09 -0000
Received: (qmail 19129 invoked by uid 500); 11 Jun 2004 00:10:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19009 invoked by uid 500); 11 Jun 2004 00:10:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18809 invoked by uid 99); 11 Jun 2004 00:10:22 -0000
Received: from [65.174.157.4] (HELO balasmtpout.primavera.com) (65.174.157.4)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 17:10:22 -0700
Subject: RE: Wildcards and complete words
Date: Thu, 10 Jun 2004 17:10:26 -0700
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Cc: 
From: MMcGowan@primavera.com
X-Mailer: Microsoft Outlook v 10.00.2627, MSOC v 1.00.2411.00
Message-ID: <OF0AFE1C63.47987BCF-ON07256EB0.00006B6C@primavera.com>
X-MIMETrack: Serialize by Router on BalaSMTPOut/Primavera(Release 6.5|September 26, 2003) at
 06/10/2004 08:09:53 PM,
	Serialize complete at 06/10/2004 08:09:53 PM
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.132
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Otis,

I saw this FAQ :
   http://www.jguru.com/faq/view.jsp?EID=3D538312
Is it possible to turn on stemming for wildcard searches. In my example
below, if the document contains "create" then I want the query "create*"
to return this document. So, in my case it is better to have the stemmed
query  "creat*" which returns the document rather than the unstemmed
query "create*" which does not return the document.

Regards,
Michael

-----Original Message-----
From: otis_gospodnetic@yahoo.com [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, June 09, 2004 4:48 PM
To: lucene-user@jakarta.apache.org
Subject: Re: Wildcards and complete words

I believe I covered this in a Lucene FAQ entry at jGuru.

Otis

--- MMcGowan@primavera.com wrote:
> Hi,
> =20
> I noticed that if I append a * to the words, create, created,
> creating,
> creates, etc. then the search does not return the expected document.
> But
> if I use creat* then the search does return the expected document.=20
> =20
> I would like to be able to use the complete words and append a
> wildcard
> to the end. Any help would be greatly appreciated. Thanks!!!
> =20
> Regards,
> Michael
> =20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8695-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 00:15:38 2004
Return-Path: <lucene-user-return-8695-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18712 invoked from network); 11 Jun 2004 00:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 00:15:38 -0000
Received: (qmail 27300 invoked by uid 500); 11 Jun 2004 00:15:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27123 invoked by uid 500); 11 Jun 2004 00:15:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27109 invoked by uid 99); 11 Jun 2004 00:15:55 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 17:15:55 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 569A477F700
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 20:15:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com> <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 20:15:21 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 4:54 PM, Scott ganyo wrote:
> It looks to me like Revision 1.18 broke it.

It seems this could be it:

revision 1.18
date: 2002/06/25 00:05:31;  author: briangoetz;  state: Exp;  lines:  
+62 -33
Support for new range query syntax.  The delimiter is " TO ", but is  
optional
for backward compatibility with previous syntax.  If the range arguments
match the format supported by  
DateFormat.getDateInstance(DateFormat.SHORT),
then they will be converted into the appropriate date strings a la  
DateField.

Added Field.Keyword "constructor" for Date-valued arguments.

Optimized DateField.timeToString function.


But geez.... June 2002.... and no one has complained since?

Given that this is so outdated, I'm not sure what the right course of  
action is.  There are lots more Lucene users now than there were then.   
Would adding NULL back be what folks want?  What about simply an  
asterisk to denote open ended-ness?  [* TO term] or [term TO *]

For completeness, here is the diff:

% cvs diff -u -r 1.17 -r 1.18 QueryParser.jj
Index: QueryParser.jj
===================================================================
RCS file:  
/home/cvs/jakarta-lucene/src/java/org/apache/lucene/queryParser/ 
QueryParser.jj,v
retrieving revision 1.17
retrieving revision 1.18
diff -u -r1.17 -r1.18
--- QueryParser.jj      20 May 2002 15:45:43 -0000      1.17
+++ QueryParser.jj      25 Jun 2002 00:05:31 -0000      1.18
@@ -65,8 +65,11 @@

  import java.util.Vector;
  import java.io.*;
+import java.text.*;
+import java.util.*;
  import org.apache.lucene.index.Term;
  import org.apache.lucene.analysis.*;
+import org.apache.lucene.document.*;
  import org.apache.lucene.search.*;

  /**
@@ -218,35 +221,30 @@

    private Query getRangeQuery(String field,
                                Analyzer analyzer,
-                              String queryText,
+                              String part1,
+                              String part2,
                                boolean inclusive)
    {
-    // Use the analyzer to get all the tokens.  There should be 1 or 2.
-    TokenStream source = analyzer.tokenStream(field,
-                                              new  
StringReader(queryText));
-    Term[] terms = new Term[2];
-    org.apache.lucene.analysis.Token t;
+    boolean isDate = false, isNumber = false;

-    for (int i = 0; i < 2; i++)
-    {
-      try
-      {
-        t = source.next();
-      }
-      catch (IOException e)
-      {
-        t = null;
-      }
-      if (t != null)
-      {
-        String text = t.termText();
-        if (!text.equalsIgnoreCase("NULL"))
-        {
-          terms[i] = new Term(field, text);
-        }
-      }
+    try {
+      DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT);
+      df.setLenient(true);
+      Date d1 = df.parse(part1);
+      Date d2 = df.parse(part2);
+      part1 = DateField.dateToString(d1);
+      part2 = DateField.dateToString(d2);
+      isDate = true;
      }
-    return new RangeQuery(terms[0], terms[1], inclusive);
+    catch (Exception e) { }
+
+    if (!isDate) {
+      // @@@ Add number support
+    }
+
+    return new RangeQuery(new Term(field, part1),
+                          new Term(field, part2),
+                          inclusive);
    }

    public static void main(String[] args) throws Exception {
@@ -282,7 +280,7 @@
  | <#_WHITESPACE: ( " " | "\t" ) >
  }

-<DEFAULT> SKIP : {
+<DEFAULT, RangeIn, RangeEx> SKIP : {
    <<_WHITESPACE>>
  }

@@ -303,14 +301,28 @@
  | <PREFIXTERM:  <_TERM_START_CHAR> (<_TERM_CHAR>)* "*" >
  | <WILDTERM:  <_TERM_START_CHAR>
                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
-| <RANGEIN:   "[" ( ~[ "]" ] )+ "]">
-| <RANGEEX:   "{" ( ~[ "}" ] )+ "}">
+| <RANGEIN_START: "[" > : RangeIn
+| <RANGEEX_START: "{" > : RangeEx
  }

  <Boost> TOKEN : {
  <NUMBER:    (<_NUM_CHAR>)+ ( "." (<_NUM_CHAR>)+ )? > : DEFAULT
  }

+<RangeIn> TOKEN : {
+<RANGEIN_TO: "TO">
+| <RANGEIN_END: "]"> : DEFAULT
+| <RANGEIN_QUOTED: "\"" (~["\""])+ "\"">
+| <RANGEIN_GOOP: (~[ " ", "]" ])+ >
+}
+
+<RangeEx> TOKEN : {
+<RANGEEX_TO: "TO">
+| <RANGEEX_END: "}"> : DEFAULT
+| <RANGEEX_QUOTED: "\"" (~["\""])+ "\"">
+| <RANGEEX_GOOP: (~[ " ", "}" ])+ >
+}
+
  // *   Query  ::= ( Clause )*
  // *   Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )

@@ -387,7 +399,7 @@


  Query Term(String field) : {
-  Token term, boost=null, slop=null;
+  Token term, boost=null, slop=null, goop1, goop2;
    boolean prefix = false;
    boolean wildcard = false;
    boolean fuzzy = false;
@@ -415,12 +427,29 @@
         else
           q = getFieldQuery(field, analyzer, term.image);
       }
-     | ( term=<RANGEIN> { rangein=true; } | term=<RANGEEX> )
+     | ( <RANGEIN_START> ( goop1=<RANGEIN_GOOP>|goop1=<RANGEIN_QUOTED>  
)
+         [ <RANGEIN_TO> ] (  
goop2=<RANGEIN_GOOP>|goop2=<RANGEIN_QUOTED> )
+         <RANGEIN_END> )
+       [ <CARAT> boost=<NUMBER> ]
+        {
+          if (goop1.kind == RANGEIN_QUOTED)
+            goop1.image = goop1.image.substring(1,  
goop1.image.length()-1);
+          if (goop2.kind == RANGEIN_QUOTED)
+            goop2.image = goop2.image.substring(1,  
goop2.image.length()-1);
+
+          q = getRangeQuery(field, analyzer, goop1.image, goop2.image,  
true);
+        }
+     | ( <RANGEEX_START> ( goop1=<RANGEEX_GOOP>|goop1=<RANGEEX_QUOTED>  
)
+         [ <RANGEEX_TO> ] (  
goop2=<RANGEEX_GOOP>|goop2=<RANGEEX_QUOTED> )
+         <RANGEEX_END> )
         [ <CARAT> boost=<NUMBER> ]
          {
-          q = getRangeQuery(field, analyzer,
-                            term.image.substring(1,  
term.image.length()-1),
-                            rangein);
+          if (goop1.kind == RANGEEX_QUOTED)
+            goop1.image = goop1.image.substring(1,  
goop1.image.length()-1);
+          if (goop2.kind == RANGEEX_QUOTED)
+            goop2.image = goop2.image.substring(1,  
goop2.image.length()-1);
+
+          q = getRangeQuery(field, analyzer, goop1.image, goop2.image,  
false);
          }
       | term=<QUOTED>
         [ slop=<SLOP> ]


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8696-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 00:26:35 2004
Return-Path: <lucene-user-return-8696-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23078 invoked from network); 11 Jun 2004 00:26:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 00:26:35 -0000
Received: (qmail 48920 invoked by uid 500); 11 Jun 2004 00:26:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48887 invoked by uid 500); 11 Jun 2004 00:26:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48873 invoked by uid 99); 11 Jun 2004 00:26:50 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 17:26:50 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 2360F77F7E9
	for <lucene-user@jakarta.apache.org>; Thu, 10 Jun 2004 20:26:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OF0AFE1C63.47987BCF-ON07256EB0.00006B6C@primavera.com>
References: <OF0AFE1C63.47987BCF-ON07256EB0.00006B6C@primavera.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F4FB4ABA-BB3D-11D8-8184-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcards and complete words
Date: Thu, 10 Jun 2004 20:26:18 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can go to town by subclassing QueryParser and overriding 
getWildcardQuery - so sure, this is possible.  But it really is a 
custom feature that shouldn't belong in the core QueryParser, I'd 
argue.

	Erik


On Jun 10, 2004, at 8:10 PM, MMcGowan@primavera.com wrote:

> Hey Otis,
>
> I saw this FAQ :
>    http://www.jguru.com/faq/view.jsp?EID=538312
> Is it possible to turn on stemming for wildcard searches. In my example
> below, if the document contains "create" then I want the query 
> "create*"
> to return this document. So, in my case it is better to have the 
> stemmed
> query  "creat*" which returns the document rather than the unstemmed
> query "create*" which does not return the document.
>
> Regards,
> Michael
>
> -----Original Message-----
> From: otis_gospodnetic@yahoo.com [mailto:otis_gospodnetic@yahoo.com]
> Sent: Wednesday, June 09, 2004 4:48 PM
> To: lucene-user@jakarta.apache.org
> Subject: Re: Wildcards and complete words
>
> I believe I covered this in a Lucene FAQ entry at jGuru.
>
> Otis
>
> --- MMcGowan@primavera.com wrote:
>> Hi,
>>
>> I noticed that if I append a * to the words, create, created,
>> creating,
>> creates, etc. then the search does not return the expected document.
>> But
>> if I use creat* then the search does return the expected document.
>>
>> I would like to be able to use the complete words and append a
>> wildcard
>> to the end. Any help would be greatly appreciated. Thanks!!!
>>
>> Regards,
>> Michael
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8697-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 00:58:14 2004
Return-Path: <lucene-user-return-8697-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37032 invoked from network); 11 Jun 2004 00:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 00:58:14 -0000
Received: (qmail 11606 invoked by uid 500); 11 Jun 2004 00:58:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11580 invoked by uid 500); 11 Jun 2004 00:58:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11565 invoked by uid 99); 11 Jun 2004 00:58:29 -0000
Received: from [63.240.76.166] (HELO sccimhc92.asp.att.net) (63.240.76.166)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 17:58:29 -0700
Received: from [192.168.0.3] (12-202-96-44.client.insightbb.com[12.202.96.44])
          by sccimhc92.asp.att.net (sccimhc92) with SMTP
          id <20040611005756i92000h8bee>
          (Authid: sganyo@insightbb.com);
          Fri, 11 Jun 2004 00:57:57 +0000
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com> <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com> <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-17--913391197; protocol="application/pkcs7-signature"
Message-Id: <5F447D06-BB42-11D8-909A-000A95D01A94@ganyo.com>
From: Scott ganyo <scott@ganyo.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 19:57:54 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-17--913391197
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Well, I do like the *, but apparently there are some people that are  
using this with the null...

Scott

On Jun 10, 2004, at 7:15 PM, Erik Hatcher wrote:

> On Jun 10, 2004, at 4:54 PM, Scott ganyo wrote:
>> It looks to me like Revision 1.18 broke it.
>
> It seems this could be it:
>
> revision 1.18
> date: 2002/06/25 00:05:31;  author: briangoetz;  state: Exp;  lines:  
> +62 -33
> Support for new range query syntax.  The delimiter is " TO ", but is  
> optional
> for backward compatibility with previous syntax.  If the range  
> arguments
> match the format supported by  
> DateFormat.getDateInstance(DateFormat.SHORT),
> then they will be converted into the appropriate date strings a la  
> DateField.
>
> Added Field.Keyword "constructor" for Date-valued arguments.
>
> Optimized DateField.timeToString function.
>
>
> But geez.... June 2002.... and no one has complained since?
>
> Given that this is so outdated, I'm not sure what the right course of  
> action is.  There are lots more Lucene users now than there were then.  
>  Would adding NULL back be what folks want?  What about simply an  
> asterisk to denote open ended-ness?  [* TO term] or [term TO *]
>
> For completeness, here is the diff:
>
> % cvs diff -u -r 1.17 -r 1.18 QueryParser.jj
> Index: QueryParser.jj
> ===================================================================
> RCS file:  
> /home/cvs/jakarta-lucene/src/java/org/apache/lucene/queryParser/ 
> QueryParser.jj,v
> retrieving revision 1.17
> retrieving revision 1.18
> diff -u -r1.17 -r1.18
> --- QueryParser.jj      20 May 2002 15:45:43 -0000      1.17
> +++ QueryParser.jj      25 Jun 2002 00:05:31 -0000      1.18
> @@ -65,8 +65,11 @@
>
>  import java.util.Vector;
>  import java.io.*;
> +import java.text.*;
> +import java.util.*;
>  import org.apache.lucene.index.Term;
>  import org.apache.lucene.analysis.*;
> +import org.apache.lucene.document.*;
>  import org.apache.lucene.search.*;
>
>  /**
> @@ -218,35 +221,30 @@
>
>    private Query getRangeQuery(String field,
>                                Analyzer analyzer,
> -                              String queryText,
> +                              String part1,
> +                              String part2,
>                                boolean inclusive)
>    {
> -    // Use the analyzer to get all the tokens.  There should be 1 or  
> 2.
> -    TokenStream source = analyzer.tokenStream(field,
> -                                              new  
> StringReader(queryText));
> -    Term[] terms = new Term[2];
> -    org.apache.lucene.analysis.Token t;
> +    boolean isDate = false, isNumber = false;
>
> -    for (int i = 0; i < 2; i++)
> -    {
> -      try
> -      {
> -        t = source.next();
> -      }
> -      catch (IOException e)
> -      {
> -        t = null;
> -      }
> -      if (t != null)
> -      {
> -        String text = t.termText();
> -        if (!text.equalsIgnoreCase("NULL"))
> -        {
> -          terms[i] = new Term(field, text);
> -        }
> -      }
> +    try {
> +      DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT);
> +      df.setLenient(true);
> +      Date d1 = df.parse(part1);
> +      Date d2 = df.parse(part2);
> +      part1 = DateField.dateToString(d1);
> +      part2 = DateField.dateToString(d2);
> +      isDate = true;
>      }
> -    return new RangeQuery(terms[0], terms[1], inclusive);
> +    catch (Exception e) { }
> +
> +    if (!isDate) {
> +      // @@@ Add number support
> +    }
> +
> +    return new RangeQuery(new Term(field, part1),
> +                          new Term(field, part2),
> +                          inclusive);
>    }
>
>    public static void main(String[] args) throws Exception {
> @@ -282,7 +280,7 @@
>  | <#_WHITESPACE: ( " " | "\t" ) >
>  }
>
> -<DEFAULT> SKIP : {
> +<DEFAULT, RangeIn, RangeEx> SKIP : {
>    <<_WHITESPACE>>
>  }
>
> @@ -303,14 +301,28 @@
>  | <PREFIXTERM:  <_TERM_START_CHAR> (<_TERM_CHAR>)* "*" >
>  | <WILDTERM:  <_TERM_START_CHAR>
>                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
> -| <RANGEIN:   "[" ( ~[ "]" ] )+ "]">
> -| <RANGEEX:   "{" ( ~[ "}" ] )+ "}">
> +| <RANGEIN_START: "[" > : RangeIn
> +| <RANGEEX_START: "{" > : RangeEx
>  }
>
>  <Boost> TOKEN : {
>  <NUMBER:    (<_NUM_CHAR>)+ ( "." (<_NUM_CHAR>)+ )? > : DEFAULT
>  }
>
> +<RangeIn> TOKEN : {
> +<RANGEIN_TO: "TO">
> +| <RANGEIN_END: "]"> : DEFAULT
> +| <RANGEIN_QUOTED: "\"" (~["\""])+ "\"">
> +| <RANGEIN_GOOP: (~[ " ", "]" ])+ >
> +}
> +
> +<RangeEx> TOKEN : {
> +<RANGEEX_TO: "TO">
> +| <RANGEEX_END: "}"> : DEFAULT
> +| <RANGEEX_QUOTED: "\"" (~["\""])+ "\"">
> +| <RANGEEX_GOOP: (~[ " ", "}" ])+ >
> +}
> +
>  // *   Query  ::= ( Clause )*
>  // *   Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
>
> @@ -387,7 +399,7 @@
>
>
>  Query Term(String field) : {
> -  Token term, boost=null, slop=null;
> +  Token term, boost=null, slop=null, goop1, goop2;
>    boolean prefix = false;
>    boolean wildcard = false;
>    boolean fuzzy = false;
> @@ -415,12 +427,29 @@
>         else
>           q = getFieldQuery(field, analyzer, term.image);
>       }
> -     | ( term=<RANGEIN> { rangein=true; } | term=<RANGEEX> )
> +     | ( <RANGEIN_START> (  
> goop1=<RANGEIN_GOOP>|goop1=<RANGEIN_QUOTED> )
> +         [ <RANGEIN_TO> ] (  
> goop2=<RANGEIN_GOOP>|goop2=<RANGEIN_QUOTED> )
> +         <RANGEIN_END> )
> +       [ <CARAT> boost=<NUMBER> ]
> +        {
> +          if (goop1.kind == RANGEIN_QUOTED)
> +            goop1.image = goop1.image.substring(1,  
> goop1.image.length()-1);
> +          if (goop2.kind == RANGEIN_QUOTED)
> +            goop2.image = goop2.image.substring(1,  
> goop2.image.length()-1);
> +
> +          q = getRangeQuery(field, analyzer, goop1.image,  
> goop2.image, true);
> +        }
> +     | ( <RANGEEX_START> (  
> goop1=<RANGEEX_GOOP>|goop1=<RANGEEX_QUOTED> )
> +         [ <RANGEEX_TO> ] (  
> goop2=<RANGEEX_GOOP>|goop2=<RANGEEX_QUOTED> )
> +         <RANGEEX_END> )
>         [ <CARAT> boost=<NUMBER> ]
>          {
> -          q = getRangeQuery(field, analyzer,
> -                            term.image.substring(1,  
> term.image.length()-1),
> -                            rangein);
> +          if (goop1.kind == RANGEEX_QUOTED)
> +            goop1.image = goop1.image.substring(1,  
> goop1.image.length()-1);
> +          if (goop2.kind == RANGEEX_QUOTED)
> +            goop2.image = goop2.image.substring(1,  
> goop2.image.length()-1);
> +
> +          q = getRangeQuery(field, analyzer, goop1.image,  
> goop2.image, false);
>          }
>       | term=<QUOTED>
>         [ slop=<SLOP> ]
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

--Apple-Mail-17--913391197
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGEjCCAssw
ggI0oAMCAQICAwtKHTANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDMxMjA4MTk0NTI5WhcNMDQxMjA3MTk0NTI5WjBBMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMR4wHAYJKoZIhvcNAQkBFg9zY290dEBnYW55by5jb20w
ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC2ptQeyZPoLu2i4pPIHtrUiJ05HhAcXGyf
qMsrhx45ToVW4qrKmBNBfARFOe+PWiYUun8U7wKi3GmVWfxvQ7yqeiUu6DnLWMVGmFgx8xZQiIG2
6aa9to5xGL/SOTo7ET2+cSx7zX7CKiFSMALKrVzCXiAunGFp6ONkpqOCMj3Mk0U8QxFIkN3yuTO+
f7a9VH0tM6SPjyOWnR6SMbtU6WBlfO4JWCKnE2u1zzh6vOiYfjiKRpWYkaZu9BCYHAYHNwAHosT5
JaaY/+hV7QSlxHERz08kQv9V3K6PRIr6Ey68BeZnQbZp6E3ua9DWmlZL9gnbRPDob0kMbNiBJTkW
Zo9fAgMBAAGjLDAqMBoGA1UdEQQTMBGBD3Njb3R0QGdhbnlvLmNvbTAMBgNVHRMBAf8EAjAAMA0G
CSqGSIb3DQEBBAUAA4GBAFEM8YLGdg6q71DscLXqUrklI8I3OQ3KpkWMrPHiAnMH3ZG82xyGMe/v
/pRCT60gaC9xLoRi8AmMeUB8ykcVsgGi5YfrO2k4LbFR52tYk9fg0OU7VtpGZW0ehJuiuPrIupX8
R58ex+L0qZcGQ7c/f1ZyGZiaDNV/iQneGskM8p8wMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0B
AQUFADCB0TELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2Fw
ZSBUb3duMRowGAYDVQQKExFUaGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlv
biBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENB
MSswKQYJKoZIhvcNAQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAw
MDAwMFoXDTEzMDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25z
dWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1
aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoT
zyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GU
MIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3
dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQi
MCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQ
g+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsA
xRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXe
JLHTHUb/XV9lTzGCAucwggLjAgEBMGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBD
b25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJ
c3N1aW5nIENBAgMLSh0wCQYFKw4DAhoFAKCCAVMwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAc
BgkqhkiG9w0BCQUxDxcNMDQwNjExMDA1NzU1WjAjBgkqhkiG9w0BCQQxFgQUB7WIAIHwPHnM+P7q
llpkjvrffk4weAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3Rl
IENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWls
IElzc3VpbmcgQ0ECAwtKHTB6BgsqhkiG9w0BCRACCzFroGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMLSh0wDQYJKoZIhvcNAQEBBQAEggEAO9IosBJPM0G71x7q
JiIXs3YhESpfRG1xDr+yr4G417KOFcJsj9wP2t9Lu3nlbdt+C+7k8gJH9kYc5Ns/4wqwB2WNJ0Bp
g3Rn/a/ly7vTvXyWP7NjWzHlhFuYE/C+YjPm0QLwwW12iDxsXr52hEY15GkpRF/EFBFTdozj34oE
s25LDJJO3SHF0QNm9au/ZjAaX0GxyBqXFf5x3ElypQh8hWzFA6WxncJXJDH8qKUDBn9HdECjst9r
atg0yJFLARgj7Fxi4NAttR504YeZPKcG6eQpcDUwBHMx7kyrHWTOEYDj+HsfFdKebaJVHzYvfMKD
HipfaG9Gke6LxXtVYKbQrgAAAAAAAA==

--Apple-Mail-17--913391197--


From lucene-user-return-8698-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 02:37:35 2004
Return-Path: <lucene-user-return-8698-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88981 invoked from network); 11 Jun 2004 02:37:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 02:37:35 -0000
Received: (qmail 61488 invoked by uid 500); 11 Jun 2004 02:37:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61012 invoked by uid 500); 11 Jun 2004 02:37:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60998 invoked by uid 99); 11 Jun 2004 02:37:51 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 19:37:50 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BYbut-0000ba-00
	for lucene-user@jakarta.apache.org; Thu, 10 Jun 2004 22:37:15 -0400
Message-ID: <014901c44f5d$03300cd0$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com> <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com> <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com> <5F447D06-BB42-11D8-909A-000A95D01A94@ganyo.com>
Subject: Re: Open-ended range queries
Date: Thu, 10 Jun 2004 22:37:17 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Speaking for myself, only a small number of my code modules currently treat
"null" as the open-ended range query term parameter.  If the syntax change
from 'null' --> '*' was deemed otherwise desirable and the syntax transition
made very clearly, I could personally adjust to it without too much
difficulty.

I agree that the proposed '*' syntax does seem more logical.  If a change to
that syntax were made such that the old "null" syntax for the upper bound
was retained for backward compatibility, such a transition would be
completely painless.

Regards,

Terry

----- Original Message ----- 
From: "Scott ganyo" <scott@ganyo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 10, 2004 8:57 PM
Subject: Re: Open-ended range queries


> Well, I do like the *, but apparently there are some people that are
> using this with the null...
>
> Scott
>
> On Jun 10, 2004, at 7:15 PM, Erik Hatcher wrote:
>
> > On Jun 10, 2004, at 4:54 PM, Scott ganyo wrote:
> >> It looks to me like Revision 1.18 broke it.
> >
> > It seems this could be it:
> >
> > revision 1.18
> > date: 2002/06/25 00:05:31;  author: briangoetz;  state: Exp;  lines:
> > +62 -33
> > Support for new range query syntax.  The delimiter is " TO ", but is
> > optional
> > for backward compatibility with previous syntax.  If the range
> > arguments
> > match the format supported by
> > DateFormat.getDateInstance(DateFormat.SHORT),
> > then they will be converted into the appropriate date strings a la
> > DateField.
> >
> > Added Field.Keyword "constructor" for Date-valued arguments.
> >
> > Optimized DateField.timeToString function.
> >
> >
> > But geez.... June 2002.... and no one has complained since?
> >
> > Given that this is so outdated, I'm not sure what the right course of
> > action is.  There are lots more Lucene users now than there were then.
> >  Would adding NULL back be what folks want?  What about simply an
> > asterisk to denote open ended-ness?  [* TO term] or [term TO *]
> >
> > For completeness, here is the diff:
> >
> > % cvs diff -u -r 1.17 -r 1.18 QueryParser.jj
> > Index: QueryParser.jj
> > ===================================================================
> > RCS file:
> > /home/cvs/jakarta-lucene/src/java/org/apache/lucene/queryParser/
> > QueryParser.jj,v
> > retrieving revision 1.17
> > retrieving revision 1.18
> > diff -u -r1.17 -r1.18
> > --- QueryParser.jj      20 May 2002 15:45:43 -0000      1.17
> > +++ QueryParser.jj      25 Jun 2002 00:05:31 -0000      1.18
> > @@ -65,8 +65,11 @@
> >
> >  import java.util.Vector;
> >  import java.io.*;
> > +import java.text.*;
> > +import java.util.*;
> >  import org.apache.lucene.index.Term;
> >  import org.apache.lucene.analysis.*;
> > +import org.apache.lucene.document.*;
> >  import org.apache.lucene.search.*;
> >
> >  /**
> > @@ -218,35 +221,30 @@
> >
> >    private Query getRangeQuery(String field,
> >                                Analyzer analyzer,
> > -                              String queryText,
> > +                              String part1,
> > +                              String part2,
> >                                boolean inclusive)
> >    {
> > -    // Use the analyzer to get all the tokens.  There should be 1 or
> > 2.
> > -    TokenStream source = analyzer.tokenStream(field,
> > -                                              new
> > StringReader(queryText));
> > -    Term[] terms = new Term[2];
> > -    org.apache.lucene.analysis.Token t;
> > +    boolean isDate = false, isNumber = false;
> >
> > -    for (int i = 0; i < 2; i++)
> > -    {
> > -      try
> > -      {
> > -        t = source.next();
> > -      }
> > -      catch (IOException e)
> > -      {
> > -        t = null;
> > -      }
> > -      if (t != null)
> > -      {
> > -        String text = t.termText();
> > -        if (!text.equalsIgnoreCase("NULL"))
> > -        {
> > -          terms[i] = new Term(field, text);
> > -        }
> > -      }
> > +    try {
> > +      DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT);
> > +      df.setLenient(true);
> > +      Date d1 = df.parse(part1);
> > +      Date d2 = df.parse(part2);
> > +      part1 = DateField.dateToString(d1);
> > +      part2 = DateField.dateToString(d2);
> > +      isDate = true;
> >      }
> > -    return new RangeQuery(terms[0], terms[1], inclusive);
> > +    catch (Exception e) { }
> > +
> > +    if (!isDate) {
> > +      // @@@ Add number support
> > +    }
> > +
> > +    return new RangeQuery(new Term(field, part1),
> > +                          new Term(field, part2),
> > +                          inclusive);
> >    }
> >
> >    public static void main(String[] args) throws Exception {
> > @@ -282,7 +280,7 @@
> >  | <#_WHITESPACE: ( " " | "\t" ) >
> >  }
> >
> > -<DEFAULT> SKIP : {
> > +<DEFAULT, RangeIn, RangeEx> SKIP : {
> >    <<_WHITESPACE>>
> >  }
> >
> > @@ -303,14 +301,28 @@
> >  | <PREFIXTERM:  <_TERM_START_CHAR> (<_TERM_CHAR>)* "*" >
> >  | <WILDTERM:  <_TERM_START_CHAR>
> >                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
> > -| <RANGEIN:   "[" ( ~[ "]" ] )+ "]">
> > -| <RANGEEX:   "{" ( ~[ "}" ] )+ "}">
> > +| <RANGEIN_START: "[" > : RangeIn
> > +| <RANGEEX_START: "{" > : RangeEx
> >  }
> >
> >  <Boost> TOKEN : {
> >  <NUMBER:    (<_NUM_CHAR>)+ ( "." (<_NUM_CHAR>)+ )? > : DEFAULT
> >  }
> >
> > +<RangeIn> TOKEN : {
> > +<RANGEIN_TO: "TO">
> > +| <RANGEIN_END: "]"> : DEFAULT
> > +| <RANGEIN_QUOTED: "\"" (~["\""])+ "\"">
> > +| <RANGEIN_GOOP: (~[ " ", "]" ])+ >
> > +}
> > +
> > +<RangeEx> TOKEN : {
> > +<RANGEEX_TO: "TO">
> > +| <RANGEEX_END: "}"> : DEFAULT
> > +| <RANGEEX_QUOTED: "\"" (~["\""])+ "\"">
> > +| <RANGEEX_GOOP: (~[ " ", "}" ])+ >
> > +}
> > +
> >  // *   Query  ::= ( Clause )*
> >  // *   Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
> >
> > @@ -387,7 +399,7 @@
> >
> >
> >  Query Term(String field) : {
> > -  Token term, boost=null, slop=null;
> > +  Token term, boost=null, slop=null, goop1, goop2;
> >    boolean prefix = false;
> >    boolean wildcard = false;
> >    boolean fuzzy = false;
> > @@ -415,12 +427,29 @@
> >         else
> >           q = getFieldQuery(field, analyzer, term.image);
> >       }
> > -     | ( term=<RANGEIN> { rangein=true; } | term=<RANGEEX> )
> > +     | ( <RANGEIN_START> (
> > goop1=<RANGEIN_GOOP>|goop1=<RANGEIN_QUOTED> )
> > +         [ <RANGEIN_TO> ] (
> > goop2=<RANGEIN_GOOP>|goop2=<RANGEIN_QUOTED> )
> > +         <RANGEIN_END> )
> > +       [ <CARAT> boost=<NUMBER> ]
> > +        {
> > +          if (goop1.kind == RANGEIN_QUOTED)
> > +            goop1.image = goop1.image.substring(1,
> > goop1.image.length()-1);
> > +          if (goop2.kind == RANGEIN_QUOTED)
> > +            goop2.image = goop2.image.substring(1,
> > goop2.image.length()-1);
> > +
> > +          q = getRangeQuery(field, analyzer, goop1.image,
> > goop2.image, true);
> > +        }
> > +     | ( <RANGEEX_START> (
> > goop1=<RANGEEX_GOOP>|goop1=<RANGEEX_QUOTED> )
> > +         [ <RANGEEX_TO> ] (
> > goop2=<RANGEEX_GOOP>|goop2=<RANGEEX_QUOTED> )
> > +         <RANGEEX_END> )
> >         [ <CARAT> boost=<NUMBER> ]
> >          {
> > -          q = getRangeQuery(field, analyzer,
> > -                            term.image.substring(1,
> > term.image.length()-1),
> > -                            rangein);
> > +          if (goop1.kind == RANGEEX_QUOTED)
> > +            goop1.image = goop1.image.substring(1,
> > goop1.image.length()-1);
> > +          if (goop2.kind == RANGEEX_QUOTED)
> > +            goop2.image = goop2.image.substring(1,
> > goop2.image.length()-1);
> > +
> > +          q = getRangeQuery(field, analyzer, goop1.image,
> > goop2.image, false);
> >          }
> >       | term=<QUOTED>
> >         [ slop=<SLOP> ]
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8699-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 04:49:48 2004
Return-Path: <lucene-user-return-8699-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56333 invoked from network); 11 Jun 2004 04:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 04:49:48 -0000
Received: (qmail 80881 invoked by uid 500); 11 Jun 2004 04:50:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80753 invoked by uid 500); 11 Jun 2004 04:50:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80737 invoked by uid 99); 11 Jun 2004 04:50:04 -0000
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 21:50:03 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 15DAE837B6
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 08:49:28 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 35036526 for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 08:49:28 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: Analyzers
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Fri, 11 Jun 2004 08:49:28 +0400
Message-ID: <web-35036526@mail5.rambler.ru>
In-Reply-To: <20040610154632.17078.qmail@web12708.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Well. It would be even better if it is allowable existed any 
InterAnalyzer in which the national coding would enter and it could 
inherit properties core analyzers.

Regards,
Vladimir.

>Don,
>
>You should get Snowball Analyzers:
>http://jakarta.apache.org/lucene/docs/lucene-sandbox/
>
>Lucene core includes Russian and German Analyzers, but in the long 
>run
>they, too, will most likely get moved out of the core.
>
>Otis
>
>--- Don Vaillancourt <donv@webimpact.com> wrote:
>> I have recently downloaded the latest version of Lucene 1.3 and was 
>> wondering where some of the classes are.
>> 
>> For example all of the analyzers except for Standard are missing 
>>from
>> the 
>> binary.  Are these documented, but incomplete classes which will be 
>> available later, although some articles that I have read seem to 
>>have
>> tested these analyzers.
>
>
>=====
>http://www.simpy.com/ - social bookmarking and personal search engine
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8700-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 05:12:33 2004
Return-Path: <lucene-user-return-8700-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67924 invoked from network); 11 Jun 2004 05:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 05:12:33 -0000
Received: (qmail 15275 invoked by uid 500); 11 Jun 2004 05:12:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15210 invoked by uid 500); 11 Jun 2004 05:12:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15172 invoked by uid 99); 11 Jun 2004 05:12:48 -0000
Received: from [199.53.214.82] (HELO mail2.pershing.com) (199.53.214.82)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 10 Jun 2004 22:12:48 -0700
Received: from plzlmh02.pershing.com ([172.19.110.13])
          by mail2.pershing.com (Lotus Domino 5012HF56)
          with ESMTP id 2004061100554860:10244 ;
          Fri, 11 Jun 2004 00:55:48 -0400 
Subject: Shui Cheung Yip/JerseyCity/iNautix is out of the office.
From: syip@pershing.com
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF74EC9D08.B5466C1A-ON85256EB0.001C9334-85256EB0.001C9334@pershing.com>
Date: Fri, 11 Jun 2004 01:12:06 -0400
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on PLZLMH02/Pershing(Release 5.0.12  |February 13, 2003) at
 06/11/2004 01:12:08 AM,
	Itemize by SMTP Server on Pershing2/External(5012HF56 | June 24, 2003) at
 06/11/2004 12:55:48 AM,
	Serialize by Router on Pershing2/External(5012HF56 | June 24, 2003) at 06/11/2004
 12:55:55 AM,
	Serialize complete at 06/11/2004 12:55:55 AM
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I will be out of the office starting  06/11/2004 and will not return until
06/27/2004.

I will be out of the office starting 6/11/2004 and will not return until
6/28/2004.  I will respond to your message when I return.

Thank you.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8701-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 07:17:58 2004
Return-Path: <lucene-user-return-8701-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36343 invoked from network); 11 Jun 2004 07:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 07:17:58 -0000
Received: (qmail 50521 invoked by uid 500); 11 Jun 2004 07:18:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50464 invoked by uid 500); 11 Jun 2004 07:18:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50429 invoked by uid 99); 11 Jun 2004 07:18:10 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 00:18:10 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id B5E0877FC11
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 03:17:27 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <014901c44f5d$03300cd0$6501a8c0@POWERPACK>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com> <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com> <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com> <5F447D06-BB42-11D8-909A-000A95D01A94@ganyo.com> <014901c44f5d$03300cd0$6501a8c0@POWERPACK>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <648FAA05-BB77-11D8-8184-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Fri, 11 Jun 2004 03:17:27 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 10:37 PM, Terry Steichen wrote:
> Speaking for myself, only a small number of my code modules currently 
> treat
> "null" as the open-ended range query term parameter.  If the syntax 
> change
> from 'null' --> '*' was deemed otherwise desirable and the syntax 
> transition
> made very clearly, I could personally adjust to it without too much
> difficulty.

> I agree that the proposed '*' syntax does seem more logical.  If a 
> change to
> that syntax were made such that the old "null" syntax for the upper 
> bound
> was retained for backward compatibility, such a transition would be
> completely painless.

Just to clarify, since Terry's response implies this is not 
understood.... there is *nothing* special about "null" currently.  It 
is simply being treated as term text.  So adding special "*" handling 
would NOT change how "null" currently works.

In June of 2002 (!) "null" and "NULL" (and "nULL", "Null", etc) were 
removed as being special from what I see in the diff.

Furthermore, to achieve the proposed "*" handling, you can do this 
yourself now by subclassing QueryParser and overriding getRangeQuery:

   protected Query getRangeQuery(String field, Analyzer analyzer,
                                 String part1, String part2,
                                 boolean inclusive)
       throws ParseException {

       return new RangeQuery(
           "*".equals(part1) ? null : new Term("field", part1),
           "*".equals(part2) ? null : new Term("field", part2),
           inclusive);
   }

(a little more is needed if you want to keep the date range handling).

Note, you cannot do field:[* TO *] to make it wide-open - RangeQuery 
does not allow this.

My proposal is this (_after_ 1.4 goes final):

   - Add the above logic to QueryParser.

   - Modify RangeQuery.toString to output the "*" when the term is null, 
and also if the start term is "" (RangeQuery's constructor modifies the 
beginning term to "" if it is null).

If there are no objections to this plan, I'll add this as a Bugzilla 
issue as a reminder.  I don't want to touch 1.4's codebase - no point 
in adding a feature at this stage that can already be achieved with the 
simple code above.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8702-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 07:20:17 2004
Return-Path: <lucene-user-return-8702-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37827 invoked from network); 11 Jun 2004 07:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 07:20:16 -0000
Received: (qmail 56543 invoked by uid 500); 11 Jun 2004 07:20:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56354 invoked by uid 500); 11 Jun 2004 07:20:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56339 invoked by uid 99); 11 Jun 2004 07:20:35 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 00:20:35 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 174F177FC37
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 03:19:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <5F447D06-BB42-11D8-909A-000A95D01A94@ganyo.com>
References: <40C8645C.2070708@isb-sib.ch> <7462A841-BAF3-11D8-9DDD-000393A564E6@ehatchersolutions.com> <009401c44f16$afb5d260$6501a8c0@POWERPACK> <74DB322A-BB0B-11D8-97B2-000393A564E6@ehatchersolutions.com> <00e301c44f26$89b3a5a0$6501a8c0@POWERPACK> <66674895-BB1C-11D8-A769-000393A564E6@ehatchersolutions.com> <665B4F30-BB20-11D8-909A-000A95D01A94@ganyo.com> <6D8F3B8E-BB3C-11D8-8184-000393A564E6@ehatchersolutions.com> <5F447D06-BB42-11D8-909A-000A95D01A94@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BAC8C361-BB77-11D8-8184-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Open-ended range queries
Date: Fri, 11 Jun 2004 03:19:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 10, 2004, at 8:57 PM, Scott ganyo wrote:
> Well, I do like the *, but apparently there are some people that are 
> using this with the null...

See my other mail with clarification on this.  If anyone is using a 
earlier-than-mid-2002 version of Lucene, they have special NULL 
handling, otherwise there is nothing special about "null".

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8703-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 08:24:31 2004
Return-Path: <lucene-user-return-8703-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81865 invoked from network); 11 Jun 2004 08:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 08:24:31 -0000
Received: (qmail 94608 invoked by uid 500); 11 Jun 2004 08:24:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94531 invoked by uid 500); 11 Jun 2004 08:24:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94438 invoked by uid 99); 11 Jun 2004 08:24:49 -0000
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 01:24:49 -0700
Received: from [10.0.0.195] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i5B8Nm16017572
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 10:23:49 +0200
Message-ID: <40C96C20.8050501@isb-sib.ch>
Date: Fri, 11 Jun 2004 10:24:00 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: NullAnalyzer
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There doesn't seem to be an Analyzer that doesn't do anything included 
with Lucene, is there? This would seem useful to prevent tokenization of 
certain fields in queries, together with the PerFieldAnalyzerWrapper. 
But perhaps there is a better way to accomplish this?

   private static class NullAnalyzer
     extends Analyzer
   {
     public TokenStream tokenStream(String fieldName, Reader reader)
     {
       return new CharTokenizer(reader)
       {
         protected boolean isTokenChar(char c)
         {
           return true;
         }
       };
     }
   }

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8704-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 09:31:03 2004
Return-Path: <lucene-user-return-8704-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35640 invoked from network); 11 Jun 2004 09:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 09:31:03 -0000
Received: (qmail 65531 invoked by uid 500); 11 Jun 2004 09:31:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65442 invoked by uid 500); 11 Jun 2004 09:31:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65405 invoked by uid 99); 11 Jun 2004 09:31:19 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 02:31:19 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id C10DC192659
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 11:30:38 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : Analyzers
Date: Fri, 11 Jun 2004 11:30:27 +0200
Message-ID: <001101c44f96$be0d7c20$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <web-35036526@mail5.rambler.ru>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

> Well. It would be even better if it is allowable existed any
> InterAnalyzer in which the national coding would enter and it
> could
> inherit properties core analyzers.

A CustomAnalyzer in which Tokenizers, TokenFilters (StopFilters, =
StemFilters, etc.) could be dynamically set at runtime for creating a =
TokenStream would be nice as well. Has anyone done any research along =
these lines with respect to the Lucene API?

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8705-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 09:52:11 2004
Return-Path: <lucene-user-return-8705-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56130 invoked from network); 11 Jun 2004 09:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 09:52:11 -0000
Received: (qmail 14759 invoked by uid 500); 11 Jun 2004 09:52:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14679 invoked by uid 500); 11 Jun 2004 09:52:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14660 invoked by uid 99); 11 Jun 2004 09:52:30 -0000
Received: from [212.227.126.177] (HELO moutng.kundenserver.de) (212.227.126.177)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 02:52:30 -0700
Received: from [212.227.126.207] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1BYihR-0003dK-00
	for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 11:51:49 +0200
Received: from [212.42.228.228] (helo=[172.16.4.245])
	by mrelayng.kundenserver.de with asmtp (Exim 3.35 #1)
	id 1BYihR-0004G5-00
	for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 11:51:49 +0200
Mime-Version: 1.0 (Apple Message framework v618)
Content-Transfer-Encoding: 7bit
Message-Id: <F5F19232-BB8C-11D8-9792-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Stefan Groschupf <sg@media-style.com>
Subject: hit score in 1.3 vs 1.4
Date: Fri, 11 Jun 2004 11:51:50 +0200
X-Mailer: Apple Mail (2.618)
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:a4338c0162347fc953fb77dffeae5728
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm having a strange problem until upgrading lucene 1.3 to 1.4 rc4.
I'm using a third party component that include the old lucene 1.3 but i 
need to run the new 1.4 rc 4 in the same vm.
So i unpack the component jar, remove all lucene 1.3 classes and repack 
it again and just add the new lucene in the classpath.
So far everything running well, but the hits.score(i) method return for 
each hit 100 %. ;-o

Does someone has any idea where may be the problem can be?
Thanks for any hints,
Stefan


---------------------------------------------------------------
enterprise information technology consulting
open technology:   http://www.media-style.com
open source:           http://www.weta-group.net
open discussion:    http://www.text-mining.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8706-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 10:07:21 2004
Return-Path: <lucene-user-return-8706-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69568 invoked from network); 11 Jun 2004 10:07:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 10:07:20 -0000
Received: (qmail 56024 invoked by uid 500); 11 Jun 2004 10:07:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55950 invoked by uid 500); 11 Jun 2004 10:07:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55936 invoked by uid 99); 11 Jun 2004 10:07:40 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 03:07:40 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id D7203780287
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 06:06:58 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40C96C20.8050501@isb-sib.ch>
References: <40C96C20.8050501@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <10BC9FB6-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: NullAnalyzer
Date: Fri, 11 Jun 2004 06:06:54 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is a nice trick, and one I've created as an example in LIA, in 
fact.  There is one constraint with using CharTokenizer to do this - 
there is a max word length of 255.  This probably is not much of an 
issue in practice, but I wanted to point out that it is not a true 
"keyword analyzer" and does not prevent tokenization if the length is 
greater than 255.

	Erik


On Jun 11, 2004, at 4:24 AM, Eric Jain wrote:

> There doesn't seem to be an Analyzer that doesn't do anything included 
> with Lucene, is there? This would seem useful to prevent tokenization 
> of certain fields in queries, together with the 
> PerFieldAnalyzerWrapper. But perhaps there is a better way to 
> accomplish this?
>
>   private static class NullAnalyzer
>     extends Analyzer
>   {
>     public TokenStream tokenStream(String fieldName, Reader reader)
>     {
>       return new CharTokenizer(reader)
>       {
>         protected boolean isTokenChar(char c)
>         {
>           return true;
>         }
>       };
>     }
>   }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8707-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 10:10:48 2004
Return-Path: <lucene-user-return-8707-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72484 invoked from network); 11 Jun 2004 10:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 10:10:47 -0000
Received: (qmail 66523 invoked by uid 500); 11 Jun 2004 10:11:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66440 invoked by uid 500); 11 Jun 2004 10:11:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66390 invoked by uid 99); 11 Jun 2004 10:11:04 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 03:11:04 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 7CCD078029A
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 06:10:22 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <001101c44f96$be0d7c20$ac7ba8c0@diderot>
References: <001101c44f96$be0d7c20$ac7ba8c0@diderot>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8C42AF7F-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RE : Analyzers
Date: Fri, 11 Jun 2004 06:10:21 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 11, 2004, at 5:30 AM, Rasik Pandey wrote:
> A CustomAnalyzer in which Tokenizers, TokenFilters (StopFilters, 
> StemFilters, etc.) could be dynamically set at runtime for creating a 
> TokenStream would be nice as well. Has anyone done any research along 
> these lines with respect to the Lucene API?

You mean like this?

	http://issues.apache.org/bugzilla/show_bug.cgi?id=28182

Nice idea, but there has been no response to Doug's questions on it.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8708-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 10:12:42 2004
Return-Path: <lucene-user-return-8708-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74227 invoked from network); 11 Jun 2004 10:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 10:12:42 -0000
Received: (qmail 70277 invoked by uid 500); 11 Jun 2004 10:12:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70178 invoked by uid 500); 11 Jun 2004 10:12:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70104 invoked by uid 99); 11 Jun 2004 10:12:50 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 03:12:50 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id D0E0E7802AF
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 06:12:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <F5F19232-BB8C-11D8-9792-000A95CDCC98@media-style.com>
References: <F5F19232-BB8C-11D8-9792-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <CA76118E-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: hit score in 1.3 vs 1.4
Date: Fri, 11 Jun 2004 06:12:05 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 11, 2004, at 5:51 AM, Stefan Groschupf wrote:
> Hi,
>
> I'm having a strange problem until upgrading lucene 1.3 to 1.4 rc4.
> I'm using a third party component that include the old lucene 1.3 but 
> i need to run the new 1.4 rc 4 in the same vm.
> So i unpack the component jar, remove all lucene 1.3 classes and 
> repack it again and just add the new lucene in the classpath.
> So far everything running well, but the hits.score(i) method return 
> for each hit 100 %. ;-o
>
> Does someone has any idea where may be the problem can be?

I'm not sure you'll have much luck with two versions playing well in 
the sam VM together.  There are static variables used as well as JVM 
system properties that factor into configuration settings.  I don't 
have any specific recommendations, just a gut feeling that the issues 
are not going to be pleasant.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8709-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 10:15:57 2004
Return-Path: <lucene-user-return-8709-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76574 invoked from network); 11 Jun 2004 10:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 10:15:56 -0000
Received: (qmail 77176 invoked by uid 500); 11 Jun 2004 10:16:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77137 invoked by uid 500); 11 Jun 2004 10:16:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77112 invoked by uid 99); 11 Jun 2004 10:16:14 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 03:16:14 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 82B857802D6
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 06:15:32 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <CA76118E-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
References: <F5F19232-BB8C-11D8-9792-000A95CDCC98@media-style.com> <CA76118E-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4516C37B-BB90-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: hit score in 1.3 vs 1.4
Date: Fri, 11 Jun 2004 06:15:31 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 11, 2004, at 6:12 AM, Erik Hatcher wrote:
> On Jun 11, 2004, at 5:51 AM, Stefan Groschupf wrote:
>> Hi,
>>
>> I'm having a strange problem until upgrading lucene 1.3 to 1.4 rc4.
>> I'm using a third party component that include the old lucene 1.3 but 
>> i need to run the new 1.4 rc 4 in the same vm.
>> So i unpack the component jar, remove all lucene 1.3 classes and 
>> repack it again and just add the new lucene in the classpath.
>> So far everything running well, but the hits.score(i) method return 
>> for each hit 100 %. ;-o
>>
>> Does someone has any idea where may be the problem can be?
>
> I'm not sure you'll have much luck with two versions playing well in 
> the sam VM together.  There are static variables used as well as JVM 
> system properties that factor into configuration settings.  I don't 
> have any specific recommendations, just a gut feeling that the issues 
> are not going to be pleasant.

Actually I think I misspoke.... you are not trying to run both versions 
in the same VM, but simply replace the old 1.3 version.  Maybe you 
should re-index?  There are factors computed at index time that may 
need to be re-done with the newer version of Lucene?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8710-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 10:32:49 2004
Return-Path: <lucene-user-return-8710-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94560 invoked from network); 11 Jun 2004 10:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 10:32:49 -0000
Received: (qmail 21285 invoked by uid 500); 11 Jun 2004 10:32:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21234 invoked by uid 500); 11 Jun 2004 10:32:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21220 invoked by uid 99); 11 Jun 2004 10:32:41 -0000
Received: from [207.69.200.148] (HELO granger.mail.mindspring.net) (207.69.200.148)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 03:32:41 -0700
Received: from h-66-167-144-60.mclnva23.dynamic.covad.net ([66.167.144.60] helo=POWERPACK)
	by granger.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1BYjKv-0000VD-00
	for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 06:32:37 -0400
Message-ID: <017e01c44f9f$6c855bd0$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40C96C20.8050501@isb-sib.ch>
Subject: Re: NullAnalyzer
Date: Fri, 11 Jun 2004 06:32:40 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

+1

----- Original Message ----- 
From: "Eric Jain" <Eric.Jain@isb-sib.ch>
To: "lucene-user" <lucene-user@jakarta.apache.org>
Sent: Friday, June 11, 2004 4:24 AM
Subject: NullAnalyzer


> There doesn't seem to be an Analyzer that doesn't do anything included 
> with Lucene, is there? This would seem useful to prevent tokenization of 
> certain fields in queries, together with the PerFieldAnalyzerWrapper. 
> But perhaps there is a better way to accomplish this?
> 
>    private static class NullAnalyzer
>      extends Analyzer
>    {
>      public TokenStream tokenStream(String fieldName, Reader reader)
>      {
>        return new CharTokenizer(reader)
>        {
>          protected boolean isTokenChar(char c)
>          {
>            return true;
>          }
>        };
>      }
>    }
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8711-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 11:58:08 2004
Return-Path: <lucene-user-return-8711-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81267 invoked from network); 11 Jun 2004 11:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 11:58:08 -0000
Received: (qmail 45015 invoked by uid 500); 11 Jun 2004 11:58:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44976 invoked by uid 500); 11 Jun 2004 11:58:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44934 invoked by uid 99); 11 Jun 2004 11:58:02 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 04:58:02 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5BBvvd25392
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 06:57:57 -0500
Received: from VERITAS3 [192.168.1.166] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 17:28:19 +0530
Message-ID: <00e701c44fab$aaf98e20$a601a8c0@vsnl.net.in>
From: "Sumit Mishra" <sumit@emacmillan.com>
To: <lucene-user@jakarta.apache.org>
Subject: date range query problem
Date: Fri, 11 Jun 2004 17:30:19 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00E4_01C44FD9.C497D980"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2462.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2462.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: sumit@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00E4_01C44FD9.C497D980
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Hi,
      My requirement to fetch the result with in the date range.
      I am filtering the query like to retrieve the date wichi fall =
between these two year..
     bqr.add(QueryParser.parse ("[" + 1978 + " TO " =
+2000+"]","fullhead",new StandardAnalyzer()),true,false);
    i search upon the tag with in <fullhead></fullhead>
     This query retrives the record between these two date range along =
with also select the date wich is of year 2001,2002 etcc.
     Could you please help me out what i am doing wrong?

   Here i am giving some sample data

 =20
<chron id=3D"t0104415" sorthead=3D"00008250" subject=3D"cine" =
area=3D"USA">

<fullhead>1990</fullhead>

<p>The gangster film <i>GoodFellas</i>, co&hyphen;written and directed =
by Martin Scorsese, is released in the USA. It stars Ray Liotta, Robert =
De Niro, Joe Pesci, Lorraine Bracco, and Paul Sorvino.</p>

</chron>

<chron id=3D"t0068037" sorthead=3D"00008630" subject=3D"trea" =
area=3D"USA, USSR">

<fullhead>31 July 1991</fullhead>

<p>The US president George Bush and the Soviet leader Mikhail Gorbachev =
sign the Strategic Arms Reduction Treaty (START) to reduce their =
arsenals of long&hyphen;range nuclear weapons by a third.</p>

</chron>

<chron id=3D"t0141562" sorthead=3D"00016450" subject=3D"stru" =
area=3D"UK">

<fullhead>1 January 2000</fullhead>

<p>The Millennium Dome in Greenwich, London, England, opens to the =
public, and is scheduled to remain open throughout 2000. Some 12,500 =
people visit it on the opening day.</p>

</chron>

<chron id=3D"t0141561" sorthead=3D"00016460" subject=3D"life">

<fullhead>1 January 2000</fullhead>

<p>The new millennium is celebrated across the world, with fireworks, =
street parties, ceremonies, and speeches. The millennium bug does not =
appear to make a large impact, and despite fears of acts of extremism =
and terrorism, the global celebration passes peacefully.</p>

</chron>


------=_NextPart_000_00E4_01C44FD9.C497D980--




From lucene-user-return-8712-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 12:39:24 2004
Return-Path: <lucene-user-return-8712-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19550 invoked from network); 11 Jun 2004 12:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 12:39:24 -0000
Received: (qmail 71664 invoked by uid 500); 11 Jun 2004 12:39:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71503 invoked by uid 500); 11 Jun 2004 12:39:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71488 invoked by uid 99); 11 Jun 2004 12:39:18 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 05:39:18 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 372827809E6
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 08:38:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <00e701c44fab$aaf98e20$a601a8c0@vsnl.net.in>
References: <00e701c44fab$aaf98e20$a601a8c0@vsnl.net.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <30C3D756-BBA4-11D8-A942-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: date range query problem
Date: Fri, 11 Jun 2004 08:38:07 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 11, 2004, at 8:00 AM, Sumit Mishra wrote:
> Hi,
>       My requirement to fetch the result with in the date range.
>       I am filtering the query like to retrieve the date wichi fall 
> between these two year..
>      bqr.add(QueryParser.parse ("[" + 1978 + " TO " 
> +2000+"]","fullhead",new StandardAnalyzer()),true,false);

Sorry for the short reply, but I'm leaving momentarily to go present 
Lucene (and Ant and Tapestry) at the Research Triangle Software 
Symposium.

Two things:

  - Don't build a QueryParser string in code - simply construct a 
RangeQuery directly.  This eliminates a lot of variables to the 
equation that may be getting in the way.

  - Know what terms are being emitted during analysis.  Try the utility 
pointed to here 
(http://wiki.apache.org/jakarta-lucene/AnalysisParalysis) with your 
data.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8713-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 13:03:58 2004
Return-Path: <lucene-user-return-8713-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42698 invoked from network); 11 Jun 2004 13:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 13:03:58 -0000
Received: (qmail 50813 invoked by uid 500); 11 Jun 2004 13:03:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50620 invoked by uid 500); 11 Jun 2004 13:03:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50575 invoked by uid 99); 11 Jun 2004 13:03:29 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 06:03:29 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id E63EF188249
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 15:03:20 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : RE : Analyzers
Date: Fri, 11 Jun 2004 15:03:09 +0200
Message-ID: <001d01c44fb4$74bdf450$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <8C42AF7F-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

> On Jun 11, 2004, at 5:30 AM, Rasik Pandey wrote:
> > A CustomAnalyzer in which Tokenizers, TokenFilters
> (StopFilters,
> > StemFilters, etc.) could be dynamically set at runtime for
> creating a
> > TokenStream would be nice as well. Has anyone done any
> research along
> > these lines with respect to the Lucene API?
>=20
> You mean like this?
>=20
> 	http://issues.apache.org/bugzilla/show_bug.cgi?id=3D28182
>=20
> Nice idea, but there has been no response to Doug's questions
> on it.

I should have checked Bugzilla before I started my research. Anyway, I =
basically discovered the same things about two weeks ago, but haven't =
had the opportunity to code those changes.=20

The lack of response to Doug's question could be partly due to the fact =
that all the files aren't attached properly. In response to Doug's =
question (without having the files to examine), it seems like, with the =
proposed Lucene API changes (setters) that Class.newInstance could be =
used to create new objects in an attempt to address the concurrency =
issues?

Regard,
RBP

P.S. -  My apologies for the EriC instead of EriK in previous exchanges.





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8714-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 14:00:54 2004
Return-Path: <lucene-user-return-8714-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17897 invoked from network); 11 Jun 2004 14:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 14:00:54 -0000
Received: (qmail 46074 invoked by uid 500); 11 Jun 2004 14:00:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46024 invoked by uid 500); 11 Jun 2004 14:00:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46009 invoked by uid 99); 11 Jun 2004 14:00:40 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 11 Jun 2004 07:00:40 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 11 Jun 2004 10:00:22 -0400
Message-Id: <s0c982b6.013@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Fri, 11 Jun 2004 10:00:04 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: RE : Analyzers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I thought I had responded...

The jist of it is it isn't thread safe yet.  Although I don't think it is =
too much of a leap to make it thread-safe.  I just haven't had time to do =
so.  It can be done through reflection or perhaps by requiring a "deep" =
copy/reset of filter states.

-Grant

>>> erik@ehatchersolutions.com 06/11/04 06:10AM >>>
On Jun 11, 2004, at 5:30 AM, Rasik Pandey wrote:
> A CustomAnalyzer in which Tokenizers, TokenFilters (StopFilters,=20
> StemFilters, etc.) could be dynamically set at runtime for creating a=20
> TokenStream would be nice as well. Has anyone done any research along=20
> these lines with respect to the Lucene API?

You mean like this?

	http://issues.apache.org/bugzilla/show_bug.cgi?id=3D28182=20

Nice idea, but there has been no response to Doug's questions on it.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8715-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 14:56:37 2004
Return-Path: <lucene-user-return-8715-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82352 invoked from network); 11 Jun 2004 14:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 14:56:37 -0000
Received: (qmail 43403 invoked by uid 500); 11 Jun 2004 14:56:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43365 invoked by uid 500); 11 Jun 2004 14:56:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43345 invoked by uid 99); 11 Jun 2004 14:56:36 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 07:56:36 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id 8002819239C
	for <lucene-user@jakarta.apache.org>; Fri, 11 Jun 2004 16:56:22 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : RE : Analyzers
Date: Fri, 11 Jun 2004 16:56:11 +0200
Message-ID: <000101c44fc4$3f937830$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
In-Reply-To: <s0c982b6.013@gwia201.syr.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Grant,

> I thought I had responded...
>=20
> The jist of it is it isn't thread safe yet.  Although I don't
> think it is too much of a leap to make it thread-safe.  I just
> haven't had time to do so.  It can be done through reflection
> or perhaps by requiring a "deep" copy/reset of filter states.

If you have time to correct the attachment in Bugzilla, I'll look into =
it...

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8716-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 16:24:34 2004
Return-Path: <lucene-user-return-8716-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63861 invoked from network); 11 Jun 2004 16:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 16:24:34 -0000
Received: (qmail 11098 invoked by uid 500); 11 Jun 2004 16:24:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11073 invoked by uid 500); 11 Jun 2004 16:24:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10960 invoked by uid 99); 11 Jun 2004 16:24:34 -0000
Received: from [212.227.126.184] (HELO moutng.kundenserver.de) (212.227.126.184)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 09:24:34 -0700
Received: from [212.227.126.160] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1BYopH-0001tU-00
	for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 18:24:19 +0200
Received: from [212.42.228.228] (helo=[172.16.4.245])
	by mrelayng.kundenserver.de with asmtp (Exim 3.35 #1)
	id 1BYopH-0004Hq-00
	for lucene-user@jakarta.apache.org; Fri, 11 Jun 2004 18:24:19 +0200
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <CA76118E-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
References: <F5F19232-BB8C-11D8-9792-000A95CDCC98@media-style.com> <CA76118E-BB8F-11D8-BF97-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <CB0DEEF2-BBC3-11D8-AF5E-000A95CDCC98@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: hit score in 1.3 vs 1.4
Date: Fri, 11 Jun 2004 18:24:20 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:a4338c0162347fc953fb77dffeae5728
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

in case we will meet one time and I sure since the world is small, I 
have to invite you to a beer! :-)
Thanks your suggestion works, recreating the index solved the problem...

Stefan
Am 11.06.2004 um 12:12 schrieb Erik Hatcher:

> On Jun 11, 2004, at 5:51 AM, Stefan Groschupf wrote:
>> Hi,
>>
>> I'm having a strange problem until upgrading lucene 1.3 to 1.4 rc4.
>> I'm using a third party component that include the old lucene 1.3 but 
>> i need to run the new 1.4 rc 4 in the same vm.
>> So i unpack the component jar, remove all lucene 1.3 classes and 
>> repack it again and just add the new lucene in the classpath.
>> So far everything running well, but the hits.score(i) method return 
>> for each hit 100 %. ;-o
>>
>> Does someone has any idea where may be the problem can be?
>
> I'm not sure you'll have much luck with two versions playing well in 
> the sam VM together.  There are static variables used as well as JVM 
> system properties that factor into configuration settings.  I don't 
> have any specific recommendations, just a gut feeling that the issues 
> are not going to be pleasant.
>
> 	Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
---------------------------------------------------------------
enterprise information technology consulting
open technology:   http://www.media-style.com
open source:           http://www.weta-group.net
open discussion:    http://www.text-mining.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8717-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 11 17:31:26 2004
Return-Path: <lucene-user-return-8717-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12558 invoked from network); 11 Jun 2004 17:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Jun 2004 17:31:26 -0000
Received: (qmail 15516 invoked by uid 500); 11 Jun 2004 17:30:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15472 invoked by uid 500); 11 Jun 2004 17:30:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15445 invoked by uid 99); 11 Jun 2004 17:30:55 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 11 Jun 2004 10:30:55 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 11 Jun 2004 13:30:38 -0400
Message-Id: <s0c9b3fe.087@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Fri, 11 Jun 2004 13:30:13 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: RE : RE : Analyzers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Will try to get to it this weekend.  What is missing?  Is it the new =
files?

>>> rasik.pandey@ajlsm.com 06/11/04 10:56AM >>>
Grant,

> I thought I had responded...
>=20
> The jist of it is it isn't thread safe yet.  Although I don't
> think it is too much of a leap to make it thread-safe.  I just
> haven't had time to do so.  It can be done through reflection
> or perhaps by requiring a "deep" copy/reset of filter states.

If you have time to correct the attachment in Bugzilla, I'll look into =
it...

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8718-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 12 06:28:42 2004
Return-Path: <lucene-user-return-8718-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85821 invoked from network); 12 Jun 2004 06:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Jun 2004 06:28:42 -0000
Received: (qmail 54844 invoked by uid 500); 12 Jun 2004 06:28:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54816 invoked by uid 500); 12 Jun 2004 06:28:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54803 invoked by uid 99); 12 Jun 2004 06:28:57 -0000
Received: from [216.74.150.80] (HELO germany.prod.thop-ny.triplehop.com) (216.74.150.80)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 11 Jun 2004 23:28:56 -0700
Received: from hui2000 ([208.246.29.6]) by germany.prod.thop-ny.triplehop.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sat, 12 Jun 2004 02:25:22 -0400
From: "hui" <hui@triplehop.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Performance: compound vs. multi-file index, indexing and searching
Date: Sat, 12 Jun 2004 02:30:28 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcROwNqEc4qmtsd4R5SjSC/XjGEawgBhU9YA
In-Reply-To: <20040610075933.98973.qmail@web12706.mail.yahoo.com>
Message-ID: <GERMANYr7QomkOPT7aW00001e7d@germany.prod.thop-ny.triplehop.com>
X-OriginalArrivalTime: 12 Jun 2004 06:25:24.0968 (UTC) FILETIME=[0BD55680:01C45046]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Please see the test results for the 3 situations on Lucene 1.4rc3. 
Index speed from fast to slow
	Multiple files indexing with minMergeDoc=100 -- Multiple files
indexing with minMergeDoc=10 -- compound index
The search times are almost the same.

Regards,
hui



tranditional indexing with default minMergeDoc=10
1360615 total milliseconds index total docs:66100
1361646 total milliseconds index total docs:66100
1438868 total milliseconds index total docs:66100
1406569 total milliseconds index total docs:66100
1405461 total milliseconds index total docs:66100
1428664 total milliseconds index total docs:66100
1436430 total milliseconds index total docs:66100
1527652 total milliseconds index total docs:66100
1757083 total milliseconds index total docs:66100

compound indexing
1539246 total milliseconds index total docs:66100
1370881 total milliseconds index total docs:66100
1373428 total milliseconds index total docs:66100
1410663 total milliseconds index total docs:66100
1472197 total milliseconds index total docs:66100
1509933 total milliseconds index total docs:66100
1648204 total milliseconds index total docs:66100
1835086 total milliseconds index total docs:66100
1984420 total milliseconds index total docs:66100
2051743 total milliseconds index total docs:66100


tranditional indexing with default minMergeDoc=100
1543497 total milliseconds index total docs:66100
1170030 total milliseconds index total docs:66100
1174342 total milliseconds index total docs:66100
1185701 total milliseconds index total docs:66100
1205703 total milliseconds index total docs:66100
1210093 total milliseconds index total docs:66100
1228907 total milliseconds index total docs:66100
1323254 total milliseconds index total docs:66100
1578763 total milliseconds index total docs:66100
1593499 total milliseconds index total docs:66100


trandistional index search while indexing with default minMergeDoc=10
0 open index time:156
571 total within(ms) 110
602 total within(ms) 16
724 total within(ms) 47
449 total within(ms) 16
18 total within(ms) 0
1 open index time:63
4204 total within(ms) 0
5593 total within(ms) 0
6655 total within(ms) 16
3142 total within(ms) 15
164 total within(ms) 31
2 open index time:47
8243 total within(ms) 16
10920 total within(ms) 16
13025 total within(ms) 78
6138 total within(ms) 16
332 total within(ms) 16
3 open index time:62
12194 total within(ms) 16
16212 total within(ms) 16
19307 total within(ms) 31
9099 total within(ms) 15
485 total within(ms) 15
4 open index time:32
16441 total within(ms) 15
21849 total within(ms) 15
26031 total within(ms) 47
12259 total within(ms) 31
655 total within(ms) 47
5 open index time:47
19284 total within(ms) 16
25863 total within(ms) 15
30774 total within(ms) 31
14373 total within(ms) 31
730 total within(ms) 16
6 open index time:78
23073 total within(ms) 47
30892 total within(ms) 15
36732 total within(ms) 31
17233 total within(ms) 31
886 total within(ms) 31
7 open index time:31
26495 total within(ms) 16
35293 total within(ms) 15
42032 total within(ms) 47
19756 total within(ms) 47
1040 total within(ms) 62
8 open index time:63
29912 total within(ms) 31
40072 total within(ms) 31
47713 total within(ms) 47
22271 total within(ms) 46
1190 total within(ms) 31
9 open index time:47
33866 total within(ms) 31
45235 total within(ms) 31
53880 total within(ms) 47
25221 total within(ms) 47
1351 total within(ms) 31
10 open index time:47
37182 total within(ms) 31
49783 total within(ms) 31
59215 total within(ms) 47
27750 total within(ms) 63
1471 total within(ms) 31
11 open index time:47
39762 total within(ms) 46
53169 total within(ms) 31
63286 total within(ms) 63
29645 total within(ms) 94
1558 total within(ms) 47
12 open index time:109
42495 total within(ms) 63
56843 total within(ms) 31
67714 total within(ms) 63
31624 total within(ms) 94
1692 total within(ms) 47
13 open index time:31
42750 total within(ms) 32
57280 total within(ms) 31
68210 total within(ms) 63
31820 total within(ms) 62
1700 total within(ms) 31
14 open index time:32
42750 total within(ms) 31
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 63
1700 total within(ms) 31
15 open index time:47
42750 total within(ms) 32
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 94
1700 total within(ms) 31
16 open index time:62
42750 total within(ms) 32
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 46
1700 total within(ms) 31
17 open index time:31
42750 total within(ms) 94
57280 total within(ms) 32
68210 total within(ms) 47
31820 total within(ms) 47
1700 total within(ms) 31
18 open index time:31
42750 total within(ms) 31
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 46
1700 total within(ms) 32
19 open index time:31
42750 total within(ms) 32
57280 total within(ms) 16
68210 total within(ms) 63
31820 total within(ms) 62
1700 total within(ms) 32


compount index search
0 open index time:172
274 total within(ms) 156
328 total within(ms) 15
407 total within(ms) 31
195 total within(ms) 16
18 total within(ms) 16
1 open index time:31
3967 total within(ms) 16
5190 total within(ms) 0
6201 total within(ms) 15
2956 total within(ms) 32
162 total within(ms) 15
2 open index time:31
7919 total within(ms) 0
10484 total within(ms) 16
12486 total within(ms) 94
5917 total within(ms) 32
315 total within(ms) 15
3 open index time:63
12192 total within(ms) 15
16204 total within(ms) 16
19297 total within(ms) 31
9099 total within(ms) 32
485 total within(ms) 15
4 open index time:47
16048 total within(ms) 16
21349 total within(ms) 16
25419 total within(ms) 31
11978 total within(ms) 32
628 total within(ms) 47
5 open index time:31
18937 total within(ms) 16
25331 total within(ms) 0
30129 total within(ms) 31
14139 total within(ms) 32
718 total within(ms) 31
6 open index time:31
22436 total within(ms) 16
29925 total within(ms) 16
35620 total within(ms) 31
16741 total within(ms) 31
874 total within(ms) 32
7 open index time:47
25637 total within(ms) 32
34344 total within(ms) 16
40892 total within(ms) 32
19089 total within(ms) 32
1020 total within(ms) 31
8 open index time:31
29294 total within(ms) 31
39122 total within(ms) 16
46589 total within(ms) 47
21827 total within(ms) 47
1165 total within(ms) 31
9 open index time:15
31953 total within(ms) 32
42795 total within(ms) 16
50932 total within(ms) 47
23816 total within(ms) 62
1235 total within(ms) 15
10 open index time:109
34200 total within(ms) 63
45824 total within(ms) 31
54568 total within(ms) 63
25456 total within(ms) 63
1360 total within(ms) 32
11 open index time:47
37844 total within(ms) 16
50580 total within(ms) 31
60233 total within(ms) 62
28191 total within(ms) 47
1505 total within(ms) 47
12 open index time:31
40173 total within(ms) 47
53805 total within(ms) 31
64017 total within(ms) 46
29961 total within(ms) 62
1566 total within(ms) 31
13 open index time:47
42675 total within(ms) 31
57140 total within(ms) 47
68039 total within(ms) 63
31776 total within(ms) 62
1694 total within(ms) 31
14 open index time:0
42750 total within(ms) 32
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 47
1700 total within(ms) 16
15 open index time:0
42750 total within(ms) 47
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 47
1700 total within(ms) 15

trandistional index search while indexing with default minMergeDoc=100
0 open index time:141
298 total within(ms) 125
356 total within(ms) 0
442 total within(ms) 32
212 total within(ms) 46
18 total within(ms) 0
1 open index time:78
3970 total within(ms) 0
5205 total within(ms) 0
6219 total within(ms) 15
2956 total within(ms) 32
162 total within(ms) 16
2 open index time:31
8242 total within(ms) 16
10917 total within(ms) 15
13021 total within(ms) 94
6138 total within(ms) 47
332 total within(ms) 16
3 open index time:62
12533 total within(ms) 16
16686 total within(ms) 15
19889 total within(ms) 62
9330 total within(ms) 32
502 total within(ms) 31
4 open index time:93
16852 total within(ms) 16
22485 total within(ms) 0
26801 total within(ms) 32
12536 total within(ms) 31
672 total within(ms) 63
5 open index time:78
21162 total within(ms) 31
28258 total within(ms) 16
33674 total within(ms) 47
15746 total within(ms) 47
842 total within(ms) 31
6 open index time:31
25449 total within(ms) 32
34007 total within(ms) 15
40517 total within(ms) 47
18939 total within(ms) 47
1012 total within(ms) 16
7 open index time:32
29744 total within(ms) 32
39758 total within(ms) 31
47366 total within(ms) 47
22136 total within(ms) 47
1184 total within(ms) 15
8 open index time:63
33895 total within(ms) 15
45293 total within(ms) 31
53958 total within(ms) 47
25230 total within(ms) 47
1352 total within(ms) 31
9 open index time:46
37844 total within(ms) 32
50572 total within(ms) 16
60225 total within(ms) 47
28191 total within(ms) 47
1505 total within(ms) 32
10 open index time:47
40486 total within(ms) 31
54219 total within(ms) 16
64536 total within(ms) 63
30169 total within(ms) 62
1575 total within(ms) 32
11 open index time:0
42750 total within(ms) 62
57280 total within(ms) 31
68210 total within(ms) 47
31820 total within(ms) 63
1700 total within(ms) 32

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Thursday, June 10, 2004 4:00 AM
To: Lucene Users List
Subject: RE: Performance: compound vs. multi-file index, indexing and
searching

Hello Hui,

You are actually the person whose email I was referring to.  Have you,
by any chance, done the same test with newever versions of Lucene?  I
am using the latest RC, and see very little or no difference in
indexing speed.

Thanks,
Otis

--- hui <hui@triplehop.com> wrote:
> I did the test earlier on 1.3
>
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apac
> he.org&msgId=1408808
> 
> 
> 
> Regards,
> Hui
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Tuesday, June 08, 2004 5:23 AM
> To: Lucene Users List
> Subject: Performance: compound vs. multi-file index, indexing and
> searching
> 
> Hello,
> 
> I was wondering if anyone can comment on the performance difference
> of
> compound versus multi-file indices.  I am interested in both indexing
> and searching performance, and have tried testing indexing
> performance
> of both formats.
> 
> My tests so far show no indexing performance differences between the
> two formats, but I do remember one person reporting compound index
> format being 7% slower, so perhaps my tests are flawed.
> 
> Can anyone comment on performance differences?
> 
> Thanks,
> Otis
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8719-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Jun 13 13:05:38 2004
Return-Path: <lucene-user-return-8719-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35673 invoked from network); 13 Jun 2004 13:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Jun 2004 13:05:38 -0000
Received: (qmail 16445 invoked by uid 500); 13 Jun 2004 13:05:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16228 invoked by uid 500); 13 Jun 2004 13:05:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16210 invoked by uid 99); 13 Jun 2004 13:05:29 -0000
Received: from [213.228.0.62] (HELO postfix4-1.free.fr) (213.228.0.62)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 13 Jun 2004 06:05:29 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-1.free.fr (Postfix) with ESMTP id 9C5801422BC
	for <lucene-user@jakarta.apache.org>; Sun, 13 Jun 2004 15:05:25 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : RE : RE : Analyzers
Date: Sun, 13 Jun 2004 15:05:18 +0200
Message-ID: <000401c45147$13b84db0$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <s0c9b3fe.087@gwia201.syr.edu>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Grant,

> Will try to get to it this weekend.  What is missing?  Is it
> the new files?


Exactly.

>From : http://issues.apache.org/bugzilla/show_bug.cgi?id=3D28182
---
04/03/04 21:51 The 4 new files needed   (application/octet-stream)
---

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8720-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Jun 13 18:17:10 2004
Return-Path: <lucene-user-return-8720-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50156 invoked from network); 13 Jun 2004 18:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Jun 2004 18:17:10 -0000
Received: (qmail 47072 invoked by uid 500); 13 Jun 2004 18:17:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46938 invoked by uid 500); 13 Jun 2004 18:17:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46923 invoked by uid 99); 13 Jun 2004 18:17:07 -0000
Received: from [207.217.120.227] (HELO starling.mail.pas.earthlink.net) (207.217.120.227)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 13 Jun 2004 11:17:07 -0700
Received: from [65.174.70.194] (helo=earthlink.net)
	by starling.mail.pas.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 3.36 #4)
	id 1BZZXQ-0006mh-00
	for lucene-user@jakarta.apache.org; Sun, 13 Jun 2004 11:17:00 -0700
Message-ID: <40CC99F8.2070805@earthlink.net>
Date: Sun, 13 Jun 2004 12:16:24 -0600
From: Dmitry Serebrennikov <dmitrys@earthlink.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.3) Gecko/20030312
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Performance: compound vs. multi-file index, indexing and searching
References: <1087131930.16262.ezmlm@jakarta.apache.org>
In-Reply-To: <1087131930.16262.ezmlm@jakarta.apache.org>
Content-Type: multipart/mixed;
 boundary="------------060906000400080406000803"
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69564776905774d2ac4bea06dfc09356efbad81fd78114e65f74350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------060906000400080406000803
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hui, thanks for running the numbers and providing this to the list!

The results are very interesting. Of course, the primary purpose of the 
compound file format is to reduce the use of filehandles (at the expense 
of performance, and especially during indexing). I put your data into 
Excel to try to summarize it. Here's what I found:

Indexing
Traditional, min merge docs 10:  1458110
Compound, min merge docs 10:   1619580 (+11%)
Traditional, min merge docs 100:   1321379 (-9%)

I wonder what the compound at 100 would have looked like?

Searching
Indexes  Trad 10  Comp 10  Trad 100
0        37.8        46.8      40.6
1        12.4        15.6      12.6
2        28.4        31.4      37.6
3        18.6        21.8      31.2
4        31.0        28.4      28.4
5        21.8        22        34.4
6        31.0        25.2      31.4
7        37.4        28.6      34.4
8        37.2        34.4      34.2
9        37.4        34.4      34.8
10       40.6        50.4      40.8
11       56.2        40.6      47
12       59.6        43.4
13       43.8        46.8
14       40.6        34.6
15       47.0        37.4
16       37.4 
17       50.2 
18       37.4 
19       41 

I'm also attaching a graph of this data, but not sure if it will come 
through on the mailing list. I think there is too much variation in data 
here to say anything interesting. The numbers above are averages across 
all of your queries (regardless of how many hits they brough back), for 
a given number of "open indexes". I'm assuming that this is the number 
of indexes opened by the merged searcher. I think most of the 
irregularity comes from ocasional GC activity.
Perhaps if you could run with -verbose:gc option and then subtract the 
time in GC from the search times, we might get a more stable set of 
results. That would show the true difference of the code speed. You 
could also then graph the amount of memory collected by the GC or the 
time spent in GC to see if compound files cause more or less GC.

Could you please tell the list what kind of VM, hardware, OS was used in 
this test? Also, was there just one thread that was searching in all 
these cases? I found that these types of tests vary widely on different 
OSes and hardware. In my experience, Solaris/Sparc/SCSI gives slower 
response but is much more consistent in how it scales with the increase 
in the number of concurrent searches. Whereas a Windows/Intel/IDE can be 
dramatically faster on lower workloads, but starts to become erratic as 
the number of concurrent searches goes up.

I'm going to also attach a Python script that can help analyzing GC 
output of Sun's 1.3 VMs. One problem with those VMs is that they do not 
print when a given GC occured. This makes it hard to analyze. It is 
possible, however, to have a thread that sleeps for 1 second and then 
prints "[TS 234234234]" to the System.out stream, where the number of 
the value of System.currentTimeMillis(). The script I'm including will 
parse that kind of data and produce a comma-separated output of GC stats 
that can be graphed more easily.
1458110


Hope you guys find the above useful.
Good luck!
Dmitry.



--------------060906000400080406000803
Content-Type: text/plain;
 name="parsegc"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="parsegc"

#!/usr/local/bin/python

import sys

text = open(sys.argv[1], "r").read()
pos = 0
end = len(text)
timestamp = 0
gcCount = 0			   # number of quick GCs in this timeslice
fullgcCount = 0		   # number of full GCs in this timeslice
kbCount = 0			   # kb memory collected so far in this timeslice
kbUsed = 0			   # most recent amount of kb used in VM
kbLastUsed = 0         # used memory figure at the end of the prior timeslice
kbCollected = 0        # total memory collected from start of log
secsCount = 0
print "stamp,gc,fullgc,kb,secs,time,gcsec,fullgc/sec,kb/sec,gcsecs/sec,kbUsed,kbTotal,kbUsed/sec"
fieldSeps = ('K->','K(', 'K), ',' secs')

while pos > -1 and pos < end:
	if text.startswith("[TS ", pos):
	    # timestamp entry
		ts1 = pos+4
		ts2 = text.find("]", ts1, ts1+50)
		if ts2 > 0:
			t = long(text[ts1:ts2])
			if timestamp > 0:
				length = (t - timestamp) / 1000.0
				
				print "%i,%i,%i,%i,%f,%i,%f,%f,%f,%f,%i,%i,%f" % (
				      timestamp, gcCount, fullgcCount, kbCount, secsCount,
					  length, 
					  gcCount/length, 
					  fullgcCount/length, 
					  kbCount/length,
					  secsCount/length,
					  kbUsed,
					  kbUsed + kbCollected,
					  (kbUsed - kbLastUsed + kbCount)/length)
			timestamp = t
			gcCount = 0
			fullgcCount = 0
			kbCount = 0
			kbLastUsed = kbUsed
			secsCount = 0
			pos = ts2 + 1

	elif text.startswith("[GC ", pos):
		# plain GC entry
		pos += 4
		p2 = text.find("]", pos, pos+50)
		if end > 0:
			gcCount += 1
			tmp = text[pos:p2]
			values = []
			for fs in fieldSeps:
				sp = tmp.split(fs)
				values.append(sp[0])
				tmp = sp[1]
			kbCount += long(values[0]) - long(values[1])
			kbCollected += kbCount;
			kbUsed = long(values[1])
			secsCount += float(values[3])
			pos = p2 + 1

	elif text.startswith("[Full GC ", pos):
		# full GC entry
		pos += 9
		p2 = text.find("]", pos, pos+50)
		if end > 0:
			fullgcCount += 1
			tmp = text[pos:p2]
			values = []
			for fs in fieldSeps:
				sp = tmp.split(fs)
				values.append(sp[0])
				tmp = sp[1]
			kbCount += long(values[0]) - long(values[1])
			kbCollected += kbCount;
			kbUsed = long(values[1])
			secsCount += float(values[3])
			pos = p2 + 1

	pos = text.find("[", pos+1)


--------------060906000400080406000803
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------060906000400080406000803--


From lucene-user-return-8721-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 04:39:14 2004
Return-Path: <lucene-user-return-8721-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32840 invoked from network); 14 Jun 2004 04:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 04:39:14 -0000
Received: (qmail 26064 invoked by uid 500); 14 Jun 2004 04:39:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26036 invoked by uid 500); 14 Jun 2004 04:39:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26022 invoked by uid 99); 14 Jun 2004 04:39:10 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 13 Jun 2004 21:39:10 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5E4cqY02769
	for <lucene-user@jakarta.apache.org>; Sun, 13 Jun 2004 23:38:53 -0500
Received: from VERITAS3 [192.168.1.166] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 10:09:10 +0530
Message-ID: <002401c451c9$cfa09320$a601a8c0@vsnl.net.in>
From: "Sumit Mishra" <sumit@emacmillan.com>
To: <lucene-user@jakarta.apache.org>
Subject: date range query problem(Help me)
Date: Mon, 14 Jun 2004 10:10:58 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001D_01C451F7.E3860680"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2462.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2462.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: sumit@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_001D_01C451F7.E3860680
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

=20
Hi,
      My requirement to fetch the result with in the date range.
      I am filtering the query like to retrieve the date wichi fall =
between these two year..
     bqr.add(QueryParser.parse ("[" + 1978 + " TO " =
+2000+"]","fullhead",new StandardAnalyzer()),true,false);
    i search upon the tag with in <fullhead></fullhead>
     This query retrives the record between these two date range along =
with also select the date wich is of year 2001,2002 etcc.
     Could you please help me out what i am doing wrong?

   Here i am giving some sample data

 =20
<chron id=3D"t0104415" sorthead=3D"00008250" subject=3D"cine" =
area=3D"USA">

<fullhead>1990</fullhead>

<p>The gangster film <i>GoodFellas</i>, co&hyphen;written and directed =
by Martin Scorsese, is released in the USA. It stars Ray Liotta, Robert =
De Niro, Joe Pesci, Lorraine Bracco, and Paul Sorvino.</p>

</chron>

<chron id=3D"t0068037" sorthead=3D"00008630" subject=3D"trea" =
area=3D"USA, USSR">

<fullhead>31 July 1991</fullhead>

<p>The US president George Bush and the Soviet leader Mikhail Gorbachev =
sign the Strategic Arms Reduction Treaty (START) to reduce their =
arsenals of long&hyphen;range nuclear weapons by a third.</p>

</chron>

<chron id=3D"t0141562" sorthead=3D"00016450" subject=3D"stru" =
area=3D"UK">

<fullhead>1 January 2000</fullhead>

<p>The Millennium Dome in Greenwich, London, England, opens to the =
public, and is scheduled to remain open throughout 2000. Some 12,500 =
people visit it on the opening day.</p>

</chron>

<chron id=3D"t0141561" sorthead=3D"00016460" subject=3D"life">

<fullhead>1 January 2000</fullhead>

<p>The new millennium is celebrated across the world, with fireworks, =
street parties, ceremonies, and speeches. The millennium bug does not =
appear to make a large impact, and despite fears of acts of extremism =
and terrorism, the global celebration passes peacefully.</p>

</chron>


------=_NextPart_000_001D_01C451F7.E3860680--




From lucene-user-return-8722-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 06:30:56 2004
Return-Path: <lucene-user-return-8722-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76554 invoked from network); 14 Jun 2004 06:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 06:30:56 -0000
Received: (qmail 82515 invoked by uid 500); 14 Jun 2004 06:30:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82431 invoked by uid 500); 14 Jun 2004 06:30:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82416 invoked by uid 99); 14 Jun 2004 06:30:52 -0000
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 13 Jun 2004 23:30:52 -0700
Received: from tucholsky.office.tanto.de (morus.office.tanto.de [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 9962A23BE3
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 08:30:16 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5E6TkGL030151
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 08:29:46 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i5E6Tjv4030147;
	Mon, 14 Jun 2004 08:29:45 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16589.17881.428633.714212@tanto-xipolis.de>
Date: Mon, 14 Jun 2004 08:29:45 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: building a search query
In-Reply-To: <000e01c44e6c$85041bd0$c101a8c0@jeffwong>
References: <CFAF6F2213792F4FBA1E08561BB701D404735846@exchange.corp.widen.com>
	<000e01c44e6c$85041bd0$c101a8c0@jeffwong>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jeff Wong writes:

> 2) Also,  you should be wary of the possibility that your users may not know
> Boolean logic.  AND and OR may have different meanings for them.  For most
> people, AND is an inclusive operator and OR is basically XOR.  It may seem
> strange to you, but it's kind of like those optical illusions.  Is the
> picture of an old woman or a young lady?  Is that a wine glass or two people
> in profile?
> 
I don't think that this applies to search logic.
If you search for documents mentioning a picture of an old woman or a young 
lady you wouldn't want to exclude documents mentioning both.
> 
> To answer your question about using the BooleanQuery object,  you only need
> a single clause object to connect multiple terms.
> 
> To make a BooleanQuery like this:
> A OR B OR C
> 
> 
> q = new BooleanQuery()
> q.add( a, false, false)
> q.add( b, false, false)
> q.add( c, false, false)
> 
It's more complicated when you deal with different operators in a boolean 
query like A OR B AND C.
You cannot express that with a single BooleanQuery.

Usually AND has higher precedence in which case this can be expressed as
q = new BooleanQuery()
q.add( a, false, false );
q2 = new BooleanQuery();
q2.add(b, true, false);
q2.add(c, true, false);
q.add( q2, false, false );

If you'd add required terms to q directly you would end up, with a query
searching for B AND C only, where documents containing A get a better score.

So for the initial question, I'd suggest:

you cannot simply create a list of terms and operators, you need to build
a query tree that expresses the precedence of the operations.
Then you will have groups of term queries that are either OR- or AND- 
(including AND NOT) combined, which can easily be converted to an apropriate
BooleanQuery.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8723-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 06:53:44 2004
Return-Path: <lucene-user-return-8723-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90666 invoked from network); 14 Jun 2004 06:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 06:53:44 -0000
Received: (qmail 21671 invoked by uid 500); 14 Jun 2004 06:53:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21644 invoked by uid 500); 14 Jun 2004 06:53:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21628 invoked by uid 99); 14 Jun 2004 06:53:43 -0000
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 13 Jun 2004 23:53:43 -0700
Received: from tucholsky.office.tanto.de (morus.office.tanto.de [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 33E2B23BDC
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 08:53:52 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5E6rLGL030366
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 08:53:21 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i5E6rLVn030362;
	Mon, 14 Jun 2004 08:53:21 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16589.19297.720514.48382@tanto-xipolis.de>
Date: Mon, 14 Jun 2004 08:53:21 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: queryparser: parsing boolean logic
In-Reply-To: <CFAF6F2213792F4FBA1E08561BB701D404735877@exchange.corp.widen.com>
References: <CFAF6F2213792F4FBA1E08561BB701D404735877@exchange.corp.widen.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ben Pryor writes:
> Here is a follow-up to a previous message I posted, dealing with converting
> user-entered boolean logic into a Query. Why does the QueryParser construct
> the same query for the following two strings?
> 
>  
> 
> "apple AND orange OR pear AND grape"
> 
> "apple AND orange AND pear AND grape"
> 
>  
because query parser is broken :-(

I suggested a fix some time ago (look at 
http://issues.apache.org/bugzilla/show_bug.cgi?id=25820) but this didn't
get into the lucene sources so far.
Otis promised to look at it but I guess he didn't find time for this so far.

OTOH if your users don't enter the query as a text string, it's a bad idea
to use query parser anyway in most cases.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8724-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 09:22:40 2004
Return-Path: <lucene-user-return-8724-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83530 invoked from network); 14 Jun 2004 09:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 09:22:40 -0000
Received: (qmail 87172 invoked by uid 500); 14 Jun 2004 09:22:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87017 invoked by uid 500); 14 Jun 2004 09:22:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87003 invoked by uid 99); 14 Jun 2004 09:22:40 -0000
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 14 Jun 2004 02:22:40 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5E7pPY08355
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 02:51:25 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 13:21:46 +0530
Message-ID: <018c01c451e3$e9e48470$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net>
Subject: Re: score and frequency
Date: Mon, 14 Jun 2004 13:17:59 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I am facing a peculiar problem with the changes mentioned here.
In the explanation of the score, I am finding the following products. I am
also mentioning their lucene calculated scores alongside.

search result                                                     product
from explain             hits.score
1)ice hockey
1.23028304E8                     1
2)ice hockey
8.3813824E7                     0.6812565
3)ice hockey
8.3813824E7                     0.6812565
4)winter Olympics&colon; hockey, ice, medallists  5.2345928E7
0.4254788
5)ice age
8960174.0                        0.05670582
6) National Hockey League                                   3.3130242E7
0.039581057
7) ice hockey&colon; British Sekonda Superleague 4.0383384E7
0.0372818
        Play&hyphen;Off Championship&colon; finals


As you can notice the product for term 7 is more than that of 5. Still its
score is coming lower.
Can anyone please suggest why this discrepancy is coming in the scores?
Also, is it possible to directly use the product from explain itself instead
of the hits.score? If I can somehow use the product, it will solve all my
problems.

Regards,
Niraj

----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 07, 2004 12:50 PM
Subject: Re: score and frequency


> It seems that you don't the length norm to be used. It's a factor which
> normalize the score of a doc depending on the size of the searched field
> of the doc. It's the field which make that 'ground ice' has a higher
> score than 'ice hockey: British Sekonda Superleague Play-Off
> Championship: finals' because it only has 2 terms.
> So, I suggest you to override the lengthNorm method and to ignore the
> numTokens parameter.
> NB: The length norm is computed during the indexation and the norm are
> store in the index (in the _aaa.f# files). So, you need to do re-index
> your data, and use this similarity during the indexation.
>
> Cheers,
> Franck
>
>
> Niraj Alok wrote:
> > I have set the searcher.setSimilarity  as well as also tried setting the
> > coord factor to 1.
> >
> > The problem as given by an example is : Lets say I have titles to be
> > displayed depending upon the search.
> > E.g if i have "ice hockey" as the search item and if it is default
> > similarity, my results are :
> >
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > winter Olympics: hockey, ice, medallists0.17402513
> > ice age0.073680125
> > National Hockey League0.020266924
> > Cracking the Ice Age0.018420031
> > ground-ice0.011512519
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.0069075115
> >  (the numbers indicating the score).
> >
> >
> > But if i set the similarity as my overridden one, the results become:
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > ice age0.22104037
> > winter Olympics: hockey, ice, medallists0.17402513
> > National Hockey League0.060800765
> > Cracking the Ice Age0.055260092
> > ground-ice0.034537554
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.020722535
> >
> >
> > I want all the titles which have both "ice" and "hockey" to come above
the
> > rest (to have higher scores)
> > Meaning i would wish the results to appear like:
> >
> > ice hockey
> > ice hockey
> > ice hockey
> > winter Olympics: hockey, ice, medallists
> > ice hockey: British Sekonda Superleague Play-Off Championship: finals
> > ice age
> > National Hockey League
> > Cracking the Ice Age
> > ground-ice
> >
> > My overriden similarity class contains just this method:
> > public float coord(int overlap, int maxOverlap) {
> >
> > return 1.0f;
> >
> > }
> >
> >
> >
> >
> >
> > I feel it is the weight factor which is producing indesirable results.
Any
> > help in this regard would be highly appreciated.
> >
> > Regards,
> > Niraj
> >
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Friday, June 04, 2004 8:46 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>Hi,
> >>
> >>Be careful to set the default similarity
> >>'Similarity.setDefault(similarity)' before creating your search instance
> >>(IndexSearcher).
> >>If you change the default similarity after, you'll still use the old
one.
> >>You'd better use the 'searcher.setSimilarity' method on your searcher.
> >>
> >>Franck
> >>
> >>
> >>Phil brunet wrote:
> >>
> >>>Hi to all.
> >>>
> >>>Maybe the term frequency is not the only parameter you need to override
> >>>to "customize" the score attributed by Lucene.
> >>>
> >>>Maybe you should consider the normalisation factor, the idf and the
> >>>coord factor ?
> >>>
> >>>Philippe
> >>>
> >>>
> >>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Subject: Re: score and frequency
> >>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>
> >>>>Hi Erik,
> >>>>
> >>>>Thanks for the suggestion.
> >>>>
> >>>>I tried this:
> >>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>
> >>>>{
> >>>>
> >>>>public float tf(float freq) {
> >>>>
> >>>>System.out.println("discounting frequency");
> >>>>
> >>>>return (float)1;
> >>>>
> >>>>}
> >>>>
> >>>>}
> >>>>
> >>>>
> >>>>
> >>>>and in my query class, I used :
> >>>>
> >>>>Similarity.setDefault(similarity);
> >>>>
> >>>>Hits hits = is.search(query);
> >>>>
> >>>>for(i = 0; i < hits.length(); i ++)
> >>>>
> >>>>  result = result + hits.score(i);
> >>>>
> >>>>
> >>>>
> >>>>However, this is still not giving me the expected result. Do I need to
> >
> > do
> >
> >>>>something else?
> >>>>
> >>>>
> >>>>Regards,
> >>>>Niraj
> >>>>
> >>>>----- Original Message -----
> >>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>Subject: Re: score and frequency
> >>>>
> >>>>
> >>>>
> >>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>
> >>>>>>Hi,
> >>>>>>
> >>>>>>I am having some problems with the score of lucene.
> >>>>>>I am trying to get the results displayed according to hits.score
> >
> > and
> >
> >>>>>>it is giving the results correctly.
> >>>>>>However I do not want the frequency factor to be used for the
> >>>>>>computation of the score.
> >>>>>>
> >>>>>>Is it possible to get the score which does not have the frequency
> >>>>>>factor in it ?
> >>>>>
> >>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> >
> > used
> >
> >>>>>unless otherwise specified.  You could subclass that and override
> >
> > this:
> >
> >>>>>   public float tf(float freq) {
> >>>>>     return (float)Math.sqrt(freq);
> >>>>>   }
> >>>>>
> >>>>>and return 1.0.  This might give you the effect you want.
> >>>>>
> >>>>>Erik
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>_________________________________________________________________
> >>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8725-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 13:31:13 2004
Return-Path: <lucene-user-return-8725-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14552 invoked from network); 14 Jun 2004 13:31:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 13:31:13 -0000
Received: (qmail 75940 invoked by uid 500); 14 Jun 2004 13:31:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75796 invoked by uid 500); 14 Jun 2004 13:31:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75777 invoked by uid 99); 14 Jun 2004 13:31:09 -0000
Received: from [195.226.6.68] (HELO erbium.wyona.ch) (195.226.6.68)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 14 Jun 2004 06:31:09 -0700
Received: from ytterbium.wyona.ch ([195.226.6.70] helo=wyona.com)
	by erbium.wyona.ch with asmtp (Exim 3.35 #1 (Debian))
	id 1BZrUv-0000aF-00
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 15:27:37 +0200
Message-ID: <40CDA7D4.2060808@wyona.com>
Date: Mon, 14 Jun 2004 15:27:48 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en, de
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: incrementally indexing a million documents
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I try to index around a million documents. The problem is
that I run out of memory during sorting by uid when I go through
the directory recursively.

Well, I could add more memory, but this wouldn't really solve my problem,
because at some point I will always run out of memory (e.g. 10 million 
documents).

Is there another approach than sorting by uid?

Thanks

Michi

-- 
Michael Wechner
Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
http://www.wyona.com              http://cocoon.apache.org/lenya/
michael.wechner@wyona.com                        michi@apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8726-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 18:10:12 2004
Return-Path: <lucene-user-return-8726-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33366 invoked from network); 14 Jun 2004 18:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 18:10:12 -0000
Received: (qmail 9811 invoked by uid 500); 14 Jun 2004 18:10:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9771 invoked by uid 500); 14 Jun 2004 18:10:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9757 invoked by uid 99); 14 Jun 2004 18:10:18 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 14 Jun 2004 11:10:18 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Mon, 14 Jun 2004 14:09:32 -0400
Message-Id: <s0cdb19c.033@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Mon, 14 Jun 2004 14:09:15 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: RE : RE : RE : Analyzers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I was able to download them.  There are 2 sets of attachments on that bug.

>>> rasik.pandey@ajlsm.com 06/13/04 09:05AM >>>
Grant,

> Will try to get to it this weekend.  What is missing?  Is it
> the new files?


Exactly.

>From : http://issues.apache.org/bugzilla/show_bug.cgi?id=3D28182=20
---
04/03/04 21:51 The 4 new files needed   (application/octet-stream)
---

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8727-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 14 21:12:45 2004
Return-Path: <lucene-user-return-8727-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65451 invoked from network); 14 Jun 2004 21:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Jun 2004 21:12:44 -0000
Received: (qmail 41499 invoked by uid 500); 14 Jun 2004 21:12:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41357 invoked by uid 500); 14 Jun 2004 21:12:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41116 invoked by uid 99); 14 Jun 2004 21:12:35 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 14 Jun 2004 14:12:35 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id E527A7875C1
	for <lucene-user@jakarta.apache.org>; Mon, 14 Jun 2004 17:11:58 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <002401c451c9$cfa09320$a601a8c0@vsnl.net.in>
References: <002401c451c9$cfa09320$a601a8c0@vsnl.net.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <77E027C0-BE47-11D8-B16A-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: date range query problem(Help me)
Date: Mon, 14 Jun 2004 17:11:57 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you'd provide a succinct JUnit test case (using RAMDirectory and 
hard-coded values being indexed) I'd be happy to have a look.  As it 
is, this is too convoluted for me to follow.

	Erik

On Jun 14, 2004, at 12:40 AM, Sumit Mishra wrote:

>
> Hi,
>       My requirement to fetch the result with in the date range.
>       I am filtering the query like to retrieve the date wichi fall 
> between these two year..
>      bqr.add(QueryParser.parse ("[" + 1978 + " TO " 
> +2000+"]","fullhead",new StandardAnalyzer()),true,false);
>     i search upon the tag with in <fullhead></fullhead>
>      This query retrives the record between these two date range along 
> with also select the date wich is of year 2001,2002 etcc.
>      Could you please help me out what i am doing wrong?
>
>    Here i am giving some sample data
>
>
> <chron id="t0104415" sorthead="00008250" subject="cine" area="USA">
>
> <fullhead>1990</fullhead>
>
> <p>The gangster film <i>GoodFellas</i>, co&hyphen;written and directed 
> by Martin Scorsese, is released in the USA. It stars Ray Liotta, 
> Robert De Niro, Joe Pesci, Lorraine Bracco, and Paul Sorvino.</p>
>
> </chron>
>
> <chron id="t0068037" sorthead="00008630" subject="trea" area="USA, 
> USSR">
>
> <fullhead>31 July 1991</fullhead>
>
> <p>The US president George Bush and the Soviet leader Mikhail 
> Gorbachev sign the Strategic Arms Reduction Treaty (START) to reduce 
> their arsenals of long&hyphen;range nuclear weapons by a third.</p>
>
> </chron>
>
> <chron id="t0141562" sorthead="00016450" subject="stru" area="UK">
>
> <fullhead>1 January 2000</fullhead>
>
> <p>The Millennium Dome in Greenwich, London, England, opens to the 
> public, and is scheduled to remain open throughout 2000. Some 12,500 
> people visit it on the opening day.</p>
>
> </chron>
>
> <chron id="t0141561" sorthead="00016460" subject="life">
>
> <fullhead>1 January 2000</fullhead>
>
> <p>The new millennium is celebrated across the world, with fireworks, 
> street parties, ceremonies, and speeches. The millennium bug does not 
> appear to make a large impact, and despite fears of acts of extremism 
> and terrorism, the global celebration passes peacefully.</p>
>
> </chron>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8728-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 04:39:56 2004
Return-Path: <lucene-user-return-8728-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10512 invoked from network); 15 Jun 2004 04:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 04:39:56 -0000
Received: (qmail 3517 invoked by uid 500); 15 Jun 2004 04:40:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3492 invoked by uid 500); 15 Jun 2004 04:40:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3471 invoked by uid 99); 15 Jun 2004 04:40:13 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 14 Jun 2004 21:40:13 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZC2TS00.V56 for <lucene-user@jakarta.apache.org>; Tue,
          15 Jun 2004 10:21:28 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: org.apache.lucene.search.highlight.Highlighter
Date: Tue, 15 Jun 2004 10:18:22 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGEKACAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIIEELCAAA.karthik@controlnet.co.in>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hey Guys



Sombody please tell me why the  "[pad]" is been displayed between words  on
searching the indexed file


   Content : Digital Cameras[pad][Digital Cameras][pad][EZ Dual Cam USB
Digital Video/Still Camera][pad... Cam USB Digital


   How do I  correct this problem

  [Note: -   I am using the Highlighter package from the Sandbox for
highlighting the required word from an html  ]




with regards
Karthik





-----Original Message-----
From: Karthik N S [mailto:karthik@controlnet.co.in]
Sent: Monday, May 24, 2004 2:41 PM
To: Lucene Users List
Subject: RE: org.apache.lucene.search.highlight.Highlighter


Hey
Lucene-Developers

I was broswing thru CVS  and found the SRC for  "IndexWriter2.java  written
by Ivaylo Zlatev on feb 2002,

My concern is, Does this piece of code  really work ,

if so  state an example [ present Lucene-final 1.3 version ]
           or
Is it  discarded from the [ present Lucene-final 1.3 version ]


The Tecnique of using RAMDirectory, my Query has really become faster access
,
So hence plan to use it  during Indexing process also.



karthik





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8729-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 07:48:19 2004
Return-Path: <lucene-user-return-8729-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22183 invoked from network); 15 Jun 2004 07:48:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 07:48:19 -0000
Received: (qmail 59388 invoked by uid 500); 15 Jun 2004 07:48:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59293 invoked by uid 500); 15 Jun 2004 07:48:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59239 invoked by uid 99); 15 Jun 2004 07:48:31 -0000
Received: from [209.228.33.228] (HELO c007.snv.cp.net) (209.228.33.228)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 15 Jun 2004 00:48:31 -0700
Received: (cpmta 13499 invoked from network); 15 Jun 2004 00:47:47 -0700
Received: from 213.132.40.2 (HELO ?192.168.1.24?)
  by smtp.bayt.net (209.228.33.228) with SMTP; 15 Jun 2004 00:47:47 -0700
X-Sent: 15 Jun 2004 07:47:47 GMT
Message-ID: <40CEA9AF.3060606@bayt.net>
Date: Tue, 15 Jun 2004 11:47:59 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: incrementally indexing a million documents
References: <40CDA7D4.2060808@wyona.com>
In-Reply-To: <40CDA7D4.2060808@wyona.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How are you documents named? is it alphabetical or numerical, Mine where 
numerical so I I creates n directories like so
11 , 12, 13, 14, .... 19, 21 , 22 , 23 .. ........ 99   you get the idea 
and I stored the files into the directories that each belonged to 
depending on the last two numbers in the file name (you could use file 
size to shuffle the files around as well (ie, use the 2 rightmost  
numbers in the file size in bytes)  so at this point you'll have 
shuffled your million docs into 100 directories and then  Lucene can 
spider through each set of directories indexing let's say 5000 files at 
a time and then deleting them or moving them into another location, it 
you get 100 million files simply up the precision on the directory to a 
3 digit setup or a 4 digit setup (once you automate it, sky's the limit) 

Hope this helps

Nader Henein


Michael Wechner wrote:

> I try to index around a million documents. The problem is
> that I run out of memory during sorting by uid when I go through
> the directory recursively.
>
> Well, I could add more memory, but this wouldn't really solve my problem,
> because at some point I will always run out of memory (e.g. 10 million 
> documents).
>
> Is there another approach than sorting by uid?
>
> Thanks
>
> Michi
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8730-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 08:39:35 2004
Return-Path: <lucene-user-return-8730-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62620 invoked from network); 15 Jun 2004 08:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 08:39:33 -0000
Received: (qmail 15715 invoked by uid 500); 15 Jun 2004 08:39:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14956 invoked by uid 500); 15 Jun 2004 08:39:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13798 invoked by uid 99); 15 Jun 2004 08:38:51 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 01:38:51 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id CF8CD7887C0
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 04:38:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIGEKACAAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIGEKACAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5377D4DE-BEA7-11D8-8A46-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: org.apache.lucene.search.highlight.Highlighter
Date: Tue, 15 Jun 2004 04:38:07 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 15, 2004, at 12:48 AM, Karthik N S wrote:
> Sombody please tell me why the  "[pad]" is been displayed between 
> words  on
> searching the indexed file
>
>
>    Content : Digital Cameras[pad][Digital Cameras][pad][EZ Dual Cam USB
> Digital Video/Still Camera][pad... Cam USB Digital
>
>
>    How do I  correct this problem
>
>   [Note: -   I am using the Highlighter package from the Sandbox for
> highlighting the required word from an html  ]

Please show us the relevant (succinct) piece of code that created the 
text output above.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8731-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 09:05:06 2004
Return-Path: <lucene-user-return-8731-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78863 invoked from network); 15 Jun 2004 09:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 09:05:06 -0000
Received: (qmail 84624 invoked by uid 500); 15 Jun 2004 09:05:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84595 invoked by uid 500); 15 Jun 2004 09:05:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84559 invoked by uid 99); 15 Jun 2004 09:05:27 -0000
Received: from [194.159.73.1] (HELO post-20.mail.nl.demon.net) (194.159.73.1)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 02:05:27 -0700
Received: from [212.238.156.229] (helo=[127.0.0.1])
	by post-20.mail.nl.demon.net with esmtp (Exim 3.36 #2)
	id 1Ba9ro-0007OW-00; Tue, 15 Jun 2004 09:04:28 +0000
Message-ID: <40CEBB8D.6040304@zilverline.org>
Date: Tue, 15 Jun 2004 11:04:13 +0200
From: Zilverline <info@zilverline.org>
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Q: how to parse query and add boost a term
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

How can I use Lucene's API best to parse a query and then boost the
query with the 'title' given the relevant parts of the query (the
default Field)? To give you an example:

I want to change:

     'java "method invocation" +type:HTML'
into

          '+contents:java +contents:"method invocation" +type:HTML
+title:java^2 +title:"method invocation"^2'

Of course without having to parse the query myself, so using QueryParser
and friends.

Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8732-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 09:05:37 2004
Return-Path: <lucene-user-return-8732-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79111 invoked from network); 15 Jun 2004 09:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 09:05:37 -0000
Received: (qmail 86256 invoked by uid 500); 15 Jun 2004 09:05:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86182 invoked by uid 500); 15 Jun 2004 09:05:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86057 invoked by uid 99); 15 Jun 2004 09:05:43 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 02:05:43 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id A65E2192E6F
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 11:04:56 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : RE : Analyzers
Date: Tue, 15 Jun 2004 11:04:44 +0200
Message-ID: <000301c452b7$d029f540$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <s0c982b6.013@gwia201.syr.edu>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> The jist of it is it isn't thread safe yet.  Although I don't
> think it is too much of a leap to make it thread-safe.  I just
> haven't had time to do so.  It can be done through reflection
> or perhaps by requiring a "deep" copy/reset of filter states.

I had a quick look and found that using reflection would be complicated =
as some TokenFilters need extra objects at construction time like a =
charset[](RussianStemFilter) or a HashSet of stopWords (StopFilter). Do =
you see a simple way around this? What were your thoughts for the "deep" =
copy/reset you mention?

Regards,
RBP=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8733-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 09:41:40 2004
Return-Path: <lucene-user-return-8733-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99382 invoked from network); 15 Jun 2004 09:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 09:41:40 -0000
Received: (qmail 80197 invoked by uid 500); 15 Jun 2004 09:41:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80163 invoked by uid 500); 15 Jun 2004 09:41:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80133 invoked by uid 99); 15 Jun 2004 09:41:56 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 02:41:56 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 55DA478A043
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 05:41:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40CEBB8D.6040304@zilverline.org>
References: <40CEBB8D.6040304@zilverline.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <22204136-BEB0-11D8-8A46-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Q: how to parse query and add boost a term
Date: Tue, 15 Jun 2004 05:41:10 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 15, 2004, at 5:04 AM, Zilverline wrote:

> Hi,
>
> How can I use Lucene's API best to parse a query and then boost the
> query with the 'title' given the relevant parts of the query (the
> default Field)? To give you an example:
>
> I want to change:
>
>     'java "method invocation" +type:HTML'
> into
>
>          '+contents:java +contents:"method invocation" +type:HTML
> +title:java^2 +title:"method invocation"^2'
>
> Of course without having to parse the query myself, so using 
> QueryParser
> and friends.

Subclass QueryParser and override getFieldQuery, and boost the queries 
you create.  You could simply delegate to super to create the query, 
and boost it if the field is "title".  Note that the QueryParser will 
override your boost if the user specified the boost factor manually.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8734-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 15:22:35 2004
Return-Path: <lucene-user-return-8734-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69381 invoked from network); 15 Jun 2004 15:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 15:22:34 -0000
Received: (qmail 42914 invoked by uid 500); 15 Jun 2004 15:22:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42728 invoked by uid 500); 15 Jun 2004 15:21:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42557 invoked by uid 99); 15 Jun 2004 15:21:55 -0000
Received: from [143.106.80.3] (HELO apolo.ccuec.unicamp.br) (143.106.80.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 08:21:55 -0700
Received: from www.ccuec.unicamp.br (apolo [143.106.80.3])
	by apolo.ccuec.unicamp.br (Postfix) with SMTP id 60EF5333959
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 12:21:38 -0300 (BRT)
Received: from 143.106.120.195
        (SquirrelMail authenticated user daniel)
        by www.ccuec.unicamp.br with HTTP;
        Tue, 15 Jun 2004 12:21:38 -0300 (BRT)
Message-ID: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
Date: Tue, 15 Jun 2004 12:21:38 -0300 (BRT)
Subject: How to use PhraseQuery Class?
From: "Daniel de Souza Teixeira" <daniel@ccuec.unicamp.br>
To: lucene-user@jakarta.apache.org
Reply-To: daniel@ccuec.unicamp.br
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!
I need some information about PhraseQuery Class.

How to use this class ?

I tried to use, but I couldn't.
I created an index, just with 2 fields:
   - path: path of the file
   - contents: the text of the file (pdf,txt,html,doc,rtf ...)

I want to search with phrases... Is it possible ?

This is te code...

public void indexFiles(String filePath, String documentText, String
indexName, boolean create) {

	try {


		IndexWriter writer = null;

		File index = new File ("./" + indexName);

		if (!index.exists()) {
			writer = new IndexWriter(indexName, null, true);
			writer.optimize();
			writer.close();
		}

		writer = new IndexWriter(indexName, new StandardAnalyzer(), false);

		Document doc = new Document();

		doc.add(Field.UnIndexed ("path",filePath));
		doc.add(Field.Text("contents",documentText));

		writer.addDocument(doc);

		doc = null;
		writer.close();
	}

	catch (Exception ex) {
		System.out.println("Error - " + ex);
	}

}

Thanks!

Regards.

-- 
Daniel de Souza Teixeira
Laboratrio de Inovao em Software - Unicamp/Ci&T
Campinas-SP
Brasil



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8735-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 16:03:54 2004
Return-Path: <lucene-user-return-8735-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1797 invoked from network); 15 Jun 2004 16:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 16:03:54 -0000
Received: (qmail 95522 invoked by uid 500); 15 Jun 2004 15:59:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95214 invoked by uid 500); 15 Jun 2004 15:59:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94696 invoked by uid 99); 15 Jun 2004 15:59:10 -0000
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 08:59:10 -0700
Received: from [128.218.15.87] (beani.library.ucsf.edu [128.218.15.87])
	by gossamer.ckm.ucsf.edu (8.11.6-20030924/8.11.6) with ESMTP id i5FFwqB08698
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 08:58:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <22204136-BEB0-11D8-8A46-000393A564E6@ehatchersolutions.com>
References: <40CEBB8D.6040304@zilverline.org> <22204136-BEB0-11D8-8A46-000393A564E6@ehatchersolutions.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--513738237
Message-Id: <E2FEC056-BEE4-11D8-89C8-003065E21F90@library.ucsf.edu>
From: Claude Devarenne <claude@library.ucsf.edu>
Subject: word thrown out in exact phrase with setPhraseSlop(0)
Date: Tue, 15 Jun 2004 08:58:47 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Filter-Version: 1.14 (gossamer)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-1--513738237
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Hi,

In my application, when a user searches on an exact phrase like "key to 
project" the word "to" gets thrown out.  I currently use the query 
parser and enclose the user query string in quotes.  I did 
setPhraseSlop(0) but that did not help.  Would this be resolved by 
building a phrase query?

I looked at the JUnit tests for phrase query and it looks like I have 
to parse the incoming query string, add the terms to the phrase query 
and field to search on for each term.  Is that correct?  How do I 
handle complex queries where an exact phrase may be combined with 
several boolean connectors as in:

"relation to trends" AND (pulmonary disease OR emphysema)

This currently results in the following Query:
+all:"relation trends" +(+all:pulmonary all:disease all:emphysema)

Claude
--Apple-Mail-1--513738237--


From lucene-user-return-8736-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 16:20:16 2004
Return-Path: <lucene-user-return-8736-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13483 invoked from network); 15 Jun 2004 16:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 16:20:15 -0000
Received: (qmail 86210 invoked by uid 500); 15 Jun 2004 16:20:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86152 invoked by uid 500); 15 Jun 2004 16:20:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86125 invoked by uid 99); 15 Jun 2004 16:20:15 -0000
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 09:20:15 -0700
Received: from [128.218.15.87] (beani.library.ucsf.edu [128.218.15.87])
	by gossamer.ckm.ucsf.edu (8.11.6-20030924/8.11.6) with ESMTP id i5FGJvB09813
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 09:19:57 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D51036E8-BEE7-11D8-89C8-003065E21F90@library.ucsf.edu>
Content-Transfer-Encoding: 7bit
From: Claude Devarenne <claude@library.ucsf.edu>
Subject: indexing with 1.4-rc3 only yields single .cfs file
Date: Tue, 15 Jun 2004 09:19:52 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Filter-Version: 1.14 (gossamer)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I just upgraded to 1.4-rc3 and re-indexed my data.  I did not change 
any code and noticed that in the index directory there is a single .cfs 
file which I am guessing stands for compound file system.  Search works 
fine but after checking out the latest from CVS I did not see this 
mentioned in the fileformats documentation.  Is this the normal 
behavior for indexes from now on or is something else going on?  When 
creating the index I see the .tis, .frq and other files being created.  
Maybe I need to update my indexer, sorry if I did not RTFM.

Claude


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8737-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 16:20:33 2004
Return-Path: <lucene-user-return-8737-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13717 invoked from network); 15 Jun 2004 16:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 16:20:33 -0000
Received: (qmail 87531 invoked by uid 500); 15 Jun 2004 16:20:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87472 invoked by uid 500); 15 Jun 2004 16:20:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87426 invoked by uid 99); 15 Jun 2004 16:20:30 -0000
Received: from [128.143.104.190] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.190)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 09:20:29 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id DB62878ABF8
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 12:20:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <E2FEC056-BEE4-11D8-89C8-003065E21F90@library.ucsf.edu>
References: <40CEBB8D.6040304@zilverline.org> <22204136-BEB0-11D8-8A46-000393A564E6@ehatchersolutions.com> <E2FEC056-BEE4-11D8-89C8-003065E21F90@library.ucsf.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DFD31F38-BEE7-11D8-A7A7-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: word thrown out in exact phrase with setPhraseSlop(0)
Date: Tue, 15 Jun 2004 12:20:10 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 15, 2004, at 11:58 AM, Claude Devarenne wrote:
> In my application, when a user searches on an exact phrase like "key 
> to project" the word "to" gets thrown out.  I currently use the query 
> parser and enclose the user query string in quotes.  I did 
> setPhraseSlop(0) but that did not help.  Would this be resolved by 
> building a phrase query?

It only gets thrown out because you're using an analyzer that removes 
stop words.  If you used that same analyzer for indexing, then matches 
should be made just fine as the same phrase would still have had "to" 
thrown out.  Phrase slop has nothing to do with the analysis of 
phrases.

> I looked at the JUnit tests for phrase query and it looks like I have 
> to parse the incoming query string, add the terms to the phrase query 
> and field to search on for each term.  Is that correct?  How do I 
> handle complex queries where an exact phrase may be combined with 
> several boolean connectors as in:
>
> "relation to trends" AND (pulmonary disease OR emphysema)
>
> This currently results in the following Query:
> +all:"relation trends" +(+all:pulmonary all:disease all:emphysema)

What is the issue you're having with the stop word removal?  More 
matches than it should return?  If you remove stop words you lose 
precision, no question.  What you are showing is as expected given stop 
word removal during analysis.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8738-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 16:47:43 2004
Return-Path: <lucene-user-return-8738-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30622 invoked from network); 15 Jun 2004 16:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 16:47:43 -0000
Received: (qmail 81461 invoked by uid 500); 15 Jun 2004 16:47:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81420 invoked by uid 500); 15 Jun 2004 16:47:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81390 invoked by uid 99); 15 Jun 2004 16:47:50 -0000
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 09:47:50 -0700
Received: from [128.218.15.87] (beani.library.ucsf.edu [128.218.15.87])
	by gossamer.ckm.ucsf.edu (8.11.6-20030924/8.11.6) with ESMTP id i5FGlUB11164
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 09:47:30 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v618)
In-Reply-To: <DFD31F38-BEE7-11D8-A7A7-000393A564E6@ehatchersolutions.com>
References: <40CEBB8D.6040304@zilverline.org> <22204136-BEB0-11D8-8A46-000393A564E6@ehatchersolutions.com> <E2FEC056-BEE4-11D8-89C8-003065E21F90@library.ucsf.edu> <DFD31F38-BEE7-11D8-A7A7-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <AE0EF9A6-BEEB-11D8-89C8-003065E21F90@library.ucsf.edu>
Content-Transfer-Encoding: 7bit
From: Claude Devarenne <claude@library.ucsf.edu>
Subject: Re: word thrown out in exact phrase with setPhraseSlop(0)
Date: Tue, 15 Jun 2004 09:47:25 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.618)
X-Filter-Version: 1.14 (gossamer)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks, I was using StandardAnalyzer (both for indexing and serarching) 
so that explains it.

Claude

On Jun 15, 2004, at 9:20 AM, Erik Hatcher wrote:

> On Jun 15, 2004, at 11:58 AM, Claude Devarenne wrote:
>> In my application, when a user searches on an exact phrase like "key 
>> to project" the word "to" gets thrown out.  I currently use the query 
>> parser and enclose the user query string in quotes.  I did 
>> setPhraseSlop(0) but that did not help.  Would this be resolved by 
>> building a phrase query?
>
> It only gets thrown out because you're using an analyzer that removes 
> stop words.  If you used that same analyzer for indexing, then matches 
> should be made just fine as the same phrase would still have had "to" 
> thrown out.  Phrase slop has nothing to do with the analysis of 
> phrases.
>
>> I looked at the JUnit tests for phrase query and it looks like I have 
>> to parse the incoming query string, add the terms to the phrase query 
>> and field to search on for each term.  Is that correct?  How do I 
>> handle complex queries where an exact phrase may be combined with 
>> several boolean connectors as in:
>>
>> "relation to trends" AND (pulmonary disease OR emphysema)
>>
>> This currently results in the following Query:
>> +all:"relation trends" +(+all:pulmonary all:disease all:emphysema)
>
> What is the issue you're having with the stop word removal?  More 
> matches than it should return?  If you remove stop words you lose 
> precision, no question.  What you are showing is as expected given 
> stop word removal during analysis.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8739-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 17:11:31 2004
Return-Path: <lucene-user-return-8739-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51838 invoked from network); 15 Jun 2004 17:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 17:11:31 -0000
Received: (qmail 52913 invoked by uid 500); 15 Jun 2004 17:08:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51219 invoked by uid 500); 15 Jun 2004 17:08:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48050 invoked by uid 99); 15 Jun 2004 17:07:39 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 15 Jun 2004 10:07:39 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Tue, 15 Jun 2004 13:07:19 -0400
Message-Id: <s0cef487.026@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Tue, 15 Jun 2004 13:06:52 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: RE : RE : Analyzers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

For the reflection way, I use a configuration file that specifies the =
initial state and then use a no-argument constructor.  Since I don't think =
that is very generalizable, I thought maybe you could do a copy() and then =
a reset() method (similar to the JSP tag release() method).  The copy() =
method would create a new memory object. Then reset would put itself back =
into a clean state.  Many of the filters have read-only information (such =
as the Stop filter), so reset wouldn't have to do anything.  Other's may =
require more, such as preserving the initialization state (which will take =
up extra memory).  I don't know if this is a generalizable process or if =
it is worth the effort.  The reflection way works well for me b/c I am =
already using a configuration file, so a few more properties aren't a big =
deal.  One of the things that is nice about Lucene is it doesn't require a =
configuration file.

Not sure if this is enough to go, so let me know.

-Grant

>>> rasik.pandey@ajlsm.com 06/15/04 05:04AM >>>
> The jist of it is it isn't thread safe yet.  Although I don't
> think it is too much of a leap to make it thread-safe.  I just
> haven't had time to do so.  It can be done through reflection
> or perhaps by requiring a "deep" copy/reset of filter states.

I had a quick look and found that using reflection would be complicated as =
some TokenFilters need extra objects at construction time like a charset[](=
RussianStemFilter) or a HashSet of stopWords (StopFilter). Do you see a =
simple way around this? What were your thoughts for the "deep" copy/reset =
you mention?

Regards,
RBP=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8740-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 18:16:27 2004
Return-Path: <lucene-user-return-8740-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96513 invoked from network); 15 Jun 2004 18:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 18:16:27 -0000
Received: (qmail 427 invoked by uid 500); 15 Jun 2004 18:16:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 304 invoked by uid 500); 15 Jun 2004 18:16:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 125 invoked by uid 99); 15 Jun 2004 18:16:26 -0000
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 15 Jun 2004 11:16:26 -0700
Message-ID: <20040615181553.86219.qmail@web12707.mail.yahoo.com>
Received: from [211.95.204.99] by web12707.mail.yahoo.com via HTTP; Tue, 15 Jun 2004 11:15:53 PDT
Date: Tue, 15 Jun 2004 11:15:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing with 1.4-rc3 only yields single .cfs file
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <D51036E8-BEE7-11D8-89C8-003065E21F90@library.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We switched from multi-file to compound index structure in one of the
recent RCs.  This should be mentioned in CHANGES.txt file.  The change
was made to make it more difficult for people to reach 'Too many open
files' situations.

Otis


--- Claude Devarenne <claude@library.ucsf.edu> wrote:
> Hi,
> 
> I just upgraded to 1.4-rc3 and re-indexed my data.  I did not change 
> any code and noticed that in the index directory there is a single
> .cfs 
> file which I am guessing stands for compound file system.  Search
> works 
> fine but after checking out the latest from CVS I did not see this 
> mentioned in the fileformats documentation.  Is this the normal 
> behavior for indexes from now on or is something else going on?  When
> 
> creating the index I see the .tis, .frq and other files being
> created.  
> Maybe I need to update my indexer, sorry if I did not RTFM.
> 
> Claude
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8741-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 18:33:53 2004
Return-Path: <lucene-user-return-8741-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9943 invoked from network); 15 Jun 2004 18:33:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 18:33:53 -0000
Received: (qmail 55823 invoked by uid 500); 15 Jun 2004 18:34:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55777 invoked by uid 500); 15 Jun 2004 18:34:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55753 invoked by uid 99); 15 Jun 2004 18:34:01 -0000
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 11:34:01 -0700
Received: from [192.168.1.100] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i5FIXTCc002398
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 11:33:29 -0700
Message-ID: <40CF40EF.2080009@newsmonster.org>
Date: Tue, 15 Jun 2004 11:33:19 -0700
From: Kevin Burton <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040514
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: [Fwd: PROPOSAL: Lucene external content store for stored fields]
Content-Type: multipart/alternative;
 boundary="------------080301050804090104040808"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------080301050804090104040808
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Sent from the wrong email account and bounced :-/

-------- Original Message --------
Subject: 	PROPOSAL: Lucene external content store for stored fields
Date: 	Mon, 14 Jun 2004 17:42:19 -0700
From: 	Kevin Burton <burton@sofari.com>
To: 	Lucene Users List <lucene-user@jakarta.apache.org>



I created this proposal because we need this fixed at work. I want to go 
ahead and work on a vertical fix for our version of lucene and then 
submit this back to Jakarta. 

There seems to be a lot of interest here and I wanted to get feedback 
from the list before moving forward ...

Should I put this in the wiki?!

Kevin

** OVERVIEW **

Currently Lucene supports 'stored fields; where the content of these 
fields are
kept within the lucene index for use in the future.

While acceptable for small indexes, larger amounts of stored fields prevent:

- Fast index merges since the full content has to be continually merged.

- Storing the indexes in memory (since a LOT of memory would be required and
 this is cost prohibitive)

- Fast queries since block caching can't be used on the index data.

For example in our current setup our index size is 20G.  Nearly 90% of 
this is
content.  If we could store the content outside of Lucene our merges and
searches would be MUCH faster.  If we could store the index in MEMORY 
this could
be orders of magnitude faster.

** PROPOSAL **

Provide an external field storage mechanism which supports legacy indexes
without modification.  Content is stored in a "content segment". The only
changes would be a field with 3(or 4 if checksum enabled) values.

 - CS_SEGMENT

       Logical ID of the content segment.  This is an integer value.  
There is
       a global Lucene property named CS_ROOT which stores all the content.
       The segments are just flat files with pointers.  Segments are broken
       into logical pieces by time and size.  Usually 100M of content 
would be
       in one segment.

 - CS_OFFSET

       The byte offset of the field.

 - CS_LENGTH

       The length of the field.

 - CS_CHECKSUM

       Optional checksum to verify that the content is correct when fetched
       from the index.

 - The field value here would be exactly 'N:O:L' where N is the segment 
number,
   O is the offset, and L is the length.  O and L are 64bit values.  N 
is a 32
   bit value (though 64bit wouldn't really hurt).

This mechanism allows for the external storage of any named field.
  
CS_OFFSET, and CS_LENGTH allow use with RandomAccessFile and new NIO 
code for
efficient content lookup.  (Though filehandle caching should probably be 
used).

Since content is broken into logical 100M segments the underlying 
filesystem can
orgnize the file into contiguous blocks for efficient non-fragmented lookup.

File manipulation is easy and indexes can be merged by simply 
concatenating the
second file to the end of the first.  (Though the segment, offset, and 
length
need to be updated).  (FIXME: I think I need to think about this more 
since I
will have < 100M per syncs)

Supporting full unicode is important.  Full java.lang.String storage is used
with String.getBytes() so we should be able to avoid unicode issues.  If 
Java
has a correct java.lang.String representation it's possible easily add 
unicode
support just by serializing the byte representation. (Note that the JDK says
that the DEFAULT system char encoding is used so if this is ever changed it
might break the index)

While Linux and modern versions of Windows (not sure about OSX) support 
64bit
filesystems the 4G storage boundary of 32bit filesystems (ext2 is an 
example)
are an issue.  Using smaller indexes can prevent this but eventually segment
lookup in the filesystem will be slow.  This will only happen within 
terabyte
storage systems so hopefully the developer has migrated to another (modern)
filesystem such as XFS.

** FEATURES **

   - Must be able to replicate indexes easily to other hosts.

   - Adding content to the index must be CHEAP

   - Deletes need to be cheap (these are cheap for older content.  Just 
discard
     older indexes)

   - Filesystem needs to be able to optimize storage

   - Must support UNICODE and binary content (images, blobs, byte arrays,
     serialized objects, etc)

   - Filesystem metadata operations should be fast.  Since content is 
kept in
     LARGE indexes this is easy to avoid.

   - Migration to the new system from legacy indexes should be fast and
     painless for future developers
  

-- 

Please reply using PGP.

   http://peerfear.org/pubkey.asc    
   
   NewsMonster - http://www.newsmonster.org/
   
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
 IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster




-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------080301050804090104040808--

From lucene-user-return-8742-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 20:46:03 2004
Return-Path: <lucene-user-return-8742-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7126 invoked from network); 15 Jun 2004 20:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 20:46:02 -0000
Received: (qmail 38609 invoked by uid 500); 15 Jun 2004 20:46:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38534 invoked by uid 500); 15 Jun 2004 20:46:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38419 invoked by uid 99); 15 Jun 2004 20:46:11 -0000
Received: from [128.143.104.190] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.190)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 13:46:11 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 336CB78B8B3
	for <lucene-user@jakarta.apache.org>; Tue, 15 Jun 2004 16:45:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to use PhraseQuery Class?
Date: Tue, 15 Jun 2004 16:45:44 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 15, 2004, at 11:21 AM, Daniel de Souza Teixeira wrote:
> Hi!
> I need some information about PhraseQuery Class.
>
> How to use this class ?

Are you using QueryParser to create the query?  If so, have a look at=20
the query parser syntax page in the docs (or the Lucene website) -=20
basically just surround the phase with double-quotes - "this is some=20
phrase".

If you are using PhraseQuery directly, have a look at Lucene's own=20
JUnit test cases (notice a trend here of me pointing folks to the test=20=

cases for documentation?!  :)  Here's a copy/paste:

     Query query =3D new PhraseQuery();
     query.setSlop(2);
     query.add(new Term("field", "one"));
     query.add(new Term("field", "five"));

Erik




>
> I tried to use, but I couldn't.
> I created an index, just with 2 fields:
>    - path: path of the file
>    - contents: the text of the file (pdf,txt,html,doc,rtf ...)
>
> I want to search with phrases... Is it possible ?
>
> This is te code...
>
> public void indexFiles(String filePath, String documentText, String
> indexName, boolean create) {
>
> 	try {
>
>
> 		IndexWriter writer =3D null;
>
> 		File index =3D new File ("./" + indexName);
>
> 		if (!index.exists()) {
> 			writer =3D new IndexWriter(indexName, null, =
true);
> 			writer.optimize();
> 			writer.close();
> 		}
>
> 		writer =3D new IndexWriter(indexName, new =
StandardAnalyzer(), false);
>
> 		Document doc =3D new Document();
>
> 		doc.add(Field.UnIndexed ("path",filePath));
> 		doc.add(Field.Text("contents",documentText));
>
> 		writer.addDocument(doc);
>
> 		doc =3D null;
> 		writer.close();
> 	}
>
> 	catch (Exception ex) {
> 		System.out.println("Error - " + ex);
> 	}
>
> }
>
> Thanks!
>
> Regards.
>
> --=20
> Daniel de Souza Teixeira
> Laborat=F3rio de Inova=E7=E3o em Software - Unicamp/Ci&T
> Campinas-SP
> Brasil
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8743-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 20:54:01 2004
Return-Path: <lucene-user-return-8743-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11068 invoked from network); 15 Jun 2004 20:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 20:54:01 -0000
Received: (qmail 63978 invoked by uid 500); 15 Jun 2004 20:54:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63731 invoked by uid 500); 15 Jun 2004 20:54:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63718 invoked by uid 99); 15 Jun 2004 20:54:16 -0000
Received: from [144.32.40.3] (HELO mailgw.cs.york.ac.uk) (144.32.40.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 13:54:16 -0700
Received: from minster ([144.32.40.2] helo=minster.cs.york.ac.uk)
	by mailgw.cs.york.ac.uk with esmtp (TLSv1:AES256-SHA:256)
	(Exim 4.24)
	id 1BaKrv-0004QY-RX
	for lucene-user@jakarta.apache.org; Tue, 15 Jun 2004 21:49:19 +0100
Received: from pc245.ad.cs.york.ac.uk ([144.32.81.246])
	by minster.cs.york.ac.uk with esmtp (Exim 4.24)
	id 1BaKrv-0001Ur-Jr
	for lucene-user@jakarta.apache.org; Tue, 15 Jun 2004 21:49:19 +0100
Message-ID: <40CF60D0.4060606@cs.york.ac.uk>
Date: Tue, 15 Jun 2004 21:49:20 +0100
From: Thimal Jayasooriya <thimal@cs.york.ac.uk>
Organization: University of York
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How to use PhraseQuery Class?
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br> <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
In-Reply-To: <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Since Erik didn't mention this article that he wrote, I'll chip in with 
it ... *grin*

http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
Doesn't have a direct example of PhraseQuery, but it was useful reading 
to get started (for me, anyway).

Regards,
Thimal

Erik Hatcher wrote:

> On Jun 15, 2004, at 11:21 AM, Daniel de Souza Teixeira wrote:
>
>> Hi!
>> I need some information about PhraseQuery Class.
>>
>> How to use this class ?
>
>
> Are you using QueryParser to create the query?  If so, have a look at 
> the query parser syntax page in the docs (or the Lucene website) - 
> basically just surround the phase with double-quotes - "this is some 
> phrase".
>
> If you are using PhraseQuery directly, have a look at Lucene's own 
> JUnit test cases (notice a trend here of me pointing folks to the test 
> cases for documentation?!  :)  Here's a copy/paste:
>
>     Query query = new PhraseQuery();
>     query.setSlop(2);
>     query.add(new Term("field", "one"));
>     query.add(new Term("field", "five"));
>
> Erik
>
>
>
>
>>
>> I tried to use, but I couldn't.
>> I created an index, just with 2 fields:
>>    - path: path of the file
>>    - contents: the text of the file (pdf,txt,html,doc,rtf ...)
>>
>> I want to search with phrases... Is it possible ?
>>
>> This is te code...
>>
>> public void indexFiles(String filePath, String documentText, String
>> indexName, boolean create) {
>>
>>     try {
>>
>>
>>         IndexWriter writer = null;
>>
>>         File index = new File ("./" + indexName);
>>
>>         if (!index.exists()) {
>>             writer = new IndexWriter(indexName, null, true);
>>             writer.optimize();
>>             writer.close();
>>         }
>>
>>         writer = new IndexWriter(indexName, new StandardAnalyzer(), 
>> false);
>>
>>         Document doc = new Document();
>>
>>         doc.add(Field.UnIndexed ("path",filePath));
>>         doc.add(Field.Text("contents",documentText));
>>
>>         writer.addDocument(doc);
>>
>>         doc = null;
>>         writer.close();
>>     }
>>
>>     catch (Exception ex) {
>>         System.out.println("Error - " + ex);
>>     }
>>
>> }
>>
>> Thanks!
>>
>> Regards.
>>
>> -- 
>> Daniel de Souza Teixeira
>> Laboratrio de Inovao em Software - Unicamp/Ci&T
>> Campinas-SP
>> Brasil
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8744-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 15 21:58:46 2004
Return-Path: <lucene-user-return-8744-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43120 invoked from network); 15 Jun 2004 21:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Jun 2004 21:58:46 -0000
Received: (qmail 53456 invoked by uid 500); 15 Jun 2004 21:59:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53430 invoked by uid 500); 15 Jun 2004 21:59:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53416 invoked by uid 99); 15 Jun 2004 21:59:04 -0000
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 15 Jun 2004 14:59:04 -0700
Received: from syr.edu (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.124DC748@mailer.syr.edu>; Tue, 15 Jun 2004 17:58:31 -0400
Message-ID: <40CF7108.9060706@syr.edu>
Date: Tue, 15 Jun 2004 17:58:32 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: [Fwd: PROPOSAL: Lucene external content store for stored fields]
References: <40CF40EF.2080009@newsmonster.org>
In-Reply-To: <40CF40EF.2080009@newsmonster.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin,

I think that this sort of thing should be built on top of the 
functionality provided by the binary fields proposal, or at least made 
to work with it:

<URL:http://issues.apache.org/bugzilla/show_bug.cgi?id=29370>

This would take care of the blob-vs.-text aspect of your proposal.

Also:

Kevin Burton wrote:
> Supporting full unicode is important.  Full java.lang.String storage is 
> used with String.getBytes() so we should be able to avoid unicode issues.
> If Java has a correct java.lang.String representation it's possible easily
> add unicode support just by serializing the byte representation. (Note
> that the JDK says that the DEFAULT system char encoding is used so if this
> is ever changed it might break the index)

It's a bad idea to use the zero-parameter version of String.getBytes() 
(for example, what if you want to share an index between two platforms 
with different DEFAULT system char encodings?).  Fortunately, there's a 
better alternative: for the suprisingly low price of 
"String.getBytes(String charsetName)", platform independence can be 
yours today.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8745-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 07:51:53 2004
Return-Path: <lucene-user-return-8745-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18925 invoked from network); 16 Jun 2004 07:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 07:51:52 -0000
Received: (qmail 53333 invoked by uid 500); 16 Jun 2004 07:52:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53207 invoked by uid 500); 16 Jun 2004 07:52:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53182 invoked by uid 99); 16 Jun 2004 07:52:15 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 00:52:15 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G7pTfb8929450
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 09:51:29 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G7pTfr8478744
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 09:51:29 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RuntimeException: cannot determine sort type!
MIME-Version: 1.0
Message-ID: <OF0C7E2729.675AA034-ONC1256EB5.00291AF9-C1256EB5.002B29F9@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 09:51:27 +0200
Content-Type: multipart/alternative; boundary="=_alternative 002B29D1C1256EB5_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 002B29D1C1256EB5_=
Content-Type: text/plain; charset="us-ascii"

Hello all,

During concurency test, i.e. indexing and searching simultaniosly, 
Searcher stumbled with following error: 

java.lang.RuntimeException: no terms in field modified - cannot determine 
sort type
        at 
org.apache.lucene.search.FieldSortedHitQueue.determineComparator(FieldSortedHitQueue.java:187)
        at 
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:125)
        at 
org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSortedHitQueue.java:54)
        at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
        at 
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)
        at novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:246)
        at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
        at novartis.lucene.LuceneItems.main(LuceneItems.java:574)

Indexer  was optimizing  and closing after every 300 entries.

Searcher did query every second:  hits = ms.search(query,new Sort("modified",true));
where "modified" is in DateField.timeToString(modified)) format and query 
like "+contents:novartis"

The values for field "modified" are definitly existing.

On Indexer side no exceptions took place. 

Both processes used the same lockDir.

Searcher works smartly on created index.

Please help.

Have a nice day
J.
--=_alternative 002B29D1C1256EB5_=--

From lucene-user-return-8746-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 08:04:38 2004
Return-Path: <lucene-user-return-8746-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25741 invoked from network); 16 Jun 2004 08:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 08:04:38 -0000
Received: (qmail 74103 invoked by uid 500); 16 Jun 2004 08:05:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74039 invoked by uid 500); 16 Jun 2004 08:05:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74021 invoked by uid 99); 16 Jun 2004 08:05:03 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 01:05:03 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G83xcv13451388
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:03:59 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G83xfX7086190
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:03:59 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: indexing with 1.4-rc3 only yields single .cfs file
MIME-Version: 1.0
Message-ID: <OFD9EAF473.252771A4-ONC1256EB5.002BF28F-C1256EB5.002C4EB4@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 10:03:57 +0200
Content-Type: multipart/alternative; boundary="=_alternative 002C4EB1C1256EB5_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 002C4EB1C1256EB5_=
Content-Type: text/plain; charset="us-ascii"

Otis,
can You explain please why 1.4-rc3 leaves old files like _*.cfs in index 
folder after optimization.
The reference to them can be found also  in deletetable file. Is it a bug? 






We switched from multi-file to compound index structure in one of the
recent RCs.  This should be mentioned in CHANGES.txt file.  The change
was made to make it more difficult for people to reach 'Too many open
files' situations.

Otis


--- Claude Devarenne <claude@library.ucsf.edu> wrote:
> Hi,
> 
> I just upgraded to 1.4-rc3 and re-indexed my data.  I did not change 
> any code and noticed that in the index directory there is a single
> .cfs 
> file which I am guessing stands for compound file system.  Search
> works 
> fine but after checking out the latest from CVS I did not see this 
> mentioned in the fileformats documentation.  Is this the normal 
> behavior for indexes from now on or is something else going on?  When
> 
> creating the index I see the .tis, .frq and other files being
> created. 
> Maybe I need to update my indexer, sorry if I did not RTFM.
> 
> Claude
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




--=_alternative 002C4EB1C1256EB5_=--

From lucene-user-return-8747-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 08:27:20 2004
Return-Path: <lucene-user-return-8747-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41006 invoked from network); 16 Jun 2004 08:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 08:27:19 -0000
Received: (qmail 33822 invoked by uid 500); 16 Jun 2004 08:27:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33781 invoked by uid 500); 16 Jun 2004 08:27:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33725 invoked by uid 99); 16 Jun 2004 08:27:28 -0000
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 01:27:28 -0700
Received: from tucholsky.office.tanto.de (morus.office.tanto.de [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 1320123BCD
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:27:14 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5G8QgGL021028
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:26:42 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i5G8QgDv021024;
	Wed, 16 Jun 2004 10:26:42 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16592.1090.828907.30469@tanto-xipolis.de>
Date: Wed, 16 Jun 2004 10:26:42 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: indexing with 1.4-rc3 only yields single .cfs file
In-Reply-To: <OFD9EAF473.252771A4-ONC1256EB5.002BF28F-C1256EB5.002C4EB4@EU.novartis.net>
References: <OFD9EAF473.252771A4-ONC1256EB5.002BF28F-C1256EB5.002C4EB4@EU.novartis.net>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

iouli.golovatyi@group.novartis.com writes:
> Otis,
> can You explain please why 1.4-rc3 leaves old files like _*.cfs in index 
> folder after optimization.
> The reference to them can be found also  in deletetable file. Is it a bug? 
> 
If you're on windows that's presumably the same situation as for old index 
files of a non compound index after optimization.
The files cannot be deleted as long as they are open by a searcher.
So lucene has to delay the deletion, which I guess deletetable is used
for.
On unix/linux you shouldn't see the old files anymore, though they are still
there (the files which are independet from the directory entries), and will be 
removed by the system, when they are closed by the last process that had
them open.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8748-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 08:34:09 2004
Return-Path: <lucene-user-return-8748-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45487 invoked from network); 16 Jun 2004 08:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 08:34:08 -0000
Received: (qmail 52501 invoked by uid 500); 16 Jun 2004 08:33:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52242 invoked by uid 500); 16 Jun 2004 08:33:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52154 invoked by uid 99); 16 Jun 2004 08:33:13 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 01:33:13 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G8WOJM10256544
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:32:24 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G8WOD56234112
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:32:24 +0200
Subject: Re: indexing with 1.4-rc3 only yields single .cfs file
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF298DC25B.B454BEDD-ONC1256EB5.002EB0CC-C1256EB5.002EE901@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 10:32:23 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Yes I'm on windows, but... I got this result  without searching parallely.
Moreover, with 1.4-rc2 I got just one file as promised.




iouli.golovatyi@group.novartis.com writes:
> Otis,
> can You explain please why 1.4-rc3 leaves old files like _*.cfs in index
> folder after optimization.
> The reference to them can be found also  in deletetable file. Is it a
bug?
>
If you're on windows that's presumably the same situation as for old index
files of a non compound index after optimization.
The files cannot be deleted as long as they are open by a searcher.
So lucene has to delay the deletion, which I guess deletetable is used
for.
On unix/linux you shouldn't see the old files anymore, though they are
still
there (the files which are independet from the directory entries), and will
be
removed by the system, when they are closed by the last process that had
them open.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8749-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 08:41:10 2004
Return-Path: <lucene-user-return-8749-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50985 invoked from network); 16 Jun 2004 08:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 08:41:10 -0000
Received: (qmail 76691 invoked by uid 500); 16 Jun 2004 08:41:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76657 invoked by uid 500); 16 Jun 2004 08:41:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76641 invoked by uid 99); 16 Jun 2004 08:41:32 -0000
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 16 Jun 2004 01:41:32 -0700
Message-ID: <20040616084032.12795.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.99] by web12704.mail.yahoo.com via HTTP; Wed, 16 Jun 2004 01:40:32 PDT
Date: Wed, 16 Jun 2004 01:40:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: RuntimeException: cannot determine sort type!
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <OF0C7E2729.675AA034-ONC1256EB5.00291AF9-C1256EB5.002B29F9@EU.novartis.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I can't comment on the soft exception (Erik or Tim may be able to
help), but I can comment on optimizing your index after every 300
entries:
unless your search is getting too slow, or you are running out of file
handles, there is no need to optimize the index while you are building
it, and that actually prolongs indexing.  Just optimize it at the end.

Otis


--- iouli.golovatyi@group.novartis.com wrote:
> Hello all,
> 
> During concurency test, i.e. indexing and searching simultaniosly, 
> Searcher stumbled with following error: 
> 
> java.lang.RuntimeException: no terms in field modified - cannot
> determine 
> sort type
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.determineComparator(FieldSortedHitQueue.java:187)
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:125)
>         at 
>
org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSortedHitQueue.java:54)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
>         at 
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>         at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)
>         at
> novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:246)
>         at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
>         at novartis.lucene.LuceneItems.main(LuceneItems.java:574)
> 
> Indexer  was optimizing  and closing after every 300 entries.
> 
> Searcher did query every second:  hits = ms.search(query,new
> Sort("modified",true));
> where "modified" is in DateField.timeToString(modified)) format and
> query 
> like "+contents:novartis"
> 
> The values for field "modified" are definitly existing.
> 
> On Indexer side no exceptions took place. 
> 
> Both processes used the same lockDir.
> 
> Searcher works smartly on created index.
> 
> Please help.
> 
> Have a nice day
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8750-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 08:54:19 2004
Return-Path: <lucene-user-return-8750-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60609 invoked from network); 16 Jun 2004 08:54:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 08:54:19 -0000
Received: (qmail 19219 invoked by uid 500); 16 Jun 2004 08:54:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19095 invoked by uid 500); 16 Jun 2004 08:54:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18974 invoked by uid 99); 16 Jun 2004 08:54:27 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 01:54:27 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G8rbgn13525078
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:53:37 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G8rb0m7569658
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:53:37 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: RuntimeException: cannot determine sort type!
MIME-Version: 1.0
Message-ID: <OF2695FF29.E73D1872-ONC1256EB5.002FF208-C1256EB5.0030DA66@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 10:53:36 +0200
Content-Type: multipart/alternative; boundary="=_alternative 0030DA49C1256EB5_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 0030DA49C1256EB5_=
Content-Type: text/plain; charset="us-ascii"

As a matter of fact there are no end. I just try to simulate the real 
life, i.e.  information is coming  from different providers with speed 3-5 
messages per s. I cash it ( c. 300 entries in bulk)  and process the whole 
bulk. After that I optimize, otherwise search is too slow.





Hello,

I can't comment on the soft exception (Erik or Tim may be able to
help), but I can comment on optimizing your index after every 300
entries:
unless your search is getting too slow, or you are running out of file
handles, there is no need to optimize the index while you are building
it, and that actually prolongs indexing.  Just optimize it at the end.

Otis


--- iouli.golovatyi@group.novartis.com wrote:
> Hello all,
> 
> During concurency test, i.e. indexing and searching simultaniosly, 
> Searcher stumbled with following error: 
> 
> java.lang.RuntimeException: no terms in field modified - cannot
> determine 
> sort type
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.determineComparator(FieldSortedHitQueue.java:187)
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:125)
>         at 
>
org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSortedHitQueue.java:54)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
>         at 
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>         at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)
>         at
> novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:246)
>         at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
>         at novartis.lucene.LuceneItems.main(LuceneItems.java:574)
> 
> Indexer  was optimizing  and closing after every 300 entries.
> 
> Searcher did query every second:  hits = ms.search(query,new
> Sort("modified",true));
> where "modified" is in DateField.timeToString(modified)) format and
> query 
> like "+contents:novartis"
> 
> The values for field "modified" are definitly existing.
> 
> On Indexer side no exceptions took place. 
> 
> Both processes used the same lockDir.
> 
> Searcher works smartly on created index.
> 
> Please help.
> 
> Have a nice day
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




--=_alternative 0030DA49C1256EB5_=--

From lucene-user-return-8751-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 09:14:32 2004
Return-Path: <lucene-user-return-8751-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74249 invoked from network); 16 Jun 2004 09:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 09:14:32 -0000
Received: (qmail 78033 invoked by uid 500); 16 Jun 2004 09:14:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77961 invoked by uid 500); 16 Jun 2004 09:14:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77922 invoked by uid 99); 16 Jun 2004 09:14:46 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 02:14:46 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 8B0E878C851
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 05:13:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OF0C7E2729.675AA034-ONC1256EB5.00291AF9-C1256EB5.002B29F9@EU.novartis.net>
References: <OF0C7E2729.675AA034-ONC1256EB5.00291AF9-C1256EB5.002B29F9@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7BA65482-BF75-11D8-AFB6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RuntimeException: cannot determine sort type!
Date: Wed, 16 Jun 2004 05:13:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Are you sure every document has a single "modified" indexed term?  How  
are you indexing it?

	Erik


On Jun 16, 2004, at 3:51 AM, iouli.golovatyi@group.novartis.com wrote:

> Hello all,
>
> During concurency test, i.e. indexing and searching simultaniosly,
> Searcher stumbled with following error:
>
> java.lang.RuntimeException: no terms in field modified - cannot  
> determine
> sort type
>         at
> org.apache.lucene.search.FieldSortedHitQueue.determineComparator(FieldS 
> ortedHitQueue.java:187)
>         at
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldS 
> ortedHitQueue.java:125)
>         at
> org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSort 
> edHitQueue.java:54)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
>         at
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>         at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)
>         at novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:246)
>         at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
>         at novartis.lucene.LuceneItems.main(LuceneItems.java:574)
>
> Indexer  was optimizing  and closing after every 300 entries.
>
> Searcher did query every second:  hits = ms.search(query,new  
> Sort("modified",true));
> where "modified" is in DateField.timeToString(modified)) format and  
> query
> like "+contents:novartis"
>
> The values for field "modified" are definitly existing.
>
> On Indexer side no exceptions took place.
>
> Both processes used the same lockDir.
>
> Searcher works smartly on created index.
>
> Please help.
>
> Have a nice day
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8752-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 09:33:56 2004
Return-Path: <lucene-user-return-8752-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86677 invoked from network); 16 Jun 2004 09:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 09:33:56 -0000
Received: (qmail 37379 invoked by uid 500); 16 Jun 2004 09:34:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37311 invoked by uid 500); 16 Jun 2004 09:34:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37284 invoked by uid 99); 16 Jun 2004 09:34:14 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 02:34:14 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G9XPMA8699954
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 11:33:25 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5G9XNAB8552688
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 11:33:24 +0200
Subject: Re: RuntimeException: cannot determine sort type!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF6F05070C.6B2825F6-ONC1256EB5.0032D4B7-C1256EB5.00347E2B@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 11:33:21 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N






Are you sure every document has a single "modified" indexed term?

What do You call single? It's just one field, defined as keyword, but i=
t
content can be the same, because it's a timestamp. Every doc has it, th=
is I
garantee.

How  are you indexing it?

I have a bulk file with entries like:

FT=AC20040219174432=AC=AC20040219/17/44/AUT_33957308=ACWatch out for re=
lative
valuations performance=ACFT=AC11111111=ACD:=ACyyyyMM
...
where 20040219174432 is "modified" field content
and 20040219/17/44/AUT_33957308 relative pathname of document to be ind=
exed

I use 1.4-rc3





             Erik


On Jun 16, 2004, at 3:51 AM, iouli.golovatyi@group.novartis.com wrote:

> Hello all,
>
> During concurency test, i.e. indexing and searching simultaniosly,
> Searcher stumbled with following error:
>
> java.lang.RuntimeException: no terms in field modified - cannot
> determine
> sort type
>         at
> org.apache.lucene.search.FieldSortedHitQueue.determineComparator(Fiel=
dS
> ortedHitQueue.java:187)
>         at
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(Fiel=
dS
> ortedHitQueue.java:125)
>         at
> org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSo=
rt
> edHitQueue.java:54)
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)=

>         at
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)=

>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)=

>         at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)=

>         at novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:24=
6)
>         at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
>         at novartis.lucene.LuceneItems.main(LuceneItems.java:574)
>
> Indexer  was optimizing  and closing after every 300 entries.
>
> Searcher did query every second:  hits =3D ms.search(query,new
> Sort("modified",true));
> where "modified" is in DateField.timeToString(modified)) format and
> query
> like "+contents:novartis"
>
> The values for field "modified" are definitly existing.
>
> On Indexer side no exceptions took place.
>
> Both processes used the same lockDir.
>
> Searcher works smartly on created index.
>
> Please help.
>
> Have a nice day
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




=



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8753-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 10:13:46 2004
Return-Path: <lucene-user-return-8753-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12385 invoked from network); 16 Jun 2004 10:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 10:13:45 -0000
Received: (qmail 48956 invoked by uid 500); 16 Jun 2004 10:08:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47125 invoked by uid 500); 16 Jun 2004 10:07:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44370 invoked by uid 99); 16 Jun 2004 10:07:08 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 03:07:08 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id 81442192ABC
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 12:06:18 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : indexing with 1.4-rc3 only yields single .cfs file
Date: Wed, 16 Jun 2004 12:06:14 +0200
Message-ID: <002401c45389$8f08f390$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <OF298DC25B.B454BEDD-ONC1256EB5.002EB0CC-C1256EB5.002EE901@EU.novartis.net>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

=20
> Yes I'm on windows, but... I got this result  without searching
> parallely.
> Moreover, with 1.4-rc2 I got just one file as promised.

I think Doug fixed this last week. See below:

-------------------------------------
cutting     2004/06/09 04:28:46

  Modified:    .        CHANGES.txt
               src/java/org/apache/lucene/index IndexWriter.java
  Log:
  Fixed a bug where obsolete segment files were not deleted on Win32.
 =20
  Revision  Changes    Path
  1.93      +3 -1      jakarta-lucene/CHANGES.txt
 =20
  Index: CHANGES.txt
  =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
  RCS file: /home/cvs/jakarta-lucene/CHANGES.txt,v
  retrieving revision 1.92
  retrieving revision 1.93
  diff -u -r1.92 -r1.93
  --- CHANGES.txt	7 Jun 2004 16:55:51 -0000	1.92
  +++ CHANGES.txt	9 Jun 2004 11:28:46 -0000	1.93
  @@ -25,6 +25,8 @@
       termFreq(), termDocs() or termPositions() to improve
       multi-threaded performance.  (cutting)
  =20
  + 6. Fix a bug where obsolete segment files were not deleted on Win32.
  +
  =20
   1.4 RC3
  =20
 =20
 =20
 =20
  1.31      +4 -2      =
jakarta-lucene/src/java/org/apache/lucene/index/IndexWriter.java
 =20
  Index: IndexWriter.java
  =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
  RCS file: =
/home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/IndexWriter.jav=
a,v
  retrieving revision 1.30
  retrieving revision 1.31
  diff -u -r1.30 -r1.31
  --- IndexWriter.java	20 Apr 2004 19:33:35 -0000	1.30
  +++ IndexWriter.java	9 Jun 2004 11:28:46 -0000	1.31
  @@ -490,6 +490,9 @@
       segmentInfos.addElement(new SegmentInfo(mergedName, =
mergedDocCount,
                                               directory));
  =20
  +    // close readers before we attempt to delete now-obsolete =
segments
  +    merger.closeReaders();
  +
       synchronized (directory) {                 // in- & inter-process =
sync
         new Lock.With(directory.makeLock(IndexWriter.COMMIT_LOCK_NAME), =
COMMIT_LOCK_TIMEOUT) {
             public Object doBody() throws IOException {
  @@ -499,8 +502,7 @@
             }
           }.run();
       }
  -   =20
  -    merger.closeReaders();
  +
     }
  =20
     /* Some operating systems (e.g. Windows) don't permit a file to be =
deleted
 =20
 =20
 =20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8754-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 10:50:09 2004
Return-Path: <lucene-user-return-8754-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34643 invoked from network); 16 Jun 2004 10:50:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 10:50:09 -0000
Received: (qmail 82826 invoked by uid 500); 16 Jun 2004 10:50:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82774 invoked by uid 500); 16 Jun 2004 10:49:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82687 invoked by uid 99); 16 Jun 2004 10:49:58 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 03:49:58 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 90F1778CA5E
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 06:49:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OF6F05070C.6B2825F6-ONC1256EB5.0032D4B7-C1256EB5.00347E2B@EU.novartis.net>
References: <OF6F05070C.6B2825F6-ONC1256EB5.0032D4B7-C1256EB5.00347E2B@EU.novartis.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <E516D15A-BF82-11D8-AFB6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RuntimeException: cannot determine sort type!
Date: Wed, 16 Jun 2004 06:49:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 16, 2004, at 5:33 AM, iouli.golovatyi@group.novartis.com wrote:
> Are you sure every document has a single "modified" indexed term?
>
> What do You call single? It's just one field, defined as keyword, but=20=

> it
> content can be the same, because it's a timestamp. Every doc has it,=20=

> this I
> garantee.

Single means a single term for the entire document and that there is=20
not possibly two "modified" terms for a document.

> How  are you indexing it?
>
> I have a bulk file with entries like:
>
> FT=AC20040219174432=AC=AC20040219/17/44/AUT_33957308=ACWatch out for =
relative
> valuations performance=ACFT=AC11111111=ACD:=ACyyyyMM
> ...
> where 20040219174432 is "modified" field content
> and 20040219/17/44/AUT_33957308 relative pathname of document to be=20
> indexed
>
> I use 1.4-rc3

But how about some code?  Folks, please help us volunteers that love to=20=

field questions by posting *code*.  Field.Keyword?    Or Field.Text? =20
Or...????  Full line of code too... not just some partial snippet of a=20=

line.  Your modified there doesn't look like a java.util.Date.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8755-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 11:27:23 2004
Return-Path: <lucene-user-return-8755-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56536 invoked from network); 16 Jun 2004 11:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 11:27:23 -0000
Received: (qmail 3344 invoked by uid 500); 16 Jun 2004 11:26:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3116 invoked by uid 500); 16 Jun 2004 11:26:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2833 invoked by uid 99); 16 Jun 2004 11:25:59 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 04:25:59 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5GBPq3u12705946
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 13:25:52 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5GBPphd6094850
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 13:25:51 +0200
Subject: Re: RuntimeException: cannot determine sort type!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF6D3CEE97.D783DB74-ONC1256EB5.003C0F86-C1256EB5.003ECA60@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 13:25:50 +0200
MIME-Version: 1.0
Content-type: multipart/mixed; 
	Boundary="0__=4EBBE426DFAF89168f9e8a93df938690918c4EBBE426DFAF8916"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0__=4EBBE426DFAF89168f9e8a93df938690918c4EBBE426DFAF8916
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable



Well, I just didn't  want to overload people with too much code.

Actually it's pretty much standart  from lucene perspective

doc is created like this ("modified" get formated with SimpleDateFormat=

tformat =3D new SimpleDateFormat ("yyyyMMddhhmmss") by cashToIndex meto=
d,
where the IndexWriter created) :

 static Document getDocument(File f, String provider, long modified, lo=
ng
published,
                                                 String path, String ti=
tle,
String publisher, String secured )  throws
FileNotFoundException,IOException {
      Document doc =3D new Document();
      String fname=3Df.getName();
      doc.add(Field.Keyword("id", fname));
      doc.add(Field.Keyword("provider", provider));

      doc.add(Field.Keyword("modified",DateField.timeToString(modified)=
));

      doc.add(Field.Keyword("published"
,DateField.timeToString(published)));
      doc.add(Field.Keyword("path", path));
      doc.add(Field.Text("title", title));
      doc.add(Field.Keyword("publisher", publisher));
      doc.add(Field.Keyword("secured", secured));
      FileInputStream is =3D new FileInputStream(f);
      Reader reader =3D new BufferedReader(new InputStreamReader(is));
      doc.add(Field.Text("contents", reader));

      return doc;
 }


 private boolean cashToIndex (String provider,String rec_date, String
pub_date, String path,
            String title, String publisher,String secure_code,
            String root, String type, int cash){
      boolean res=3Dfalse;
      String full_ixpath=3D"",file_path=3D"";
      SimpleDateFormat tformat =3D new SimpleDateFormat ("yyyyMMddhhmms=
s");
      boolean create=3Dfalse;

      try {
            Date recd =3D tformat.parse(rec_date);
            Date pubd =3D new Date();
            if (pub_date!=3Dnull && !pub_date.equals(""))     pubd =3D
tformat.parse(pub_date);
            String sroot =3D LuceneUtil.getSlashed(root);
            full_ixpath=3Dsroot+REPOSITORY+provider+"/"
+INDEX+getFolderName(recd,type);
            file_path=3Dsroot+REPOSITORY+provider+"/"+CONTENT+path;
            File dir =3Dnew File(full_ixpath + SEG);

        // ix creation check makes sence only if ix folder name changes=

        create=3D false;
        if(!full_ixpath.equals(current_ix)){
           if(!dir.exists()) create=3Dtrue;
        }

            //try to close prev ix if opened
        if (!full_ixpath.equals(current_ix) || flash_cnt%FLASH=3D=3D0){=

                  closeIndex(cash);
          }
        //open ix
            if (!full_ixpath.equals(current_ix) || create || writer=3D=3D=
null){
                  current_ix =3D full_ixpath;
                writer =3D new IndexWriter(full_ixpath, new
PorterStemAnalyzer(), create);
                if (merge_factor!=3D0) writer.mergeFactor =3D merge_fac=
tor;
                logdata =3D "New Index : "+full_ixpath + ", creation fl=
ag =3D "
+create+", merge factor =3D "+writer.mergeFactor;
                if(log!=3Dnull)log.timePrintln(logdata);
                System.out.println(logdata);
            }

            writer.addDocument(getDocument(new
File(file_path),provider,recd.getTime(),pubd.getTime(),path,title,publi=
sher,secure_code));

            flash_cnt++;

            res =3D true;

      } catch (Exception e) {
            try{ writer.close();writer =3D null;} catch(IOException
e1){writer =3D null;}
            res =3D false;
            e.printStackTrace();
            logdata =3D "cashIndex() - caught a " + e.getClass() +" wit=
h
message: " + e.getMessage()+ "\n";
            logdata =3D logdata + " Index   Name -"+ full_ixpath+"\n";
            logdata =3D logdata + " Indexed File -"+ file_path+",     l=
ast
record ["+cnt+"]";
            if(log!=3Dnull)log.timePrintln(logdata);
            System.out.println(logdata);
      }
      return res;
 }

Searcher looks like this:

    private int getItems(String filter, int page)throws
ParseException,IOException{
            //, boolean new_frame
            String line =3D"";

            if (filter=3D=3Dnull || filter.equals("")){
                  line=3D getCurrentPeriod();
                  filter=3Dnull;
            }
            else line=3D filter;
            int first=3D-1, last=3D-1;
            if (page=3D=3D1){
                  NeisQueryParser nqp=3Dnew NeisQueryParser();
                  if (and)
nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_AND);
                  else
nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_OR);
                  // Query query =3D QueryParser.parse(line, "contents"=
,
analyzer);
                  // default OR that's why not used
                  Query query =3D nqp.parse(line);

                  formated_query=3Dquery.toString();
                  if (sort_byscore)hits =3D ms.search(query);
                  else hits =3D ms.search(query,new Sort("modified",tru=
e));
// here the "cannot determine.." exception generated!!!

                  total_hitnum=3Dhits.length();
                  if (filter!=3Dnull){
                        sdf=3Ddformat.format(new Date(stamp_from));
                        sdt=3Ddformat.format(new Date(stamp_to));
                  }
                  log.timePrintln(DBG_PRFX+user+"Search for : " +
formated_query+ ", Documents found : "+total_hitnum+", Documents age : =
["
+sdt+"-"+sdf+"]");
                  System.out.println(DBG_PRFX+user+"Search for : " +
formated_query+ ", Documents found : "+total_hitnum+", Documents age : =
["
+sdt+"-"+sdf+"]");
            }
            valid_hitnum=3D0;
            // populating output interface
        first =3D (page - 1)*page_size;
        last =3D first + page_size;
        if (last > total_hitnum) last =3D total_hitnum;
            for (int i =3D first; i < last; i++) {
                  Document doc =3D hits.doc(i);
                  String path =3D doc.get("path");

                  if (path !=3D null) {//sure is sure
                        valid_hitnum++;
                        String id=3Ddoc.get("id");
                        String modified=3Ddoc.get("modified");
                        String title=3Ddoc.get("title");
                        String provider =3D doc.get("provider");

                        float score=3Dhits.score(i);
//
                        if (id=3D=3Dnull) id=3D"unknown";
                        if (modified=3D=3Dnull) modified=3D"0";
                        if (title=3D=3Dnull) title=3D"no title";
                        if (provider=3D=3Dnull) provider=3D"unknown";
                        //keep modified key unique, 'cause it a timesta=
mp
may be same for different docs
                        if (modified_path.containsKey(modified))

modified=3Dmodified+LuceneUtil.getSep()+(++iunique);
                        modified_path.put(modified, path);
                        modified_id.put(modified, id);
                path_title.put(path,title);
                path_provider.put(path,provider);
                path_score.put(path,Float.toString(score));

                  } else {
                        log.timePrintln(DBG_PRFX+user+"Doc "+i+",Page "=

+page + ". Error - no path");
                  }
            }
      return last;
      }

please find enclose full code as well

(See attached file: code.rar)
Thanks so much for your support
J.




                                                                       =
                                                               =20
                      Erik Hatcher                                     =
                                                               =20
                      <erik@ehatchersol        To:       "Lucene Users =
List" <lucene-user@jakarta.apache.org>                         =20
                      utions.com>              cc:                     =
                                                               =20
                                               Subject:  Re: RuntimeExc=
eption: cannot determine sort type!                            =20
                      16.06.2004 12:49                                 =
                                                               =20
                      Please respond to        Category:       |-------=
------------------|                                            =20
                      "Lucene Users                            | ( ) Ac=
tion needed       |                                            =20
                      List"                                    | ( ) De=
cision needed     |                                            =20
                                                               | ( ) Ge=
neral Information |                                            =20
                                                               |-------=
------------------|                                            =20
                                                                       =
                                                               =20
                                                                       =
                                                               =20





On Jun 16, 2004, at 5:33 AM, iouli.golovatyi@group.novartis.com wrote:
> Are you sure every document has a single "modified" indexed term?
>
> What do You call single? It's just one field, defined as keyword, but=

> it
> content can be the same, because it's a timestamp. Every doc has it,
> this I
> garantee.

Single means a single term for the entire document and that there is
not possibly two "modified" terms for a document.

> How  are you indexing it?
>
> I have a bulk file with entries like:
>
> FT=AC20040219174432=AC=AC20040219/17/44/AUT_33957308=ACWatch out for =
relative
> valuations performance=ACFT=AC11111111=ACD:=ACyyyyMM
> ...
> where 20040219174432 is "modified" field content
> and 20040219/17/44/AUT_33957308 relative pathname of document to be
> indexed
>
> I use 1.4-rc3

But how about some code?  Folks, please help us volunteers that love to=

field questions by posting *code*.  Field.Keyword?    Or Field.Text?
Or...????  Full line of code too... not just some partial snippet of a
line.  Your modified there doesn't look like a java.util.Date.

             Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




=


--0__=4EBBE426DFAF89168f9e8a93df938690918c4EBBE426DFAF8916
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0__=4EBBE426DFAF89168f9e8a93df938690918c4EBBE426DFAF8916--


From lucene-user-return-8756-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 12:20:34 2004
Return-Path: <lucene-user-return-8756-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89554 invoked from network); 16 Jun 2004 12:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 12:20:34 -0000
Received: (qmail 95065 invoked by uid 500); 16 Jun 2004 12:20:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95023 invoked by uid 500); 16 Jun 2004 12:20:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94993 invoked by uid 99); 16 Jun 2004 12:20:26 -0000
Received: from [128.143.135.143] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.143)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 05:20:26 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id E665778CC77
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 08:20:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OF6D3CEE97.D783DB74-ONC1256EB5.003C0F86-C1256EB5.003ECA60@EU.novartis.net>
References: <OF6D3CEE97.D783DB74-ONC1256EB5.003C0F86-C1256EB5.003ECA60@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8594C057-BF8F-11D8-B5A8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RuntimeException: cannot determine sort type!
Date: Wed, 16 Jun 2004 08:20:14 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 16, 2004, at 7:25 AM, iouli.golovatyi@group.novartis.com wrote:
>
>
> Well, I just didn't  want to overload people with too much code.

There is an art to providing just enough detail :)

> doc is created like this ("modified" get formated with SimpleDateFormat
> tformat = new SimpleDateFormat ("yyyyMMddhhmmss") by cashToIndex metod,
> where the IndexWriter created) :
>
>       
> doc.add(Field.Keyword("modified",DateField.timeToString(modified)));
>

This looks fine.

>                   formated_query=query.toString();
>                   if (sort_byscore)hits = ms.search(query);
>                   else hits = ms.search(query,new 
> Sort("modified",true));
> // here the "cannot determine.." exception generated!!!

How about using:

	ms.search(query,
            new Sort(new SortField("modified", SortField.STRING, true)));

Does that fix it?

If "modified" is only there for sorting and not for querying, perhaps 
index it as a Integer.toString or Float.toString instead - this will 
give you better resource usage and performance most likely - and change 
the type to SortField.INT or SortField.FLOAT appropriately.  The 
sorting infrastructure can detect a type, but it may have issues doing 
so if the strings look like a number in the first document but later 
appear like a String.  DateField.timeToString makes them String, so 
forcing it to sort on String type should work.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8757-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 12:46:22 2004
Return-Path: <lucene-user-return-8757-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8191 invoked from network); 16 Jun 2004 12:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 12:46:22 -0000
Received: (qmail 90578 invoked by uid 500); 16 Jun 2004 12:45:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90459 invoked by uid 500); 16 Jun 2004 12:45:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90339 invoked by uid 99); 16 Jun 2004 12:45:39 -0000
Received: from [143.106.80.3] (HELO apolo.ccuec.unicamp.br) (143.106.80.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 05:45:39 -0700
Received: from www.ccuec.unicamp.br (apolo [143.106.80.3])
	by apolo.ccuec.unicamp.br (Postfix) with SMTP id 458BA33393B
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 09:45:28 -0300 (BRT)
Received: from 143.106.120.195
        (SquirrelMail authenticated user daniel)
        by www.ccuec.unicamp.br with HTTP;
        Wed, 16 Jun 2004 09:45:28 -0300 (BRT)
Message-ID: <1314.143.106.120.195.1087389928.squirrel@www.ccuec.unicamp.br>
In-Reply-To: <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
    <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
Date: Wed, 16 Jun 2004 09:45:28 -0300 (BRT)
Subject: Re: How to use PhraseQuery Class?
From: "Daniel de Souza Teixeira" <daniel@ccuec.unicamp.br>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Reply-To: daniel@ccuec.unicamp.br
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello again...

I already had written that article... Thanks...

Well, I used this sintax and did not work!

The engine answered "no hits!".

Do I need to use some special kind of Analyzer on the index method ?

I used this code to search...

IndexSearcher searcher = new IndexSearcher(indexName);

//Query query = QueryParser.parse("How", "contents", new SimpleAnalyzer());

PhraseQuery query = new PhraseQuery();
query.setSlop(2);
query.add(new Term("contents", "How"));
query.add(new Term("contents", "can"));

System.out.println( "Query: " + query.toString());

Hits hits = searcher.search(query);

System.out.println( "Hits: " + hits.length()); //  this part returns 0
(zero) hits. If I use a simple query, just for single words, work it.

Did you see something like that before ?

Thanks!

-- 
Daniel

> On Jun 15, 2004, at 11:21 AM, Daniel de Souza Teixeira wrote:
>> Hi!
>> I need some information about PhraseQuery Class.
>>
>> How to use this class ?
>
> Are you using QueryParser to create the query?  If so, have a look at
> the query parser syntax page in the docs (or the Lucene website) -
> basically just surround the phase with double-quotes - "this is some
> phrase".
>
> If you are using PhraseQuery directly, have a look at Lucene's own
> JUnit test cases (notice a trend here of me pointing folks to the test
> cases for documentation?!  :)  Here's a copy/paste:
>
>      Query query = new PhraseQuery();
>      query.setSlop(2);
>      query.add(new Term("field", "one"));
>      query.add(new Term("field", "five"));
>
> Erik
>
>
>
>
>>
>> I tried to use, but I couldn't.
>> I created an index, just with 2 fields:
>>    - path: path of the file
>>    - contents: the text of the file (pdf,txt,html,doc,rtf ...)
>>
>> I want to search with phrases... Is it possible ?
>>
>> This is te code...
>>
>> public void indexFiles(String filePath, String documentText, String
>> indexName, boolean create) {
>>
>> 	try {
>>
>>
>> 		IndexWriter writer = null;
>>
>> 		File index = new File ("./" + indexName);
>>
>> 		if (!index.exists()) {
>> 			writer = new IndexWriter(indexName, null, true);
>> 			writer.optimize();
>> 			writer.close();
>> 		}
>>
>> 		writer = new IndexWriter(indexName, new StandardAnalyzer(), false);
>>
>> 		Document doc = new Document();
>>
>> 		doc.add(Field.UnIndexed ("path",filePath));
>> 		doc.add(Field.Text("contents",documentText));
>>
>> 		writer.addDocument(doc);
>>
>> 		doc = null;
>> 		writer.close();
>> 	}
>>
>> 	catch (Exception ex) {
>> 		System.out.println("Error - " + ex);
>> 	}
>>
>> }
>>
>> Thanks!
>>
>> Regards.
>>
>> --
>> Daniel de Souza Teixeira
>> Laboratrio de Inovao em Software - Unicamp/Ci&T
>> Campinas-SP
>> Brasil
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8758-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 13:07:57 2004
Return-Path: <lucene-user-return-8758-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27006 invoked from network); 16 Jun 2004 13:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 13:07:57 -0000
Received: (qmail 87558 invoked by uid 500); 16 Jun 2004 13:07:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86775 invoked by uid 500); 16 Jun 2004 13:07:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86125 invoked by uid 99); 16 Jun 2004 13:07:07 -0000
Received: from [128.143.135.143] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.143)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 06:07:07 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 0F10678CEB1
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 09:06:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <1314.143.106.120.195.1087389928.squirrel@www.ccuec.unicamp.br>
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br> <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com> <1314.143.106.120.195.1087389928.squirrel@www.ccuec.unicamp.br>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <097F133D-BF96-11D8-B5A8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to use PhraseQuery Class?
Date: Wed, 16 Jun 2004 09:06:53 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 16, 2004, at 8:45 AM, Daniel de Souza Teixeira wrote:
> Do I need to use some special kind of Analyzer on the index method ?

What analyzer did you use?  SimpleAnalyzer lowercases....

> PhraseQuery query = new PhraseQuery();
> query.setSlop(2);
> query.add(new Term("contents", "How"));
> query.add(new Term("contents", "can"));
>
> System.out.println( "Query: " + query.toString());
>
> Hits hits = searcher.search(query);

And so your "How" term should be "how" in order to match what you 
indexed.

Be sure to read and understand issues you can encounter with analysis 
in the picture, or in your case in the picture during indexing, but not 
during querying:

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis

In other words, knowing *exactly* what you indexed is extremely vital 
in understanding issues with querying.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8759-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 14:09:12 2004
Return-Path: <lucene-user-return-8759-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79953 invoked from network); 16 Jun 2004 14:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 14:09:12 -0000
Received: (qmail 19150 invoked by uid 500); 16 Jun 2004 14:09:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19017 invoked by uid 500); 16 Jun 2004 14:09:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18379 invoked by uid 99); 16 Jun 2004 14:09:02 -0000
Received: from [143.106.80.3] (HELO apolo.ccuec.unicamp.br) (143.106.80.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 07:09:02 -0700
Received: from www.ccuec.unicamp.br (apolo [143.106.80.3])
	by apolo.ccuec.unicamp.br (Postfix) with SMTP id 9FF0C33395C
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 11:08:47 -0300 (BRT)
Received: from 143.106.120.195
        (SquirrelMail authenticated user daniel)
        by www.ccuec.unicamp.br with HTTP;
        Wed, 16 Jun 2004 11:08:47 -0300 (BRT)
Message-ID: <1987.143.106.120.195.1087394927.squirrel@www.ccuec.unicamp.br>
In-Reply-To: <097F133D-BF96-11D8-B5A8-000393A564E6@ehatchersolutions.com>
References: <2510.143.106.120.195.1087312898.squirrel@www.ccuec.unicamp.br>
    <F92F9C10-BF0C-11D8-A57C-000393A564E6@ehatchersolutions.com>
    <1314.143.106.120.195.1087389928.squirrel@www.ccuec.unicamp.br>
    <097F133D-BF96-11D8-B5A8-000393A564E6@ehatchersolutions.com>
Date: Wed, 16 Jun 2004 11:08:47 -0300 (BRT)
Subject: Re: How to use PhraseQuery Class?
From: "Daniel de Souza Teixeira" <daniel@ccuec.unicamp.br>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Reply-To: daniel@ccuec.unicamp.br
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Erik!
Now, it's working.

Regards!

-- 
Daniel


> On Jun 16, 2004, at 8:45 AM, Daniel de Souza Teixeira wrote:
>> Do I need to use some special kind of Analyzer on the index method ?
>
> What analyzer did you use?  SimpleAnalyzer lowercases....
>
>> PhraseQuery query = new PhraseQuery();
>> query.setSlop(2);
>> query.add(new Term("contents", "How"));
>> query.add(new Term("contents", "can"));
>>
>> System.out.println( "Query: " + query.toString());
>>
>> Hits hits = searcher.search(query);
>
> And so your "How" term should be "how" in order to match what you
> indexed.
>
> Be sure to read and understand issues you can encounter with analysis
> in the picture, or in your case in the picture during indexing, but not
> during querying:
>
> 	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis
>
> In other words, knowing *exactly* what you indexed is extremely vital
> in understanding issues with querying.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8760-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 16:09:49 2004
Return-Path: <lucene-user-return-8760-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93126 invoked from network); 16 Jun 2004 16:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 16:09:49 -0000
Received: (qmail 96907 invoked by uid 500); 16 Jun 2004 16:09:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96845 invoked by uid 500); 16 Jun 2004 16:09:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96788 invoked by uid 99); 16 Jun 2004 16:09:44 -0000
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 09:09:44 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5GG9FVR14926002
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 18:09:15 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.4/Switch-3.1.0) with ESMTP id i5GG9FwX7471274
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 18:09:15 +0200
Subject: Re: RuntimeException: cannot determine sort type!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OFD16E3B4B.725A4FCF-ONC1256EB5.00573B40-C1256EB5.0058BC48@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 16 Jun 2004 18:09:13 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Erik,
thank You very much, I tried it and it looked like it really fixed the
problem.




>                   formated_query=query.toString();
>                   if (sort_byscore)hits = ms.search(query);
>                   else hits = ms.search(query,new
> Sort("modified",true));
> // here the "cannot determine.." exception generated!!!

How about using:

             ms.search(query,
            new Sort(new SortField("modified", SortField.STRING, true)));

Does that fix it?

If "modified" is only there for sorting and not for querying, perhaps
index it as a Integer.toString or Float.toString instead - this will
give you better resource usage and performance most likely - and change
the type to SortField.INT or SortField.FLOAT appropriately.  The
sorting infrastructure can detect a type, but it may have issues doing
so if the strings look like a number in the first document but later
appear like a String.  DateField.timeToString makes them String, so
forcing it to sort on String type should work.


This field is used mostly for sorting, but I'm going to use it for query as
well
just get the end user possibility to see the incoming data in real time,
i.e. modified[timefrom TO timeto]
I used this format because I sow it doc doing like this. Should I really
change to numbers?

Regards,
J.

             Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8761-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 16:15:46 2004
Return-Path: <lucene-user-return-8761-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97150 invoked from network); 16 Jun 2004 16:15:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 16:15:46 -0000
Received: (qmail 20043 invoked by uid 500); 16 Jun 2004 16:15:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20025 invoked by uid 500); 16 Jun 2004 16:15:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20011 invoked by uid 99); 16 Jun 2004 16:15:55 -0000
Received: from [128.143.135.143] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.143)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 09:15:55 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 163A078D6D7
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 12:15:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OFD16E3B4B.725A4FCF-ONC1256EB5.00573B40-C1256EB5.0058BC48@EU.novartis.net>
References: <OFD16E3B4B.725A4FCF-ONC1256EB5.00573B40-C1256EB5.0058BC48@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <623D8E50-BFB0-11D8-B5A8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RuntimeException: cannot determine sort type!
Date: Wed, 16 Jun 2004 12:15:29 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 16, 2004, at 12:09 PM, iouli.golovatyi@group.novartis.com wrote:
> thank You very much, I tried it and it looked like it really fixed the
> problem.

*whew*

> If "modified" is only there for sorting and not for querying, perhaps
> index it as a Integer.toString or Float.toString instead - this will
> give you better resource usage and performance most likely - and change
> the type to SortField.INT or SortField.FLOAT appropriately.  The
> sorting infrastructure can detect a type, but it may have issues doing
> so if the strings look like a number in the first document but later
> appear like a String.  DateField.timeToString makes them String, so
> forcing it to sort on String type should work.
>
>
> This field is used mostly for sorting, but I'm going to use it for 
> query as
> well
> just get the end user possibility to see the incoming data in real 
> time,
> i.e. modified[timefrom TO timeto]
> I used this format because I sow it doc doing like this. Should I 
> really
> change to numbers?

If you are going to query on it, you cannot change it to a numeric... 
it has to remain a lexicographically orderable String.  See the wiki 
for other info on date fields, like using YYYYMMDD String instead of 
the DateField methods.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8762-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 17:28:37 2004
Return-Path: <lucene-user-return-8762-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54320 invoked from network); 16 Jun 2004 17:28:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 17:28:37 -0000
Received: (qmail 80822 invoked by uid 500); 16 Jun 2004 17:28:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80781 invoked by uid 500); 16 Jun 2004 17:28:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80746 invoked by uid 99); 16 Jun 2004 17:28:46 -0000
Received: from [64.233.170.204] (HELO mproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 16 Jun 2004 10:28:46 -0700
Received: by mproxy.gmail.com with SMTP id 55so85670rni
        for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 10:28:19 -0700 (PDT)
Received: by 10.38.92.47 with SMTP id p47mr71705rnb;
        Wed, 16 Jun 2004 10:28:18 -0700 (PDT)
Message-ID: <ff737ac3040616102813e61c71@mail.gmail.com>
Date: Wed, 16 Jun 2004 19:28:18 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: How to extract matching terms for a document given a query
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I would like to implement a kind of term highlighter, but my setup
does not allow me to use the highlighter available in the sandbox.

The reason the current highlighter is not suitable for me, is that the
content of the document is not stored in the index, nor it is easily
reachable from the search application (I use Lucene to index a huge DB
and I don't want to replicate the whole content into Lucene, as it is
already stored into the DB).

The frontend application (that has no visibility on the Lucene index)
invoke the search application through Xml-Rpc; the search application
returns a list of document ID matching the query, and the frontend
application loads the whole documents from its own DB.

Given this layout, I would like the search application to return,
associated with each document ID, also the list of (weighted) terms
that did match the query; with this additional information, the
frontend application could process the document to highlight the
matching terms.

I have tried to look through out the documentation, but I have not
found anything usefull.

What I was looking for was a method "matchingTerms" defined on
Searcher (or IndexSearcher):
Term[] matchingTerms(Query aQuery, int doc)

The closest thing I have found is the "explain" method defined in
IndexSearcher; is this the best starting point to achieve what I am
looking for, or is there any cheaper way to get the same information?

Thank you very much for your attention.

Regards,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8763-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 17:32:27 2004
Return-Path: <lucene-user-return-8763-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56014 invoked from network); 16 Jun 2004 17:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 17:32:27 -0000
Received: (qmail 94380 invoked by uid 500); 16 Jun 2004 17:32:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94279 invoked by uid 500); 16 Jun 2004 17:31:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94072 invoked by uid 99); 16 Jun 2004 17:31:56 -0000
Received: from [128.143.135.143] (HELO postfix.mail.ehatchersolutions.com) (128.143.135.143)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 10:31:56 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id D39D578D720
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 13:31:25 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <OFD16E3B4B.725A4FCF-ONC1256EB5.00573B40-C1256EB5.0058BC48@EU.novartis.net>
References: <OFD16E3B4B.725A4FCF-ONC1256EB5.00573B40-C1256EB5.0058BC48@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <623D8E50-BFB0-11D8-B5A8-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RuntimeException: cannot determine sort type!
Date: Wed, 16 Jun 2004 12:15:29 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 16, 2004, at 12:09 PM, iouli.golovatyi@group.novartis.com wrote:
> thank You very much, I tried it and it looked like it really fixed the
> problem.

*whew*

> If "modified" is only there for sorting and not for querying, perhaps
> index it as a Integer.toString or Float.toString instead - this will
> give you better resource usage and performance most likely - and change
> the type to SortField.INT or SortField.FLOAT appropriately.  The
> sorting infrastructure can detect a type, but it may have issues doing
> so if the strings look like a number in the first document but later
> appear like a String.  DateField.timeToString makes them String, so
> forcing it to sort on String type should work.
>
>
> This field is used mostly for sorting, but I'm going to use it for 
> query as
> well
> just get the end user possibility to see the incoming data in real 
> time,
> i.e. modified[timefrom TO timeto]
> I used this format because I sow it doc doing like this. Should I 
> really
> change to numbers?

If you are going to query on it, you cannot change it to a numeric... 
it has to remain a lexicographically orderable String.  See the wiki 
for other info on date fields, like using YYYYMMDD String instead of 
the DateField methods.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8764-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 20:08:38 2004
Return-Path: <lucene-user-return-8764-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69203 invoked from network); 16 Jun 2004 20:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 20:08:37 -0000
Received: (qmail 63826 invoked by uid 500); 16 Jun 2004 20:06:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63722 invoked by uid 500); 16 Jun 2004 20:06:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63559 invoked by uid 99); 16 Jun 2004 20:06:39 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 13:06:39 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5GK63U9014378
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 21:06:03 +0100
Date: Wed, 16 Jun 2004 21:06:03 +0100
Message-Id: <200406162006.i5GK63U9014378@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: How to extract matching terms for a document given a query
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>>The reason the current highlighter is not suitable for me, is that the
>>content of the document is not stored in the index

That shouldn't present a problem.
The working code example below was from a recent email discussion I had with someone who was storing
text in a database. This simple example works shows highlighting working with no index in sight.

===Begin code====
Analyzer a = new StandardAnalyzer();
Query q = QueryParser.parse("jennifer lopez","cached",a);
String s = "the unofficial home page Britney Spears Elizabeth Hurley Kirsten Dunst Anna Kournikova Katie Holmes Katherine Heigl Jessica Alba Alyson Hannigan Jennifer Lopez Sarah Michelle Gellar";
Highlighter highlighter = new Highlighter(new QueryScorer(q));
TokenStream tokenstream = a.tokenStream("cached",new java.io.StringReader(s));
 String summary = highlighter.getBestFragments(tokenstream,s,3,"...");
System.out.println(summary);
=== end code =====

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8765-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 20:26:52 2004
Return-Path: <lucene-user-return-8765-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81377 invoked from network); 16 Jun 2004 20:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 20:26:52 -0000
Received: (qmail 46779 invoked by uid 500); 16 Jun 2004 20:26:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46634 invoked by uid 500); 16 Jun 2004 20:26:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46538 invoked by uid 99); 16 Jun 2004 20:26:34 -0000
Received: from [64.233.170.197] (HELO mproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 16 Jun 2004 13:26:34 -0700
Received: by mproxy.gmail.com with SMTP id 55so92373rni
        for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 13:25:58 -0700 (PDT)
Received: by 10.38.181.29 with SMTP id d29mr77292rnf;
        Wed, 16 Jun 2004 13:25:58 -0700 (PDT)
Message-ID: <ff737ac304061613252dee1b02@mail.gmail.com>
Date: Wed, 16 Jun 2004 22:25:58 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How to extract matching terms for a document given a query
In-Reply-To: <200406162006.i5GK63U9014378@outmail.freedom2surf.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <200406162006.i5GK63U9014378@outmail.freedom2surf.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Mark,

On Wed, 16 Jun 2004 21:06:03 +0100, markharw00d@yahoo.co.uk
<markharw00d@yahoo.co.uk> wrote:
> 
> >>The reason the current highlighter is not suitable for me, is that the
> >>content of the document is not stored in the index
> 
> That shouldn't present a problem.
> The working code example below was from a recent email discussion I had with someone who was storing
> text in a database. This simple example works shows highlighting working with no index in sight.
[code removed]

your code works fine, but I we work with much more complex query that
are not easily translatable into Terms.

Here is a sample query:
//---------------------------------------
(+responsib* 
 +social*
 +(corporat* firm? business* compan* invest* entrepren* enterprise?))

(+(ethic* solid*)
 +(corporat* firm? business* compan* invest* entrepren* enterprise?))

(+CSR
 +(corporat* firm? business* compan* invest* entrepren* enterprise?))
//---------------------------------------

Given this query, I suppose you need the index to expand all the terms
and get the real word that match the results.

I can expand all the terms with the query rewrite method, but I
usually get huge results.

I was trying to reduce the amount of work to do out of Lucene, in
order to take full advantage of the performace of Lucene that I doubt
I can improve.

Regards,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8766-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 21:31:29 2004
Return-Path: <lucene-user-return-8766-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17502 invoked from network); 16 Jun 2004 21:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 21:31:29 -0000
Received: (qmail 53392 invoked by uid 500); 16 Jun 2004 21:31:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53316 invoked by uid 500); 16 Jun 2004 21:31:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53301 invoked by uid 99); 16 Jun 2004 21:31:51 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 16 Jun 2004 14:31:51 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5GLV7U9027924
	for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 22:31:07 +0100
Date: Wed, 16 Jun 2004 22:31:07 +0100
Message-Id: <200406162131.i5GLV7U9027924@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: How to extract matching terms for a document given a query
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, highlighting multi-term queries does require a query.rewrite() call to expand those terms before
calling the highlighter.
BUT, you could load the results documents into a temporary RAMDirectory and expand the query by rewriting it 
against THAT instead of the original index - it would still produce the term expansions you need. 
The trouble is that would require one pass of the analyzer over the full documents' text.
You would have to tokenize the text again when you called the highlighter unless you wrote code to cache the 
results of the token stream created while indexing the results into your RamDirectory. This pre-tokenized stream
could then be passed to the highlighter.

Another approach is to write your own "Scorer" implementation for use with the highlighter - something like:

  String wildcardTerms[]={"corporat","firm", "business","compan", "invest"}; //....
      //this impl assumes all search terms are wildcards
  public float getTokenScore(Token token)
  {   
     for(int i=0;i<wildcardTerms;i++)
     {
            if(token.termText().startsWith(wildcardTerms[i]))
                  return 1;
     }
      return 0;
}

Wildcard support could be added as default functionality in the QueryScorer object for un-rewritten queries 
but I wanted to avoid re-implementing the various multi-term queries' logic in there.

Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8767-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 16 21:51:07 2004
Return-Path: <lucene-user-return-8767-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27842 invoked from network); 16 Jun 2004 21:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Jun 2004 21:51:06 -0000
Received: (qmail 6426 invoked by uid 500); 16 Jun 2004 21:51:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6396 invoked by uid 500); 16 Jun 2004 21:51:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6383 invoked by uid 99); 16 Jun 2004 21:51:29 -0000
Received: from [64.233.170.193] (HELO mproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 16 Jun 2004 14:51:29 -0700
Received: by mproxy.gmail.com with SMTP id 55so95088rni
        for <lucene-user@jakarta.apache.org>; Wed, 16 Jun 2004 14:50:50 -0700 (PDT)
Received: by 10.38.9.50 with SMTP id 50mr27843rni;
        Wed, 16 Jun 2004 14:50:50 -0700 (PDT)
Message-ID: <ff737ac304061614505709e684@mail.gmail.com>
Date: Wed, 16 Jun 2004 23:50:50 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How to extract matching terms for a document given a query
In-Reply-To: <200406162131.i5GLV7U9027924@outmail.freedom2surf.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <200406162131.i5GLV7U9027924@outmail.freedom2surf.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 16 Jun 2004 22:31:07 +0100, markharw00d@yahoo.co.uk
<markharw00d@yahoo.co.uk> wrote:
> 
> Yes, highlighting multi-term queries does require a query.rewrite() call to expand those terms before
> calling the highlighter.
> BUT, you could load the results documents into a temporary RAMDirectory and expand the query by rewriting it
> against THAT instead of the original index - it would still produce the term expansions you need.

That's a nice idea. The rewritten query would be much smaller when
expanded against an index containing only the selected documents.

> The trouble is that would require one pass of the analyzer over the full documents' text.
> You would have to tokenize the text again when you called the highlighter unless you wrote code to cache the
> results of the token stream created while indexing the results into your RamDirectory. This pre-tokenized stream
> could then be passed to the highlighter.

If I got this right, these steps should be preformed on the frontend
application, right?
It could make sense, if my frontend application was written in Java,
but this is not the case. :-[

So I need to process as much information as possible on the search
application (that does not have access to the document full text) to
allow the frontend application to highlight the relevant chunk of the
selected documents.

I think my question could be restated as follow: given a fully
expanded query, which is the best way to find out the terms that match
any given document, without having access to the whole document
content?

[...]

Ciao,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8768-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 10:14:50 2004
Return-Path: <lucene-user-return-8768-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79270 invoked from network); 17 Jun 2004 10:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 10:14:50 -0000
Received: (qmail 44949 invoked by uid 500); 17 Jun 2004 10:15:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44859 invoked by uid 500); 17 Jun 2004 10:15:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44802 invoked by uid 99); 17 Jun 2004 10:15:06 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 03:15:06 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id DEE65192623
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 12:14:09 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject:  RE : Analyzers
Date: Thu, 17 Jun 2004 12:13:59 +0200
Message-ID: <000501c45453$d1e597c0$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <s0cef487.026@gwia201.syr.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> For the reflection way, I use a configuration file that
> specifies the initial state and then use a no-argument
> constructor.  Since I don't think that is very generalizable, I
> thought maybe you could do a copy() and then a reset() method
> (similar to the JSP tag release() method).  The copy() method
> would create a new memory object. Then reset would put itself
> back into a clean state.  Many of the filters have read-only
> information (such as the Stop filter), so reset wouldn't have
> to do anything.  Other's may require more, such as preserving
> the initialization state (which will take up extra memory).  I
> don't know if this is a generalizable process or if it is worth
> the effort.  The reflection way works well for me b/c I am
> already using a configuration file, so a few more properties
> aren't a big deal.  One of the things that is nice about Lucene
> is it doesn't require a configuration file.
>=20
> Not sure if this is enough to go, so let me know.
>=20
> -Grant

So I gave this a little thought...

AbstractTokenizer could become=20
CloneableTokenizer implements Tokenizer, Cloneable=20

AbstractTokenFilter could become=20
CloneableTokenFilter implements TokenFilter, Cloneable

in both of which the clone() method would return a new object allowing =
implementations like BaseAnalyzer to take advantage of your init() =
methods and setters (AbstractTokenFilter .setTokenStream and =
AbstractTokenizer.setReader) OR allow each CloneableTokenizer, =
CloneableTokenFilter implementation to generate its new object using its =
own constructor based dependency injection.

We could also remove the need for the init(), and setter methods in =
AbstractTokenizer and AbstractTokenFilter and create two abstract =
factory methods CloneableTokenizer.clone(reader) and =
CloneableTokenFilter.clone(TokenStream) which would handle TokenStream =
construction using the argument and any configured class member objects =
(stopWords, charsets, etc).

Your thoughts...

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8769-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 13:31:03 2004
Return-Path: <lucene-user-return-8769-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11539 invoked from network); 17 Jun 2004 13:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 13:31:02 -0000
Received: (qmail 58767 invoked by uid 500); 17 Jun 2004 13:30:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58674 invoked by uid 500); 17 Jun 2004 13:30:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58659 invoked by uid 99); 17 Jun 2004 13:30:50 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 17 Jun 2004 06:30:50 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Thu, 17 Jun 2004 09:30:41 -0400
Message-Id: <s0d164c1.064@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Thu, 17 Jun 2004 09:30:13 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: RE : Analyzers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Seems reasonable.  My only hesitation is the use of clone().  Not sure if =
this is strong enough, as there won't be any compiler errors if someone =
does not override clone() (just potentially weird behavior due to improper =
copying of internal Objects).  I don't know whether this is a big deal or =
not.  Seems like some of the time the base clone() method will be =
sufficient and other times we will need to do a deep copy.  Should we =
force the developer to implement it or not?

I think the best thing may be to get it working and see what the others =
think.

>>> rasik.pandey@ajlsm.com 06/17/04 06:13AM >>>
So I gave this a little thought...

AbstractTokenizer could become=20
CloneableTokenizer implements Tokenizer, Cloneable=20

AbstractTokenFilter could become=20
CloneableTokenFilter implements TokenFilter, Cloneable

in both of which the clone() method would return a new object allowing =
implementations like BaseAnalyzer to take advantage of your init() methods =
and setters (AbstractTokenFilter .setTokenStream and AbstractTokenizer.setR=
eader) OR allow each CloneableTokenizer, CloneableTokenFilter implementatio=
n to generate its new object using its own constructor based dependency =
injection.

We could also remove the need for the init(), and setter methods in =
AbstractTokenizer and AbstractTokenFilter and create two abstract factory =
methods CloneableTokenizer.clone(reader) and CloneableTokenFilter.clone(Tok=
enStream) which would handle TokenStream construction using the argument =
and any configured class member objects (stopWords, charsets, etc).

Your thoughts...

Regards,
RBP



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8770-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 14:14:10 2004
Return-Path: <lucene-user-return-8770-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41817 invoked from network); 17 Jun 2004 14:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 14:14:10 -0000
Received: (qmail 9125 invoked by uid 500); 17 Jun 2004 14:13:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8940 invoked by uid 500); 17 Jun 2004 14:13:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8727 invoked by uid 99); 17 Jun 2004 14:13:37 -0000
Received: from [217.12.10.67] (HELO web25207.mail.ukl.yahoo.com) (217.12.10.67)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 17 Jun 2004 07:13:36 -0700
Message-ID: <20040617140232.4214.qmail@web25207.mail.ukl.yahoo.com>
Received: from [80.47.202.66] by web25207.mail.ukl.yahoo.com via HTTP; Thu, 17 Jun 2004 15:02:31 BST
Date: Thu, 17 Jun 2004 15:02:31 +0100 (BST)
From: =?iso-8859-1?q?jt=20oob?= <jt2oob@yahoo.co.uk>
Subject: Multiple document types, same search engine
To: Lucene-Users-List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I just wondered how other lucene users are handling having multiple
document types available for searching.

I am initially concentrating on news groups, and so was planning on
converting all news postings into XML. There would be one document
field for each header field in the posting, one document field for the
whole header, and one document field for the body text.

I would also then like to add html to the indexes and later other
document types.

To do this I think i need to try and identify things which will be
common across all(most) document types such as "author" and "topic".
For the news posting i would then have to map the "From" and "Subject"
fields over to "author" and "topic" whereas in the html i would map
over the "built by" (or similar) string if it exists and perhaps the
<TITLE>.

My aim  is to give users an advanced search capability over multiple
document types. I'm not sure if I am looking at the problem the correct
way, or, if I am, where I should do the mappings from document specific
fields such as "From" to my generic ones such as "author". I could
duplicate the data, so a news posting would have both "author" and
"From" fields, or should build it into my search parsing so when the
user enters the query "topic: jt" it gets converted to "Subject: jt |
Title: jt" to get both the news and the html. 

Any comments would be appreciated,

Thanks for reading this far!
jt


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - sooooo many all-new ways to express yourself http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8771-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 14:31:25 2004
Return-Path: <lucene-user-return-8771-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51951 invoked from network); 17 Jun 2004 14:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 14:31:25 -0000
Received: (qmail 73522 invoked by uid 500); 17 Jun 2004 14:31:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73402 invoked by uid 500); 17 Jun 2004 14:31:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73378 invoked by uid 99); 17 Jun 2004 14:31:14 -0000
Received: from [64.233.170.203] (HELO mproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 17 Jun 2004 07:31:14 -0700
Received: by mproxy.gmail.com with SMTP id 72so1524589rnf
        for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 07:31:02 -0700 (PDT)
Received: by 10.11.118.20 with SMTP id q20mr264019cwc;
        Thu, 17 Jun 2004 07:31:02 -0700 (PDT)
Message-ID: <4800a14504061707315ddbb229@mail.gmail.com>
Date: Thu, 17 Jun 2004 10:31:02 -0400
From: Dan Aloma <daloma@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Lucene index causing Too Many Open Files
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

     We've got a lucene search index that we use to search (and
delete) a couple thousand items. It runs fine for a few days, and then
it complains about "Too Many Open Files". I am running on Red Hat 7.3.
The user that the webserver runs as, has an unlimited number of files
it can open. That's what makes this error so strange. We're optimizing
the index every hour, also.
     I saw in the old lists that several people have had this problem,
but there was no solid answers as to how to fix it. Any ideas out
there? TIA.

The error in the logs is:

java.io.FileNotFoundException: /home/foobar/index/_dh2.f5 (Too many open files)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:389)
        at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:418)
        at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:291)
        at org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java:388)
        at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:151)
        at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:120)
        at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
        at org.apache.lucene.store.Lock$With.run(Lock.java:148)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:99)
        at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:75)
        .....


Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8772-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 14:52:46 2004
Return-Path: <lucene-user-return-8772-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68570 invoked from network); 17 Jun 2004 14:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 14:52:46 -0000
Received: (qmail 68203 invoked by uid 500); 17 Jun 2004 14:51:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68065 invoked by uid 500); 17 Jun 2004 14:51:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67953 invoked by uid 99); 17 Jun 2004 14:51:11 -0000
Received: from [205.196.80.6] (HELO exchange03.corp.yellowbrix.com) (205.196.80.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 07:51:11 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Sorting / Document ID renumbering
Date: Thu, 17 Jun 2004 10:50:39 -0400
Message-ID: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yellowbrix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting / Document ID renumbering
Thread-Index: AcRUenUIweDSPrYZSwyQe28Zrnib9g==
From: "Norton, James" <jnorton@yellowbrix.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

A while back I implemented a general purposoe document sorting mechanism =
using cached
document ids (similar to SortBean).  This was before sorting was added =
to lucene.  I=20
am trying to extend this mechanism to allow incremental updates to the =
cache when new=20
content is loaded or deleted.  In other words, sorting the new content =
into the existing
cache to avoid resorting the entire collection.

My problem is that lucene renumbers documents ids at certain times when =
new content is
loaded, including reclaiming deleted ids.  So potentially every document =
id can change
when new content is loaded.  I don't mind this when an explicit optimize =
is called, because
I can reload the cache from scratch, but it is too inefficient to do =
this every time a=20
batch of documents is loaded. =20

So I have two questions.  First, is there a way to prevent document id =
renumbering
(except during explicit calls to optimize)?  (I have played around with =
the merge factor=20
but it does not seem to work the way I expected, i.e., setting it very =
high does not=20
prevent the renumbering).  Second, does the new sorting mechanism in =
lucene allow
(efficient)incremental updates?=20

Thanks,

James

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8773-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:20:35 2004
Return-Path: <lucene-user-return-8773-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98373 invoked from network); 17 Jun 2004 15:20:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:20:35 -0000
Received: (qmail 96443 invoked by uid 500); 17 Jun 2004 15:20:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96393 invoked by uid 500); 17 Jun 2004 15:20:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96378 invoked by uid 99); 17 Jun 2004 15:20:26 -0000
Received: from [64.233.170.198] (HELO mproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 17 Jun 2004 08:20:25 -0700
Received: by mproxy.gmail.com with SMTP id 55so114900rni
        for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 08:20:07 -0700 (PDT)
Received: by 10.38.9.50 with SMTP id 50mr42143rni;
        Thu, 17 Jun 2004 08:20:07 -0700 (PDT)
Message-ID: <ff737ac3040617082024e2097c@mail.gmail.com>
Date: Thu, 17 Jun 2004 17:20:07 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Coping documents across indexes (Was: How to extract matching terms for a document given a query)
In-Reply-To: <ff737ac304061614505709e684@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <200406162131.i5GLV7U9027924@outmail.freedom2surf.net> <ff737ac304061614505709e684@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 16 Jun 2004 23:50:50 +0200, Giulio Cesare Solaroli
<giulio.cesare@gmail.com> wrote:
> 
> On Wed, 16 Jun 2004 22:31:07 +0100, markharw00d@yahoo.co.uk
> <markharw00d@yahoo.co.uk> wrote:
> >
> > Yes, highlighting multi-term queries does require a query.rewrite() call to expand those terms before
> > calling the highlighter.
> > BUT, you could load the results documents into a temporary RAMDirectory and expand the query by rewriting it
> > against THAT instead of the original index - it would still produce the term expansions you need.
> 
> That's a nice idea. The rewritten query would be much smaller when
> expanded against an index containing only the selected documents.

I have thought more about this option, and I have tried to implement
the following policy:
- find the matching documents (Hits);
- create an IndexWriter associated to a RamDirectory;
- for each document in the request range
   * process the document;
   * insert the document into the RamDirectory index
         ramDiskWriter.addDocument(hits.doc(i));
- when all the required documents have been processed (and inserted
into the new ramDirectory index) rewrite the original query against
this new index.

But this looks too nice to be true.

Indeed, the rewritten query (against the the index) is empty. :-[

Does anybody know if it is possible to copy documents across indexes
for this purpose?

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8774-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:24:16 2004
Return-Path: <lucene-user-return-8774-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2408 invoked from network); 17 Jun 2004 15:24:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:24:16 -0000
Received: (qmail 12219 invoked by uid 500); 17 Jun 2004 15:23:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12152 invoked by uid 500); 17 Jun 2004 15:23:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12117 invoked by uid 99); 17 Jun 2004 15:23:40 -0000
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 08:23:40 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5HFNDJH031125
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 11:23:13 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040617112105.01d4b738@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Thu, 17 Jun 2004 11:23:52 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Simultaneous Search
In-Reply-To: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yel
 lowbrix.com>
References: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yellowbrix.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_263183375==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_263183375==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

How does Lucene handle simultaneous search requests?

Can it or is it up to the programmer to make sure that only one search 
occurs at a time?


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_263183375==.ALT--


From lucene-user-return-8775-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:26:25 2004
Return-Path: <lucene-user-return-8775-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4501 invoked from network); 17 Jun 2004 15:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:26:25 -0000
Received: (qmail 21204 invoked by uid 500); 17 Jun 2004 15:25:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21167 invoked by uid 500); 17 Jun 2004 15:25:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21131 invoked by uid 99); 17 Jun 2004 15:25:47 -0000
Received: from [143.106.80.3] (HELO apolo.ccuec.unicamp.br) (143.106.80.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 08:25:47 -0700
Received: from www.ccuec.unicamp.br (apolo [143.106.80.3])
	by apolo.ccuec.unicamp.br (Postfix) with SMTP id 59270333946
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 12:25:30 -0300 (BRT)
Received: from 143.106.120.195
        (SquirrelMail authenticated user daniel)
        by www.ccuec.unicamp.br with HTTP;
        Thu, 17 Jun 2004 12:25:30 -0300 (BRT)
Message-ID: <2912.143.106.120.195.1087485930.squirrel@www.ccuec.unicamp.br>
Date: Thu, 17 Jun 2004 12:25:30 -0300 (BRT)
Subject: Transform a sentences in Terms
From: "Daniel de Souza Teixeira" <daniel@ccuec.unicamp.br>
To: "Lucene List" <lucene-user@jakarta.apache.org>
Reply-To: daniel@ccuec.unicamp.br
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks!

I needed something like this...
I have a sentence: "I love my dog".
Someone has a code that I can transform this sentence in Terms to add in a
PhraseQuery ?

PhraseQuery pq = new PhraseQuery();

while ( <sentence doesn't ended> )
   query.add(new Term("field", text));


Regards!

-- 
Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8776-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:33:03 2004
Return-Path: <lucene-user-return-8776-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10082 invoked from network); 17 Jun 2004 15:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:33:03 -0000
Received: (qmail 51667 invoked by uid 500); 17 Jun 2004 15:33:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51600 invoked by uid 500); 17 Jun 2004 15:33:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51577 invoked by uid 99); 17 Jun 2004 15:33:01 -0000
Received: from [128.143.171.102] (HELO postfix.mail.ehatchersolutions.com) (128.143.171.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 08:33:01 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 0F65678F5FD
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 11:32:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <4800a14504061707315ddbb229@mail.gmail.com>
References: <4800a14504061707315ddbb229@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9376DBDA-C073-11D8-B596-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene index causing Too Many Open Files
Date: Thu, 17 Jun 2004 11:32:43 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Upgrade to Lucene 1.3 (or greater) and enable the compound file format  
when you index.  This should alleviate this issue.

	Erik

On Jun 17, 2004, at 10:31 AM, Dan Aloma wrote:

>      We've got a lucene search index that we use to search (and
> delete) a couple thousand items. It runs fine for a few days, and then
> it complains about "Too Many Open Files". I am running on Red Hat 7.3.
> The user that the webserver runs as, has an unlimited number of files
> it can open. That's what makes this error so strange. We're optimizing
> the index every hour, also.
>      I saw in the old lists that several people have had this problem,
> but there was no solid answers as to how to fix it. Any ideas out
> there? TIA.
>
> The error in the logs is:
>
> java.io.FileNotFoundException: /home/foobar/index/_dh2.f5 (Too many  
> open files)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>         at  
> org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.jav 
> a:389)
>         at  
> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:418)
>         at  
> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:291)
>         at  
> org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java: 
> 388)
>         at  
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:151)
>         at  
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:120)
>         at  
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:148)
>         at  
> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>         at  
> org.apache.lucene.index.IndexReader.open(IndexReader.java:99)
>         at  
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:75)
>         .....
>
>
> Dan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8777-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:35:20 2004
Return-Path: <lucene-user-return-8777-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12109 invoked from network); 17 Jun 2004 15:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:35:20 -0000
Received: (qmail 58882 invoked by uid 500); 17 Jun 2004 15:35:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58846 invoked by uid 500); 17 Jun 2004 15:35:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58820 invoked by uid 99); 17 Jun 2004 15:35:21 -0000
Received: from [128.143.171.102] (HELO postfix.mail.ehatchersolutions.com) (128.143.171.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 08:35:21 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 019CE78F620
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 11:35:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <6.1.1.1.0.20040617112105.01d4b738@localhost>
References: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yellowbrix.com> <6.1.1.1.0.20040617112105.01d4b738@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E665BFB1-C073-11D8-B596-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Simultaneous Search
Date: Thu, 17 Jun 2004 11:35:02 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 17, 2004, at 11:23 AM, Don Vaillancourt wrote:
> How does Lucene handle simultaneous search requests?
>
> Can it or is it up to the programmer to make sure that only one search 
> occurs at a time?

Lucene handles concurrent searches, no problem.  No need for the 
programmer to ensure only one occurs at a time.  That would be a real 
bummer if it was that way.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8778-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:37:00 2004
Return-Path: <lucene-user-return-8778-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13366 invoked from network); 17 Jun 2004 15:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:37:00 -0000
Received: (qmail 66022 invoked by uid 500); 17 Jun 2004 15:37:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65943 invoked by uid 500); 17 Jun 2004 15:36:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65899 invoked by uid 99); 17 Jun 2004 15:36:57 -0000
Received: from [128.143.171.102] (HELO postfix.mail.ehatchersolutions.com) (128.143.171.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 08:36:57 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 07D5378F638
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 11:36:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <2912.143.106.120.195.1087485930.squirrel@www.ccuec.unicamp.br>
References: <2912.143.106.120.195.1087485930.squirrel@www.ccuec.unicamp.br>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1FB5C016-C074-11D8-B596-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Transform a sentences in Terms
Date: Thu, 17 Jun 2004 11:36:38 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 17, 2004, at 11:25 AM, Daniel de Souza Teixeira wrote:
> Hi folks!
>
> I needed something like this...
> I have a sentence: "I love my dog".
> Someone has a code that I can transform this sentence in Terms to add 
> in a
> PhraseQuery ?
>
> PhraseQuery pq = new PhraseQuery();
>
> while ( <sentence doesn't ended> )
>    query.add(new Term("field", text));

Adapt from AnalysisDemo here: 
http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8779-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 15:55:09 2004
Return-Path: <lucene-user-return-8779-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27876 invoked from network); 17 Jun 2004 15:55:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 15:55:09 -0000
Received: (qmail 25496 invoked by uid 500); 17 Jun 2004 15:54:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25433 invoked by uid 500); 17 Jun 2004 15:54:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25329 invoked by uid 99); 17 Jun 2004 15:54:28 -0000
Received: from [64.233.170.203] (HELO mproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 17 Jun 2004 08:54:27 -0700
Received: by mproxy.gmail.com with SMTP id 55so116149rni
        for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 08:54:09 -0700 (PDT)
Received: by 10.38.9.50 with SMTP id 50mr42990rni;
        Thu, 17 Jun 2004 08:54:09 -0700 (PDT)
Message-ID: <ff737ac304061708547c24923a@mail.gmail.com>
Date: Thu, 17 Jun 2004 17:54:09 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Coping documents across indexes (Was: How to extract matching terms for a document given a query)
In-Reply-To: <ff737ac3040617082024e2097c@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <200406162131.i5GLV7U9027924@outmail.freedom2surf.net> <ff737ac304061614505709e684@mail.gmail.com> <ff737ac3040617082024e2097c@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Replying to my own post ...

> > That's a nice idea. The rewritten query would be much smaller when
> > expanded against an index containing only the selected documents.
> 
> I have thought more about this option, and I have tried to implement
> the following policy:
> - find the matching documents (Hits);
> - create an IndexWriter associated to a RamDirectory;
> - for each document in the request range
>    * process the document;
>    * insert the document into the RamDirectory index
>          ramDiskWriter.addDocument(hits.doc(i));
> - when all the required documents have been processed (and inserted
> into the new ramDirectory index) rewrite the original query against
> this new index.
> 
> But this looks too nice to be true.
> 
> Indeed, the rewritten query (against the the index) is empty. :-[
> 
> Does anybody know if it is possible to copy documents across indexes
> for this purpose?

The documents are copied, but the new document contains only the
fields stored in the first index. :-[

Is it possible to copy document terms across  indexes, even if the
fields are not stored?

Thanks for your attention,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8780-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 17:25:14 2004
Return-Path: <lucene-user-return-8780-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83492 invoked from network); 17 Jun 2004 17:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 17:25:13 -0000
Received: (qmail 39814 invoked by uid 500); 17 Jun 2004 17:25:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39761 invoked by uid 500); 17 Jun 2004 17:25:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39733 invoked by uid 99); 17 Jun 2004 17:25:16 -0000
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 10:25:16 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5HHOgFO064076
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 13:24:42 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040617132249.019dfec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Thu, 17 Jun 2004 13:25:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Re: Simultaneous Search
In-Reply-To: <E665BFB1-C073-11D8-B596-000393A564E6@ehatchersolutions.com
 >
References: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yellowbrix.com>
 <6.1.1.1.0.20040617112105.01d4b738@localhost>
 <E665BFB1-C073-11D8-B596-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_270473046==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_270473046==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Here's another question along the same lines.

I'm building my code so that whenever I need to index new content I create 
a new collection and then swap it with the older collection when ready 
which I believe is the safer way of managing collections.

But does Lucene handle updating a collection while it is being searched.

At 11:35 AM 17/06/2004, you wrote:
>On Jun 17, 2004, at 11:23 AM, Don Vaillancourt wrote:
>>How does Lucene handle simultaneous search requests?
>>
>>Can it or is it up to the programmer to make sure that only one search 
>>occurs at a time?
>
>Lucene handles concurrent searches, no problem.  No need for the 
>programmer to ensure only one occurs at a time.  That would be a real 
>bummer if it was that way.
>
>         Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_270473046==.ALT--


From lucene-user-return-8781-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 17:38:18 2004
Return-Path: <lucene-user-return-8781-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91982 invoked from network); 17 Jun 2004 17:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 17:38:18 -0000
Received: (qmail 82952 invoked by uid 500); 17 Jun 2004 17:37:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82684 invoked by uid 500); 17 Jun 2004 17:37:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82384 invoked by uid 99); 17 Jun 2004 17:37:38 -0000
Received: from [207.217.120.227] (HELO starling.mail.pas.earthlink.net) (207.217.120.227)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 10:37:38 -0700
Received: from [65.174.70.194] (helo=earthlink.net)
	by starling.mail.pas.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 3.36 #4)
	id 1Bb0pC-0004OA-00; Thu, 17 Jun 2004 10:37:18 -0700
Message-ID: <40D1D6B0.5070402@earthlink.net>
Date: Thu, 17 Jun 2004 11:36:48 -0600
From: Dmitry Serebrennikov <dmitrys@earthlink.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.3) Gecko/20030312
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene User List <lucene-user@jakarta.apache.org>
CC:  ajitender@aalayance.com
Subject: Re: multiple fields to be indexed
References: <00ff01c4522d$6e618fb0$3a03a8c0@india.aalayance.com> <40CDE13E.2070509@earthlink.net> <001d01c45461$c8a11fa0$3a03a8c0@india.aalayance.com>
In-Reply-To: <001d01c45461$c8a11fa0$3a03a8c0@india.aalayance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69564776905774d2ac4ba890b80e489847d6858a5463a02f86f6350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jitender,

I hope you don't mind if I move this thread to the user list.

A "term" in lucene specifies not only the text string, but also a field 
in which it occurs. In the query parser terms are notated as <fieldname> 
":" <text>, so "name:blue" will be a string 'blue' in field 'name', 
whereas "desc:blue" will be the same string but in the 'desc' field. So 
if you type something like the following into the query parser you will 
have a query that matches occurances of 'blue' in either field:
    "name:blue desc:blue"
If you want to match documents that have 'blue' in both fields, the 
query would look like this:
    "+name:blue +desc:blue"

There are other notations that may also be useful. A good explanation of 
the query parser can be found here:
http://jakarta.apache.org/lucene/docs/queryparsersyntax.html.

In the API, the same thing can be achieved with two TermQuery objects 
joined together with a BooleanQuery. For example:
    TermQuery tq1 = new TermQuery( new Term("name", "blue"));
    TermQuery tq2 = new TermQuery( new Term("desc", "blue"));
    BooleanQuery q = new BooleanQuery();
    q.add(tq1, false, false);
    q.add(tq2, false, false);

    // At this point, query q will match documents that have the word 
'blue' in either 'name' or 'desc' field.
    // So this is essentially an "or" query. If you want an "and" query, 
change the last two lines as follows:
    //   q.add(tq1, true, false);
    //   q.add(tq2, true, false);


Does this make more sense now?
The boolean logic at the API level is a bit unusual, if you are used to 
relational databases. Lucene is more like Google in this respect, rather 
than an SQL database. A boolean query component can be either required, 
prohibited, or neither. If it is required (+ prefix in the query 
parser), it MUST match for the entire query to match. If it is 
prohibited (- prefix in the query parser), it MUST NOT match for the 
query to match. If it is neither (no prefix in the query parser), it is 
not required to match for the query to match, provided some other 
component of the query does. This last one may seem useless, except that 
if this query component does match, the score will be boosted. So 
documents that do match this component of the query will be returned 
ahead of those that do not.

Good luck!
Dmitry


jitender ahuja wrote:

>Hi,
>    Can u pl. clarify some more how to use the BooleanQuery class as I am
>clueless still.
>As far as I can gather it deals with multiple query terms and not with
>searching a (may be single) given query term in multiple (indexed) fields.
>
>Regards,
>Jitender
>----- Original Message ----- 
>From: "Dmitry Serebrennikov" <dmitrys@earthlink.net>
>To: "Lucene Developers List" <lucene-dev@jakarta.apache.org>
>Sent: Monday, June 14, 2004 11:02 PM
>Subject: Re: multiple fields to be indexed
>
>
>  
>
>>jitender ahuja wrote:
>>
>>    
>>
>>>Hi all,
>>>
>>>I am trying to do a search on multiple fields of which some are indexed.
>>>      
>>>
>Now, a query can be posed to search in the indexed fields but the Hits class
>object can have only one query object and the query class similarly can have
>only one field on which the query is performed.
>  
>
>>Take a look at BooleanQuery. That will allow you to combine multiple
>>TermQueries, such that you can create a single query on different
>>fields. That should do the trick.
>>
>>Good luck!
>>Dmitry.
>>
>>    
>>
>>>Now, to have multiple queries I need to obtain multiple Hits class
>>>      
>>>
>objects that are then merged  together in one array. But, I do not know how
>to maintain the scorings obtained by different Hits class objects. If
>somebody has tried such a thing or a different mechanism to feed a query to
>different query objects, then pl. respond.
>  
>
>>>Actually I have not tried the above option of merging the results in a
>>>      
>>>
>final array but I feel that it should work.
>  
>
>>>Regards
>>>Jitender
>>>
>>>
>>>      
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
>
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8782-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 18:31:23 2004
Return-Path: <lucene-user-return-8782-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23362 invoked from network); 17 Jun 2004 18:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 18:31:23 -0000
Received: (qmail 49889 invoked by uid 500); 17 Jun 2004 18:31:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49781 invoked by uid 500); 17 Jun 2004 18:31:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49687 invoked by uid 99); 17 Jun 2004 18:31:24 -0000
Received: from [128.143.171.102] (HELO postfix.mail.ehatchersolutions.com) (128.143.171.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 11:31:24 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A79AA78F8DF
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 14:30:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <6.1.1.1.0.20040617132249.019dfec0@localhost>
References: <B5262878D67D8943891DF3C0FD0CF9B425B7CF@exchange03.corp.yellowbrix.com> <6.1.1.1.0.20040617112105.01d4b738@localhost> <E665BFB1-C073-11D8-B596-000393A564E6@ehatchersolutions.com> <6.1.1.1.0.20040617132249.019dfec0@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <79C95DFB-C08C-11D8-B596-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Simultaneous Search
Date: Thu, 17 Jun 2004 14:30:57 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 17, 2004, at 1:25 PM, Don Vaillancourt wrote:
> But does Lucene handle updating a collection while it is being 
> searched.

Yes.  An IndexSearcher has a view of the index at the time it was 
instantiated, so dump that instance and re-instantiate to search the 
new documents.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8783-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 17 19:11:02 2004
Return-Path: <lucene-user-return-8783-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50545 invoked from network); 17 Jun 2004 19:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Jun 2004 19:11:02 -0000
Received: (qmail 89757 invoked by uid 500); 17 Jun 2004 19:11:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89710 invoked by uid 500); 17 Jun 2004 19:11:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89690 invoked by uid 99); 17 Jun 2004 19:11:10 -0000
Received: from [208.185.174.145] (HELO mr4.zonelabs.com) (208.185.174.145)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 17 Jun 2004 12:11:10 -0700
Received: from exgate1.zonelabs.com ([172.16.211.232])
	by mr4.zonelabs.com (8.12.11/8.12.11/BCH2.0) with ESMTP id i5HJAj24000143
	for <lucene-user@jakarta.apache.org>; Thu, 17 Jun 2004 12:10:46 -0700 (PDT)
Received: from exmb2.zonelabs.com ([172.16.211.235]) by exgate1.zonelabs.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 17 Jun 2004 12:10:44 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4549E.CA46696E"
Subject: demo indexing problems on linux
Date: Thu, 17 Jun 2004 12:10:44 -0700
Message-ID: <8F1F77F368665043BDA3C9AA04F70B3003CDB5@exmb2.zonelabs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: demo indexing problems on linux
Thread-Index: AcRUnsociz0wx2FUTLWEQugk76YbLg==
From: "Morris Mizrahi" <mmizrahi@zonelabs.com>
To: <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 17 Jun 2004 19:10:44.0936 (UTC) FILETIME=[CA552480:01C4549E]
X-Scanned-By: MIMEDefang 2.39
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4549E.CA46696E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hey everyone.

=20

I am using the Lucene 1.4rc3 demo classes.

=20

When I run org.apache.lucene.demo.IndexHTML on Linux the indexer works
fine when I am creating a new index (e.g. using -create -index option).
But when I run the indexer again (-index without the -create option) for
updates it does not properly update the index.=20

=20

I have used the demo classes on windows and the index creation and
updates work fine.

=20

Does anyone know if there are any issues with the demo classes index
update on Linux?

=20

Thanks for your help.

=20

             Morris

=20

=20


------_=_NextPart_001_01C4549E.CA46696E--

From lucene-user-return-8784-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 10:13:10 2004
Return-Path: <lucene-user-return-8784-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34556 invoked from network); 18 Jun 2004 10:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 10:13:10 -0000
Received: (qmail 98205 invoked by uid 500); 18 Jun 2004 10:13:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98148 invoked by uid 500); 18 Jun 2004 10:13:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98106 invoked by uid 99); 18 Jun 2004 10:13:32 -0000
Received: from [217.12.10.70] (HELO web25210.mail.ukl.yahoo.com) (217.12.10.70)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 18 Jun 2004 03:13:32 -0700
Message-ID: <20040618101242.54917.qmail@web25210.mail.ukl.yahoo.com>
Received: from [80.47.196.71] by web25210.mail.ukl.yahoo.com via HTTP; Fri, 18 Jun 2004 11:12:42 BST
Date: Fri, 18 Jun 2004 11:12:42 +0100 (BST)
From: =?iso-8859-1?q?jt=20oob?= <jt2oob@yahoo.co.uk>
Subject: Selecting documents which have field x
To: Lucene-Users-List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it possible/what's the best way, to find all documents which have a
given field. The field contents may be the empty string "".

Thanks,
jt


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - sooooo many all-new ways to express yourself http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8785-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 12:13:06 2004
Return-Path: <lucene-user-return-8785-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6535 invoked from network); 18 Jun 2004 12:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 12:13:06 -0000
Received: (qmail 43448 invoked by uid 500); 18 Jun 2004 12:12:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43409 invoked by uid 500); 18 Jun 2004 12:12:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43395 invoked by uid 99); 18 Jun 2004 12:12:56 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 18 Jun 2004 05:12:56 -0700
Message-ID: <20040618121252.66904.qmail@web12705.mail.yahoo.com>
Received: from [211.95.204.99] by web12705.mail.yahoo.com via HTTP; Fri, 18 Jun 2004 05:12:52 PDT
Date: Fri, 18 Jun 2004 05:12:52 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Selecting documents which have field x
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040618101242.54917.qmail@web25210.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

The best/easiest/only way I can think of to handle this is to have
another field that serves as a flag.  You could add that field only
when your document has that optional field.
Actually, you may also be able to make use of the ability to add
multiple values to the same field.  Then you could pick some obscure
and/or reserved value for a field to serve as a marker.

Something along the lines of:

if (oh, this type of doc has field X) {
 doc.add(Field.UnStored("fieldName", "field value here"));
 doc.add(Field.UnStored("fieldName", "__flag"));
}

Then you can search for fieldName:__flag and you will find all
documents with "fieldName".

The choice of __flag may not be the best, but you can play with it and
see what works best for you.

Otis

--- jt oob <jt2oob@yahoo.co.uk> wrote:
> Is it possible/what's the best way, to find all documents which have
> a
> given field. The field contents may be the empty string "".
> 
> Thanks,
> jt
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ALL-NEW
> Yahoo! Messenger - sooooo many all-new ways to express yourself
> http://uk.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8786-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 17:50:57 2004
Return-Path: <lucene-user-return-8786-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48136 invoked from network); 18 Jun 2004 17:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 17:50:57 -0000
Received: (qmail 18764 invoked by uid 500); 18 Jun 2004 17:51:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18723 invoked by uid 500); 18 Jun 2004 17:51:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18700 invoked by uid 99); 18 Jun 2004 17:51:04 -0000
Received: from [194.25.134.21] (HELO mailout10.sul.t-online.com) (194.25.134.21)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 10:51:04 -0700
Received: from fwd02.aul.t-online.de 
	by mailout10.sul.t-online.com with smtp 
	id 1BbNVj-0000ir-06; Fri, 18 Jun 2004 19:50:43 +0200
Received: from p548027C6.dip.t-dialin.net (X7hYy0Z-8ePBUtemfvxb8n3UGgpRCDLcdTCla8wwlnULPJrbRbciZS@[84.128.39.198]) by fmrl02.sul.t-online.com
	with esmtp id 1BbNVb-1BMTya0; Fri, 18 Jun 2004 19:50:35 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: demo indexing problems on linux
Date: Fri, 18 Jun 2004 19:52:10 +0200
User-Agent: KMail/1.6.2
References: <8F1F77F368665043BDA3C9AA04F70B3003CDB5@exmb2.zonelabs.com>
In-Reply-To: <8F1F77F368665043BDA3C9AA04F70B3003CDB5@exmb2.zonelabs.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <200406181952.11160@danielnaber.de>
X-Seen: false
X-ID: X7hYy0Z-8ePBUtemfvxb8n3UGgpRCDLcdTCla8wwlnULPJrbRbciZS@t-dialin.net
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 17 June 2004 21:10, Morris Mizrahi wrote:

> When I run org.apache.lucene.demo.IndexHTML on Linux the indexer works
> fine when I am creating a new index (e.g. using -create -index option).
> But when I run the indexer again (-index without the -create option) for
> updates it does not properly update the index.

Morris,

what exactly happens when you run the update? Does it miss files that have 
been modified? I just tried it on Linux and it works fine. Files that have 
been modified (according to their file date) are deleted and then added 
again to the index.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8787-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 17:52:55 2004
Return-Path: <lucene-user-return-8787-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48934 invoked from network); 18 Jun 2004 17:52:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 17:52:55 -0000
Received: (qmail 24217 invoked by uid 500); 18 Jun 2004 17:52:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24152 invoked by uid 500); 18 Jun 2004 17:52:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23995 invoked by uid 99); 18 Jun 2004 17:52:54 -0000
Received: from [66.218.93.18] (HELO web41102.mail.yahoo.com) (66.218.93.18)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 18 Jun 2004 10:52:54 -0700
Message-ID: <20040618175229.32229.qmail@web41102.mail.yahoo.com>
Received: from [12.13.3.253] by web41102.mail.yahoo.com via HTTP; Fri, 18 Jun 2004 10:52:29 PDT
Date: Fri, 18 Jun 2004 10:52:29 -0700 (PDT)
From: James Dunn <james_h_dunn@yahoo.com>
Subject: Compound file format file size question
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello all,

I have an index that's about 13GB on disk.  I'm using
1.4 rc3 which uses the compound file format by
default.

Once I run optimize on my index, it creates one 13GB
.cfs file.  This isn't a problem on Linux (yet), but
I'm having some trouble copying the file over to my
Windows XP box.

Is there some way using the compound file format to
set the maximum file size and have Lucene break the
index into multiple files once it hits that limit?

Or do I need to go back to using the non-compound file
format?

Another solution, I suppose, would be to break up my
index into seperate smaller indexes.  This would be my
second choice, however.

Thanks a lot,

Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8788-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 17:59:33 2004
Return-Path: <lucene-user-return-8788-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52160 invoked from network); 18 Jun 2004 17:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 17:59:32 -0000
Received: (qmail 47504 invoked by uid 500); 18 Jun 2004 17:59:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47441 invoked by uid 500); 18 Jun 2004 17:59:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47377 invoked by uid 99); 18 Jun 2004 17:59:26 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 18 Jun 2004 10:59:26 -0700
Message-ID: <20040618175903.17612.qmail@web12705.mail.yahoo.com>
Received: from [211.95.204.101] by web12705.mail.yahoo.com via HTTP; Fri, 18 Jun 2004 10:59:03 PDT
Date: Fri, 18 Jun 2004 10:59:03 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Compound file format file size question
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040618175229.32229.qmail@web41102.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

--- James Dunn <james_h_dunn@yahoo.com> wrote:
> Hello all,
> 
> I have an index that's about 13GB on disk.  I'm using
> 1.4 rc3 which uses the compound file format by
> default.
> 
> Once I run optimize on my index, it creates one 13GB
> ..cfs file.  This isn't a problem on Linux (yet), but
> I'm having some trouble copying the file over to my
> Windows XP box.

What is the exact problem? The sheer size of it or something else? 
Just curious...

> Is there some way using the compound file format to
> set the maximum file size and have Lucene break the
> index into multiple files once it hits that limit?

Can't be done with Lucene, but I seem to recall some discussion about
it.  Nothing concrete, though.

> Or do I need to go back to using the non-compound file
> format?

The total size should be (about) the same, but you could certainly do
that, if having more smaller files is better for you.

Otis

> Another solution, I suppose, would be to break up my
> index into seperate smaller indexes.  This would be my
> second choice, however.
> 
> Thanks a lot,
> 
> Jim


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8789-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 18:12:38 2004
Return-Path: <lucene-user-return-8789-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59575 invoked from network); 18 Jun 2004 18:12:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 18:12:38 -0000
Received: (qmail 94588 invoked by uid 500); 18 Jun 2004 18:12:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94354 invoked by uid 500); 18 Jun 2004 18:12:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94000 invoked by uid 99); 18 Jun 2004 18:12:07 -0000
Received: from [66.218.93.20] (HELO web41104.mail.yahoo.com) (66.218.93.20)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 18 Jun 2004 11:12:07 -0700
Message-ID: <20040618181146.43766.qmail@web41104.mail.yahoo.com>
Received: from [12.13.3.253] by web41104.mail.yahoo.com via HTTP; Fri, 18 Jun 2004 11:11:46 PDT
Date: Fri, 18 Jun 2004 11:11:46 -0700 (PDT)
From: James Dunn <james_h_dunn@yahoo.com>
Subject: Re: Compound file format file size question
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040618175903.17612.qmail@web12705.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis,

Thanks for the response.

Yeah, I was copying the file to a brand new hard-drive
and it was formatted to FAT32 by default, which is
probably why it couldn't handle the 13GB file.  

I'm converting the drive to NTFS now, which should get
me through temporarily.  In the future though, I may
break the index up into smaller sub-indexes so that I
can distribute them across seperate physical disks for
better disk IO.

Thanks for your help!

Jim
--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:
> Hello,
> 
> --- James Dunn <james_h_dunn@yahoo.com> wrote:
> > Hello all,
> > 
> > I have an index that's about 13GB on disk.  I'm
> using
> > 1.4 rc3 which uses the compound file format by
> > default.
> > 
> > Once I run optimize on my index, it creates one
> 13GB
> > ..cfs file.  This isn't a problem on Linux (yet),
> but
> > I'm having some trouble copying the file over to
> my
> > Windows XP box.
> 
> What is the exact problem? The sheer size of it or
> something else? 
> Just curious...
> 
> > Is there some way using the compound file format
> to
> > set the maximum file size and have Lucene break
> the
> > index into multiple files once it hits that limit?
> 
> Can't be done with Lucene, but I seem to recall some
> discussion about
> it.  Nothing concrete, though.
> 
> > Or do I need to go back to using the non-compound
> file
> > format?
> 
> The total size should be (about) the same, but you
> could certainly do
> that, if having more smaller files is better for
> you.
> 
> Otis
> 
> > Another solution, I suppose, would be to break up
> my
> > index into seperate smaller indexes.  This would
> be my
> > second choice, however.
> > 
> > Thanks a lot,
> > 
> > Jim
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8790-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 21:03:33 2004
Return-Path: <lucene-user-return-8790-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57838 invoked from network); 18 Jun 2004 21:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 21:03:33 -0000
Received: (qmail 30930 invoked by uid 500); 18 Jun 2004 21:03:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30884 invoked by uid 500); 18 Jun 2004 21:03:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30833 invoked by uid 99); 18 Jun 2004 21:03:46 -0000
Received: from [66.179.38.26] (HELO hamhock.hoovers.com) (66.179.38.26)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 14:03:45 -0700
Received: from exchange.hoovers.com (gamma.hoovers.com [66.179.38.8])
	by hamhock.hoovers.com (HamHock-OUTBOUND) with ESMTP id A440A16FC6C
	for <lucene-user@jakarta.apache.org>; Fri, 18 Jun 2004 16:03:15 -0500 (CDT)
Received: by gamma.hoovers.com with Internet Mail Service (5.5.2657.72)
	id <NCH3YZ00>; Fri, 18 Jun 2004 16:03:14 -0500
Message-ID: <4810C017B52BD4118EEA00B0D020B0ED0F9EBC11@gamma.hoovers.com>
From: Lynn Li <lli@hoovers.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: search "<text>" and "</text>"
Date: Fri, 18 Jun 2004 16:03:13 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C45577.AA677996"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C45577.AA677996
Content-Type: text/plain

When search "<text>" or "</text>", QueryParser parses them into "text". How
can I make it not to remove anchor brackets and slashes?

Thank you in advance,
Lynn

------_=_NextPart_001_01C45577.AA677996--

From lucene-user-return-8791-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 21:05:28 2004
Return-Path: <lucene-user-return-8791-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58439 invoked from network); 18 Jun 2004 21:05:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 21:05:28 -0000
Received: (qmail 35463 invoked by uid 500); 18 Jun 2004 21:05:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35404 invoked by uid 500); 18 Jun 2004 21:05:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35117 invoked by uid 99); 18 Jun 2004 21:05:38 -0000
Received: from [63.100.163.104] (HELO mercury.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 14:05:38 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <M60N6HBZ>; Fri, 18 Jun 2004 17:04:59 -0400
Message-ID: <E65AE9703B683F4C81B5B39C692EB26D1B0224@mercury.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: search "<text>" and "</text>"
Date: Fri, 18 Jun 2004 17:04:59 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This depends on the analyzer you use.

http://lucene.sourceforge.net/cgi-bin/faq/faqmanager.cgi?file=chapter.indexi
ng&toc=faq#q13

-----Original Message-----
From: Lynn Li [mailto:lli@hoovers.com]
Sent: Friday, June 18, 2004 5:03 PM
To: 'lucene-user@jakarta.apache.org'
Subject: search "<text>" and "</text>"


When search "<text>" or "</text>", QueryParser parses them into "text". How
can I make it not to remove anchor brackets and slashes?

Thank you in advance,
Lynn

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8792-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 21:18:24 2004
Return-Path: <lucene-user-return-8792-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64302 invoked from network); 18 Jun 2004 21:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 21:18:24 -0000
Received: (qmail 72195 invoked by uid 500); 18 Jun 2004 21:18:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72131 invoked by uid 500); 18 Jun 2004 21:18:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72032 invoked by uid 99); 18 Jun 2004 21:18:38 -0000
Received: from [66.179.38.26] (HELO hamhock.hoovers.com) (66.179.38.26)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 14:18:38 -0700
Received: from exchange.hoovers.com (gamma.hoovers.com [66.179.38.8])
	by hamhock.hoovers.com (HamHock-OUTBOUND) with ESMTP id C8A421705FE
	for <lucene-user@jakarta.apache.org>; Fri, 18 Jun 2004 16:18:09 -0500 (CDT)
Received: by gamma.hoovers.com with Internet Mail Service (5.5.2657.72)
	id <NCH3Y52F>; Fri, 18 Jun 2004 16:18:08 -0500
Message-ID: <4810C017B52BD4118EEA00B0D020B0ED0F9EBC12@gamma.hoovers.com>
From: Lynn Li <lli@hoovers.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: search "<text>" and "</text>"
Date: Fri, 18 Jun 2004 16:18:07 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Both StandardAnalyzer and SnowballAnalyzer remove them.

-----Original Message-----
From: wallen@Cyveillance.com [mailto:wallen@Cyveillance.com] 
Sent: Friday, June 18, 2004 4:05 PM
To: lucene-user@jakarta.apache.org
Subject: RE: search "<text>" and "</text>"

This depends on the analyzer you use.

http://lucene.sourceforge.net/cgi-bin/faq/faqmanager.cgi?file=chapter.indexi
ng&toc=faq#q13

-----Original Message-----
From: Lynn Li [mailto:lli@hoovers.com]
Sent: Friday, June 18, 2004 5:03 PM
To: 'lucene-user@jakarta.apache.org'
Subject: search "<text>" and "</text>"


When search "<text>" or "</text>", QueryParser parses them into "text". How
can I make it not to remove anchor brackets and slashes?

Thank you in advance,
Lynn

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8793-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 21:32:37 2004
Return-Path: <lucene-user-return-8793-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71385 invoked from network); 18 Jun 2004 21:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 21:32:37 -0000
Received: (qmail 7092 invoked by uid 500); 18 Jun 2004 21:32:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7051 invoked by uid 500); 18 Jun 2004 21:32:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7038 invoked by uid 99); 18 Jun 2004 21:32:47 -0000
Received: from [192.18.98.34] (HELO brmea-mail-3.sun.com) (192.18.98.34)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 14:32:47 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-3.sun.com (8.12.10/8.12.9) with ESMTP id i5ILWIil025532
	for <lucene-user@jakarta.apache.org>; Fri, 18 Jun 2004 15:32:19 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0HZI00301X0KS4@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Fri, 18 Jun 2004 14:32:18 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0HZI004PUX5U1L@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Fri, 18 Jun 2004 14:32:18 -0700 (PDT)
Date: Fri, 18 Jun 2004 14:32:18 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Lucene search integration with Portal Servers
In-reply-to: <4810C017B52BD4118EEA00B0D020B0ED0F9EBC12@gamma.hoovers.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40D35F62.5080105@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
References: <4810C017B52BD4118EEA00B0D020B0ED0F9EBC12@gamma.hoovers.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

Has anyone tried or have any sample of working integration solution for
LUCENE with any J2EE portal servers? Also I am curious to know what are
the best or mostly used practices to link the search results with the
documents/files on the system.

Thanks all,

-H



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8794-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 18 23:11:56 2004
Return-Path: <lucene-user-return-8794-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31119 invoked from network); 18 Jun 2004 23:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Jun 2004 23:11:56 -0000
Received: (qmail 56484 invoked by uid 500); 18 Jun 2004 23:11:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56438 invoked by uid 500); 18 Jun 2004 23:11:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56291 invoked by uid 99); 18 Jun 2004 23:11:26 -0000
Received: from [142.161.130.102] (HELO mx-mtaout01.mts.net) (142.161.130.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 16:11:26 -0700
Received: from gravitybound.net ([205.200.74.228]) by mx-mtaout01.mts.net
          with ESMTP
          id <20040618231055.XQSJ4492.mx-mtaout01.mts.net@gravitybound.net>
          for <lucene-user@jakarta.apache.org>;
          Fri, 18 Jun 2004 18:10:55 -0500
Message-ID: <40D3768E.6030101@gravitybound.net>
Date: Fri, 18 Jun 2004 18:11:10 -0500
From: "Jason St. Louis" <jason.stlouis@gravitybound.net>
Reply-To:  "Jason St. Louis"
Organization: MTS Media
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Question on how to build a query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi everyone.  I'm wondering if someone could help me out.

I have created an index of a database of person records where I have 
created documents with the following fields:
database primary_key (stored, not indexed)
first name (indexed)
last name (indexed)
city (indexed)

I used SimpleAnalyzer when creating the index.

I am providing a web based form to search this index.  The form has 3 
fields for first name, last name and city (city is a drop down list).

I want to take the users input and from these 3 fields and build a query 
such that:
A)last name is mandatory and can be wildcarded (I will probably make 
sure the value begins with at least one letter)
B)First name can be wildcarded (same as last name, although if it is 
left blank, I would probably just search the last_name and city and 
ignore the first name)
C)city is mandatory and must match exactly

How would I go about building this query?

Do I create a wildcard query for first name and last name, a term query 
for city and then combine them into boolean query where all 3 terms must 
be matched?  I kind of feel like I'm grasping at straws here.  I think I 
just need a jumpstart to understand how the Query API works.

Thanks.
Jason




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8795-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 03:04:29 2004
Return-Path: <lucene-user-return-8795-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20081 invoked from network); 19 Jun 2004 03:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 03:04:29 -0000
Received: (qmail 34946 invoked by uid 500); 19 Jun 2004 03:04:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34889 invoked by uid 500); 19 Jun 2004 03:04:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34843 invoked by uid 99); 19 Jun 2004 03:04:43 -0000
Received: from [208.185.174.144] (HELO mr3.zonelabs.com) (208.185.174.144)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 20:04:43 -0700
Received: from exgate2.zonelabs.com ([172.16.211.234])
	by mr3.zonelabs.com (8.12.11/8.12.11/BCH2.0) with ESMTP id i5J346ic008500
	for <lucene-user@jakarta.apache.org>; Fri, 18 Jun 2004 20:04:07 -0700 (PDT)
Received: from exmb2.zonelabs.com ([172.16.211.235]) by exgate2.zonelabs.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 18 Jun 2004 20:04:01 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: demo indexing problems on linux
Date: Fri, 18 Jun 2004 20:04:01 -0700
Message-ID: <8F1F77F368665043BDA3C9AA04F70B3003CDB7@exmb2.zonelabs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: demo indexing problems on linux
Thread-Index: AcRVXMwn2uVA+bBLQy2ntiEhv0/yIwAFgvGA
From: "Morris Mizrahi" <mmizrahi@zonelabs.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 19 Jun 2004 03:04:01.0721 (UTC) FILETIME=[128C6A90:01C455AA]
X-Scanned-By: MIMEDefang 2.39
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for your response Daniel.

This is the process I have followed:
1) Run the indexer for the first time with the -create option and it
adds all of my files to the index.
2) Run the indexer later in the day when some files have been added but
none have been removed. When it runs here it removes files from the
index that are still there and adds some of the new files.=20
In the end the index is missing some of the files that should be there.
I have about 21000 files and there is about 2000 that are missing from
the index.

I have been using LIMO to analyze my index.

Does anyone have any thoughts or ideas?

Thanks for any help.

             Morris



-----Original Message-----
From: Daniel Naber [mailto:daniel.naber@t-online.de]=20
Sent: Friday, June 18, 2004 10:52 AM
To: Lucene Users List
Subject: Re: demo indexing problems on linux

On Thursday 17 June 2004 21:10, Morris Mizrahi wrote:

> When I run org.apache.lucene.demo.IndexHTML on Linux the indexer works
> fine when I am creating a new index (e.g. using -create -index
option).
> But when I run the indexer again (-index without the -create option)
for
> updates it does not properly update the index.

Morris,

what exactly happens when you run the update? Does it miss files that
have=20
been modified? I just tried it on Linux and it works fine. Files that
have=20
been modified (according to their file date) are deleted and then added=20
again to the index.

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8796-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 04:00:37 2004
Return-Path: <lucene-user-return-8796-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46809 invoked from network); 19 Jun 2004 04:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 04:00:36 -0000
Received: (qmail 41684 invoked by uid 500); 19 Jun 2004 04:00:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41658 invoked by uid 500); 19 Jun 2004 04:00:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41619 invoked by uid 99); 19 Jun 2004 04:00:52 -0000
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 21:00:52 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 873DA8378F;
	Sat, 19 Jun 2004 08:00:15 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 37964730; Sat, 19 Jun 2004 08:00:15 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: Lucene search integration with Portal Servers
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	Hetan.Shah@Sun.COM
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Sat, 19 Jun 2004 08:00:15 +0400
Message-ID: <web-37964730@mail5.rambler.ru>
In-Reply-To: <40D35F62.5080105@Sun.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

For example:
http://www.lutece.paris.fr/en/jsp/site/Portal.jsp

Regards,
Vladimir.

On Fri, 18 Jun 2004 14:32:18 -0700
  Hetan Shah <Hetan.Shah@Sun.COM> wrote:
>Hi All,
>
>Has anyone tried or have any sample of working integration solution 
>for
>LUCENE with any J2EE portal servers? Also I am curious to know what 
>are
>the best or mostly used practices to link the search results with the
>documents/files on the system.
>
>Thanks all,
>
>-H
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8797-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 06:07:28 2004
Return-Path: <lucene-user-return-8797-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87953 invoked from network); 19 Jun 2004 06:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 06:07:27 -0000
Received: (qmail 62764 invoked by uid 500); 19 Jun 2004 06:07:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62717 invoked by uid 500); 19 Jun 2004 06:07:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62685 invoked by uid 99); 19 Jun 2004 06:07:44 -0000
Received: from [64.59.134.9] (HELO pd7mo4no.prod.shaw.ca) (64.59.134.9)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 23:07:44 -0700
Received: from pd8mr8no.prod.shaw.ca
 (pd8mr8no-qfe2.prod.shaw.ca [10.0.144.229]) by l-daemon
 (iPlanet Messaging Server 5.2 HotFix 1.18 (built Jul 28 2003))
 with ESMTP id <0HZJ00M50K97B2@l-daemon> for lucene-user@jakarta.apache.org;
 Fri, 18 Jun 2004 23:51:07 -0600 (MDT)
Received: from pn7ml3no.prod.shaw.ca ([10.0.149.112])
 by pd8mr8no.prod.shaw.ca (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar
 15 2004)) with ESMTP id <0HZJ00HNEK97XO80@pd8mr8no.prod.shaw.ca> for
 lucene-user@jakarta.apache.org; Fri, 18 Jun 2004 23:51:07 -0600 (MDT)
Received: from h24-77-181-144.wp.shawcable.net
 (S010600a0c9977ee1.wp.shawcable.net [24.77.181.144])
 by l-daemon (iPlanet Messaging Server 5.2 HotFix 1.18 (built Jul 28 2003))
 with SMTP id <0HZJ00C2LK96S5@l-daemon> for lucene-user@jakarta.apache.org;
 Fri, 18 Jun 2004 23:51:07 -0600 (MDT)
Received: (qmail 31062 invoked from network); Sat, 19 Jun 2004 05:41:12 +0000
Received: from unknown (HELO ?192.168.0.4?) (192.168.0.4)
 by h24-77-181-144.wp.shawcable.net with SMTP; Sat, 19 Jun 2004 05:41:12 +0000
Date: Sat, 19 Jun 2004 00:51:06 -0500
From: "Jason St. Louis" <jason.stlouis@gravitybound.net>
Subject: Re: Question on how to build a query
In-reply-to: <40D3768E.6030101@gravitybound.net>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <40D3D44A.3030208@gravitybound.net>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
References: <40D3768E.6030101@gravitybound.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well, I seem to have gotten something to work.  Maybe someone could just 
  comment on my approach.

I wrote my indexer so that it added each field without tokenizing it:

Field fnameField = new Field("fname", fname.toLowerCase(), true, true, 
false);
Field lnameField = new Field("lname", lname.toLowerCase(), true, true, 
false);
Field cityField = new Field("city", position.toLowerCase(), true, true, 
false);

By the way, if this is the case, is the indexer even using the analyzer 
that I pass to it?

Then in my search code I create the firstname query as a WildcardQuery 
if the first name is provided (adding a * to the end if it's not already 
there):

Term fnameTerm = null;
Query fnameQuery = null;
if( fnameIn.length() > 0)
{
	if( !fnameIn.endsWith("*") )
	{
		fnameIn += "*";
	}
	fnameTerm = new Term("fname", fnameIn);
	fnameQuery = new WildcardQuery(fnameTerm);
}

I then create my lastname query as either a WildcardQuery or a term 
query depending on whether it contains a *:

Term lnameTerm = new Term("lname", lnameIn);
Query lnameQuery = null;
if( lnameIn.indexOf("*") != -1 )
{
	lnameQuery = new WildcardQuery(lnameTerm);
}
else
{
	lnameQuery = new TermQuery(lnameTerm);
}

Lastly, I create the city query as a TermQuery.

Finally, I add the 3 queries to a booleanQuery, not adding the first 
name query if it is null (this means a first name was not provided) and 
making lastname and city required:

if(fnameQuery != null)
{
	overallQuery.add(fnameQuery, true, false);
}
overallQuery.add(lnameQuery, true, false);
overallQuery.add(positionQuery, true, false);

I then search my index and it appears to work. I haven't tested it 
extensively yet, though.

Does this seem like a reasonable way to approach this problem, or am I 
missing something that's going to bite me in the you-know-what?

Thanks.
Jason


Jason St. Louis wrote:
> Hi everyone.  I'm wondering if someone could help me out.
> 
> I have created an index of a database of person records where I have 
> created documents with the following fields:
> database primary_key (stored, not indexed)
> first name (indexed)
> last name (indexed)
> city (indexed)
> 
> I used SimpleAnalyzer when creating the index.
> 
> I am providing a web based form to search this index.  The form has 3 
> fields for first name, last name and city (city is a drop down list).
> 
> I want to take the users input and from these 3 fields and build a query 
> such that:
> A)last name is mandatory and can be wildcarded (I will probably make 
> sure the value begins with at least one letter)
> B)First name can be wildcarded (same as last name, although if it is 
> left blank, I would probably just search the last_name and city and 
> ignore the first name)
> C)city is mandatory and must match exactly
> 
> How would I go about building this query?
> 
> Do I create a wildcard query for first name and last name, a term query 
> for city and then combine them into boolean query where all 3 terms must 
> be matched?  I kind of feel like I'm grasping at straws here.  I think I 
> just need a jumpstart to understand how the Query API works.
> 
> Thanks.
> Jason
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8798-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 06:30:24 2004
Return-Path: <lucene-user-return-8798-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94899 invoked from network); 19 Jun 2004 06:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 06:30:23 -0000
Received: (qmail 1401 invoked by uid 500); 19 Jun 2004 06:30:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1371 invoked by uid 500); 19 Jun 2004 06:30:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1357 invoked by uid 99); 19 Jun 2004 06:30:33 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 18 Jun 2004 23:30:33 -0700
Received: (qmail 20762 invoked by uid 532); 19 Jun 2004 06:29:53 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.215159 secs); 19 Jun 2004 06:29:53 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 19 Jun 2004 06:29:53 -0000
Message-ID: <40D3DD60.4050406@tropo.com>
Date: Fri, 18 Jun 2004 23:29:52 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: amusing interaction between advanced tokenizers and highlighter package
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've run across an amusing interaction between advanced 
Analyzers/TokenStreams and the very useful "term highlighter": 
http://cvs.apache.org/viewcvs/jakarta-lucene-sandbox/contributions/highlighter/

I have a custom Analyzer I'm using to index javadoc-generated web pages.
The Analyzer in turn has a custom TokenStream which tries to more 
intelligently tokenize java-language tokens.

A naive analyzer would turn something like "SyncThreadPool" into one 
token. Mine uses the great Lucene capability of Tokens being able to 
have a "0" position increment to turn it into the token stream:

Sync   (incr = 0)
Thread (incr = 0)
Pool (incr = 0)
SyncThreadPool (incr = 1)

[As an aside maybe it should also pair up the subtokens, so "SyncThread" 
and "ThreadPool" appear too].

The point behind this is someone searching for "threadpool" probably 
would want to see a match for "SyncThreadPool" even this is the evil 
leading-prefix case. With most other Analyzers and ways of forming a 
query this would be missed, which I think is anti-human and annoys me to 
no end.

So the analyzer/tokenizer works great, and I have a demo site about to 
come up that indexes lots of publicly avail javadoc as a kind of 
resource so you can easily find what's already been done.

The problem is as follows. In all cases I use my Analyzer to index the 
documents.
If I use my Analyzer with with the Highligher package,  it doesn't look 
at the position increment of the tokens and consequently a nonsense 
stream of matches is output. If I use a different Analyzer w/ the 
highlighter (say, the StandardAnalyzer), then it doesn't show the 
matches that really matched, as it doesn't see the "subtokens".

It might be the fix is for the Highlighter to look at the position 
increment of tokens and only pass by one if multiple ones have an incr 
of 0 and match one part of the query.

Has this come up before and is the issue clear?


thx,
 Dave

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8799-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 09:02:19 2004
Return-Path: <lucene-user-return-8799-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59757 invoked from network); 19 Jun 2004 09:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 09:02:19 -0000
Received: (qmail 165 invoked by uid 500); 19 Jun 2004 09:02:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 141 invoked by uid 500); 19 Jun 2004 09:02:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 122 invoked by uid 99); 19 Jun 2004 09:02:36 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 02:02:36 -0700
Received: from Z-ISV03M0372 (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5J91rU9010985
	for <lucene-user@jakarta.apache.org>; Sat, 19 Jun 2004 10:01:53 +0100
Date: Sat, 19 Jun 2004 10:01:53 +0100
Message-Id: <200406190901.i5J91rU9010985@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re:amusing interaction between advanced tokenizers and highlighter package
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, this issue has come up before with other choices of analyzers.
I think it should be fixable without changing any of the highlighter APIs 
- can you email me or post here the source to your analyzer?

Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8800-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 09:05:20 2004
Return-Path: <lucene-user-return-8800-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60862 invoked from network); 19 Jun 2004 09:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 09:05:20 -0000
Received: (qmail 6816 invoked by uid 500); 19 Jun 2004 09:05:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6767 invoked by uid 500); 19 Jun 2004 09:05:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6742 invoked by uid 99); 19 Jun 2004 09:05:38 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 02:05:38 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A3E85793165
	for <lucene-user@jakarta.apache.org>; Sat, 19 Jun 2004 05:04:58 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40D3D44A.3030208@gravitybound.net>
References: <40D3768E.6030101@gravitybound.net> <40D3D44A.3030208@gravitybound.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BC0659BA-C1CF-11D8-8D9D-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question on how to build a query
Date: Sat, 19 Jun 2004 05:04:56 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 19, 2004, at 1:51 AM, Jason St. Louis wrote:
> I wrote my indexer so that it added each field without tokenizing it:
>
> Field fnameField = new Field("fname", fname.toLowerCase(), true, true, 
> false);
> Field lnameField = new Field("lname", lname.toLowerCase(), true, true, 
> false);
> Field cityField = new Field("city", position.toLowerCase(), true, 
> true, false);
>
> By the way, if this is the case, is the indexer even using the 
> analyzer that I pass to it?

No.  Tokenized fields are analyzed.  Non-tokenized fields are left 
as-is.  It might be clearer if you used Field.Keyword instead, which is 
identical to what you have here.

> Then in my search code I create the firstname query as a WildcardQuery 
> if the first name is provided (adding a * to the end if it's not 
> already there):
>
> Term fnameTerm = null;
> Query fnameQuery = null;
> if( fnameIn.length() > 0)
> {
> 	if( !fnameIn.endsWith("*") )
> 	{
> 		fnameIn += "*";
> 	}
> 	fnameTerm = new Term("fname", fnameIn);
> 	fnameQuery = new WildcardQuery(fnameTerm);
> }

I recommend PrefixQuery in this case.

I presume you lowercased fnameIn?  You should to get it to match what 
was indexed.

>
> Does this seem like a reasonable way to approach this problem, or am I 
> missing something that's going to bite me in the you-know-what?

Seems reasonable to me as long as you are lowercasing the strings at 
query time also.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8801-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 09:16:58 2004
Return-Path: <lucene-user-return-8801-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65173 invoked from network); 19 Jun 2004 09:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 09:16:58 -0000
Received: (qmail 31039 invoked by uid 500); 19 Jun 2004 09:17:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31007 invoked by uid 500); 19 Jun 2004 09:17:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30989 invoked by uid 99); 19 Jun 2004 09:17:17 -0000
Received: from [24.51.109.181] (HELO postfix.mail.ehatchersolutions.com) (24.51.109.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 02:17:17 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id C0C0679319C
	for <lucene-user@jakarta.apache.org>; Sat, 19 Jun 2004 05:16:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40D3DD60.4050406@tropo.com>
References: <40D3DD60.4050406@tropo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5DF73672-C1D1-11D8-8D9D-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: amusing interaction between advanced tokenizers and highlighter package
Date: Sat, 19 Jun 2004 05:16:37 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 19, 2004, at 2:29 AM, David Spencer wrote:
> A naive analyzer would turn something like "SyncThreadPool" into one 
> token. Mine uses the great Lucene capability of Tokens being able to 
> have a "0" position increment to turn it into the token stream:
>
> Sync   (incr = 0)
> Thread (incr = 0)
> Pool (incr = 0)
> SyncThreadPool (incr = 1)
>
> [As an aside maybe it should also pair up the subtokens, so 
> "SyncThread" and "ThreadPool" appear too].
>
> The point behind this is someone searching for "threadpool" probably 
> would want to see a match for "SyncThreadPool" even this is the evil 
> leading-prefix case. With most other Analyzers and ways of forming a 
> query this would be missed, which I think is anti-human and annoys me 
> to no end.

There are indexing/querying solutions/workarounds to the leading-prefix 
issue, such as reversing the text as you index it and ensuring you do 
the same on queries so they match.  There are some interesting 
techniques for this type of thing in the Managing Gigabytes book I'm 
currently reading, which Lucene could support with custom analysis and 
queries, I believe.

> The problem is as follows. In all cases I use my Analyzer to index the 
> documents.
> If I use my Analyzer with with the Highligher package,  it doesn't 
> look at the position increment of the tokens and consequently a 
> nonsense stream of matches is output. If I use a different Analyzer w/ 
> the highlighter (say, the StandardAnalyzer), then it doesn't show the 
> matches that really matched, as it doesn't see the "subtokens".

Are your "subtokens" marked with correct offset values?  This probably 
doesn't relate to the problem you're seeing, but I'm curious.

> It might be the fix is for the Highlighter to look at the position 
> increment of tokens and only pass by one if multiple ones have an incr 
> of 0 and match one part of the query.
>
> Has this come up before and is the issue clear?

The problem is clear, and I've identified this issue with my 
exploration of the Highlighter also.  The Highlighter works well for 
the most common scenarios, but certainly doesn't cover all the bases.  
The majority of scenarios do not use multiple tokens in a single 
position.  Also, it also doesn't currently handle the new SpanQuery 
family - although Highlighting spans would be quite cool.  After 
learning how Highlighter works, I have a deep appreciation for the 
great work Mark put into it - it is well done.

As for this issue, though, I think your solution sounds reasonable, 
although I haven't thought it through completely.  Perhaps Mark can 
comment.  If you do modify it to work for your case, it would be great 
to have your contribution rolled back in :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8802-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 11:25:46 2004
Return-Path: <lucene-user-return-8802-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24126 invoked from network); 19 Jun 2004 11:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 11:25:46 -0000
Received: (qmail 89426 invoked by uid 500); 19 Jun 2004 11:25:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89201 invoked by uid 500); 19 Jun 2004 11:25:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89144 invoked by uid 99); 19 Jun 2004 11:25:24 -0000
Received: from [62.67.200.164] (HELO smtprelay03.ispgateway.de) (62.67.200.164)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 04:25:24 -0700
Received: (qmail 21053 invoked from network); 19 Jun 2004 11:25:17 -0000
Received: from unknown (HELO tcn.local) (652696@[217.231.226.178])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 19 Jun 2004 11:25:17 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id D5D103641
	for <lucene-user@jakarta.apache.org>; Sat, 19 Jun 2004 13:25:14 +0200 (CEST)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: stop words in index
Date: Sat, 19 Jun 2004 13:25:13 +0200
User-Agent: KMail/1.6.2
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200406191325.13669.lucene@nitwit.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

How comes that stop words show up in index (HighFreqTerms)? Yes, I do you the 
same analyzer for indexing and searching.

class SearchFacade
{
	private final static String[] GERMAN_STOP_WORDS = new String[] { "foo", 
"bar" };
	private final static Analyzer GERMAN_ANALYZER = new 
SnowballAnalyzer( "German2", GERMAN_STOP_WORDS );

	public void index()
	{
		writer = new IndexWriter( Configuration.Lucene.INDEX, GERMAN_ANALYZER, 
true );
		...
	}

	public void search(String q)
	{
		final Query q = MultiFieldQueryParser.parse( query, new String[] { "blah", 
"foo", "bar" }, GERMAN_ANALYZER );
		...
	}
}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8803-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 16:31:49 2004
Return-Path: <lucene-user-return-8803-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64210 invoked from network); 19 Jun 2004 16:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 16:31:49 -0000
Received: (qmail 19014 invoked by uid 500); 19 Jun 2004 16:31:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18985 invoked by uid 500); 19 Jun 2004 16:31:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18965 invoked by uid 99); 19 Jun 2004 16:31:38 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 09:31:38 -0700
Received: (qmail 30799 invoked by uid 532); 19 Jun 2004 16:31:27 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.596519 secs); 19 Jun 2004 16:31:27 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 19 Jun 2004 16:31:27 -0000
Message-ID: <40D46A61.8080402@tropo.com>
Date: Sat, 19 Jun 2004 09:31:29 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: amusing interaction between advanced tokenizers and highlighter
 package
References: <200406190901.i5J91rU9010985@outmail.freedom2surf.net>
In-Reply-To: <200406190901.i5J91rU9010985@outmail.freedom2surf.net>
Content-Type: multipart/mixed;
 boundary="------------000809010703000208080105"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------000809010703000208080105
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

markharw00d@yahoo.co.uk wrote:

>Yes, this issue has come up before with other choices of analyzers.
>I think it should be fixable without changing any of the highlighter APIs 
>- can you email me or post here the source to your analyzer?
>  
>

Code attached - don't make fun of it please :) - very prelim. I think it 
only uses one other file, (TRQueue) also attached (but: note, it's in a 
different package). Also any comments in the code may be inaccurate. The 
general goal is as stated in my earlier mail, examples are:

AlphaBeta ->
 Alpha (incr 0)
 Beta (incr 0)
 AlphaBeta (incr 1)

MAX_INT ->
 MAX (incr 0)
 INT (incr 0)
 MAX_INT (incr 1)

thx,
 Dave

>Cheers
>Mark
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


--------------000809010703000208080105
Content-Type: text/plain;
 name="JavadocAnalyzer.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="JavadocAnalyzer.java"

package com.tropo.lucene;

import org.apache.lucene.analysis.*;
import java.io.*;
import java.util.*;
import com.tropo.util.*;
import java.util.regex.*;
/**
 * Try to parse javadoc better than othe analyzers.
 */
public final class JavadocAnalyzer
	extends Analyzer
{

	// [A-Za-z0-9._]+
	// 
	public final TokenStream tokenStream( String fieldName, Reader reader)
	{
		return new LowerCaseFilter( new JStream( fieldName, reader));
	}

	/**
	 * Try to break up a token into subset/subtokens that might be said to occur in the same place.
	 */
	public static List breakup( String s)
	{
		// "a" -> null
		// "alphaBeta" -> "alpha", "Beta"
		// "XXAlpha" -> ?, Alpha
		// BIG_NUM -> "BIG", "NUM"

		List lis = new LinkedList();

		Matcher m;

		m = breakupPattern.matcher( s);
		while (m.find())
		{
			String g = m.group();
			if ( ! g.equals( s))
				lis.add( g);
		}

		// hard ones
		m = breakupPattern2.matcher( s);
		while (m.find())
		{
			String g;
			if ( m.groupCount() == 2) // wierd XXFoo case
				g = m.group( 2);
			else
				g = m.group();
			if ( ! g.equals( s))
				lis.add( g);
			/*
			o.println( "gc: " + m.groupCount() +
					   "/" + m.group( 0) + "/" + m.group( 1) + "/" + m.group( 2));
			*/
			//lis.add( m.group());
		}		
		return lis;
	}	


	/**
	 *
	 */
	private static class JStream
		extends TokenStream
	{
		private TRQueue q = new TRQueue();
		private Set already = new HashSet();
		private String fieldName;
		private PushbackReader pb;

		private StringBuffer sb = new StringBuffer( 32);
		private int offset;

		// eat white
		// have 
		private int state = 0;
		

		/**
		 *
		 */
		private JStream( String fieldName, Reader reader)
		{
			this.fieldName = fieldName;
			pb = new PushbackReader( reader);
		}


		/**
		 *
		 */
		public Token next()
			throws IOException
		{
			if ( q.size() > 0) // pre-calculated
				return (Token) q.dequeue();
			int c;
			int start = offset;
			sb.setLength( 0);
			offset--;
			boolean done = false;
			String type = "mystery";
			state = 0;
			
			while ( ! done &&
					( c = pb.read()) != -1)
			{
				char ch = (char) c;
				offset++;
				switch( state)
				{
				case 0:
					if ( Character.isJavaIdentifierStart( ch))
					{
						start = offset;
						sb.append( ch);
						state = 1;
						type = "id";
					}
					else if ( Character.isDigit( ch))
					{
						type = "number";
						start = offset;
						sb.append( ch);
						state = 2;						
					}
					break;
					
				case 1:
					if ( Character.isJavaIdentifierPart( ch) || ch == '.')
					{
						sb.append( ch);
					}
					else
					{
						pb.unread( ch);
						done = true;
					}
					break;
				case 2:
					if ( Character.isDigit( ch))
					{
						sb.append( ch);
					}
					else
					{
						pb.unread( c);
						done = true;
					}
					break;					
				}
			}
			String s = sb.toString();
			if ( s.length() == 0)
				return null;
			else
			{
				already.clear();
				Token t;				
				int incr = 1;
				if ( s.indexOf( '.') > 0)
				{
					//System.out.println( "XX BEFORE: " + s);
					String[] result = s.split( "[\\.]+");

					for (int x=0; x<result.length; x++)
					{
						//
						List lis = breakup( result[ x]);
						if ( lis.size() > 0)
						{
							Iterator it = lis.iterator();
							while ( it.hasNext())
							{
								String nt = (String) it.next();
								if ( already.add( nt))
								{
									t = new Token( nt, start, offset, type);
									t.setPositionIncrement( 0);
									q.queue( t);
								}
							}
						}
						//
						t = new Token( result[x], start, offset, type);
						if ( x < result.length-1)
							t.setPositionIncrement( 0);
						q.queue( t);
					}
					t = new Token( s, start, offset, type); 
					t.setPositionIncrement( 0);
					return t;
				}
				else
				{
					List lis = breakup( s);
					if ( lis.size() > 0)
					{
						Iterator it= lis.iterator();
						while ( it.hasNext())
						{
							String nt = (String) it.next();
							if ( already.add( nt))
							{
								t = new Token( nt, start, offset, type);
								t.setPositionIncrement( 0);
								q.queue( t);
							}
						}
					}
					return new Token( s, start, offset, type);
				}
			}
		}





		/**
		 *
		 */
		public void close()
           throws IOException
		{
			pb.close();
			pb = null;
		}
		
	}

	public static void main( String[] a)
	{
		String s = "XXFoo JavaDoc Analyzis BIG_NUM 123 java.util.HashMap x2";
		//Pattern p = Pattern.compile("(http://[^\\s()]+)");
		o.println( "starting: " + s);
		o.println( breakup( s));
		

	}

	static PrintStream o = System.out;
		
	static String p1 = "[A-Z][a-z]+";
	static String p2 = "[0-9]+";
	static String p3 = "[A-Z]+";
	static String p4 = "[a-z]+";

	// next set
	static String q1 = "([A-Z]+)([A-Z][a-z]+)";
	static String q2 = "([a-z]+[0-9]+)";
	static String q3 = "([A-Z]+[0-9]+)";	
	static Pattern breakupPattern;
	static Pattern breakupPattern2;	

	static
	{
		breakupPattern = Pattern.compile( "(" + p1 + ")" + "|" +
										  "(" + p2 + ")" + "|" +
										  "(" + p3 + ")" + "|" +
										  "(" + p4 + ")");
		
		breakupPattern2 = Pattern.compile( q1  + "|" + q2 + "|" + q3);

	}
}
		


--------------000809010703000208080105
Content-Type: text/plain;
 name="TRQueue.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="TRQueue.java"

package com.tropo.util;

import java.util.*;

/**
 * The collections package gives us LinkedList, which
 * can be a queue, but it doesn't have correct blocking
 * semantics on dequeue. That's what we offer.
 * @see com.tropo.persist.PersistentQueue
 */
public class TRQueue
{
	/**
	 * Create an empty queue.
	 */
	public TRQueue()
	{
	}
	
	/**
	 * Thread-safe queueing, wakes up safeDequeue too.
	 * @see #safeDequeue
	 */
	public synchronized void safeQueue( Object x)
	{
		ll.addFirst( x);
		notify();
	}
	/**
	 *
	 */
	public synchronized void queue( Object x)
	{
		ll.addFirst( x);
	}	

	/**
	 * Blocking dequeue.
	 */
	public synchronized Object safeDequeue()
	{
		while( true )
		{
			try
			{
				return ll.removeLast();
			}
			catch( NoSuchElementException ouch)
			{
				try
				{
					wait();
				}
				catch( InterruptedException ie)
				{
					return null; // 3/2003 - let threads die
				}
			}
		}
	}

	/**
	 * 
	 */
	public Object dequeue()
	{
		try
		{
			return ll.removeLast();
		}
		catch( NoSuchElementException ouch)
		{
			return null;
		}
	}


	/**
	 *
	 */
	public synchronized int size()
	{
		return ll.size();
	}

	private LinkedList ll = new LinkedList();
	
}


--------------000809010703000208080105
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------000809010703000208080105--

From lucene-user-return-8804-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 16:36:02 2004
Return-Path: <lucene-user-return-8804-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66175 invoked from network); 19 Jun 2004 16:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 16:36:01 -0000
Received: (qmail 30946 invoked by uid 500); 19 Jun 2004 16:35:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30912 invoked by uid 500); 19 Jun 2004 16:35:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30896 invoked by uid 99); 19 Jun 2004 16:35:55 -0000
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 09:35:55 -0700
Received: (qmail 30909 invoked by uid 532); 19 Jun 2004 16:35:44 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.281126 secs); 19 Jun 2004 16:35:44 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 19 Jun 2004 16:35:44 -0000
Message-ID: <40D46B62.8070703@tropo.com>
Date: Sat, 19 Jun 2004 09:35:46 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: amusing interaction between advanced tokenizers and highlighter
 package
References: <40D3DD60.4050406@tropo.com> <5DF73672-C1D1-11D8-8D9D-000393A564E6@ehatchersolutions.com>
In-Reply-To: <5DF73672-C1D1-11D8-8D9D-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Jun 19, 2004, at 2:29 AM, David Spencer wrote:
>
>> A naive analyzer would turn something like "SyncThreadPool" into one 
>> token. Mine uses the great Lucene capability of Tokens being able to 
>> have a "0" position increment to turn it into the token stream:
>>
>> Sync   (incr = 0)
>> Thread (incr = 0)
>> Pool (incr = 0)
>> SyncThreadPool (incr = 1)
>>
>> [As an aside maybe it should also pair up the subtokens, so 
>> "SyncThread" and "ThreadPool" appear too].
>>
>> The point behind this is someone searching for "threadpool" probably 
>> would want to see a match for "SyncThreadPool" even this is the evil 
>> leading-prefix case. With most other Analyzers and ways of forming a 
>> query this would be missed, which I think is anti-human and annoys me 
>> to no end.
>
>
> There are indexing/querying solutions/workarounds to the 
> leading-prefix issue, such as reversing the text as you index it and 
> ensuring you do the same on queries so they match.  There are some 
> interesting techniques for this type of thing in the Managing 
> Gigabytes book I'm currently reading, which Lucene could support with 
> custom analysis and queries, I believe.

Yeah, great book. I thought my approach fit into Lucene the most 
naturally for my goals - and no doubt, things like just having the 
possibility of different pos increments is a great concept that I 
haven't seen in other search engines. I keep meaning to try an idea that 
appeared on the list some months ago, bumping up the incr between 
sentences so that it's harders for, say, a 2 word phrase to match w/ 1 
word in each sentence (makes sense to a computer, but usually not what a 
human wants).  Another side project...

>
>> The problem is as follows. In all cases I use my Analyzer to index 
>> the documents.
>> If I use my Analyzer with with the Highligher package,  it doesn't 
>> look at the position increment of the tokens and consequently a 
>> nonsense stream of matches is output. If I use a different Analyzer 
>> w/ the highlighter (say, the StandardAnalyzer), then it doesn't show 
>> the matches that really matched, as it doesn't see the "subtokens".
>
>
> Are your "subtokens" marked with correct offset values?  This probably 
> doesn't relate to the problem you're seeing, but I'm curious.


I think so but this is the first time I've done this kind of thing. When 
I hit the special case several of the "subtokens" are 1st returned w/ an 
incr of 0, then the normal token, w/ an incr of 1 - which seems to make 
sense to me at least.

>
>> It might be the fix is for the Highlighter to look at the position 
>> increment of tokens and only pass by one if multiple ones have an 
>> incr of 0 and match one part of the query.
>>
>> Has this come up before and is the issue clear?
>
>
> The problem is clear, and I've identified this issue with my 
> exploration of the Highlighter also.  The Highlighter works well for 
> the most common scenarios, but certainly doesn't cover all the bases.  
> The majority of scenarios do not use multiple tokens in a single 
> position.  Also, it also doesn't currently handle the new SpanQuery 
> family - although Highlighting spans would be quite cool.  After 
> learning how Highlighter works, I have a deep appreciation for the 
> great work Mark put into it - it is well done.
>
> As for this issue, though, I think your solution sounds reasonable, 
> although I haven't thought it through completely.  Perhaps Mark can 
> comment.  If you do modify it to work for your case, it

Oh sure, I'll post any changes but wait for Mark for now.

> would be great to have your contribution rolled back in :)
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8805-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 19 18:46:15 2004
Return-Path: <lucene-user-return-8805-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23915 invoked from network); 19 Jun 2004 18:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Jun 2004 18:46:15 -0000
Received: (qmail 59429 invoked by uid 500); 19 Jun 2004 18:45:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59293 invoked by uid 500); 19 Jun 2004 18:45:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58569 invoked by uid 99); 19 Jun 2004 18:45:43 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 11:45:42 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5JIjVU9021335
	for <lucene-user@jakarta.apache.org>; Sat, 19 Jun 2004 19:45:31 +0100
Date: Sat, 19 Jun 2004 19:45:31 +0100
Message-Id: <200406191845.i5JIjVU9021335@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: amusing interaction between advanced tokenizers and highlighter
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A question before I dive into coding a fix: can I assume (for all analyzers) that the tokens produced by the tokenStream 
have the following property: 
   currentToken.startOffset() >= lastToken.startOffset()

The analyzers I have tested the highlighter with so far have the property:
   currentToken.startOffset() > lastToken.endOffset()
so aren't overlapping but I understand this isn't the case for others (all demonstrable examples of such "problem" analyzers 
would be appreciated for testing purposes).
If I can assume that tokenstreams always produce a zero or more increment in token.startOffset I think I can 
design a solution that still works using a single pass of the token stream.
I suspect an additional "flushText" method will be required on the Formatter interface to allow implementations
to use a buffer. This buffer would be required to accumulate overlapping token scores when trying to decide if a 
section of the original text merited any highlight markup.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8806-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Jun 20 00:56:55 2004
Return-Path: <lucene-user-return-8806-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28435 invoked from network); 20 Jun 2004 00:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Jun 2004 00:56:55 -0000
Received: (qmail 32612 invoked by uid 500); 20 Jun 2004 00:56:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32591 invoked by uid 500); 20 Jun 2004 00:56:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32577 invoked by uid 99); 20 Jun 2004 00:56:53 -0000
Received: from [64.59.134.9] (HELO pd6mo1no.prod.shaw.ca) (64.59.134.9)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 19 Jun 2004 17:56:53 -0700
Received: from pd6mr1no.prod.shaw.ca
 (pd6mr1no-qfe2.prod.shaw.ca [10.0.144.188]) by l-daemon
 (iPlanet Messaging Server 5.2 HotFix 1.18 (built Jul 28 2003))
 with ESMTP id <0HZL00H0O0MRQ1@l-daemon> for lucene-user@jakarta.apache.org;
 Sat, 19 Jun 2004 18:42:27 -0600 (MDT)
Received: from pn7ml3no.prod.shaw.ca ([10.0.149.112])
 by pd6mr1no.prod.shaw.ca (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar
 15 2004)) with ESMTP id <0HZL0071J0MRBN70@pd6mr1no.prod.shaw.ca> for
 lucene-user@jakarta.apache.org; Sat, 19 Jun 2004 18:42:27 -0600 (MDT)
Received: from h24-77-181-144.wp.shawcable.net
 (S010600a0c9977ee1.wp.shawcable.net [24.77.181.144])
 by l-daemon (iPlanet Messaging Server 5.2 HotFix 1.18 (built Jul 28 2003))
 with SMTP id <0HZL0010C0MQVK@l-daemon> for lucene-user@jakarta.apache.org;
 Sat, 19 Jun 2004 18:42:27 -0600 (MDT)
Received: (qmail 1700 invoked from network); Sun, 20 Jun 2004 00:32:30 +0000
Received: from unknown (HELO ?192.168.0.4?) (192.168.0.4)
 by h24-77-181-144.wp.shawcable.net with SMTP; Sun, 20 Jun 2004 00:32:30 +0000
Date: Sat, 19 Jun 2004 19:42:26 -0500
From: "Jason St. Louis" <jason.stlouis@gravitybound.net>
Subject: Re: Question on how to build a query
In-reply-to: <BC0659BA-C1CF-11D8-8D9D-000393A564E6@ehatchersolutions.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <40D4DD72.7070207@gravitybound.net>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
References: <40D3768E.6030101@gravitybound.net>
 <40D3D44A.3030208@gravitybound.net>
 <BC0659BA-C1CF-11D8-8D9D-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Erik Hatcher wrote:

> On Jun 19, 2004, at 1:51 AM, Jason St. Louis wrote:
> 
>> I wrote my indexer so that it added each field without tokenizing it:
>>
>> Field fnameField = new Field("fname", fname.toLowerCase(), true, true, 
>> false);
>> Field lnameField = new Field("lname", lname.toLowerCase(), true, true, 
>> false);
>> Field cityField = new Field("city", position.toLowerCase(), true, 
>> true, false);
>>
>> By the way, if this is the case, is the indexer even using the 
>> analyzer that I pass to it?
> 
> 
> No.  Tokenized fields are analyzed.  Non-tokenized fields are left 
> as-is.  It might be clearer if you used Field.Keyword instead, which is 
> identical to what you have here.

That's what I figured.  I suppose if I don't want to store the field 
values in the index, I can't use Field.Keyword, though. I just realized 
that I'm storing those 3 fields when I don't need to.  The only field I 
need to store is the primary key of the person in the database (not 
pictured in the above code) which I use to retrieve the full record from 
the database later.

> 
>> Then in my search code I create the firstname query as a WildcardQuery 
>> if the first name is provided (adding a * to the end if it's not 
>> already there):
>>
>> Term fnameTerm = null;
>> Query fnameQuery = null;
>> if( fnameIn.length() > 0)
>> {
>>     if( !fnameIn.endsWith("*") )
>>     {
>>         fnameIn += "*";
>>     }
>>     fnameTerm = new Term("fname", fnameIn);
>>     fnameQuery = new WildcardQuery(fnameTerm);
>> }
> 
> 
> I recommend PrefixQuery in this case.

Excellent.  That actually works much better than the WildcardQuery for 
what I'm trying to do here.

> 
> I presume you lowercased fnameIn?  You should to get it to match what 
> was indexed.

Yes, I did.

> 
>>
>> Does this seem like a reasonable way to approach this problem, or am I 
>> missing something that's going to bite me in the you-know-what?
> 
> 
> Seems reasonable to me as long as you are lowercasing the strings at 
> query time also.
> 
>     Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 

Thanks for your response.  I really appreciate it.

Jason


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8807-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Jun 20 14:44:26 2004
Return-Path: <lucene-user-return-8807-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91415 invoked from network); 20 Jun 2004 14:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Jun 2004 14:44:26 -0000
Received: (qmail 10027 invoked by uid 500); 20 Jun 2004 14:44:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9962 invoked by uid 500); 20 Jun 2004 14:44:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9915 invoked by uid 99); 20 Jun 2004 14:43:59 -0000
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 20 Jun 2004 07:43:59 -0700
Received: from diderot (chateaudeau-4-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by postfix4-2.free.fr (Postfix) with ESMTP id D3C4A192D6A
	for <lucene-user@jakarta.apache.org>; Sun, 20 Jun 2004 16:43:53 +0200 (CEST)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : amusing interaction between advanced tokenizers and highlighter
Date: Sun, 20 Jun 2004 16:43:46 +0200
Message-ID: <000f01c456d4$fe16f770$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <200406191845.i5JIjVU9021335@outmail.freedom2surf.net>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


> A question before I dive into coding a fix: can I assume (for
> all analyzers) that the tokens produced by the tokenStream
> have the following property:
>    currentToken.startOffset() >=3D lastToken.startOffset()
>=20
> The analyzers I have tested the highlighter with so far have
> the property:
>    currentToken.startOffset() > lastToken.endOffset()
> so aren't overlapping but I understand this isn't the case for
> others (all demonstrable examples of such "problem" analyzers
> would be appreciated for testing purposes).

There is such an analyzer here
http://savannah.nongnu.org/projects/aramorph .

> If I can assume that tokenstreams always produce a zero or more
> increment in token.startOffset I think I can
> design a solution that still works using a single pass of the
> token stream.
> I suspect an additional "flushText" method will be required on
> the Formatter interface to allow implementations
> to use a buffer. This buffer would be required to accumulate
> overlapping token scores when trying to decide if a
> section of the original text merited any highlight markup.

I am not familiar with your most recent highlighter package, but I have =
implemented this myself with some older rudimentary highlighting code =
that just uses a Vector to keep track of all tokens for the same offset =
positions. Highlighting based on those tokens accumulated in the Vector =
is triggered when currentToken.startOffset() > lastToken.startOffset() =
is satisfied, after which the token Vector is simply cleared and the new =
token position tracking begins. Don't forget to make sure that the same =
input/term text isn't output/highlighted more than once for multiple =
output tokens.

Regards,
RBP=20





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8808-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 01:43:00 2004
Return-Path: <lucene-user-return-8808-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26968 invoked from network); 21 Jun 2004 01:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 01:42:59 -0000
Received: (qmail 41471 invoked by uid 500); 21 Jun 2004 01:42:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41097 invoked by uid 500); 21 Jun 2004 01:42:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40148 invoked by uid 99); 21 Jun 2004 01:42:04 -0000
Received: from [65.24.5.135] (HELO ms-smtp-01-eri0.ohiordc.rr.com) (65.24.5.135)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 20 Jun 2004 18:42:04 -0700
Received: from [192.168.1.2] (dhcp16464040.woh.rr.com [24.164.64.40])
	by ms-smtp-01-eri0.ohiordc.rr.com (8.12.10/8.12.7) with ESMTP id i5L1foJW026549
	for <lucene-user@jakarta.apache.org>; Sun, 20 Jun 2004 21:41:50 -0400 (EDT)
Message-ID: <40D55D02.8040702@woh.rr.com>
Date: Sun, 20 Jun 2004 09:46:42 +0000
From: Dmitrii PapaGeorgio <teddy@woh.rr.com>
User-Agent: Mozilla Thunderbird 0.7 (X11/20040615)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: index and search question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Let's say I index documents using this

      Document doc = new Document();
      doc.add(Field.Text("file1", (Reader) new InputStreamReader(is)));
      doc.add(Field.Text("file2", (Reader) new InputStreamReader(is2)));

And want to do a search like this

file1:Word file2:Word2

Basically doing a search using mutiple segments, file1 and file2 in the 
same query, how would this be possible?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8809-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 04:05:06 2004
Return-Path: <lucene-user-return-8809-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71749 invoked from network); 21 Jun 2004 04:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 04:05:06 -0000
Received: (qmail 2726 invoked by uid 500); 21 Jun 2004 04:05:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2647 invoked by uid 500); 21 Jun 2004 04:05:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2630 invoked by uid 99); 21 Jun 2004 04:05:04 -0000
Received: from [62.112.223.117] (HELO incze.adsl.enternet.hu) (62.112.223.117)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sun, 20 Jun 2004 21:05:04 -0700
Received: from g40.incze.hu (g40.incze.hu [192.168.10.18])
	by incze.adsl.enternet.hu (8.11.6/8.11.6) with ESMTP id i5L44mw27588
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 06:04:48 +0200
Received: from g40.incze.hu (localhost [127.0.0.1])
	by g40.incze.hu (8.12.10/8.12.10) with ESMTP id i5L44mPU031159
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 06:04:48 +0200
Received: (from incze@localhost)
	by g40.incze.hu (8.12.10/8.12.8/Submit) id i5L44mtx031157
	for lucene-user@jakarta.apache.org; Mon, 21 Jun 2004 06:04:48 +0200
X-Authentication-Warning: g40.incze.hu: incze set sender to incze@mail.matav.hu using -f
Date: Mon, 21 Jun 2004 06:04:48 +0200
From: Incze Lajos <incze@mail.matav.hu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: index and search question
Message-ID: <20040621040448.GE7398@incze.adsl.enternet.hu>
References: <40D55D02.8040702@woh.rr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <40D55D02.8040702@woh.rr.com>
User-Agent: Mutt/1.4.1i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sun, Jun 20, 2004 at 09:46:42AM +0000, Dmitrii PapaGeorgio wrote:
> Let's say I index documents using this
> 
>      Document doc = new Document();
>      doc.add(Field.Text("file1", (Reader) new InputStreamReader(is)));
>      doc.add(Field.Text("file2", (Reader) new InputStreamReader(is2)));
> 
> And want to do a search like this
> 
> file1:Word file2:Word2
> 
> Basically doing a search using mutiple segments, file1 and file2 in the 
> same query, how would this be possible?

Just as you wrote. If you use the QueryParser, you can search with

file1:Word file2:Word2              or e.g.
+file1:Word +file2:Word2            etc.

Or you can build a boolean query programmatically (if I understood
your question).

incze

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8810-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 10:30:30 2004
Return-Path: <lucene-user-return-8810-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81917 invoked from network); 21 Jun 2004 10:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 10:30:30 -0000
Received: (qmail 11213 invoked by uid 500); 21 Jun 2004 10:28:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11180 invoked by uid 500); 21 Jun 2004 10:28:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10975 invoked by uid 99); 21 Jun 2004 10:28:24 -0000
Received: from [64.233.170.202] (HELO mproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 03:28:24 -0700
Received: by mproxy.gmail.com with SMTP id 62so317329rni
        for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 03:28:01 -0700 (PDT)
Received: by 10.38.207.45 with SMTP id e45mr21161rng;
        Mon, 21 Jun 2004 03:28:01 -0700 (PDT)
Message-ID: <ff737ac3040621032815e78732@mail.gmail.com>
Date: Mon, 21 Jun 2004 12:28:01 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: TermFreqVector based highlighter?
Cc: "markharw00d@yahoo.co.uk" <markharw00d@yahoo.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I have managed to extract the relevant information to highlight the
search results out of an index that does not store field's content.

The result is a list of matching terms, with their relative weights.

This solves my problem, but it is very expensive, like I was
expecting, as it uses the explain feature of the IndexSearcher.

Since Lucene 1.4 I have seen that a new option is available for
fields: storeTermVector.

Now the questions:
- how much space do storeTermVector uses on the index (compared to
just indexed and fully stored fields)?
- if I "storeTermVector" the fields can I get back the list of
matching terms for a query in a more efficient way compared to a full
explain computation?

I am willing to drop weights altogether, if this could allow a more
efficient computation.

Thanks for your attention.

Regards,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8811-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 11:38:47 2004
Return-Path: <lucene-user-return-8811-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39809 invoked from network); 21 Jun 2004 11:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 11:38:47 -0000
Received: (qmail 40153 invoked by uid 500); 21 Jun 2004 11:38:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39860 invoked by uid 500); 21 Jun 2004 11:38:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39812 invoked by uid 99); 21 Jun 2004 11:38:37 -0000
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 04:38:37 -0700
Received: from aatamer ([172.17.232.22]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 21 Jun 2004 07:38:22 -0400
From: "Allen Atamer" <aatamer@casebank.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: QueryParser handling a NOT query on its own
Date: Mon, 21 Jun 2004 07:38:34 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200406191845.i5JIjVU9021335@outmail.freedom2surf.net>
Thread-Index: AcRWLaqpBEzDXrKRQUqCoDlyhtSBGwBVLFOQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Message-ID: <TANGOLfHxwgxSc6pT0g0000142a@tango.casebank.com>
X-OriginalArrivalTime: 21 Jun 2004 11:38:22.0984 (UTC) FILETIME=[421EF080:01C45784]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The Javadoc spec calls for one or more clauses in a query, but I had trouble
with a NOT query just on its own. For example

QueryParser.parse("my_field:-exclude") throws a parsing exception

Same with

QueryParser.parse("my_field:-(exclude)")
QueryParser.parse("my_field:(* AND -exclude")

The query QueryParser.parse("my_field:(-(exclude))") gives a legitimate
query that brings no results.

What I would expect is the following: If I have an index with 100 total
entries, and 20 records with the word "exclude" in them, then the above
queries should give 80 hits. There is no test case for this scenario in
TestQueryParser. Please confirm whether this is a bug or not,

Thank you,

Allen Atamer


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8812-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 13:11:48 2004
Return-Path: <lucene-user-return-8812-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4281 invoked from network); 21 Jun 2004 13:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 13:11:48 -0000
Received: (qmail 79407 invoked by uid 500); 21 Jun 2004 13:11:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79281 invoked by uid 500); 21 Jun 2004 13:11:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79265 invoked by uid 99); 21 Jun 2004 13:11:43 -0000
Received: from [62.52.71.38] (HELO mx7.bertelsmann.de) (62.52.71.38)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 06:11:43 -0700
Received: by mx7.bertelsmann.de with Internet Mail Service (5.5.2657.72)
	id <NKJZK00M>; Mon, 21 Jun 2004 15:01:22 +0200
Message-ID: <69D276452CD2904980D5B6AC33C9BE170174D31E@gtlbmlexs0006.bagmail.net>
From: Wolf-Dietrich.Materna@empolis.com
To: lucene-user@jakarta.apache.org
Subject: AW: QueryParser handling a NOT query on its own
Date: Mon, 21 Jun 2004 15:00:44 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,
> Allen Atamer [mailto:aatamer@casebank.com] 
> 
> The Javadoc spec calls for one or more clauses in a query, 
> but I had trouble with a NOT query just on its own. For example
Most search engines including Lucene doesn't support this query type.
That's why the query parser treats this queries as invalid (if
it recognizes them).

> QueryParser.parse("my_field:-exclude") throws a parsing exception
> 
> Same with
> 
> QueryParser.parse("my_field:-(exclude)")
> QueryParser.parse("my_field:(* AND -exclude")
These queries are defined as invalid.

> The query QueryParser.parse("my_field:(-(exclude))") gives a 
> legitimate query that brings no results.
This is the result returned by many search engines. They select a document 
set by searching for the query terms first and get the documents which
contains 
them from index. Because your query doesn't contains any term which should
be part of a document, your result is empty. Note that they check the
excluded words only for documents selected during the first step to save
time and memory.

> What I would expect is the following: If I have an index with 
> 100 total entries, and 20 records with the word "exclude" in 
> them, then the above queries should give 80 hits. There is no 
> test case for this scenario in TestQueryParser. Please 
> confirm whether this is a bug or not,
This is no error. You might think, that it should be easy to
get all documents and discard all of them which contains the
exluded word.
But imaging your index contains about 1 million documents, the search
requires a very long time and the result will be very huge (and so
mostly useless). Many Engines avoid this trouble and return an empty 
result or report an error.

You can workaround this limitation by adding a dummy field and
term to each document while creating your index, e.g.
  document.add(Field.Text("dummy_field", "dummy_value"));
You have to add "dummy_field:dummy_value" to your query string, e.g.:
"dummy_field:dummy_value my_field:-(exclude)" will returns 80 hits
in your scenario (after rebuild your index).
Warning: the performance will be very poor on larger indexes and
users can run "denial of service" attacks by sending such queries.

Note that a single "*" is not allowed too, because performance would be 
very poor if expression starts with a wildcard. In this case Lucene
would run of memory too, because the internal result contains all 
words/terms stored in your index.
Regards,
	Wolf-Dietrich Materna

 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8813-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 18:12:28 2004
Return-Path: <lucene-user-return-8813-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42538 invoked from network); 21 Jun 2004 18:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 18:12:28 -0000
Received: (qmail 5638 invoked by uid 500); 21 Jun 2004 18:12:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5344 invoked by uid 500); 21 Jun 2004 18:12:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5127 invoked by uid 99); 21 Jun 2004 18:12:11 -0000
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 11:12:11 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Mon, 21 Jun 2004 14:11:49 -0400
Message-Id: <s0d6eca5.047@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Mon, 21 Jun 2004 14:11:37 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: TermFreqVector based highlighter?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Space will vary based on the content (number of unique terms), obviously, =
but I did submit some rough numbers that I saw for my implementation.  =
Here they are (from my original patch submission):

I also tested by indexing 12,598 documents (88,362 terms) using both term =
vectors and no term vectors.
Index size w/o term vectors: 42 MB
Index size w/ term vectors: 71.3 MB

Time for the first test was 5 minutes 30 seconds, time for the second test =
was 6 minutes 2 seconds.


The term vector you get back is a list of strings, containing the term and =
the term frequency for the given document.  I also submitted a Term Vector =
representation for the Query (see QueryTermVector), so I suppose you could =
loop over the two vectors and compare.

Don't know if that solves your problem, but I hope it helps.

-Grant

>>> giulio.cesare@gmail.com 06/21/04 06:28AM >>>
Hi,

I have managed to extract the relevant information to highlight the
search results out of an index that does not store field's content.

The result is a list of matching terms, with their relative weights.

This solves my problem, but it is very expensive, like I was
expecting, as it uses the explain feature of the IndexSearcher.

Since Lucene 1.4 I have seen that a new option is available for
fields: storeTermVector.

Now the questions:
- how much space do storeTermVector uses on the index (compared to
just indexed and fully stored fields)?
- if I "storeTermVector" the fields can I get back the list of
matching terms for a query in a more efficient way compared to a full
explain computation?

I am willing to drop weights altogether, if this could allow a more
efficient computation.

Thanks for your attention.

Regards,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8814-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 18:54:53 2004
Return-Path: <lucene-user-return-8814-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64251 invoked from network); 21 Jun 2004 18:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 18:54:53 -0000
Received: (qmail 51515 invoked by uid 500); 21 Jun 2004 18:54:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51455 invoked by uid 500); 21 Jun 2004 18:54:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51229 invoked by uid 99); 21 Jun 2004 18:54:53 -0000
Received: from [64.233.170.199] (HELO mproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 11:54:53 -0700
Received: by mproxy.gmail.com with SMTP id 62so338593rni
        for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 11:54:27 -0700 (PDT)
Received: by 10.38.207.45 with SMTP id e45mr37424rng;
        Mon, 21 Jun 2004 11:54:26 -0700 (PDT)
Message-ID: <ff737ac3040621115449ff50c1@mail.gmail.com>
Date: Mon, 21 Jun 2004 20:54:26 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: TermFreqVector based highlighter?
Cc: Grant Ingersoll <gsingers@syr.edu>
In-Reply-To: <s0d6eca5.047@gwia201.syr.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <s0d6eca5.047@gwia201.syr.edu>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Grant

On Mon, 21 Jun 2004 14:11:37 -0400, Grant Ingersoll <gsingers@syr.edu> wrote:
> 
> Space will vary based on the content (number of unique terms), obviously, but I did submit some rough numbers that I saw for my implementation.  Here they are (from my original patch submission):
> 
> I also tested by indexing 12,598 documents (88,362 terms) using both term vectors and no term vectors.
> Index size w/o term vectors: 42 MB
> Index size w/ term vectors: 71.3 MB

It would be interesting to know also the size of the index storing the
whole document, but I think I can test this on my own.

> Time for the first test was 5 minutes 30 seconds, time for the second test was 6 minutes 2 seconds.
> 
> The term vector you get back is a list of strings, containing the term and the term frequency for the given document.  I also submitted a Term Vector representation for the Query (see QueryTermVector), so I suppose you could loop over the two vectors and compare.

Very intersting!

> Don't know if that solves your problem, but I hope it helps.

In the next days I will try these suggestions.

Thank you very much.

Regards,

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8815-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 20:40:24 2004
Return-Path: <lucene-user-return-8815-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30280 invoked from network); 21 Jun 2004 20:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 20:40:24 -0000
Received: (qmail 7504 invoked by uid 500); 21 Jun 2004 20:40:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7400 invoked by uid 500); 21 Jun 2004 20:40:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7369 invoked by uid 99); 21 Jun 2004 20:40:28 -0000
Received: from [204.73.34.22] (HELO mist.mm.com) (204.73.34.22)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 13:40:28 -0700
Received: from drizzle.mm.com (ice.mm.com [204.73.34.14])
	by mist.mm.com (Postfix) with ESMTP id 94CAB3117D
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 15:40:02 -0500 (CDT)
Received: from MUSCOVITE.OPIN.COM (diamond.opin.com [206.147.124.36])
	by drizzle.mm.com (Postfix) with ESMTP id 031065E15C
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 15:39:57 -0500 (CDT)
Received: by MUSCOVITE.OPIN.COM with Internet Mail Service (5.5.2657.72)
	id <L8CLFKZT>; Mon, 21 Jun 2004 15:42:05 -0500
Message-ID: <E3B75407BA46FA4A87DF2F63ED9241CA05917E@MUSCOVITE.OPIN.COM>
From: Steve Rajavuori <SteveR@opin.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: Unable to obtain lock?
Date: Mon, 21 Jun 2004 15:40:29 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am seeing the following error when trying to open IndexWriter. I am now
using Lucene 1.4-RC3, but I was previously using 1.2 to create this index.
Any suggestions of how to fix this problem?

java.io.IOException: Lock obtain timed out
	at org.apache.lucene.store.Lock.obtain(Lock.java:58)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:216)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:172)


Steve Rajavuori

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8816-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 21:55:31 2004
Return-Path: <lucene-user-return-8816-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67847 invoked from network); 21 Jun 2004 21:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 21:55:31 -0000
Received: (qmail 64509 invoked by uid 500); 21 Jun 2004 21:55:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64441 invoked by uid 500); 21 Jun 2004 21:55:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64394 invoked by uid 99); 21 Jun 2004 21:55:05 -0000
Received: from [192.18.42.14] (HELO nwkea-mail-2.sun.com) (192.18.42.14)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 14:55:05 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by nwkea-mail-2.sun.com (8.12.10/8.12.9) with ESMTP id i5LLsZ0R002403
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 14:54:35 -0700 (PDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0HZO00M01I2ITF@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Mon, 21 Jun 2004 14:54:35 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0HZO00IV7I6Z1B@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Mon, 21 Jun 2004 14:54:35 -0700 (PDT)
Date: Mon, 21 Jun 2004 14:54:35 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Demo 3 on windows
To: lucene-user@jakarta.apache.org
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40D7591B.4020307@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I have been trying to build the index on my windows machine with the 
following syntax and getting this message back from Lucene.

*java org.apache.lucene.demo.IndexHTML -create -index {index-dir} ..

*in my case it looks like
    java org.apache.lucene.demo.IndexHTML -create -index c:\apache 
group\index ..

and the message that I am getting is
Usage: IndexHTML [-create] [-index <index>] <root_directory>

Any idea why would I keep getting this message?

TIA.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8817-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 22:26:28 2004
Return-Path: <lucene-user-return-8817-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85722 invoked from network); 21 Jun 2004 22:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 22:26:28 -0000
Received: (qmail 72484 invoked by uid 500); 21 Jun 2004 22:26:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72426 invoked by uid 500); 21 Jun 2004 22:26:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72402 invoked by uid 99); 21 Jun 2004 22:26:36 -0000
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 15:26:36 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5LMQ4U9011802
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 23:26:04 +0100
Date: Mon, 21 Jun 2004 23:26:04 +0100
Message-Id: <200406212226.i5LMQ4U9011802@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Fix for "advanced tokenizers and highlighter" problem
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think this version of the highlighter should provide a fix: http://www.inperspective.com/lucene/hilite2beta.zip
Before I update the version of the highlighter in the sandbox I'd appreciate feedback from those troubled 
with the issues to do with overlapping tokens in token streams (Erik, Dave, Bruce?)

I added my own test analyzer to the Junit test that introduces synonyms into the token stream at the same
position as the trigger token and the new code works OK for me with that analyzer.

The fix means I needed to change the Formatter interface - this now takes a "TokenGroup" object instead 
of a token because that can be used to represent a single token OR a sequence of overlapping tokens.
I dont think most people have needed to create custom Formatter implementations so I dont think this
redefined interface should break too much existing code (if any).

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8818-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 22:56:01 2004
Return-Path: <lucene-user-return-8818-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1032 invoked from network); 21 Jun 2004 22:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 22:56:01 -0000
Received: (qmail 60891 invoked by uid 500); 21 Jun 2004 22:56:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60838 invoked by uid 500); 21 Jun 2004 22:56:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60712 invoked by uid 99); 21 Jun 2004 22:56:10 -0000
Received: from [216.193.202.192] (HELO nasa.lunarpages.com) (216.193.202.192)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 15:56:10 -0700
Received: from pcp09870746pcs.ewndsr01.nj.comcast.net ([68.36.204.99] helo=pmc)
	by nasa.lunarpages.com with asmtp (Exim 4.34)
	id 1BcXir-0004NL-RC; Mon, 21 Jun 2004 15:57:06 -0700
Message-ID: <020501c457e2$ddd1b4f0$6400a8c0@CORP.AD.FACTIVA.NET>
From: "Peter M Cipollone" <lu1@bihvhar.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<Hetan.Shah@Sun.COM>
References: <40D7591B.4020307@Sun.COM>
Subject: Re: Demo 3 on windows
Date: Mon, 21 Jun 2004 18:55:33 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nasa.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - bihvhar.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try quoting the path name

java org.apache.lucene.demo.IndexHTML -create -index "c:\apache group\index"

----- Original Message ----- 
From: "Hetan Shah" <Hetan.Shah@Sun.COM>
To: <lucene-user@jakarta.apache.org>
Sent: Monday, June 21, 2004 5:54 PM
Subject: Demo 3 on windows


> Hello,
>
> I have been trying to build the index on my windows machine with the
> following syntax and getting this message back from Lucene.
>
> *java org.apache.lucene.demo.IndexHTML -create -index {index-dir} ..
>
> *in my case it looks like
>     java org.apache.lucene.demo.IndexHTML -create -index c:\apache
> group\index ..
>
> and the message that I am getting is
> Usage: IndexHTML [-create] [-index <index>] <root_directory>
>
> Any idea why would I keep getting this message?
>
> TIA.
> -H
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8819-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 21 23:02:08 2004
Return-Path: <lucene-user-return-8819-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3668 invoked from network); 21 Jun 2004 23:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Jun 2004 23:02:08 -0000
Received: (qmail 81627 invoked by uid 500); 21 Jun 2004 23:02:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81588 invoked by uid 500); 21 Jun 2004 23:02:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81518 invoked by uid 99); 21 Jun 2004 23:02:17 -0000
Received: from [199.217.212.91] (HELO stlspfw2.sial.com) (199.217.212.91)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 16:02:17 -0700
Received: from stllnhub01.sial.com (stllnhub01.sial.com [141.247.245.88])
	by stlspfw2.sial.com with ESMTP id i5LN0v67021005
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 18:01:42 -0500 (CDT)
Subject: Marten Senkel/IS/EUROPE/SIALEUROPE is out of the office.
From: Marten Senkel <MSenkel@europe.sial.com>
To: lucene-user@jakarta.apache.org
Message-ID: <OF4CE40115.AA0153C7-ONC1256EBA.007E7CB1-C1256EBA.007E7CB1@sial.com>
Date: Tue, 22 Jun 2004 01:01:34 +0200
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=4EBBE429DFEDFA218f9e8a93df938690918c4EBBE429DFEDFA21"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0__=4EBBE429DFEDFA218f9e8a93df938690918c4EBBE429DFEDFA21
Content-type: text/plain; charset=US-ASCII





I will be out of the office starting  2004-06-21 and will not return until
2004-06-23.

Please contact Nicolas Guala-Molino for any request.

Thanks!
--0__=4EBBE429DFEDFA218f9e8a93df938690918c4EBBE429DFEDFA21--


From lucene-user-return-8820-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 00:00:33 2004
Return-Path: <lucene-user-return-8820-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25091 invoked from network); 22 Jun 2004 00:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 00:00:33 -0000
Received: (qmail 61048 invoked by uid 500); 22 Jun 2004 00:00:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60988 invoked by uid 500); 22 Jun 2004 00:00:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60966 invoked by uid 99); 22 Jun 2004 00:00:31 -0000
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 21 Jun 2004 17:00:31 -0700
Received: from [192.168.1.101] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i5LNxtSY018471
	for <lucene-user@jakarta.apache.org>; Mon, 21 Jun 2004 16:59:55 -0700
Message-ID: <40D7766B.7020908@newsmonster.org>
Date: Mon, 21 Jun 2004 16:59:39 -0700
From: Kevin Burton <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Reasonable to expect speed improvements when not using stored fields?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Let's say one had a 1G index with stored fields.  The index is then 
rewritten to support non-stored fields and the resulting target index is 
only 100M.

I would expect there to be a speedup when performing searches on the 
100M index but it was actually slightly slower.  Using a RAMDirectory 
didn't speed it up much either. 

Any thoughts?

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8821-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 03:57:02 2004
Return-Path: <lucene-user-return-8821-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28421 invoked from network); 22 Jun 2004 03:57:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 03:57:02 -0000
Received: (qmail 85274 invoked by uid 500); 22 Jun 2004 03:57:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85178 invoked by uid 500); 22 Jun 2004 03:57:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85163 invoked by uid 99); 22 Jun 2004 03:57:22 -0000
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 20:57:22 -0700
Message-ID: <20040622035644.21209.qmail@web12703.mail.yahoo.com>
Received: from [211.95.204.99] by web12703.mail.yahoo.com via HTTP; Mon, 21 Jun 2004 20:56:44 PDT
Date: Mon, 21 Jun 2004 20:56:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Unable to obtain lock?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <E3B75407BA46FA4A87DF2F63ED9241CA05917E@MUSCOVITE.OPIN.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Steve,

Locking in Lucene has changed since version 1.2.  In that version lock
files were stored in the index directory, while in the version you are
using now they are stored in the system's temporary directory by
default.  Furthermore, their names have changed.  Therefore, make sure
that your temporary directory is writable by the user who is running
your Lucene application.  I use Lucene on Linux, so I do this when I
get locking errors like yours:

prompt> ls -al /tmp | grep -i lucene

If the found file looks stale, I manually remove it (rm ...).
You can also programmatically force unlocking of an index, if you want.

Finally, there is a Wiki page showing how you can change the directory
to store lock files, using system properties.  This can be handy if
your temp directory is not writable or some such.

Otis


--- Steve Rajavuori <SteveR@opin.com> wrote:
> I am seeing the following error when trying to open IndexWriter. I am
> now
> using Lucene 1.4-RC3, but I was previously using 1.2 to create this
> index.
> Any suggestions of how to fix this problem?
> 
> java.io.IOException: Lock obtain timed out
> 	at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> 	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:216)
> 	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:172)
> 
> 
> Steve Rajavuori
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8822-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 06:14:07 2004
Return-Path: <lucene-user-return-8822-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81638 invoked from network); 22 Jun 2004 06:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 06:14:06 -0000
Received: (qmail 14425 invoked by uid 500); 22 Jun 2004 06:14:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14392 invoked by uid 500); 22 Jun 2004 06:14:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14375 invoked by uid 99); 22 Jun 2004 06:14:23 -0000
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 21 Jun 2004 23:14:23 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZP5UH00.1QA for <lucene-user@jakarta.apache.org>; Tue,
          22 Jun 2004 11:55:29 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Delete Indexed from Merged Document
Date: Tue, 22 Jun 2004 11:52:28 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMELLCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <79C95DFB-C08C-11D8-B596-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



  Dev Guys 

  Apologies Please....

    How Do I DELETE  an  Indexed Document from a MERGED Index File
   
   Can Some body Write me some Code Snippets on this... please

With Regards
Karthik

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8823-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 12:54:29 2004
Return-Path: <lucene-user-return-8823-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89570 invoked from network); 22 Jun 2004 12:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 12:54:23 -0000
Received: (qmail 18565 invoked by uid 500); 22 Jun 2004 12:31:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10229 invoked by uid 500); 22 Jun 2004 12:28:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 118 invoked by uid 99); 22 Jun 2004 12:25:18 -0000
Received: from [212.87.7.182] (HELO salix.caltha.pl) (212.87.7.182)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 05:25:18 -0700
Received: from [192.168.1.5] (cnz115.neoplus.adsl.tpnet.pl [::ffff:83.31.179.115])
  (AUTH: LOGIN zwierzem, )
  by salix.caltha.pl with esmtp; Tue, 22 Jun 2004 12:29:09 +0200
Subject: Buggy Lucene behaviour in FieldsReader
From: Damian Gajda <dgajda@caltha.pl>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Organization: Caltha Sp. j.
Message-Id: <1087900465.5659.13.camel@apium>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Mailer: Ximian Evolution 1.4.6 (1.4.6-2) 
Date: Tue, 22 Jun 2004 12:34:25 +0200
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Had anyone had a similar error while adding a document to am existing
index?

I am using lucene 1.4-rc3.

The stacktrace is as follows (as You can see there is a problem on
IndexWriter closing):
- - - - - 

java.lang.ArrayIndexOutOfBoundsException: 18 >= 18
       at java.util.Vector.elementAt(Vector.java:431)
       at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
       at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:66)
       at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:238)
       at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:185)
       at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:92)
       at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:483)
       at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:436)
       at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:242)
       at

- - - - - 
Is it an already fixed issue?

Regards,
-- 
Damian Gajda




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8824-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 12:57:17 2004
Return-Path: <lucene-user-return-8824-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94484 invoked from network); 22 Jun 2004 12:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 12:57:17 -0000
Received: (qmail 27953 invoked by uid 500); 22 Jun 2004 12:34:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27927 invoked by uid 500); 22 Jun 2004 12:34:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27896 invoked by uid 99); 22 Jun 2004 12:34:13 -0000
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 05:34:13 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5MCApu28164;
	Tue, 22 Jun 2004 07:10:51 -0500
Message-ID: <40D821CA.5080203@getopt.org>
Date: Tue, 22 Jun 2004 14:10:50 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: ANN: Luke v. 0.5 released
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello fellow Luceners,

I'm pleased to announce that new release of Luke is now available. You 
can download it from:

	http://www.getopt.org/luke/

This release uses Lucene 1.4-rc4.

This release also represents a major step forward - many new exciting 
features have been added. The feature I consider the most important in 
this release is extensibility - there is a plugin framework, and a 
sample plugin is provided in the distribution - I encourage you to write 
more.

Here's a short summary of changes in this release:

     * NEW: Added support for Term Vectors.
     * NEW: Added a plugin framework - plugins found on classpath are
	detected automatically and added to the new "Plugins" tab.
	Note however that for now plugins autoloading doesn't quite
	work when using Java WebStart - an alternative mechanism is also
	provided. Plugins have full access to the application context.
	Please read JavaDoc for LukePlugin.java for more information.
     * NEW: A sample plugin is provided, based on Mark Harwood's "tool
	for analyzing analyzers".
     * NEW: all tables support resizable columns now. Some dialogs are
	also resizable.
     * NEW: Added Reconstruct functionality. Using this function users
	can reconstruct the content of all (also unstored) fields of a
	document. This function uses a brute-force approach, so it may
	be slow for larger indexes (> 500,000 docs).
     * NEW: Added "pseudo-edit" functionality. New document editor dialog
	allows to modify reconstructed documents, and add or replace the
	original ones.
     * FIX: problems with MRU list solved, and a framework for handling
	preferences introduced.
     * FIX: the list of available Analyzers is now dynamically populated
	from the classpath, using the same method as in the AnalyzerTool
	plugin. This also doesn't work in WebStart, so a fallback to a
	static list is provided.
     * FIX: restructured source repository and added Ant build script.

Please note that as a result of the package name changes, the main class 
is now org.getopt.luke.Luke, and NOT as before luke.Luke.

I felt that all these changes merited a slight change in name, from 
"Lucene Index Browser" to "Lucene Index Toolbox", as this seems to 
better reflect the current functionality of the tool.

Any feedback, patches for enhancements or bufixes are welcome! If you 
want to provide a patch, please use "diff -bdruN" - this will help me to 
integrate it. Thank you!

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8825-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 15:53:45 2004
Return-Path: <lucene-user-return-8825-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38333 invoked from network); 22 Jun 2004 15:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 15:53:44 -0000
Received: (qmail 98876 invoked by uid 500); 22 Jun 2004 15:07:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12366 invoked by uid 500); 22 Jun 2004 14:50:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98224 invoked by uid 99); 22 Jun 2004 14:27:28 -0000
Received: from [63.100.163.104] (HELO mercury.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 07:27:28 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <NMDHFZCM>; Tue, 22 Jun 2004 10:26:47 -0400
Message-ID: <E65AE9703B683F4C81B5B39C692EB26D1B022C@mercury.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: Demo 3 on windows
Date: Tue, 22 Jun 2004 10:26:47 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

use forward slashes / instead of \ for your path:

c:/apache/group/index

OR if c: is your main drive

/apache/group/index

-----Original Message-----
From: Hetan Shah [mailto:Hetan.Shah@Sun.COM]
Sent: Monday, June 21, 2004 5:55 PM
To: lucene-user@jakarta.apache.org
Subject: Demo 3 on windows


Hello,

I have been trying to build the index on my windows machine with the 
following syntax and getting this message back from Lucene.

*java org.apache.lucene.demo.IndexHTML -create -index {index-dir} ..

*in my case it looks like
    java org.apache.lucene.demo.IndexHTML -create -index c:\apache 
group\index ..

and the message that I am getting is
Usage: IndexHTML [-create] [-index <index>] <root_directory>

Any idea why would I keep getting this message?

TIA.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8826-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 15:54:08 2004
Return-Path: <lucene-user-return-8826-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39441 invoked from network); 22 Jun 2004 15:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 15:54:08 -0000
Received: (qmail 2529 invoked by uid 500); 22 Jun 2004 15:07:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16893 invoked by uid 500); 22 Jun 2004 14:51:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3604 invoked by uid 99); 22 Jun 2004 14:28:29 -0000
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 22 Jun 2004 07:28:29 -0700
Message-ID: <20040622072142.39324.qmail@web12705.mail.yahoo.com>
Received: from [211.95.204.101] by web12705.mail.yahoo.com via HTTP; Tue, 22 Jun 2004 00:21:42 PDT
Date: Tue, 22 Jun 2004 00:21:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Delete Indexed from Merged Document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIMELLCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Karthik,

Here is the answer: http://www.jguru.com/faq/view.jsp?EID=492423

Otis

--- Karthik N S <karthik@controlnet.co.in> wrote:
> 
> 
>   Dev Guys 
> 
>   Apologies Please....
> 
>     How Do I DELETE  an  Indexed Document from a MERGED Index File
>    
>    Can Some body Write me some Code Snippets on this... please
> 
> With Regards
> Karthik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8827-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 15:58:21 2004
Return-Path: <lucene-user-return-8827-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44164 invoked from network); 22 Jun 2004 15:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 15:58:21 -0000
Received: (qmail 29039 invoked by uid 500); 22 Jun 2004 15:12:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47830 invoked by uid 500); 22 Jun 2004 14:57:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38617 invoked by uid 99); 22 Jun 2004 14:35:53 -0000
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 07:35:53 -0700
Message-Id: <200406221251.i5MCpFc21611@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: using boost factor
Date: Tue, 22 Jun 2004 22:53:10 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

Lets say I want to search the term "hello world" over 3 fields with
different boost:

((hello:field1 world:field1)^0.001 (hello:field2 world:field2)^100
(hello:field3 world:field3)^20000))

Note I've given field1 a really low boost, a heavy boost to field2 and a
REALLY heavy boost to field3.

What is happening to me is that a term that matches both field1 and field2,
will have a higher score than a term that matches field3 only, even though
field3's boost is WAY higher.

Can I change this behaviour such that the match in field3 only will actually
have a higher score because of the boost?

Thanks,

Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8828-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 15:58:22 2004
Return-Path: <lucene-user-return-8828-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44184 invoked from network); 22 Jun 2004 15:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 15:58:21 -0000
Received: (qmail 29043 invoked by uid 500); 22 Jun 2004 15:12:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48123 invoked by uid 500); 22 Jun 2004 14:57:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38693 invoked by uid 99); 22 Jun 2004 14:35:54 -0000
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 07:35:54 -0700
Message-Id: <200406221131.i5MBVEc19485@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: question on using boost factor
Date: Tue, 22 Jun 2004 21:33:10 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

Lets say I want to search the term "hello world" over 3 fields with
different boost:

((hello:field1 world:field1)^0.001 (hello:field2 world:field2)^100
(hello:field3 world:field3)^20000))

Note I've given field1 a really low boost, a heavy boost to field2 and a
REALLY heavy boost to field3.

What is happening to me is that a term that matches both field1 and field2,
will have a higher score than a term that matches field3 only, even though
field3's boost is WAY higher.

Can I change this behaviour such that the match in field3 only will actually
have a higher score because of the boost?

Thanks,

Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8829-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 17:51:36 2004
Return-Path: <lucene-user-return-8829-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48673 invoked from network); 22 Jun 2004 17:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 17:51:36 -0000
Received: (qmail 65026 invoked by uid 500); 22 Jun 2004 17:51:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64823 invoked by uid 500); 22 Jun 2004 17:51:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64580 invoked by uid 99); 22 Jun 2004 17:51:04 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 22 Jun 2004 10:51:04 -0700
Message-ID: <20040622175040.96982.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.99] by web12702.mail.yahoo.com via HTTP; Tue, 22 Jun 2004 10:50:40 PDT
Date: Tue, 22 Jun 2004 10:50:40 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: using boost factor
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200406221251.i5MCpFc21611@mail.fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Anson,

I would look at IndexSearcher's explain method:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#explain(org.apache.lucene.search.Query,%20int)

This should give you insight into what's contributing to the high/low
scores, thus telling you what you can tweak.  Perhaps it's just the
boost, perhaps some other similarity factors.

Using explain should provide you information such as this, for example:
http://www.mozdex.com/explain.jsp?idx=2&id=2067257&query=goober

I hope this helps.  Somebody else will probably be able to give more
information, but this should get you started while you wait.

Otis

--- Anson Lau <alau@fulfil-net.com> wrote:
> Hi guys,
> 
> Lets say I want to search the term "hello world" over 3 fields with
> different boost:
> 
> ((hello:field1 world:field1)^0.001 (hello:field2 world:field2)^100
> (hello:field3 world:field3)^20000))
> 
> Note I've given field1 a really low boost, a heavy boost to field2
> and a
> REALLY heavy boost to field3.
> 
> What is happening to me is that a term that matches both field1 and
> field2,
> will have a higher score than a term that matches field3 only, even
> though
> field3's boost is WAY higher.
> 
> Can I change this behaviour such that the match in field3 only will
> actually
> have a higher score because of the boost?
> 
> Thanks,
> 
> Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8830-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 22 18:04:11 2004
Return-Path: <lucene-user-return-8830-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57894 invoked from network); 22 Jun 2004 18:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Jun 2004 18:04:11 -0000
Received: (qmail 97509 invoked by uid 500); 22 Jun 2004 17:57:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97173 invoked by uid 500); 22 Jun 2004 17:57:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96606 invoked by uid 99); 22 Jun 2004 17:57:11 -0000
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 22 Jun 2004 10:57:11 -0700
Message-ID: <20040622175652.68281.qmail@web12707.mail.yahoo.com>
Received: from [211.95.204.99] by web12707.mail.yahoo.com via HTTP; Tue, 22 Jun 2004 10:56:52 PDT
Date: Tue, 22 Jun 2004 10:56:52 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Clustering question: searching two diferent indexes
To: lucene-user@jakarta.apache.org
Cc: Albert Vila <avp@imente.com>
In-Reply-To: <40D845D2.40501@imente.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

(re-directing to lucene-user list)

Albert,

If I understand your question correctly... You could run a query like
the one you gave on both indices, but if one of them contains documents
that have only one of those fields (cluster), then there will never be
any matches in the second index.

However, why not leave your big index along, add documents to a new,
smaller index, and then merge them periodically.  I may be off with
this; it sounds like this is what you want to do, but I'm not certain I
understood you fully.

Otis

--- Albert Vila <avp@imente.com> wrote:
> Hi all,
> 
> I was wondering If I can search using the MultiSearcher over two 
> diferent indexes at the same time (with diferent fields).
> I've got one big index, with the code, title, content, language, etc 
> fields (new documents are added incrementally). Now, I have to
> introduce 
> a clustering field. The problem is that I have to update the whole
> index 
> each time the clusters change, and I have no enought time to do it (I
> 
> wanna check for new clusters every 10 minuts and I spent 25 minutes
> to 
> reindex the whole index).
> A query example could be: language:0 and title:java and cluster:0
> 
> Can I leave the big index whitout any changes and create a new index 
> with only the following fields, code and cluster, and perform the 
> searches using this two indexes? I think I cannot do that without 
> changing the code. It would need a postprocess, matching all
> returning 
> codes from index 1 with index 2.
> 
> Anyone have a solution for this problem? I would appreciate that.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8831-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 00:58:00 2004
Return-Path: <lucene-user-return-8831-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95116 invoked from network); 23 Jun 2004 00:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 00:58:00 -0000
Received: (qmail 13464 invoked by uid 500); 23 Jun 2004 00:48:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13337 invoked by uid 500); 23 Jun 2004 00:48:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13217 invoked by uid 99); 23 Jun 2004 00:48:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 17:48:37 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i5N0OnH16685
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 01:24:56 +0100
Message-ID: <40D8CDC5.4080003@tropo.com>
Date: Tue, 22 Jun 2004 17:24:37 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Fix for "advanced tokenizers and highlighter" problem
References: <200406212226.i5LMQ4U9011802@outmail.freedom2surf.net>
In-Reply-To: <200406212226.i5LMQ4U9011802@outmail.freedom2surf.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

markharw00d@yahoo.co.uk wrote:
> I think this version of the highlighter should provide a fix: http://www.inperspective.com/lucene/hilite2beta.zip
> Before I update the version of the highlighter in the sandbox I'd appreciate feedback from those troubled 
> with the issues to do with overlapping tokens in token streams (Erik, Dave, Bruce?)

1st pass of testing - yes, this does indeed fix the problem.
I've realized I may want to modify my Analyer now too.
I was focusing on the Token position increment instead of the offset.
For something like the case where I broken "HashMap" into 3 tokens: 
"Hash", "Map", "HashMap", I was returning the same start/end offsets for 
  all of them (thus a search on "Map" ends up with all of "HashMap" 
being highlighted). Probably more correct is to return offsets within 
the orig larger token so that you can see exactly where your term 
matched. I'll update my code and then put up a site that demonstrates this.

thx,
  Dave


> 
> I added my own test analyzer to the Junit test that introduces synonyms into the token stream at the same
> position as the trigger token and the new code works OK for me with that analyzer.
> 
> The fix means I needed to change the Formatter interface - this now takes a "TokenGroup" object instead 
> of a token because that can be used to represent a single token OR a sequence of overlapping tokens.
> I dont think most people have needed to create custom Formatter implementations so I dont think this
> redefined interface should break too much existing code (if any).
> 
> Cheers
> Mark
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8832-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 03:45:18 2004
Return-Path: <lucene-user-return-8832-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89790 invoked from network); 23 Jun 2004 03:45:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 03:45:18 -0000
Received: (qmail 82524 invoked by uid 500); 23 Jun 2004 03:45:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82141 invoked by uid 500); 23 Jun 2004 03:45:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82050 invoked by uid 99); 23 Jun 2004 03:45:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 22 Jun 2004 20:45:16 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZQTM900.L1G for <lucene-user@jakarta.apache.org>; Wed,
          23 Jun 2004 09:26:33 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Delete Indexed from Merged Document
Date: Wed, 23 Jun 2004 09:23:33 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOELNCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20040622072142.39324.qmail@web12705.mail.yahoo.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

   Otis

   The  link u have specified  displays on how to update an Indexed File [
Deleting the Old  and then updating with new Ones']

  But My Question to be more Specific is : -

              When we MERGED more then 2 Indexed files  [using
writer.addIndexes(luceneDirs)] , In such  a case How to
               Delete one of the Indexed files from the MERGED Index in
order to Insert  an new updated one

  Please have some sample code snippet in this regard......


with regards
Karthik

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 22, 2004 12:52 PM
To: Lucene Users List
Subject: Re: Delete Indexed from Merged Document


Hello Karthik,

Here is the answer: http://www.jguru.com/faq/view.jsp?EID=492423

Otis

--- Karthik N S <karthik@controlnet.co.in> wrote:
>
>
>   Dev Guys
>
>   Apologies Please....
>
>     How Do I DELETE  an  Indexed Document from a MERGED Index File
>
>    Can Some body Write me some Code Snippets on this... please
>
> With Regards
> Karthik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8833-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 05:46:38 2004
Return-Path: <lucene-user-return-8833-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51065 invoked from network); 23 Jun 2004 05:46:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 05:46:38 -0000
Received: (qmail 84007 invoked by uid 500); 23 Jun 2004 05:46:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82966 invoked by uid 500); 23 Jun 2004 05:46:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81425 invoked by uid 99); 23 Jun 2004 05:46:23 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 22 Jun 2004 22:46:19 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 7FD2183537
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 09:45:40 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 39339608 for lucene-user@jakarta.apache.org; Wed, 23 Jun 2004 09:45:40 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: ANN: Luke v. 0.5 released
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Wed, 23 Jun 2004 09:45:40 +0400
Message-ID: <web-39339608@mail5.rambler.ru>
In-Reply-To: <40D821CA.5080203@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Andrzej!

I congratulate on the successful version. RussianAnalyzer works with 
my indexes, but there are problems with some words. These problem 
words are found only WildCard a method. Besides AnalizerTool works 
with these words without problems.

There is one more small discrepancy on webpage 
http://www.getopt.org/luke/
- Remember to put both JARs on your classpath, e.g.: java-classpath 
luke.jar; lucene.jar org.getopt.luke. Luke
+ Remember to put both JARs on your classpath, e.g.: java-classpath 
luke.jar:lucene.jar org.getopt.luke. Luke

Regards,
Vladimir.

On Tue, 22 Jun 2004 14:10:50 +0200
  Andrzej Bialecki <ab@getopt.org> wrote:
>Hello fellow Luceners,
>
>I'm pleased to announce that new release of Luke is now available. 
>You can download it from:
>
>	http://www.getopt.org/luke/
>
>This release uses Lucene 1.4-rc4.
>
>This release also represents a major step forward - many new exciting 
>features have been added. The feature I consider the most important 
>in this release is extensibility - there is a plugin framework, and a 
>sample plugin is provided in the distribution - I encourage you to 
>write more.
>
>Here's a short summary of changes in this release:
>
>     * NEW: Added support for Term Vectors.
>     * NEW: Added a plugin framework - plugins found on classpath are
>	detected automatically and added to the new "Plugins" tab.
>	Note however that for now plugins autoloading doesn't quite
>	work when using Java WebStart - an alternative mechanism is also
>	provided. Plugins have full access to the application context.
>	Please read JavaDoc for LukePlugin.java for more information.
>     * NEW: A sample plugin is provided, based on Mark Harwood's 
>"tool
>	for analyzing analyzers".
>     * NEW: all tables support resizable columns now. Some dialogs 
>are
>	also resizable.
>     * NEW: Added Reconstruct functionality. Using this function 
>users
>	can reconstruct the content of all (also unstored) fields of a
>	document. This function uses a brute-force approach, so it may
>	be slow for larger indexes (> 500,000 docs).
>     * NEW: Added "pseudo-edit" functionality. New document editor 
>dialog
>	allows to modify reconstructed documents, and add or replace the
>	original ones.
>     * FIX: problems with MRU list solved, and a framework for 
>handling
>	preferences introduced.
>     * FIX: the list of available Analyzers is now dynamically 
>populated
>	from the classpath, using the same method as in the AnalyzerTool
>	plugin. This also doesn't work in WebStart, so a fallback to a
>	static list is provided.
>     * FIX: restructured source repository and added Ant build 
>script.
>
>Please note that as a result of the package name changes, the main 
>class is now org.getopt.luke.Luke, and NOT as before luke.Luke.
>
>I felt that all these changes merited a slight change in name, from 
>"Lucene Index Browser" to "Lucene Index Toolbox", as this seems to 
>better reflect the current functionality of the tool.
>
>Any feedback, patches for enhancements or bufixes are welcome! If you 
>want to provide a patch, please use "diff -bdruN" - this will help me 
>to integrate it. Thank you!
>
>-- 
>Best regards,
>Andrzej Bialecki
>
>-------------------------------------------------
>Software Architect, System Integration Specialist
>CEN/ISSS EC Workshop, ECIMF project chair
>EU FP6 E-Commerce Expert/Evaluator
>-------------------------------------------------
>FreeBSD developer (http://www.freebsd.org)
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8834-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 07:31:27 2004
Return-Path: <lucene-user-return-8834-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12948 invoked from network); 23 Jun 2004 07:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 07:31:27 -0000
Received: (qmail 92741 invoked by uid 500); 23 Jun 2004 07:31:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92597 invoked by uid 500); 23 Jun 2004 07:31:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92544 invoked by uid 99); 23 Jun 2004 07:31:34 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=MISSING_HEADERS
X-Spam-Check-By: apache.org
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 00:31:32 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id CE36354A
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 09:30:42 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 12882-04 for <lucene-user@jakarta.apache.org>;
	Wed, 23 Jun 2004 09:30:42 +0200 (CEST)
Received: from [192.168.0.30] (grn.imente.com [212.145.99.45])
	by mail.imente.com (Postfix) with ESMTP id 1AD22547
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 09:30:42 +0200 (CEST)
Message-ID: <40D9318E.1080203@imente.com>
Date: Wed, 23 Jun 2004 09:30:22 +0200
From: Albert Vila <avp@imente.com>
User-Agent: Mozilla Thunderbird 0.6 (X11/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Cc: lucene-user@jakarta.apache.org
Subject: Re: Clustering question: searching two diferent indexes
References: <20040622175652.68281.qmail@web12707.mail.yahoo.com>
In-Reply-To: <20040622175652.68281.qmail@web12707.mail.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by amavisd-new-20030616-p7 (Debian) at imente.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Otis, but I can merge two indexes with different fields?

My big index has this fields, code, title, content, language and date. I 
add the new documents incrementally.

The clustering index only contains the fields code, and cluster. Merging 
the big index with the clustering one will preserve the order of the big 
one? For example, if I have the following indexes:
Big index
code_1, title_1, content_1, language_1, date_1
code_2, title_2, content_2, language_2, date_2
...

Clustering index
code_1, cluster_1
code_2, cluster_2
...

then the new merged index will be:

Merged index
code_1, title_1, content_1, language_1, date_1, cluster_1
code_2, title_2, content_2, language_2, date_2, cluster_2
...

If I can do that then fine, but I think the merging process uses the 
lucene internal ID to match the documents. I wanna use the code field to 
do that matching, is that possible?. I cannot be sure the lucene 
internal ID's are the same for the same codes in both indexes.

Thanks again,

Albert


Otis Gospodnetic wrote:

>(re-directing to lucene-user list)
>
>Albert,
>
>If I understand your question correctly... You could run a query like
>the one you gave on both indices, but if one of them contains documents
>that have only one of those fields (cluster), then there will never be
>any matches in the second index.
>
>However, why not leave your big index along, add documents to a new,
>smaller index, and then merge them periodically.  I may be off with
>this; it sounds like this is what you want to do, but I'm not certain I
>understood you fully.
>
>Otis
>
>--- Albert Vila <avp@imente.com> wrote:
>  
>
>>Hi all,
>>
>>I was wondering If I can search using the MultiSearcher over two 
>>diferent indexes at the same time (with diferent fields).
>>I've got one big index, with the code, title, content, language, etc 
>>fields (new documents are added incrementally). Now, I have to
>>introduce 
>>a clustering field. The problem is that I have to update the whole
>>index 
>>each time the clusters change, and I have no enought time to do it (I
>>
>>wanna check for new clusters every 10 minuts and I spent 25 minutes
>>to 
>>reindex the whole index).
>>A query example could be: language:0 and title:java and cluster:0
>>
>>Can I leave the big index whitout any changes and create a new index 
>>with only the following fields, code and cluster, and perform the 
>>searches using this two indexes? I think I cannot do that without 
>>changing the code. It would need a postprocess, matching all
>>returning 
>>codes from index 1 with index 2.
>>
>>Anyone have a solution for this problem? I would appreciate that.
>>    
>>
>
>
>
>  
>

-- 
Albert Vila
Director de proyectos I+D
http://www.imente.com
902 933 242
[iMente La informacin con ms beneficios]


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8835-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 07:58:25 2004
Return-Path: <lucene-user-return-8835-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27429 invoked from network); 23 Jun 2004 07:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 07:58:25 -0000
Received: (qmail 67175 invoked by uid 500); 23 Jun 2004 07:58:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67018 invoked by uid 500); 23 Jun 2004 07:58:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66893 invoked by uid 99); 23 Jun 2004 07:58:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 00:58:19 -0700
Message-ID: <20040623075738.9870.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.101] by web12702.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 00:57:38 PDT
Date: Wed, 23 Jun 2004 00:57:38 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Clustering question: searching two diferent indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40D9318E.1080203@imente.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Albert,

--- Albert Vila <avp@imente.com> wrote:
> Thanks Otis, but I can merge two indexes with different fields?

Yes.  Documents with different Fields can be stored in the same index.
Not every Document has to have all fields, and it can even have a
completely different set of Fields.

> My big index has this fields, code, title, content, language and
> date. I add the new documents incrementally.
> 
> The clustering index only contains the fields code, and cluster.
> Merging 
> the big index with the clustering one will preserve the order of the
> big one?

I don't fully understand what you mean by 'order'.  If you are asking
whether internal document Ids will remain the same, the answer is
negative.  If you have deleted some documents, there will be gaps in
document Id sequence, which Lucene will fill, thus re-assigning
internal document Ids.

> For example, if I have the following indexes:
> Big index
> code_1, title_1, content_1, language_1, date_1
> code_2, title_2, content_2, language_2, date_2
> ....
> 
> Clustering index
> code_1, cluster_1
> code_2, cluster_2
> ....
> 
> then the new merged index will be:
> 
> Merged index
> code_1, title_1, content_1, language_1, date_1, cluster_1
> code_2, title_2, content_2, language_2, date_2, cluster_2
> ....
> 
> If I can do that then fine, but I think the merging process uses the 
> lucene internal ID to match the documents. I wanna use the code field
> to 
> do that matching, is that possible?. I cannot be sure the lucene 
> internal ID's are the same for the same codes in both indexes.

Are you storing the internal Lucene Document Id in the 'code' field? 
If you are, I suggest you change your application to use its own set of
unique Ids to serve as 'primary keys' in your indices.

Otis


> Thanks again,
> 
> Albert
> 
> 
> Otis Gospodnetic wrote:
> 
> >(re-directing to lucene-user list)
> >
> >Albert,
> >
> >If I understand your question correctly... You could run a query
> like
> >the one you gave on both indices, but if one of them contains
> documents
> >that have only one of those fields (cluster), then there will never
> be
> >any matches in the second index.
> >
> >However, why not leave your big index along, add documents to a new,
> >smaller index, and then merge them periodically.  I may be off with
> >this; it sounds like this is what you want to do, but I'm not
> certain I
> >understood you fully.
> >
> >Otis
> >
> >--- Albert Vila <avp@imente.com> wrote:
> >  
> >
> >>Hi all,
> >>
> >>I was wondering If I can search using the MultiSearcher over two 
> >>diferent indexes at the same time (with diferent fields).
> >>I've got one big index, with the code, title, content, language,
> etc 
> >>fields (new documents are added incrementally). Now, I have to
> >>introduce 
> >>a clustering field. The problem is that I have to update the whole
> >>index 
> >>each time the clusters change, and I have no enought time to do it
> (I
> >>
> >>wanna check for new clusters every 10 minuts and I spent 25 minutes
> >>to 
> >>reindex the whole index).
> >>A query example could be: language:0 and title:java and cluster:0
> >>
> >>Can I leave the big index whitout any changes and create a new
> index 
> >>with only the following fields, code and cluster, and perform the 
> >>searches using this two indexes? I think I cannot do that without 
> >>changing the code. It would need a postprocess, matching all
> >>returning 
> >>codes from index 1 with index 2.
> >>
> >>Anyone have a solution for this problem? I would appreciate that.
> >>    
> >>
> >
> >
> >
> >  
> >
> 
> -- 
> Albert Vila
> Director de proyectos I+D
> http://www.imente.com
> 902 933 242
> [iMente La informacin con ms beneficios]
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8836-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 08:24:43 2004
Return-Path: <lucene-user-return-8836-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40220 invoked from network); 23 Jun 2004 08:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 08:24:42 -0000
Received: (qmail 48285 invoked by uid 500); 23 Jun 2004 08:24:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47727 invoked by uid 500); 23 Jun 2004 08:24:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47544 invoked by uid 99); 23 Jun 2004 08:24:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 01:24:22 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id CA65E547
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 10:23:32 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 14882-01 for <lucene-user@jakarta.apache.org>;
	Wed, 23 Jun 2004 10:23:32 +0200 (CEST)
Received: from [192.168.0.30] (grn.imente.com [212.145.99.45])
	by mail.imente.com (Postfix) with ESMTP id C778E50B
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 10:23:31 +0200 (CEST)
Message-ID: <40D93DF0.2020807@imente.com>
Date: Wed, 23 Jun 2004 10:23:12 +0200
From: Albert Vila <avp@imente.com>
User-Agent: Mozilla Thunderbird 0.6 (X11/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering question: searching two diferent indexes
References: <20040623075738.9870.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040623075738.9870.qmail@web12702.mail.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by amavisd-new-20030616-p7 (Debian) at imente.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

By 'order', I mean that I'm adding the documents in the big index sorted 
by date (in order to increase the sorting process). I wanna preserve 
this sorting after the merging process.

I'm not using the internal lucene ID in the code field. The code field 
contains my own IDs. I was asking, if I can do the merge using my own 
IDs (the code field), and not the lucene internal IDs, for example:

luceneID_0, code_x, title_x, content_x, language_x, date_x
luceneID_1, code_y, title_y, content_y, language_y, date_y

luceneID_0, code_y, cluster_y
luceneID_1, code_x, cluster_x

Will the prevous index structure procude an unconsistent merged index?

I wanna achieve the following merged index:
luceneID_0, code_x, title_x, content_x, language_x, date_x, cluster_x
luceneID_1, code_y, title_y, content_y, language_y, date_y, cluster_y

Thanks

Otis Gospodnetic wrote:

>Albert,
>
>--- Albert Vila <avp@imente.com> wrote:
>  
>
>>Thanks Otis, but I can merge two indexes with different fields?
>>    
>>
>
>Yes.  Documents with different Fields can be stored in the same index.
>Not every Document has to have all fields, and it can even have a
>completely different set of Fields.
>
>  
>
>>My big index has this fields, code, title, content, language and
>>date. I add the new documents incrementally.
>>
>>The clustering index only contains the fields code, and cluster.
>>Merging 
>>the big index with the clustering one will preserve the order of the
>>big one?
>>    
>>
>
>I don't fully understand what you mean by 'order'.  If you are asking
>whether internal document Ids will remain the same, the answer is
>negative.  If you have deleted some documents, there will be gaps in
>document Id sequence, which Lucene will fill, thus re-assigning
>internal document Ids.
>
>  
>
>>For example, if I have the following indexes:
>>Big index
>>code_1, title_1, content_1, language_1, date_1
>>code_2, title_2, content_2, language_2, date_2
>>....
>>
>>Clustering index
>>code_1, cluster_1
>>code_2, cluster_2
>>....
>>
>>then the new merged index will be:
>>
>>Merged index
>>code_1, title_1, content_1, language_1, date_1, cluster_1
>>code_2, title_2, content_2, language_2, date_2, cluster_2
>>....
>>
>>If I can do that then fine, but I think the merging process uses the 
>>lucene internal ID to match the documents. I wanna use the code field
>>to 
>>do that matching, is that possible?. I cannot be sure the lucene 
>>internal ID's are the same for the same codes in both indexes.
>>    
>>
>
>Are you storing the internal Lucene Document Id in the 'code' field? 
>If you are, I suggest you change your application to use its own set of
>unique Ids to serve as 'primary keys' in your indices.
>
>Otis
>
>
>  
>
>>Thanks again,
>>
>>Albert
>>
>>
>>Otis Gospodnetic wrote:
>>
>>    
>>
>>>(re-directing to lucene-user list)
>>>
>>>Albert,
>>>
>>>If I understand your question correctly... You could run a query
>>>      
>>>
>>like
>>    
>>
>>>the one you gave on both indices, but if one of them contains
>>>      
>>>
>>documents
>>    
>>
>>>that have only one of those fields (cluster), then there will never
>>>      
>>>
>>be
>>    
>>
>>>any matches in the second index.
>>>
>>>However, why not leave your big index along, add documents to a new,
>>>smaller index, and then merge them periodically.  I may be off with
>>>this; it sounds like this is what you want to do, but I'm not
>>>      
>>>
>>certain I
>>    
>>
>>>understood you fully.
>>>
>>>Otis
>>>
>>>--- Albert Vila <avp@imente.com> wrote:
>>> 
>>>
>>>      
>>>
>>>>Hi all,
>>>>
>>>>I was wondering If I can search using the MultiSearcher over two 
>>>>diferent indexes at the same time (with diferent fields).
>>>>I've got one big index, with the code, title, content, language,
>>>>        
>>>>
>>etc 
>>    
>>
>>>>fields (new documents are added incrementally). Now, I have to
>>>>introduce 
>>>>a clustering field. The problem is that I have to update the whole
>>>>index 
>>>>each time the clusters change, and I have no enought time to do it
>>>>        
>>>>
>>(I
>>    
>>
>>>>wanna check for new clusters every 10 minuts and I spent 25 minutes
>>>>to 
>>>>reindex the whole index).
>>>>A query example could be: language:0 and title:java and cluster:0
>>>>
>>>>Can I leave the big index whitout any changes and create a new
>>>>        
>>>>
>>index 
>>    
>>
>>>>with only the following fields, code and cluster, and perform the 
>>>>searches using this two indexes? I think I cannot do that without 
>>>>changing the code. It would need a postprocess, matching all
>>>>returning 
>>>>codes from index 1 with index 2.
>>>>
>>>>Anyone have a solution for this problem? I would appreciate that.
>>>>   
>>>>
>>>>        
>>>>
>>>
>>> 
>>>
>>>      
>>>
>>-- 
>>Albert Vila
>>Director de proyectos I+D
>>http://www.imente.com
>>902 933 242
>>[iMente La informacin con ms beneficios]
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>  
>

-- 
Albert Vila
Director de proyectos I+D
http://www.imente.com
902 933 242
[iMente La informacin con ms beneficios]


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8837-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 08:35:02 2004
Return-Path: <lucene-user-return-8837-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45495 invoked from network); 23 Jun 2004 08:35:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 08:35:01 -0000
Received: (qmail 78079 invoked by uid 500); 23 Jun 2004 08:34:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77596 invoked by uid 500); 23 Jun 2004 08:34:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77385 invoked by uid 99); 23 Jun 2004 08:34:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 01:34:25 -0700
Message-ID: <20040623083343.49538.qmail@web12705.mail.yahoo.com>
Received: from [211.95.204.101] by web12705.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 01:33:43 PDT
Date: Wed, 23 Jun 2004 01:33:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Clustering question: searching two diferent indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40D93DF0.2020807@imente.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aha, now I see what you mean.  You didn't mention 'date' before. :)
So, dates will get preserved, and you will be able to keep using them
for sorting.  However, Lucene will not automatically recognize your 'PK
fields' and merge fields from two Documents with the same PK into a
single Document.  You can think of 'merge' as 'add' (well, the method
name is addIndices, actually :)), so Lucene will simply make a
cumulative index from your two separate indices:

luceneID_0, code_x, title_x, content_x, language_x, date_x
luceneID_1, code_y, title_y, content_y, language_y, date_y
luceneID_0, code_y, cluster_y
luceneID_1, code_x, cluster_x

Otis


--- Albert Vila <avp@imente.com> wrote:
> By 'order', I mean that I'm adding the documents in the big index
> sorted 
> by date (in order to increase the sorting process). I wanna preserve 
> this sorting after the merging process.
> 
> I'm not using the internal lucene ID in the code field. The code
> field 
> contains my own IDs. I was asking, if I can do the merge using my own
> 
> IDs (the code field), and not the lucene internal IDs, for example:
> 
> luceneID_0, code_x, title_x, content_x, language_x, date_x
> luceneID_1, code_y, title_y, content_y, language_y, date_y
> 
> luceneID_0, code_y, cluster_y
> luceneID_1, code_x, cluster_x
> 
> Will the prevous index structure procude an unconsistent merged
> index?
> 
> I wanna achieve the following merged index:
> luceneID_0, code_x, title_x, content_x, language_x, date_x, cluster_x
> luceneID_1, code_y, title_y, content_y, language_y, date_y, cluster_y
> 
> Thanks
> 
> Otis Gospodnetic wrote:
> 
> >Albert,
> >
> >--- Albert Vila <avp@imente.com> wrote:
> >  
> >
> >>Thanks Otis, but I can merge two indexes with different fields?
> >>    
> >>
> >
> >Yes.  Documents with different Fields can be stored in the same
> index.
> >Not every Document has to have all fields, and it can even have a
> >completely different set of Fields.
> >
> >  
> >
> >>My big index has this fields, code, title, content, language and
> >>date. I add the new documents incrementally.
> >>
> >>The clustering index only contains the fields code, and cluster.
> >>Merging 
> >>the big index with the clustering one will preserve the order of
> the
> >>big one?
> >>    
> >>
> >
> >I don't fully understand what you mean by 'order'.  If you are
> asking
> >whether internal document Ids will remain the same, the answer is
> >negative.  If you have deleted some documents, there will be gaps in
> >document Id sequence, which Lucene will fill, thus re-assigning
> >internal document Ids.
> >
> >  
> >
> >>For example, if I have the following indexes:
> >>Big index
> >>code_1, title_1, content_1, language_1, date_1
> >>code_2, title_2, content_2, language_2, date_2
> >>....
> >>
> >>Clustering index
> >>code_1, cluster_1
> >>code_2, cluster_2
> >>....
> >>
> >>then the new merged index will be:
> >>
> >>Merged index
> >>code_1, title_1, content_1, language_1, date_1, cluster_1
> >>code_2, title_2, content_2, language_2, date_2, cluster_2
> >>....
> >>
> >>If I can do that then fine, but I think the merging process uses
> the 
> >>lucene internal ID to match the documents. I wanna use the code
> field
> >>to 
> >>do that matching, is that possible?. I cannot be sure the lucene 
> >>internal ID's are the same for the same codes in both indexes.
> >>    
> >>
> >
> >Are you storing the internal Lucene Document Id in the 'code' field?
> 
> >If you are, I suggest you change your application to use its own set
> of
> >unique Ids to serve as 'primary keys' in your indices.
> >
> >Otis
> >
> >
> >  
> >
> >>Thanks again,
> >>
> >>Albert
> >>
> >>
> >>Otis Gospodnetic wrote:
> >>
> >>    
> >>
> >>>(re-directing to lucene-user list)
> >>>
> >>>Albert,
> >>>
> >>>If I understand your question correctly... You could run a query
> >>>      
> >>>
> >>like
> >>    
> >>
> >>>the one you gave on both indices, but if one of them contains
> >>>      
> >>>
> >>documents
> >>    
> >>
> >>>that have only one of those fields (cluster), then there will
> never
> >>>      
> >>>
> >>be
> >>    
> >>
> >>>any matches in the second index.
> >>>
> >>>However, why not leave your big index along, add documents to a
> new,
> >>>smaller index, and then merge them periodically.  I may be off
> with
> >>>this; it sounds like this is what you want to do, but I'm not
> >>>      
> >>>
> >>certain I
> >>    
> >>
> >>>understood you fully.
> >>>
> >>>Otis
> >>>
> >>>--- Albert Vila <avp@imente.com> wrote:
> >>> 
> >>>
> >>>      
> >>>
> >>>>Hi all,
> >>>>
> >>>>I was wondering If I can search using the MultiSearcher over two 
> >>>>diferent indexes at the same time (with diferent fields).
> >>>>I've got one big index, with the code, title, content, language,
> >>>>        
> >>>>
> >>etc 
> >>    
> >>
> >>>>fields (new documents are added incrementally). Now, I have to
> >>>>introduce 
> >>>>a clustering field. The problem is that I have to update the
> whole
> >>>>index 
> >>>>each time the clusters change, and I have no enought time to do
> it
> >>>>        
> >>>>
> >>(I
> >>    
> >>
> >>>>wanna check for new clusters every 10 minuts and I spent 25
> minutes
> >>>>to 
> >>>>reindex the whole index).
> >>>>A query example could be: language:0 and title:java and cluster:0
> >>>>
> >>>>Can I leave the big index whitout any changes and create a new
> >>>>        
> >>>>
> >>index 
> >>    
> >>
> >>>>with only the following fields, code and cluster, and perform the
> 
> >>>>searches using this two indexes? I think I cannot do that without
> 
> >>>>changing the code. It would need a postprocess, matching all
> >>>>returning 
> >>>>codes from index 1 with index 2.
> >>>>
> >>>>Anyone have a solution for this problem? I would appreciate that.
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>-- 
> >>Albert Vila
> >>Director de proyectos I+D
> >>http://www.imente.com
> >>902 933 242
> >>[iMente La informacin con ms beneficios]
> >>
> >>
>
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>
> >>
> >>    
> >>
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >  
> >
> 
> -- 
> Albert Vila
> Director de proyectos I+D
> http://www.imente.com
> 902 933 242
> [iMente La informacin con ms beneficios]
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8838-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 08:45:03 2004
Return-Path: <lucene-user-return-8838-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50511 invoked from network); 23 Jun 2004 08:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 08:45:03 -0000
Received: (qmail 4483 invoked by uid 500); 23 Jun 2004 08:44:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4345 invoked by uid 500); 23 Jun 2004 08:44:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4082 invoked by uid 99); 23 Jun 2004 08:44:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 01:44:13 -0700
Message-ID: <20040623084330.68095.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.101] by web12704.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 01:43:30 PDT
Date: Wed, 23 Jun 2004 01:43:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Storing data in Lucene or Xindice
To: lucene-user@jakarta.apache.org
Cc: Rob Clews <robc@klearsystems.com>
In-Reply-To: <1087979333.3483.16.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

(redirecting to lucene-user list)

Hello Rob,

I think you will end up with a simpler final result if you try saving
everything in a single data source.  I have not used Xindice, so I
cannot comment on its features, performance, etc., but judging from
your description, you could simply use Lucene to index the textual
information from XML feeds or HTML.

For XML parsing and indexing, you can see the article I wrote for IBM
developerWorks:
http://www-106.ibm.com/developerworks/java/library/j-lucene/

If you will be doing a lot of parsing, you will want to use something
faster than Digester, though.  Maybe Electric XML parser.

For HTML you can use NekoHTML, JTidy, htmlparser (sf.net), or Brian
Goetz's HTMLParser.

Now that I think about it, I seem to recall that Xindice uses Lucene
under the hood.... I can't find any information that confirms this,
now.  Maybe I'm mixing somehting up.

Otis



--- Rob Clews <robc@klearsystems.com> wrote:
> Hi,
> 
> I'm currently looking at using Lucene to index some XML feeds we
> receive
> for content. However, some of the feeds contain the articles contents
> and some don't, the feeds that do contain the contents are in XML,
> for
> the others we must retrieve them in HTML.
> 
> I was originally going to store the XML contents from the feed in
> Xindice and retrieve them for each result from a Lucene query, but I
> guess I could store them in Lucene. We expect to build up a lot of
> content from shortish articles on the web and our main focus is
> speed,
> so would I be best storing the contents in Lucene or Xindice?
> 
> Would storing more data (non-indexable) in Lucene slow it down on
> queries?
> 
> Thanks,
> Rob Clews
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8839-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 08:51:46 2004
Return-Path: <lucene-user-return-8839-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53662 invoked from network); 23 Jun 2004 08:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 08:51:46 -0000
Received: (qmail 24431 invoked by uid 500); 23 Jun 2004 08:51:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24037 invoked by uid 500); 23 Jun 2004 08:51:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23824 invoked by uid 99); 23 Jun 2004 08:51:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 01:51:41 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5N8ouv26358
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 03:50:56 -0500
Message-ID: <40D9446F.7080003@getopt.org>
Date: Wed, 23 Jun 2004 10:50:55 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: ANN: Luke v. 0.5 released
References: <web-39339608@mail5.rambler.ru>
In-Reply-To: <web-39339608@mail5.rambler.ru>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Vladimir Yuryev wrote:

> Hi Andrzej!
> 
> I congratulate on the successful version. RussianAnalyzer works with my 
> indexes, but there are problems with some words. These problem words are 
> found only WildCard a method.

I don't quite understand what you are saying... Do you suspect there is 
a bug in Luke somewhere on the Search tab? If that's the case, please 
provide an example.

> Besides AnalizerTool works with these 
> words without problems.
> 
> There is one more small discrepancy on webpage http://www.getopt.org/luke/
> - Remember to put both JARs on your classpath, e.g.: java-classpath 
> luke.jar; lucene.jar org.getopt.luke. Luke
> + Remember to put both JARs on your classpath, e.g.: java-classpath 
> luke.jar:lucene.jar org.getopt.luke. Luke

Well, both versions are correct - just the platform is different :-). 
I'll make a clarification. Thank you!

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8840-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 09:20:06 2004
Return-Path: <lucene-user-return-8840-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69558 invoked from network); 23 Jun 2004 09:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 09:20:06 -0000
Received: (qmail 98460 invoked by uid 500); 23 Jun 2004 09:19:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98335 invoked by uid 500); 23 Jun 2004 09:19:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98279 invoked by uid 99); 23 Jun 2004 09:19:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 02:18:59 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id 7D37B54A
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 11:18:04 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 16663-06 for <lucene-user@jakarta.apache.org>;
	Wed, 23 Jun 2004 11:18:03 +0200 (CEST)
Received: from [192.168.0.30] (grn.imente.com [212.145.99.45])
	by mail.imente.com (Postfix) with ESMTP id 66A2B547
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 11:18:03 +0200 (CEST)
Message-ID: <40D94AB8.9040509@imente.com>
Date: Wed, 23 Jun 2004 11:17:44 +0200
From: Albert Vila <avp@imente.com>
User-Agent: Mozilla Thunderbird 0.6 (X11/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering question: searching two diferent indexes
References: <20040623083343.49538.qmail@web12705.mail.yahoo.com>
In-Reply-To: <20040623083343.49538.qmail@web12705.mail.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by amavisd-new-20030616-p7 (Debian) at imente.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

OK, but with this solution, i cannot perform queries like:
get all codes that match "title:java and language:english and cluster:0"

Albert


Otis Gospodnetic wrote:

>Aha, now I see what you mean.  You didn't mention 'date' before. :)
>So, dates will get preserved, and you will be able to keep using them
>for sorting.  However, Lucene will not automatically recognize your 'PK
>fields' and merge fields from two Documents with the same PK into a
>single Document.  You can think of 'merge' as 'add' (well, the method
>name is addIndices, actually :)), so Lucene will simply make a
>cumulative index from your two separate indices:
>
>luceneID_0, code_x, title_x, content_x, language_x, date_x
>luceneID_1, code_y, title_y, content_y, language_y, date_y
>luceneID_0, code_y, cluster_y
>luceneID_1, code_x, cluster_x
>
>Otis
>
>
>--- Albert Vila <avp@imente.com> wrote:
>  
>
>>By 'order', I mean that I'm adding the documents in the big index
>>sorted 
>>by date (in order to increase the sorting process). I wanna preserve 
>>this sorting after the merging process.
>>
>>I'm not using the internal lucene ID in the code field. The code
>>field 
>>contains my own IDs. I was asking, if I can do the merge using my own
>>
>>IDs (the code field), and not the lucene internal IDs, for example:
>>
>>luceneID_0, code_x, title_x, content_x, language_x, date_x
>>luceneID_1, code_y, title_y, content_y, language_y, date_y
>>
>>luceneID_0, code_y, cluster_y
>>luceneID_1, code_x, cluster_x
>>
>>Will the prevous index structure procude an unconsistent merged
>>index?
>>
>>I wanna achieve the following merged index:
>>luceneID_0, code_x, title_x, content_x, language_x, date_x, cluster_x
>>luceneID_1, code_y, title_y, content_y, language_y, date_y, cluster_y
>>
>>Thanks
>>
>>Otis Gospodnetic wrote:
>>
>>    
>>
>>>Albert,
>>>
>>>--- Albert Vila <avp@imente.com> wrote:
>>> 
>>>
>>>      
>>>
>>>>Thanks Otis, but I can merge two indexes with different fields?
>>>>   
>>>>
>>>>        
>>>>
>>>Yes.  Documents with different Fields can be stored in the same
>>>      
>>>
>>index.
>>    
>>
>>>Not every Document has to have all fields, and it can even have a
>>>completely different set of Fields.
>>>
>>> 
>>>
>>>      
>>>
>>>>My big index has this fields, code, title, content, language and
>>>>date. I add the new documents incrementally.
>>>>
>>>>The clustering index only contains the fields code, and cluster.
>>>>Merging 
>>>>the big index with the clustering one will preserve the order of
>>>>        
>>>>
>>the
>>    
>>
>>>>big one?
>>>>   
>>>>
>>>>        
>>>>
>>>I don't fully understand what you mean by 'order'.  If you are
>>>      
>>>
>>asking
>>    
>>
>>>whether internal document Ids will remain the same, the answer is
>>>negative.  If you have deleted some documents, there will be gaps in
>>>document Id sequence, which Lucene will fill, thus re-assigning
>>>internal document Ids.
>>>
>>> 
>>>
>>>      
>>>
>>>>For example, if I have the following indexes:
>>>>Big index
>>>>code_1, title_1, content_1, language_1, date_1
>>>>code_2, title_2, content_2, language_2, date_2
>>>>....
>>>>
>>>>Clustering index
>>>>code_1, cluster_1
>>>>code_2, cluster_2
>>>>....
>>>>
>>>>then the new merged index will be:
>>>>
>>>>Merged index
>>>>code_1, title_1, content_1, language_1, date_1, cluster_1
>>>>code_2, title_2, content_2, language_2, date_2, cluster_2
>>>>....
>>>>
>>>>If I can do that then fine, but I think the merging process uses
>>>>        
>>>>
>>the 
>>    
>>
>>>>lucene internal ID to match the documents. I wanna use the code
>>>>        
>>>>
>>field
>>    
>>
>>>>to 
>>>>do that matching, is that possible?. I cannot be sure the lucene 
>>>>internal ID's are the same for the same codes in both indexes.
>>>>   
>>>>
>>>>        
>>>>
>>>Are you storing the internal Lucene Document Id in the 'code' field?
>>>      
>>>
>>>If you are, I suggest you change your application to use its own set
>>>      
>>>
>>of
>>    
>>
>>>unique Ids to serve as 'primary keys' in your indices.
>>>
>>>Otis
>>>
>>>
>>> 
>>>
>>>      
>>>
>>>>Thanks again,
>>>>
>>>>Albert
>>>>
>>>>
>>>>Otis Gospodnetic wrote:
>>>>
>>>>   
>>>>
>>>>        
>>>>
>>>>>(re-directing to lucene-user list)
>>>>>
>>>>>Albert,
>>>>>
>>>>>If I understand your question correctly... You could run a query
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>like
>>>>   
>>>>
>>>>        
>>>>
>>>>>the one you gave on both indices, but if one of them contains
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>documents
>>>>   
>>>>
>>>>        
>>>>
>>>>>that have only one of those fields (cluster), then there will
>>>>>          
>>>>>
>>never
>>    
>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>be
>>>>   
>>>>
>>>>        
>>>>
>>>>>any matches in the second index.
>>>>>
>>>>>However, why not leave your big index along, add documents to a
>>>>>          
>>>>>
>>new,
>>    
>>
>>>>>smaller index, and then merge them periodically.  I may be off
>>>>>          
>>>>>
>>with
>>    
>>
>>>>>this; it sounds like this is what you want to do, but I'm not
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>certain I
>>>>   
>>>>
>>>>        
>>>>
>>>>>understood you fully.
>>>>>
>>>>>Otis
>>>>>
>>>>>--- Albert Vila <avp@imente.com> wrote:
>>>>>
>>>>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>>>Hi all,
>>>>>>
>>>>>>I was wondering If I can search using the MultiSearcher over two 
>>>>>>diferent indexes at the same time (with diferent fields).
>>>>>>I've got one big index, with the code, title, content, language,
>>>>>>       
>>>>>>
>>>>>>            
>>>>>>
>>>>etc 
>>>>   
>>>>
>>>>        
>>>>
>>>>>>fields (new documents are added incrementally). Now, I have to
>>>>>>introduce 
>>>>>>a clustering field. The problem is that I have to update the
>>>>>>            
>>>>>>
>>whole
>>    
>>
>>>>>>index 
>>>>>>each time the clusters change, and I have no enought time to do
>>>>>>            
>>>>>>
>>it
>>    
>>
>>>>>>       
>>>>>>
>>>>>>            
>>>>>>
>>>>(I
>>>>   
>>>>
>>>>        
>>>>
>>>>>>wanna check for new clusters every 10 minuts and I spent 25
>>>>>>            
>>>>>>
>>minutes
>>    
>>
>>>>>>to 
>>>>>>reindex the whole index).
>>>>>>A query example could be: language:0 and title:java and cluster:0
>>>>>>
>>>>>>Can I leave the big index whitout any changes and create a new
>>>>>>       
>>>>>>
>>>>>>            
>>>>>>
>>>>index 
>>>>   
>>>>
>>>>        
>>>>
>>>>>>with only the following fields, code and cluster, and perform the
>>>>>>            
>>>>>>
>>>>>>searches using this two indexes? I think I cannot do that without
>>>>>>            
>>>>>>
>>>>>>changing the code. It would need a postprocess, matching all
>>>>>>returning 
>>>>>>codes from index 1 with index 2.
>>>>>>
>>>>>>Anyone have a solution for this problem? I would appreciate that.
>>>>>>  
>>>>>>
>>>>>>       
>>>>>>
>>>>>>            
>>>>>>
>>>>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>-- 
>>>>Albert Vila
>>>>Director de proyectos I+D
>>>>http://www.imente.com
>>>>902 933 242
>>>>[iMente La informacin con ms beneficios]
>>>>
>>>>
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>      
>>>
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail:
>>>>        
>>>>
>>lucene-user-help@jakarta.apache.org
>>    
>>
>>>>   
>>>>
>>>>        
>>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>    
>>
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>> 
>>>
>>>      
>>>
>>-- 
>>Albert Vila
>>Director de proyectos I+D
>>http://www.imente.com
>>902 933 242
>>[iMente La informacin con ms beneficios]
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>  
>

-- 
Albert Vila
Director de proyectos I+D
http://www.imente.com
902 933 242
[iMente La informacin con ms beneficios]


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8841-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 10:13:07 2004
Return-Path: <lucene-user-return-8841-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1374 invoked from network); 23 Jun 2004 10:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 10:13:06 -0000
Received: (qmail 54558 invoked by uid 500); 23 Jun 2004 10:09:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51750 invoked by uid 500); 23 Jun 2004 10:09:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48068 invoked by uid 99); 23 Jun 2004 10:07:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 03:07:54 -0700
Message-ID: <20040623100709.54972.qmail@web12701.mail.yahoo.com>
Received: from [211.95.204.99] by web12701.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 03:07:09 PDT
Date: Wed, 23 Jun 2004 03:07:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Clustering question: searching two diferent indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40D94AB8.9040509@imente.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Correct, that is what I meant when I said you application will have to
handle your particular merge.  Instead of using addIndexes method, your
applicatoin will have to go through all Documents in the smaller index
(the one with cluster fields), get the PK of each Doc, look up that Doc
by PK in the big index, delete it from there if it exists, and re-add
it to the big index).

Otis



--- Albert Vila <avp@imente.com> wrote:
> OK, but with this solution, i cannot perform queries like:
> get all codes that match "title:java and language:english and
> cluster:0"
> 
> Albert
> 
> 
> Otis Gospodnetic wrote:
> 
> >Aha, now I see what you mean.  You didn't mention 'date' before. :)
> >So, dates will get preserved, and you will be able to keep using
> them
> >for sorting.  However, Lucene will not automatically recognize your
> 'PK
> >fields' and merge fields from two Documents with the same PK into a
> >single Document.  You can think of 'merge' as 'add' (well, the
> method
> >name is addIndices, actually :)), so Lucene will simply make a
> >cumulative index from your two separate indices:
> >
> >luceneID_0, code_x, title_x, content_x, language_x, date_x
> >luceneID_1, code_y, title_y, content_y, language_y, date_y
> >luceneID_0, code_y, cluster_y
> >luceneID_1, code_x, cluster_x
> >
> >Otis
> >
> >
> >--- Albert Vila <avp@imente.com> wrote:
> >  
> >
> >>By 'order', I mean that I'm adding the documents in the big index
> >>sorted 
> >>by date (in order to increase the sorting process). I wanna
> preserve 
> >>this sorting after the merging process.
> >>
> >>I'm not using the internal lucene ID in the code field. The code
> >>field 
> >>contains my own IDs. I was asking, if I can do the merge using my
> own
> >>
> >>IDs (the code field), and not the lucene internal IDs, for example:
> >>
> >>luceneID_0, code_x, title_x, content_x, language_x, date_x
> >>luceneID_1, code_y, title_y, content_y, language_y, date_y
> >>
> >>luceneID_0, code_y, cluster_y
> >>luceneID_1, code_x, cluster_x
> >>
> >>Will the prevous index structure procude an unconsistent merged
> >>index?
> >>
> >>I wanna achieve the following merged index:
> >>luceneID_0, code_x, title_x, content_x, language_x, date_x,
> cluster_x
> >>luceneID_1, code_y, title_y, content_y, language_y, date_y,
> cluster_y
> >>
> >>Thanks
> >>
> >>Otis Gospodnetic wrote:
> >>
> >>    
> >>
> >>>Albert,
> >>>
> >>>--- Albert Vila <avp@imente.com> wrote:
> >>> 
> >>>
> >>>      
> >>>
> >>>>Thanks Otis, but I can merge two indexes with different fields?
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>Yes.  Documents with different Fields can be stored in the same
> >>>      
> >>>
> >>index.
> >>    
> >>
> >>>Not every Document has to have all fields, and it can even have a
> >>>completely different set of Fields.
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>>>My big index has this fields, code, title, content, language and
> >>>>date. I add the new documents incrementally.
> >>>>
> >>>>The clustering index only contains the fields code, and cluster.
> >>>>Merging 
> >>>>the big index with the clustering one will preserve the order of
> >>>>        
> >>>>
> >>the
> >>    
> >>
> >>>>big one?
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>I don't fully understand what you mean by 'order'.  If you are
> >>>      
> >>>
> >>asking
> >>    
> >>
> >>>whether internal document Ids will remain the same, the answer is
> >>>negative.  If you have deleted some documents, there will be gaps
> in
> >>>document Id sequence, which Lucene will fill, thus re-assigning
> >>>internal document Ids.
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>>>For example, if I have the following indexes:
> >>>>Big index
> >>>>code_1, title_1, content_1, language_1, date_1
> >>>>code_2, title_2, content_2, language_2, date_2
> >>>>....
> >>>>
> >>>>Clustering index
> >>>>code_1, cluster_1
> >>>>code_2, cluster_2
> >>>>....
> >>>>
> >>>>then the new merged index will be:
> >>>>
> >>>>Merged index
> >>>>code_1, title_1, content_1, language_1, date_1, cluster_1
> >>>>code_2, title_2, content_2, language_2, date_2, cluster_2
> >>>>....
> >>>>
> >>>>If I can do that then fine, but I think the merging process uses
> >>>>        
> >>>>
> >>the 
> >>    
> >>
> >>>>lucene internal ID to match the documents. I wanna use the code
> >>>>        
> >>>>
> >>field
> >>    
> >>
> >>>>to 
> >>>>do that matching, is that possible?. I cannot be sure the lucene 
> >>>>internal ID's are the same for the same codes in both indexes.
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>Are you storing the internal Lucene Document Id in the 'code'
> field?
> >>>      
> >>>
> >>>If you are, I suggest you change your application to use its own
> set
> >>>      
> >>>
> >>of
> >>    
> >>
> >>>unique Ids to serve as 'primary keys' in your indices.
> >>>
> >>>Otis
> >>>
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>>>Thanks again,
> >>>>
> >>>>Albert
> >>>>
> >>>>
> >>>>Otis Gospodnetic wrote:
> >>>>
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>(re-directing to lucene-user list)
> >>>>>
> >>>>>Albert,
> >>>>>
> >>>>>If I understand your question correctly... You could run a query
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>like
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>the one you gave on both indices, but if one of them contains
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>documents
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>that have only one of those fields (cluster), then there will
> >>>>>          
> >>>>>
> >>never
> >>    
> >>
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>be
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>any matches in the second index.
> >>>>>
> >>>>>However, why not leave your big index along, add documents to a
> >>>>>          
> >>>>>
> >>new,
> >>    
> >>
> >>>>>smaller index, and then merge them periodically.  I may be off
> >>>>>          
> >>>>>
> >>with
> >>    
> >>
> >>>>>this; it sounds like this is what you want to do, but I'm not
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>certain I
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>understood you fully.
> >>>>>
> >>>>>Otis
> >>>>>
> >>>>>--- Albert Vila <avp@imente.com> wrote:
> >>>>>
> >>>>>
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>>>Hi all,
> >>>>>>
> >>>>>>I was wondering If I can search using the MultiSearcher over
> two 
> >>>>>>diferent indexes at the same time (with diferent fields).
> >>>>>>I've got one big index, with the code, title, content,
> language,
> >>>>>>       
> >>>>>>
> >>>>>>            
> >>>>>>
> >>>>etc 
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>>fields (new documents are added incrementally). Now, I have to
> >>>>>>introduce 
> >>>>>>a clustering field. The problem is that I have to update the
> >>>>>>            
> >>>>>>
> >>whole
> >>    
> >>
> >>>>>>index 
> >>>>>>each time the clusters change, and I have no enought time to do
> >>>>>>            
> >>>>>>
> >>it
> >>    
> >>
> >>>>>>       
> >>>>>>
> >>>>>>            
> >>>>>>
> >>>>(I
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>>wanna check for new clusters every 10 minuts and I spent 25
> >>>>>>            
> >>>>>>
> >>minutes
> >>    
> >>
> >>>>>>to 
> >>>>>>reindex the whole index).
> >>>>>>A query example could be: language:0 and title:java and
> cluster:0
> >>>>>>
> >>>>>>Can I leave the big index whitout any changes and create a new
> >>>>>>       
> >>>>>>
> >>>>>>            
> >>>>>>
> >>>>index 
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>>>>with only the following fields, code and cluster, and perform
> the
> >>>>>>            
> >>>>>>
> >>>>>>searches using this two indexes? I think I cannot do that
> without
> >>>>>>            
> >>>>>>
> >>>>>>changing the code. It would need a postprocess, matching all
> >>>>>>returning 
> >>>>>>codes from index 1 with index 2.
> >>>>>>
> >>>>>>Anyone have a solution for this problem? I would appreciate
> that.
> >>>>>>  
> >>>>>>
> >>>>>>       
> >>>>>>
> >>>>>>            
> >>>>>>
> >>>>>
> >>>>>     
> >>>>>
> >>>>>          
> >>>>>
> >>>>-- 
> >>>>Albert Vila
> >>>>Director de proyectos I+D
> >>>>http://www.imente.com
> >>>>902 933 242
> >>>>[iMente La informacin con ms beneficios]
> >>>>
> >>>>
> >>>>        
> >>>>
>
>>>---------------------------------------------------------------------
> >>>      
> >>>
> >>>>To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail:
> >>>>        
> >>>>
> >>lucene-user-help@jakarta.apache.org
> >>    
> >>
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>      
> >>>
>
>>---------------------------------------------------------------------
> >>    
> >>
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>-- 
> >>Albert Vila
> >>Director de proyectos I+D
> >>http://www.imente.com
> >>902 933 242
> >>[iMente La informacin con ms beneficios]
> >>
> >>
>
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>
> >>
> >>    
> >>
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >  
> >
> 
> -- 
> Albert Vila
> Director de proyectos I+D
> http://www.imente.com
> 902 933 242
> [iMente La informacin con ms beneficios]
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8842-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 11:12:29 2004
Return-Path: <lucene-user-return-8842-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38290 invoked from network); 23 Jun 2004 11:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 11:12:29 -0000
Received: (qmail 1259 invoked by uid 500); 23 Jun 2004 11:08:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92887 invoked by uid 500); 23 Jun 2004 11:03:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82180 invoked by uid 99); 23 Jun 2004 10:58:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 03:58:57 -0700
Message-Id: <200406231057.i5NAvR019672@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: using boost factor
Date: Wed, 23 Jun 2004 20:59:38 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <20040622175040.96982.qmail@web12702.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

It seems like to really customise the scoring in lucene, one will have to go
into the lucene source.

I spend a fair bit of time looking into this and it seems to me not the full
scoring api is exported.  The formula documented on the Similarity class
seems to explain how a term is scored, but not, for example, how the final
score on a Boolean query is computed from each individual component. (Please
correct me if I'm wrong).  Normalisation is another part where the API is
not exported.

Anson

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, June 23, 2004 3:51 AM
To: Lucene Users List
Subject: Re: using boost factor

Hello Anson,

I would look at IndexSearcher's explain method:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/IndexSear
cher.html#explain(org.apache.lucene.search.Query,%20int)

This should give you insight into what's contributing to the high/low
scores, thus telling you what you can tweak.  Perhaps it's just the
boost, perhaps some other similarity factors.

Using explain should provide you information such as this, for example:
http://www.mozdex.com/explain.jsp?idx=2&id=2067257&query=goober

I hope this helps.  Somebody else will probably be able to give more
information, but this should get you started while you wait.

Otis

--- Anson Lau <alau@fulfil-net.com> wrote:
> Hi guys,
> 
> Lets say I want to search the term "hello world" over 3 fields with
> different boost:
> 
> ((hello:field1 world:field1)^0.001 (hello:field2 world:field2)^100
> (hello:field3 world:field3)^20000))
> 
> Note I've given field1 a really low boost, a heavy boost to field2
> and a
> REALLY heavy boost to field3.
> 
> What is happening to me is that a term that matches both field1 and
> field2,
> will have a higher score than a term that matches field3 only, even
> though
> field3's boost is WAY higher.
> 
> Can I change this behaviour such that the match in field3 only will
> actually
> have a higher score because of the boost?
> 
> Thanks,
> 
> Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8843-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 11:29:49 2004
Return-Path: <lucene-user-return-8843-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46838 invoked from network); 23 Jun 2004 11:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 11:29:48 -0000
Received: (qmail 40842 invoked by uid 500); 23 Jun 2004 11:23:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26953 invoked by uid 500); 23 Jun 2004 11:18:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13748 invoked by uid 99); 23 Jun 2004 11:13:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 04:12:59 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZREDL00.S3E for <lucene-user@jakarta.apache.org>; Wed,
          23 Jun 2004 16:54:57 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Delete Indexed from Merged Document
Date: Wed, 23 Jun 2004 16:51:57 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIEEMACAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIOELNCAAA.karthik@controlnet.co.in>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Guys

   Has Somebody out there tried DELETING/UPDATION  of   INDEXED Files from a
MERGED Index Format,
  If HowTo do this Please Explain....


with regards
Karthik




-----Original Message-----
From: Karthik N S [mailto:karthik@controlnet.co.in]
Sent: Wednesday, June 23, 2004 9:24 AM
To: Lucene Users List
Subject: RE: Delete Indexed from Merged Document


Hi

   Otis

   The  link u have specified  displays on how to update an Indexed File [
Deleting the Old  and then updating with new Ones']

  But My Question to be more Specific is : -

              When we MERGED more then 2 Indexed files  [using
writer.addIndexes(luceneDirs)] , In such  a case How to
               Delete one of the Indexed files from the MERGED Index in
order to Insert  an new updated one

  Please have some sample code snippet in this regard......


with regards
Karthik

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 22, 2004 12:52 PM
To: Lucene Users List
Subject: Re: Delete Indexed from Merged Document


Hello Karthik,

Here is the answer: http://www.jguru.com/faq/view.jsp?EID=492423

Otis

--- Karthik N S <karthik@controlnet.co.in> wrote:
>
>
>   Dev Guys
>
>   Apologies Please....
>
>     How Do I DELETE  an  Indexed Document from a MERGED Index File
>
>    Can Some body Write me some Code Snippets on this... please
>
> With Regards
> Karthik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8844-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 12:10:39 2004
Return-Path: <lucene-user-return-8844-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65831 invoked from network); 23 Jun 2004 12:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 12:10:39 -0000
Received: (qmail 55238 invoked by uid 500); 23 Jun 2004 12:03:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54682 invoked by uid 500); 23 Jun 2004 12:03:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53595 invoked by uid 99); 23 Jun 2004 12:02:55 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [62.52.71.32] (HELO mx1.bertelsmann.de) (62.52.71.32)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 05:02:54 -0700
Received: by mx1.bertelsmann.de with Internet Mail Service (5.5.2657.72)
	id <N3L55XK5>; Wed, 23 Jun 2004 14:02:31 +0200
Message-ID: <69D276452CD2904980D5B6AC33C9BE170174DA65@gtlbmlexs0006.bagmail.net>
From: Wolf-Dietrich.Materna@empolis.com
To: lucene-user@jakarta.apache.org
Subject: AW: Delete Indexed from Merged Document
Date: Wed, 23 Jun 2004 14:02:53 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, 
> Karthik N S [mailto:karthik@controlnet.co.in] 
> 
>    Has Somebody out there tried DELETING/UPDATION  of   
> INDEXED Files from a
> MERGED Index Format,
>   If HowTo do this Please Explain....
Of course you can delete or update a document from a merged index.
It works in the same way as for all other indexes. You need an 
unique key (e.g. the file name or uri), which is indexed 
for searching, to find the right document, because the internal 
document numbers are changed after merging indexes or deleting
documents and optimizing an index. Using this key you can search
for the document and remove it. It doesn't matter if your index
was created by merging serveral indexes or not.
Example:
/* Create index: */
	Document document = new Document();
	document.add(Field.Keyword("filename", file_name)); // this must be
unique for each document!
	document.add(Field.Text("content", file_content));
	writer.addDocument(document);
/* ... */
      writer.close();

/* Update or remove document: Use the file name to find the original 
   document and remove it from index */
  FSDirectory indexDirectory = FSDirectory.getDirectory("indexPath", false);
  IndexReader indexReader = IndexReader.open(indexDirectory);
  IndexSearcher indexSearcher = new IndexSearcher(indexReader);
  // create query and search for document using its filename
  TermQuery query = new TermQuery(new Term("filename", file_name));
  Hits hits = indexSearcher.search(query);
  if ( hits.length() > 0 ) {
      // remove the document from index
	int docID = hits.id(0);
      indexReader.delete( docID );
  }
  // else: this is a new file or already removed, so we can simply add it.
  indexSearcher.close();
  indexReader.close();
  indexDirectory.close();
  // now open an IndexWriter for the same index and add the updated file
  // as new document....
/* done */
Hope it helps. Regards,
	Wolf-Dietrich Materna

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8845-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 12:46:43 2004
Return-Path: <lucene-user-return-8845-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84885 invoked from network); 23 Jun 2004 12:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 12:46:43 -0000
Received: (qmail 67795 invoked by uid 500); 23 Jun 2004 12:36:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67662 invoked by uid 500); 23 Jun 2004 12:36:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67563 invoked by uid 99); 23 Jun 2004 12:36:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 05:36:46 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZRI8S00.T4A for <lucene-user@jakarta.apache.org>; Wed,
          23 Jun 2004 18:18:28 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Delete Indexed from Merged Document
Date: Wed, 23 Jun 2004 18:15:29 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMEMACAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <69D276452CD2904980D5B6AC33C9BE170174DA65@gtlbmlexs0006.bagmail.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi
Mr Wolf  What is this

    // remove the document from index
	int docID = hits.id(0);

 and can I increment the "0" factor  in the bracket ...for deletion


Thx in advance

Karthik

-----Original Message-----
From: Wolf-Dietrich.Materna@empolis.com
[mailto:Wolf-Dietrich.Materna@empolis.com]
Sent: Wednesday, June 23, 2004 5:33 PM
To: lucene-user@jakarta.apache.org
Subject: AW: Delete Indexed from Merged Document


Hello,
> Karthik N S [mailto:karthik@controlnet.co.in]
>
>    Has Somebody out there tried DELETING/UPDATION  of
> INDEXED Files from a
> MERGED Index Format,
>   If HowTo do this Please Explain....
Of course you can delete or update a document from a merged index.
It works in the same way as for all other indexes. You need an
unique key (e.g. the file name or uri), which is indexed
for searching, to find the right document, because the internal
document numbers are changed after merging indexes or deleting
documents and optimizing an index. Using this key you can search
for the document and remove it. It doesn't matter if your index
was created by merging serveral indexes or not.
Example:
/* Create index: */
	Document document = new Document();
	document.add(Field.Keyword("filename", file_name)); // this must be
unique for each document!
	document.add(Field.Text("content", file_content));
	writer.addDocument(document);
/* ... */
      writer.close();

/* Update or remove document: Use the file name to find the original
   document and remove it from index */
  FSDirectory indexDirectory = FSDirectory.getDirectory("indexPath", false);
  IndexReader indexReader = IndexReader.open(indexDirectory);
  IndexSearcher indexSearcher = new IndexSearcher(indexReader);
  // create query and search for document using its filename
  TermQuery query = new TermQuery(new Term("filename", file_name));
  Hits hits = indexSearcher.search(query);
  if ( hits.length() > 0 ) {
      // remove the document from index
	int docID = hits.id(0);
      indexReader.delete( docID );
  }
  // else: this is a new file or already removed, so we can simply add it.
  indexSearcher.close();
  indexReader.close();
  indexDirectory.close();
  // now open an IndexWriter for the same index and add the updated file
  // as new document....
/* done */
Hope it helps. Regards,
	Wolf-Dietrich Materna

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8846-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 13:36:54 2004
Return-Path: <lucene-user-return-8846-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26138 invoked from network); 23 Jun 2004 13:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 13:36:54 -0000
Received: (qmail 75684 invoked by uid 500); 23 Jun 2004 13:10:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75558 invoked by uid 500); 23 Jun 2004 13:10:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75332 invoked by uid 99); 23 Jun 2004 13:10:53 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [62.52.71.32] (HELO mx1.bertelsmann.de) (62.52.71.32)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 06:10:51 -0700
Received: by mx1.bertelsmann.de with Internet Mail Service (5.5.2657.72)
	id <N3L56A70>; Wed, 23 Jun 2004 15:10:36 +0200
Message-ID: <69D276452CD2904980D5B6AC33C9BE170174DAF1@gtlbmlexs0006.bagmail.net>
From: Wolf-Dietrich.Materna@empolis.com
To: lucene-user@jakarta.apache.org
Subject: AW: Delete Indexed from Merged Document
Date: Wed, 23 Jun 2004 15:11:02 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, 
> Karthik N S [mailto:karthik@controlnet.co.in] wrote:
> Hi
> Mr Wolf  
Wolf-Dietrich is my first name, so leave out Mr. or use
my family name (which is uncommon here).

>	What is this
> 
>     // remove the document from index
> 	int docID = hits.id(0);
> 
>  and can I increment the "0" factor  in the bracket ...for deletion
Yes, but there is no reason to do this in this case.
You search for documents using their file name (including their full path!).
You get a result (some kind of list). Please read Java-Docs about Hits
class.
hits.id(0) returns the (internal) ID of the first hit in your result.
This is the document that you want to remove (using
indexReader.delete(...).).
There are no more documents in your result "hits" unless your key is not
unique.
hits.length() returns 0 or 1.
Regards,
	Wolf-Dietrich Materna

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8847-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 14:13:21 2004
Return-Path: <lucene-user-return-8847-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60522 invoked from network); 23 Jun 2004 14:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 14:13:21 -0000
Received: (qmail 22546 invoked by uid 500); 23 Jun 2004 14:12:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22307 invoked by uid 500); 23 Jun 2004 14:12:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22041 invoked by uid 99); 23 Jun 2004 14:12:45 -0000
Received: from [64.4.27.52] (HELO hotmail.com) (64.4.27.52)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 07:12:45 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 23 Jun 2004 07:12:28 -0700
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Wed, 23 Jun 2004 14:12:28 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Categorization
Date: Wed, 23 Jun 2004 14:12:28 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F52sywkGmY8Tko0009a399@hotmail.com>
X-OriginalArrivalTime: 23 Jun 2004 14:12:28.0992 (UTC) FILETIME=[1DFF4C00:01C4592C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,
How can I do a categorization of the results ? Is it possible with the 
Lucene API ?
Thanks,
William.

_________________________________________________________________
Watch the online reality show Mixed Messages with a friend and enter to win 
a trip to NY 
http://www.msnmessenger-download.click-url.com/go/onm00200497ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8848-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 14:48:45 2004
Return-Path: <lucene-user-return-8848-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88306 invoked from network); 23 Jun 2004 14:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 14:48:45 -0000
Received: (qmail 65659 invoked by uid 500); 23 Jun 2004 14:48:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65549 invoked by uid 500); 23 Jun 2004 14:48:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65500 invoked by uid 99); 23 Jun 2004 14:48:35 -0000
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 07:48:35 -0700
Message-ID: <20040623144822.62611.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.99] by web12702.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 07:48:22 PDT
Date: Wed, 23 Jun 2004 07:48:22 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Categorization
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY8-F52sywkGmY8Tko0009a399@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello William,

Lucene does not have a categorization engine, but you may want to look
at Carrot2 (http://sourceforge.net/projects/carrot2/)

Otis

--- William W <william_wws@hotmail.com> wrote:
> 
> Hi,
> How can I do a categorization of the results ? Is it possible with
> the 
> Lucene API ?
> Thanks,
> William.
> 
> _________________________________________________________________
> Watch the online reality show Mixed Messages with a friend and enter
> to win 
> a trip to NY 
>
http://www.msnmessenger-download.click-url.com/go/onm00200497ave/direct/01/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8849-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 15:19:10 2004
Return-Path: <lucene-user-return-8849-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10668 invoked from network); 23 Jun 2004 15:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 15:19:10 -0000
Received: (qmail 66270 invoked by uid 500); 23 Jun 2004 15:18:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66157 invoked by uid 500); 23 Jun 2004 15:18:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66064 invoked by uid 99); 23 Jun 2004 15:18:52 -0000
Received: from [64.4.31.210] (HELO hotmail.com) (64.4.31.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 08:18:52 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 23 Jun 2004 08:18:37 -0700
Received: from 194.206.251.22 by bay13-dav36.bay13.hotmail.com with DAV;
	Wed, 23 Jun 2004 15:18:37 +0000
X-Originating-IP: [194.206.251.22]
X-Originating-Email: [ocatteau_lucene@hotmail.com]
X-Sender: ocatteau_lucene@hotmail.com
From: "Olivier Catteau" <ocatteau_lucene@hotmail.com>
To: <lucene-user@jakarta.apache.org>
Subject: How to use Highlighter concretly ?
Date: Wed, 23 Jun 2004 17:19:10 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_004A_01C45946.3274BA70"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Message-ID: <BAY13-DAV36r1qmd6wU000112f9@hotmail.com>
X-OriginalArrivalTime: 23 Jun 2004 15:18:37.0424 (UTC) FILETIME=[5B5DF700:01C45935]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_004A_01C45946.3274BA70
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi !

I'd like to use the Highlighter class to show a summury highlighted =
after a search. But I don't know how to use correctly the Highlighter =
class.
I found this piece of code which works well.


-------------------------------------------------------------------------=
-------

public class TestHighlighter {

public static void main(String[] args) {

try {

Analyzer a =3D new StandardAnalyzer();

Query q =3D QueryParser.parse("jennifer lopez", "cached", a);

String s =3D

"the unofficial home page Britney Spears Elizabeth Hurley Kirsten Dunst =
"

+ "Anna Kournikova Katie Holmes Katherine Heigl Jessica Alba Alyson =
Hannigan Jennifer "

+ "Lopez Sarah Michelle Gellar";

Highlighter highlighter =3D new Highlighter(new QueryScorer(q));

TokenStream tokenstream =3D

a.tokenStream("cached", new java.io.StringReader(s));

String summary =3D highlighter.getBestFragments(tokenstream, s, 2, =
"...");


System.out.println("summary : " + summary);

} catch(Exception e) {

e.printStackTrace();

}

}

}


-------------------------------------------------------------------------=
-------


But I don't know how to adapt it. In fact, I've made a search and I get =
a Hits instance. And now, I want to give a highlighted summury of each =
documents of the hits. So it must looks like this :

-------------------------------------------------------------------------=
-------

Highlighter highlighter;

TokenStream tokenstream;


for (int i =3D 0; i < hits.length(); i++) {

Document doc =3D hits.doc(i);


String contents =3D I DON'T KNOW HOW TO GET THE CONTENTS OF MY DOC


highlighter =3D new Highlighter(new QueryScorer(query));

tokenstream =3D analyzer.tokenStream("contents", new =
java.io.StringReader(contents));

String summary =3D highlighter.getBestFragments(tokenstream, contents, =
2, "...");

System.out.println("summary : " + summary);

}


-------------------------------------------------------------------------=
-------


Here is my questions. First, is it the good method to get a highlighted =
summury ? And if it is, how is the best way to get the contents of my =
document (the same way that I used to index their contents or another =
way ?) ?

(To be more precise, I use Lucene to index PDF, DOC, TXT. The size of =
these document could be about 5Mo.)

Thanks.

------=_NextPart_000_004A_01C45946.3274BA70--

From lucene-user-return-8850-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 15:27:53 2004
Return-Path: <lucene-user-return-8850-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16042 invoked from network); 23 Jun 2004 15:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 15:27:53 -0000
Received: (qmail 4539 invoked by uid 500); 23 Jun 2004 15:27:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4362 invoked by uid 500); 23 Jun 2004 15:27:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4191 invoked by uid 99); 23 Jun 2004 15:27:41 -0000
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 08:27:41 -0700
Message-ID: <20040623152719.6582.qmail@web12703.mail.yahoo.com>
Received: from [211.95.204.99] by web12703.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 08:27:19 PDT
Date: Wed, 23 Jun 2004 08:27:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to use Highlighter concretly ?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY13-DAV36r1qmd6wU000112f9@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Olivier,

You already have your Document instance from Hits.
Use Documents's get(String) method to get the content of the given
field.  Note that the Field MUST be stored, not just indexed.
For example

String text = doc.get("myStoredTextField");

See:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/document/Document.html#get(java.lang.String)

I suggest you comment out all Highligher-related code from your
application, and first make sure you know how to, and really can get
the contents of fields whose content you later want to highlight.

Add the Highligher code only after you get this first step working.

Otis

--- Olivier Catteau <ocatteau_lucene@hotmail.com> wrote:
> Hi !
> 
> I'd like to use the Highlighter class to show a summury highlighted
> after a search. But I don't know how to use correctly the Highlighter
> class.
> I found this piece of code which works well.
> 
> 
>
--------------------------------------------------------------------------------
> 
> public class TestHighlighter {
> 
> public static void main(String[] args) {
> 
> try {
> 
> Analyzer a = new StandardAnalyzer();
> 
> Query q = QueryParser.parse("jennifer lopez", "cached", a);
> 
> String s =
> 
> "the unofficial home page Britney Spears Elizabeth Hurley Kirsten
> Dunst "
> 
> + "Anna Kournikova Katie Holmes Katherine Heigl Jessica Alba Alyson
> Hannigan Jennifer "
> 
> + "Lopez Sarah Michelle Gellar";
> 
> Highlighter highlighter = new Highlighter(new QueryScorer(q));
> 
> TokenStream tokenstream =
> 
> a.tokenStream("cached", new java.io.StringReader(s));
> 
> String summary = highlighter.getBestFragments(tokenstream, s, 2,
> "...");
> 
> 
> System.out.println("summary : " + summary);
> 
> } catch(Exception e) {
> 
> e.printStackTrace();
> 
> }
> 
> }
> 
> }
> 
> 
>
--------------------------------------------------------------------------------
> 
> 
> But I don't know how to adapt it. In fact, I've made a search and I
> get a Hits instance. And now, I want to give a highlighted summury of
> each documents of the hits. So it must looks like this :
> 
>
--------------------------------------------------------------------------------
> 
> Highlighter highlighter;
> 
> TokenStream tokenstream;
> 
> 
> for (int i = 0; i < hits.length(); i++) {
> 
> Document doc = hits.doc(i);
> 
> 
> String contents = I DON'T KNOW HOW TO GET THE CONTENTS OF MY DOC
> 
> 
> highlighter = new Highlighter(new QueryScorer(query));
> 
> tokenstream = analyzer.tokenStream("contents", new
> java.io.StringReader(contents));
> 
> String summary = highlighter.getBestFragments(tokenstream, contents,
> 2, "...");
> 
> System.out.println("summary : " + summary);
> 
> }
> 
> 
>
--------------------------------------------------------------------------------
> 
> 
> Here is my questions. First, is it the good method to get a
> highlighted summury ? And if it is, how is the best way to get the
> contents of my document (the same way that I used to index their
> contents or another way ?) ?
> 
> (To be more precise, I use Lucene to index PDF, DOC, TXT. The size of
> these document could be about 5Mo.)
> 
> Thanks.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8851-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 18:34:14 2004
Return-Path: <lucene-user-return-8851-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25104 invoked from network); 23 Jun 2004 18:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 18:34:14 -0000
Received: (qmail 98229 invoked by uid 500); 23 Jun 2004 18:34:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98091 invoked by uid 500); 23 Jun 2004 18:34:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97965 invoked by uid 99); 23 Jun 2004 18:34:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.171.45] (HELO postfix.mail.ehatchersolutions.com) (128.143.171.45)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 11:34:13 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id ACC4279A908
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 14:33:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
Content-Transfer-Encoding: 7bit
Message-Id: <E01C148E-C543-11D8-80B7-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: JavaOne and Lucene
Date: Wed, 23 Jun 2004 14:33:52 -0400
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm presenting "Lucene in Action" Tuesday morning next week at JavaOne 
(TS-2994).

Any other Luceners going to JavaOne?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8852-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 18:51:35 2004
Return-Path: <lucene-user-return-8852-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36826 invoked from network); 23 Jun 2004 18:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 18:51:35 -0000
Received: (qmail 67758 invoked by uid 500); 23 Jun 2004 18:51:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67550 invoked by uid 500); 23 Jun 2004 18:51:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67384 invoked by uid 99); 23 Jun 2004 18:51:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 11:51:11 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i5NIoZH10244
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 19:50:42 +0100
Message-ID: <40D9D0EE.7090204@tropo.com>
Date: Wed, 23 Jun 2004 11:50:22 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: carrot2 - Re: Categorization
References: <20040623144822.62611.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040623144822.62611.qmail@web12702.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

> Hello William,
> 
> Lucene does not have a categorization engine, but you may want to look
> at Carrot2 (http://sourceforge.net/projects/carrot2/)

May be getting off topic - but maybe not..I can't find an example of how 
to use Carrot2. It builds easy enough, but there's no obvious example 
what it takes as input ("documents"?) and what it returns as output 
(some list of clustered docs?). I want to use the "local interface" to 
it and hook it into Lucene.

thx,
  Dave


> 
> Otis
> 
> --- William W <william_wws@hotmail.com> wrote:
> 
>>Hi,
>>How can I do a categorization of the results ? Is it possible with
>>the 
>>Lucene API ?
>>Thanks,
>>William.
>>
>>_________________________________________________________________
>>Watch the online reality show Mixed Messages with a friend and enter
>>to win 
>>a trip to NY 
>>
> 
> http://www.msnmessenger-download.click-url.com/go/onm00200497ave/direct/01/
> 
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8853-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 19:36:37 2004
Return-Path: <lucene-user-return-8853-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66985 invoked from network); 23 Jun 2004 19:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 19:36:37 -0000
Received: (qmail 21524 invoked by uid 500); 23 Jun 2004 19:35:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21333 invoked by uid 500); 23 Jun 2004 19:35:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21107 invoked by uid 99); 23 Jun 2004 19:35:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.4.27.88] (HELO hotmail.com) (64.4.27.88)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 12:35:42 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 23 Jun 2004 12:35:13 -0700
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Wed, 23 Jun 2004 19:35:13 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: RE: carrot2 - Re: Categorization
Date: Wed, 23 Jun 2004 19:35:13 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F8835PXp2H00YF0000de1a@hotmail.com>
X-OriginalArrivalTime: 23 Jun 2004 19:35:13.0581 (UTC) FILETIME=[343115D0:01C45959]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,
Carrot seems to be very interesting but I didn't find a simple example :(
I will try to use it ! :)

Thx,
william.


>From: David Spencer <dave-lucene-user@tropo.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: Lucene Users List <lucene-user@jakarta.apache.org>
>Subject: carrot2 - Re: Categorization
>Date: Wed, 23 Jun 2004 11:50:22 -0700
>
>Otis Gospodnetic wrote:
>
>>Hello William,
>>
>>Lucene does not have a categorization engine, but you may want to look
>>at Carrot2 (http://sourceforge.net/projects/carrot2/)
>
>May be getting off topic - but maybe not..I can't find an example of how to 
>use Carrot2. It builds easy enough, but there's no obvious example what it 
>takes as input ("documents"?) and what it returns as output (some list of 
>clustered docs?). I want to use the "local interface" to it and hook it 
>into Lucene.
>
>thx,
>  Dave
>
>
>>
>>Otis
>>
>>--- William W <william_wws@hotmail.com> wrote:
>>
>>>Hi,
>>>How can I do a categorization of the results ? Is it possible with
>>>the Lucene API ?
>>>Thanks,
>>>William.
>>>
>>>_________________________________________________________________
>>>Watch the online reality show Mixed Messages with a friend and enter
>>>to win a trip to NY
>>>
>>
>>http://www.msnmessenger-download.click-url.com/go/onm00200497ave/direct/01/
>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Get fast, reliable Internet access with MSN 9 Dial-up  now 3 months FREE! 
http://join.msn.click-url.com/go/onm00200361ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8854-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 19:39:46 2004
Return-Path: <lucene-user-return-8854-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68520 invoked from network); 23 Jun 2004 19:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 19:39:46 -0000
Received: (qmail 35604 invoked by uid 500); 23 Jun 2004 19:39:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35478 invoked by uid 500); 23 Jun 2004 19:39:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35439 invoked by uid 99); 23 Jun 2004 19:39:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.4.27.48] (HELO hotmail.com) (64.4.27.48)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 12:39:53 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 23 Jun 2004 12:39:24 -0700
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Wed, 23 Jun 2004 19:39:23 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: RE: JavaOne and Lucene
Date: Wed, 23 Jun 2004 19:39:23 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F48szPDCm5P27n0008e1c2@hotmail.com>
X-OriginalArrivalTime: 23 Jun 2004 19:39:24.0327 (UTC) FILETIME=[C9A5E370:01C45959]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Erik,
I would like to buy your book !:)
When, where....? :)

Thx,
William.

>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: Lucene User <lucene-user@jakarta.apache.org>
>Subject: JavaOne and Lucene
>Date: Wed, 23 Jun 2004 14:33:52 -0400
>
>I'm presenting "Lucene in Action" Tuesday morning next week at JavaOne 
>(TS-2994).
>
>Any other Luceners going to JavaOne?
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8855-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 20:11:27 2004
Return-Path: <lucene-user-return-8855-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81196 invoked from network); 23 Jun 2004 20:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 20:11:27 -0000
Received: (qmail 37260 invoked by uid 500); 23 Jun 2004 20:11:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37177 invoked by uid 500); 23 Jun 2004 20:11:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37098 invoked by uid 99); 23 Jun 2004 20:11:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 13:11:36 -0700
Message-ID: <20040623201105.50211.qmail@web12703.mail.yahoo.com>
Received: from [211.95.204.100] by web12703.mail.yahoo.com via HTTP; Wed, 23 Jun 2004 13:11:05 PDT
Date: Wed, 23 Jun 2004 13:11:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: JavaOne and Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY8-F48szPDCm5P27n0008e1c2@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

William, you'll have to wait until we finish it and publish it:
http://www.manning.com/catalog/view.php?book=hatcher2

Just a little more! :)
I am not sure if Manning (the publisher) can accept orders before the
book is out.

Otis


--- William W <william_wws@hotmail.com> wrote:
> 
> Hi Erik,
> I would like to buy your book !:)
> When, where....? :)
> 
> Thx,
> William.
> 
> >From: Erik Hatcher <erik@ehatchersolutions.com>
> >Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >To: Lucene User <lucene-user@jakarta.apache.org>
> >Subject: JavaOne and Lucene
> >Date: Wed, 23 Jun 2004 14:33:52 -0400
> >
> >I'm presenting "Lucene in Action" Tuesday morning next week at
> JavaOne 
> >(TS-2994).
> >
> >Any other Luceners going to JavaOne?
> >
> >	Erik
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> _________________________________________________________________
> Is your PC infected? Get a FREE online computer virus scan from
> McAfee 
> Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8856-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 21:40:36 2004
Return-Path: <lucene-user-return-8856-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27336 invoked from network); 23 Jun 2004 21:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 21:40:36 -0000
Received: (qmail 11590 invoked by uid 500); 23 Jun 2004 21:40:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11274 invoked by uid 500); 23 Jun 2004 21:40:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11167 invoked by uid 99); 23 Jun 2004 21:40:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 14:40:36 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i5NLdsH28361
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 22:40:01 +0100
Message-ID: <40D9F89E.7070803@tropo.com>
Date: Wed, 23 Jun 2004 14:39:42 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: carrot2 - Re: Categorization
References: <BAY8-F8835PXp2H00YF0000de1a@hotmail.com>
In-Reply-To: <BAY8-F8835PXp2H00YF0000de1a@hotmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

William W wrote:

> 
> Hi,
> Carrot seems to be very interesting but I didn't find a simple example :(
> I will try to use it ! :)

I can't find an example either, but after going through their source I 
think the heart of it is

com.dawidweiss.carrot.filter.stc.algorithm.STCEngine

and  com.dawidweiss.carrot.filter.stc.Processor is a class that drives this.

Lucene hook - hey - I'm trying to integrate the two. I think this is how 
it would be done, get search results from Lucene then set up STCEngine a 
la how Processor does.


> 
> Thx,
> william.
> 
> 
>> From: David Spencer <dave-lucene-user@tropo.com>
>> Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> To: Lucene Users List <lucene-user@jakarta.apache.org>
>> Subject: carrot2 - Re: Categorization
>> Date: Wed, 23 Jun 2004 11:50:22 -0700
>>
>> Otis Gospodnetic wrote:
>>
>>> Hello William,
>>>
>>> Lucene does not have a categorization engine, but you may want to look
>>> at Carrot2 (http://sourceforge.net/projects/carrot2/)
>>
>>
>> May be getting off topic - but maybe not..I can't find an example of 
>> how to use Carrot2. It builds easy enough, but there's no obvious 
>> example what it takes as input ("documents"?) and what it returns as 
>> output (some list of clustered docs?). I want to use the "local 
>> interface" to it and hook it into Lucene.
>>
>> thx,
>>  Dave
>>
>>
>>>
>>> Otis
>>>
>>> --- William W <william_wws@hotmail.com> wrote:
>>>
>>>> Hi,
>>>> How can I do a categorization of the results ? Is it possible with
>>>> the Lucene API ?
>>>> Thanks,
>>>> William.
>>>>
>>>> _________________________________________________________________
>>>> Watch the online reality show Mixed Messages with a friend and enter
>>>> to win a trip to NY
>>>>
>>>
>>> http://www.msnmessenger-download.click-url.com/go/onm00200497ave/direct/01/ 
>>>
>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> _________________________________________________________________
> Get fast, reliable Internet access with MSN 9 Dial-up  now 3 months 
> FREE! http://join.msn.click-url.com/go/onm00200361ave/direct/01/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8857-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 23 23:58:02 2004
Return-Path: <lucene-user-return-8857-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77053 invoked from network); 23 Jun 2004 23:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Jun 2004 23:58:02 -0000
Received: (qmail 52461 invoked by uid 500); 23 Jun 2004 23:58:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52380 invoked by uid 500); 23 Jun 2004 23:58:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52287 invoked by uid 99); 23 Jun 2004 23:58:14 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [212.122.43.181] (HELO zeus.rz1.connectline.net) (212.122.43.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 16:58:12 -0700
Received: from [192.168.1.3] (p213.54.47.133.tisdip.tiscali.de [213.54.47.133])
	by zeus.rz1.connectline.net (Postfix) with ESMTP id ED5E32B6A66
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 01:56:50 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v618)
Content-Transfer-Encoding: 7bit
Message-Id: <19E5502B-C571-11D8-B154-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Stefan Groschupf <sg@media-style.com>
Subject: term vector
Date: Thu, 24 Jun 2004 01:57:36 +0200
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
sorry, a stupid question,
Is there a best practice to get the term vector of an document?
Is there any experience to do any kind of feature selection for 
dimension reducing like zipf laws or getting tf/idf of a term for the 
complete corpora.

Thanks for any hints.
Stefan


---------------------------------------------------------------
enterprise information technology consulting
open technology:   http://www.media-style.com
open source:           http://www.weta-group.net
open discussion:    http://www.text-mining.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8858-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 00:30:36 2004
Return-Path: <lucene-user-return-8858-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85892 invoked from network); 24 Jun 2004 00:30:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 00:30:36 -0000
Received: (qmail 36421 invoked by uid 500); 24 Jun 2004 00:30:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36378 invoked by uid 500); 24 Jun 2004 00:30:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36362 invoked by uid 99); 24 Jun 2004 00:30:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [67.76.160.66] (HELO postfix.mail.ehatchersolutions.com) (67.76.160.66)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 17:30:45 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 4882879B810
	for <lucene-user@jakarta.apache.org>; Wed, 23 Jun 2004 20:30:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <19E5502B-C571-11D8-B154-000A95CDCC98@media-style.com>
References: <19E5502B-C571-11D8-B154-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A3E2D1C2-C575-11D8-8D2A-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: term vector
Date: Wed, 23 Jun 2004 20:30:05 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 23, 2004, at 7:57 PM, Stefan Groschupf wrote:
> Is there a best practice to get the term vector of an document?

You get term vectors by "field", not document.  As for best practice, 
there is really only one way to go about getting the term vectors:

         TermFreqVector termFreqVector =
             reader.getTermFreqVector(i, "subject");

where reader is an IndexReader and i is the document number.

> Is there any experience to do any kind of feature selection for 
> dimension reducing like zipf laws or getting tf/idf of a term for the 
> complete corpora.

Document frequency of a term is in the term info file (.tis) and 
available through TermEnum (see IndexReader.terms()).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8859-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 03:41:04 2004
Return-Path: <lucene-user-return-8859-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45496 invoked from network); 24 Jun 2004 03:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 03:41:04 -0000
Received: (qmail 3301 invoked by uid 500); 24 Jun 2004 03:41:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3184 invoked by uid 500); 24 Jun 2004 03:41:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3031 invoked by uid 99); 24 Jun 2004 03:41:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.241.36.12] (HELO mz1.forethought.net) (216.241.36.12)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 20:41:16 -0700
Received: from j72.denver.dsl.forethought.net ([216.241.38.72])
	by mz1.forethought.net with esmtp (Exim 4.30)
	id 1BdL6H-0001pv-68
	for lucene-user@jakarta.apache.org; Wed, 23 Jun 2004 21:40:33 -0600
From: Tatu Saloranta <tatu@hypermall.net>
Reply-To: tatu@hypermall.net
Organization: Linux-users missalie
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Storing data in Lucene or Xindice
Date: Wed, 23 Jun 2004 21:39:45 -0600
User-Agent: KMail/1.5
References: <20040623084330.68095.qmail@web12704.mail.yahoo.com>
In-Reply-To: <20040623084330.68095.qmail@web12704.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200406232139.46030.tatu@hypermall.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 23 June 2004 02:43, Otis Gospodnetic wrote:
> (redirecting to lucene-user list)
...
> For XML parsing and indexing, you can see the article I wrote for IBM
> developerWorks:
> http://www-106.ibm.com/developerworks/java/library/j-lucene/
>
> If you will be doing a lot of parsing, you will want to use something
> faster than Digester, though.  Maybe Electric XML parser.

You could also use a StAX-compliant parser (StAX is the 3rd somewhat official 
XML-parsing API for J2EE; JCP recently approved); implementation of which are 
as fast as SAX-parsers, but significantly easier to use, especially for 
things like extracting content. Combination is achieved by using fully 
streaming parsing, but in pull (as opposed to SAX' "push") mode, ie. don't 
call me, I'll call you ("inversion of inversion of control", IOIOC?)

You can go to:
http://stax-utils.dev.java.net/
to find more info, or google for something like "stax java". There are at 
least 2 publicly available open source implementations, and they should both 
work for simple XML content extraction (disclaimer: I wrote one of the 
implementations, so no comments on goodness etc; you should be able to find 
links from stax-utils page; if not, email me for details).

If anyone tries this approach, I'd be very interested in performance results,

-+ Tatu +-

> For HTML you can use NekoHTML, JTidy, htmlparser (sf.net), or Brian
> Goetz's HTMLParser.
>
> Now that I think about it, I seem to recall that Xindice uses Lucene
> under the hood.... I can't find any information that confirms this,
> now.  Maybe I'm mixing somehting up.
>
> Otis
>
> --- Rob Clews <robc@klearsystems.com> wrote:
> > Hi,
> >
> > I'm currently looking at using Lucene to index some XML feeds we
> > receive
> > for content. However, some of the feeds contain the articles contents
> > and some don't, the feeds that do contain the contents are in XML,
> > for
> > the others we must retrieve them in HTML.
> >
> > I was originally going to store the XML contents from the feed in
> > Xindice and retrieve them for each result from a Lucene query, but I
> > guess I could store them in Lucene. We expect to build up a lot of
> > content from shortish articles on the web and our main focus is
> > speed,
> > so would I be best storing the contents in Lucene or Xindice?
> >
> > Would storing more data (non-indexable) in Lucene slow it down on
> > queries?
> >
> > Thanks,
> > Rob Clews
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8860-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 05:56:51 2004
Return-Path: <lucene-user-return-8860-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54102 invoked from network); 24 Jun 2004 05:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 05:56:51 -0000
Received: (qmail 29621 invoked by uid 500); 24 Jun 2004 05:57:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29378 invoked by uid 500); 24 Jun 2004 05:57:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29223 invoked by uid 99); 24 Jun 2004 05:57:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 23 Jun 2004 22:56:58 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id HZSUDS00.K5Q for <lucene-user@jakarta.apache.org>; Thu,
          24 Jun 2004 11:38:16 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Delete Indexed from Merged Document
Date: Thu, 24 Jun 2004 11:35:17 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMEMDCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <69D276452CD2904980D5B6AC33C9BE170174DAF1@gtlbmlexs0006.bagmail.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



 Hello

 Mr  Wolf-Dietrich Materna

 Apologies on delay reply.

 I would like to have more of u' Help in this matter,
 Let me Explain the Setup I am Using in here...

1) I have "X" number of Unique Folders Which have around 50,000 Unique named
HTML Files.
2) The Indexing Field factor for each File in each folder is done on basis
of

  A)Name of File,
  B)Last modified Date
  C)Content of the file
  D)Folder in which the File is avaliable.


 At the end of the Week, Every Unique Indivigual Folder is Indexed
Indivigually in seperate folder.
 And at the end of Month These Unique Indexed Folders are  Merged  into one
file.


  So in any case If Iwant to Update the Existing Merged Folder,I have to
first delete from the Merged index
  on the basis of  Field type ( D as mentioned above) factor which is the
Unique Folder name,

  So u mean to say if I Delete from merged Index on the basis of  D, and
researching  of the Merged Index for the same
,the hits should return me 0 hits.


  Please advise me in this regard if I am not correct....



Thx in advance


-----Original Message-----
From: Wolf-Dietrich.Materna@empolis.com
[mailto:Wolf-Dietrich.Materna@empolis.com]
Sent: Wednesday, June 23, 2004 6:41 PM
To: lucene-user@jakarta.apache.org
Subject: AW: Delete Indexed from Merged Document


Hello,
> Karthik N S [mailto:karthik@controlnet.co.in] wrote:
> Hi
> Mr Wolf
Wolf-Dietrich is my first name, so leave out Mr. or use
my family name (which is uncommon here).

>	What is this
>
>     // remove the document from index
> 	int docID = hits.id(0);
>
>  and can I increment the "0" factor  in the bracket ...for deletion
Yes, but there is no reason to do this in this case.
You search for documents using their file name (including their full path!).
You get a result (some kind of list). Please read Java-Docs about Hits
class.
hits.id(0) returns the (internal) ID of the first hit in your result.
This is the document that you want to remove (using
indexReader.delete(...).).
There are no more documents in your result "hits" unless your key is not
unique.
hits.length() returns 0 or 1.
Regards,
	Wolf-Dietrich Materna

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8861-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 06:37:54 2004
Return-Path: <lucene-user-return-8861-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69677 invoked from network); 24 Jun 2004 06:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 06:37:54 -0000
Received: (qmail 49550 invoked by uid 500); 24 Jun 2004 06:38:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49487 invoked by uid 500); 24 Jun 2004 06:38:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49399 invoked by uid 99); 24 Jun 2004 06:38:17 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 23 Jun 2004 23:38:16 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id 3053383A6E
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 10:37:28 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 39787268 for lucene-user@jakarta.apache.org; Thu, 24 Jun 2004 10:37:28 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: ANN: Luke v. 0.5 released
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Thu, 24 Jun 2004 10:37:28 +0400
Message-ID: <web-39787268@mail5.rambler.ru>
In-Reply-To: <40D9446F.7080003@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Andrzej!

I am sorry for my English :-(
I with pleasure shall tell about the test and I shall try to state 
conditions of the test in detail.

>    I don't quite understand what you are saying... Do you suspect there is a bug in Luke somewhere on the Search tab? If >that's the case, please provide an example.


1. Search was made on an index with coding Cp1251.
2. Conditions of search:
      Analyzer to use for query parsing: 
org.apache.lucene.analysis.ru. RussianAnalyzer
      Default field is:contents

      2.1. Enter search expression here: (the coding 
windows-1251)
             Result: No Results 
      2.2. Enter search expression here:* (the coding 
windows-1251)
             Result: 1 doc (s), 
url: 
http://www.agnuz.info/result.php?year=2004&mounth1=March&day=26&files=v02.txt&print=news

What address to sent an index a file?

Regards,
Vladimir.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8862-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 07:34:25 2004
Return-Path: <lucene-user-return-8862-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7918 invoked from network); 24 Jun 2004 07:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 07:34:24 -0000
Received: (qmail 10275 invoked by uid 500); 24 Jun 2004 07:34:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10124 invoked by uid 500); 24 Jun 2004 07:34:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9983 invoked by uid 99); 24 Jun 2004 07:34:31 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 00:34:24 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5O7XVA20616
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 02:33:31 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 13:04:13 +0530
Message-ID: <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 13:00:24 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_009E_01C459EB.37102C90"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_009E_01C459EB.37102C90
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Guys,

I seem to have run into rough weather again.=20
To describe the problem as concisely as possible, I have four fields to =
search upon : title , first para, rest of the paras and content (equal =
to title + first para + rest of the para) .  I am doing this by using =
MultiFieldQueryParser.=20

Now there is a very complicated ranking algrorithm specified by the =
client and I have met most of them except one or two and really need =
your help as all my other efforts have failed.=20

The most important rule is that exact matching titles should come first =
, i.e. get higher scores.=20
I have given the highest boost factor to the title than the rest but the =
problem comes up when there is some other title which has got just one =
word matching. For e.g., if I search for lion, there is a title sea-lion =
which also has the same boost factor as that of "lion" in the index. =
Also, sea-lion has got some more "lion" in its first para or rest of the =
paras etc. such that its score comes higher than "lion".=20

Is there some way to get the exact matching titles higher scores?=20
Please reply soon.=20


Regards,
Niraj=20


----- Original Message -----=20
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 07, 2004 12:50 PM
Subject: Re: score and frequency


> It seems that you don't the length norm to be used. It's a factor =
which=20
> normalize the score of a doc depending on the size of the searched =
field=20
> of the doc. It's the field which make that 'ground ice' has a higher=20
> score than 'ice hockey: British Sekonda Superleague Play-Off=20
> Championship: finals' because it only has 2 terms.
> So, I suggest you to override the lengthNorm method and to ignore the=20
> numTokens parameter.
> NB: The length norm is computed during the indexation and the norm are =

> store in the index (in the _aaa.f# files). So, you need to do re-index =

> your data, and use this similarity during the indexation.
>=20
> Cheers,
> Franck
>=20
>=20
> Niraj Alok wrote:
> > I have set the searcher.setSimilarity  as well as also tried setting =
the
> > coord factor to 1.
> >=20
> > The problem as given by an example is : Lets say I have titles to be
> > displayed depending upon the search.
> > E.g if i have "ice hockey" as the search item and if it is default
> > similarity, my results are :
> >=20
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > winter Olympics: hockey, ice, medallists0.17402513
> > ice age0.073680125
> > National Hockey League0.020266924
> > Cracking the Ice Age0.018420031
> > ground-ice0.011512519
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.0069075115
> >  (the numbers indicating the score).
> >=20
> >=20
> > But if i set the similarity as my overridden one, the results =
become:
> > ice hockey0.99999994
> > ice hockey0.75
> > ice hockey0.75
> > ice age0.22104037
> > winter Olympics: hockey, ice, medallists0.17402513
> > National Hockey League0.060800765
> > Cracking the Ice Age0.055260092
> > ground-ice0.034537554
> > ice hockey: British Sekonda Superleague Play-Off Championship:
> > finals0.020722535
> >=20
> >=20
> > I want all the titles which have both "ice" and "hockey" to come =
above the
> > rest (to have higher scores)
> > Meaning i would wish the results to appear like:
> >=20
> > ice hockey
> > ice hockey
> > ice hockey
> > winter Olympics: hockey, ice, medallists
> > ice hockey: British Sekonda Superleague Play-Off Championship: =
finals
> > ice age
> > National Hockey League
> > Cracking the Ice Age
> > ground-ice
> >=20
> > My overriden similarity class contains just this method:
> > public float coord(int overlap, int maxOverlap) {
> >=20
> > return 1.0f;
> >=20
> > }
> >=20
> >=20
> >=20
> >=20
> >=20
> > I feel it is the weight factor which is producing indesirable =
results. Any
> > help in this regard would be highly appreciated.
> >=20
> > Regards,
> > Niraj
> >=20
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Friday, June 04, 2004 8:46 PM
> > Subject: Re: score and frequency
> >=20
> >=20
> >=20
> >>Hi,
> >>
> >>Be careful to set the default similarity
> >>'Similarity.setDefault(similarity)' before creating your search =
instance
> >>(IndexSearcher).
> >>If you change the default similarity after, you'll still use the old =
one.
> >>You'd better use the 'searcher.setSimilarity' method on your =
searcher.
> >>
> >>Franck
> >>
> >>
> >>Phil brunet wrote:
> >>
> >>>Hi to all.
> >>>
> >>>Maybe the term frequency is not the only parameter you need to =
override
> >>>to "customize" the score attributed by Lucene.
> >>>
> >>>Maybe you should consider the normalisation factor, the idf and the
> >>>coord factor ?
> >>>
> >>>Philippe
> >>>
> >>>
> >>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Subject: Re: score and frequency
> >>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>
> >>>>Hi Erik,
> >>>>
> >>>>Thanks for the suggestion.
> >>>>
> >>>>I tried this:
> >>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>
> >>>>{
> >>>>
> >>>>public float tf(float freq) {
> >>>>
> >>>>System.out.println("discounting frequency");
> >>>>
> >>>>return (float)1;
> >>>>
> >>>>}
> >>>>
> >>>>}
> >>>>
> >>>>
> >>>>
> >>>>and in my query class, I used :
> >>>>
> >>>>Similarity.setDefault(similarity);
> >>>>
> >>>>Hits hits =3D is.search(query);
> >>>>
> >>>>for(i =3D 0; i < hits.length(); i ++)
> >>>>
> >>>>  result =3D result + hits.score(i);
> >>>>
> >>>>
> >>>>
> >>>>However, this is still not giving me the expected result. Do I =
need to
> >=20
> > do
> >=20
> >>>>something else?
> >>>>
> >>>>
> >>>>Regards,
> >>>>Niraj
> >>>>
> >>>>----- Original Message -----
> >>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>Subject: Re: score and frequency
> >>>>
> >>>>
> >>>>
> >>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>
> >>>>>>Hi,
> >>>>>>
> >>>>>>I am having some problems with the score of lucene.
> >>>>>>I am trying to get the results displayed according to hits.score
> >=20
> > and
> >=20
> >>>>>>it is giving the results correctly.
> >>>>>>However I do not want the frequency factor to be used for the
> >>>>>>computation of the score.
> >>>>>>
> >>>>>>Is it possible to get the score which does not have the =
frequency
> >>>>>>factor in it ?
> >>>>>
> >>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> >=20
> > used
> >=20
> >>>>>unless otherwise specified.  You could subclass that and override
> >=20
> > this:
> >=20
> >>>>>   public float tf(float freq) {
> >>>>>     return (float)Math.sqrt(freq);
> >>>>>   }
> >>>>>
> >>>>>and return 1.0.  This might give you the effect you want.
> >>>>>
> >>>>>Erik
> >>>>>
> >>>>>
> =
>>>>>--------------------------------------------------------------------=
-
> >>>>>To unsubscribe, e-mail: =
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: =
lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> =
>>>>---------------------------------------------------------------------=

> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: =
lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>_________________________________________________________________
> >>>Bloquez les fen=EAtres pop-up, c'est gratuit ! =
http://toolbar.msn.fr
> >>>
> >>>
> =
>>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: =
lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> =
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >=20
> >=20
> >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >=20
>=20
>=20
> --=20
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20

------=_NextPart_000_009E_01C459EB.37102C90--




From lucene-user-return-8863-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 07:52:49 2004
Return-Path: <lucene-user-return-8863-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16661 invoked from network); 24 Jun 2004 07:52:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 07:52:49 -0000
Received: (qmail 63875 invoked by uid 500); 24 Jun 2004 07:53:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63733 invoked by uid 500); 24 Jun 2004 07:53:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63685 invoked by uid 99); 24 Jun 2004 07:53:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 00:53:07 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5O7qF1B012847
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 09:52:15 +0200
Message-ID: <40DA8820.5080602@kelkoo.net>
Date: Thu, 24 Jun 2004 09:52:00 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu>
In-Reply-To: <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
first, what do you consider as an 'exact matching' ? It seems that you 
treat the search word by word, so 'lion sea' will be an 'exact match' of 
'sea-lion'.
I think you should add a PhraseQuery to your query containing the title 
and with a big boost. So, you don't need to boost your title field. Only 
the results matching exactly (for the PhraseQuery) will be boosted.

Franck


Niraj Alok wrote:
> Hi Guys,
> 
> I seem to have run into rough weather again. 
> To describe the problem as concisely as possible, I have four fields to search upon : title , first para, rest of the paras and content (equal to title + first para + rest of the para) .  I am doing this by using MultiFieldQueryParser. 
> 
> Now there is a very complicated ranking algrorithm specified by the client and I have met most of them except one or two and really need your help as all my other efforts have failed. 
> 
> The most important rule is that exact matching titles should come first , i.e. get higher scores. 
> I have given the highest boost factor to the title than the rest but the problem comes up when there is some other title which has got just one word matching. For e.g., if I search for lion, there is a title sea-lion which also has the same boost factor as that of "lion" in the index. Also, sea-lion has got some more "lion" in its first para or rest of the paras etc. such that its score comes higher than "lion". 
> 
> Is there some way to get the exact matching titles higher scores? 
> Please reply soon. 
> 
> 
> Regards,
> Niraj 
> 
> 
> ----- Original Message ----- 
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Monday, June 07, 2004 12:50 PM
> Subject: Re: score and frequency
> 
> 
> 
>>It seems that you don't the length norm to be used. It's a factor which 
>>normalize the score of a doc depending on the size of the searched field 
>>of the doc. It's the field which make that 'ground ice' has a higher 
>>score than 'ice hockey: British Sekonda Superleague Play-Off 
>>Championship: finals' because it only has 2 terms.
>>So, I suggest you to override the lengthNorm method and to ignore the 
>>numTokens parameter.
>>NB: The length norm is computed during the indexation and the norm are 
>>store in the index (in the _aaa.f# files). So, you need to do re-index 
>>your data, and use this similarity during the indexation.
>>
>>Cheers,
>>Franck
>>
>>
>>Niraj Alok wrote:
>>
>>>I have set the searcher.setSimilarity  as well as also tried setting the
>>>coord factor to 1.
>>>
>>>The problem as given by an example is : Lets say I have titles to be
>>>displayed depending upon the search.
>>>E.g if i have "ice hockey" as the search item and if it is default
>>>similarity, my results are :
>>>
>>>ice hockey0.99999994
>>>ice hockey0.75
>>>ice hockey0.75
>>>winter Olympics: hockey, ice, medallists0.17402513
>>>ice age0.073680125
>>>National Hockey League0.020266924
>>>Cracking the Ice Age0.018420031
>>>ground-ice0.011512519
>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>finals0.0069075115
>>> (the numbers indicating the score).
>>>
>>>
>>>But if i set the similarity as my overridden one, the results become:
>>>ice hockey0.99999994
>>>ice hockey0.75
>>>ice hockey0.75
>>>ice age0.22104037
>>>winter Olympics: hockey, ice, medallists0.17402513
>>>National Hockey League0.060800765
>>>Cracking the Ice Age0.055260092
>>>ground-ice0.034537554
>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>finals0.020722535
>>>
>>>
>>>I want all the titles which have both "ice" and "hockey" to come above the
>>>rest (to have higher scores)
>>>Meaning i would wish the results to appear like:
>>>
>>>ice hockey
>>>ice hockey
>>>ice hockey
>>>winter Olympics: hockey, ice, medallists
>>>ice hockey: British Sekonda Superleague Play-Off Championship: finals
>>>ice age
>>>National Hockey League
>>>Cracking the Ice Age
>>>ground-ice
>>>
>>>My overriden similarity class contains just this method:
>>>public float coord(int overlap, int maxOverlap) {
>>>
>>>return 1.0f;
>>>
>>>}
>>>
>>>
>>>
>>>
>>>
>>>I feel it is the weight factor which is producing indesirable results. Any
>>>help in this regard would be highly appreciated.
>>>
>>>Regards,
>>>Niraj
>>>
>>>----- Original Message -----
>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Friday, June 04, 2004 8:46 PM
>>>Subject: Re: score and frequency
>>>
>>>
>>>
>>>
>>>>Hi,
>>>>
>>>>Be careful to set the default similarity
>>>>'Similarity.setDefault(similarity)' before creating your search instance
>>>>(IndexSearcher).
>>>>If you change the default similarity after, you'll still use the old one.
>>>>You'd better use the 'searcher.setSimilarity' method on your searcher.
>>>>
>>>>Franck
>>>>
>>>>
>>>>Phil brunet wrote:
>>>>
>>>>
>>>>>Hi to all.
>>>>>
>>>>>Maybe the term frequency is not the only parameter you need to override
>>>>>to "customize" the score attributed by Lucene.
>>>>>
>>>>>Maybe you should consider the normalisation factor, the idf and the
>>>>>coord factor ?
>>>>>
>>>>>Philippe
>>>>>
>>>>>
>>>>>
>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>Subject: Re: score and frequency
>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>>>
>>>>>>Hi Erik,
>>>>>>
>>>>>>Thanks for the suggestion.
>>>>>>
>>>>>>I tried this:
>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>>>
>>>>>>{
>>>>>>
>>>>>>public float tf(float freq) {
>>>>>>
>>>>>>System.out.println("discounting frequency");
>>>>>>
>>>>>>return (float)1;
>>>>>>
>>>>>>}
>>>>>>
>>>>>>}
>>>>>>
>>>>>>
>>>>>>
>>>>>>and in my query class, I used :
>>>>>>
>>>>>>Similarity.setDefault(similarity);
>>>>>>
>>>>>>Hits hits = is.search(query);
>>>>>>
>>>>>>for(i = 0; i < hits.length(); i ++)
>>>>>>
>>>>>> result = result + hits.score(i);
>>>>>>
>>>>>>
>>>>>>
>>>>>>However, this is still not giving me the expected result. Do I need to
>>>
>>>do
>>>
>>>
>>>>>>something else?
>>>>>>
>>>>>>
>>>>>>Regards,
>>>>>>Niraj
>>>>>>
>>>>>>----- Original Message -----
>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>>>Subject: Re: score and frequency
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>>>
>>>>>>>
>>>>>>>>Hi,
>>>>>>>>
>>>>>>>>I am having some problems with the score of lucene.
>>>>>>>>I am trying to get the results displayed according to hits.score
>>>
>>>and
>>>
>>>
>>>>>>>>it is giving the results correctly.
>>>>>>>>However I do not want the frequency factor to be used for the
>>>>>>>>computation of the score.
>>>>>>>>
>>>>>>>>Is it possible to get the score which does not have the frequency
>>>>>>>>factor in it ?
>>>>>>>
>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
>>>
>>>used
>>>
>>>
>>>>>>>unless otherwise specified.  You could subclass that and override
>>>
>>>this:
>>>
>>>
>>>>>>>  public float tf(float freq) {
>>>>>>>    return (float)Math.sqrt(freq);
>>>>>>>  }
>>>>>>>
>>>>>>>and return 1.0.  This might give you the effect you want.
>>>>>>>
>>>>>>>Erik
>>>>>>>
>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>---------------------------------------------------------------------
>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>
>>>>>_________________________________________________________________
>>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>
>>>>
>>>>--
>>>>Franck Brisbart
>>>>R&D
>>>>http://www.kelkoo.com
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>
>>>
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>>-- 
>>Franck Brisbart
>>R&D
>>http://www.kelkoo.com
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8864-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 08:34:24 2004
Return-Path: <lucene-user-return-8864-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35326 invoked from network); 24 Jun 2004 08:34:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 08:34:23 -0000
Received: (qmail 78271 invoked by uid 500); 24 Jun 2004 08:34:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78146 invoked by uid 500); 24 Jun 2004 08:34:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78097 invoked by uid 99); 24 Jun 2004 08:34:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 01:34:41 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5O8XiA22658
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 03:33:44 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 14:03:53 +0530
Message-ID: <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 14:00:04 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does it mean that I would need to abandon MultiFieldQueryParser?

Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 1:22 PM
Subject: Re: score and frequency


> Hi,
> first, what do you consider as an 'exact matching' ? It seems that you
> treat the search word by word, so 'lion sea' will be an 'exact match' of
> 'sea-lion'.
> I think you should add a PhraseQuery to your query containing the title
> and with a big boost. So, you don't need to boost your title field. Only
> the results matching exactly (for the PhraseQuery) will be boosted.
>
> Franck
>
>
> Niraj Alok wrote:
> > Hi Guys,
> >
> > I seem to have run into rough weather again.
> > To describe the problem as concisely as possible, I have four fields to
search upon : title , first para, rest of the paras and content (equal to
title + first para + rest of the para) .  I am doing this by using
MultiFieldQueryParser.
> >
> > Now there is a very complicated ranking algrorithm specified by the
client and I have met most of them except one or two and really need your
help as all my other efforts have failed.
> >
> > The most important rule is that exact matching titles should come first
, i.e. get higher scores.
> > I have given the highest boost factor to the title than the rest but the
problem comes up when there is some other title which has got just one word
matching. For e.g., if I search for lion, there is a title sea-lion which
also has the same boost factor as that of "lion" in the index. Also,
sea-lion has got some more "lion" in its first para or rest of the paras
etc. such that its score comes higher than "lion".
> >
> > Is there some way to get the exact matching titles higher scores?
> > Please reply soon.
> >
> >
> > Regards,
> > Niraj
> >
> >
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Monday, June 07, 2004 12:50 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>It seems that you don't the length norm to be used. It's a factor which
> >>normalize the score of a doc depending on the size of the searched field
> >>of the doc. It's the field which make that 'ground ice' has a higher
> >>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>Championship: finals' because it only has 2 terms.
> >>So, I suggest you to override the lengthNorm method and to ignore the
> >>numTokens parameter.
> >>NB: The length norm is computed during the indexation and the norm are
> >>store in the index (in the _aaa.f# files). So, you need to do re-index
> >>your data, and use this similarity during the indexation.
> >>
> >>Cheers,
> >>Franck
> >>
> >>
> >>Niraj Alok wrote:
> >>
> >>>I have set the searcher.setSimilarity  as well as also tried setting
the
> >>>coord factor to 1.
> >>>
> >>>The problem as given by an example is : Lets say I have titles to be
> >>>displayed depending upon the search.
> >>>E.g if i have "ice hockey" as the search item and if it is default
> >>>similarity, my results are :
> >>>
> >>>ice hockey0.99999994
> >>>ice hockey0.75
> >>>ice hockey0.75
> >>>winter Olympics: hockey, ice, medallists0.17402513
> >>>ice age0.073680125
> >>>National Hockey League0.020266924
> >>>Cracking the Ice Age0.018420031
> >>>ground-ice0.011512519
> >>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>finals0.0069075115
> >>> (the numbers indicating the score).
> >>>
> >>>
> >>>But if i set the similarity as my overridden one, the results become:
> >>>ice hockey0.99999994
> >>>ice hockey0.75
> >>>ice hockey0.75
> >>>ice age0.22104037
> >>>winter Olympics: hockey, ice, medallists0.17402513
> >>>National Hockey League0.060800765
> >>>Cracking the Ice Age0.055260092
> >>>ground-ice0.034537554
> >>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>finals0.020722535
> >>>
> >>>
> >>>I want all the titles which have both "ice" and "hockey" to come above
the
> >>>rest (to have higher scores)
> >>>Meaning i would wish the results to appear like:
> >>>
> >>>ice hockey
> >>>ice hockey
> >>>ice hockey
> >>>winter Olympics: hockey, ice, medallists
> >>>ice hockey: British Sekonda Superleague Play-Off Championship: finals
> >>>ice age
> >>>National Hockey League
> >>>Cracking the Ice Age
> >>>ground-ice
> >>>
> >>>My overriden similarity class contains just this method:
> >>>public float coord(int overlap, int maxOverlap) {
> >>>
> >>>return 1.0f;
> >>>
> >>>}
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>I feel it is the weight factor which is producing indesirable results.
Any
> >>>help in this regard would be highly appreciated.
> >>>
> >>>Regards,
> >>>Niraj
> >>>
> >>>----- Original Message -----
> >>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>Sent: Friday, June 04, 2004 8:46 PM
> >>>Subject: Re: score and frequency
> >>>
> >>>
> >>>
> >>>
> >>>>Hi,
> >>>>
> >>>>Be careful to set the default similarity
> >>>>'Similarity.setDefault(similarity)' before creating your search
instance
> >>>>(IndexSearcher).
> >>>>If you change the default similarity after, you'll still use the old
one.
> >>>>You'd better use the 'searcher.setSimilarity' method on your searcher.
> >>>>
> >>>>Franck
> >>>>
> >>>>
> >>>>Phil brunet wrote:
> >>>>
> >>>>
> >>>>>Hi to all.
> >>>>>
> >>>>>Maybe the term frequency is not the only parameter you need to
override
> >>>>>to "customize" the score attributed by Lucene.
> >>>>>
> >>>>>Maybe you should consider the normalisation factor, the idf and the
> >>>>>coord factor ?
> >>>>>
> >>>>>Philippe
> >>>>>
> >>>>>
> >>>>>
> >>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>Subject: Re: score and frequency
> >>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>
> >>>>>>Hi Erik,
> >>>>>>
> >>>>>>Thanks for the suggestion.
> >>>>>>
> >>>>>>I tried this:
> >>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>
> >>>>>>{
> >>>>>>
> >>>>>>public float tf(float freq) {
> >>>>>>
> >>>>>>System.out.println("discounting frequency");
> >>>>>>
> >>>>>>return (float)1;
> >>>>>>
> >>>>>>}
> >>>>>>
> >>>>>>}
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>and in my query class, I used :
> >>>>>>
> >>>>>>Similarity.setDefault(similarity);
> >>>>>>
> >>>>>>Hits hits = is.search(query);
> >>>>>>
> >>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>
> >>>>>> result = result + hits.score(i);
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>However, this is still not giving me the expected result. Do I need
to
> >>>
> >>>do
> >>>
> >>>
> >>>>>>something else?
> >>>>>>
> >>>>>>
> >>>>>>Regards,
> >>>>>>Niraj
> >>>>>>
> >>>>>>----- Original Message -----
> >>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>Subject: Re: score and frequency
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>>>Hi,
> >>>>>>>>
> >>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>I am trying to get the results displayed according to hits.score
> >>>
> >>>and
> >>>
> >>>
> >>>>>>>>it is giving the results correctly.
> >>>>>>>>However I do not want the frequency factor to be used for the
> >>>>>>>>computation of the score.
> >>>>>>>>
> >>>>>>>>Is it possible to get the score which does not have the frequency
> >>>>>>>>factor in it ?
> >>>>>>>
> >>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> >>>
> >>>used
> >>>
> >>>
> >>>>>>>unless otherwise specified.  You could subclass that and override
> >>>
> >>>this:
> >>>
> >>>
> >>>>>>>  public float tf(float freq) {
> >>>>>>>    return (float)Math.sqrt(freq);
> >>>>>>>  }
> >>>>>>>
> >>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>
> >>>>>>>Erik
> >>>>>>>
> >>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>
> >>>>>_________________________________________________________________
> >>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>--
> >>>>Franck Brisbart
> >>>>R&D
> >>>>http://www.kelkoo.com
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8865-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 08:40:24 2004
Return-Path: <lucene-user-return-8865-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37734 invoked from network); 24 Jun 2004 08:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 08:40:24 -0000
Received: (qmail 93881 invoked by uid 500); 24 Jun 2004 08:40:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93634 invoked by uid 500); 24 Jun 2004 08:40:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93560 invoked by uid 99); 24 Jun 2004 08:40:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 01:40:42 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5O8dmA22966
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 03:39:48 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 14:09:49 +0530
Message-ID: <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 14:06:00 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I asked the previous question since I do not know how to use PhraseQuery

I have one booleanquery and one query.
The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
flags, new StandardAnalyzer(stop));

where qs is the word to be searched upon and searchLoc contains all the four
fields.

How do I insert a PhraseQuery here for title field only, and that too with
its boosted value?


Regards,
Niraj
----- Original Message -----
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 2:00 PM
Subject: Re: score and frequency


> Does it mean that I would need to abandon MultiFieldQueryParser?
>
> Regards,
> Niraj
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 1:22 PM
> Subject: Re: score and frequency
>
>
> > Hi,
> > first, what do you consider as an 'exact matching' ? It seems that you
> > treat the search word by word, so 'lion sea' will be an 'exact match' of
> > 'sea-lion'.
> > I think you should add a PhraseQuery to your query containing the title
> > and with a big boost. So, you don't need to boost your title field. Only
> > the results matching exactly (for the PhraseQuery) will be boosted.
> >
> > Franck
> >
> >
> > Niraj Alok wrote:
> > > Hi Guys,
> > >
> > > I seem to have run into rough weather again.
> > > To describe the problem as concisely as possible, I have four fields
to
> search upon : title , first para, rest of the paras and content (equal to
> title + first para + rest of the para) .  I am doing this by using
> MultiFieldQueryParser.
> > >
> > > Now there is a very complicated ranking algrorithm specified by the
> client and I have met most of them except one or two and really need your
> help as all my other efforts have failed.
> > >
> > > The most important rule is that exact matching titles should come
first
> , i.e. get higher scores.
> > > I have given the highest boost factor to the title than the rest but
the
> problem comes up when there is some other title which has got just one
word
> matching. For e.g., if I search for lion, there is a title sea-lion which
> also has the same boost factor as that of "lion" in the index. Also,
> sea-lion has got some more "lion" in its first para or rest of the paras
> etc. such that its score comes higher than "lion".
> > >
> > > Is there some way to get the exact matching titles higher scores?
> > > Please reply soon.
> > >
> > >
> > > Regards,
> > > Niraj
> > >
> > >
> > > ----- Original Message -----
> > > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > Sent: Monday, June 07, 2004 12:50 PM
> > > Subject: Re: score and frequency
> > >
> > >
> > >
> > >>It seems that you don't the length norm to be used. It's a factor
which
> > >>normalize the score of a doc depending on the size of the searched
field
> > >>of the doc. It's the field which make that 'ground ice' has a higher
> > >>score than 'ice hockey: British Sekonda Superleague Play-Off
> > >>Championship: finals' because it only has 2 terms.
> > >>So, I suggest you to override the lengthNorm method and to ignore the
> > >>numTokens parameter.
> > >>NB: The length norm is computed during the indexation and the norm are
> > >>store in the index (in the _aaa.f# files). So, you need to do re-index
> > >>your data, and use this similarity during the indexation.
> > >>
> > >>Cheers,
> > >>Franck
> > >>
> > >>
> > >>Niraj Alok wrote:
> > >>
> > >>>I have set the searcher.setSimilarity  as well as also tried setting
> the
> > >>>coord factor to 1.
> > >>>
> > >>>The problem as given by an example is : Lets say I have titles to be
> > >>>displayed depending upon the search.
> > >>>E.g if i have "ice hockey" as the search item and if it is default
> > >>>similarity, my results are :
> > >>>
> > >>>ice hockey0.99999994
> > >>>ice hockey0.75
> > >>>ice hockey0.75
> > >>>winter Olympics: hockey, ice, medallists0.17402513
> > >>>ice age0.073680125
> > >>>National Hockey League0.020266924
> > >>>Cracking the Ice Age0.018420031
> > >>>ground-ice0.011512519
> > >>>ice hockey: British Sekonda Superleague Play-Off Championship:
> > >>>finals0.0069075115
> > >>> (the numbers indicating the score).
> > >>>
> > >>>
> > >>>But if i set the similarity as my overridden one, the results become:
> > >>>ice hockey0.99999994
> > >>>ice hockey0.75
> > >>>ice hockey0.75
> > >>>ice age0.22104037
> > >>>winter Olympics: hockey, ice, medallists0.17402513
> > >>>National Hockey League0.060800765
> > >>>Cracking the Ice Age0.055260092
> > >>>ground-ice0.034537554
> > >>>ice hockey: British Sekonda Superleague Play-Off Championship:
> > >>>finals0.020722535
> > >>>
> > >>>
> > >>>I want all the titles which have both "ice" and "hockey" to come
above
> the
> > >>>rest (to have higher scores)
> > >>>Meaning i would wish the results to appear like:
> > >>>
> > >>>ice hockey
> > >>>ice hockey
> > >>>ice hockey
> > >>>winter Olympics: hockey, ice, medallists
> > >>>ice hockey: British Sekonda Superleague Play-Off Championship: finals
> > >>>ice age
> > >>>National Hockey League
> > >>>Cracking the Ice Age
> > >>>ground-ice
> > >>>
> > >>>My overriden similarity class contains just this method:
> > >>>public float coord(int overlap, int maxOverlap) {
> > >>>
> > >>>return 1.0f;
> > >>>
> > >>>}
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>I feel it is the weight factor which is producing indesirable
results.
> Any
> > >>>help in this regard would be highly appreciated.
> > >>>
> > >>>Regards,
> > >>>Niraj
> > >>>
> > >>>----- Original Message -----
> > >>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > >>>Sent: Friday, June 04, 2004 8:46 PM
> > >>>Subject: Re: score and frequency
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>>Hi,
> > >>>>
> > >>>>Be careful to set the default similarity
> > >>>>'Similarity.setDefault(similarity)' before creating your search
> instance
> > >>>>(IndexSearcher).
> > >>>>If you change the default similarity after, you'll still use the old
> one.
> > >>>>You'd better use the 'searcher.setSimilarity' method on your
searcher.
> > >>>>
> > >>>>Franck
> > >>>>
> > >>>>
> > >>>>Phil brunet wrote:
> > >>>>
> > >>>>
> > >>>>>Hi to all.
> > >>>>>
> > >>>>>Maybe the term frequency is not the only parameter you need to
> override
> > >>>>>to "customize" the score attributed by Lucene.
> > >>>>>
> > >>>>>Maybe you should consider the normalisation factor, the idf and the
> > >>>>>coord factor ?
> > >>>>>
> > >>>>>Philippe
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> > >>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > >>>>>>Subject: Re: score and frequency
> > >>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> > >>>>>>
> > >>>>>>Hi Erik,
> > >>>>>>
> > >>>>>>Thanks for the suggestion.
> > >>>>>>
> > >>>>>>I tried this:
> > >>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> > >>>>>>
> > >>>>>>{
> > >>>>>>
> > >>>>>>public float tf(float freq) {
> > >>>>>>
> > >>>>>>System.out.println("discounting frequency");
> > >>>>>>
> > >>>>>>return (float)1;
> > >>>>>>
> > >>>>>>}
> > >>>>>>
> > >>>>>>}
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>and in my query class, I used :
> > >>>>>>
> > >>>>>>Similarity.setDefault(similarity);
> > >>>>>>
> > >>>>>>Hits hits = is.search(query);
> > >>>>>>
> > >>>>>>for(i = 0; i < hits.length(); i ++)
> > >>>>>>
> > >>>>>> result = result + hits.score(i);
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>However, this is still not giving me the expected result. Do I
need
> to
> > >>>
> > >>>do
> > >>>
> > >>>
> > >>>>>>something else?
> > >>>>>>
> > >>>>>>
> > >>>>>>Regards,
> > >>>>>>Niraj
> > >>>>>>
> > >>>>>>----- Original Message -----
> > >>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> > >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > >>>>>>Sent: Friday, June 04, 2004 1:55 PM
> > >>>>>>Subject: Re: score and frequency
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> > >>>>>>>
> > >>>>>>>
> > >>>>>>>>Hi,
> > >>>>>>>>
> > >>>>>>>>I am having some problems with the score of lucene.
> > >>>>>>>>I am trying to get the results displayed according to hits.score
> > >>>
> > >>>and
> > >>>
> > >>>
> > >>>>>>>>it is giving the results correctly.
> > >>>>>>>>However I do not want the frequency factor to be used for the
> > >>>>>>>>computation of the score.
> > >>>>>>>>
> > >>>>>>>>Is it possible to get the score which does not have the
frequency
> > >>>>>>>>factor in it ?
> > >>>>>>>
> > >>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
> > >>>
> > >>>used
> > >>>
> > >>>
> > >>>>>>>unless otherwise specified.  You could subclass that and override
> > >>>
> > >>>this:
> > >>>
> > >>>
> > >>>>>>>  public float tf(float freq) {
> > >>>>>>>    return (float)Math.sqrt(freq);
> > >>>>>>>  }
> > >>>>>>>
> > >>>>>>>and return 1.0.  This might give you the effect you want.
> > >>>>>>>
> > >>>>>>>Erik
> > >>>>>>>
> > >>>>>>>
> >
>
>>>>>>>---------------------------------------------------------------------
> > >>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> > >>>>>>>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >>>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> >
>
>>>>>>---------------------------------------------------------------------
> > >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> > >>>>>>
> > >>>>>
> > >>>>>_________________________________________________________________
> > >>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> > >>>>>
> > >>>>>
> >
>>>>>---------------------------------------------------------------------
> > >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> > >>>>>
> > >>>>
> > >>>>
> > >>>>--
> > >>>>Franck Brisbart
> > >>>>R&D
> > >>>>http://www.kelkoo.com
> > >>>>
> > >>>>
> >
>>>>---------------------------------------------------------------------
> > >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >>>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>---------------------------------------------------------------------
> > >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >>>
> > >>
> > >>
> > >>--
> > >>Franck Brisbart
> > >>R&D
> > >>http://www.kelkoo.com
> > >>
> > >>
> > >>---------------------------------------------------------------------
> > >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> > >
> >
> >
> > --
> > Franck Brisbart
> > R&D
> > http://www.kelkoo.com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8866-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 09:25:32 2004
Return-Path: <lucene-user-return-8866-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63508 invoked from network); 24 Jun 2004 09:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 09:25:32 -0000
Received: (qmail 17760 invoked by uid 500); 24 Jun 2004 09:25:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17548 invoked by uid 500); 24 Jun 2004 09:25:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17396 invoked by uid 99); 24 Jun 2004 09:25:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 02:25:45 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5O9Opqf018669
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 11:24:51 +0200
Message-ID: <40DA9DD4.30406@kelkoo.net>
Date: Thu, 24 Jun 2004 11:24:36 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu>
In-Reply-To: <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The MultiFieldQueryParser give you a BooleanQuery containing 1 query for 
each field.
Something like:
            BooleanQuery
            /   |   |   \
          QF1  QF2 QF3  QF4    (QFx=Query for field x)

You can still use the MultiFieldQueryParser and create a BooleanQuery to 
encapsulate the one parsed + the PhraseQuery, ie:
             BooleanQuery(created by you)
              /       \
            BQ      PhraseQuery

Or create the whole query (I think you should do that) and have 
something like that:
             _BooleanQuery__
            /   |   |   \   \
          QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)

It's like parsing the following query:
(field1:query) (field2:query) (field3:query)...(fieldx:query) 
(title:"query")~boost


Franck


Niraj Alok wrote:
> I asked the previous question since I do not know how to use PhraseQuery
> 
> I have one booleanquery and one query.
> The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
> flags, new StandardAnalyzer(stop));
> 
> where qs is the word to be searched upon and searchLoc contains all the four
> fields.
> 
> How do I insert a PhraseQuery here for title field only, and that too with
> its boosted value?
> 
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Niraj Alok" <niraj@emacmillan.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 2:00 PM
> Subject: Re: score and frequency
> 
> 
> 
>>Does it mean that I would need to abandon MultiFieldQueryParser?
>>
>>Regards,
>>Niraj
>>----- Original Message -----
>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>Sent: Thursday, June 24, 2004 1:22 PM
>>Subject: Re: score and frequency
>>
>>
>>
>>>Hi,
>>>first, what do you consider as an 'exact matching' ? It seems that you
>>>treat the search word by word, so 'lion sea' will be an 'exact match' of
>>>'sea-lion'.
>>>I think you should add a PhraseQuery to your query containing the title
>>>and with a big boost. So, you don't need to boost your title field. Only
>>>the results matching exactly (for the PhraseQuery) will be boosted.
>>>
>>>Franck
>>>
>>>
>>>Niraj Alok wrote:
>>>
>>>>Hi Guys,
>>>>
>>>>I seem to have run into rough weather again.
>>>>To describe the problem as concisely as possible, I have four fields
> 
> to
> 
>>search upon : title , first para, rest of the paras and content (equal to
>>title + first para + rest of the para) .  I am doing this by using
>>MultiFieldQueryParser.
>>
>>>>Now there is a very complicated ranking algrorithm specified by the
>>
>>client and I have met most of them except one or two and really need your
>>help as all my other efforts have failed.
>>
>>>>The most important rule is that exact matching titles should come
> 
> first
> 
>>, i.e. get higher scores.
>>
>>>>I have given the highest boost factor to the title than the rest but
> 
> the
> 
>>problem comes up when there is some other title which has got just one
> 
> word
> 
>>matching. For e.g., if I search for lion, there is a title sea-lion which
>>also has the same boost factor as that of "lion" in the index. Also,
>>sea-lion has got some more "lion" in its first para or rest of the paras
>>etc. such that its score comes higher than "lion".
>>
>>>>Is there some way to get the exact matching titles higher scores?
>>>>Please reply soon.
>>>>
>>>>
>>>>Regards,
>>>>Niraj
>>>>
>>>>
>>>>----- Original Message -----
>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>Sent: Monday, June 07, 2004 12:50 PM
>>>>Subject: Re: score and frequency
>>>>
>>>>
>>>>
>>>>
>>>>>It seems that you don't the length norm to be used. It's a factor
> 
> which
> 
>>>>>normalize the score of a doc depending on the size of the searched
> 
> field
> 
>>>>>of the doc. It's the field which make that 'ground ice' has a higher
>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
>>>>>Championship: finals' because it only has 2 terms.
>>>>>So, I suggest you to override the lengthNorm method and to ignore the
>>>>>numTokens parameter.
>>>>>NB: The length norm is computed during the indexation and the norm are
>>>>>store in the index (in the _aaa.f# files). So, you need to do re-index
>>>>>your data, and use this similarity during the indexation.
>>>>>
>>>>>Cheers,
>>>>>Franck
>>>>>
>>>>>
>>>>>Niraj Alok wrote:
>>>>>
>>>>>
>>>>>>I have set the searcher.setSimilarity  as well as also tried setting
>>
>>the
>>
>>>>>>coord factor to 1.
>>>>>>
>>>>>>The problem as given by an example is : Lets say I have titles to be
>>>>>>displayed depending upon the search.
>>>>>>E.g if i have "ice hockey" as the search item and if it is default
>>>>>>similarity, my results are :
>>>>>>
>>>>>>ice hockey0.99999994
>>>>>>ice hockey0.75
>>>>>>ice hockey0.75
>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>ice age0.073680125
>>>>>>National Hockey League0.020266924
>>>>>>Cracking the Ice Age0.018420031
>>>>>>ground-ice0.011512519
>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>finals0.0069075115
>>>>>>(the numbers indicating the score).
>>>>>>
>>>>>>
>>>>>>But if i set the similarity as my overridden one, the results become:
>>>>>>ice hockey0.99999994
>>>>>>ice hockey0.75
>>>>>>ice hockey0.75
>>>>>>ice age0.22104037
>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>National Hockey League0.060800765
>>>>>>Cracking the Ice Age0.055260092
>>>>>>ground-ice0.034537554
>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>finals0.020722535
>>>>>>
>>>>>>
>>>>>>I want all the titles which have both "ice" and "hockey" to come
> 
> above
> 
>>the
>>
>>>>>>rest (to have higher scores)
>>>>>>Meaning i would wish the results to appear like:
>>>>>>
>>>>>>ice hockey
>>>>>>ice hockey
>>>>>>ice hockey
>>>>>>winter Olympics: hockey, ice, medallists
>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship: finals
>>>>>>ice age
>>>>>>National Hockey League
>>>>>>Cracking the Ice Age
>>>>>>ground-ice
>>>>>>
>>>>>>My overriden similarity class contains just this method:
>>>>>>public float coord(int overlap, int maxOverlap) {
>>>>>>
>>>>>>return 1.0f;
>>>>>>
>>>>>>}
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>I feel it is the weight factor which is producing indesirable
> 
> results.
> 
>>Any
>>
>>>>>>help in this regard would be highly appreciated.
>>>>>>
>>>>>>Regards,
>>>>>>Niraj
>>>>>>
>>>>>>----- Original Message -----
>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>Sent: Friday, June 04, 2004 8:46 PM
>>>>>>Subject: Re: score and frequency
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>>Hi,
>>>>>>>
>>>>>>>Be careful to set the default similarity
>>>>>>>'Similarity.setDefault(similarity)' before creating your search
>>
>>instance
>>
>>>>>>>(IndexSearcher).
>>>>>>>If you change the default similarity after, you'll still use the old
>>
>>one.
>>
>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> 
> searcher.
> 
>>>>>>>Franck
>>>>>>>
>>>>>>>
>>>>>>>Phil brunet wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>Hi to all.
>>>>>>>>
>>>>>>>>Maybe the term frequency is not the only parameter you need to
>>
>>override
>>
>>>>>>>>to "customize" the score attributed by Lucene.
>>>>>>>>
>>>>>>>>Maybe you should consider the normalisation factor, the idf and the
>>>>>>>>coord factor ?
>>>>>>>>
>>>>>>>>Philippe
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>>>>>>
>>>>>>>>>Hi Erik,
>>>>>>>>>
>>>>>>>>>Thanks for the suggestion.
>>>>>>>>>
>>>>>>>>>I tried this:
>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>>>>>>
>>>>>>>>>{
>>>>>>>>>
>>>>>>>>>public float tf(float freq) {
>>>>>>>>>
>>>>>>>>>System.out.println("discounting frequency");
>>>>>>>>>
>>>>>>>>>return (float)1;
>>>>>>>>>
>>>>>>>>>}
>>>>>>>>>
>>>>>>>>>}
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>and in my query class, I used :
>>>>>>>>>
>>>>>>>>>Similarity.setDefault(similarity);
>>>>>>>>>
>>>>>>>>>Hits hits = is.search(query);
>>>>>>>>>
>>>>>>>>>for(i = 0; i < hits.length(); i ++)
>>>>>>>>>
>>>>>>>>>result = result + hits.score(i);
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>However, this is still not giving me the expected result. Do I
> 
> need
> 
>>to
>>
>>>>>>do
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>something else?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>Regards,
>>>>>>>>>Niraj
>>>>>>>>>
>>>>>>>>>----- Original Message -----
>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>Hi,
>>>>>>>>>>>
>>>>>>>>>>>I am having some problems with the score of lucene.
>>>>>>>>>>>I am trying to get the results displayed according to hits.score
>>>>>>
>>>>>>and
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>>it is giving the results correctly.
>>>>>>>>>>>However I do not want the frequency factor to be used for the
>>>>>>>>>>>computation of the score.
>>>>>>>>>>>
>>>>>>>>>>>Is it possible to get the score which does not have the
> 
> frequency
> 
>>>>>>>>>>>factor in it ?
>>>>>>>>>>
>>>>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity is
>>>>>>
>>>>>>used
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>unless otherwise specified.  You could subclass that and override
>>>>>>
>>>>>>this:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>> public float tf(float freq) {
>>>>>>>>>>   return (float)Math.sqrt(freq);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>>and return 1.0.  This might give you the effect you want.
>>>>>>>>>>
>>>>>>>>>>Erik
>>>>>>>>>>
>>>>>>>>>>
>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>For additional commands, e-mail:
>>
>>lucene-user-help@jakarta.apache.org
>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>
>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>>_________________________________________________________________
>>>>>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
>>>>>>>>
>>>>>>>>
>>>
>>>>>>---------------------------------------------------------------------
>>>>>>
>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>
>>>>>>>--
>>>>>>>Franck Brisbart
>>>>>>>R&D
>>>>>>>http://www.kelkoo.com
>>>>>>>
>>>>>>>
>>>
>>>>>---------------------------------------------------------------------
>>>>>
>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>---------------------------------------------------------------------
>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>--
>>>>>Franck Brisbart
>>>>>R&D
>>>>>http://www.kelkoo.com
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>
>>>--
>>>Franck Brisbart
>>>R&D
>>>http://www.kelkoo.com
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8867-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 10:35:21 2004
Return-Path: <lucene-user-return-8867-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92255 invoked from network); 24 Jun 2004 10:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 10:35:21 -0000
Received: (qmail 85403 invoked by uid 500); 24 Jun 2004 10:34:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85141 invoked by uid 500); 24 Jun 2004 10:34:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85090 invoked by uid 99); 24 Jun 2004 10:34:45 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 03:34:38 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5OAYbC03896
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 05:34:37 -0500
Message-ID: <40DAAE3B.30705@getopt.org>
Date: Thu, 24 Jun 2004 12:34:35 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: ANN: Luke v. 0.5 released
References: <web-39787268@mail5.rambler.ru>
In-Reply-To: <web-39787268@mail5.rambler.ru>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Vladimir Yuryev wrote:

> Hi Andrzej!
> 
> I am sorry for my English :-(
> I with pleasure shall tell about the test and I shall try to state 
> conditions of the test in detail.
> 
>>    I don't quite understand what you are saying... Do you suspect 
>> there is a bug in Luke somewhere on the Search tab? If >that's the 
>> case, please provide an example.
> 
> 
> 
> 1. Search was made on an index with coding Cp1251.
> 2. Conditions of search:
>      Analyzer to use for query parsing: org.apache.lucene.analysis.ru. 
> RussianAnalyzer
>      Default field is:contents
> 
>      2.1. Enter search expression here: (the coding windows-1251)
>             Result: No Results      2.2. Enter search expression 
> here:* (the coding windows-1251)
>             Result: 1 doc (s), url: 
> http://www.agnuz.info/result.php?year=2004&mounth1=March&day=26&files=v02.txt&print=news 

Time to refresh my russian... :-) Ok, the problem seems to be in the 
RussianAnalyzer - it uses RussianLetterTokenizer, which filters out 
anything which is a non-letter - I'm afraid it filters out also the 
wildcard at the end. Not only that, it then passes the tokens through a 
RussianStemmer, which further mutilates the tokens.

Please try the "Parsed query view" on the "Search" tab to see what is 
the result of your query, or paste your query into the text area on the 
AnalyzerTool plugin ("Plugins"), and see what tokens you get using 
RussianAnalyzer.

I just did it, and the result for "*" was "" - clearly 
not what you wanted.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8868-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 12:17:54 2004
Return-Path: <lucene-user-return-8868-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46489 invoked from network); 24 Jun 2004 12:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 12:17:54 -0000
Received: (qmail 78992 invoked by uid 500); 24 Jun 2004 12:17:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78805 invoked by uid 500); 24 Jun 2004 12:17:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78712 invoked by uid 99); 24 Jun 2004 12:17:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.59.210] (HELO postfix.mail.ehatchersolutions.com) (128.143.59.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 05:17:11 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 2640F79CCB9
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 08:17:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
Content-Transfer-Encoding: 7bit
Message-Id: <6C64AA92-C5D8-11D8-AB9A-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: pylucene
Date: Thu, 24 Jun 2004 08:17:12 -0400
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

FYI...

	http://www.sauria.com/blog/2004/06/23#985

This is great news!  One of these days I'll give this infrastructure a 
try with Ruby instead of Python.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8869-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 12:20:14 2004
Return-Path: <lucene-user-return-8869-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47536 invoked from network); 24 Jun 2004 12:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 12:20:13 -0000
Received: (qmail 87692 invoked by uid 500); 24 Jun 2004 12:19:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87589 invoked by uid 500); 24 Jun 2004 12:19:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87416 invoked by uid 99); 24 Jun 2004 12:19:21 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 05:19:17 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5OCJ4A28869
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 07:19:05 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 17:49:20 +0530
Message-ID: <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 17:45:31 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0186_01C45A13.0B67FFA0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0186_01C45A13.0B67FFA0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hi Franck,

Thank you so much for the detailed explanation.
However, when I tried to break up my MultiFieldQueryParser into a series of
BooleanQueries, the result set has got reduced drastically.
Any idea why this could be happening?

Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 2:54 PM
Subject: Re: score and frequency


> The MultiFieldQueryParser give you a BooleanQuery containing 1 query for
> each field.
> Something like:
>             BooleanQuery
>             /   |   |   \
>           QF1  QF2 QF3  QF4    (QFx=Query for field x)
>
> You can still use the MultiFieldQueryParser and create a BooleanQuery to
> encapsulate the one parsed + the PhraseQuery, ie:
>              BooleanQuery(created by you)
>               /       \
>             BQ      PhraseQuery
>
> Or create the whole query (I think you should do that) and have
> something like that:
>              _BooleanQuery__
>             /   |   |   \   \
>           QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
>
> It's like parsing the following query:
> (field1:query) (field2:query) (field3:query)...(fieldx:query)
> (title:"query")~boost
>
>
> Franck
>
>
> Niraj Alok wrote:
> > I asked the previous question since I do not know how to use PhraseQuery
> >
> > I have one booleanquery and one query.
> > The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
> > flags, new StandardAnalyzer(stop));
> >
> > where qs is the word to be searched upon and searchLoc contains all the
four
> > fields.
> >
> > How do I insert a PhraseQuery here for title field only, and that too
with
> > its boosted value?
> >
> >
> > Regards,
> > Niraj
> > ----- Original Message -----
> > From: "Niraj Alok" <niraj@emacmillan.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, June 24, 2004 2:00 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>Does it mean that I would need to abandon MultiFieldQueryParser?
> >>
> >>Regards,
> >>Niraj
> >>----- Original Message -----
> >>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>Sent: Thursday, June 24, 2004 1:22 PM
> >>Subject: Re: score and frequency
> >>
> >>
> >>
> >>>Hi,
> >>>first, what do you consider as an 'exact matching' ? It seems that you
> >>>treat the search word by word, so 'lion sea' will be an 'exact match'
of
> >>>'sea-lion'.
> >>>I think you should add a PhraseQuery to your query containing the title
> >>>and with a big boost. So, you don't need to boost your title field.
Only
> >>>the results matching exactly (for the PhraseQuery) will be boosted.
> >>>
> >>>Franck
> >>>
> >>>
> >>>Niraj Alok wrote:
> >>>
> >>>>Hi Guys,
> >>>>
> >>>>I seem to have run into rough weather again.
> >>>>To describe the problem as concisely as possible, I have four fields
> >
> > to
> >
> >>search upon : title , first para, rest of the paras and content (equal
to
> >>title + first para + rest of the para) .  I am doing this by using
> >>MultiFieldQueryParser.
> >>
> >>>>Now there is a very complicated ranking algrorithm specified by the
> >>
> >>client and I have met most of them except one or two and really need
your
> >>help as all my other efforts have failed.
> >>
> >>>>The most important rule is that exact matching titles should come
> >
> > first
> >
> >>, i.e. get higher scores.
> >>
> >>>>I have given the highest boost factor to the title than the rest but
> >
> > the
> >
> >>problem comes up when there is some other title which has got just one
> >
> > word
> >
> >>matching. For e.g., if I search for lion, there is a title sea-lion
which
> >>also has the same boost factor as that of "lion" in the index. Also,
> >>sea-lion has got some more "lion" in its first para or rest of the paras
> >>etc. such that its score comes higher than "lion".
> >>
> >>>>Is there some way to get the exact matching titles higher scores?
> >>>>Please reply soon.
> >>>>
> >>>>
> >>>>Regards,
> >>>>Niraj
> >>>>
> >>>>
> >>>>----- Original Message -----
> >>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Sent: Monday, June 07, 2004 12:50 PM
> >>>>Subject: Re: score and frequency
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>>It seems that you don't the length norm to be used. It's a factor
> >
> > which
> >
> >>>>>normalize the score of a doc depending on the size of the searched
> >
> > field
> >
> >>>>>of the doc. It's the field which make that 'ground ice' has a higher
> >>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>>>>Championship: finals' because it only has 2 terms.
> >>>>>So, I suggest you to override the lengthNorm method and to ignore the
> >>>>>numTokens parameter.
> >>>>>NB: The length norm is computed during the indexation and the norm
are
> >>>>>store in the index (in the _aaa.f# files). So, you need to do
re-index
> >>>>>your data, and use this similarity during the indexation.
> >>>>>
> >>>>>Cheers,
> >>>>>Franck
> >>>>>
> >>>>>
> >>>>>Niraj Alok wrote:
> >>>>>
> >>>>>
> >>>>>>I have set the searcher.setSimilarity  as well as also tried setting
> >>
> >>the
> >>
> >>>>>>coord factor to 1.
> >>>>>>
> >>>>>>The problem as given by an example is : Lets say I have titles to be
> >>>>>>displayed depending upon the search.
> >>>>>>E.g if i have "ice hockey" as the search item and if it is default
> >>>>>>similarity, my results are :
> >>>>>>
> >>>>>>ice hockey0.99999994
> >>>>>>ice hockey0.75
> >>>>>>ice hockey0.75
> >>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>ice age0.073680125
> >>>>>>National Hockey League0.020266924
> >>>>>>Cracking the Ice Age0.018420031
> >>>>>>ground-ice0.011512519
> >>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>finals0.0069075115
> >>>>>>(the numbers indicating the score).
> >>>>>>
> >>>>>>
> >>>>>>But if i set the similarity as my overridden one, the results
become:
> >>>>>>ice hockey0.99999994
> >>>>>>ice hockey0.75
> >>>>>>ice hockey0.75
> >>>>>>ice age0.22104037
> >>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>National Hockey League0.060800765
> >>>>>>Cracking the Ice Age0.055260092
> >>>>>>ground-ice0.034537554
> >>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>finals0.020722535
> >>>>>>
> >>>>>>
> >>>>>>I want all the titles which have both "ice" and "hockey" to come
> >
> > above
> >
> >>the
> >>
> >>>>>>rest (to have higher scores)
> >>>>>>Meaning i would wish the results to appear like:
> >>>>>>
> >>>>>>ice hockey
> >>>>>>ice hockey
> >>>>>>ice hockey
> >>>>>>winter Olympics: hockey, ice, medallists
> >>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
finals
> >>>>>>ice age
> >>>>>>National Hockey League
> >>>>>>Cracking the Ice Age
> >>>>>>ground-ice
> >>>>>>
> >>>>>>My overriden similarity class contains just this method:
> >>>>>>public float coord(int overlap, int maxOverlap) {
> >>>>>>
> >>>>>>return 1.0f;
> >>>>>>
> >>>>>>}
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>I feel it is the weight factor which is producing indesirable
> >
> > results.
> >
> >>Any
> >>
> >>>>>>help in this regard would be highly appreciated.
> >>>>>>
> >>>>>>Regards,
> >>>>>>Niraj
> >>>>>>
> >>>>>>----- Original Message -----
> >>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>Sent: Friday, June 04, 2004 8:46 PM
> >>>>>>Subject: Re: score and frequency
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>Hi,
> >>>>>>>
> >>>>>>>Be careful to set the default similarity
> >>>>>>>'Similarity.setDefault(similarity)' before creating your search
> >>
> >>instance
> >>
> >>>>>>>(IndexSearcher).
> >>>>>>>If you change the default similarity after, you'll still use the
old
> >>
> >>one.
> >>
> >>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> >
> > searcher.
> >
> >>>>>>>Franck
> >>>>>>>
> >>>>>>>
> >>>>>>>Phil brunet wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Hi to all.
> >>>>>>>>
> >>>>>>>>Maybe the term frequency is not the only parameter you need to
> >>
> >>override
> >>
> >>>>>>>>to "customize" the score attributed by Lucene.
> >>>>>>>>
> >>>>>>>>Maybe you should consider the normalisation factor, the idf and
the
> >>>>>>>>coord factor ?
> >>>>>>>>
> >>>>>>>>Philippe
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>>>>
> >>>>>>>>>Hi Erik,
> >>>>>>>>>
> >>>>>>>>>Thanks for the suggestion.
> >>>>>>>>>
> >>>>>>>>>I tried this:
> >>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>>>>
> >>>>>>>>>{
> >>>>>>>>>
> >>>>>>>>>public float tf(float freq) {
> >>>>>>>>>
> >>>>>>>>>System.out.println("discounting frequency");
> >>>>>>>>>
> >>>>>>>>>return (float)1;
> >>>>>>>>>
> >>>>>>>>>}
> >>>>>>>>>
> >>>>>>>>>}
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>and in my query class, I used :
> >>>>>>>>>
> >>>>>>>>>Similarity.setDefault(similarity);
> >>>>>>>>>
> >>>>>>>>>Hits hits = is.search(query);
> >>>>>>>>>
> >>>>>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>>>>
> >>>>>>>>>result = result + hits.score(i);
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>However, this is still not giving me the expected result. Do I
> >
> > need
> >
> >>to
> >>
> >>>>>>do
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>something else?
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>Regards,
> >>>>>>>>>Niraj
> >>>>>>>>>
> >>>>>>>>>----- Original Message -----
> >>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>Hi,
> >>>>>>>>>>>
> >>>>>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>>>>I am trying to get the results displayed according to
hits.score
> >>>>>>
> >>>>>>and
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>>it is giving the results correctly.
> >>>>>>>>>>>However I do not want the frequency factor to be used for the
> >>>>>>>>>>>computation of the score.
> >>>>>>>>>>>
> >>>>>>>>>>>Is it possible to get the score which does not have the
> >
> > frequency
> >
> >>>>>>>>>>>factor in it ?
> >>>>>>>>>>
> >>>>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity
is
> >>>>>>
> >>>>>>used
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>unless otherwise specified.  You could subclass that and
override
> >>>>>>
> >>>>>>this:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>> public float tf(float freq) {
> >>>>>>>>>>   return (float)Math.sqrt(freq);
> >>>>>>>>>> }
> >>>>>>>>>>
> >>>>>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>>>>
> >>>>>>>>>>Erik
> >>>>>>>>>>
> >>>>>>>>>>
> >>>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>For additional commands, e-mail:
> >>
> >>lucene-user-help@jakarta.apache.org
> >>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>_________________________________________________________________
> >>>>>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
> >>>>>>>>
> >>>>>>>>
> >>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>
> >>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>
> >>>>>>>--
> >>>>>>>Franck Brisbart
> >>>>>>>R&D
> >>>>>>>http://www.kelkoo.com
> >>>>>>>
> >>>>>>>
> >>>
> >>>>>---------------------------------------------------------------------
> >>>>>
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>
> >>>>>
> >>>>>--
> >>>>>Franck Brisbart
> >>>>>R&D
> >>>>>http://www.kelkoo.com
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>>
> >>>>
> >>>
> >>>--
> >>>Franck Brisbart
> >>>R&D
> >>>http://www.kelkoo.com
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_0186_01C45A13.0B67FFA0--



From lucene-user-return-8870-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 12:33:16 2004
Return-Path: <lucene-user-return-8870-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53779 invoked from network); 24 Jun 2004 12:33:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 12:33:16 -0000
Received: (qmail 28503 invoked by uid 500); 24 Jun 2004 12:33:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28275 invoked by uid 500); 24 Jun 2004 12:32:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28187 invoked by uid 99); 24 Jun 2004 12:32:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [194.98.147.102] (HELO smtp.kelkoo.net) (194.98.147.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 05:32:53 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5OCWkDq002191
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 14:32:46 +0200
Message-ID: <40DAC9DF.8010900@kelkoo.net>
Date: Thu, 24 Jun 2004 14:32:31 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu>
In-Reply-To: <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It may come from the boolean clauses. If you add your sub-queries with a 
'required' flag, you'll only get the results matching all the words in 
your query.
It can also come from the score which is different. If you set up a 
threshold to return the results, it can be the problem.

Franck


Niraj Alok wrote:
> Hi Franck,
> 
> Thank you so much for the detailed explanation.
> However, when I tried to break up my MultiFieldQueryParser into a series of
> BooleanQueries, the result set has got reduced drastically.
> Any idea why this could be happening?
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 2:54 PM
> Subject: Re: score and frequency
> 
> 
> 
>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query for
>>each field.
>>Something like:
>>            BooleanQuery
>>            /   |   |   \
>>          QF1  QF2 QF3  QF4    (QFx=Query for field x)
>>
>>You can still use the MultiFieldQueryParser and create a BooleanQuery to
>>encapsulate the one parsed + the PhraseQuery, ie:
>>             BooleanQuery(created by you)
>>              /       \
>>            BQ      PhraseQuery
>>
>>Or create the whole query (I think you should do that) and have
>>something like that:
>>             _BooleanQuery__
>>            /   |   |   \   \
>>          QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
>>
>>It's like parsing the following query:
>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
>>(title:"query")~boost
>>
>>
>>Franck
>>
>>
>>Niraj Alok wrote:
>>
>>>I asked the previous question since I do not know how to use PhraseQuery
>>>
>>>I have one booleanquery and one query.
>>>The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
>>>flags, new StandardAnalyzer(stop));
>>>
>>>where qs is the word to be searched upon and searchLoc contains all the
> 
> four
> 
>>>fields.
>>>
>>>How do I insert a PhraseQuery here for title field only, and that too
> 
> with
> 
>>>its boosted value?
>>>
>>>
>>>Regards,
>>>Niraj
>>>----- Original Message -----
>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Thursday, June 24, 2004 2:00 PM
>>>Subject: Re: score and frequency
>>>
>>>
>>>
>>>
>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
>>>>
>>>>Regards,
>>>>Niraj
>>>>----- Original Message -----
>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>Sent: Thursday, June 24, 2004 1:22 PM
>>>>Subject: Re: score and frequency
>>>>
>>>>
>>>>
>>>>
>>>>>Hi,
>>>>>first, what do you consider as an 'exact matching' ? It seems that you
>>>>>treat the search word by word, so 'lion sea' will be an 'exact match'
> 
> of
> 
>>>>>'sea-lion'.
>>>>>I think you should add a PhraseQuery to your query containing the title
>>>>>and with a big boost. So, you don't need to boost your title field.
> 
> Only
> 
>>>>>the results matching exactly (for the PhraseQuery) will be boosted.
>>>>>
>>>>>Franck
>>>>>
>>>>>
>>>>>Niraj Alok wrote:
>>>>>
>>>>>
>>>>>>Hi Guys,
>>>>>>
>>>>>>I seem to have run into rough weather again.
>>>>>>To describe the problem as concisely as possible, I have four fields
>>>
>>>to
>>>
>>>
>>>>search upon : title , first para, rest of the paras and content (equal
> 
> to
> 
>>>>title + first para + rest of the para) .  I am doing this by using
>>>>MultiFieldQueryParser.
>>>>
>>>>
>>>>>>Now there is a very complicated ranking algrorithm specified by the
>>>>
>>>>client and I have met most of them except one or two and really need
> 
> your
> 
>>>>help as all my other efforts have failed.
>>>>
>>>>
>>>>>>The most important rule is that exact matching titles should come
>>>
>>>first
>>>
>>>
>>>>, i.e. get higher scores.
>>>>
>>>>
>>>>>>I have given the highest boost factor to the title than the rest but
>>>
>>>the
>>>
>>>
>>>>problem comes up when there is some other title which has got just one
>>>
>>>word
>>>
>>>
>>>>matching. For e.g., if I search for lion, there is a title sea-lion
> 
> which
> 
>>>>also has the same boost factor as that of "lion" in the index. Also,
>>>>sea-lion has got some more "lion" in its first para or rest of the paras
>>>>etc. such that its score comes higher than "lion".
>>>>
>>>>
>>>>>>Is there some way to get the exact matching titles higher scores?
>>>>>>Please reply soon.
>>>>>>
>>>>>>
>>>>>>Regards,
>>>>>>Niraj
>>>>>>
>>>>>>
>>>>>>----- Original Message -----
>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>Sent: Monday, June 07, 2004 12:50 PM
>>>>>>Subject: Re: score and frequency
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>>It seems that you don't the length norm to be used. It's a factor
>>>
>>>which
>>>
>>>
>>>>>>>normalize the score of a doc depending on the size of the searched
>>>
>>>field
>>>
>>>
>>>>>>>of the doc. It's the field which make that 'ground ice' has a higher
>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
>>>>>>>Championship: finals' because it only has 2 terms.
>>>>>>>So, I suggest you to override the lengthNorm method and to ignore the
>>>>>>>numTokens parameter.
>>>>>>>NB: The length norm is computed during the indexation and the norm
> 
> are
> 
>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
> 
> re-index
> 
>>>>>>>your data, and use this similarity during the indexation.
>>>>>>>
>>>>>>>Cheers,
>>>>>>>Franck
>>>>>>>
>>>>>>>
>>>>>>>Niraj Alok wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>I have set the searcher.setSimilarity  as well as also tried setting
>>>>
>>>>the
>>>>
>>>>
>>>>>>>>coord factor to 1.
>>>>>>>>
>>>>>>>>The problem as given by an example is : Lets say I have titles to be
>>>>>>>>displayed depending upon the search.
>>>>>>>>E.g if i have "ice hockey" as the search item and if it is default
>>>>>>>>similarity, my results are :
>>>>>>>>
>>>>>>>>ice hockey0.99999994
>>>>>>>>ice hockey0.75
>>>>>>>>ice hockey0.75
>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>ice age0.073680125
>>>>>>>>National Hockey League0.020266924
>>>>>>>>Cracking the Ice Age0.018420031
>>>>>>>>ground-ice0.011512519
>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>finals0.0069075115
>>>>>>>>(the numbers indicating the score).
>>>>>>>>
>>>>>>>>
>>>>>>>>But if i set the similarity as my overridden one, the results
> 
> become:
> 
>>>>>>>>ice hockey0.99999994
>>>>>>>>ice hockey0.75
>>>>>>>>ice hockey0.75
>>>>>>>>ice age0.22104037
>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>National Hockey League0.060800765
>>>>>>>>Cracking the Ice Age0.055260092
>>>>>>>>ground-ice0.034537554
>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>finals0.020722535
>>>>>>>>
>>>>>>>>
>>>>>>>>I want all the titles which have both "ice" and "hockey" to come
>>>
>>>above
>>>
>>>
>>>>the
>>>>
>>>>
>>>>>>>>rest (to have higher scores)
>>>>>>>>Meaning i would wish the results to appear like:
>>>>>>>>
>>>>>>>>ice hockey
>>>>>>>>ice hockey
>>>>>>>>ice hockey
>>>>>>>>winter Olympics: hockey, ice, medallists
>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> 
> finals
> 
>>>>>>>>ice age
>>>>>>>>National Hockey League
>>>>>>>>Cracking the Ice Age
>>>>>>>>ground-ice
>>>>>>>>
>>>>>>>>My overriden similarity class contains just this method:
>>>>>>>>public float coord(int overlap, int maxOverlap) {
>>>>>>>>
>>>>>>>>return 1.0f;
>>>>>>>>
>>>>>>>>}
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>I feel it is the weight factor which is producing indesirable
>>>
>>>results.
>>>
>>>
>>>>Any
>>>>
>>>>
>>>>>>>>help in this regard would be highly appreciated.
>>>>>>>>
>>>>>>>>Regards,
>>>>>>>>Niraj
>>>>>>>>
>>>>>>>>----- Original Message -----
>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
>>>>>>>>Subject: Re: score and frequency
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>Hi,
>>>>>>>>>
>>>>>>>>>Be careful to set the default similarity
>>>>>>>>>'Similarity.setDefault(similarity)' before creating your search
>>>>
>>>>instance
>>>>
>>>>
>>>>>>>>>(IndexSearcher).
>>>>>>>>>If you change the default similarity after, you'll still use the
> 
> old
> 
>>>>one.
>>>>
>>>>
>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
>>>
>>>searcher.
>>>
>>>
>>>>>>>>>Franck
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>Phil brunet wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>Hi to all.
>>>>>>>>>>
>>>>>>>>>>Maybe the term frequency is not the only parameter you need to
>>>>
>>>>override
>>>>
>>>>
>>>>>>>>>>to "customize" the score attributed by Lucene.
>>>>>>>>>>
>>>>>>>>>>Maybe you should consider the normalisation factor, the idf and
> 
> the
> 
>>>>>>>>>>coord factor ?
>>>>>>>>>>
>>>>>>>>>>Philippe
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>>>>>>>>
>>>>>>>>>>>Hi Erik,
>>>>>>>>>>>
>>>>>>>>>>>Thanks for the suggestion.
>>>>>>>>>>>
>>>>>>>>>>>I tried this:
>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>>>>>>>>
>>>>>>>>>>>{
>>>>>>>>>>>
>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>
>>>>>>>>>>>System.out.println("discounting frequency");
>>>>>>>>>>>
>>>>>>>>>>>return (float)1;
>>>>>>>>>>>
>>>>>>>>>>>}
>>>>>>>>>>>
>>>>>>>>>>>}
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>and in my query class, I used :
>>>>>>>>>>>
>>>>>>>>>>>Similarity.setDefault(similarity);
>>>>>>>>>>>
>>>>>>>>>>>Hits hits = is.search(query);
>>>>>>>>>>>
>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
>>>>>>>>>>>
>>>>>>>>>>>result = result + hits.score(i);
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>However, this is still not giving me the expected result. Do I
>>>
>>>need
>>>
>>>
>>>>to
>>>>
>>>>
>>>>>>>>do
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>something else?
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>Regards,
>>>>>>>>>>>Niraj
>>>>>>>>>>>
>>>>>>>>>>>----- Original Message -----
>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>Hi,
>>>>>>>>>>>>>
>>>>>>>>>>>>>I am having some problems with the score of lucene.
>>>>>>>>>>>>>I am trying to get the results displayed according to
> 
> hits.score
> 
>>>>>>>>and
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>>it is giving the results correctly.
>>>>>>>>>>>>>However I do not want the frequency factor to be used for the
>>>>>>>>>>>>>computation of the score.
>>>>>>>>>>>>>
>>>>>>>>>>>>>Is it possible to get the score which does not have the
>>>
>>>frequency
>>>
>>>
>>>>>>>>>>>>>factor in it ?
>>>>>>>>>>>>
>>>>>>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity
> 
> is
> 
>>>>>>>>used
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
> 
> override
> 
>>>>>>>>this:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>>  return (float)Math.sqrt(freq);
>>>>>>>>>>>>}
>>>>>>>>>>>>
>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
>>>>>>>>>>>>
>>>>>>>>>>>>Erik
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>>To unsubscribe, e-mail:
>>>
>>>lucene-user-unsubscribe@jakarta.apache.org
>>>
>>>
>>>>>>>>>>>>For additional commands, e-mail:
>>>>
>>>>lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>>For additional commands, e-mail:
>>>
>>>lucene-user-help@jakarta.apache.org
>>>
>>>
>>>>>>>>>>_________________________________________________________________
>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit ! http://toolbar.msn.fr
>>>>>>>>>>
>>>>>>>>>>
>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>
>>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>>For additional commands, e-mail:
>>>
>>>lucene-user-help@jakarta.apache.org
>>>
>>>
>>>>>>>>>--
>>>>>>>>>Franck Brisbart
>>>>>>>>>R&D
>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>
>>>>>>>>>
>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>
>>>>>>>
>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>
>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>--
>>>>>>>Franck Brisbart
>>>>>>>R&D
>>>>>>>http://www.kelkoo.com
>>>>>>>
>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>--
>>>>>Franck Brisbart
>>>>>R&D
>>>>>http://www.kelkoo.com
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>
>>>
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>>--
>>Franck Brisbart
>>R&D
>>http://www.kelkoo.com
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8871-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 12:39:15 2004
Return-Path: <lucene-user-return-8871-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56589 invoked from network); 24 Jun 2004 12:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 12:39:14 -0000
Received: (qmail 46156 invoked by uid 500); 24 Jun 2004 12:39:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46032 invoked by uid 500); 24 Jun 2004 12:39:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45949 invoked by uid 99); 24 Jun 2004 12:38:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 05:38:56 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5OCcmU22453
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 07:38:48 -0500
Message-ID: <40DACB56.9050206@getopt.org>
Date: Thu, 24 Jun 2004 14:38:46 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: pylucene
References: <6C64AA92-C5D8-11D8-AB9A-000393A564E6@ehatchersolutions.com>
In-Reply-To: <6C64AA92-C5D8-11D8-AB9A-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> FYI...
> 
>     http://www.sauria.com/blog/2004/06/23#985
> 
> This is great news!  One of these days I'll give this infrastructure a 
> try with Ruby instead of Python.

Excellent news indeed. They also provide native Win, Linux and MacOS 
binaries. I can't wait to run a benchmark on it...

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8872-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 12:48:35 2004
Return-Path: <lucene-user-return-8872-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61495 invoked from network); 24 Jun 2004 12:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 12:48:35 -0000
Received: (qmail 73036 invoked by uid 500); 24 Jun 2004 12:48:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72868 invoked by uid 500); 24 Jun 2004 12:48:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72811 invoked by uid 99); 24 Jun 2004 12:48:10 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 05:48:06 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5OClqA29546
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 07:47:52 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 18:18:13 +0530
Message-ID: <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 18:14:24 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01A3_01C45A17.14919790"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01A3_01C45A17.14919790
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hi Franck,

You seem to be a genius in lucene !

I have done finally all that which you have suggested, but now when I am
searching for "lion", those terms are coming much below in terms of scores.

This is despite me setting the boost for the phrase query. Infact, this is
resulting in almost all the exact matches to come down.


Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 6:02 PM
Subject: Re: score and frequency


> It may come from the boolean clauses. If you add your sub-queries with a
> 'required' flag, you'll only get the results matching all the words in
> your query.
> It can also come from the score which is different. If you set up a
> threshold to return the results, it can be the problem.
>
> Franck
>
>
> Niraj Alok wrote:
> > Hi Franck,
> >
> > Thank you so much for the detailed explanation.
> > However, when I tried to break up my MultiFieldQueryParser into a series
of
> > BooleanQueries, the result set has got reduced drastically.
> > Any idea why this could be happening?
> >
> > Regards,
> > Niraj
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, June 24, 2004 2:54 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>The MultiFieldQueryParser give you a BooleanQuery containing 1 query for
> >>each field.
> >>Something like:
> >>            BooleanQuery
> >>            /   |   |   \
> >>          QF1  QF2 QF3  QF4    (QFx=Query for field x)
> >>
> >>You can still use the MultiFieldQueryParser and create a BooleanQuery to
> >>encapsulate the one parsed + the PhraseQuery, ie:
> >>             BooleanQuery(created by you)
> >>              /       \
> >>            BQ      PhraseQuery
> >>
> >>Or create the whole query (I think you should do that) and have
> >>something like that:
> >>             _BooleanQuery__
> >>            /   |   |   \   \
> >>          QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
> >>
> >>It's like parsing the following query:
> >>(field1:query) (field2:query) (field3:query)...(fieldx:query)
> >>(title:"query")~boost
> >>
> >>
> >>Franck
> >>
> >>
> >>Niraj Alok wrote:
> >>
> >>>I asked the previous question since I do not know how to use
PhraseQuery
> >>>
> >>>I have one booleanquery and one query.
> >>>The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
> >>>flags, new StandardAnalyzer(stop));
> >>>
> >>>where qs is the word to be searched upon and searchLoc contains all the
> >
> > four
> >
> >>>fields.
> >>>
> >>>How do I insert a PhraseQuery here for title field only, and that too
> >
> > with
> >
> >>>its boosted value?
> >>>
> >>>
> >>>Regards,
> >>>Niraj
> >>>----- Original Message -----
> >>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>Sent: Thursday, June 24, 2004 2:00 PM
> >>>Subject: Re: score and frequency
> >>>
> >>>
> >>>
> >>>
> >>>>Does it mean that I would need to abandon MultiFieldQueryParser?
> >>>>
> >>>>Regards,
> >>>>Niraj
> >>>>----- Original Message -----
> >>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>Sent: Thursday, June 24, 2004 1:22 PM
> >>>>Subject: Re: score and frequency
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>>Hi,
> >>>>>first, what do you consider as an 'exact matching' ? It seems that
you
> >>>>>treat the search word by word, so 'lion sea' will be an 'exact match'
> >
> > of
> >
> >>>>>'sea-lion'.
> >>>>>I think you should add a PhraseQuery to your query containing the
title
> >>>>>and with a big boost. So, you don't need to boost your title field.
> >
> > Only
> >
> >>>>>the results matching exactly (for the PhraseQuery) will be boosted.
> >>>>>
> >>>>>Franck
> >>>>>
> >>>>>
> >>>>>Niraj Alok wrote:
> >>>>>
> >>>>>
> >>>>>>Hi Guys,
> >>>>>>
> >>>>>>I seem to have run into rough weather again.
> >>>>>>To describe the problem as concisely as possible, I have four fields
> >>>
> >>>to
> >>>
> >>>
> >>>>search upon : title , first para, rest of the paras and content (equal
> >
> > to
> >
> >>>>title + first para + rest of the para) .  I am doing this by using
> >>>>MultiFieldQueryParser.
> >>>>
> >>>>
> >>>>>>Now there is a very complicated ranking algrorithm specified by the
> >>>>
> >>>>client and I have met most of them except one or two and really need
> >
> > your
> >
> >>>>help as all my other efforts have failed.
> >>>>
> >>>>
> >>>>>>The most important rule is that exact matching titles should come
> >>>
> >>>first
> >>>
> >>>
> >>>>, i.e. get higher scores.
> >>>>
> >>>>
> >>>>>>I have given the highest boost factor to the title than the rest but
> >>>
> >>>the
> >>>
> >>>
> >>>>problem comes up when there is some other title which has got just one
> >>>
> >>>word
> >>>
> >>>
> >>>>matching. For e.g., if I search for lion, there is a title sea-lion
> >
> > which
> >
> >>>>also has the same boost factor as that of "lion" in the index. Also,
> >>>>sea-lion has got some more "lion" in its first para or rest of the
paras
> >>>>etc. such that its score comes higher than "lion".
> >>>>
> >>>>
> >>>>>>Is there some way to get the exact matching titles higher scores?
> >>>>>>Please reply soon.
> >>>>>>
> >>>>>>
> >>>>>>Regards,
> >>>>>>Niraj
> >>>>>>
> >>>>>>
> >>>>>>----- Original Message -----
> >>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>Sent: Monday, June 07, 2004 12:50 PM
> >>>>>>Subject: Re: score and frequency
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>It seems that you don't the length norm to be used. It's a factor
> >>>
> >>>which
> >>>
> >>>
> >>>>>>>normalize the score of a doc depending on the size of the searched
> >>>
> >>>field
> >>>
> >>>
> >>>>>>>of the doc. It's the field which make that 'ground ice' has a
higher
> >>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>>>>>>Championship: finals' because it only has 2 terms.
> >>>>>>>So, I suggest you to override the lengthNorm method and to ignore
the
> >>>>>>>numTokens parameter.
> >>>>>>>NB: The length norm is computed during the indexation and the norm
> >
> > are
> >
> >>>>>>>store in the index (in the _aaa.f# files). So, you need to do
> >
> > re-index
> >
> >>>>>>>your data, and use this similarity during the indexation.
> >>>>>>>
> >>>>>>>Cheers,
> >>>>>>>Franck
> >>>>>>>
> >>>>>>>
> >>>>>>>Niraj Alok wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>I have set the searcher.setSimilarity  as well as also tried
setting
> >>>>
> >>>>the
> >>>>
> >>>>
> >>>>>>>>coord factor to 1.
> >>>>>>>>
> >>>>>>>>The problem as given by an example is : Lets say I have titles to
be
> >>>>>>>>displayed depending upon the search.
> >>>>>>>>E.g if i have "ice hockey" as the search item and if it is default
> >>>>>>>>similarity, my results are :
> >>>>>>>>
> >>>>>>>>ice hockey0.99999994
> >>>>>>>>ice hockey0.75
> >>>>>>>>ice hockey0.75
> >>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>ice age0.073680125
> >>>>>>>>National Hockey League0.020266924
> >>>>>>>>Cracking the Ice Age0.018420031
> >>>>>>>>ground-ice0.011512519
> >>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>finals0.0069075115
> >>>>>>>>(the numbers indicating the score).
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>But if i set the similarity as my overridden one, the results
> >
> > become:
> >
> >>>>>>>>ice hockey0.99999994
> >>>>>>>>ice hockey0.75
> >>>>>>>>ice hockey0.75
> >>>>>>>>ice age0.22104037
> >>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>National Hockey League0.060800765
> >>>>>>>>Cracking the Ice Age0.055260092
> >>>>>>>>ground-ice0.034537554
> >>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>finals0.020722535
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>I want all the titles which have both "ice" and "hockey" to come
> >>>
> >>>above
> >>>
> >>>
> >>>>the
> >>>>
> >>>>
> >>>>>>>>rest (to have higher scores)
> >>>>>>>>Meaning i would wish the results to appear like:
> >>>>>>>>
> >>>>>>>>ice hockey
> >>>>>>>>ice hockey
> >>>>>>>>ice hockey
> >>>>>>>>winter Olympics: hockey, ice, medallists
> >>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >
> > finals
> >
> >>>>>>>>ice age
> >>>>>>>>National Hockey League
> >>>>>>>>Cracking the Ice Age
> >>>>>>>>ground-ice
> >>>>>>>>
> >>>>>>>>My overriden similarity class contains just this method:
> >>>>>>>>public float coord(int overlap, int maxOverlap) {
> >>>>>>>>
> >>>>>>>>return 1.0f;
> >>>>>>>>
> >>>>>>>>}
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>I feel it is the weight factor which is producing indesirable
> >>>
> >>>results.
> >>>
> >>>
> >>>>Any
> >>>>
> >>>>
> >>>>>>>>help in this regard would be highly appreciated.
> >>>>>>>>
> >>>>>>>>Regards,
> >>>>>>>>Niraj
> >>>>>>>>
> >>>>>>>>----- Original Message -----
> >>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
> >>>>>>>>Subject: Re: score and frequency
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>Hi,
> >>>>>>>>>
> >>>>>>>>>Be careful to set the default similarity
> >>>>>>>>>'Similarity.setDefault(similarity)' before creating your search
> >>>>
> >>>>instance
> >>>>
> >>>>
> >>>>>>>>>(IndexSearcher).
> >>>>>>>>>If you change the default similarity after, you'll still use the
> >
> > old
> >
> >>>>one.
> >>>>
> >>>>
> >>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> >>>
> >>>searcher.
> >>>
> >>>
> >>>>>>>>>Franck
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>Phil brunet wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>Hi to all.
> >>>>>>>>>>
> >>>>>>>>>>Maybe the term frequency is not the only parameter you need to
> >>>>
> >>>>override
> >>>>
> >>>>
> >>>>>>>>>>to "customize" the score attributed by Lucene.
> >>>>>>>>>>
> >>>>>>>>>>Maybe you should consider the normalisation factor, the idf and
> >
> > the
> >
> >>>>>>>>>>coord factor ?
> >>>>>>>>>>
> >>>>>>>>>>Philippe
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>>>>>>
> >>>>>>>>>>>Hi Erik,
> >>>>>>>>>>>
> >>>>>>>>>>>Thanks for the suggestion.
> >>>>>>>>>>>
> >>>>>>>>>>>I tried this:
> >>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>>>>>>
> >>>>>>>>>>>{
> >>>>>>>>>>>
> >>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>
> >>>>>>>>>>>System.out.println("discounting frequency");
> >>>>>>>>>>>
> >>>>>>>>>>>return (float)1;
> >>>>>>>>>>>
> >>>>>>>>>>>}
> >>>>>>>>>>>
> >>>>>>>>>>>}
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>and in my query class, I used :
> >>>>>>>>>>>
> >>>>>>>>>>>Similarity.setDefault(similarity);
> >>>>>>>>>>>
> >>>>>>>>>>>Hits hits = is.search(query);
> >>>>>>>>>>>
> >>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>>>>>>
> >>>>>>>>>>>result = result + hits.score(i);
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>However, this is still not giving me the expected result. Do I
> >>>
> >>>need
> >>>
> >>>
> >>>>to
> >>>>
> >>>>
> >>>>>>>>do
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>something else?
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>Regards,
> >>>>>>>>>>>Niraj
> >>>>>>>>>>>
> >>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>>>>>>I am trying to get the results displayed according to
> >
> > hits.score
> >
> >>>>>>>>and
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>it is giving the results correctly.
> >>>>>>>>>>>>>However I do not want the frequency factor to be used for the
> >>>>>>>>>>>>>computation of the score.
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Is it possible to get the score which does not have the
> >>>
> >>>frequency
> >>>
> >>>
> >>>>>>>>>>>>>factor in it ?
> >>>>>>>>>>>>
> >>>>>>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity
> >
> > is
> >
> >>>>>>>>used
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>unless otherwise specified.  You could subclass that and
> >
> > override
> >
> >>>>>>>>this:
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>  return (float)Math.sqrt(freq);
> >>>>>>>>>>>>}
> >>>>>>>>>>>>
> >>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>>>>>>
> >>>>>>>>>>>>Erik
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>For additional commands, e-mail:
> >>>>
> >>>>lucene-user-help@jakarta.apache.org
> >>>>
> >>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
>
>>>>>>>>>>_________________________________________________________________
> >>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
http://toolbar.msn.fr
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>--
> >>>>>>>>>Franck Brisbart
> >>>>>>>>>R&D
> >>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>
> >>>>>>>>>
> >>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>
> >>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>--
> >>>>>>>Franck Brisbart
> >>>>>>>R&D
> >>>>>>>http://www.kelkoo.com
> >>>>>>>
> >>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>--
> >>>>>Franck Brisbart
> >>>>>R&D
> >>>>>http://www.kelkoo.com
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_01A3_01C45A17.14919790--



From lucene-user-return-8873-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 13:35:02 2004
Return-Path: <lucene-user-return-8873-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98723 invoked from network); 24 Jun 2004 13:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 13:35:02 -0000
Received: (qmail 45929 invoked by uid 500); 24 Jun 2004 13:34:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45703 invoked by uid 500); 24 Jun 2004 13:34:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45482 invoked by uid 99); 24 Jun 2004 13:34:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 06:34:35 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5ODYI5c027750
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 15:34:19 +0200
Message-ID: <40DAD84B.9090008@kelkoo.net>
Date: Thu, 24 Jun 2004 15:34:03 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu>
In-Reply-To: <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Forget about the PhraseQuery, I'm stupid, it can't work like that. 
Because the phrase query will boost the documents which contain the 
search and not the documents which match exactly the search. So, the 
exact matches will come down. :-/

You need to have some information about the lucene documents to know if 
it's an exact match. Such as the number of terms in the documents. The 
problem is that this number is store in the lengthNorm and as it's 
encoded on 1 byte, you can't have it precisely. So, you should shunt the 
problem.
Here's another suggestion (a good one I hope):
Add another field containing the title as a Keyword. Then you just have 
to replace the PhraseQuery I told you to use by a TermQuery searching 
for the term (newField,search)
Of course, it will be a bit too restrictive to store the title without 
any transformation. You can for example store in this field the 
concatenation of the token given by your analyzer. Just don't forget to 
do the same transformation also for the search.
Sorry for the previous posts.

Franck

Niraj Alok wrote:
> Hi Franck,
> 
> You seem to be a genius in lucene !
> 
> I have done finally all that which you have suggested, but now when I am
> searching for "lion", those terms are coming much below in terms of scores.
> 
> This is despite me setting the boost for the phrase query. Infact, this is
> resulting in almost all the exact matches to come down.
> 
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 6:02 PM
> Subject: Re: score and frequency
> 
> 
> 
>>It may come from the boolean clauses. If you add your sub-queries with a
>>'required' flag, you'll only get the results matching all the words in
>>your query.
>>It can also come from the score which is different. If you set up a
>>threshold to return the results, it can be the problem.
>>
>>Franck
>>
>>
>>Niraj Alok wrote:
>>
>>>Hi Franck,
>>>
>>>Thank you so much for the detailed explanation.
>>>However, when I tried to break up my MultiFieldQueryParser into a series
> 
> of
> 
>>>BooleanQueries, the result set has got reduced drastically.
>>>Any idea why this could be happening?
>>>
>>>Regards,
>>>Niraj
>>>----- Original Message -----
>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Thursday, June 24, 2004 2:54 PM
>>>Subject: Re: score and frequency
>>>
>>>
>>>
>>>
>>>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query for
>>>>each field.
>>>>Something like:
>>>>           BooleanQuery
>>>>           /   |   |   \
>>>>         QF1  QF2 QF3  QF4    (QFx=Query for field x)
>>>>
>>>>You can still use the MultiFieldQueryParser and create a BooleanQuery to
>>>>encapsulate the one parsed + the PhraseQuery, ie:
>>>>            BooleanQuery(created by you)
>>>>             /       \
>>>>           BQ      PhraseQuery
>>>>
>>>>Or create the whole query (I think you should do that) and have
>>>>something like that:
>>>>            _BooleanQuery__
>>>>           /   |   |   \   \
>>>>         QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
>>>>
>>>>It's like parsing the following query:
>>>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
>>>>(title:"query")~boost
>>>>
>>>>
>>>>Franck
>>>>
>>>>
>>>>Niraj Alok wrote:
>>>>
>>>>
>>>>>I asked the previous question since I do not know how to use
> 
> PhraseQuery
> 
>>>>>I have one booleanquery and one query.
>>>>>The query is Query query =  MultiFieldQueryParser.parse( qs, searchLoc,
>>>>>flags, new StandardAnalyzer(stop));
>>>>>
>>>>>where qs is the word to be searched upon and searchLoc contains all the
>>>
>>>four
>>>
>>>
>>>>>fields.
>>>>>
>>>>>How do I insert a PhraseQuery here for title field only, and that too
>>>
>>>with
>>>
>>>
>>>>>its boosted value?
>>>>>
>>>>>
>>>>>Regards,
>>>>>Niraj
>>>>>----- Original Message -----
>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>Sent: Thursday, June 24, 2004 2:00 PM
>>>>>Subject: Re: score and frequency
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
>>>>>>
>>>>>>Regards,
>>>>>>Niraj
>>>>>>----- Original Message -----
>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>Sent: Thursday, June 24, 2004 1:22 PM
>>>>>>Subject: Re: score and frequency
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>>Hi,
>>>>>>>first, what do you consider as an 'exact matching' ? It seems that
> 
> you
> 
>>>>>>>treat the search word by word, so 'lion sea' will be an 'exact match'
>>>
>>>of
>>>
>>>
>>>>>>>'sea-lion'.
>>>>>>>I think you should add a PhraseQuery to your query containing the
> 
> title
> 
>>>>>>>and with a big boost. So, you don't need to boost your title field.
>>>
>>>Only
>>>
>>>
>>>>>>>the results matching exactly (for the PhraseQuery) will be boosted.
>>>>>>>
>>>>>>>Franck
>>>>>>>
>>>>>>>
>>>>>>>Niraj Alok wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>Hi Guys,
>>>>>>>>
>>>>>>>>I seem to have run into rough weather again.
>>>>>>>>To describe the problem as concisely as possible, I have four fields
>>>>>
>>>>>to
>>>>>
>>>>>
>>>>>
>>>>>>search upon : title , first para, rest of the paras and content (equal
>>>
>>>to
>>>
>>>
>>>>>>title + first para + rest of the para) .  I am doing this by using
>>>>>>MultiFieldQueryParser.
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>Now there is a very complicated ranking algrorithm specified by the
>>>>>>
>>>>>>client and I have met most of them except one or two and really need
>>>
>>>your
>>>
>>>
>>>>>>help as all my other efforts have failed.
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>The most important rule is that exact matching titles should come
>>>>>
>>>>>first
>>>>>
>>>>>
>>>>>
>>>>>>, i.e. get higher scores.
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>I have given the highest boost factor to the title than the rest but
>>>>>
>>>>>the
>>>>>
>>>>>
>>>>>
>>>>>>problem comes up when there is some other title which has got just one
>>>>>
>>>>>word
>>>>>
>>>>>
>>>>>
>>>>>>matching. For e.g., if I search for lion, there is a title sea-lion
>>>
>>>which
>>>
>>>
>>>>>>also has the same boost factor as that of "lion" in the index. Also,
>>>>>>sea-lion has got some more "lion" in its first para or rest of the
> 
> paras
> 
>>>>>>etc. such that its score comes higher than "lion".
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>Is there some way to get the exact matching titles higher scores?
>>>>>>>>Please reply soon.
>>>>>>>>
>>>>>>>>
>>>>>>>>Regards,
>>>>>>>>Niraj
>>>>>>>>
>>>>>>>>
>>>>>>>>----- Original Message -----
>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>Sent: Monday, June 07, 2004 12:50 PM
>>>>>>>>Subject: Re: score and frequency
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>It seems that you don't the length norm to be used. It's a factor
>>>>>
>>>>>which
>>>>>
>>>>>
>>>>>
>>>>>>>>>normalize the score of a doc depending on the size of the searched
>>>>>
>>>>>field
>>>>>
>>>>>
>>>>>
>>>>>>>>>of the doc. It's the field which make that 'ground ice' has a
> 
> higher
> 
>>>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
>>>>>>>>>Championship: finals' because it only has 2 terms.
>>>>>>>>>So, I suggest you to override the lengthNorm method and to ignore
> 
> the
> 
>>>>>>>>>numTokens parameter.
>>>>>>>>>NB: The length norm is computed during the indexation and the norm
>>>
>>>are
>>>
>>>
>>>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
>>>
>>>re-index
>>>
>>>
>>>>>>>>>your data, and use this similarity during the indexation.
>>>>>>>>>
>>>>>>>>>Cheers,
>>>>>>>>>Franck
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>Niraj Alok wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>I have set the searcher.setSimilarity  as well as also tried
> 
> setting
> 
>>>>>>the
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>coord factor to 1.
>>>>>>>>>>
>>>>>>>>>>The problem as given by an example is : Lets say I have titles to
> 
> be
> 
>>>>>>>>>>displayed depending upon the search.
>>>>>>>>>>E.g if i have "ice hockey" as the search item and if it is default
>>>>>>>>>>similarity, my results are :
>>>>>>>>>>
>>>>>>>>>>ice hockey0.99999994
>>>>>>>>>>ice hockey0.75
>>>>>>>>>>ice hockey0.75
>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>>>ice age0.073680125
>>>>>>>>>>National Hockey League0.020266924
>>>>>>>>>>Cracking the Ice Age0.018420031
>>>>>>>>>>ground-ice0.011512519
>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>>>finals0.0069075115
>>>>>>>>>>(the numbers indicating the score).
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>But if i set the similarity as my overridden one, the results
>>>
>>>become:
>>>
>>>
>>>>>>>>>>ice hockey0.99999994
>>>>>>>>>>ice hockey0.75
>>>>>>>>>>ice hockey0.75
>>>>>>>>>>ice age0.22104037
>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>>>National Hockey League0.060800765
>>>>>>>>>>Cracking the Ice Age0.055260092
>>>>>>>>>>ground-ice0.034537554
>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>>>finals0.020722535
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>I want all the titles which have both "ice" and "hockey" to come
>>>>>
>>>>>above
>>>>>
>>>>>
>>>>>
>>>>>>the
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>rest (to have higher scores)
>>>>>>>>>>Meaning i would wish the results to appear like:
>>>>>>>>>>
>>>>>>>>>>ice hockey
>>>>>>>>>>ice hockey
>>>>>>>>>>ice hockey
>>>>>>>>>>winter Olympics: hockey, ice, medallists
>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>
>>>finals
>>>
>>>
>>>>>>>>>>ice age
>>>>>>>>>>National Hockey League
>>>>>>>>>>Cracking the Ice Age
>>>>>>>>>>ground-ice
>>>>>>>>>>
>>>>>>>>>>My overriden similarity class contains just this method:
>>>>>>>>>>public float coord(int overlap, int maxOverlap) {
>>>>>>>>>>
>>>>>>>>>>return 1.0f;
>>>>>>>>>>
>>>>>>>>>>}
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>I feel it is the weight factor which is producing indesirable
>>>>>
>>>>>results.
>>>>>
>>>>>
>>>>>
>>>>>>Any
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>help in this regard would be highly appreciated.
>>>>>>>>>>
>>>>>>>>>>Regards,
>>>>>>>>>>Niraj
>>>>>>>>>>
>>>>>>>>>>----- Original Message -----
>>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>Hi,
>>>>>>>>>>>
>>>>>>>>>>>Be careful to set the default similarity
>>>>>>>>>>>'Similarity.setDefault(similarity)' before creating your search
>>>>>>
>>>>>>instance
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>>(IndexSearcher).
>>>>>>>>>>>If you change the default similarity after, you'll still use the
>>>
>>>old
>>>
>>>
>>>>>>one.
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
>>>>>
>>>>>searcher.
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>Franck
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>Phil brunet wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>Hi to all.
>>>>>>>>>>>>
>>>>>>>>>>>>Maybe the term frequency is not the only parameter you need to
>>>>>>
>>>>>>override
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>>>to "customize" the score attributed by Lucene.
>>>>>>>>>>>>
>>>>>>>>>>>>Maybe you should consider the normalisation factor, the idf and
>>>
>>>the
>>>
>>>
>>>>>>>>>>>>coord factor ?
>>>>>>>>>>>>
>>>>>>>>>>>>Philippe
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>>>>>>>>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>>>>>>>>>>
>>>>>>>>>>>>>Hi Erik,
>>>>>>>>>>>>>
>>>>>>>>>>>>>Thanks for the suggestion.
>>>>>>>>>>>>>
>>>>>>>>>>>>>I tried this:
>>>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>>>>>>>>>>
>>>>>>>>>>>>>{
>>>>>>>>>>>>>
>>>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>>>
>>>>>>>>>>>>>System.out.println("discounting frequency");
>>>>>>>>>>>>>
>>>>>>>>>>>>>return (float)1;
>>>>>>>>>>>>>
>>>>>>>>>>>>>}
>>>>>>>>>>>>>
>>>>>>>>>>>>>}
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>and in my query class, I used :
>>>>>>>>>>>>>
>>>>>>>>>>>>>Similarity.setDefault(similarity);
>>>>>>>>>>>>>
>>>>>>>>>>>>>Hits hits = is.search(query);
>>>>>>>>>>>>>
>>>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
>>>>>>>>>>>>>
>>>>>>>>>>>>>result = result + hits.score(i);
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>However, this is still not giving me the expected result. Do I
>>>>>
>>>>>need
>>>>>
>>>>>
>>>>>
>>>>>>to
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>do
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>>>something else?
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>Regards,
>>>>>>>>>>>>>Niraj
>>>>>>>>>>>>>
>>>>>>>>>>>>>----- Original Message -----
>>>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Hi,
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>I am having some problems with the score of lucene.
>>>>>>>>>>>>>>>I am trying to get the results displayed according to
>>>
>>>hits.score
>>>
>>>
>>>>>>>>>>and
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>>>>>it is giving the results correctly.
>>>>>>>>>>>>>>>However I do not want the frequency factor to be used for the
>>>>>>>>>>>>>>>computation of the score.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Is it possible to get the score which does not have the
>>>>>
>>>>>frequency
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>>>>factor in it ?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>Have a look at the javadocs for Similarity.  DefaultSimilarity
>>>
>>>is
>>>
>>>
>>>>>>>>>>used
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
>>>
>>>override
>>>
>>>
>>>>>>>>>>this:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>>>> return (float)Math.sqrt(freq);
>>>>>>>>>>>>>>}
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>Erik
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>
>>>>>>>>>>-------------------------------------------------------------------
> 
> -
> 
>>>-
>>>
>>>
>>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>>>
>>>>>lucene-user-unsubscribe@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>>
>>>>>>lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>
>>>lucene-user-unsubscribe@jakarta.apache.org
>>>
>>>
>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>
>>>>>lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>
>>>>>>>>>>>_________________________________________________________________
>>>>>>>>>>>
>>>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
> 
> http://toolbar.msn.fr
> 
>>>>>>>>>>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>>>For additional commands, e-mail:
>>>>>
>>>>>lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>--
>>>>>>>>>>>Franck Brisbart
>>>>>>>>>>>R&D
>>>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>
>>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>>For additional commands, e-mail:
>>>
>>>lucene-user-help@jakarta.apache.org
>>>
>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>>>
>>>>>>>>>--
>>>>>>>>>Franck Brisbart
>>>>>>>>>R&D
>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>
>>>>>>>>>
>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>>
>>>>>>>>
>>>>>>>--
>>>>>>>Franck Brisbart
>>>>>>>R&D
>>>>>>>http://www.kelkoo.com
>>>>>>>
>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>---------------------------------------------------------------------
>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>
>>>>
>>>>--
>>>>Franck Brisbart
>>>>R&D
>>>>http://www.kelkoo.com
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>
>>>
>>
>>--
>>Franck Brisbart
>>R&D
>>http://www.kelkoo.com
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8874-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 13:51:45 2004
Return-Path: <lucene-user-return-8874-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9193 invoked from network); 24 Jun 2004 13:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 13:51:45 -0000
Received: (qmail 2210 invoked by uid 500); 24 Jun 2004 13:51:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2145 invoked by uid 500); 24 Jun 2004 13:51:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2108 invoked by uid 99); 24 Jun 2004 13:51:20 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 06:51:14 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5ODowA31126
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 08:50:58 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 19:21:14 +0530
Message-ID: <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 19:17:14 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01D4_01C45A1F.DB7A5510"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01D4_01C45A1F.DB7A5510
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hi Franck,

I already had a field separately for the title. Replacing the PhraseQuery
with the TermQuery did not help.
I haven't tried the transformation part. What kind of transformation are you
talking about ? How to do this transformation?
Can you provide some more details please?


Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 7:04 PM
Subject: Re: score and frequency


> Forget about the PhraseQuery, I'm stupid, it can't work like that.
> Because the phrase query will boost the documents which contain the
> search and not the documents which match exactly the search. So, the
> exact matches will come down. :-/
>
> You need to have some information about the lucene documents to know if
> it's an exact match. Such as the number of terms in the documents. The
> problem is that this number is store in the lengthNorm and as it's
> encoded on 1 byte, you can't have it precisely. So, you should shunt the
> problem.
> Here's another suggestion (a good one I hope):
> Add another field containing the title as a Keyword. Then you just have
> to replace the PhraseQuery I told you to use by a TermQuery searching
> for the term (newField,search)
> Of course, it will be a bit too restrictive to store the title without
> any transformation. You can for example store in this field the
> concatenation of the token given by your analyzer. Just don't forget to
> do the same transformation also for the search.
> Sorry for the previous posts.
>
> Franck
>
> Niraj Alok wrote:
> > Hi Franck,
> >
> > You seem to be a genius in lucene !
> >
> > I have done finally all that which you have suggested, but now when I am
> > searching for "lion", those terms are coming much below in terms of
scores.
> >
> > This is despite me setting the boost for the phrase query. Infact, this
is
> > resulting in almost all the exact matches to come down.
> >
> >
> > Regards,
> > Niraj
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, June 24, 2004 6:02 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>It may come from the boolean clauses. If you add your sub-queries with a
> >>'required' flag, you'll only get the results matching all the words in
> >>your query.
> >>It can also come from the score which is different. If you set up a
> >>threshold to return the results, it can be the problem.
> >>
> >>Franck
> >>
> >>
> >>Niraj Alok wrote:
> >>
> >>>Hi Franck,
> >>>
> >>>Thank you so much for the detailed explanation.
> >>>However, when I tried to break up my MultiFieldQueryParser into a
series
> >
> > of
> >
> >>>BooleanQueries, the result set has got reduced drastically.
> >>>Any idea why this could be happening?
> >>>
> >>>Regards,
> >>>Niraj
> >>>----- Original Message -----
> >>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>Sent: Thursday, June 24, 2004 2:54 PM
> >>>Subject: Re: score and frequency
> >>>
> >>>
> >>>
> >>>
> >>>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query
for
> >>>>each field.
> >>>>Something like:
> >>>>           BooleanQuery
> >>>>           /   |   |   \
> >>>>         QF1  QF2 QF3  QF4    (QFx=Query for field x)
> >>>>
> >>>>You can still use the MultiFieldQueryParser and create a BooleanQuery
to
> >>>>encapsulate the one parsed + the PhraseQuery, ie:
> >>>>            BooleanQuery(created by you)
> >>>>             /       \
> >>>>           BQ      PhraseQuery
> >>>>
> >>>>Or create the whole query (I think you should do that) and have
> >>>>something like that:
> >>>>            _BooleanQuery__
> >>>>           /   |   |   \   \
> >>>>         QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
> >>>>
> >>>>It's like parsing the following query:
> >>>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
> >>>>(title:"query")~boost
> >>>>
> >>>>
> >>>>Franck
> >>>>
> >>>>
> >>>>Niraj Alok wrote:
> >>>>
> >>>>
> >>>>>I asked the previous question since I do not know how to use
> >
> > PhraseQuery
> >
> >>>>>I have one booleanquery and one query.
> >>>>>The query is Query query =  MultiFieldQueryParser.parse( qs,
searchLoc,
> >>>>>flags, new StandardAnalyzer(stop));
> >>>>>
> >>>>>where qs is the word to be searched upon and searchLoc contains all
the
> >>>
> >>>four
> >>>
> >>>
> >>>>>fields.
> >>>>>
> >>>>>How do I insert a PhraseQuery here for title field only, and that too
> >>>
> >>>with
> >>>
> >>>
> >>>>>its boosted value?
> >>>>>
> >>>>>
> >>>>>Regards,
> >>>>>Niraj
> >>>>>----- Original Message -----
> >>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>Sent: Thursday, June 24, 2004 2:00 PM
> >>>>>Subject: Re: score and frequency
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
> >>>>>>
> >>>>>>Regards,
> >>>>>>Niraj
> >>>>>>----- Original Message -----
> >>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>Sent: Thursday, June 24, 2004 1:22 PM
> >>>>>>Subject: Re: score and frequency
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>Hi,
> >>>>>>>first, what do you consider as an 'exact matching' ? It seems that
> >
> > you
> >
> >>>>>>>treat the search word by word, so 'lion sea' will be an 'exact
match'
> >>>
> >>>of
> >>>
> >>>
> >>>>>>>'sea-lion'.
> >>>>>>>I think you should add a PhraseQuery to your query containing the
> >
> > title
> >
> >>>>>>>and with a big boost. So, you don't need to boost your title field.
> >>>
> >>>Only
> >>>
> >>>
> >>>>>>>the results matching exactly (for the PhraseQuery) will be boosted.
> >>>>>>>
> >>>>>>>Franck
> >>>>>>>
> >>>>>>>
> >>>>>>>Niraj Alok wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Hi Guys,
> >>>>>>>>
> >>>>>>>>I seem to have run into rough weather again.
> >>>>>>>>To describe the problem as concisely as possible, I have four
fields
> >>>>>
> >>>>>to
> >>>>>
> >>>>>
> >>>>>
> >>>>>>search upon : title , first para, rest of the paras and content
(equal
> >>>
> >>>to
> >>>
> >>>
> >>>>>>title + first para + rest of the para) .  I am doing this by using
> >>>>>>MultiFieldQueryParser.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>Now there is a very complicated ranking algrorithm specified by
the
> >>>>>>
> >>>>>>client and I have met most of them except one or two and really need
> >>>
> >>>your
> >>>
> >>>
> >>>>>>help as all my other efforts have failed.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>The most important rule is that exact matching titles should come
> >>>>>
> >>>>>first
> >>>>>
> >>>>>
> >>>>>
> >>>>>>, i.e. get higher scores.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>I have given the highest boost factor to the title than the rest
but
> >>>>>
> >>>>>the
> >>>>>
> >>>>>
> >>>>>
> >>>>>>problem comes up when there is some other title which has got just
one
> >>>>>
> >>>>>word
> >>>>>
> >>>>>
> >>>>>
> >>>>>>matching. For e.g., if I search for lion, there is a title sea-lion
> >>>
> >>>which
> >>>
> >>>
> >>>>>>also has the same boost factor as that of "lion" in the index. Also,
> >>>>>>sea-lion has got some more "lion" in its first para or rest of the
> >
> > paras
> >
> >>>>>>etc. such that its score comes higher than "lion".
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>Is there some way to get the exact matching titles higher scores?
> >>>>>>>>Please reply soon.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>Regards,
> >>>>>>>>Niraj
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>----- Original Message -----
> >>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>Sent: Monday, June 07, 2004 12:50 PM
> >>>>>>>>Subject: Re: score and frequency
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>It seems that you don't the length norm to be used. It's a factor
> >>>>>
> >>>>>which
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>normalize the score of a doc depending on the size of the
searched
> >>>>>
> >>>>>field
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>of the doc. It's the field which make that 'ground ice' has a
> >
> > higher
> >
> >>>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>>>>>>>>Championship: finals' because it only has 2 terms.
> >>>>>>>>>So, I suggest you to override the lengthNorm method and to ignore
> >
> > the
> >
> >>>>>>>>>numTokens parameter.
> >>>>>>>>>NB: The length norm is computed during the indexation and the
norm
> >>>
> >>>are
> >>>
> >>>
> >>>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
> >>>
> >>>re-index
> >>>
> >>>
> >>>>>>>>>your data, and use this similarity during the indexation.
> >>>>>>>>>
> >>>>>>>>>Cheers,
> >>>>>>>>>Franck
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>Niraj Alok wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>I have set the searcher.setSimilarity  as well as also tried
> >
> > setting
> >
> >>>>>>the
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>coord factor to 1.
> >>>>>>>>>>
> >>>>>>>>>>The problem as given by an example is : Lets say I have titles
to
> >
> > be
> >
> >>>>>>>>>>displayed depending upon the search.
> >>>>>>>>>>E.g if i have "ice hockey" as the search item and if it is
default
> >>>>>>>>>>similarity, my results are :
> >>>>>>>>>>
> >>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>ice hockey0.75
> >>>>>>>>>>ice hockey0.75
> >>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>ice age0.073680125
> >>>>>>>>>>National Hockey League0.020266924
> >>>>>>>>>>Cracking the Ice Age0.018420031
> >>>>>>>>>>ground-ice0.011512519
> >>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>finals0.0069075115
> >>>>>>>>>>(the numbers indicating the score).
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>But if i set the similarity as my overridden one, the results
> >>>
> >>>become:
> >>>
> >>>
> >>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>ice hockey0.75
> >>>>>>>>>>ice hockey0.75
> >>>>>>>>>>ice age0.22104037
> >>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>National Hockey League0.060800765
> >>>>>>>>>>Cracking the Ice Age0.055260092
> >>>>>>>>>>ground-ice0.034537554
> >>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>finals0.020722535
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>I want all the titles which have both "ice" and "hockey" to come
> >>>>>
> >>>>>above
> >>>>>
> >>>>>
> >>>>>
> >>>>>>the
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>rest (to have higher scores)
> >>>>>>>>>>Meaning i would wish the results to appear like:
> >>>>>>>>>>
> >>>>>>>>>>ice hockey
> >>>>>>>>>>ice hockey
> >>>>>>>>>>ice hockey
> >>>>>>>>>>winter Olympics: hockey, ice, medallists
> >>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>
> >>>finals
> >>>
> >>>
> >>>>>>>>>>ice age
> >>>>>>>>>>National Hockey League
> >>>>>>>>>>Cracking the Ice Age
> >>>>>>>>>>ground-ice
> >>>>>>>>>>
> >>>>>>>>>>My overriden similarity class contains just this method:
> >>>>>>>>>>public float coord(int overlap, int maxOverlap) {
> >>>>>>>>>>
> >>>>>>>>>>return 1.0f;
> >>>>>>>>>>
> >>>>>>>>>>}
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>I feel it is the weight factor which is producing indesirable
> >>>>>
> >>>>>results.
> >>>>>
> >>>>>
> >>>>>
> >>>>>>Any
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>help in this regard would be highly appreciated.
> >>>>>>>>>>
> >>>>>>>>>>Regards,
> >>>>>>>>>>Niraj
> >>>>>>>>>>
> >>>>>>>>>>----- Original Message -----
> >>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
> >>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>Hi,
> >>>>>>>>>>>
> >>>>>>>>>>>Be careful to set the default similarity
> >>>>>>>>>>>'Similarity.setDefault(similarity)' before creating your search
> >>>>>>
> >>>>>>instance
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>>(IndexSearcher).
> >>>>>>>>>>>If you change the default similarity after, you'll still use
the
> >>>
> >>>old
> >>>
> >>>
> >>>>>>one.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> >>>>>
> >>>>>searcher.
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>Franck
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>Phil brunet wrote:
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>>Hi to all.
> >>>>>>>>>>>>
> >>>>>>>>>>>>Maybe the term frequency is not the only parameter you need to
> >>>>>>
> >>>>>>override
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>>>to "customize" the score attributed by Lucene.
> >>>>>>>>>>>>
> >>>>>>>>>>>>Maybe you should consider the normalisation factor, the idf
and
> >>>
> >>>the
> >>>
> >>>
> >>>>>>>>>>>>coord factor ?
> >>>>>>>>>>>>
> >>>>>>>>>>>>Philippe
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>>>>>>>Reply-To: "Lucene Users List"
<lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Hi Erik,
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Thanks for the suggestion.
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>I tried this:
> >>>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>{
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>System.out.println("discounting frequency");
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>return (float)1;
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>}
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>}
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>and in my query class, I used :
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Similarity.setDefault(similarity);
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Hits hits = is.search(query);
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>result = result + hits.score(i);
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>However, this is still not giving me the expected result. Do
I
> >>>>>
> >>>>>need
> >>>>>
> >>>>>
> >>>>>
> >>>>>>to
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>do
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>>>something else?
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Regards,
> >>>>>>>>>>>>>Niraj
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>>>>>>>>I am trying to get the results displayed according to
> >>>
> >>>hits.score
> >>>
> >>>
> >>>>>>>>>>and
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>>>>>it is giving the results correctly.
> >>>>>>>>>>>>>>>However I do not want the frequency factor to be used for
the
> >>>>>>>>>>>>>>>computation of the score.
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Is it possible to get the score which does not have the
> >>>>>
> >>>>>frequency
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>>factor in it ?
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Have a look at the javadocs for Similarity.
DefaultSimilarity
> >>>
> >>>is
> >>>
> >>>
> >>>>>>>>>>used
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
> >>>
> >>>override
> >>>
> >>>
> >>>>>>>>>>this:
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>> return (float)Math.sqrt(freq);
> >>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Erik
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>
>
>>>>>>>>>>------------------------------------------------------------------
-
> >
> > -
> >
> >>>-
> >>>
> >>>
> >>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>>>
> >>>>>lucene-user-unsubscribe@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>
> >>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>>>>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>
> >>>>>lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>>
> >>
>
>>>>>>>>>>>_________________________________________________________________
> >>>>>>>>>>>
> >>>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
> >
> > http://toolbar.msn.fr
> >
> >>>>>>>>>>>>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>>For additional commands, e-mail:
> >>>>>
> >>>>>lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>--
> >>>>>>>>>>>Franck Brisbart
> >>>>>>>>>>>R&D
> >>>>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>>
> >>>>>>>>>--
> >>>>>>>>>Franck Brisbart
> >>>>>>>>>R&D
> >>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>
> >>>>>>>>>
> >>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>
> >>>>>>>>
> >>>>>>>--
> >>>>>>>Franck Brisbart
> >>>>>>>R&D
> >>>>>>>http://www.kelkoo.com
> >>>>>>>
> >>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>---------------------------------------------------------------------
> >>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>--
> >>>>Franck Brisbart
> >>>>R&D
> >>>>http://www.kelkoo.com
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_01D4_01C45A1F.DB7A5510--



From lucene-user-return-8875-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 14:09:16 2004
Return-Path: <lucene-user-return-8875-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20038 invoked from network); 24 Jun 2004 14:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 14:09:15 -0000
Received: (qmail 65587 invoked by uid 500); 24 Jun 2004 14:09:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65434 invoked by uid 500); 24 Jun 2004 14:09:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65310 invoked by uid 99); 24 Jun 2004 14:09:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 07:09:00 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5OE8m8p011399
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 16:08:49 +0200
Message-ID: <40DAE061.6030605@kelkoo.net>
Date: Thu, 24 Jun 2004 16:08:33 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: Lucene Users List <lucene-user@jakarta.apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu>
In-Reply-To: <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I don't think your field title can be used to search for the exact 
match, because in your field, the title is probably tokenized.
The other field for the title should contain the title as a keyword, ie 
not tokenized. So, if the title is 'sea-lion', the term 
("title","sea-lion") is store.

The transformation I told you is to avoid storing the raw term, ie with 
the case and special characters.
Something like that:
--
StandardAnalyzer analyzer = new StandardAnalyzer();
Token token;
StringBuffer buf = new StringBuffer();
try {
   stream = analyzer.tokenStream("title", new StringReader(title));
   while ((token = stream.next()) != null) {
     qBuf.append(' ');
     qBuf.append(token.termText());
   }
} catch(IOException ioe) {
   ioe.printStackTrace();
}
String transformedTitle = buf.toString().trim();
--
So, if you search for "sea-lion", "sea  lion" or "Sea lion", the 
transformed text will be "sea lion", the TermQuery will be new 
TermQuery(new Term("newField", "sea lion")) and you could then search 
for an exact match.

Franck

Niraj Alok wrote:
> Hi Franck,
> 
> I already had a field separately for the title. Replacing the PhraseQuery
> with the TermQuery did not help.
> I haven't tried the transformation part. What kind of transformation are you
> talking about ? How to do this transformation?
> Can you provide some more details please?
> 
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 7:04 PM
> Subject: Re: score and frequency
> 
> 
> 
>>Forget about the PhraseQuery, I'm stupid, it can't work like that.
>>Because the phrase query will boost the documents which contain the
>>search and not the documents which match exactly the search. So, the
>>exact matches will come down. :-/
>>
>>You need to have some information about the lucene documents to know if
>>it's an exact match. Such as the number of terms in the documents. The
>>problem is that this number is store in the lengthNorm and as it's
>>encoded on 1 byte, you can't have it precisely. So, you should shunt the
>>problem.
>>Here's another suggestion (a good one I hope):
>>Add another field containing the title as a Keyword. Then you just have
>>to replace the PhraseQuery I told you to use by a TermQuery searching
>>for the term (newField,search)
>>Of course, it will be a bit too restrictive to store the title without
>>any transformation. You can for example store in this field the
>>concatenation of the token given by your analyzer. Just don't forget to
>>do the same transformation also for the search.
>>Sorry for the previous posts.
>>
>>Franck
>>
>>Niraj Alok wrote:
>>
>>>Hi Franck,
>>>
>>>You seem to be a genius in lucene !
>>>
>>>I have done finally all that which you have suggested, but now when I am
>>>searching for "lion", those terms are coming much below in terms of
> 
> scores.
> 
>>>This is despite me setting the boost for the phrase query. Infact, this
> 
> is
> 
>>>resulting in almost all the exact matches to come down.
>>>
>>>
>>>Regards,
>>>Niraj
>>>----- Original Message -----
>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Thursday, June 24, 2004 6:02 PM
>>>Subject: Re: score and frequency
>>>
>>>
>>>
>>>
>>>>It may come from the boolean clauses. If you add your sub-queries with a
>>>>'required' flag, you'll only get the results matching all the words in
>>>>your query.
>>>>It can also come from the score which is different. If you set up a
>>>>threshold to return the results, it can be the problem.
>>>>
>>>>Franck
>>>>
>>>>
>>>>Niraj Alok wrote:
>>>>
>>>>
>>>>>Hi Franck,
>>>>>
>>>>>Thank you so much for the detailed explanation.
>>>>>However, when I tried to break up my MultiFieldQueryParser into a
> 
> series
> 
>>>of
>>>
>>>
>>>>>BooleanQueries, the result set has got reduced drastically.
>>>>>Any idea why this could be happening?
>>>>>
>>>>>Regards,
>>>>>Niraj
>>>>>----- Original Message -----
>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>Sent: Thursday, June 24, 2004 2:54 PM
>>>>>Subject: Re: score and frequency
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query
> 
> for
> 
>>>>>>each field.
>>>>>>Something like:
>>>>>>          BooleanQuery
>>>>>>          /   |   |   \
>>>>>>        QF1  QF2 QF3  QF4    (QFx=Query for field x)
>>>>>>
>>>>>>You can still use the MultiFieldQueryParser and create a BooleanQuery
> 
> to
> 
>>>>>>encapsulate the one parsed + the PhraseQuery, ie:
>>>>>>           BooleanQuery(created by you)
>>>>>>            /       \
>>>>>>          BQ      PhraseQuery
>>>>>>
>>>>>>Or create the whole query (I think you should do that) and have
>>>>>>something like that:
>>>>>>           _BooleanQuery__
>>>>>>          /   |   |   \   \
>>>>>>        QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
>>>>>>
>>>>>>It's like parsing the following query:
>>>>>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
>>>>>>(title:"query")~boost
>>>>>>
>>>>>>
>>>>>>Franck
>>>>>>
>>>>>>
>>>>>>Niraj Alok wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>I asked the previous question since I do not know how to use
>>>
>>>PhraseQuery
>>>
>>>
>>>>>>>I have one booleanquery and one query.
>>>>>>>The query is Query query =  MultiFieldQueryParser.parse( qs,
> 
> searchLoc,
> 
>>>>>>>flags, new StandardAnalyzer(stop));
>>>>>>>
>>>>>>>where qs is the word to be searched upon and searchLoc contains all
> 
> the
> 
>>>>>four
>>>>>
>>>>>
>>>>>
>>>>>>>fields.
>>>>>>>
>>>>>>>How do I insert a PhraseQuery here for title field only, and that too
>>>>>
>>>>>with
>>>>>
>>>>>
>>>>>
>>>>>>>its boosted value?
>>>>>>>
>>>>>>>
>>>>>>>Regards,
>>>>>>>Niraj
>>>>>>>----- Original Message -----
>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>Sent: Thursday, June 24, 2004 2:00 PM
>>>>>>>Subject: Re: score and frequency
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
>>>>>>>>
>>>>>>>>Regards,
>>>>>>>>Niraj
>>>>>>>>----- Original Message -----
>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>Sent: Thursday, June 24, 2004 1:22 PM
>>>>>>>>Subject: Re: score and frequency
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>Hi,
>>>>>>>>>first, what do you consider as an 'exact matching' ? It seems that
>>>
>>>you
>>>
>>>
>>>>>>>>>treat the search word by word, so 'lion sea' will be an 'exact
> 
> match'
> 
>>>>>of
>>>>>
>>>>>
>>>>>
>>>>>>>>>'sea-lion'.
>>>>>>>>>I think you should add a PhraseQuery to your query containing the
>>>
>>>title
>>>
>>>
>>>>>>>>>and with a big boost. So, you don't need to boost your title field.
>>>>>
>>>>>Only
>>>>>
>>>>>
>>>>>
>>>>>>>>>the results matching exactly (for the PhraseQuery) will be boosted.
>>>>>>>>>
>>>>>>>>>Franck
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>Niraj Alok wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>Hi Guys,
>>>>>>>>>>
>>>>>>>>>>I seem to have run into rough weather again.
>>>>>>>>>>To describe the problem as concisely as possible, I have four
> 
> fields
> 
>>>>>>>to
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>search upon : title , first para, rest of the paras and content
> 
> (equal
> 
>>>>>to
>>>>>
>>>>>
>>>>>
>>>>>>>>title + first para + rest of the para) .  I am doing this by using
>>>>>>>>MultiFieldQueryParser.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>Now there is a very complicated ranking algrorithm specified by
> 
> the
> 
>>>>>>>>client and I have met most of them except one or two and really need
>>>>>
>>>>>your
>>>>>
>>>>>
>>>>>
>>>>>>>>help as all my other efforts have failed.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>The most important rule is that exact matching titles should come
>>>>>>>
>>>>>>>first
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>, i.e. get higher scores.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>I have given the highest boost factor to the title than the rest
> 
> but
> 
>>>>>>>the
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>problem comes up when there is some other title which has got just
> 
> one
> 
>>>>>>>word
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>matching. For e.g., if I search for lion, there is a title sea-lion
>>>>>
>>>>>which
>>>>>
>>>>>
>>>>>
>>>>>>>>also has the same boost factor as that of "lion" in the index. Also,
>>>>>>>>sea-lion has got some more "lion" in its first para or rest of the
>>>
>>>paras
>>>
>>>
>>>>>>>>etc. such that its score comes higher than "lion".
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>Is there some way to get the exact matching titles higher scores?
>>>>>>>>>>Please reply soon.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>Regards,
>>>>>>>>>>Niraj
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>----- Original Message -----
>>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>Sent: Monday, June 07, 2004 12:50 PM
>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>It seems that you don't the length norm to be used. It's a factor
>>>>>>>
>>>>>>>which
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>normalize the score of a doc depending on the size of the
> 
> searched
> 
>>>>>>>field
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>of the doc. It's the field which make that 'ground ice' has a
>>>
>>>higher
>>>
>>>
>>>>>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
>>>>>>>>>>>Championship: finals' because it only has 2 terms.
>>>>>>>>>>>So, I suggest you to override the lengthNorm method and to ignore
>>>
>>>the
>>>
>>>
>>>>>>>>>>>numTokens parameter.
>>>>>>>>>>>NB: The length norm is computed during the indexation and the
> 
> norm
> 
>>>>>are
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
>>>>>
>>>>>re-index
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>your data, and use this similarity during the indexation.
>>>>>>>>>>>
>>>>>>>>>>>Cheers,
>>>>>>>>>>>Franck
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>Niraj Alok wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>I have set the searcher.setSimilarity  as well as also tried
>>>
>>>setting
>>>
>>>
>>>>>>>>the
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>coord factor to 1.
>>>>>>>>>>>>
>>>>>>>>>>>>The problem as given by an example is : Lets say I have titles
> 
> to
> 
>>>be
>>>
>>>
>>>>>>>>>>>>displayed depending upon the search.
>>>>>>>>>>>>E.g if i have "ice hockey" as the search item and if it is
> 
> default
> 
>>>>>>>>>>>>similarity, my results are :
>>>>>>>>>>>>
>>>>>>>>>>>>ice hockey0.99999994
>>>>>>>>>>>>ice hockey0.75
>>>>>>>>>>>>ice hockey0.75
>>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>>>>>ice age0.073680125
>>>>>>>>>>>>National Hockey League0.020266924
>>>>>>>>>>>>Cracking the Ice Age0.018420031
>>>>>>>>>>>>ground-ice0.011512519
>>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>>>>>finals0.0069075115
>>>>>>>>>>>>(the numbers indicating the score).
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>But if i set the similarity as my overridden one, the results
>>>>>
>>>>>become:
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>ice hockey0.99999994
>>>>>>>>>>>>ice hockey0.75
>>>>>>>>>>>>ice hockey0.75
>>>>>>>>>>>>ice age0.22104037
>>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
>>>>>>>>>>>>National Hockey League0.060800765
>>>>>>>>>>>>Cracking the Ice Age0.055260092
>>>>>>>>>>>>ground-ice0.034537554
>>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>>>>>>>>finals0.020722535
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>I want all the titles which have both "ice" and "hockey" to come
>>>>>>>
>>>>>>>above
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>the
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>rest (to have higher scores)
>>>>>>>>>>>>Meaning i would wish the results to appear like:
>>>>>>>>>>>>
>>>>>>>>>>>>ice hockey
>>>>>>>>>>>>ice hockey
>>>>>>>>>>>>ice hockey
>>>>>>>>>>>>winter Olympics: hockey, ice, medallists
>>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
>>>>>
>>>>>finals
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>ice age
>>>>>>>>>>>>National Hockey League
>>>>>>>>>>>>Cracking the Ice Age
>>>>>>>>>>>>ground-ice
>>>>>>>>>>>>
>>>>>>>>>>>>My overriden similarity class contains just this method:
>>>>>>>>>>>>public float coord(int overlap, int maxOverlap) {
>>>>>>>>>>>>
>>>>>>>>>>>>return 1.0f;
>>>>>>>>>>>>
>>>>>>>>>>>>}
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>I feel it is the weight factor which is producing indesirable
>>>>>>>
>>>>>>>results.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>Any
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>help in this regard would be highly appreciated.
>>>>>>>>>>>>
>>>>>>>>>>>>Regards,
>>>>>>>>>>>>Niraj
>>>>>>>>>>>>
>>>>>>>>>>>>----- Original Message -----
>>>>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
>>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>Hi,
>>>>>>>>>>>>>
>>>>>>>>>>>>>Be careful to set the default similarity
>>>>>>>>>>>>>'Similarity.setDefault(similarity)' before creating your search
>>>>>>>>
>>>>>>>>instance
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>>(IndexSearcher).
>>>>>>>>>>>>>If you change the default similarity after, you'll still use
> 
> the
> 
>>>>>old
>>>>>
>>>>>
>>>>>
>>>>>>>>one.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
>>>>>>>
>>>>>>>searcher.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>>>Franck
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>Phil brunet wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>>Hi to all.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>Maybe the term frequency is not the only parameter you need to
>>>>>>>>
>>>>>>>>override
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>>>to "customize" the score attributed by Lucene.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>Maybe you should consider the normalisation factor, the idf
> 
> and
> 
>>>>>the
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>>>coord factor ?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>Philippe
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
>>>>>>>>>>>>>>>Reply-To: "Lucene Users List"
> 
> <lucene-user@jakarta.apache.org>
> 
>>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Hi Erik,
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Thanks for the suggestion.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>I tried this:
>>>>>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>{
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>System.out.println("discounting frequency");
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>return (float)1;
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>}
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>}
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>and in my query class, I used :
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Similarity.setDefault(similarity);
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Hits hits = is.search(query);
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>result = result + hits.score(i);
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>However, this is still not giving me the expected result. Do
> 
> I
> 
>>>>>>>need
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>to
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>>>do
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>>something else?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>Regards,
>>>>>>>>>>>>>>>Niraj
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>----- Original Message -----
>>>>>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
>>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
>>>>>>>>>>>>>>>Subject: Re: score and frequency
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>Hi,
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>I am having some problems with the score of lucene.
>>>>>>>>>>>>>>>>>I am trying to get the results displayed according to
>>>>>
>>>>>hits.score
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>and
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>it is giving the results correctly.
>>>>>>>>>>>>>>>>>However I do not want the frequency factor to be used for
> 
> the
> 
>>>>>>>>>>>>>>>>>computation of the score.
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>Is it possible to get the score which does not have the
>>>>>>>
>>>>>>>frequency
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>>>>>>>factor in it ?
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>Have a look at the javadocs for Similarity.
> 
> DefaultSimilarity
> 
>>>>>is
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>used
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
>>>>>
>>>>>override
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>this:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>>>public float tf(float freq) {
>>>>>>>>>>>>>>>>return (float)Math.sqrt(freq);
>>>>>>>>>>>>>>>>}
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>Erik
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>>------------------------------------------------------------------
> 
> -
> 
>>>-
>>>
>>>
>>>>>-
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>>>>>
>>>>>>>lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>>>>
>>>>>>>>lucene-user-help@jakarta.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>>-------------------------------------------------------------------
> 
> -
> 
>>>-
>>>
>>>
>>>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>>>
>>>>>lucene-user-unsubscribe@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>>>
>>>>>>>lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>
>>>>>>>>>>>>_________________________________________________________________
>>>>>>>>>>>>
>>>>>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
>>>
>>>http://toolbar.msn.fr
>>>
>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>
>>>lucene-user-unsubscribe@jakarta.apache.org
>>>
>>>
>>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>>>
>>>>>>>lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>>>>>>--
>>>>>>>>>>>>>Franck Brisbart
>>>>>>>>>>>>>R&D
>>>>>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>>>To unsubscribe, e-mail:
>>>
>>>lucene-user-unsubscribe@jakarta.apache.org
>>>
>>>
>>>>>>>>>>>>>For additional commands, e-mail:
>>>>>
>>>>>lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>>>For additional commands, e-mail:
>>>
>>>lucene-user-help@jakarta.apache.org
>>>
>>>
>>>>>>>>>>>--
>>>>>>>>>>>Franck Brisbart
>>>>>>>>>>>R&D
>>>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>>>
>>>>>>>>>>>
>>>>
>>>>>>>>>--------------------------------------------------------------------
> 
> -
> 
>>>>>>>>>>>To unsubscribe, e-mail:
> 
> lucene-user-unsubscribe@jakarta.apache.org
> 
>>>>>>>>>>>For additional commands, e-mail:
>>>
>>>lucene-user-help@jakarta.apache.org
>>>
>>>
>>>>>>>>>>
>>>>>>>>>--
>>>>>>>>>Franck Brisbart
>>>>>>>>>R&D
>>>>>>>>>http://www.kelkoo.com
>>>>>>>>>
>>>>>>>>>
>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>>For additional commands, e-mail:
> 
> lucene-user-help@jakarta.apache.org
> 
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>
>>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>--
>>>>>>Franck Brisbart
>>>>>>R&D
>>>>>>http://www.kelkoo.com
>>>>>>
>>>>>>
>>>>>>---------------------------------------------------------------------
>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>
>>>>>
>>>>--
>>>>Franck Brisbart
>>>>R&D
>>>>http://www.kelkoo.com
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>
>>>
>>
>>--
>>Franck Brisbart
>>R&D
>>http://www.kelkoo.com
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8876-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 14:19:09 2004
Return-Path: <lucene-user-return-8876-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24746 invoked from network); 24 Jun 2004 14:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 14:19:09 -0000
Received: (qmail 95767 invoked by uid 500); 24 Jun 2004 14:18:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95664 invoked by uid 500); 24 Jun 2004 14:18:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95628 invoked by uid 99); 24 Jun 2004 14:18:55 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 07:18:52 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5OEISA31805
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 09:18:29 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 19:48:36 +0530
Message-ID: <021701c459f5$9a8518d0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu> <40DAE061.6030605@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 19:44:46 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0213_01C45A23.B4127440"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0213_01C45A23.B4127440
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hi Franck,

That involves a lot of work and most importantly, reindexing, which takes 4
hours for the data I have (approx. 800 MB) .
I will try the same and will get back to you. You really deserve a treat frm
my side :)


Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 7:38 PM
Subject: Re: score and frequency


> I don't think your field title can be used to search for the exact
> match, because in your field, the title is probably tokenized.
> The other field for the title should contain the title as a keyword, ie
> not tokenized. So, if the title is 'sea-lion', the term
> ("title","sea-lion") is store.
>
> The transformation I told you is to avoid storing the raw term, ie with
> the case and special characters.
> Something like that:
> --
> StandardAnalyzer analyzer = new StandardAnalyzer();
> Token token;
> StringBuffer buf = new StringBuffer();
> try {
>    stream = analyzer.tokenStream("title", new StringReader(title));
>    while ((token = stream.next()) != null) {
>      qBuf.append(' ');
>      qBuf.append(token.termText());
>    }
> } catch(IOException ioe) {
>    ioe.printStackTrace();
> }
> String transformedTitle = buf.toString().trim();
> --
> So, if you search for "sea-lion", "sea  lion" or "Sea lion", the
> transformed text will be "sea lion", the TermQuery will be new
> TermQuery(new Term("newField", "sea lion")) and you could then search
> for an exact match.
>
> Franck
>
> Niraj Alok wrote:
> > Hi Franck,
> >
> > I already had a field separately for the title. Replacing the
PhraseQuery
> > with the TermQuery did not help.
> > I haven't tried the transformation part. What kind of transformation are
you
> > talking about ? How to do this transformation?
> > Can you provide some more details please?
> >
> >
> > Regards,
> > Niraj
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, June 24, 2004 7:04 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>Forget about the PhraseQuery, I'm stupid, it can't work like that.
> >>Because the phrase query will boost the documents which contain the
> >>search and not the documents which match exactly the search. So, the
> >>exact matches will come down. :-/
> >>
> >>You need to have some information about the lucene documents to know if
> >>it's an exact match. Such as the number of terms in the documents. The
> >>problem is that this number is store in the lengthNorm and as it's
> >>encoded on 1 byte, you can't have it precisely. So, you should shunt the
> >>problem.
> >>Here's another suggestion (a good one I hope):
> >>Add another field containing the title as a Keyword. Then you just have
> >>to replace the PhraseQuery I told you to use by a TermQuery searching
> >>for the term (newField,search)
> >>Of course, it will be a bit too restrictive to store the title without
> >>any transformation. You can for example store in this field the
> >>concatenation of the token given by your analyzer. Just don't forget to
> >>do the same transformation also for the search.
> >>Sorry for the previous posts.
> >>
> >>Franck
> >>
> >>Niraj Alok wrote:
> >>
> >>>Hi Franck,
> >>>
> >>>You seem to be a genius in lucene !
> >>>
> >>>I have done finally all that which you have suggested, but now when I
am
> >>>searching for "lion", those terms are coming much below in terms of
> >
> > scores.
> >
> >>>This is despite me setting the boost for the phrase query. Infact, this
> >
> > is
> >
> >>>resulting in almost all the exact matches to come down.
> >>>
> >>>
> >>>Regards,
> >>>Niraj
> >>>----- Original Message -----
> >>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>Sent: Thursday, June 24, 2004 6:02 PM
> >>>Subject: Re: score and frequency
> >>>
> >>>
> >>>
> >>>
> >>>>It may come from the boolean clauses. If you add your sub-queries with
a
> >>>>'required' flag, you'll only get the results matching all the words in
> >>>>your query.
> >>>>It can also come from the score which is different. If you set up a
> >>>>threshold to return the results, it can be the problem.
> >>>>
> >>>>Franck
> >>>>
> >>>>
> >>>>Niraj Alok wrote:
> >>>>
> >>>>
> >>>>>Hi Franck,
> >>>>>
> >>>>>Thank you so much for the detailed explanation.
> >>>>>However, when I tried to break up my MultiFieldQueryParser into a
> >
> > series
> >
> >>>of
> >>>
> >>>
> >>>>>BooleanQueries, the result set has got reduced drastically.
> >>>>>Any idea why this could be happening?
> >>>>>
> >>>>>Regards,
> >>>>>Niraj
> >>>>>----- Original Message -----
> >>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>Sent: Thursday, June 24, 2004 2:54 PM
> >>>>>Subject: Re: score and frequency
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query
> >
> > for
> >
> >>>>>>each field.
> >>>>>>Something like:
> >>>>>>          BooleanQuery
> >>>>>>          /   |   |   \
> >>>>>>        QF1  QF2 QF3  QF4    (QFx=Query for field x)
> >>>>>>
> >>>>>>You can still use the MultiFieldQueryParser and create a
BooleanQuery
> >
> > to
> >
> >>>>>>encapsulate the one parsed + the PhraseQuery, ie:
> >>>>>>           BooleanQuery(created by you)
> >>>>>>            /       \
> >>>>>>          BQ      PhraseQuery
> >>>>>>
> >>>>>>Or create the whole query (I think you should do that) and have
> >>>>>>something like that:
> >>>>>>           _BooleanQuery__
> >>>>>>          /   |   |   \   \
> >>>>>>        QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
> >>>>>>
> >>>>>>It's like parsing the following query:
> >>>>>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
> >>>>>>(title:"query")~boost
> >>>>>>
> >>>>>>
> >>>>>>Franck
> >>>>>>
> >>>>>>
> >>>>>>Niraj Alok wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>I asked the previous question since I do not know how to use
> >>>
> >>>PhraseQuery
> >>>
> >>>
> >>>>>>>I have one booleanquery and one query.
> >>>>>>>The query is Query query =  MultiFieldQueryParser.parse( qs,
> >
> > searchLoc,
> >
> >>>>>>>flags, new StandardAnalyzer(stop));
> >>>>>>>
> >>>>>>>where qs is the word to be searched upon and searchLoc contains all
> >
> > the
> >
> >>>>>four
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>fields.
> >>>>>>>
> >>>>>>>How do I insert a PhraseQuery here for title field only, and that
too
> >>>>>
> >>>>>with
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>its boosted value?
> >>>>>>>
> >>>>>>>
> >>>>>>>Regards,
> >>>>>>>Niraj
> >>>>>>>----- Original Message -----
> >>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>Sent: Thursday, June 24, 2004 2:00 PM
> >>>>>>>Subject: Re: score and frequency
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
> >>>>>>>>
> >>>>>>>>Regards,
> >>>>>>>>Niraj
> >>>>>>>>----- Original Message -----
> >>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>Sent: Thursday, June 24, 2004 1:22 PM
> >>>>>>>>Subject: Re: score and frequency
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>Hi,
> >>>>>>>>>first, what do you consider as an 'exact matching' ? It seems
that
> >>>
> >>>you
> >>>
> >>>
> >>>>>>>>>treat the search word by word, so 'lion sea' will be an 'exact
> >
> > match'
> >
> >>>>>of
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>'sea-lion'.
> >>>>>>>>>I think you should add a PhraseQuery to your query containing the
> >>>
> >>>title
> >>>
> >>>
> >>>>>>>>>and with a big boost. So, you don't need to boost your title
field.
> >>>>>
> >>>>>Only
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>the results matching exactly (for the PhraseQuery) will be
boosted.
> >>>>>>>>>
> >>>>>>>>>Franck
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>Niraj Alok wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>Hi Guys,
> >>>>>>>>>>
> >>>>>>>>>>I seem to have run into rough weather again.
> >>>>>>>>>>To describe the problem as concisely as possible, I have four
> >
> > fields
> >
> >>>>>>>to
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>search upon : title , first para, rest of the paras and content
> >
> > (equal
> >
> >>>>>to
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>title + first para + rest of the para) .  I am doing this by using
> >>>>>>>>MultiFieldQueryParser.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>Now there is a very complicated ranking algrorithm specified by
> >
> > the
> >
> >>>>>>>>client and I have met most of them except one or two and really
need
> >>>>>
> >>>>>your
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>help as all my other efforts have failed.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>The most important rule is that exact matching titles should
come
> >>>>>>>
> >>>>>>>first
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>, i.e. get higher scores.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>I have given the highest boost factor to the title than the rest
> >
> > but
> >
> >>>>>>>the
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>problem comes up when there is some other title which has got just
> >
> > one
> >
> >>>>>>>word
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>matching. For e.g., if I search for lion, there is a title
sea-lion
> >>>>>
> >>>>>which
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>also has the same boost factor as that of "lion" in the index.
Also,
> >>>>>>>>sea-lion has got some more "lion" in its first para or rest of the
> >>>
> >>>paras
> >>>
> >>>
> >>>>>>>>etc. such that its score comes higher than "lion".
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>Is there some way to get the exact matching titles higher
scores?
> >>>>>>>>>>Please reply soon.
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>Regards,
> >>>>>>>>>>Niraj
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>----- Original Message -----
> >>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>Sent: Monday, June 07, 2004 12:50 PM
> >>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>It seems that you don't the length norm to be used. It's a
factor
> >>>>>>>
> >>>>>>>which
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>normalize the score of a doc depending on the size of the
> >
> > searched
> >
> >>>>>>>field
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>of the doc. It's the field which make that 'ground ice' has a
> >>>
> >>>higher
> >>>
> >>>
> >>>>>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>>>>>>>>>>Championship: finals' because it only has 2 terms.
> >>>>>>>>>>>So, I suggest you to override the lengthNorm method and to
ignore
> >>>
> >>>the
> >>>
> >>>
> >>>>>>>>>>>numTokens parameter.
> >>>>>>>>>>>NB: The length norm is computed during the indexation and the
> >
> > norm
> >
> >>>>>are
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
> >>>>>
> >>>>>re-index
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>your data, and use this similarity during the indexation.
> >>>>>>>>>>>
> >>>>>>>>>>>Cheers,
> >>>>>>>>>>>Franck
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>Niraj Alok wrote:
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>>I have set the searcher.setSimilarity  as well as also tried
> >>>
> >>>setting
> >>>
> >>>
> >>>>>>>>the
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>coord factor to 1.
> >>>>>>>>>>>>
> >>>>>>>>>>>>The problem as given by an example is : Lets say I have titles
> >
> > to
> >
> >>>be
> >>>
> >>>
> >>>>>>>>>>>>displayed depending upon the search.
> >>>>>>>>>>>>E.g if i have "ice hockey" as the search item and if it is
> >
> > default
> >
> >>>>>>>>>>>>similarity, my results are :
> >>>>>>>>>>>>
> >>>>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>>>ice age0.073680125
> >>>>>>>>>>>>National Hockey League0.020266924
> >>>>>>>>>>>>Cracking the Ice Age0.018420031
> >>>>>>>>>>>>ground-ice0.011512519
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>>>finals0.0069075115
> >>>>>>>>>>>>(the numbers indicating the score).
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>But if i set the similarity as my overridden one, the results
> >>>>>
> >>>>>become:
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice age0.22104037
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>>>National Hockey League0.060800765
> >>>>>>>>>>>>Cracking the Ice Age0.055260092
> >>>>>>>>>>>>ground-ice0.034537554
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>>>finals0.020722535
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>I want all the titles which have both "ice" and "hockey" to
come
> >>>>>>>
> >>>>>>>above
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>the
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>rest (to have higher scores)
> >>>>>>>>>>>>Meaning i would wish the results to appear like:
> >>>>>>>>>>>>
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>
> >>>>>finals
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>ice age
> >>>>>>>>>>>>National Hockey League
> >>>>>>>>>>>>Cracking the Ice Age
> >>>>>>>>>>>>ground-ice
> >>>>>>>>>>>>
> >>>>>>>>>>>>My overriden similarity class contains just this method:
> >>>>>>>>>>>>public float coord(int overlap, int maxOverlap) {
> >>>>>>>>>>>>
> >>>>>>>>>>>>return 1.0f;
> >>>>>>>>>>>>
> >>>>>>>>>>>>}
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>I feel it is the weight factor which is producing indesirable
> >>>>>>>
> >>>>>>>results.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Any
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>help in this regard would be highly appreciated.
> >>>>>>>>>>>>
> >>>>>>>>>>>>Regards,
> >>>>>>>>>>>>Niraj
> >>>>>>>>>>>>
> >>>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
> >>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Be careful to set the default similarity
> >>>>>>>>>>>>>'Similarity.setDefault(similarity)' before creating your
search
> >>>>>>>>
> >>>>>>>>instance
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>(IndexSearcher).
> >>>>>>>>>>>>>If you change the default similarity after, you'll still use
> >
> > the
> >
> >>>>>old
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>one.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> >>>>>>>
> >>>>>>>searcher.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>Franck
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Phil brunet wrote:
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>>Hi to all.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Maybe the term frequency is not the only parameter you need
to
> >>>>>>>>
> >>>>>>>>override
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>>to "customize" the score attributed by Lucene.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Maybe you should consider the normalisation factor, the idf
> >
> > and
> >
> >>>>>the
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>coord factor ?
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Philippe
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>>>>>>>>>Reply-To: "Lucene Users List"
> >
> > <lucene-user@jakarta.apache.org>
> >
> >>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Hi Erik,
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Thanks for the suggestion.
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>I tried this:
> >>>>>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>{
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>System.out.println("discounting frequency");
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>return (float)1;
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>and in my query class, I used :
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Similarity.setDefault(similarity);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Hits hits = is.search(query);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>result = result + hits.score(i);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>However, this is still not giving me the expected result.
Do
> >
> > I
> >
> >>>>>>>need
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>to
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>do
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>something else?
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Regards,
> >>>>>>>>>>>>>>>Niraj
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>>>>>>>>>>I am trying to get the results displayed according to
> >>>>>
> >>>>>hits.score
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>and
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>it is giving the results correctly.
> >>>>>>>>>>>>>>>>>However I do not want the frequency factor to be used for
> >
> > the
> >
> >>>>>>>>>>>>>>>>>computation of the score.
> >>>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>Is it possible to get the score which does not have the
> >>>>>>>
> >>>>>>>frequency
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>>>>>factor in it ?
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>Have a look at the javadocs for Similarity.
> >
> > DefaultSimilarity
> >
> >>>>>is
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>used
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
> >>>>>
> >>>>>override
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>this:
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>>>>return (float)Math.sqrt(freq);
> >>>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>Erik
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>
>
>>>>>>>>>>>-----------------------------------------------------------------
-
> >
> > -
> >
> >>>-
> >>>
> >>>
> >>>>>-
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>>
> >>>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
>
>>>>>>>>>>------------------------------------------------------------------
-
> >
> > -
> >
> >>>-
> >>>
> >>>
> >>>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>>>
> >>>>>lucene-user-unsubscribe@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>
>
>>>>>>>>>>>>________________________________________________________________
_
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
> >>>
> >>>http://toolbar.msn.fr
> >>>
> >>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>--
> >>>>>>>>>>>>>Franck Brisbart
> >>>>>>>>>>>>>R&D
> >>>>>>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>
> >>>>>lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>--
> >>>>>>>>>>>Franck Brisbart
> >>>>>>>>>>>R&D
> >>>>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>
> >>>>>>>>>--
> >>>>>>>>>Franck Brisbart
> >>>>>>>>>R&D
> >>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>
> >>>>>>>>>
> >>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>--
> >>>>>>Franck Brisbart
> >>>>>>R&D
> >>>>>>http://www.kelkoo.com
> >>>>>>
> >>>>>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>
> >>>>>
> >>>>--
> >>>>Franck Brisbart
> >>>>R&D
> >>>>http://www.kelkoo.com
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_0213_01C45A23.B4127440--



From lucene-user-return-8877-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 14:49:16 2004
Return-Path: <lucene-user-return-8877-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43554 invoked from network); 24 Jun 2004 14:49:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 14:49:16 -0000
Received: (qmail 10695 invoked by uid 500); 24 Jun 2004 14:49:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10481 invoked by uid 500); 24 Jun 2004 14:49:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10414 invoked by uid 99); 24 Jun 2004 14:49:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [193.137.127.65] (HELO asterix.uninova.pt) (193.137.127.65)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Thu, 24 Jun 2004 07:49:07 -0700
Received: (qmail 25657 invoked from network); 24 Jun 2004 14:48:37 -0000
Received: from pcport-hmc.uninova.pt (HELO pcporthmc) (172.16.3.91)
  by asterix.uninova.pt with SMTP; 24 Jun 2004 14:48:37 -0000
Message-ID: <006001c459fa$55e53fc0$5b0310ac@pcporthmc>
From: "Hugo" <hugo_carvalho@netcabo.pt>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <LOEGLEEGOAKBOLAJCCKIEEMACAAA.karthik@controlnet.co.in>
Subject: Use  wildcards in field names?
Date: Thu, 24 Jun 2004 15:48:38 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I was wondering if is it possible to use wild cards in fiel names?

this is my case: i have a file that is term as respective descriptions,
separated by a space, like this:

bed place to sleep
chair place to seat down
glass recipient of liquids
pen something to write with
hat something to protect your hed

and what i want is to perform searches in both sides of the file, the terms
and the descriptions, and be able to use wildcards in both.
Does any one know how to do this having just this file?

I thougth naming the field after the term, and put the descriptions in the
field, but then i can't use wildcards to search in fields names...

I'd appreciate any kind of help!

Thank you in advance, Hugo.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8878-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 14:58:28 2004
Return-Path: <lucene-user-return-8878-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48951 invoked from network); 24 Jun 2004 14:58:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 14:58:28 -0000
Received: (qmail 42478 invoked by uid 500); 24 Jun 2004 14:57:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42371 invoked by uid 500); 24 Jun 2004 14:57:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42215 invoked by uid 99); 24 Jun 2004 14:57:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 07:57:55 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5OEvgc18776
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 09:57:42 -0500
Message-ID: <40DAEBE1.5020906@getopt.org>
Date: Thu, 24 Jun 2004 16:57:37 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu> <40DAE061.6030605@kelkoo.net> <021701c459f5$9a8518d0$b101a8c0@emacmillan.edu>
In-Reply-To: <021701c459f5$9a8518d0$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Niraj Alok wrote:

> Hi Franck,
> 
> That involves a lot of work and most importantly, reindexing, which takes 4
> hours for the data I have (approx. 800 MB) .
> I will try the same and will get back to you. You really deserve a treat frm
> my side :)

[ 30kB of text deleted ]

Folks, please trim down this 30kB you send with every reply made to the 
list...

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8879-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 14:59:30 2004
Return-Path: <lucene-user-return-8879-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49616 invoked from network); 24 Jun 2004 14:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 14:59:29 -0000
Received: (qmail 47103 invoked by uid 500); 24 Jun 2004 14:58:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46950 invoked by uid 500); 24 Jun 2004 14:58:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46728 invoked by uid 99); 24 Jun 2004 14:58:50 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 07:58:46 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5OEwPA32599
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 09:58:25 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 20:29:08 +0530
Message-ID: <022b01c459fb$446e5000$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu> <40DAE061.6030605@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 20:25:19 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0227_01C45A29.5E09DC40"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0227_01C45A29.5E09DC40
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hi Franck,

I have tried the same with a small dataset I have. But it is not working as
expected :(
Any further ideas?

Regards,
Niraj
----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 7:38 PM
Subject: Re: score and frequency


> I don't think your field title can be used to search for the exact
> match, because in your field, the title is probably tokenized.
> The other field for the title should contain the title as a keyword, ie
> not tokenized. So, if the title is 'sea-lion', the term
> ("title","sea-lion") is store.
>
> The transformation I told you is to avoid storing the raw term, ie with
> the case and special characters.
> Something like that:
> --
> StandardAnalyzer analyzer = new StandardAnalyzer();
> Token token;
> StringBuffer buf = new StringBuffer();
> try {
>    stream = analyzer.tokenStream("title", new StringReader(title));
>    while ((token = stream.next()) != null) {
>      qBuf.append(' ');
>      qBuf.append(token.termText());
>    }
> } catch(IOException ioe) {
>    ioe.printStackTrace();
> }
> String transformedTitle = buf.toString().trim();
> --
> So, if you search for "sea-lion", "sea  lion" or "Sea lion", the
> transformed text will be "sea lion", the TermQuery will be new
> TermQuery(new Term("newField", "sea lion")) and you could then search
> for an exact match.
>
> Franck
>
> Niraj Alok wrote:
> > Hi Franck,
> >
> > I already had a field separately for the title. Replacing the
PhraseQuery
> > with the TermQuery did not help.
> > I haven't tried the transformation part. What kind of transformation are
you
> > talking about ? How to do this transformation?
> > Can you provide some more details please?
> >
> >
> > Regards,
> > Niraj
> > ----- Original Message -----
> > From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, June 24, 2004 7:04 PM
> > Subject: Re: score and frequency
> >
> >
> >
> >>Forget about the PhraseQuery, I'm stupid, it can't work like that.
> >>Because the phrase query will boost the documents which contain the
> >>search and not the documents which match exactly the search. So, the
> >>exact matches will come down. :-/
> >>
> >>You need to have some information about the lucene documents to know if
> >>it's an exact match. Such as the number of terms in the documents. The
> >>problem is that this number is store in the lengthNorm and as it's
> >>encoded on 1 byte, you can't have it precisely. So, you should shunt the
> >>problem.
> >>Here's another suggestion (a good one I hope):
> >>Add another field containing the title as a Keyword. Then you just have
> >>to replace the PhraseQuery I told you to use by a TermQuery searching
> >>for the term (newField,search)
> >>Of course, it will be a bit too restrictive to store the title without
> >>any transformation. You can for example store in this field the
> >>concatenation of the token given by your analyzer. Just don't forget to
> >>do the same transformation also for the search.
> >>Sorry for the previous posts.
> >>
> >>Franck
> >>
> >>Niraj Alok wrote:
> >>
> >>>Hi Franck,
> >>>
> >>>You seem to be a genius in lucene !
> >>>
> >>>I have done finally all that which you have suggested, but now when I
am
> >>>searching for "lion", those terms are coming much below in terms of
> >
> > scores.
> >
> >>>This is despite me setting the boost for the phrase query. Infact, this
> >
> > is
> >
> >>>resulting in almost all the exact matches to come down.
> >>>
> >>>
> >>>Regards,
> >>>Niraj
> >>>----- Original Message -----
> >>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>Sent: Thursday, June 24, 2004 6:02 PM
> >>>Subject: Re: score and frequency
> >>>
> >>>
> >>>
> >>>
> >>>>It may come from the boolean clauses. If you add your sub-queries with
a
> >>>>'required' flag, you'll only get the results matching all the words in
> >>>>your query.
> >>>>It can also come from the score which is different. If you set up a
> >>>>threshold to return the results, it can be the problem.
> >>>>
> >>>>Franck
> >>>>
> >>>>
> >>>>Niraj Alok wrote:
> >>>>
> >>>>
> >>>>>Hi Franck,
> >>>>>
> >>>>>Thank you so much for the detailed explanation.
> >>>>>However, when I tried to break up my MultiFieldQueryParser into a
> >
> > series
> >
> >>>of
> >>>
> >>>
> >>>>>BooleanQueries, the result set has got reduced drastically.
> >>>>>Any idea why this could be happening?
> >>>>>
> >>>>>Regards,
> >>>>>Niraj
> >>>>>----- Original Message -----
> >>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>Sent: Thursday, June 24, 2004 2:54 PM
> >>>>>Subject: Re: score and frequency
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>>The MultiFieldQueryParser give you a BooleanQuery containing 1 query
> >
> > for
> >
> >>>>>>each field.
> >>>>>>Something like:
> >>>>>>          BooleanQuery
> >>>>>>          /   |   |   \
> >>>>>>        QF1  QF2 QF3  QF4    (QFx=Query for field x)
> >>>>>>
> >>>>>>You can still use the MultiFieldQueryParser and create a
BooleanQuery
> >
> > to
> >
> >>>>>>encapsulate the one parsed + the PhraseQuery, ie:
> >>>>>>           BooleanQuery(created by you)
> >>>>>>            /       \
> >>>>>>          BQ      PhraseQuery
> >>>>>>
> >>>>>>Or create the whole query (I think you should do that) and have
> >>>>>>something like that:
> >>>>>>           _BooleanQuery__
> >>>>>>          /   |   |   \   \
> >>>>>>        QF1  QF2 QF3  QF4  PhraseQuery      (QFx=Query for field x)
> >>>>>>
> >>>>>>It's like parsing the following query:
> >>>>>>(field1:query) (field2:query) (field3:query)...(fieldx:query)
> >>>>>>(title:"query")~boost
> >>>>>>
> >>>>>>
> >>>>>>Franck
> >>>>>>
> >>>>>>
> >>>>>>Niraj Alok wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>I asked the previous question since I do not know how to use
> >>>
> >>>PhraseQuery
> >>>
> >>>
> >>>>>>>I have one booleanquery and one query.
> >>>>>>>The query is Query query =  MultiFieldQueryParser.parse( qs,
> >
> > searchLoc,
> >
> >>>>>>>flags, new StandardAnalyzer(stop));
> >>>>>>>
> >>>>>>>where qs is the word to be searched upon and searchLoc contains all
> >
> > the
> >
> >>>>>four
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>fields.
> >>>>>>>
> >>>>>>>How do I insert a PhraseQuery here for title field only, and that
too
> >>>>>
> >>>>>with
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>its boosted value?
> >>>>>>>
> >>>>>>>
> >>>>>>>Regards,
> >>>>>>>Niraj
> >>>>>>>----- Original Message -----
> >>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>Sent: Thursday, June 24, 2004 2:00 PM
> >>>>>>>Subject: Re: score and frequency
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Does it mean that I would need to abandon MultiFieldQueryParser?
> >>>>>>>>
> >>>>>>>>Regards,
> >>>>>>>>Niraj
> >>>>>>>>----- Original Message -----
> >>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>Sent: Thursday, June 24, 2004 1:22 PM
> >>>>>>>>Subject: Re: score and frequency
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>Hi,
> >>>>>>>>>first, what do you consider as an 'exact matching' ? It seems
that
> >>>
> >>>you
> >>>
> >>>
> >>>>>>>>>treat the search word by word, so 'lion sea' will be an 'exact
> >
> > match'
> >
> >>>>>of
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>'sea-lion'.
> >>>>>>>>>I think you should add a PhraseQuery to your query containing the
> >>>
> >>>title
> >>>
> >>>
> >>>>>>>>>and with a big boost. So, you don't need to boost your title
field.
> >>>>>
> >>>>>Only
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>the results matching exactly (for the PhraseQuery) will be
boosted.
> >>>>>>>>>
> >>>>>>>>>Franck
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>Niraj Alok wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>>Hi Guys,
> >>>>>>>>>>
> >>>>>>>>>>I seem to have run into rough weather again.
> >>>>>>>>>>To describe the problem as concisely as possible, I have four
> >
> > fields
> >
> >>>>>>>to
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>search upon : title , first para, rest of the paras and content
> >
> > (equal
> >
> >>>>>to
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>title + first para + rest of the para) .  I am doing this by using
> >>>>>>>>MultiFieldQueryParser.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>Now there is a very complicated ranking algrorithm specified by
> >
> > the
> >
> >>>>>>>>client and I have met most of them except one or two and really
need
> >>>>>
> >>>>>your
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>help as all my other efforts have failed.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>The most important rule is that exact matching titles should
come
> >>>>>>>
> >>>>>>>first
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>, i.e. get higher scores.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>I have given the highest boost factor to the title than the rest
> >
> > but
> >
> >>>>>>>the
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>problem comes up when there is some other title which has got just
> >
> > one
> >
> >>>>>>>word
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>matching. For e.g., if I search for lion, there is a title
sea-lion
> >>>>>
> >>>>>which
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>also has the same boost factor as that of "lion" in the index.
Also,
> >>>>>>>>sea-lion has got some more "lion" in its first para or rest of the
> >>>
> >>>paras
> >>>
> >>>
> >>>>>>>>etc. such that its score comes higher than "lion".
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>Is there some way to get the exact matching titles higher
scores?
> >>>>>>>>>>Please reply soon.
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>Regards,
> >>>>>>>>>>Niraj
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>----- Original Message -----
> >>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>Sent: Monday, June 07, 2004 12:50 PM
> >>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>>It seems that you don't the length norm to be used. It's a
factor
> >>>>>>>
> >>>>>>>which
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>normalize the score of a doc depending on the size of the
> >
> > searched
> >
> >>>>>>>field
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>of the doc. It's the field which make that 'ground ice' has a
> >>>
> >>>higher
> >>>
> >>>
> >>>>>>>>>>>score than 'ice hockey: British Sekonda Superleague Play-Off
> >>>>>>>>>>>Championship: finals' because it only has 2 terms.
> >>>>>>>>>>>So, I suggest you to override the lengthNorm method and to
ignore
> >>>
> >>>the
> >>>
> >>>
> >>>>>>>>>>>numTokens parameter.
> >>>>>>>>>>>NB: The length norm is computed during the indexation and the
> >
> > norm
> >
> >>>>>are
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>store in the index (in the _aaa.f# files). So, you need to do
> >>>>>
> >>>>>re-index
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>your data, and use this similarity during the indexation.
> >>>>>>>>>>>
> >>>>>>>>>>>Cheers,
> >>>>>>>>>>>Franck
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>Niraj Alok wrote:
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>>I have set the searcher.setSimilarity  as well as also tried
> >>>
> >>>setting
> >>>
> >>>
> >>>>>>>>the
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>coord factor to 1.
> >>>>>>>>>>>>
> >>>>>>>>>>>>The problem as given by an example is : Lets say I have titles
> >
> > to
> >
> >>>be
> >>>
> >>>
> >>>>>>>>>>>>displayed depending upon the search.
> >>>>>>>>>>>>E.g if i have "ice hockey" as the search item and if it is
> >
> > default
> >
> >>>>>>>>>>>>similarity, my results are :
> >>>>>>>>>>>>
> >>>>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>>>ice age0.073680125
> >>>>>>>>>>>>National Hockey League0.020266924
> >>>>>>>>>>>>Cracking the Ice Age0.018420031
> >>>>>>>>>>>>ground-ice0.011512519
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>>>finals0.0069075115
> >>>>>>>>>>>>(the numbers indicating the score).
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>But if i set the similarity as my overridden one, the results
> >>>>>
> >>>>>become:
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>ice hockey0.99999994
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice hockey0.75
> >>>>>>>>>>>>ice age0.22104037
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists0.17402513
> >>>>>>>>>>>>National Hockey League0.060800765
> >>>>>>>>>>>>Cracking the Ice Age0.055260092
> >>>>>>>>>>>>ground-ice0.034537554
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>>>>>>>>finals0.020722535
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>I want all the titles which have both "ice" and "hockey" to
come
> >>>>>>>
> >>>>>>>above
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>the
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>rest (to have higher scores)
> >>>>>>>>>>>>Meaning i would wish the results to appear like:
> >>>>>>>>>>>>
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>ice hockey
> >>>>>>>>>>>>winter Olympics: hockey, ice, medallists
> >>>>>>>>>>>>ice hockey: British Sekonda Superleague Play-Off Championship:
> >>>>>
> >>>>>finals
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>ice age
> >>>>>>>>>>>>National Hockey League
> >>>>>>>>>>>>Cracking the Ice Age
> >>>>>>>>>>>>ground-ice
> >>>>>>>>>>>>
> >>>>>>>>>>>>My overriden similarity class contains just this method:
> >>>>>>>>>>>>public float coord(int overlap, int maxOverlap) {
> >>>>>>>>>>>>
> >>>>>>>>>>>>return 1.0f;
> >>>>>>>>>>>>
> >>>>>>>>>>>>}
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>I feel it is the weight factor which is producing indesirable
> >>>>>>>
> >>>>>>>results.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>Any
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>help in this regard would be highly appreciated.
> >>>>>>>>>>>>
> >>>>>>>>>>>>Regards,
> >>>>>>>>>>>>Niraj
> >>>>>>>>>>>>
> >>>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>>From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> >>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>Sent: Friday, June 04, 2004 8:46 PM
> >>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Be careful to set the default similarity
> >>>>>>>>>>>>>'Similarity.setDefault(similarity)' before creating your
search
> >>>>>>>>
> >>>>>>>>instance
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>(IndexSearcher).
> >>>>>>>>>>>>>If you change the default similarity after, you'll still use
> >
> > the
> >
> >>>>>old
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>one.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>You'd better use the 'searcher.setSimilarity' method on your
> >>>>>>>
> >>>>>>>searcher.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>Franck
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>Phil brunet wrote:
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>>Hi to all.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Maybe the term frequency is not the only parameter you need
to
> >>>>>>>>
> >>>>>>>>override
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>>>to "customize" the score attributed by Lucene.
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Maybe you should consider the normalisation factor, the idf
> >
> > and
> >
> >>>>>the
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>coord factor ?
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>Philippe
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>From: "Niraj Alok" <niraj@emacmillan.com>
> >>>>>>>>>>>>>>>Reply-To: "Lucene Users List"
> >
> > <lucene-user@jakarta.apache.org>
> >
> >>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>>>Date: Fri, 4 Jun 2004 15:13:32 +0530
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Hi Erik,
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Thanks for the suggestion.
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>I tried this:
> >>>>>>>>>>>>>>>public class RelevanceSimilarity extends DefaultSimilarity
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>{
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>System.out.println("discounting frequency");
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>return (float)1;
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>and in my query class, I used :
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Similarity.setDefault(similarity);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Hits hits = is.search(query);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>for(i = 0; i < hits.length(); i ++)
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>result = result + hits.score(i);
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>However, this is still not giving me the expected result.
Do
> >
> > I
> >
> >>>>>>>need
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>to
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>>>>>do
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>something else?
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>Regards,
> >>>>>>>>>>>>>>>Niraj
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>----- Original Message -----
> >>>>>>>>>>>>>>>From: "Erik Hatcher" <erik@ehatchersolutions.com>
> >>>>>>>>>>>>>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>>>>>>>>>>>>>>Sent: Friday, June 04, 2004 1:55 PM
> >>>>>>>>>>>>>>>Subject: Re: score and frequency
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>On Jun 4, 2004, at 2:52 AM, Niraj Alok wrote:
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>Hi,
> >>>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>I am having some problems with the score of lucene.
> >>>>>>>>>>>>>>>>>I am trying to get the results displayed according to
> >>>>>
> >>>>>hits.score
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>and
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>it is giving the results correctly.
> >>>>>>>>>>>>>>>>>However I do not want the frequency factor to be used for
> >
> > the
> >
> >>>>>>>>>>>>>>>>>computation of the score.
> >>>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>>Is it possible to get the score which does not have the
> >>>>>>>
> >>>>>>>frequency
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>>>>>factor in it ?
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>Have a look at the javadocs for Similarity.
> >
> > DefaultSimilarity
> >
> >>>>>is
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>used
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>unless otherwise specified.  You could subclass that and
> >>>>>
> >>>>>override
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>this:
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>>>public float tf(float freq) {
> >>>>>>>>>>>>>>>>return (float)Math.sqrt(freq);
> >>>>>>>>>>>>>>>>}
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>and return 1.0.  This might give you the effect you want.
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>Erik
> >>>>>>>>>>>>>>>>
> >>>>>>>>>>>>>>>>
> >>>>>>>>>
>
>>>>>>>>>>>-----------------------------------------------------------------
-
> >
> > -
> >
> >>>-
> >>>
> >>>
> >>>>>-
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>>
> >>>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
>
>>>>>>>>>>------------------------------------------------------------------
-
> >
> > -
> >
> >>>-
> >>>
> >>>
> >>>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>>>
> >>>>>lucene-user-unsubscribe@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>
>
>>>>>>>>>>>>________________________________________________________________
_
> >>>>>>>>>>>>
> >>>>>>>>>>>>>>Bloquez les fentres pop-up, c'est gratuit !
> >>>
> >>>http://toolbar.msn.fr
> >>>
> >>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>>>
> >>>>>>>lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>>>>>>>--
> >>>>>>>>>>>>>Franck Brisbart
> >>>>>>>>>>>>>R&D
> >>>>>>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>>To unsubscribe, e-mail:
> >>>
> >>>lucene-user-unsubscribe@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>>>For additional commands, e-mail:
> >>>>>
> >>>>>lucene-user-help@jakarta.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>>--
> >>>>>>>>>>>Franck Brisbart
> >>>>>>>>>>>R&D
> >>>>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>
>
>>>>>>>>>-------------------------------------------------------------------
-
> >
> > -
> >
> >>>>>>>>>>>To unsubscribe, e-mail:
> >
> > lucene-user-unsubscribe@jakarta.apache.org
> >
> >>>>>>>>>>>For additional commands, e-mail:
> >>>
> >>>lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>>>>>>>>
> >>>>>>>>>--
> >>>>>>>>>Franck Brisbart
> >>>>>>>>>R&D
> >>>>>>>>>http://www.kelkoo.com
> >>>>>>>>>
> >>>>>>>>>
> >>
>
>>>>>>>>--------------------------------------------------------------------
-
> >>>>>>>>
> >>>>>>>>>To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>>For additional commands, e-mail:
> >
> > lucene-user-help@jakarta.apache.org
> >
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>
> >>>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
>
>>>>>>>---------------------------------------------------------------------
> >>>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>>For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>--
> >>>>>>Franck Brisbart
> >>>>>>R&D
> >>>>>>http://www.kelkoo.com
> >>>>>>
> >>>>>>
>
>>>>>>---------------------------------------------------------------------
> >>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>>>
> >>>>>
> >>>>>
> >>>>--
> >>>>Franck Brisbart
> >>>>R&D
> >>>>http://www.kelkoo.com
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>
> >>>
> >>
> >>--
> >>Franck Brisbart
> >>R&D
> >>http://www.kelkoo.com
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
>
>
> --
> Franck Brisbart
> R&D
> http://www.kelkoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_0227_01C45A29.5E09DC40--



From lucene-user-return-8880-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:00:43 2004
Return-Path: <lucene-user-return-8880-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50385 invoked from network); 24 Jun 2004 15:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:00:43 -0000
Received: (qmail 52266 invoked by uid 500); 24 Jun 2004 15:00:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52157 invoked by uid 500); 24 Jun 2004 15:00:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52049 invoked by uid 99); 24 Jun 2004 15:00:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.59.210] (HELO postfix.mail.ehatchersolutions.com) (128.143.59.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:00:06 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A0EFC79D381
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 10:59:49 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <006001c459fa$55e53fc0$5b0310ac@pcporthmc>
References: <LOEGLEEGOAKBOLAJCCKIEEMACAAA.karthik@controlnet.co.in> <006001c459fa$55e53fc0$5b0310ac@pcporthmc>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <23273BD0-C5EF-11D8-AFC2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Use  wildcards in field names?
Date: Thu, 24 Jun 2004 10:59:48 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There is no built-in support to do wildcards with field names, but you 
certainly could look up all the field names yourself and implement your 
own wildcard scheme to dynamically build queries.

	Erik


On Jun 24, 2004, at 10:48 AM, Hugo wrote:

> I was wondering if is it possible to use wild cards in fiel names?
>
> this is my case: i have a file that is term as respective descriptions,
> separated by a space, like this:
>
> bed place to sleep
> chair place to seat down
> glass recipient of liquids
> pen something to write with
> hat something to protect your hed
>
> and what i want is to perform searches in both sides of the file, the 
> terms
> and the descriptions, and be able to use wildcards in both.
> Does any one know how to do this having just this file?
>
> I thougth naming the field after the term, and put the descriptions in 
> the
> field, but then i can't use wildcards to search in fields names...
>
> I'd appreciate any kind of help!
>
> Thank you in advance, Hugo.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8881-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:05:12 2004
Return-Path: <lucene-user-return-8881-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53775 invoked from network); 24 Jun 2004 15:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:05:12 -0000
Received: (qmail 69615 invoked by uid 500); 24 Jun 2004 15:05:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69501 invoked by uid 500); 24 Jun 2004 15:05:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69419 invoked by uid 99); 24 Jun 2004 15:05:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [194.98.147.102] (HELO smtp.kelkoo.net) (194.98.147.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:05:02 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5OF4d9w006923
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 17:04:39 +0200
Message-ID: <40DAED78.6090806@kelkoo.net>
Date: Thu, 24 Jun 2004 17:04:24 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: score and frequency
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu> <40DAE061.6030605@kelkoo.net> <022b01c459fb$446e5000$b101a8c0@emacmillan.edu>
In-Reply-To: <022b01c459fb$446e5000$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It should work with this new field. I don't have other great ideas.
Where are the problems with your small dataset ?

Franck

Niraj Alok wrote:
> Hi Franck,
> 
> I have tried the same with a small dataset I have. But it is not working as
> expected :(
> Any further ideas?
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, June 24, 2004 7:38 PM
> Subject: Re: score and frequency
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8882-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:06:46 2004
Return-Path: <lucene-user-return-8882-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54667 invoked from network); 24 Jun 2004 15:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:06:45 -0000
Received: (qmail 73641 invoked by uid 500); 24 Jun 2004 15:06:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73516 invoked by uid 500); 24 Jun 2004 15:06:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73228 invoked by uid 99); 24 Jun 2004 15:06:17 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [64.4.31.223] (HELO hotmail.com) (64.4.31.223)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:06:17 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 24 Jun 2004 08:04:59 -0700
Received: from 194.206.251.22 by bay13-dav49.bay13.hotmail.com with DAV;
	Thu, 24 Jun 2004 15:04:58 +0000
X-Originating-IP: [194.206.251.22]
X-Originating-Email: [ocatteau_lucene@hotmail.com]
X-Sender: ocatteau_lucene@hotmail.com
From: "Olivier Catteau" <ocatteau_lucene@hotmail.com>
To: <lucene-user@jakarta.apache.org>
Subject: Rebuild a part of an indexed document
Date: Thu, 24 Jun 2004 17:10:25 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0010_01C45A0E.2409CAC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
x-mimeole: Produced By Microsoft MimeOLE V6.00.2800.1409
Message-ID: <BAY13-DAV49DCFMcrKp0004f133@hotmail.com>
X-OriginalArrivalTime: 24 Jun 2004 15:04:59.0237 (UTC) FILETIME=[9E1A4950:01C459FC]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0010_01C45A0E.2409CAC0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi !

I would like to rebuild a part of a document that I have indexed with =
Lucene without reopen it and parsing it again.

In fact, I would like to reconstitute the parts of the documents which =
corresponds to a search.=20

Here is an example of what I would like to obtain :
String myDocumentIndexed =3D=20
"Of all the amazing tales told about the Titanic, there is one little =
story I always find fascinating even though it tells us absolutely =
nothing about the details of the TRAGIC sinking on that cold night in =
April 1912."
+ "It is not the fact that the great liner was designed and had the =
space to carry 48 lifeboats but only 16 were actually included to fulfil =
the letter of the law. It was not the fact that in spite of ice WARNINGS =
the ship's speed was not reduced. If it had been, then fewer watertight =
compartments would have been flooded, and the ship would have remained =
afloat much longer, and possibly been salvaged.";

I release a search on "TRAGIC WARNINGS", I get a Hits instance =
containing my document (path + indexed content).

On this resulting document, I would like to have a "summary" =
corresponding to my request "TRAGIC WARNINGS" such as this (or such as =
Google) :
"... nothing about the details of the TRAGIC sinking on that cold night =
.. the fact that in spite of ice WARNINGS the ship's speed was not =
reduced ..."

And I would like to obtain this summary without reopen my document (big =
PDF) and without parsing it again.

For the moment, I can have the "summary" but only if I parse again my =
PDF document (it takes about 60s per document, it's to uch).

Is it possible to rebuild a part of an indexed document ? And, if it is, =
how to do this ?

Thanks a lot !
------=_NextPart_000_0010_01C45A0E.2409CAC0--

From lucene-user-return-8883-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:11:17 2004
Return-Path: <lucene-user-return-8883-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57497 invoked from network); 24 Jun 2004 15:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:11:16 -0000
Received: (qmail 90147 invoked by uid 500); 24 Jun 2004 15:10:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90077 invoked by uid 500); 24 Jun 2004 15:10:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89970 invoked by uid 99); 24 Jun 2004 15:10:43 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:10:41 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5OFAMA00422
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 10:10:22 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 20:41:07 +0530
Message-ID: <024801c459fc$f15533a0$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Sea2-F42lv4MkC56FtZ00012096@hotmail.com> <40C09261.3060509@kelkoo.net> <017901c44abb$e63836c0$b101a8c0@emacmillan.edu> <40C41728.8020005@kelkoo.net> <00a101c459bd$1d6fbe50$b101a8c0@emacmillan.edu> <40DA8820.5080602@kelkoo.net> <00bf01c459c5$7307fff0$b101a8c0@emacmillan.edu> <00c901c459c6$4742e6e0$b101a8c0@emacmillan.edu> <40DA9DD4.30406@kelkoo.net> <018a01c459e4$f1cc4c50$b101a8c0@emacmillan.edu> <40DAC9DF.8010900@kelkoo.net> <01a701c459e8$faeedf60$b101a8c0@emacmillan.edu> <40DAD84B.9090008@kelkoo.net> <01da01c459f1$c81c1310$b101a8c0@emacmillan.edu> <40DAE061.6030605@kelkoo.net> <022b01c459fb$446e5000$b101a8c0@emacmillan.edu> <40DAED78.6090806@kelkoo.net>
Subject: Re: score and frequency
Date: Thu, 24 Jun 2004 20:37:18 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0244_01C45A2B.0AF7EBD0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0244_01C45A2B.0AF7EBD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

My indexing class contains:

try{

stream = analyzer.tokenStream("indexhd", new StringReader(indexhd));

buf = new StringBuffer();

while((token = stream.next()) != null)

{

buf.append(' ');

buf.append(token.termText());

}

}

catch(IOException e)

{

e.printStackTrace();

}

Field f5 = new Field("unToken", buf.toString().trim(), true, true, true);

f5.setBoost(4000);

doc.add(f5);



and my query class contains:



TermQuery pq = new TermQuery(new Term("unToken",indexWord));

pq.setBoost(1000);


bqr.add(pq,false,false);

bqr.add(QueryParser.parse(qs,"content", new
StandardAnalyzer(stop)),false,false);

bqr.add(QueryParser.parse(qs,"p1", new StandardAnalyzer(stop)),false,false);

bqr.add(QueryParser.parse(qs,"bodyText", new
StandardAnalyzer(stop)),false,false);

Query query = QueryParser.parse(contentTypes,"contenttype",new
StandardAnalyzer());

Hits hits = is.search(query, new QueryFilter(bqr));

Regards,
Niraj


----- Original Message -----
From: "Brisbart Franck" <Franck.Brisbart@kelkoo.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, June 24, 2004 8:34 PM
Subject: Re: score and frequency


> It should work with this new field. I don't have other great ideas.
> Where are the problems with your small dataset ?
>
> Franck
>


------=_NextPart_000_0244_01C45A2B.0AF7EBD0--



From lucene-user-return-8884-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:51:40 2004
Return-Path: <lucene-user-return-8884-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81297 invoked from network); 24 Jun 2004 15:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:51:39 -0000
Received: (qmail 58207 invoked by uid 500); 24 Jun 2004 15:49:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57823 invoked by uid 500); 24 Jun 2004 15:49:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57606 invoked by uid 99); 24 Jun 2004 15:49:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=DATE_IN_PAST_03_06
X-Spam-Check-By: apache.org
Received: from [66.98.144.71] (HELO cenozoa.com) (66.98.144.71)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:49:46 -0700
Received: from [192.168.1.135] ([216.132.121.30])
	(authenticated (0 bits))
	by cenozoa.com (8.11.6/8.11.6) with ESMTP id i5OH5nD09636
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 13:05:49 -0400
From: Brian Lee Yung Rowe <public_browe@muxspace.com>
Organization: division mux space
To: lucene-user@jakarta.apache.org
Subject: Compiling Lucene on PPC linux
Date: Thu, 24 Jun 2004 11:46:50 +0000
User-Agent: KMail/1.6.1
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <200406241146.50084.public_browe@muxspace.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Has anyone had success compiling Lucene 1.3 on PowerPC linux (gentoo ppc-linux 
2.4.20)? I'm using the IBM VM 1.4.1 and Jikes 1.18.

The problem I'm getting is that Ant cannot execute the RMIC task, although 
I've checked the libraries in the IBM JDK (and set the JAVA_HOME environment 
variable) with jar and grep to determine that the classes are there. I've 
also tried using MiniRMI with no avail.

Can anyone point me in the right direction to get the RMIC task to work (or 
should I be bugging the Ant list instead)?

Thanks,
Brian Rowe

-- 
=====
Brian Lee Yung Rowe
division mux space
www.muxspace.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8885-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 15:51:53 2004
Return-Path: <lucene-user-return-8885-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81521 invoked from network); 24 Jun 2004 15:51:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 15:51:53 -0000
Received: (qmail 58917 invoked by uid 500); 24 Jun 2004 15:50:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58643 invoked by uid 500); 24 Jun 2004 15:50:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58370 invoked by uid 99); 24 Jun 2004 15:49:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 08:49:57 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5OFneQ29320
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 10:49:40 -0500
Message-ID: <40DAF812.8060305@getopt.org>
Date: Thu, 24 Jun 2004 17:49:38 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Rebuild a part of an indexed document
References: <BAY13-DAV49DCFMcrKp0004f133@hotmail.com>
In-Reply-To: <BAY13-DAV49DCFMcrKp0004f133@hotmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Olivier Catteau wrote:

> Hi !
> 
> I would like to rebuild a part of a document that I have indexed with Lucene without reopen it and parsing it again.
> 
> In fact, I would like to reconstitute the parts of the documents which corresponds to a search. 

What you describe is also known as "snippets". In all implementations 
known to me search engines use cached copies of the plain text content 
in order to produce snippets - there is no re-parsing needed, but 
storage requirements are higher.

You can do it in Lucene by storing the plain text content in a stored 
field, and then using the highlighter package from the sandbox to 
produce snippets.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8886-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 16:08:09 2004
Return-Path: <lucene-user-return-8886-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90903 invoked from network); 24 Jun 2004 16:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 16:08:09 -0000
Received: (qmail 27451 invoked by uid 500); 24 Jun 2004 16:07:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27138 invoked by uid 500); 24 Jun 2004 16:07:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26960 invoked by uid 99); 24 Jun 2004 16:07:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.59.210] (HELO postfix.mail.ehatchersolutions.com) (128.143.59.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 09:07:05 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 1C3DB79D6D8
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 12:06:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406241146.50084.public_browe@muxspace.com>
References: <200406241146.50084.public_browe@muxspace.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8153D21C-C5F8-11D8-AFC2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Compiling Lucene on PPC linux
Date: Thu, 24 Jun 2004 12:06:51 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What is the <rmic> error that you're getting?

I definitely recommend taking this to the ant-user list, but I know 
there have been some IBM VM issues with Lucene in the past and I'm not 
sure where they stand now.

	Erik

On Jun 24, 2004, at 7:46 AM, Brian Lee Yung Rowe wrote:

> Hello,
>
> Has anyone had success compiling Lucene 1.3 on PowerPC linux (gentoo 
> ppc-linux
> 2.4.20)? I'm using the IBM VM 1.4.1 and Jikes 1.18.
>
> The problem I'm getting is that Ant cannot execute the RMIC task, 
> although
> I've checked the libraries in the IBM JDK (and set the JAVA_HOME 
> environment
> variable) with jar and grep to determine that the classes are there. 
> I've
> also tried using MiniRMI with no avail.
>
> Can anyone point me in the right direction to get the RMIC task to 
> work (or
> should I be bugging the Ant list instead)?
>
> Thanks,
> Brian Rowe
>
> -- 
> =====
> Brian Lee Yung Rowe
> division mux space
> www.muxspace.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8887-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 16:49:30 2004
Return-Path: <lucene-user-return-8887-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19134 invoked from network); 24 Jun 2004 16:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 16:49:30 -0000
Received: (qmail 85936 invoked by uid 500); 24 Jun 2004 16:49:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85764 invoked by uid 500); 24 Jun 2004 16:49:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85681 invoked by uid 99); 24 Jun 2004 16:49:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=DATE_IN_PAST_03_06
X-Spam-Check-By: apache.org
Received: from [66.98.144.71] (HELO cenozoa.com) (66.98.144.71)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 09:49:08 -0700
Received: from [192.168.1.135] ([216.132.121.30])
	(authenticated (0 bits))
	by cenozoa.com (8.11.6/8.11.6) with ESMTP id i5OI58D09823
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 14:05:08 -0400
From: Brian Lee Yung Rowe <public_browe@muxspace.com>
Organization: division mux space
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Compiling Lucene on PPC linux
Date: Thu, 24 Jun 2004 12:46:07 +0000
User-Agent: KMail/1.6.1
References: <200406241146.50084.public_browe@muxspace.com> <8153D21C-C5F8-11D8-AFC2-000393A564E6@ehatchersolutions.com>
In-Reply-To: <8153D21C-C5F8-11D8-AFC2-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200406241246.07988.public_browe@muxspace.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

With miniRMI, I get the following:

  build.xml:142: mini.rmi.rmic.AntRMIC can't be found.

I have the miniRMIC.jar in my CLASSPATH. Do I need to specify it somewhere 
else?

If I don't use miniRMI, I get the following error:
  build.xml: 142: Cannot use SUN rmic, as it is not available.  A common 
solution is to set the environment variable JAVA_HOME or CLASSPATH.

My JAVA_HOME is set to /opt/ibm-jdk-1.4.1 and the CLASSPATH is definitely set 
(too long to list here). Additionally, IBM's jre/lib/core.jar contains the 
sun.rmi.* classes, so I'm not sure why Ant is complaining.

Thanks,
Brian


On Thursday 24 June 2004 04:06 pm, Erik Hatcher wrote:
> What is the <rmic> error that you're getting?
>
> I definitely recommend taking this to the ant-user list, but I know
> there have been some IBM VM issues with Lucene in the past and I'm not
> sure where they stand now.
>
> 	Erik

-- 
=====
Brian Lee Yung Rowe
division mux space
www.muxspace.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8888-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 17:35:54 2004
Return-Path: <lucene-user-return-8888-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43529 invoked from network); 24 Jun 2004 17:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 17:35:53 -0000
Received: (qmail 42543 invoked by uid 500); 24 Jun 2004 17:35:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42290 invoked by uid 500); 24 Jun 2004 17:35:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42150 invoked by uid 99); 24 Jun 2004 17:35:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.59.210] (HELO postfix.mail.ehatchersolutions.com) (128.143.59.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 10:35:18 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP
	id A60B179D8F5; Thu, 24 Jun 2004 13:35:02 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <200406241246.07988.public_browe@muxspace.com>
References: <200406241146.50084.public_browe@muxspace.com> <8153D21C-C5F8-11D8-AFC2-000393A564E6@ehatchersolutions.com> <200406241246.07988.public_browe@muxspace.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D1E0D140-C604-11D8-AFC2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Compiling Lucene on PPC linux
Date: Thu, 24 Jun 2004 13:35:01 -0400
To: Lucene Users List <lucene-user@jakarta.apache.org>,
	Ant User <user@ant.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm copying this over to the Ant user list - let's take it over there 
now.  I presume you're setting build.rmic to mini.rmi.rmic.AntRMIC?  
How are you doing that?

Anyone have advice on using <rmic> on Linux with IBM's VM?

	Erik


On Jun 24, 2004, at 8:46 AM, Brian Lee Yung Rowe wrote:

> Hi Erik,
>
> With miniRMI, I get the following:
>
>   build.xml:142: mini.rmi.rmic.AntRMIC can't be found.
>
> I have the miniRMIC.jar in my CLASSPATH. Do I need to specify it 
> somewhere
> else?
>
> If I don't use miniRMI, I get the following error:
>   build.xml: 142: Cannot use SUN rmic, as it is not available.  A 
> common
> solution is to set the environment variable JAVA_HOME or CLASSPATH.
>
> My JAVA_HOME is set to /opt/ibm-jdk-1.4.1 and the CLASSPATH is 
> definitely set
> (too long to list here). Additionally, IBM's jre/lib/core.jar contains 
> the
> sun.rmi.* classes, so I'm not sure why Ant is complaining.
>
> Thanks,
> Brian
>
>
> On Thursday 24 June 2004 04:06 pm, Erik Hatcher wrote:
>> What is the <rmic> error that you're getting?
>>
>> I definitely recommend taking this to the ant-user list, but I know
>> there have been some IBM VM issues with Lucene in the past and I'm not
>> sure where they stand now.
>>
>> 	Erik
>
> -- 
> =====
> Brian Lee Yung Rowe
> division mux space
> www.muxspace.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8889-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 18:10:47 2004
Return-Path: <lucene-user-return-8889-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60888 invoked from network); 24 Jun 2004 18:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 18:10:47 -0000
Received: (qmail 62081 invoked by uid 500); 24 Jun 2004 18:10:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62002 invoked by uid 500); 24 Jun 2004 18:10:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61959 invoked by uid 99); 24 Jun 2004 18:10:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.87.178.252] (HELO dc1mail01.digitalriver.com) (209.87.178.252)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 11:10:47 -0700
Received: from nte2k05.mpls.digitalriver.com ([172.20.109.95]) by dc1mail01.digitalriver.com with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 24 Jun 2004 13:10:22 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: field indexed but not stored
Date: Thu, 24 Jun 2004 13:10:22 -0500
Message-ID: <B46D8D7FF80ABC45BF8D1949592A4C71347805@nte2k05.mpls.digitalriver.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: carrot2 - Re: Categorization
Thread-Index: AcRZUxGf2V67oZjuTvuOoeDN3mlJFAAwrFyA
From: "Ryan Sonnek" <rsonnek@DigitalRiver.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 24 Jun 2004 18:10:23.0010 (UTC) FILETIME=[84635820:01C45A16]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm using lucene-1.4-rc3 and trying to optimize the size of our index =
and decrease search times.  our index has several fields that we need to =
search and sort by, but only one field that we actually retrieve from =
the hits document.  I tried creating all fields as unstored, except for =
the one I need, except now all searches fail (0 results).  Is this the =
correct way to do this or did I misunderstand the documentation?

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8890-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 18:58:02 2004
Return-Path: <lucene-user-return-8890-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94551 invoked from network); 24 Jun 2004 18:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 18:58:02 -0000
Received: (qmail 26793 invoked by uid 500); 24 Jun 2004 18:58:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26745 invoked by uid 500); 24 Jun 2004 18:58:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26725 invoked by uid 99); 24 Jun 2004 18:58:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.59.210] (HELO postfix.mail.ehatchersolutions.com) (128.143.59.210)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 11:58:05 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 95A9D79DD21
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 14:57:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <B46D8D7FF80ABC45BF8D1949592A4C71347805@nte2k05.mpls.digitalriver.com>
References: <B46D8D7FF80ABC45BF8D1949592A4C71347805@nte2k05.mpls.digitalriver.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <607EC4B7-C610-11D8-AFC2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: field indexed but not stored
Date: Thu, 24 Jun 2004 14:57:44 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 24, 2004, at 2:10 PM, Ryan Sonnek wrote:
> I'm using lucene-1.4-rc3 and trying to optimize the size of our index 
> and decrease search times.  our index has several fields that we need 
> to search and sort by, but only one field that we actually retrieve 
> from the hits document.  I tried creating all fields as unstored, 
> except for the one I need, except now all searches fail (0 results).  
> Is this the correct way to do this or did I misunderstand the 
> documentation?

Perhaps you converted some Keyword fields to Unstored?  If that is the 
case, then you added tokenization which might be getting in the way of 
what you expect.

Could you provide an example of what you indexed and how you are 
searching?  (succinct code works the best to remove ambiguity)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8891-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jun 24 21:12:24 2004
Return-Path: <lucene-user-return-8891-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61929 invoked from network); 24 Jun 2004 21:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Jun 2004 21:12:24 -0000
Received: (qmail 61784 invoked by uid 500); 24 Jun 2004 21:12:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61652 invoked by uid 500); 24 Jun 2004 21:12:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61528 invoked by uid 99); 24 Jun 2004 21:12:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.87.178.252] (HELO dc1mail01.digitalriver.com) (209.87.178.252)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 14:12:08 -0700
Received: from nte2k05.mpls.digitalriver.com ([172.20.109.95]) by dc1mail01.digitalriver.com with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 24 Jun 2004 16:11:36 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: field indexed but not stored
Date: Thu, 24 Jun 2004 16:11:36 -0500
Message-ID: <B46D8D7FF80ABC45BF8D1949592A4C7123B40D@nte2k05.mpls.digitalriver.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: field indexed but not stored
Thread-Index: AcRaHSJEeZN87yd5SOakx83Qk1S5sAAEnNQw
From: "Ryan Sonnek" <rsonnek@DigitalRiver.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 24 Jun 2004 21:11:36.0351 (UTC) FILETIME=[D56782F0:01C45A2F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My bad...
In changing my code to use unstored fields, i introduced a bug where I =
wasn't tokenizing correctly.
changing Field.Text(name, value) to new Field(name, value, true, false, =
true) in too many places led to a couple cases of inconsistency.

thanks for the reply.

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, June 24, 2004 1:58 PM
> To: Lucene Users List
> Subject: Re: field indexed but not stored
>=20
>=20
> On Jun 24, 2004, at 2:10 PM, Ryan Sonnek wrote:
> > I'm using lucene-1.4-rc3 and trying to optimize the size of=20
> our index=20
> > and decrease search times.  our index has several fields=20
> that we need=20
> > to search and sort by, but only one field that we actually retrieve=20
> > from the hits document.  I tried creating all fields as unstored,=20
> > except for the one I need, except now all searches fail (0=20
> results). =20
> > Is this the correct way to do this or did I misunderstand the=20
> > documentation?
>=20
> Perhaps you converted some Keyword fields to Unstored?  If=20
> that is the=20
> case, then you added tokenization which might be getting in=20
> the way of=20
> what you expect.
>=20
> Could you provide an example of what you indexed and how you are=20
> searching?  (succinct code works the best to remove ambiguity)
>=20
> 	Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8892-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 00:14:01 2004
Return-Path: <lucene-user-return-8892-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98043 invoked from network); 25 Jun 2004 00:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 00:14:01 -0000
Received: (qmail 66551 invoked by uid 500); 25 Jun 2004 00:14:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66510 invoked by uid 500); 25 Jun 2004 00:14:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66469 invoked by uid 99); 25 Jun 2004 00:14:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.42.14] (HELO nwkea-mail-2.sun.com) (192.18.42.14)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 17:14:12 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by nwkea-mail-2.sun.com (8.12.10/8.12.9) with ESMTP id i5P0Db0R015444
	for <lucene-user@jakarta.apache.org>; Thu, 24 Jun 2004 17:13:37 -0700 (PDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0HZU003018MD89@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Thu, 24 Jun 2004 17:13:37 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0HZU00M4C8MO5K@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Thu, 24 Jun 2004 17:13:37 -0700 (PDT)
Date: Thu, 24 Jun 2004 17:13:36 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Various kind of queries
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40DB6E30.60500@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

You guys have been great! I read lots of threads and am learning a lot 
about Lucene.

Can any one point me to right direction or show me a code sample where I 
can build queries for  'any word' 'all words' and 'phrase. I tried to 
look on the Lucene FAQ but I did not understand how to go about it. Any 
code sample would be really helpful. I am guessing that I would have to 
use PhraseQuery and BooleanQuery and QueryParser classes. Not sure about 
the syntax.

Thanks.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8893-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 06:12:37 2004
Return-Path: <lucene-user-return-8893-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69548 invoked from network); 25 Jun 2004 06:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 06:12:37 -0000
Received: (qmail 37611 invoked by uid 500); 25 Jun 2004 06:13:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37424 invoked by uid 500); 25 Jun 2004 06:12:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37291 invoked by uid 99); 25 Jun 2004 06:12:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Thu, 24 Jun 2004 23:12:52 -0700
Received: (qmail 921 invoked by uid 532); 25 Jun 2004 06:11:56 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.139409 secs); 25 Jun 2004 06:11:56 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 25 Jun 2004 06:11:55 -0000
Message-ID: <40DBC237.4080805@tropo.com>
Date: Thu, 24 Jun 2004 23:12:07 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Various kind of queries
References: <40DB6E30.60500@Sun.COM>
In-Reply-To: <40DB6E30.60500@Sun.COM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hetan Shah wrote:

> Hello,
>
> You guys have been great! I read lots of threads and am learning a lot 
> about Lucene.
>
> Can any one point me to right direction or show me a code sample where 
> I can build queries for  'any word' 'all words' and 'phrase. I tried 
> to look on the Lucene FAQ but I did not understand how to go about it. 
> Any code sample would be really helpful. I am guessing that I would 
> have to use PhraseQuery and BooleanQuery and QueryParser classes. Not 
> sure about the syntax.


You mean build in code right? Thus you won't need QueryParser. Here's 
code I posted a while ago:

http://java2.5341.com/msg/51792.html

Note: is this the only archive of lucene-user? I thought it used to be 
somewhere else...

>
> Thanks.
> -H
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8894-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 07:15:35 2004
Return-Path: <lucene-user-return-8894-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10634 invoked from network); 25 Jun 2004 07:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 07:15:35 -0000
Received: (qmail 1724 invoked by uid 500); 25 Jun 2004 07:15:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1568 invoked by uid 500); 25 Jun 2004 07:15:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1449 invoked by uid 99); 25 Jun 2004 07:15:49 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 00:15:46 -0700
Received: from mail5.rambler.ru (mail5.rambler.ru [81.19.66.7])
	by mxb.rambler.ru (Postfix) with ESMTP id B877884424
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 11:15:00 +0400 (MSD)
Received: from [81.19.66.146] (account vyuryev@rambler.ru)
  by mail5.rambler.ru (CommuniGate Pro WebUser 4.1.8)
  with HTTP id 40286731 for lucene-user@jakarta.apache.org; Fri, 25 Jun 2004 11:14:59 +0400
From: "Vladimir Yuryev" <vyuryev@rambler.ru>
Subject: Re: ANN: Luke v. 0.5 released
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: CommuniGate Pro WebUser Interface v.4.1.8
Date: Fri, 25 Jun 2004 11:14:59 +0400
Message-ID: <web-40286731@mail5.rambler.ru>
In-Reply-To: <40DAAE3B.30705@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="windows-1251"; format="flowed"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thu, 24 Jun 2004 12:34:35 +0200
  Andrzej Bialecki <ab@getopt.org> wrote:
>Vladimir Yuryev wrote:
>
>> Hi Andrzej!
>> 
>> I am sorry for my English :-(
>> I with pleasure shall tell about the test and I shall try to state 
>> conditions of the test in detail.
>> 
>>>    I don't quite understand what you are saying... Do you suspect 
>>> there is a bug in Luke somewhere on the Search tab? If >that's the 
>>> case, please provide an example.
>> 
>> 
>> 
>> 1. Search was made on an index with coding Cp1251.
>> 2. Conditions of search:
>>      Analyzer to use for query parsing: 
>>org.apache.lucene.analysis.ru. 
>> RussianAnalyzer
>>      Default field is:contents
>> 
>>      2.1. Enter search expression here: (the coding 
>>windows-1251)
>>             Result: No Results      2.2. Enter search expression 
>> here:* (the coding windows-1251)
>>             Result: 1 doc (s), url: 
>> http://www.agnuz.info/result.php?year=2004&mounth1=March&day=26&files=v02.txt&print=news 
>
>Time to refresh my russian... :-) Ok, the problem seems to be in the 
>RussianAnalyzer - it uses RussianLetterTokenizer, which filters out 
>anything which is a non-letter - I'm afraid it filters out also the 
>wildcard at the end. Not only that, it then passes the tokens through 
>a RussianStemmer, which further mutilates the tokens.
>
>Please try the "Parsed query view" on the "Search" tab to see what is 
>the result of your query, or paste your query into the text area on 
>the AnalyzerTool plugin ("Plugins"), and see what tokens you get 
>using RussianAnalyzer.
>
>I just did it, and the result for "*" was "" - clearly 
>not what you wanted.
>
>-- 
>Best regards,
>Andrzej Bialecki
>
>-------------------------------------------------
>Software Architect, System Integration Specialist
>CEN/ISSS EC Workshop, ECIMF project chair
>EU FP6 E-Commerce Expert/Evaluator
>-------------------------------------------------
>FreeBSD developer (http://www.freebsd.org)
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

Hi Andrzej!

Well.
To the address: 
"http://www.agnuz.info/result.php?year=2004&mounth1=March&day=26&files=v02.txt&print=news" 
there is a full text in which I searched for a phrase "...Pontiff has 
expressed importance...", in russian "   ". 

>Please try the "Parsed query view" on the "Search" tab to see what is the result of your query

In a bookmark "Search" the phrase has not been found. The problem was 
(for some reason?!) in the second and third words? Search by separate 
words (simple terms) has found out a problem in these last two words. 
And so, for "Analyzer to use for query parsing: ": 
org.apache.lucene.analysis.ru.RussianAnalyzer,
"Entry search expression here": [texts in coding Cp1251] -

1. "Entry search expression here ":"   ".
     "Parsed query view": contents:"  ".
- No Results

2. "Entry search expression here":
     "Parsed query view": contents: 
- 2 doc (s)
URLs:
"http: // www.agnuz.info/result.php? 
year=2004&mounth1=March&day=26&files=v01.txt&print=news" 
"http: // www.agnuz.info/result.php? 
year=2004&mounth1=March&day=26&files=v02.txt&print=news" 

3. "Entry search expression here":
     "Parsed query view": contents: 
- No Results

4. "Entry search expression here":
     "Parsed query view": contents:
- No Results

5. "Entry search expression here":   .
     "Parsed query view": contents: contents: 
contents:.
  - 2 doc (s)-> the same documents as point 2.

>.., or paste your query into the text area on the AnalyzerTool plugin ("Plugins"), and see what tokens you get using RussianAnalyzer.

In a tab "Plugins" in a field "Text to be analyzed" I have tested the 
same three words as a phrase - "   ". As a 
result of the analysis in a field "Tokens found" three have been shown 
stemms - "", "" and "". Actions - " hilite-> " 
has given positive results by all three words. (Similar a problem not 
in filters?):-)

Best regards,
Vladimir.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8895-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 07:25:53 2004
Return-Path: <lucene-user-return-8895-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24400 invoked from network); 25 Jun 2004 07:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 07:25:53 -0000
Received: (qmail 32009 invoked by uid 500); 25 Jun 2004 07:26:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31876 invoked by uid 500); 25 Jun 2004 07:26:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31838 invoked by uid 99); 25 Jun 2004 07:26:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 25 Jun 2004 00:26:02 -0700
Message-ID: <20040625072515.25317.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.100] by web12704.mail.yahoo.com via HTTP; Fri, 25 Jun 2004 00:25:15 PDT
Date: Fri, 25 Jun 2004 00:25:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Various kind of queries
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40DBC237.4080805@tropo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> code I posted a while ago:
> 
> http://java2.5341.com/msg/51792.html
> 
> Note: is this the only archive of lucene-user? I thought it used to
> be somewhere else...

I tend to use EyeBrowse on nagoya.apache.org, but there are at least 2
other sites with full archives of lucene-* and many other lists.  Maybe
gmane.org carries Lucene lists, too, I am not sure.

Otis


=====
http://www.simpy.com/ - social bookmarking and personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8896-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 12:42:36 2004
Return-Path: <lucene-user-return-8896-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 894 invoked from network); 25 Jun 2004 12:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 12:42:35 -0000
Received: (qmail 5678 invoked by uid 500); 25 Jun 2004 12:42:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5065 invoked by uid 500); 25 Jun 2004 12:42:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4656 invoked by uid 99); 25 Jun 2004 12:42:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 05:41:58 -0700
Received: from es.ifit.uni-klu.ac.at ([143.205.118.16]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 25 Jun 2004 14:42:13 +0200
Received: from localhost (es.ifit.uni-klu.ac.at [143.205.118.16])
	by es.ifit.uni-klu.ac.at (Postfix) with ESMTP
	id 1279F65C04F; Fri, 25 Jun 2004 14:41:51 +0200 (CEST)
Received: from ifit.uni-klu.ac.at (prodock2.ifit.uni-klu.ac.at [143.205.118.99])
	by es.ifit.uni-klu.ac.at (Postfix) with ESMTP
	id AA37A65C04E; Fri, 25 Jun 2004 14:41:50 +0200 (CEST)
Message-ID: <40DC1DA4.2020001@ifit.uni-klu.ac.at>
Date: Fri, 25 Jun 2004 14:42:12 +0200
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: en-us, de-at, en, it
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>,
	lucene-dev@jakarta.apache.org
Cc: POI Users List <poi-user@jakarta.apache.org>
Subject: Index MSOffice Documents
Content-Type: multipart/mixed;
 boundary="------------020607060202070204070203"
X-OriginalArrivalTime: 25 Jun 2004 12:42:13.0572 (UTC) FILETIME=[D6FB4840:01C45AB1]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------020607060202070204070203
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi all,

 I'm working on a project in which we are building a knowledge 
management platform. We are using Turbine/Velocity
as framework and we are using lucene for search.

 We want to make the search to be able to index MSOffice Documents, 
therefore I was searching for some possibilities to extract the text 
from this
documents. I found some examples based on POI library 
(http://jakarta.apache.org/poi) and I addapted them to our needs.
The extraction of the text elements from XLS file I think is trustable 
(the from POI development comunity did a great job with the package that
work with XSL files). The examples that extract the text from DOC and 
PPT files are not very general, I think they have problems with the 
documents
written with special charsets but they are working just well on the 
documents I use. I hope someone that has more experience that I have 
will improve this
and will a better source code.

 Congratulations to all people involved in development of the Jakarta 
project and it's subprojects,

 Sergiu Gordea

Ps: ExeConverteImpl uses an external stand alone application (like 
antiwort or pdf2txt) to extract the text.

--------------020607060202070204070203
Content-Type: text/plain;
 name="XLSConverterImpl.java.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="XLSConverterImpl.java.txt"

/* @(#) CWK 1.4 07.06.2004
 * 
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

package com.configworks.cwk.be.search.converters;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

/**
 * Class description
 *
 * @author sergiu
 * @version 1.0
 * @since CWK 1.5
 */
public class XLSConverterImpl extends JavaDocumentConverter {

    private Log logger = null;
    File dest = null;

    

    public boolean extractText(InputStream reader, BufferedWriter writer) throws FileNotFoundException,
        IOException {

        HSSFWorkbook workbook = new HSSFWorkbook(reader);
        
        for (int k = 0; k < workbook.getNumberOfSheets(); k++) {
            HSSFSheet sheet = workbook.getSheetAt(k);
            
            if (sheet != null) {
                int rows = sheet.getLastRowNum();
                //I don't know why the last row = sheet.getRow(rows) and first row = sheet.getRow(0) 
                for (int r = 0; r <= rows; r++) {
	                HSSFRow row = sheet.getRow(r);
	                if (row != null) {
	                    int cells = row.getLastCellNum();
	                    for (int c = 0; c <= cells; c++) {
		                    HSSFCell cell = row.getCell((short) c);
		                    String value = null;
		                    if (cell != null) {
		                        switch (cell.getCellType()) {
		                            case HSSFCell.CELL_TYPE_FORMULA:
		                                value = cell.getCellFormula();
		                                break;
		                            case HSSFCell.CELL_TYPE_STRING:
		                                value = cell.getStringCellValue();
		                                break;
		                            case HSSFCell.CELL_TYPE_NUMERIC:
		                                value = "" + cell.getNumericCellValue();
		                                break;
		                            default:
		                                value = cell.getStringCellValue();
		                        }
		                    }
		                    if (value != null) {
		                        writer.write(value + " ");
		                    }
		                }//cels
	                }
	            }//rows
            }
        }//sheets
        
        //if no Exception was thrown consider that the conversion was successful 
        return true;
    }

    /**
     * @return Returns the logger.
     */
    public Log getLogger() {
        if (logger == null)
            logger = LogFactory.getLog(XLSConverterImpl.class);
        return logger;
    }

}



--------------020607060202070204070203
Content-Type: text/plain;
 name="ExeConverterImpl.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="ExeConverterImpl.txt"

package com.configworks.cwk.be.search.converters;

import com.configworks.cwk.share.Utils;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;


/**
 * Created by IntelliJ IDEA.
 * User: Kostya
 * Date: 12.09.2003
 * Time: 11:39:25
 * To change this template use Options | File Templates.
 */

public class ExeConverterImpl extends Converter {

    private Log logger = LogFactory.getLog(ExeConverterImpl.class.getName());

    public Reader convertSource(File source) {
        try {
            // the type is not registered the file content will not be added to the index
            if (_config.getExecutionPath() == null) {
                return null;
            }
            // else convert file into a temp dir and return contents of the converted file
            else {
                // if no converter is specified the file will be added withot conversion
                if (_config.getExecutionPath().length() == 0)
                    return new FileReader(source);

                String execPath = _config.getExecutionPath();

                String sourcePath = source.getAbsolutePath();
                // create tempdir if it doesn't exists
                new File(_config.getTempDirectory()).mkdirs();

                String targetPath = _config.getTempDirectory() + File.separator + source.getName()
                    + ".txt";
                
                String params = "";
                if(_config.getPathParam()!= null){
                	//add HOME parameter
                	params += _config.getPathParam();
                }

                Process process = Utils.executeOSCommand(execPath, sourcePath, targetPath, params);
                process.waitFor();
                if (logger.isTraceEnabled()) {
                    BufferedInputStream stream=null;
                    try {
	                    stream = new BufferedInputStream(process.getErrorStream());
	                    int read = 0;
	                    String outErrorString = "";
	                    while ((read = stream.read()) > 0)
	                        outErrorString += ((char) read);
	                    stream.close();
	                    if (outErrorString.length() > 0)
	                        logger.error(outErrorString);
                    } finally {
                        if (stream!=null) {
                            stream.close();
                        }
                    }
                }
                File convertedSource = new File(targetPath);
                convertedSource.deleteOnExit();
                return new FileReader(convertedSource);
            }
        } catch (IOException ex) {
            if (logger.isErrorEnabled())
                logger.error("IOException: " + ex.getMessage());
        } catch (InterruptedException ex) {
            if (logger.isErrorEnabled())
                logger.error("InterruptedException: " + ex.getMessage());
        }
            
        return null;
    }
}

--------------020607060202070204070203
Content-Type: text/plain;
 name="JavaDocumentConverter.java.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="JavaDocumentConverter.java.txt"

/* @(#) CWK 1.4 25.06.2004
 * 
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

package com.configworks.cwk.be.search.converters;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.Reader;

/**
 * Class description 
 *  
 * @author sergiu
 * @version 1.0
 * 
 * @since CWK 1.5
 */
public abstract class JavaDocumentConverter extends Converter {

	File dest = null;
	
	/* (non-Javadoc)
	 * @see com.configworks.cwk.be.search.converters.Converter#convertSource(java.io.File)
	 */
	public Reader convertSource(File source) {
		if (source == null)
			return null;
		Reader reader = null;
		InputStream inputStream = null;
		BufferedWriter writer = null;
		try {
			String filename = source.getName();
			filename = filename.replace('.', '_');
			filename += ".txt";
			File tmpDir = new File(_config.getTempDirectory());
			tmpDir.mkdirs();
			dest = new File(tmpDir.getPath(), filename);
			boolean created = dest.createNewFile();            
			
			//create the input and output streams 
			writer = new BufferedWriter( 
					new FileWriter(dest));
			inputStream = new FileInputStream(source);
			
			extractText(inputStream, writer);
			
			if (!dest.exists())
				return null;
			dest.deleteOnExit();
			reader = new BufferedReader(new FileReader(dest));

		} catch (Exception e) {
			getLogger().error("JavaDocumentConverter cannot convert the source file: "
					+ source.getAbsolutePath(), e);
			reader = null;
		}finally{
			try {
				if(writer != null)
					writer.close();
				if(inputStream != null)
					inputStream.close();
			} catch (IOException ex) {
				if(getLogger().isDebugEnabled())
					getLogger().error("Cannot close the stream: " + ex);
			}
		}
		return reader;

	}

	/**
	 * @param inputStream
	 * @param writer
	 * @since CWK 1.4.1
	 * @see 
	 */
	public abstract boolean extractText(InputStream inputStream, BufferedWriter writer) throws IOException; 

}

--------------020607060202070204070203
Content-Type: text/plain;
 name="PPTConverterImpl.java.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="PPTConverterImpl.java.txt"

/* @(#) CWK 1.5 23.06.2004
 * 
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

package com.configworks.cwk.be.search.converters;

import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import org.apache.poi.hpsf.PropertySet;
import org.apache.poi.hpsf.PropertySetFactory;
import org.apache.poi.poifs.eventfilesystem.POIFSReader;
import org.apache.poi.poifs.eventfilesystem.POIFSReaderEvent;
import org.apache.poi.poifs.eventfilesystem.POIFSReaderListener;
import org.apache.poi.util.LittleEndian;

/**
 * Class description
 *
 * @author sergiu
 * @version 1.0
 * @since CWK 1.5
 */
public class PPTConverterImpl extends JavaDocumentConverter {

    static final String lineSeparator = System.getProperty("line.separator");
   
    /**
     * Extract the text from a number of presentations.
     */
    public boolean extractText(InputStream  reader, BufferedWriter writer) throws IOException{
    		POIFSReader r = new POIFSReader();

    		/* Register a listener for *all* documents. */
    		MyPOIFSReaderListener listener = new MyPOIFSReaderListener(writer);
    		r.registerListener(listener);
    		r.read(reader);
    		//if no exception was trown, consider that the conversion was successful  
    		return true;
    }	
    
    class MyPOIFSReaderListener implements POIFSReaderListener{
    	private BufferedWriter writer = null;
    	
    	public MyPOIFSReaderListener(BufferedWriter writer){
    		this.writer = writer;
    	}

    	public void processPOIFSReaderEvent(POIFSReaderEvent event) {
    		PropertySet ps = null;

    		try{
    			
    			org.apache.poi.poifs.filesystem.DocumentInputStream dis=null;
    			if(!event.getName().equalsIgnoreCase("PowerPoint Document"))
    				return;
    			
    			dis=event.getStream();
    			
    			byte btoWrite[]= new byte[12];
    			dis.read(btoWrite);
    			
    			btoWrite = new byte[dis.available()];
    			dis.read(btoWrite, 0, dis.available());
    			
    			//StringBuffer buff = new StringBuffer("");
    			
    			for(int i=0; i<btoWrite.length-20; i++){

    				long type=LittleEndian.getUShort(btoWrite,i+2);
    				long size=LittleEndian.getUInt(btoWrite,i+4);
    				if (type==4008){
    					
    					int offset = i+4+1;
    					int length = (int)size+3;
    					int end = offset + length;
    					
    					byte[] textBytes = new byte[length]; 
    					
    					for (int j = offset; j < end; j++) {
    						byte b = btoWrite[j];
    						writer.write((char) b);
    					}

    					if(i < (end -1))
    						i = end -1;
    				}
    				
    			}
    			
    			PropertySetFactory.create(event.getStream());
    		}catch (Exception e){
    			String msg = "Cannot index ppt file: \n";
    		    if(getLogger().isErrorEnabled())
    		    	getLogger().error(msg + e);
    		}	
    	}	
    }
}




--------------020607060202070204070203
Content-Type: text/plain;
 name="WordConverterImpl.java.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="WordConverterImpl.java.txt"

/* @(#) CWK 1.4 24.06.2004
 * 
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

package com.configworks.cwk.be.search.converters;

import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import org.apache.poi.poifs.filesystem.DocumentEntry;
import org.apache.poi.poifs.filesystem.DocumentInputStream;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;
import org.apache.poi.util.LittleEndian;

/**
 * Class description
 *
 * @author sergiu
 * @version 1.0
 * @since CWK 1.5
 */
public class WordConverterImpl extends JavaDocumentConverter {

    public boolean extractText(InputStream in, BufferedWriter writer) throws IOException{
    	ArrayList text = new ArrayList();
    	POIFSFileSystem fsys = new POIFSFileSystem(in);

    	DocumentEntry headerProps =
    	(DocumentEntry)fsys.getRoot().getEntry("WordDocument");
    	DocumentInputStream din = fsys.createDocumentInputStream("WordDocument");
    	byte[] header = new byte[headerProps.getSize()];

    	din.read(header);
    	din.close();
    	// Prende le informazioni dall'header del documento
    	int info = LittleEndian.getShort(header, 0xa);

    	boolean useTable1 = (info & 0x200) != 0;

    	// Prende informazioni dalla piece table
    	int complexOffset = LittleEndian.getInt(header, 0x1a2);


    	String tableName = null;
    	if (useTable1)
    		tableName = "1Table";
    	else
    		tableName = "0Table";
    	
    	DocumentEntry table = (DocumentEntry)fsys.getRoot().getEntry(tableName);
    	byte[] tableStream = new byte[table.getSize()];

    	din = fsys.createDocumentInputStream(tableName);

    	din.read(tableStream);
    	din.close();

    	din = null;
    	fsys = null;
    	table = null;
    	headerProps = null;

    	int multiple = findText(tableStream, complexOffset, text);

    	StringBuffer sb = new StringBuffer();
    	int size = text.size();
    	tableStream = null;

    	for (int x = 0; x < size; x++){
    		WordTextPiece nextPiece = (WordTextPiece)text.get(x);
    		int start = nextPiece.getStart();
    		int length = nextPiece.getLength();

    		boolean unicode = nextPiece.usesUnicode();
    		String toStr = null;
    		if (unicode)
    			toStr = new String(header, start, length * multiple, "UTF-16LE");
    		else
    			toStr = new String(header, start, length , "ISO-8859-1");
    		
    		//sb.append(toStr).append(" ");
    		toStr += " ";
    		writer.write(toStr);
    	}
    	//if no exeption occured we say that the conversion was successfully realized 
    	return true;
    }

    private static int findText(byte[] tableStream, int complexOffset,
								ArrayList text) throws IOException{
    	//actual text
    	int pos = complexOffset;
    	int multiple = 2;
    	//skips through the prms before we reach the piece table. These contain data
    	//for actual fast saved files
    	while(tableStream[pos] == 1){
    		pos++;
    		int skip = LittleEndian.getShort(tableStream, pos);
    		pos += 2 + skip;
    	}
    	
    	if(tableStream[pos] != 2){
    		throw new IOException("corrupted Word file");
    	}else{
    		//parse out the text pieces
    		int pieceTableSize = LittleEndian.getInt(tableStream, ++pos);
    		pos += 4;
    		int pieces = (pieceTableSize - 4) / 12;
    		for (int x = 0; x < pieces; x++){
    			int filePos = LittleEndian.getInt(tableStream, pos + ((pieces 
    					+ 1) * 4) +
    					(x * 8) + 2);
    			boolean unicode = false;
    			if ((filePos & 0x40000000) == 0){
    				unicode = true;
    			}else{
    				unicode = false;
    				multiple = 1;
    				filePos &= ~(0x40000000);//gives me FC in doc stream
    				filePos /= 2;
    			}
    			
    			int totLength = LittleEndian.getInt(tableStream, pos + (x + 1) * 4)
    							- LittleEndian.getInt(tableStream, pos + (x * 4));

    			WordTextPiece piece = new WordTextPiece(filePos, totLength, unicode);
    			
    			text.add(piece);
    		}
    	}
    	return multiple;
    }
    
    

}



--------------020607060202070204070203
Content-Type: text/plain;
 name="WordTextPiece.java.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="WordTextPiece.java.txt"

/* @(#) CWK 1.4 07.06.2004
 * 
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

package com.configworks.cwk.be.search.converters;

/**
 * Class description 
 *  
 * @author sergiu
 * @version 1.0
 * 
 * @since CWK 1.4
 */
class WordTextPiece{
	private int _fcStart;
	private boolean _usesUnicode;
	private int _length;

	public WordTextPiece(int start, int length, boolean unicode){
		_usesUnicode = unicode;
		_length = length;
		_fcStart = start;
	}
	public boolean usesUnicode(){
		return _usesUnicode;
	}

	public int getStart(){
		return _fcStart;
	}
	public int getLength(){
		return _length;
	}

}



--------------020607060202070204070203
Content-Type: text/plain;
 name="Converter.java.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Converter.java.txt"

package com.configworks.cwk.be.search.converters;

import java.io.File;
import java.io.Reader;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

/**
 * Created by IntelliJ IDEA.
 * User: Kostya
 * Date: 11.09.2003
 * Time: 19:24:56
 * To change this template use Options | File Templates.
 */

public abstract class Converter {
    protected ConverterConfig _config;
    private static Log logger = null;
    
    public abstract Reader convertSource(File source);

    protected void Initialize(ConverterConfig config) {
        _config = config;
    };
    
    /**
     * @return Returns the logger.
     */
    public Log getLogger() {
    	if (logger == null)
    		logger = LogFactory.getLog(XLSConverterImpl.class);
    	return logger;
    }
}


--------------020607060202070204070203
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------020607060202070204070203--


From lucene-user-return-8897-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 14:08:51 2004
Return-Path: <lucene-user-return-8897-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66164 invoked from network); 25 Jun 2004 14:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 14:08:51 -0000
Received: (qmail 74071 invoked by uid 500); 25 Jun 2004 14:07:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73973 invoked by uid 500); 25 Jun 2004 14:07:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73855 invoked by uid 99); 25 Jun 2004 14:07:42 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=HTML_40_50,HTML_BADTAG_00_10,HTML_MESSAGE,HTML_NONELEMENT_10_20
X-Spam-Check-By: apache.org
Received: from [203.200.48.226] (HELO services.india.aalayance.com) (203.200.48.226)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 07:07:41 -0700
Received: from ajitendra (unknown [192.168.3.58])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by services.india.aalayance.com (Postfix) with ESMTP id A7C59C198A
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 19:37:30 +0530 (IST)
Message-ID: <027d01c45abe$763c35c0$3a03a8c0@india.aalayance.com>
From: "jitender ahuja" <ajitender@aalayance.com>
To: <lucene-user@jakarta.apache.org>
Subject: multiple select box parameter passing to jsp page causes error
Date: Fri, 25 Jun 2004 19:42:34 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_027A_01C45AEC.8FBD8340"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_027A_01C45AEC.8FBD8340
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi all,

        I am developing a html page in which there is a multiple =
selection box taht indicates the Indexed fields to be searched upon. =
Also, it has as the default option the All Fields option.
Now, some fields (options) are allowed to be selected in =
combination.This means that the parameter to be passed to the relevant =
jsp page must have that combination as a whole to select upon only the =
desired fields for the existence of the query term(s).
Now, the parameter for this multiple selection scenario is passed =
multiple times(same as number of the options selected) to the jsp page =
and causes error that is summarised below:

 java.lang.NullPointerException
at org.apache.lucene.index.Term.(Term.java:36)
at org.apache.lucene.index.Term.(Term.java:33)
at =
org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:=
253)
at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:638)
at =
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:537)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:480)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:108)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:87)
at =
org.apache.lucene.queryParser.MultiFieldQueryParser.parse(MultiFieldQuery=
Parser.java:77)
at org.apache.jsp.outputjsp_jsp._jspService(output_jsp.java:290)

The  file,  output_jsp.java has the following code lines at line numbers =
 289, 290  that deal with the number of options selected being =
represented in the "size" variable
289:else if (size !=3D 1){                                               =
                  // if multiple(>1) options are selected
290:             query =3D MultiFieldQueryParser.parse(queryString, =
fields1, analyzer); //parse the query
         }


Regards,
Jitender
------=_NextPart_000_027A_01C45AEC.8FBD8340--


From lucene-user-return-8898-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 15:01:04 2004
Return-Path: <lucene-user-return-8898-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9209 invoked from network); 25 Jun 2004 15:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 15:01:04 -0000
Received: (qmail 61567 invoked by uid 500); 25 Jun 2004 15:01:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61476 invoked by uid 500); 25 Jun 2004 15:01:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61447 invoked by uid 99); 25 Jun 2004 15:01:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 08:00:59 -0700
Received: from neptune.ebi.ac.uk (neptune.ebi.ac.uk [172.22.8.118])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with ESMTP id i5PF0iF09893
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 16:00:44 +0100 (BST)
Received: (from kirsch@localhost)
	by neptune.ebi.ac.uk (8.11.6/8.11.6) id i5PF0hp15646
	for lucene-user@jakarta.apache.org; Fri, 25 Jun 2004 16:00:43 +0100
Date: Fri, 25 Jun 2004 16:00:43 +0100
From: Harald Kirsch <kirsch@ebi.ac.uk>
To: lucene user mailing list <lucene-user@jakarta.apache.org>
Subject: best mergeFactor for merging 100 Indexes
Message-ID: <20040625160043.H10707@neptune.ebi.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5.1i
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

after an hour of indexing on a cluster I got 100 Indexes, ca. 25MB
each, 2 indexed fields. I intend now to run code roughly like

   IndexWriter writer = new IndexWriter(destDir, ...);
   writer.addIndexes(my100IndexDirs);
   writer.close()

When I did this a year ago, I know I had tough problems getting around
memory limitations and open file limits at the same time. In the end
it worked with writer.mergeFactor==4000, but I think it was a
specially tweaked kernel on Linux which I don't have anymore.

Since I don't really understand yet how open files, segments, memory
use, indexing time and mergeFacter interact, I would appreciate a good
gues how to combine these indexes.

Which mergeFactor to use?
Use a different strategy then the 3 lines shown above?

  Thanks,
  Harald.

-- 
------------------------------------------------------------------------
Harald Kirsch | kirsch@ebi.ac.uk | +44 (0) 1223/49-2593

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8899-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 15:12:10 2004
Return-Path: <lucene-user-return-8899-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15262 invoked from network); 25 Jun 2004 15:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 15:12:10 -0000
Received: (qmail 95800 invoked by uid 500); 25 Jun 2004 15:12:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95639 invoked by uid 500); 25 Jun 2004 15:11:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95606 invoked by uid 99); 25 Jun 2004 15:11:57 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 08:11:53 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5PFBCYP018522
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 11:11:13 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040625105614.01c4aac8@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Fri, 25 Jun 2004 11:12:58 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Lucene Error
In-Reply-To: <40D821CA.5080203@getopt.org>
References: <40D821CA.5080203@getopt.org>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_91913562==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_91913562==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hello All,

I'm using Lucene to build collections from ColdFusion which I've got 
working pretty good so far.  But I am getting the following exception for 
some reason that I can't understand and never used to get before.

Below is the stack trace for that error.  Lucene is telling me that it 
cannot delete a file named 'query_1088174609733.log' which I create in the 
same folder as the Lucene collections.  I don't understand why Lucene is 
trying to delete this file.  I have verified that I am creating a new 
collection and not updating an existing one.

Anyone have any ideas.

Thanks

java.io.IOException: couldn&apos;t delete query_1088174609733.log
         at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:166)
         at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:151)
         at 
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:132)
         at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:160)
         at Index.getIndexWriter(Index.java:154)
         at Index.update(Index.java:83)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
         at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:324)
         at coldfusion.runtime.StructBean.invoke(StructBean.java:326)
         at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:1650)
         at 
cfindex2ecfm778374439.runPage(C:\Inetpub\wwwroot\prism\prism376\Lucene\index.cfm:58)
         at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:147)
         at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:357)
         at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:62)
         at 
coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:107)
         at coldfusion.filter.PathFilter.invoke(PathFilter.java:80)
         at coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:24)
         at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:47)
         at 
coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
         at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:35)
         at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:43)
         at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
         at coldfusion.CfmServlet.service(CfmServlet.java:105)
         at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:91)
         at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
         at 
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:252)
         at 
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:527)
         at 
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:192)
         at 
jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:348)
         at 
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:451)
         at 
jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:294)
         at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)






Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_91913562==.ALT--


From lucene-user-return-8900-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 15:19:22 2004
Return-Path: <lucene-user-return-8900-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19833 invoked from network); 25 Jun 2004 15:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 15:19:22 -0000
Received: (qmail 19630 invoked by uid 500); 25 Jun 2004 15:19:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19346 invoked by uid 500); 25 Jun 2004 15:18:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19195 invoked by uid 99); 25 Jun 2004 15:18:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [163.205.16.2] (HELO tdsupport.ksc.nasa.gov) (163.205.16.2)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 08:18:56 -0700
Received: from tdryan (tdryan.ksc.nasa.gov [163.205.218.218])
	by tdsupport.ksc.nasa.gov (8.11.6/8.11.6) with SMTP id i5PEr3421721
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 10:53:03 -0400
Message-ID: <024601c45ac9$021a7070$dadacda3@tdryan>
Reply-To: "Ryan Ackley" <sackley@apache.org>
From: "Ryan Ackley" <sackley@cfl.rr.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <40DC1DA4.2020001@ifit.uni-klu.ac.at>
Subject: Re: Index MSOffice Documents
Date: Fri, 25 Jun 2004 11:28:04 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Sergiu,

You should also post to the Lucene Users list.

-Ryan

----- Original Message ----- 
From: "Sergiu Gordea" <gsergiu@ifit.uni-klu.ac.at>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>;
<lucene-dev@jakarta.apache.org>
Cc: "POI Users List" <poi-user@jakarta.apache.org>
Sent: Friday, June 25, 2004 8:42 AM
Subject: Index MSOffice Documents


> Hi all,
>
>  I'm working on a project in which we are building a knowledge
> management platform. We are using Turbine/Velocity
> as framework and we are using lucene for search.
>
>  We want to make the search to be able to index MSOffice Documents,
> therefore I was searching for some possibilities to extract the text
> from this
> documents. I found some examples based on POI library
> (http://jakarta.apache.org/poi) and I addapted them to our needs.
> The extraction of the text elements from XLS file I think is trustable
> (the from POI development comunity did a great job with the package that
> work with XSL files). The examples that extract the text from DOC and
> PPT files are not very general, I think they have problems with the
> documents
> written with special charsets but they are working just well on the
> documents I use. I hope someone that has more experience that I have
> will improve this
> and will a better source code.
>
>  Congratulations to all people involved in development of the Jakarta
> project and it's subprojects,
>
>  Sergiu Gordea
>
> Ps: ExeConverteImpl uses an external stand alone application (like
> antiwort or pdf2txt) to extract the text.
>


----------------------------------------------------------------------------
----


> /* @(#) CWK 1.4 07.06.2004
>  *
>  * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>  * Universittsstr. 94/7 9020 Klagenfurt Austria
>  * www.configworks.com
>  * All rights reserved.
>  */
>
> package com.configworks.cwk.be.search.converters;
>
> import java.io.BufferedWriter;
> import java.io.File;
> import java.io.FileNotFoundException;
> import java.io.IOException;
> import java.io.InputStream;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import org.apache.poi.hssf.usermodel.HSSFCell;
> import org.apache.poi.hssf.usermodel.HSSFRow;
> import org.apache.poi.hssf.usermodel.HSSFSheet;
> import org.apache.poi.hssf.usermodel.HSSFWorkbook;
>
> /**
>  * Class description
>  *
>  * @author sergiu
>  * @version 1.0
>  * @since CWK 1.5
>  */
> public class XLSConverterImpl extends JavaDocumentConverter {
>
>     private Log logger = null;
>     File dest = null;
>
>
>
>     public boolean extractText(InputStream reader, BufferedWriter writer)
throws FileNotFoundException,
>         IOException {
>
>         HSSFWorkbook workbook = new HSSFWorkbook(reader);
>
>         for (int k = 0; k < workbook.getNumberOfSheets(); k++) {
>             HSSFSheet sheet = workbook.getSheetAt(k);
>
>             if (sheet != null) {
>                 int rows = sheet.getLastRowNum();
>                 //I don't know why the last row = sheet.getRow(rows) and
first row = sheet.getRow(0)
>                 for (int r = 0; r <= rows; r++) {
>                 HSSFRow row = sheet.getRow(r);
>                 if (row != null) {
>                     int cells = row.getLastCellNum();
>                     for (int c = 0; c <= cells; c++) {
>                     HSSFCell cell = row.getCell((short) c);
>                     String value = null;
>                     if (cell != null) {
>                         switch (cell.getCellType()) {
>                             case HSSFCell.CELL_TYPE_FORMULA:
>                                 value = cell.getCellFormula();
>                                 break;
>                             case HSSFCell.CELL_TYPE_STRING:
>                                 value = cell.getStringCellValue();
>                                 break;
>                             case HSSFCell.CELL_TYPE_NUMERIC:
>                                 value = "" + cell.getNumericCellValue();
>                                 break;
>                             default:
>                                 value = cell.getStringCellValue();
>                         }
>                     }
>                     if (value != null) {
>                         writer.write(value + " ");
>                     }
>                 }//cels
>                 }
>             }//rows
>             }
>         }//sheets
>
>         //if no Exception was thrown consider that the conversion was
successful
>         return true;
>     }
>
>     /**
>      * @return Returns the logger.
>      */
>     public Log getLogger() {
>         if (logger == null)
>             logger = LogFactory.getLog(XLSConverterImpl.class);
>         return logger;
>     }
>
> }
>
>
>


----------------------------------------------------------------------------
----


> package com.configworks.cwk.be.search.converters;
>
> import com.configworks.cwk.share.Utils;
> import java.io.BufferedInputStream;
> import java.io.File;
> import java.io.FileReader;
> import java.io.IOException;
> import java.io.Reader;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
>
>
> /**
>  * Created by IntelliJ IDEA.
>  * User: Kostya
>  * Date: 12.09.2003
>  * Time: 11:39:25
>  * To change this template use Options | File Templates.
>  */
>
> public class ExeConverterImpl extends Converter {
>
>     private Log logger =
LogFactory.getLog(ExeConverterImpl.class.getName());
>
>     public Reader convertSource(File source) {
>         try {
>             // the type is not registered the file content will not be
added to the index
>             if (_config.getExecutionPath() == null) {
>                 return null;
>             }
>             // else convert file into a temp dir and return contents of
the converted file
>             else {
>                 // if no converter is specified the file will be added
withot conversion
>                 if (_config.getExecutionPath().length() == 0)
>                     return new FileReader(source);
>
>                 String execPath = _config.getExecutionPath();
>
>                 String sourcePath = source.getAbsolutePath();
>                 // create tempdir if it doesn't exists
>                 new File(_config.getTempDirectory()).mkdirs();
>
>                 String targetPath = _config.getTempDirectory() +
File.separator + source.getName()
>                     + ".txt";
>
>                 String params = "";
>                 if(_config.getPathParam()!= null){
>                 //add HOME parameter
>                 params += _config.getPathParam();
>                 }
>
>                 Process process = Utils.executeOSCommand(execPath,
sourcePath, targetPath, params);
>                 process.waitFor();
>                 if (logger.isTraceEnabled()) {
>                     BufferedInputStream stream=null;
>                     try {
>                     stream = new
BufferedInputStream(process.getErrorStream());
>                     int read = 0;
>                     String outErrorString = "";
>                     while ((read = stream.read()) > 0)
>                         outErrorString += ((char) read);
>                     stream.close();
>                     if (outErrorString.length() > 0)
>                         logger.error(outErrorString);
>                     } finally {
>                         if (stream!=null) {
>                             stream.close();
>                         }
>                     }
>                 }
>                 File convertedSource = new File(targetPath);
>                 convertedSource.deleteOnExit();
>                 return new FileReader(convertedSource);
>             }
>         } catch (IOException ex) {
>             if (logger.isErrorEnabled())
>                 logger.error("IOException: " + ex.getMessage());
>         } catch (InterruptedException ex) {
>             if (logger.isErrorEnabled())
>                 logger.error("InterruptedException: " + ex.getMessage());
>         }
>
>         return null;
>     }
> }
>


----------------------------------------------------------------------------
----


> /* @(#) CWK 1.4 25.06.2004
>  *
>  * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>  * Universittsstr. 94/7 9020 Klagenfurt Austria
>  * www.configworks.com
>  * All rights reserved.
>  */
>
> package com.configworks.cwk.be.search.converters;
>
> import java.io.BufferedReader;
> import java.io.BufferedWriter;
> import java.io.File;
> import java.io.FileInputStream;
> import java.io.FileReader;
> import java.io.FileWriter;
> import java.io.IOException;
> import java.io.InputStream;
> import java.io.Reader;
>
> /**
>  * Class description
>  *
>  * @author sergiu
>  * @version 1.0
>  *
>  * @since CWK 1.5
>  */
> public abstract class JavaDocumentConverter extends Converter {
>
> File dest = null;
>
> /* (non-Javadoc)
> * @see
com.configworks.cwk.be.search.converters.Converter#convertSource(java.io.Fil
e)
> */
> public Reader convertSource(File source) {
> if (source == null)
> return null;
> Reader reader = null;
> InputStream inputStream = null;
> BufferedWriter writer = null;
> try {
> String filename = source.getName();
> filename = filename.replace('.', '_');
> filename += ".txt";
> File tmpDir = new File(_config.getTempDirectory());
> tmpDir.mkdirs();
> dest = new File(tmpDir.getPath(), filename);
> boolean created = dest.createNewFile();
>
> //create the input and output streams
> writer = new BufferedWriter(
> new FileWriter(dest));
> inputStream = new FileInputStream(source);
>
> extractText(inputStream, writer);
>
> if (!dest.exists())
> return null;
> dest.deleteOnExit();
> reader = new BufferedReader(new FileReader(dest));
>
> } catch (Exception e) {
> getLogger().error("JavaDocumentConverter cannot convert the source file: "
> + source.getAbsolutePath(), e);
> reader = null;
> }finally{
> try {
> if(writer != null)
> writer.close();
> if(inputStream != null)
> inputStream.close();
> } catch (IOException ex) {
> if(getLogger().isDebugEnabled())
> getLogger().error("Cannot close the stream: " + ex);
> }
> }
> return reader;
>
> }
>
> /**
> * @param inputStream
> * @param writer
> * @since CWK 1.4.1
> * @see
> */
> public abstract boolean extractText(InputStream inputStream,
BufferedWriter writer) throws IOException;
>
> }
>


----------------------------------------------------------------------------
----


> /* @(#) CWK 1.5 23.06.2004
>  *
>  * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>  * Universittsstr. 94/7 9020 Klagenfurt Austria
>  * www.configworks.com
>  * All rights reserved.
>  */
>
> package com.configworks.cwk.be.search.converters;
>
> import java.io.BufferedWriter;
> import java.io.IOException;
> import java.io.InputStream;
> import org.apache.poi.hpsf.PropertySet;
> import org.apache.poi.hpsf.PropertySetFactory;
> import org.apache.poi.poifs.eventfilesystem.POIFSReader;
> import org.apache.poi.poifs.eventfilesystem.POIFSReaderEvent;
> import org.apache.poi.poifs.eventfilesystem.POIFSReaderListener;
> import org.apache.poi.util.LittleEndian;
>
> /**
>  * Class description
>  *
>  * @author sergiu
>  * @version 1.0
>  * @since CWK 1.5
>  */
> public class PPTConverterImpl extends JavaDocumentConverter {
>
>     static final String lineSeparator =
System.getProperty("line.separator");
>
>     /**
>      * Extract the text from a number of presentations.
>      */
>     public boolean extractText(InputStream  reader, BufferedWriter writer)
throws IOException{
>     POIFSReader r = new POIFSReader();
>
>     /* Register a listener for *all* documents. */
>     MyPOIFSReaderListener listener = new MyPOIFSReaderListener(writer);
>     r.registerListener(listener);
>     r.read(reader);
>     //if no exception was trown, consider that the conversion was
successful
>     return true;
>     }
>
>     class MyPOIFSReaderListener implements POIFSReaderListener{
>     private BufferedWriter writer = null;
>
>     public MyPOIFSReaderListener(BufferedWriter writer){
>     this.writer = writer;
>     }
>
>     public void processPOIFSReaderEvent(POIFSReaderEvent event) {
>     PropertySet ps = null;
>
>     try{
>
>     org.apache.poi.poifs.filesystem.DocumentInputStream dis=null;
>     if(!event.getName().equalsIgnoreCase("PowerPoint Document"))
>     return;
>
>     dis=event.getStream();
>
>     byte btoWrite[]= new byte[12];
>     dis.read(btoWrite);
>
>     btoWrite = new byte[dis.available()];
>     dis.read(btoWrite, 0, dis.available());
>
>     //StringBuffer buff = new StringBuffer("");
>
>     for(int i=0; i<btoWrite.length-20; i++){
>
>     long type=LittleEndian.getUShort(btoWrite,i+2);
>     long size=LittleEndian.getUInt(btoWrite,i+4);
>     if (type==4008){
>
>     int offset = i+4+1;
>     int length = (int)size+3;
>     int end = offset + length;
>
>     byte[] textBytes = new byte[length];
>
>     for (int j = offset; j < end; j++) {
>     byte b = btoWrite[j];
>     writer.write((char) b);
>     }
>
>     if(i < (end -1))
>     i = end -1;
>     }
>
>     }
>
>     PropertySetFactory.create(event.getStream());
>     }catch (Exception e){
>     String msg = "Cannot index ppt file: \n";
>         if(getLogger().isErrorEnabled())
>         getLogger().error(msg + e);
>     }
>     }
>     }
> }
>
>
>
>


----------------------------------------------------------------------------
----


> /* @(#) CWK 1.4 24.06.2004
>  *
>  * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>  * Universittsstr. 94/7 9020 Klagenfurt Austria
>  * www.configworks.com
>  * All rights reserved.
>  */
>
> package com.configworks.cwk.be.search.converters;
>
> import java.io.BufferedWriter;
> import java.io.IOException;
> import java.io.InputStream;
> import java.util.ArrayList;
> import org.apache.poi.poifs.filesystem.DocumentEntry;
> import org.apache.poi.poifs.filesystem.DocumentInputStream;
> import org.apache.poi.poifs.filesystem.POIFSFileSystem;
> import org.apache.poi.util.LittleEndian;
>
> /**
>  * Class description
>  *
>  * @author sergiu
>  * @version 1.0
>  * @since CWK 1.5
>  */
> public class WordConverterImpl extends JavaDocumentConverter {
>
>     public boolean extractText(InputStream in, BufferedWriter writer)
throws IOException{
>     ArrayList text = new ArrayList();
>     POIFSFileSystem fsys = new POIFSFileSystem(in);
>
>     DocumentEntry headerProps =
>     (DocumentEntry)fsys.getRoot().getEntry("WordDocument");
>     DocumentInputStream din =
fsys.createDocumentInputStream("WordDocument");
>     byte[] header = new byte[headerProps.getSize()];
>
>     din.read(header);
>     din.close();
>     // Prende le informazioni dall'header del documento
>     int info = LittleEndian.getShort(header, 0xa);
>
>     boolean useTable1 = (info & 0x200) != 0;
>
>     // Prende informazioni dalla piece table
>     int complexOffset = LittleEndian.getInt(header, 0x1a2);
>
>
>     String tableName = null;
>     if (useTable1)
>     tableName = "1Table";
>     else
>     tableName = "0Table";
>
>     DocumentEntry table =
(DocumentEntry)fsys.getRoot().getEntry(tableName);
>     byte[] tableStream = new byte[table.getSize()];
>
>     din = fsys.createDocumentInputStream(tableName);
>
>     din.read(tableStream);
>     din.close();
>
>     din = null;
>     fsys = null;
>     table = null;
>     headerProps = null;
>
>     int multiple = findText(tableStream, complexOffset, text);
>
>     StringBuffer sb = new StringBuffer();
>     int size = text.size();
>     tableStream = null;
>
>     for (int x = 0; x < size; x++){
>     WordTextPiece nextPiece = (WordTextPiece)text.get(x);
>     int start = nextPiece.getStart();
>     int length = nextPiece.getLength();
>
>     boolean unicode = nextPiece.usesUnicode();
>     String toStr = null;
>     if (unicode)
>     toStr = new String(header, start, length * multiple, "UTF-16LE");
>     else
>     toStr = new String(header, start, length , "ISO-8859-1");
>
>     //sb.append(toStr).append(" ");
>     toStr += " ";
>     writer.write(toStr);
>     }
>     //if no exeption occured we say that the conversion was successfully
realized
>     return true;
>     }
>
>     private static int findText(byte[] tableStream, int complexOffset,
> ArrayList text) throws IOException{
>     //actual text
>     int pos = complexOffset;
>     int multiple = 2;
>     //skips through the prms before we reach the piece table. These
contain data
>     //for actual fast saved files
>     while(tableStream[pos] == 1){
>     pos++;
>     int skip = LittleEndian.getShort(tableStream, pos);
>     pos += 2 + skip;
>     }
>
>     if(tableStream[pos] != 2){
>     throw new IOException("corrupted Word file");
>     }else{
>     //parse out the text pieces
>     int pieceTableSize = LittleEndian.getInt(tableStream, ++pos);
>     pos += 4;
>     int pieces = (pieceTableSize - 4) / 12;
>     for (int x = 0; x < pieces; x++){
>     int filePos = LittleEndian.getInt(tableStream, pos + ((pieces
>     + 1) * 4) +
>     (x * 8) + 2);
>     boolean unicode = false;
>     if ((filePos & 0x40000000) == 0){
>     unicode = true;
>     }else{
>     unicode = false;
>     multiple = 1;
>     filePos &= ~(0x40000000);//gives me FC in doc stream
>     filePos /= 2;
>     }
>
>     int totLength = LittleEndian.getInt(tableStream, pos + (x + 1) * 4)
>     - LittleEndian.getInt(tableStream, pos + (x * 4));
>
>     WordTextPiece piece = new WordTextPiece(filePos, totLength, unicode);
>
>     text.add(piece);
>     }
>     }
>     return multiple;
>     }
>
>
>
> }
>
>
>


----------------------------------------------------------------------------
----


> /* @(#) CWK 1.4 07.06.2004
>  *
>  * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>  * Universittsstr. 94/7 9020 Klagenfurt Austria
>  * www.configworks.com
>  * All rights reserved.
>  */
>
> package com.configworks.cwk.be.search.converters;
>
> /**
>  * Class description
>  *
>  * @author sergiu
>  * @version 1.0
>  *
>  * @since CWK 1.4
>  */
> class WordTextPiece{
> private int _fcStart;
> private boolean _usesUnicode;
> private int _length;
>
> public WordTextPiece(int start, int length, boolean unicode){
> _usesUnicode = unicode;
> _length = length;
> _fcStart = start;
> }
> public boolean usesUnicode(){
> return _usesUnicode;
> }
>
> public int getStart(){
> return _fcStart;
> }
> public int getLength(){
> return _length;
> }
>
> }
>
>
>


----------------------------------------------------------------------------
----


> package com.configworks.cwk.be.search.converters;
>
> import java.io.File;
> import java.io.Reader;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
>
> /**
>  * Created by IntelliJ IDEA.
>  * User: Kostya
>  * Date: 11.09.2003
>  * Time: 19:24:56
>  * To change this template use Options | File Templates.
>  */
>
> public abstract class Converter {
>     protected ConverterConfig _config;
>     private static Log logger = null;
>
>     public abstract Reader convertSource(File source);
>
>     protected void Initialize(ConverterConfig config) {
>         _config = config;
>     };
>
>     /**
>      * @return Returns the logger.
>      */
>     public Log getLogger() {
>     if (logger == null)
>     logger = LogFactory.getLog(XLSConverterImpl.class);
>     return logger;
>     }
> }
>
>


----------------------------------------------------------------------------
----


> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8901-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 16:31:07 2004
Return-Path: <lucene-user-return-8901-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60655 invoked from network); 25 Jun 2004 16:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 16:31:06 -0000
Received: (qmail 63438 invoked by uid 500); 25 Jun 2004 16:31:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63349 invoked by uid 500); 25 Jun 2004 16:31:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63250 invoked by uid 99); 25 Jun 2004 16:31:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 25 Jun 2004 09:31:00 -0700
Message-ID: <20040625163044.93039.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.99] by web12704.mail.yahoo.com via HTTP; Fri, 25 Jun 2004 09:30:44 PDT
Date: Fri, 25 Jun 2004 09:30:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: best mergeFactor for merging 100 Indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040625160043.H10707@neptune.ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If this is an option, use compund index format
(writer.setUseCompound(true)).  ulimit -a in some UNIX shells will tell
you the max number of open files allowed.  If you can, increase that
number as high as you can.  Of course, how high you can go also depends
on your RAM.  Finally, don't forget there is a minMergeDocs parameter
you can use to tune things, too.

Otis


--- Harald Kirsch <kirsch@ebi.ac.uk> wrote:
> Hi,
> 
> after an hour of indexing on a cluster I got 100 Indexes, ca. 25MB
> each, 2 indexed fields. I intend now to run code roughly like
> 
>    IndexWriter writer = new IndexWriter(destDir, ...);
>    writer.addIndexes(my100IndexDirs);
>    writer.close()
> 
> When I did this a year ago, I know I had tough problems getting
> around
> memory limitations and open file limits at the same time. In the end
> it worked with writer.mergeFactor==4000, but I think it was a
> specially tweaked kernel on Linux which I don't have anymore.
> 
> Since I don't really understand yet how open files, segments, memory
> use, indexing time and mergeFacter interact, I would appreciate a
> good
> gues how to combine these indexes.
> 
> Which mergeFactor to use?
> Use a different strategy then the 3 lines shown above?
> 
>   Thanks,
>   Harald.
> 
> -- 
>
------------------------------------------------------------------------
> Harald Kirsch | kirsch@ebi.ac.uk | +44 (0) 1223/49-2593
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8902-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 16:38:04 2004
Return-Path: <lucene-user-return-8902-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64427 invoked from network); 25 Jun 2004 16:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 16:38:04 -0000
Received: (qmail 79683 invoked by uid 500); 25 Jun 2004 16:38:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79504 invoked by uid 500); 25 Jun 2004 16:38:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79464 invoked by uid 99); 25 Jun 2004 16:38:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 25 Jun 2004 09:37:57 -0700
Message-ID: <20040625163742.93941.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.99] by web12704.mail.yahoo.com via HTTP; Fri, 25 Jun 2004 09:37:42 PDT
Date: Fri, 25 Jun 2004 09:37:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Error
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.1.1.0.20040625105614.01c4aac8@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Don,

I've never seen this, and I'm pretty sure it's not really Lucene's
fault.  Lucene is aware only of segments/files listed in segments file.
 Could it have anything to do with that ColdFusion code that wraps
Lucene by any chance?

Regardless, it's probably not the best practise to store non-Lucene
files in a Lucene index directory.  I suggest you store that log
elsewhere, and avoid any issues that way. :)

Otis

--- Don Vaillancourt <donv@webimpact.com> wrote:
> Hello All,
> 
> I'm using Lucene to build collections from ColdFusion which I've got 
> working pretty good so far.  But I am getting the following exception
> for 
> some reason that I can't understand and never used to get before.
> 
> Below is the stack trace for that error.  Lucene is telling me that
> it 
> cannot delete a file named 'query_1088174609733.log' which I create
> in the 
> same folder as the Lucene collections.  I don't understand why Lucene
> is 
> trying to delete this file.  I have verified that I am creating a new
> 
> collection and not updating an existing one.
> 
> Anyone have any ideas.
> 
> Thanks
> 
> java.io.IOException: couldn&apos;t delete query_1088174609733.log
>          at
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:166)
>          at
> org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:151)
>          at 
>
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:132)
>          at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:160)
>          at Index.getIndexWriter(Index.java:154)
>          at Index.update(Index.java:83)
>          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
> Method)
>          at 
>
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>          at 
>
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>          at java.lang.reflect.Method.invoke(Method.java:324)
>          at coldfusion.runtime.StructBean.invoke(StructBean.java:326)
>          at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:1650)
>          at 
>
cfindex2ecfm778374439.runPage(C:\Inetpub\wwwroot\prism\prism376\Lucene\index.cfm:58)
>          at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:147)
>          at
> coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:357)
>          at
> coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:62)
>          at 
>
coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:107)
>          at coldfusion.filter.PathFilter.invoke(PathFilter.java:80)
>          at
> coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:24)
>          at
> coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:47)
>          at 
>
coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
>          at
> coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:35)
>          at
> coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:43)
>          at
> coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
>          at coldfusion.CfmServlet.service(CfmServlet.java:105)
>          at
> jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:91)
>          at
> jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
>          at 
>
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:252)
>          at 
>
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:527)
>          at 
>
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:192)
>          at 
>
jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:348)
>          at 
>
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:451)
>          at 
>
jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:294)
>          at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
> 
> 
> 
> 
> 
> 
> Don Vaillancourt
> Director of Software Development
> 
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
> 
> 
> 
> 
> This email message is intended only for the addressee(s)
> and contains information that may be confidential and/or
> copyright.  If you are not the intended recipient please
> notify the sender by reply email and immediately delete
> this email. Use, disclosure or reproduction of this email
> by anyone other than the intended recipient(s) is strictly
> prohibited. No representation is made that this email or
> any attachments are free of viruses. Virus scanning is
> recommended and is the responsibility of the recipient.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8903-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 17:42:20 2004
Return-Path: <lucene-user-return-8903-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96312 invoked from network); 25 Jun 2004 17:42:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 17:42:20 -0000
Received: (qmail 78927 invoked by uid 500); 25 Jun 2004 17:42:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78745 invoked by uid 500); 25 Jun 2004 17:42:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78605 invoked by uid 99); 25 Jun 2004 17:42:18 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [63.100.163.104] (HELO mercury.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 10:42:18 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <NMDHG1AZ>; Fri, 25 Jun 2004 13:41:20 -0400
Message-ID: <E65AE9703B683F4C81B5B39C692EB26D1B023C@mercury.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: QueryParser and Keyword Fields
Date: Fri, 25 Jun 2004 13:41:16 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="windows-1251"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Can anyone give me advice on the best way to not have your keyword fields
analyzed by QueryParser?

Even though it seems like it would be a common problem, I have read the FAQ,
and found this relevant thread with no real answers.

http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apac
he.org&msgId=1235589

"QueryParser has some nasty habits of analyzing everything."

Can't it be smart and not analyze fields that are keywords (aka not
tokenized by the analyzer?)

Thank you,
Will

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8904-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:07:42 2004
Return-Path: <lucene-user-return-8904-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8419 invoked from network); 25 Jun 2004 18:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:07:42 -0000
Received: (qmail 48728 invoked by uid 500); 25 Jun 2004 18:07:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48583 invoked by uid 500); 25 Jun 2004 18:07:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48568 invoked by uid 99); 25 Jun 2004 18:07:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTTP_WITH_EMAIL_IN_URL
X-Spam-Check-By: apache.org
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 11:07:44 -0700
Received: (qmail 17685 invoked by uid 532); 25 Jun 2004 18:07:07 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.137239 secs); 25 Jun 2004 18:07:07 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 25 Jun 2004 18:07:07 -0000
Message-ID: <40DC69D8.5000202@tropo.com>
Date: Fri, 25 Jun 2004 11:07:20 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: ANN: Experimental site for searching javadoc of OSS projects
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I've put together a kind of experimental site which indexes the javadoc 
of OSS java projects (well, plus the JDK).

http://www.searchmorph.com/

This is meant to solve the problem where a java developer knows 
something has been done before, but where, in what project - source 
forge? jakarta? eclipse? jboss?.

There are at least 2 somewhat unique things here. I use a custom 
analyzer ("JavadocAnalyzer") which I recently mentioned on this list in 
another context. With it searches for something like "thread pool" will 
match tokens like "SyncThreadPool" or "Sync_ThreadPool".

http://nagoya.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1731360

There's also an AIM (AOL) IM bot running. You send it a query and it 
sends you back 5 URLs of matches - web search w/o a browser.


Also inside - it does query expansion so that query terms are checked 
against multiple fields (may be similar to what nutch does).

And I also use the MoreLikeThis query expansion code I wrote - from a 
results page you can find similar URLs to the hits you see. [BTW: this 
doesn't seem to have made it into the sandbox...]

http://nagoya.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1353138

The about page is here:
http://www.searchmorph.com/weblog/index.php?id=7

And the "technology inside" page elaborates a bit more:
http://www.searchmorph.com/weblog/index.php?id=3

I'm interested in feedback. Does it find matches you expect, and what 
other packages should I index?

thx,
 Dave

PS
 Surely this has been done before - what's the "competition" - any other 
similar specialized search engines?



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8905-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:23:26 2004
Return-Path: <lucene-user-return-8905-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14956 invoked from network); 25 Jun 2004 18:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:23:25 -0000
Received: (qmail 69731 invoked by uid 500); 25 Jun 2004 18:23:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69465 invoked by uid 500); 25 Jun 2004 18:23:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69450 invoked by uid 99); 25 Jun 2004 18:23:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.143.104.69] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.69)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 11:23:31 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A18EE79FE2A
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 14:23:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <E65AE9703B683F4C81B5B39C692EB26D1B023C@mercury.corp.cyveillance.com>
References: <E65AE9703B683F4C81B5B39C692EB26D1B023C@mercury.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B45FABA0-C6D4-11D8-B082-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser and Keyword Fields
Date: Fri, 25 Jun 2004 14:23:06 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 25, 2004, at 1:41 PM, wallen@Cyveillance.com wrote:
> Can anyone give me advice on the best way to not have your keyword  
> fields
> analyzed by QueryParser?
>
> Even though it seems like it would be a common problem, I have read  
> the FAQ,
> and found this relevant thread with no real answers.
>
> http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene- 
> user@jakarta.apac
> he.org&msgId=1235589
>
> "QueryParser has some nasty habits of analyzing everything."

Try searching the archives for NullAnalyzer or KeywordAnalyzer... then  
use a PerFieldAnalyzerWrapper, with a special "analyzer" defined for  
your keyword fields.

> Can't it be smart and not analyze fields that are keywords (aka not
> tokenized by the analyzer?)

This would be a major non-trivial change to make, I'm afraid.  You're  
currently best sticking with the above advice at this point.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8906-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:24:18 2004
Return-Path: <lucene-user-return-8906-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15283 invoked from network); 25 Jun 2004 18:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:24:17 -0000
Received: (qmail 70832 invoked by uid 500); 25 Jun 2004 18:24:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70811 invoked by uid 500); 25 Jun 2004 18:24:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70798 invoked by uid 99); 25 Jun 2004 18:24:25 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received: from [216.239.56.242] (HELO mproxy.gmail.com) (216.239.56.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 25 Jun 2004 11:24:25 -0700
Received: by mproxy.gmail.com with SMTP id x43so268531cwb
        for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 11:24:06 -0700 (PDT)
Received: by 10.38.206.15 with SMTP id d15mr26001rng;
        Fri, 25 Jun 2004 11:24:06 -0700 (PDT)
Message-ID: <8f8e14c40406251124102752ba@mail.gmail.com>
Date: Fri, 25 Jun 2004 14:24:06 -0400
From: Drew Farris <drew.farris@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Optimizing for long queries?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Apologies if this is a FAQ, but I didn't have much luck searching the
list archives for answers on this subject:

I'm using Lucene in a context where we have frequently have queries
that search for as many as 30-50 terms in a single field. Does anyone
have any thoughts concerning ways optimize Lucene for queries of these
lengths?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8907-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:34:53 2004
Return-Path: <lucene-user-return-8907-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19440 invoked from network); 25 Jun 2004 18:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:34:53 -0000
Received: (qmail 94770 invoked by uid 500); 25 Jun 2004 18:34:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94616 invoked by uid 500); 25 Jun 2004 18:34:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94473 invoked by uid 99); 25 Jun 2004 18:34:49 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 11:34:40 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5PIXpuA011448
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 14:33:51 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040625143230.01b46190@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Fri, 25 Jun 2004 14:34:14 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Re: Lucene Error
In-Reply-To: <20040625163742.93941.qmail@web12704.mail.yahoo.com>
References: <6.1.1.1.0.20040625105614.01c4aac8@localhost>
 <20040625163742.93941.qmail@web12704.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_104073078==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_104073078==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hello,

Someone replied to me off-list and suggested to me the same thing and it 
did resolve the problem.

Thanks

At 12:37 PM 25/06/2004, you wrote:
>Hello Don,
>
>I've never seen this, and I'm pretty sure it's not really Lucene's
>fault.  Lucene is aware only of segments/files listed in segments file.
>  Could it have anything to do with that ColdFusion code that wraps
>Lucene by any chance?
>
>Regardless, it's probably not the best practise to store non-Lucene
>files in a Lucene index directory.  I suggest you store that log
>elsewhere, and avoid any issues that way. :)
>
>Otis
>
>--- Don Vaillancourt <donv@webimpact.com> wrote:
> > Hello All,
> >
> > I'm using Lucene to build collections from ColdFusion which I've got
> > working pretty good so far.  But I am getting the following exception
> > for
> > some reason that I can't understand and never used to get before.
> >
> > Below is the stack trace for that error.  Lucene is telling me that
> > it
> > cannot delete a file named 'query_1088174609733.log' which I create
> > in the
> > same folder as the Lucene collections.  I don't understand why Lucene
> > is
> > trying to delete this file.  I have verified that I am creating a new
> >
> > collection and not updating an existing one.
> >
> > Anyone have any ideas.
> >
> > Thanks
> >
> > java.io.IOException: couldn&apos;t delete query_1088174609733.log
> >          at
> > org.apache.lucene.store.FSDirectory.create(FSDirectory.java:166)
> >          at
> > org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:151)
> >          at
> >
>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:132)
> >          at
> > org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:160)
> >          at Index.getIndexWriter(Index.java:154)
> >          at Index.update(Index.java:83)
> >          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
> > Method)
> >          at
> >
>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> >          at
> >
>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >          at java.lang.reflect.Method.invoke(Method.java:324)
> >          at coldfusion.runtime.StructBean.invoke(StructBean.java:326)
> >          at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:1650)
> >          at
> >
>cfindex2ecfm778374439.runPage(C:\Inetpub\wwwroot\prism\prism376\Lucene\index.cfm:58)
> >          at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:147)
> >          at
> > coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:357)
> >          at
> > coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:62)
> >          at
> >
>coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:107)
> >          at coldfusion.filter.PathFilter.invoke(PathFilter.java:80)
> >          at
> > coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:24)
> >          at
> > coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:47)
> >          at
> >
>coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
> >          at
> > coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:35)
> >          at
> > coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:43)
> >          at
> > coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
> >          at coldfusion.CfmServlet.service(CfmServlet.java:105)
> >          at
> > jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:91)
> >          at
> > jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
> >          at
> >
>jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:252)
> >          at
> >
>jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:527)
> >          at
> >
>jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:192)
> >          at
> >
>jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:348)
> >          at
> >
>jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:451)
> >          at
> >
>jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:294)
> >          at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
> >
> >
> >
> >
> >
> >
> > Don Vaillancourt
> > Director of Software Development
> >
> > WEB IMPACT INC.
> > 416-815-2000 ext. 245
> > email: donv@web-impact.com
> > web: http://www.web-impact.com
> >
> >
> >
> >
> > This email message is intended only for the addressee(s)
> > and contains information that may be confidential and/or
> > copyright.  If you are not the intended recipient please
> > notify the sender by reply email and immediately delete
> > this email. Use, disclosure or reproduction of this email
> > by anyone other than the intended recipient(s) is strictly
> > prohibited. No representation is made that this email or
> > any attachments are free of viruses. Virus scanning is
> > recommended and is the responsibility of the recipient.
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_104073078==.ALT--


From lucene-user-return-8908-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:49:42 2004
Return-Path: <lucene-user-return-8908-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27361 invoked from network); 25 Jun 2004 18:49:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:49:42 -0000
Received: (qmail 44136 invoked by uid 500); 25 Jun 2004 18:49:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44029 invoked by uid 500); 25 Jun 2004 18:49:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43999 invoked by uid 99); 25 Jun 2004 18:49:42 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 11:49:37 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5PImmxO016758
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 14:48:48 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040625144352.01c1d6e0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Fri, 25 Jun 2004 14:50:15 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: To anyone who has used Luke
In-Reply-To: <B45FABA0-C6D4-11D8-B082-000393A564E6@ehatchersolutions.com
 >
References: <E65AE9703B683F4C81B5B39C692EB26D1B023C@mercury.corp.cyveillance.com>
 <B45FABA0-C6D4-11D8-B082-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_104969812==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_104969812==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hello All,

I'm using Luke, the software that someone mentioned before.  It's great for 
debugging.  My question to anyone who has used it.  Under the overview tab 
in the available fields column on the left is listed all the columns that I 
wanted indexed and/or stored and/or tokenized.

I only defined 4 fields to get indexed/stored/tokenized, but Luke is 
showing 5, the last one being blank.

I'm thinking that maybe there's a bug in my code that's doing an extra 
column, but I just wanted to verify that Luke wasn't showing an extra 
column or that maybe Lucene was creating the extra column for internal use.

Thanks

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_104969812==.ALT--


From lucene-user-return-8909-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 18:56:39 2004
Return-Path: <lucene-user-return-8909-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31609 invoked from network); 25 Jun 2004 18:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 18:56:39 -0000
Received: (qmail 59722 invoked by uid 500); 25 Jun 2004 18:56:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59545 invoked by uid 500); 25 Jun 2004 18:56:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59462 invoked by uid 99); 25 Jun 2004 18:56:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [66.218.93.24] (HELO web41108.mail.yahoo.com) (66.218.93.24)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Fri, 25 Jun 2004 11:56:30 -0700
Message-ID: <20040625185609.15399.qmail@web41108.mail.yahoo.com>
Received: from [12.13.3.252] by web41108.mail.yahoo.com via HTTP; Fri, 25 Jun 2004 11:56:09 PDT
Date: Fri, 25 Jun 2004 11:56:09 -0700 (PDT)
From: James Dunn <james_h_dunn@yahoo.com>
Subject: Re: To anyone who has used Luke
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.1.1.0.20040625144352.01c1d6e0@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've seen that too.  I'm pretty sure either Lucene is
creating it, or it's an issue with Luke.

Jim
--- Don Vaillancourt <donv@webimpact.com> wrote:
> Hello All,
> 
> I'm using Luke, the software that someone mentioned
> before.  It's great for 
> debugging.  My question to anyone who has used it. 
> Under the overview tab 
> in the available fields column on the left is listed
> all the columns that I 
> wanted indexed and/or stored and/or tokenized.
> 
> I only defined 4 fields to get
> indexed/stored/tokenized, but Luke is 
> showing 5, the last one being blank.
> 
> I'm thinking that maybe there's a bug in my code
> that's doing an extra 
> column, but I just wanted to verify that Luke wasn't
> showing an extra 
> column or that maybe Lucene was creating the extra
> column for internal use.
> 
> Thanks
> 
> Don Vaillancourt
> Director of Software Development
> 
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
> 
> 
> 
> 
> This email message is intended only for the
> addressee(s)
> and contains information that may be confidential
> and/or
> copyright.  If you are not the intended recipient
> please
> notify the sender by reply email and immediately
> delete
> this email. Use, disclosure or reproduction of this
> email
> by anyone other than the intended recipient(s) is
> strictly
> prohibited. No representation is made that this
> email or
> any attachments are free of viruses. Virus scanning
> is
> recommended and is the responsibility of the
> recipient.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8910-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 19:16:58 2004
Return-Path: <lucene-user-return-8910-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43625 invoked from network); 25 Jun 2004 19:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 19:16:58 -0000
Received: (qmail 14579 invoked by uid 500); 25 Jun 2004 19:17:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14526 invoked by uid 500); 25 Jun 2004 19:17:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14458 invoked by uid 99); 25 Jun 2004 19:17:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 12:17:01 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5PJGgS30214
	for <lucene-user@jakarta.apache.org>; Fri, 25 Jun 2004 14:16:42 -0500
Message-ID: <40DC7A1A.6090308@getopt.org>
Date: Fri, 25 Jun 2004 21:16:42 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: To anyone who has used Luke
References: <20040625185609.15399.qmail@web41108.mail.yahoo.com>
In-Reply-To: <20040625185609.15399.qmail@web41108.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

James Dunn wrote:

> I've seen that too.  I'm pretty sure either Lucene is
> creating it, or it's an issue with Luke.

(I'm the author of Luke)

The problem lies with Lucene, unfortunately. The method 
IndexReader.getFieldNames() returns an additional blank at the end. This 
is already reported as a bug, but so far noone provided any patches...

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8911-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Jun 25 21:40:11 2004
Return-Path: <lucene-user-return-8911-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99413 invoked from network); 25 Jun 2004 21:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Jun 2004 21:40:10 -0000
Received: (qmail 94718 invoked by uid 500); 25 Jun 2004 21:40:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94554 invoked by uid 500); 25 Jun 2004 21:40:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94489 invoked by uid 99); 25 Jun 2004 21:40:13 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Fri, 25 Jun 2004 14:40:12 -0700
Received: from ppeddi ([192.168.1.44]) by contextmedia.com ; Fri, 25 Jun 2004 17:38:12 -0400
Message-ID: <01a301c45afc$f3d5a5a0$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Do we really need CJKAnalyzer to search japanese characters
Date: Fri, 25 Jun 2004 17:39:54 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01A0_01C45ADB.6CB5ADC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01A0_01C45ADB.6CB5ADC0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello all,
You will have to excuse me if the question looks dumb ;)

I didn't use CJKAnalyzer and I could still search japanese characters. =
Actually I used it first but then I thought of testing with just the =
standard analyzer. It worked with standard analyzer also.

I was able to search the metadata of our objects that has chinese and =
japanese characters.

I think lucene is internally storing unicode characters. So should it =
matter if its standard analyzer or CJK analyzer?

When do we have to use CJKAnalyzer really?

Praveen

**************************************************************=20
Praveen Peddi
Sr Software Engg, Context Media, Inc.=20
email:ppeddi@contextmedia.com=20
Tel:  401.854.3475=20
Fax:  401.861.3596=20
web: http://www.contextmedia.com=20
**************************************************************=20
Context Media- "The Leader in Enterprise Content Integration"=20

------=_NextPart_000_01A0_01C45ADB.6CB5ADC0--


From lucene-user-return-8912-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 26 16:43:45 2004
Return-Path: <lucene-user-return-8912-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11410 invoked from network); 26 Jun 2004 16:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Jun 2004 16:43:45 -0000
Received: (qmail 52226 invoked by uid 500); 26 Jun 2004 16:43:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52028 invoked by uid 500); 26 Jun 2004 16:43:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51806 invoked by uid 99); 26 Jun 2004 16:43:27 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [212.122.43.181] (HELO zeus.rz1.connectline.net) (212.122.43.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 26 Jun 2004 09:43:25 -0700
Received: from [192.168.1.3] (p213.54.9.170.tisdip.tiscali.de [213.54.9.170])
	by zeus.rz1.connectline.net (Postfix) with ESMTP id BEAED2B6BC8
	for <lucene-user@jakarta.apache.org>; Sat, 26 Jun 2004 18:42:00 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v618)
Content-Transfer-Encoding: 7bit
Message-Id: <EB20651C-C78F-11D8-966D-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Stefan Groschupf <sg@media-style.com>
Subject: term frequence in hits
Date: Sat, 26 Jun 2004 18:43:14 +0200
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
another question, but first many thanks for the last hint, the new term 
frequency functionality of lucene is just GREAT! ;)
I have index a set of documents with different meta data, Language = DE 
or Language = EN.
Now i wish to get Term frequencies for DE and EN. The easiest solution 
would be to  create one index for the DE and one index for En but that 
is very unhandy for the other things i wish to do with the corpus.
Alternativly i would do a query and iterate of the documents and count 
the terms by my self, but this is very slow.

Is there another way I may be didn't see to get  term frequencies for a 
defined set of documents?

Thanks for providing any light! ;)

Greetings,
Stefan


---------------------------------------------------------------
enterprise information technology consulting
open technology:   http://www.media-style.com
open source:           http://www.weta-group.net
open discussion:    http://www.text-mining.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8913-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Jun 26 23:23:02 2004
Return-Path: <lucene-user-return-8913-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96380 invoked from network); 26 Jun 2004 23:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Jun 2004 23:23:02 -0000
Received: (qmail 27345 invoked by uid 500); 26 Jun 2004 23:22:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27234 invoked by uid 500); 26 Jun 2004 23:22:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27125 invoked by uid 99); 26 Jun 2004 23:22:52 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [212.122.43.181] (HELO zeus.rz1.connectline.net) (212.122.43.181)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 26 Jun 2004 16:22:50 -0700
Received: from [192.168.1.3] (p213.54.28.108.tisdip.tiscali.de [213.54.28.108])
	by zeus.rz1.connectline.net (Postfix) with ESMTP id 48D7D2B6B06
	for <lucene-user@jakarta.apache.org>; Sun, 27 Jun 2004 01:21:27 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v618)
Content-Transfer-Encoding: 7bit
Message-Id: <B999C0D1-C7C7-11D8-966D-000A95CDCC98@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Stefan Groschupf <sg@media-style.com>
Subject: [bug?] term frequency and empty content
Date: Sun, 27 Jun 2004 01:22:43 +0200
X-Mailer: Apple Mail (2.618)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I notice some thing strange: (1.4-rc4)

Until I add a empty text to my index:
where text is "" or null;
  IndexWriter indexWriter = getIndexWriter();
  document.add(Field.Text(Corpus.TEXT, text, true));
  indexWriter.addDocument(document);

I see this in std.out: "No tvx file"
Furthermore IndexReader.terms() returns just null.

Stefan

---------------------------------------------------------------
enterprise information technology consulting
open technology:   http://www.media-style.com
open source:           http://www.weta-group.net
open discussion:    http://www.text-mining.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8914-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Jun 27 01:20:28 2004
Return-Path: <lucene-user-return-8914-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22698 invoked from network); 27 Jun 2004 01:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Jun 2004 01:20:27 -0000
Received: (qmail 51158 invoked by uid 500); 27 Jun 2004 01:20:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51043 invoked by uid 500); 27 Jun 2004 01:20:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50968 invoked by uid 99); 27 Jun 2004 01:20:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [66.141.113.33] (HELO mail.redbaritone.com) (66.141.113.33)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Sat, 26 Jun 2004 18:20:19 -0700
Received: from redbaritone.com ([192.168.1.1])
	(authenticated)
	by mail.redbaritone.com (8.11.6/8.11.6) with ESMTP id i5R1Ige30191
	for <lucene-user@jakarta.apache.org>; Sat, 26 Jun 2004 20:18:42 -0500
Message-ID: <40DE20ED.80103@redbaritone.com>
Date: Sat, 26 Jun 2004 20:20:45 -0500
From: Robert Brown <rbrown@redbaritone.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Newbie experience - possible enhancement?
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have a 33GB repository (12,000+ files) that I wanted to be able to 
search via the web.  So Lucene looks like a fit.

I downloaded the 1.3-final distribution, read the "Getting Started" page 
and proceeded to "The Simple Demo" page.  I navigated to the directory 
containing my repository and set the classpath on the command line to 
point to both jars.

Rather than build the index of the Lucene /src folder, I chose to start 
with the /repository folder itself by specifying a . for the folder 
name.  The index was built up to the point where it hit the /index 
folder and died with a "caught a class java.io.FileNotFoundException".

Now, I obviously broke a rule somewhere in the documentation (that I'll 
review eventually) but it seems like the build process should have 
skipped the /index folder that was _created_ by the call to 
IndexFiles().  I suppose if you want to index a /index folder that 
happens to be a subdirectory directly under the starting build path then 
an error handler is probably required.

Anyway, I moved the java call down a directory and reinvoked the command 
to use ./repository and the indexing succeeded without error.  Just 
wanted to pass along my initial experience in the hopes that it might 
help the group enhance the current release candidate.

Now, if you'll excuse me, I have overcome my first hurdle and am anxious 
to see what Lucene can do.  Cheers to everyone!

				R


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8915-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 08:03:28 2004
Return-Path: <lucene-user-return-8915-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58554 invoked from network); 28 Jun 2004 08:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 08:03:28 -0000
Received: (qmail 6281 invoked by uid 500); 28 Jun 2004 08:03:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6122 invoked by uid 500); 28 Jun 2004 08:03:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5968 invoked by uid 99); 28 Jun 2004 08:03:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [213.56.31.17] (HELO smtp1.clb.oleane.net) (213.56.31.17)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 01:03:16 -0700
Received: from teck ([217.167.130.37]) (authenticated)
	by smtp1.clb.oleane.net with ESMTP id i5S82hc2025595
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 10:02:47 +0200
Message-ID: <007001c45ce6$9412ccb0$6a0010ac@teck>
From: "Julien Nioche" <Julien.Nioche@lingway.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <8f8e14c40406251124102752ba@mail.gmail.com>
Subject: Re: Optimizing for long queries?
Date: Mon, 28 Jun 2004 10:04:40 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Drew,

I don't think it's in the FAQ.

1 - What you could do is to sort your query terms by ascending alphabetic
order. In my case it improved a little bit the performance. It could be
interesting to know how it worked in your case.

2- Another solution is to play with TermInfosWriter.INDEX_INTERVAL at
indexation time. I quote Doug :

"..., try reducing TermInfosWriter.INDEX_INTERVAL.  You'll
have to re-create your indexes each time you change this constant.  You
might try a value like 16.  This would keep the number of terms in
memory from being too huge (1 of 16 terms), but would reduce the average
number scanned from 64 to 8, which would be substantial.  Tell me how
this works.  If it makes a big difference, then perhaps we should make
this parameter more easily changeable."

Have you used a profiler on your application? This could be useful to spot
possible improvments.


----- Original Message ----- 
From: "Drew Farris" <drew.farris@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Friday, June 25, 2004 8:24 PM
Subject: Optimizing for long queries?


> Apologies if this is a FAQ, but I didn't have much luck searching the
> list archives for answers on this subject:
>
> I'm using Lucene in a context where we have frequently have queries
> that search for as many as 30-50 terms in a single field. Does anyone
> have any thoughts concerning ways optimize Lucene for queries of these
> lengths?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8916-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 09:23:24 2004
Return-Path: <lucene-user-return-8916-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24182 invoked from network); 28 Jun 2004 09:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 09:23:24 -0000
Received: (qmail 15552 invoked by uid 500); 28 Jun 2004 09:23:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15492 invoked by uid 500); 28 Jun 2004 09:23:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15455 invoked by uid 99); 28 Jun 2004 09:23:25 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 02:23:24 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id AD85912E1E6
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 10:21:51 +0100 (BST)
Subject: Re: Newbie experience - possible enhancement?
From: John Moylan <johnm@rte.ie>
Reply-To: johnm@rte.ie
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40DE20ED.80103@redbaritone.com>
References: <40DE20ED.80103@redbaritone.com>
Content-Type: text/plain
Organization: Radio Telifis Eireann
Message-Id: <1088414553.30386.7.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 28 Jun 2004 10:22:33 +0100
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It sounds like you are trying to index the index. - not a good idea. You
should really put it somewhere else where it won't be indexed.

JOhn

On Sun, 2004-06-27 at 02:20, Robert Brown wrote:
> I have a 33GB repository (12,000+ files) that I wanted to be able to 
> search via the web.  So Lucene looks like a fit.
> 
> I downloaded the 1.3-final distribution, read the "Getting Started" page 
> and proceeded to "The Simple Demo" page.  I navigated to the directory 
> containing my repository and set the classpath on the command line to 
> point to both jars.
> 
> Rather than build the index of the Lucene /src folder, I chose to start 
> with the /repository folder itself by specifying a . for the folder 
> name.  The index was built up to the point where it hit the /index 
> folder and died with a "caught a class java.io.FileNotFoundException".
> 
> Now, I obviously broke a rule somewhere in the documentation (that I'll 
> review eventually) but it seems like the build process should have 
> skipped the /index folder that was _created_ by the call to 
> IndexFiles().  I suppose if you want to index a /index folder that 
> happens to be a subdirectory directly under the starting build path then 
> an error handler is probably required.
> 
> Anyway, I moved the java call down a directory and reinvoked the command 
> to use ./repository and the indexing succeeded without error.  Just 
> wanted to pass along my initial experience in the hopes that it might 
> help the group enhance the current release candidate.
> 
> Now, if you'll excuse me, I have overcome my first hurdle and am anxious 
> to see what Lucene can do.  Cheers to everyone!
> 
> 				R
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
-- 
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8917-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 10:55:55 2004
Return-Path: <lucene-user-return-8917-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98290 invoked from network); 28 Jun 2004 10:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 10:55:55 -0000
Received: (qmail 27550 invoked by uid 500); 28 Jun 2004 10:55:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26985 invoked by uid 500); 28 Jun 2004 10:55:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26228 invoked by uid 99); 28 Jun 2004 10:55:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 03:55:03 -0700
Received: from es.ifit.uni-klu.ac.at ([143.205.118.16]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 12:55:26 +0200
Received: from localhost (es.ifit.uni-klu.ac.at [143.205.118.16])
	by es.ifit.uni-klu.ac.at (Postfix) with ESMTP id 03E3C65C006
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 12:55:00 +0200 (CEST)
Received: from ifit.uni-klu.ac.at (prodock2.ifit.uni-klu.ac.at [143.205.118.99])
	by es.ifit.uni-klu.ac.at (Postfix) with ESMTP id C3A6865C005
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 12:54:59 +0200 (CEST)
Message-ID: <40DFF91D.5020609@ifit.uni-klu.ac.at>
Date: Mon, 28 Jun 2004 12:55:25 +0200
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: en-us, de-at, en, it
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index MSOffice Documents
References: <40DC1DA4.2020001@ifit.uni-klu.ac.at> <024601c45ac9$021a7070$dadacda3@tdryan>
In-Reply-To: <024601c45ac9$021a7070$dadacda3@tdryan>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 28 Jun 2004 10:55:26.0271 (UTC) FILETIME=[6B2BFCF0:01C45CFE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Ryan Ackley wrote:

>Thanks Sergiu,
>
>You should also post to the Lucene Users list.
>
>-Ryan
>  
>

I did it from the begining. But I want to report a bugin this code. My 
coleagues reported me
that is possible to get an OutOfMemoryException for a PPT they have. I 
will try to debug this is the next days.

  Sergiu



>----- Original Message ----- 
>From: "Sergiu Gordea" <gsergiu@ifit.uni-klu.ac.at>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>;
><lucene-dev@jakarta.apache.org>
>Cc: "POI Users List" <poi-user@jakarta.apache.org>
>Sent: Friday, June 25, 2004 8:42 AM
>Subject: Index MSOffice Documents
>
>
>  
>
>>Hi all,
>>
>> I'm working on a project in which we are building a knowledge
>>management platform. We are using Turbine/Velocity
>>as framework and we are using lucene for search.
>>
>> We want to make the search to be able to index MSOffice Documents,
>>therefore I was searching for some possibilities to extract the text
>>from this
>>documents. I found some examples based on POI library
>>(http://jakarta.apache.org/poi) and I addapted them to our needs.
>>The extraction of the text elements from XLS file I think is trustable
>>(the from POI development comunity did a great job with the package that
>>work with XSL files). The examples that extract the text from DOC and
>>PPT files are not very general, I think they have problems with the
>>documents
>>written with special charsets but they are working just well on the
>>documents I use. I hope someone that has more experience that I have
>>will improve this
>>and will a better source code.
>>
>> Congratulations to all people involved in development of the Jakarta
>>project and it's subprojects,
>>
>> Sergiu Gordea
>>
>>Ps: ExeConverteImpl uses an external stand alone application (like
>>antiwort or pdf2txt) to extract the text.
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>/* @(#) CWK 1.4 07.06.2004
>> *
>> * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>> * Universittsstr. 94/7 9020 Klagenfurt Austria
>> * www.configworks.com
>> * All rights reserved.
>> */
>>
>>package com.configworks.cwk.be.search.converters;
>>
>>import java.io.BufferedWriter;
>>import java.io.File;
>>import java.io.FileNotFoundException;
>>import java.io.IOException;
>>import java.io.InputStream;
>>import org.apache.commons.logging.Log;
>>import org.apache.commons.logging.LogFactory;
>>import org.apache.poi.hssf.usermodel.HSSFCell;
>>import org.apache.poi.hssf.usermodel.HSSFRow;
>>import org.apache.poi.hssf.usermodel.HSSFSheet;
>>import org.apache.poi.hssf.usermodel.HSSFWorkbook;
>>
>>/**
>> * Class description
>> *
>> * @author sergiu
>> * @version 1.0
>> * @since CWK 1.5
>> */
>>public class XLSConverterImpl extends JavaDocumentConverter {
>>
>>    private Log logger = null;
>>    File dest = null;
>>
>>
>>
>>    public boolean extractText(InputStream reader, BufferedWriter writer)
>>    
>>
>throws FileNotFoundException,
>  
>
>>        IOException {
>>
>>        HSSFWorkbook workbook = new HSSFWorkbook(reader);
>>
>>        for (int k = 0; k < workbook.getNumberOfSheets(); k++) {
>>            HSSFSheet sheet = workbook.getSheetAt(k);
>>
>>            if (sheet != null) {
>>                int rows = sheet.getLastRowNum();
>>                //I don't know why the last row = sheet.getRow(rows) and
>>    
>>
>first row = sheet.getRow(0)
>  
>
>>                for (int r = 0; r <= rows; r++) {
>>                HSSFRow row = sheet.getRow(r);
>>                if (row != null) {
>>                    int cells = row.getLastCellNum();
>>                    for (int c = 0; c <= cells; c++) {
>>                    HSSFCell cell = row.getCell((short) c);
>>                    String value = null;
>>                    if (cell != null) {
>>                        switch (cell.getCellType()) {
>>                            case HSSFCell.CELL_TYPE_FORMULA:
>>                                value = cell.getCellFormula();
>>                                break;
>>                            case HSSFCell.CELL_TYPE_STRING:
>>                                value = cell.getStringCellValue();
>>                                break;
>>                            case HSSFCell.CELL_TYPE_NUMERIC:
>>                                value = "" + cell.getNumericCellValue();
>>                                break;
>>                            default:
>>                                value = cell.getStringCellValue();
>>                        }
>>                    }
>>                    if (value != null) {
>>                        writer.write(value + " ");
>>                    }
>>                }//cels
>>                }
>>            }//rows
>>            }
>>        }//sheets
>>
>>        //if no Exception was thrown consider that the conversion was
>>    
>>
>successful
>  
>
>>        return true;
>>    }
>>
>>    /**
>>     * @return Returns the logger.
>>     */
>>    public Log getLogger() {
>>        if (logger == null)
>>            logger = LogFactory.getLog(XLSConverterImpl.class);
>>        return logger;
>>    }
>>
>>}
>>
>>
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>package com.configworks.cwk.be.search.converters;
>>
>>import com.configworks.cwk.share.Utils;
>>import java.io.BufferedInputStream;
>>import java.io.File;
>>import java.io.FileReader;
>>import java.io.IOException;
>>import java.io.Reader;
>>import org.apache.commons.logging.Log;
>>import org.apache.commons.logging.LogFactory;
>>
>>
>>/**
>> * Created by IntelliJ IDEA.
>> * User: Kostya
>> * Date: 12.09.2003
>> * Time: 11:39:25
>> * To change this template use Options | File Templates.
>> */
>>
>>public class ExeConverterImpl extends Converter {
>>
>>    private Log logger =
>>    
>>
>LogFactory.getLog(ExeConverterImpl.class.getName());
>  
>
>>    public Reader convertSource(File source) {
>>        try {
>>            // the type is not registered the file content will not be
>>    
>>
>added to the index
>  
>
>>            if (_config.getExecutionPath() == null) {
>>                return null;
>>            }
>>            // else convert file into a temp dir and return contents of
>>    
>>
>the converted file
>  
>
>>            else {
>>                // if no converter is specified the file will be added
>>    
>>
>withot conversion
>  
>
>>                if (_config.getExecutionPath().length() == 0)
>>                    return new FileReader(source);
>>
>>                String execPath = _config.getExecutionPath();
>>
>>                String sourcePath = source.getAbsolutePath();
>>                // create tempdir if it doesn't exists
>>                new File(_config.getTempDirectory()).mkdirs();
>>
>>                String targetPath = _config.getTempDirectory() +
>>    
>>
>File.separator + source.getName()
>  
>
>>                    + ".txt";
>>
>>                String params = "";
>>                if(_config.getPathParam()!= null){
>>                //add HOME parameter
>>                params += _config.getPathParam();
>>                }
>>
>>                Process process = Utils.executeOSCommand(execPath,
>>    
>>
>sourcePath, targetPath, params);
>  
>
>>                process.waitFor();
>>                if (logger.isTraceEnabled()) {
>>                    BufferedInputStream stream=null;
>>                    try {
>>                    stream = new
>>    
>>
>BufferedInputStream(process.getErrorStream());
>  
>
>>                    int read = 0;
>>                    String outErrorString = "";
>>                    while ((read = stream.read()) > 0)
>>                        outErrorString += ((char) read);
>>                    stream.close();
>>                    if (outErrorString.length() > 0)
>>                        logger.error(outErrorString);
>>                    } finally {
>>                        if (stream!=null) {
>>                            stream.close();
>>                        }
>>                    }
>>                }
>>                File convertedSource = new File(targetPath);
>>                convertedSource.deleteOnExit();
>>                return new FileReader(convertedSource);
>>            }
>>        } catch (IOException ex) {
>>            if (logger.isErrorEnabled())
>>                logger.error("IOException: " + ex.getMessage());
>>        } catch (InterruptedException ex) {
>>            if (logger.isErrorEnabled())
>>                logger.error("InterruptedException: " + ex.getMessage());
>>        }
>>
>>        return null;
>>    }
>>}
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>/* @(#) CWK 1.4 25.06.2004
>> *
>> * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>> * Universittsstr. 94/7 9020 Klagenfurt Austria
>> * www.configworks.com
>> * All rights reserved.
>> */
>>
>>package com.configworks.cwk.be.search.converters;
>>
>>import java.io.BufferedReader;
>>import java.io.BufferedWriter;
>>import java.io.File;
>>import java.io.FileInputStream;
>>import java.io.FileReader;
>>import java.io.FileWriter;
>>import java.io.IOException;
>>import java.io.InputStream;
>>import java.io.Reader;
>>
>>/**
>> * Class description
>> *
>> * @author sergiu
>> * @version 1.0
>> *
>> * @since CWK 1.5
>> */
>>public abstract class JavaDocumentConverter extends Converter {
>>
>>File dest = null;
>>
>>/* (non-Javadoc)
>>* @see
>>    
>>
>com.configworks.cwk.be.search.converters.Converter#convertSource(java.io.Fil
>e)
>  
>
>>*/
>>public Reader convertSource(File source) {
>>if (source == null)
>>return null;
>>Reader reader = null;
>>InputStream inputStream = null;
>>BufferedWriter writer = null;
>>try {
>>String filename = source.getName();
>>filename = filename.replace('.', '_');
>>filename += ".txt";
>>File tmpDir = new File(_config.getTempDirectory());
>>tmpDir.mkdirs();
>>dest = new File(tmpDir.getPath(), filename);
>>boolean created = dest.createNewFile();
>>
>>//create the input and output streams
>>writer = new BufferedWriter(
>>new FileWriter(dest));
>>inputStream = new FileInputStream(source);
>>
>>extractText(inputStream, writer);
>>
>>if (!dest.exists())
>>return null;
>>dest.deleteOnExit();
>>reader = new BufferedReader(new FileReader(dest));
>>
>>} catch (Exception e) {
>>getLogger().error("JavaDocumentConverter cannot convert the source file: "
>>+ source.getAbsolutePath(), e);
>>reader = null;
>>}finally{
>>try {
>>if(writer != null)
>>writer.close();
>>if(inputStream != null)
>>inputStream.close();
>>} catch (IOException ex) {
>>if(getLogger().isDebugEnabled())
>>getLogger().error("Cannot close the stream: " + ex);
>>}
>>}
>>return reader;
>>
>>}
>>
>>/**
>>* @param inputStream
>>* @param writer
>>* @since CWK 1.4.1
>>* @see
>>*/
>>public abstract boolean extractText(InputStream inputStream,
>>    
>>
>BufferedWriter writer) throws IOException;
>  
>
>>}
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>/* @(#) CWK 1.5 23.06.2004
>> *
>> * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>> * Universittsstr. 94/7 9020 Klagenfurt Austria
>> * www.configworks.com
>> * All rights reserved.
>> */
>>
>>package com.configworks.cwk.be.search.converters;
>>
>>import java.io.BufferedWriter;
>>import java.io.IOException;
>>import java.io.InputStream;
>>import org.apache.poi.hpsf.PropertySet;
>>import org.apache.poi.hpsf.PropertySetFactory;
>>import org.apache.poi.poifs.eventfilesystem.POIFSReader;
>>import org.apache.poi.poifs.eventfilesystem.POIFSReaderEvent;
>>import org.apache.poi.poifs.eventfilesystem.POIFSReaderListener;
>>import org.apache.poi.util.LittleEndian;
>>
>>/**
>> * Class description
>> *
>> * @author sergiu
>> * @version 1.0
>> * @since CWK 1.5
>> */
>>public class PPTConverterImpl extends JavaDocumentConverter {
>>
>>    static final String lineSeparator =
>>    
>>
>System.getProperty("line.separator");
>  
>
>>    /**
>>     * Extract the text from a number of presentations.
>>     */
>>    public boolean extractText(InputStream  reader, BufferedWriter writer)
>>    
>>
>throws IOException{
>  
>
>>    POIFSReader r = new POIFSReader();
>>
>>    /* Register a listener for *all* documents. */
>>    MyPOIFSReaderListener listener = new MyPOIFSReaderListener(writer);
>>    r.registerListener(listener);
>>    r.read(reader);
>>    //if no exception was trown, consider that the conversion was
>>    
>>
>successful
>  
>
>>    return true;
>>    }
>>
>>    class MyPOIFSReaderListener implements POIFSReaderListener{
>>    private BufferedWriter writer = null;
>>
>>    public MyPOIFSReaderListener(BufferedWriter writer){
>>    this.writer = writer;
>>    }
>>
>>    public void processPOIFSReaderEvent(POIFSReaderEvent event) {
>>    PropertySet ps = null;
>>
>>    try{
>>
>>    org.apache.poi.poifs.filesystem.DocumentInputStream dis=null;
>>    if(!event.getName().equalsIgnoreCase("PowerPoint Document"))
>>    return;
>>
>>    dis=event.getStream();
>>
>>    byte btoWrite[]= new byte[12];
>>    dis.read(btoWrite);
>>
>>    btoWrite = new byte[dis.available()];
>>    dis.read(btoWrite, 0, dis.available());
>>
>>    //StringBuffer buff = new StringBuffer("");
>>
>>    for(int i=0; i<btoWrite.length-20; i++){
>>
>>    long type=LittleEndian.getUShort(btoWrite,i+2);
>>    long size=LittleEndian.getUInt(btoWrite,i+4);
>>    if (type==4008){
>>
>>    int offset = i+4+1;
>>    int length = (int)size+3;
>>    int end = offset + length;
>>
>>    byte[] textBytes = new byte[length];
>>
>>    for (int j = offset; j < end; j++) {
>>    byte b = btoWrite[j];
>>    writer.write((char) b);
>>    }
>>
>>    if(i < (end -1))
>>    i = end -1;
>>    }
>>
>>    }
>>
>>    PropertySetFactory.create(event.getStream());
>>    }catch (Exception e){
>>    String msg = "Cannot index ppt file: \n";
>>        if(getLogger().isErrorEnabled())
>>        getLogger().error(msg + e);
>>    }
>>    }
>>    }
>>}
>>
>>
>>
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>/* @(#) CWK 1.4 24.06.2004
>> *
>> * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>> * Universittsstr. 94/7 9020 Klagenfurt Austria
>> * www.configworks.com
>> * All rights reserved.
>> */
>>
>>package com.configworks.cwk.be.search.converters;
>>
>>import java.io.BufferedWriter;
>>import java.io.IOException;
>>import java.io.InputStream;
>>import java.util.ArrayList;
>>import org.apache.poi.poifs.filesystem.DocumentEntry;
>>import org.apache.poi.poifs.filesystem.DocumentInputStream;
>>import org.apache.poi.poifs.filesystem.POIFSFileSystem;
>>import org.apache.poi.util.LittleEndian;
>>
>>/**
>> * Class description
>> *
>> * @author sergiu
>> * @version 1.0
>> * @since CWK 1.5
>> */
>>public class WordConverterImpl extends JavaDocumentConverter {
>>
>>    public boolean extractText(InputStream in, BufferedWriter writer)
>>    
>>
>throws IOException{
>  
>
>>    ArrayList text = new ArrayList();
>>    POIFSFileSystem fsys = new POIFSFileSystem(in);
>>
>>    DocumentEntry headerProps =
>>    (DocumentEntry)fsys.getRoot().getEntry("WordDocument");
>>    DocumentInputStream din =
>>    
>>
>fsys.createDocumentInputStream("WordDocument");
>  
>
>>    byte[] header = new byte[headerProps.getSize()];
>>
>>    din.read(header);
>>    din.close();
>>    // Prende le informazioni dall'header del documento
>>    int info = LittleEndian.getShort(header, 0xa);
>>
>>    boolean useTable1 = (info & 0x200) != 0;
>>
>>    // Prende informazioni dalla piece table
>>    int complexOffset = LittleEndian.getInt(header, 0x1a2);
>>
>>
>>    String tableName = null;
>>    if (useTable1)
>>    tableName = "1Table";
>>    else
>>    tableName = "0Table";
>>
>>    DocumentEntry table =
>>    
>>
>(DocumentEntry)fsys.getRoot().getEntry(tableName);
>  
>
>>    byte[] tableStream = new byte[table.getSize()];
>>
>>    din = fsys.createDocumentInputStream(tableName);
>>
>>    din.read(tableStream);
>>    din.close();
>>
>>    din = null;
>>    fsys = null;
>>    table = null;
>>    headerProps = null;
>>
>>    int multiple = findText(tableStream, complexOffset, text);
>>
>>    StringBuffer sb = new StringBuffer();
>>    int size = text.size();
>>    tableStream = null;
>>
>>    for (int x = 0; x < size; x++){
>>    WordTextPiece nextPiece = (WordTextPiece)text.get(x);
>>    int start = nextPiece.getStart();
>>    int length = nextPiece.getLength();
>>
>>    boolean unicode = nextPiece.usesUnicode();
>>    String toStr = null;
>>    if (unicode)
>>    toStr = new String(header, start, length * multiple, "UTF-16LE");
>>    else
>>    toStr = new String(header, start, length , "ISO-8859-1");
>>
>>    //sb.append(toStr).append(" ");
>>    toStr += " ";
>>    writer.write(toStr);
>>    }
>>    //if no exeption occured we say that the conversion was successfully
>>    
>>
>realized
>  
>
>>    return true;
>>    }
>>
>>    private static int findText(byte[] tableStream, int complexOffset,
>>ArrayList text) throws IOException{
>>    //actual text
>>    int pos = complexOffset;
>>    int multiple = 2;
>>    //skips through the prms before we reach the piece table. These
>>    
>>
>contain data
>  
>
>>    //for actual fast saved files
>>    while(tableStream[pos] == 1){
>>    pos++;
>>    int skip = LittleEndian.getShort(tableStream, pos);
>>    pos += 2 + skip;
>>    }
>>
>>    if(tableStream[pos] != 2){
>>    throw new IOException("corrupted Word file");
>>    }else{
>>    //parse out the text pieces
>>    int pieceTableSize = LittleEndian.getInt(tableStream, ++pos);
>>    pos += 4;
>>    int pieces = (pieceTableSize - 4) / 12;
>>    for (int x = 0; x < pieces; x++){
>>    int filePos = LittleEndian.getInt(tableStream, pos + ((pieces
>>    + 1) * 4) +
>>    (x * 8) + 2);
>>    boolean unicode = false;
>>    if ((filePos & 0x40000000) == 0){
>>    unicode = true;
>>    }else{
>>    unicode = false;
>>    multiple = 1;
>>    filePos &= ~(0x40000000);//gives me FC in doc stream
>>    filePos /= 2;
>>    }
>>
>>    int totLength = LittleEndian.getInt(tableStream, pos + (x + 1) * 4)
>>    - LittleEndian.getInt(tableStream, pos + (x * 4));
>>
>>    WordTextPiece piece = new WordTextPiece(filePos, totLength, unicode);
>>
>>    text.add(piece);
>>    }
>>    }
>>    return multiple;
>>    }
>>
>>
>>
>>}
>>
>>
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>/* @(#) CWK 1.4 07.06.2004
>> *
>> * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
>> * Universittsstr. 94/7 9020 Klagenfurt Austria
>> * www.configworks.com
>> * All rights reserved.
>> */
>>
>>package com.configworks.cwk.be.search.converters;
>>
>>/**
>> * Class description
>> *
>> * @author sergiu
>> * @version 1.0
>> *
>> * @since CWK 1.4
>> */
>>class WordTextPiece{
>>private int _fcStart;
>>private boolean _usesUnicode;
>>private int _length;
>>
>>public WordTextPiece(int start, int length, boolean unicode){
>>_usesUnicode = unicode;
>>_length = length;
>>_fcStart = start;
>>}
>>public boolean usesUnicode(){
>>return _usesUnicode;
>>}
>>
>>public int getStart(){
>>return _fcStart;
>>}
>>public int getLength(){
>>return _length;
>>}
>>
>>}
>>
>>
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>package com.configworks.cwk.be.search.converters;
>>
>>import java.io.File;
>>import java.io.Reader;
>>import org.apache.commons.logging.Log;
>>import org.apache.commons.logging.LogFactory;
>>
>>/**
>> * Created by IntelliJ IDEA.
>> * User: Kostya
>> * Date: 11.09.2003
>> * Time: 19:24:56
>> * To change this template use Options | File Templates.
>> */
>>
>>public abstract class Converter {
>>    protected ConverterConfig _config;
>>    private static Log logger = null;
>>
>>    public abstract Reader convertSource(File source);
>>
>>    protected void Initialize(ConverterConfig config) {
>>        _config = config;
>>    };
>>
>>    /**
>>     * @return Returns the logger.
>>     */
>>    public Log getLogger() {
>>    if (logger == null)
>>    logger = LogFactory.getLog(XLSConverterImpl.class);
>>    return logger;
>>    }
>>}
>>
>>
>>    
>>
>
>
>----------------------------------------------------------------------------
>----
>
>
>  
>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8918-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 14:04:06 2004
Return-Path: <lucene-user-return-8918-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12091 invoked from network); 28 Jun 2004 14:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 14:04:06 -0000
Received: (qmail 68880 invoked by uid 500); 28 Jun 2004 14:03:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68746 invoked by uid 500); 28 Jun 2004 14:03:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68637 invoked by uid 99); 28 Jun 2004 14:03:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 07:03:10 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 10:02:57 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: <lucene-user@jakarta.apache.org>
Subject: how to get all terms as search results (or "*" equivalent)
Date: Mon, 28 Jun 2004 10:02:50 -0400
Message-ID: <067501c45d18$99889580$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0676_01C45CF7.1276F580"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-OriginalArrivalTime: 28 Jun 2004 14:02:57.0046 (UTC) FILETIME=[9D280360:01C45D18]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0676_01C45CF7.1276F580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Since it is not allowed to use "*" or "?" symbols as the first character
of a search, I tried the following query as an alternative:
"Field_1: ([a* TO z*] OR [A* TO Z*] OR [0* TO 9*])"
but the QueryParser complains saying:
"org.apache.lucene.search.BooleanQuery$TooManyClauses".
 
Any idea why this approach does not work and how to get all terms in an
index when doing search ?
 
 
Thanks,
Polina
 
 

------=_NextPart_000_0676_01C45CF7.1276F580--


From lucene-user-return-8919-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 14:24:42 2004
Return-Path: <lucene-user-return-8919-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25272 invoked from network); 28 Jun 2004 14:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 14:24:41 -0000
Received: (qmail 37377 invoked by uid 500); 28 Jun 2004 14:24:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37286 invoked by uid 500); 28 Jun 2004 14:24:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37252 invoked by uid 99); 28 Jun 2004 14:24:37 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 07:24:36 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5SENbGA000508
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 10:23:37 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040628102335.01c31750@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Mon, 28 Jun 2004 10:25:27 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Title of PDF
In-Reply-To: <007001c45ce6$9412ccb0$6a0010ac@teck>
References: <8f8e14c40406251124102752ba@mail.gmail.com>
 <007001c45ce6$9412ccb0$6a0010ac@teck>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_348277796==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_348277796==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Is there a way to store the title of a PDF in a Lucene collection for 
retrieval when listing search results.

Thanks


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_348277796==.ALT--


From lucene-user-return-8920-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 14:25:13 2004
Return-Path: <lucene-user-return-8920-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25513 invoked from network); 28 Jun 2004 14:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 14:25:13 -0000
Received: (qmail 38919 invoked by uid 500); 28 Jun 2004 14:25:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38891 invoked by uid 500); 28 Jun 2004 14:25:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38876 invoked by uid 99); 28 Jun 2004 14:25:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [62.23.206.102] (HELO smtp.kelkoo.net) (62.23.206.102)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 07:25:08 -0700
Received: from kelkoo.net (alix.kelkoo-gre.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (Kelkoo.Secure-SMTP/X.Y.Z) with ESMTP id i5SEOvGs009145
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:24:57 +0200
Message-ID: <40E02A25.9080005@kelkoo.net>
Date: Mon, 28 Jun 2004 16:24:37 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: fr, French/France, fr-FR, French, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: how to get all terms as search results (or "*" equivalent)
References: <067501c45d18$99889580$5fc811ac@plitvak>
In-Reply-To: <067501c45d18$99889580$5fc811ac@plitvak>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When you use wildcards like that, the parser builds 1 query for each 
term matching the wildcarded term. With this approach, it should have 
created n queries (ie n boolean clauses) where n is number of terms.
The number of clauses for a BooleanQuery is limited to 1024 by default.
You can change this value to a higher one, but it's not very great.

For my own use, I created a 'AllQuery' which return all the non-deleted 
documents with a score of 1
This is also very useful to search queries like 'field1:not word' (the 
documents which doesn't contain 'word')
I needed this class only for debugging purpose so I didn't work a lot on 
it and it'll be better to write it on your own to have something clean.

Franck

Polina Litvak wrote:
> Since it is not allowed to use "*" or "?" symbols as the first character
> of a search, I tried the following query as an alternative:
> "Field_1: ([a* TO z*] OR [A* TO Z*] OR [0* TO 9*])"
> but the QueryParser complains saying:
> "org.apache.lucene.search.BooleanQuery$TooManyClauses".
>  
> Any idea why this approach does not work and how to get all terms in an
> index when doing search ?
>  
>  
> Thanks,
> Polina
>  
>  
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8921-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 14:27:11 2004
Return-Path: <lucene-user-return-8921-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27025 invoked from network); 28 Jun 2004 14:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 14:27:10 -0000
Received: (qmail 44932 invoked by uid 500); 28 Jun 2004 14:26:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44808 invoked by uid 500); 28 Jun 2004 14:26:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44722 invoked by uid 99); 28 Jun 2004 14:26:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 07:26:50 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5SEPo4A001219
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 10:25:51 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040628102538.01c666f8@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Mon, 28 Jun 2004 10:27:47 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Luke
In-Reply-To: <40DC7A1A.6090308@getopt.org>
References: <20040625185609.15399.qmail@web41108.mail.yahoo.com>
 <40DC7A1A.6090308@getopt.org>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_348412906==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_348412906==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

This is a wonderful tool, Andrzej.

At 03:16 PM 25/06/2004, you wrote:
>James Dunn wrote:
>
>>I've seen that too.  I'm pretty sure either Lucene is
>>creating it, or it's an issue with Luke.
>
>(I'm the author of Luke)
>
>The problem lies with Lucene, unfortunately. The method 
>IndexReader.getFieldNames() returns an additional blank at the end. This 
>is already reported as a bug, but so far noone provided any patches...
>
>--
>Best regards,
>Andrzej Bialecki
>
>-------------------------------------------------
>Software Architect, System Integration Specialist
>CEN/ISSS EC Workshop, ECIMF project chair
>EU FP6 E-Commerce Expert/Evaluator
>-------------------------------------------------
>FreeBSD developer (http://www.freebsd.org)
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_348412906==.ALT--


From lucene-user-return-8922-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 14:32:36 2004
Return-Path: <lucene-user-return-8922-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31302 invoked from network); 28 Jun 2004 14:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 14:32:36 -0000
Received: (qmail 59654 invoked by uid 500); 28 Jun 2004 14:32:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59470 invoked by uid 500); 28 Jun 2004 14:32:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59280 invoked by uid 99); 28 Jun 2004 14:32:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 07:32:14 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 10:31:59 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: how to get all terms as search results (or "*" equivalent)
Date: Mon, 28 Jun 2004 10:31:53 -0400
Message-ID: <068601c45d1c$a8570840$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
Importance: Normal
In-Reply-To: <40E02A25.9080005@kelkoo.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-OriginalArrivalTime: 28 Jun 2004 14:31:59.0687 (UTC) FILETIME=[ABD9ED70:01C45D1C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for your help Franck.

I am new to Lucene and have some difficulties understanding how to
achieve what you suggest, namely how to get all the non deleted
documents with score of 1 (also what does the score stand for ?).

If you could provide some more detail, that would be very very helpful.

Thanks a lot,
Polina

-----Original Message-----
From: Brisbart Franck [mailto:Franck.Brisbart@kelkoo.net] 
Sent: June 28, 2004 10:25 AM
To: Lucene Users List
Subject: Re: how to get all terms as search results (or "*" equivalent)

When you use wildcards like that, the parser builds 1 query for each 
term matching the wildcarded term. With this approach, it should have 
created n queries (ie n boolean clauses) where n is number of terms.
The number of clauses for a BooleanQuery is limited to 1024 by default.
You can change this value to a higher one, but it's not very great.

For my own use, I created a 'AllQuery' which return all the non-deleted 
documents with a score of 1
This is also very useful to search queries like 'field1:not word' (the 
documents which doesn't contain 'word')
I needed this class only for debugging purpose so I didn't work a lot on

it and it'll be better to write it on your own to have something clean.

Franck

Polina Litvak wrote:
> Since it is not allowed to use "*" or "?" symbols as the first
character
> of a search, I tried the following query as an alternative:
> "Field_1: ([a* TO z*] OR [A* TO Z*] OR [0* TO 9*])"
> but the QueryParser complains saying:
> "org.apache.lucene.search.BooleanQuery$TooManyClauses".
>  
> Any idea why this approach does not work and how to get all terms in
an
> index when doing search ?
>  
>  
> Thanks,
> Polina
>  
>  
> 


-- 
Franck Brisbart
R&D
http://www.kelkoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8923-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 15:09:39 2004
Return-Path: <lucene-user-return-8923-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54319 invoked from network); 28 Jun 2004 15:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 15:09:39 -0000
Received: (qmail 81841 invoked by uid 500); 28 Jun 2004 15:09:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81577 invoked by uid 500); 28 Jun 2004 15:09:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81520 invoked by uid 99); 28 Jun 2004 15:09:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 08:09:24 -0700
Message-ID: <20040628150909.28142.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.100] by web12702.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 08:09:09 PDT
Date: Mon, 28 Jun 2004 08:09:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Title of PDF
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.1.1.0.20040628102335.01c31750@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don,

Sure, just make sure you pick the Field that stores the original text
(e.g. Keyword or Text, NOT UnStored :)).  It does not matter that the
source of the data is (PDF or HTML or Java String), as long as you use
the appropriate Field method.  Also, don't pass a Reader, as that won't
save your original text.

Otis


--- Don Vaillancourt <donv@webimpact.com> wrote:
> Is there a way to store the title of a PDF in a Lucene collection for
> 
> retrieval when listing search results.
> 
> Thanks
> 
> 
> Don Vaillancourt
> Director of Software Development
> 
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
> 
> 
> 
> 
> This email message is intended only for the addressee(s)
> and contains information that may be confidential and/or
> copyright.  If you are not the intended recipient please
> notify the sender by reply email and immediately delete
> this email. Use, disclosure or reproduction of this email
> by anyone other than the intended recipient(s) is strictly
> prohibited. No representation is made that this email or
> any attachments are free of viruses. Virus scanning is
> recommended and is the responsibility of the recipient.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8924-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 15:14:33 2004
Return-Path: <lucene-user-return-8924-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56786 invoked from network); 28 Jun 2004 15:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 15:14:32 -0000
Received: (qmail 95965 invoked by uid 500); 28 Jun 2004 15:14:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95902 invoked by uid 500); 28 Jun 2004 15:14:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95870 invoked by uid 99); 28 Jun 2004 15:14:26 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.218.94.72] (HELO web90101.mail.scd.yahoo.com) (66.218.94.72)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 08:14:24 -0700
Message-ID: <20040628151411.50181.qmail@web90101.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90101.mail.scd.yahoo.com via HTTP; Mon, 28 Jun 2004 08:14:11 PDT
Date: Mon, 28 Jun 2004 08:14:11 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: how to use the snowball analyzer to index french text?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-515329614-1088435651=:50067"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-515329614-1088435651=:50067
Content-Type: text/plain; charset=us-ascii

Hi all,
 
I am a newbie and having some problems with how snowball analyzer works. I want to index a collection of french documents. I have in my disposal the list of french stop words that would be a help for the french language stemmer. 
 
Does anyone have any experience with writing a snowball-based analyzer for french language? Any help and code sample will be appreciated? 
 
Thanks before hand!
 
Uddam

		
---------------------------------
Do you Yahoo!?
New and Improved Yahoo! Mail - 100MB free storage!
--0-515329614-1088435651=:50067--

From lucene-user-return-8925-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 15:18:06 2004
Return-Path: <lucene-user-return-8925-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59208 invoked from network); 28 Jun 2004 15:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 15:18:06 -0000
Received: (qmail 8560 invoked by uid 500); 28 Jun 2004 15:17:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8331 invoked by uid 500); 28 Jun 2004 15:17:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8158 invoked by uid 99); 28 Jun 2004 15:17:31 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 08:17:23 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5SFGKA9019056
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 11:16:20 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040628111539.01c7fbf0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Mon, 28 Jun 2004 11:17:01 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Re: Title of PDF
In-Reply-To: <20040628150909.28142.qmail@web12702.mail.yahoo.com>
References: <6.1.1.1.0.20040628102335.01c31750@localhost>
 <20040628150909.28142.qmail@web12702.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_351440937==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_351440937==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

It can't be that simple because the field will contain the whole PDF and 
not just the title.  And for PDFs that are 3 or 4 megs, it is  really not 
reasonable to store the who PDF in the collection just to get the title.

At 11:09 AM 28/06/2004, you wrote:
>Don,
>
>Sure, just make sure you pick the Field that stores the original text
>(e.g. Keyword or Text, NOT UnStored :)).  It does not matter that the
>source of the data is (PDF or HTML or Java String), as long as you use
>the appropriate Field method.  Also, don't pass a Reader, as that won't
>save your original text.
>
>Otis
>
>
>--- Don Vaillancourt <donv@webimpact.com> wrote:
> > Is there a way to store the title of a PDF in a Lucene collection for
> >
> > retrieval when listing search results.
> >
> > Thanks
> >
> >
> > Don Vaillancourt
> > Director of Software Development
> >
> > WEB IMPACT INC.
> > 416-815-2000 ext. 245
> > email: donv@web-impact.com
> > web: http://www.web-impact.com
> >
> >
> >
> >
> > This email message is intended only for the addressee(s)
> > and contains information that may be confidential and/or
> > copyright.  If you are not the intended recipient please
> > notify the sender by reply email and immediately delete
> > this email. Use, disclosure or reproduction of this email
> > by anyone other than the intended recipient(s) is strictly
> > prohibited. No representation is made that this email or
> > any attachments are free of viruses. Virus scanning is
> > recommended and is the responsibility of the recipient.
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_351440937==.ALT--


From lucene-user-return-8926-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 15:22:05 2004
Return-Path: <lucene-user-return-8926-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63180 invoked from network); 28 Jun 2004 15:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 15:22:05 -0000
Received: (qmail 24300 invoked by uid 500); 28 Jun 2004 15:22:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24146 invoked by uid 500); 28 Jun 2004 15:21:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23997 invoked by uid 99); 28 Jun 2004 15:21:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [66.216.127.33] (HELO sn2.cwihosting.com) (66.216.127.33)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 08:21:50 -0700
Received: from h00e07dd8f05b.ne.client2.attbi.com ([24.60.185.190] helo=mgiles-office.visionstudio.com)
	by sn2.cwihosting.com with esmtp (Exim 4.34)
	id 1Bexwr-0006h0-G0
	for lucene-user@jakarta.apache.org; Mon, 28 Jun 2004 10:21:33 -0500
Message-Id: <6.1.0.6.0.20040628111913.02a2dcb0@mail.visionstudio.com>
X-Sender: mgiles%visionstudio.com@mail.visionstudio.com (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 6.1.0.6
Date: Mon, 28 Jun 2004 11:21:29 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Michael Giles <mgiles@visionstudio.com>
Subject: Re: Title of PDF
In-Reply-To: <6.1.1.1.0.20040628111539.01c7fbf0@localhost>
References: <6.1.1.1.0.20040628102335.01c31750@localhost>
 <20040628150909.28142.qmail@web12702.mail.yahoo.com>
 <6.1.1.1.0.20040628111539.01c7fbf0@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-MailScanner-Information: Please contact CWIHosting.com for more information
X-MailScanner: Found to be clean
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sn2.cwihosting.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 99]
X-AntiAbuse: Sender Address Domain - visionstudio.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don,

I think you misunderstood Otis.  You will need to use some sort of parser 
(i.e. pdfbox, xpdf) to get the title text from the PDF (I assume you are 
indexing the documents, so you have this already).  Then you create a 
"title" field in your index and store the text of the title in there (so 
that you can return it with the results).  That is independent of what you 
do with the rest of the PDF document.

-Mike

At 11:17 AM 6/28/2004, Don Vaillancourt wrote:
>It can't be that simple because the field will contain the whole PDF and 
>not just the title.  And for PDFs that are 3 or 4 megs, it is  really not 
>reasonable to store the who PDF in the collection just to get the title.

________________________________________________________________________
Save and share anything you find online - Furl @ http://www.furl.net  


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8927-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 15:44:26 2004
Return-Path: <lucene-user-return-8927-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76406 invoked from network); 28 Jun 2004 15:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 15:44:26 -0000
Received: (qmail 94497 invoked by uid 500); 28 Jun 2004 15:44:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94365 invoked by uid 500); 28 Jun 2004 15:44:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94108 invoked by uid 99); 28 Jun 2004 15:44:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 08:44:04 -0700
Message-ID: <20040628154346.86501.qmail@web12707.mail.yahoo.com>
Received: from [211.95.204.100] by web12707.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 08:43:45 PDT
Date: Mon, 28 Jun 2004 08:43:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to use the snowball analyzer to index french text?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040628151411.50181.qmail@web90101.mail.scd.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Uddam,

I can't tell with certainty whether you are aware of Snowball Analyzers
for Lucene or not.  Take a look at Lucene Sandbox:
http://jakarta.apache.org/lucene/docs/lucene-sandbox/.  You will see
Snowball Stemmers for Lucene contribution there.

That includes the French stemmer, so you shouldn't need to write any
new code.

Otis

--- uddam chukmol <uddam_chukmol@yahoo.com> wrote:
> Hi all,
>  
> I am a newbie and having some problems with how snowball analyzer
> works. I want to index a collection of french documents. I have in my
> disposal the list of french stop words that would be a help for the
> french language stemmer. 
>  
> Does anyone have any experience with writing a snowball-based
> analyzer for french language? Any help and code sample will be
> appreciated? 
>  
> Thanks before hand!
>  
> Uddam
> 
> 		
> ---------------------------------
> Do you Yahoo!?
> New and Improved Yahoo! Mail - 100MB free storage!


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8928-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 16:37:41 2004
Return-Path: <lucene-user-return-8928-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3868 invoked from network); 28 Jun 2004 16:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 16:37:41 -0000
Received: (qmail 40605 invoked by uid 500); 28 Jun 2004 16:37:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40569 invoked by uid 500); 28 Jun 2004 16:37:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40555 invoked by uid 99); 28 Jun 2004 16:37:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 09:37:36 -0700
Received: from ppeddi ([192.168.1.44]) by contextmedia.com ; Mon, 28 Jun 2004 12:35:42 -0400
Message-ID: <001c01c45d2e$31a1c2a0$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Do we really need CJKAnalyzer to search japanese characters
Date: Mon, 28 Jun 2004 12:37:25 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello all,
You will have to excuse me if the question looks dumb ;)

I didn't use CJKAnalyzer and I could still search japanese characters.
Actually I used it first but then I thought of testing with just the
standard analyzer. It worked with standard analyzer also.

I was able to search the metadata of our objects that has chinese and
japanese characters.

I think lucene is internally storing unicode characters. So should it matter
if its standard analyzer or CJK analyzer?

When do we have to use CJKAnalyzer really?

Praveen

**************************************************************
Praveen Peddi
Sr Software Engg, Context Media, Inc.
email:ppeddi@contextmedia.com
Tel:  401.854.3475
Fax:  401.861.3596
web: http://www.contextmedia.com
**************************************************************
Context Media- "The Leader in Enterprise Content Integration"


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8929-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 17:08:09 2004
Return-Path: <lucene-user-return-8929-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19740 invoked from network); 28 Jun 2004 17:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 17:08:09 -0000
Received: (qmail 28104 invoked by uid 500); 28 Jun 2004 17:08:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28052 invoked by uid 500); 28 Jun 2004 17:08:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28029 invoked by uid 99); 28 Jun 2004 17:08:05 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [216.148.212.184] (HELO w02.bloglines.com) (216.148.212.184)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 10:08:04 -0700
Received: (qmail 13986 invoked by uid 99); 28 Jun 2004 17:07:47 -0000
Message-ID: <1088442467.2183689073.13985.sendItem@bloglines.com>
Date: 28 Jun 2004 17:07:47 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Storing dates as longs
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm storing my dates as longs.  The longs are converted to strings
and padded with zeros.

Am I going to run into issues with this?  Based
on other mailing list postings, I suspect that this may cause the "too many
boolean queries" issue when I search for date ranges.  Is this true?  What
are my options for getting around this issue?

Any advice is appreciated.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8930-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 17:22:31 2004
Return-Path: <lucene-user-return-8930-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27593 invoked from network); 28 Jun 2004 17:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 17:22:31 -0000
Received: (qmail 72176 invoked by uid 500); 28 Jun 2004 17:22:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72012 invoked by uid 500); 28 Jun 2004 17:22:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71817 invoked by uid 99); 28 Jun 2004 17:22:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 10:22:20 -0700
Message-ID: <20040628172159.47839.qmail@web12708.mail.yahoo.com>
Received: from [211.95.204.101] by web12708.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 10:21:59 PDT
Date: Mon, 28 Jun 2004 10:21:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Storing dates as longs
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1088442467.2183689073.13985.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

The standard answer to this question is:
If you don't need your dates to be very precise, trim milliseconds. 
Trim more (e.g. seconds) if that information is not relevant.

Otis


--- yahootintin.1247688@bloglines.com wrote:
> Hi,
> 
> I'm storing my dates as longs.  The longs are converted to strings
> and padded with zeros.
> 
> Am I going to run into issues with this?  Based
> on other mailing list postings, I suspect that this may cause the
> "too many
> boolean queries" issue when I search for date ranges.  Is this true? 
> What
> are my options for getting around this issue?
> 
> Any advice is appreciated.
> 
> Thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8931-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 18:16:41 2004
Return-Path: <lucene-user-return-8931-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52121 invoked from network); 28 Jun 2004 18:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 18:16:41 -0000
Received: (qmail 87093 invoked by uid 500); 28 Jun 2004 18:16:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87065 invoked by uid 500); 28 Jun 2004 18:16:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87040 invoked by uid 99); 28 Jun 2004 18:16:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 11:16:42 -0700
Received: from [192.168.1.101] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i5SIGKbr032434
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 11:16:21 -0700
Message-ID: <40E06068.7080402@newsmonster.org>
Date: Mon, 28 Jun 2004 11:16:08 -0700
From: Kevin Burton <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: JavaOne and Lucene
References: <E01C148E-C543-11D8-80B7-000393A564E6@ehatchersolutions.com>
In-Reply-To: <E01C148E-C543-11D8-80B7-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> I'm presenting "Lucene in Action" Tuesday morning next week at JavaOne 
> (TS-2994).
>
> Any other Luceners going to JavaOne?

I'll probably be there... Not 100% sure though. Its nice having offices 
30 feet from the Moscone ;)

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8932-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 18:17:36 2004
Return-Path: <lucene-user-return-8932-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52740 invoked from network); 28 Jun 2004 18:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 18:17:35 -0000
Received: (qmail 89405 invoked by uid 500); 28 Jun 2004 18:17:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89296 invoked by uid 500); 28 Jun 2004 18:17:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89283 invoked by uid 99); 28 Jun 2004 18:17:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 11:17:39 -0700
Received: from [192.168.1.101] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i5SIHC14032449
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 11:17:12 -0700
Message-ID: <40E060A2.6090102@newsmonster.org>
Date: Mon, 28 Jun 2004 11:17:06 -0700
From: Kevin Burton <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Storing dates as longs
References: <20040628172159.47839.qmail@web12708.mail.yahoo.com>
In-Reply-To: <20040628172159.47839.qmail@web12708.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

>Hello,
>
>The standard answer to this question is:
>If you don't need your dates to be very precise, trim milliseconds. 
>Trim more (e.g. seconds) if that information is not relevant.
>
>  
>
So the question is should use store this data in the lucene date field 
or as millis with padding...

We have the same issue.

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8933-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 19:05:37 2004
Return-Path: <lucene-user-return-8933-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76819 invoked from network); 28 Jun 2004 19:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 19:05:36 -0000
Received: (qmail 3612 invoked by uid 500); 28 Jun 2004 19:05:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3515 invoked by uid 500); 28 Jun 2004 19:05:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3482 invoked by uid 99); 28 Jun 2004 19:05:36 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [216.148.212.184] (HELO w02.bloglines.com) (216.148.212.184)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 12:05:34 -0700
Received: (qmail 13960 invoked by uid 99); 28 Jun 2004 19:04:50 -0000
Message-ID: <1088449490.736412350.13959.sendItem@bloglines.com>
Date: 28 Jun 2004 19:04:50 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: JavaOne and Lucene
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Kevin,

Have you had problems storing the dates as millis?  Are you able
to request large date ranges without Lucene errors?

I haven't had time
to fully test my implmentation yet.  The basics work but I'm concerned that
once I have a lot of dates in Lucene that span 75 years or so, I may have
issues.

Thanks.

--- Lucene Users List" <lucene-user@jakarta.apache.org
wrote:
Erik Hatcher wrote:
> 
> > I'm presenting "Lucene in Action" Tuesday
morning next week at JavaOne 
> > (TS-2994).
> >
> > Any other Luceners
going to JavaOne?
> 
> I'll probably be there... Not 100% sure though. Its
nice having offices 
> 30 feet from the Moscone ;)
> 
> Kevin
> 
> --

> 
> Please reply using PGP.
> 
>     http://peerfear.org/pubkey.asc
   
>     
>     NewsMonster - http://www.newsmonster.org/
>     
> Kevin
A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
>        AIM/YIM
- sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2
760E 70A8 6174 D393 E84D 8D04 99F1 4412
>   IRC - freenode.net #infoanarchy
| #p2p-hackers | #newsmonster
> 
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8934-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 20:51:39 2004
Return-Path: <lucene-user-return-8934-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36187 invoked from network); 28 Jun 2004 20:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 20:51:39 -0000
Received: (qmail 65826 invoked by uid 500); 28 Jun 2004 20:51:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65694 invoked by uid 500); 28 Jun 2004 20:51:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65585 invoked by uid 99); 28 Jun 2004 20:51:40 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [64.30.32.11] (HELO smtp.airsmail.com) (64.30.32.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 13:51:38 -0700
Received: from trinidad (trinidad.airscorp.com [10.0.4.100])
	(authenticated)
	by smtp.airsmail.com (8.11.6/8.11.6) with ESMTP id i5SKpBI28290
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:51:11 -0400
From: "Mark Florence" <mflorence@airsmail.com>
To: <lucene-user@jakarta.apache.org>
Subject: Running OutOfMemory while optimizing and searching
Date: Mon, 28 Jun 2004 16:51:11 -0400
Message-ID: <DIENLCKNNDCDMPIEODNMMEKNJBAA.mflorence@airsmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002B_01C45D30.1DD02490"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002B_01C45D30.1DD02490
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi, I'm using Lucene to index ~3.5M documents, over about 50 fields. The Lucene
index itself is ~10.5GB, spread over ~7,000 files. Some of these files are
"large" -- that is, several PRX files are ~1.5GB.

Lucene runs on a dedicated server (Linux on a 1Ghz Dell, with 1GB RAM). Clients
on other machines use RMI to perform reads / writes. Each night the server
automatically performs an optimize.

The problem is that the optimize now dies with an OutOfMemory exception, even
when the JVM heap size is set to its maximum of 2GB. I need to optimize, because
as the number of Lucene files grows, search performance becomes unacceptable.

Search performance is also adversely affected because I've had to effectively
single-thread reads and writes. I was using a simple read / write lock
mechanism, allowing multiple readers to simultaneously search, but now more than
3-4 simultaneous readers will also cause an OutOfMemory condition. Searches can
take as long as 30-40 seconds, and with single-threading, that's crippling the
main client application.

Needless to say, the Lucene index is mission-critical, and must run 24/7.

I've seen other posts along this same vein, but no definite consensus. Is my
problem simply inadequate hardware? Should I run on a 64-bit platform, where I
can allocate a Java heap of > 2GB?

Or could there be something fundamentally "wrong" with my index? I should add
that I've just spent about a week (!!) rebuilding from scratch, over all 3.5M
documents.

-- Many thanks for any help! Mark Florence



------=_NextPart_000_002B_01C45D30.1DD02490--


From lucene-user-return-8935-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 20:59:49 2004
Return-Path: <lucene-user-return-8935-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41530 invoked from network); 28 Jun 2004 20:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 20:59:49 -0000
Received: (qmail 81909 invoked by uid 500); 28 Jun 2004 20:59:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81565 invoked by uid 500); 28 Jun 2004 20:59:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81520 invoked by uid 99); 28 Jun 2004 20:59:24 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 13:59:22 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5SKw7PU052489
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:58:07 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040628164606.01c43ec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Mon, 28 Jun 2004 16:58:50 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: PDF Indexing Issue
In-Reply-To: <1088449490.736412350.13959.sendItem@bloglines.com>
References: <1088449490.736412350.13959.sendItem@bloglines.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_14121812==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_14121812==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

I used the following code example from an article that I linked off of 
jakarta's site to index PDF files:

doc.add(Field.Text("content", new FileReader(f)));

But I realized today that this method only indexes the PDF as is.  For 
those wondering if the the PDF were actually indexed or if maybe they only 
contained images, well I verified this with LUKE and those PDFs are in 
there, but the only keywords that were indexed were the PDF defintion 
statements and encoded stuff.

So what is the proper way to index a PDF?

Thank You


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_14121812==.ALT--


From lucene-user-return-8936-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 21:03:13 2004
Return-Path: <lucene-user-return-8936-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43456 invoked from network); 28 Jun 2004 21:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 21:03:13 -0000
Received: (qmail 92863 invoked by uid 500); 28 Jun 2004 21:03:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92817 invoked by uid 500); 28 Jun 2004 21:03:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92757 invoked by uid 99); 28 Jun 2004 21:03:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 14:03:16 -0700
Received: from [192.168.10.232] (gw.ampiro.com [80.252.165.66] (may be forged))
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i5SL2q901284
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:02:53 -0500
Message-ID: <40E08771.7060403@getopt.org>
Date: Mon, 28 Jun 2004 23:02:41 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040608
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PDF Indexing Issue
References: <1088449490.736412350.13959.sendItem@bloglines.com> <6.1.1.1.0.20040628164606.01c43ec0@localhost>
In-Reply-To: <6.1.1.1.0.20040628164606.01c43ec0@localhost>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don Vaillancourt wrote:
> I used the following code example from an article that I linked off of 
> jakarta's site to index PDF files:
> 
> doc.add(Field.Text("content", new FileReader(f)));
> 
> But I realized today that this method only indexes the PDF as is.  For 
> those wondering if the the PDF were actually indexed or if maybe they 
> only contained images, well I verified this with LUKE and those PDFs are 
> in there, but the only keywords that were indexed were the PDF defintion 
> statements and encoded stuff.
> 
> So what is the proper way to index a PDF?

The proper way is to first pass the PDF file through a PDF parser (e.g. 
PDFBox), and then extract plain-text content (such as body, title, 
author, etc), and only then add that plaintext content to the index.


-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8937-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 22:00:27 2004
Return-Path: <lucene-user-return-8937-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67524 invoked from network); 28 Jun 2004 22:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 22:00:27 -0000
Received: (qmail 20982 invoked by uid 500); 28 Jun 2004 22:00:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20860 invoked by uid 500); 28 Jun 2004 22:00:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20756 invoked by uid 99); 28 Jun 2004 22:00:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.98.34] (HELO brmea-mail-3.sun.com) (192.18.98.34)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 15:00:22 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-3.sun.com (8.12.10/8.12.9) with ESMTP id i5SLxuil007655
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:59:56 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I0100I01GZAEG@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Mon, 28 Jun 2004 14:59:56 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I0100JNJH3W2W@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Mon, 28 Jun 2004 14:59:56 -0700 (PDT)
Date: Mon, 28 Jun 2004 14:59:56 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: PhraseQuery
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E094DC.4040501@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I was wondering if anyone out there had tried the PhraseQuery  class and 
retrieved the results. I'm new to the whole search solution. I have a 
need to do a exact phrase search. Any code sample would be really 
appreciated.

Thanks.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8938-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 22:06:02 2004
Return-Path: <lucene-user-return-8938-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69659 invoked from network); 28 Jun 2004 22:06:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 22:06:02 -0000
Received: (qmail 38138 invoked by uid 500); 28 Jun 2004 22:06:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38020 invoked by uid 500); 28 Jun 2004 22:06:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37977 invoked by uid 99); 28 Jun 2004 22:06:04 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 15:06:00 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5SM4iWW000946
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 18:04:45 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040628180005.01ba2460@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Mon, 28 Jun 2004 18:06:14 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: PDFBox Issue
In-Reply-To: <40E08771.7060403@getopt.org>
References: <1088449490.736412350.13959.sendItem@bloglines.com>
 <6.1.1.1.0.20040628164606.01c43ec0@localhost>
 <40E08771.7060403@getopt.org>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_18119781==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_18119781==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hi all,

I know that this is a Lucene list but wanted to know if any of you have 
gotten this error before using PDFBox?

I've gotten the latest version of PDFBox and it is giving me the following 
error:

java.lang.VerifyError: (class: org/apache/log4j/LogManager, method: 
<clinit> signature: ()V) Incompatible argument to function
at org.apache.log4j.Logger.getLogger(Logger.java:94)
at org.pdfbox.pdfparser.PDFParser.<clinit>(PDFParser.java:57)
at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent(LucenePDFDocument.java:197)
at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:118)
at Index.indexFile(Index.java:287)
at Index.indexDirectory(Index.java:265)
at Index.update(Index.java:63)
at Lucene.main(Lucene.java:26)
Exception in thread "main"

I am using all the jar files that came with PDFBox.

Anyone run into this problem.  I am using the following line of code:

Document doc = LucenePDFDocument.getDocument(f);

Thanks


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_18119781==.ALT--


From lucene-user-return-8939-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 22:06:22 2004
Return-Path: <lucene-user-return-8939-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69771 invoked from network); 28 Jun 2004 22:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 22:06:22 -0000
Received: (qmail 39517 invoked by uid 500); 28 Jun 2004 22:06:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39388 invoked by uid 500); 28 Jun 2004 22:06:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39326 invoked by uid 99); 28 Jun 2004 22:06:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 15:06:23 -0700
Received: from [192.168.1.101] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i5SM5was002864
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:05:58 -0700
Message-ID: <40E0963F.70701@newsmonster.org>
Date: Mon, 28 Jun 2004 15:05:51 -0700
From: Kevin Burton <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Storing dates as millis -> Re: JavaOne and Lucene
References: <1088449490.736412350.13959.sendItem@bloglines.com>
In-Reply-To: <1088449490.736412350.13959.sendItem@bloglines.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

yahootintin.1247688@bloglines.com wrote:

>Hi Kevin,
>
>Have you had problems storing the dates as millis?  Are you able
>to request large date ranges without Lucene errors?
>
>I haven't had time
>to fully test my implmentation yet.  The basics work but I'm concerned that
>once I have a lot of dates in Lucene that span 75 years or so, I may have
>issues.
>  
>
Wrong subject?

We're not doing this now but I'm thinking of storing them as minutes 
since epoch or so...

We only care about recent dates so...

Just trying to think about the most efficient way to do this.  This 
seems to need a wiki page entry :)

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8940-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 22:53:18 2004
Return-Path: <lucene-user-return-8940-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92882 invoked from network); 28 Jun 2004 22:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 22:53:18 -0000
Received: (qmail 45080 invoked by uid 500); 28 Jun 2004 22:53:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45042 invoked by uid 500); 28 Jun 2004 22:53:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45015 invoked by uid 99); 28 Jun 2004 22:53:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 15:53:24 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062815525803120
 for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:52:58 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 15:52:58 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 2B4357A9B3B
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:53:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40E094DC.4040501@Sun.COM>
References: <40E094DC.4040501@Sun.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E6822F6F-C955-11D8-B5B0-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: PhraseQuery
Date: Mon, 28 Jun 2004 15:52:58 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 28 Jun 2004 22:52:58.0573 (UTC) FILETIME=[A857EFD0:01C45D62]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Jun 28, 2004, at 2:59 PM, Hetan Shah wrote:

> I was wondering if anyone out there had tried the PhraseQuery  class 
> and retrieved the results. I'm new to the whole search solution. I 
> have a need to do a exact phrase search. Any code sample would be 
> really appreciated.

     PhraseQuery query = new PhraseQuery();

     for (int i=0; i < words.length; i++) {
       query.add(new Term("field", phrase[i]));
     }

That builds a PhraseQuery from a String[] of words and will be an exact 
match (unless you called setSlop with something greater than zero).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8941-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 22:57:43 2004
Return-Path: <lucene-user-return-8941-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95183 invoked from network); 28 Jun 2004 22:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 22:57:43 -0000
Received: (qmail 59065 invoked by uid 500); 28 Jun 2004 22:57:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58937 invoked by uid 500); 28 Jun 2004 22:57:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58859 invoked by uid 99); 28 Jun 2004 22:57:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 15:57:43 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062815571603165
 for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:57:16 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 15:57:16 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A27347A9B60
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 15:57:18 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40E0963F.70701@newsmonster.org>
References: <1088449490.736412350.13959.sendItem@bloglines.com> <40E0963F.70701@newsmonster.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <80B765FB-C956-11D8-B5B0-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Storing dates as millis
Date: Mon, 28 Jun 2004 15:57:17 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 28 Jun 2004 22:57:17.0028 (UTC) FILETIME=[42650A40:01C45D63]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 28, 2004, at 3:05 PM, Kevin Burton wrote:
> Just trying to think about the most efficient way to do this.  This 
> seems to need a wiki page entry :)


ya mean like this?  :)

	http://wiki.apache.org/jakarta-lucene/IndexingDateFields

feel free to improve it.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8942-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 23:08:09 2004
Return-Path: <lucene-user-return-8942-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98540 invoked from network); 28 Jun 2004 23:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 23:08:09 -0000
Received: (qmail 82961 invoked by uid 500); 28 Jun 2004 23:08:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82728 invoked by uid 500); 28 Jun 2004 23:08:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82715 invoked by uid 99); 28 Jun 2004 23:08:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 16:08:20 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062816074303194
 for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:07:43 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 28 Jun 2004 16:07:43 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id A55297A9B9E
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 16:07:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40E060A2.6090102@newsmonster.org>
References: <20040628172159.47839.qmail@web12708.mail.yahoo.com> <40E060A2.6090102@newsmonster.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F5A60A78-C957-11D8-B5B0-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Storing dates as longs
Date: Mon, 28 Jun 2004 16:07:42 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 28 Jun 2004 23:07:43.0117 (UTC) FILETIME=[B792A3D0:01C45D64]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 28, 2004, at 11:17 AM, Kevin Burton wrote:
> Otis Gospodnetic wrote:
>
>> Hello,
>>
>> The standard answer to this question is:
>> If you don't need your dates to be very precise, trim milliseconds. 
>> Trim more (e.g. seconds) if that information is not relevant.
>>
>>
> So the question is should use store this data in the lucene date field 
> or as millis with padding...
>
> We have the same issue.

It all depends on what granularity you care about.  If your application 
only cares about year, month, and day, then I recommend indexing dates 
literally as text YYYYMMDD format, which allows you to query by year 
(or year and month, or year, month, and day) quite efficiently.

If you care about milliseconds, you will need to determine how best to 
handle this when it comes to querying.  A RangeQuery on tons of 
documments that all within the date range is an issue that deserves 
consideration and you may need to do some cached filters in order to 
facilitate such things.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8943-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Jun 28 23:47:33 2004
Return-Path: <lucene-user-return-8943-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10475 invoked from network); 28 Jun 2004 23:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Jun 2004 23:47:32 -0000
Received: (qmail 60379 invoked by uid 500); 28 Jun 2004 23:47:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60250 invoked by uid 500); 28 Jun 2004 23:47:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60086 invoked by uid 99); 28 Jun 2004 23:47:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.98.36] (HELO brmea-mail-4.sun.com) (192.18.98.36)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 16:47:19 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-4.sun.com (8.12.10/8.12.9) with ESMTP id i5SNit53000357
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 17:44:55 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I0100H01LWB9A@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Mon, 28 Jun 2004 16:46:51 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I0100BJ1M22HN@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Mon, 28 Jun 2004 16:46:51 -0700 (PDT)
Date: Mon, 28 Jun 2004 16:46:50 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Re: PhraseQuery
In-reply-to: <E6822F6F-C955-11D8-B5B0-000393A564E6@ehatchersolutions.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E0ADEA.1030202@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
References: <40E094DC.4040501@Sun.COM>
 <E6822F6F-C955-11D8-B5B0-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you very much Erik,

Also wanted to find out if it would be possible to use the highlighter 
class or functionality with demo3 that is included in the distribution 
of Lucene?

It would be really cool to see that functionality in action.

thanks.
-H

Erik Hatcher wrote:

>
> On Jun 28, 2004, at 2:59 PM, Hetan Shah wrote:
>
>> I was wondering if anyone out there had tried the PhraseQuery  class 
>> and retrieved the results. I'm new to the whole search solution. I 
>> have a need to do a exact phrase search. Any code sample would be 
>> really appreciated.
>
>
>     PhraseQuery query = new PhraseQuery();
>
>     for (int i=0; i < words.length; i++) {
>       query.add(new Term("field", phrase[i]));
>     }
>
> That builds a PhraseQuery from a String[] of words and will be an 
> exact match (unless you called setSlop with something greater than zero).
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8944-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 00:19:13 2004
Return-Path: <lucene-user-return-8944-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21344 invoked from network); 29 Jun 2004 00:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 00:19:13 -0000
Received: (qmail 48027 invoked by uid 500); 29 Jun 2004 00:19:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47825 invoked by uid 500); 29 Jun 2004 00:19:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47714 invoked by uid 99); 29 Jun 2004 00:19:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.98.36] (HELO brmea-mail-4.sun.com) (192.18.98.36)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 17:19:12 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-4.sun.com (8.12.10/8.12.9) with ESMTP id i5T0Gl53010994
	for <lucene-user@jakarta.apache.org>; Mon, 28 Jun 2004 18:16:47 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I0100501NG4SY@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Mon, 28 Jun 2004 17:18:43 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I0100BOCNJ7HN@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Mon, 28 Jun 2004 17:18:43 -0700 (PDT)
Date: Mon, 28 Jun 2004 17:18:43 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Using Highlighter in web Demo
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E0B563.8070601@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it possible to use highlighter successfully in the demos the web demo 
to be specific. Has any one tried out there? If so can they explain me 
how to go about it any code sample is really  very appreciated.

Thanks.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8945-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 01:05:20 2004
Return-Path: <lucene-user-return-8945-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35322 invoked from network); 29 Jun 2004 01:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 01:05:20 -0000
Received: (qmail 55202 invoked by uid 500); 29 Jun 2004 01:05:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55049 invoked by uid 500); 29 Jun 2004 01:05:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55007 invoked by uid 99); 29 Jun 2004 01:05:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Mon, 28 Jun 2004 18:05:18 -0700
Message-Id: <200406290103.i5T13KT08844@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: best ways of using IndexSearcher
Date: Tue, 29 Jun 2004 11:05:42 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys,

What's the recommended way of using IndexSearcher? Should IndexSearcher be a
singleton or pooled?  Would pooling provide a more scalable solution by
allowing you to decide how many IndexSearcher to use based on say how many
CPU u have on ur server?

Thanks,

Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8946-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 04:52:00 2004
Return-Path: <lucene-user-return-8946-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62387 invoked from network); 29 Jun 2004 04:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 04:52:00 -0000
Received: (qmail 2972 invoked by uid 500); 29 Jun 2004 04:52:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2832 invoked by uid 500); 29 Jun 2004 04:52:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2733 invoked by uid 99); 29 Jun 2004 04:52:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 21:52:02 -0700
Message-ID: <20040629045128.89237.qmail@web12707.mail.yahoo.com>
Received: from [211.95.204.101] by web12707.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 21:51:28 PDT
Date: Mon, 28 Jun 2004 21:51:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: best ways of using IndexSearcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200406290103.i5T13KT08844@mail.fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anson,

Use a single instance of IndexSearcher and, if you want to always 'see'
even the latest index changes (deletes and adds since you opened the
IndexSearcher) make sure to re-create the IndexSearcher when you detect
that the index version has changed (see
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getCurrentVersion(org.apache.lucene.store.Directory))

When you get the new IndexSearcher, leave the old instance alone - let
the GC take care of it, and don't call close() on it, in case something
in your application is still using that instance.

This stuff is not really CPU intensive.  Disk I/O tends to be the
bottleneck.  If you are working with multiple indices, spread them over
multiple disks (not just partitions, real disks), if you can.

Otis


--- Anson Lau <alau@fulfil-net.com> wrote:
> Hi Guys,
> 
> What's the recommended way of using IndexSearcher? Should
> IndexSearcher be a
> singleton or pooled?  Would pooling provide a more scalable solution
> by
> allowing you to decide how many IndexSearcher to use based on say how
> many
> CPU u have on ur server?
> 
> Thanks,
> 
> Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8947-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 04:55:24 2004
Return-Path: <lucene-user-return-8947-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64246 invoked from network); 29 Jun 2004 04:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 04:55:24 -0000
Received: (qmail 14145 invoked by uid 500); 29 Jun 2004 04:55:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13837 invoked by uid 500); 29 Jun 2004 04:55:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13717 invoked by uid 99); 29 Jun 2004 04:55:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 21:55:17 -0700
Message-ID: <20040629045442.36785.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.101] by web12702.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 21:54:42 PDT
Date: Mon, 28 Jun 2004 21:54:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: PDFBox Issue
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.1.1.0.20040628180005.01ba2460@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think I recall somebody sending an email with that same Verify error
(but not relating to PDFBox), and I believe the person said it had to
do with a corrupt Jar.

In your case the error is also not in PDFBox, but rather Log4J.

That line 57 of PDFParser.java should probably look like this:

<access modifiers + optional final/static> Logger <var> =
Logger.getLogger(PDFParser.class);

If you have the source of that class, make sure it looks like that.

Otis


--- Don Vaillancourt <donv@webimpact.com> wrote:
> Hi all,
> 
> I know that this is a Lucene list but wanted to know if any of you
> have 
> gotten this error before using PDFBox?
> 
> I've gotten the latest version of PDFBox and it is giving me the
> following 
> error:
> 
> java.lang.VerifyError: (class: org/apache/log4j/LogManager, method: 
> <clinit> signature: ()V) Incompatible argument to function
> at org.apache.log4j.Logger.getLogger(Logger.java:94)
> at org.pdfbox.pdfparser.PDFParser.<clinit>(PDFParser.java:57)
> at 
>
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent(LucenePDFDocument.java:197)
> at 
>
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:118)
> at Index.indexFile(Index.java:287)
> at Index.indexDirectory(Index.java:265)
> at Index.update(Index.java:63)
> at Lucene.main(Lucene.java:26)
> Exception in thread "main"
> 
> I am using all the jar files that came with PDFBox.
> 
> Anyone run into this problem.  I am using the following line of code:
> 
> Document doc = LucenePDFDocument.getDocument(f);
> 
> Thanks
> 
> 
> Don Vaillancourt
> Director of Software Development
> 
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
> 
> 
> 
> 
> This email message is intended only for the addressee(s)
> and contains information that may be confidential and/or
> copyright.  If you are not the intended recipient please
> notify the sender by reply email and immediately delete
> this email. Use, disclosure or reproduction of this email
> by anyone other than the intended recipient(s) is strictly
> prohibited. No representation is made that this email or
> any attachments are free of viruses. Virus scanning is
> recommended and is the responsibility of the recipient.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8948-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 04:59:42 2004
Return-Path: <lucene-user-return-8948-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67134 invoked from network); 29 Jun 2004 04:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 04:59:42 -0000
Received: (qmail 24661 invoked by uid 500); 29 Jun 2004 04:59:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24542 invoked by uid 500); 29 Jun 2004 04:59:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24435 invoked by uid 99); 29 Jun 2004 04:59:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 21:59:50 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I0213100.LID for <lucene-user@jakarta.apache.org>; Tue,
          29 Jun 2004 10:41:25 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: When will Lucene 1.4
Date: Tue, 29 Jun 2004 10:38:30 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMENGCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20040629045128.89237.qmail@web12707.mail.yahoo.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hey
Dev -Guys

First Apologies for the Question  [ Intentionally did not wanted to  disrupt
the proceesings]


1) When will LUCENE1.4 - final  be released

2) Will it contain lot's of featured Examples  (lucene1.3-final does not
have many of features based examples)

3) Will the Furture releases be synchronized with releases of J2DK (since
every new version of J2SDK is released 6 months)

[ The major Concern for our Organization, since we plan to move our Code
from lucene1.3 final to 1.4 final ]


Thx in advance.....


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8949-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 05:01:59 2004
Return-Path: <lucene-user-return-8949-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67961 invoked from network); 29 Jun 2004 05:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 05:01:59 -0000
Received: (qmail 33189 invoked by uid 500); 29 Jun 2004 05:02:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33108 invoked by uid 500); 29 Jun 2004 05:02:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33092 invoked by uid 99); 29 Jun 2004 05:02:11 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 22:02:09 -0700
Message-ID: <20040629050134.90959.qmail@web12707.mail.yahoo.com>
Received: from [211.95.204.101] by web12707.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 22:01:34 PDT
Date: Mon, 28 Jun 2004 22:01:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Running OutOfMemory while optimizing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <DIENLCKNNDCDMPIEODNMMEKNJBAA.mflorence@airsmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Mark,

Tough situation.  I hate when things like this happen on production :(.
 You are not mentioning what you are using for various IndexWriter
parameters.  You may be able to get this working by tweaking them (see
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWriter.html#field_summary).
Hm, now that I think about it, I am not sure if those are considered
during index optimization.  I'll try checking the sources later.

Otis

--- Mark Florence <mflorence@airsmail.com> wrote:
> Hi, I'm using Lucene to index ~3.5M documents, over about 50 fields.
> The Lucene
> index itself is ~10.5GB, spread over ~7,000 files. Some of these
> files are
> "large" -- that is, several PRX files are ~1.5GB.
> 
> Lucene runs on a dedicated server (Linux on a 1Ghz Dell, with 1GB
> RAM). Clients
> on other machines use RMI to perform reads / writes. Each night the
> server
> automatically performs an optimize.
> 
> The problem is that the optimize now dies with an OutOfMemory
> exception, even
> when the JVM heap size is set to its maximum of 2GB. I need to
> optimize, because
> as the number of Lucene files grows, search performance becomes
> unacceptable.
> 
> Search performance is also adversely affected because I've had to
> effectively
> single-thread reads and writes. I was using a simple read / write
> lock
> mechanism, allowing multiple readers to simultaneously search, but
> now more than
> 3-4 simultaneous readers will also cause an OutOfMemory condition.
> Searches can
> take as long as 30-40 seconds, and with single-threading, that's
> crippling the
> main client application.
> 
> Needless to say, the Lucene index is mission-critical, and must run
> 24/7.
> 
> I've seen other posts along this same vein, but no definite
> consensus. Is my
> problem simply inadequate hardware? Should I run on a 64-bit
> platform, where I
> can allocate a Java heap of > 2GB?
> 
> Or could there be something fundamentally "wrong" with my index? I
> should add
> that I've just spent about a week (!!) rebuilding from scratch, over
> all 3.5M
> documents.
> 
> -- Many thanks for any help! Mark Florence
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8950-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 05:05:55 2004
Return-Path: <lucene-user-return-8950-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69096 invoked from network); 29 Jun 2004 05:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 05:05:55 -0000
Received: (qmail 42343 invoked by uid 500); 29 Jun 2004 05:06:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42264 invoked by uid 500); 29 Jun 2004 05:06:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42142 invoked by uid 99); 29 Jun 2004 05:06:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Mon, 28 Jun 2004 22:06:00 -0700
Message-ID: <20040629050524.40679.qmail@web12708.mail.yahoo.com>
Received: from [211.95.204.101] by web12708.mail.yahoo.com via HTTP; Mon, 28 Jun 2004 22:05:24 PDT
Date: Mon, 28 Jun 2004 22:05:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: When will Lucene 1.4
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIMENGCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Answers inlined...

--- Karthik N S <karthik@controlnet.co.in> wrote:
> 
> Hey
> Dev -Guys
> 
> First Apologies for the Question  [ Intentionally did not wanted to 
> disrupt
> the proceesings]
> 
> 
> 1) When will LUCENE1.4 - final  be released

We haven't discussed this yet.  Probably not until the Fall.

> 2) Will it contain lot's of featured Examples  (lucene1.3-final does
> not have many of features based examples)

Probably no more examples than there are now, unless somebody
contributes them.  However, there will be a Lucene book in the Fall.

> 3) Will the Furture releases be synchronized with releases of J2DK
> (since every new version of J2SDK is released 6 months)

Lucene's releases are not tied to Java releases in any way.

> [ The major Concern for our Organization, since we plan to move our
> Code
> from lucene1.3 final to 1.4 final ]

I would suggest you just use 1.4RC3 for now.  The API is not likely to
change between RC3 and the final release, and the code is pretty stable
and bug-free (that is - same bugs are in 1.3, nothing new that I can
recall at the moment).

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8951-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 07:55:18 2004
Return-Path: <lucene-user-return-8951-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50503 invoked from network); 29 Jun 2004 07:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 07:55:18 -0000
Received: (qmail 66528 invoked by uid 500); 29 Jun 2004 07:55:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66354 invoked by uid 500); 29 Jun 2004 07:55:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66243 invoked by uid 99); 29 Jun 2004 07:55:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 00:55:26 -0700
Message-Id: <200406290753.i5T7rHl12252@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: best ways of using IndexSearcher
Date: Tue, 29 Jun 2004 17:55:39 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <20040629045128.89237.qmail@web12707.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis,

Thanks for the advice.  When you say "This stuff is not really CPU
intensive" are you refering to the search itself or something else?  In my
experience the search tends to be ultimately bounded by CPU.

Anson

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Tuesday, June 29, 2004 2:51 PM
To: Lucene Users List
Subject: Re: best ways of using IndexSearcher

Anson,

Use a single instance of IndexSearcher and, if you want to always 'see'
even the latest index changes (deletes and adds since you opened the
IndexSearcher) make sure to re-create the IndexSearcher when you detect
that the index version has changed (see
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReade
r.html#getCurrentVersion(org.apache.lucene.store.Directory))

When you get the new IndexSearcher, leave the old instance alone - let
the GC take care of it, and don't call close() on it, in case something
in your application is still using that instance.

This stuff is not really CPU intensive.  Disk I/O tends to be the
bottleneck.  If you are working with multiple indices, spread them over
multiple disks (not just partitions, real disks), if you can.

Otis


--- Anson Lau <alau@fulfil-net.com> wrote:
> Hi Guys,
> 
> What's the recommended way of using IndexSearcher? Should
> IndexSearcher be a
> singleton or pooled?  Would pooling provide a more scalable solution
> by
> allowing you to decide how many IndexSearcher to use based on say how
> many
> CPU u have on ur server?
> 
> Thanks,
> 
> Anson


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8952-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 08:22:41 2004
Return-Path: <lucene-user-return-8952-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62790 invoked from network); 29 Jun 2004 08:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 08:22:41 -0000
Received: (qmail 32924 invoked by uid 500); 29 Jun 2004 08:22:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32610 invoked by uid 500); 29 Jun 2004 08:22:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31862 invoked by uid 99); 29 Jun 2004 08:22:07 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received: from [62.52.71.32] (HELO mx1.bertelsmann.de) (62.52.71.32)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 01:22:05 -0700
Received: by mx1.bertelsmann.de with Internet Mail Service (5.5.2657.72)
	id <N5XNTCA4>; Tue, 29 Jun 2004 10:21:20 +0200
Message-ID: <69D276452CD2904980D5B6AC33C9BE170180D29B@gtlbmlexs0006.bagmail.net>
From: Wolf-Dietrich.Materna@empolis.com
To: lucene-user@jakarta.apache.org
Subject: AW: Do we really need CJKAnalyzer to search japanese characters
Date: Tue, 29 Jun 2004 10:21:47 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="GB2312"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Praveen Peddi [mailto:ppeddi@contextmedia.com] wrote:
> You will have to excuse me if the question looks dumb ;)
Note: I don't speak chinese or japanese at all, but I talked
with expects about this topic some times ago.

> I didn't use CJKAnalyzer and I could still search japanese =
characters.
> Actually I used it first but then I thought of testing with
> just the standard analyzer. It worked with standard analyzer also.
Usally there are no word delimiters in japanese and chinese text,
so tokenization is a more difficult than european languages.

> I was able to search the metadata of our objects that has
> chinese and japanese characters.
Maybe the metadata contains spaces or other delimiters, so the standard
analyser could split it into words. But this is an exception.

> I think lucene is internally storing unicode characters. So
> should it matter if its standard analyzer or CJK analyzer?
The problem is how to split a chinese or japanese text into word, e.g.
=B1=BE=B3=F5=D7=D3=CE=E7=BEQ is a chinese word and means "prime =
meridian".
=B2=BC=C0=B5=CB=B9=CF=BF=B9=C8=B9=FA=BC=D2=B9=AB=D4=B0 is a phrase and =
means "public park of bulasi xiagu",
it should be splitted into: =B2=BC=C0=B5=CB=B9(bulasi), =CF=BF=B9=C8 =
(glen), =B9=FA=BC=D2 (nation ->
public)
and =B9=AB=D4=B0 (parc).

> When do we have to use CJKAnalyzer really?
You need it for both languages (unless you are using a better =
solution).
A chinese (or japanese kanji) character could be a single word or a =
part of
it.
The meaning depends on the context: There is a kanji that means "tree",
the same characters repeated twice means "grove" and three times means
"forest"/"wood".
(I hope, I remember correctly). Tokenization is not an easy task.

There are tools, e.g. "linguistic platform" by Inxight, that are able =
to
perform word
segmentation by analysing the text using knowledge about grammar, but =
they
are commercial.

A more simple solution is to split each input into sequences of two =
and/or
three letters.
Note this is much better than to split it into single characters, =
because a
single character
could be a part of a word with a different meaning. You are losing to =
much
precision too.
Image what happens if you split an english text into single letters and
search
for letters instead of words.
CJKAnalyzer is probaly not perfect, but the developer is a native =
chinese
speaker,
so I'm sure, that he knows how to deal these problems.
Regards,
	Wolf-Dietrich Materna

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8953-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 08:58:57 2004
Return-Path: <lucene-user-return-8953-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81924 invoked from network); 29 Jun 2004 08:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 08:58:57 -0000
Received: (qmail 32559 invoked by uid 500); 29 Jun 2004 08:59:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32386 invoked by uid 500); 29 Jun 2004 08:59:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32180 invoked by uid 99); 29 Jun 2004 08:59:00 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [217.169.20.17] (HELO smtp.aaisp.net.uk) (217.169.20.17)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 01:58:58 -0700
Received: from fluffy.torchboxapps.com ([81.187.40.70])
	by smtp.aaisp.net.uk with esmtp (Exim 4.34)
	id 1BfERU-0000Tu-25
	for lucene-user@jakarta.apache.org; Tue, 29 Jun 2004 09:58:16 +0100
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchboxapps.com with esmtp (Exim 4.32)
	id 1BfERP-0007zu-MN
	for lucene-user@jakarta.apache.org; Tue, 29 Jun 2004 09:58:12 +0100
Date: Tue, 29 Jun 2004 09:57:33 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PDFBox Issue
In-Reply-To: <6.1.1.1.0.20040628180005.01ba2460@localhost>
Message-ID: <Pine.LNX.4.44.0406290953340.1673-100000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Score: -101.0 (---------------------------------------------------)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 28 Jun 2004, Don Vaillancourt wrote:
> I know that this is a Lucene list but wanted to know if any of you have 
> gotten this error before using PDFBox?

It's commonly caused by mis-matched versions of Log4J. Between two 
versions (I think 1.2 and 1.3), a few of the method signatures changed. If 
you try and call one version with the signatures of the other, you hit 
this problem. IIRC, PDFBox requires 1.3

You'll probably either have to upgrade your app to use the newer Log4J, or 
recompile PDFBox against the older one.
 
Nick


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8954-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:15:01 2004
Return-Path: <lucene-user-return-8954-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50367 invoked from network); 29 Jun 2004 11:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:15:01 -0000
Received: (qmail 64400 invoked by uid 500); 29 Jun 2004 11:14:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64187 invoked by uid 500); 29 Jun 2004 11:14:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64039 invoked by uid 99); 29 Jun 2004 11:14:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_80_90,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 04:14:35 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5TBEU213788
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 06:14:31 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 16:45:16 +0530
Message-ID: <017c01c45dc9$cd285a40$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: hits remove
Date: Tue, 29 Jun 2004 16:41:18 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0178_01C45DF7.E6CFCD60"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0178_01C45DF7.E6CFCD60
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi All,

Is it possible to remove a document from the hits object once it has been
used and displayed to the user?


Regards,
Niraj

------=_NextPart_000_0178_01C45DF7.E6CFCD60--



From lucene-user-return-8955-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:24:15 2004
Return-Path: <lucene-user-return-8955-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56212 invoked from network); 29 Jun 2004 11:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:24:15 -0000
Received: (qmail 86224 invoked by uid 500); 29 Jun 2004 11:24:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86147 invoked by uid 500); 29 Jun 2004 11:24:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86075 invoked by uid 99); 29 Jun 2004 11:24:00 -0000
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,HTML_20_30,HTML_BADTAG_00_10,HTML_MESSAGE,HTML_NONELEMENT_10_20
X-Spam-Check-By: apache.org
Received: from [66.218.94.79] (HELO web90108.mail.scd.yahoo.com) (66.218.94.79)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 04:23:57 -0700
Message-ID: <20040629112354.66405.qmail@web90108.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90108.mail.scd.yahoo.com via HTTP; Tue, 29 Jun 2004 04:23:54 PDT
Date: Tue, 29 Jun 2004 04:23:54 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: how to incorporate french stemmer in snowball?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040628154346.86501.qmail@web12707.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-295883055-1088508234=:66328"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-295883055-1088508234=:66328
Content-Type: text/plain; charset=us-ascii

Hi,
 
Well, thanks to Otis for the pointing me to the page of snowball but i'm still so dumb to get in on! 
 
I don't really know how to incorporate the french stemmer in to a snowball analyzer. 
 
Any sample code will be admired!
 
Thanks before hand!
 
Uddam

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
Uddam,

I can't tell with certainty whether you are aware of Snowball Analyzers
for Lucene or not. Take a look at Lucene Sandbox:
http://jakarta.apache.org/lucene/docs/lucene-sandbox/. You will see
Snowball Stemmers for Lucene contribution there.

That includes the French stemmer, so you shouldn't need to write any
new code.

Otis

--- uddam chukmol wrote:
> Hi all,
> 
> I am a newbie and having some problems with how snowball analyzer
> works. I want to index a collection of french documents. I have in my
> disposal the list of french stop words that would be a help for the
> french language stemmer. 
> 
> Does anyone have any experience with writing a snowball-based
> analyzer for french language? Any help and code sample will be
> appreciated? 
> 
> Thanks before hand!
> 
> Uddam
> 
> 
> ---------------------------------
> Do you Yahoo!?
> New and Improved Yahoo! Mail - 100MB free storage!


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
New and Improved Yahoo! Mail - 100MB free storage!
--0-295883055-1088508234=:66328--

From lucene-user-return-8956-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:32:23 2004
Return-Path: <lucene-user-return-8956-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61202 invoked from network); 29 Jun 2004 11:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:32:23 -0000
Received: (qmail 5061 invoked by uid 500); 29 Jun 2004 11:32:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4836 invoked by uid 500); 29 Jun 2004 11:32:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4655 invoked by uid 99); 29 Jun 2004 11:31:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [213.148.156.34] (HELO mail.smb-tec.com) (213.148.156.34)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 04:31:55 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.smb-tec.com (Postfix) with ESMTP id 0295B7A690
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 13:31:00 +0200 (CEST)
Received: from mail.smb-tec.com ([127.0.0.1])
 by localhost (mail [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 11075-06 for <lucene-user@jakarta.apache.org>;
 Tue, 29 Jun 2004 13:31:00 +0200 (CEST)
Received: from ASSP-nospam (localhost [127.0.0.1])
	by mail.smb-tec.com (Postfix) with ESMTP id 8F70B7A68F
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 13:31:00 +0200 (CEST)
Received: from 192.168.2.1 ([192.168.2.1] helo=david.softwarebuero.de) by
  ASSP-nospam ; 29 Jun 04 11:31:00 -0000
Message-ID: <142559876.1088508660571.JavaMail.dummy@smb-tec.com>
Date: Tue, 29 Jun 2004 13:31:00 +0200 (CEST)
From: Lars Martin <Lars.Martin@smb-tec.com>
To: lucene-user@jakarta.apache.org
Subject: return value of terms()
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Mailer: SMB Collab Module (http://www.smb-tec.com)
Content-Language: de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi.

Is it the normal behavior that IndexReader.terms( Term t ) still
returns Terms which are not any longer to be found in the index,
e.g. after removing the document containing these Terms?
I've removed nearly all documents from index but the terms() method
is still returning all terms.

  IndexReader indexReader = IndexReader.open( indexPath ); 
  indexReader.delete( docId );
  indexReader.close();
  ...
  IndexReader indexReader = IndexReader.open( indexPath );
  TermEnum enum = indexReader.terms( new Term( "body", "" ) );

Any hints? Regards, Lars
______________________________________________________________________
Lars Martin                             mailto:Lars.Martin@smb-tec.com
SMB GmbH                                        http://www.smb-tec.com
D-04347 Leipzig                                    Rohrteichstrasse 18
Tel: +49-(0)341-699 46 04                    Fax: +49-(0)341-699 47 04
Produkt-Manager Business Server BS1          Produkt-Manager CADDA.NET



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8957-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:32:46 2004
Return-Path: <lucene-user-return-8957-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61398 invoked from network); 29 Jun 2004 11:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:32:45 -0000
Received: (qmail 6155 invoked by uid 500); 29 Jun 2004 11:32:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6111 invoked by uid 500); 29 Jun 2004 11:32:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6078 invoked by uid 99); 29 Jun 2004 11:32:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 04:32:19 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062904321507851
 for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 04:32:15 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 29 Jun 2004 04:32:15 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 18C137AA9C2
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 04:32:07 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <017c01c45dc9$cd285a40$b101a8c0@emacmillan.edu>
References: <017c01c45dc9$cd285a40$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F1AEDF44-C9BF-11D8-BEAA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: hits remove
Date: Tue, 29 Jun 2004 04:32:03 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 29 Jun 2004 11:32:15.0736 (UTC) FILETIME=[BA875780:01C45DCC]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 29, 2004, at 4:11 AM, Niraj Alok wrote:
> Is it possible to remove a document from the hits object once it has 
> been
> used and displayed to the user?

Not currently.  By "remove" I presume you only mean remove from the 
internal cache, but not remove it from the list of matching documents, 
right?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8958-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:35:29 2004
Return-Path: <lucene-user-return-8958-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62872 invoked from network); 29 Jun 2004 11:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:35:28 -0000
Received: (qmail 15086 invoked by uid 500); 29 Jun 2004 11:35:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14914 invoked by uid 500); 29 Jun 2004 11:35:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14835 invoked by uid 99); 29 Jun 2004 11:35:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 04:35:12 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062904350807859
 for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 04:35:08 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 29 Jun 2004 04:35:09 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 9D1427AA9FF
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 04:35:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <20040629112354.66405.qmail@web90108.mail.scd.yahoo.com>
References: <20040629112354.66405.qmail@web90108.mail.scd.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <60DFAD8C-C9C0-11D8-BEAA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: how to incorporate french stemmer in snowball?
Date: Tue, 29 Jun 2004 04:35:10 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 29 Jun 2004 11:35:09.0048 (UTC) FILETIME=[21D4A780:01C45DCD]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 29, 2004, at 4:23 AM, uddam chukmol wrote:
> I don't really know how to incorporate the french stemmer in to a 
> snowball analyzer.
>
> Any sample code will be admired!

Here is a short example from our Lucene in Action book's code:

   public void testSpanish() throws Exception {
     Analyzer analyzer = new SnowballAnalyzer("Spanish");

     assertAnalyzesTo(analyzer,
         "algoritmos", new String[] {"algoritm"});
   }

Substitute "French" for "Spanish" and you should be in business, 
provided you've grabbed 'snowball' source code from the 
jakarta-lucene-sandbox CVS repository in the contributions/snowball 
area.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8959-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 11:47:10 2004
Return-Path: <lucene-user-return-8959-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67980 invoked from network); 29 Jun 2004 11:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 11:47:10 -0000
Received: (qmail 42945 invoked by uid 500); 29 Jun 2004 11:46:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42882 invoked by uid 500); 29 Jun 2004 11:46:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42856 invoked by uid 99); 29 Jun 2004 11:46:47 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 04:46:46 -0700
Message-ID: <20040629114641.82234.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.100] by web12702.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 04:46:41 PDT
Date: Tue, 29 Jun 2004 04:46:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: return value of terms()
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <142559876.1088508660571.JavaMail.dummy@smb-tec.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I would try using the delete(Term) method, to ensure all documents with
the given Term are removed:

   IndexReader indexReader = IndexReader.open( indexPath ); 
   indexReader.delete( new Term( "body", "YourTermHere" ) );
   indexReader.close();
   ...
   IndexReader indexReader = IndexReader.open( indexPath );
   TermEnum enum = indexReader.terms( new Term( "body", "" ) );

Something like that...

Otis

--- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> Hi.
> 
> Is it the normal behavior that IndexReader.terms( Term t ) still
> returns Terms which are not any longer to be found in the index,
> e.g. after removing the document containing these Terms?
> I've removed nearly all documents from index but the terms() method
> is still returning all terms.
> 
>   IndexReader indexReader = IndexReader.open( indexPath ); 
>   indexReader.delete( docId );
>   indexReader.close();
>   ...
>   IndexReader indexReader = IndexReader.open( indexPath );
>   TermEnum enum = indexReader.terms( new Term( "body", "" ) );
> 
> Any hints? Regards, Lars
>
______________________________________________________________________
> Lars Martin                            
> mailto:Lars.Martin@smb-tec.com
> SMB GmbH                                       
> http://www.smb-tec.com
> D-04347 Leipzig                                    Rohrteichstrasse
> 18
> Tel: +49-(0)341-699 46 04                    Fax: +49-(0)341-699 47
> 04
> Produkt-Manager Business Server BS1          Produkt-Manager
> CADDA.NET
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8960-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 12:14:01 2004
Return-Path: <lucene-user-return-8960-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78477 invoked from network); 29 Jun 2004 12:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 12:14:01 -0000
Received: (qmail 7575 invoked by uid 500); 29 Jun 2004 12:13:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7427 invoked by uid 500); 29 Jun 2004 12:13:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7375 invoked by uid 99); 29 Jun 2004 12:13:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 05:13:44 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062905134007994
 for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 05:13:40 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 29 Jun 2004 05:13:40 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id D92777AAADC
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 05:13:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIMENGCAAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIMENGCAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BA613ADC-C9C5-11D8-BEAA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: When will Lucene 1.4
Date: Tue, 29 Jun 2004 05:13:28 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 29 Jun 2004 12:13:40.0837 (UTC) FILETIME=[83C3A950:01C45DD2]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'll add a little bit to what Otis said....

On Jun 28, 2004, at 10:08 PM, Karthik N S wrote:
> 2) Will it contain lot's of featured Examples  (lucene1.3-final does 
> not
> have many of features based examples)

It has been my dream to really enhance the examples and initial 
experience users new to Lucene get when opening up a binary Lucene 
distribution.  I had hoped to do really beef up the example application 
(i.e. scrap it and create something much nicer, including a few useful 
applications) as our work on Lucene in Action.

Time has gotten away from us and in order to pragmatically get the book 
done sooner rather than later (and it's already much later than we'd 
like, but at least nicely timed with Lucene 1.4), the example overhaul 
has not been done.

However, all of the source code to our book will be freely available at 
Manning's website (http://www.manning.com/hatcher2) once the book is 
completely done.  When will that be?  Soon!  (that's the best I can 
estimate right now)  The examples we've developed include:

- A robust suite of JUnit tests that demonstrate many features of 
Lucene.  Some tests I've created have been added back to Lucene's own 
test suite where coverage did not already exist.

- A document handler framework, similar but richer than the 
DocumentHandler interface that is part of the 'ant' area of the sandbox 
repository.  This unifies indexing of Word, PDF, HTML, and XML 
documents with an extensible framework to add other handlers.

- A demo Swing application that looks like a cell phone interface which 
uses the WordNet database (except indexed by each words T9 equivalent 
representation) to rapidly look up words that match the numbers keyed 
in.

- A Google-like image search engine web interface (based on Tapestry) 
that I cobbled together this weekend to demonstrate at JavaOne in a few 
hours.

- Odds and ends that demonstrate computing term vector angles to do 
some rudimentary latent semantic analysis,  using custom geographic 
distance (based on the users location) sorting to order search results, 
an example of using JUnitPerf (contributed by Mike Clark himself) to 
benchmark Lucene performance and, for example, demonstrate issues that 
can happen when indexing dates using DateField when you really only 
care about month, day, and year, and probably a few other goodies I'm 
forgetting at the moment.

I will do my best to get this code packaged into a releasable state as 
soon as possible (by the end of July is the best I can promise) and 
made available prior to the book itself being available.  Again, the 
code for the book will be freely available, of course with the hope 
that it'd spark interest in purchasing a copy of the book itself.  
Where it fits, I'm fine with any of that code being added to Lucene or 
the sandbox too.

It is still my intention, once my work is complete with the book, to 
devote my free time to fleshing out a much nicer example suite to ship 
with Lucene.

> [ The major Concern for our Organization, since we plan to move our 
> Code
> from lucene1.3 final to 1.4 final ]

I too suggest that you go ahead and give the latest 1.4 RC release a 
try and base on that.  You will more than likely find it is as stable 
as 1.3 and if you run into any issues you can report them and get them 
fixed in 1.4 final.  The alternative is for you wait and base on 1.4 
final and that one undiscovered bug that you would have found earlier 
is now in the final release!  :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8961-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 12:20:19 2004
Return-Path: <lucene-user-return-8961-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82290 invoked from network); 29 Jun 2004 12:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 12:20:19 -0000
Received: (qmail 24295 invoked by uid 500); 29 Jun 2004 12:20:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24201 invoked by uid 500); 29 Jun 2004 12:20:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24159 invoked by uid 99); 29 Jun 2004 12:20:00 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=EXCUSE_3,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 05:19:57 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i5TCJp216042
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 07:19:51 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 17:47:14 +0530
Message-ID: <01a101c45dd2$75315860$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <017c01c45dc9$cd285a40$b101a8c0@emacmillan.edu> <F1AEDF44-C9BF-11D8-BEAA-000393A564E6@ehatchersolutions.com>
Subject: Re: hits remove
Date: Tue, 29 Jun 2004 17:43:09 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_019D_01C45E00.8AEF8360"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_019D_01C45E00.8AEF8360
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

No, remove from the list of matching documents itself. Once I have used one
of the hits.doc, I want that doc itself to be removed from hits so that when
I do hits.doc again for the same hit number, it should return me null.

Is it possible?

Regards,
Niraj
----- Original Message -----
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, June 29, 2004 5:02 PM
Subject: Re: hits remove


> On Jun 29, 2004, at 4:11 AM, Niraj Alok wrote:
> > Is it possible to remove a document from the hits object once it has
> > been
> > used and displayed to the user?
>
> Not currently.  By "remove" I presume you only mean remove from the
> internal cache, but not remove it from the list of matching documents,
> right?
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_019D_01C45E00.8AEF8360--



From lucene-user-return-8962-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 12:22:33 2004
Return-Path: <lucene-user-return-8962-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83307 invoked from network); 29 Jun 2004 12:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 12:22:33 -0000
Received: (qmail 31192 invoked by uid 500); 29 Jun 2004 12:22:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31134 invoked by uid 500); 29 Jun 2004 12:22:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31114 invoked by uid 99); 29 Jun 2004 12:22:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 05:22:24 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004062905222008000
 for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 05:22:20 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 29 Jun 2004 05:22:20 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 2CA507AABB6
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 05:22:23 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40E0B563.8070601@Sun.COM>
References: <40E0B563.8070601@Sun.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F8AE4E49-C9C6-11D8-BEAA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using Highlighter in web Demo
Date: Tue, 29 Jun 2004 05:22:22 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 29 Jun 2004 12:22:20.0568 (UTC) FILETIME=[B98C5180:01C45DD3]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> Is it possible to use highlighter successfully in the demos the web 
> demo to be specific. Has any one tried out there? If so can they 
> explain me how to go about it any code sample is really  very 
> appreciated.

Straight from Lucene in Action:

public class HighlightIt {
   private static final String text =
       "Contrary to popular belief, Lorem Ipsum is" +
       " not simply random text. It has roots in a piece of" +
       " classical Latin literature from 45 BC, making it over" +
       " 2000 years old. Richard McClintock, a Latin professor" +
       " at Hampden-Sydney College in Virginia, looked up one" +
       " of the more obscure Latin words, consectetur, from" +
       " a Lorem Ipsum passage, and going through the cites" +
       " of the word in classical literature, discovered the" +
       " undoubtable source. Lorem Ipsum comes from sections" +
       " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
       " Malorum\" (The Extremes of Good and Evil) by Cicero," +
       " written in 45 BC. This book is a treatise on the" +
       " theory of ethics, very popular during the" +
       " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
       " ipsum dolor sit amet..\", comes from a line in" +
       " section 1.10.32.";  // from http://www.lipsum.com/

   public static void main(String[] args) throws IOException {
     String filename = args[0];

     if (filename == null) {
       System.err.println("Usage: HighlightIt <filename>");
       System.exit(-1);
     }

//    TermQuery query = new TermQuery(new Term("f", "ipsum"));
     PhraseQuery query = new PhraseQuery();
     query.add(new Term("f", "lorem"));
     query.add(new Term("f", "ipsum"));
     QueryScorer scorer = new QueryScorer(query);
     SimpleHTMLFormatter formatter =
         new SimpleHTMLFormatter("<span class=\"highlight\">",
             "</span>");
     Highlighter highlighter = new Highlighter(formatter, scorer);
     Fragmenter fragmenter = new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream = new StandardAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result =
         highlighter.getBestFragments(tokenStream, text, 5, "...");

     FileWriter writer = new FileWriter(filename);
     writer.write("<html>");
     writer.write("<style>\n" +
         ".highlight {\n" +
         " background: yellow;\n" +
         "}\n" +
         "</style>");
     writer.write("<body>");
     writer.write(result);
     writer.write("</body></html>");
     writer.close();
   }
}

I just added the PhraseQuery in there instead of the TermQuery that is 
commented out.  Highlighter works well with phrases also (although 
highlights each term individually, not the breadth of the phrase by 
itself).  The above code runs like it says in the usage statement, give 
it a filename to save an HTML file that shows the terms highlighted in 
yellow.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8963-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 12:53:34 2004
Return-Path: <lucene-user-return-8963-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97637 invoked from network); 29 Jun 2004 12:53:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 12:53:29 -0000
Received: (qmail 17786 invoked by uid 500); 29 Jun 2004 12:53:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17697 invoked by uid 500); 29 Jun 2004 12:53:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17672 invoked by uid 99); 29 Jun 2004 12:53:15 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,EXCUSE_3
X-Spam-Check-By: apache.org
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 05:53:13 -0700
Message-ID: <20040629125308.16331.qmail@web12701.mail.yahoo.com>
Received: from [211.95.204.100] by web12701.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 05:53:08 PDT
Date: Tue, 29 Jun 2004 05:53:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: hits remove
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <01a101c45dd2$75315860$b101a8c0@emacmillan.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

No, Hits exposes a read-only API.
(I looked at
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Hits.html)

You could easily implement this in your API by remembering doc Ids that
you looped through, and displaying a doc only if its Id has not already
been seen.

Otis

--- Niraj Alok <niraj@emacmillan.com> wrote:
> No, remove from the list of matching documents itself. Once I have
> used one
> of the hits.doc, I want that doc itself to be removed from hits so
> that when
> I do hits.doc again for the same hit number, it should return me
> null.
> 
> Is it possible?
> 
> Regards,
> Niraj
> ----- Original Message -----
> From: "Erik Hatcher" <erik@ehatchersolutions.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, June 29, 2004 5:02 PM
> Subject: Re: hits remove
> 
> 
> > On Jun 29, 2004, at 4:11 AM, Niraj Alok wrote:
> > > Is it possible to remove a document from the hits object once it
> has
> > > been
> > > used and displayed to the user?
> >
> > Not currently.  By "remove" I presume you only mean remove from the
> > internal cache, but not remove it from the list of matching
> documents,
> > right?
> >
> > Erik
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8964-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:01:45 2004
Return-Path: <lucene-user-return-8964-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1618 invoked from network); 29 Jun 2004 13:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:01:45 -0000
Received: (qmail 38862 invoked by uid 500); 29 Jun 2004 13:01:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38783 invoked by uid 500); 29 Jun 2004 13:01:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38724 invoked by uid 99); 29 Jun 2004 13:01:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [213.56.31.48] (HELO smtp11.clb.oleane.net) (213.56.31.48)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 06:01:35 -0700
Received: from teck ([217.167.130.37]) (authenticated)
	by smtp11.clb.oleane.net with ESMTP id i5TD1QGV005574
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 15:01:26 +0200
Message-ID: <003201c45dd9$7841a170$6a0010ac@teck>
From: "Julien Nioche" <Julien.Nioche@lingway.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <8f8e14c40406251124102752ba@mail.gmail.com> <007001c45ce6$9412ccb0$6a0010ac@teck>
Subject: Re: Optimizing for long queries?
Date: Tue, 29 Jun 2004 15:03:25 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I ran some tests changing TermInfosWriter.INDEX_INTERVAL to 16.
On my application (which does a lot on top of lucene - including SQL
transactions and so on) I won 10% percent time.
I suppose this could be a bigger improvements in other applications, because
the search with Lucene is not 100% of my application.

The index used for this test is 720 MB - FSDirectory on Fedora 1
the .tii file is 3398 Kb in the modified version against 488Kb in the
original (INDEX_INTERVAL=128)

Has anyone tried changing this value? Do you get similar results?

Julien

----- Original Message ----- 
From: "Julien Nioche" <Julien.Nioche@lingway.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 28, 2004 10:04 AM
Subject: Re: Optimizing for long queries?


> Hello Drew,
>
> I don't think it's in the FAQ.
>
> 1 - What you could do is to sort your query terms by ascending alphabetic
> order. In my case it improved a little bit the performance. It could be
> interesting to know how it worked in your case.
>
> 2- Another solution is to play with TermInfosWriter.INDEX_INTERVAL at
> indexation time. I quote Doug :
>
> "..., try reducing TermInfosWriter.INDEX_INTERVAL.  You'll
> have to re-create your indexes each time you change this constant.  You
> might try a value like 16.  This would keep the number of terms in
> memory from being too huge (1 of 16 terms), but would reduce the average
> number scanned from 64 to 8, which would be substantial.  Tell me how
> this works.  If it makes a big difference, then perhaps we should make
> this parameter more easily changeable."
>
> Have you used a profiler on your application? This could be useful to spot
> possible improvments.
>
>
> ----- Original Message ----- 
> From: "Drew Farris" <drew.farris@gmail.com>
> To: <lucene-user@jakarta.apache.org>
> Sent: Friday, June 25, 2004 8:24 PM
> Subject: Optimizing for long queries?
>
>
> > Apologies if this is a FAQ, but I didn't have much luck searching the
> > list archives for answers on this subject:
> >
> > I'm using Lucene in a context where we have frequently have queries
> > that search for as many as 30-50 terms in a single field. Does anyone
> > have any thoughts concerning ways optimize Lucene for queries of these
> > lengths?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8965-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:04:53 2004
Return-Path: <lucene-user-return-8965-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3073 invoked from network); 29 Jun 2004 13:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:04:53 -0000
Received: (qmail 49538 invoked by uid 500); 29 Jun 2004 13:04:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49505 invoked by uid 500); 29 Jun 2004 13:04:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49480 invoked by uid 99); 29 Jun 2004 13:04:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [198.87.233.73] (HELO yoda.browsermedia.com) (198.87.233.73)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 06:04:40 -0700
Received: from project.browsermedia.com ([209.190.230.4] helo=steveb)
	by yoda.browsermedia.com with asmtp (Exim 4.34 #1 (OpenNA Linux))
	id 1BfIHr-0007l0-4w
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 09:04:35 -0400
Message-ID: <00e601c45dd9$5a246ec0$fe00a8c0@BROWSERMEDIA.com>
From: "steve" <steve@browsermedia.com>
To: "lucene-user" <lucene-user@jakarta.apache.org>
Subject: How to get unique Hits using Multisearcher
Date: Tue, 29 Jun 2004 09:02:36 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Spam-Score: 0.0 (/)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I saw a similar - but not identical - question asked earlier in the archive
but no answer.

I have 2 (or more)  indexes of web url's with intersecting hits. The url's
are defined as keys in case that makes a difference. I am using
MultiSearcher to search multiple indexes, but I get hits repeated if they
exist in both indexes. I am trying to get a set of all unique url's among
the indexes.

Can MultiSearcher be told not to repeat hits with duplicate "key" values? Or
does it already do this indicating my Doc's are not defined properly? As a
last resort, can someone recommend an efficient method to convert the Vector
of hitDocs into a Set after the fact?

FYI - as a test, I used MultiSearcher to search one index and it found 45
hits. I then gave MultiSearher 2 Searchers pointing to the same index, and
it found 90 hits. From this I concluded that MultiSearher merely adds hits
to the Vector rather than looking for duplicates. Is that right?

TIA,

Steve B.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8966-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:11:42 2004
Return-Path: <lucene-user-return-8966-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6298 invoked from network); 29 Jun 2004 13:11:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:11:42 -0000
Received: (qmail 69099 invoked by uid 500); 29 Jun 2004 13:10:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69024 invoked by uid 500); 29 Jun 2004 13:10:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68932 invoked by uid 99); 29 Jun 2004 13:10:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:10:48 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I02NU800.AJX for <lucene-user@jakarta.apache.org>; Tue,
          29 Jun 2004 18:52:56 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Using Highlighter in web Demo
Date: Tue, 29 Jun 2004 18:50:01 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOENKCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <F8AE4E49-C9C6-11D8-BEAA-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello Developer's

   I am NOT able to get the API for the same [1.3-final or 1.4rc4 ] for
import  details.
    QueryScorer scorer = new QueryScorer(query);


just was curious to Compile and execute the same...:)



Karthik







-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tuesday, June 29, 2004 5:52 PM
To: Lucene Users List
Subject: Re: Using Highlighter in web Demo


On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> Is it possible to use highlighter successfully in the demos the web
> demo to be specific. Has any one tried out there? If so can they
> explain me how to go about it any code sample is really  very
> appreciated.

Straight from Lucene in Action:

public class HighlightIt {
   private static final String text =
       "Contrary to popular belief, Lorem Ipsum is" +
       " not simply random text. It has roots in a piece of" +
       " classical Latin literature from 45 BC, making it over" +
       " 2000 years old. Richard McClintock, a Latin professor" +
       " at Hampden-Sydney College in Virginia, looked up one" +
       " of the more obscure Latin words, consectetur, from" +
       " a Lorem Ipsum passage, and going through the cites" +
       " of the word in classical literature, discovered the" +
       " undoubtable source. Lorem Ipsum comes from sections" +
       " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
       " Malorum\" (The Extremes of Good and Evil) by Cicero," +
       " written in 45 BC. This book is a treatise on the" +
       " theory of ethics, very popular during the" +
       " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
       " ipsum dolor sit amet..\", comes from a line in" +
       " section 1.10.32.";  // from http://www.lipsum.com/

   public static void main(String[] args) throws IOException {
     String filename = args[0];

     if (filename == null) {
       System.err.println("Usage: HighlightIt <filename>");
       System.exit(-1);
     }

//    TermQuery query = new TermQuery(new Term("f", "ipsum"));
     PhraseQuery query = new PhraseQuery();
     query.add(new Term("f", "lorem"));
     query.add(new Term("f", "ipsum"));
     QueryScorer scorer = new QueryScorer(query);
     SimpleHTMLFormatter formatter =
         new SimpleHTMLFormatter("<span class=\"highlight\">",
             "</span>");
     Highlighter highlighter = new Highlighter(formatter, scorer);
     Fragmenter fragmenter = new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream = new StandardAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result =
         highlighter.getBestFragments(tokenStream, text, 5, "...");

     FileWriter writer = new FileWriter(filename);
     writer.write("<html>");
     writer.write("<style>\n" +
         ".highlight {\n" +
         " background: yellow;\n" +
         "}\n" +
         "</style>");
     writer.write("<body>");
     writer.write(result);
     writer.write("</body></html>");
     writer.close();
   }
}

I just added the PhraseQuery in there instead of the TermQuery that is
commented out.  Highlighter works well with phrases also (although
highlights each term individually, not the breadth of the phrase by
itself).  The above code runs like it says in the usage statement, give
it a filename to save an HTML file that shows the terms highlighted in
yellow.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8967-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:25:10 2004
Return-Path: <lucene-user-return-8967-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21850 invoked from network); 29 Jun 2004 13:25:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:25:10 -0000
Received: (qmail 12588 invoked by uid 500); 29 Jun 2004 13:24:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12477 invoked by uid 500); 29 Jun 2004 13:24:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12344 invoked by uid 99); 29 Jun 2004 13:24:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:24:41 -0700
Message-ID: <20040629132432.13254.qmail@web12706.mail.yahoo.com>
Received: from [211.95.204.101] by web12706.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 06:24:32 PDT
Date: Tue, 29 Jun 2004 06:24:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Highlighter in web Demo
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIOENKCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Karthik, I don't understand your question.
Sorting was only added in 1.4* versions, if I recall correctly.  There
was no sorting in 1.3.

Otis


--- Karthik N S <karthik@controlnet.co.in> wrote:
> 
> Hello Developer's
> 
>    I am NOT able to get the API for the same [1.3-final or 1.4rc4 ]
> for
> import  details.
>     QueryScorer scorer = new QueryScorer(query);
> 
> 
> just was curious to Compile and execute the same...:)
> 
> 
> 
> Karthik
> 
> 
> 
> 
> 
> 
> 
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, June 29, 2004 5:52 PM
> To: Lucene Users List
> Subject: Re: Using Highlighter in web Demo
> 
> 
> On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> > Is it possible to use highlighter successfully in the demos the web
> > demo to be specific. Has any one tried out there? If so can they
> > explain me how to go about it any code sample is really  very
> > appreciated.
> 
> Straight from Lucene in Action:
> 
> public class HighlightIt {
>    private static final String text =
>        "Contrary to popular belief, Lorem Ipsum is" +
>        " not simply random text. It has roots in a piece of" +
>        " classical Latin literature from 45 BC, making it over" +
>        " 2000 years old. Richard McClintock, a Latin professor" +
>        " at Hampden-Sydney College in Virginia, looked up one" +
>        " of the more obscure Latin words, consectetur, from" +
>        " a Lorem Ipsum passage, and going through the cites" +
>        " of the word in classical literature, discovered the" +
>        " undoubtable source. Lorem Ipsum comes from sections" +
>        " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
>        " Malorum\" (The Extremes of Good and Evil) by Cicero," +
>        " written in 45 BC. This book is a treatise on the" +
>        " theory of ethics, very popular during the" +
>        " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
>        " ipsum dolor sit amet..\", comes from a line in" +
>        " section 1.10.32.";  // from http://www.lipsum.com/
> 
>    public static void main(String[] args) throws IOException {
>      String filename = args[0];
> 
>      if (filename == null) {
>        System.err.println("Usage: HighlightIt <filename>");
>        System.exit(-1);
>      }
> 
> //    TermQuery query = new TermQuery(new Term("f", "ipsum"));
>      PhraseQuery query = new PhraseQuery();
>      query.add(new Term("f", "lorem"));
>      query.add(new Term("f", "ipsum"));
>      QueryScorer scorer = new QueryScorer(query);
>      SimpleHTMLFormatter formatter =
>          new SimpleHTMLFormatter("<span class=\"highlight\">",
>              "</span>");
>      Highlighter highlighter = new Highlighter(formatter, scorer);
>      Fragmenter fragmenter = new SimpleFragmenter(50);
>      highlighter.setTextFragmenter(fragmenter);
> 
>      TokenStream tokenStream = new StandardAnalyzer()
>          .tokenStream("f", new StringReader(text));
> 
>      String result =
>          highlighter.getBestFragments(tokenStream, text, 5, "...");
> 
>      FileWriter writer = new FileWriter(filename);
>      writer.write("<html>");
>      writer.write("<style>\n" +
>          ".highlight {\n" +
>          " background: yellow;\n" +
>          "}\n" +
>          "</style>");
>      writer.write("<body>");
>      writer.write(result);
>      writer.write("</body></html>");
>      writer.close();
>    }
> }
> 
> I just added the PhraseQuery in there instead of the TermQuery that
> is
> commented out.  Highlighter works well with phrases also (although
> highlights each term individually, not the breadth of the phrase by
> itself).  The above code runs like it says in the usage statement,
> give
> it a filename to save an HTML file that shows the terms highlighted
> in
> yellow.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8968-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:29:40 2004
Return-Path: <lucene-user-return-8968-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23784 invoked from network); 29 Jun 2004 13:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:29:39 -0000
Received: (qmail 26929 invoked by uid 500); 29 Jun 2004 13:29:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26789 invoked by uid 500); 29 Jun 2004 13:29:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26675 invoked by uid 99); 29 Jun 2004 13:29:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:29:09 -0700
Message-ID: <20040629132902.22023.qmail@web12701.mail.yahoo.com>
Received: from [211.95.204.101] by web12701.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 06:29:02 PDT
Date: Tue, 29 Jun 2004 06:29:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to get unique Hits using Multisearcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <00e601c45dd9$5a246ec0$fe00a8c0@BROWSERMEDIA.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Steve,

Answer to your last question: that's right.
Lucene does not know what field you use as your PK (unique document
identifier), so it cannot merge hits and remove duplicates.

As for converting Vector to Set.... HashSet set = new HashSet();
set.addAll(YourVectorInstance);
Does that work for you?  Vector isA Collection.

Otis



--- steve <steve@browsermedia.com> wrote:
> I saw a similar - but not identical - question asked earlier in the
> archive
> but no answer.
> 
> I have 2 (or more)  indexes of web url's with intersecting hits. The
> url's
> are defined as keys in case that makes a difference. I am using
> MultiSearcher to search multiple indexes, but I get hits repeated if
> they
> exist in both indexes. I am trying to get a set of all unique url's
> among
> the indexes.
> 
> Can MultiSearcher be told not to repeat hits with duplicate "key"
> values? Or
> does it already do this indicating my Doc's are not defined properly?
> As a
> last resort, can someone recommend an efficient method to convert the
> Vector
> of hitDocs into a Set after the fact?
> 
> FYI - as a test, I used MultiSearcher to search one index and it
> found 45
> hits. I then gave MultiSearher 2 Searchers pointing to the same
> index, and
> it found 90 hits. From this I concluded that MultiSearher merely adds
> hits
> to the Vector rather than looking for duplicates. Is that right?
> 
> TIA,
> 
> Steve B.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8969-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:34:14 2004
Return-Path: <lucene-user-return-8969-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26838 invoked from network); 29 Jun 2004 13:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:34:13 -0000
Received: (qmail 43969 invoked by uid 500); 29 Jun 2004 13:34:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43739 invoked by uid 500); 29 Jun 2004 13:34:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43673 invoked by uid 99); 29 Jun 2004 13:34:00 -0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=DATE_IN_PAST_03_06,DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,RCVD_IN_NJABL_PROXY,RCVD_IN_RSL,RCVD_IN_SORBS_HTTP
X-Spam-Check-By: apache.org
Received: from [203.199.122.31] (HELO web8301.mail.in.yahoo.com) (203.199.122.31)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:33:58 -0700
Message-ID: <20040629090845.41616.qmail@web8301.mail.in.yahoo.com>
Received: from [210.7.75.237] by web8301.mail.in.yahoo.com via HTTP; Tue, 29 Jun 2004 10:08:45 BST
Date: Tue, 29 Jun 2004 10:08:45 +0100 (BST)
From: =?iso-8859-1?q?Jayant=20Kumar?= <jayantlists@yahoo.co.in>
Subject: Is there any way to Collect all the searched documents at once?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!!

Is there any way to fetch the fields of the searched
documents at once rather than looping through the
found documents one by one....because it consumes lots
of time and time increases by magnitude if the no. of
documents found are more.

This is how I am fetching the found documents ..

count=1500000 (no. of documents found) 

for(int i=0 ; i < count;i++ )
                        {
                                Document doc =
hits.doc(i);
                                fields[i] =
Long.parseLong(doc.get("FIELD"));
                        }

This takes around 2.5 minutes  for fetching 1500000
records which is unacceptable.

Regards
Karan





		
__________________________________
Do you Yahoo!?
New and Improved Yahoo! Mail - Send 10MB messages!
http://promotions.yahoo.com/new_mail 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8970-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:48:10 2004
Return-Path: <lucene-user-return-8970-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33230 invoked from network); 29 Jun 2004 13:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:48:10 -0000
Received: (qmail 82090 invoked by uid 500); 29 Jun 2004 13:48:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81947 invoked by uid 500); 29 Jun 2004 13:47:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81788 invoked by uid 99); 29 Jun 2004 13:47:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [213.148.156.34] (HELO mail.smb-tec.com) (213.148.156.34)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 06:47:49 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.smb-tec.com (Postfix) with ESMTP id 20BA67A690
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 15:46:48 +0200 (CEST)
Received: from mail.smb-tec.com ([127.0.0.1])
 by localhost (mail [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 11798-04 for <lucene-user@jakarta.apache.org>;
 Tue, 29 Jun 2004 15:46:48 +0200 (CEST)
Received: from ASSP-nospam (localhost [127.0.0.1])
	by mail.smb-tec.com (Postfix) with ESMTP id EDD237A68F
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 15:46:47 +0200 (CEST)
Received: from 192.168.2.1 ([192.168.2.1] helo=david.softwarebuero.de) by
  ASSP-nospam ; 29 Jun 04 13:46:47 -0000
Message-ID: <143088710.1088516807953.JavaMail.dummy@smb-tec.com>
Date: Tue, 29 Jun 2004 15:46:47 +0200 (CEST)
From: Lars Martin <Lars.Martin@smb-tec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: return value of terms()
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Mailer: SMB Collab Module (http://www.smb-tec.com)
Content-Language: de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

-----Ursprngliche Nachricht-----
Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Gesendet am: 29. Jun 2004, 13:46:41

> I would try using the delete(Term) method, to ensure all documents
> with the given Term are removed:
> 
>    IndexReader indexReader = IndexReader.open( indexPath ); 
>    indexReader.delete( new Term( "body", "YourTermHere" ) );
>    indexReader.close();
>    ...
>    IndexReader indexReader = IndexReader.open( indexPath );
>    TermEnum enum = indexReader.terms( new Term( "body", "" ) );
> 
> Something like that...


Thanks for your reply.

I do not want to delete documents by terms. All my indexed documents 
are referenced by id, so I have to use delete( id ). What makes me
insecure is the fact, that there are still terms in index from documents
which are already deleted. This would mean that TermEnum is a continously
growing beast. No problem when I query such a term, because no document
is matching the query. But when I do computation based on indexed terms
I heavily depend on the number of terms in the current TermEnum. Even
if such terms don't impact my computation - because the freq is always
0 - it would have an impact on my runtime behavior and complexity.

Regards, Lars


> Otis
> 
> --- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> > Hi.
> > 
> > Is it the normal behavior that IndexReader.terms( Term t ) still
> > returns Terms which are not any longer to be found in the index,
> > e.g. after removing the document containing these Terms?
> > I've removed nearly all documents from index but the terms() method
> > is still returning all terms.
> > 
> >   IndexReader indexReader = IndexReader.open( indexPath ); 
> >   indexReader.delete( docId );
> >   indexReader.close();
> >   ...
> >   IndexReader indexReader = IndexReader.open( indexPath );
> >   TermEnum enum = indexReader.terms( new Term( "body", "" ) );
> > 
> > Any hints? Regards, Lars


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8971-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:49:14 2004
Return-Path: <lucene-user-return-8971-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34007 invoked from network); 29 Jun 2004 13:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:49:14 -0000
Received: (qmail 85973 invoked by uid 500); 29 Jun 2004 13:49:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85920 invoked by uid 500); 29 Jun 2004 13:49:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85903 invoked by uid 99); 29 Jun 2004 13:49:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:49:03 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I02OO000.AK0 for <lucene-user@jakarta.apache.org>; Tue,
          29 Jun 2004 19:10:48 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Using Highlighter in web Demo
Date: Tue, 29 Jun 2004 19:07:53 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGENLCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <20040629132432.13254.qmail@web12706.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi
Otis

I am not able to compile the Code because the import statement for the below
is not avaliable in the API
QueryScorer scorer = new QueryScorer(query);



with regards
Karthik


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 29, 2004 6:55 PM
To: Lucene Users List
Subject: Re: Using Highlighter in web Demo


Karthik, I don't understand your question.
Sorting was only added in 1.4* versions, if I recall correctly.  There
was no sorting in 1.3.

Otis


--- Karthik N S <karthik@controlnet.co.in> wrote:
>
> Hello Developer's
>
>    I am NOT able to get the API for the same [1.3-final or 1.4rc4 ]
> for
> import  details.
>     QueryScorer scorer = new QueryScorer(query);
>
>
> just was curious to Compile and execute the same...:)
>
>
>
> Karthik
>
>
>
>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, June 29, 2004 5:52 PM
> To: Lucene Users List
> Subject: Re: Using Highlighter in web Demo
>
>
> On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> > Is it possible to use highlighter successfully in the demos the web
> > demo to be specific. Has any one tried out there? If so can they
> > explain me how to go about it any code sample is really  very
> > appreciated.
>
> Straight from Lucene in Action:
>
> public class HighlightIt {
>    private static final String text =
>        "Contrary to popular belief, Lorem Ipsum is" +
>        " not simply random text. It has roots in a piece of" +
>        " classical Latin literature from 45 BC, making it over" +
>        " 2000 years old. Richard McClintock, a Latin professor" +
>        " at Hampden-Sydney College in Virginia, looked up one" +
>        " of the more obscure Latin words, consectetur, from" +
>        " a Lorem Ipsum passage, and going through the cites" +
>        " of the word in classical literature, discovered the" +
>        " undoubtable source. Lorem Ipsum comes from sections" +
>        " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
>        " Malorum\" (The Extremes of Good and Evil) by Cicero," +
>        " written in 45 BC. This book is a treatise on the" +
>        " theory of ethics, very popular during the" +
>        " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
>        " ipsum dolor sit amet..\", comes from a line in" +
>        " section 1.10.32.";  // from http://www.lipsum.com/
>
>    public static void main(String[] args) throws IOException {
>      String filename = args[0];
>
>      if (filename == null) {
>        System.err.println("Usage: HighlightIt <filename>");
>        System.exit(-1);
>      }
>
> //    TermQuery query = new TermQuery(new Term("f", "ipsum"));
>      PhraseQuery query = new PhraseQuery();
>      query.add(new Term("f", "lorem"));
>      query.add(new Term("f", "ipsum"));
>      QueryScorer scorer = new QueryScorer(query);
>      SimpleHTMLFormatter formatter =
>          new SimpleHTMLFormatter("<span class=\"highlight\">",
>              "</span>");
>      Highlighter highlighter = new Highlighter(formatter, scorer);
>      Fragmenter fragmenter = new SimpleFragmenter(50);
>      highlighter.setTextFragmenter(fragmenter);
>
>      TokenStream tokenStream = new StandardAnalyzer()
>          .tokenStream("f", new StringReader(text));
>
>      String result =
>          highlighter.getBestFragments(tokenStream, text, 5, "...");
>
>      FileWriter writer = new FileWriter(filename);
>      writer.write("<html>");
>      writer.write("<style>\n" +
>          ".highlight {\n" +
>          " background: yellow;\n" +
>          "}\n" +
>          "</style>");
>      writer.write("<body>");
>      writer.write(result);
>      writer.write("</body></html>");
>      writer.close();
>    }
> }
>
> I just added the PhraseQuery in there instead of the TermQuery that
> is
> commented out.  Highlighter works well with phrases also (although
> highlights each term individually, not the breadth of the phrase by
> itself).  The above code runs like it says in the usage statement,
> give
> it a filename to save an HTML file that shows the terms highlighted
> in
> yellow.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8972-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:54:24 2004
Return-Path: <lucene-user-return-8972-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36706 invoked from network); 29 Jun 2004 13:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:54:24 -0000
Received: (qmail 97701 invoked by uid 500); 29 Jun 2004 13:54:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97609 invoked by uid 500); 29 Jun 2004 13:54:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97595 invoked by uid 99); 29 Jun 2004 13:54:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:54:10 -0700
Message-ID: <20040629135404.5225.qmail@web12708.mail.yahoo.com>
Received: from [211.95.204.101] by web12708.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 06:54:04 PDT
Date: Tue, 29 Jun 2004 06:54:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: return value of terms()
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <143088710.1088516807953.JavaMail.dummy@smb-tec.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I see.  A search for that Term still gets Hits.  I don't think this
should be happening.  Maybe Erik or one of the other Lucene developers
will have some ideas.

Otis


--- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> -----Ursprngliche Nachricht-----
> Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> Gesendet am: 29. Jun 2004, 13:46:41
> 
> > I would try using the delete(Term) method, to ensure all documents
> > with the given Term are removed:
> > 
> >    IndexReader indexReader = IndexReader.open( indexPath ); 
> >    indexReader.delete( new Term( "body", "YourTermHere" ) );
> >    indexReader.close();
> >    ...
> >    IndexReader indexReader = IndexReader.open( indexPath );
> >    TermEnum enum = indexReader.terms( new Term( "body", "" ) );
> > 
> > Something like that...
> 
> 
> Thanks for your reply.
> 
> I do not want to delete documents by terms. All my indexed documents 
> are referenced by id, so I have to use delete( id ). What makes me
> insecure is the fact, that there are still terms in index from
> documents
> which are already deleted. This would mean that TermEnum is a
> continously
> growing beast. No problem when I query such a term, because no
> document
> is matching the query. But when I do computation based on indexed
> terms
> I heavily depend on the number of terms in the current TermEnum. Even
> if such terms don't impact my computation - because the freq is
> always
> 0 - it would have an impact on my runtime behavior and complexity.
> 
> Regards, Lars
> 
> 
> > Otis
> > 
> > --- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> > > Hi.
> > > 
> > > Is it the normal behavior that IndexReader.terms( Term t ) still
> > > returns Terms which are not any longer to be found in the index,
> > > e.g. after removing the document containing these Terms?
> > > I've removed nearly all documents from index but the terms()
> method
> > > is still returning all terms.
> > > 
> > >   IndexReader indexReader = IndexReader.open( indexPath ); 
> > >   indexReader.delete( docId );
> > >   indexReader.close();
> > >   ...
> > >   IndexReader indexReader = IndexReader.open( indexPath );
> > >   TermEnum enum = indexReader.terms( new Term( "body", "" ) );
> > > 
> > > Any hints? Regards, Lars


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8973-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:57:18 2004
Return-Path: <lucene-user-return-8973-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38996 invoked from network); 29 Jun 2004 13:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:57:18 -0000
Received: (qmail 4343 invoked by uid 500); 29 Jun 2004 13:57:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4287 invoked by uid 500); 29 Jun 2004 13:57:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4258 invoked by uid 99); 29 Jun 2004 13:57:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:57:08 -0700
Message-ID: <20040629135700.17168.qmail@web12706.mail.yahoo.com>
Received: from [211.95.204.101] by web12706.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 06:57:00 PDT
Date: Tue, 29 Jun 2004 06:57:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Using Highlighter in web Demo
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIGENLCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It sounds like you don't have the Highligher Jar in your CLASSPATH at
compile-time.

1. Get Highlighter from CVS
2. Build a Jar using Ant and Highligher's build.xml
3. Add the resulting Jar to CLASSPATH
4. Compile your code (the one that imports QueryScorer)

That should work.

Otis


--- Karthik N S <karthik@controlnet.co.in> wrote:
> Hi
> Otis
> 
> I am not able to compile the Code because the import statement for
> the below
> is not avaliable in the API
> QueryScorer scorer = new QueryScorer(query);
> 
> 
> 
> with regards
> Karthik
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Tuesday, June 29, 2004 6:55 PM
> To: Lucene Users List
> Subject: Re: Using Highlighter in web Demo
> 
> 
> Karthik, I don't understand your question.
> Sorting was only added in 1.4* versions, if I recall correctly. 
> There
> was no sorting in 1.3.
> 
> Otis
> 
> 
> --- Karthik N S <karthik@controlnet.co.in> wrote:
> >
> > Hello Developer's
> >
> >    I am NOT able to get the API for the same [1.3-final or 1.4rc4 ]
> > for
> > import  details.
> >     QueryScorer scorer = new QueryScorer(query);
> >
> >
> > just was curious to Compile and execute the same...:)
> >
> >
> >
> > Karthik
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Sent: Tuesday, June 29, 2004 5:52 PM
> > To: Lucene Users List
> > Subject: Re: Using Highlighter in web Demo
> >
> >
> > On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> > > Is it possible to use highlighter successfully in the demos the
> web
> > > demo to be specific. Has any one tried out there? If so can they
> > > explain me how to go about it any code sample is really  very
> > > appreciated.
> >
> > Straight from Lucene in Action:
> >
> > public class HighlightIt {
> >    private static final String text =
> >        "Contrary to popular belief, Lorem Ipsum is" +
> >        " not simply random text. It has roots in a piece of" +
> >        " classical Latin literature from 45 BC, making it over" +
> >        " 2000 years old. Richard McClintock, a Latin professor" +
> >        " at Hampden-Sydney College in Virginia, looked up one" +
> >        " of the more obscure Latin words, consectetur, from" +
> >        " a Lorem Ipsum passage, and going through the cites" +
> >        " of the word in classical literature, discovered the" +
> >        " undoubtable source. Lorem Ipsum comes from sections" +
> >        " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
> >        " Malorum\" (The Extremes of Good and Evil) by Cicero," +
> >        " written in 45 BC. This book is a treatise on the" +
> >        " theory of ethics, very popular during the" +
> >        " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
> >        " ipsum dolor sit amet..\", comes from a line in" +
> >        " section 1.10.32.";  // from http://www.lipsum.com/
> >
> >    public static void main(String[] args) throws IOException {
> >      String filename = args[0];
> >
> >      if (filename == null) {
> >        System.err.println("Usage: HighlightIt <filename>");
> >        System.exit(-1);
> >      }
> >
> > //    TermQuery query = new TermQuery(new Term("f", "ipsum"));
> >      PhraseQuery query = new PhraseQuery();
> >      query.add(new Term("f", "lorem"));
> >      query.add(new Term("f", "ipsum"));
> >      QueryScorer scorer = new QueryScorer(query);
> >      SimpleHTMLFormatter formatter =
> >          new SimpleHTMLFormatter("<span class=\"highlight\">",
> >              "</span>");
> >      Highlighter highlighter = new Highlighter(formatter, scorer);
> >      Fragmenter fragmenter = new SimpleFragmenter(50);
> >      highlighter.setTextFragmenter(fragmenter);
> >
> >      TokenStream tokenStream = new StandardAnalyzer()
> >          .tokenStream("f", new StringReader(text));
> >
> >      String result =
> >          highlighter.getBestFragments(tokenStream, text, 5, "...");
> >
> >      FileWriter writer = new FileWriter(filename);
> >      writer.write("<html>");
> >      writer.write("<style>\n" +
> >          ".highlight {\n" +
> >          " background: yellow;\n" +
> >          "}\n" +
> >          "</style>");
> >      writer.write("<body>");
> >      writer.write(result);
> >      writer.write("</body></html>");
> >      writer.close();
> >    }
> > }
> >
> > I just added the PhraseQuery in there instead of the TermQuery that
> > is
> > commented out.  Highlighter works well with phrases also (although
> > highlights each term individually, not the breadth of the phrase by
> > itself).  The above code runs like it says in the usage statement,
> > give
> > it a filename to save an HTML file that shows the terms highlighted
> > in
> > yellow.
> >
> > 	Erik
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8974-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 13:59:54 2004
Return-Path: <lucene-user-return-8974-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40856 invoked from network); 29 Jun 2004 13:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 13:59:54 -0000
Received: (qmail 10470 invoked by uid 500); 29 Jun 2004 13:59:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10312 invoked by uid 500); 29 Jun 2004 13:59:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10247 invoked by uid 99); 29 Jun 2004 13:59:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 06:59:29 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I02Q3A00.VJU for <lucene-user@jakarta.apache.org>; Tue,
          29 Jun 2004 19:41:34 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Using Highlighter in web Demo
Date: Tue, 29 Jun 2004 19:38:39 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOENMCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <20040629135700.17168.qmail@web12706.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Oh! 

So silly of me


Apologies Please 

Thx for the same....


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 29, 2004 7:27 PM
To: Lucene Users List
Subject: RE: Using Highlighter in web Demo


It sounds like you don't have the Highligher Jar in your CLASSPATH at
compile-time.

1. Get Highlighter from CVS
2. Build a Jar using Ant and Highligher's build.xml
3. Add the resulting Jar to CLASSPATH
4. Compile your code (the one that imports QueryScorer)

That should work.

Otis


--- Karthik N S <karthik@controlnet.co.in> wrote:
> Hi
> Otis
> 
> I am not able to compile the Code because the import statement for
> the below
> is not avaliable in the API
> QueryScorer scorer = new QueryScorer(query);
> 
> 
> 
> with regards
> Karthik
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Tuesday, June 29, 2004 6:55 PM
> To: Lucene Users List
> Subject: Re: Using Highlighter in web Demo
> 
> 
> Karthik, I don't understand your question.
> Sorting was only added in 1.4* versions, if I recall correctly. 
> There
> was no sorting in 1.3.
> 
> Otis
> 
> 
> --- Karthik N S <karthik@controlnet.co.in> wrote:
> >
> > Hello Developer's
> >
> >    I am NOT able to get the API for the same [1.3-final or 1.4rc4 ]
> > for
> > import  details.
> >     QueryScorer scorer = new QueryScorer(query);
> >
> >
> > just was curious to Compile and execute the same...:)
> >
> >
> >
> > Karthik
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Sent: Tuesday, June 29, 2004 5:52 PM
> > To: Lucene Users List
> > Subject: Re: Using Highlighter in web Demo
> >
> >
> > On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
> > > Is it possible to use highlighter successfully in the demos the
> web
> > > demo to be specific. Has any one tried out there? If so can they
> > > explain me how to go about it any code sample is really  very
> > > appreciated.
> >
> > Straight from Lucene in Action:
> >
> > public class HighlightIt {
> >    private static final String text =
> >        "Contrary to popular belief, Lorem Ipsum is" +
> >        " not simply random text. It has roots in a piece of" +
> >        " classical Latin literature from 45 BC, making it over" +
> >        " 2000 years old. Richard McClintock, a Latin professor" +
> >        " at Hampden-Sydney College in Virginia, looked up one" +
> >        " of the more obscure Latin words, consectetur, from" +
> >        " a Lorem Ipsum passage, and going through the cites" +
> >        " of the word in classical literature, discovered the" +
> >        " undoubtable source. Lorem Ipsum comes from sections" +
> >        " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
> >        " Malorum\" (The Extremes of Good and Evil) by Cicero," +
> >        " written in 45 BC. This book is a treatise on the" +
> >        " theory of ethics, very popular during the" +
> >        " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
> >        " ipsum dolor sit amet..\", comes from a line in" +
> >        " section 1.10.32.";  // from http://www.lipsum.com/
> >
> >    public static void main(String[] args) throws IOException {
> >      String filename = args[0];
> >
> >      if (filename == null) {
> >        System.err.println("Usage: HighlightIt <filename>");
> >        System.exit(-1);
> >      }
> >
> > //    TermQuery query = new TermQuery(new Term("f", "ipsum"));
> >      PhraseQuery query = new PhraseQuery();
> >      query.add(new Term("f", "lorem"));
> >      query.add(new Term("f", "ipsum"));
> >      QueryScorer scorer = new QueryScorer(query);
> >      SimpleHTMLFormatter formatter =
> >          new SimpleHTMLFormatter("<span class=\"highlight\">",
> >              "</span>");
> >      Highlighter highlighter = new Highlighter(formatter, scorer);
> >      Fragmenter fragmenter = new SimpleFragmenter(50);
> >      highlighter.setTextFragmenter(fragmenter);
> >
> >      TokenStream tokenStream = new StandardAnalyzer()
> >          .tokenStream("f", new StringReader(text));
> >
> >      String result =
> >          highlighter.getBestFragments(tokenStream, text, 5, "...");
> >
> >      FileWriter writer = new FileWriter(filename);
> >      writer.write("<html>");
> >      writer.write("<style>\n" +
> >          ".highlight {\n" +
> >          " background: yellow;\n" +
> >          "}\n" +
> >          "</style>");
> >      writer.write("<body>");
> >      writer.write(result);
> >      writer.write("</body></html>");
> >      writer.close();
> >    }
> > }
> >
> > I just added the PhraseQuery in there instead of the TermQuery that
> > is
> > commented out.  Highlighter works well with phrases also (although
> > highlights each term individually, not the breadth of the phrase by
> > itself).  The above code runs like it says in the usage statement,
> > give
> > it a filename to save an HTML file that shows the terms highlighted
> > in
> > yellow.
> >
> > 	Erik
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8975-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 14:01:16 2004
Return-Path: <lucene-user-return-8975-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41789 invoked from network); 29 Jun 2004 14:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 14:01:16 -0000
Received: (qmail 14861 invoked by uid 500); 29 Jun 2004 14:01:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14775 invoked by uid 500); 29 Jun 2004 14:01:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14684 invoked by uid 99); 29 Jun 2004 14:01:00 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 07:00:58 -0700
Message-ID: <20040629140051.9538.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.101] by web12704.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 07:00:51 PDT
Date: Tue, 29 Jun 2004 07:00:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Is there any way to Collect all the searched documents at once?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040629090845.41616.qmail@web8301.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jayant,

That is not possible, as far as I know.
Have you tried using HitCollector (see
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/HitCollector.html)?
I have not used it much, but it may be a tiny bit faster.  If you are
re-running the same query, you may also benefit from
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/CachingWrapperFilter.html

Otis


--- Jayant Kumar <jayantlists@yahoo.co.in> wrote:
> Hi!!
> 
> Is there any way to fetch the fields of the searched
> documents at once rather than looping through the
> found documents one by one....because it consumes lots
> of time and time increases by magnitude if the no. of
> documents found are more.
> 
> This is how I am fetching the found documents ..
> 
> count=1500000 (no. of documents found) 
> 
> for(int i=0 ; i < count;i++ )
>                         {
>                                 Document doc =
> hits.doc(i);
>                                 fields[i] =
> Long.parseLong(doc.get("FIELD"));
>                         }
> 
> This takes around 2.5 minutes  for fetching 1500000
> records which is unacceptable.
> 
> Regards
> Karan
> 
> 
> 
> 
> 
> 		
> __________________________________
> Do you Yahoo!?
> New and Improved Yahoo! Mail - Send 10MB messages!
> http://promotions.yahoo.com/new_mail 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8976-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 14:07:38 2004
Return-Path: <lucene-user-return-8976-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45450 invoked from network); 29 Jun 2004 14:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 14:07:38 -0000
Received: (qmail 30520 invoked by uid 500); 29 Jun 2004 14:07:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30425 invoked by uid 500); 29 Jun 2004 14:07:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30401 invoked by uid 99); 29 Jun 2004 14:07:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [198.87.233.73] (HELO yoda.browsermedia.com) (198.87.233.73)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 07:07:29 -0700
Received: from project.browsermedia.com ([209.190.230.4] helo=steveb)
	by yoda.browsermedia.com with asmtp (Exim 4.34 #1 (OpenNA Linux))
	id 1BfJGb-0002Xu-Hn
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 10:07:21 -0400
Message-ID: <010a01c45de2$1f5b3680$fe00a8c0@BROWSERMEDIA.com>
From: "steve" <steve@browsermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040629132902.22023.qmail@web12701.mail.yahoo.com>
Subject: Re: How to get unique Hits using Multisearcher
Date: Tue, 29 Jun 2004 10:05:23 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Spam-Score: 0.6 (/)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for the quick reply.

I have played with this just a bit, but it seems there is no quick way to
get the Hits.hitsDocs vector in one swoop. The Hits class is final so I
cannot extend it, and there are no public accessors to get/set the hitDocs.
It seems I will need to loop through Hits.doc(int) and extract the hits one
at a time. Do you know another way to do this?


----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, June 29, 2004 9:29 AM
Subject: Re: How to get unique Hits using Multisearcher


> Steve,
>
> Answer to your last question: that's right.
> Lucene does not know what field you use as your PK (unique document
> identifier), so it cannot merge hits and remove duplicates.
>
> As for converting Vector to Set.... HashSet set = new HashSet();
> set.addAll(YourVectorInstance);
> Does that work for you?  Vector isA Collection.
>
> Otis
>
>
>
> --- steve <steve@browsermedia.com> wrote:
> > I saw a similar - but not identical - question asked earlier in the
> > archive
> > but no answer.
> >
> > I have 2 (or more)  indexes of web url's with intersecting hits. The
> > url's
> > are defined as keys in case that makes a difference. I am using
> > MultiSearcher to search multiple indexes, but I get hits repeated if
> > they
> > exist in both indexes. I am trying to get a set of all unique url's
> > among
> > the indexes.
> >
> > Can MultiSearcher be told not to repeat hits with duplicate "key"
> > values? Or
> > does it already do this indicating my Doc's are not defined properly?
> > As a
> > last resort, can someone recommend an efficient method to convert the
> > Vector
> > of hitDocs into a Set after the fact?
> >
> > FYI - as a test, I used MultiSearcher to search one index and it
> > found 45
> > hits. I then gave MultiSearher 2 Searchers pointing to the same
> > index, and
> > it found 90 hits. From this I concluded that MultiSearher merely adds
> > hits
> > to the Vector rather than looking for duplicates. Is that right?
> >
> > TIA,
> >
> > Steve B.
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8977-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 14:23:38 2004
Return-Path: <lucene-user-return-8977-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55703 invoked from network); 29 Jun 2004 14:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 14:23:38 -0000
Received: (qmail 76183 invoked by uid 500); 29 Jun 2004 14:23:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76092 invoked by uid 500); 29 Jun 2004 14:23:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76079 invoked by uid 99); 29 Jun 2004 14:23:32 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 07:23:29 -0700
Message-ID: <20040629142321.4256.qmail@web12702.mail.yahoo.com>
Received: from [211.95.204.99] by web12702.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 07:23:21 PDT
Date: Tue, 29 Jun 2004 07:23:21 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to get unique Hits using Multisearcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <010a01c45de2$1f5b3680$fe00a8c0@BROWSERMEDIA.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ah, you wanted all Hits at once, without iterating, I see.
You;ll have to iterate either using Hits object and its methods, or by
executing the search and passing HitCollector instance to the search
method, depending on what makes sense in your application.

Otis

--- steve <steve@browsermedia.com> wrote:
> Thanks for the quick reply.
> 
> I have played with this just a bit, but it seems there is no quick
> way to
> get the Hits.hitsDocs vector in one swoop. The Hits class is final so
> I
> cannot extend it, and there are no public accessors to get/set the
> hitDocs.
> It seems I will need to loop through Hits.doc(int) and extract the
> hits one
> at a time. Do you know another way to do this?
> 
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, June 29, 2004 9:29 AM
> Subject: Re: How to get unique Hits using Multisearcher
> 
> 
> > Steve,
> >
> > Answer to your last question: that's right.
> > Lucene does not know what field you use as your PK (unique document
> > identifier), so it cannot merge hits and remove duplicates.
> >
> > As for converting Vector to Set.... HashSet set = new HashSet();
> > set.addAll(YourVectorInstance);
> > Does that work for you?  Vector isA Collection.
> >
> > Otis
> >
> >
> >
> > --- steve <steve@browsermedia.com> wrote:
> > > I saw a similar - but not identical - question asked earlier in
> the
> > > archive
> > > but no answer.
> > >
> > > I have 2 (or more)  indexes of web url's with intersecting hits.
> The
> > > url's
> > > are defined as keys in case that makes a difference. I am using
> > > MultiSearcher to search multiple indexes, but I get hits repeated
> if
> > > they
> > > exist in both indexes. I am trying to get a set of all unique
> url's
> > > among
> > > the indexes.
> > >
> > > Can MultiSearcher be told not to repeat hits with duplicate "key"
> > > values? Or
> > > does it already do this indicating my Doc's are not defined
> properly?
> > > As a
> > > last resort, can someone recommend an efficient method to convert
> the
> > > Vector
> > > of hitDocs into a Set after the fact?
> > >
> > > FYI - as a test, I used MultiSearcher to search one index and it
> > > found 45
> > > hits. I then gave MultiSearher 2 Searchers pointing to the same
> > > index, and
> > > it found 90 hits. From this I concluded that MultiSearher merely
> adds
> > > hits
> > > to the Vector rather than looking for duplicates. Is that right?
> > >
> > > TIA,
> > >
> > > Steve B.
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8978-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 14:28:03 2004
Return-Path: <lucene-user-return-8978-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58289 invoked from network); 29 Jun 2004 14:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 14:28:02 -0000
Received: (qmail 89578 invoked by uid 500); 29 Jun 2004 14:27:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89370 invoked by uid 500); 29 Jun 2004 14:27:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89332 invoked by uid 99); 29 Jun 2004 14:27:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 07:27:52 -0700
Message-ID: <20040629142744.13490.qmail@web12704.mail.yahoo.com>
Received: from [211.95.204.99] by web12704.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 07:27:44 PDT
Date: Tue, 29 Jun 2004 07:27:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: best ways of using IndexSearcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200406290753.i5T7rHl12252@mail.fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anson,

I was indeed referring to search, but I could be wrong.  I have not
tested it, so my answer was more instinctive than scientific. :(
Regardless, a single IndexSearcher should do.  Are you finding that
your queries are taking too long?  If so, I suggest you profile things,
and find the bottleneck.  One person has recently provided some
execution stack traces, which revealed 1 bottleneck, and I believe Doug
has subsequently applied a patch that improved search performance.

Otis


--- Anson Lau <alau@fulfil-net.com> wrote:
> Otis,
> 
> Thanks for the advice.  When you say "This stuff is not really CPU
> intensive" are you refering to the search itself or something else? 
> In my
> experience the search tends to be ultimately bounded by CPU.
> 
> Anson
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Tuesday, June 29, 2004 2:51 PM
> To: Lucene Users List
> Subject: Re: best ways of using IndexSearcher
> 
> Anson,
> 
> Use a single instance of IndexSearcher and, if you want to always
> 'see'
> even the latest index changes (deletes and adds since you opened the
> IndexSearcher) make sure to re-create the IndexSearcher when you
> detect
> that the index version has changed (see
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReade
> r.html#getCurrentVersion(org.apache.lucene.store.Directory))
> 
> When you get the new IndexSearcher, leave the old instance alone -
> let
> the GC take care of it, and don't call close() on it, in case
> something
> in your application is still using that instance.
> 
> This stuff is not really CPU intensive.  Disk I/O tends to be the
> bottleneck.  If you are working with multiple indices, spread them
> over
> multiple disks (not just partitions, real disks), if you can.
> 
> Otis
> 
> 
> --- Anson Lau <alau@fulfil-net.com> wrote:
> > Hi Guys,
> > 
> > What's the recommended way of using IndexSearcher? Should
> > IndexSearcher be a
> > singleton or pooled?  Would pooling provide a more scalable
> solution
> > by
> > allowing you to decide how many IndexSearcher to use based on say
> how
> > many
> > CPU u have on ur server?
> > 
> > Thanks,
> > 
> > Anson
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8979-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 15:13:16 2004
Return-Path: <lucene-user-return-8979-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84615 invoked from network); 29 Jun 2004 15:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 15:13:16 -0000
Received: (qmail 19703 invoked by uid 500); 29 Jun 2004 15:12:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19625 invoked by uid 500); 29 Jun 2004 15:12:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19521 invoked by uid 99); 29 Jun 2004 15:12:50 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.218.94.74] (HELO web90103.mail.scd.yahoo.com) (66.218.94.74)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 08:12:48 -0700
Message-ID: <20040629151237.6689.qmail@web90103.mail.scd.yahoo.com>
Received: from [134.214.105.166] by web90103.mail.scd.yahoo.com via HTTP; Tue, 29 Jun 2004 08:12:37 PDT
Date: Tue, 29 Jun 2004 08:12:37 -0700 (PDT)
From: uddam chukmol <uddam_chukmol@yahoo.com>
Subject: Re: how to incorporate french stemmer in snowball?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <60DFAD8C-C9C0-11D8-BEAA-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1723379851-1088521957=:4191"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1723379851-1088521957=:4191
Content-Type: text/plain; charset=us-ascii

Thanks alot Erik for  this hint. I went to the repository of "jakarta-lucene-sandbox/contribution/analyzers/src/java/org/apache/lucene/analysis/fr" and found the source of three class for analyzing the french text. 
 
that's usable in my case.
 
Thanks once again!
 
Uddam
 
 
Erik Hatcher <erik@ehatchersolutions.com> wrote:
On Jun 29, 2004, at 4:23 AM, uddam chukmol wrote:
> I don't really know how to incorporate the french stemmer in to a 
> snowball analyzer.
>
> Any sample code will be admired!

Here is a short example from our Lucene in Action book's code:

public void testSpanish() throws Exception {
Analyzer analyzer = new SnowballAnalyzer("Spanish");

assertAnalyzesTo(analyzer,
"algoritmos", new String[] {"algoritm"});
}

Substitute "French" for "Spanish" and you should be in business, 
provided you've grabbed 'snowball' source code from the 
jakarta-lucene-sandbox CVS repository in the contributions/snowball 
area.

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
Yahoo! Mail is new and improved - Check it out!
--0-1723379851-1088521957=:4191--

From lucene-user-return-8980-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 20:10:36 2004
Return-Path: <lucene-user-return-8980-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37453 invoked from network); 29 Jun 2004 20:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 20:10:36 -0000
Received: (qmail 31844 invoked by uid 500); 29 Jun 2004 20:10:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31763 invoked by uid 500); 29 Jun 2004 20:10:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31731 invoked by uid 99); 29 Jun 2004 20:10:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.42.13] (HELO nwkea-mail-1.sun.com) (192.18.42.13)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 13:10:18 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by nwkea-mail-1.sun.com (8.12.10/8.12.9) with ESMTP id i5TK9vJ6008948
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 13:09:57 -0700 (PDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I03006016N8F7@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Tue, 29 Jun 2004 13:09:57 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I03003426OKZG@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Tue, 29 Jun 2004 13:09:57 -0700 (PDT)
Date: Tue, 29 Jun 2004 13:09:56 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Re: Using Highlighter in web Demo
In-reply-to: <F8AE4E49-C9C6-11D8-BEAA-000393A564E6@ehatchersolutions.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E1CC94.30909@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
References: <40E0B563.8070601@Sun.COM>
 <F8AE4E49-C9C6-11D8-BEAA-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

Thank you so very much for the working example of using Highlighter with 
the search results. I got the sample code to work. I am kinda curious, 
why the Highlighter class only returns Fragments of the document. Are 
there any constraints for doing that? Also I looked at the code of the 
Highligher class and all of the methods are for getBestFragments / 
getBestDocFragments. Is there a way to get the whole document in result. 
Highlighted for the query string? Is it something that would have to be 
done by the individual?

Thanks a lot for all your help, support and time.

Erik Hatcher wrote:

> On Jun 28, 2004, at 5:18 PM, Hetan Shah wrote:
>
>> Is it possible to use highlighter successfully in the demos the web 
>> demo to be specific. Has any one tried out there? If so can they 
>> explain me how to go about it any code sample is really  very 
>> appreciated.
>
>
> Straight from Lucene in Action:
>
> public class HighlightIt {
>   private static final String text =
>       "Contrary to popular belief, Lorem Ipsum is" +
>       " not simply random text. It has roots in a piece of" +
>       " classical Latin literature from 45 BC, making it over" +
>       " 2000 years old. Richard McClintock, a Latin professor" +
>       " at Hampden-Sydney College in Virginia, looked up one" +
>       " of the more obscure Latin words, consectetur, from" +
>       " a Lorem Ipsum passage, and going through the cites" +
>       " of the word in classical literature, discovered the" +
>       " undoubtable source. Lorem Ipsum comes from sections" +
>       " 1.10.32 and 1.10.33 of \"de Finibus Bonorum et" +
>       " Malorum\" (The Extremes of Good and Evil) by Cicero," +
>       " written in 45 BC. This book is a treatise on the" +
>       " theory of ethics, very popular during the" +
>       " Renaissance. The first line of Lorem Ipsum, \"Lorem" +
>       " ipsum dolor sit amet..\", comes from a line in" +
>       " section 1.10.32.";  // from http://www.lipsum.com/
>
>   public static void main(String[] args) throws IOException {
>     String filename = args[0];
>
>     if (filename == null) {
>       System.err.println("Usage: HighlightIt <filename>");
>       System.exit(-1);
>     }
>
> //    TermQuery query = new TermQuery(new Term("f", "ipsum"));
>     PhraseQuery query = new PhraseQuery();
>     query.add(new Term("f", "lorem"));
>     query.add(new Term("f", "ipsum"));
>     QueryScorer scorer = new QueryScorer(query);
>     SimpleHTMLFormatter formatter =
>         new SimpleHTMLFormatter("<span class=\"highlight\">",
>             "</span>");
>     Highlighter highlighter = new Highlighter(formatter, scorer);
>     Fragmenter fragmenter = new SimpleFragmenter(50);
>     highlighter.setTextFragmenter(fragmenter);
>
>     TokenStream tokenStream = new StandardAnalyzer()
>         .tokenStream("f", new StringReader(text));
>
>     String result =
>         highlighter.getBestFragments(tokenStream, text, 5, "...");
>
>     FileWriter writer = new FileWriter(filename);
>     writer.write("<html>");
>     writer.write("<style>\n" +
>         ".highlight {\n" +
>         " background: yellow;\n" +
>         "}\n" +
>         "</style>");
>     writer.write("<body>");
>     writer.write(result);
>     writer.write("</body></html>");
>     writer.close();
>   }
> }
>
> I just added the PhraseQuery in there instead of the TermQuery that is 
> commented out.  Highlighter works well with phrases also (although 
> highlights each term individually, not the breadth of the phrase by 
> itself).  The above code runs like it says in the usage statement, 
> give it a filename to save an HTML file that shows the terms 
> highlighted in yellow.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8981-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 20:14:15 2004
Return-Path: <lucene-user-return-8981-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39108 invoked from network); 29 Jun 2004 20:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 20:14:15 -0000
Received: (qmail 41688 invoked by uid 500); 29 Jun 2004 20:14:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41608 invoked by uid 500); 29 Jun 2004 20:14:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41586 invoked by uid 99); 29 Jun 2004 20:14:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.80.12.100] (HELO bass.Textwise.com) (64.80.12.100)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 13:14:17 -0700
Received: from [172.18.1.105] ([172.18.1.105])
	by bass.Textwise.com (8.11.6+Sun/8.9.3) with ESMTP id i5TKE2Q27346
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 16:14:02 -0400 (EDT)
Subject: Re: Is there any way to Collect all the searched documents at once?
From: Anthony Vito <vito@mnis.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040629090845.41616.qmail@web8301.mail.in.yahoo.com>
References: <20040629090845.41616.qmail@web8301.mail.in.yahoo.com>
Content-Type: text/plain
Organization: PPI
Message-Id: <1088540127.5024.145.camel@mortal>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 (1.4.6-2) 
Date: Tue, 29 Jun 2004 16:15:28 -0400
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


> Is there any way to fetch the fields of the searched
> documents at once rather than looping through the
> found documents one by one....because it consumes lots
> of time and time increases by magnitude if the no. of
> documents found are more.
> 
> This is how I am fetching the found documents ..
> 
> count=1500000 (no. of documents found) 
> 
> for(int i=0 ; i < count;i++ )
>                         {
>                                 Document doc =
> hits.doc(i);
>                                 fields[i] =
> Long.parseLong(doc.get("FIELD"));
>                         }
> 
> This takes around 2.5 minutes  for fetching 1500000
> records which is unacceptable.
> 
> Regards
> Karan

1.5 million in 2.5 minutes gives me 100 microseconds per iteration. (
correct me if I messed up the math. ) I'd be willing to bet the
Long.parseLong() is a significant part of that time because it iterates
through each character. You should profile your code, a simple
-Xrunhprof:cpu=samples should suffice. If the parse is a significant
percentage of total run time, > 30% or so. You can save iterations in
the parse by encoding and decoding using a very high radix, probably 36,
so it would be alphanumeric.


-vito


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8982-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 20:38:20 2004
Return-Path: <lucene-user-return-8982-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50852 invoked from network); 29 Jun 2004 20:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 20:38:19 -0000
Received: (qmail 2974 invoked by uid 500); 29 Jun 2004 20:38:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2918 invoked by uid 500); 29 Jun 2004 20:38:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2893 invoked by uid 99); 29 Jun 2004 20:38:22 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [194.106.33.237] (HELO outmail.freedom2surf.net) (194.106.33.237)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 13:38:20 -0700
Received: from dell (i-194-106-34-5.freedom2surf.net [194.106.34.5])
	by outmail.freedom2surf.net (8.12.10/8.12.10) with SMTP id i5TKbvU9010236
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 21:37:58 +0100
Date: Tue, 29 Jun 2004 21:37:57 +0100
Message-Id: <200406292037.i5TKbvU9010236@outmail.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: Using Highlighter in web Demo
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>>Is there a way to get the whole document in result. 

Use one big fragment...

highlighter.setTextFragmenter(new SimpleFragmenter(1000000));


Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8983-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 21:19:25 2004
Return-Path: <lucene-user-return-8983-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71186 invoked from network); 29 Jun 2004 21:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 21:19:25 -0000
Received: (qmail 5876 invoked by uid 500); 29 Jun 2004 21:19:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5780 invoked by uid 500); 29 Jun 2004 21:19:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5747 invoked by uid 99); 29 Jun 2004 21:19:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.30.32.11] (HELO smtp.airsmail.com) (64.30.32.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 14:19:23 -0700
Received: from trinidad (trinidad.airscorp.com [10.0.4.100])
	(authenticated)
	by smtp.airsmail.com (8.11.6/8.11.6) with ESMTP id i5TLJ0I28937
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 17:19:00 -0400
From: "Mark Florence" <mflorence@airsmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Running OutOfMemory while optimizing and searching
Date: Tue, 29 Jun 2004 17:19:00 -0400
Message-ID: <DIENLCKNNDCDMPIEODNMKEBEJCAA.mflorence@airsmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <20040629050134.90959.qmail@web12707.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis, Thanks for considering this problem.

I'm using all the default parameters -- and still scratching my head!

I can't see any that would control memory usage. Plus, a 2GB heap is
quite big. I see others have indexes bigger than mine, so I'm not sure
how to find out why mine is throwing OutOfMemory -- not only on the
optimize, but when 3-4 searchers are running, too.

-- Mark

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 29, 2004 01:02 am
To: Lucene Users List
Subject: Re: Running OutOfMemory while optimizing and searching


Mark,

Tough situation.  I hate when things like this happen on production :(.
 You are not mentioning what you are using for various IndexWriter
parameters.  You may be able to get this working by tweaking them (see
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWrite
r.html#field_summary).
Hm, now that I think about it, I am not sure if those are considered
during index optimization.  I'll try checking the sources later.

Otis

--- Mark Florence <mflorence@airsmail.com> wrote:
> Hi, I'm using Lucene to index ~3.5M documents, over about 50 fields.
> The Lucene
> index itself is ~10.5GB, spread over ~7,000 files. Some of these
> files are
> "large" -- that is, several PRX files are ~1.5GB.
>
> Lucene runs on a dedicated server (Linux on a 1Ghz Dell, with 1GB
> RAM). Clients
> on other machines use RMI to perform reads / writes. Each night the
> server
> automatically performs an optimize.
>
> The problem is that the optimize now dies with an OutOfMemory
> exception, even
> when the JVM heap size is set to its maximum of 2GB. I need to
> optimize, because
> as the number of Lucene files grows, search performance becomes
> unacceptable.
>
> Search performance is also adversely affected because I've had to
> effectively
> single-thread reads and writes. I was using a simple read / write
> lock
> mechanism, allowing multiple readers to simultaneously search, but
> now more than
> 3-4 simultaneous readers will also cause an OutOfMemory condition.
> Searches can
> take as long as 30-40 seconds, and with single-threading, that's
> crippling the
> main client application.
>
> Needless to say, the Lucene index is mission-critical, and must run
> 24/7.
>
> I've seen other posts along this same vein, but no definite
> consensus. Is my
> problem simply inadequate hardware? Should I run on a 64-bit
> platform, where I
> can allocate a Java heap of > 2GB?
>
> Or could there be something fundamentally "wrong" with my index? I
> should add
> that I've just spent about a week (!!) rebuilding from scratch, over
> all 3.5M
> documents.
>
> -- Many thanks for any help! Mark Florence
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8984-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 21:28:57 2004
Return-Path: <lucene-user-return-8984-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76228 invoked from network); 29 Jun 2004 21:28:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 21:28:57 -0000
Received: (qmail 27564 invoked by uid 500); 29 Jun 2004 21:29:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27547 invoked by uid 500); 29 Jun 2004 21:29:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27531 invoked by uid 99); 29 Jun 2004 21:29:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 14:28:57 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5TLSV3e005120
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 17:28:31 -0400
Message-ID: <3414790679479308471QHGHRLGOSE.tlai@trekspace.com>
Date: Tue, 29 Jun 2004 17:28:31 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <terence.lai@trekspace.com>
To: lucene-user@jakarta.apache.org
Subject: Building query to match a sub-string of a field
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Everyone,

I am trying to construct a query which matches a sub-string of a field. As an illustration, I would like to search the following words by using the sub-string "test":

- test
- testing
- contest
- contestable

I realize that Lucene does support wildcard searches using "*" and "?" in the custom query. Therefore, the query string "*test*" should give me the right result. However, the Lucene query syntax (http://jakarta.apache.org/lucene/docs/queryparsersyntax.html) does not allow the wildcard "*" as the first character of the search. Therefore, the query "*test*" is invalid. Does anyone have a solution to build the query to achieve the same result?

Thanks,
Terence




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8985-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 21:46:02 2004
Return-Path: <lucene-user-return-8985-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83745 invoked from network); 29 Jun 2004 21:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 21:46:02 -0000
Received: (qmail 71612 invoked by uid 500); 29 Jun 2004 21:46:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71551 invoked by uid 500); 29 Jun 2004 21:46:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71486 invoked by uid 99); 29 Jun 2004 21:46:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.82.240.35] (HELO mail55.messagelabs.com) (216.82.240.35)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 14:46:00 -0700
X-VirusChecked: Checked
X-Env-Sender: BPryor@widen.com
X-Msg-Ref: server-13.tower-55.messagelabs.com!1088545535!7360546
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [69.8.156.101]
Received: (qmail 25515 invoked from network); 29 Jun 2004 21:45:35 -0000
Received: from mailhost.widen.com (HELO exchange2k.widen.com) (69.8.156.101)
  by server-13.tower-55.messagelabs.com with SMTP; 29 Jun 2004 21:45:35 -0000
Received: by exchange.corp.widen.com with Internet Mail Service (5.5.2657.72)
	id <NWNFYZ9W>; Tue, 29 Jun 2004 16:45:35 -0500
Message-ID: <CFAF6F2213792F4FBA1E08561BB701D404735CCD@exchange.corp.widen.com>
From: Ben Pryor <BPryor@widen.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Building query to match a sub-string of a field
Date: Tue, 29 Jun 2004 16:45:34 -0500
X-Mailer: Internet Mail Service (5.5.2657.72)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you are building a query using the API, the WildcardQuery class will
allow you to use a leading wildcard character. The QueryParser will not
allow this, however, so if you're getting queries using the QueryParser a
leading wildcard won't work.

I have successfully done substring queries through the API using code
previously posted to the list:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg06388.html
I haven't run into any performance problems because of these classes.

There were a few minor changes that needed to be made to that code to make
it work with the latest Lucene 1.4RC3 - I think it was just a matter of
changing a constructor signature.

Ben

-----Original Message-----
From: Terence Lai [mailto:tlai@trekspace.com] 
Sent: Tuesday, June 29, 2004 4:29 PM
To: lucene-user@jakarta.apache.org
Subject: Building query to match a sub-string of a field

Hi Everyone,

I am trying to construct a query which matches a sub-string of a field. As
an illustration, I would like to search the following words by using the
sub-string "test":

- test
- testing
- contest
- contestable

I realize that Lucene does support wildcard searches using "*" and "?" in
the custom query. Therefore, the query string "*test*" should give me the
right result. However, the Lucene query syntax
(http://jakarta.apache.org/lucene/docs/queryparsersyntax.html) does not
allow the wildcard "*" as the first character of the search. Therefore, the
query "*test*" is invalid. Does anyone have a solution to build the query to
achieve the same result?

Thanks,
Terence

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8986-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 21:52:58 2004
Return-Path: <lucene-user-return-8986-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88083 invoked from network); 29 Jun 2004 21:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 21:52:58 -0000
Received: (qmail 93981 invoked by uid 500); 29 Jun 2004 21:53:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93905 invoked by uid 500); 29 Jun 2004 21:53:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93829 invoked by uid 99); 29 Jun 2004 21:53:01 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,MIME_BASE64_LATIN,MIME_BASE64_NO_NAME,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 14:53:01 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5TLqa3e013563
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 17:52:37 -0400
Message-ID: <6646145362745803009TXRETDARCD.tlai@trekspace.com>
Date: Tue, 29 Jun 2004 17:52:36 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: RE: Building query to match a sub-string of a field
In-Reply-To: <CFAF6F2213792F4FBA1E08561BB701D404735CCD@exchange.corp.widen.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81_18758814.1088545956900"
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
References: <CFAF6F2213792F4FBA1E08561BB701D404735CCD@exchange.corp.widen.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_Part_81_18758814.1088545956900
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Ben,

Thanks for your help.

Terence



----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Original Message =3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
Subject:=A0
RE: Building query to match a sub-string of a field
From:=20
Ben Pryor <BPryor@widen.com>
To:=20
Lucene Users List <lucene-user@jakarta.apache.org>
Date:=20
Tue Jun 29 17:45:34 EDT 2004
=20
If you are building a query using the API, the WildcardQuery class will
allow you to use a leading wildcard character. The QueryParser will not
allow this, however, so if you're getting queries using the QueryParser a
leading wildcard won't work.

I have successfully done substring queries through the API using code
previously posted to the list:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg06388.html
I haven't run into any performance problems because of these classes.

There were a few minor changes that needed to be made to that code to make
it work with the latest Lucene 1.4RC3 - I think it was just a matter of
changing a constructor signature.

Ben

-----Original Message-----
From: Terence Lai [mailto:tlai@trekspace.com]=20
Sent: Tuesday, June 29, 2004 4:29 PM
To: lucene-user@jakarta.apache.org
Subject: Building query to match a sub-string of a field

Hi Everyone,

I am trying to construct a query which matches a sub-string of a field. As
an illustration, I would like to search the following words by using the
sub-string "test":

- test
- testing
- contest
- contestable

I realize that Lucene does support wildcard searches using "*" and "?" in
the custom query. Therefore, the query string "*test*" should give me the
right result. However, the Lucene query syntax
(http://jakarta.apache.org/lucene/docs/queryparsersyntax.html) does not
allow the wildcard "*" as the first character of the search. Therefore, the
query "*test*" is invalid. Does anyone have a solution to build the query t=
o
achieve the same result?

Thanks,
Terence

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


=20

------=_Part_81_18758814.1088545956900--


From lucene-user-return-8987-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 22:00:47 2004
Return-Path: <lucene-user-return-8987-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91254 invoked from network); 29 Jun 2004 22:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 22:00:47 -0000
Received: (qmail 12938 invoked by uid 500); 29 Jun 2004 22:00:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12878 invoked by uid 500); 29 Jun 2004 22:00:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12813 invoked by uid 99); 29 Jun 2004 22:00:49 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 15:00:48 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5TLxRRa037690
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 17:59:27 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040629175752.01b8eec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Tue, 29 Jun 2004 18:01:42 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Optimizing Collections
In-Reply-To: <DIENLCKNNDCDMPIEODNMKEBEJCAA.mflorence@airsmail.com>
References: <20040629050134.90959.qmail@web12707.mail.yahoo.com>
 <DIENLCKNNDCDMPIEODNMKEBEJCAA.mflorence@airsmail.com>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_104208406==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_104208406==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hello All,

I've finished with the Lucene collections.  I'm building collections based 
on PDFs and database queries and everything is winderful.

I remember reading somewhere that you could optimize a Lucene 
collection.  But I can't remember where and cannot find anything on 
that.  I've also read it here as well.

Could someone point me to the right direction on how to optimize a collection?


Thanks


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_104208406==.ALT--


From lucene-user-return-8988-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 22:36:37 2004
Return-Path: <lucene-user-return-8988-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10487 invoked from network); 29 Jun 2004 22:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 22:36:36 -0000
Received: (qmail 7215 invoked by uid 500); 29 Jun 2004 22:36:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7118 invoked by uid 500); 29 Jun 2004 22:36:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7081 invoked by uid 99); 29 Jun 2004 22:36:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.98.34] (HELO brmea-mail-3.sun.com) (192.18.98.34)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 15:36:39 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-3.sun.com (8.12.10/8.12.9) with ESMTP id i5TMaEil016877
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 16:36:14 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I0300101D9FOZ@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Tue, 29 Jun 2004 15:36:14 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I0300IEPDGDUG@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Tue, 29 Jun 2004 15:36:14 -0700 (PDT)
Date: Tue, 29 Jun 2004 15:36:13 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: QurtyParser question
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E1EEDD.9090600@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am trying to tie the highlighter sample code with demo3 of the 
distribution.

There is one place where I think I am stuck. The code in demo3 has
query = QueryParser.parse(String query, String field, String analyzer); 
and the highlighter sample code uses a subclass of query which is 
PhraseQuery and then adds new terms
PhraseQuery query = new PhraseQuery();
query.add(new Term("f", "text"));

Is there a way to work this around, so that I do not have to create two 
different query objects?

Please help.

Thanks you guys, you have been best.
-H



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8989-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 22:40:29 2004
Return-Path: <lucene-user-return-8989-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12886 invoked from network); 29 Jun 2004 22:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 22:40:28 -0000
Received: (qmail 16161 invoked by uid 500); 29 Jun 2004 22:40:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16124 invoked by uid 500); 29 Jun 2004 22:40:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16089 invoked by uid 99); 29 Jun 2004 22:40:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.18.98.36] (HELO brmea-mail-4.sun.com) (192.18.98.36)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Tue, 29 Jun 2004 15:40:29 -0700
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-4.sun.com (8.12.10/8.12.9) with ESMTP id i5TMc653021149
	for <lucene-user@jakarta.apache.org>; Tue, 29 Jun 2004 16:38:06 -0600 (MDT)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I0300301DGOE7@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Tue, 29 Jun 2004 15:40:03 -0700 (PDT)
Received: from Sun.COM (sr1-usjc07-02.SFBay.Sun.COM [129.145.21.53])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I0300IGTDMRUG@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Tue, 29 Jun 2004 15:40:03 -0700 (PDT)
Date: Tue, 29 Jun 2004 15:40:03 -0700
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: QueryParser question
In-reply-to: <40E1EEDD.9090600@Sun.COM>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Reply-to: Hetan.Shah@Sun.COM
Message-id: <40E1EFC3.8040909@Sun.COM>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.4) Gecko/20040414
References: <40E1EEDD.9090600@Sun.COM>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am trying to tie the highlighter sample code with demo3 of the 
distribution.

There is one place where I think I am stuck. The code in demo3 has
query = QueryParser.parse(String query, String field, String analyzer); 
and the highlighter sample code uses a subclass of query which is 
PhraseQuery and then adds new terms
PhraseQuery query = new PhraseQuery();
query.add(new Term("f", "text"));

Is there a way to work this around, so that I do not have to create two 
different query objects?

Please help.

Thanks you guys, you have been best.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8990-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Jun 29 23:29:47 2004
Return-Path: <lucene-user-return-8990-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34241 invoked from network); 29 Jun 2004 23:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Jun 2004 23:29:47 -0000
Received: (qmail 45852 invoked by uid 500); 29 Jun 2004 23:29:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45744 invoked by uid 500); 29 Jun 2004 23:29:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45686 invoked by uid 99); 29 Jun 2004 23:29:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [66.218.93.17] (HELO web41101.mail.yahoo.com) (66.218.93.17)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 16:29:48 -0700
Message-ID: <20040629232923.99781.qmail@web41101.mail.yahoo.com>
Received: from [12.13.3.252] by web41101.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 16:29:22 PDT
Date: Tue, 29 Jun 2004 16:29:22 -0700 (PDT)
From: James Dunn <james_h_dunn@yahoo.com>
Subject: RE: Running OutOfMemory while optimizing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <DIENLCKNNDCDMPIEODNMKEBEJCAA.mflorence@airsmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Mark,

What do your queries look like?  The memory required
for a query can be computed by the following equation:

1 Byte * Number of fields in your query * Number of
docs in your index

So if your query searches on all 50 fields of your 3.5
Million document index then each search would take
about 175MB.  If your 3-4 searches run concurrently
then that's about 525MB to 700MB chewed up at once.

Also, if your queries use wildcards, the memory
requirements could be much greater.  

Hope that helps,

Jim
--- Mark Florence <mflorence@airsmail.com> wrote:
> Otis, Thanks for considering this problem.
> 
> I'm using all the default parameters -- and still
> scratching my head!
> 
> I can't see any that would control memory usage.
> Plus, a 2GB heap is
> quite big. I see others have indexes bigger than
> mine, so I'm not sure
> how to find out why mine is throwing OutOfMemory --
> not only on the
> optimize, but when 3-4 searchers are running, too.
> 
> -- Mark
> 
> -----Original Message-----
> From: Otis Gospodnetic
> [mailto:otis_gospodnetic@yahoo.com]
> Sent: Tuesday, June 29, 2004 01:02 am
> To: Lucene Users List
> Subject: Re: Running OutOfMemory while optimizing
> and searching
> 
> 
> Mark,
> 
> Tough situation.  I hate when things like this
> happen on production :(.
>  You are not mentioning what you are using for
> various IndexWriter
> parameters.  You may be able to get this working by
> tweaking them (see
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWrite
> r.html#field_summary).
> Hm, now that I think about it, I am not sure if
> those are considered
> during index optimization.  I'll try checking the
> sources later.
> 
> Otis
> 
> --- Mark Florence <mflorence@airsmail.com> wrote:
> > Hi, I'm using Lucene to index ~3.5M documents,
> over about 50 fields.
> > The Lucene
> > index itself is ~10.5GB, spread over ~7,000 files.
> Some of these
> > files are
> > "large" -- that is, several PRX files are ~1.5GB.
> >
> > Lucene runs on a dedicated server (Linux on a 1Ghz
> Dell, with 1GB
> > RAM). Clients
> > on other machines use RMI to perform reads /
> writes. Each night the
> > server
> > automatically performs an optimize.
> >
> > The problem is that the optimize now dies with an
> OutOfMemory
> > exception, even
> > when the JVM heap size is set to its maximum of
> 2GB. I need to
> > optimize, because
> > as the number of Lucene files grows, search
> performance becomes
> > unacceptable.
> >
> > Search performance is also adversely affected
> because I've had to
> > effectively
> > single-thread reads and writes. I was using a
> simple read / write
> > lock
> > mechanism, allowing multiple readers to
> simultaneously search, but
> > now more than
> > 3-4 simultaneous readers will also cause an
> OutOfMemory condition.
> > Searches can
> > take as long as 30-40 seconds, and with
> single-threading, that's
> > crippling the
> > main client application.
> >
> > Needless to say, the Lucene index is
> mission-critical, and must run
> > 24/7.
> >
> > I've seen other posts along this same vein, but no
> definite
> > consensus. Is my
> > problem simply inadequate hardware? Should I run
> on a 64-bit
> > platform, where I
> > can allocate a Java heap of > 2GB?
> >
> > Or could there be something fundamentally "wrong"
> with my index? I
> > should add
> > that I've just spent about a week (!!) rebuilding
> from scratch, over
> > all 3.5M
> > documents.
> >
> > -- Many thanks for any help! Mark Florence
> >
> >
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8991-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 01:34:01 2004
Return-Path: <lucene-user-return-8991-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98652 invoked from network); 30 Jun 2004 01:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 01:34:01 -0000
Received: (qmail 65255 invoked by uid 500); 30 Jun 2004 01:34:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65186 invoked by uid 500); 30 Jun 2004 01:34:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65071 invoked by uid 99); 30 Jun 2004 01:34:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Tue, 29 Jun 2004 18:34:01 -0700
Message-ID: <20040630013332.74939.qmail@web12705.mail.yahoo.com>
Received: from [211.95.204.101] by web12705.mail.yahoo.com via HTTP; Tue, 29 Jun 2004 18:33:32 PDT
Date: Tue, 29 Jun 2004 18:33:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Optimizing Collections
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.1.1.0.20040629175752.01b8eec0@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don,

Use IndexWriter's optimize() method:

IndexWriter writer = new IndexWriter(.....)
writer.optimize();
writer.close();

Otis

--- Don Vaillancourt <donv@webimpact.com> wrote:
> Hello All,
> 
> I've finished with the Lucene collections.  I'm building collections
> based 
> on PDFs and database queries and everything is winderful.
> 
> I remember reading somewhere that you could optimize a Lucene 
> collection.  But I can't remember where and cannot find anything on 
> that.  I've also read it here as well.
> 
> Could someone point me to the right direction on how to optimize a
> collection?
> 
> 
> Thanks
> 
> 
> Don Vaillancourt
> Director of Software Development
> 
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
> 
> 
> 
> 
> This email message is intended only for the addressee(s)
> and contains information that may be confidential and/or
> copyright.  If you are not the intended recipient please
> notify the sender by reply email and immediately delete
> this email. Use, disclosure or reproduction of this email
> by anyone other than the intended recipient(s) is strictly
> prohibited. No representation is made that this email or
> any attachments are free of viruses. Virus scanning is
> recommended and is the responsibility of the recipient.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8992-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 09:37:05 2004
Return-Path: <lucene-user-return-8992-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54984 invoked from network); 30 Jun 2004 09:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 09:37:05 -0000
Received: (qmail 76842 invoked by uid 500); 30 Jun 2004 09:37:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76780 invoked by uid 500); 30 Jun 2004 09:37:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76748 invoked by uid 99); 30 Jun 2004 09:37:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 02:37:12 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 4C8FE23B92
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 11:36:32 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 05149-10 for <lucene-user@jakarta.apache.org>;
 Wed, 30 Jun 2004 11:36:32 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id EF63823B8F
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 11:36:31 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i5U9aSGL004516
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 11:36:28 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i5U9aS8k004512;
	Wed, 30 Jun 2004 11:36:28 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <16610.35228.247157.936985@tanto-xipolis.de>
Date: Wed, 30 Jun 2004 11:36:28 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: return value of terms()
In-Reply-To: <20040629135404.5225.qmail@web12708.mail.yahoo.com>
References: <143088710.1088516807953.JavaMail.dummy@smb-tec.com>
	<20040629135404.5225.qmail@web12708.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic writes:
> I see.  A search for that Term still gets Hits.  I don't think this
> should be happening.  Maybe Erik or one of the other Lucene developer=
s
> will have some ideas.
>=20
Maybe I missunderstood something, but a search shouldn't get hits, sinc=
e a=20
search removes hits from deleted documents (given that the term doen't
occur in other undeleted documents).

OTOH looking at the TermEnum one will still find terms of deleted docum=
ents.

AFAIK deleting a document doesn't mean removing a document from the ind=
ex.
Deleting a document means marking the document deleted.
The document will be removed at the next index optimization (or=20
implicit merge I guess; but I'm not sure about that)

I don't know when the frequency numbers are updated though.

So if I was Lars I'd call optimize after deleting and be on the safe si=
de...
(which might be a problem for frequent deletions on large indexes thoug=
h)

Morus

>=20
>=20
> --- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> > -----Urspr=FCngliche Nachricht-----
> > Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > Gesendet am: 29. Jun 2004, 13:46:41
> >=20
> > > I would try using the delete(Term) method, to ensure all document=
s
> > > with the given Term are removed:
> > >=20
> > >    IndexReader indexReader =3D IndexReader.open( indexPath );=20
> > >    indexReader.delete( new Term( "body", "YourTermHere" ) );
> > >    indexReader.close();
> > >    ...
> > >    IndexReader indexReader =3D IndexReader.open( indexPath );
> > >    TermEnum enum =3D indexReader.terms( new Term( "body", "" ) );=

> > >=20
> > > Something like that...
> >=20
> >=20
> > Thanks for your reply.
> >=20
> > I do not want to delete documents by terms. All my indexed document=
s=20
> > are referenced by id, so I have to use delete( id ). What makes me
> > insecure is the fact, that there are still terms in index from
> > documents
> > which are already deleted. This would mean that TermEnum is a
> > continously
> > growing beast. No problem when I query such a term, because no
> > document
> > is matching the query. But when I do computation based on indexed
> > terms
> > I heavily depend on the number of terms in the current TermEnum. Ev=
en
> > if such terms don't impact my computation - because the freq is
> > always
> > 0 - it would have an impact on my runtime behavior and complexity.
> >=20
> > Regards, Lars
> >=20
> >=20
> > > Otis
> > >=20
> > > --- Lars Martin <Lars.Martin@smb-tec.com> wrote:
> > > > Hi.
> > > >=20
> > > > Is it the normal behavior that IndexReader.terms( Term t ) stil=
l
> > > > returns Terms which are not any longer to be found in the index=
,
> > > > e.g. after removing the document containing these Terms?
> > > > I've removed nearly all documents from index but the terms()
> > method
> > > > is still returning all terms.
> > > >=20
> > > >   IndexReader indexReader =3D IndexReader.open( indexPath );=20=

> > > >   indexReader.delete( docId );
> > > >   indexReader.close();
> > > >   ...
> > > >   IndexReader indexReader =3D IndexReader.open( indexPath );
> > > >   TermEnum enum =3D indexReader.terms( new Term( "body", "" ) )=
;
> > > >=20
> > > > Any hints? Regards, Lars
>=20
>=20
> ---------------------------------------------------------------------=

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8993-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 12:06:30 2004
Return-Path: <lucene-user-return-8993-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83646 invoked from network); 30 Jun 2004 12:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 12:06:30 -0000
Received: (qmail 83542 invoked by uid 500); 30 Jun 2004 12:06:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83448 invoked by uid 500); 30 Jun 2004 12:06:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83399 invoked by uid 99); 30 Jun 2004 12:06:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 05:06:14 -0700
Received: (qmail 5515 invoked by uid 89); 30 Jun 2004 14:06:05 +0200
Received: from unknown (HELO max.osuatech.local) (max%osua.de@217.25.196.25)
  by 0 with SMTP; 30 Jun 2004 14:06:05 +0200
Date: Wed, 30 Jun 2004 15:06:54 +0300
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <166105720421.20040630150654@osua.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: how to get all terms of a given field of curtain docId?
In-Reply-To: <16610.35228.247157.936985@tanto-xipolis.de>
References: <143088710.1088516807953.JavaMail.dummy@smb-tec.com>
 <20040629135404.5225.qmail@web12708.mail.yahoo.com>
 <16610.35228.247157.936985@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Lucene users.

I'm using Lucene within last 3 years and want to say "Great thanks" to
developers and community for perfect product and support.

I'm wondering, what is the best practice to extract all terms of
given document field("contents") for the curtain document id?

Thanks in advance.

Max


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8994-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 12:25:51 2004
Return-Path: <lucene-user-return-8994-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2882 invoked from network); 30 Jun 2004 12:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 12:25:51 -0000
Received: (qmail 39489 invoked by uid 500); 30 Jun 2004 12:25:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39437 invoked by uid 500); 30 Jun 2004 12:25:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39421 invoked by uid 99); 30 Jun 2004 12:25:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [213.143.10.2] (HELO sygnet.syspace.co.uk) (213.143.10.2)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 05:25:36 -0700
Received: from fernley ([213.143.11.200]) by sygnet.syspace.co.uk
          (Netscape Messaging Server 3.6)  with ESMTP id AAA4AC1
          for <lucene-user@jakarta.apache.org>;
          Wed, 30 Jun 2004 13:27:12 +0100
Reply-To: <alex.mcmanus@fdgroup.com>
From: "Alex McManus" <alex.mcmanus@fdgroup.com>
To: <lucene-user@jakarta.apache.org>
Subject: Making a case for Lucene
Date: Wed, 30 Jun 2004 13:25:28 +0100
Organization: fdi
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Thread-Index: AcRenVP5xlXA+lQ3QEmPfgvSHdur2g==
Message-ID: <77739324A98.AAA4AC1@sygnet.syspace.co.uk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
 
we are at the initial design stages of a public-facing web-based search
application for a U.S. Federal Agency. We have proposed a clustered Lucene
architecture as the best technical solution, as we feel their current system
(based on Oracle) won't give the best performance, and introduces a lot of
unnecessary complexity and expense (as the system is read-only). We also
feel that the Lucene design will be very flexible, easier to maintain and
administor.
 
Government agencies are notoriously conservative when it comes to decisions
about technology, especially when open-source is involved. Perhaps
surprisingly, their response has been encouraging. However, they want
further re-assurance that other big-name organizations have successfully
used Lucene for large datasets.
 
First some background: we will be searching a number of repositories, the
largest of which includes about 600,000 documents, and might reach 10
million over the next 10 years. The documents are probably comparable to web
pages in terms of average size, and would be indexed under about 10
different fields. Our plan is to partition the indexes and distribute then
over a number of modern Intel/Linux servers.
 
>From what I pick up on the mailing lists, this seems well within the
capabilities of Lucene. I've looked at the Powered-by Lucene pages, but
there are two problems: (i) there are no details on the size of the datasets
being searched; (ii) I don't think our customer would recognize any of these
organizations.
 
In Otis' OnJava article, he list "FedEx, Overture, Mayo Clinic, Hewlett
Packard, New Scientist magazine, Epiphany, and others using, or at least
evaluating, Lucene". This is more like it(!), but I want to be honest and
open with our customer, and the "or at least evaluating" comment is not
concrete enough, and there is no idea of scale.

The best example that I've been able to find is the Yahoo research lab - as
I understand it, this is a Nutch (i.e. Lucene) implementation that's
providing impressive performance over a 100 million document repository.

I would be very grateful if anyone could pass on some basic details of
successful large-scale Lucene projects, and even more so if they involve a
"big name" or government agency. If you are happy to pass this information
on, but would prefer to keep it off the public mailing list, then please
email me directly - I will respect confidentiality.

I think that this problem of re-assuring customers/managers is a common one,
so I would be happy to collate any responses to this as a new Wiki entry.
Hopefully one day (with their permission) we will be able to add our
customer to the Powered-by Lucene page too.
 
Thanks in advance,
 
Alex McManus (alex.mcmanus@fdgroup.com)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8995-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 13:18:05 2004
Return-Path: <lucene-user-return-8995-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63520 invoked from network); 30 Jun 2004 13:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 13:18:05 -0000
Received: (qmail 99410 invoked by uid 500); 30 Jun 2004 13:17:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99313 invoked by uid 500); 30 Jun 2004 13:17:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99294 invoked by uid 99); 30 Jun 2004 13:17:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 06:17:47 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Wed, 30 Jun 2004 09:17:39 -0400
Message-Id: <s0e28533.096@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Wed, 30 Jun 2004 09:17:07 -0400
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: how to get all terms of a given field of curtain docId?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think, if I understand correctly, you are interested in the term vector =
for a document, which is available in 1.4.

See IndexReader.getTermFreqVector in the API.

>>> max@osua.de 06/30/04 08:06AM >>>
Hello Lucene users.

I'm using Lucene within last 3 years and want to say "Great thanks" to
developers and community for perfect product and support.

I'm wondering, what is the best practice to extract all terms of
given document field("contents") for the curtain document id?

Thanks in advance.

Max


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8996-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 13:20:42 2004
Return-Path: <lucene-user-return-8996-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71656 invoked from network); 30 Jun 2004 13:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 13:20:42 -0000
Received: (qmail 8314 invoked by uid 500); 30 Jun 2004 13:20:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8222 invoked by uid 500); 30 Jun 2004 13:20:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8121 invoked by uid 99); 30 Jun 2004 13:20:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [64.30.32.11] (HELO smtp.airsmail.com) (64.30.32.11)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 06:20:23 -0700
Received: from trinidad (trinidad.airscorp.com [10.0.4.100])
	(authenticated)
	by smtp.airsmail.com (8.11.6/8.11.6) with ESMTP id i5UDKDI07050
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 09:20:14 -0400
From: "Mark Florence" <mflorence@airsmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Running OutOfMemory while optimizing and searching
Date: Wed, 30 Jun 2004 09:20:13 -0400
Message-ID: <DIENLCKNNDCDMPIEODNMIEFIJCAA.mflorence@airsmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <20040629232923.99781.qmail@web41101.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks, Jim, your arithmetic is compelling. The queries
are ad hoc, of course, but an average query might easily
search on 10-15 fields. We avoid wildcards except in a few
special cases, because they can be very slow. Example: to
search for first name beginning with M -- firstName:M* --
takes well over 40 seconds on my index.

Given these numbers, what is your experience of hardware
necessary to get decent performance out of large, highly
interactive Lucene indexes? I'm thinking of Alex McManus's
recent post "Making a case for Lucene" where he posits an
index over 100M documents, a place where we plan to be too.

It seems that all my issues are amenable to a hardware
solution. I guess I just don't know enough to make a
recommendation to my people as to exactly what kind of
iron we need :(

-- Mark



-----Original Message-----
From: James Dunn [mailto:james_h_dunn@yahoo.com]
Sent: Tuesday, June 29, 2004 07:29 pm
To: Lucene Users List
Subject: RE: Running OutOfMemory while optimizing and searching


Mark,

What do your queries look like?  The memory required
for a query can be computed by the following equation:

1 Byte * Number of fields in your query * Number of
docs in your index

So if your query searches on all 50 fields of your 3.5
Million document index then each search would take
about 175MB.  If your 3-4 searches run concurrently
then that's about 525MB to 700MB chewed up at once.

Also, if your queries use wildcards, the memory
requirements could be much greater.

Hope that helps,

Jim
--- Mark Florence <mflorence@airsmail.com> wrote:
> Otis, Thanks for considering this problem.
>
> I'm using all the default parameters -- and still
> scratching my head!
>
> I can't see any that would control memory usage.
> Plus, a 2GB heap is
> quite big. I see others have indexes bigger than
> mine, so I'm not sure
> how to find out why mine is throwing OutOfMemory --
> not only on the
> optimize, but when 3-4 searchers are running, too.
>
> -- Mark
>
> -----Original Message-----
> From: Otis Gospodnetic
> [mailto:otis_gospodnetic@yahoo.com]
> Sent: Tuesday, June 29, 2004 01:02 am
> To: Lucene Users List
> Subject: Re: Running OutOfMemory while optimizing
> and searching
>
>
> Mark,
>
> Tough situation.  I hate when things like this
> happen on production :(.
>  You are not mentioning what you are using for
> various IndexWriter
> parameters.  You may be able to get this working by
> tweaking them (see
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWrite
> r.html#field_summary).
> Hm, now that I think about it, I am not sure if
> those are considered
> during index optimization.  I'll try checking the
> sources later.
>
> Otis
>
> --- Mark Florence <mflorence@airsmail.com> wrote:
> > Hi, I'm using Lucene to index ~3.5M documents,
> over about 50 fields.
> > The Lucene
> > index itself is ~10.5GB, spread over ~7,000 files.
> Some of these
> > files are
> > "large" -- that is, several PRX files are ~1.5GB.
> >
> > Lucene runs on a dedicated server (Linux on a 1Ghz
> Dell, with 1GB
> > RAM). Clients
> > on other machines use RMI to perform reads /
> writes. Each night the
> > server
> > automatically performs an optimize.
> >
> > The problem is that the optimize now dies with an
> OutOfMemory
> > exception, even
> > when the JVM heap size is set to its maximum of
> 2GB. I need to
> > optimize, because
> > as the number of Lucene files grows, search
> performance becomes
> > unacceptable.
> >
> > Search performance is also adversely affected
> because I've had to
> > effectively
> > single-thread reads and writes. I was using a
> simple read / write
> > lock
> > mechanism, allowing multiple readers to
> simultaneously search, but
> > now more than
> > 3-4 simultaneous readers will also cause an
> OutOfMemory condition.
> > Searches can
> > take as long as 30-40 seconds, and with
> single-threading, that's
> > crippling the
> > main client application.
> >
> > Needless to say, the Lucene index is
> mission-critical, and must run
> > 24/7.
> >
> > I've seen other posts along this same vein, but no
> definite
> > consensus. Is my
> > problem simply inadequate hardware? Should I run
> on a 64-bit
> > platform, where I
> > can allocate a Java heap of > 2GB?
> >
> > Or could there be something fundamentally "wrong"
> with my index? I
> > should add
> > that I've just spent about a week (!!) rebuilding
> from scratch, over
> > all 3.5M
> > documents.
> >
> > -- Many thanks for any help! Mark Florence
> >
> >
> >
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8997-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 13:32:30 2004
Return-Path: <lucene-user-return-8997-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81807 invoked from network); 30 Jun 2004 13:32:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 13:32:30 -0000
Received: (qmail 40703 invoked by uid 500); 30 Jun 2004 13:32:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40587 invoked by uid 500); 30 Jun 2004 13:32:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40543 invoked by uid 99); 30 Jun 2004 13:32:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 06:32:07 -0700
Received: (qmail 7392 invoked by uid 89); 30 Jun 2004 15:31:58 +0200
Received: from unknown (HELO max.osuatech.local) (max%osua.de@217.25.196.25)
  by 0 with SMTP; 30 Jun 2004 15:31:58 +0200
Date: Wed, 30 Jun 2004 16:32:48 +0300
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <148110874531.20040630163248@osua.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re[2]: how to get all terms of a given field of curtain docId?
In-Reply-To: <s0e28533.096@gwia201.syr.edu>
References: <s0e28533.096@gwia201.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Grant.

Thanks a lot for quick tip, it's really what I'm looking for.

However, I'm still using  1.3 final, so I have to migrate to newer
release. Additionally, I guess I have to modify my indexing part to
set storeTermVector flag while indexing to true for the field, which I
interested to get TermVector for.

Max

Wednesday, June 30, 2004, 4:17:07 PM, you wrote:

GI> I think, if I understand correctly, you are interested in the term vector for a document, which is available in 1.4.

GI> See IndexReader.getTermFreqVector in the API.

>>>> max@osua.de 06/30/04 08:06AM >>>
GI> Hello Lucene users.

GI> I'm using Lucene within last 3 years and want to say "Great thanks" to
GI> developers and community for perfect product and support.

GI> I'm wondering, what is the best practice to extract all terms of
GI> given document field("contents") for the curtain document id?

GI> Thanks in advance.

GI> Max


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8998-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 17:13:16 2004
Return-Path: <lucene-user-return-8998-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41259 invoked from network); 30 Jun 2004 17:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 17:13:16 -0000
Received: (qmail 12061 invoked by uid 500); 30 Jun 2004 17:13:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11944 invoked by uid 500); 30 Jun 2004 17:13:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11900 invoked by uid 99); 30 Jun 2004 17:13:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [199.107.154.185] (HELO s-utl01-sfpop.stsn.com) (199.107.154.185)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 10:13:12 -0700
Received: from sfpop.smtp.stsn.com ([127.0.0.1])
 by s-utl01-sfpop.stsn.com (SAVSMTP 3.1.0.29) with SMTP id M2004063010125616985
 for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 10:12:56 -0700
Received: from postfix.mail.ehatchersolutions.com ([10.1.186.164]) by sfpop.smtp.stsn.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 30 Jun 2004 10:12:56 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 0779D7ACC39
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 10:13:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v613)
In-Reply-To: <40E1EFC3.8040909@Sun.COM>
References: <40E1EEDD.9090600@Sun.COM> <40E1EFC3.8040909@Sun.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BCDE8E6A-CAB8-11D8-817F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser question
Date: Wed, 30 Jun 2004 10:12:59 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.613)
X-OriginalArrivalTime: 30 Jun 2004 17:12:56.0189 (UTC) FILETIME=[7C66B2D0:01C45EC5]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've seen mention of "demo3" but I'm not sure what that is referring 
to.  Where is the code for demo3 located?

But generally speaking, you wouldn't create two different query objects 
to search and then to highlight, you'd use the same one for both.

	Erik


On Jun 29, 2004, at 3:40 PM, Hetan Shah wrote:
> I am trying to tie the highlighter sample code with demo3 of the 
> distribution.
>
> There is one place where I think I am stuck. The code in demo3 has
> query = QueryParser.parse(String query, String field, String 
> analyzer); and the highlighter sample code uses a subclass of query 
> which is PhraseQuery and then adds new terms
> PhraseQuery query = new PhraseQuery();
> query.add(new Term("f", "text"));
>
> Is there a way to work this around, so that I do not have to create 
> two different query objects?
>
> Please help.
>
> Thanks you guys, you have been best.
> -H
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-8999-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 17:20:50 2004
Return-Path: <lucene-user-return-8999-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44109 invoked from network); 30 Jun 2004 17:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 17:20:49 -0000
Received: (qmail 30586 invoked by uid 500); 30 Jun 2004 17:20:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30443 invoked by uid 500); 30 Jun 2004 17:20:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30382 invoked by uid 99); 30 Jun 2004 17:20:35 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_BY_IP,SB_NEW_BULK,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received: from [64.233.170.207] (HELO mproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 10:20:32 -0700
Received: by mproxy.gmail.com with SMTP id d19so454887rnf
        for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 10:20:07 -0700 (PDT)
Received: by 10.38.206.55 with SMTP id d55mr8760rng;
        Wed, 30 Jun 2004 10:20:06 -0700 (PDT)
Message-ID: <7f5f89bf040630102043c9fb02@mail.gmail.com>
Date: Wed, 30 Jun 2004 10:20:06 -0700
From: Roy <roydebox@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: AW: Do we really need CJKAnalyzer to search japanese characters
In-Reply-To: <69D276452CD2904980D5B6AC33C9BE170180D29B@gtlbmlexs0006.bagmail.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
References: <69D276452CD2904980D5B6AC33C9BE170180D29B@gtlbmlexs0006.bagmail.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Tokenizing Chinese and Japanese is not an easy job at all. Bigram is
actually a poor man's solution, but its performance is fairly good.
According to a paper I read before, it has a decent precision and
recall. The cons are: you will have some meaningless tokens in your
index and that can impact precision; your index consumes more space.

On Tue, 29 Jun 2004 10:21:47 +0200, wolf-dietrich.materna@empolis.com
<wolf-dietrich.materna@empolis.com> wrote:
> Hello,
>=20
> Praveen Peddi [mailto:ppeddi@contextmedia.com] wrote:
> > You will have to excuse me if the question looks dumb ;)
> Note: I don't speak chinese or japanese at all, but I talked
> with expects about this topic some times ago.
>=20
> > I didn't use CJKAnalyzer and I could still search japanese characters.
> > Actually I used it first but then I thought of testing with
> > just the standard analyzer. It worked with standard analyzer also.
> Usally there are no word delimiters in japanese and chinese text,
> so tokenization is a more difficult than european languages.
>=20
> > I was able to search the metadata of our objects that has
> > chinese and japanese characters.
> Maybe the metadata contains spaces or other delimiters, so the standard
> analyser could split it into words. But this is an exception.
>=20
> > I think lucene is internally storing unicode characters. So
> > should it matter if its standard analyzer or CJK analyzer?
> The problem is how to split a chinese or japanese text into word, e.g.
> =E6=9C=AC=E5=88=9D=E5=AD=90=E5=8D=88=EF=BF=BDQ is a chinese word and mean=
s "prime meridian".
> =E5=B8=83=E8=B5=96=E6=96=AF=E5=B3=A1=E8=B0=B7=E5=9B=BD=E5=AE=B6=E5=85=AC=
=E5=9B=AD is a phrase and means "public park of bulasi xiagu",
> it should be splitted into: =E5=B8=83=E8=B5=96=E6=96=AF(bulasi), =E5=B3=
=A1=E8=B0=B7 (glen), =E5=9B=BD=E5=AE=B6 (nation ->
> public)
> and =E5=85=AC=E5=9B=AD (parc).
>=20
> > When do we have to use CJKAnalyzer really?
> You need it for both languages (unless you are using a better solution).
> A chinese (or japanese kanji) character could be a single word or a part =
of
> it.
> The meaning depends on the context: There is a kanji that means "tree",
> the same characters repeated twice means "grove" and three times means
> "forest"/"wood".
> (I hope, I remember correctly). Tokenization is not an easy task.
>=20
> There are tools, e.g. "linguistic platform" by Inxight, that are able to
> perform word
> segmentation by analysing the text using knowledge about grammar, but the=
y
> are commercial.
>=20
> A more simple solution is to split each input into sequences of two and/o=
r
> three letters.
> Note this is much better than to split it into single characters, because=
 a
> single character
> could be a part of a word with a different meaning. You are losing to muc=
h
> precision too.
> Image what happens if you split an english text into single letters and
> search
> for letters instead of words.
> CJKAnalyzer is probaly not perfect, but the developer is a native chinese
> speaker,
> so I'm sure, that he knows how to deal these problems.
> Regards,
>         Wolf-Dietrich Materna
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9000-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 17:30:26 2004
Return-Path: <lucene-user-return-9000-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48849 invoked from network); 30 Jun 2004 17:30:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 17:30:25 -0000
Received: (qmail 57028 invoked by uid 500); 30 Jun 2004 17:30:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56909 invoked by uid 500); 30 Jun 2004 17:30:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56849 invoked by uid 99); 30 Jun 2004 17:30:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [194.131.185.92] (HELO mta.micromuse.com) (194.131.185.92)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 10:30:18 -0700
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i5UHTrH03503
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 18:29:59 +0100
Message-ID: <40E2F885.9050700@tropo.com>
Date: Wed, 30 Jun 2004 10:29:41 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040421
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Making a case for Lucene
References: <77739324A98.AAA4AC1@sygnet.syspace.co.uk>
In-Reply-To: <77739324A98.AAA4AC1@sygnet.syspace.co.uk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Alex McManus wrote:

> Hi,
>  
> we are at the initial design stages of a public-facing web-based search
> application for a U.S. Federal Agency. We have proposed a clustered Lucene
> architecture as the best technical solution, as we feel their current system
> (based on Oracle) won't give the best performance, and introduces a lot of
> unnecessary complexity and expense (as the system is read-only). We also
> feel that the Lucene design will be very flexible, easier to maintain and
> administor.
>  
> Government agencies are notoriously conservative when it comes to decisions
> about technology, especially when open-source is involved. Perhaps
> surprisingly, their response has been encouraging. However, they want
> further re-assurance that other big-name organizations have successfully
> used Lucene for large datasets.
>  
> First some background: we will be searching a number of repositories, the
> largest of which includes about 600,000 documents, and might reach 10
> million over the next 10 years. The documents are probably comparable to web
> pages in terms of average size, and would be indexed under about 10
> different fields. Our plan is to partition the indexes and distribute then
> over a number of modern Intel/Linux servers.
>  
> From what I pick up on the mailing lists, this seems well within the
> capabilities of Lucene. I've looked at the Powered-by Lucene pages, but
> there are two problems: (i) there are no details on the size of the datasets
> being searched; (ii) I don't think our customer would recognize any of these
> organizations.
>  
> In Otis' OnJava article, he list "FedEx, Overture, Mayo Clinic, Hewlett
> Packard, New Scientist magazine, Epiphany, and others using, or at least
> evaluating, Lucene". This is more like it(!), but I want to be honest and
> open with our customer, and the "or at least evaluating" comment is not
> concrete enough, and there is no idea of scale.
> 
> The best example that I've been able to find is the Yahoo research lab - as
> I understand it, this is a Nutch (i.e. Lucene) implementation that's
> providing impressive performance over a 100 million document repository.
> 
> I would be very grateful if anyone could pass on some basic details of
> successful large-scale Lucene projects, and even more so if they involve a
> "big name" or government agency. If you are happy to pass this information
> on, but would prefer to keep it off the public mailing list, then please
> email me directly - I will respect confidentiality.
> 
> I think that this problem of re-assuring customers/managers is a common one,
> so I would be happy to collate any responses to this as a new Wiki entry.
> Hopefully one day (with their permission) we will be able to add our
> customer to the Powered-by Lucene page too.

Are you interested in the opposing view? Lucene is essentially a 
"library", not an application. You have to create a whole app around it 
including admin interfaces, training classes, etc. Something like Verity 
has the whole infrastructure - front end, admin i/f, training classes, 
consultants, machine sizing guides. The cost for a commercial solution 
seems easier to scope- how much does Verity (or whoever) charge? With 
some Lucene/OSS solution there's development that would need to be done 
and all the stuff that makes a complete, comprehensive app...

Of course if cost is a big issue then trying some Lucene++ solution 
makes sense. And don't get me wrong...I'm a big fan of Lucene, and when 
I was CTO at Lumos Technologies, we were cost sensitive, and I took care 
of making sure we used Lucene on the intranet and our public sites and 
were very happy w/ it. I'm just trying to make sure the, um, the, or 
one, "business viewpoint" is stated....commercial solutions already 
exist and are complete and they work and there's no development to do, 
so there's less risk... Where I'm at now I brought it up to the VP/MIS 
however it just didn't make sense for the way that dept was run, thus 
we're starting to use Verity.

- Dave


>  
> Thanks in advance,
>  
> Alex McManus (alex.mcmanus@fdgroup.com)
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9001-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 17:51:07 2004
Return-Path: <lucene-user-return-9001-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56856 invoked from network); 30 Jun 2004 17:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 17:51:06 -0000
Received: (qmail 12150 invoked by uid 500); 30 Jun 2004 17:51:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12075 invoked by uid 500); 30 Jun 2004 17:51:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12021 invoked by uid 99); 30 Jun 2004 17:51:04 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [206.190.38.235] (HELO web51804.mail.yahoo.com) (206.190.38.235)
  by apache.org (qpsmtpd/0.27.1) with SMTP; Wed, 30 Jun 2004 10:51:02 -0700
Message-ID: <20040630175043.76285.qmail@web51804.mail.yahoo.com>
Received: from [65.205.199.122] by web51804.mail.yahoo.com via HTTP; Wed, 30 Jun 2004 10:50:43 PDT
Date: Wed, 30 Jun 2004 10:50:43 -0700 (PDT)
From: John Z <zjavier_1@yahoo.com>
Subject: unlimited wildcard term expansion
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-842977342-1088617843=:73695"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-842977342-1088617843=:73695
Content-Type: text/plain; charset=us-ascii

Hi,
 
I am trying to find a way to handle the wildcard queries in Lucene without going out of memory and have been having some problems with it.  
 
I have modified some parts in search part of Lucene to just keep only about 1000 terms in memory and write the rest of the terms to a file (this is done in the getQuery() method of MultiTermQuery.java, PrefixQuery.java, etc.).  
 
Then when we create scorer objects and collect scores for each clause in the score() method of the BooleanScorer.java, after all the clauses (that are in memory) are processed, then I continue reading from the file that I created earlier.  I read out each term from the file and create a TermQuery, then get the scorer object from this TermQuery and collect the score for it.
 
Then the bucketTable will do collectHits of everything.
 
I have tested out my changes with small indexes with about 2 terms in memory and about 2 or 3 terms in the file, and it worked fine.
 
However, when I tried this out with bigger indexes (> 1 million docs) and with 1000 in memory and 972 in the file, I got into an infinite loop when doing bucketTable.collectHits().  I printed out the doc in each bucket and noticed that about half way through the bucket list, it started to have about 4 - 5 repeated docs in the rest of the list and there was no null at the end of the list to end it.
 
I have looked at everywhere and even tried to increase the bucket table size to be the sum of the number of terms in memory and number of terms in the file.  But that still did not work.
 
I would really appreciate any suggestions/ideas/help on this.
 
Thanks.
Javier

		
---------------------------------
Do you Yahoo!?
Read only the mail you want - Yahoo! Mail SpamGuard.
--0-842977342-1088617843=:73695--

From lucene-user-return-9002-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 17:56:26 2004
Return-Path: <lucene-user-return-9002-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59274 invoked from network); 30 Jun 2004 17:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 17:56:26 -0000
Received: (qmail 31073 invoked by uid 500); 30 Jun 2004 17:56:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31013 invoked by uid 500); 30 Jun 2004 17:56:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30986 invoked by uid 99); 30 Jun 2004 17:56:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_80_90,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 10:56:24 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 30 Jun 2004 13:56:01 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: <lucene-user@jakarta.apache.org>
Subject: escaping special characters while doing search doesn't seem to work
Date: Wed, 30 Jun 2004 13:56:11 -0400
Message-ID: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00AC_01C45EAA.00421AC0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-OriginalArrivalTime: 30 Jun 2004 17:56:01.0656 (UTC) FILETIME=[8175A780:01C45ECB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00AC_01C45EAA.00421AC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I was trying to search my index for a term of the form a*-b* (e.g.
ABC-DEFG). While tracing the code I noticed that Lucene breaks this term
into two terms, "ABC" and "DEFG". To prevent this, I tried escaping the
special character "-" with "\" to form the term "ABC\-DEFG" and now
Lucene search can't find this term in the index.
 
Does anyone know of this already ? Is this a bug, or I am doing
something wrong ?
 
Thanks, 
Polina

------=_NextPart_000_00AC_01C45EAA.00421AC0--


From lucene-user-return-9003-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 19:56:03 2004
Return-Path: <lucene-user-return-9003-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24567 invoked from network); 30 Jun 2004 19:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 19:56:03 -0000
Received: (qmail 47943 invoked by uid 500); 30 Jun 2004 19:56:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47677 invoked by uid 500); 30 Jun 2004 19:56:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47607 invoked by uid 99); 30 Jun 2004 19:56:00 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 12:55:56 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5UJsLpx085246
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 15:54:22 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040630155332.01cdbec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Wed, 30 Jun 2004 15:55:18 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: How to query collection for document count
In-Reply-To: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
References: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_183109343==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_183109343==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hi all,

How do I determine the number of documents that exists in a collection?

Thanks


Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_183109343==.ALT--


From lucene-user-return-9004-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 20:01:07 2004
Return-Path: <lucene-user-return-9004-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26372 invoked from network); 30 Jun 2004 20:01:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 20:01:07 -0000
Received: (qmail 62631 invoked by uid 500); 30 Jun 2004 20:01:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62435 invoked by uid 500); 30 Jun 2004 20:01:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62372 invoked by uid 99); 30 Jun 2004 20:01:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.193.202.192] (HELO nasa.lunarpages.com) (216.193.202.192)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 13:01:04 -0700
Received: from [208.138.254.150] (helo=pmc)
	by nasa.lunarpages.com with asmtp (Exim 4.34)
	id 1BflGl-0006W0-OV
	for lucene-user@jakarta.apache.org; Wed, 30 Jun 2004 13:01:23 -0700
Message-ID: <004201c45edc$ec6b7d60$5e0b19ac@CORP.AD.FACTIVA.NET>
From: "Peter M Cipollone" <lu1@bihvhar.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <00ab01c45ecb$8753bac0$5fc811ac@plitvak> <6.1.1.1.0.20040630155332.01cdbec0@localhost>
Subject: Re: How to query collection for document count
Date: Wed, 30 Jun 2004 16:00:39 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nasa.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - bihvhar.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try this...

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#numDocs()

----- Original Message ----- 
From: "Don Vaillancourt" <donv@webimpact.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 30, 2004 3:55 PM
Subject: How to query collection for document count


> Hi all,
>
> How do I determine the number of documents that exists in a collection?
>
> Thanks
>
>
> Don Vaillancourt
> Director of Software Development
>
> WEB IMPACT INC.
> 416-815-2000 ext. 245
> email: donv@web-impact.com
> web: http://www.web-impact.com
>
>
>
>
> This email message is intended only for the addressee(s)
> and contains information that may be confidential and/or
> copyright.  If you are not the intended recipient please
> notify the sender by reply email and immediately delete
> this email. Use, disclosure or reproduction of this email
> by anyone other than the intended recipient(s) is strictly
> prohibited. No representation is made that this email or
> any attachments are free of viruses. Virus scanning is
> recommended and is the responsibility of the recipient.
>
>
>
>
>
>
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9005-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 20:28:49 2004
Return-Path: <lucene-user-return-9005-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36513 invoked from network); 30 Jun 2004 20:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 20:28:49 -0000
Received: (qmail 28522 invoked by uid 500); 30 Jun 2004 20:28:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28462 invoked by uid 500); 30 Jun 2004 20:28:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28433 invoked by uid 99); 30 Jun 2004 20:28:53 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [66.207.192.6] (HELO mta0.beanfield.net) (66.207.192.6)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 13:28:50 -0700
Received: from don.webimpact.com (66-207-218-34.beanfield.net [66.207.218.34] (may be forged))
	by mta0.beanfield.net (8.12.11/8.12.6) with ESMTP id i5UKRA9K097629
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 16:27:20 -0400 (EDT)
	(envelope-from donv@webimpact.com)
Message-Id: <6.1.1.1.0.20040630161858.01b6eec0@localhost>
X-Sender: donv@web-impact.com@localhost
X-Mailer: QUALCOMM Windows Eudora Version 6.1.1.1
Date: Wed, 30 Jun 2004 16:29:29 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Don Vaillancourt <donv@webimpact.com>
Subject: Re: How to query collection for document count
In-Reply-To: <004201c45edc$ec6b7d60$5e0b19ac@CORP.AD.FACTIVA.NET>
References: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
 <6.1.1.1.0.20040630155332.01cdbec0@localhost>
 <004201c45edc$ec6b7d60$5e0b19ac@CORP.AD.FACTIVA.NET>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_185077546==.ALT"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_185077546==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Oh, man.  I have never seen such fast response from any mailing list.

You guys are incredible.

Thanks.

At 04:00 PM 30/06/2004, you wrote:
>Try this...
>
>http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#numDocs()
>
>----- Original Message -----
>From: "Don Vaillancourt" <donv@webimpact.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Wednesday, June 30, 2004 3:55 PM
>Subject: How to query collection for document count
>
>
> > Hi all,
> >
> > How do I determine the number of documents that exists in a collection?
> >
> > Thanks
> >
> >
> > Don Vaillancourt
> > Director of Software Development
> >
> > WEB IMPACT INC.
> > 416-815-2000 ext. 245
> > email: donv@web-impact.com
> > web: http://www.web-impact.com
> >
> >
> >
> >
> > This email message is intended only for the addressee(s)
> > and contains information that may be confidential and/or
> > copyright.  If you are not the intended recipient please
> > notify the sender by reply email and immediately delete
> > this email. Use, disclosure or reproduction of this email
> > by anyone other than the intended recipient(s) is strictly
> > prohibited. No representation is made that this email or
> > any attachments are free of viruses. Virus scanning is
> > recommended and is the responsibility of the recipient.
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org

Don Vaillancourt
Director of Software Development

WEB IMPACT INC.
416-815-2000 ext. 245
email: donv@web-impact.com
web: http://www.web-impact.com




This email message is intended only for the addressee(s)
and contains information that may be confidential and/or
copyright.  If you are not the intended recipient please
notify the sender by reply email and immediately delete
this email. Use, disclosure or reproduction of this email
by anyone other than the intended recipient(s) is strictly
prohibited. No representation is made that this email or
any attachments are free of viruses. Virus scanning is
recommended and is the responsibility of the recipient.












--=====================_185077546==.ALT--


From lucene-user-return-9006-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 22:32:18 2004
Return-Path: <lucene-user-return-9006-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79493 invoked from network); 30 Jun 2004 22:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 22:32:17 -0000
Received: (qmail 64824 invoked by uid 500); 30 Jun 2004 22:32:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64662 invoked by uid 500); 30 Jun 2004 22:32:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64524 invoked by uid 99); 30 Jun 2004 22:32:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [150.101.223.98] (HELO herald.aconex.com) (150.101.223.98)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 15:32:11 -0700
Received: from localhost (herald [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id F29AA6403B
	for <lucene-user@jakarta.apache.org>; Thu,  1 Jul 2004 08:31:43 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 26254-06 for <lucene-user@jakarta.apache.org>;
 Thu,  1 Jul 2004 08:31:38 +1000 (EST)
Received: from haonguyen (unknown [192.168.0.163])
	by herald.aconex.com (Postfix) with ESMTP id AF22C64037
	for <lucene-user@jakarta.apache.org>; Wed, 30 Jun 2004 18:31:38 -0400 (EDT)
From: "Paul Smith" <psmith@aconex.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Running OutOfMemory while optimizing and searching
Date: Thu, 1 Jul 2004 08:31:38 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <20040629232923.99781.qmail@web41101.mail.yahoo.com>
Thread-Index: AcReMPOBV8vtFDJVSh+EtamtWJ3lIwAwI5UQ
Message-Id: <20040630223138.AF22C64037@herald.aconex.com>
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Wow, I have say that those sort of numbers are concerning to me... Now I
know 3.5 million documents is a lot, but still... What would be causing a
query to require and hold that much memory?  I could understand that it
surely would be doing a lot of memory work, but why would it need to hold
onto/grab that much memory for the length of the query?  (this is getting
into the internals a bit, but it's always good to know what's going on under
the hood from a design decision point of view and how I would have to
structure an App to handle this sort of load).
Cheers,
Paul Smith

> 1 Byte * Number of fields in your query * Number of
> docs in your index
> 
> So if your query searches on all 50 fields of your 3.5
> Million document index then each search would take
> about 175MB.  If your 3-4 searches run concurrently
> then that's about 525MB to 700MB chewed up at once.
> 
> Also, if your queries use wildcards, the memory
> requirements could be much greater.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9007-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Jun 30 23:26:33 2004
Return-Path: <lucene-user-return-9007-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96667 invoked from network); 30 Jun 2004 23:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Jun 2004 23:26:32 -0000
Received: (qmail 6302 invoked by uid 500); 30 Jun 2004 23:26:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6158 invoked by uid 500); 30 Jun 2004 23:26:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5997 invoked by uid 99); 30 Jun 2004 23:26:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 16:26:31 -0700
Received: from [128.230.38.212] (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1293476F@mailer.syr.edu>; Wed, 30 Jun 2004 19:26:03 -0400
Message-ID: <40E34C0A.4050908@syr.edu>
Date: Wed, 30 Jun 2004 19:26:02 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: escaping special characters while doing search doesn't seem to
 work
References: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
In-Reply-To: <00ab01c45ecb$8753bac0$5fc811ac@plitvak>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Polina,

Try this (jGuru Lucene FAQ item):
<URL:http://www.jguru.com/faq/view.jsp?EID=538308>

Or, better yet, this (the Lucene Wiki "AnalysisParalysis" page):
<URL:http://wiki.apache.org/jakarta-lucene/AnalysisParalysis>

Steve

Polina Litvak wrote:
> I was trying to search my index for a term of the form a*-b* (e.g.
> ABC-DEFG). While tracing the code I noticed that Lucene breaks this term
> into two terms, "ABC" and "DEFG". To prevent this, I tried escaping the
> special character "-" with "\" to form the term "ABC\-DEFG" and now
> Lucene search can't find this term in the index.
>  
> Does anyone know of this already ? Is this a bug, or I am doing
> something wrong ?
>  
> Thanks, 
> Polina
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9008-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jul 01 00:30:32 2004
Return-Path: <lucene-user-return-9008-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20534 invoked from network); 1 Jul 2004 00:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jul 2004 00:30:32 -0000
Received: (qmail 85015 invoked by uid 500); 1 Jul 2004 00:30:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84865 invoked by uid 500); 1 Jul 2004 00:30:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84782 invoked by uid 99); 1 Jul 2004 00:30:35 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_70_80,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML,MIME_HTML_NO_CHARSET
X-Spam-Check-By: apache.org
Received: from [202.147.44.168] (HELO angel.lonelyplanet.com.au) (202.147.44.168)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 17:30:35 -0700
Received: from shiva.au.lpint.net ([192.168.61.22]) by angel with InterScan Messaging Security Suite; Thu, 01 Jul 2004 10:18:27 +1000
Received: by shiva.au.lpint.net with Internet Mail Service (5.5.2656.59)
	id <NYQ1QFA5>; Thu, 1 Jul 2004 10:28:50 +1000
Message-ID: <82E30406384FFB44AFD1012BAB230B550397B18A@shiva.au.lpint.net>
From: Toby Tremayne <Toby.Tremayne@lonelyplanet.com.au>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: Adding to an existing document
Date: Thu, 1 Jul 2004 10:28:49 +1000 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C45F02.60E796E0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C45F02.60E796E0
Content-Type: text/plain


Hi all,

      I have an index which contains information from a forum database

 

- one document per thread, containing all messages in a big text field.  If
I wanted to add a new message string to and existing thread, is there some
way I can append it to the document?

 

cheers,

Toby

 

-------------------------------------------------------------------

 

     Life is poetry - write it in your own words

 

-------------------------------------------------------------------

 

Toby Tremayne

Code Poet and Zen Master of the Heavy Sleep

Lonely Planet Publications

+61 416 048 090

ICQ: 13107913

 



______________________________________________________________________
This email, including attachments, is intended only for the addressee
and may be confidential, privileged and subject to copyright.  If you
have received this email in error, please advise the sender and delete
it.  If you are not the intended recipient of this email, you must not
use, copy or disclose its content to anyone.  You must not copy or 
communicate to others content that is confidential or subject to 
copyright, unless you have the consent of the content owner.
------_=_NextPart_001_01C45F02.60E796E0--

From lucene-user-return-9009-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jul 01 00:44:59 2004
Return-Path: <lucene-user-return-9009-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25748 invoked from network); 1 Jul 2004 00:44:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jul 2004 00:44:59 -0000
Received: (qmail 17887 invoked by uid 500); 1 Jul 2004 00:45:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17717 invoked by uid 500); 1 Jul 2004 00:45:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17652 invoked by uid 99); 1 Jul 2004 00:45:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.193.202.192] (HELO nasa.lunarpages.com) (216.193.202.192)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 17:44:57 -0700
Received: from pcp09870746pcs.ewndsr01.nj.comcast.net ([68.36.204.99] helo=pmc)
	by nasa.lunarpages.com with asmtp (Exim 4.34)
	id 1BfphP-0004w8-VM
	for lucene-user@jakarta.apache.org; Wed, 30 Jun 2004 17:45:12 -0700
Message-ID: <002001c45f04$90b1b610$6400a8c0@CORP.AD.FACTIVA.NET>
From: "Peter M Cipollone" <lu1@bihvhar.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <82E30406384FFB44AFD1012BAB230B550397B18A@shiva.au.lpint.net>
Subject: Re: Adding to an existing document
Date: Wed, 30 Jun 2004 20:44:24 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nasa.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - bihvhar.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


----- Original Message ----- 
From: "Toby Tremayne" <Toby.Tremayne@lonelyplanet.com.au>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 30, 2004 8:28 PM
Subject: Adding to an existing document


>
> Hi all,
>
>       I have an index which contains information from a forum database
>
>
>
> - one document per thread, containing all messages in a big text field.
If
> I wanted to add a new message string to and existing thread, is there some
> way I can append it to the document?

In Lucene, the only way to modify a document is to delete it and replace it
with the new version.  Given that you are working with discussion threads,
you might instead consider adding fields for thread ID and thread serial
number to each article. You could then append to threads, view entire
threads in order or delete threads as you wish using Lucene's APIs.

Pete

>
>
>
> cheers,
>
> Toby
>
>
>
> -------------------------------------------------------------------
>
>
>
>      Life is poetry - write it in your own words
>
>
>
> -------------------------------------------------------------------
>
>
>
> Toby Tremayne
>
> Code Poet and Zen Master of the Heavy Sleep
>
> Lonely Planet Publications
>
> +61 416 048 090
>
> ICQ: 13107913
>
>
>
>
>
> ______________________________________________________________________
> This email, including attachments, is intended only for the addressee
> and may be confidential, privileged and subject to copyright.  If you
> have received this email in error, please advise the sender and delete
> it.  If you are not the intended recipient of this email, you must not
> use, copy or disclose its content to anyone.  You must not copy or
> communicate to others content that is confidential or subject to
> copyright, unless you have the consent of the content owner.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-9010-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jul 01 00:47:19 2004
Return-Path: <lucene-user-return-9010-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26875 invoked from network); 1 Jul 2004 00:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jul 2004 00:47:19 -0000
Received: (qmail 24568 invoked by uid 500); 1 Jul 2004 00:47:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24465 invoked by uid 500); 1 Jul 2004 00:47:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24434 invoked by uid 99); 1 Jul 2004 00:47:26 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_50_60,HTML_MESSAGE,MIME_HTML_NO_CHARSET
X-Spam-Check-By: apache.org
Received: from [202.147.44.168] (HELO angel.lonelyplanet.com.au) (202.147.44.168)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 17:47:25 -0700
Received: from shiva.au.lpint.net ([192.168.61.22]) by angel with InterScan Messaging Security Suite; Thu, 01 Jul 2004 10:35:45 +1000
Received: by shiva.au.lpint.net with Internet Mail Service (5.5.2656.59)
	id <NYQ1QFLK>; Thu, 1 Jul 2004 10:46:08 +1000
Message-ID: <82E30406384FFB44AFD1012BAB230B550397B18B@shiva.au.lpint.net>
From: Toby Tremayne <Toby.Tremayne@lonelyplanet.com.au>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Adding to an existing document
Date: Thu, 1 Jul 2004 10:46:05 +1000 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C45F04.CA7E28B0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C45F04.CA7E28B0
Content-Type: text/plain

Sorry I'm not quite sure what you mean - I do store threadid with every
document already - is there a way to append to a single thread's body field?

cheers,
Toby

-----Original Message-----
From: Peter M Cipollone [mailto:lu1@bihvhar.com] 
Sent: Thursday, 1 July 2004 10:44 AM
To: Lucene Users List
Subject: Re: Adding to an existing document


----- Original Message ----- 
From: "Toby Tremayne" <Toby.Tremayne@lonelyplanet.com.au>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 30, 2004 8:28 PM
Subject: Adding to an existing document


>
> Hi all,
>
>       I have an index which contains information from a forum database
>
>
>
> - one document per thread, containing all messages in a big text field.
If
> I wanted to add a new message string to and existing thread, is there some
> way I can append it to the document?

In Lucene, the only way to modify a document is to delete it and replace it
with the new version.  Given that you are working with discussion threads,
you might instead consider adding fields for thread ID and thread serial
number to each article. You could then append to threads, view entire
threads in order or delete threads as you wish using Lucene's APIs.

Pete

>
>
>
> cheers,
>
> Toby
>
>
>
> -------------------------------------------------------------------
>
>
>
>      Life is poetry - write it in your own words
>
>
>
> -------------------------------------------------------------------
>
>
>
> Toby Tremayne
>
> Code Poet and Zen Master of the Heavy Sleep
>
> Lonely Planet Publications
>
> +61 416 048 090
>
> ICQ: 13107913
>
>
>
>
>
> ______________________________________________________________________
> This email, including attachments, is intended only for the addressee
> and may be confidential, privileged and subject to copyright.  If you
> have received this email in error, please advise the sender and delete
> it.  If you are not the intended recipient of this email, you must not
> use, copy or disclose its content to anyone.  You must not copy or
> communicate to others content that is confidential or subject to
> copyright, unless you have the consent of the content owner.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

------_=_NextPart_001_01C45F04.CA7E28B0--

From lucene-user-return-9011-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Jul 01 00:55:22 2004
Return-Path: <lucene-user-return-9011-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30213 invoked from network); 1 Jul 2004 00:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Jul 2004 00:55:22 -0000
Received: (qmail 44195 invoked by uid 500); 1 Jul 2004 00:55:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44136 invoked by uid 500); 1 Jul 2004 00:55:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44084 invoked by uid 99); 1 Jul 2004 00:55:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [216.193.202.192] (HELO nasa.lunarpages.com) (216.193.202.192)
  by apache.org (qpsmtpd/0.27.1) with ESMTP; Wed, 30 Jun 2004 17:55:26 -0700
Received: from pcp09870746pcs.ewndsr01.nj.comcast.net ([68.36.204.99] helo=pmc)
	by nasa.lunarpages.com with asmtp (Exim 4.34)
	id 1BfprY-00064e-2J
	for lucene-user@jakarta.apache.org; Wed, 30 Jun 2004 17:55:40 -0700
Message-ID: <002901c45f06$0701d6a0$6400a8c0@CORP.AD.FACTIVA.NET>
From: "Peter M Cipollone" <lu1@bihvhar.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <82E30406384FFB44AFD1012BAB230B550397B18B@shiva.au.lpint.net>
Subject: Re: Adding to an existing document
Date: Wed, 30 Jun 2004 20:54:53 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nasa.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - bihvhar.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There's no way to append to an existing document, but you can get the same
effect by deleting the old one and adding the new one (with the appended
info).  I was thinking that you could make a "view" of multiple postings in
one thread by searching for all articles with the same threadid and sorting
them by the serial number.

Pete

----- Original Message ----- 
From: "Toby Tremayne" <Toby.Tremayne@lonelyplanet.com.au>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 30, 2004 8:46 PM
Subject: RE: Adding to an existing document


> Sorry I'm not quite sure what you mean - I do store threadid with every
> document already - is there a way to append to a single thread's body
field?
>
> cheers,
> Toby
>
> -----Original Message-----
> From: Peter M Cipollone [mailto:lu1@bihvhar.com]
> Sent: Thursday, 1 July 2004 10:44 AM
> To: Lucene Users List
> Subject: Re: Adding to an existing document
>
>
> ----- Original Message ----- 
> From: "Toby Tremayne" <Toby.Tremayne@lonelyplanet.com.au>
> To: <lucene-user@jakarta.apache.org>
> Sent: Wednesday, June 30, 2004 8:28 PM
> Subject: Adding to an existing document
>
>
> >
> > Hi all,
> >
> >       I have an index which contains information from a forum database
> >
> >
> >
> > - one document per thread, containing all messages in a big text field.
> If
> > I wanted to add a new message string to and existing thread, is there
some
> > way I can append it to the document?
>
> In Lucene, the only way to modify a document is to delete it and replace
it
> with the new version.  Given that you are working with discussion threads,
> you might instead consider adding fields for thread ID and thread serial
> number to each article. You could then append to threads, view entire
> threads in order or delete threads as you wish using Lucene's APIs.
>
> Pete
>
> >
> >
> >
> > cheers,
> >
> > Toby
> >
> >
> >
> > -------------------------------------------------------------------
> >
> >
> >
> >      Life is poetry - write it in your own words
> >
> >
> >
> > -------------------------------------------------------------------
> >
> >
> >
> > Toby Tremayne
> >
> > Code Poet and Zen Master of the Heavy Sleep
> >
> > Lonely Planet Publications
> >
> > +61 416 048 090
> >
> > ICQ: 13107913
> >
> >
> >
> >
> >
> > ______________________________________________________________________
> > This email, including attachments, is intended only for the addressee
> > and may be confidential, privileged and subject to copyright.  If you
> > have received this email in error, please advise the sender and delete
> > it.  If you are not the intended recipient of this email, you must not
> > use, copy or disclose its content to anyone.  You must not copy or
> > communicate to others content that is confidential or subject to
> > copyright, unless you have the consent of the content owner.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


