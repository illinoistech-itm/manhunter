From java-user-return-48242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 02 15:59:40 2011
Return-Path: <java-user-return-48242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58544 invoked from network); 2 Jan 2011 15:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jan 2011 15:59:39 -0000
Received: (qmail 70502 invoked by uid 500); 2 Jan 2011 15:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70202 invoked by uid 500); 2 Jan 2011 15:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70190 invoked by uid 99); 2 Jan 2011 15:59:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jan 2011 15:59:33 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jan 2011 15:59:26 +0000
Received: by qyk10 with SMTP id 10so13224335qyk.14
        for <java-user@lucene.apache.org>; Sun, 02 Jan 2011 07:59:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=onl93/0dC3GgQIXB92kXKQE00BoiNoC3kFfZeYX9yBU=;
        b=O0zlcQI2fYvhjG7wdpLfnA0BpEWuO/X7egngEXhfAHvXH7GpADfUYklGrZVUBBnoVv
         V1qGxa9JpLH2fK1Ioi7LV36UjgliK/kC9yXbgEB527GXhwBNbh11JRviag61IFQMYv6f
         mLl0ZIoE8/n370bmtfjfhXtWwUFP3z4MCrGzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=G8odVrJTq1LHTgH3aG25Iv51aZpDugbFCKCtthMB2P604NVyJGpdCYiheio9v1jISL
         0JNu0mV9z0p693VxpTmrtmifyC0ZrAdbZtQ4qd5D0PWVCVicBgW9iHEgK2M+RFBWCPSr
         DIGqu67Sx3ufzadX4Q6MclqSTuD9MAmdHdmsk=
MIME-Version: 1.0
Received: by 10.229.82.80 with SMTP id a16mr16743355qcl.76.1293983944971; Sun,
 02 Jan 2011 07:59:04 -0800 (PST)
Received: by 10.229.235.208 with HTTP; Sun, 2 Jan 2011 07:59:04 -0800 (PST)
In-Reply-To: <1293943524498-2178710.post@n3.nabble.com>
References: <151986.56456.qm@web114720.mail.gq1.yahoo.com>
	<AANLkTinVW4-BoB_-ppPu4So+Su-Jrsbo=J2riwhQm=7g@mail.gmail.com>
	<1293918442597-2177453.post@n3.nabble.com>
	<AANLkTi=zFAHr60UJCXCL-NBuHU1S6qF4726FDtoULWpG@mail.gmail.com>
	<1293943524498-2178710.post@n3.nabble.com>
Date: Sun, 2 Jan 2011 10:59:04 -0500
Message-ID: <AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com>
Subject: Re: parsing Java log file with Lucene 3.0.3
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee4046294c70498df1d4c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee4046294c70498df1d4c
Content-Type: text/plain; charset=ISO-8859-1

Some days I just can't read...

First question: Why do you require standard analyzer?Are you really making
use of
the special processing? Take a look at other analyzer options.
PatternAnalyzer,
SimpleAnalyzer, etc.

If you really require StandardAnalyzer, consider using two fields.
field_original
and field_processed. Store (but don't index) the original string in
field_original.
pre-process and analyze (but don't store)  in field_processed. Search
against field_processed and display from field_original.

This won't bloat your index, since the operations are orthogonal anyway.

Best
Erick

On Sat, Jan 1, 2011 at 11:45 PM, Benzion G <benzionk@yahoo.com> wrote:

>
> Of course I want to store and then show to user the original message.
> That's
> why I can't change it and the place to handle the dots is the Analyzer
> area.
> So how can I make the StandardAnalyzer to handle dots as commas?
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/parsing-Java-log-file-with-Lucene-3-0-3-tp2173046p2178710.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ee4046294c70498df1d4c--

From java-user-return-48243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 06:04:34 2011
Return-Path: <java-user-return-48243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94037 invoked from network); 3 Jan 2011 06:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 06:04:34 -0000
Received: (qmail 22616 invoked by uid 500); 3 Jan 2011 06:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22380 invoked by uid 500); 3 Jan 2011 06:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22372 invoked by uid 99); 3 Jan 2011 06:04:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 06:04:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aprajapati@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 06:04:19 +0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBAB0C.02A15155"
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: IOException in updateDocument(term, document) method of IndexWriter
Date: Mon, 3 Jan 2011 11:33:57 +0530
Message-ID: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IOException in updateDocument(term, document) method of IndexWriter
Thread-Index: AcurC1lmkMbVOF1FTNiC1fAA4tieHw==
From: "Atul Prajapati" <aprajapati@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CBAB0C.02A15155
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

we are calling updateDocument(term, document) method on IndexWriter and
after that we are calling close() method of indexWriter.

=20

In Close() method i got the following IO exception.

=20

\\server01\files\luceneIndex\_c.cfs (The process cannot access the file
because it is being used by another process)

=20

Ni this case index writer was created successfully and it acquired lock
for that directory and due to above exception the lock file was not
removed.

=20

Is there any chances that _c.cfs file is used by any other process
because index writer already acquires lock on that directory?

=20

Is there any way to handle such scenario ?

=20

=20

Lucene Version : 3.0.2

OS : Windows Server 2003 64 bit

=20

=20

Thanks,

Atul


------_=_NextPart_001_01CBAB0C.02A15155--

From java-user-return-48244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 07:07:45 2011
Return-Path: <java-user-return-48244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26539 invoked from network); 3 Jan 2011 07:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 07:07:45 -0000
Received: (qmail 40658 invoked by uid 500); 3 Jan 2011 07:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40460 invoked by uid 500); 3 Jan 2011 07:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40452 invoked by uid 99); 3 Jan 2011 07:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 07:07:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [41.222.129.1] (HELO mailsc01.etisalat.com) (41.222.129.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 07:07:37 +0000
X-AuditID: 0ac40d0d-b7c3cae000000656-31-4d21756bbe80
Received: from mail.etisalat.com (caincech01.eg01.etisalat.net [10.203.101.85])
	by mailsc01.etisalat.com (Symantec Brightmail Gateway) with SMTP id 7B.F9.01622.B65712D4; Mon,  3 Jan 2011 09:06:20 +0200 (EET)
Received: from CAINCEXV01.EG01.Etisalat.net ([fe80::592:88f4:c37c:4c01]) by
 CAINCECH01.EG01.Etisalat.net ([::1]) with mapi; Mon, 3 Jan 2011 09:07:09
 +0200
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 3 Jan 2011 09:06:59 +0200
Subject: Search Score percentage, Should not be relative to the highest
 score 
Thread-Topic: Search Score percentage, Should not be relative to the highest
 score 
Thread-Index: AcurC1lmkMbVOF1FTNiC1fAA4tieHwACQ9uw
Message-ID: <2D5F79D06BBF874DA6A88596EB9A32882EF96017DA@CAINCEXV01.EG01.Etisalat.net>
References: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com>
In-Reply-To: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: BCQZ CShf DPz3 DQVN DbF5 Docv D2Hf F+O2 HHBL HmLa H488
 J2MG KB2J KERq KolT
 Lmwe;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{B238E4E8-A25E-482B-8280-00E786D4BE85};YQBtAHIALgBlAGwAYQBkAGEAdwB5AEAAZQB0AGkAcwBhAGwAYQB0AC4AYwBvAG0A;Mon,
 03 Jan 2011 07:06:59
 GMT;UwBlAGEAcgBjAGgAIABTAGMAbwByAGUAIABwAGUAcgBjAGUAbgB0AGEAZwBlACwAIABTAGgAbwB1AGwAZAAgAG4AbwB0ACAAYgBlACAAcgBlAGwAYQB0AGkAdgBlACAAdABvACAAdABoAGUAIABoAGkAZwBoAGUAcwB0ACAAcwBjAG8AcgBlAA==
x-cr-puzzleid: {B238E4E8-A25E-482B-8280-00E786D4BE85}
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAA==

Dear All,

                When using lucene to search documents, the results have a s=
core based on their relativity to the search term. Inside lucene, the score
percentage is calculated as a percentage of the maximum score achieved.

Assume we are searching for Amr ElAdawy

We get results like the following along with the score:
Omar ElAdawy --> 1.6
Amro ElAdawy --> 1.9
Amir Adawi --> 1.3


With no exact match. Then the percentage will be calculated relative to the=
 highest score ( despite the fact that it is not exact match). So the perce=
ntage will be:

Omar ElAdawy --> 84.21%
Amro ElAdawy --> 100%
Amir Adawi --> 68.42%


I need to change that, so the percentage will be relative to the exact matc=
h score. And will be something like that (assuming the Matching result scor=
e is 3):

Omar ElAdawy --> 53.33%
Amro ElAdawy --> 63.33%
Amir Adawi --> 43.33%


Regards,
Amr ElAdawy




The content of this email together with any attachments, statements and opi=
nions expressed herein contains information that is private and confidentia=
l, are intended for the named addressee/s only. If you are not the addresse=
e of this email you may not copy, forward, disclose or otherwise use it or =
any part of it in any form whatsoever. If you have received this message in=
 error, please notify Mail.Admin@etisalat.com by email immediately and dele=
te the message without making any copies.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 07:16:08 2011
Return-Path: <java-user-return-48245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28607 invoked from network); 3 Jan 2011 07:16:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 07:16:07 -0000
Received: (qmail 49184 invoked by uid 500); 3 Jan 2011 07:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48988 invoked by uid 500); 3 Jan 2011 07:16:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48968 invoked by uid 99); 3 Jan 2011 07:16:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 07:16:04 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 07:15:59 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <Amr.ElAdawy@etisalat.com>)
	id 1PZedn-0000hv-2K
	for java-user@lucene.apache.org; Sun, 02 Jan 2011 23:15:39 -0800
Date: Sun, 2 Jan 2011 23:15:39 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294038939049-2183420.post@n3.nabble.com>
Subject: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Dear All,

                When using lucene to search documents, the results have a
score based on their relativity to the search term. Inside lucene, the score 
percentage is calculated as a percentage of the maximum score achieved.

Assume we are searching for Amr ElAdawy

We get results like the following along with the score:
Omar ElAdawy --> 1.6
Amro ElAdawy --> 1.9
Amir Adawi --> 1.3


With no exact match. Then the percentage will be calculated relative to the
highest score ( despite the fact that it is not exact match). So the
percentage will be:

Omar ElAdawy --> 84.21%
Amro ElAdawy --> 100%
Amir Adawi --> 68.42%


I need to change that, so the percentage will be relative to the exact match
score. And will be something like that (assuming the Matching result score
is 3):

Omar ElAdawy --> 53.33%
Amro ElAdawy --> 63.33%
Amir Adawi --> 43.33%


using lucene 2.9.4

Regards,
Amr ElAdawy




-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2183420.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 08:43:36 2011
Return-Path: <java-user-return-48246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54606 invoked from network); 3 Jan 2011 08:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 08:43:36 -0000
Received: (qmail 7127 invoked by uid 500); 3 Jan 2011 08:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6889 invoked by uid 500); 3 Jan 2011 08:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6881 invoked by uid 99); 3 Jan 2011 08:43:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 08:43:33 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.123] (HELO web121702.mail.ne1.yahoo.com) (98.138.90.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Jan 2011 08:43:25 +0000
Received: (qmail 47952 invoked by uid 60001); 3 Jan 2011 08:43:04 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294044183; bh=aaEABC+ymWW0j5c6uB1SryxYTNqz6DKZ9XSQNnROpaY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=xg2NWWJUips8Jq5prXtinyj9Zb4gHtqgzFOwOOZw8hnbOx2BdLeGkTY9Q+j5fF2oefCgoJJOwr8/M/plYUdlbcQpMDz1o3g4d4oC08xMSl5ROsAVm8isUekKKKi2xAgkdNSluW6MoFeGrVGVIE3bIYU7Jledua4gwol1UHKoIhI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=21Kel5nAEVGLt95NNq/BP5HUHbXxqWAEshW7jJQUWzzDZRTyL17uBoDXTkwYSDMB7ipWyrbw0/A79koJ+daALscfTz/Ni+yNxksTmvYZwvJc5zcl9AQafY83Q9jNZkUFYe6umkqYv7uYaKFcsFFlQrM7qsZzA/at2vJ+0MeB8jU=;
Message-ID: <996817.46891.qm@web121702.mail.ne1.yahoo.com>
X-YMail-OSG: _BDG0KkVM1mDN4Rf.VUGdfNy1YhNlYTSpskNhBeP2OwR46b
 luikVkF7_6977vDtnpabybdufCoLfHYl3cvSVugChYMuqrgYxwafUBYtaZ0Y
 c_3KReOX2dSV2cTRxOKam2jP0VyQs7BLPrv33pzu_QQBe2zMgV0CwhFHa9sN
 ZPWYAbUNbO5GzXkUwt3xXWMRuB5nu0oI2eTByeW73Emm0huCuIOgY4BaJaOr
 m4VWmxOVn9d7GsrYNzJlwnZt2fJr8LqmcJ3_kYjMOgjQBwrL6co.iXl3WQdU
 Fvf7OLwtp_AA9SJEFwaV_XQ--
Received: from [193.140.184.4] by web121702.mail.ne1.yahoo.com via HTTP; Mon, 03 Jan 2011 00:43:03 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Mon, 3 Jan 2011 00:43:03 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest score
To: java-user@lucene.apache.org
In-Reply-To: <1294038939049-2183420.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0AIt is somehow not recommended to convert scores to percentages.=0Ahttp:/=
/wiki.apache.org/lucene-java/ScoresAsPercentages =A0=0A=0A=0A> When using l=
ucene to search documents, the results have a=0A> score based on their rela=
tivity to the search term. Inside=0A> lucene, the score =0A> percentage is =
calculated as a percentage of the maximum=0A> score achieved.=0A> =0A> Assu=
me we are searching for Amr ElAdawy=0A> =0A> We get results like the follow=
ing along with the score:=0A> Omar ElAdawy --> 1.6=0A> Amro ElAdawy --> 1.9=
=0A> Amir Adawi --> 1.3=0A> =0A> =0A> With no exact match. Then the percent=
age will be calculated=0A> relative to the=0A> highest score ( despite the =
fact that it is not exact=0A> match). So the=0A> percentage will be:=0A> =
=0A> Omar ElAdawy --> 84.21%=0A> Amro ElAdawy --> 100%=0A> Amir Adawi --> 6=
8.42%=0A> =0A> =0A> I need to change that, so the percentage will be relati=
ve=0A> to the exact match=0A> score. And will be something like that (assum=
ing the=0A> Matching result score=0A> is 3):=0A> =0A> Omar ElAdawy --> 53.3=
3%=0A> Amro ElAdawy --> 63.33%=0A> Amir Adawi --> 43.33%=0A> =0A> =0A> usin=
g lucene 2.9.4=0A> =0A> Regards,=0A> Amr ElAdawy=0A> =0A> =0A> =0A> =0A> --=
 =0A> View this message in context: http://lucene.472066.n3.nabble.com/Sear=
ch-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2=
183420.html=0A> Sent from the Lucene - Java Users mailing list archive at=
=0A> Nabble.com.=0A> =0A> -------------------------------------------------=
--------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org=0A> For additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A> =0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 09:38:19 2011
Return-Path: <java-user-return-48247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75717 invoked from network); 3 Jan 2011 09:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 09:38:19 -0000
Received: (qmail 50883 invoked by uid 500); 3 Jan 2011 09:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50656 invoked by uid 500); 3 Jan 2011 09:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45855 invoked by uid 99); 3 Jan 2011 09:31:55 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Date: Mon, 3 Jan 2011 01:31:26 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294047086752-2183784.post@n3.nabble.com>
In-Reply-To: <996817.46891.qm@web121702.mail.ne1.yahoo.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi iorixxx, Thanks a lot for your reply

I had read the link and I understand the concern, however, the normalization
is happening inside lucene. Where the normalizing value is the inverse of
the maxScore.

I can alter the code to leave the original score, however it is a business
requirements to view the matching percentage. Also, the absolute score means
nothing because we wont know the exact matching score.


I am thinking of alter the core to make the normalization relative to the
number of terms, considering that the each term will score 1, so the exact
match should score 3 if there are 3 terms.

The problem for that, I dont know how to get the number of Clauses from
Query, nor the number of Terms.
Also, some exact matching results scored more than 3 !!


any ideas?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2183784.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 11:22:39 2011
Return-Path: <java-user-return-48248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17135 invoked from network); 3 Jan 2011 11:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 11:22:39 -0000
Received: (qmail 45159 invoked by uid 500); 3 Jan 2011 11:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44985 invoked by uid 500); 3 Jan 2011 11:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44977 invoked by uid 99); 3 Jan 2011 11:22:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 11:22:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 11:22:29 +0000
Received: by wye20 with SMTP id 20so14022313wye.35
        for <java-user@lucene.apache.org>; Mon, 03 Jan 2011 03:22:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.169.1 with SMTP id m1mr20048196wel.112.1294053727625; Mon,
 03 Jan 2011 03:22:07 -0800 (PST)
Received: by 10.216.255.81 with HTTP; Mon, 3 Jan 2011 03:22:07 -0800 (PST)
In-Reply-To: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com>
References: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com>
Date: Mon, 3 Jan 2011 06:22:07 -0500
Message-ID: <AANLkTin9mfF4WaevASF2QJ-cOiA+zoytrKPeY_peTvDP@mail.gmail.com>
Subject: Re: IOException in updateDocument(term, document) method of IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post the full exception that you hit?

And maybe a standalone test case showing the problem?

Mike

On Mon, Jan 3, 2011 at 1:03 AM, Atul Prajapati <aprajapati@asite.com> wrote:
> Hi,
>
>
>
> we are calling updateDocument(term, document) method on IndexWriter and
> after that we are calling close() method of indexWriter.
>
>
>
> In Close() method i got the following IO exception.
>
>
>
> \\server01\files\luceneIndex\_c.cfs (The process cannot access the file
> because it is being used by another process)
>
>
>
> Ni this case index writer was created successfully and it acquired lock
> for that directory and due to above exception the lock file was not
> removed.
>
>
>
> Is there any chances that _c.cfs file is used by any other process
> because index writer already acquires lock on that directory?
>
>
>
> Is there any way to handle such scenario ?
>
>
>
>
>
> Lucene Version : 3.0.2
>
> OS : Windows Server 2003 64 bit
>
>
>
>
>
> Thanks,
>
> Atul
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 12:35:57 2011
Return-Path: <java-user-return-48249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46678 invoked from network); 3 Jan 2011 12:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 12:35:56 -0000
Received: (qmail 84008 invoked by uid 500); 3 Jan 2011 12:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83687 invoked by uid 500); 3 Jan 2011 12:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83679 invoked by uid 99); 3 Jan 2011 12:35:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 12:35:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.65 as permitted sender)
Received: from [129.70.204.65] (HELO mux1-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 12:35:44 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-15
Received: from pmxchannel-daemon.mux1-unibi-smtp.hrz.uni-bielefeld.de by
 mux1-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LEG00I045MZS700@mux1-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 03 Jan 2011 13:35:23 +0100 (CET)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux1-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LEG00AYL5MVNC30@mux1-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 03 Jan 2011 13:35:19 +0100 (CET)
Date: Mon, 03 Jan 2011 13:35:19 +0100
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: index files naming
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <6816_1294058123_ZZh0g37d2lvCU.00_4D21C287.5080906@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.1.3.122721, pmx8
X-Connecting-IP: 129.70.11.68
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.1.16) Gecko/20101125
 SUSE/3.0.11 Thunderbird/3.0.11
X-Virus-Checked: Checked by ClamAV on apache.org

Dear list,

some questions about the names of the index files.
With an older Lucene/Solr 4.x version from trunk my index looks like:
_2t1.fdt
_2t1.fdx
_2t1.fnm
_2t1.frq
_2t1.nrm
_2t1.prx
_2t1.tii
_2t1.tis
segments_2
segments.gen

With a most recent version from trunk it looks like:
_3a9.fdt
_3a9.fdx
_3a9.fnm
_3a9_0.frq
_3a9.nrm
_3a9_0.prx
_3a9_0.tii
_3a9_0.tis
segments_4
segments.gen

Why is there an "_0" at some files?
Is it from Lucene or from Solr or a fault in my system?

I also didn't find any information at
http://lucene.apache.org/java/3_0_3/fileformats.html

Both indexes are optimized, any idea?

Regards, Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 12:51:12 2011
Return-Path: <java-user-return-48250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53482 invoked from network); 3 Jan 2011 12:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 12:51:11 -0000
Received: (qmail 13559 invoked by uid 500); 3 Jan 2011 12:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13292 invoked by uid 500); 3 Jan 2011 12:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13283 invoked by uid 99); 3 Jan 2011 12:51:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 12:51:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.126] (HELO web121705.mail.ne1.yahoo.com) (98.138.90.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Jan 2011 12:50:59 +0000
Received: (qmail 38487 invoked by uid 60001); 3 Jan 2011 12:50:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294059037; bh=uA5epabxm8GcwW2yYyeoaB5fcSE67hCA7TZSo0WikX4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=3x4EJSHvxcmvF6h0ygwwFleUrTypqpGfyXoONKBe6DpuJG8jYNv717pS+DDlGMEBbx5N5Oa+tKpXbhYz+jRa6sy7S8AfbKKCl6yDTs0Cmsw53qnaRpbGW7EZ1FIUKZHzFKkpgpmEV1ZAHSibrtrj0YHIin13aNwZeCvfAehCKSM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ZgMJY1cyrB5nN7CUoKqHaxK6t7o/VwUuA8vyE3Agi7KBpEJ3ATzveUF4fdEc2N7tFOWS+x9crAV8xbB5bWp6BTJLYapbrOzx4q5jaSuQIKsAodAREbxwUVNQibAwsYuo0jnPZUAVwnlKXuZj4V7xBtUfbGE1M3x3Sr1lRpdbgBc=;
Message-ID: <846141.33754.qm@web121705.mail.ne1.yahoo.com>
X-YMail-OSG: GRCixZcVM1n6zOy7jr41a0n4IiD3x06zBItm47spVHKAmco
 aZo0Pt6xkr0XwPEIE9icM3N_lT31gPBHqHoEOmRV9km_QBCGKKrtjVk7xKK8
 f.93GuUQrwT3hzvJb7Q9T3aqqHEoehsCCF0tIMG5zC8CVanQLXWbveonmOCr
 GEvS73d67MMOJXy28CWDAQ3kPMoHeeAMqKXLU..wsTjf.4WyVw.q0QWmJdm2
 5.g9W8DERw90P76jE2tT.474wsEy6EK1EqnqwKLSzkJ.ZQK2.wAiDOn.sZZt
 EyRLubnncGqQAqUkdDk1aGw--
Received: from [193.140.184.4] by web121705.mail.ne1.yahoo.com via HTTP; Mon, 03 Jan 2011 04:50:37 PST
X-Mailer: YahooMailClassic/11.4.9 YahooMailWebService/0.8.107.285259
Date: Mon, 3 Jan 2011 04:50:37 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest score
To: java-user@lucene.apache.org
In-Reply-To: <1294047086752-2183784.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> I had read the link and I understand the concern, however,
> the normalization
> is happening inside lucene. Where the normalizing value is
> the inverse of
> the maxScore.
> 
> I can alter the code to leave the original score, however
> it is a business
> requirements to view the matching percentage. Also, the
> absolute score means
> nothing because we wont know the exact matching score.

Can you re-phrase your requirement? What do you mean by exact match?

Query: term1 term2
Doc1: term1 term2
Doc2: term1 term2 term3 term4

Here both doc1 and doc2 are "exact match" or just Doc1?

If you want to capture the "how many query terms matched" information may be you can use http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Explanation.html

Or you can modify similarity to ignore all things other than coord, so that your documents are sorted by "how many of the query terms are found in the specified document" 
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_coord  



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 12:52:10 2011
Return-Path: <java-user-return-48251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55008 invoked from network); 3 Jan 2011 12:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 12:52:10 -0000
Received: (qmail 18598 invoked by uid 500); 3 Jan 2011 12:52:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18567 invoked by uid 500); 3 Jan 2011 12:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18559 invoked by uid 99); 3 Jan 2011 12:52:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 12:52:07 +0000
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 12:52:02 +0000
Received: by qwh6 with SMTP id 6so14000590qwh.35
        for <java-user@lucene.apache.org>; Mon, 03 Jan 2011 04:51:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=/XOjada7GEXnJGuhuKnZ0II5rrWecEE+dahiHFSV/8o=;
        b=O8kDcRsEuYWsS/bY5XzQlNYyGaucdt+NStqXGpbAUR0NtPqVcr+rOrusBYwp9XXH4G
         pfLdF7ZhMrkJV6z0cNegyRHgRvu78sSkwQ7C+ANAzFO6DruzdS6UJWdBHQ3UOfaeqUKI
         LKB/fE0/Ke1LSfd3hyf6CjBhlIDxBoXgVYv7M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=HLobYAsGFhnuxjVcjLGlq8eqJKjlGMaOU80EMm2I87hrIw4X2vETDME9C50D/lFska
         YKVXYaBNFOfEgKxxTpDEhObNOoNF49Z0mnp4tW4o6pjchMEYyEB3NXm3TU5Pk4NGaePe
         M1FI1PITl6NqUWKsx//Tdbs6Xonvca7JUIXu4=
MIME-Version: 1.0
Received: by 10.224.67.139 with SMTP id r11mr12765238qai.244.1294059100736;
 Mon, 03 Jan 2011 04:51:40 -0800 (PST)
Received: by 10.220.183.4 with HTTP; Mon, 3 Jan 2011 04:51:40 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <6816_1294058123_ZZh0g37d2lvCU.00_4D21C287.5080906@uni-bielefeld.de>
References: <6816_1294058123_ZZh0g37d2lvCU.00_4D21C287.5080906@uni-bielefeld.de>
Date: Mon, 3 Jan 2011 13:51:40 +0100
Message-ID: <AANLkTimU88Yp1L0qYqcdGj8foCuHemYxQyvq=9HvRjEm@mail.gmail.com>
Subject: Re: index files naming
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hey Bernd,

On Mon, Jan 3, 2011 at 1:35 PM, Bernd Fehling
<bernd.fehling@uni-bielefeld.de> wrote:
> Dear list,
>
> some questions about the names of the index files.
> With an older Lucene/Solr 4.x version from trunk my index looks like:
> _2t1.fdt
> _2t1.fdx
> _2t1.fnm
> _2t1.frq
> _2t1.nrm
> _2t1.prx
> _2t1.tii
> _2t1.tis
> segments_2
> segments.gen
>
> With a most recent version from trunk it looks like:
> _3a9.fdt
> _3a9.fdx
> _3a9.fnm
> _3a9_0.frq
> _3a9.nrm
> _3a9_0.prx
> _3a9_0.tii
> _3a9_0.tis
> segments_4
> segments.gen
>
> Why is there an "_0" at some files?
> Is it from Lucene or from Solr or a fault in my system?

lucene 4.0 as you might know has the ability to plug in a Codec which
has full control over how postings are stored, which format is used
and what files are written. Each Field within a segment can have its
own codec ie. field "foo" can have "Standard" and Field "bar" uses
"Pulsing" for instance. In such a case, since Pulsing is just a
wrapper around Standard - Codec, both codecs try to write the same set
of files per segment. For that reason we introduced a codec ID valid
per segment. Its is really an ordinal build from the set of codecs
used per segment. this ordinal is used to build the filenames, in your
case you only have one codec (I suppose its Standard - Codec) with the
ord "0". This ordinal is used for all files that codec writes. The
files without that ordinal (nrm, fdt, fdx and fnrm) are written by the
IndexWriter directly but the functionality behind it might be exposed
via codec sooner or later.

So, afterall this is a lucene functionality and your system is just
fine doing the right thing!
>
> I also didn't find any information at
> http://lucene.apache.org/java/3_0_3/fileformats.html

Its not a 3.3 feature - codecs are introduced in 4.0 aka. trunk.

simon
>
> Both indexes are optimized, any idea?
>
> Regards, Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 13:21:55 2011
Return-Path: <java-user-return-48252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73725 invoked from network); 3 Jan 2011 13:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 13:21:54 -0000
Received: (qmail 57902 invoked by uid 500); 3 Jan 2011 13:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57647 invoked by uid 500); 3 Jan 2011 13:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 38788 invoked by uid 99); 3 Jan 2011 13:09:57 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Date: Mon, 3 Jan 2011 05:09:28 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294060168195-2184613.post@n3.nabble.com>
In-Reply-To: <846141.33754.qm@web121705.mail.ne1.yahoo.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com> <1294047086752-2183784.post@n3.nabble.com> <846141.33754.qm@web121705.mail.ne1.yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Consider the following.

Query: term1 term2
Doc1: term1 term2
Doc2: term1 term2 term3 term4 
Doc3: term1 term1 term3
Doc4: term3 term4

For the above documents, Doc1 and Doc2 will b exact match ( as they contain
all the terms in the search Query). Doc3 is partially match as it contains
term1 only (we neglect the term frequency tf always 1


The score percentage ( calculated by Lucene in Hits.java line 133) and will
be 

Doc1: 100%
Doc2: 100%
Doc3:  80%

This is not a problem at all, the problem occurs when there is no exact
matching document as following:

Query: term1 term2
Doc1: term1 term3
Doc2: term2  term3 term4 
Doc3: term1 term1 term3
Doc4: term3 term4


The score will be calculated as 

Doc1: 100%
Doc2: 100%
Doc3:  50%

You can see that Doc1 and Doc2 got 100% despite that they are not exact
match. but as they got the highest score, Lucene considers them 100% match. 

This is my problem

All I need is to make the percentage correct in the second case so it will
be something as 

Doc1: 50% 
Doc2: 50%
Doc3:  30%

I hope I made myself clear.


-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2184613.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 13:22:38 2011
Return-Path: <java-user-return-48253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74148 invoked from network); 3 Jan 2011 13:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 13:22:38 -0000
Received: (qmail 59931 invoked by uid 500); 3 Jan 2011 13:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59870 invoked by uid 500); 3 Jan 2011 13:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59862 invoked by uid 99); 3 Jan 2011 13:22:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 13:22:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 13:22:27 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=UTF-8
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LEG00I007SVOY00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 03 Jan 2011 14:22:07 +0100 (CET)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LEG00KPJ7SUYJB0@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 03 Jan 2011 14:22:07 +0100 (CET)
Date: Mon, 03 Jan 2011 14:22:06 +0100
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: index files naming
In-reply-to: <AANLkTimU88Yp1L0qYqcdGj8foCuHemYxQyvq=9HvRjEm@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <6814_1294060927_ZZh0g67EbCtpw.00_4D21CD7E.7080001@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.1.3.131514, pmx8
X-Connecting-IP: 129.70.11.68
References:
 <6816_1294058123_ZZh0g37d2lvCU.00_4D21C287.5080906@uni-bielefeld.de>
 <AANLkTimU88Yp1L0qYqcdGj8foCuHemYxQyvq=9HvRjEm@mail.gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.1.16) Gecko/20101125
 SUSE/3.0.11 Thunderbird/3.0.11
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Simon,

thanks a lot for your good explanation.

Best wishes,
Bernd


Am 03.01.2011 13:51, schrieb Simon Willnauer:
> Hey Bernd,
> 
> On Mon, Jan 3, 2011 at 1:35 PM, Bernd Fehling
> <bernd.fehling@uni-bielefeld.de> wrote:
>> Dear list,
>>
>> some questions about the names of the index files.
>> With an older Lucene/Solr 4.x version from trunk my index looks like:
>> _2t1.fdt
>> _2t1.fdx
>> _2t1.fnm
>> _2t1.frq
>> _2t1.nrm
>> _2t1.prx
>> _2t1.tii
>> _2t1.tis
>> segments_2
>> segments.gen
>>
>> With a most recent version from trunk it looks like:
>> _3a9.fdt
>> _3a9.fdx
>> _3a9.fnm
>> _3a9_0.frq
>> _3a9.nrm
>> _3a9_0.prx
>> _3a9_0.tii
>> _3a9_0.tis
>> segments_4
>> segments.gen
>>
>> Why is there an "_0" at some files?
>> Is it from Lucene or from Solr or a fault in my system?
> 
> lucene 4.0 as you might know has the ability to plug in a Codec which
> has full control over how postings are stored, which format is used
> and what files are written. Each Field within a segment can have its
> own codec ie. field "foo" can have "Standard" and Field "bar" uses
> "Pulsing" for instance. In such a case, since Pulsing is just a
> wrapper around Standard - Codec, both codecs try to write the same set
> of files per segment. For that reason we introduced a codec ID valid
> per segment. Its is really an ordinal build from the set of codecs
> used per segment. this ordinal is used to build the filenames, in your
> case you only have one codec (I suppose its Standard - Codec) with the
> ord "0". This ordinal is used for all files that codec writes. The
> files without that ordinal (nrm, fdt, fdx and fnrm) are written by the
> IndexWriter directly but the functionality behind it might be exposed
> via codec sooner or later.
> 
> So, afterall this is a lucene functionality and your system is just
> fine doing the right thing!
>>
>> I also didn't find any information at
>> http://lucene.apache.org/java/3_0_3/fileformats.html
> 
> Its not a 3.3 feature - codecs are introduced in 4.0 aka. trunk.
> 
> simon
>>
>> Both indexes are optimized, any idea?
>>
>> Regards, Bernd
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 13:54:28 2011
Return-Path: <java-user-return-48254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84508 invoked from network); 3 Jan 2011 13:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 13:54:28 -0000
Received: (qmail 96595 invoked by uid 500); 3 Jan 2011 13:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96455 invoked by uid 500); 3 Jan 2011 13:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96445 invoked by uid 99); 3 Jan 2011 13:54:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 13:54:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aprajapati@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 13:54:19 +0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: IOException in updateDocument(term, document) method of IndexWriter
Date: Mon, 3 Jan 2011 19:23:56 +0530
Message-ID: <40578D10736BF24E8C4F0384CB6633FE01B45624@indiaserv01.asite.asitehq.com>
In-Reply-To: <AANLkTin9mfF4WaevASF2QJ-cOiA+zoytrKPeY_peTvDP@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IOException in updateDocument(term, document) method of IndexWriter
Thread-Index: AcurOIqVPCKlcfQ/S5eUiPz+aZwkqgAFPj/Q
References: <40578D10736BF24E8C4F0384CB6633FE01B455B9@indiaserv01.asite.asitehq.com> <AANLkTin9mfF4WaevASF2QJ-cOiA+zoytrKPeY_peTvDP@mail.gmail.com>
From: "Atul Prajapati" <aprajapati@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Right now we don't have full stack trace for this exception and this
issue is not easily replicable. We have updated our code to log full
stack trace and once we get this replicated i will post the full stack
trace here.

If anyone have any idea about this then please let us know so we can
investigate it further in that direction.

Thanks,
Atul

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Monday, January 03, 2011 4:52 PM
To: java-user@lucene.apache.org
Subject: Re: IOException in updateDocument(term, document) method of
IndexWriter

Can you post the full exception that you hit?

And maybe a standalone test case showing the problem?

Mike

On Mon, Jan 3, 2011 at 1:03 AM, Atul Prajapati <aprajapati@asite.com>
wrote:
> Hi,
>
>
>
> we are calling updateDocument(term, document) method on IndexWriter=20
> and after that we are calling close() method of indexWriter.
>
>
>
> In Close() method i got the following IO exception.
>
>
>
> \\server01\files\luceneIndex\_c.cfs (The process cannot access the=20
> file because it is being used by another process)
>
>
>
> Ni this case index writer was created successfully and it acquired=20
> lock for that directory and due to above exception the lock file was=20
> not removed.
>
>
>
> Is there any chances that _c.cfs file is used by any other process=20
> because index writer already acquires lock on that directory?
>
>
>
> Is there any way to handle such scenario ?
>
>
>
>
>
> Lucene Version : 3.0.2
>
> OS : Windows Server 2003 64 bit
>
>
>
>
>
> Thanks,
>
> Atul
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 15:17:12 2011
Return-Path: <java-user-return-48255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47776 invoked from network); 3 Jan 2011 15:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 15:17:11 -0000
Received: (qmail 30951 invoked by uid 500); 3 Jan 2011 15:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30845 invoked by uid 500); 3 Jan 2011 15:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30810 invoked by uid 99); 3 Jan 2011 15:17:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 15:17:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Jan 2011 15:17:07 +0000
Received: (qmail 47713 invoked by uid 99); 3 Jan 2011 15:16:46 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 15:16:46 +0000
Subject: Re: Using Lucene to search live, being-edited documents
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=iso-8859-1
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
Date: Mon, 3 Jan 2011 10:16:44 -0500
Cc: adam.saltiel@gmail.com
Content-Transfer-Encoding: quoted-printable
Message-Id: <499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
References: <tencent_016058B91870538D7A4400B4@qq.com> <1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry> <AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com> <37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry> <AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)

There is also the MemoryIndex, which is in contrib and is designed for =
one document at a time.  That being said, basic grep/regex is probably =
fast enough.

-Grant

On Dec 29, 2010, at 9:27 PM, Lance Norskog wrote:

> Check out the Instantiated contrib for Lucene. This is an alternative
> in-memory data structure that does not need commits and is faster (and
> larger) than the Lucene Directory system.
>=20
> On Wed, Dec 29, 2010 at 9:15 AM,  <adam.saltiel@gmail.com> wrote:
>> What has this to do with Lucene? You're thinking its index would be =
faster than your own search algorithm. Would it though? Do you really =
need an index or a good pattern matcher? I can't see what the stream =
buffer being flushed by the user has to do with it? Don't you have to =
control that behaviour?
>>=20
>> Sent using BlackBerry=AE from Orange
>>=20
>> -----Original Message-----
>> From: software visualization <softwarevisualization@gmail.com>
>> Date: Wed, 29 Dec 2010 11:55:17
>> To: <java-user@lucene.apache.org>; <adam.saltiel@gmail.com>
>> Reply-To: softwarevisualization@gmail.com
>> Subject: Re: Using Lucene to search live, being-edited documents
>>=20
>> I am writing a text editor and have to provide  a certain search
>> functionality .
>>=20
>> The  use case is for single user. A single  document is potentially =
very
>> large and numerous such documents may be open and unflushed at any =
given
>> time. Think many files of an IDE, except the files are larger. The =
user is
>> free to change, say, variables names across documents which may be =
separate
>> files opened simultaneously in a variety of tabs (say)  and being =
edited
>> with no guarantee that the user has flushed or saved any of it.
>>=20
>>=20
>>=20
>>=20
>>=20
>> On Wed, Dec 29, 2010 at 10:37 AM, <adam.saltiel@gmail.com> wrote:
>>=20
>>> This is interesting. What are we driving at here? A single user? =
That
>>> doesn't make sense to unless you want to flag certain things as they
>>> construct the document. Or else why don't they know what is in their =
own
>>> document? There must be other ways apart from Lucene. It seems to me =
you
>>> want each line parsed as soon as entered and matched against some =
criteria.
>>> I would look at plugins for Open Office first. Or any other text =
editor. But
>>> not sure you have given enough information.
>>> Sent using BlackBerry=AE from Orange
>>>=20
>>> -----Original Message-----
>>> From: "Sean" <spacehero@foxmail.com>
>>> Date: Wed, 29 Dec 2010 15:35:17
>>> To: java-user<java-user@lucene.apache.org>
>>> Reply-To: java-user@lucene.apache.org
>>> Subject: Re:Using Lucene to search live, being-edited documents
>>>=20
>>> Does it make any sense?
>>>  Every time a search result is shown, the original document could =
have been
>>> changed,  no matter how fast the indexing speed is.
>>> If you can accept this inconsistency, you do not need to index so
>>> frequently at all.
>>>=20
>>>=20
>>> ------------------ Original ------------------
>>> From:  "software visualization"<softwarevisualization@gmail.com>;
>>> Date:  Wed, Dec 29, 2010 06:06 AM
>>> To:  "java-user"<java-user@lucene.apache.org>;
>>>=20
>>> Subject:  Using Lucene to search live, being-edited documents
>>>=20
>>>=20
>>> This has probably been asked before but I couldn't find it, so...
>>>=20
>>> Is it possible / advisable / practical to use Lucene as the  basis =
of a
>>> live
>>> document search capability? By "live document" I mean a largish =
document
>>> such as a word processor might be able to handle which is being =
edited
>>> currently. Examples would be Word documents of some size that are =
begin
>>> written, really huge Java files, etc.
>>>=20
>>> The user is sitting there typing away and of course everything is =
changing
>>> in real time. This seems to be orthogonal to the idea of a Lucene =
index
>>> which is costly to construct  and costly to update.
>>>=20
>>> TIA
>>>=20
>>=20
>>=20
>=20
>=20
>=20
> --=20
> Lance Norskog
> goksron@gmail.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 15:31:58 2011
Return-Path: <java-user-return-48256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55169 invoked from network); 3 Jan 2011 15:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 15:31:58 -0000
Received: (qmail 68937 invoked by uid 500); 3 Jan 2011 15:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68845 invoked by uid 500); 3 Jan 2011 15:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68836 invoked by uid 99); 3 Jan 2011 15:31:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 15:31:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 15:31:48 +0000
Received: by bwz8 with SMTP id 8so13596504bwz.35
        for <java-user@lucene.apache.org>; Mon, 03 Jan 2011 07:31:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Mpvs/2U8gxrKtTBfMXejJipqyfFuAkyX1aBho+klGr8=;
        b=D7f8U+8ejHaRdd20MRqjDbEDe4rborEb78tzwWgTJ9+KLiaSsTUQdSg/xJDcJ2qZZR
         1+L6375p+ALCBdOQIcDI/1/A0mhXTrO5rcsUQtDjeMX7kk+h/MNc5jKAzgNvu/eeN0Eh
         cUaTB+ttAYia1OZVGNdXu6etit8wV/j+jwYt8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=VmyHp4lR6p5ZCZhI/xXjNGV4IgOsPI38AaliZOmWBjn7uS3Qa9GfLBsHGsY2GqMBZF
         X2Y6adGDbfBXGJrGXI6kHyaCtdI6yttTX7kpUGX+Yfje86aOutu4Ue5Fq4f8mrtzDWOq
         M+TlwxKbqTK0LzsyGBeydEHQNXHSz/CnCn4/A=
Received: by 10.204.98.75 with SMTP id p11mr89438bkn.12.1294068686490; Mon, 03
 Jan 2011 07:31:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Mon, 3 Jan 2011 07:31:06 -0800 (PST)
In-Reply-To: <499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
References: <tencent_016058B91870538D7A4400B4@qq.com> <1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
 <AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
 <37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
 <AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com> <499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
From: Robert Muir <rcmuir@gmail.com>
Date: Mon, 3 Jan 2011 10:31:06 -0500
Message-ID: <AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.org> wrot=
e:
> There is also the MemoryIndex, which is in contrib and is designed for on=
e document at a time. =C2=A0That being said, basic grep/regex is probably f=
ast enough.
>

In cases where you are doing a 'find' in a document similar to what a
wordprocessor would do (especially if you want to iterate
forwards/backwards through matches etc), you might want to consider
something like http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringS=
earch.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 16:34:53 2011
Return-Path: <java-user-return-48257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90665 invoked from network); 3 Jan 2011 16:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 16:34:53 -0000
Received: (qmail 54167 invoked by uid 500); 3 Jan 2011 16:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53976 invoked by uid 500); 3 Jan 2011 16:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53968 invoked by uid 99); 3 Jan 2011 16:34:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 16:34:50 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.123] (HELO web121702.mail.ne1.yahoo.com) (98.138.90.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Jan 2011 16:34:45 +0000
Received: (qmail 79504 invoked by uid 60001); 3 Jan 2011 16:34:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294072463; bh=7appKwuv5Veux+rYEf4cTP0zb7VoEOmg9sjAXbKWg5k=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=pn6YWn/rjn7lF1hjtnY1Psv9HnSSP8Y8oIQgDYSwRGmzIoM6pAi6aGhRkhwdzBnWzN9bLzi+uwsI97QZDbLlCq2DaEMWEDAjnlEP9eBlspZFAA0jMZx3FuJhNzL7wOUr5loXpaDJiS64UAsvF//0I/O/8BHcMPkm+4nwOF8qewg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UR1Un2YZDbwuIbG9mZkftDvsVidG4t5OVxC0ADnHlnSgSJ29Ezhr/e1BmR0b4weA8kDOJTODio9RCmFsGl7vQbHH3fNdDHzEA8splppP1dx29Rx+tTFQzCMXWi/0cijC081rFcpDrequqQIj2Nmo3LKAZPCSnwm8X46seDwTmto=;
Message-ID: <994537.79417.qm@web121702.mail.ne1.yahoo.com>
X-YMail-OSG: Rfv.LkwVM1ksdNxdPj9CND7UKSeROy.LBzeC8APtgR8JMD0
 P2cYHJYpTk7tjihwDIMCRfca9bnngYBy0frF04PPD36nOAjzYyJ6jqpodWBP
 _jweDk2GMknufvZ4XN5X05TjlxYVynEZSmwXt4bfCR1TdBo3FAuDI6h6sAVC
 M4eFtRmK53li6481.GO42t7_FlSnECYelc13jGx73Z0fvKI7D8nP3iXu6_KN
 PDh7q.sHaTlS_Fnm3.iTJeT_JFgSQ5851_5_7stXh7YEoXcAY0GvwkbsCaLj
 C7P6tNfx4SW1VGn6.1hyAOQ--
Received: from [88.231.28.92] by web121702.mail.ne1.yahoo.com via HTTP; Mon, 03 Jan 2011 08:34:23 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Mon, 3 Jan 2011 08:34:23 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest score
To: java-user@lucene.apache.org
In-Reply-To: <1294060168195-2184613.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0ASo, can we say that if you have something that gives you the "how many q=
uery terms matched" info, will that satisfy your requirement?=0A=0AQuery: t=
erm1 term2=0A=0ADoc1: term1 term2   =3D> n=3D2 =3D> %100=0ADoc2: term1 term=
2 term3 term4 =3D> n=3D2 =3D> %100 =0ADoc3: term1 term1 term3   =3D> n=3D1 =
=3D> %50=0ADoc4: term2 term3 term4   =3D> n=3D1 =3D> %50=0A=0A=0AIf yes Exp=
lanation will you give that info in coord part. For example coord(1/3) mean=
s one query term matched and there are total 3 query terms.=0A=0AHere is an=
 example Explanation:=0A=0A0.013397463 =3D (MATCH) product of:=0A  0.040192=
388 =3D (MATCH) sum of:=0A    0.040192388 =3D (MATCH) weight(pagetext:para =
in 34930), product of:=0A      0.46250778 =3D queryWeight(pagetext:para), p=
roduct of:=0A        3.1780937 =3D idf(docFreq=3D5546, maxDocs=3D48977)=0A =
       0.14552994 =3D queryNorm=0A      0.086901 =3D (MATCH) fieldWeight(pa=
getext:para in 34930), product of:=0A        1.0 =3D tf(termFreq(pagetext:p=
ara)=3D1)=0A        3.1780937 =3D idf(docFreq=3D5546, maxDocs=3D48977)=0A  =
      0.02734375 =3D fieldNorm(field=3Dpagetext, doc=3D34930)=0A  0.3333333=
4 =3D coord(1/3)=0A=0A=0A=0A--- On Mon, 1/3/11, Amr ElAdawy <Amr.ElAdawy@et=
isalat.com> wrote:=0A=0A> From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>=0A> =
Subject: Re: Search Score percentage, Should not be relative to the highest=
 score=0A> To: java-user@lucene.apache.org=0A> Date: Monday, January 3, 201=
1, 3:09 PM=0A> =0A> Consider the following.=0A> =0A> Query: term1 term2=0A>=
 Doc1: term1 term2=0A> Doc2: term1 term2 term3 term4 =0A> Doc3: term1 term1=
 term3=0A> Doc4: term3 term4=0A> =0A> For the above documents, Doc1 and Doc=
2 will b exact match (=0A> as they contain=0A> all the terms in the search =
Query). Doc3 is partially match=0A> as it contains=0A> term1 only (we negle=
ct the term frequency tf always 1=0A> =0A> =0A> The score percentage ( calc=
ulated by Lucene in Hits.java=0A> line 133) and will=0A> be =0A> =0A> Doc1:=
 100%=0A> Doc2: 100%=0A> Doc3:=A0 80%=0A> =0A> This is not a problem at all=
, the problem occurs when there=0A> is no exact=0A> matching document as fo=
llowing:=0A> =0A> Query: term1 term2=0A> Doc1: term1 term3=0A> Doc2: term2=
=A0 term3 term4 =0A> Doc3: term1 term1 term3=0A> Doc4: term3 term4=0A> =0A>=
 =0A> The score will be calculated as =0A> =0A> Doc1: 100%=0A> Doc2: 100%=
=0A> Doc3:=A0 50%=0A> =0A> You can see that Doc1 and Doc2 got 100% despite =
that they=0A> are not exact=0A> match. but as they got the highest score, L=
ucene considers=0A> them 100% match. =0A> =0A> This is my problem=0A> =0A> =
All I need is to make the percentage correct in the second=0A> case so it w=
ill=0A> be something as =0A> =0A> Doc1: 50% =0A> Doc2: 50%=0A> Doc3:=A0 30%=
=0A> =0A> I hope I made myself clear.=0A> =0A> =0A> -- =0A> View this messa=
ge in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-S=
hould-not-be-relative-to-the-highest-score-tp2183420p2184613.html=0A> Sent =
from the Lucene - Java Users mailing list archive at=0A> Nabble.com.=0A> =
=0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 03 16:36:05 2011
Return-Path: <java-user-return-48258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92067 invoked from network); 3 Jan 2011 16:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jan 2011 16:36:05 -0000
Received: (qmail 57726 invoked by uid 500); 3 Jan 2011 16:36:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57668 invoked by uid 500); 3 Jan 2011 16:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57660 invoked by uid 99); 3 Jan 2011 16:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 16:36:02 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jan 2011 16:35:57 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1PZnNg-0002zG-Ds
	for java-user@lucene.apache.org; Mon, 03 Jan 2011 08:35:36 -0800
Date: Mon, 3 Jan 2011 08:35:36 -0800 (PST)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1294072536426-2185926.post@n3.nabble.com>
Subject: Indexing large XML dumps
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hello everybody,

I am currently indexing wikipedia dumps and create an index for versioned
document collections. As far everything is working fine but I have never
thought that single articles of wikipedia would reach a size of around 2 GB!
One article for example has 20000 versions with an average length of 60000
characters  for each (HUGE in memory!). This means I need a heap space
around 4 GB to perform indexing and I would like to decrease my memory
consumption ;).

At the moment I load every wikipedia article completely into memory
containing all versions. Then I collect some statistical data about the
article to store extra information about term occurences which are written
into the index as payloads. The statistic is created during an own
tokenization run which happens before the document is written into index.
This means I am analyzing my documents twice! :( I know there is a
CachingTokenFilter but I haven't found how and where to implement it exactly
(I tried it in my Analyzer but stream.reset() seems not to work). Does
somebody have a nice example?

1) Can I somehow avoid loading one complete article to get my statistics? 
2) Is it possible to index large files without completely loading it into a
field? 
3) How can I avoid to parse an article twice? 

Best regards 
Alex


-- 
View this message in context: http://lucene.472066.n3.nabble.com/Indexing-large-XML-dumps-tp2185926p2185926.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 07:33:05 2011
Return-Path: <java-user-return-48259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18225 invoked from network); 4 Jan 2011 07:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 07:33:04 -0000
Received: (qmail 9228 invoked by uid 500); 4 Jan 2011 07:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8806 invoked by uid 500); 4 Jan 2011 07:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8798 invoked by uid 99); 4 Jan 2011 07:32:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 07:32:59 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 07:32:52 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1Pa1Ne-0005oz-Uk
	for java-user@lucene.apache.org; Mon, 03 Jan 2011 23:32:30 -0800
Date: Mon, 3 Jan 2011 23:32:30 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294126350945-2190354.post@n3.nabble.com>
In-Reply-To: <AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com>
References: <151986.56456.qm@web114720.mail.gq1.yahoo.com> <AANLkTinVW4-BoB_-ppPu4So+Su-Jrsbo=J2riwhQm=7g@mail.gmail.com> <1293918442597-2177453.post@n3.nabble.com> <AANLkTi=zFAHr60UJCXCL-NBuHU1S6qF4726FDtoULWpG@mail.gmail.com> <1293943524498-2178710.post@n3.nabble.com> <AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com>
Subject: Re: parsing Java log file with Lucene 3.0.3
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you guys! Looks like SimpleAnalyzer is OK for my application. I'm still
testing but meanwhile it looks good. 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/parsing-Java-log-file-with-Lucene-3-0-3-tp2173046p2190354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 11:23:56 2011
Return-Path: <java-user-return-48260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9441 invoked from network); 4 Jan 2011 11:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 11:23:56 -0000
Received: (qmail 39127 invoked by uid 500); 4 Jan 2011 11:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38956 invoked by uid 500); 4 Jan 2011 11:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38948 invoked by uid 99); 4 Jan 2011 11:23:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 11:23:52 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 11:23:46 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1Pa4z6-0004VU-HK
	for java-user@lucene.apache.org; Tue, 04 Jan 2011 03:23:24 -0800
Date: Tue, 4 Jan 2011 03:23:24 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294140204529-2190856.post@n3.nabble.com>
In-Reply-To: <1294126350945-2190354.post@n3.nabble.com>
References: <151986.56456.qm@web114720.mail.gq1.yahoo.com> <AANLkTinVW4-BoB_-ppPu4So+Su-Jrsbo=J2riwhQm=7g@mail.gmail.com> <1293918442597-2177453.post@n3.nabble.com> <AANLkTi=zFAHr60UJCXCL-NBuHU1S6qF4726FDtoULWpG@mail.gmail.com> <1293943524498-2178710.post@n3.nabble.com> <AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com> <1294126350945-2190354.post@n3.nabble.com>
Subject: Re: parsing Java log file with Lucene 3.0.3
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Problem with SimpleAnalyzer! It ignores digits. 

For text "customer 123 found" it will take only "customer" and "found", but
will ignore "123". StandardAnalyzer handles OK the digits but has the dots
problem, I mentioned before.

Is there an understandable guide how to write my own Analyzer - a hybrid of
StandardAnalyzer and SimpleAnalyzer?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/parsing-Java-log-file-with-Lucene-3-0-3-tp2173046p2190856.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 12:50:00 2011
Return-Path: <java-user-return-48261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45429 invoked from network); 4 Jan 2011 12:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 12:49:59 -0000
Received: (qmail 54423 invoked by uid 500); 4 Jan 2011 12:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54223 invoked by uid 500); 4 Jan 2011 12:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54215 invoked by uid 99); 4 Jan 2011 12:49:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 12:49:56 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 12:49:50 +0000
Received: by qyk7 with SMTP id 7so15618241qyk.14
        for <java-user@lucene.apache.org>; Tue, 04 Jan 2011 04:49:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4Zfs0BsbEfdOlh1+aii8s7eh5yYFFBp14CoDqEVAiyU=;
        b=ibjmCzqFCO3OZ/GrpbEmbzZV8T3x6N6gzQJcFK7n5VfUJKtbLsSL4gY+QzssiP/+ge
         eLQTKRhrIqiO8hgxS+GGrL+/QAhLwBHRjXCgJTzpL6ZzqlTwP0fM22mVNbGV2WZAnjcU
         zt0xd/4RJZVNFDjVjLcfz//wBzOqZQNMhomX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rpDA723BezmZQ4+c0Nk4BwRT8rgm0qwN4eYE9YVJNI+zxcfUKoCBu3LTm7QcN4Mfho
         xH7nygHBRTf16YLq6DA5itad/67BIqRk6Q5or5BT26N/V9/3tovo/PlpaDKgY7eGnpaE
         bMwD3v1G3a40Y+/sRObHfxfrU60F0bGpkSM90=
MIME-Version: 1.0
Received: by 10.229.236.193 with SMTP id kl1mr20009615qcb.114.1294145368847;
 Tue, 04 Jan 2011 04:49:28 -0800 (PST)
Received: by 10.229.235.208 with HTTP; Tue, 4 Jan 2011 04:49:28 -0800 (PST)
In-Reply-To: <1294140204529-2190856.post@n3.nabble.com>
References: <151986.56456.qm@web114720.mail.gq1.yahoo.com>
	<AANLkTinVW4-BoB_-ppPu4So+Su-Jrsbo=J2riwhQm=7g@mail.gmail.com>
	<1293918442597-2177453.post@n3.nabble.com>
	<AANLkTi=zFAHr60UJCXCL-NBuHU1S6qF4726FDtoULWpG@mail.gmail.com>
	<1293943524498-2178710.post@n3.nabble.com>
	<AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com>
	<1294126350945-2190354.post@n3.nabble.com>
	<1294140204529-2190856.post@n3.nabble.com>
Date: Tue, 4 Jan 2011 07:49:28 -0500
Message-ID: <AANLkTinpwxMnbrx60tcJ+hLsyJoDr30V0acE+9zXByTj@mail.gmail.com>
Subject: Re: parsing Java log file with Lucene 3.0.3
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ca45aff7505049904b27f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64ca45aff7505049904b27f
Content-Type: text/plain; charset=ISO-8859-1

Lucene In Action has an example of creating a synonymanalyzer that
you can adapt. The general idea is to subclass from Analyzer and
implement the required functions, perhaps wrapping a Tokenizer
in a bunch of Filters.

You might be able to crib some ideas from
solr.analysis.WordDelimiterFilter
Best
Erick



On Tue, Jan 4, 2011 at 6:23 AM, Benzion G <benzionk@yahoo.com> wrote:

>
> Problem with SimpleAnalyzer! It ignores digits.
>
> For text "customer 123 found" it will take only "customer" and "found", but
> will ignore "123". StandardAnalyzer handles OK the digits but has the dots
> problem, I mentioned before.
>
> Is there an understandable guide how to write my own Analyzer - a hybrid of
> StandardAnalyzer and SimpleAnalyzer?
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/parsing-Java-log-file-with-Lucene-3-0-3-tp2173046p2190856.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64ca45aff7505049904b27f--

From java-user-return-48262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 15:32:57 2011
Return-Path: <java-user-return-48262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15335 invoked from network); 4 Jan 2011 15:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 15:32:56 -0000
Received: (qmail 89206 invoked by uid 500); 4 Jan 2011 15:32:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89049 invoked by uid 500); 4 Jan 2011 15:32:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89041 invoked by uid 99); 4 Jan 2011 15:32:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 15:32:53 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 15:32:48 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <Amr.ElAdawy@etisalat.com>)
	id 1Pa8s4-0006F2-T2
	for java-user@lucene.apache.org; Tue, 04 Jan 2011 07:32:24 -0800
Date: Tue, 4 Jan 2011 07:32:24 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294155144895-2192261.post@n3.nabble.com>
In-Reply-To: <994537.79417.qm@web121702.mail.ne1.yahoo.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com> <1294047086752-2183784.post@n3.nabble.com> <846141.33754.qm@web121705.mail.ne1.yahoo.com> <1294060168195-2184613.post@n3.nabble.com> <994537.79417.qm@web121702.mail.ne1.yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I am overriding the coord method in my customSimilairty Class and it will be 


return (float)overlap/(float)maxOverlap;


I'll update you.

Thanks for your help
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2192261.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 17:48:32 2011
Return-Path: <java-user-return-48263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73731 invoked from network); 4 Jan 2011 17:48:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 17:48:32 -0000
Received: (qmail 19479 invoked by uid 500); 4 Jan 2011 17:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19406 invoked by uid 500); 4 Jan 2011 17:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19398 invoked by uid 99); 4 Jan 2011 17:48:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 17:48:28 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 17:48:22 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1PaAzJ-0000zd-6H
	for java-user@lucene.apache.org; Tue, 04 Jan 2011 09:48:01 -0800
Date: Tue, 4 Jan 2011 09:48:01 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294163281190-2193022.post@n3.nabble.com>
In-Reply-To: <AANLkTinpwxMnbrx60tcJ+hLsyJoDr30V0acE+9zXByTj@mail.gmail.com>
References: <151986.56456.qm@web114720.mail.gq1.yahoo.com> <AANLkTinVW4-BoB_-ppPu4So+Su-Jrsbo=J2riwhQm=7g@mail.gmail.com> <1293918442597-2177453.post@n3.nabble.com> <AANLkTi=zFAHr60UJCXCL-NBuHU1S6qF4726FDtoULWpG@mail.gmail.com> <1293943524498-2178710.post@n3.nabble.com> <AANLkTin4YcyeGR2DRRBxdExZ-_gix=_qYg1Wvt01+Fq9@mail.gmail.com> <1294126350945-2190354.post@n3.nabble.com> <1294140204529-2190856.post@n3.nabble.com> <AANLkTinpwxMnbrx60tcJ+hLsyJoDr30V0acE+9zXByTj@mail.gmail.com>
Subject: Re: parsing Java log file with Lucene 3.0.3
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


OK, I succeeded to write an Analyzer I need. I can't say that I understood
all Lucene Analyzer-Tokenizer-Filter logic, but here's attached MyAnalyzer.
Hope it will help somebody else.


import java.io.Reader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.CharTokenizer;
import org.apache.lucene.analysis.LowerCaseFilter;
import org.apache.lucene.analysis.StopAnalyzer;
import org.apache.lucene.analysis.StopFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardFilter;

public class MyAnalyzer extends Analyzer
{
	public TokenStream tokenStream(String field, final Reader reader)
	{
		TokenStream result = new MyCharTokenizer(reader);
		result = new StandardFilter(result);
		result = new LowerCaseFilter(result);
		result = new StopFilter(true, result,
StopAnalyzer.ENGLISH_STOP_WORDS_SET);

		return result;		
	}

	static class MyCharTokenizer extends CharTokenizer
	{
		public static final char[] BAD_CHARACTERS =
		{ '.', ',', ':', '(', ')', ' ', '[', ']', ';', '\'', '"', '|', '-', '_',
'*', '<', '>', '=', '+', '%', '#', '~', '`', '^'};


		public MyCharTokenizer(Reader input)
		{
			super(input);
		}


		@Override
		protected boolean isTokenChar(char paramChar)
		{
			if (Character.isLetterOrDigit(paramChar))
			{
				return true; 
			}
			else
			{
				return false;
			}
			
			//if you need to filter out specific characters and not just
non-digits-or-letters as above 
			//for (int i = 0; i < BAD_CHARACTERS.length; i++)
			//{
			//	if (BAD_CHARACTERS[i] == paramChar)
			//	{
			//		return false;
			//	}
			//}

			//return true;
		}
	}
}

-- 
View this message in context: http://lucene.472066.n3.nabble.com/parsing-Java-log-file-with-Lucene-3-0-3-tp2173046p2193022.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 04 18:26:28 2011
Return-Path: <java-user-return-48264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 720 invoked from network); 4 Jan 2011 18:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jan 2011 18:26:28 -0000
Received: (qmail 4944 invoked by uid 500); 4 Jan 2011 18:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4897 invoked by uid 500); 4 Jan 2011 18:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4881 invoked by uid 99); 4 Jan 2011 18:26:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 18:26:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adam.saltiel@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jan 2011 18:26:18 +0000
Received: by fxm2 with SMTP id 2so13893777fxm.35
        for <java-user@lucene.apache.org>; Tue, 04 Jan 2011 10:25:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=B47t+ac9CfutTeUJyDfZ/R4wRB566AaWtqRUcSoRxaI=;
        b=Se4nZ7k9QDB4UwdHU9dHD0cOTG24f1T6TPOikDahtfJfeORSdoxLneCm2NxDOFz5Tq
         Y8jD+SCg6p37XPwd3QRars2g+qZ1KHJ3Qm/J9FmsOqPLIXUHT4S69M8AFZAe8a2BdJ7U
         TNVxzk2KvATWlVylOJgrL6FLGNa453ZfbRo9o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TATU/mvfVgpQwMeRuikKxtHbVjat+u5Der5hbbwydBoDik38HoxodtArIuMoA38mIh
         dJQT0WzICy8I3Ju/35iCpG3qFvfp+BqYPhLZaXSwjQ2XIhStIfaGhWCGCVgxlSxIU99b
         4deqxehgzt9Twkrgs9bOtDrzJB7D94lELYekg=
MIME-Version: 1.0
Received: by 10.223.79.68 with SMTP id o4mr4419348fak.0.1294165557316; Tue, 04
 Jan 2011 10:25:57 -0800 (PST)
Received: by 10.223.78.198 with HTTP; Tue, 4 Jan 2011 10:25:57 -0800 (PST)
In-Reply-To: <AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com>
	<1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
	<AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
	<37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
	<AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
	<499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
	<AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
Date: Tue, 4 Jan 2011 18:25:57 +0000
Message-ID: <AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a56d530e7304990966fe

--20cf3054a56d530e7304990966fe
Content-Type: text/plain; charset=UTF-8

I would think this is more like it.
But the essential thing, so it seems to me, is whether there is a
requirement for a serialised index, i.e. a more permanent record, aside from
the saved document.
Then, if there is a penalty to creating the index compared to regex,
stringsearch or so, it is justified on other grounds.
I think it is an interesting q. when does that requirement emerge?
There is size of document.
But there would also be field types. I think I have this right. This is
really a classification system, so more than bare regex.
There must be other criteria that apply to this use case, too?

Adam

p.s. we (in my work project) are just beginning to use Lucene for geometry
objects and I am looking forward to understanding its use better, including,
possibly, expanding it to other use cases apart from geo objects.

On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:

> On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.org>
> wrote:
> > There is also the MemoryIndex, which is in contrib and is designed for
> one document at a time.  That being said, basic grep/regex is probably fast
> enough.
> >
>
> In cases where you are doing a 'find' in a document similar to what a
> wordprocessor would do (especially if you want to iterate
> forwards/backwards through matches etc), you might want to consider
> something like
> http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3054a56d530e7304990966fe--

From java-user-return-48265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 07:44:09 2011
Return-Path: <java-user-return-48265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62689 invoked from network); 5 Jan 2011 07:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 07:44:09 -0000
Received: (qmail 12866 invoked by uid 500); 5 Jan 2011 07:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12401 invoked by uid 500); 5 Jan 2011 07:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12393 invoked by uid 99); 5 Jan 2011 07:44:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 07:44:02 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 07:43:54 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1PaO1s-0001lb-J5
	for java-user@lucene.apache.org; Tue, 04 Jan 2011 23:43:32 -0800
Date: Tue, 4 Jan 2011 23:43:32 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294213412564-2197059.post@n3.nabble.com>
In-Reply-To: <e05f0fd10806012136j78dd59beja2292bd140f57f5c@mail.gmail.com>
References: <1294213412583-554532.post@n3.nabble.com> <Pine.LNX.4.62.0806011217210.11468@radix.cryptio.net> <e05f0fd10806012136j78dd59beja2292bd140f57f5c@mail.gmail.com>
Subject: Re: Opening an index directory inside a jar
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I try to solve the big index problem by zipping it and reading via VFS. I
suppose I'll need to write my own Directory implementation. Did you guys
succeed to do it? How the search speed is?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Opening-an-index-directory-inside-a-jar-tp554532p2197059.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 07:47:28 2011
Return-Path: <java-user-return-48266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63757 invoked from network); 5 Jan 2011 07:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 07:47:28 -0000
Received: (qmail 19210 invoked by uid 500); 5 Jan 2011 07:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18957 invoked by uid 500); 5 Jan 2011 07:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18947 invoked by uid 99); 5 Jan 2011 07:47:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 07:47:25 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 07:47:18 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <Amr.ElAdawy@etisalat.com>)
	id 1PaO5A-0001zx-1x
	for java-user@lucene.apache.org; Tue, 04 Jan 2011 23:46:56 -0800
Date: Tue, 4 Jan 2011 23:46:56 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294213616056-2197077.post@n3.nabble.com>
In-Reply-To: <994537.79417.qm@web121702.mail.ne1.yahoo.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com> <1294047086752-2183784.post@n3.nabble.com> <846141.33754.qm@web121705.mail.ne1.yahoo.com> <1294060168195-2184613.post@n3.nabble.com> <994537.79417.qm@web121702.mail.ne1.yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Did not work,

I am using my own Similarity and the coord method is not called, because the 
disableCoord variable is set to true from FuzzyQuery


 public Similarity getSimilarity(Searcher searcher) {
    Similarity result = super.getSimilarity(searcher);
    if (disableCoord) {                           // disable coord as
requested
      result = new SimilarityDelegator(result) {
          public float coord(int overlap, int maxOverlap) {
            return 1.0f;
          }
        };
    }
    return result;
  }


any ideas.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2197077.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 10:56:07 2011
Return-Path: <java-user-return-48267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64010 invoked from network); 5 Jan 2011 10:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 10:56:07 -0000
Received: (qmail 29458 invoked by uid 500); 5 Jan 2011 10:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29121 invoked by uid 500); 5 Jan 2011 10:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28483 invoked by uid 99); 5 Jan 2011 10:55:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 10:55:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 10:55:52 +0000
Received: by pxi11 with SMTP id 11so3558531pxi.35
        for <multiple recipients>; Wed, 05 Jan 2011 02:55:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.143.34.13 with SMTP id m13mr18723699wfj.411.1294224932175;
 Wed, 05 Jan 2011 02:55:32 -0800 (PST)
Received: by 10.143.30.15 with HTTP; Wed, 5 Jan 2011 02:55:32 -0800 (PST)
Date: Wed, 5 Jan 2011 05:55:32 -0500
Message-ID: <AANLkTikwfpYEEbbqqkUV54FNAuQvz0vsa+5VRfUbG8Lc@mail.gmail.com>
Subject: WARNING: re-index all Lucene trunk indices
From: Michael McCandless <lucene@mikemccandless.com>
To: dev@lucene.apache.org, Lucene Users <java-user@lucene.apache.org>, 
	solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

If you are using Lucene's trunk (to be 4.0) builds, read on...

I just committed LUCENE-2843, which is a hard break on the index file format.

If you are living on Lucene's trunk then you have to remove any
previously created indices and re-index, after updating.

The change cuts over to a more RAM efficient and faster terms index
implementation, using FSTs (finite state transducers) to hold the term
index data.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 16:39:33 2011
Return-Path: <java-user-return-48268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39770 invoked from network); 5 Jan 2011 16:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 16:39:32 -0000
Received: (qmail 24774 invoked by uid 500); 5 Jan 2011 16:39:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24521 invoked by uid 500); 5 Jan 2011 16:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24513 invoked by uid 99); 5 Jan 2011 16:39:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 16:39:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 16:39:17 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PaWNz-0007OA-H0
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 17:38:55 +0100
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 17:38:55 +0100
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 17:38:55 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Use of PrefixQuery to create multi-word queries
Date: Wed, 5 Jan 2011 16:38:37 +0000 (UTC)
Lines: 46
Message-ID: <loom.20110105T172425-544@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729))
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to implement a "progressive search" with Lucene. What I mean is that
something like what Google does: you type a few letters and google searches for
matches as you type. The more letters you enter, the more precise your search
becomes.

I decided to use a prefix query because otherwise, I need to have complete words
in order for multiword queries to work. 

I am using Compass as my Lucene frontend.

My query looks like this:

BooleanQuery bq = new BooleanQuery();
// The last word is a prefix
PrefixQuery pq = 
   new PrefixQuery(new Term("searchField", words[words.length - 1]));
   bq.add(pq, BooleanClause.Occur.MUST);

   // All others are normal terms
   for (int i = 0; i <= (words.length - 2); i++) {
   TermQuery tq = new TermQuery(new Term("searchField", words[i])); 
     bq.add(tq, BooleanClause.Occur.MUST);
   }

The problem I have is that if I specify "little fa" as search terms, Lucene will
match

The little fairy

but also 

Farris little
The little pig farmer
Chicken Little: looking far ahead

(each line is the content of a separate document)

I only want the first type of matches.

What should I be doing instead?

Thanks,

L


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 16:59:52 2011
Return-Path: <java-user-return-48269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45741 invoked from network); 5 Jan 2011 16:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 16:59:52 -0000
Received: (qmail 62586 invoked by uid 500); 5 Jan 2011 16:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62393 invoked by uid 500); 5 Jan 2011 16:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62381 invoked by uid 99); 5 Jan 2011 16:59:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 16:59:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.127] (HELO web121706.mail.ne1.yahoo.com) (98.138.90.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Jan 2011 16:59:37 +0000
Received: (qmail 10381 invoked by uid 60001); 5 Jan 2011 16:59:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294246755; bh=QOxJMZpnp8M0aN8QUWf1wuCslmV+LCk7v1A7E86tY4Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=HMQLpnW5b+4O1tP2IXRd+urWZC4dvKlCABdxBo9llCXjCQR83BDDTjKaiKjuuzpiImeC0eghVDnxt78ERvTAjsh/Y2cKUDxYp+4veQvqc5BoOGyaBVsS8F0GEU68rMo7i048gU1Yjk7LMw/lAkyt2wAcvSFIXE+mOLST9n/KUog=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Uo76Am551BloU1fd/JiFgpdRQZdOcY0RfOc/XLDPMotZSu/jzI98HvYAsS/nrU+0AxFx/v8JL8X9I5SdQhBDA0cYfVGiDiQlnFyZxWUn9UXQEYPggVQr3Wmus36wtF6z2tOzgAEgjNoT8m2s+Un/8F1ZvTYuWYY4MB5SSP5w1zA=;
Message-ID: <978100.8881.qm@web121706.mail.ne1.yahoo.com>
X-YMail-OSG: lfzW5rwVM1k8qrlUVl1W74d2XuOwO6Nxs2QYKu3WnG3Xew7
 YHyPKnYQpEV6VLvzZ76DoE0VaC7Q5HtRIheB5qcc0JoDz9pZ70LUCiCxwQ1_
 g2cdlxsdS3M5nOEvWml2jnsz7uOrK6A6WjgOodNAieHhpx45MaVJhbOJvP.a
 srS25_I5ySZMkBQ69IdtS5JwK32YfKDUERV1DeuOvYD91SJNqIWI9Hitil_L
 6BP4nYiMsnexYmZMP04ftlKml7Vj2LW2SqF9n71x5
Received: from [88.231.28.92] by web121706.mail.ne1.yahoo.com via HTTP; Wed, 05 Jan 2011 08:59:15 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Wed, 5 Jan 2011 08:59:15 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
To: java-user@lucene.apache.org
In-Reply-To: <loom.20110105T172425-544@post.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> I am trying to implement a "progressive search" with=0A> Lucene. What I m=
ean is that=0A> something like what Google does: you type a few letters and=
=0A> google searches for=0A> matches as you type. The more letters you ente=
r, the more=0A> precise your search=0A> becomes.=0A> =0A> I decided to use =
a prefix query because otherwise, I need=0A> to have complete words=0A> in =
order for multiword queries to work. =0A> =0A> I am using Compass as my Luc=
ene frontend.=0A> =0A> My query looks like this:=0A> =0A> BooleanQuery bq =
=3D new BooleanQuery();=0A> // The last word is a prefix=0A> PrefixQuery pq=
 =3D =0A> =A0=A0=A0new PrefixQuery(new Term("searchField",=0A> words[words.=
length - 1]));=0A> =A0=A0=A0bq.add(pq, BooleanClause.Occur.MUST);=0A> =0A> =
=A0=A0=A0// All others are normal terms=0A> =A0=A0=A0for (int i =3D 0; i <=
=3D (words.length -=0A> 2); i++) {=0A> =A0=A0=A0TermQuery tq =3D new TermQu=
ery(new=0A> Term("searchField", words[i])); =0A> =A0 =A0=A0=A0bq.add(tq,=0A=
> BooleanClause.Occur.MUST);=0A> =A0=A0=A0}=0A> =0A> The problem I have is =
that if I specify "little fa" as=0A> search terms, Lucene will=0A> match=0A=
> =0A> The little fairy=0A> =0A> but also =0A> =0A> Farris little=0A> The l=
ittle pig farmer=0A> Chicken Little: looking far ahead=0A> =0A> (each line =
is the content of a separate document)=0A> =0A> I only want the first type =
of matches.=0A> =0A=0ASo order of search terms are important to you. Since =
you are constructing your queries programmatically, you can use SpanQuery f=
amily.=0A=0AIf you substitute PrefixQuery with SpanRegexQuery, and TermQuer=
y with SpanTermQuery. And combine them in an ordered SpanNearQuery, I think=
 you can achieve what you want.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 17:05:37 2011
Return-Path: <java-user-return-48270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55491 invoked from network); 5 Jan 2011 17:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 17:05:36 -0000
Received: (qmail 77054 invoked by uid 500); 5 Jan 2011 17:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76773 invoked by uid 500); 5 Jan 2011 17:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76760 invoked by uid 99); 5 Jan 2011 17:05:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 17:05:32 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ppuffinburger@tlcdelivers.com does not designate 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 17:05:24 +0000
Received: by qwh6 with SMTP id 6so16453522qwh.35
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 09:05:02 -0800 (PST)
Received: by 10.229.192.15 with SMTP id do15mr6773734qcb.155.1294247102365;
        Wed, 05 Jan 2011 09:05:02 -0800 (PST)
Received: from wl7-dfaler.unicity.tlcdelivers.com ([12.131.0.2])
        by mx.google.com with ESMTPS id nb15sm12786782qcb.26.2011.01.05.09.05.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Jan 2011 09:05:01 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Use of PrefixQuery to create multi-word queries
From: Philip Puffinburger <ppuffinburger@tlcdelivers.com>
In-Reply-To: <loom.20110105T172425-544@post.gmane.org>
Date: Wed, 5 Jan 2011 12:05:00 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com>
References: <loom.20110105T172425-544@post.gmane.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)

We do something similar with a PrefixQuery.   But the way we do it is to =
use a Keyword field to use the PrefixQuery against.

So if we had a Book like with a title like 'The Brown Dog',  we would =
end up with fields in the document like:

Used for the normal full text searching

title : the brown dog

Used for the prefix searching

titlekeyword : the brown dog
titlekeyword : brown dog

So as the user is typing we are looking up using a PrefixQuery against =
the titlekeyword field.    We had tried things like span queries against =
the title field before settling on this approach (we also use this field =
for other things, not just for the PrefixQuery).


On Jan 5, 2011, at 11:38 AM, L Duperval wrote:

> Hi,
>=20
> I am trying to implement a "progressive search" with Lucene. What I =
mean is that
> something like what Google does: you type a few letters and google =
searches for
> matches as you type. The more letters you enter, the more precise your =
search
> becomes.
>=20
> I decided to use a prefix query because otherwise, I need to have =
complete words
> in order for multiword queries to work.=20
>=20
> I am using Compass as my Lucene frontend.
>=20
> My query looks like this:
>=20
> BooleanQuery bq =3D new BooleanQuery();
> // The last word is a prefix
> PrefixQuery pq =3D=20
>   new PrefixQuery(new Term("searchField", words[words.length - 1]));
>   bq.add(pq, BooleanClause.Occur.MUST);
>=20
>   // All others are normal terms
>   for (int i =3D 0; i <=3D (words.length - 2); i++) {
>   TermQuery tq =3D new TermQuery(new Term("searchField", words[i]));=20=

>     bq.add(tq, BooleanClause.Occur.MUST);
>   }
>=20
> The problem I have is that if I specify "little fa" as search terms, =
Lucene will
> match
>=20
> The little fairy
>=20
> but also=20
>=20
> Farris little
> The little pig farmer
> Chicken Little: looking far ahead
>=20
> (each line is the content of a separate document)
>=20
> I only want the first type of matches.
>=20
> What should I be doing instead?
>=20
> Thanks,
>=20
> L
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 17:06:42 2011
Return-Path: <java-user-return-48271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55943 invoked from network); 5 Jan 2011 17:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 17:06:41 -0000
Received: (qmail 80850 invoked by uid 500); 5 Jan 2011 17:06:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80663 invoked by uid 500); 5 Jan 2011 17:06:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80655 invoked by uid 99); 5 Jan 2011 17:06:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 17:06:39 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.127] (HELO web121706.mail.ne1.yahoo.com) (98.138.90.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Jan 2011 17:06:31 +0000
Received: (qmail 16882 invoked by uid 60001); 5 Jan 2011 17:06:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294247170; bh=/dGfH+f7PDGBRv744YNxegRsotZGxsq0UcCxwXdAi3w=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=q1B96aOnRQ1UXfzSRak3+tXHuF4G/1oK7buq7pxl5XrDgzBrUiGR9ukJRkKApw31wpMHhzt4Mf1l3pLmsWZAVLOcU2K3sUpZE0YCnHhCfIRsapRIlSzsvL9i2yiI2espnYoeANsZCulcDtqmL10pAcyAlpm8w+KbrGNhCDOyzsM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mWuxitLeoTPFyiZx3fKjs4skKMn+NZVpuYzI0K50b/9Cf5qjRAKM8meqCDXEoWyz30C65rCiUkene2A7IDXkQRyRxtz1AGTsP0N8ho7yT0FQciUpsXgVgjIzlmvEf7YvVSnckaNoe9tapM3gqiCNEQv4FTeT5r1qeExceoZjBPU=;
Message-ID: <372386.16354.qm@web121706.mail.ne1.yahoo.com>
X-YMail-OSG: 0MbGmx0VM1kak3QdTbeFP4bWbFYrTZseIwSngx7yrdB2lSR
 i85oEtL1VCLQkgLW6RVjiucCvgV8pT4n_801ArPPUVZY3kB3EBW0TprLlICf
 UhEOlxOkid23EemGnqqSMDVx81HlqK.auScZTYBccYbcqn1m1MghegEud_tz
 KmRP7e__9dmhOywUnc8zw8lA9dYnUBOU6pPj6oigqStqfCQYe3jzx52vVlL2
 fVZGwLZDDy5I8gZVX8RdkEFQ6ohgAQMOnQMSIEkS6
Received: from [88.231.28.92] by web121706.mail.ne1.yahoo.com via HTTP; Wed, 05 Jan 2011 09:06:10 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Wed, 5 Jan 2011 09:06:10 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest score
To: java-user@lucene.apache.org
In-Reply-To: <1294213616056-2197077.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

> Did not work,=0A> =0A> I am using my own Similarity and the coord method =
is not=0A> called, because the =0A> disableCoord variable is set to true fr=
om FuzzyQuery=0A> =0A> =0A>  public Similarity getSimilarity(Searcher searc=
her) {=0A> =A0 =A0 Similarity result =3D=0A> super.getSimilarity(searcher);=
=0A> =A0 =A0 if (disableCoord) {=A0 =A0 =A0=0A> =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0=0A> =A0 =A0=A0=A0// disable coord as=0A> requested=0A> =A0 =A0 =A0 res=
ult =3D new=0A> SimilarityDelegator(result) {=0A> =A0 =A0 =A0 =A0 =A0 publi=
c float coord(int=0A> overlap, int maxOverlap) {=0A> =A0 =A0 =A0 =A0 =A0 =
=A0 return 1.0f;=0A> =A0 =A0 =A0 =A0 =A0 }=0A> =A0 =A0 =A0 =A0 };=0A> =A0 =
=A0 }=0A> =A0 =A0 return result;=0A> =A0 }=0A=0AWhat is the version of Luce=
ne you are using?=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 17:09:05 2011
Return-Path: <java-user-return-48272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56515 invoked from network); 5 Jan 2011 17:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 17:09:04 -0000
Received: (qmail 85618 invoked by uid 500); 5 Jan 2011 17:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85413 invoked by uid 500); 5 Jan 2011 17:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85405 invoked by uid 99); 5 Jan 2011 17:08:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 17:08:59 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 17:08:52 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <Amr.ElAdawy@etisalat.com>)
	id 1PaWqc-0004wm-4o
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 09:08:30 -0800
Date: Wed, 5 Jan 2011 09:08:30 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1294247310133-2199732.post@n3.nabble.com>
In-Reply-To: <372386.16354.qm@web121706.mail.ne1.yahoo.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com> <1294047086752-2183784.post@n3.nabble.com> <846141.33754.qm@web121705.mail.ne1.yahoo.com> <1294060168195-2184613.post@n3.nabble.com> <994537.79417.qm@web121702.mail.ne1.yahoo.com> <1294213616056-2197077.post@n3.nabble.com> <372386.16354.qm@web121706.mail.ne1.yahoo.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


2.9.4
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2199732.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 18:01:09 2011
Return-Path: <java-user-return-48273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75349 invoked from network); 5 Jan 2011 18:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 18:01:09 -0000
Received: (qmail 88375 invoked by uid 500); 5 Jan 2011 18:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88147 invoked by uid 500); 5 Jan 2011 18:01:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88139 invoked by uid 99); 5 Jan 2011 18:01:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 18:01:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 18:00:59 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PaXf2-0000MO-6H
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 19:00:36 +0100
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 19:00:36 +0100
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 19:00:36 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
Date: Wed, 5 Jan 2011 18:00:23 +0000 (UTC)
Lines: 44
Message-ID: <loom.20110105T184954-445@post.gmane.org>
References: <loom.20110105T172425-544@post.gmane.org> <AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729))

Philip,

Philip Puffinburger <ppuffinburger <at> tlcdelivers.com> writes:
> So if we had a Book like with a title like 'The Brown Dog',  we would end up
with fields in the document like:
> 
> Used for the normal full text searching
> 
> title : the brown dog
> 
> Used for the prefix searching
> 
> titlekeyword : the brown dog
> titlekeyword : brown dog
> 

I also have two fields, one for indexing and another for display. How does the
above affect searching? If you type "brown do" will it find the title correctly
or do you have to type "brown dog" in order to get a match? Would "brown do"
match "The brown horse has a dog" or not? My understanding is that that Lucene
(BTW, I'm using 2.4.1 because it's the latest version to work with Compass)
matches the prefix first, and then combines the matching results with other
clauses as specified.

> So as the user is typing we are looking up using a PrefixQuery against the
titlekeyword field.    We had tried
> things like span queries against the title field before settling on this
approach (we also use this field
> for other things, not just for the PrefixQuery).
> 

That's what I was planning to look at next. Why did you choose not to use this
approach? Is it because of the other things you want to do with those fields or
something about the way the SpanQuery classes work?

If you are at liberty to share part of your code I'd appreciated it.

Thanks,

L






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 18:05:44 2011
Return-Path: <java-user-return-48274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84974 invoked from network); 5 Jan 2011 18:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 18:05:39 -0000
Received: (qmail 1023 invoked by uid 500); 5 Jan 2011 18:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 988 invoked by uid 500); 5 Jan 2011 18:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 954 invoked by uid 99); 5 Jan 2011 18:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 18:05:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 18:05:28 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PaXjM-0003K3-Dn
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 19:05:04 +0100
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 19:05:04 +0100
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 19:05:04 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
Date: Wed, 5 Jan 2011 18:01:58 +0000 (UTC)
Lines: 20
Message-ID: <loom.20110105T190041-966@post.gmane.org>
References: <loom.20110105T172425-544@post.gmane.org> <978100.8881.qm@web121706.mail.ne1.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729))
X-Virus-Checked: Checked by ClamAV on apache.org

Ahmet,

Ahmet Arslan <iorixxx <at> yahoo.com> writes:
> So order of search terms are important to you. Since you are constructing your
queries programmatically,
> you can use SpanQuery family.
> 

Yes, order is important.

> If you substitute PrefixQuery with SpanRegexQuery, and TermQuery with
SpanTermQuery. And combine them
> in an ordered SpanNearQuery, I think you can achieve what you want.
> 

I'll look at the documentation to see how to implement it effectively.

Thanks,

L


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 19:02:54 2011
Return-Path: <java-user-return-48275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13573 invoked from network); 5 Jan 2011 19:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 19:02:53 -0000
Received: (qmail 85083 invoked by uid 500); 5 Jan 2011 19:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85054 invoked by uid 500); 5 Jan 2011 19:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85046 invoked by uid 99); 5 Jan 2011 19:02:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 19:02:50 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ppuffinburger@tlcdelivers.com does not designate 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 19:02:42 +0000
Received: by qyk10 with SMTP id 10so16381967qyk.14
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 11:02:21 -0800 (PST)
Received: by 10.224.131.18 with SMTP id v18mr21731129qas.243.1294254140892;
        Wed, 05 Jan 2011 11:02:20 -0800 (PST)
Received: from wl7-dfaler.unicity.tlcdelivers.com ([12.131.0.2])
        by mx.google.com with ESMTPS id e29sm13759181qck.3.2011.01.05.11.02.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Jan 2011 11:02:20 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Use of PrefixQuery to create multi-word queries
From: Philip Puffinburger <ppuffinburger@tlcdelivers.com>
In-Reply-To: <loom.20110105T184954-445@post.gmane.org>
Date: Wed, 5 Jan 2011 14:02:18 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <859A64D5-EE14-4430-9AD8-175C3481C086@tlcdelivers.com>
References: <loom.20110105T172425-544@post.gmane.org> <AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com> <loom.20110105T184954-445@post.gmane.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)


On Jan 5, 2011, at 1:00 PM, L Duperval wrote:

> Philip,
>=20
> I also have two fields, one for indexing and another for display. How =
does the
> above affect searching? If you type "brown do" will it find the title =
correctly
> or do you have to type "brown dog" in order to get a match? Would =
"brown do"
> match "The brown horse has a dog" or not? My understanding is that =
that Lucene
> (BTW, I'm using 2.4.1 because it's the latest version to work with =
Compass)
> matches the prefix first, and then combines the matching results with =
other
> clauses as specified.

No.   Typing "brown do" will match on "brown dog" but not match on "the =
brown dog" that way we don't care which way the user types it.       In =
our system "brown do" will not match on "the brown horse has a dog".   =
We only do the PrefixQuery which is against the keyword field ("brown =
dog" is a single term as is "the brown dog").   We don't have a =
BooleanQuery like you do, but I don't see why it wouldn't work.

We basically have a method that looks something like=20

List<Book> getBooksBeginningWithTitle(String prefix);

and that code looks something like (we use Hibernate Search and not =
Compass, but they are pretty similar) :

FullTextSession fullTextSession =3D =
Search.getFullTextSession(getSession());
PrefixQuery prefixQuery =3D new PrefixQuery(new Term("titlekeyword", =
TextNormailzationUtil.transformKeyword(prefix, =
LetterCaseTransform.Lower)));
FullTextQuery ftQuery =3D =
fullTextSession.createFullTextQuery(prefixQuery, Book.class);
return ftQuery.list();



The field creation for the keyword fields looks like (done in a =
Hibernate Search construct called a FieldBridge - can't remember if =
Compass has something similar)

document.add(new Field("titlekeyword", =
TextNormailzationUtil.transformKeyword(fullTitle, =
LetterCaseTransform.Lower), Store.NO, Index.NOT_ANALYZED_NO_NORMS));
document.add(new Field("titlekeyword", =
TextNormailzationUtil.transformKeyword(partialTitle, =
LetterCaseTransform.Lower), Store.NO, Index.NOT_ANALYZED_NO_NORMS));

The partialTitle is just the full title with leading articles removed =
('A', 'An', 'The', 'L'', etc).  =20

The TextNormalizationUtil.transformKeyword in this case removes =
punctuation and non-spacing marks from the text and then lowercases.   =
This is a business decision because in a keyword the case matters and =
users might not type in the punctuation or have Caps Lock key on so we =
normalize things down.    You have to be sure that the same =
normalization happens at index and at search time.=20



> That's what I was planning to look at next. Why did you choose not to =
use this
> approach? Is it because of the other things you want to do with those =
fields or
> something about the way the SpanQuery classes work?

I needed the field for other things and the code to do the PrefixQuery =
against this field was pretty simple.  =20

We use SpanQuery's (well, list of SpanRegexQuery clauses fed into a =
SpanNearQuery) when we do something similar with authors (user can type =
an author name in first/last or last/first order and then what about any =
additional parts of their name - which means we would have had to create =
a lot of keyword fields to handle all the combinations and would still =
have missed some).



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 19:46:51 2011
Return-Path: <java-user-return-48276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43648 invoked from network); 5 Jan 2011 19:46:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 19:46:50 -0000
Received: (qmail 60907 invoked by uid 500); 5 Jan 2011 19:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60800 invoked by uid 500); 5 Jan 2011 19:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60791 invoked by uid 99); 5 Jan 2011 19:46:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 19:46:48 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of cameron.developer@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 19:46:43 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <cameron.developer@gmail.com>)
	id 1PaZJO-0002eW-TO
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 11:46:22 -0800
Date: Wed, 5 Jan 2011 11:46:22 -0800 (PST)
From: entdeveloper <cameron.developer@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1294256782894-2200800.post@n3.nabble.com>
Subject: CachingWrapperFilter vs FieldCacheTermsFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Could someone provide some general guidelines on what scenario is best to use
either the CachingWrapperFilter vs the FieldCacheTermsFilter?

I understand there are certain restrictions, like the FieldCacheTermsFilter
requires there to be a single-valued field for all documents in the index.
But performance-wise, and aside from that criteria, are there use-case
scenarios where it is better to use one over the other?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/CachingWrapperFilter-vs-FieldCacheTermsFilter-tp2200800p2200800.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 20:07:46 2011
Return-Path: <java-user-return-48277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63082 invoked from network); 5 Jan 2011 20:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 20:07:46 -0000
Received: (qmail 3631 invoked by uid 500); 5 Jan 2011 20:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3590 invoked by uid 500); 5 Jan 2011 20:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3582 invoked by uid 99); 5 Jan 2011 20:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 20:07:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 20:07:36 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PaZdc-00063g-1D
	for java-user@lucene.apache.org; Wed, 05 Jan 2011 21:07:16 +0100
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 21:07:16 +0100
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 21:07:16 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
Date: Wed, 5 Jan 2011 20:07:03 +0000 (UTC)
Lines: 24
Message-ID: <loom.20110105T204935-84@post.gmane.org>
References: <loom.20110105T172425-544@post.gmane.org> <AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com> <loom.20110105T184954-445@post.gmane.org> <859A64D5-EE14-4430-9AD8-175C3481C086@tlcdelivers.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729))
X-Virus-Checked: Checked by ClamAV on apache.org

Philip Puffinburger <ppuffinburger <at> tlcdelivers.com> writes:
> We only do the PrefixQuery which is against the keyword field ("brown dog" 
> is a single term as is "the brown dog").   We don't have a BooleanQuery 
> like you do, but I don't see why it wouldn't work.
> 

Ahh. OK, so you probably aren't using a whitespace analyzer like we are. We
chose whitespace because we wanted to be able to search for multiple words, no
matter where they occurred in the text. That way, we could (wanted to?) match
"brown dog" with "the brown dog" or "the horse has a brown dog". We had thought
of breaking up our date in multiple pieces like you are doing but were worried
about memory and performance (we're storing the index in RAM). I think about 
this.

Thanks for all the information. I'll do some testing on my end to see if I can
do better than what I've got. I'll also have to possibly rethink some of our
features (i.e. matching from the start of the title instead of the matching
anywhere as we are currently doing).

Thanks for your generosity,

L




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 05 21:49:58 2011
Return-Path: <java-user-return-48278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1602 invoked from network); 5 Jan 2011 21:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jan 2011 21:49:58 -0000
Received: (qmail 50617 invoked by uid 500); 5 Jan 2011 21:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50538 invoked by uid 500); 5 Jan 2011 21:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50530 invoked by uid 99); 5 Jan 2011 21:49:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 21:49:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cameron.developer@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jan 2011 21:49:49 +0000
Received: by yxm8 with SMTP id 8so7348534yxm.35
        for <java-user@lucene.apache.org>; Wed, 05 Jan 2011 13:49:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=GVaFdbCN8ycB6xjvQ3q1dtQR0xEZO3aSfS0n1vdw4cU=;
        b=xeKgCSc+yr8bqiyqY4EcnTh5kaC2rWaZ6naGG7TwhSKANFHa8ofd+3cKKWi4ccFRaw
         J8PWVVg4sDw+YukI/wbqIDhJUfWkFVhjGCz9ojQ45vKau5dxb8CAjSqLzaxzrOOPYOuF
         5C5OBWGV8vWt7Uy2/92iF0DBnnQg4d+tSMVzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bYyA8ICWeFL9NqozkNQb7iDzRKZAq7pj/kYX0dk/0LSPulew+9YxhTnkrrjNDQ3KlW
         oNHyM8YJzfCYGLYh0qYcD/IpayoAIyvJgrA0/Suoh5nv15KDLaR6N8ASw3rqouEzTWeo
         gP/lL7oaLcf/FtkwQeOSi/cbMIu6Dq2ZYttFw=
MIME-Version: 1.0
Received: by 10.236.102.171 with SMTP id d31mr45688688yhg.19.1294264167262;
 Wed, 05 Jan 2011 13:49:27 -0800 (PST)
Received: by 10.236.108.165 with HTTP; Wed, 5 Jan 2011 13:49:27 -0800 (PST)
In-Reply-To: <loom.20110105T204935-84@post.gmane.org>
References: <loom.20110105T172425-544@post.gmane.org>
	<AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com>
	<loom.20110105T184954-445@post.gmane.org>
	<859A64D5-EE14-4430-9AD8-175C3481C086@tlcdelivers.com>
	<loom.20110105T204935-84@post.gmane.org>
Date: Wed, 5 Jan 2011 13:49:27 -0800
Message-ID: <AANLkTi=nB6xY6BYrD9AasjM9sMoG_bMiEiyccmd73mfN@mail.gmail.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
From: Cameron Leach <cameron.developer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00235440bca3ef6aea0499205ba3
X-Virus-Checked: Checked by ClamAV on apache.org

--00235440bca3ef6aea0499205ba3
Content-Type: text/plain; charset=UTF-8

L -

I faced the exact same problem you're having. I ended up writing a custom
Analyzer to tokenize the terms the way I wanted. If memory serves me
correctly, the WhitespaceAnalyzer will do this:

"the brown dog" ->
the
brown
dog

I think what you want is for something like this:

"the brown dog" ->
the brown dog
brown dog
dog

If you write your custom analyzer accordingly, to trim terms from the
beginning and then use the NGramTokenFilter, you should get your real-time
search results back the way you expect. A small caveat is that spans won't
work here (e.g. 'the do' won't match 'the brown dog'), which might be what
you want. I wasn't ever able to figure out a way to do this with
WhitespaceAnalyzer and a tricky query.

Hope that helps a little.


On Wed, Jan 5, 2011 at 12:07 PM, L Duperval <duperval@videotron.com> wrote:

> Philip Puffinburger <ppuffinburger <at> tlcdelivers.com> writes:
> > We only do the PrefixQuery which is against the keyword field ("brown
> dog"
> > is a single term as is "the brown dog").   We don't have a BooleanQuery
> > like you do, but I don't see why it wouldn't work.
> >
>
> Ahh. OK, so you probably aren't using a whitespace analyzer like we are. We
> chose whitespace because we wanted to be able to search for multiple words,
> no
> matter where they occurred in the text. That way, we could (wanted to?)
> match
> "brown dog" with "the brown dog" or "the horse has a brown dog". We had
> thought
> of breaking up our date in multiple pieces like you are doing but were
> worried
> about memory and performance (we're storing the index in RAM). I think
> about
> this.
>
> Thanks for all the information. I'll do some testing on my end to see if I
> can
> do better than what I've got. I'll also have to possibly rethink some of
> our
> features (i.e. matching from the start of the title instead of the matching
> anywhere as we are currently doing).
>
> Thanks for your generosity,
>
> L
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00235440bca3ef6aea0499205ba3--

From java-user-return-48279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 06 13:45:58 2011
Return-Path: <java-user-return-48279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98976 invoked from network); 6 Jan 2011 13:45:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jan 2011 13:45:58 -0000
Received: (qmail 86549 invoked by uid 500); 6 Jan 2011 13:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86351 invoked by uid 500); 6 Jan 2011 13:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86343 invoked by uid 99); 6 Jan 2011 13:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 13:45:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 13:45:47 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Paq9d-0002pD-AP
	for java-user@lucene.apache.org; Thu, 06 Jan 2011 14:45:25 +0100
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 06 Jan 2011 14:45:25 +0100
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 06 Jan 2011 14:45:25 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Re: Use of PrefixQuery to create multi-word queries
Date: Thu, 6 Jan 2011 13:45:11 +0000 (UTC)
Lines: 25
Message-ID: <loom.20110106T144145-974@post.gmane.org>
References: <loom.20110105T172425-544@post.gmane.org> <AF3ACB0D-1829-4FD3-B65B-85A0A106406B@tlcdelivers.com> <loom.20110105T184954-445@post.gmane.org> <859A64D5-EE14-4430-9AD8-175C3481C086@tlcdelivers.com> <loom.20110105T204935-84@post.gmane.org> <AANLkTi=nB6xY6BYrD9AasjM9sMoG_bMiEiyccmd73mfN@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729))

Cameron,

Cameron Leach <cameron.developer <at> gmail.com> writes:
> I think what you want is for something like this:
> 
> "the brown dog" ->
> the brown dog
> brown dog
> dog
> 
> If you write your custom analyzer accordingly, to trim terms from the
> beginning and then use the NGramTokenFilter, you should get your real-time
> search results back the way you expect. A small caveat is that spans won't
> work here (e.g. 'the do' won't match 'the brown dog'), which might be what
> you want.

Thanks, that's another possible approach. I have a few that I need to sort
through and test out. I also need to take into account performance and memory
usage. I have to index about 1M small documents in RAM so if additional
tokenizing is anything more than linear, I may have to rethink this.

Thanks,

L



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 06 16:46:55 2011
Return-Path: <java-user-return-48280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94610 invoked from network); 6 Jan 2011 16:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jan 2011 16:46:55 -0000
Received: (qmail 71804 invoked by uid 500); 6 Jan 2011 16:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71721 invoked by uid 500); 6 Jan 2011 16:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71713 invoked by uid 99); 6 Jan 2011 16:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 16:46:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 16:46:46 +0000
Received: by yib17 with SMTP id 17so5151071yib.35
        for <java-user@lucene.apache.org>; Thu, 06 Jan 2011 08:46:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=8saoJrR/wrGaGNLSsks6jG60j1Eqgh9uC5kaVoXcOUo=;
        b=qZPR0HQXXzIYAx5+UBB3uzIg60pvW0BHjOZPOtoqX9OS0afiBBAx4L5Z0A1RjhpWjW
         MfhkhHRo/zhFBBuqPKPkQmMwUka6ogs4StfGLg7fzVl+Yo/vV5ax0fiLXuxICc/f+xH9
         1U/l7Yq6k/PJU0xgCQRnZg4ftVXww6sqoYD2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jFJ2XKVo0rKaFfb7RESpGSrvb9ehCeoWpzDM069bH5h060pIQqr8llSgob7ebx+eWD
         iKbNHL2MxrGG4Mpie6KqJrhJlqKuvGfMtTkiLb3AE0hJ7wZM6rrXvtj8ePZMiL+6WDPT
         R3QiBlqC+aKPM65hzCbDtPDs6U1RT+xJiw/6Y=
MIME-Version: 1.0
Received: by 10.151.156.9 with SMTP id i9mr23402017ybo.444.1294332385602; Thu,
 06 Jan 2011 08:46:25 -0800 (PST)
Received: by 10.150.138.18 with HTTP; Thu, 6 Jan 2011 08:46:25 -0800 (PST)
Date: Thu, 6 Jan 2011 11:46:25 -0500
Message-ID: <AANLkTikELKy2+cVEet0LM9DtSZtrz7gWodGyhvUT_jxy@mail.gmail.com>
Subject: Spell Checker for Non English languages
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hello,

I was wondering if anyone on this mailing list have ever compiled a
list of algorithms for various non English languages that work well
with the lucene-spellchecker contrib module?

For example, with English using an spellchecker index built using
ngrams and then searched using LevensteinDistance works well. But
would this work for Chinese, Japanese or Korean just as well?

I can't be sure since I'm not a native speaker for any of those
languages and I do not want to make any assumptions.

Therefore, I was wondering if folks on this list could point me to
some lucene wiki page or other source that talks about what works for
which languages in terms of spell checking. It doesn't have to be
strictly related to the spellchecker module, if someone has done work
separately to get better results, please let me know about that too.

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 06 16:54:09 2011
Return-Path: <java-user-return-48281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97031 invoked from network); 6 Jan 2011 16:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jan 2011 16:54:09 -0000
Received: (qmail 88810 invoked by uid 500); 6 Jan 2011 16:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88779 invoked by uid 500); 6 Jan 2011 16:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88771 invoked by uid 99); 6 Jan 2011 16:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 16:54:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 16:54:00 +0000
Received: by yxm8 with SMTP id 8so7692798yxm.35
        for <java-user@lucene.apache.org>; Thu, 06 Jan 2011 08:53:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=VbPPrOjlZTesg4DyFrhCretzotyxe2jhXCojLaax+xc=;
        b=wtM/cxlE4NBJTDG1mZWrzK+jg6AjXA2vC0uEQ54sbscSk1ny0E9BeDsM+dG0psx2Ub
         0/RaA3kHsvH+5wK4cfuqgypQ6C1NXJmnRC8hxCC1Ook95eVBAbWsPjAWu90q2eArz4wS
         vZp1pMeNq5gVFn//UCvt6OjfTIJTTbYZ1BE90=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=xVHECnTtdIzSZYcgrJAg8oMZgEr598QjTu2w/Zl9XTk/mHr6hUZFDzNhFBTk1w1vF0
         UYTf4g6p+/PWskq2HjfV5OyP3UekUGz4DUYwD0A4qbXCHdFQ5vNj4G+xQ9kh2MkOwCS/
         eJAs7/PfpOtrQO1xz/7POojH+fhCaAZXepRmE=
MIME-Version: 1.0
Received: by 10.151.103.3 with SMTP id f3mr22152294ybm.45.1294332819551; Thu,
 06 Jan 2011 08:53:39 -0800 (PST)
Received: by 10.150.138.18 with HTTP; Thu, 6 Jan 2011 08:53:39 -0800 (PST)
Date: Thu, 6 Jan 2011 11:53:39 -0500
Message-ID: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com>
Subject: Where to find non-English dictionaries, thesaurus, synonyms
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hello,

What's a good source to get dictionaries (for spellcorrections) and/or
thesaurus (for synonyms) that can be used with Lucene for non-English
languages such as Fresh, Chinese, Korean etc?

For example, the wordnet contrib module is based on the data set
provided by the Princeton based wordnet system but I'm wondering where
the Lucene users go for similar reliable source for other languages?

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 06 17:39:25 2011
Return-Path: <java-user-return-48282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23832 invoked from network); 6 Jan 2011 17:39:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jan 2011 17:39:25 -0000
Received: (qmail 92921 invoked by uid 500); 6 Jan 2011 17:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92859 invoked by uid 500); 6 Jan 2011 17:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92851 invoked by uid 99); 6 Jan 2011 17:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 17:39:22 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of Hong-Thai.Nguyen@polyspot.com does not designate 83.206.24.89 as permitted sender)
Received: from [83.206.24.89] (HELO louvre.polyspot.com) (83.206.24.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jan 2011 17:39:17 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Where to find non-English dictionaries, thesaurus, synonyms
Date: Thu, 6 Jan 2011 18:38:49 +0100
Message-ID: <91CF84419DBEE14A99BD21C53377422CB09A07@louvre.polyspot.intra>
In-Reply-To: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Where to find non-English dictionaries, thesaurus, synonyms
Thread-Index: AcutwlbQ6suavOQaSxixJpAqhNcMrgAAB5TA
References: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com>
From: "Hong-Thai Nguyen" <Hong-Thai.Nguyen@polyspot.com>
To: <java-user@lucene.apache.org>

SGksDQoNCkknbSBub3Qgc3VyZSB0aGVzZSBub24tRW5nbGlzaCBzcGVsbGNoZWNrZXJzLCBhbmFs
eXplcnMgYW5kIHJlbGF0ZWQgcmVzb3VyY2VzIGFyZSBnb29kIGlkZWEgaW4gcmVhbCB1c2FnZS4g
RW5nbGlzaCBncmFtbWFyIGlzIHF1aXRlIHNpbXBsZSBhbmQgY2FuIGJlIGNhcHR1cmVkIGluIFBv
cnRlcidzIHJ1bGVzLCBidXQgb3RoZXJzIHNvIGRpZmZlcmVudC4gRm9yIGV4YW1wbGUsIFBvcnRl
cidzIHJ1bGVzIGNhbiBub3Qgd29yayB3ZWxsIGluIEZyZW5jaCBncmFtbWFyLCBuZWl0aGVyIGlu
IEFzaWFuIGxhbmd1YWdlcy4gTGFuZ3VhZ2VzIGxpYnJhcmllcyBwcm92aWRpbmcgaW4gTHVjZW5l
IGFyZSBwcmFjdGljYWwsIGJ1dCB0aGV5IGFyZSBzYXRpc2Z5IGluIHJlYWwgdXNhZ2U/IE5lZWQg
YW4gZXZhbHVhdGlvbiBlZmZvcnQgaW4gZWFjaCBsYW5ndWFnZS4NCg0KRXZlbiB5b3UgaGF2ZSBh
IHNwZWNpYWwgbGFuZ3VhZ2UsIGl0J3Mgc3RpbGwgZGlmZmljdWx0IHRvIGRlY2lkZSAic2F0aXNm
eSBsZXZlbCIuIFlvdSBtYXkgbmVlZCBzaW1wbHkgTHVjZW5lIGFuYWx5c2VyIGluIGdlbmVyYWwg
c2VhcmNoLCBidXQgaW4gc29waGlzdGljYXRlIGNvbnRlbnQgd2l0aCBoaWdoIHF1YWxpdHkgcmVx
dWlyZWQgcmVzdWx0LCB5b3UgbWF5IG5lZWQgYSBtb3JwaG8tc3ludGF4IG9yIHNlbWFudGljIGFu
YWx5emVyIGluIHRoaXMgY29udGV4dC4gQW5kIHRoZXNlIGFuYWx5emVycyBhcmUgc28gZXhwZW5z
aXZlIChpbiBjb3N0LCBhbmQgaW4gcHJvY2Vzc2luZyB0aW1lKS4NCg0KRGV2ZWxvcCBhIGxhbmd1
YWdlIHNwZWxsY2hlY2tlciwgYW5hbHl6ZXIsIHN0ZW1tZXIsIC4uLiBhbmQgaXRzIGRpY3Rpb25h
cmllcyBpcyBzdGlsbCBkaWZmaWN1bHQgYW5kIG91dCBvZiBkZXZlbG9wZXIncyBzY29wZS4gQW5k
IFNlYXJjaCBQcm92aWRlciBrZWVwcyB0aGVzZSBhZHZhbmNlZCBmZWF0dXJlcyBpbiBwcml2YXRl
Lg0KDQpGb3IgZWFjaCBsYW5ndWFnZSwgeW91IGNhbiBmaW5kIG91dCBhIGxpYnJhcnkgKG1vc3Rs
eSBpbiByZXNlYXJjaCBjb250ZXh0KSBmb3Igc3BlbGxjaGVja2VyLCBhbmFseXplci4gWW91IGhh
dmUgdG8gaW50ZWdyYXRlIGluIEx1Y2VuZS4NCkFwYWNoZSBPcGVuLU5MUCBwcm9qZWN0IGlzIGEg
bmljZSBlZmZvcnQgdG8gY29sbGVjdCBsYW5ndWFnZXMgTkxQIHdvcmtzIGFyb3VuZCB0aGUgd29y
bGQsIHRoZW4gaW50ZWdyYXRlIGluIGNvbW1vbiBwbGF0Zm9ybTogaHR0cDovL2luY3ViYXRvci5h
cGFjaGUub3JnL29wZW5ubHAvDQoNClByaW5jZXRvbiBXb3JkbmV0IGlzIGNvbmNlcHQncyBkZWZp
bml0aW9uLCBub3QgZGljdGlvbmFyeS4gVGhlc2UgaXMgc29tZSBvdGhlciBsYW5ndWFnZXM6IGh0
dHA6Ly93d3cuZ2xvYmFsd29yZG5ldC5vcmcvZ3dhL3dvcmRuZXRfdGFibGUuaHRtDQoNCkknbSB3
b25kZXJpbmcgaG93IFdvcmRuZXQgaXMgdXNlZnVsIGluIHNlYXJjaCBjb250ZXh0LiBZb3UgY2Fu
IG1heSB1c2VzIHN5bnNldHMgKHN5bm9ueW1zKSBsaWtlIGEgc3VnZ2VzdGlvbiBkaWN0aW9uYXJ5
LiBCdXQgc3RvcHdvcmRzLCBzdGVtIGFuZCBhbmFseXplciBkaWN0aW9uYXJpZXMgYXJlIGRlcGVu
ZGFudCB0byBhc3NvY2lhdGUgbW9kdWxlcy4NCg0KQmVzdCwNCg0KLS0tLS0tLS0tLS0tLS0tLS0t
LQ0KSG9uZy1UaGFpDQotLS0tLU1lc3NhZ2UgZCdvcmlnaW5lLS0tLS0NCkRlwqA6IFB1bGtpdCBT
aW5naGFsIFttYWlsdG86cHVsa2l0c2luZ2hhbEBnbWFpbC5jb21dIA0KRW52b3nDqcKgOiBqZXVk
aSA2IGphbnZpZXIgMjAxMSAxNzo1NA0Kw4DCoDogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
DQpPYmpldMKgOiBXaGVyZSB0byBmaW5kIG5vbi1FbmdsaXNoIGRpY3Rpb25hcmllcywgdGhlc2F1
cnVzLCBzeW5vbnltcw0KDQpIZWxsbywNCg0KV2hhdCdzIGEgZ29vZCBzb3VyY2UgdG8gZ2V0IGRp
Y3Rpb25hcmllcyAoZm9yIHNwZWxsY29ycmVjdGlvbnMpIGFuZC9vcg0KdGhlc2F1cnVzIChmb3Ig
c3lub255bXMpIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBMdWNlbmUgZm9yIG5vbi1FbmdsaXNoDQps
YW5ndWFnZXMgc3VjaCBhcyBGcmVzaCwgQ2hpbmVzZSwgS29yZWFuIGV0Yz8NCg0KRm9yIGV4YW1w
bGUsIHRoZSB3b3JkbmV0IGNvbnRyaWIgbW9kdWxlIGlzIGJhc2VkIG9uIHRoZSBkYXRhIHNldA0K
cHJvdmlkZWQgYnkgdGhlIFByaW5jZXRvbiBiYXNlZCB3b3JkbmV0IHN5c3RlbSBidXQgSSdtIHdv
bmRlcmluZyB3aGVyZQ0KdGhlIEx1Y2VuZSB1c2VycyBnbyBmb3Igc2ltaWxhciByZWxpYWJsZSBz
b3VyY2UgZm9yIG90aGVyIGxhbmd1YWdlcz8NCg0KVGhhbmtzIQ0KDQotLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVj
ZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-48283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 07 16:56:00 2011
Return-Path: <java-user-return-48283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84576 invoked from network); 7 Jan 2011 16:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jan 2011 16:55:59 -0000
Received: (qmail 35933 invoked by uid 500); 7 Jan 2011 16:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35768 invoked by uid 500); 7 Jan 2011 16:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35760 invoked by uid 99); 7 Jan 2011 16:55:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 16:55:54 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 16:55:48 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <awallat@web.de>)
	id 1PbFb4-0005mE-RT
	for java-user@lucene.apache.org; Fri, 07 Jan 2011 08:55:27 -0800
Date: Fri, 7 Jan 2011 08:55:26 -0800 (PST)
From: Andre Wallat <awallat@web.de>
To: java-user@lucene.apache.org
Message-ID: <1294419326637-2212921.post@n3.nabble.com>
Subject: wrong fieldNorm when title is empty
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I recognized when the title of a document inside an index is empty, then the
fieldNorm value is set to 7.5161928E9. This would lead to a big unwanted
boost of documents with an empty title I imagine. Is this a bug?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/wrong-fieldNorm-when-title-is-empty-tp2212921p2212921.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 07 19:55:40 2011
Return-Path: <java-user-return-48284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79961 invoked from network); 7 Jan 2011 19:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jan 2011 19:55:40 -0000
Received: (qmail 73386 invoked by uid 500); 7 Jan 2011 19:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73326 invoked by uid 500); 7 Jan 2011 19:55:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73318 invoked by uid 99); 7 Jan 2011 19:55:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 19:55:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vallalku@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 19:55:30 +0000
Received: by qwh6 with SMTP id 6so18793460qwh.35
        for <java-user@lucene.apache.org>; Fri, 07 Jan 2011 11:55:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=2BvHjyOyi0V9iqU83gcPP10HJgh4+toVMzgzOTM8Qjo=;
        b=J2MMHC2Nme3Tck7hzpRszps77A768uzsnmql2ewdKhgv7WNLgNTIqMnkXKyOjjtieJ
         DHQOl8VB6wjLyH95hbPBo4SjXAm+aamzc7bcVpufasQu6Nx4eO62EwWT7w7YYvfYUXlC
         744xc46gnCqsjHTRd4f18tke0iu/C0hCHlPkw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SBaq1Kv/pSncn1RaPCQzRfXwRas2cEK//91OMZ+28ULl3NBhBmnRqrFv4OOv2z7S6x
         BmzkRczjCOm2wiNl9T1hCxXkySnk/+OLG/h8M/eUw6E0VZPUcjemH1EcgnGQZt27i7XS
         SksdjPV6yvcOmkmO+jkDjuZyvorkMsRuIInmQ=
MIME-Version: 1.0
Received: by 10.229.81.12 with SMTP id v12mr2957298qck.132.1294430109527; Fri,
 07 Jan 2011 11:55:09 -0800 (PST)
Received: by 10.229.232.11 with HTTP; Fri, 7 Jan 2011 11:55:09 -0800 (PST)
Date: Fri, 7 Jan 2011 11:55:09 -0800
Message-ID: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
Subject: is OpenBitSet / SortedVIntList compressed bit map index?
From: First Last <vallalku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646bf50dd703a049946fe0b

--00163646bf50dd703a049946fe0b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
better if memory usage is the primary concern ?

Our filters are sparse. So is SortedVIntList better in that case?

Are there any other compressed bitmap index implementations which offer bit
map compression at a decent performance assuming filters are sparse?

I'd appreciate any help on this.Thanks.

- Raavan

--00163646bf50dd703a049946fe0b--

From java-user-return-48285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 07 21:27:28 2011
Return-Path: <java-user-return-48285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18920 invoked from network); 7 Jan 2011 21:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jan 2011 21:27:28 -0000
Received: (qmail 95717 invoked by uid 500); 7 Jan 2011 21:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95669 invoked by uid 500); 7 Jan 2011 21:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95661 invoked by uid 99); 7 Jan 2011 21:27:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 21:27:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 21:27:19 +0000
Received: by bwz8 with SMTP id 8so18019966bwz.35
        for <java-user@lucene.apache.org>; Fri, 07 Jan 2011 13:26:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=YjDgjSVrBwn8riA5GgTsgGa++PFjHyyOaAj/2s6XVTs=;
        b=un8bFhXJq4Qbs87tF5DCEMAOH3vJoXTzz/tXDHE0C37wLEmy6AB7gWtwmg+GiR9b+t
         p8v3k+85tMAsBnEkJhiWammNzubz89Oce7nZDASBw6Bwi+y2gmrKttHrEPAx/o8e6Z2G
         q3FnnA7oJQjmxW1hk6IvFicnsfpAFMeUw6SnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xccBc28LR92O86NqFjQox0Wt8/aMOQ2Ty21FDrn7mL+cjjJy3l5NZfW49rsMVmRVqU
         IBntEfUcAHMfw/vQoTqCI1PGed+4j1wfH+uGfLmXe2pgvCB92ZfBGGx3nG6KSEUvTdP0
         NZe5yaoWHR8c68eJ/5VniIB3Fe8dgXk5e8ksM=
Received: by 10.204.63.2 with SMTP id z2mr3533687bkh.66.1294435617719; Fri, 07
 Jan 2011 13:26:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Fri, 7 Jan 2011 13:26:37 -0800 (PST)
In-Reply-To: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com>
References: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Fri, 7 Jan 2011 16:26:37 -0500
Message-ID: <AANLkTin1eAFPp-0ahSMuhxrZn2BJ0kWr3R8K9URApg4-@mail.gmail.com>
Subject: Re: Where to find non-English dictionaries, thesaurus, synonyms
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 6, 2011 at 11:53 AM, Pulkit Singhal <pulkitsinghal@gmail.com> wrote:
> Hello,
>
> What's a good source to get dictionaries (for spellcorrections) and/or
> thesaurus (for synonyms) that can be used with Lucene for non-English
> languages such as Fresh, Chinese, Korean etc?

if you can't find a wordlist of correctly-spelled words somewhere
else, you can always try
http://wiki.services.openoffice.org/wiki/Dictionaries, grab the
openoffice spellchecker dictionary for that language, and use the
hunspell "unmunch" command (sort of like morphological generation) to
generate a list of words you could then use with PlainTextDictionary.

>
> For example, the wordnet contrib module is based on the data set
> provided by the Princeton based wordnet system but I'm wondering where
> the Lucene users go for similar reliable source for other languages?
>

in this case i would also investigate the openoffice thesaurus data,
if you cant find anything else.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 07 21:36:19 2011
Return-Path: <java-user-return-48286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21710 invoked from network); 7 Jan 2011 21:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jan 2011 21:36:18 -0000
Received: (qmail 9696 invoked by uid 500); 7 Jan 2011 21:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9628 invoked by uid 500); 7 Jan 2011 21:36:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9619 invoked by uid 99); 7 Jan 2011 21:36:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 21:36:16 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.10] (HELO moutng.kundenserver.de) (212.227.17.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 21:36:10 +0000
Received: from brouwer.fritz.box (srbk-5d801cec.pool.mediaWays.net [93.128.28.236])
	by mrelayeu.kundenserver.de (node=mreu0) with ESMTP (Nemesis)
	id 0MZQdt-1PtojO2eNh-00LFDS; Fri, 07 Jan 2011 22:35:48 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Where to find non-English dictionaries, thesaurus, synonyms
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <AANLkTin1eAFPp-0ahSMuhxrZn2BJ0kWr3R8K9URApg4-@mail.gmail.com>
Date: Fri, 7 Jan 2011 22:35:46 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <15033D61-E3A3-45C8-8175-8F796233E3D2@hoplahup.net>
References: <AANLkTin6DVRNxCMdvJ7X9GUpyVVDV_1AzKAe04nkEAF4@mail.gmail.com> <AANLkTin1eAFPp-0ahSMuhxrZn2BJ0kWr3R8K9URApg4-@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:m/fpr7xkqL8VWkkMcMwBxrs8eHa4D7ZA9KGApFupUPW
 CWpwxIf6RqWMjsztwamNghps7dXI1CN07gfLz5oV4cA5XBCJbm
 +0jSU8MwMgv9+FOYxUm7IDuppmxVX1hMglaelcnvH5FjTgpUQo
 oSoCrz4rjBS8jGZY2L0ihx+XMWmD+E20KffqZmn13P+1rNWSlp
 cN+VLeYOGUeoKQEMFaR2Y21e8s+hacgsrlPy3dcJvY=

Somehow, I had the impression that the TrebleCLEF and EuroMatrix =
european projects are meant to gather this kind of information sources.

But honestly, it's not as homogeneous as in OpenOffice.
Mozilla also has dictionaries.
Wiktionary can also be helpful.

paul


Le 7 janv. 2011 =E0 22:26, Robert Muir a =E9crit :

> On Thu, Jan 6, 2011 at 11:53 AM, Pulkit Singhal =
<pulkitsinghal@gmail.com> wrote:
>> Hello,
>>=20
>> What's a good source to get dictionaries (for spellcorrections) =
and/or
>> thesaurus (for synonyms) that can be used with Lucene for non-English
>> languages such as Fresh, Chinese, Korean etc?
>=20
> if you can't find a wordlist of correctly-spelled words somewhere
> else, you can always try
> http://wiki.services.openoffice.org/wiki/Dictionaries, grab the
> openoffice spellchecker dictionary for that language, and use the
> hunspell "unmunch" command (sort of like morphological generation) to
> generate a list of words you could then use with PlainTextDictionary.
>=20
>>=20
>> For example, the wordnet contrib module is based on the data set
>> provided by the Princeton based wordnet system but I'm wondering =
where
>> the Lucene users go for similar reliable source for other languages?
>>=20
>=20
> in this case i would also investigate the openoffice thesaurus data,
> if you cant find anything else.
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 07 23:12:11 2011
Return-Path: <java-user-return-48287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71496 invoked from network); 7 Jan 2011 23:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jan 2011 23:12:10 -0000
Received: (qmail 58239 invoked by uid 500); 7 Jan 2011 23:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58191 invoked by uid 500); 7 Jan 2011 23:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58183 invoked by uid 99); 7 Jan 2011 23:12:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 23:12:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.97.32.74] (HELO smtp-out-06.comm2000.it) (212.97.32.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jan 2011 23:12:00 +0000
Received: from [192.168.0.4] (250.188.173.62.dsl.static.ip.kpnqwest.it [62.173.188.250])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp-out-06.comm2000.it (Postfix) with ESMTP id 23790392819
	for <java-user@lucene.apache.org>; Sat,  8 Jan 2011 00:11:38 +0100 (CET)
Message-ID: <4D279DA9.70506@fissore.org>
Date: Sat, 08 Jan 2011 00:11:37 +0100
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
In-Reply-To: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

First Last, il 07/01/2011 20:55, ha scritto:
> Hi,
>
> is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
> better if memory usage is the primary concern ?
>

SortedVIntList is compressed, OpenBitSet is not


> Our filters are sparse. So is SortedVIntList better in that case?
>

Yes


> Are there any other compressed bitmap index implementations which offer bit
> map compression at a decent performance assuming filters are sparse?
>

I'm too looking for alternative implementations of compressed bitsets, 
so I'm too really interested in everybody experience: my primary concern 
at the moment is serializing bitsets to recover searcher warmup time

I've tried some and roughly tested them: my conclusion was that we 
(lucene users) already stand on the rolls royce of bitset implementations.

federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 00:05:21 2011
Return-Path: <java-user-return-48288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98247 invoked from network); 8 Jan 2011 00:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 00:05:21 -0000
Received: (qmail 12090 invoked by uid 500); 8 Jan 2011 00:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12037 invoked by uid 500); 8 Jan 2011 00:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12029 invoked by uid 99); 8 Jan 2011 00:05:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 00:05:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryan@glassdoor.com designates 69.50.2.38 as permitted sender)
Received: from [69.50.2.38] (HELO ht1.hostedexchange.local) (69.50.2.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 00:05:11 +0000
Received: from HT1.hostedexchange.local (172.16.69.39) by
 ht2.hostedexchange.local (172.16.69.40) with Microsoft SMTP Server (TLS) id
 8.2.255.0; Fri, 7 Jan 2011 16:04:50 -0800
Received: from mbx2.hostedexchange.local ([172.16.69.30]) by
 HT1.hostedexchange.local ([172.16.69.39]) with mapi; Fri, 7 Jan 2011 16:04:50
 -0800
From: Ryan Aylward <ryan@glassdoor.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 7 Jan 2011 16:05:21 -0800
Subject: RE: is OpenBitSet / SortedVIntList compressed bit map index?
Thread-Topic: is OpenBitSet / SortedVIntList compressed bit map index?
Thread-Index: AcuuwE8aC3XmTuZ8QUS+uQX5MqtNgAAB1bUg
Message-ID: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE30@mbx2.hostedexchange.local>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
 <4D279DA9.70506@fissore.org>
In-Reply-To: <4D279DA9.70506@fissore.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I don't recall how we decided to use it, but we are using http://code.googl=
e.com/p/compressedbitset/ and it seems to be pretty efficient in terms of m=
emory.

-----Original Message-----
From: Federico Fissore [mailto:federico@fissore.org]=20
Sent: Friday, January 07, 2011 3:12 PM
To: java-user@lucene.apache.org
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?

First Last, il 07/01/2011 20:55, ha scritto:
> Hi,
>
> is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
> better if memory usage is the primary concern ?
>

SortedVIntList is compressed, OpenBitSet is not


> Our filters are sparse. So is SortedVIntList better in that case?
>

Yes


> Are there any other compressed bitmap index implementations which offer b=
it
> map compression at a decent performance assuming filters are sparse?
>

I'm too looking for alternative implementations of compressed bitsets,=20
so I'm too really interested in everybody experience: my primary concern=20
at the moment is serializing bitsets to recover searcher warmup time

I've tried some and roughly tested them: my conclusion was that we=20
(lucene users) already stand on the rolls royce of bitset implementations.

federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 00:33:23 2011
Return-Path: <java-user-return-48289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18148 invoked from network); 8 Jan 2011 00:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 00:33:23 -0000
Received: (qmail 34402 invoked by uid 500); 8 Jan 2011 00:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34368 invoked by uid 500); 8 Jan 2011 00:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34354 invoked by uid 99); 8 Jan 2011 00:33:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 00:33:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryan@glassdoor.com designates 69.50.2.38 as permitted sender)
Received: from [69.50.2.38] (HELO ht1.hostedexchange.local) (69.50.2.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 00:33:13 +0000
Received: from HT1.hostedexchange.local (172.16.69.39) by
 ht2.hostedexchange.local (172.16.69.40) with Microsoft SMTP Server (TLS) id
 8.2.255.0; Fri, 7 Jan 2011 16:32:51 -0800
Received: from mbx2.hostedexchange.local ([172.16.69.30]) by
 HT1.hostedexchange.local ([172.16.69.39]) with mapi; Fri, 7 Jan 2011 16:32:51
 -0800
From: Ryan Aylward <ryan@glassdoor.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 7 Jan 2011 16:33:22 -0800
Subject: Creating an index with multiple values for a single field
Thread-Topic: Creating an index with multiple values for a single field
Thread-Index: Acuuy6eugFEcFvTbRG2WMdlhSmBxmg==
Message-ID: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85@mbx2.hostedexchange.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85mbx2hostedexc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85mbx2hostedexc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Our business has a need to allow for multiple values for a single field. Fo=
r example, we have an index of employers where an employer often has multip=
le ways people refer to it. For example, the company "Wal-mart" is referred=
 to as:

1)      Wal-mart

2)      Wal-mart Stores

3)      Walmart
I would like a search for any of these 3 terms to match the Wal-mart employ=
er.

I've tried two different approaches for this.

Approach 1: Create multiple values for the same field. So the document has =
these three fields:

1)      name=3DWal-mart

2)      name=3DWal-mart Stores

3)      name=3DWalmart
The problem with this is Lucene seems to treat the 3 different fields as on=
e long field of "Wal-mart Wal-mart Stores Walmart". This is problematic b/c=
 term frequencies is 2 when a user searches for "Wal-mart".

Approach 2: Create different named fields for each value so the document ha=
s these 3 fields:

1)      name1=3DWal-mart

2)      name2=3DWal-mart Stores

3)      name3=3DWalmart
This fixes the issue above but introduces a different problem. The idf calc=
ulation is incorrect b/c idf is calculated per field. Most employers only h=
ave one name or maybe 2 names. So the name3 fields idf ends up being much h=
igher b/c there are fewer docs with a given term in the name3 field.

For now, I'm going with approach 2 but overriding the IndexReader. IndexRea=
der.docFreq(Term t) method always returns the doc frequency from the name1 =
field even if the Term t is actually for name2 or name3, etc. But this does=
n't feel like a clean solution.

Any suggestions on how to deal with this? Any ideas would be appreciated.
Ryan Aylward

--_000_E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85mbx2hostedexc_--

From java-user-return-48290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 01:44:52 2011
Return-Path: <java-user-return-48290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51108 invoked from network); 8 Jan 2011 01:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 01:44:51 -0000
Received: (qmail 75081 invoked by uid 500); 8 Jan 2011 01:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75024 invoked by uid 500); 8 Jan 2011 01:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75016 invoked by uid 99); 8 Jan 2011 01:44:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 01:44:49 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ckstjohn@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 01:44:42 +0000
Received: by vws18 with SMTP id 18so6974428vws.35
        for <java-user@lucene.apache.org>; Fri, 07 Jan 2011 17:44:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=Jigxw5ahY0RaRw8KksAf01i8kXgMdD7aQq8yOV27XjA=;
        b=AT27WS1Vch1/DMdmevCXQ9iboxWfDManT0ZBbIHbMsP2Z720Zr3M3qU44K+n7Pmp+D
         r7lGIWSP3yM5j6gZwzxEmvtEjzAXDYZhkuVLpADA2q9jz8lX/MceCM4lId/HeBHUzAKh
         GRJmK2aH/VBpOJbEVECeuDWS6ElV1M+3oKs/I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=HQUefrQs2XclpRBpCNw1pXsV56KegmZiBGNZChpyvFbEIwN8+H2fvglhi2jz0jctR5
         /117u58i6Eh6DooRBp0td/C+RfmTdZIPQsz8134y/EqYSAWN7ciA98baLSS8HL61Dq1h
         ZyZDc6gfLccWP32EknMFYXhAsgoKf5x/R0Og0=
MIME-Version: 1.0
Received: by 10.220.63.10 with SMTP id z10mr7385338vch.90.1294451060835; Fri,
 07 Jan 2011 17:44:20 -0800 (PST)
Received: by 10.220.190.205 with HTTP; Fri, 7 Jan 2011 17:44:20 -0800 (PST)
Date: Fri, 7 Jan 2011 19:44:20 -0600
Message-ID: <AANLkTin+sTP2C2_O61v3xFjqDjbnOUb_NJ7Kdo-0CQaA@mail.gmail.com>
Subject: 3.0.3 Contrib Query Parser : Custom Field Name Builder
From: Christopher St John <ckstjohn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to:

 StandardQueryTreeBuilder b =3D =85;
 b.setBuilder( "myfield", fieldSpecificBuilder);

In the debugger I see that the builder is registered in the
QueryTreeBuilder's fieldNameBuilders map.

When parsing, QueryTreeBuilder.getBuilder tries to look
up the builder by using the FieldableNode's field but the
debugger says the node's field is an UnescapedCharSequence,
not a String, and the lookup fails.

Registering the builder with an UnescapedCharSequence
for the name instead of a String doesn't seem to help,
presumably because UCS doesn't have a hash an equals
or hash method.

Suggestions? I've worked around it by registering a class
based builder, checking for the field name and either
delegating to the original builder or doing my custom
processing, but it's a little awkward.

-cks

--=20
Christopher St. John
http://artofsystems.blogspot.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 03:39:18 2011
Return-Path: <java-user-return-48291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90972 invoked from network); 8 Jan 2011 03:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 03:39:18 -0000
Received: (qmail 21333 invoked by uid 500); 8 Jan 2011 03:39:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21216 invoked by uid 500); 8 Jan 2011 03:39:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21208 invoked by uid 99); 8 Jan 2011 03:39:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 03:39:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 03:39:08 +0000
Received: by fxm2 with SMTP id 2so17349429fxm.35
        for <java-user@lucene.apache.org>; Fri, 07 Jan 2011 19:38:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=OO0RQEu8qeQL+jdxaBpptDAA7RwLR3xlhbJqv0D07T4=;
        b=tHZ/dt7gNpqHnGsV2IDpKeqqrWOW3T6gaaEn48ZiALtZ11hdDMW74wKQVb26uylaRV
         Kd460lCGD9U53+HlOtmR0GTiXM7NMiCzx6l/8zacLHZpoPWfBOxQtukpI+2muLE8Hl9r
         V9peWKqV4lIryTs2QZPmEtAgFf8PtJs9a8jkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=AgQYnXJ/DAGEaKPzU54zWveqqYDG9NgznmlGn6c8c2c4wOpaXXYDjZXKg/WV3l8FZb
         DiMJoCMvkXnsUXDLr7EQxe4JYTmYmJDx1b0zLBVuf+Ayy/ZqTSImJVCKmy2benVo5KvP
         sVx2yWYmTWO+298FJ81ZHeJgVLCKb+ybLTjdk=
Received: by 10.223.74.5 with SMTP id s5mr931762faj.72.1294457928141; Fri, 07
 Jan 2011 19:38:48 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.144.71 with HTTP; Fri, 7 Jan 2011 19:38:05 -0800 (PST)
In-Reply-To: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85@mbx2.hostedexchange.local>
References: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85@mbx2.hostedexchange.local>
From: Anshum <anshumg@gmail.com>
Date: Sat, 8 Jan 2011 09:08:05 +0530
Message-ID: <AANLkTimqVLFrH1FGACaE3iTGidvJuEvY-ptdw4jbMuDY@mail.gmail.com>
Subject: Re: Creating an index with multiple values for a single field
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a38ffbce0f04994d7806
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a38ffbce0f04994d7806
Content-Type: text/plain; charset=ISO-8859-1

Hi Ryan,
You should try the synonym filter. That should help you with this kinda
problem.
You could also look at turning off norms for the name field, or turning off
tf or idf.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Sat, Jan 8, 2011 at 6:03 AM, Ryan Aylward <ryan@glassdoor.com> wrote:

> Our business has a need to allow for multiple values for a single field.
> For example, we have an index of employers where an employer often has
> multiple ways people refer to it. For example, the company "Wal-mart" is
> referred to as:
>
> 1)      Wal-mart
>
> 2)      Wal-mart Stores
>
> 3)      Walmart
> I would like a search for any of these 3 terms to match the Wal-mart
> employer.
>
> I've tried two different approaches for this.
>
> Approach 1: Create multiple values for the same field. So the document has
> these three fields:
>
> 1)      name=Wal-mart
>
> 2)      name=Wal-mart Stores
>
> 3)      name=Walmart
> The problem with this is Lucene seems to treat the 3 different fields as
> one long field of "Wal-mart Wal-mart Stores Walmart". This is problematic
> b/c term frequencies is 2 when a user searches for "Wal-mart".
>
> Approach 2: Create different named fields for each value so the document
> has these 3 fields:
>
> 1)      name1=Wal-mart
>
> 2)      name2=Wal-mart Stores
>
> 3)      name3=Walmart
> This fixes the issue above but introduces a different problem. The idf
> calculation is incorrect b/c idf is calculated per field. Most employers
> only have one name or maybe 2 names. So the name3 fields idf ends up being
> much higher b/c there are fewer docs with a given term in the name3 field.
>
> For now, I'm going with approach 2 but overriding the IndexReader.
> IndexReader.docFreq(Term t) method always returns the doc frequency from the
> name1 field even if the Term t is actually for name2 or name3, etc. But this
> doesn't feel like a clean solution.
>
> Any suggestions on how to deal with this? Any ideas would be appreciated.
> Ryan Aylward
>

--20cf3054a38ffbce0f04994d7806--

From java-user-return-48292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 06:33:12 2011
Return-Path: <java-user-return-48292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61774 invoked from network); 8 Jan 2011 06:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 06:33:12 -0000
Received: (qmail 78980 invoked by uid 500); 8 Jan 2011 06:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78929 invoked by uid 500); 8 Jan 2011 06:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78909 invoked by uid 99); 8 Jan 2011 06:33:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 06:33:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 06:33:02 +0000
Received: by wye20 with SMTP id 20so19093656wye.35
        for <multiple recipients>; Fri, 07 Jan 2011 22:32:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:cc:content-type;
        bh=t3nSPDNVmrtjMfaHY2iposUwfU8iw3zQKupk10epnEU=;
        b=lPRK6aUFrqB4N4ODD33B9Lm7MA2wP1D7aKIJGy7fqPcYaF5WpQ0hz9TLRI7T2YVtSW
         lferL5f3r4XZBxXHnDO4gVSxmcj7jHI1wXkywvknpOwD3K6n0Q5tBS9YdaYx9vBabREH
         OkAx8FcR+jyJUIM2/F/SLwB8i/YFRwlV7h/sY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=ShV9rUwBRAmOQdDmk2fgWFSCzfzPpuivZBacsxdo6g3jjuDW+4tgTBZUMszXcq6WQy
         cf1ee7N2SJ8hKh/EEUNzN3CzzuYcEj2GuwxbbyrfnSpLKSgohLGmcaq2Alc2XR/nvy36
         7cTDEjm7drAzj1qePN1VBdjyKix4EppE0xImc=
Received: by 10.216.188.67 with SMTP id z45mr12392487wem.7.1294468360362; Fri,
 07 Jan 2011 22:32:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.52.83 with HTTP; Fri, 7 Jan 2011 22:32:20 -0800 (PST)
In-Reply-To: <AANLkTin+sTP2C2_O61v3xFjqDjbnOUb_NJ7Kdo-0CQaA@mail.gmail.com>
References: <AANLkTin+sTP2C2_O61v3xFjqDjbnOUb_NJ7Kdo-0CQaA@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Sat, 8 Jan 2011 01:32:20 -0500
Message-ID: <AANLkTik_uz4o5FL=keEA_8VrEGfL8gY9_PPoJq6-KmUj@mail.gmail.com>
Subject: Re: 3.0.3 Contrib Query Parser : Custom Field Name Builder
To: java-user@lucene.apache.org
Cc: java-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636831950cadd4004994fe61b
X-Virus-Checked: Checked by ClamAV on apache.org

--001636831950cadd4004994fe61b
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi Christopher,

Thanks for raising this problem, I always thought a little bit strange to
use CharSequence as map key. Then a just did a little bit of research and
found this on CharSequence javadoc:

"This interface does not refine the general contracts of the
equals<http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.ht=
ml#equals(java.lang.Object)>
 and hashCode<http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Ob=
ject.html#hashCode()>
 methods. The result of comparing two objects that implement CharSequence i=
s
therefore, in general, undefined. Each object may be implemented by a
different class, and there is no guarantee that each class will be capable
of testing its instances for equality with those of the other. It is
therefore inappropriate to use arbitrary CharSequence instances as elements
in a set or as keys in a map."

So I think every Set or Map that uses CharSequence on contrib queryparser
should be forced to use String instead. I think there is no need to change
any API, we just need to make sure that toString() is invoked on the
CharSequence object before adding it to any Set or Map, this way we can fix
this problem for next 3.x release. However, for 4.x, we should ideally
change every API that receives or return Map<CharSequence,...> or
Set<CharSequence> to use only String.



On Fri, Jan 7, 2011 at 8:44 PM, Christopher St John <ckstjohn@gmail.com>wro=
te:

> I'm trying to:
>
>  StandardQueryTreeBuilder b =3D =85;
>  b.setBuilder( "myfield", fieldSpecificBuilder);
>
> In the debugger I see that the builder is registered in the
> QueryTreeBuilder's fieldNameBuilders map.
>
> When parsing, QueryTreeBuilder.getBuilder tries to look
> up the builder by using the FieldableNode's field but the
> debugger says the node's field is an UnescapedCharSequence,
> not a String, and the lookup fails.
>
> Registering the builder with an UnescapedCharSequence
> for the name instead of a String doesn't seem to help,
> presumably because UCS doesn't have a hash an equals
> or hash method.
>
> Suggestions? I've worked around it by registering a class
> based builder, checking for the field name and either
> delegating to the original builder or doing my custom
> processing, but it's a little awkward.
>
> -cks
>
> --
> Christopher St. John
> http://artofsystems.blogspot.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636831950cadd4004994fe61b--

From java-user-return-48293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 06:40:02 2011
Return-Path: <java-user-return-48293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69313 invoked from network); 8 Jan 2011 06:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 06:40:02 -0000
Received: (qmail 85426 invoked by uid 500); 8 Jan 2011 06:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85321 invoked by uid 500); 8 Jan 2011 06:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85313 invoked by uid 99); 8 Jan 2011 06:39:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 06:39:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adrianocrestani@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 06:39:54 +0000
Received: by wwd20 with SMTP id 20so18080052wwd.5
        for <java-user@lucene.apache.org>; Fri, 07 Jan 2011 22:39:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=reK6xS69okor6o/hlfSolDjSFQdWFslk/5uQVp4c4FY=;
        b=Mjs/K9Qly3QhZNC0LrfXd8XlhUni6XA3/vTPdJUu9akdddDJUaKmLrExc3g0duoas3
         ErXGGDDANpUsxeo6grPBa+KpQ7Gg1ZCw9Mj2VaP3Zq+o0UERHhTamVD+8rngIRb4Bahg
         Cz/WDgKGkBDKMxpXlYYjwe8IwUWe/M5JhDqdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ESZSoNXzywI43+IMgiiYmgxrAblPT6w1/9yOrGpOJpNdQhZ+48WaOCgaqvuItnTuiX
         RXz9HjrUQqvegR2hsFAR219qRotuiYKLt3pWxk5Q8fcrDAXBHL+MU2mHtM3bPtVt0kxR
         Nhyp43ZJf5Xc+2S2jyrTczrhuSqjIG7mpztUk=
Received: by 10.216.173.18 with SMTP id u18mr52755wel.37.1294468772022; Fri,
 07 Jan 2011 22:39:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.52.83 with HTTP; Fri, 7 Jan 2011 22:39:11 -0800 (PST)
In-Reply-To: <AANLkTik_uz4o5FL=keEA_8VrEGfL8gY9_PPoJq6-KmUj@mail.gmail.com>
References: <AANLkTin+sTP2C2_O61v3xFjqDjbnOUb_NJ7Kdo-0CQaA@mail.gmail.com> <AANLkTik_uz4o5FL=keEA_8VrEGfL8gY9_PPoJq6-KmUj@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Sat, 8 Jan 2011 01:39:11 -0500
Message-ID: <AANLkTimRrhOng91zBQVFfjShtSrTkDFETFch3uvRT0O3@mail.gmail.com>
Subject: Re: 3.0.3 Contrib Query Parser : Custom Field Name Builder
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c1cf054496d04994fff86

--0016e64c1cf054496d04994fff86
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

I created a JIRA to fix this problem:
https://issues.apache.org/jira/browse/LUCENE-2855

On Sat, Jan 8, 2011 at 1:32 AM, Adriano Crestani
<adrianocrestani@gmail.com>wrote:

> Hi Christopher,
>
> Thanks for raising this problem, I always thought a little bit strange to
> use CharSequence as map key. Then a just did a little bit of research and
> found this on CharSequence javadoc:
>
> "This interface does not refine the general contracts of the equals<http:=
//download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals(ja=
va.lang.Object)>
>  and hashCode<http://download.oracle.com/javase/1.5.0/docs/api/java/lang/=
Object.html#hashCode()>
>  methods. The result of comparing two objects that implement CharSequence=
 is
> therefore, in general, undefined. Each object may be implemented by a
> different class, and there is no guarantee that each class will be capabl=
e
> of testing its instances for equality with those of the other. It is
> therefore inappropriate to use arbitrary CharSequence instances as
> elements in a set or as keys in a map."
>
> So I think every Set or Map that uses CharSequence on contrib queryparser
> should be forced to use String instead. I think there is no need to chang=
e
> any API, we just need to make sure that toString() is invoked on the
> CharSequence object before adding it to any Set or Map, this way we can f=
ix
> this problem for next 3.x release. However, for 4.x, we should ideally
> change every API that receives or return Map<CharSequence,...> or
> Set<CharSequence> to use only String.
>
>
>
> On Fri, Jan 7, 2011 at 8:44 PM, Christopher St John <ckstjohn@gmail.com>w=
rote:
>
>> I'm trying to:
>>
>>  StandardQueryTreeBuilder b =3D =85;
>>  b.setBuilder( "myfield", fieldSpecificBuilder);
>>
>> In the debugger I see that the builder is registered in the
>> QueryTreeBuilder's fieldNameBuilders map.
>>
>> When parsing, QueryTreeBuilder.getBuilder tries to look
>> up the builder by using the FieldableNode's field but the
>> debugger says the node's field is an UnescapedCharSequence,
>> not a String, and the lookup fails.
>>
>> Registering the builder with an UnescapedCharSequence
>> for the name instead of a String doesn't seem to help,
>> presumably because UCS doesn't have a hash an equals
>> or hash method.
>>
>> Suggestions? I've worked around it by registering a class
>> based builder, checking for the field name and either
>> delegating to the original builder or doing my custom
>> processing, but it's a little awkward.
>>
>> -cks
>>
>> --
>> Christopher St. John
>> http://artofsystems.blogspot.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016e64c1cf054496d04994fff86--

From java-user-return-48294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 16:31:32 2011
Return-Path: <java-user-return-48294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79467 invoked from network); 8 Jan 2011 16:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 16:31:32 -0000
Received: (qmail 80019 invoked by uid 500); 8 Jan 2011 16:31:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79737 invoked by uid 500); 8 Jan 2011 16:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79729 invoked by uid 99); 8 Jan 2011 16:31:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 16:31:26 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [129.13.185.202] (HELO scc-mailout.scc.kit.edu) (129.13.185.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 16:31:20 +0000
Received: from [172.22.177.15] (aifb-ls3-aha.aifb.uni-karlsruhe.de [172.22.177.15])
	by scc-mailout-02.scc.kit.edu with esmtpsa (Exim 4.72 #1)
	id 1Pbbgx-000813-66; Sat, 08 Jan 2011 17:30:59 +0100
Message-ID: <4D289142.2070000@harth.org>
Date: Sat, 08 Jan 2011 17:30:58 +0100
From: Andreas Harth <andreas@harth.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.11) Gecko/20100805 Icedove/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Frequent updates lead to "Too many open files"
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I have a single IndexWriter object which I use to update
the index.  After each update, I'd like to query the index
using IndexReader and IndexSearcher objects.

When I try to do that I get java.io.FileNotFoundException:
/tmp/lucene/_32.fdx (Too many open files).

lsof -p says that there are many open file handles to the
same index file name, all but the last with a (deleted) marker.

I think I close everything properly.

Here's the code for the test case which reproduces the issue:

Directory ldir = new SimpleFSDirectory(new File("/tmp/lucene"));

IndexWriter writer = new IndexWriter(ldir, new 
StandardAnalyzer(Version.LUCENE_30), IndexWriter.MaxFieldLength.LIMITED);
IndexReader reader = IndexReader.open(ldir);
		
IndexSearcher searcher = new IndexSearcher(reader);

for (int i = 0; i < 1000; i++) {
	Document doc = new Document();
	doc.add(new Field("uri", "http://example.org/", Field.Store.YES, Field.Index.NO));
	writer.addDocument(doc);
	writer.commit();
			
	reader.reopen();
	searcher.close();
	searcher = new IndexSearcher(reader);
			
	// do something here
			
	Term term = new Term("uri", "http://example.org/");
	writer.deleteDocuments(term);
	writer.commit();
}

Any idea what's going wrong?

Cheers,
Andreas.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 16:47:29 2011
Return-Path: <java-user-return-48295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82106 invoked from network); 8 Jan 2011 16:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 16:47:29 -0000
Received: (qmail 96612 invoked by uid 500); 8 Jan 2011 16:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96160 invoked by uid 500); 8 Jan 2011 16:47:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96152 invoked by uid 99); 8 Jan 2011 16:47:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 16:47:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.127] (HELO web121706.mail.ne1.yahoo.com) (98.138.90.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Jan 2011 16:47:16 +0000
Received: (qmail 55257 invoked by uid 60001); 8 Jan 2011 16:46:54 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294505214; bh=T5xthz66aYSfRUdV8z5Lp4Srqq4kVTL+qsYrpw5BLBE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=BBSEEf0R+yOBh7CuER8C0zMXuT+wwVZQYTWtwXFUlU4B3FERr10MbmcCmVHFZdR3uzkEzjNXl85XOWRKvFObrG9qqGxsDtMWnKUfSzkzmgjuoZ1UNE0FiODn//chJN9y0RBhIzNPdESKIPGvvERjhf1UdunEDe3l3EBZZKdvMk0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=z5p5dB5RcD08DnuRKL2VMnQmNJr3nPjGD/LnpImIWEZ0JU/myObkgMDAkCBo6AM+PRAYEDQcgYPaJlAKNBOGUw+vBysST7RAxOAn2t5vX8EfrmE1R6SaIf2mZ8/cphY1KSKvF3r7wPKIGHzFBzYlOAYVNZ/SoudCPrf8A8rE+s4=;
Message-ID: <458421.52072.qm@web121706.mail.ne1.yahoo.com>
X-YMail-OSG: OkU1c_QVM1kfDMvpd8pqBuD4.yIrRzS5MqUc8GgbW0NsPRk
 LQ4yjzuRmMRm5MN2cszfCi8ol4XVoElrkJQuo_cV0Xi7Y.9ZGEc1OdqHEPeU
 3rDW8lxEbQl1EJhWxp9x6FhNXwd2HMauWRtHEeUt.jN4xf04W6BcU_HBo18x
 hcHcamCUPfih_4B7cVPcVqDAm4laeqnN8xJrEdTWlmS9c_8uai9M0jTshH6Z
 mlOclgYM.AarSY9pK4LhHpo8WT82KldVONvp45hX9b0_A9wtwQBIsmxtEb5y
 GTdLhLdqw86SRuNfD.kcQaA--
Received: from [88.231.28.92] by web121706.mail.ne1.yahoo.com via HTTP; Sat, 08 Jan 2011 08:46:54 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Sat, 8 Jan 2011 08:46:54 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Frequent updates lead to "Too many open files"
To: java-user@lucene.apache.org
In-Reply-To: <4D289142.2070000@harth.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A--- On Sat, 1/8/11, Andreas Harth <andreas@harth.org> wrote:=0A=0A> From=
: Andreas Harth <andreas@harth.org>=0A> Subject: Frequent updates lead to "=
Too many open files"=0A> To: java-user@lucene.apache.org=0A> Date: Saturday=
, January 8, 2011, 6:30 PM=0A> Hi,=0A> =0A> I have a single IndexWriter obj=
ect which I use to update=0A> the index.=A0 After each update, I'd like to =
query the=0A> index=0A> using IndexReader and IndexSearcher objects.=0A> =
=0A> When I try to do that I get java.io.FileNotFoundException:=0A> /tmp/lu=
cene/_32.fdx (Too many open files).=0A> =0A> lsof -p says that there are ma=
ny open file handles to the=0A> same index file name, all but the last with=
 a (deleted)=0A> marker.=0A> =0A> I think I close everything properly.=0A> =
=0A> Here's the code for the test case which reproduces the=0A> issue:=0A> =
=0A> Directory ldir =3D new SimpleFSDirectory(new=0A> File("/tmp/lucene"));=
=0A> =0A> IndexWriter writer =3D new IndexWriter(ldir, new=0A> StandardAnal=
yzer(Version.LUCENE_30),=0A> IndexWriter.MaxFieldLength.LIMITED);=0A> Index=
Reader reader =3D IndexReader.open(ldir);=0A> =A0=A0=A0 =A0=A0=A0 =0A> Inde=
xSearcher searcher =3D new IndexSearcher(reader);=0A> =0A> for (int i =3D 0=
; i < 1000; i++) {=0A> =A0=A0=A0 Document doc =3D new Document();=0A> =A0=
=A0=A0 doc.add(new Field("uri", "http://example.org/", Field.Store.YES,=0A>=
 Field.Index.NO));=0A> =A0=A0=A0 writer.addDocument(doc);=0A> =A0=A0=A0 wri=
ter.commit();=0A> =A0=A0=A0 =A0=A0=A0 =A0=A0=A0 =0A> =A0=A0=A0 reader.reope=
n();=0A> =A0=A0=A0 searcher.close();=0A> =A0=A0=A0 searcher =3D new IndexSe=
archer(reader);=0A> =A0=A0=A0 =A0=A0=A0 =A0=A0=A0 =0A> =A0=A0=A0 // do some=
thing here=0A> =A0=A0=A0 =A0=A0=A0 =A0=A0=A0 =0A> =A0=A0=A0 Term term =3D n=
ew Term("uri", "http://example.org/");=0A> =A0=A0=A0 writer.deleteDocuments=
(term);=0A> =A0=A0=A0 writer.commit();=0A> }=0A> =0A> Any idea what's going=
 wrong?=0A=0ADoing commit operation at the end of the loop can solve your p=
roblem. It is not a good idea to commit after every single addition.=0A=0A=
=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 17:14:12 2011
Return-Path: <java-user-return-48296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95899 invoked from network); 8 Jan 2011 17:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 17:14:11 -0000
Received: (qmail 10775 invoked by uid 500); 8 Jan 2011 17:14:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10721 invoked by uid 500); 8 Jan 2011 17:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10713 invoked by uid 99); 8 Jan 2011 17:14:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 17:14:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 17:14:03 +0000
Received: by bwz8 with SMTP id 8so18499727bwz.35
        for <java-user@lucene.apache.org>; Sat, 08 Jan 2011 09:13:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=508KA+mWD9uPkQ5vDkdYpXj6sJ0F0Ck0Yl7JMtf4i/0=;
        b=dv0W/SoBTA0CPkUPQ/neEBDnquBiuzgCXFpeDavxXasyl4eZPGmKXlPwb+L8ia+MKp
         cWjtApD4sPReYHIOnwL2dRFRaS9xNHAefkrSsAaMmshZ3DAW8xvdAMs53CxFpIG69GKq
         pdVqeBHubFtdtT3Ln27HveLvmXBOilzJQ9xgs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=YI6ItH5gNoRdfnvpcxQhjM9fugi2m9q6cQLw8iZKclmpUGnIt23n3H7KIDZhqFqUL6
         kzEsez7m9I0o6ZlmLIlM9UpBRpE2JP++KXPLrvG7Ku3OXRRDYKRk4g06OLvMbD0VouHK
         qcyRT03J742buotuOdEq539nY1u3h/xToTI3A=
Received: by 10.204.78.67 with SMTP id j3mr12974947bkk.144.1294506820657; Sat,
 08 Jan 2011 09:13:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Sat, 8 Jan 2011 09:13:20 -0800 (PST)
In-Reply-To: <458421.52072.qm@web121706.mail.ne1.yahoo.com>
References: <4D289142.2070000@harth.org> <458421.52072.qm@web121706.mail.ne1.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Sat, 8 Jan 2011 17:13:20 +0000
Message-ID: <AANLkTik5enCVN83W7FtxM4YM_W49aS9Mxrm-==MBG3e7@mail.gmail.com>
Subject: Re: Frequent updates lead to "Too many open files"
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You also need to read the javadocs for reopen(), and the sample code
there.  And it would be worth reading up on lucene's near real-time
(NRT) features.


--
Ian.


On Sat, Jan 8, 2011 at 4:46 PM, Ahmet Arslan <iorixxx@yahoo.com> wrote:
>
> --- On Sat, 1/8/11, Andreas Harth <andreas@harth.org> wrote:
>
>> From: Andreas Harth <andreas@harth.org>
>> Subject: Frequent updates lead to "Too many open files"
>> To: java-user@lucene.apache.org
>> Date: Saturday, January 8, 2011, 6:30 PM
>> Hi,
>>
>> I have a single IndexWriter object which I use to update
>> the index.=A0 After each update, I'd like to query the
>> index
>> using IndexReader and IndexSearcher objects.
>>
>> When I try to do that I get java.io.FileNotFoundException:
>> /tmp/lucene/_32.fdx (Too many open files).
>>
>> lsof -p says that there are many open file handles to the
>> same index file name, all but the last with a (deleted)
>> marker.
>>
>> I think I close everything properly.
>>
>> Here's the code for the test case which reproduces the
>> issue:
>>
>> Directory ldir =3D new SimpleFSDirectory(new
>> File("/tmp/lucene"));
>>
>> IndexWriter writer =3D new IndexWriter(ldir, new
>> StandardAnalyzer(Version.LUCENE_30),
>> IndexWriter.MaxFieldLength.LIMITED);
>> IndexReader reader =3D IndexReader.open(ldir);
>>
>> IndexSearcher searcher =3D new IndexSearcher(reader);
>>
>> for (int i =3D 0; i < 1000; i++) {
>> =A0=A0=A0 Document doc =3D new Document();
>> =A0=A0=A0 doc.add(new Field("uri", "http://example.org/", Field.Store.YE=
S,
>> Field.Index.NO));
>> =A0=A0=A0 writer.addDocument(doc);
>> =A0=A0=A0 writer.commit();
>>
>> =A0=A0=A0 reader.reopen();
>> =A0=A0=A0 searcher.close();
>> =A0=A0=A0 searcher =3D new IndexSearcher(reader);
>>
>> =A0=A0=A0 // do something here
>>
>> =A0=A0=A0 Term term =3D new Term("uri", "http://example.org/");
>> =A0=A0=A0 writer.deleteDocuments(term);
>> =A0=A0=A0 writer.commit();
>> }
>>
>> Any idea what's going wrong?
>
> Doing commit operation at the end of the loop can solve your problem. It =
is not a good idea to commit after every single addition.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 17:39:56 2011
Return-Path: <java-user-return-48297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4202 invoked from network); 8 Jan 2011 17:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 17:39:56 -0000
Received: (qmail 28219 invoked by uid 500); 8 Jan 2011 17:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28152 invoked by uid 500); 8 Jan 2011 17:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28138 invoked by uid 99); 8 Jan 2011 17:39:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 17:39:54 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [129.13.185.201] (HELO scc-mailout.scc.kit.edu) (129.13.185.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 17:39:46 +0000
Received: from [172.22.177.15] (aifb-ls3-aha.aifb.uni-karlsruhe.de [172.22.177.15])
	by scc-mailout-01.scc.kit.edu with esmtpsa (Exim 4.72 #1)
	id 1PbclB-0005uz-Ob; Sat, 08 Jan 2011 18:39:25 +0100
Message-ID: <4D28A14D.9040402@harth.org>
Date: Sat, 08 Jan 2011 18:39:25 +0100
From: Andreas Harth <andreas@harth.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.11) Gecko/20100805 Icedove/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequent updates lead to "Too many open files"
References: <4D289142.2070000@harth.org> <458421.52072.qm@web121706.mail.ne1.yahoo.com> <AANLkTik5enCVN83W7FtxM4YM_W49aS9Mxrm-==MBG3e7@mail.gmail.com>
In-Reply-To: <AANLkTik5enCVN83W7FtxM4YM_W49aS9Mxrm-==MBG3e7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ian, Ahmet,

On 01/08/2011 06:13 PM, Ian Lea wrote:
> You also need to read the javadocs for reopen(), and the sample code
> there.  And it would be worth reading up on lucene's near real-time
> (NRT) features.

yep, that was it.  reopen() behaves differently to what I'd expected.
Using the IndexReader from IndexWriter.getReader() works.

Thanks!

Best regards,
Andreas.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 18:14:53 2011
Return-Path: <java-user-return-48298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24099 invoked from network); 8 Jan 2011 18:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 18:14:53 -0000
Received: (qmail 44352 invoked by uid 500); 8 Jan 2011 18:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44316 invoked by uid 500); 8 Jan 2011 18:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44306 invoked by uid 99); 8 Jan 2011 18:14:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:14:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vallalku@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:14:45 +0000
Received: by qwh6 with SMTP id 6so19405283qwh.35
        for <java-user@lucene.apache.org>; Sat, 08 Jan 2011 10:14:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=7QkF++w79UfSWUJcFUS3Hjtw4KgfQoCM4o9juQFDzlg=;
        b=aOxxyl7FROZtVXb8QQrHYTGS+cmx5RUV04OXaY0GIR/8ZNr/cvhGU0SmukJvntV6Vx
         9W5AGu5uAwltcFRFdNbnJ6qypXbSJ1ioQA395Svdi4+Eo5WYHlYHUrhQuxp9j/lLR9jq
         Q+FQoYSZDmZK+1YPupQrR8EAJOKaZ+EUfhGGI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BMW6nWeHojbZ2QQ9OvQ3lP5/Nb3Rbja2SxWHmvtzeRQYfsNw5eFOSrpPDiPZvdo7FL
         Ljzm5/9SzYIXl9zYr2zwGdpkJ9VAjxs4vA6DP6Mvo1rsAvxcWZWe544wKyIxzVt5fy4y
         ZyRKCx8Qji4Foe6rslHdgKe8dGK2RJTEwAs9I=
MIME-Version: 1.0
Received: by 10.229.189.72 with SMTP id dd8mr10514694qcb.18.1294510464036;
 Sat, 08 Jan 2011 10:14:24 -0800 (PST)
Received: by 10.229.232.11 with HTTP; Sat, 8 Jan 2011 10:14:23 -0800 (PST)
In-Reply-To: <4D279DA9.70506@fissore.org>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
	<4D279DA9.70506@fissore.org>
Date: Sat, 8 Jan 2011 10:14:23 -0800
Message-ID: <AANLkTikvi9uS87WZRxnXEGBwjaigkFq4MkHqJK0MBofO@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
From: Raavan <vallalku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e81aa5df001049959b4a8

--0016361e81aa5df001049959b4a8
Content-Type: text/plain; charset=ISO-8859-1

Thanks Federico.

>> my primary concern at the moment is serializing bitsets to recover
searcher warmup time

I am also considering doing the same to reduce warmup time during restarts.

It seems one of the disadvantages of SortedVIntList is the performance
skipTo() as per Paul Elschot since it does not support random access like
OpenBitSet.
https://issues.apache.org/jira/browse/LUCENE-1296

Our primary concern is memory usage since we have hundreds of filters and
large number of documents. So if the performance is decent, I am thinking of
using SortedVIntList for all our sparse filters.

-Raavan

On Fri, Jan 7, 2011 at 3:11 PM, Federico Fissore <federico@fissore.org>wrote:

> First Last, il 07/01/2011 20:55, ha scritto:
>
>  Hi,
>>
>> is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
>> better if memory usage is the primary concern ?
>>
>>
> SortedVIntList is compressed, OpenBitSet is not
>
>
>
>  Our filters are sparse. So is SortedVIntList better in that case?
>>
>>
> Yes
>
>
>
>  Are there any other compressed bitmap index implementations which offer
>> bit
>> map compression at a decent performance assuming filters are sparse?
>>
>>
> I'm too looking for alternative implementations of compressed bitsets, so
> I'm too really interested in everybody experience: my primary concern at the
> moment is serializing bitsets to recover searcher warmup time
>
> I've tried some and roughly tested them: my conclusion was that we (lucene
> users) already stand on the rolls royce of bitset implementations.
>
> federico
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e81aa5df001049959b4a8--

From java-user-return-48299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 18:18:21 2011
Return-Path: <java-user-return-48299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25585 invoked from network); 8 Jan 2011 18:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 18:18:21 -0000
Received: (qmail 47390 invoked by uid 500); 8 Jan 2011 18:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47342 invoked by uid 500); 8 Jan 2011 18:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47334 invoked by uid 99); 8 Jan 2011 18:18:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:18:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vallalku@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:18:11 +0000
Received: by qwh6 with SMTP id 6so19407163qwh.35
        for <java-user@lucene.apache.org>; Sat, 08 Jan 2011 10:17:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=jP8L5uBmETHXKMif3c1nGzcHknwwdVG6ofedEhBdV84=;
        b=eLN4/vCJdxvmPpcaT7o9P1OJvQ1Mylz7lftYqftkeELBljjAjbHA1auC4F5XP/6xbN
         8aRLulCZHebk6s60sHOzlsJsd03t2ZXe8Al17uukzwbOn2MfTpLZDVqaCUkDK/r55kbT
         EHj38OrWIeeIQG0rOkGZArjKQ8bQU1oA2DJpQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IL/xfZJG11zHDFfyVVZrEXA544sXGaEKYcZ8r8rBLnTh8Ro/+CC/Gp4Gkm4Q3wZyjk
         gRoQegMWLXrtmxiprU9QzbnWuM7f40Dnu7rCclrMk98EH2hekj4RQF5F6ybrePCS998Y
         R1wTxwtmvHBeZXp8LDSZtmqOIyFLI7nres0xk=
MIME-Version: 1.0
Received: by 10.229.110.10 with SMTP id l10mr23490974qcp.56.1294510670762;
 Sat, 08 Jan 2011 10:17:50 -0800 (PST)
Received: by 10.229.232.11 with HTTP; Sat, 8 Jan 2011 10:17:50 -0800 (PST)
In-Reply-To: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE30@mbx2.hostedexchange.local>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
	<4D279DA9.70506@fissore.org>
	<E1E61A9983E3F94DAA95AEDE2D487E700618C7FE30@mbx2.hostedexchange.local>
Date: Sat, 8 Jan 2011 10:17:50 -0800
Message-ID: <AANLkTik6wRDiXHuf6SgjD0=qdBVd__mCyumHwSxFLuCp@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
From: Raavan <vallalku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368321b2b056b0049959c024
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368321b2b056b0049959c024
Content-Type: text/plain; charset=ISO-8859-1

Thanks Ryan. I will test this to see if it uses much less memory than
SortedVIntList.

-Raavan

On Fri, Jan 7, 2011 at 4:05 PM, Ryan Aylward <ryan@glassdoor.com> wrote:

> I don't recall how we decided to use it, but we are using
> http://code.google.com/p/compressedbitset/ and it seems to be pretty
> efficient in terms of memory.
>
> -----Original Message-----
> From: Federico Fissore [mailto:federico@fissore.org]
> Sent: Friday, January 07, 2011 3:12 PM
> To: java-user@lucene.apache.org
> Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
>
> First Last, il 07/01/2011 20:55, ha scritto:
> > Hi,
> >
> > is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
> > better if memory usage is the primary concern ?
> >
>
> SortedVIntList is compressed, OpenBitSet is not
>
>
> > Our filters are sparse. So is SortedVIntList better in that case?
> >
>
> Yes
>
>
> > Are there any other compressed bitmap index implementations which offer
> bit
> > map compression at a decent performance assuming filters are sparse?
> >
>
> I'm too looking for alternative implementations of compressed bitsets,
> so I'm too really interested in everybody experience: my primary concern
> at the moment is serializing bitsets to recover searcher warmup time
>
> I've tried some and roughly tested them: my conclusion was that we
> (lucene users) already stand on the rolls royce of bitset implementations.
>
> federico
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368321b2b056b0049959c024--

From java-user-return-48300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 08 18:25:04 2011
Return-Path: <java-user-return-48300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32637 invoked from network); 8 Jan 2011 18:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jan 2011 18:25:04 -0000
Received: (qmail 53172 invoked by uid 500); 8 Jan 2011 18:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53123 invoked by uid 500); 8 Jan 2011 18:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53115 invoked by uid 99); 8 Jan 2011 18:25:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:25:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vallalku@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jan 2011 18:24:57 +0000
Received: by qyk10 with SMTP id 10so19168749qyk.14
        for <java-user@lucene.apache.org>; Sat, 08 Jan 2011 10:24:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LrzBayFp7B0JWMUZ56W7WjyBKTfXLHJ9fpUnMd8qMkw=;
        b=erofAvmkWiBrvCGuZKanpgl0uNigi/AHdOC7Cje9ilnj/+QlEk+U4OWdvjsUK6PJhF
         6AUtNqE4dpIFJfCcoDhfrTZJIJ/i28jeLuH9PBkYugkxsTZBUjakM3AG4I65ozL+Qrbb
         oaDGFZLuvS5Pnerli9lfsOhWeftWBFvHeOk44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kHmYNH9rfyCwZpRd5lsVp22pY5g9KxyVfRBX9JToAETKAIBdSH/AO7Qk9DwlbkKf2T
         i0HOvv5hrKfGDx16ekIJv6gkEBEB3vnnhVA/l7KF1DAyQt1rLUHk7O7rnC2xxTmFOKDu
         djIsETEfT/AqN4BwoLR3cDBK1UhyztwlBVkwQ=
MIME-Version: 1.0
Received: by 10.229.241.196 with SMTP id lf4mr22880745qcb.284.1294511076612;
 Sat, 08 Jan 2011 10:24:36 -0800 (PST)
Received: by 10.229.232.11 with HTTP; Sat, 8 Jan 2011 10:24:36 -0800 (PST)
In-Reply-To: <AANLkTikvi9uS87WZRxnXEGBwjaigkFq4MkHqJK0MBofO@mail.gmail.com>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
	<4D279DA9.70506@fissore.org>
	<AANLkTikvi9uS87WZRxnXEGBwjaigkFq4MkHqJK0MBofO@mail.gmail.com>
Date: Sat, 8 Jan 2011 10:24:36 -0800
Message-ID: <AANLkTi=hMBQKmD-nuK8Gb=Uaa_xm4F19CQAWjMVQi4z7@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
From: Raavan <vallalku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f92356e11df6049959d80a

--001485f92356e11df6049959d80a
Content-Type: text/plain; charset=ISO-8859-1

Also, just for my understanding, is SortedVIntList able to perform some
operations such as AND/OR without decompression ?

Some of the algorithms mentioned below claim to do that. But I understand
that there are patent issues surrounding these algorithms.
http://en.wikipedia.org/wiki/Bitmap_index

-Raavan

On Sat, Jan 8, 2011 at 10:14 AM, Raavan <vallalku@gmail.com> wrote:

> Thanks Federico.
>
> >> my primary concern at the moment is serializing bitsets to recover
> searcher warmup time
>
> I am also considering doing the same to reduce warmup time during restarts.
>
> It seems one of the disadvantages of SortedVIntList is the performance
> skipTo() as per Paul Elschot since it does not support random access like
> OpenBitSet.
> https://issues.apache.org/jira/browse/LUCENE-1296
>
> Our primary concern is memory usage since we have hundreds of filters and
> large number of documents. So if the performance is decent, I am thinking of
> using SortedVIntList for all our sparse filters.
>
> -Raavan
>
>
> On Fri, Jan 7, 2011 at 3:11 PM, Federico Fissore <federico@fissore.org>wrote:
>
>> First Last, il 07/01/2011 20:55, ha scritto:
>>
>>  Hi,
>>>
>>> is OpenBitSet / SortedVIntList a compressed bit map index? Which one is
>>> better if memory usage is the primary concern ?
>>>
>>>
>> SortedVIntList is compressed, OpenBitSet is not
>>
>>
>>
>>  Our filters are sparse. So is SortedVIntList better in that case?
>>>
>>>
>> Yes
>>
>>
>>
>>  Are there any other compressed bitmap index implementations which offer
>>> bit
>>> map compression at a decent performance assuming filters are sparse?
>>>
>>>
>> I'm too looking for alternative implementations of compressed bitsets, so
>> I'm too really interested in everybody experience: my primary concern at the
>> moment is serializing bitsets to recover searcher warmup time
>>
>> I've tried some and roughly tested them: my conclusion was that we (lucene
>> users) already stand on the rolls royce of bitset implementations.
>>
>> federico
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001485f92356e11df6049959d80a--

From java-user-return-48301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 09 04:08:26 2011
Return-Path: <java-user-return-48301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82933 invoked from network); 9 Jan 2011 04:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jan 2011 04:08:26 -0000
Received: (qmail 19423 invoked by uid 500); 9 Jan 2011 04:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19335 invoked by uid 500); 9 Jan 2011 04:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19327 invoked by uid 99); 9 Jan 2011 04:08:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jan 2011 04:08:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jan 2011 04:08:18 +0000
Received: by fxm2 with SMTP id 2so17819172fxm.35
        for <java-user@lucene.apache.org>; Sat, 08 Jan 2011 20:07:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=d30i5eMpfBQY9B5nY8euFccebHh3GlphGy69EgvHWQg=;
        b=WyrUi9PCMPdZc3It40uBBCOI0NllfpFRqZdR+R6DtC9SkF3aMK3OAVW7kVcoVyRxSJ
         tKZRcUD8MQHvFsCm+NEXVGDFgesm7olwJewx8KrRpnrIUkCzvZrw+FgxpJVnHVx4WPmR
         f/EJPniDwtQHmkDzsmzQa38Le+hBMsfgCj81A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kXadt1nm6lueCvwmzQHvMptq+8zscYGhusuvwIM2P3OIGs9+leHAnp6RApZZScQnEB
         3WUc9WyWakrLwZrooVl5W+9/tFGBKIGle4v0/dp9HOEPBQ1OVHieQwt1K9luSM/bvGgE
         i97TavrlrDvPDGcYlWWWpqiJHbwWkNvYlq5u0=
MIME-Version: 1.0
Received: by 10.223.96.78 with SMTP id g14mr982997fan.15.1294546075993; Sat,
 08 Jan 2011 20:07:55 -0800 (PST)
Received: by 10.223.83.204 with HTTP; Sat, 8 Jan 2011 20:07:55 -0800 (PST)
In-Reply-To: <AANLkTimRrhOng91zBQVFfjShtSrTkDFETFch3uvRT0O3@mail.gmail.com>
References: <AANLkTin+sTP2C2_O61v3xFjqDjbnOUb_NJ7Kdo-0CQaA@mail.gmail.com>
	<AANLkTik_uz4o5FL=keEA_8VrEGfL8gY9_PPoJq6-KmUj@mail.gmail.com>
	<AANLkTimRrhOng91zBQVFfjShtSrTkDFETFch3uvRT0O3@mail.gmail.com>
Date: Sat, 8 Jan 2011 20:07:55 -0800
Message-ID: <AANLkTim81v-5JQOHcq0qmfQ0XWN1G0NQmxxhhzWcM87w@mail.gmail.com>
Subject: Re: 3.0.3 Contrib Query Parser : Custom Field Name Builder
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Bravo!

On Fri, Jan 7, 2011 at 10:39 PM, Adriano Crestani
<adrianocrestani@gmail.com> wrote:
> I created a JIRA to fix this problem:
> https://issues.apache.org/jira/browse/LUCENE-2855
>
> On Sat, Jan 8, 2011 at 1:32 AM, Adriano Crestani
> <adrianocrestani@gmail.com>wrote:
>
>> Hi Christopher,
>>
>> Thanks for raising this problem, I always thought a little bit strange t=
o
>> use CharSequence as map key. Then a just did a little bit of research an=
d
>> found this on CharSequence javadoc:
>>
>> "This interface does not refine the general contracts of the equals<http=
://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals(j=
ava.lang.Object)>
>> =C2=A0and hashCode<http://download.oracle.com/javase/1.5.0/docs/api/java=
/lang/Object.html#hashCode()>
>> =C2=A0methods. The result of comparing two objects that implement CharSe=
quence is
>> therefore, in general, undefined. Each object may be implemented by a
>> different class, and there is no guarantee that each class will be capab=
le
>> of testing its instances for equality with those of the other. It is
>> therefore inappropriate to use arbitrary CharSequence instances as
>> elements in a set or as keys in a map."
>>
>> So I think every Set or Map that uses CharSequence on contrib queryparse=
r
>> should be forced to use String instead. I think there is no need to chan=
ge
>> any API, we just need to make sure that toString() is invoked on the
>> CharSequence object before adding it to any Set or Map, this way we can =
fix
>> this problem for next 3.x release. However, for 4.x, we should ideally
>> change every API that receives or return Map<CharSequence,...> or
>> Set<CharSequence> to use only String.
>>
>>
>>
>> On Fri, Jan 7, 2011 at 8:44 PM, Christopher St John <ckstjohn@gmail.com>=
wrote:
>>
>>> I'm trying to:
>>>
>>> =C2=A0StandardQueryTreeBuilder b =3D =E2=80=A6;
>>> =C2=A0b.setBuilder( "myfield", fieldSpecificBuilder);
>>>
>>> In the debugger I see that the builder is registered in the
>>> QueryTreeBuilder's fieldNameBuilders map.
>>>
>>> When parsing, QueryTreeBuilder.getBuilder tries to look
>>> up the builder by using the FieldableNode's field but the
>>> debugger says the node's field is an UnescapedCharSequence,
>>> not a String, and the lookup fails.
>>>
>>> Registering the builder with an UnescapedCharSequence
>>> for the name instead of a String doesn't seem to help,
>>> presumably because UCS doesn't have a hash an equals
>>> or hash method.
>>>
>>> Suggestions? I've worked around it by registering a class
>>> based builder, checking for the field name and either
>>> delegating to the original builder or doing my custom
>>> processing, but it's a little awkward.
>>>
>>> -cks
>>>
>>> --
>>> Christopher St. John
>>> http://artofsystems.blogspot.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 09 09:21:45 2011
Return-Path: <java-user-return-48302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98749 invoked from network); 9 Jan 2011 09:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jan 2011 09:21:45 -0000
Received: (qmail 37211 invoked by uid 500); 9 Jan 2011 09:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37065 invoked by uid 500); 9 Jan 2011 09:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37057 invoked by uid 99); 9 Jan 2011 09:21:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jan 2011 09:21:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jan 2011 09:21:34 +0000
Received: by pwj9 with SMTP id 9so3603390pwj.35
        for <java-user@lucene.apache.org>; Sun, 09 Jan 2011 01:21:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=v5B/oZjllpjhhBm/NFiENKLtVThxzuDjmLeLMbQ6kDw=;
        b=PuOOpfinsFXMAqo0jAOrgaJkCXkX3MG74zEQ3S6VVFxoFyYI4SxglUh0V35Ah1W5oO
         X9HEZVMdvLsO7TYtERD2Yy5y2ITtlGzA52Ap5JrootzFXrkfYgQ9CezDMif3nsRJqzfs
         QsHwmQSZHDb8VBiZJGAvjdhs+/Pl8fxoUHjOk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=nlBmt9mHz2IFyT4wUosiWk/nWo6RuS0wvk5aDuLOvXW6vXDNlrsaFEI4zoWxCBJEHE
         xevFq2T0iMHUPocaIPeB0SmK09zf6yfvNm8WLLET8WuNn3DgzDJE4LhNJiErpQirTMOF
         kpU+W1P/NCvf4N7WNYewsKXu6Q38eMbeGW/5c=
Received: by 10.142.212.20 with SMTP id k20mr3326599wfg.54.1294564871434; Sun,
 09 Jan 2011 01:21:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.104.2 with HTTP; Sun, 9 Jan 2011 01:20:51 -0800 (PST)
In-Reply-To: <AANLkTi=hMBQKmD-nuK8Gb=Uaa_xm4F19CQAWjMVQi4z7@mail.gmail.com>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
 <4D279DA9.70506@fissore.org> <AANLkTikvi9uS87WZRxnXEGBwjaigkFq4MkHqJK0MBofO@mail.gmail.com>
 <AANLkTi=hMBQKmD-nuK8Gb=Uaa_xm4F19CQAWjMVQi4z7@mail.gmail.com>
From: Raf <r.ventaglio@gmail.com>
Date: Sun, 9 Jan 2011 10:20:51 +0100
Message-ID: <AANLkTinLB7UdHS5eF2VasMCqkA=FGtLHdoPrnEN5FWn=@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd30be84cf0cd0499665f51
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd30be84cf0cd0499665f51
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Jan 8, 2011 at 7:24 PM, Raavan <vallalku@gmail.com> wrote:

> Also, just for my understanding, is SortedVIntList able to perform some
> operations such as AND/OR without decompression ?
>

No, not natively:
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/util/SortedVIntList.html

But the *iterator* returns the *docIds* by order and there is a *constructor
*that accepts a *DocIdSetIterator*.

So it's quite easy to implement the AND/OR operations by creating a *
DocIdSetIterator *that receives the two iterators from the original *
SortedVIntLists* and scans them in parallel, implementing *nextDoc* and *
advance* methods accordingly to AND/OR semantic.

We use something like that and, for very sparse bitsets, it is more
efficient than to convert them in *OpenBitSets* in order to perform AND/OR
operations.

Bye
*Raf*

--000e0cd30be84cf0cd0499665f51--

From java-user-return-48303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 10 10:00:35 2011
Return-Path: <java-user-return-48303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87138 invoked from network); 10 Jan 2011 10:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jan 2011 10:00:35 -0000
Received: (qmail 74897 invoked by uid 500); 10 Jan 2011 10:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74508 invoked by uid 500); 10 Jan 2011 10:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74495 invoked by uid 99); 10 Jan 2011 10:00:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 10:00:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vallalku@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 10:00:21 +0000
Received: by qyk7 with SMTP id 7so1274941qyk.14
        for <java-user@lucene.apache.org>; Mon, 10 Jan 2011 02:00:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=RR7Rur4WaqaYhfHOukY3w5o9VcI5p3bWnjJV8rZDWow=;
        b=iTmfSwjF+OWUzM7tuKPdE+0XJjV/IU7tvppxGvr7xg1DY3PEAZaSfD06emuGgvQleI
         tl92urX9HGwULei8v3ARKjkeYRbBzQop14DmtCjnCgZQQOgdza+gxRPAH+lwsWY3hTu6
         IHa6F7WTdQBd3bqEHuf6MxX77G0zv5CSqsIgw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xRr5LLP1b11fDthzNqQZrdalAc5+JQTHJFs+SsRB+6kEEeDvIRpu6zcNy+EJ+AoP5k
         ExLPZlsZz/Qe13iBCplpiBG30xRfXdrhrG45UQKZx0pHKC4XDa9W90Wn/1BFx4KK6/4p
         mUyUl7ltMugvDYITRux/Q+e5Vs27VylkA0KLI=
MIME-Version: 1.0
Received: by 10.229.245.4 with SMTP id ls4mr24801727qcb.208.1294653600342;
 Mon, 10 Jan 2011 02:00:00 -0800 (PST)
Received: by 10.229.232.11 with HTTP; Mon, 10 Jan 2011 02:00:00 -0800 (PST)
In-Reply-To: <AANLkTinLB7UdHS5eF2VasMCqkA=FGtLHdoPrnEN5FWn=@mail.gmail.com>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
	<4D279DA9.70506@fissore.org>
	<AANLkTikvi9uS87WZRxnXEGBwjaigkFq4MkHqJK0MBofO@mail.gmail.com>
	<AANLkTi=hMBQKmD-nuK8Gb=Uaa_xm4F19CQAWjMVQi4z7@mail.gmail.com>
	<AANLkTinLB7UdHS5eF2VasMCqkA=FGtLHdoPrnEN5FWn=@mail.gmail.com>
Date: Mon, 10 Jan 2011 02:00:00 -0800
Message-ID: <AANLkTikPCF594Fmh4UKqWMWnCMti2uyxRbNSO2jK+u3v@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
From: Raavan <vallalku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64bb7baf4a1d304997b077f

--0016e64bb7baf4a1d304997b077f
Content-Type: text/plain; charset=ISO-8859-1

Thanks Raf.

On Sun, Jan 9, 2011 at 1:20 AM, Raf <r.ventaglio@gmail.com> wrote:

> On Sat, Jan 8, 2011 at 7:24 PM, Raavan <vallalku@gmail.com> wrote:
>
> > Also, just for my understanding, is SortedVIntList able to perform some
> > operations such as AND/OR without decompression ?
> >
>
> No, not natively:
>
> http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/util/SortedVIntList.html
>
> But the *iterator* returns the *docIds* by order and there is a
> *constructor
> *that accepts a *DocIdSetIterator*.
>
> So it's quite easy to implement the AND/OR operations by creating a *
> DocIdSetIterator *that receives the two iterators from the original *
> SortedVIntLists* and scans them in parallel, implementing *nextDoc* and *
> advance* methods accordingly to AND/OR semantic.
>
> We use something like that and, for very sparse bitsets, it is more
> efficient than to convert them in *OpenBitSets* in order to perform AND/OR
> operations.
>
> Bye
> *Raf*
>

--0016e64bb7baf4a1d304997b077f--

From java-user-return-48304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 10 17:43:53 2011
Return-Path: <java-user-return-48304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88962 invoked from network); 10 Jan 2011 17:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jan 2011 17:43:53 -0000
Received: (qmail 33120 invoked by uid 500); 10 Jan 2011 17:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33060 invoked by uid 500); 10 Jan 2011 17:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33052 invoked by uid 99); 10 Jan 2011 17:43:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 17:43:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryan@glassdoor.com designates 69.50.2.38 as permitted sender)
Received: from [69.50.2.38] (HELO ht1.hostedexchange.local) (69.50.2.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 17:43:44 +0000
Received: from mbx2.hostedexchange.local ([172.16.69.30]) by
 ht2.hostedexchange.local ([172.16.69.40]) with mapi; Mon, 10 Jan 2011
 09:43:24 -0800
From: Ryan Aylward <ryan@glassdoor.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 10 Jan 2011 09:44:00 -0800
Subject: RE: Creating an index with multiple values for a single field
Thread-Topic: Creating an index with multiple values for a single field
Thread-Index: Acuu5aBBnnQDhQsTQdW1K+Jh3ZmX+gCB9EdA
Message-ID: <E1E61A9983E3F94DAA95AEDE2D487E700618C80500@mbx2.hostedexchange.local>
References: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85@mbx2.hostedexchange.local>
 <AANLkTimqVLFrH1FGACaE3iTGidvJuEvY-ptdw4jbMuDY@mail.gmail.com>
In-Reply-To: <AANLkTimqVLFrH1FGACaE3iTGidvJuEvY-ptdw4jbMuDY@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks for the response.

We do leverage synonyms but they are not appropriate for this case. We use =
synonyms for words that are truly synonymous for the entire index such as "=
inc" and "incorporated". Those words are always interchangeable. However, m=
any of the employer alternate names are only valid for a single employer no=
t for the entire index.

We do disable the lengthNorm but we benefit from tf and idf so disabling th=
ose would cause more harm than good.

Any other suggestions would be appreciated.

Thanks.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Friday, January 07, 2011 7:38 PM
To: java-user@lucene.apache.org
Subject: Re: Creating an index with multiple values for a single field

Hi Ryan,
You should try the synonym filter. That should help you with this kinda
problem.
You could also look at turning off norms for the name field, or turning off
tf or idf.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Sat, Jan 8, 2011 at 6:03 AM, Ryan Aylward <ryan@glassdoor.com> wrote:

> Our business has a need to allow for multiple values for a single field.
> For example, we have an index of employers where an employer often has
> multiple ways people refer to it. For example, the company "Wal-mart" is
> referred to as:
>
> 1)      Wal-mart
>
> 2)      Wal-mart Stores
>
> 3)      Walmart
> I would like a search for any of these 3 terms to match the Wal-mart
> employer.
>
> I've tried two different approaches for this.
>
> Approach 1: Create multiple values for the same field. So the document ha=
s
> these three fields:
>
> 1)      name=3DWal-mart
>
> 2)      name=3DWal-mart Stores
>
> 3)      name=3DWalmart
> The problem with this is Lucene seems to treat the 3 different fields as
> one long field of "Wal-mart Wal-mart Stores Walmart". This is problematic
> b/c term frequencies is 2 when a user searches for "Wal-mart".
>
> Approach 2: Create different named fields for each value so the document
> has these 3 fields:
>
> 1)      name1=3DWal-mart
>
> 2)      name2=3DWal-mart Stores
>
> 3)      name3=3DWalmart
> This fixes the issue above but introduces a different problem. The idf
> calculation is incorrect b/c idf is calculated per field. Most employers
> only have one name or maybe 2 names. So the name3 fields idf ends up bein=
g
> much higher b/c there are fewer docs with a given term in the name3 field=
.
>
> For now, I'm going with approach 2 but overriding the IndexReader.
> IndexReader.docFreq(Term t) method always returns the doc frequency from =
the
> name1 field even if the Term t is actually for name2 or name3, etc. But t=
his
> doesn't feel like a clean solution.
>
> Any suggestions on how to deal with this? Any ideas would be appreciated.
> Ryan Aylward
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 10 17:57:10 2011
Return-Path: <java-user-return-48305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97397 invoked from network); 10 Jan 2011 17:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jan 2011 17:57:09 -0000
Received: (qmail 52155 invoked by uid 500); 10 Jan 2011 17:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52106 invoked by uid 500); 10 Jan 2011 17:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52098 invoked by uid 99); 10 Jan 2011 17:57:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 17:57:07 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.200.115] (HELO web30502.mail.mud.yahoo.com) (68.142.200.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Jan 2011 17:56:58 +0000
Received: (qmail 19326 invoked by uid 60001); 10 Jan 2011 17:56:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294682196; bh=XmPLI7K3ZxThIUUFR2U3ox2pHrmhcUHr1EHxZKyXMZI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=aaXn4qgQYOBvsEvtNb0PQQC9PE7scGJ5eeS6xvhxMXozqSqCDwaVJk4sUQsr/YPj3uHb7pOXlSQhM48L+HRz4EhTQFhUeGT+2G4sLkvU+cRj6UI8VIq/MEJcFrKe35NTlTpoQFdwuNTIfphoVRIilpX85ZM/TqqjmrttyjVlhIM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=y5HL4iWgs9yRwaE53UqZayC8kmQQ+nLm2AG3GUNe8svSplMjrionIfgGPNDRIxB/XA3QoJ5QFRI2P3JxGUqpQfW6Wi8eXOY8oG7MMk/yjfAcaDMdUuRMdZruU37N23dTm+9WE01Cv81feBV+BGTDgqWBDeBhLM0U06woQOWQ/ws=;
Message-ID: <959444.19294.qm@web30502.mail.mud.yahoo.com>
X-YMail-OSG: WjrVBv0VM1m6.y0xG5.IuJ9sXbB9pHoarJkf5dB72uCWo6s
 aSRpbM5D1gN2gLUCt9nHtvQJGTKlAVBT4boLAAbgMsZSd_qqk7M6Rl5EmSMF
 HXA0oLabqmEUA9L6jL_ctJz3MJ12G8HiaFPvAVqTQwtkcOtqjdGARxTF_Gzo
 QIm021zNuaJsQ1iXZjurhNYYtqMRJmauHZ29uY8eDfuD8j9L5rEXaKvvtAjV
 5obgqA1zwRL9DkGrquvIUUUL11dUp3sa780bc01CaCzeWT_pAAzV7eLJn7Re
 4Ueys06le0Lgd9f0VYcqCen9pgb3Q6ix9H2Orfe5TBdA2PGY3xULbfalLgvH
 6s_pvjxY08kt5i31V_n2JaEvJGHQYGYE8yyP5Vdas4YiulQdA_1yJjQ--
Received: from [212.143.35.226] by web30502.mail.mud.yahoo.com via HTTP; Mon, 10 Jan 2011 09:56:36 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Mon, 10 Jan 2011 09:56:36 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Newbie question: optimized files?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-50149549-1294682196=:19294"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-50149549-1294682196=:19294
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=20

I'm new to Lucene (using 3.0.3), and just started to check out the behavior=
 of the 'optimize()' method (which is quite important for our application).
Could it be that 'optimize' cancels out the 'compoundFile' mode? Or am I do=
ing something wrong?=20

Here's my test: I create an indexWriter with compoundFile=3Dtrue, then perf=
orm some writes+commits (which generates several 'cfs' files).
Then I call 'optimize()'... I expected this to yield a single optimized 'cf=
s' file, but instead I get lots of different files - 'fdt', 'fdx', 'fnm' et=
c...

The detailed code:
// Create indexWriter with 'compoundfile=3Dtrue':
Version version=3DVersion.LUCENE_30;
Directory dir =3D FSDirectory.open(new File("c:/luceneTemp"));
Analyzer analyzer =3D new StandardAnalyzer(version);
IndexWriter writer =3D new IndexWriter(
=A0=A0=A0=A0=A0=A0=A0=A0 dir, analyzer, true, IndexWriter.MaxFieldLength.LI=
MITED);
writer.setUseCompoundFile(true);

// Perform some writes + commits.
// This yields several 'cfs' files as expected:
writer.addDocument(...);
writer.commit();
writer.addDocument(...);
=0Awriter.commit();
Thread.sleep(20000);=A0 // give myself time to see the generated 'cfs' file=
s

// Optimize - why does it yield lots of separate files ('fdt', 'fdx', etc)?
writer.optimize();


Thanks.
=0A=0A=0A      
--0-50149549-1294682196=:19294--

From java-user-return-48306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 10 19:30:40 2011
Return-Path: <java-user-return-48306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76923 invoked from network); 10 Jan 2011 19:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jan 2011 19:30:40 -0000
Received: (qmail 19321 invoked by uid 500); 10 Jan 2011 19:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19168 invoked by uid 500); 10 Jan 2011 19:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19160 invoked by uid 99); 10 Jan 2011 19:30:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 19:30:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.125] (HELO web121704.mail.ne1.yahoo.com) (98.138.90.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Jan 2011 19:30:28 +0000
Received: (qmail 48854 invoked by uid 60001); 10 Jan 2011 19:30:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294687807; bh=unYhP0/hkn3GxrazyIOe1bwogfHU8bEdrNoNeJMjIK4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=TiI3yRU6NgIFlb+v6z7GI+hLjSVQhYM1CB+YzCNBRblqND3l6e9AiiipXSq9g5UbGHyjXiKxSMNq11cKq3NGzP26rlihs9fSaz8oxyp5c840ZKyu4x1+RXLC/lh6MfAJAa0R4tV7501KtcC5XiVfcbJVHknYi9TTPyVRDFfd6Aw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=5an8buH74uoJkOOCJkL8ljk0stre0ckZ+WwzJAJFHj/AaJ7+WlcTt8G4nrigE9AhM1bqGiB9xvVKMZYlZzljB2IfTj+RFiCi4kpN5yFxaDFkVzaGCn6wXq7CdcgSxHjX8xXKZCTTpkooURP/cj9FWAj0jmLW1RB2uUbamPVtO1w=;
Message-ID: <277066.48330.qm@web121704.mail.ne1.yahoo.com>
X-YMail-OSG: j5gLZa8VM1kotIWNyf4Be4CVDbQyXxxrQVPwmK8abH.Tlb_
 BPgDl3i_OCX4KT_IyHhtdKGqVrvA3O5CT8T.mqF7i69igxxbcHSH1kHUowT9
 2aphcU2icJzpEOpwR.LlyX95DxgzulxSgLihqxg16ygJY8kBCechN7pWArzw
 niPeixhQfgngux8eMsxcPI4NLgsGw7BY4rO05eCm5LVu1wt1eF4iD40N.kn3
 xJlAS87fQLGWBp5aoexDxeGDKc2qte1R.yzH1v3woGyQuH55XH8lBeXoNwyy
 sZnm7s50V7J3gCCGcbc4JLw--
Received: from [88.231.28.92] by web121704.mail.ne1.yahoo.com via HTTP; Mon, 10 Jan 2011 11:30:06 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Mon, 10 Jan 2011 11:30:06 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: RE: Creating an index with multiple values for a single field
To: java-user@lucene.apache.org
In-Reply-To: <E1E61A9983E3F94DAA95AEDE2D487E700618C80500@mbx2.hostedexchange.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> We do leverage synonyms but they are not appropriate for
> this case. We use synonyms for words that are truly
> synonymous for the entire index such as "inc" and
> "incorporated". Those words are always interchangeable.
> However, many of the employer alternate names are only valid
> for a single employer not for the entire index.
> 
> We do disable the lengthNorm but we benefit from tf and idf
> so disabling those would cause more harm than good.
> 
> Any other suggestions would be appreciated.

May be WDF can useful?

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 10 22:16:53 2011
Return-Path: <java-user-return-48307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73773 invoked from network); 10 Jan 2011 22:16:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jan 2011 22:16:53 -0000
Received: (qmail 96530 invoked by uid 500); 10 Jan 2011 22:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96481 invoked by uid 500); 10 Jan 2011 22:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96473 invoked by uid 99); 10 Jan 2011 22:16:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 22:16:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cdoronc@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jan 2011 22:16:44 +0000
Received: by qwh6 with SMTP id 6so21081872qwh.35
        for <java-user@lucene.apache.org>; Mon, 10 Jan 2011 14:16:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Qh8wRebOpMG2nB2dJaWKkStTwevZi0DMeH5cx1gCvBI=;
        b=Cl40Zs5YvPB/tDe0+f9OUyyzAPsoyfx+zgX8zrnBudVniYbXoYA61/CRC9w2uZgL99
         F45N51Pa3M+FQrtt778lpe4UoiEDkYVD0wg7ADcviFtGHXiSHl4mR+RbAkEMraCUNgAK
         pW6IDKsGqs0qvzWVWgvFR6xl+SW4b2etAfBrk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=avAamPh+uDdopqOraDJEvLIYxXCb8KmeLiUw6YyhaxKrT4ExX+JuuFR9O2GmOPYExe
         Gdv7z471HRSuSd7iMdhRwCIPL9CU/5IE+Fc71DnDF+yvp7QqOYOR1ETG2FAmLQMQfRFH
         OzUSdPlUHx9h6UkyJQ+Am/8zu2BxhZM2pU7K4=
MIME-Version: 1.0
Received: by 10.229.235.4 with SMTP id ke4mr26020307qcb.63.1294697783098; Mon,
 10 Jan 2011 14:16:23 -0800 (PST)
Received: by 10.229.12.19 with HTTP; Mon, 10 Jan 2011 14:16:22 -0800 (PST)
In-Reply-To: <E1E61A9983E3F94DAA95AEDE2D487E700618C80500@mbx2.hostedexchange.local>
References: <E1E61A9983E3F94DAA95AEDE2D487E700618C7FE85@mbx2.hostedexchange.local>
	<AANLkTimqVLFrH1FGACaE3iTGidvJuEvY-ptdw4jbMuDY@mail.gmail.com>
	<E1E61A9983E3F94DAA95AEDE2D487E700618C80500@mbx2.hostedexchange.local>
Date: Tue, 11 Jan 2011 00:16:22 +0200
Message-ID: <AANLkTinv7jjzxKDq4=sVUTbf+6k1mqz1UwHZV1V2wKqQ@mail.gmail.com>
Subject: Re: Creating an index with multiple values for a single field
From: Doron Cohen <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e646514873fe400499855172
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e646514873fe400499855172
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Jan 10, 2011 at 7:44 PM, Ryan Aylward <ryan@glassdoor.com> wrote:

> We do leverage synonyms but they are not appropriate for this case. We use
> synonyms for words that are truly synonymous for the entire index such as
> "inc" and "incorporated". Those words are always interchangeable. However,
> many of the employer alternate names are only valid for a single employer
> not for the entire index.
> We do disable the lengthNorm but we benefit from tf and idf so disabling
> those would cause more harm than good.
> Any other suggestions would be appreciated.
>

How about indexing this specific field without analysis - except perhaps for
lower casing - i.e. in the above example the field would have exactly 3
tokens: [wal-mart], [wal-mart stores], [walmart]. At search time this field
would be treated the same way, that is, no analysis except for lower casing.
Since norms are already omitted for this field its lengths  differences
between docs would not affect scores.
HTH, Doron


> Thanks.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Friday, January 07, 2011 7:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: Creating an index with multiple values for a single field
>
> Hi Ryan,
> You should try the synonym filter. That should help you with this kinda
> problem.
> You could also look at turning off norms for the name field, or turning off
> tf or idf.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Sat, Jan 8, 2011 at 6:03 AM, Ryan Aylward <ryan@glassdoor.com> wrote:
>
> > Our business has a need to allow for multiple values for a single field.
> > For example, we have an index of employers where an employer often has
> > multiple ways people refer to it. For example, the company "Wal-mart" is
> > referred to as:
> >
> > 1)      Wal-mart
> >
> > 2)      Wal-mart Stores
> >
> > 3)      Walmart
> > I would like a search for any of these 3 terms to match the Wal-mart
> > employer.
> >
> > I've tried two different approaches for this.
> >
> > Approach 1: Create multiple values for the same field. So the document
> has
> > these three fields:
> >
> > 1)      name=Wal-mart
> >
> > 2)      name=Wal-mart Stores
> >
> > 3)      name=Walmart
> > The problem with this is Lucene seems to treat the 3 different fields as
> > one long field of "Wal-mart Wal-mart Stores Walmart". This is problematic
> > b/c term frequencies is 2 when a user searches for "Wal-mart".
> >
> > Approach 2: Create different named fields for each value so the document
> > has these 3 fields:
> >
> > 1)      name1=Wal-mart
> >
> > 2)      name2=Wal-mart Stores
> >
> > 3)      name3=Walmart
> > This fixes the issue above but introduces a different problem. The idf
> > calculation is incorrect b/c idf is calculated per field. Most employers
> > only have one name or maybe 2 names. So the name3 fields idf ends up
> being
> > much higher b/c there are fewer docs with a given term in the name3
> field.
> >
> > For now, I'm going with approach 2 but overriding the IndexReader.
> > IndexReader.docFreq(Term t) method always returns the doc frequency from
> the
> > name1 field even if the Term t is actually for name2 or name3, etc. But
> this
> > doesn't feel like a clean solution.
> >
> > Any suggestions on how to deal with this? Any ideas would be appreciated.
> > Ryan Aylward
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e646514873fe400499855172--

From java-user-return-48308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 01:55:04 2011
Return-Path: <java-user-return-48308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25149 invoked from network); 11 Jan 2011 01:55:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 01:55:03 -0000
Received: (qmail 28125 invoked by uid 500); 11 Jan 2011 01:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28092 invoked by uid 500); 11 Jan 2011 01:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28084 invoked by uid 99); 11 Jan 2011 01:55:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 01:55:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amgqas@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 01:54:56 +0000
Received: by yib17 with SMTP id 17so6641924yib.35
        for <java-user@lucene.apache.org>; Mon, 10 Jan 2011 17:54:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=SkuCO2UmGJaS2jG7LdPSq6yskLdqTjq9dSYBgzlK8HQ=;
        b=afT81eYiTktM9LEC8gz4UEQGEHLJkK3hePTzAtAqRi0sXG8KjUl4avzgMh9eRggPjH
         fRqTMBOjr0yGkZRDjZ2BaSIpF6BHvgfkXsadKaT2yyXAMdgX+saXf2xyB92O1oDKiyuw
         Stkf/uyKn2R8appxVbXMZJjaCimc++sLE7Pfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qZrL1fTYkrUNwROo2RGNuGWCxG29ua4FYBaXf9t+GhXhD/ca3MYo7b+EZ1vURgGowA
         FnKOFC5nLJPV3pfMAw/of5uQgKZpigJ25wPiDZZxeAAiXZ/dT4K8Q9GCx6QeXPMVqtAR
         AS6d4LrPvZnRq6XZxVUH8GZyjpbKFpmL6Tpsc=
MIME-Version: 1.0
Received: by 10.146.167.13 with SMTP id p13mr41086583yae.1.1294710873830; Mon,
 10 Jan 2011 17:54:33 -0800 (PST)
Received: by 10.147.136.17 with HTTP; Mon, 10 Jan 2011 17:54:33 -0800 (PST)
Date: Mon, 10 Jan 2011 17:54:33 -0800
Message-ID: <AANLkTimC8WpzxDWTNcqMhWW6yEfx5VvT3978xso_Crk3@mail.gmail.com>
Subject: How to parse & index different portions of an HTML page using Tika &
 Lucene ?
From: amg qas <amgqas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30549637b8b84d0499885de7

--20cf30549637b8b84d0499885de7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I have been trying to parse & index different portions of an HTML page usin=
g
Tika & Lucene. For eg. I would like to index text within <Title>, <H1>,
<H2>, <A> tags
of a HTML page separately and provide a different boost to each of them. I
am using Tika for HTML parsing and creating a Document object with the
appropriate fields
that need to be indexed. However I could not find anything within Tika whic=
h
would help me index the tags I want right out of the box.

My code looks something like this :

InputStream is =3D new FileInputStream(f);
Parser parser =3D new AutoDetectParser();
ContentHandler handler =3D new BodyContentHandler(-1);
ParseContext context =3D new ParseContext();
 context.set(HtmlMapper.class, DefaultHtmlMapper.INSTANCE);

try {
 parser.parse(is, handler, metadata, context);
} finally {
 is.close();
}

Document doc =3D new Document();
doc.add(new Field("contents", handler.toString(),
  Field.Store.NO, Field.Index.ANALYZED));

for (String name : metadata.names()) {
 String value =3D metadata.get(name);

 if (textualMetadataFields.contains(name)) {
  doc.add(new Field("contents", value,
    Field.Store.NO, Field.Index.ANALYZED));
 }

 doc.add(new Field(name, value, Field.Store.YES, Field.Index.YES));
}

Stepping into Tika's HTML parsing code I found that it is
org.apache.tika.parser.html.HtmlHandler class that fills up metadata object=
.
I have the following questions :
=B7  Do I need to write a custom HTML handler to extract text within specif=
ic
elements of a HTML page ?
=B7  Is there some class in Tika which can parse out text within different
HTML tags that one specifies and fill up metadata object accordingly ? Can
someone please provide
   code samples for solutions that you propose ?

Thanks,
Amg

--20cf30549637b8b84d0499885de7--

From java-user-return-48309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 05:16:11 2011
Return-Path: <java-user-return-48309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4111 invoked from network); 11 Jan 2011 05:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 05:16:10 -0000
Received: (qmail 51062 invoked by uid 500); 11 Jan 2011 05:16:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50752 invoked by uid 500); 11 Jan 2011 05:16:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50744 invoked by uid 99); 11 Jan 2011 05:16:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 05:16:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 05:15:58 +0000
Received: by fxm2 with SMTP id 2so19496605fxm.35
        for <java-user@lucene.apache.org>; Mon, 10 Jan 2011 21:15:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LPlGS2ZtwjZCTPw51BBgMkM/sNw+KHSTqha5Yu73bLw=;
        b=eeYy8Wbyr/v+4MPqOskkzNDQTqT6/YNlG/wIE7VhEAEtS8EPy3FH45qkoZBUOU5tEB
         b40MoHKokq6bhhZJbXwdJPIVC8/2Uz4Sd11utFRylVu3CocQZBRNwXmGsFdslaz/iSu/
         gvZGDWTLXKB72KbtH3uS2WW4oUBlTn/gg29uE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rJh13HxY7Z3TKEy/WTSlPt1WEZnDOn9WcdefVVsYFec5LwFmRFwWVpNk6cfpsUnZLe
         1R9HRtNnwfUln0qVY2tXdr4wN3WjoMcUQZUG/GuTRR6QW+Po0nZ2zJVmq+NR/hfwVhak
         Y5HpzZDdJUB1TVC5FnFfdqEP/Fk0Adp4OPgD0=
MIME-Version: 1.0
Received: by 10.223.83.199 with SMTP id g7mr2722426fal.81.1294722938010; Mon,
 10 Jan 2011 21:15:38 -0800 (PST)
Received: by 10.223.164.134 with HTTP; Mon, 10 Jan 2011 21:15:37 -0800 (PST)
In-Reply-To: <AANLkTimC8WpzxDWTNcqMhWW6yEfx5VvT3978xso_Crk3@mail.gmail.com>
References: <AANLkTimC8WpzxDWTNcqMhWW6yEfx5VvT3978xso_Crk3@mail.gmail.com>
Date: Tue, 11 Jan 2011 10:45:37 +0530
Message-ID: <AANLkTikSMtHdiKAU7LgmaeK=euUiNpj74WZ05h+jJFuY@mail.gmail.com>
Subject: Re: How to parse & index different portions of an HTML page using
 Tika & Lucene ?
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a4b5cd7d4004998b2c68
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a4b5cd7d4004998b2c68
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Your problem is more with tika. Pls post in tika user group.

If you want to deal with only HTML then better use html parser.
http://www.findbestopensource.com/search/?query=3D%22html+parser%22


On Tue, Jan 11, 2011 at 7:24 AM, amg qas <amgqas@gmail.com> wrote:

> I have been trying to parse & index different portions of an HTML page
> using
> Tika & Lucene. For eg. I would like to index text within <Title>, <H1>,
> <H2>, <A> tags
> of a HTML page separately and provide a different boost to each of them. =
I
> am using Tika for HTML parsing and creating a Document object with the
> appropriate fields
> that need to be indexed. However I could not find anything within Tika
> which
> would help me index the tags I want right out of the box.
>
> My code looks something like this :
>
> InputStream is =3D new FileInputStream(f);
> Parser parser =3D new AutoDetectParser();
> ContentHandler handler =3D new BodyContentHandler(-1);
> ParseContext context =3D new ParseContext();
>  context.set(HtmlMapper.class, DefaultHtmlMapper.INSTANCE);
>
> try {
>  parser.parse(is, handler, metadata, context);
> } finally {
>  is.close();
> }
>
> Document doc =3D new Document();
> doc.add(new Field("contents", handler.toString(),
>  Field.Store.NO <http://field.store.no/>, Field.Index.ANALYZED));
>
> for (String name : metadata.names()) {
>  String value =3D metadata.get(name);
>
>  if (textualMetadataFields.contains(name)) {
>  doc.add(new Field("contents", value,
>    Field.Store.NO <http://field.store.no/>, Field.Index.ANALYZED));
>  }
>
>  doc.add(new Field(name, value, Field.Store.YES, Field.Index.YES));
> }
>
> Stepping into Tika's HTML parsing code I found that it is
> org.apache.tika.parser.html.HtmlHandler class that fills up metadata
> object.
> I have the following questions :
> =B7  Do I need to write a custom HTML handler to extract text within spec=
ific
> elements of a HTML page ?
> =B7  Is there some class in Tika which can parse out text within differen=
t
> HTML tags that one specifies and fill up metadata object accordingly ? Ca=
n
> someone please provide
>   code samples for solutions that you propose ?
>
> Thanks,
> Amg
>

--20cf3054a4b5cd7d4004998b2c68--

From java-user-return-48310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 06:47:33 2011
Return-Path: <java-user-return-48310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45502 invoked from network); 11 Jan 2011 06:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 06:47:33 -0000
Received: (qmail 18329 invoked by uid 500); 11 Jan 2011 06:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17979 invoked by uid 500); 11 Jan 2011 06:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17971 invoked by uid 99); 11 Jan 2011 06:47:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 06:47:27 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.116] (HELO web30503.mail.mud.yahoo.com) (68.142.200.116)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Jan 2011 06:47:20 +0000
Received: (qmail 22457 invoked by uid 60001); 11 Jan 2011 06:46:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294728418; bh=qp4HNni71+Fi827nFA2f+YL6H+fF/0u3zFWYK18nQHs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Hz/gTfg2OLIg9xOGVMsNVaNqUIovjODrn8SKnzudVAua3Lwdc7e5JfdWdVEAZ0JchYzMZln3yeL2UZW5Rn0KmY8y6RMgoK6cHXYg9ObpjBaD6pjudp/LEKDFZ0eQueA7gSMoAtEEXiQ1KdB91KfDw8DIJZ90u0WI4jMIeoSxoTA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jlaiAgq4G06s0LHTux/hihhHQAmNOk78WRbtQ1kxYaNPq0DKoLkCxDSf8A7rkXKlX9VNINdpJ8+BEtzvglI5LalD7MSFd6ZJX7iFz0MyMipz/ULEwQNAkWLARAAY/IfOGmfYDqck2vZcfqsGagaFOYhI32Y6nqqzBZ/UhUPU77o=;
Message-ID: <910396.19607.qm@web30503.mail.mud.yahoo.com>
X-YMail-OSG: ioI8ud0VM1kSTX0xPbYzBQt33Je1HdRUG_8lJsf8XQg_qgw
 XOPtrCkLqbfo1uMp_IgwYwU04kNWyV2OiP1wxNYQ_6j5cdIzheZ96jwll2UW
 rJ.IB2zsyPwMDlz_UDqBfZKrp2z93XEHhLtcKiccQy290DzY4UngUGKrVaT0
 hb7WFM5ckNAViGg9lZJwqbB2Is0TLTR1gj2ndh1GZw54MpWjrpOMBUl95zsd
 HyOvsn3SaT5JNN3bxQjrnu9qpScZUD9jmicQWfsAv.1IYy0XmqIDCf7u3Q72
 jmNA1FnIwx3DQhUSEFBZBpAICwy0sqoMgFWLKr1MV1lrY3pIDxCAuz4yHSiT
 .5OKm7ALxvs3aZGIG4F5x2STTrN32ZzFYttZ_aHK8U7Y2Ju_MZxXV4Jg-
Received: from [212.143.35.226] by web30503.mail.mud.yahoo.com via HTTP; Mon, 10 Jan 2011 22:46:58 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Mon, 10 Jan 2011 22:46:58 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Re: Newbie question: optimized files?
To: java-user@lucene.apache.org
In-Reply-To: <959444.19294.qm@web30502.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1999676574-1294728418=:19607"

--0-1999676574-1294728418=:19607
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

Continuing my question - I now suspect a bug in Lucene 3.0.3, because I ran=
 the test with Lucene 3.0.0 and it worked okay (no junk files)... could any=
one please confirm?

--- On Mon, 1/10/11, sol myr <solmyr72@yahoo.com> wrote:

From: sol myr <solmyr72@yahoo.com>
Subject: Newbie question: optimized files?
To: java-user@lucene.apache.org
Date: Monday, January 10, 2011, 9:56 AM

Hi,=20

I'm new to Lucene (using 3.0.3), and just started to check out the behavior=
 of the 'optimize()' method (which is quite important for our application).
Could it be that 'optimize' cancels out the 'compoundFile' mode? Or am I do=
ing something wrong?=20

Here's my test: I create an indexWriter with compoundFile=3Dtrue, then perf=
orm some writes+commits (which generates several 'cfs' files).
Then I call 'optimize()'... I expected this to yield a single optimized 'cf=
s' file, but instead I get lots of different files - 'fdt', 'fdx', 'fnm' et=
c...

The detailed code:
// Create indexWriter with 'compoundfile=3Dtrue':
Version version=3DVersion.LUCENE_30;
Directory dir =3D FSDirectory.open(new File("c:/luceneTemp"));
Analyzer analyzer =3D new StandardAnalyzer(version);
IndexWriter writer =3D new IndexWriter(
=A0=A0=A0=A0=A0=A0=A0=A0 dir, analyzer, true, IndexWriter.MaxFieldLength.LI=
MITED);
writer.setUseCompoundFile(true);

// Perform some writes + commits.
// This yields several 'cfs' files as expected:
writer.addDocument(...);
writer.commit();
writer.addDocument(...);

writer.commit();
Thread.sleep(20000);=A0 // give myself time to see the generated 'cfs' file=
s

// Optimize - why does it yield lots of separate files ('fdt', 'fdx', etc)?
writer.optimize();


Thanks.



=A0 =A0 =A0 =0A=0A=0A      
--0-1999676574-1294728418=:19607--

From java-user-return-48311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 07:58:31 2011
Return-Path: <java-user-return-48311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68261 invoked from network); 11 Jan 2011 07:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 07:58:31 -0000
Received: (qmail 72013 invoked by uid 500); 11 Jan 2011 07:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71720 invoked by uid 500); 11 Jan 2011 07:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 15189 invoked by uid 99); 11 Jan 2011 06:43:02 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of sailesh.jain@gmail.com)
Date: Mon, 10 Jan 2011 22:42:35 -0800 (PST)
From: Sailesh <sailesh.jain@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1294728155406-2232931.post@n3.nabble.com>
Subject: Searching Multivalued fileds
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


My index contains multivalued filed like and i use whitespaceAnalyzer
DOC 1 : ITEMNAME: item 2 name
           ITEMNAME: movie tickets
           ITEMNAME: item 1 name
so when search for (+ITEMNAME:item +ITEMNAME:movie), it should not match any
document
since there is no field which has both item and move, but it returns me the
above doc.

Can any one please suggest how to handle this situation?


Thanks
Sailesh
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Searching-Multivalued-fileds-tp2232931p2232931.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 08:06:47 2011
Return-Path: <java-user-return-48312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79526 invoked from network); 11 Jan 2011 08:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 08:06:47 -0000
Received: (qmail 83364 invoked by uid 500); 11 Jan 2011 08:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83038 invoked by uid 500); 11 Jan 2011 08:06:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83030 invoked by uid 99); 11 Jan 2011 08:06:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 08:06:41 +0000
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 08:06:34 +0000
Received: by vws18 with SMTP id 18so7972071vws.35
        for <java-user@lucene.apache.org>; Tue, 11 Jan 2011 00:06:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2o5T0gtCRCl4wCyxyI3vsBTh3C9bNjxG3RcSGDLutRQ=;
        b=bmTJ3iHL5cX9/XzivznLTHCHWi0bgoGGRonRt051Z2ZpkMrkivfNCak2wPFM2aHsrY
         xhI8gzC1pOAOeG4s030JOcU/oBnR7GpmQQnStBn2tgKnqp2x3i5fvXpZYD31ruTupvQV
         S2NeAXMDdYelmTnJQ9/YwDGQYsp6bZTG3A2rM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=OHpn4CxMdDj7SitutBTTQMr84s3YweuuleVgapF+PUXPODMIC9grBk1ANrv5Lt39gm
         TlMjqjgODxzSxBVH6BCe2d9KX7LDn/o+LQtm2gLpO/FsT1Zt26kp4UqurZ5aINAWlhdk
         zKYwtdvS6IkbMFhZMrT6cJNfd8FDCjYJnYjDo=
MIME-Version: 1.0
Received: by 10.220.200.135 with SMTP id ew7mr9455247vcb.37.1294733173787;
 Tue, 11 Jan 2011 00:06:13 -0800 (PST)
Received: by 10.220.183.4 with HTTP; Tue, 11 Jan 2011 00:06:13 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <910396.19607.qm@web30503.mail.mud.yahoo.com>
References: <959444.19294.qm@web30502.mail.mud.yahoo.com>
	<910396.19607.qm@web30503.mail.mud.yahoo.com>
Date: Tue, 11 Jan 2011 09:06:13 +0100
Message-ID: <AANLkTimaJW58-kmoM-R7H8sMaSTvo0_p5P_PYtFzfU+K@mail.gmail.com>
Subject: Re: Newbie question: optimized files?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,

this looks like you are hitting the optimization done in LUCENE-2773
(https://issues.apache.org/jira/browse/LUCENE-2773) that prevents
merged segments that are larger than 10% (by default - see
LogMergePolicy#noCFSRatio) of the index size it will be left in
non-compound format even if compound format is on.

for some background see:
http://lucene.apache.org/java/3_0_3/changes/Changes.html#3.0.3.changes_in_r=
untime_behavior

so its a feature not a bug :)

Simon

On Tue, Jan 11, 2011 at 7:46 AM, sol myr <solmyr72@yahoo.com> wrote:
> Hi,
>
> Continuing my question - I now suspect a bug in Lucene 3.0.3, because I r=
an the test with Lucene 3.0.0 and it worked okay (no junk files)... could a=
nyone please confirm?
>
> --- On Mon, 1/10/11, sol myr <solmyr72@yahoo.com> wrote:
>
> From: sol myr <solmyr72@yahoo.com>
> Subject: Newbie question: optimized files?
> To: java-user@lucene.apache.org
> Date: Monday, January 10, 2011, 9:56 AM
>
> Hi,
>
> I'm new to Lucene (using 3.0.3), and just started to check out the behavi=
or of the 'optimize()' method (which is quite important for our application=
).
> Could it be that 'optimize' cancels out the 'compoundFile' mode? Or am I =
doing something wrong?
>
> Here's my test: I create an indexWriter with compoundFile=3Dtrue, then pe=
rform some writes+commits (which generates several 'cfs' files).
> Then I call 'optimize()'... I expected this to yield a single optimized '=
cfs' file, but instead I get lots of different files - 'fdt', 'fdx', 'fnm' =
etc...
>
> The detailed code:
> // Create indexWriter with 'compoundfile=3Dtrue':
> Version version=3DVersion.LUCENE_30;
> Directory dir =3D FSDirectory.open(new File("c:/luceneTemp"));
> Analyzer analyzer =3D new StandardAnalyzer(version);
> IndexWriter writer =3D new IndexWriter(
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 dir, analyzer, true, Ind=
exWriter.MaxFieldLength.LIMITED);
> writer.setUseCompoundFile(true);
>
> // Perform some writes + commits.
> // This yields several 'cfs' files as expected:
> writer.addDocument(...);
> writer.commit();
> writer.addDocument(...);
>
> writer.commit();
> Thread.sleep(20000);=C2=A0 // give myself time to see the generated 'cfs'=
 files
>
> // Optimize - why does it yield lots of separate files ('fdt', 'fdx', etc=
)?
> writer.optimize();
>
>
> Thanks.
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 08:08:46 2011
Return-Path: <java-user-return-48313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80261 invoked from network); 11 Jan 2011 08:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 08:08:46 -0000
Received: (qmail 88311 invoked by uid 500); 11 Jan 2011 08:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87422 invoked by uid 500); 11 Jan 2011 08:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87411 invoked by uid 99); 11 Jan 2011 08:08:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 08:08:40 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of harshcode@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 08:08:35 +0000
Received: by fxm2 with SMTP id 2so19584746fxm.35
        for <java-user@lucene.apache.org>; Tue, 11 Jan 2011 00:08:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=6ahll++JjV7O/9aNooGC2pR2UTuUZBz81iZZx3HI2Hc=;
        b=SozCrKMoySNARNtcTFJH3gwjakQ2WWUgroM1931aNW8B67mRB3gcvw+ODtoHbMuzd0
         GYBc2xT7WLjqOxFDX3/sS8ahBNEirfDnYSjSTyFqWbamL+8yOsodcKdT3TzS6HV2D87T
         dnuWK8IJ9pL9lg0j5QFTsylYK7zCx8lcPbacU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g4mGPcxM7RbzUATljj5C6JJSq2Z+D+pbNwLVZJlh3lka4wVbbQD8o4szhS9hTLqvux
         U85AKgUbq8HlEnUYagY25m1UG6cuSb+Hg/4Pg/3S4ulEYTZbeIv77WBu2XIgGOQsHnUp
         ZV3dKLgVS5ceVsdlzifNBIMPsgYkL/ZWyZ9/w=
MIME-Version: 1.0
Received: by 10.103.199.17 with SMTP id b17mr175104muq.128.1294733293252; Tue,
 11 Jan 2011 00:08:13 -0800 (PST)
Received: by 10.102.4.15 with HTTP; Tue, 11 Jan 2011 00:08:13 -0800 (PST)
In-Reply-To: <1294728155406-2232931.post@n3.nabble.com>
References: <1294728155406-2232931.post@n3.nabble.com>
Date: Tue, 11 Jan 2011 13:38:13 +0530
Message-ID: <AANLkTimFXtcTt-w4B_6Sho4KLmSqfGRX730xi6MQHnyB@mail.gmail.com>
Subject: Re: Searching Multivalued fileds
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369cfeff06023104998d969e

--0016369cfeff06023104998d969e
Content-Type: text/plain; charset=ISO-8859-1

Hi Sailesh,

As per my understanding, (+ITEMNAME:item +ITEMNAME:movie) will search for a
document containing item and movie terms and return the DOC 1.

What you want to get?

-HarshCode



On Tue, Jan 11, 2011 at 12:12 PM, Sailesh <sailesh.jain@gmail.com> wrote:

>
> My index contains multivalued filed like and i use whitespaceAnalyzer
> DOC 1 : ITEMNAME: item 2 name
>           ITEMNAME: movie tickets
>           ITEMNAME: item 1 name
> so when search for (+ITEMNAME:item +ITEMNAME:movie), it should not match
> any
> document
> since there is no field which has both item and move, but it returns me the
> above doc.
>
> Can any one please suggest how to handle this situation?
>
>
> Thanks
> Sailesh
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Searching-Multivalued-fileds-tp2232931p2232931.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016369cfeff06023104998d969e--

From java-user-return-48314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 08:43:12 2011
Return-Path: <java-user-return-48314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87635 invoked from network); 11 Jan 2011 08:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 08:43:11 -0000
Received: (qmail 24708 invoked by uid 500); 11 Jan 2011 08:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24104 invoked by uid 500); 11 Jan 2011 08:43:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 23266 invoked by uid 99); 11 Jan 2011 08:39:32 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of sailesh.jain@gmail.com)
Date: Tue, 11 Jan 2011 00:39:04 -0800 (PST)
From: Sailesh <sailesh.jain@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1294735144267-2233220.post@n3.nabble.com>
In-Reply-To: <AANLkTimFXtcTt-w4B_6Sho4KLmSqfGRX730xi6MQHnyB@mail.gmail.com>
References: <1294728155406-2232931.post@n3.nabble.com> <AANLkTimFXtcTt-w4B_6Sho4KLmSqfGRX730xi6MQHnyB@mail.gmail.com>
Subject: Re: Searching Multivalued fileds
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I want no fields to be returned, as they belong to different fields but
their fieldnames are same.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Searching-Multivalued-fileds-tp2233114p2233220.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 11 09:25:47 2011
Return-Path: <java-user-return-48315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3672 invoked from network); 11 Jan 2011 09:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jan 2011 09:25:47 -0000
Received: (qmail 71944 invoked by uid 500); 11 Jan 2011 09:25:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71711 invoked by uid 500); 11 Jan 2011 09:25:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71697 invoked by uid 99); 11 Jan 2011 09:25:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 09:25:41 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jokin.c@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jan 2011 09:25:34 +0000
Received: by pwj9 with SMTP id 9so4006567pwj.35
        for <java-user@lucene.apache.org>; Tue, 11 Jan 2011 01:25:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=EyxnLQ/dmlJiq1n1wgcN0QQPc523rtMmgy5zKoeoWjs=;
        b=SC7bklBsZm2Aadp6chflZvkRXFgcLtwWUw4GIL+zF2jqqN/WPc7q+RIJGoR8BAMpOg
         6gDfgw6tMMP3ZLuJN4Tyrgodw7ccFbJUS1GCZR0qJ6zz31gd5jnFyOG39CYGtH1rud/p
         a1x1bJmsnjOsWqikFJGheFh8EBvgNLKgBrXN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=da1EQjvjUHBpYcPmT2EffXi85BoT7Okp5l7OWW/7DAoXf8s2dKvVpZfTq4UNl9igKC
         ER+e4yIKXf1sSpWS00PrLxfJjNVOKJ+nLOquuaTEEYAlEMPpCKPsQZgtZh/hiDaAVHht
         Pa/aYeyg0hhZSoRHcolFoSBmZlQTka1XvUfu8=
Received: by 10.142.141.12 with SMTP id o12mr5380704wfd.339.1294737913504;
 Tue, 11 Jan 2011 01:25:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.201.3 with HTTP; Tue, 11 Jan 2011 01:24:53 -0800 (PST)
In-Reply-To: <1294735144267-2233220.post@n3.nabble.com>
References: <1294728155406-2232931.post@n3.nabble.com> <AANLkTimFXtcTt-w4B_6Sho4KLmSqfGRX730xi6MQHnyB@mail.gmail.com>
 <1294735144267-2233220.post@n3.nabble.com>
From: Jokin Cuadrado <jokin.c@gmail.com>
Date: Tue, 11 Jan 2011 10:24:53 +0100
Message-ID: <AANLkTi=cka=mDo5FHG_urFAMhS4M3-5bWsUz=Z1X+PNa@mail.gmail.com>
Subject: Re: Searching Multivalued fileds
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

you should use a proximity search, so the matching words are near:
q=Itemname:("item movie"~2)
I don't remember if you need also to customize your indexing analyser
so diferent values are far enough for your needs or if that it's
already done.


On Tue, Jan 11, 2011 at 9:39 AM, Sailesh <sailesh.jain@gmail.com> wrote:
>
> I want no fields to be returned, as they belong to different fields but
> their fieldnames are same.
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Searching-Multivalued-fileds-tp2233114p2233220.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--
Jokin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 12 08:35:03 2011
Return-Path: <java-user-return-48316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79331 invoked from network); 12 Jan 2011 08:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jan 2011 08:35:03 -0000
Received: (qmail 27033 invoked by uid 500); 12 Jan 2011 08:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26570 invoked by uid 500); 12 Jan 2011 08:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26555 invoked by uid 99); 12 Jan 2011 08:34:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 08:34:56 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.200.118] (HELO web30505.mail.mud.yahoo.com) (68.142.200.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Jan 2011 08:34:47 +0000
Received: (qmail 71182 invoked by uid 60001); 12 Jan 2011 08:34:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294821264; bh=khT6AOxWkKHYraG0hg5SBm/8OrZIjGDhmzCG088IIro=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=JeukAVL8n+joSMkNDiyxVPJ1YY5iC5cEluCDNiXMTB/N5Jc1lcHz0BAvJR6TeS43ezPfYTeh5Mu6DbaWDarkFFGT8AAVaaDEy/Y8KUcwCGpkCkblPIYvc+33T/q3ONe5DNCA76C7K+sQ5jTwu+9NzCsLXGbJld5I+xzAX/PMZnU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=dQ96KQc5aMRtFRBz5f4zJfvl8wFDj4Zo/8k9xZ+xyUkiSSApsO6PRp8x73RnMJ13yu40myj3EJH6AYDali0+AxlqVTWsdV09juZ30Yosuc7dcr6+GfkNjRn6nsgx8kVxZr5Ib/mPTSY3tDnuzsPCpw4SYpmHEG4sQNXpXV+0UIY=;
Message-ID: <670215.67595.qm@web30505.mail.mud.yahoo.com>
X-YMail-OSG: Yf0csrUVM1k_g98iQ1EElBAjbre7msJZBsm4.geWNhSEAS7
 s_L4YW3ttiTvYdeKItpuq2hOc8EQG99LeXGnqmPeivzR6qhCWdXfK9Ay1jhe
 d7KiD3O4S_J8VfuHqwvKeTq9gA.i_L6EmPDI4j6.H_z7V5hqhi8ZEyIMlaZm
 Sdh0FbEViAWI6Kli5KZ0s.ucPMhP.duiYhJx0J3aOhvX3mmY0h1uNTk7HjpD
 uF91KRsL1RLxX9glGC.ogUcv2b88z3vEIST8YWzBnc2VAm5raI.xr_L1E3n_
 OcY19b_H8bs0rqkxcg1R.pBM_n52yRugKtNi..4XX8dAzGov.3uagQO4-
Received: from [212.143.35.226] by web30505.mail.mud.yahoo.com via HTTP; Wed, 12 Jan 2011 00:34:24 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Wed, 12 Jan 2011 00:34:24 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Re: Newbie question: optimized files?
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
In-Reply-To: <AANLkTimaJW58-kmoM-R7H8sMaSTvo0_p5P_PYtFzfU+K@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1631222322-1294821264=:67595"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1631222322-1294821264=:67595
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

That was it - thank :)

--- On Tue, 1/11/11, Simon Willnauer <simon.willnauer@googlemail.com> wrote=
:

From: Simon Willnauer <simon.willnauer@googlemail.com>
Subject: Re: Newbie question: optimized files?
To: java-user@lucene.apache.org
Date: Tuesday, January 11, 2011, 12:06 AM

Hey,

this looks like you are hitting the optimization done in LUCENE-2773
(https://issues.apache.org/jira/browse/LUCENE-2773) that prevents
merged segments that are larger than 10% (by default - see
LogMergePolicy#noCFSRatio) of the index size it will be left in
non-compound format even if compound format is on.

for some background see:
http://lucene.apache.org/java/3_0_3/changes/Changes.html#3.0.3.changes_in_r=
untime_behavior

so its a feature not a bug :)

Simon

On Tue, Jan 11, 2011 at 7:46 AM, sol myr <solmyr72@yahoo.com> wrote:
> Hi,
>
> Continuing my question - I now suspect a bug in Lucene 3.0.3, because I r=
an the test with Lucene 3.0.0 and it worked okay (no junk files)... could a=
nyone please confirm?
>
> --- On Mon, 1/10/11, sol myr <solmyr72@yahoo.com> wrote:
>
> From: sol myr <solmyr72@yahoo.com>
> Subject: Newbie question: optimized files?
> To: java-user@lucene.apache.org
> Date: Monday, January 10, 2011, 9:56 AM
>
> Hi,
>
> I'm new to Lucene (using 3.0.3), and just started to check out the behavi=
or of the 'optimize()' method (which is quite important for our application=
).
> Could it be that 'optimize' cancels out the 'compoundFile' mode? Or am I =
doing something wrong?
>
> Here's my test: I create an indexWriter with compoundFile=3Dtrue, then pe=
rform some writes+commits (which generates several 'cfs' files).
> Then I call 'optimize()'... I expected this to yield a single optimized '=
cfs' file, but instead I get lots of different files - 'fdt', 'fdx', 'fnm' =
etc...
>
> The detailed code:
> // Create indexWriter with 'compoundfile=3Dtrue':
> Version version=3DVersion.LUCENE_30;
> Directory dir =3D FSDirectory.open(new File("c:/luceneTemp"));
> Analyzer analyzer =3D new StandardAnalyzer(version);
> IndexWriter writer =3D new IndexWriter(
> =A0=A0=A0=A0=A0=A0=A0=A0 dir, analyzer, true, IndexWriter.MaxFieldLength.=
LIMITED);
> writer.setUseCompoundFile(true);
>
> // Perform some writes + commits.
> // This yields several 'cfs' files as expected:
> writer.addDocument(...);
> writer.commit();
> writer.addDocument(...);
>
> writer.commit();
> Thread.sleep(20000);=A0 // give myself time to see the generated 'cfs' fi=
les
>
> // Optimize - why does it yield lots of separate files ('fdt', 'fdx', etc=
)?
> writer.optimize();
>
>
> Thanks.
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-1631222322-1294821264=:67595--

From java-user-return-48317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 12 10:40:25 2011
Return-Path: <java-user-return-48317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28866 invoked from network); 12 Jan 2011 10:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jan 2011 10:40:25 -0000
Received: (qmail 55251 invoked by uid 500); 12 Jan 2011 10:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54709 invoked by uid 500); 12 Jan 2011 10:40:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54692 invoked by uid 99); 12 Jan 2011 10:40:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 10:40:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 10:40:11 +0000
Received: by qwh6 with SMTP id 6so439421qwh.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 02:39:50 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.45.209 with SMTP id g17mr825947qaf.21.1294828790388; Wed,
 12 Jan 2011 02:39:50 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Wed, 12 Jan 2011 02:39:50 -0800 (PST)
Date: Wed, 12 Jan 2011 18:39:50 +0800
Message-ID: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
Subject: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cba601898080499a3d2ad

--0015175cba601898080499a3d2ad
Content-Type: text/plain; charset=ISO-8859-1

Dear Luceners,

I'm using lucene-3.0.2 in our app. There is some testing code for switching
index, however, when my code run a couple of times, I found the index file
was locked, I can not delete the old index files.


The code looks like:

public class SearchTest
{

    private static final int MAX_RESULT = 10000;

    private String indexPath1 = "D:\\index\\index1";
    private String indexPath2 = "D:\\index\\index2";

    private String indexPath = indexPath1;

    private Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);

    private Directory dir = null;

    private IndexSearcher searcher;

    public void search()
    {
        while(true)
        {
            try
            {
                String keyword = "test";
                String fieldName = "searchfield";

                if(dir == null)
                {
                    dir = FSDirectory.open(new File(indexPath));
                }
                searcher = new IndexSearcher(dir);

                QueryParser queryParse = new QueryParser(Version.LUCENE_30,
fieldName, analyzer);
                Query query = queryParse.parse(keyword);

                TopDocs hits = searcher.search(query, MAX_RESULT);
                int size = 5;
                if(hits.scoreDocs.length < size)
                {
                    size = hits.scoreDocs.length;
                }
                for (int i = 0; i < size; i++)
                {
                    Document doc = searcher.doc(hits.scoreDocs[i].doc);
                    String text = doc.get(fieldName);
                    System.out.println("fieldContent is: " + text);
                }

                IndexSearcher oldSearcher = searcher;
                dir = FSDirectory.open(new File(getIndexPath()));
                IndexSearcher newSearcher = new IndexSearcher(dir);
                searcher = newSearcher;

                oldSearcher.close();
                System.out.println("Closed Searcher: " +
oldSearcher.getIndexReader().directory().toString());

                System.out.println("input 'Q' to quit testing...");
                BufferedReader br = new BufferedReader(new
InputStreamReader(System.in));

                if(br.readLine().trim().equals("Q"))
                {
                    break;
                }
            }
            catch (CorruptIndexException e)
            {
                e.printStackTrace();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            catch (ParseException e)
            {
                e.printStackTrace();
            }
        }
    }

    private String getIndexPath()
    {
        if(indexPath.equals(indexPath1))
        {
            indexPath = indexPath2;
        }
        else
        {
            indexPath = indexPath1;
        }

        return indexPath;
    }

    public static void main(String[] args)
    {
        SearchTest searchTest = new SearchTest();
        searchTest.search();
    }

}

Can anybody take a look at the above code snippet?

I want to search on the different index file every time so I created two
different folders and switch them time to time. The index files in the
index1/index2 maybe replaced before the search request comes.

The problem I found is after I ran the above code 2 or more loops, I can not
modify/delete the cfs/cfx file in the file system(Windows 2003), although I
closed the searcher every time in the code. It seems that the index file is
not released.

Is the problem caused by the shared reference of searcher? or some shared
thread in the lucene?

Thanks in advance!
Garry

--0015175cba601898080499a3d2ad--

From java-user-return-48318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 12 10:57:46 2011
Return-Path: <java-user-return-48318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36213 invoked from network); 12 Jan 2011 10:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jan 2011 10:57:46 -0000
Received: (qmail 84969 invoked by uid 500); 12 Jan 2011 10:57:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84673 invoked by uid 500); 12 Jan 2011 10:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84665 invoked by uid 99); 12 Jan 2011 10:57:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 10:57:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 10:57:35 +0000
Received: by wye20 with SMTP id 20so443673wye.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 02:57:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.187.10 with SMTP id x10mr621427wem.97.1294829833079; Wed,
 12 Jan 2011 02:57:13 -0800 (PST)
Received: by 10.216.255.81 with HTTP; Wed, 12 Jan 2011 02:57:13 -0800 (PST)
In-Reply-To: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
Date: Wed, 12 Jan 2011 05:57:13 -0500
Message-ID: <AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

V2hlbiB5b3UgYnJlYWsgb3V0IG9mIHRoZSBsb29wICh1c2VyIGVudGVycyAnUScpIHlvdSBkb24n
dCBjbG9zZSB0aGUKY3VycmVudCBzZWFyY2hlci4gIENvdWxkIHRoYXQgYmUgaXQ/CgpBbHNvIHlv
dSBhcmUgY2FsbGluZyBGU0Rpci5vcGVuIGVhY2ggdGltZSBidXQgc2hvdWxkIG9ubHkgZG8gaXQg
b25jZQoodGhvdWdoIHRoaXMgc2hvdWxkIGJlICJoYXJtbGVzcyIpLgoKTWlrZQoKT24gV2VkLCBK
YW4gMTIsIDIwMTEgYXQgNTozOSBBTSwg5byg5b+X55SwIDx6aGl0aWFuLnpoYW5nQGRpYW5waW5n
LmNvbT4gd3JvdGU6Cj4gRGVhciBMdWNlbmVycywKPgo+IEknbSB1c2luZyBsdWNlbmUtMy4wLjIg
aW4gb3VyIGFwcC4gVGhlcmUgaXMgc29tZSB0ZXN0aW5nIGNvZGUgZm9yIHN3aXRjaGluZwo+IGlu
ZGV4LCBob3dldmVyLCB3aGVuIG15IGNvZGUgcnVuIGEgY291cGxlIG9mIHRpbWVzLCBJIGZvdW5k
IHRoZSBpbmRleCBmaWxlCj4gd2FzIGxvY2tlZCwgSSBjYW4gbm90IGRlbGV0ZSB0aGUgb2xkIGlu
ZGV4IGZpbGVzLgo+Cj4KPiBUaGUgY29kZSBsb29rcyBsaWtlOgo+Cj4gcHVibGljIGNsYXNzIFNl
YXJjaFRlc3QKPiB7Cj4KPiDCoCDCoHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBNQVhfUkVTVUxU
ID0gMTAwMDA7Cj4KPiDCoCDCoHByaXZhdGUgU3RyaW5nIGluZGV4UGF0aDEgPSAiRDpcXGluZGV4
XFxpbmRleDEiOwo+IMKgIMKgcHJpdmF0ZSBTdHJpbmcgaW5kZXhQYXRoMiA9ICJEOlxcaW5kZXhc
XGluZGV4MiI7Cj4KPiDCoCDCoHByaXZhdGUgU3RyaW5nIGluZGV4UGF0aCA9IGluZGV4UGF0aDE7
Cj4KPiDCoCDCoHByaXZhdGUgQW5hbHl6ZXIgYW5hbHl6ZXIgPSBuZXcgU3RhbmRhcmRBbmFseXpl
cihWZXJzaW9uLkxVQ0VORV8zMCk7Cj4KPiDCoCDCoHByaXZhdGUgRGlyZWN0b3J5IGRpciA9IG51
bGw7Cj4KPiDCoCDCoHByaXZhdGUgSW5kZXhTZWFyY2hlciBzZWFyY2hlcjsKPgo+IMKgIMKgcHVi
bGljIHZvaWQgc2VhcmNoKCkKPiDCoCDCoHsKPiDCoCDCoCDCoCDCoHdoaWxlKHRydWUpCj4gwqAg
wqAgwqAgwqB7Cj4gwqAgwqAgwqAgwqAgwqAgwqB0cnkKPiDCoCDCoCDCoCDCoCDCoCDCoHsKPiDC
oCDCoCDCoCDCoCDCoCDCoCDCoCDCoFN0cmluZyBrZXl3b3JkID0gInRlc3QiOwo+IMKgIMKgIMKg
IMKgIMKgIMKgIMKgIMKgU3RyaW5nIGZpZWxkTmFtZSA9ICJzZWFyY2hmaWVsZCI7Cj4KPiDCoCDC
oCDCoCDCoCDCoCDCoCDCoCDCoGlmKGRpciA9PSBudWxsKQo+IMKgIMKgIMKgIMKgIMKgIMKgIMKg
IMKgewo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgZGlyID0gRlNEaXJlY3Rvcnkub3Bl
bihuZXcgRmlsZShpbmRleFBhdGgpKTsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoH0KPiDCoCDC
oCDCoCDCoCDCoCDCoCDCoCDCoHNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyKTsKPgo+
IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgUXVlcnlQYXJzZXIgcXVlcnlQYXJzZSA9IG5ldyBRdWVy
eVBhcnNlcihWZXJzaW9uLkxVQ0VORV8zMCwKPiBmaWVsZE5hbWUsIGFuYWx5emVyKTsKPiDCoCDC
oCDCoCDCoCDCoCDCoCDCoCDCoFF1ZXJ5IHF1ZXJ5ID0gcXVlcnlQYXJzZS5wYXJzZShrZXl3b3Jk
KTsKPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgVG9wRG9jcyBoaXRzID0gc2VhcmNoZXIuc2Vh
cmNoKHF1ZXJ5LCBNQVhfUkVTVUxUKTsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoGludCBzaXpl
ID0gNTsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoGlmKGhpdHMuc2NvcmVEb2NzLmxlbmd0aCA8
IHNpemUpCj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB7Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqAgwqBzaXplID0gaGl0cy5zY29yZURvY3MubGVuZ3RoOwo+IMKgIMKgIMKgIMKgIMKgIMKg
IMKgIMKgfQo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXpl
OyBpKyspCj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB7Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqAgwqBEb2N1bWVudCBkb2MgPSBzZWFyY2hlci5kb2MoaGl0cy5zY29yZURvY3NbaV0uZG9j
KTsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoFN0cmluZyB0ZXh0ID0gZG9jLmdldChm
aWVsZE5hbWUpOwo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgU3lzdGVtLm91dC5wcmlu
dGxuKCJmaWVsZENvbnRlbnQgaXM6ICIgKyB0ZXh0KTsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDC
oH0KPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgSW5kZXhTZWFyY2hlciBvbGRTZWFyY2hlciA9
IHNlYXJjaGVyOwo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgZGlyID0gRlNEaXJlY3Rvcnkub3Bl
bihuZXcgRmlsZShnZXRJbmRleFBhdGgoKSkpOwo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgSW5k
ZXhTZWFyY2hlciBuZXdTZWFyY2hlciA9IG5ldyBJbmRleFNlYXJjaGVyKGRpcik7Cj4gwqAgwqAg
wqAgwqAgwqAgwqAgwqAgwqBzZWFyY2hlciA9IG5ld1NlYXJjaGVyOwo+Cj4gwqAgwqAgwqAgwqAg
wqAgwqAgwqAgwqBvbGRTZWFyY2hlci5jbG9zZSgpOwo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
U3lzdGVtLm91dC5wcmludGxuKCJDbG9zZWQgU2VhcmNoZXI6ICIgKwo+IG9sZFNlYXJjaGVyLmdl
dEluZGV4UmVhZGVyKCkuZGlyZWN0b3J5KCkudG9TdHJpbmcoKSk7Cj4KPiDCoCDCoCDCoCDCoCDC
oCDCoCDCoCDCoFN5c3RlbS5vdXQucHJpbnRsbigiaW5wdXQgJ1EnIHRvIHF1aXQgdGVzdGluZy4u
LiIpOwo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgQnVmZmVyZWRSZWFkZXIgYnIgPSBuZXcgQnVm
ZmVyZWRSZWFkZXIobmV3Cj4gSW5wdXRTdHJlYW1SZWFkZXIoU3lzdGVtLmluKSk7Cj4KPiDCoCDC
oCDCoCDCoCDCoCDCoCDCoCDCoGlmKGJyLnJlYWRMaW5lKCkudHJpbSgpLmVxdWFscygiUSIpKQo+
IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgewo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
YnJlYWs7Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB9Cj4gwqAgwqAgwqAgwqAgwqAgwqB9Cj4g
wqAgwqAgwqAgwqAgwqAgwqBjYXRjaCAoQ29ycnVwdEluZGV4RXhjZXB0aW9uIGUpCj4gwqAgwqAg
wqAgwqAgwqAgwqB7Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqBlLnByaW50U3RhY2tUcmFjZSgp
Owo+IMKgIMKgIMKgIMKgIMKgIMKgfQo+IMKgIMKgIMKgIMKgIMKgIMKgY2F0Y2ggKElPRXhjZXB0
aW9uIGUpCj4gwqAgwqAgwqAgwqAgwqAgwqB7Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqBlLnBy
aW50U3RhY2tUcmFjZSgpOwo+IMKgIMKgIMKgIMKgIMKgIMKgfQo+IMKgIMKgIMKgIMKgIMKgIMKg
Y2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUpCj4gwqAgwqAgwqAgwqAgwqAgwqB7Cj4gwqAgwqAgwqAg
wqAgwqAgwqAgwqAgwqBlLnByaW50U3RhY2tUcmFjZSgpOwo+IMKgIMKgIMKgIMKgIMKgIMKgfQo+
IMKgIMKgIMKgIMKgfQo+IMKgIMKgfQo+Cj4gwqAgwqBwcml2YXRlIFN0cmluZyBnZXRJbmRleFBh
dGgoKQo+IMKgIMKgewo+IMKgIMKgIMKgIMKgaWYoaW5kZXhQYXRoLmVxdWFscyhpbmRleFBhdGgx
KSkKPiDCoCDCoCDCoCDCoHsKPiDCoCDCoCDCoCDCoCDCoCDCoGluZGV4UGF0aCA9IGluZGV4UGF0
aDI7Cj4gwqAgwqAgwqAgwqB9Cj4gwqAgwqAgwqAgwqBlbHNlCj4gwqAgwqAgwqAgwqB7Cj4gwqAg
wqAgwqAgwqAgwqAgwqBpbmRleFBhdGggPSBpbmRleFBhdGgxOwo+IMKgIMKgIMKgIMKgfQo+Cj4g
wqAgwqAgwqAgwqByZXR1cm4gaW5kZXhQYXRoOwo+IMKgIMKgfQo+Cj4gwqAgwqBwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKQo+IMKgIMKgewo+IMKgIMKgIMKgIMKgU2VhcmNo
VGVzdCBzZWFyY2hUZXN0ID0gbmV3IFNlYXJjaFRlc3QoKTsKPiDCoCDCoCDCoCDCoHNlYXJjaFRl
c3Quc2VhcmNoKCk7Cj4gwqAgwqB9Cj4KPiB9Cj4KPiBDYW4gYW55Ym9keSB0YWtlIGEgbG9vayBh
dCB0aGUgYWJvdmUgY29kZSBzbmlwcGV0Pwo+Cj4gSSB3YW50IHRvIHNlYXJjaCBvbiB0aGUgZGlm
ZmVyZW50IGluZGV4IGZpbGUgZXZlcnkgdGltZSBzbyBJIGNyZWF0ZWQgdHdvCj4gZGlmZmVyZW50
IGZvbGRlcnMgYW5kIHN3aXRjaCB0aGVtIHRpbWUgdG8gdGltZS4gVGhlIGluZGV4IGZpbGVzIGlu
IHRoZQo+IGluZGV4MS9pbmRleDIgbWF5YmUgcmVwbGFjZWQgYmVmb3JlIHRoZSBzZWFyY2ggcmVx
dWVzdCBjb21lcy4KPgo+IFRoZSBwcm9ibGVtIEkgZm91bmQgaXMgYWZ0ZXIgSSByYW4gdGhlIGFi
b3ZlIGNvZGUgMiBvciBtb3JlIGxvb3BzLCBJIGNhbiBub3QKPiBtb2RpZnkvZGVsZXRlIHRoZSBj
ZnMvY2Z4IGZpbGUgaW4gdGhlIGZpbGUgc3lzdGVtKFdpbmRvd3MgMjAwMyksIGFsdGhvdWdoIEkK
PiBjbG9zZWQgdGhlIHNlYXJjaGVyIGV2ZXJ5IHRpbWUgaW4gdGhlIGNvZGUuIEl0IHNlZW1zIHRo
YXQgdGhlIGluZGV4IGZpbGUgaXMKPiBub3QgcmVsZWFzZWQuCj4KPiBJcyB0aGUgcHJvYmxlbSBj
YXVzZWQgYnkgdGhlIHNoYXJlZCByZWZlcmVuY2Ugb2Ygc2VhcmNoZXI/IG9yIHNvbWUgc2hhcmVk
Cj4gdGhyZWFkIGluIHRoZSBsdWNlbmU/Cj4KPiBUaGFua3MgaW4gYWR2YW5jZSEKPiBHYXJyeQo+
Cg==


From java-user-return-48319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 12 13:55:43 2011
Return-Path: <java-user-return-48319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16156 invoked from network); 12 Jan 2011 13:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jan 2011 13:55:43 -0000
Received: (qmail 43644 invoked by uid 500); 12 Jan 2011 13:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43304 invoked by uid 500); 12 Jan 2011 13:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43296 invoked by uid 99); 12 Jan 2011 13:55:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 13:55:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 13:55:30 +0000
Received: by qwh6 with SMTP id 6so614841qwh.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 05:55:08 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.67.67 with SMTP id q3mr970626qai.171.1294840508566; Wed,
 12 Jan 2011 05:55:08 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Wed, 12 Jan 2011 05:55:08 -0800 (PST)
In-Reply-To: <AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
Date: Wed, 12 Jan 2011 21:55:08 +0800
Message-ID: <AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cba888dcef00499a68c59
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cba888dcef00499a68c59
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Mike, thanks for your feedback.

I verified this in the debug mode, so I just check the folder I closed in
the last loop. Actually, both two folders are locked.

tried with new FSDirectory every loop, no help.

Garry

2011/1/12 Michael McCandless <lucene@mikemccandless.com>

> When you break out of the loop (user enters 'Q') you don't close the
> current searcher.  Could that be it?
>
> Also you are calling FSDir.open each time but should only do it once
> (though this should be "harmless").
>
> Mike
>
> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianpi=
ng.com> wrote:
> > Dear Luceners,
> >
> > I'm using lucene-3.0.2 in our app. There is some testing code for
> switching
> > index, however, when my code run a couple of times, I found the index
> file
> > was locked, I can not delete the old index files.
> >
> >
> > The code looks like:
> >
> > public class SearchTest
> > {
> >
> >    private static final int MAX_RESULT =3D 10000;
> >
> >    private String indexPath1 =3D "D:\\index\\index1";
> >    private String indexPath2 =3D "D:\\index\\index2";
> >
> >    private String indexPath =3D indexPath1;
> >
> >    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30=
);
> >
> >    private Directory dir =3D null;
> >
> >    private IndexSearcher searcher;
> >
> >    public void search()
> >    {
> >        while(true)
> >        {
> >            try
> >            {
> >                String keyword =3D "test";
> >                String fieldName =3D "searchfield";
> >
> >                if(dir =3D=3D null)
> >                {
> >                    dir =3D FSDirectory.open(new File(indexPath));
> >                }
> >                searcher =3D new IndexSearcher(dir);
> >
> >                QueryParser queryParse =3D new
> QueryParser(Version.LUCENE_30,
> > fieldName, analyzer);
> >                Query query =3D queryParse.parse(keyword);
> >
> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
> >                int size =3D 5;
> >                if(hits.scoreDocs.length < size)
> >                {
> >                    size =3D hits.scoreDocs.length;
> >                }
> >                for (int i =3D 0; i < size; i++)
> >                {
> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc)=
;
> >                    String text =3D doc.get(fieldName);
> >                    System.out.println("fieldContent is: " + text);
> >                }
> >
> >                IndexSearcher oldSearcher =3D searcher;
> >                dir =3D FSDirectory.open(new File(getIndexPath()));
> >                IndexSearcher newSearcher =3D new IndexSearcher(dir);
> >                searcher =3D newSearcher;
> >
> >                oldSearcher.close();
> >                System.out.println("Closed Searcher: " +
> > oldSearcher.getIndexReader().directory().toString());
> >
> >                System.out.println("input 'Q' to quit testing...");
> >                BufferedReader br =3D new BufferedReader(new
> > InputStreamReader(System.in));
> >
> >                if(br.readLine().trim().equals("Q"))
> >                {
> >                    break;
> >                }
> >            }
> >            catch (CorruptIndexException e)
> >            {
> >                e.printStackTrace();
> >            }
> >            catch (IOException e)
> >            {
> >                e.printStackTrace();
> >            }
> >            catch (ParseException e)
> >            {
> >                e.printStackTrace();
> >            }
> >        }
> >    }
> >
> >    private String getIndexPath()
> >    {
> >        if(indexPath.equals(indexPath1))
> >        {
> >            indexPath =3D indexPath2;
> >        }
> >        else
> >        {
> >            indexPath =3D indexPath1;
> >        }
> >
> >        return indexPath;
> >    }
> >
> >    public static void main(String[] args)
> >    {
> >        SearchTest searchTest =3D new SearchTest();
> >        searchTest.search();
> >    }
> >
> > }
> >
> > Can anybody take a look at the above code snippet?
> >
> > I want to search on the different index file every time so I created tw=
o
> > different folders and switch them time to time. The index files in the
> > index1/index2 maybe replaced before the search request comes.
> >
> > The problem I found is after I ran the above code 2 or more loops, I ca=
n
> not
> > modify/delete the cfs/cfx file in the file system(Windows 2003), althou=
gh
> I
> > closed the searcher every time in the code. It seems that the index fil=
e
> is
> > not released.
> >
> > Is the problem caused by the shared reference of searcher? or some shar=
ed
> > thread in the lucene?
> >
> > Thanks in advance!
> > Garry
> >
>



--=20
=D5=C5=D6=BE=CC=EF

=B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
=B5=E7=BB=B0=A3=BA52521070 - 1675

--0015175cba888dcef00499a68c59--

From java-user-return-48320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 12 15:53:36 2011
Return-Path: <java-user-return-48320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75858 invoked from network); 12 Jan 2011 15:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jan 2011 15:53:36 -0000
Received: (qmail 68577 invoked by uid 500); 12 Jan 2011 15:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68364 invoked by uid 500); 12 Jan 2011 15:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68356 invoked by uid 99); 12 Jan 2011 15:53:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 15:53:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jan 2011 15:53:24 +0000
Received: by pzk28 with SMTP id 28so136621pzk.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 07:53:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.204.9 with SMTP id b9mr21374wfg.354.1294847582289; Wed, 12
 Jan 2011 07:53:02 -0800 (PST)
Received: by 10.143.30.15 with HTTP; Wed, 12 Jan 2011 07:53:02 -0800 (PST)
In-Reply-To: <AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
Date: Wed, 12 Jan 2011 10:53:02 -0500
Message-ID: <AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm.

When you say "locked" what actually does that mean?  Can you post the excep=
tion?

Also, can you whittle down your example even more?   EG if calling
this method twice causes the problem, make a method that calls it
twice and hits the exception and then start simplifying from there...

Mike

2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> Mike, thanks for your feedback.
>
> I verified this in the debug mode, so I just check the folder I closed in
> the last loop. Actually, both two folders are locked.
>
> tried with new FSDirectory every loop, no help.
>
> Garry
>
> 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
>
>> When you break out of the loop (user enters 'Q') you don't close the
>> current searcher.  Could that be it?
>>
>> Also you are calling FSDir.open each time but should only do it once
>> (though this should be "harmless").
>>
>> Mike
>>
>> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianp=
ing.com> wrote:
>> > Dear Luceners,
>> >
>> > I'm using lucene-3.0.2 in our app. There is some testing code for
>> switching
>> > index, however, when my code run a couple of times, I found the index
>> file
>> > was locked, I can not delete the old index files.
>> >
>> >
>> > The code looks like:
>> >
>> > public class SearchTest
>> > {
>> >
>> >    private static final int MAX_RESULT =3D 10000;
>> >
>> >    private String indexPath1 =3D "D:\\index\\index1";
>> >    private String indexPath2 =3D "D:\\index\\index2";
>> >
>> >    private String indexPath =3D indexPath1;
>> >
>> >    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_3=
0);
>> >
>> >    private Directory dir =3D null;
>> >
>> >    private IndexSearcher searcher;
>> >
>> >    public void search()
>> >    {
>> >        while(true)
>> >        {
>> >            try
>> >            {
>> >                String keyword =3D "test";
>> >                String fieldName =3D "searchfield";
>> >
>> >                if(dir =3D=3D null)
>> >                {
>> >                    dir =3D FSDirectory.open(new File(indexPath));
>> >                }
>> >                searcher =3D new IndexSearcher(dir);
>> >
>> >                QueryParser queryParse =3D new
>> QueryParser(Version.LUCENE_30,
>> > fieldName, analyzer);
>> >                Query query =3D queryParse.parse(keyword);
>> >
>> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
>> >                int size =3D 5;
>> >                if(hits.scoreDocs.length < size)
>> >                {
>> >                    size =3D hits.scoreDocs.length;
>> >                }
>> >                for (int i =3D 0; i < size; i++)
>> >                {
>> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc=
);
>> >                    String text =3D doc.get(fieldName);
>> >                    System.out.println("fieldContent is: " + text);
>> >                }
>> >
>> >                IndexSearcher oldSearcher =3D searcher;
>> >                dir =3D FSDirectory.open(new File(getIndexPath()));
>> >                IndexSearcher newSearcher =3D new IndexSearcher(dir);
>> >                searcher =3D newSearcher;
>> >
>> >                oldSearcher.close();
>> >                System.out.println("Closed Searcher: " +
>> > oldSearcher.getIndexReader().directory().toString());
>> >
>> >                System.out.println("input 'Q' to quit testing...");
>> >                BufferedReader br =3D new BufferedReader(new
>> > InputStreamReader(System.in));
>> >
>> >                if(br.readLine().trim().equals("Q"))
>> >                {
>> >                    break;
>> >                }
>> >            }
>> >            catch (CorruptIndexException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >            catch (IOException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >            catch (ParseException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >        }
>> >    }
>> >
>> >    private String getIndexPath()
>> >    {
>> >        if(indexPath.equals(indexPath1))
>> >        {
>> >            indexPath =3D indexPath2;
>> >        }
>> >        else
>> >        {
>> >            indexPath =3D indexPath1;
>> >        }
>> >
>> >        return indexPath;
>> >    }
>> >
>> >    public static void main(String[] args)
>> >    {
>> >        SearchTest searchTest =3D new SearchTest();
>> >        searchTest.search();
>> >    }
>> >
>> > }
>> >
>> > Can anybody take a look at the above code snippet?
>> >
>> > I want to search on the different index file every time so I created t=
wo
>> > different folders and switch them time to time. The index files in the
>> > index1/index2 maybe replaced before the search request comes.
>> >
>> > The problem I found is after I ran the above code 2 or more loops, I c=
an
>> not
>> > modify/delete the cfs/cfx file in the file system(Windows 2003), altho=
ugh
>> I
>> > closed the searcher every time in the code. It seems that the index fi=
le
>> is
>> > not released.
>> >
>> > Is the problem caused by the shared reference of searcher? or some sha=
red
>> > thread in the lucene?
>> >
>> > Thanks in advance!
>> > Garry
>> >
>>
>
>
>
> --
> =D5=C5=D6=BE=CC=EF
>
> =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> =B5=E7=BB=B0=A3=BA52521070 - 1675
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 02:30:15 2011
Return-Path: <java-user-return-48321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92059 invoked from network); 13 Jan 2011 02:30:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 02:30:14 -0000
Received: (qmail 34301 invoked by uid 500); 13 Jan 2011 02:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34225 invoked by uid 500); 13 Jan 2011 02:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34216 invoked by uid 99); 13 Jan 2011 02:30:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 02:30:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 02:30:03 +0000
Received: by qwh6 with SMTP id 6so1298428qwh.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 18:29:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.67.67 with SMTP id q3mr1604978qai.171.1294885780850; Wed,
 12 Jan 2011 18:29:40 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Wed, 12 Jan 2011 18:29:40 -0800 (PST)
In-Reply-To: <AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
	<AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
Date: Thu, 13 Jan 2011 10:29:40 +0800
Message-ID: <AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cba88fe08b00499b1160e
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cba88fe08b00499b1160e
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi Mike,

Sorry to make you confused. "lock" means the file handle is held by some
other progress, the program can not delete it. There is no exception, I can
see file.delete() method returns false. If I delete the cfs file in the OS
manually, the warning is "File was using by another person or program"

To simplify my question, I made some more code for testing. you can run it
for reproducing, after two loops, you will see the message e.g. "Can not
delete file: D:\index\index2\_0.cfs"


Thank you very much


public class SearchTest
{

    private static final int MAX_RESULT =3D 10000;

    private String indexPath1 =3D "D:\\index\\index1";

    private String indexPath2 =3D "D:\\index\\index2";

    private String backupIndexpath =3D "D:\\index\\index3";

    private String indexPath =3D indexPath1;

    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);

    private IndexSearcher searcher;

    public void search()
    {
        while (true)
        {
            try
            {
                String keyword =3D "test";
                String fieldName =3D "searchfield";

                Directory dir =3D FSDirectory.open(new File(indexPath));

                searcher =3D new IndexSearcher(dir);

                QueryParser queryParse =3D new QueryParser(Version.LUCENE_3=
0,
fieldName, analyzer);
                Query query =3D queryParse.parse(keyword);

                TopDocs hits =3D searcher.search(query, MAX_RESULT);
                int size =3D 5;
                if (hits.scoreDocs.length < size)
                {
                    size =3D hits.scoreDocs.length;
                }
                for (int i =3D 0; i < size; i++)
                {
                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc);
                    String text =3D doc.get(fieldName);
                    System.out.println("fieldContent is: " + text);
                }

                IndexSearcher oldSearcher =3D searcher;

                File newFile =3D new File(getIndexPath());
                for (File file : newFile.listFiles())
                {
                    if (!file.delete())
                    {
                        System.out.println("Can not delete file: " +
file.getAbsolutePath());
                    }
                }

                // Copy index File from another folder to this folder
                copyDir(new File(backupIndexpath), newFile);

                Directory newDir =3D FSDirectory.open(newFile);
                IndexSearcher newSearcher =3D new IndexSearcher(newDir);
                searcher =3D newSearcher;

                oldSearcher.close();

                System.out.println("Closed Searcher: " +
oldSearcher.getIndexReader().directory().toString());

                System.out.println("input 'Q' to quit testing...");
                BufferedReader br =3D new BufferedReader(new
InputStreamReader(System.in));

                if (br.readLine().trim().equals("Q"))
                {
                    break;
                }
            }
            catch (CorruptIndexException e)
            {
                e.printStackTrace();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            catch (ParseException e)
            {
                e.printStackTrace();
            }
        }
    }

    private String getIndexPath()
    {
        if (indexPath.equals(indexPath1))
        {
            indexPath =3D indexPath2;
        }
        else
        {
            indexPath =3D indexPath1;
        }

        return indexPath;
    }

    public static void copyDir(File sourceLocation, File targetLocation)
throws IOException
    {
        String[] children =3D sourceLocation.list();
        for (int i =3D 0; i < children.length; i++)
        {
            InputStream in =3D null;
            OutputStream out =3D null;
            try
            {
                in =3D new FileInputStream(new File(sourceLocation,
children[i]));
                out =3D new FileOutputStream(new File(targetLocation,
children[i]));

                byte[] buf =3D new byte[1024];
                int len;
                while ((len =3D in.read(buf)) > 0)
                {
                    out.write(buf, 0, len);
                }
            }
            catch (FileNotFoundException e)
            {
                e.printStackTrace();
            }
            catch (IOException ioe)
            {
                ioe.printStackTrace();
            }
            finally
            {
                try
                {
                    if (in !=3D null)
                    {
                        in.close();
                    }
                    if (out !=3D null)
                    {
                        out.close();
                    }
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void main(String[] args)
    {
        SearchTest searchTest =3D new SearchTest();
        searchTest.search();
    }

}

=D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McCandless =
<lucene@mikemccandless.com>=D0=B4=B5=C0=A3=BA

> Hmmm.
>
> When you say "locked" what actually does that mean?  Can you post the
> exception?
>
> Also, can you whittle down your example even more?   EG if calling
> this method twice causes the problem, make a method that calls it
> twice and hits the exception and then start simplifying from there...
>
> Mike
>
> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> > Mike, thanks for your feedback.
> >
> > I verified this in the debug mode, so I just check the folder I closed =
in
> > the last loop. Actually, both two folders are locked.
> >
> > tried with new FSDirectory every loop, no help.
> >
> > Garry
> >
> > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
> >
> >> When you break out of the loop (user enters 'Q') you don't close the
> >> current searcher.  Could that be it?
> >>
> >> Also you are calling FSDir.open each time but should only do it once
> >> (though this should be "harmless").
> >>
> >> Mike
> >>
> >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhang@dia=
nping.com>
> wrote:
> >> > Dear Luceners,
> >> >
> >> > I'm using lucene-3.0.2 in our app. There is some testing code for
> >> switching
> >> > index, however, when my code run a couple of times, I found the inde=
x
> >> file
> >> > was locked, I can not delete the old index files.
> >> >
> >> >
> >> > The code looks like:
> >> >
> >> > public class SearchTest
> >> > {
> >> >
> >> >    private static final int MAX_RESULT =3D 10000;
> >> >
> >> >    private String indexPath1 =3D "D:\\index\\index1";
> >> >    private String indexPath2 =3D "D:\\index\\index2";
> >> >
> >> >    private String indexPath =3D indexPath1;
> >> >
> >> >    private Analyzer analyzer =3D new
> StandardAnalyzer(Version.LUCENE_30);
> >> >
> >> >    private Directory dir =3D null;
> >> >
> >> >    private IndexSearcher searcher;
> >> >
> >> >    public void search()
> >> >    {
> >> >        while(true)
> >> >        {
> >> >            try
> >> >            {
> >> >                String keyword =3D "test";
> >> >                String fieldName =3D "searchfield";
> >> >
> >> >                if(dir =3D=3D null)
> >> >                {
> >> >                    dir =3D FSDirectory.open(new File(indexPath));
> >> >                }
> >> >                searcher =3D new IndexSearcher(dir);
> >> >
> >> >                QueryParser queryParse =3D new
> >> QueryParser(Version.LUCENE_30,
> >> > fieldName, analyzer);
> >> >                Query query =3D queryParse.parse(keyword);
> >> >
> >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
> >> >                int size =3D 5;
> >> >                if(hits.scoreDocs.length < size)
> >> >                {
> >> >                    size =3D hits.scoreDocs.length;
> >> >                }
> >> >                for (int i =3D 0; i < size; i++)
> >> >                {
> >> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].d=
oc);
> >> >                    String text =3D doc.get(fieldName);
> >> >                    System.out.println("fieldContent is: " + text);
> >> >                }
> >> >
> >> >                IndexSearcher oldSearcher =3D searcher;
> >> >                dir =3D FSDirectory.open(new File(getIndexPath()));
> >> >                IndexSearcher newSearcher =3D new IndexSearcher(dir);
> >> >                searcher =3D newSearcher;
> >> >
> >> >                oldSearcher.close();
> >> >                System.out.println("Closed Searcher: " +
> >> > oldSearcher.getIndexReader().directory().toString());
> >> >
> >> >                System.out.println("input 'Q' to quit testing...");
> >> >                BufferedReader br =3D new BufferedReader(new
> >> > InputStreamReader(System.in));
> >> >
> >> >                if(br.readLine().trim().equals("Q"))
> >> >                {
> >> >                    break;
> >> >                }
> >> >            }
> >> >            catch (CorruptIndexException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >            catch (IOException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >            catch (ParseException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >        }
> >> >    }
> >> >
> >> >    private String getIndexPath()
> >> >    {
> >> >        if(indexPath.equals(indexPath1))
> >> >        {
> >> >            indexPath =3D indexPath2;
> >> >        }
> >> >        else
> >> >        {
> >> >            indexPath =3D indexPath1;
> >> >        }
> >> >
> >> >        return indexPath;
> >> >    }
> >> >
> >> >    public static void main(String[] args)
> >> >    {
> >> >        SearchTest searchTest =3D new SearchTest();
> >> >        searchTest.search();
> >> >    }
> >> >
> >> > }
> >> >
> >> > Can anybody take a look at the above code snippet?
> >> >
> >> > I want to search on the different index file every time so I created
> two
> >> > different folders and switch them time to time. The index files in t=
he
> >> > index1/index2 maybe replaced before the search request comes.
> >> >
> >> > The problem I found is after I ran the above code 2 or more loops, I
> can
> >> not
> >> > modify/delete the cfs/cfx file in the file system(Windows 2003),
> although
> >> I
> >> > closed the searcher every time in the code. It seems that the index
> file
> >> is
> >> > not released.
> >> >
> >> > Is the problem caused by the shared reference of searcher? or some
> shared
> >> > thread in the lucene?
> >> >
> >> > Thanks in advance!
> >> > Garry
> >> >
> >>
> >
> >
> >
> > --
> > =D5=C5=D6=BE=CC=EF
> >
> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
=D5=C5=D6=BE=CC=EF

=B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
=B5=E7=BB=B0=A3=BA52521070 - 1675

--0015175cba88fe08b00499b1160e--

From java-user-return-48322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 02:45:47 2011
Return-Path: <java-user-return-48322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94832 invoked from network); 13 Jan 2011 02:45:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 02:45:47 -0000
Received: (qmail 49992 invoked by uid 500); 13 Jan 2011 02:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49778 invoked by uid 500); 13 Jan 2011 02:45:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49770 invoked by uid 99); 13 Jan 2011 02:45:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 02:45:43 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.201] (HELO na3sys009aog109.obsmtp.com) (74.125.149.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jan 2011 02:45:38 +0000
Received: from source ([209.85.161.42]) by na3sys009aob109.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTS5nO+v8ka4BLuaPEPhkx1JPb+C2B38h@postini.com; Wed, 12 Jan 2011 18:45:17 PST
Received: by mail-fx0-f42.google.com with SMTP id 11so1547753fxm.15
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 18:45:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.79.66 with SMTP id o2mr1755743fak.80.1294886715444; Wed,
 12 Jan 2011 18:45:15 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Wed, 12 Jan 2011 18:45:15 -0800 (PST)
In-Reply-To: <AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
	<AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
	<AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
Date: Wed, 12 Jan 2011 18:45:15 -0800
Message-ID: <AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba10a783b2cd920499b14e37

--90e6ba10a783b2cd920499b14e37
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi Garry,

I am guessing the directory needs to be closed before opening a new one.

dir.close();
dir =3D FSDirectory.open(new File(getIndexPath()));

why not to open two IndexSearcher objects in an array of two instead of
swapping them back and forth?
it would be a lot easier.

yuhan

2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>

> Hi Mike,
>
> Sorry to make you confused. "lock" means the file handle is held by some
> other progress, the program can not delete it. There is no exception, I c=
an
> see file.delete() method returns false. If I delete the cfs file in the O=
S
> manually, the warning is "File was using by another person or program"
>
> To simplify my question, I made some more code for testing. you can run i=
t
> for reproducing, after two loops, you will see the message e.g. "Can not
> delete file: D:\index\index2\_0.cfs"
>
>
> Thank you very much
>
>
> public class SearchTest
> {
>
>    private static final int MAX_RESULT =3D 10000;
>
>    private String indexPath1 =3D "D:\\index\\index1";
>
>    private String indexPath2 =3D "D:\\index\\index2";
>
>     private String backupIndexpath =3D "D:\\index\\index3";
>
>    private String indexPath =3D indexPath1;
>
>    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
>
>     private IndexSearcher searcher;
>
>    public void search()
>    {
>        while (true)
>        {
>            try
>            {
>                String keyword =3D "test";
>                String fieldName =3D "searchfield";
>
>                 Directory dir =3D FSDirectory.open(new File(indexPath));
>
>                searcher =3D new IndexSearcher(dir);
>
>                QueryParser queryParse =3D new QueryParser(Version.LUCENE_=
30,
> fieldName, analyzer);
>                Query query =3D queryParse.parse(keyword);
>
>                TopDocs hits =3D searcher.search(query, MAX_RESULT);
>                int size =3D 5;
>                if (hits.scoreDocs.length < size)
>                {
>                    size =3D hits.scoreDocs.length;
>                }
>                for (int i =3D 0; i < size; i++)
>                {
>                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc);
>                    String text =3D doc.get(fieldName);
>                    System.out.println("fieldContent is: " + text);
>                }
>
>                IndexSearcher oldSearcher =3D searcher;
>
>                 File newFile =3D new File(getIndexPath());
>                for (File file : newFile.listFiles())
>                {
>                    if (!file.delete())
>                    {
>                        System.out.println("Can not delete file: " +
> file.getAbsolutePath());
>                    }
>                }
>
>                // Copy index File from another folder to this folder
>                copyDir(new File(backupIndexpath), newFile);
>
>                Directory newDir =3D FSDirectory.open(newFile);
>                IndexSearcher newSearcher =3D new IndexSearcher(newDir);
>                 searcher =3D newSearcher;
>
>                oldSearcher.close();
>
>                System.out.println("Closed Searcher: " +
> oldSearcher.getIndexReader().directory().toString());
>
>                System.out.println("input 'Q' to quit testing...");
>                BufferedReader br =3D new BufferedReader(new
> InputStreamReader(System.in));
>
>                if (br.readLine().trim().equals("Q"))
>                {
>                    break;
>                }
>            }
>            catch (CorruptIndexException e)
>            {
>                e.printStackTrace();
>            }
>            catch (IOException e)
>            {
>                e.printStackTrace();
>            }
>            catch (ParseException e)
>            {
>                e.printStackTrace();
>            }
>        }
>    }
>
>    private String getIndexPath()
>    {
>        if (indexPath.equals(indexPath1))
>        {
>            indexPath =3D indexPath2;
>        }
>        else
>        {
>            indexPath =3D indexPath1;
>        }
>
>        return indexPath;
>    }
>
>     public static void copyDir(File sourceLocation, File targetLocation)
> throws IOException
>    {
>        String[] children =3D sourceLocation.list();
>        for (int i =3D 0; i < children.length; i++)
>        {
>            InputStream in =3D null;
>            OutputStream out =3D null;
>            try
>            {
>                in =3D new FileInputStream(new File(sourceLocation,
> children[i]));
>                out =3D new FileOutputStream(new File(targetLocation,
> children[i]));
>
>                byte[] buf =3D new byte[1024];
>                int len;
>                while ((len =3D in.read(buf)) > 0)
>                {
>                    out.write(buf, 0, len);
>                }
>            }
>            catch (FileNotFoundException e)
>            {
>                e.printStackTrace();
>            }
>            catch (IOException ioe)
>            {
>                ioe.printStackTrace();
>            }
>            finally
>            {
>                try
>                {
>                    if (in !=3D null)
>                    {
>                        in.close();
>                    }
>                    if (out !=3D null)
>                    {
>                        out.close();
>                     }
>                }
>                catch (IOException e)
>                {
>                    e.printStackTrace();
>                }
>            }
>        }
>    }
>
>     public static void main(String[] args)
>    {
>        SearchTest searchTest =3D new SearchTest();
>        searchTest.search();
>    }
>
> }
>
> =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McCandles=
s <lucene@mikemccandless.com>=D0=B4=B5=C0=A3=BA
>
> > Hmmm.
> >
> > When you say "locked" what actually does that mean?  Can you post the
> > exception?
> >
> > Also, can you whittle down your example even more?   EG if calling
> > this method twice causes the problem, make a method that calls it
> > twice and hits the exception and then start simplifying from there...
> >
> > Mike
> >
> > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> > > Mike, thanks for your feedback.
> > >
> > > I verified this in the debug mode, so I just check the folder I close=
d
> in
> > > the last loop. Actually, both two folders are locked.
> > >
> > > tried with new FSDirectory every loop, no help.
> > >
> > > Garry
> > >
> > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
> > >
> > >> When you break out of the loop (user enters 'Q') you don't close the
> > >> current searcher.  Could that be it?
> > >>
> > >> Also you are calling FSDir.open each time but should only do it once
> > >> (though this should be "harmless").
> > >>
> > >> Mike
> > >>
> > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhang@d=
ianping.com>
> > wrote:
> > >> > Dear Luceners,
> > >> >
> > >> > I'm using lucene-3.0.2 in our app. There is some testing code for
> > >> switching
> > >> > index, however, when my code run a couple of times, I found the
> index
> > >> file
> > >> > was locked, I can not delete the old index files.
> > >> >
> > >> >
> > >> > The code looks like:
> > >> >
> > >> > public class SearchTest
> > >> > {
> > >> >
> > >> >    private static final int MAX_RESULT =3D 10000;
> > >> >
> > >> >    private String indexPath1 =3D "D:\\index\\index1";
> > >> >    private String indexPath2 =3D "D:\\index\\index2";
> > >> >
> > >> >    private String indexPath =3D indexPath1;
> > >> >
> > >> >    private Analyzer analyzer =3D new
> > StandardAnalyzer(Version.LUCENE_30);
> > >> >
> > >> >    private Directory dir =3D null;
> > >> >
> > >> >    private IndexSearcher searcher;
> > >> >
> > >> >    public void search()
> > >> >    {
> > >> >        while(true)
> > >> >        {
> > >> >            try
> > >> >            {
> > >> >                String keyword =3D "test";
> > >> >                String fieldName =3D "searchfield";
> > >> >
> > >> >                if(dir =3D=3D null)
> > >> >                {
> > >> >                    dir =3D FSDirectory.open(new File(indexPath));
> > >> >                }
> > >> >                searcher =3D new IndexSearcher(dir);
> > >> >
> > >> >                QueryParser queryParse =3D new
> > >> QueryParser(Version.LUCENE_30,
> > >> > fieldName, analyzer);
> > >> >                Query query =3D queryParse.parse(keyword);
> > >> >
> > >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT)=
;
> > >> >                int size =3D 5;
> > >> >                if(hits.scoreDocs.length < size)
> > >> >                {
> > >> >                    size =3D hits.scoreDocs.length;
> > >> >                }
> > >> >                for (int i =3D 0; i < size; i++)
> > >> >                {
> > >> >                    Document doc =3D
> searcher.doc(hits.scoreDocs[i].doc);
> > >> >                    String text =3D doc.get(fieldName);
> > >> >                    System.out.println("fieldContent is: " + text);
> > >> >                }
> > >> >
> > >> >                IndexSearcher oldSearcher =3D searcher;
> > >> >                dir =3D FSDirectory.open(new File(getIndexPath()));
> > >> >                IndexSearcher newSearcher =3D new IndexSearcher(dir=
);
> > >> >                searcher =3D newSearcher;
> > >> >
> > >> >                oldSearcher.close();
> > >> >                System.out.println("Closed Searcher: " +
> > >> > oldSearcher.getIndexReader().directory().toString());
> > >> >
> > >> >                System.out.println("input 'Q' to quit testing...");
> > >> >                BufferedReader br =3D new BufferedReader(new
> > >> > InputStreamReader(System.in));
> > >> >
> > >> >                if(br.readLine().trim().equals("Q"))
> > >> >                {
> > >> >                    break;
> > >> >                }
> > >> >            }
> > >> >            catch (CorruptIndexException e)
> > >> >            {
> > >> >                e.printStackTrace();
> > >> >            }
> > >> >            catch (IOException e)
> > >> >            {
> > >> >                e.printStackTrace();
> > >> >            }
> > >> >            catch (ParseException e)
> > >> >            {
> > >> >                e.printStackTrace();
> > >> >            }
> > >> >        }
> > >> >    }
> > >> >
> > >> >    private String getIndexPath()
> > >> >    {
> > >> >        if(indexPath.equals(indexPath1))
> > >> >        {
> > >> >            indexPath =3D indexPath2;
> > >> >        }
> > >> >        else
> > >> >        {
> > >> >            indexPath =3D indexPath1;
> > >> >        }
> > >> >
> > >> >        return indexPath;
> > >> >    }
> > >> >
> > >> >    public static void main(String[] args)
> > >> >    {
> > >> >        SearchTest searchTest =3D new SearchTest();
> > >> >        searchTest.search();
> > >> >    }
> > >> >
> > >> > }
> > >> >
> > >> > Can anybody take a look at the above code snippet?
> > >> >
> > >> > I want to search on the different index file every time so I creat=
ed
> > two
> > >> > different folders and switch them time to time. The index files in
> the
> > >> > index1/index2 maybe replaced before the search request comes.
> > >> >
> > >> > The problem I found is after I ran the above code 2 or more loops,=
 I
> > can
> > >> not
> > >> > modify/delete the cfs/cfx file in the file system(Windows 2003),
> > although
> > >> I
> > >> > closed the searcher every time in the code. It seems that the inde=
x
> > file
> > >> is
> > >> > not released.
> > >> >
> > >> > Is the problem caused by the shared reference of searcher? or some
> > shared
> > >> > thread in the lucene?
> > >> >
> > >> > Thanks in advance!
> > >> > Garry
> > >> >
> > >>
> > >
> > >
> > >
> > > --
> > > =D5=C5=D6=BE=CC=EF
> > >
> > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> > > =B5=E7=BB=B0=A3=BA52521070 - 1675
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> =D5=C5=D6=BE=CC=EF
>
> =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> =B5=E7=BB=B0=A3=BA52521070 - 1675
>

--90e6ba10a783b2cd920499b14e37--

From java-user-return-48323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 03:38:16 2011
Return-Path: <java-user-return-48323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16103 invoked from network); 13 Jan 2011 03:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 03:38:15 -0000
Received: (qmail 80129 invoked by uid 500); 13 Jan 2011 03:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79637 invoked by uid 500); 13 Jan 2011 03:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79620 invoked by uid 99); 13 Jan 2011 03:38:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 03:38:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 03:38:01 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=UTF-8; format=flowed
Received: from [192.168.1.4] ([24.202.76.57]) by vl-mh-mrz21.ip.videotron.ca
 (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec 16 2008; 32bit))
 with ESMTP id <0LEX00KYNZE64OC0@vl-mh-mrz21.ip.videotron.ca> for
 java-user@lucene.apache.org; Wed, 12 Jan 2011 22:37:18 -0500 (EST)
Message-id: <4D2E73A3.2020408@member.fsf.org>
Date: Wed, 12 Jan 2011 22:38:11 -0500
From: Benoit Mercier <benoit.mercier@member.fsf.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr-CA; rv:1.9.2.13) Gecko/20101208
 Thunderbird/3.1.7
To: java-user@lucene.apache.org
Subject: "or" as a search term

Hi,

I am happily using Lucene for several years to offer French lexical 
analysis tools to university researchers.   Today, one of them decided 
to analyze the use of the French word "or" (meaning "gold" in French) in 
one of my corpus powered by Lucene...  And, as you probably already 
guessed, no results...

I tried not using the default QueryParser implementation and building 
programmatically a simple BooleanQuery with the "or" term (surrounded or 
not by double quotes) : no results.  I also played a lot with Luke to be 
sure that my code is not responsible for this behavior.  By the way, my 
corpus contains a lot of "or" occurrences and everything else is working 
perfectly well for many years.

I first thought that modifying the QueryParser JavaCC lexical grammar 
would help (desactivating the OR operator and just keep || ), but the 
problem seems wider since even without using the QueryParser I am unable 
to find the word "or" in my indexes...

Do you have any clue?

Thank you very much in advance!

Best regards,

Benoit (mercibe)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 04:06:34 2011
Return-Path: <java-user-return-48324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29954 invoked from network); 13 Jan 2011 04:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 04:06:33 -0000
Received: (qmail 93270 invoked by uid 500); 13 Jan 2011 04:06:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92746 invoked by uid 500); 13 Jan 2011 04:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92738 invoked by uid 99); 13 Jan 2011 04:06:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 04:06:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 04:06:21 +0000
Received: by bwz8 with SMTP id 8so1329794bwz.35
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 20:05:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=uj59HhqLsxl4LAIgO2t+m8IlB72wXZ4C8iwdS5PTp1k=;
        b=O61aZl0JwXUsRDo+9dtT71umOUJzJV30EFTxizLAbKzvrZOZS9N0LMtDa34oFVONck
         bJYR73jPpobt7sDO/QLuiApXMMlvfa25lR72aPw7M/FCFD/sNh/KqMjXNyIZDi57iM30
         ijwRUHT9wgmnvmwAfXQ3uoVNk8kOpfbHATvno=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=E7e9PVMJ6SdBjVKpLwzx4nV0OgroiVGe24D4v+g56J3Bpy5urI/9TS2H/G7XpeEQh5
         1LS3b/rOkzI/KkhiB1M7N7IC5ZnKdjh2oJfNrO2MaSbSwpP3qiuqXpxuwpY4vAiyCtNb
         QUeFrgfQbrFjq1alv0mXmlZJ0JFQ8XPtV+St8=
Received: by 10.204.113.9 with SMTP id y9mr1357771bkp.201.1294891559329; Wed,
 12 Jan 2011 20:05:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Wed, 12 Jan 2011 20:05:39 -0800 (PST)
In-Reply-To: <4D2E73A3.2020408@member.fsf.org>
References: <4D2E73A3.2020408@member.fsf.org>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 12 Jan 2011 23:05:39 -0500
Message-ID: <AANLkTikxF5J8kfaS+FvmcKTEZU3rUEu8+g9=zYWQqMLo@mail.gmail.com>
Subject: Re: "or" as a search term
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Jan 12, 2011 at 10:38 PM, Benoit Mercier
<benoit.mercier@member.fsf.org> wrote:
> Hi,
>
> I am happily using Lucene for several years to offer French lexical analy=
sis
> tools to university researchers. =C2=A0 Today, one of them decided to ana=
lyze the
> use of the French word "or" (meaning "gold" in French) in one of my corpu=
s
> powered by Lucene... =C2=A0And, as you probably already guessed, no resul=
ts...
>

What analyzer are you using?

By default, StandardAnalyzer and StopAnalyzer uses a set of english
stopwords. For french, this list is probably not appropriate.
If you look at the javadocs, you can pass in your own set of
stopwords... for lexical analysis maybe this should be an empty set.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 05:20:46 2011
Return-Path: <java-user-return-48325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50601 invoked from network); 13 Jan 2011 05:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 05:20:46 -0000
Received: (qmail 29315 invoked by uid 500); 13 Jan 2011 05:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28936 invoked by uid 500); 13 Jan 2011 05:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28928 invoked by uid 99); 13 Jan 2011 05:20:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:20:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:20:31 +0000
Received: by qyk7 with SMTP id 7so4568900qyk.14
        for <java-user@lucene.apache.org>; Wed, 12 Jan 2011 21:20:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.61.5 with SMTP id r5mr1740759qah.121.1294896007883; Wed,
 12 Jan 2011 21:20:07 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Wed, 12 Jan 2011 21:20:07 -0800 (PST)
In-Reply-To: <AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
	<AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
	<AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
	<AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
Date: Thu, 13 Jan 2011 13:20:07 +0800
Message-ID: <AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb8e4922ae90499b37868
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb8e4922ae90499b37868
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi Yuhan,

dir.close() can not solve the problem.

The reason I have to close the old searcher is my program will replace the
old index, the code posted here is just a scenario to simplify my question.

Thanks,
Garry

=D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang <yzhang=
@onescreen.com>=D0=B4=B5=C0=A3=BA

> Hi Garry,
>
> I am guessing the directory needs to be closed before opening a new one.
>
> dir.close();
> dir =3D FSDirectory.open(new File(getIndexPath()));
>
> why not to open two IndexSearcher objects in an array of two instead of
> swapping them back and forth?
> it would be a lot easier.
>
> yuhan
>
> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
>
> > Hi Mike,
> >
> > Sorry to make you confused. "lock" means the file handle is held by som=
e
> > other progress, the program can not delete it. There is no exception, I
> can
> > see file.delete() method returns false. If I delete the cfs file in the
> OS
> > manually, the warning is "File was using by another person or program"
> >
> > To simplify my question, I made some more code for testing. you can run
> it
> > for reproducing, after two loops, you will see the message e.g. "Can no=
t
> > delete file: D:\index\index2\_0.cfs"
> >
> >
> > Thank you very much
> >
> >
> > public class SearchTest
> > {
> >
> >    private static final int MAX_RESULT =3D 10000;
> >
> >    private String indexPath1 =3D "D:\\index\\index1";
> >
> >    private String indexPath2 =3D "D:\\index\\index2";
> >
> >     private String backupIndexpath =3D "D:\\index\\index3";
> >
> >    private String indexPath =3D indexPath1;
> >
> >    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30=
);
> >
> >     private IndexSearcher searcher;
> >
> >    public void search()
> >    {
> >        while (true)
> >        {
> >            try
> >            {
> >                String keyword =3D "test";
> >                String fieldName =3D "searchfield";
> >
> >                 Directory dir =3D FSDirectory.open(new File(indexPath))=
;
> >
> >                searcher =3D new IndexSearcher(dir);
> >
> >                QueryParser queryParse =3D new
> QueryParser(Version.LUCENE_30,
> > fieldName, analyzer);
> >                Query query =3D queryParse.parse(keyword);
> >
> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
> >                int size =3D 5;
> >                if (hits.scoreDocs.length < size)
> >                {
> >                    size =3D hits.scoreDocs.length;
> >                }
> >                for (int i =3D 0; i < size; i++)
> >                {
> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc)=
;
> >                    String text =3D doc.get(fieldName);
> >                    System.out.println("fieldContent is: " + text);
> >                }
> >
> >                IndexSearcher oldSearcher =3D searcher;
> >
> >                 File newFile =3D new File(getIndexPath());
> >                for (File file : newFile.listFiles())
> >                {
> >                    if (!file.delete())
> >                    {
> >                        System.out.println("Can not delete file: " +
> > file.getAbsolutePath());
> >                    }
> >                }
> >
> >                // Copy index File from another folder to this folder
> >                copyDir(new File(backupIndexpath), newFile);
> >
> >                Directory newDir =3D FSDirectory.open(newFile);
> >                IndexSearcher newSearcher =3D new IndexSearcher(newDir);
> >                 searcher =3D newSearcher;
> >
> >                oldSearcher.close();
> >
> >                System.out.println("Closed Searcher: " +
> > oldSearcher.getIndexReader().directory().toString());
> >
> >                System.out.println("input 'Q' to quit testing...");
> >                BufferedReader br =3D new BufferedReader(new
> > InputStreamReader(System.in));
> >
> >                if (br.readLine().trim().equals("Q"))
> >                {
> >                    break;
> >                }
> >            }
> >            catch (CorruptIndexException e)
> >            {
> >                e.printStackTrace();
> >            }
> >            catch (IOException e)
> >            {
> >                e.printStackTrace();
> >            }
> >            catch (ParseException e)
> >            {
> >                e.printStackTrace();
> >            }
> >        }
> >    }
> >
> >    private String getIndexPath()
> >    {
> >        if (indexPath.equals(indexPath1))
> >        {
> >            indexPath =3D indexPath2;
> >        }
> >        else
> >        {
> >            indexPath =3D indexPath1;
> >        }
> >
> >        return indexPath;
> >    }
> >
> >     public static void copyDir(File sourceLocation, File targetLocation=
)
> > throws IOException
> >    {
> >        String[] children =3D sourceLocation.list();
> >        for (int i =3D 0; i < children.length; i++)
> >        {
> >            InputStream in =3D null;
> >            OutputStream out =3D null;
> >            try
> >            {
> >                in =3D new FileInputStream(new File(sourceLocation,
> > children[i]));
> >                out =3D new FileOutputStream(new File(targetLocation,
> > children[i]));
> >
> >                byte[] buf =3D new byte[1024];
> >                int len;
> >                while ((len =3D in.read(buf)) > 0)
> >                {
> >                    out.write(buf, 0, len);
> >                }
> >            }
> >            catch (FileNotFoundException e)
> >            {
> >                e.printStackTrace();
> >            }
> >            catch (IOException ioe)
> >            {
> >                ioe.printStackTrace();
> >            }
> >            finally
> >            {
> >                try
> >                {
> >                    if (in !=3D null)
> >                    {
> >                        in.close();
> >                    }
> >                    if (out !=3D null)
> >                    {
> >                        out.close();
> >                     }
> >                }
> >                catch (IOException e)
> >                {
> >                    e.printStackTrace();
> >                }
> >            }
> >        }
> >    }
> >
> >     public static void main(String[] args)
> >    {
> >        SearchTest searchTest =3D new SearchTest();
> >        searchTest.search();
> >    }
> >
> > }
> >
> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McCandl=
ess <lucene@mikemccandless.com>=D0=B4=B5=C0=A3=BA
> >
> > > Hmmm.
> > >
> > > When you say "locked" what actually does that mean?  Can you post the
> > > exception?
> > >
> > > Also, can you whittle down your example even more?   EG if calling
> > > this method twice causes the problem, make a method that calls it
> > > twice and hits the exception and then start simplifying from there...
> > >
> > > Mike
> > >
> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> > > > Mike, thanks for your feedback.
> > > >
> > > > I verified this in the debug mode, so I just check the folder I
> closed
> > in
> > > > the last loop. Actually, both two folders are locked.
> > > >
> > > > tried with new FSDirectory every loop, no help.
> > > >
> > > > Garry
> > > >
> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
> > > >
> > > >> When you break out of the loop (user enters 'Q') you don't close t=
he
> > > >> current searcher.  Could that be it?
> > > >>
> > > >> Also you are calling FSDir.open each time but should only do it on=
ce
> > > >> (though this should be "harmless").
> > > >>
> > > >> Mike
> > > >>
> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhang=
@dianping.com>
> > > wrote:
> > > >> > Dear Luceners,
> > > >> >
> > > >> > I'm using lucene-3.0.2 in our app. There is some testing code fo=
r
> > > >> switching
> > > >> > index, however, when my code run a couple of times, I found the
> > index
> > > >> file
> > > >> > was locked, I can not delete the old index files.
> > > >> >
> > > >> >
> > > >> > The code looks like:
> > > >> >
> > > >> > public class SearchTest
> > > >> > {
> > > >> >
> > > >> >    private static final int MAX_RESULT =3D 10000;
> > > >> >
> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
> > > >> >
> > > >> >    private String indexPath =3D indexPath1;
> > > >> >
> > > >> >    private Analyzer analyzer =3D new
> > > StandardAnalyzer(Version.LUCENE_30);
> > > >> >
> > > >> >    private Directory dir =3D null;
> > > >> >
> > > >> >    private IndexSearcher searcher;
> > > >> >
> > > >> >    public void search()
> > > >> >    {
> > > >> >        while(true)
> > > >> >        {
> > > >> >            try
> > > >> >            {
> > > >> >                String keyword =3D "test";
> > > >> >                String fieldName =3D "searchfield";
> > > >> >
> > > >> >                if(dir =3D=3D null)
> > > >> >                {
> > > >> >                    dir =3D FSDirectory.open(new File(indexPath))=
;
> > > >> >                }
> > > >> >                searcher =3D new IndexSearcher(dir);
> > > >> >
> > > >> >                QueryParser queryParse =3D new
> > > >> QueryParser(Version.LUCENE_30,
> > > >> > fieldName, analyzer);
> > > >> >                Query query =3D queryParse.parse(keyword);
> > > >> >
> > > >> >                TopDocs hits =3D searcher.search(query, MAX_RESUL=
T);
> > > >> >                int size =3D 5;
> > > >> >                if(hits.scoreDocs.length < size)
> > > >> >                {
> > > >> >                    size =3D hits.scoreDocs.length;
> > > >> >                }
> > > >> >                for (int i =3D 0; i < size; i++)
> > > >> >                {
> > > >> >                    Document doc =3D
> > searcher.doc(hits.scoreDocs[i].doc);
> > > >> >                    String text =3D doc.get(fieldName);
> > > >> >                    System.out.println("fieldContent is: " + text=
);
> > > >> >                }
> > > >> >
> > > >> >                IndexSearcher oldSearcher =3D searcher;
> > > >> >                dir =3D FSDirectory.open(new File(getIndexPath())=
);
> > > >> >                IndexSearcher newSearcher =3D new IndexSearcher(d=
ir);
> > > >> >                searcher =3D newSearcher;
> > > >> >
> > > >> >                oldSearcher.close();
> > > >> >                System.out.println("Closed Searcher: " +
> > > >> > oldSearcher.getIndexReader().directory().toString());
> > > >> >
> > > >> >                System.out.println("input 'Q' to quit testing..."=
);
> > > >> >                BufferedReader br =3D new BufferedReader(new
> > > >> > InputStreamReader(System.in));
> > > >> >
> > > >> >                if(br.readLine().trim().equals("Q"))
> > > >> >                {
> > > >> >                    break;
> > > >> >                }
> > > >> >            }
> > > >> >            catch (CorruptIndexException e)
> > > >> >            {
> > > >> >                e.printStackTrace();
> > > >> >            }
> > > >> >            catch (IOException e)
> > > >> >            {
> > > >> >                e.printStackTrace();
> > > >> >            }
> > > >> >            catch (ParseException e)
> > > >> >            {
> > > >> >                e.printStackTrace();
> > > >> >            }
> > > >> >        }
> > > >> >    }
> > > >> >
> > > >> >    private String getIndexPath()
> > > >> >    {
> > > >> >        if(indexPath.equals(indexPath1))
> > > >> >        {
> > > >> >            indexPath =3D indexPath2;
> > > >> >        }
> > > >> >        else
> > > >> >        {
> > > >> >            indexPath =3D indexPath1;
> > > >> >        }
> > > >> >
> > > >> >        return indexPath;
> > > >> >    }
> > > >> >
> > > >> >    public static void main(String[] args)
> > > >> >    {
> > > >> >        SearchTest searchTest =3D new SearchTest();
> > > >> >        searchTest.search();
> > > >> >    }
> > > >> >
> > > >> > }
> > > >> >
> > > >> > Can anybody take a look at the above code snippet?
> > > >> >
> > > >> > I want to search on the different index file every time so I
> created
> > > two
> > > >> > different folders and switch them time to time. The index files =
in
> > the
> > > >> > index1/index2 maybe replaced before the search request comes.
> > > >> >
> > > >> > The problem I found is after I ran the above code 2 or more loop=
s,
> I
> > > can
> > > >> not
> > > >> > modify/delete the cfs/cfx file in the file system(Windows 2003),
> > > although
> > > >> I
> > > >> > closed the searcher every time in the code. It seems that the
> index
> > > file
> > > >> is
> > > >> > not released.
> > > >> >
> > > >> > Is the problem caused by the shared reference of searcher? or so=
me
> > > shared
> > > >> > thread in the lucene?
> > > >> >
> > > >> > Thanks in advance!
> > > >> > Garry
> > > >> >
> > > >>
> > > >
> > > >
> > > >
> > > > --
> > > > =D5=C5=D6=BE=CC=EF
> > > >
> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > =D5=C5=D6=BE=CC=EF
> >
> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >
>



--=20
=D5=C5=D6=BE=CC=EF

=B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
=B5=E7=BB=B0=A3=BA52521070 - 1675

--0015175cb8e4922ae90499b37868--

From java-user-return-48326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 05:24:29 2011
Return-Path: <java-user-return-48326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51934 invoked from network); 13 Jan 2011 05:24:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 05:24:29 -0000
Received: (qmail 32570 invoked by uid 500); 13 Jan 2011 05:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32238 invoked by uid 500); 13 Jan 2011 05:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32230 invoked by uid 99); 13 Jan 2011 05:24:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:24:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:24:15 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=UTF-8; format=flowed
Received: from [192.168.1.4] ([24.202.76.57]) by vl-mh-mrz21.ip.videotron.ca
 (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec 16 2008; 32bit))
 with ESMTP id <0LEY002P54AQIR20@vl-mh-mrz21.ip.videotron.ca> for
 java-user@lucene.apache.org; Thu, 13 Jan 2011 00:23:14 -0500 (EST)
Message-id: <4D2E8C78.7070507@member.fsf.org>
Date: Thu, 13 Jan 2011 00:24:08 -0500
From: Benoit Mercier <benoit.mercier@member.fsf.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr-CA; rv:1.9.2.13) Gecko/20101208
 Thunderbird/3.1.7
To: java-user@lucene.apache.org
Subject: Re: "or" as a search term
References: <4D2E73A3.2020408@member.fsf.org>
 <AANLkTikxF5J8kfaS+FvmcKTEZU3rUEu8+g9=zYWQqMLo@mail.gmail.com>
In-reply-to: <AANLkTikxF5J8kfaS+FvmcKTEZU3rUEu8+g9=zYWQqMLo@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for your reply.

I am using my own FrenchAnalyzer for lexical analysis.  It extends 
org.apache.lucene.analysis.Analyzer and my stopwords set is empty.

Benoit

On 2011-01-12 23:05, Robert Muir wrote:
> On Wed, Jan 12, 2011 at 10:38 PM, Benoit Mercier
> <benoit.mercier@member.fsf.org>  wrote:
>> Hi,
>>
>> I am happily using Lucene for several years to offer French lexical analysis
>> tools to university researchers.   Today, one of them decided to analyze the
>> use of the French word "or" (meaning "gold" in French) in one of my corpus
>> powered by Lucene...  And, as you probably already guessed, no results...
>>
> What analyzer are you using?
>
> By default, StandardAnalyzer and StopAnalyzer uses a set of english
> stopwords. For french, this list is probably not appropriate.
> If you look at the javadocs, you can pass in your own set of
> stopwords... for lexical analysis maybe this should be an empty set.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 05:51:40 2011
Return-Path: <java-user-return-48327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74494 invoked from network); 13 Jan 2011 05:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 05:51:39 -0000
Received: (qmail 48198 invoked by uid 500); 13 Jan 2011 05:51:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47878 invoked by uid 500); 13 Jan 2011 05:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47870 invoked by uid 99); 13 Jan 2011 05:51:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:51:33 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FROM_MISSP_EH_MATCH,HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hongyinjie@163.com designates 220.181.13.245 as permitted sender)
Received: from [220.181.13.245] (HELO m13-245.163.com) (220.181.13.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 05:51:26 +0000
Received: from hongyinjie ( [60.191.99.1] ) by ajax-webmail-sdy11 (Coremail)
 ; Thu, 13 Jan 2011 13:51:04 +0800 (GMT+08:00)
Date: Thu, 13 Jan 2011 13:50:59 +0800
From: "hongyinjie"<hongyinjie@163.com>
To: "java-user"<java-user@lucene.apache.org>
Message-ID: <5e470164.3e9eb.12d7ded5e20.Coremail.hongyinjie@163.com>
Subject: Re: "or" as a search term
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="__=_Part_Boundary_001_013858.021567"
X-Mailer: NetEase Flash Mail 2.0.1.71
X-Priority: 3 (Normal)
X-Originating-IP: [60.191.99.1]
X-CM-TRANSID:7MKowKBrDPPIki5N0FEpAA--.21592W
X-CM-SenderInfo: 5krqw55lqmxvi6rwjhhfrp/1tbiwBLF00zBwFRF3AABsF
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==

--__=_Part_Boundary_001_013858.021567
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64

dXNlICJUb2tlblN0cmVhbSIgdG8gcHJpbnQgb3V0IHRoZSBUb2tlbnMgYWZ0ZXIgdXNpbmcgRnJl
bmNoQW5hbHl6ZXI7IHRlc3QgaXQgd29yayB3ZWxsLCBhbmQgdGhlIHJlc3VsdCBpcyBqdXN0IHlv
dSB3YW50Pw0KDQpZb3UgY2FuIHVzZSBhbm90aGVyIHRvb2xzICJMdWtlIiB0byBzZWUgdGhlICJM
dWNlbmUgaW5kZXggRmlsZSIsIGlzIHRoZXJlIGFueSB0b2tlbiBvZiAib3IiKEZyZW5jaCkgPw0K
QW5kIHlvdSBjYW4gcXVlcnkgdXNpbmcgdGhlICJMdWtlIi4uLg0KDQoNCg0KR29vZCBMdWNrDQoN
Cg0KDQoyMDExLTAxLTEzDQoNCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0N
CllpbmppZSBIb25nDQpQaC4gRC4gU3R1ZGVudA0KQ29sbGVnZSBvZiBDb21wdXRlciBTY2llbmNl
LCBaaGVqaWFuZyBVbml2ZXJzaXR5DQogDQpUZWw6ICAgICAgIDg2LTU3MS04Nzk1MjAyNg0KRS1N
YWlsOiBob25neWooYXQpemp1KGRvdCllZHUoZG90KWNuDQpPZmZpY2U6ICBSb29tIDQwMCwgVGVh
Y2hpbmcgQnVpbGRpbmcgIzExLCBZdXF1YW4gQ2FtcHVzLCBaaGVqaWFuZyBVbml2ZXJzaXR5DQoN
Cg0KDQoNCg0KDQpUaGFuayB5b3UgZm9yIHlvdXIgcmVwbHkuIA0KDQpJIGFtIHVzaW5nIG15IG93
biBGcmVuY2hBbmFseXplciBmb3IgbGV4aWNhbCBhbmFseXNpcy4gIEl0IGV4dGVuZHMgIA0Kb3Jn
LmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuQW5hbHl6ZXIgYW5kIG15IHN0b3B3b3JkcyBzZXQgaXMg
ZW1wdHkuIA0KDQpCZW5vaXQgDQoNCk9uIDIwMTEtMDEtMTIgMjM6MDUsIFJvYmVydCBNdWlyIHdy
b3RlOiANCj4gT24gV2VkLCBKYW4gMTIsIDIwMTEgYXQgMTA6MzggUE0sIEJlbm9pdCBNZXJjaWVy
IA0KPiA8YmVub2l0Lm1lcmNpZXJAbWVtYmVyLmZzZi5vcmc+ICB3cm90ZTogDQo+PiBIaSwgDQo+
PiANCj4+IEkgYW0gaGFwcGlseSB1c2luZyBMdWNlbmUgZm9yIHNldmVyYWwgeWVhcnMgdG8gb2Zm
ZXIgRnJlbmNoIGxleGljYWwgYW5hbHlzaXMgDQo+PiB0b29scyB0byB1bml2ZXJzaXR5IHJlc2Vh
cmNoZXJzLiAgIFRvZGF5LCBvbmUgb2YgdGhlbSBkZWNpZGVkIHRvIGFuYWx5emUgdGhlIA0KPj4g
dXNlIG9mIHRoZSBGcmVuY2ggd29yZCAib3IiIChtZWFuaW5nICJnb2xkIiBpbiBGcmVuY2gpIGlu
IG9uZSBvZiBteSBjb3JwdXMgDQo+PiBwb3dlcmVkIGJ5IEx1Y2VuZS4uLiAgQW5kLCBhcyB5b3Ug
cHJvYmFibHkgYWxyZWFkeSBndWVzc2VkLCBubyByZXN1bHRzLi4uIA0KPj4gDQo+IFdoYXQgYW5h
bHl6ZXIgYXJlIHlvdSB1c2luZz8gDQo+IA0KPiBCeSBkZWZhdWx0LCBTdGFuZGFyZEFuYWx5emVy
IGFuZCBTdG9wQW5hbHl6ZXIgdXNlcyBhIHNldCBvZiBlbmdsaXNoIA0KPiBzdG9wd29yZHMuIEZv
ciBmcmVuY2gsIHRoaXMgbGlzdCBpcyBwcm9iYWJseSBub3QgYXBwcm9wcmlhdGUuIA0KPiBJZiB5
b3UgbG9vayBhdCB0aGUgamF2YWRvY3MsIHlvdSBjYW4gcGFzcyBpbiB5b3VyIG93biBzZXQgb2Yg
DQo+IHN0b3B3b3Jkcy4uLiBmb3IgbGV4aWNhbCBhbmFseXNpcyBtYXliZSB0aGlzIHNob3VsZCBi
ZSBhbiBlbXB0eSBzZXQuIA0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0KPiBUbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcgDQo+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnIA0KPiANCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnIA0KRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcg
--__=_Part_Boundary_001_013858.021567--


From java-user-return-48328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 09:48:31 2011
Return-Path: <java-user-return-48328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84710 invoked from network); 13 Jan 2011 09:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 09:48:31 -0000
Received: (qmail 7552 invoked by uid 500); 13 Jan 2011 09:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7011 invoked by uid 500); 13 Jan 2011 09:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7003 invoked by uid 99); 13 Jan 2011 09:48:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 09:48:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 09:48:17 +0000
Received: by bwz8 with SMTP id 8so1525463bwz.35
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 01:47:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=pc2SIjhyzwD47RVxAExYFgCybia+1X9Bbo+OgWC9bnM=;
        b=bHcZelf4tuNbfBARGDxCVNX83w1kTbLOwhT7bRKjDON6t0r1i4wiutzL7Kw2Lj6Gqn
         sD3B6A8A5f2FDDtEL7HjADi/TuBRBrOackagChnmMhJ25JK4kBqauAkvLKv0KaA6eKmz
         or7pUWO4HbJJr7Y+R9NiHn7BrjcWDIdXt6B1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=bPeAvZNngmOlvbYIpQIXYYMi6MfRE4B6L76KNWDFyl3PBW/qQNvc8kwgD+cuICKXJw
         J18F5QPXnzEWM2/2kUW4ZJPP09uaEBGaADMJeaX3z02ZKC3tT4OgdTXPeEI71KrkceER
         4ow740Okro4jqH73AauPrk7tavwvA5pxXgcLU=
Received: by 10.204.98.65 with SMTP id p1mr1616744bkn.198.1294912077480; Thu,
 13 Jan 2011 01:47:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Thu, 13 Jan 2011 01:47:37 -0800 (PST)
In-Reply-To: <AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
 <AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
 <AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
 <AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
 <AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
 <AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com> <AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 Jan 2011 09:47:37 +0000
Message-ID: <AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Try adding

      try { searcher.close(); } catch (Exception e) { }

before

      searcher =3D new IndexSearcher(dir);

at the top of the loop.

At the end of a loop searcher is open, and is not closed before being
reassigned.  There is probably a better solution along the lines of
only opening new searcher if need to.


--
Ian.

2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> Hi Yuhan,
>
> dir.close() can not solve the problem.
>
> The reason I have to close the old searcher is my program will replace th=
e
> old index, the code posted here is just a scenario to simplify my questio=
n.
>
> Thanks,
> Garry
>
> =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang <yzha=
ng@onescreen.com>=D0=B4=B5=C0=A3=BA
>
>> Hi Garry,
>>
>> I am guessing the directory needs to be closed before opening a new one.
>>
>> dir.close();
>> dir =3D FSDirectory.open(new File(getIndexPath()));
>>
>> why not to open two IndexSearcher objects in an array of two instead of
>> swapping them back and forth?
>> it would be a lot easier.
>>
>> yuhan
>>
>> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
>>
>> > Hi Mike,
>> >
>> > Sorry to make you confused. "lock" means the file handle is held by so=
me
>> > other progress, the program can not delete it. There is no exception, =
I
>> can
>> > see file.delete() method returns false. If I delete the cfs file in th=
e
>> OS
>> > manually, the warning is "File was using by another person or program"
>> >
>> > To simplify my question, I made some more code for testing. you can ru=
n
>> it
>> > for reproducing, after two loops, you will see the message e.g. "Can n=
ot
>> > delete file: D:\index\index2\_0.cfs"
>> >
>> >
>> > Thank you very much
>> >
>> >
>> > public class SearchTest
>> > {
>> >
>> >    private static final int MAX_RESULT =3D 10000;
>> >
>> >    private String indexPath1 =3D "D:\\index\\index1";
>> >
>> >    private String indexPath2 =3D "D:\\index\\index2";
>> >
>> >     private String backupIndexpath =3D "D:\\index\\index3";
>> >
>> >    private String indexPath =3D indexPath1;
>> >
>> >    private Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_3=
0);
>> >
>> >     private IndexSearcher searcher;
>> >
>> >    public void search()
>> >    {
>> >        while (true)
>> >        {
>> >            try
>> >            {
>> >                String keyword =3D "test";
>> >                String fieldName =3D "searchfield";
>> >
>> >                 Directory dir =3D FSDirectory.open(new File(indexPath)=
);
>> >
>> >                searcher =3D new IndexSearcher(dir);
>> >
>> >                QueryParser queryParse =3D new
>> QueryParser(Version.LUCENE_30,
>> > fieldName, analyzer);
>> >                Query query =3D queryParse.parse(keyword);
>> >
>> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
>> >                int size =3D 5;
>> >                if (hits.scoreDocs.length < size)
>> >                {
>> >                    size =3D hits.scoreDocs.length;
>> >                }
>> >                for (int i =3D 0; i < size; i++)
>> >                {
>> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].doc=
);
>> >                    String text =3D doc.get(fieldName);
>> >                    System.out.println("fieldContent is: " + text);
>> >                }
>> >
>> >                IndexSearcher oldSearcher =3D searcher;
>> >
>> >                 File newFile =3D new File(getIndexPath());
>> >                for (File file : newFile.listFiles())
>> >                {
>> >                    if (!file.delete())
>> >                    {
>> >                        System.out.println("Can not delete file: " +
>> > file.getAbsolutePath());
>> >                    }
>> >                }
>> >
>> >                // Copy index File from another folder to this folder
>> >                copyDir(new File(backupIndexpath), newFile);
>> >
>> >                Directory newDir =3D FSDirectory.open(newFile);
>> >                IndexSearcher newSearcher =3D new IndexSearcher(newDir)=
;
>> >                 searcher =3D newSearcher;
>> >
>> >                oldSearcher.close();
>> >
>> >                System.out.println("Closed Searcher: " +
>> > oldSearcher.getIndexReader().directory().toString());
>> >
>> >                System.out.println("input 'Q' to quit testing...");
>> >                BufferedReader br =3D new BufferedReader(new
>> > InputStreamReader(System.in));
>> >
>> >                if (br.readLine().trim().equals("Q"))
>> >                {
>> >                    break;
>> >                }
>> >            }
>> >            catch (CorruptIndexException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >            catch (IOException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >            catch (ParseException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >        }
>> >    }
>> >
>> >    private String getIndexPath()
>> >    {
>> >        if (indexPath.equals(indexPath1))
>> >        {
>> >            indexPath =3D indexPath2;
>> >        }
>> >        else
>> >        {
>> >            indexPath =3D indexPath1;
>> >        }
>> >
>> >        return indexPath;
>> >    }
>> >
>> >     public static void copyDir(File sourceLocation, File targetLocatio=
n)
>> > throws IOException
>> >    {
>> >        String[] children =3D sourceLocation.list();
>> >        for (int i =3D 0; i < children.length; i++)
>> >        {
>> >            InputStream in =3D null;
>> >            OutputStream out =3D null;
>> >            try
>> >            {
>> >                in =3D new FileInputStream(new File(sourceLocation,
>> > children[i]));
>> >                out =3D new FileOutputStream(new File(targetLocation,
>> > children[i]));
>> >
>> >                byte[] buf =3D new byte[1024];
>> >                int len;
>> >                while ((len =3D in.read(buf)) > 0)
>> >                {
>> >                    out.write(buf, 0, len);
>> >                }
>> >            }
>> >            catch (FileNotFoundException e)
>> >            {
>> >                e.printStackTrace();
>> >            }
>> >            catch (IOException ioe)
>> >            {
>> >                ioe.printStackTrace();
>> >            }
>> >            finally
>> >            {
>> >                try
>> >                {
>> >                    if (in !=3D null)
>> >                    {
>> >                        in.close();
>> >                    }
>> >                    if (out !=3D null)
>> >                    {
>> >                        out.close();
>> >                     }
>> >                }
>> >                catch (IOException e)
>> >                {
>> >                    e.printStackTrace();
>> >                }
>> >            }
>> >        }
>> >    }
>> >
>> >     public static void main(String[] args)
>> >    {
>> >        SearchTest searchTest =3D new SearchTest();
>> >        searchTest.search();
>> >    }
>> >
>> > }
>> >
>> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McCand=
less <lucene@mikemccandless.com>=D0=B4=B5=C0=A3=BA
>> >
>> > > Hmmm.
>> > >
>> > > When you say "locked" what actually does that mean?  Can you post th=
e
>> > > exception?
>> > >
>> > > Also, can you whittle down your example even more?   EG if calling
>> > > this method twice causes the problem, make a method that calls it
>> > > twice and hits the exception and then start simplifying from there..=
.
>> > >
>> > > Mike
>> > >
>> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>> > > > Mike, thanks for your feedback.
>> > > >
>> > > > I verified this in the debug mode, so I just check the folder I
>> closed
>> > in
>> > > > the last loop. Actually, both two folders are locked.
>> > > >
>> > > > tried with new FSDirectory every loop, no help.
>> > > >
>> > > > Garry
>> > > >
>> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
>> > > >
>> > > >> When you break out of the loop (user enters 'Q') you don't close =
the
>> > > >> current searcher.  Could that be it?
>> > > >>
>> > > >> Also you are calling FSDir.open each time but should only do it o=
nce
>> > > >> (though this should be "harmless").
>> > > >>
>> > > >> Mike
>> > > >>
>> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zhan=
g@dianping.com>
>> > > wrote:
>> > > >> > Dear Luceners,
>> > > >> >
>> > > >> > I'm using lucene-3.0.2 in our app. There is some testing code f=
or
>> > > >> switching
>> > > >> > index, however, when my code run a couple of times, I found the
>> > index
>> > > >> file
>> > > >> > was locked, I can not delete the old index files.
>> > > >> >
>> > > >> >
>> > > >> > The code looks like:
>> > > >> >
>> > > >> > public class SearchTest
>> > > >> > {
>> > > >> >
>> > > >> >    private static final int MAX_RESULT =3D 10000;
>> > > >> >
>> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
>> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
>> > > >> >
>> > > >> >    private String indexPath =3D indexPath1;
>> > > >> >
>> > > >> >    private Analyzer analyzer =3D new
>> > > StandardAnalyzer(Version.LUCENE_30);
>> > > >> >
>> > > >> >    private Directory dir =3D null;
>> > > >> >
>> > > >> >    private IndexSearcher searcher;
>> > > >> >
>> > > >> >    public void search()
>> > > >> >    {
>> > > >> >        while(true)
>> > > >> >        {
>> > > >> >            try
>> > > >> >            {
>> > > >> >                String keyword =3D "test";
>> > > >> >                String fieldName =3D "searchfield";
>> > > >> >
>> > > >> >                if(dir =3D=3D null)
>> > > >> >                {
>> > > >> >                    dir =3D FSDirectory.open(new File(indexPath)=
);
>> > > >> >                }
>> > > >> >                searcher =3D new IndexSearcher(dir);
>> > > >> >
>> > > >> >                QueryParser queryParse =3D new
>> > > >> QueryParser(Version.LUCENE_30,
>> > > >> > fieldName, analyzer);
>> > > >> >                Query query =3D queryParse.parse(keyword);
>> > > >> >
>> > > >> >                TopDocs hits =3D searcher.search(query, MAX_RESU=
LT);
>> > > >> >                int size =3D 5;
>> > > >> >                if(hits.scoreDocs.length < size)
>> > > >> >                {
>> > > >> >                    size =3D hits.scoreDocs.length;
>> > > >> >                }
>> > > >> >                for (int i =3D 0; i < size; i++)
>> > > >> >                {
>> > > >> >                    Document doc =3D
>> > searcher.doc(hits.scoreDocs[i].doc);
>> > > >> >                    String text =3D doc.get(fieldName);
>> > > >> >                    System.out.println("fieldContent is: " + tex=
t);
>> > > >> >                }
>> > > >> >
>> > > >> >                IndexSearcher oldSearcher =3D searcher;
>> > > >> >                dir =3D FSDirectory.open(new File(getIndexPath()=
));
>> > > >> >                IndexSearcher newSearcher =3D new IndexSearcher(=
dir);
>> > > >> >                searcher =3D newSearcher;
>> > > >> >
>> > > >> >                oldSearcher.close();
>> > > >> >                System.out.println("Closed Searcher: " +
>> > > >> > oldSearcher.getIndexReader().directory().toString());
>> > > >> >
>> > > >> >                System.out.println("input 'Q' to quit testing...=
");
>> > > >> >                BufferedReader br =3D new BufferedReader(new
>> > > >> > InputStreamReader(System.in));
>> > > >> >
>> > > >> >                if(br.readLine().trim().equals("Q"))
>> > > >> >                {
>> > > >> >                    break;
>> > > >> >                }
>> > > >> >            }
>> > > >> >            catch (CorruptIndexException e)
>> > > >> >            {
>> > > >> >                e.printStackTrace();
>> > > >> >            }
>> > > >> >            catch (IOException e)
>> > > >> >            {
>> > > >> >                e.printStackTrace();
>> > > >> >            }
>> > > >> >            catch (ParseException e)
>> > > >> >            {
>> > > >> >                e.printStackTrace();
>> > > >> >            }
>> > > >> >        }
>> > > >> >    }
>> > > >> >
>> > > >> >    private String getIndexPath()
>> > > >> >    {
>> > > >> >        if(indexPath.equals(indexPath1))
>> > > >> >        {
>> > > >> >            indexPath =3D indexPath2;
>> > > >> >        }
>> > > >> >        else
>> > > >> >        {
>> > > >> >            indexPath =3D indexPath1;
>> > > >> >        }
>> > > >> >
>> > > >> >        return indexPath;
>> > > >> >    }
>> > > >> >
>> > > >> >    public static void main(String[] args)
>> > > >> >    {
>> > > >> >        SearchTest searchTest =3D new SearchTest();
>> > > >> >        searchTest.search();
>> > > >> >    }
>> > > >> >
>> > > >> > }
>> > > >> >
>> > > >> > Can anybody take a look at the above code snippet?
>> > > >> >
>> > > >> > I want to search on the different index file every time so I
>> created
>> > > two
>> > > >> > different folders and switch them time to time. The index files=
 in
>> > the
>> > > >> > index1/index2 maybe replaced before the search request comes.
>> > > >> >
>> > > >> > The problem I found is after I ran the above code 2 or more loo=
ps,
>> I
>> > > can
>> > > >> not
>> > > >> > modify/delete the cfs/cfx file in the file system(Windows 2003)=
,
>> > > although
>> > > >> I
>> > > >> > closed the searcher every time in the code. It seems that the
>> index
>> > > file
>> > > >> is
>> > > >> > not released.
>> > > >> >
>> > > >> > Is the problem caused by the shared reference of searcher? or s=
ome
>> > > shared
>> > > >> > thread in the lucene?
>> > > >> >
>> > > >> > Thanks in advance!
>> > > >> > Garry
>> > > >> >
>> > > >>
>> > > >
>> > > >
>> > > >
>> > > > --
>> > > > =D5=C5=D6=BE=CC=EF
>> > > >
>> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
>> > > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > =D5=C5=D6=BE=CC=EF
>> >
>> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>> > =B5=E7=BB=B0=A3=BA52521070 - 1675
>> >
>>
>
>
>
> --
> =D5=C5=D6=BE=CC=EF
>
> =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> =B5=E7=BB=B0=A3=BA52521070 - 1675
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 10:24:18 2011
Return-Path: <java-user-return-48329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 609 invoked from network); 13 Jan 2011 10:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 10:24:18 -0000
Received: (qmail 40367 invoked by uid 500); 13 Jan 2011 10:24:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39834 invoked by uid 500); 13 Jan 2011 10:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39821 invoked by uid 99); 13 Jan 2011 10:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 10:24:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 10:24:07 +0000
Received: by qyk7 with SMTP id 7so4771669qyk.14
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 02:23:45 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.45.74 with SMTP id d10mr2052833qaf.71.1294914225144; Thu,
 13 Jan 2011 02:23:45 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Thu, 13 Jan 2011 02:23:45 -0800 (PST)
In-Reply-To: <AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
	<AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
	<AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
	<AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
	<AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
	<AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com>
Date: Thu, 13 Jan 2011 18:23:45 +0800
Message-ID: <AANLkTikG+3XyO6ZxxewP+bmXCB2QSjfD=Ti82Jw8_8vm@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517503bba6782df0499b7b68d

--001517503bba6782df0499b7b68d
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Ian, thanks for your response. Your suggestion worked for me.

What does oldSearcher.close() do in my code? why I have to close the
searcher and oldSearcher together? In my opinion, oldSearcher held index1
while searcher held index2, they are using different resources, the
resources held by them should be released seperately.

I have another concern for your solution, searcher is a reference created
here for user searching out of this code snippet, if I closed and reopen it
here, there may be some service down time because there is no open searcher
for using.

In my original code, searcher opened all the time, so there is no service
down time or little, this is the reason I did not close it every time. Do
you have any suggestion to keep an alive searcher and the program can also
switch the index smoothly?

Thanks,
Garry



=D4=DA 2011=C4=EA1=D4=C213=C8=D5 =CF=C2=CE=E75:47=A3=ACIan Lea <ian.lea@gma=
il.com>=D0=B4=B5=C0=A3=BA

> Try adding
>
>      try { searcher.close(); } catch (Exception e) { }
>
> before
>
>      searcher =3D new IndexSearcher(dir);
>
> at the top of the loop.
>
> At the end of a loop searcher is open, and is not closed before being
> reassigned.  There is probably a better solution along the lines of
> only opening new searcher if need to.
>
>
> --
> Ian.
>
> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> > Hi Yuhan,
> >
> > dir.close() can not solve the problem.
> >
> > The reason I have to close the old searcher is my program will replace
> the
> > old index, the code posted here is just a scenario to simplify my
> question.
> >
> > Thanks,
> > Garry
> >
> > =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang <yz=
hang@onescreen.com>=D0=B4=B5=C0=A3=BA
> >
> >> Hi Garry,
> >>
> >> I am guessing the directory needs to be closed before opening a new on=
e.
> >>
> >> dir.close();
> >> dir =3D FSDirectory.open(new File(getIndexPath()));
> >>
> >> why not to open two IndexSearcher objects in an array of two instead o=
f
> >> swapping them back and forth?
> >> it would be a lot easier.
> >>
> >> yuhan
> >>
> >> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
> >>
> >> > Hi Mike,
> >> >
> >> > Sorry to make you confused. "lock" means the file handle is held by
> some
> >> > other progress, the program can not delete it. There is no exception=
,
> I
> >> can
> >> > see file.delete() method returns false. If I delete the cfs file in
> the
> >> OS
> >> > manually, the warning is "File was using by another person or progra=
m"
> >> >
> >> > To simplify my question, I made some more code for testing. you can
> run
> >> it
> >> > for reproducing, after two loops, you will see the message e.g. "Can
> not
> >> > delete file: D:\index\index2\_0.cfs"
> >> >
> >> >
> >> > Thank you very much
> >> >
> >> >
> >> > public class SearchTest
> >> > {
> >> >
> >> >    private static final int MAX_RESULT =3D 10000;
> >> >
> >> >    private String indexPath1 =3D "D:\\index\\index1";
> >> >
> >> >    private String indexPath2 =3D "D:\\index\\index2";
> >> >
> >> >     private String backupIndexpath =3D "D:\\index\\index3";
> >> >
> >> >    private String indexPath =3D indexPath1;
> >> >
> >> >    private Analyzer analyzer =3D new
> StandardAnalyzer(Version.LUCENE_30);
> >> >
> >> >     private IndexSearcher searcher;
> >> >
> >> >    public void search()
> >> >    {
> >> >        while (true)
> >> >        {
> >> >            try
> >> >            {
> >> >                String keyword =3D "test";
> >> >                String fieldName =3D "searchfield";
> >> >
> >> >                 Directory dir =3D FSDirectory.open(new File(indexPat=
h));
> >> >
> >> >                searcher =3D new IndexSearcher(dir);
> >> >
> >> >                QueryParser queryParse =3D new
> >> QueryParser(Version.LUCENE_30,
> >> > fieldName, analyzer);
> >> >                Query query =3D queryParse.parse(keyword);
> >> >
> >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
> >> >                int size =3D 5;
> >> >                if (hits.scoreDocs.length < size)
> >> >                {
> >> >                    size =3D hits.scoreDocs.length;
> >> >                }
> >> >                for (int i =3D 0; i < size; i++)
> >> >                {
> >> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].d=
oc);
> >> >                    String text =3D doc.get(fieldName);
> >> >                    System.out.println("fieldContent is: " + text);
> >> >                }
> >> >
> >> >                IndexSearcher oldSearcher =3D searcher;
> >> >
> >> >                 File newFile =3D new File(getIndexPath());
> >> >                for (File file : newFile.listFiles())
> >> >                {
> >> >                    if (!file.delete())
> >> >                    {
> >> >                        System.out.println("Can not delete file: " +
> >> > file.getAbsolutePath());
> >> >                    }
> >> >                }
> >> >
> >> >                // Copy index File from another folder to this folder
> >> >                copyDir(new File(backupIndexpath), newFile);
> >> >
> >> >                Directory newDir =3D FSDirectory.open(newFile);
> >> >                IndexSearcher newSearcher =3D new IndexSearcher(newDi=
r);
> >> >                 searcher =3D newSearcher;
> >> >
> >> >                oldSearcher.close();
> >> >
> >> >                System.out.println("Closed Searcher: " +
> >> > oldSearcher.getIndexReader().directory().toString());
> >> >
> >> >                System.out.println("input 'Q' to quit testing...");
> >> >                BufferedReader br =3D new BufferedReader(new
> >> > InputStreamReader(System.in));
> >> >
> >> >                if (br.readLine().trim().equals("Q"))
> >> >                {
> >> >                    break;
> >> >                }
> >> >            }
> >> >            catch (CorruptIndexException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >            catch (IOException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >            catch (ParseException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >        }
> >> >    }
> >> >
> >> >    private String getIndexPath()
> >> >    {
> >> >        if (indexPath.equals(indexPath1))
> >> >        {
> >> >            indexPath =3D indexPath2;
> >> >        }
> >> >        else
> >> >        {
> >> >            indexPath =3D indexPath1;
> >> >        }
> >> >
> >> >        return indexPath;
> >> >    }
> >> >
> >> >     public static void copyDir(File sourceLocation, File
> targetLocation)
> >> > throws IOException
> >> >    {
> >> >        String[] children =3D sourceLocation.list();
> >> >        for (int i =3D 0; i < children.length; i++)
> >> >        {
> >> >            InputStream in =3D null;
> >> >            OutputStream out =3D null;
> >> >            try
> >> >            {
> >> >                in =3D new FileInputStream(new File(sourceLocation,
> >> > children[i]));
> >> >                out =3D new FileOutputStream(new File(targetLocation,
> >> > children[i]));
> >> >
> >> >                byte[] buf =3D new byte[1024];
> >> >                int len;
> >> >                while ((len =3D in.read(buf)) > 0)
> >> >                {
> >> >                    out.write(buf, 0, len);
> >> >                }
> >> >            }
> >> >            catch (FileNotFoundException e)
> >> >            {
> >> >                e.printStackTrace();
> >> >            }
> >> >            catch (IOException ioe)
> >> >            {
> >> >                ioe.printStackTrace();
> >> >            }
> >> >            finally
> >> >            {
> >> >                try
> >> >                {
> >> >                    if (in !=3D null)
> >> >                    {
> >> >                        in.close();
> >> >                    }
> >> >                    if (out !=3D null)
> >> >                    {
> >> >                        out.close();
> >> >                     }
> >> >                }
> >> >                catch (IOException e)
> >> >                {
> >> >                    e.printStackTrace();
> >> >                }
> >> >            }
> >> >        }
> >> >    }
> >> >
> >> >     public static void main(String[] args)
> >> >    {
> >> >        SearchTest searchTest =3D new SearchTest();
> >> >        searchTest.search();
> >> >    }
> >> >
> >> > }
> >> >
> >> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McCa=
ndless <lucene@mikemccandless.com
> >=D0=B4=B5=C0=A3=BA
> >> >
> >> > > Hmmm.
> >> > >
> >> > > When you say "locked" what actually does that mean?  Can you post
> the
> >> > > exception?
> >> > >
> >> > > Also, can you whittle down your example even more?   EG if calling
> >> > > this method twice causes the problem, make a method that calls it
> >> > > twice and hits the exception and then start simplifying from
> there...
> >> > >
> >> > > Mike
> >> > >
> >> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> >> > > > Mike, thanks for your feedback.
> >> > > >
> >> > > > I verified this in the debug mode, so I just check the folder I
> >> closed
> >> > in
> >> > > > the last loop. Actually, both two folders are locked.
> >> > > >
> >> > > > tried with new FSDirectory every loop, no help.
> >> > > >
> >> > > > Garry
> >> > > >
> >> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
> >> > > >
> >> > > >> When you break out of the loop (user enters 'Q') you don't clos=
e
> the
> >> > > >> current searcher.  Could that be it?
> >> > > >>
> >> > > >> Also you are calling FSDir.open each time but should only do it
> once
> >> > > >> (though this should be "harmless").
> >> > > >>
> >> > > >> Mike
> >> > > >>
> >> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.zh=
ang@dianping.com
> >
> >> > > wrote:
> >> > > >> > Dear Luceners,
> >> > > >> >
> >> > > >> > I'm using lucene-3.0.2 in our app. There is some testing code
> for
> >> > > >> switching
> >> > > >> > index, however, when my code run a couple of times, I found t=
he
> >> > index
> >> > > >> file
> >> > > >> > was locked, I can not delete the old index files.
> >> > > >> >
> >> > > >> >
> >> > > >> > The code looks like:
> >> > > >> >
> >> > > >> > public class SearchTest
> >> > > >> > {
> >> > > >> >
> >> > > >> >    private static final int MAX_RESULT =3D 10000;
> >> > > >> >
> >> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
> >> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
> >> > > >> >
> >> > > >> >    private String indexPath =3D indexPath1;
> >> > > >> >
> >> > > >> >    private Analyzer analyzer =3D new
> >> > > StandardAnalyzer(Version.LUCENE_30);
> >> > > >> >
> >> > > >> >    private Directory dir =3D null;
> >> > > >> >
> >> > > >> >    private IndexSearcher searcher;
> >> > > >> >
> >> > > >> >    public void search()
> >> > > >> >    {
> >> > > >> >        while(true)
> >> > > >> >        {
> >> > > >> >            try
> >> > > >> >            {
> >> > > >> >                String keyword =3D "test";
> >> > > >> >                String fieldName =3D "searchfield";
> >> > > >> >
> >> > > >> >                if(dir =3D=3D null)
> >> > > >> >                {
> >> > > >> >                    dir =3D FSDirectory.open(new File(indexPat=
h));
> >> > > >> >                }
> >> > > >> >                searcher =3D new IndexSearcher(dir);
> >> > > >> >
> >> > > >> >                QueryParser queryParse =3D new
> >> > > >> QueryParser(Version.LUCENE_30,
> >> > > >> > fieldName, analyzer);
> >> > > >> >                Query query =3D queryParse.parse(keyword);
> >> > > >> >
> >> > > >> >                TopDocs hits =3D searcher.search(query,
> MAX_RESULT);
> >> > > >> >                int size =3D 5;
> >> > > >> >                if(hits.scoreDocs.length < size)
> >> > > >> >                {
> >> > > >> >                    size =3D hits.scoreDocs.length;
> >> > > >> >                }
> >> > > >> >                for (int i =3D 0; i < size; i++)
> >> > > >> >                {
> >> > > >> >                    Document doc =3D
> >> > searcher.doc(hits.scoreDocs[i].doc);
> >> > > >> >                    String text =3D doc.get(fieldName);
> >> > > >> >                    System.out.println("fieldContent is: " +
> text);
> >> > > >> >                }
> >> > > >> >
> >> > > >> >                IndexSearcher oldSearcher =3D searcher;
> >> > > >> >                dir =3D FSDirectory.open(new
> File(getIndexPath()));
> >> > > >> >                IndexSearcher newSearcher =3D new
> IndexSearcher(dir);
> >> > > >> >                searcher =3D newSearcher;
> >> > > >> >
> >> > > >> >                oldSearcher.close();
> >> > > >> >                System.out.println("Closed Searcher: " +
> >> > > >> > oldSearcher.getIndexReader().directory().toString());
> >> > > >> >
> >> > > >> >                System.out.println("input 'Q' to quit
> testing...");
> >> > > >> >                BufferedReader br =3D new BufferedReader(new
> >> > > >> > InputStreamReader(System.in));
> >> > > >> >
> >> > > >> >                if(br.readLine().trim().equals("Q"))
> >> > > >> >                {
> >> > > >> >                    break;
> >> > > >> >                }
> >> > > >> >            }
> >> > > >> >            catch (CorruptIndexException e)
> >> > > >> >            {
> >> > > >> >                e.printStackTrace();
> >> > > >> >            }
> >> > > >> >            catch (IOException e)
> >> > > >> >            {
> >> > > >> >                e.printStackTrace();
> >> > > >> >            }
> >> > > >> >            catch (ParseException e)
> >> > > >> >            {
> >> > > >> >                e.printStackTrace();
> >> > > >> >            }
> >> > > >> >        }
> >> > > >> >    }
> >> > > >> >
> >> > > >> >    private String getIndexPath()
> >> > > >> >    {
> >> > > >> >        if(indexPath.equals(indexPath1))
> >> > > >> >        {
> >> > > >> >            indexPath =3D indexPath2;
> >> > > >> >        }
> >> > > >> >        else
> >> > > >> >        {
> >> > > >> >            indexPath =3D indexPath1;
> >> > > >> >        }
> >> > > >> >
> >> > > >> >        return indexPath;
> >> > > >> >    }
> >> > > >> >
> >> > > >> >    public static void main(String[] args)
> >> > > >> >    {
> >> > > >> >        SearchTest searchTest =3D new SearchTest();
> >> > > >> >        searchTest.search();
> >> > > >> >    }
> >> > > >> >
> >> > > >> > }
> >> > > >> >
> >> > > >> > Can anybody take a look at the above code snippet?
> >> > > >> >
> >> > > >> > I want to search on the different index file every time so I
> >> created
> >> > > two
> >> > > >> > different folders and switch them time to time. The index fil=
es
> in
> >> > the
> >> > > >> > index1/index2 maybe replaced before the search request comes.
> >> > > >> >
> >> > > >> > The problem I found is after I ran the above code 2 or more
> loops,
> >> I
> >> > > can
> >> > > >> not
> >> > > >> > modify/delete the cfs/cfx file in the file system(Windows
> 2003),
> >> > > although
> >> > > >> I
> >> > > >> > closed the searcher every time in the code. It seems that the
> >> index
> >> > > file
> >> > > >> is
> >> > > >> > not released.
> >> > > >> >
> >> > > >> > Is the problem caused by the shared reference of searcher? or
> some
> >> > > shared
> >> > > >> > thread in the lucene?
> >> > > >> >
> >> > > >> > Thanks in advance!
> >> > > >> > Garry
> >> > > >> >
> >> > > >>
> >> > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > =D5=C5=D6=BE=CC=EF
> >> > > >
> >> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> >> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >> > > >
> >> > >
> >> > >
> ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >> >
> >> > --
> >> > =D5=C5=D6=BE=CC=EF
> >> >
> >> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> >> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >> >
> >>
> >
> >
> >
> > --
> > =D5=C5=D6=BE=CC=EF
> >
> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517503bba6782df0499b7b68d--

From java-user-return-48330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 10:42:32 2011
Return-Path: <java-user-return-48330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4767 invoked from network); 13 Jan 2011 10:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 10:42:32 -0000
Received: (qmail 68141 invoked by uid 500); 13 Jan 2011 10:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67820 invoked by uid 500); 13 Jan 2011 10:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67812 invoked by uid 99); 13 Jan 2011 10:42:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 10:42:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 10:42:19 +0000
Received: by bwz8 with SMTP id 8so1567236bwz.35
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 02:41:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=SIfvCA+N2UibDYURMLVKgtgpH1VHVVis9gkoEr5Yokg=;
        b=Hc/aSafUGUk1ThCskwnneUPr4e3xu/Yo+J5+T8JSZIeObKnP9V1+pluRN8aZBJRd/b
         oPAtQq+hkhyowDsasXTtZg8RUgYgW1wQnWkwOfEblGHJcOv+kP+s245HNScGXuKuzFbO
         9CyA0JP0XgUq6CM+e1b9QuSqCElUNb/wj47Ts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=TvSKICfz9wI1G8sRo803kCBKFmruX9ttB7/9YOk7rjTOQQvK3NDKHIlcivmFK4sL3B
         +rZZDMMpAj3dHhTEtNEJot5jEePqnp7eHpo9SHyJyy9JJCcZatdz6mo1OMXjqfpR0sv9
         RmVoE5t4aMcGMhKSrJWjB2++ycYH2H8Odo74Q=
Received: by 10.204.100.136 with SMTP id y8mr1665792bkn.171.1294915319089;
 Thu, 13 Jan 2011 02:41:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Thu, 13 Jan 2011 02:41:39 -0800 (PST)
In-Reply-To: <AANLkTikG+3XyO6ZxxewP+bmXCB2QSjfD=Ti82Jw8_8vm@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
 <AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
 <AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
 <AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
 <AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
 <AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
 <AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
 <AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com> <AANLkTikG+3XyO6ZxxewP+bmXCB2QSjfD=Ti82Jw8_8vm@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 Jan 2011 10:41:39 +0000
Message-ID: <AANLkTimZkZoB33c-FTQKxE-0ALuJZ1ZvxVYGaK5XcJ-f@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

As I said, there is probably a better solution.  At the moment you are
opening searchers at the top and bottom of the loop and on second and
subsequent passes you are not closing the bottom one, that you've only
just opened, before opening a new one using the same instance
variable.  The resources of the bottom one would presumably be
released eventually by GC, but evidently not soon enough,

Replace the top searcher =3D new IndexSearcher(dir); line with

if (needToOpenNewSearcher()) {
   ...
}

where the logic in needToOpenNewSearcher() is for you to write.


--
Ian.


2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> Ian, thanks for your response. Your suggestion worked for me.
>
> What does oldSearcher.close() do in my code? why I have to close the
> searcher and oldSearcher together? In my opinion, oldSearcher held index1
> while searcher held index2, they are using different resources, the
> resources held by them should be released seperately.
>
> I have another concern for your solution, searcher is a reference created
> here for user searching out of this code snippet, if I closed and reopen =
it
> here, there may be some service down time because there is no open search=
er
> for using.
>
> In my original code, searcher opened all the time, so there is no service
> down time or little, this is the reason I did not close it every time. Do
> you have any suggestion to keep an alive searcher and the program can als=
o
> switch the index smoothly?
>
> Thanks,
> Garry
>
>
>
> =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =CF=C2=CE=E75:47=A3=ACIan Lea <ian.lea@g=
mail.com>=D0=B4=B5=C0=A3=BA
>
>> Try adding
>>
>>      try { searcher.close(); } catch (Exception e) { }
>>
>> before
>>
>>      searcher =3D new IndexSearcher(dir);
>>
>> at the top of the loop.
>>
>> At the end of a loop searcher is open, and is not closed before being
>> reassigned.  There is probably a better solution along the lines of
>> only opening new searcher if need to.
>>
>>
>> --
>> Ian.
>>
>> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>> > Hi Yuhan,
>> >
>> > dir.close() can not solve the problem.
>> >
>> > The reason I have to close the old searcher is my program will replace
>> the
>> > old index, the code posted here is just a scenario to simplify my
>> question.
>> >
>> > Thanks,
>> > Garry
>> >
>> > =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang <y=
zhang@onescreen.com>=D0=B4=B5=C0=A3=BA
>> >
>> >> Hi Garry,
>> >>
>> >> I am guessing the directory needs to be closed before opening a new o=
ne.
>> >>
>> >> dir.close();
>> >> dir =3D FSDirectory.open(new File(getIndexPath()));
>> >>
>> >> why not to open two IndexSearcher objects in an array of two instead =
of
>> >> swapping them back and forth?
>> >> it would be a lot easier.
>> >>
>> >> yuhan
>> >>
>> >> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
>> >>
>> >> > Hi Mike,
>> >> >
>> >> > Sorry to make you confused. "lock" means the file handle is held by
>> some
>> >> > other progress, the program can not delete it. There is no exceptio=
n,
>> I
>> >> can
>> >> > see file.delete() method returns false. If I delete the cfs file in
>> the
>> >> OS
>> >> > manually, the warning is "File was using by another person or progr=
am"
>> >> >
>> >> > To simplify my question, I made some more code for testing. you can
>> run
>> >> it
>> >> > for reproducing, after two loops, you will see the message e.g. "Ca=
n
>> not
>> >> > delete file: D:\index\index2\_0.cfs"
>> >> >
>> >> >
>> >> > Thank you very much
>> >> >
>> >> >
>> >> > public class SearchTest
>> >> > {
>> >> >
>> >> >    private static final int MAX_RESULT =3D 10000;
>> >> >
>> >> >    private String indexPath1 =3D "D:\\index\\index1";
>> >> >
>> >> >    private String indexPath2 =3D "D:\\index\\index2";
>> >> >
>> >> >     private String backupIndexpath =3D "D:\\index\\index3";
>> >> >
>> >> >    private String indexPath =3D indexPath1;
>> >> >
>> >> >    private Analyzer analyzer =3D new
>> StandardAnalyzer(Version.LUCENE_30);
>> >> >
>> >> >     private IndexSearcher searcher;
>> >> >
>> >> >    public void search()
>> >> >    {
>> >> >        while (true)
>> >> >        {
>> >> >            try
>> >> >            {
>> >> >                String keyword =3D "test";
>> >> >                String fieldName =3D "searchfield";
>> >> >
>> >> >                 Directory dir =3D FSDirectory.open(new File(indexPa=
th));
>> >> >
>> >> >                searcher =3D new IndexSearcher(dir);
>> >> >
>> >> >                QueryParser queryParse =3D new
>> >> QueryParser(Version.LUCENE_30,
>> >> > fieldName, analyzer);
>> >> >                Query query =3D queryParse.parse(keyword);
>> >> >
>> >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT);
>> >> >                int size =3D 5;
>> >> >                if (hits.scoreDocs.length < size)
>> >> >                {
>> >> >                    size =3D hits.scoreDocs.length;
>> >> >                }
>> >> >                for (int i =3D 0; i < size; i++)
>> >> >                {
>> >> >                    Document doc =3D searcher.doc(hits.scoreDocs[i].=
doc);
>> >> >                    String text =3D doc.get(fieldName);
>> >> >                    System.out.println("fieldContent is: " + text);
>> >> >                }
>> >> >
>> >> >                IndexSearcher oldSearcher =3D searcher;
>> >> >
>> >> >                 File newFile =3D new File(getIndexPath());
>> >> >                for (File file : newFile.listFiles())
>> >> >                {
>> >> >                    if (!file.delete())
>> >> >                    {
>> >> >                        System.out.println("Can not delete file: " +
>> >> > file.getAbsolutePath());
>> >> >                    }
>> >> >                }
>> >> >
>> >> >                // Copy index File from another folder to this folde=
r
>> >> >                copyDir(new File(backupIndexpath), newFile);
>> >> >
>> >> >                Directory newDir =3D FSDirectory.open(newFile);
>> >> >                IndexSearcher newSearcher =3D new IndexSearcher(newD=
ir);
>> >> >                 searcher =3D newSearcher;
>> >> >
>> >> >                oldSearcher.close();
>> >> >
>> >> >                System.out.println("Closed Searcher: " +
>> >> > oldSearcher.getIndexReader().directory().toString());
>> >> >
>> >> >                System.out.println("input 'Q' to quit testing...");
>> >> >                BufferedReader br =3D new BufferedReader(new
>> >> > InputStreamReader(System.in));
>> >> >
>> >> >                if (br.readLine().trim().equals("Q"))
>> >> >                {
>> >> >                    break;
>> >> >                }
>> >> >            }
>> >> >            catch (CorruptIndexException e)
>> >> >            {
>> >> >                e.printStackTrace();
>> >> >            }
>> >> >            catch (IOException e)
>> >> >            {
>> >> >                e.printStackTrace();
>> >> >            }
>> >> >            catch (ParseException e)
>> >> >            {
>> >> >                e.printStackTrace();
>> >> >            }
>> >> >        }
>> >> >    }
>> >> >
>> >> >    private String getIndexPath()
>> >> >    {
>> >> >        if (indexPath.equals(indexPath1))
>> >> >        {
>> >> >            indexPath =3D indexPath2;
>> >> >        }
>> >> >        else
>> >> >        {
>> >> >            indexPath =3D indexPath1;
>> >> >        }
>> >> >
>> >> >        return indexPath;
>> >> >    }
>> >> >
>> >> >     public static void copyDir(File sourceLocation, File
>> targetLocation)
>> >> > throws IOException
>> >> >    {
>> >> >        String[] children =3D sourceLocation.list();
>> >> >        for (int i =3D 0; i < children.length; i++)
>> >> >        {
>> >> >            InputStream in =3D null;
>> >> >            OutputStream out =3D null;
>> >> >            try
>> >> >            {
>> >> >                in =3D new FileInputStream(new File(sourceLocation,
>> >> > children[i]));
>> >> >                out =3D new FileOutputStream(new File(targetLocation=
,
>> >> > children[i]));
>> >> >
>> >> >                byte[] buf =3D new byte[1024];
>> >> >                int len;
>> >> >                while ((len =3D in.read(buf)) > 0)
>> >> >                {
>> >> >                    out.write(buf, 0, len);
>> >> >                }
>> >> >            }
>> >> >            catch (FileNotFoundException e)
>> >> >            {
>> >> >                e.printStackTrace();
>> >> >            }
>> >> >            catch (IOException ioe)
>> >> >            {
>> >> >                ioe.printStackTrace();
>> >> >            }
>> >> >            finally
>> >> >            {
>> >> >                try
>> >> >                {
>> >> >                    if (in !=3D null)
>> >> >                    {
>> >> >                        in.close();
>> >> >                    }
>> >> >                    if (out !=3D null)
>> >> >                    {
>> >> >                        out.close();
>> >> >                     }
>> >> >                }
>> >> >                catch (IOException e)
>> >> >                {
>> >> >                    e.printStackTrace();
>> >> >                }
>> >> >            }
>> >> >        }
>> >> >    }
>> >> >
>> >> >     public static void main(String[] args)
>> >> >    {
>> >> >        SearchTest searchTest =3D new SearchTest();
>> >> >        searchTest.search();
>> >> >    }
>> >> >
>> >> > }
>> >> >
>> >> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael McC=
andless <lucene@mikemccandless.com
>> >=D0=B4=B5=C0=A3=BA
>> >> >
>> >> > > Hmmm.
>> >> > >
>> >> > > When you say "locked" what actually does that mean?  Can you post
>> the
>> >> > > exception?
>> >> > >
>> >> > > Also, can you whittle down your example even more?   EG if callin=
g
>> >> > > this method twice causes the problem, make a method that calls it
>> >> > > twice and hits the exception and then start simplifying from
>> there...
>> >> > >
>> >> > > Mike
>> >> > >
>> >> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>> >> > > > Mike, thanks for your feedback.
>> >> > > >
>> >> > > > I verified this in the debug mode, so I just check the folder I
>> >> closed
>> >> > in
>> >> > > > the last loop. Actually, both two folders are locked.
>> >> > > >
>> >> > > > tried with new FSDirectory every loop, no help.
>> >> > > >
>> >> > > > Garry
>> >> > > >
>> >> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
>> >> > > >
>> >> > > >> When you break out of the loop (user enters 'Q') you don't clo=
se
>> the
>> >> > > >> current searcher.  Could that be it?
>> >> > > >>
>> >> > > >> Also you are calling FSDir.open each time but should only do i=
t
>> once
>> >> > > >> (though this should be "harmless").
>> >> > > >>
>> >> > > >> Mike
>> >> > > >>
>> >> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.z=
hang@dianping.com
>> >
>> >> > > wrote:
>> >> > > >> > Dear Luceners,
>> >> > > >> >
>> >> > > >> > I'm using lucene-3.0.2 in our app. There is some testing cod=
e
>> for
>> >> > > >> switching
>> >> > > >> > index, however, when my code run a couple of times, I found =
the
>> >> > index
>> >> > > >> file
>> >> > > >> > was locked, I can not delete the old index files.
>> >> > > >> >
>> >> > > >> >
>> >> > > >> > The code looks like:
>> >> > > >> >
>> >> > > >> > public class SearchTest
>> >> > > >> > {
>> >> > > >> >
>> >> > > >> >    private static final int MAX_RESULT =3D 10000;
>> >> > > >> >
>> >> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
>> >> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
>> >> > > >> >
>> >> > > >> >    private String indexPath =3D indexPath1;
>> >> > > >> >
>> >> > > >> >    private Analyzer analyzer =3D new
>> >> > > StandardAnalyzer(Version.LUCENE_30);
>> >> > > >> >
>> >> > > >> >    private Directory dir =3D null;
>> >> > > >> >
>> >> > > >> >    private IndexSearcher searcher;
>> >> > > >> >
>> >> > > >> >    public void search()
>> >> > > >> >    {
>> >> > > >> >        while(true)
>> >> > > >> >        {
>> >> > > >> >            try
>> >> > > >> >            {
>> >> > > >> >                String keyword =3D "test";
>> >> > > >> >                String fieldName =3D "searchfield";
>> >> > > >> >
>> >> > > >> >                if(dir =3D=3D null)
>> >> > > >> >                {
>> >> > > >> >                    dir =3D FSDirectory.open(new File(indexPa=
th));
>> >> > > >> >                }
>> >> > > >> >                searcher =3D new IndexSearcher(dir);
>> >> > > >> >
>> >> > > >> >                QueryParser queryParse =3D new
>> >> > > >> QueryParser(Version.LUCENE_30,
>> >> > > >> > fieldName, analyzer);
>> >> > > >> >                Query query =3D queryParse.parse(keyword);
>> >> > > >> >
>> >> > > >> >                TopDocs hits =3D searcher.search(query,
>> MAX_RESULT);
>> >> > > >> >                int size =3D 5;
>> >> > > >> >                if(hits.scoreDocs.length < size)
>> >> > > >> >                {
>> >> > > >> >                    size =3D hits.scoreDocs.length;
>> >> > > >> >                }
>> >> > > >> >                for (int i =3D 0; i < size; i++)
>> >> > > >> >                {
>> >> > > >> >                    Document doc =3D
>> >> > searcher.doc(hits.scoreDocs[i].doc);
>> >> > > >> >                    String text =3D doc.get(fieldName);
>> >> > > >> >                    System.out.println("fieldContent is: " +
>> text);
>> >> > > >> >                }
>> >> > > >> >
>> >> > > >> >                IndexSearcher oldSearcher =3D searcher;
>> >> > > >> >                dir =3D FSDirectory.open(new
>> File(getIndexPath()));
>> >> > > >> >                IndexSearcher newSearcher =3D new
>> IndexSearcher(dir);
>> >> > > >> >                searcher =3D newSearcher;
>> >> > > >> >
>> >> > > >> >                oldSearcher.close();
>> >> > > >> >                System.out.println("Closed Searcher: " +
>> >> > > >> > oldSearcher.getIndexReader().directory().toString());
>> >> > > >> >
>> >> > > >> >                System.out.println("input 'Q' to quit
>> testing...");
>> >> > > >> >                BufferedReader br =3D new BufferedReader(new
>> >> > > >> > InputStreamReader(System.in));
>> >> > > >> >
>> >> > > >> >                if(br.readLine().trim().equals("Q"))
>> >> > > >> >                {
>> >> > > >> >                    break;
>> >> > > >> >                }
>> >> > > >> >            }
>> >> > > >> >            catch (CorruptIndexException e)
>> >> > > >> >            {
>> >> > > >> >                e.printStackTrace();
>> >> > > >> >            }
>> >> > > >> >            catch (IOException e)
>> >> > > >> >            {
>> >> > > >> >                e.printStackTrace();
>> >> > > >> >            }
>> >> > > >> >            catch (ParseException e)
>> >> > > >> >            {
>> >> > > >> >                e.printStackTrace();
>> >> > > >> >            }
>> >> > > >> >        }
>> >> > > >> >    }
>> >> > > >> >
>> >> > > >> >    private String getIndexPath()
>> >> > > >> >    {
>> >> > > >> >        if(indexPath.equals(indexPath1))
>> >> > > >> >        {
>> >> > > >> >            indexPath =3D indexPath2;
>> >> > > >> >        }
>> >> > > >> >        else
>> >> > > >> >        {
>> >> > > >> >            indexPath =3D indexPath1;
>> >> > > >> >        }
>> >> > > >> >
>> >> > > >> >        return indexPath;
>> >> > > >> >    }
>> >> > > >> >
>> >> > > >> >    public static void main(String[] args)
>> >> > > >> >    {
>> >> > > >> >        SearchTest searchTest =3D new SearchTest();
>> >> > > >> >        searchTest.search();
>> >> > > >> >    }
>> >> > > >> >
>> >> > > >> > }
>> >> > > >> >
>> >> > > >> > Can anybody take a look at the above code snippet?
>> >> > > >> >
>> >> > > >> > I want to search on the different index file every time so I
>> >> created
>> >> > > two
>> >> > > >> > different folders and switch them time to time. The index fi=
les
>> in
>> >> > the
>> >> > > >> > index1/index2 maybe replaced before the search request comes=
.
>> >> > > >> >
>> >> > > >> > The problem I found is after I ran the above code 2 or more
>> loops,
>> >> I
>> >> > > can
>> >> > > >> not
>> >> > > >> > modify/delete the cfs/cfx file in the file system(Windows
>> 2003),
>> >> > > although
>> >> > > >> I
>> >> > > >> > closed the searcher every time in the code. It seems that th=
e
>> >> index
>> >> > > file
>> >> > > >> is
>> >> > > >> > not released.
>> >> > > >> >
>> >> > > >> > Is the problem caused by the shared reference of searcher? o=
r
>> some
>> >> > > shared
>> >> > > >> > thread in the lucene?
>> >> > > >> >
>> >> > > >> > Thanks in advance!
>> >> > > >> > Garry
>> >> > > >> >
>> >> > > >>
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > > --
>> >> > > > =D5=C5=D6=BE=CC=EF
>> >> > > >
>> >> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>> >> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
>> >> > > >
>> >> > >
>> >> > >
>> ---------------------------------------------------------------------
>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> > >
>> >> > >
>> >> >
>> >> >
>> >> > --
>> >> > =D5=C5=D6=BE=CC=EF
>> >> >
>> >> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>> >> > =B5=E7=BB=B0=A3=BA52521070 - 1675
>> >> >
>> >>
>> >
>> >
>> >
>> > --
>> > =D5=C5=D6=BE=CC=EF
>> >
>> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>> > =B5=E7=BB=B0=A3=BA52521070 - 1675
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 11:01:24 2011
Return-Path: <java-user-return-48331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10263 invoked from network); 13 Jan 2011 11:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 11:01:23 -0000
Received: (qmail 92072 invoked by uid 500); 13 Jan 2011 11:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90072 invoked by uid 500); 13 Jan 2011 11:01:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90055 invoked by uid 99); 13 Jan 2011 11:01:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 11:01:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhitian.zhang@dianping.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 11:01:07 +0000
Received: by qyk10 with SMTP id 10so1624623qyk.14
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 03:00:45 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.185.210 with SMTP id cp18mr1758962qcb.187.1294916445032;
 Thu, 13 Jan 2011 03:00:45 -0800 (PST)
Received: by 10.220.184.170 with HTTP; Thu, 13 Jan 2011 03:00:44 -0800 (PST)
In-Reply-To: <AANLkTimZkZoB33c-FTQKxE-0ALuJZ1ZvxVYGaK5XcJ-f@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
	<AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
	<AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
	<AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
	<AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
	<AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
	<AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
	<AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com>
	<AANLkTikG+3XyO6ZxxewP+bmXCB2QSjfD=Ti82Jw8_8vm@mail.gmail.com>
	<AANLkTimZkZoB33c-FTQKxE-0ALuJZ1ZvxVYGaK5XcJ-f@mail.gmail.com>
Date: Thu, 13 Jan 2011 19:00:44 +0800
Message-ID: <AANLkTinTs8MSEVUD_7neA89cixakphAaTTPjQmwwsX3m@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
From: =?GB2312?B?1cXWvszv?= <zhitian.zhang@dianping.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b7f4ab853c80499b83abb
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363b7f4ab853c80499b83abb
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Ian, thank you very much.

I will try to change my switch solution.

Thanks again
Garry

=D4=DA 2011=C4=EA1=D4=C213=C8=D5 =CF=C2=CE=E76:41=A3=ACIan Lea <ian.lea@gma=
il.com>=D0=B4=B5=C0=A3=BA

> As I said, there is probably a better solution.  At the moment you are
> opening searchers at the top and bottom of the loop and on second and
> subsequent passes you are not closing the bottom one, that you've only
> just opened, before opening a new one using the same instance
> variable.  The resources of the bottom one would presumably be
> released eventually by GC, but evidently not soon enough,
>
> Replace the top searcher =3D new IndexSearcher(dir); line with
>
> if (needToOpenNewSearcher()) {
>   ...
> }
>
> where the logic in needToOpenNewSearcher() is for you to write.
>
>
> --
> Ian.
>
>
> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> > Ian, thanks for your response. Your suggestion worked for me.
> >
> > What does oldSearcher.close() do in my code? why I have to close the
> > searcher and oldSearcher together? In my opinion, oldSearcher held inde=
x1
> > while searcher held index2, they are using different resources, the
> > resources held by them should be released seperately.
> >
> > I have another concern for your solution, searcher is a reference creat=
ed
> > here for user searching out of this code snippet, if I closed and reope=
n
> it
> > here, there may be some service down time because there is no open
> searcher
> > for using.
> >
> > In my original code, searcher opened all the time, so there is no servi=
ce
> > down time or little, this is the reason I did not close it every time. =
Do
> > you have any suggestion to keep an alive searcher and the program can
> also
> > switch the index smoothly?
> >
> > Thanks,
> > Garry
> >
> >
> >
> > =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =CF=C2=CE=E75:47=A3=ACIan Lea <ian.lea=
@gmail.com>=D0=B4=B5=C0=A3=BA
> >
> >> Try adding
> >>
> >>      try { searcher.close(); } catch (Exception e) { }
> >>
> >> before
> >>
> >>      searcher =3D new IndexSearcher(dir);
> >>
> >> at the top of the loop.
> >>
> >> At the end of a loop searcher is open, and is not closed before being
> >> reassigned.  There is probably a better solution along the lines of
> >> only opening new searcher if need to.
> >>
> >>
> >> --
> >> Ian.
> >>
> >> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> >> > Hi Yuhan,
> >> >
> >> > dir.close() can not solve the problem.
> >> >
> >> > The reason I have to close the old searcher is my program will repla=
ce
> >> the
> >> > old index, the code posted here is just a scenario to simplify my
> >> question.
> >> >
> >> > Thanks,
> >> > Garry
> >> >
> >> > =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang =
<yzhang@onescreen.com>=D0=B4=B5=C0=A3=BA
> >> >
> >> >> Hi Garry,
> >> >>
> >> >> I am guessing the directory needs to be closed before opening a new
> one.
> >> >>
> >> >> dir.close();
> >> >> dir =3D FSDirectory.open(new File(getIndexPath()));
> >> >>
> >> >> why not to open two IndexSearcher objects in an array of two instea=
d
> of
> >> >> swapping them back and forth?
> >> >> it would be a lot easier.
> >> >>
> >> >> yuhan
> >> >>
> >> >> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
> >> >>
> >> >> > Hi Mike,
> >> >> >
> >> >> > Sorry to make you confused. "lock" means the file handle is held =
by
> >> some
> >> >> > other progress, the program can not delete it. There is no
> exception,
> >> I
> >> >> can
> >> >> > see file.delete() method returns false. If I delete the cfs file =
in
> >> the
> >> >> OS
> >> >> > manually, the warning is "File was using by another person or
> program"
> >> >> >
> >> >> > To simplify my question, I made some more code for testing. you c=
an
> >> run
> >> >> it
> >> >> > for reproducing, after two loops, you will see the message e.g.
> "Can
> >> not
> >> >> > delete file: D:\index\index2\_0.cfs"
> >> >> >
> >> >> >
> >> >> > Thank you very much
> >> >> >
> >> >> >
> >> >> > public class SearchTest
> >> >> > {
> >> >> >
> >> >> >    private static final int MAX_RESULT =3D 10000;
> >> >> >
> >> >> >    private String indexPath1 =3D "D:\\index\\index1";
> >> >> >
> >> >> >    private String indexPath2 =3D "D:\\index\\index2";
> >> >> >
> >> >> >     private String backupIndexpath =3D "D:\\index\\index3";
> >> >> >
> >> >> >    private String indexPath =3D indexPath1;
> >> >> >
> >> >> >    private Analyzer analyzer =3D new
> >> StandardAnalyzer(Version.LUCENE_30);
> >> >> >
> >> >> >     private IndexSearcher searcher;
> >> >> >
> >> >> >    public void search()
> >> >> >    {
> >> >> >        while (true)
> >> >> >        {
> >> >> >            try
> >> >> >            {
> >> >> >                String keyword =3D "test";
> >> >> >                String fieldName =3D "searchfield";
> >> >> >
> >> >> >                 Directory dir =3D FSDirectory.open(new
> File(indexPath));
> >> >> >
> >> >> >                searcher =3D new IndexSearcher(dir);
> >> >> >
> >> >> >                QueryParser queryParse =3D new
> >> >> QueryParser(Version.LUCENE_30,
> >> >> > fieldName, analyzer);
> >> >> >                Query query =3D queryParse.parse(keyword);
> >> >> >
> >> >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT=
);
> >> >> >                int size =3D 5;
> >> >> >                if (hits.scoreDocs.length < size)
> >> >> >                {
> >> >> >                    size =3D hits.scoreDocs.length;
> >> >> >                }
> >> >> >                for (int i =3D 0; i < size; i++)
> >> >> >                {
> >> >> >                    Document doc =3D
> searcher.doc(hits.scoreDocs[i].doc);
> >> >> >                    String text =3D doc.get(fieldName);
> >> >> >                    System.out.println("fieldContent is: " + text)=
;
> >> >> >                }
> >> >> >
> >> >> >                IndexSearcher oldSearcher =3D searcher;
> >> >> >
> >> >> >                 File newFile =3D new File(getIndexPath());
> >> >> >                for (File file : newFile.listFiles())
> >> >> >                {
> >> >> >                    if (!file.delete())
> >> >> >                    {
> >> >> >                        System.out.println("Can not delete file: "=
 +
> >> >> > file.getAbsolutePath());
> >> >> >                    }
> >> >> >                }
> >> >> >
> >> >> >                // Copy index File from another folder to this
> folder
> >> >> >                copyDir(new File(backupIndexpath), newFile);
> >> >> >
> >> >> >                Directory newDir =3D FSDirectory.open(newFile);
> >> >> >                IndexSearcher newSearcher =3D new
> IndexSearcher(newDir);
> >> >> >                 searcher =3D newSearcher;
> >> >> >
> >> >> >                oldSearcher.close();
> >> >> >
> >> >> >                System.out.println("Closed Searcher: " +
> >> >> > oldSearcher.getIndexReader().directory().toString());
> >> >> >
> >> >> >                System.out.println("input 'Q' to quit testing...")=
;
> >> >> >                BufferedReader br =3D new BufferedReader(new
> >> >> > InputStreamReader(System.in));
> >> >> >
> >> >> >                if (br.readLine().trim().equals("Q"))
> >> >> >                {
> >> >> >                    break;
> >> >> >                }
> >> >> >            }
> >> >> >            catch (CorruptIndexException e)
> >> >> >            {
> >> >> >                e.printStackTrace();
> >> >> >            }
> >> >> >            catch (IOException e)
> >> >> >            {
> >> >> >                e.printStackTrace();
> >> >> >            }
> >> >> >            catch (ParseException e)
> >> >> >            {
> >> >> >                e.printStackTrace();
> >> >> >            }
> >> >> >        }
> >> >> >    }
> >> >> >
> >> >> >    private String getIndexPath()
> >> >> >    {
> >> >> >        if (indexPath.equals(indexPath1))
> >> >> >        {
> >> >> >            indexPath =3D indexPath2;
> >> >> >        }
> >> >> >        else
> >> >> >        {
> >> >> >            indexPath =3D indexPath1;
> >> >> >        }
> >> >> >
> >> >> >        return indexPath;
> >> >> >    }
> >> >> >
> >> >> >     public static void copyDir(File sourceLocation, File
> >> targetLocation)
> >> >> > throws IOException
> >> >> >    {
> >> >> >        String[] children =3D sourceLocation.list();
> >> >> >        for (int i =3D 0; i < children.length; i++)
> >> >> >        {
> >> >> >            InputStream in =3D null;
> >> >> >            OutputStream out =3D null;
> >> >> >            try
> >> >> >            {
> >> >> >                in =3D new FileInputStream(new File(sourceLocation=
,
> >> >> > children[i]));
> >> >> >                out =3D new FileOutputStream(new File(targetLocati=
on,
> >> >> > children[i]));
> >> >> >
> >> >> >                byte[] buf =3D new byte[1024];
> >> >> >                int len;
> >> >> >                while ((len =3D in.read(buf)) > 0)
> >> >> >                {
> >> >> >                    out.write(buf, 0, len);
> >> >> >                }
> >> >> >            }
> >> >> >            catch (FileNotFoundException e)
> >> >> >            {
> >> >> >                e.printStackTrace();
> >> >> >            }
> >> >> >            catch (IOException ioe)
> >> >> >            {
> >> >> >                ioe.printStackTrace();
> >> >> >            }
> >> >> >            finally
> >> >> >            {
> >> >> >                try
> >> >> >                {
> >> >> >                    if (in !=3D null)
> >> >> >                    {
> >> >> >                        in.close();
> >> >> >                    }
> >> >> >                    if (out !=3D null)
> >> >> >                    {
> >> >> >                        out.close();
> >> >> >                     }
> >> >> >                }
> >> >> >                catch (IOException e)
> >> >> >                {
> >> >> >                    e.printStackTrace();
> >> >> >                }
> >> >> >            }
> >> >> >        }
> >> >> >    }
> >> >> >
> >> >> >     public static void main(String[] args)
> >> >> >    {
> >> >> >        SearchTest searchTest =3D new SearchTest();
> >> >> >        searchTest.search();
> >> >> >    }
> >> >> >
> >> >> > }
> >> >> >
> >> >> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael M=
cCandless <lucene@mikemccandless.com
> >> >=D0=B4=B5=C0=A3=BA
> >> >> >
> >> >> > > Hmmm.
> >> >> > >
> >> >> > > When you say "locked" what actually does that mean?  Can you po=
st
> >> the
> >> >> > > exception?
> >> >> > >
> >> >> > > Also, can you whittle down your example even more?   EG if
> calling
> >> >> > > this method twice causes the problem, make a method that calls =
it
> >> >> > > twice and hits the exception and then start simplifying from
> >> there...
> >> >> > >
> >> >> > > Mike
> >> >> > >
> >> >> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
> >> >> > > > Mike, thanks for your feedback.
> >> >> > > >
> >> >> > > > I verified this in the debug mode, so I just check the folder=
 I
> >> >> closed
> >> >> > in
> >> >> > > > the last loop. Actually, both two folders are locked.
> >> >> > > >
> >> >> > > > tried with new FSDirectory every loop, no help.
> >> >> > > >
> >> >> > > > Garry
> >> >> > > >
> >> >> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
> >> >> > > >
> >> >> > > >> When you break out of the loop (user enters 'Q') you don't
> close
> >> the
> >> >> > > >> current searcher.  Could that be it?
> >> >> > > >>
> >> >> > > >> Also you are calling FSDir.open each time but should only do
> it
> >> once
> >> >> > > >> (though this should be "harmless").
> >> >> > > >>
> >> >> > > >> Mike
> >> >> > > >>
> >> >> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <
> zhitian.zhang@dianping.com
> >> >
> >> >> > > wrote:
> >> >> > > >> > Dear Luceners,
> >> >> > > >> >
> >> >> > > >> > I'm using lucene-3.0.2 in our app. There is some testing
> code
> >> for
> >> >> > > >> switching
> >> >> > > >> > index, however, when my code run a couple of times, I foun=
d
> the
> >> >> > index
> >> >> > > >> file
> >> >> > > >> > was locked, I can not delete the old index files.
> >> >> > > >> >
> >> >> > > >> >
> >> >> > > >> > The code looks like:
> >> >> > > >> >
> >> >> > > >> > public class SearchTest
> >> >> > > >> > {
> >> >> > > >> >
> >> >> > > >> >    private static final int MAX_RESULT =3D 10000;
> >> >> > > >> >
> >> >> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
> >> >> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
> >> >> > > >> >
> >> >> > > >> >    private String indexPath =3D indexPath1;
> >> >> > > >> >
> >> >> > > >> >    private Analyzer analyzer =3D new
> >> >> > > StandardAnalyzer(Version.LUCENE_30);
> >> >> > > >> >
> >> >> > > >> >    private Directory dir =3D null;
> >> >> > > >> >
> >> >> > > >> >    private IndexSearcher searcher;
> >> >> > > >> >
> >> >> > > >> >    public void search()
> >> >> > > >> >    {
> >> >> > > >> >        while(true)
> >> >> > > >> >        {
> >> >> > > >> >            try
> >> >> > > >> >            {
> >> >> > > >> >                String keyword =3D "test";
> >> >> > > >> >                String fieldName =3D "searchfield";
> >> >> > > >> >
> >> >> > > >> >                if(dir =3D=3D null)
> >> >> > > >> >                {
> >> >> > > >> >                    dir =3D FSDirectory.open(new
> File(indexPath));
> >> >> > > >> >                }
> >> >> > > >> >                searcher =3D new IndexSearcher(dir);
> >> >> > > >> >
> >> >> > > >> >                QueryParser queryParse =3D new
> >> >> > > >> QueryParser(Version.LUCENE_30,
> >> >> > > >> > fieldName, analyzer);
> >> >> > > >> >                Query query =3D queryParse.parse(keyword);
> >> >> > > >> >
> >> >> > > >> >                TopDocs hits =3D searcher.search(query,
> >> MAX_RESULT);
> >> >> > > >> >                int size =3D 5;
> >> >> > > >> >                if(hits.scoreDocs.length < size)
> >> >> > > >> >                {
> >> >> > > >> >                    size =3D hits.scoreDocs.length;
> >> >> > > >> >                }
> >> >> > > >> >                for (int i =3D 0; i < size; i++)
> >> >> > > >> >                {
> >> >> > > >> >                    Document doc =3D
> >> >> > searcher.doc(hits.scoreDocs[i].doc);
> >> >> > > >> >                    String text =3D doc.get(fieldName);
> >> >> > > >> >                    System.out.println("fieldContent is: " =
+
> >> text);
> >> >> > > >> >                }
> >> >> > > >> >
> >> >> > > >> >                IndexSearcher oldSearcher =3D searcher;
> >> >> > > >> >                dir =3D FSDirectory.open(new
> >> File(getIndexPath()));
> >> >> > > >> >                IndexSearcher newSearcher =3D new
> >> IndexSearcher(dir);
> >> >> > > >> >                searcher =3D newSearcher;
> >> >> > > >> >
> >> >> > > >> >                oldSearcher.close();
> >> >> > > >> >                System.out.println("Closed Searcher: " +
> >> >> > > >> > oldSearcher.getIndexReader().directory().toString());
> >> >> > > >> >
> >> >> > > >> >                System.out.println("input 'Q' to quit
> >> testing...");
> >> >> > > >> >                BufferedReader br =3D new BufferedReader(ne=
w
> >> >> > > >> > InputStreamReader(System.in));
> >> >> > > >> >
> >> >> > > >> >                if(br.readLine().trim().equals("Q"))
> >> >> > > >> >                {
> >> >> > > >> >                    break;
> >> >> > > >> >                }
> >> >> > > >> >            }
> >> >> > > >> >            catch (CorruptIndexException e)
> >> >> > > >> >            {
> >> >> > > >> >                e.printStackTrace();
> >> >> > > >> >            }
> >> >> > > >> >            catch (IOException e)
> >> >> > > >> >            {
> >> >> > > >> >                e.printStackTrace();
> >> >> > > >> >            }
> >> >> > > >> >            catch (ParseException e)
> >> >> > > >> >            {
> >> >> > > >> >                e.printStackTrace();
> >> >> > > >> >            }
> >> >> > > >> >        }
> >> >> > > >> >    }
> >> >> > > >> >
> >> >> > > >> >    private String getIndexPath()
> >> >> > > >> >    {
> >> >> > > >> >        if(indexPath.equals(indexPath1))
> >> >> > > >> >        {
> >> >> > > >> >            indexPath =3D indexPath2;
> >> >> > > >> >        }
> >> >> > > >> >        else
> >> >> > > >> >        {
> >> >> > > >> >            indexPath =3D indexPath1;
> >> >> > > >> >        }
> >> >> > > >> >
> >> >> > > >> >        return indexPath;
> >> >> > > >> >    }
> >> >> > > >> >
> >> >> > > >> >    public static void main(String[] args)
> >> >> > > >> >    {
> >> >> > > >> >        SearchTest searchTest =3D new SearchTest();
> >> >> > > >> >        searchTest.search();
> >> >> > > >> >    }
> >> >> > > >> >
> >> >> > > >> > }
> >> >> > > >> >
> >> >> > > >> > Can anybody take a look at the above code snippet?
> >> >> > > >> >
> >> >> > > >> > I want to search on the different index file every time so=
 I
> >> >> created
> >> >> > > two
> >> >> > > >> > different folders and switch them time to time. The index
> files
> >> in
> >> >> > the
> >> >> > > >> > index1/index2 maybe replaced before the search request
> comes.
> >> >> > > >> >
> >> >> > > >> > The problem I found is after I ran the above code 2 or mor=
e
> >> loops,
> >> >> I
> >> >> > > can
> >> >> > > >> not
> >> >> > > >> > modify/delete the cfs/cfx file in the file system(Windows
> >> 2003),
> >> >> > > although
> >> >> > > >> I
> >> >> > > >> > closed the searcher every time in the code. It seems that
> the
> >> >> index
> >> >> > > file
> >> >> > > >> is
> >> >> > > >> > not released.
> >> >> > > >> >
> >> >> > > >> > Is the problem caused by the shared reference of searcher?
> or
> >> some
> >> >> > > shared
> >> >> > > >> > thread in the lucene?
> >> >> > > >> >
> >> >> > > >> > Thanks in advance!
> >> >> > > >> > Garry
> >> >> > > >> >
> >> >> > > >>
> >> >> > > >
> >> >> > > >
> >> >> > > >
> >> >> > > > --
> >> >> > > > =D5=C5=D6=BE=CC=EF
> >> >> > > >
> >> >> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> >> >> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >> >> > > >
> >> >> > >
> >> >> > >
> >> ---------------------------------------------------------------------
> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >> >> > >
> >> >> > >
> >> >> >
> >> >> >
> >> >> > --
> >> >> > =D5=C5=D6=BE=CC=EF
> >> >> >
> >> >> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> >> >> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >> >> >
> >> >>
> >> >
> >> >
> >> >
> >> > --
> >> > =D5=C5=D6=BE=CC=EF
> >> >
> >> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
> >> > =B5=E7=BB=B0=A3=BA52521070 - 1675
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016363b7f4ab853c80499b83abb--

From java-user-return-48332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 11:01:29 2011
Return-Path: <java-user-return-48332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10319 invoked from network); 13 Jan 2011 11:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 11:01:29 -0000
Received: (qmail 93713 invoked by uid 500); 13 Jan 2011 11:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93647 invoked by uid 500); 13 Jan 2011 11:01:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92598 invoked by uid 99); 13 Jan 2011 11:01:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 11:01:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 11:01:14 +0000
Received: by bwz8 with SMTP id 8so1581894bwz.35
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 03:00:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=VduguNTA40tCFaO2G32SgZseRug0wmcYXEKAqF8A05U=;
        b=xGKKXq9WQQwI0tZvdkGOKLiPjuMtJhHVRp22bBEjvPqUaeoubCcUHoTq0Xo9zyb0f1
         OrWAdcw5UN87+2xAv0PE95tDjfzfNGUbbKPi5rjopfhPaq+HbsItxFGTtncOPJfqrAvV
         WE4gmHHFFXvdf7h0XBAB9b8hgHy9Hjh2F6jt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=kkDSNDJPy8z68dGSOu0UrNhDhL+iqFRMkWhOAV+w/CMN3PRO9b0Uf4+PNUGfz7cB2v
         ZATekrckMN+FB7eL0hZ1bhMC01PPCnUB+/5xVXJWKp+hn+UIGx7XdA3IuoAJX2NkZciR
         2ZiK8lbIR2KAynpdP1hdhCFdIFP2qbeeCa84E=
Received: by 10.204.78.67 with SMTP id j3mr1685545bkk.144.1294916454525; Thu,
 13 Jan 2011 03:00:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Thu, 13 Jan 2011 03:00:34 -0800 (PST)
In-Reply-To: <AANLkTimZkZoB33c-FTQKxE-0ALuJZ1ZvxVYGaK5XcJ-f@mail.gmail.com>
References: <AANLkTik3Bm1URP5e=pAvxaBTy9u9EF7itKsfm1QhZXD=@mail.gmail.com>
 <AANLkTikSDRsDy_Ua7iGteR47TKN2WUU4z0ZCeo3wbDHQ@mail.gmail.com>
 <AANLkTi=qiUQPdi83tEbiFLq25o53hJ-onMO-gW6wMk6j@mail.gmail.com>
 <AANLkTimx3CMkFZxb2SML+0vhXUzDbsynjczTgjUrKvox@mail.gmail.com>
 <AANLkTimZ7XHp9BQjWe_b_TZ7NjpoFj2y=qermww2B5_r@mail.gmail.com>
 <AANLkTi=im3Ypdb23Rv2T-aiaLhdXD0Vx4uqAHj82f1QJ@mail.gmail.com>
 <AANLkTi=G02jvMLWeLriOFMCpFsUjGCaNZVa+Y4rw2xtP@mail.gmail.com>
 <AANLkTins0m=nriVeRd9fPQrFSS-5hcYW19rVgtwAR=qf@mail.gmail.com>
 <AANLkTikG+3XyO6ZxxewP+bmXCB2QSjfD=Ti82Jw8_8vm@mail.gmail.com> <AANLkTimZkZoB33c-FTQKxE-0ALuJZ1ZvxVYGaK5XcJ-f@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 Jan 2011 11:00:34 +0000
Message-ID: <AANLkTimOvpt-4jX6tRkMG4UTSedU2NWfWS2kZ_hfkqUc@mail.gmail.com>
Subject: Re: Can not delete index file after close the IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In fact it's probably as simple as

   if (searcher =3D=3D null) {
      searcher =3D new IndexSearcher(dir);
   }

at the top of the loop.


--
Ian.

2011/1/13 Ian Lea <ian.lea@gmail.com>:
> As I said, there is probably a better solution.  At the moment you are
> opening searchers at the top and bottom of the loop and on second and
> subsequent passes you are not closing the bottom one, that you've only
> just opened, before opening a new one using the same instance
> variable.  The resources of the bottom one would presumably be
> released eventually by GC, but evidently not soon enough,
>
> Replace the top searcher =3D new IndexSearcher(dir); line with
>
> if (needToOpenNewSearcher()) {
>   ...
> }
>
> where the logic in needToOpenNewSearcher() is for you to write.
>
>
> --
> Ian.
>
>
> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>> Ian, thanks for your response. Your suggestion worked for me.
>>
>> What does oldSearcher.close() do in my code? why I have to close the
>> searcher and oldSearcher together? In my opinion, oldSearcher held index=
1
>> while searcher held index2, they are using different resources, the
>> resources held by them should be released seperately.
>>
>> I have another concern for your solution, searcher is a reference create=
d
>> here for user searching out of this code snippet, if I closed and reopen=
 it
>> here, there may be some service down time because there is no open searc=
her
>> for using.
>>
>> In my original code, searcher opened all the time, so there is no servic=
e
>> down time or little, this is the reason I did not close it every time. D=
o
>> you have any suggestion to keep an alive searcher and the program can al=
so
>> switch the index smoothly?
>>
>> Thanks,
>> Garry
>>
>>
>>
>> =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =CF=C2=CE=E75:47=A3=ACIan Lea <ian.lea@=
gmail.com>=D0=B4=B5=C0=A3=BA
>>
>>> Try adding
>>>
>>>      try { searcher.close(); } catch (Exception e) { }
>>>
>>> before
>>>
>>>      searcher =3D new IndexSearcher(dir);
>>>
>>> at the top of the loop.
>>>
>>> At the end of a loop searcher is open, and is not closed before being
>>> reassigned.  There is probably a better solution along the lines of
>>> only opening new searcher if need to.
>>>
>>>
>>> --
>>> Ian.
>>>
>>> 2011/1/13 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>>> > Hi Yuhan,
>>> >
>>> > dir.close() can not solve the problem.
>>> >
>>> > The reason I have to close the old searcher is my program will replac=
e
>>> the
>>> > old index, the code posted here is just a scenario to simplify my
>>> question.
>>> >
>>> > Thanks,
>>> > Garry
>>> >
>>> > =D4=DA 2011=C4=EA1=D4=C213=C8=D5 =C9=CF=CE=E710:45=A3=ACYuhan Zhang <=
yzhang@onescreen.com>=D0=B4=B5=C0=A3=BA
>>> >
>>> >> Hi Garry,
>>> >>
>>> >> I am guessing the directory needs to be closed before opening a new =
one.
>>> >>
>>> >> dir.close();
>>> >> dir =3D FSDirectory.open(new File(getIndexPath()));
>>> >>
>>> >> why not to open two IndexSearcher objects in an array of two instead=
 of
>>> >> swapping them back and forth?
>>> >> it would be a lot easier.
>>> >>
>>> >> yuhan
>>> >>
>>> >> 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>
>>> >>
>>> >> > Hi Mike,
>>> >> >
>>> >> > Sorry to make you confused. "lock" means the file handle is held b=
y
>>> some
>>> >> > other progress, the program can not delete it. There is no excepti=
on,
>>> I
>>> >> can
>>> >> > see file.delete() method returns false. If I delete the cfs file i=
n
>>> the
>>> >> OS
>>> >> > manually, the warning is "File was using by another person or prog=
ram"
>>> >> >
>>> >> > To simplify my question, I made some more code for testing. you ca=
n
>>> run
>>> >> it
>>> >> > for reproducing, after two loops, you will see the message e.g. "C=
an
>>> not
>>> >> > delete file: D:\index\index2\_0.cfs"
>>> >> >
>>> >> >
>>> >> > Thank you very much
>>> >> >
>>> >> >
>>> >> > public class SearchTest
>>> >> > {
>>> >> >
>>> >> >    private static final int MAX_RESULT =3D 10000;
>>> >> >
>>> >> >    private String indexPath1 =3D "D:\\index\\index1";
>>> >> >
>>> >> >    private String indexPath2 =3D "D:\\index\\index2";
>>> >> >
>>> >> >     private String backupIndexpath =3D "D:\\index\\index3";
>>> >> >
>>> >> >    private String indexPath =3D indexPath1;
>>> >> >
>>> >> >    private Analyzer analyzer =3D new
>>> StandardAnalyzer(Version.LUCENE_30);
>>> >> >
>>> >> >     private IndexSearcher searcher;
>>> >> >
>>> >> >    public void search()
>>> >> >    {
>>> >> >        while (true)
>>> >> >        {
>>> >> >            try
>>> >> >            {
>>> >> >                String keyword =3D "test";
>>> >> >                String fieldName =3D "searchfield";
>>> >> >
>>> >> >                 Directory dir =3D FSDirectory.open(new File(indexP=
ath));
>>> >> >
>>> >> >                searcher =3D new IndexSearcher(dir);
>>> >> >
>>> >> >                QueryParser queryParse =3D new
>>> >> QueryParser(Version.LUCENE_30,
>>> >> > fieldName, analyzer);
>>> >> >                Query query =3D queryParse.parse(keyword);
>>> >> >
>>> >> >                TopDocs hits =3D searcher.search(query, MAX_RESULT)=
;
>>> >> >                int size =3D 5;
>>> >> >                if (hits.scoreDocs.length < size)
>>> >> >                {
>>> >> >                    size =3D hits.scoreDocs.length;
>>> >> >                }
>>> >> >                for (int i =3D 0; i < size; i++)
>>> >> >                {
>>> >> >                    Document doc =3D searcher.doc(hits.scoreDocs[i]=
.doc);
>>> >> >                    String text =3D doc.get(fieldName);
>>> >> >                    System.out.println("fieldContent is: " + text);
>>> >> >                }
>>> >> >
>>> >> >                IndexSearcher oldSearcher =3D searcher;
>>> >> >
>>> >> >                 File newFile =3D new File(getIndexPath());
>>> >> >                for (File file : newFile.listFiles())
>>> >> >                {
>>> >> >                    if (!file.delete())
>>> >> >                    {
>>> >> >                        System.out.println("Can not delete file: " =
+
>>> >> > file.getAbsolutePath());
>>> >> >                    }
>>> >> >                }
>>> >> >
>>> >> >                // Copy index File from another folder to this fold=
er
>>> >> >                copyDir(new File(backupIndexpath), newFile);
>>> >> >
>>> >> >                Directory newDir =3D FSDirectory.open(newFile);
>>> >> >                IndexSearcher newSearcher =3D new IndexSearcher(new=
Dir);
>>> >> >                 searcher =3D newSearcher;
>>> >> >
>>> >> >                oldSearcher.close();
>>> >> >
>>> >> >                System.out.println("Closed Searcher: " +
>>> >> > oldSearcher.getIndexReader().directory().toString());
>>> >> >
>>> >> >                System.out.println("input 'Q' to quit testing...");
>>> >> >                BufferedReader br =3D new BufferedReader(new
>>> >> > InputStreamReader(System.in));
>>> >> >
>>> >> >                if (br.readLine().trim().equals("Q"))
>>> >> >                {
>>> >> >                    break;
>>> >> >                }
>>> >> >            }
>>> >> >            catch (CorruptIndexException e)
>>> >> >            {
>>> >> >                e.printStackTrace();
>>> >> >            }
>>> >> >            catch (IOException e)
>>> >> >            {
>>> >> >                e.printStackTrace();
>>> >> >            }
>>> >> >            catch (ParseException e)
>>> >> >            {
>>> >> >                e.printStackTrace();
>>> >> >            }
>>> >> >        }
>>> >> >    }
>>> >> >
>>> >> >    private String getIndexPath()
>>> >> >    {
>>> >> >        if (indexPath.equals(indexPath1))
>>> >> >        {
>>> >> >            indexPath =3D indexPath2;
>>> >> >        }
>>> >> >        else
>>> >> >        {
>>> >> >            indexPath =3D indexPath1;
>>> >> >        }
>>> >> >
>>> >> >        return indexPath;
>>> >> >    }
>>> >> >
>>> >> >     public static void copyDir(File sourceLocation, File
>>> targetLocation)
>>> >> > throws IOException
>>> >> >    {
>>> >> >        String[] children =3D sourceLocation.list();
>>> >> >        for (int i =3D 0; i < children.length; i++)
>>> >> >        {
>>> >> >            InputStream in =3D null;
>>> >> >            OutputStream out =3D null;
>>> >> >            try
>>> >> >            {
>>> >> >                in =3D new FileInputStream(new File(sourceLocation,
>>> >> > children[i]));
>>> >> >                out =3D new FileOutputStream(new File(targetLocatio=
n,
>>> >> > children[i]));
>>> >> >
>>> >> >                byte[] buf =3D new byte[1024];
>>> >> >                int len;
>>> >> >                while ((len =3D in.read(buf)) > 0)
>>> >> >                {
>>> >> >                    out.write(buf, 0, len);
>>> >> >                }
>>> >> >            }
>>> >> >            catch (FileNotFoundException e)
>>> >> >            {
>>> >> >                e.printStackTrace();
>>> >> >            }
>>> >> >            catch (IOException ioe)
>>> >> >            {
>>> >> >                ioe.printStackTrace();
>>> >> >            }
>>> >> >            finally
>>> >> >            {
>>> >> >                try
>>> >> >                {
>>> >> >                    if (in !=3D null)
>>> >> >                    {
>>> >> >                        in.close();
>>> >> >                    }
>>> >> >                    if (out !=3D null)
>>> >> >                    {
>>> >> >                        out.close();
>>> >> >                     }
>>> >> >                }
>>> >> >                catch (IOException e)
>>> >> >                {
>>> >> >                    e.printStackTrace();
>>> >> >                }
>>> >> >            }
>>> >> >        }
>>> >> >    }
>>> >> >
>>> >> >     public static void main(String[] args)
>>> >> >    {
>>> >> >        SearchTest searchTest =3D new SearchTest();
>>> >> >        searchTest.search();
>>> >> >    }
>>> >> >
>>> >> > }
>>> >> >
>>> >> > =D4=DA 2011=C4=EA1=D4=C212=C8=D5 =CF=C2=CE=E711:53=A3=ACMichael Mc=
Candless <lucene@mikemccandless.com
>>> >=D0=B4=B5=C0=A3=BA
>>> >> >
>>> >> > > Hmmm.
>>> >> > >
>>> >> > > When you say "locked" what actually does that mean?  Can you pos=
t
>>> the
>>> >> > > exception?
>>> >> > >
>>> >> > > Also, can you whittle down your example even more?   EG if calli=
ng
>>> >> > > this method twice causes the problem, make a method that calls i=
t
>>> >> > > twice and hits the exception and then start simplifying from
>>> there...
>>> >> > >
>>> >> > > Mike
>>> >> > >
>>> >> > > 2011/1/12 =D5=C5=D6=BE=CC=EF <zhitian.zhang@dianping.com>:
>>> >> > > > Mike, thanks for your feedback.
>>> >> > > >
>>> >> > > > I verified this in the debug mode, so I just check the folder =
I
>>> >> closed
>>> >> > in
>>> >> > > > the last loop. Actually, both two folders are locked.
>>> >> > > >
>>> >> > > > tried with new FSDirectory every loop, no help.
>>> >> > > >
>>> >> > > > Garry
>>> >> > > >
>>> >> > > > 2011/1/12 Michael McCandless <lucene@mikemccandless.com>
>>> >> > > >
>>> >> > > >> When you break out of the loop (user enters 'Q') you don't cl=
ose
>>> the
>>> >> > > >> current searcher.  Could that be it?
>>> >> > > >>
>>> >> > > >> Also you are calling FSDir.open each time but should only do =
it
>>> once
>>> >> > > >> (though this should be "harmless").
>>> >> > > >>
>>> >> > > >> Mike
>>> >> > > >>
>>> >> > > >> On Wed, Jan 12, 2011 at 5:39 AM, =D5=C5=D6=BE=CC=EF <zhitian.=
zhang@dianping.com
>>> >
>>> >> > > wrote:
>>> >> > > >> > Dear Luceners,
>>> >> > > >> >
>>> >> > > >> > I'm using lucene-3.0.2 in our app. There is some testing co=
de
>>> for
>>> >> > > >> switching
>>> >> > > >> > index, however, when my code run a couple of times, I found=
 the
>>> >> > index
>>> >> > > >> file
>>> >> > > >> > was locked, I can not delete the old index files.
>>> >> > > >> >
>>> >> > > >> >
>>> >> > > >> > The code looks like:
>>> >> > > >> >
>>> >> > > >> > public class SearchTest
>>> >> > > >> > {
>>> >> > > >> >
>>> >> > > >> >    private static final int MAX_RESULT =3D 10000;
>>> >> > > >> >
>>> >> > > >> >    private String indexPath1 =3D "D:\\index\\index1";
>>> >> > > >> >    private String indexPath2 =3D "D:\\index\\index2";
>>> >> > > >> >
>>> >> > > >> >    private String indexPath =3D indexPath1;
>>> >> > > >> >
>>> >> > > >> >    private Analyzer analyzer =3D new
>>> >> > > StandardAnalyzer(Version.LUCENE_30);
>>> >> > > >> >
>>> >> > > >> >    private Directory dir =3D null;
>>> >> > > >> >
>>> >> > > >> >    private IndexSearcher searcher;
>>> >> > > >> >
>>> >> > > >> >    public void search()
>>> >> > > >> >    {
>>> >> > > >> >        while(true)
>>> >> > > >> >        {
>>> >> > > >> >            try
>>> >> > > >> >            {
>>> >> > > >> >                String keyword =3D "test";
>>> >> > > >> >                String fieldName =3D "searchfield";
>>> >> > > >> >
>>> >> > > >> >                if(dir =3D=3D null)
>>> >> > > >> >                {
>>> >> > > >> >                    dir =3D FSDirectory.open(new File(indexP=
ath));
>>> >> > > >> >                }
>>> >> > > >> >                searcher =3D new IndexSearcher(dir);
>>> >> > > >> >
>>> >> > > >> >                QueryParser queryParse =3D new
>>> >> > > >> QueryParser(Version.LUCENE_30,
>>> >> > > >> > fieldName, analyzer);
>>> >> > > >> >                Query query =3D queryParse.parse(keyword);
>>> >> > > >> >
>>> >> > > >> >                TopDocs hits =3D searcher.search(query,
>>> MAX_RESULT);
>>> >> > > >> >                int size =3D 5;
>>> >> > > >> >                if(hits.scoreDocs.length < size)
>>> >> > > >> >                {
>>> >> > > >> >                    size =3D hits.scoreDocs.length;
>>> >> > > >> >                }
>>> >> > > >> >                for (int i =3D 0; i < size; i++)
>>> >> > > >> >                {
>>> >> > > >> >                    Document doc =3D
>>> >> > searcher.doc(hits.scoreDocs[i].doc);
>>> >> > > >> >                    String text =3D doc.get(fieldName);
>>> >> > > >> >                    System.out.println("fieldContent is: " +
>>> text);
>>> >> > > >> >                }
>>> >> > > >> >
>>> >> > > >> >                IndexSearcher oldSearcher =3D searcher;
>>> >> > > >> >                dir =3D FSDirectory.open(new
>>> File(getIndexPath()));
>>> >> > > >> >                IndexSearcher newSearcher =3D new
>>> IndexSearcher(dir);
>>> >> > > >> >                searcher =3D newSearcher;
>>> >> > > >> >
>>> >> > > >> >                oldSearcher.close();
>>> >> > > >> >                System.out.println("Closed Searcher: " +
>>> >> > > >> > oldSearcher.getIndexReader().directory().toString());
>>> >> > > >> >
>>> >> > > >> >                System.out.println("input 'Q' to quit
>>> testing...");
>>> >> > > >> >                BufferedReader br =3D new BufferedReader(new
>>> >> > > >> > InputStreamReader(System.in));
>>> >> > > >> >
>>> >> > > >> >                if(br.readLine().trim().equals("Q"))
>>> >> > > >> >                {
>>> >> > > >> >                    break;
>>> >> > > >> >                }
>>> >> > > >> >            }
>>> >> > > >> >            catch (CorruptIndexException e)
>>> >> > > >> >            {
>>> >> > > >> >                e.printStackTrace();
>>> >> > > >> >            }
>>> >> > > >> >            catch (IOException e)
>>> >> > > >> >            {
>>> >> > > >> >                e.printStackTrace();
>>> >> > > >> >            }
>>> >> > > >> >            catch (ParseException e)
>>> >> > > >> >            {
>>> >> > > >> >                e.printStackTrace();
>>> >> > > >> >            }
>>> >> > > >> >        }
>>> >> > > >> >    }
>>> >> > > >> >
>>> >> > > >> >    private String getIndexPath()
>>> >> > > >> >    {
>>> >> > > >> >        if(indexPath.equals(indexPath1))
>>> >> > > >> >        {
>>> >> > > >> >            indexPath =3D indexPath2;
>>> >> > > >> >        }
>>> >> > > >> >        else
>>> >> > > >> >        {
>>> >> > > >> >            indexPath =3D indexPath1;
>>> >> > > >> >        }
>>> >> > > >> >
>>> >> > > >> >        return indexPath;
>>> >> > > >> >    }
>>> >> > > >> >
>>> >> > > >> >    public static void main(String[] args)
>>> >> > > >> >    {
>>> >> > > >> >        SearchTest searchTest =3D new SearchTest();
>>> >> > > >> >        searchTest.search();
>>> >> > > >> >    }
>>> >> > > >> >
>>> >> > > >> > }
>>> >> > > >> >
>>> >> > > >> > Can anybody take a look at the above code snippet?
>>> >> > > >> >
>>> >> > > >> > I want to search on the different index file every time so =
I
>>> >> created
>>> >> > > two
>>> >> > > >> > different folders and switch them time to time. The index f=
iles
>>> in
>>> >> > the
>>> >> > > >> > index1/index2 maybe replaced before the search request come=
s.
>>> >> > > >> >
>>> >> > > >> > The problem I found is after I ran the above code 2 or more
>>> loops,
>>> >> I
>>> >> > > can
>>> >> > > >> not
>>> >> > > >> > modify/delete the cfs/cfx file in the file system(Windows
>>> 2003),
>>> >> > > although
>>> >> > > >> I
>>> >> > > >> > closed the searcher every time in the code. It seems that t=
he
>>> >> index
>>> >> > > file
>>> >> > > >> is
>>> >> > > >> > not released.
>>> >> > > >> >
>>> >> > > >> > Is the problem caused by the shared reference of searcher? =
or
>>> some
>>> >> > > shared
>>> >> > > >> > thread in the lucene?
>>> >> > > >> >
>>> >> > > >> > Thanks in advance!
>>> >> > > >> > Garry
>>> >> > > >> >
>>> >> > > >>
>>> >> > > >
>>> >> > > >
>>> >> > > >
>>> >> > > > --
>>> >> > > > =D5=C5=D6=BE=CC=EF
>>> >> > > >
>>> >> > > > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>>> >> > > > =B5=E7=BB=B0=A3=BA52521070 - 1675
>>> >> > > >
>>> >> > >
>>> >> > >
>>> ---------------------------------------------------------------------
>>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>> >> > >
>>> >> > >
>>> >> >
>>> >> >
>>> >> > --
>>> >> > =D5=C5=D6=BE=CC=EF
>>> >> >
>>> >> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>>> >> > =B5=E7=BB=B0=A3=BA52521070 - 1675
>>> >> >
>>> >>
>>> >
>>> >
>>> >
>>> > --
>>> > =D5=C5=D6=BE=CC=EF
>>> >
>>> > =B4=F3=D6=DA=B5=E3=C6=C0=CD=F8 - =BC=BC=CA=F5=B2=BF
>>> > =B5=E7=BB=B0=A3=BA52521070 - 1675
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 12:11:07 2011
Return-Path: <java-user-return-48333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41653 invoked from network); 13 Jan 2011 12:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 12:11:06 -0000
Received: (qmail 60919 invoked by uid 500); 13 Jan 2011 12:11:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60521 invoked by uid 500); 13 Jan 2011 12:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60507 invoked by uid 99); 13 Jan 2011 12:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 12:10:59 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.118] (HELO web30505.mail.mud.yahoo.com) (68.142.200.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jan 2011 12:10:51 +0000
Received: (qmail 36736 invoked by uid 60001); 13 Jan 2011 12:10:30 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294920630; bh=RCe4i7ZLduvxX4f93sgHePDLwbM3+SZKXZny94LFVoc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=tFy+3l7BBK6vtOSpWPoVmUtEHJUdzWdVTahgZ0KLm9ZhqZ7/cW5wBJ43qsffcvE6alDkI0990MGQqDzCNELcz5smH+/A8VAzFBIkbRHnvC7CO/wnzWLN89sEp0/DRfNC7ocqcSAkt7nfRxQvhLosqOsgHClbA76B2nfkwEgZOo0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=m3l+krwi09yKVJ6fhnDQr/RHQFvOek5WhNqJz6xsncqPdgBPwSCHcG/RBshA74FpluaDKUUj24gUdo08kH/7YjwrRoa1HmicVEVXvT6zVr1/zNF3YwmF8BK9S3JrrmIlsATTXFzFL0s357x/00G53/NPRU4Azh4Om+j3F8AQkgE=;
Message-ID: <175987.36188.qm@web30505.mail.mud.yahoo.com>
X-YMail-OSG: GwPdjBEVM1nbqQEpBEK7qQ80QSen3mJtEONenggJhHvmo90
 kXaFzWaRiphgWcyZ5DkDuhLrcnDiXwqNTdJJ_hexRD1Z8QZBNSW9reUOh5fv
 ZNjy2B0ENaikKAW9v.3Ao7.0R5JFrK.XaQ_lun0XiMhDc8ccoTf7x_pCuxk7
 o3NcNmPAm3.ZK1tlD.Tf_QASGoCUKXB5eRd0dO6R1N7oMmOMLoVgT0Wb5VEl
 N8GsTb9RCmYk6sQl.s6YDrV7sjHfrMXKdQ.aR_EwHgvz_ryxBKQAyCvMfXw_
 Dl6lGOU5y
Received: from [212.143.35.226] by web30505.mail.mud.yahoo.com via HTTP; Thu, 13 Jan 2011 04:10:29 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Thu, 13 Jan 2011 04:10:29 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Maintaining index for "flattened" database tables
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2075676929-1294920629=:36188"

--0-2075676929-1294920629=:36188
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

Our main data storage is MySql tables.
We index it on Lucene in order to improve the search (boosting, proximate s=
pelling, etc).
We naturally maintain it - for example, to insert a new "Contract" entity, =
we have:
addContract(Contract cont){
=A0=A0=A0=A0 // INSERT into MySQL:
=A0=A0=A0=A0 hibernateSession.save(cont);=20
=A0=A0=A0=A0 // Index in Lucene:
=A0=A0=A0=A0 Document d=3Dnew Document();
=A0=A0=A0=A0 d.addField(new Field ("title", cont.getTitle()...)=A0=A0 =A0
=A0=A0=A0=A0 d.addField(new Field ("body", cont.getBody()...)=A0=A0 =A0
=A0=A0=A0=A0 indexWriter.addDocument(d);
=A0=A0=A0=A0 ...
}

This works, but becomes a maintenance nightmare when the index fields are c=
ollected from JOINS. For example, we also want Lucene to search contracts b=
y "author name", which is taken from another table AUTHOR (through Foreign =
Key). And then if the author name changes (e.g. through marriage), you must=
 remember to re-index all her contracts...!

Does anyone have experience with such database/lucene combination, and know=
s of a solution that would be reasonable to maintain?
Thanks.=0A=0A=0A      
--0-2075676929-1294920629=:36188--

From java-user-return-48334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 12:54:49 2011
Return-Path: <java-user-return-48334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56418 invoked from network); 13 Jan 2011 12:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 12:54:49 -0000
Received: (qmail 23022 invoked by uid 500); 13 Jan 2011 12:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22566 invoked by uid 500); 13 Jan 2011 12:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22551 invoked by uid 99); 13 Jan 2011 12:54:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 12:54:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 12:54:32 +0000
Received: from brouwer.fritz.box (srbk-5d803552.pool.mediaWays.net [93.128.53.82])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0MQdCf-1Pj2VD3kS5-00U4SY; Thu, 13 Jan 2011 13:54:11 +0100
From: Paul Libbrecht <paul@hoplahup.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: lucene-based log searcher?
Date: Thu, 13 Jan 2011 13:54:08 +0100
Message-Id: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:kJjdwdiLOhaB4ueQZzumdbZ660P+7qM0/a9kP/pn9v8
 z9jkYczfXYddk16wF1wpIP7pYpA3iEKki8zXy9i5nCHtNIUgms
 378ylTLwIEPuAmV3gfC0YVTkI1S10WNI+CBLxjLy+oya6xFH7j
 bmFZt+I0xfCjZxgf6umxJ9HDloq+dMTLy0dJeVhI5wEizXSdJZ
 3UX0PjrXwttoyOk/stwxnREZhhpmX/lfHJ7GI7jubs=
X-Virus-Checked: Checked by ClamAV on apache.org


Hello list,

has anyone built a log-analyzer based on Lucene?
Our logs are so big that grep takes more hours to do what I want it to do.
I'm sure Lucene would solve it.

Thanks in advance
paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 13:40:20 2011
Return-Path: <java-user-return-48335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75190 invoked from network); 13 Jan 2011 13:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 13:40:19 -0000
Received: (qmail 89286 invoked by uid 500); 13 Jan 2011 13:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88890 invoked by uid 500); 13 Jan 2011 13:40:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88881 invoked by uid 99); 13 Jan 2011 13:40:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 13:40:13 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 13:40:05 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p0DDdiQR022937
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 08:39:44 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Thu, 13 Jan 2011
 08:39:43 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 13 Jan 2011 08:39:02 -0500
Subject: RE: lucene-based log searcher?
Thread-Topic: lucene-based log searcher?
Thread-Index: AcuzIRO4j23+pUbuSQCF13Z45mnDgQABdIlA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F88737C71@suex07-mbx-03.ad.syr.edu>
References: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
In-Reply-To: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-01-13_06:2011-01-13,2011-01-13,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgUGF1bCwNCg0KSSBzYXcgdGhpcyB5ZXN0ZXJkYXksIGJ1dCBoYXZlbid0IHRyaWVkIGl0IG15
c2VsZjoNCg0KaHR0cDovL2thcnVzc2VsbC53b3JkcHJlc3MuY29tLzIwMTAvMTAvMjcvZmVlZGlu
Zy1zb2xyLXdpdGgtaXRzLW93bi1sb2dzLw0KDQpUaGUgYXV0aG9yIGhhcyBhIHByb2plY3QgY2Fs
bGVkICJTb2dnZXIiIC0gU29sciArIExvZ2dlcj8gLSB0aGF0IGNhbiByZWFkIHZhcmlvdXMgZm9y
bXMgb2YgbG9ncy4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBG
cm9tOiBQYXVsIExpYmJyZWNodCBbbWFpbHRvOnBhdWxAaG9wbGFodXAubmV0XQ0KPiBTZW50OiBU
aHVyc2RheSwgSmFudWFyeSAxMywgMjAxMSA3OjU0IEFNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmcNCj4gU3ViamVjdDogbHVjZW5lLWJhc2VkIGxvZyBzZWFyY2hlcj8NCj4gDQo+
IA0KPiBIZWxsbyBsaXN0LA0KPiANCj4gaGFzIGFueW9uZSBidWlsdCBhIGxvZy1hbmFseXplciBi
YXNlZCBvbiBMdWNlbmU/DQo+IE91ciBsb2dzIGFyZSBzbyBiaWcgdGhhdCBncmVwIHRha2VzIG1v
cmUgaG91cnMgdG8gZG8gd2hhdCBJIHdhbnQgaXQgdG8gZG8uDQo+IEknbSBzdXJlIEx1Y2VuZSB3
b3VsZCBzb2x2ZSBpdC4NCj4gDQo+IFRoYW5rcyBpbiBhZHZhbmNlDQo+IHBhdWwNCj4gDQo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-48336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 14:00:13 2011
Return-Path: <java-user-return-48336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80510 invoked from network); 13 Jan 2011 14:00:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 14:00:13 -0000
Received: (qmail 21076 invoked by uid 500); 13 Jan 2011 14:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20643 invoked by uid 500); 13 Jan 2011 14:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20628 invoked by uid 99); 13 Jan 2011 14:00:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 14:00:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 13:59:56 +0000
Received: by wwd20 with SMTP id 20so1700862wwd.5
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 05:59:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=7VFlSvtfRaFUmB3XmTHPW+C3t+PpxTlg2lUPT8P98Bo=;
        b=Qu8iiZ074MminSU/ua/Dm3OXJ6s+fa1FLBLdPLicHf4woJ3Zl3nvSMHCfca4+BAHvL
         CMnna8prU1ZZRZMiQ7zrqx9ys4j7ViC0P1P68lXwQf4dF7ID4MhnU3qrS/1YMQCFax42
         HB2mdvpBTqbYBlzdl7U2zhFyuOVNULrX/BWcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TO3/U07Y+ac1FsdTFLjw/sqfJijLFz3rNOe/jPQLLHdB50rywP6Iu2hhSMzQmY4jbr
         37m5+DgZ2iSnb2Rcl+wFIPDEVNvrgQFqx8IC9gF4o+qakBBZIJ4FE4Jl406QQrJWHcTG
         2m+4mV8N2Qob0xdbEIfKPsIeyhVq/F1/tTVyE=
Received: by 10.216.22.131 with SMTP id t3mr2055555wet.2.1294927176436; Thu,
 13 Jan 2011 05:59:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Thu, 13 Jan 2011 05:59:16 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F88737C71@suex07-mbx-03.ad.syr.edu>
References: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net> <2D127F11DC79714E9B6A43AC9458147F88737C71@suex07-mbx-03.ad.syr.edu>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Thu, 13 Jan 2011 19:29:16 +0530
Message-ID: <AANLkTi=+HOKWrG4eO3XmZQThF+jxVyxYYn0S5rDPY5jc@mail.gmail.com>
Subject: Re: lucene-based log searcher?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c79495c8cfb0499babaa6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c79495c8cfb0499babaa6
Content-Type: text/plain; charset=ISO-8859-1

Checkout http://code.google.com/p/lucene-log4j/


On Thu, Jan 13, 2011 at 7:09 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Paul,
>
> I saw this yesterday, but haven't tried it myself:
>
> http://karussell.wordpress.com/2010/10/27/feeding-solr-with-its-own-logs/
>
> The author has a project called "Sogger" - Solr + Logger? - that can read
> various forms of logs.
>
> Steve
>
> > -----Original Message-----
> > From: Paul Libbrecht [mailto:paul@hoplahup.net]
> > Sent: Thursday, January 13, 2011 7:54 AM
> > To: java-user@lucene.apache.org
> > Subject: lucene-based log searcher?
> >
> >
> > Hello list,
> >
> > has anyone built a log-analyzer based on Lucene?
> > Our logs are so big that grep takes more hours to do what I want it to
> do.
> > I'm sure Lucene would solve it.
> >
> > Thanks in advance
> > paul
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
---
Thanks & Regards
Umesh Prasad

--0016364c79495c8cfb0499babaa6--

From java-user-return-48337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 14:20:58 2011
Return-Path: <java-user-return-48337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93833 invoked from network); 13 Jan 2011 14:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 14:20:57 -0000
Received: (qmail 47612 invoked by uid 500); 13 Jan 2011 14:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47031 invoked by uid 500); 13 Jan 2011 14:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47018 invoked by uid 99); 13 Jan 2011 14:20:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 14:20:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.189.210] (HELO nm6-vm0.bullet.mail.ird.yahoo.com) (77.238.189.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jan 2011 14:20:40 +0000
Received: from [77.238.189.230] by nm6.bullet.mail.ird.yahoo.com with NNFMP; 13 Jan 2011 14:20:19 -0000
Received: from [212.82.108.126] by tm11.bullet.mail.ird.yahoo.com with NNFMP; 13 Jan 2011 14:20:19 -0000
Received: from [127.0.0.1] by omp1035.mail.ird.yahoo.com with NNFMP; 13 Jan 2011 14:20:19 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 399675.66933.bm@omp1035.mail.ird.yahoo.com
Received: (qmail 92996 invoked by uid 60001); 13 Jan 2011 14:20:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1294928419; bh=023kkDHH/1ZHJgeLc/SbaKT+UedOl5jyi++O+VJQl8g=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=sdDpxgdSQIcg+cpLhhcd6d4ILL5QEcIVsE1ZoXZ41vYLvnfZHe1LfnopyncAyVBdAwJalfI/ETx7xC21x5yXUw7qWbwkdmONtXvIsD76wWQW3LreNSCtVS6pL1KEgXfOrAqYXUEvX4rM1YAOT6hfKkz6smUhjXVWPI9qXxFYbfg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=s58vPtNX/eMfNLwth3WjETcUrEYaWbGjszATh0KEfMtl291/bE4j82rtrhp0deY5I7LELCmESLnA0iD9SMj+mqQ6d6nfCXkNi5T72S5Gv7/weqSn80JuOMhwspDB8D6QIWUZKpPizI8+ma3La9/3itpU4GRCp7tpOzsWb3NyjQI=;
Message-ID: <230535.91887.qm@web29014.mail.ird.yahoo.com>
X-YMail-OSG: UoY6CkUVM1lbPifnFHJ5Oo.X.exGQKx940YfvKjzma.7fUv
 sW74ad38VZLuEmMQRk3h7xVWHsRZKYkaReg1hwMId0HmaKPkVCTkkp20WPPn
 RJ_nnoZ7GoTj0bhhJLVSukPAsx6g4MlPpMbc__DsO4nHVyYRjTuyw0GcRjZO
 KO9RaCP_X3gbNl7u3of.M3KtAP2aN4C5Gmkaf60AJHNuxrMHawZVTlQsK61m
 Z8fEUM6ENB9nwx7PPZgJyeMX9C.w0P0dlzHEGL3lb3Rjl3Na0B2YmyuR8Gcx
 rydbi0U6maw6jbjpZ4KN56cXNKkQBFXMYLCrsIdeIue7jtYjzh7BngjcFMDD
 XHuOrZJ_h
Received: from [194.116.198.179] by web29014.mail.ird.yahoo.com via HTTP; Thu, 13 Jan 2011 14:20:18 GMT
X-Mailer: YahooMailRC/553 YahooMailWebService/0.8.107.285259
References: <175987.36188.qm@web30505.mail.mud.yahoo.com>
Date: Thu, 13 Jan 2011 14:20:18 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Maintaining index for "flattened" database tables
To: java-user@lucene.apache.org
In-Reply-To: <175987.36188.qm@web30505.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Probably off-topic for a Lucene list but the typical database options are:=
=0A1) an auto-updated "last changed" timestamp column on related tables tha=
t can be =0Aqueried=0A2) a database trigger automatically feeding a "to-be-=
indexed" table=0A=0AOption 1 would also need a "marked as deleted" column a=
dding to help synch =0Athings up whereas option 2 can automatically record =
create/update/delete changes =0Acleanly in a separate table.=0A=0AEither of=
 these options help you to "remember to reindex" just the changed =0Aitems.=
=0A=0ACheers=0AMark=0A=0A=0A=0A----- Original Message ----=0AFrom: sol myr =
<solmyr72@yahoo.com>=0ATo: java-user@lucene.apache.org=0ASent: Thu, 13 Janu=
ary, 2011 12:10:29=0ASubject: Maintaining index for "flattened" database ta=
bles=0A=0AHi,=0A=0AOur main data storage is MySql tables.=0AWe index it on =
Lucene in order to improve the search (boosting, proximate =0Aspelling, etc=
).=0AWe naturally maintain it - for example, to insert a new "Contract" ent=
ity, we =0Ahave:=0AaddContract(Contract cont){=0A     // INSERT into MySQL:=
=0A     hibernateSession.save(cont); =0A     // Index in Lucene:=0A     Doc=
ument d=3Dnew Document();=0A     d.addField(new Field ("title", cont.getTit=
le()...)    =0A     d.addField(new Field ("body", cont.getBody()...)    =0A=
     indexWriter.addDocument(d);=0A     ...=0A}=0A=0AThis works, but become=
s a maintenance nightmare when the index fields are =0Acollected from JOINS=
. For example, we also want Lucene to search contracts by =0A"author name",=
 which is taken from another table AUTHOR (through Foreign Key). =0AAnd the=
n if the author name changes (e.g. through marriage), you must remember =0A=
to re-index all her contracts...!=0A=0ADoes anyone have experience with suc=
h database/lucene combination, and knows of =0Aa solution that would be rea=
sonable to maintain?=0AThanks.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 14:47:15 2011
Return-Path: <java-user-return-48338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2197 invoked from network); 13 Jan 2011 14:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 14:47:14 -0000
Received: (qmail 8325 invoked by uid 500); 13 Jan 2011 14:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7957 invoked by uid 500); 13 Jan 2011 14:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7949 invoked by uid 99); 13 Jan 2011 14:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 14:47:08 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.118] (HELO web30505.mail.mud.yahoo.com) (68.142.200.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jan 2011 14:47:00 +0000
Received: (qmail 29303 invoked by uid 60001); 13 Jan 2011 14:46:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294929999; bh=4ejl3pRpgYl/qHHIrsT7qLsTnZXSzYdWOq3lfNPMd60=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=i+NA7NdPzA7tC/taPrQkiW1xIhKiNE7wESHZBmfO9YZNshC7Sr1LTggakWzgNmIC8O69MpdMRE4bFfT1znStQ5HUMVu4STlNmbys3g4YRCM+Anrc3clbSM8gt7AY3KKCzF8mj5dQ72aczfqzbbMtIEHXr/o6XC21x4XvN+U+DzE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=od5kMoZKhfpxt2pWz2dnUEnfimnL8j7YsxUhRLIlt+5vNeiuC9mElS1WLLR83dbqknWpbowgiW4RodiLrbUn+FhAzc1MM97+3HTzho5p+RqZE/hz0EkEWyBpQ5ftZNk3K/ijg5MA5Nc7/F0qs/WHH3fct1NGrZT/mzUymCI4JTI=;
Message-ID: <225594.22526.qm@web30505.mail.mud.yahoo.com>
X-YMail-OSG: FMK._gAVM1kWUHIIP5q5AgdzQjp2m5YKOt1rQ6SoPsSmd6j
 yYEOLqo82ktOacuZvVLYeYlGLlItaYMMDt3pAYco24OzvsHQscSRcYj4Rj7g
 p1vNZ15aEm7YNXsxfy6iUpN7UDug2BCrpMvDq0QPIQp.AqScGGYy0TELV8sw
 NQmmS_4Z1s9q4ZEqtIl_BY_5j4XpvRnr90ELjsq8YVTTKBW5x9IcoLue.yjw
 ZHP04YmJzySs3b3AC.6S4OcwB2VZdwRr09_HNuYSb9E2OW.I0pCsXWuQIedw
 TKZjQl4f6VNQ707iAihhhbokV4ddkVsG6bTHy3Q_xRD9hHvhn
Received: from [212.143.35.226] by web30505.mail.mud.yahoo.com via HTTP; Thu, 13 Jan 2011 06:46:38 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Thu, 13 Jan 2011 06:46:38 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Re: Maintaining index for "flattened" database tables
To: java-user@lucene.apache.org
In-Reply-To: <230535.91887.qm@web29014.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-50682678-1294929998=:22526"

--0-50682678-1294929998=:22526
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Sounds good, thanks :)

--- On Thu, 1/13/11, mark harwood <markharw00d@yahoo.co.uk> wrote:

From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Maintaining index for "flattened" database tables
To: java-user@lucene.apache.org
Date: Thursday, January 13, 2011, 6:20 AM

Probably off-topic for a Lucene list but the typical database options are:
1) an auto-updated "last changed" timestamp column on related tables that c=
an be=20
queried
2) a database trigger automatically feeding a "to-be-indexed" table

Option 1 would also need a "marked as deleted" column adding to help synch=
=20
things up whereas option 2 can automatically record create/update/delete ch=
anges=20
cleanly in a separate table.

Either of these options help you to "remember to reindex" just the changed=
=20
items.

Cheers
Mark



----- Original Message ----
From: sol myr <solmyr72@yahoo.com>
To: java-user@lucene.apache.org
Sent: Thu, 13 January, 2011 12:10:29
Subject: Maintaining index for "flattened" database tables

Hi,

Our main data storage is MySql tables.
We index it on Lucene in order to improve the search (boosting, proximate=
=20
spelling, etc).
We naturally maintain it - for example, to insert a new "Contract" entity, =
we=20
have:
addContract(Contract cont){
=A0 =A0=A0=A0// INSERT into MySQL:
=A0 =A0=A0=A0hibernateSession.save(cont);=20
=A0 =A0=A0=A0// Index in Lucene:
=A0 =A0=A0=A0Document d=3Dnew Document();
=A0 =A0=A0=A0d.addField(new Field ("title", cont.getTitle()...)=A0 =A0=20
=A0 =A0=A0=A0d.addField(new Field ("body", cont.getBody()...)=A0 =A0=20
=A0 =A0=A0=A0indexWriter.addDocument(d);
=A0 =A0=A0=A0...
}

This works, but becomes a maintenance nightmare when the index fields are=
=20
collected from JOINS. For example, we also want Lucene to search contracts =
by=20
"author name", which is taken from another table AUTHOR (through Foreign Ke=
y).=20
And then if the author name changes (e.g. through marriage), you must remem=
ber=20
to re-index all her contracts...!

Does anyone have experience with such database/lucene combination, and know=
s of=20
a solution that would be reasonable to maintain?
Thanks.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-50682678-1294929998=:22526--

From java-user-return-48339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 15:12:01 2011
Return-Path: <java-user-return-48339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15746 invoked from network); 13 Jan 2011 15:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 15:12:00 -0000
Received: (qmail 50378 invoked by uid 500); 13 Jan 2011 15:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49915 invoked by uid 500); 13 Jan 2011 15:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49907 invoked by uid 99); 13 Jan 2011 15:11:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 15:11:54 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.117] (HELO web30504.mail.mud.yahoo.com) (68.142.200.117)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jan 2011 15:11:47 +0000
Received: (qmail 33406 invoked by uid 60001); 13 Jan 2011 15:11:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1294931485; bh=QP8ZcoPX7pDrUXEY7gqVg00KGx/1PunCNul0Y1XK22k=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=3AcC208s2XISueZK0O9osmZXXwTHSGV2z8959Jx+zy0drP5X2/W+rtpMAr6vTbI8QCzhDEeF/SeNvZC3HEx1L/65tUOzjtd8Iv9Rr7RKdWN8lyXe0Xeom0FBN1qZRKde+EsicQW8s5s0TA/81OFjYoLM1jOc9vAPXKkvGXVAjPA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=iLDs2u3FaOWeGeYx50PVk0gW7geAUzYn2+bqlO56JJlmBi/3xdWnoJid3E0kz8Ikl+w4oxl0NXY8Lnu7FDu6R8Imqwisl5V8PpIGbxkYefJOkJUUT1B7jQ2e94N9eX3/4lyhSw11KgMJ9V/CdR5+tqP1hcLTpcAEmju8HvEgTqw=;
Message-ID: <871458.21689.qm@web30504.mail.mud.yahoo.com>
X-YMail-OSG: Mex4zF4VM1ltztAqMTqqteOqWfaa1hncnOC.wtKUTKgK4oq
 lx6NZVpwrkWimuV5KRQYBdXxvgfoMO2dNAAB6aMENjjIRAkjwaSvSkA9q9Df
 tyFa_A645fZ5LPbaDbfQkntgCRKMXVpTvZRTcisI8a1L.hY9exGttlxqM8OB
 FZ9OhWdLbrZg5VyfuA8US3m2Tkbe2Y9j48xI5kA2Qf4YSkCEuyOW1cvHQNSn
 O3RlE5t_pmfvxjaqqOEjaKYOwvJMOQl_SnNyeBUqSb6TO5zmYF5ubC77a2Hp
 ky3fcUJMpmJONJMNJ9e4tqmiQnrxG_duCdsrA4sn.dI7l2u4PDGN4WL1ejT3
 83ZVneo_4Z7Su0cq0LCxbPLNPStdearvVqvU01jbKIrTQWN_e8tQW02E-
Received: from [212.143.35.226] by web30504.mail.mud.yahoo.com via HTTP; Thu, 13 Jan 2011 07:11:25 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Thu, 13 Jan 2011 07:11:25 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-509468778-1294931485=:21689"

--0-509468778-1294931485=:21689
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

We're writing a web application, which naturally needs
- "IndexSearcher" when users use our search screen
- "IndexWriter" in a background process that periodically updates and optim=
izes our index.
Note our writer is exclusive - no other applications/threads ever write to =
our index files.

What's the common practice in terms of resource creation and sharing?
Specifically:

1) Should I have a single IndexSearcher to serve all (concurrent) users?
I saw such a recommendation in a tutorial, but discovered that an open Inde=
xSearcher prevents 'optimize' from merging my files... so should I close it=
 just before optimization? Or should I open an individual (short-lived) Ind=
exSearcher for each search request?

2) Our tests also imply that IndexWriter.optimize()=A0 takes effect only af=
ter you close() that writer - which is a shame, because I hoped to keep usi=
ng the same writer (I hear it's expensive to instantiate). I doing somethin=
g wrong?=20

Thanks
=0A=0A=0A      
--0-509468778-1294931485=:21689--

From java-user-return-48340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 15:41:27 2011
Return-Path: <java-user-return-48340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23356 invoked from network); 13 Jan 2011 15:41:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 15:41:27 -0000
Received: (qmail 3427 invoked by uid 500); 13 Jan 2011 15:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2955 invoked by uid 500); 13 Jan 2011 15:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2947 invoked by uid 99); 13 Jan 2011 15:41:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 15:41:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 15:41:13 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B801D45EE86
	for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 16:40:50 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Wo1b7BRhxv4T for <java-user@lucene.apache.org>;
	Thu, 13 Jan 2011 16:40:47 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6D7C045EE24
	for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 16:40:47 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <871458.21689.qm@web30504.mail.mud.yahoo.com>
In-Reply-To: <871458.21689.qm@web30504.mail.mud.yahoo.com>
Subject: RE: Newbie: "Life span" of IndexWriter / IndexSearcher?
Date: Thu, 13 Jan 2011 16:40:49 +0100
Message-ID: <005b01cbb338$4130aa80$c391ff80$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKpFOZnGphmn8uY+jP9WonjM1m/sJIURUiQ
Content-Language: de

Hi,


> We're writing a web application, which naturally needs
> - "IndexSearcher" when users use our search screen
> - "IndexWriter" in a background process that periodically updates and
> optimizes our index.
> Note our writer is exclusive - no other applications/threads ever =
write to
our
> index files.
>=20
> What's the common practice in terms of resource creation and sharing?
> Specifically:
>=20
> 1) Should I have a single IndexSearcher to serve all (concurrent) =
users?
> I saw such a recommendation in a tutorial, but discovered that an open
> IndexSearcher prevents 'optimize' from merging my files... so should I
close it
> just before optimization? Or should I open an individual (short-lived)
> IndexSearcher for each search request?

You can leave the IndexWriter and IndexSearcher all the time. The only
important thing, changes made by IndexWriter's commit() method are only =
seen
by IndexSearcher, when the underlying IndexReader is reopened (e.g. by =
using
IndexReader.reopen()) - please note that this only works with direct =
access
to the IndexReaders, so I would recommend using the constructors of
IndexSearcher that take IndexReaders (the Directory ones are only for =
easy
beginner's use). See the Lucene In Action 2 for a good example of a =
Searcher
manager.

> 2) Our tests also imply that IndexWriter.optimize()=A0 takes effect =
only
after
> you close() that writer - which is a shame, because I hoped to keep =
using
the
> same writer (I hear it's expensive to instantiate). I doing something
wrong?

This is wrong, see above. As the IndexReader/Searcher keeps the used
segments from the time it was opened, they can't go away until the
"snapshot" view of IndexReader is closed.

In general, it's not recommeneded to optimize indexes since 2.9 unless =
you
are doing things like delete all documents.

Uwe
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 17:15:57 2011
Return-Path: <java-user-return-48341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76434 invoked from network); 13 Jan 2011 17:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 17:15:56 -0000
Received: (qmail 30033 invoked by uid 500); 13 Jan 2011 17:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27962 invoked by uid 500); 13 Jan 2011 17:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27954 invoked by uid 99); 13 Jan 2011 17:15:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 17:15:48 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 17:15:42 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1PdQlc-0004my-Ti
	for java-user@lucene.apache.org; Thu, 13 Jan 2011 09:15:20 -0800
Date: Thu, 13 Jan 2011 09:15:20 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294938920901-2249215.post@n3.nabble.com>
In-Reply-To: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
References: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
Subject: Re: lucene-based log searcher?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I almost finished these days to write such a tool.

It reads via FTPClient the log files and adds to Lucene index.

Via small Web application you can see/filter/sort the log messages. 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/lucene-based-log-searcher-tp2247969p2249215.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 17:58:42 2011
Return-Path: <java-user-return-48342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94685 invoked from network); 13 Jan 2011 17:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 17:58:41 -0000
Received: (qmail 98497 invoked by uid 500); 13 Jan 2011 17:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98292 invoked by uid 500); 13 Jan 2011 17:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98284 invoked by uid 99); 13 Jan 2011 17:58:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 17:58:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seanmjoyce@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 17:58:28 +0000
Received: by fxm2 with SMTP id 2so1968633fxm.35
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 09:58:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=h88XA/cB6v5kgGqWddxve6ls4JMkSvkPtxx2cqinonQ=;
        b=eE6hzLkH8FLqeDb+j+vRHzA4oGNKKPM/z72elsOfxMOIve6HL6OkH55mEweixXe9rG
         Po8UPUGaUJ1nAqcduagJk/32m3v3qXEFcFcoh4kaxH8mbqtdkT6Q0uDj5M2TW5vVZmhA
         lZ4XzYzgcko/N47PFUwQ2wVEhG7rZseCUEQd0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=Vw8aN9tGZk34xI1bCWvBD+9j/qG3IC35ITCZFse4ALiXU2UdUPxL4fnCRf5/YgUAYj
         DZdrQXIYwXMXlBZUfY0ev9rvlo0QBz4ukyhQkiqr+Pg4kzfe4BT6+m2ej2RlsZpAgYEa
         7eiTr22RTg9V/neGyKMAdI2spivwQKaDOFzEQ=
MIME-Version: 1.0
Received: by 10.223.78.135 with SMTP id l7mr2640914fak.116.1294941488480; Thu,
 13 Jan 2011 09:58:08 -0800 (PST)
Sender: seanmjoyce@gmail.com
Received: by 10.223.119.67 with HTTP; Thu, 13 Jan 2011 09:58:07 -0800 (PST)
In-Reply-To: <AANLkTim456sizafRhB6UD3f8L5EDGezSfe+2Z5EJ88hk@mail.gmail.com>
References: <AANLkTim456sizafRhB6UD3f8L5EDGezSfe+2Z5EJ88hk@mail.gmail.com>
Date: Thu, 13 Jan 2011 12:58:07 -0500
X-Google-Sender-Auth: DUe2E66hiurgCAx_XGKoZ9TfuQk
Message-ID: <AANLkTin0euQ2cAO4EhoO85Pd0aVwS8X=ycEeGD=reSuQ@mail.gmail.com>
Subject: lucene across many clients
From: Sean Joyce <sean@arluckpromotions.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Users,

I work on a product with several thousand clients. We use Lucene to
index various client data and make the functionality available as part
of our product. Currently, each client has its own index for security
reasons, but I am wondering if this is the best way to handle the
indexing moving forward. Right now we don't take advantage of the near
real-time indexing. As we scale up (and potentially incorporate NRT),
I am wondering if an index per client is the best way to architect the
system. Maintaining hundreds or more IndexWriters in memory to support
NRT seems potentially problematic. Perhaps a better way would be to
create one large index (or several large indices) and use a BitSet to
to limit the results to only the relevant client. Has any one worked
on a system similar to this one and can provide some architecture
advice?

-Sean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 20:22:24 2011
Return-Path: <java-user-return-48343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90068 invoked from network); 13 Jan 2011 20:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 20:22:23 -0000
Received: (qmail 36950 invoked by uid 500); 13 Jan 2011 20:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36749 invoked by uid 500); 13 Jan 2011 20:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36741 invoked by uid 99); 13 Jan 2011 20:22:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 20:22:20 +0000
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 20:22:12 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 1CF8C20252
	for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 15:21:52 -0500 (EST)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Thu, 13 Jan 2011 15:21:52 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=5zgAhKkXLDa31ZSJTZMR2Ca7a6Q=; b=pg34HMKzKjVoR0p7x+0Wy6B9iDI7bfghg5Ml/x38CH4kIL0UERfgBNLma/Y7T1nE/qIhmddLPSTVJWYyxhb6WyEpmGt9VRnFdN+KGnj/eOynrnVmZV5D2VtG7a6HSsMgeWSAGwNIBDhRPKEFNLUh+vNtD4IIESMH++2do40/MBM=
X-Sasl-enc: 1mf04s7Mar4wD6KVxiy/UTY9QZmAqTjHliRPmEhzc0D0 1294950111
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id A7A8344280F
	for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 15:21:51 -0500 (EST)
Message-ID: <4D2F5EDE.5030800@fastmail.fm>
Date: Thu, 13 Jan 2011 20:21:50 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Closing indexsearcher , making sur eit is in use
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

As recommended, I use just one Index Searcher on my multithreaded GUI 
app using a singleton pattern
If data is modified in the index I then close the reader and searcher, 
and they will be recreate on next call to getInstance() but Ive hit a 
problem whereby one thread was closing a searcher, another thread 
already the searcher open but when came to use it gave exception 'the 
IndexReader is closed'

I obviously dont want access to the searcher to be synchronized as it is 
designed to work multithreaded, so how should I close it safetly, i.e 
close if no current references to it.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 13 20:56:36 2011
Return-Path: <java-user-return-48344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 601 invoked from network); 13 Jan 2011 20:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jan 2011 20:56:36 -0000
Received: (qmail 65413 invoked by uid 500); 13 Jan 2011 20:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65365 invoked by uid 500); 13 Jan 2011 20:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65357 invoked by uid 99); 13 Jan 2011 20:56:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 20:56:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jan 2011 20:56:26 +0000
Received: by bwz8 with SMTP id 8so2177324bwz.35
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 12:56:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=IANs7XO4pFE9+xHz0Ejgpv8H7dkqw57JrzrDQbplyhA=;
        b=NLDDba8gu9D99jNqEIHezS/PIjkNltLJgeJ29HraF3g/41Ae/TTTLI6RCyIGRedfsT
         zVSGdVTLIi/hUvGfqywnoaefNGypbppOsPgKW22y0ZYr4Mh0++kf/gykt2PIeFFlPXzZ
         Rb8v0VTTyDx9zSvf5kMdnPz8xbBXO1kRZsSRQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=NWju/zarSaUl2sHlj3oYdBQ8en+CpUr9a2oMYwmqcSiR3PZ0PdkSS/9wObyFnfzp+D
         G15G1IIGY8dGKUIY9sycMv2S3FPDv6v4ND6suuB6XrumdmQ8ZRljfmwEieD3rqf1RFPc
         oUqSzUcxGsZNcKjXMH/yY5M1WLUyZF7o9z/6w=
Received: by 10.204.76.18 with SMTP id a18mr2192515bkk.9.1294952164686; Thu,
 13 Jan 2011 12:56:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Thu, 13 Jan 2011 12:55:44 -0800 (PST)
In-Reply-To: <4D2F5EDE.5030800@fastmail.fm>
References: <4D2F5EDE.5030800@fastmail.fm>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 13 Jan 2011 20:55:44 +0000
Message-ID: <AANLkTinrcMw6MgO4Rau7qqYOvSnySgCTZTH9ushj483V@mail.gmail.com>
Subject: Re: Closing indexsearcher , making sur eit is in use
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Use something with reference counting - Lucene in action second
edition has a searcher manager class  which I think might be available
standalone.  Or a couple of low-tech alternatives: instead of closing
the old searcher, move it out of the way and keep a reference to it
and close it after n seconds or searches or whatever.  Or catch the
closed Exception and rerun the query with the up to date searcher.


--
Ian.


On Thu, Jan 13, 2011 at 8:21 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> As recommended, I use just one Index Searcher on my multithreaded GUI app
> using a singleton pattern
> If data is modified in the index I then close the reader and searcher, and
> they will be recreate on next call to getInstance() but Ive hit a problem
> whereby one thread was closing a searcher, another thread already the
> searcher open but when came to use it gave exception 'the IndexReader is
> closed'
>
> I obviously dont want access to the searcher to be synchronized as it is
> designed to work multithreaded, so how should I close it safetly, i.e close
> if no current references to it.
>
> Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 03:21:19 2011
Return-Path: <java-user-return-48345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54961 invoked from network); 14 Jan 2011 03:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 03:21:19 -0000
Received: (qmail 11995 invoked by uid 500); 14 Jan 2011 03:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11229 invoked by uid 500); 14 Jan 2011 03:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11215 invoked by uid 99); 14 Jan 2011 03:21:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 03:21:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 03:21:06 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=UTF-8; format=flowed
Received: from [192.168.1.4] ([24.202.76.57]) by vl-mh-mrz25.ip.videotron.ca
 (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec 16 2008; 32bit))
 with ESMTP id <0LEZ00FE6T98N980@vl-mh-mrz25.ip.videotron.ca> for
 java-user@lucene.apache.org; Thu, 13 Jan 2011 22:19:56 -0500 (EST)
Message-id: <4D2FC130.4080509@member.fsf.org>
Date: Thu, 13 Jan 2011 22:21:20 -0500
From: Benoit Mercier <benoit.mercier@member.fsf.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr-CA; rv:1.9.2.13) Gecko/20101208
 Thunderbird/3.1.7
To: java-user@lucene.apache.org
Subject: Re: "or" as a search term : SOLVED
References: <5e470164.3e9eb.12d7ded5e20.Coremail.hongyinjie@163.com>
In-reply-to: <5e470164.3e9eb.12d7ded5e20.Coremail.hongyinjie@163.com>

Thank you Robert and Hongyinjie for your support.

I managed to solved my problem.  It was simply a wrong application 
configuration.  I am using PerFieldAnalyzerWrapper, with analysers 
injected via Spring.  A stupid line inversion in a Spring application 
context file that didn't hurd during several years !

Conclusion: Lucene 3.0.3 can index and query without any problem 
reserved words like OR, AND or NOT  if they are not part of the analyzer 
stopWords.

Best regards,

Benoit


On 2011-01-13 00:50, hongyinjie wrote:
> use "TokenStream" to print out the Tokens after using FrenchAnalyzer; test it work well, and the result is just you want?
>
> You can use another tools "Luke" to see the "Lucene index File", is there any token of "or"(French) ?
> And you can query using the "Luke"...
>
>
>
> Good Luck
>
>
>
> 2011-01-13
>
>
>
> ---------------------------------
> Yinjie Hong
> Ph. D. Student
> College of Computer Science, Zhejiang University
>
> Tel:       86-571-87952026
> E-Mail: hongyj(at)zju(dot)edu(dot)cn
> Office:  Room 400, Teaching Building #11, Yuquan Campus, Zhejiang University
>
>
>
>
>
>
> Thank you for your reply.
>
> I am using my own FrenchAnalyzer for lexical analysis.  It extends
> org.apache.lucene.analysis.Analyzer and my stopwords set is empty.
>
> Benoit
>
> On 2011-01-12 23:05, Robert Muir wrote:
>> On Wed, Jan 12, 2011 at 10:38 PM, Benoit Mercier
>> <benoit.mercier@member.fsf.org>   wrote:
>>> Hi,
>>>
>>> I am happily using Lucene for several years to offer French lexical analysis
>>> tools to university researchers.   Today, one of them decided to analyze the
>>> use of the French word "or" (meaning "gold" in French) in one of my corpus
>>> powered by Lucene...  And, as you probably already guessed, no results...
>>>
>> What analyzer are you using?
>>
>> By default, StandardAnalyzer and StopAnalyzer uses a set of english
>> stopwords. For french, this list is probably not appropriate.
>> If you look at the javadocs, you can pass in your own set of
>> stopwords... for lexical analysis maybe this should be an empty set.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 06:06:54 2011
Return-Path: <java-user-return-48346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25155 invoked from network); 14 Jan 2011 06:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 06:06:53 -0000
Received: (qmail 7350 invoked by uid 500); 14 Jan 2011 06:06:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6870 invoked by uid 500); 14 Jan 2011 06:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 94896 invoked by uid 99); 14 Jan 2011 05:48:24 -0000
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,HTML_NONELEMENT_30_40,RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chensheng_cn@qq.com designates 64.71.138.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qq.com; s=s0907;
	t=1294984067; bh=RnyZEayr6NfJ3USMOUQX0XH9d2r1ry99BsKzkbwSiEE=;
	h=X-QQ-SSF:X-QQ-BUSINESS-ORIGIN:X-Originating-IP:X-QQ-STYLE:
	 X-QQ-mid:From:To:Subject:Mime-Version:Content-Type:
	 Content-Transfer-Encoding:Date:X-Priority:Message-ID:X-QQ-MIME:
	 X-Mailer:X-QQ-Mailer:X-QQ-ReplyHash;
	b=Gjg6WsgzxHAcAgQren1LiDjBAJhkOXfezC0lV3Cw7XeMqQvYhaN8DXWkugoK1uqzU
	 toaAisFHq2hvQViEPdhLEvtyE46tiXQaLJhiycMZZrbN+mmoSeGy0I6O4REg15h
X-QQ-SSF:0000000000000090
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 124.207.80.194
X-QQ-STYLE:
X-QQ-mid:webmail311t1294984064t7867444
From: "=?ISO-8859-1?B?Y2hlbnNoZW5n?=" <chensheng_cn@qq.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: Re: lucene-based log searcher?
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D2FE380_D989F4E8_67C0965F"
Content-Transfer-Encoding: 8Bit
Date: Fri, 14 Jan 2011 13:47:44 +0800
X-Priority: 3
Message-ID: <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 3248153534

------=_NextPart_4D2FE380_D989F4E8_67C0965F
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGksIEkgaGF2ZSBhIHNpbWlsYXIgY2FzZS4NCklmIEkgb25seSBpbmRleCBzb21lIGZpeGVk
IGZpZWxkcyB3aXRoIHNpbmdsZS13b3JkL251bWJlciwgaW5zdGVhZCBvZiBmdWxsLXRleHQg
c2VhcmNoLA0KaXMgTHVjZW5lIGFueSBiZXR0ZXIgdGhhbiBhIHJlbGF0aW9uYWwgZGF0YWJh
c2U/DQogDQogDQotLS0tLS0tLS0tLS0tLS0tLS0gT3JpZ2luYWwgLS0tLS0tLS0tLS0tLS0t
LS0tDQpGcm9tOiAgIkJlbnppb24gRyI8YmVuemlvbmtAeWFob28uY29tPjsNCkRhdGU6ICBG
cmksIEphbiAxNCwgMjAxMSAwMToxNSBBTQ0KVG86ICAiamF2YS11c2VyIjxqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmc+OyANCg0KU3ViamVjdDogIFJlOiBsdWNlbmUtYmFzZWQgbG9n
IHNlYXJjaGVyPw0KDQogDQogDQpIaSwNCg0KSSBhbG1vc3QgZmluaXNoZWQgdGhlc2UgZGF5
cyB0byB3cml0ZSBzdWNoIGEgdG9vbC4NCg0KSXQgcmVhZHMgdmlhIEZUUENsaWVudCB0aGUg
bG9nIGZpbGVzIGFuZCBhZGRzIHRvIEx1Y2VuZSBpbmRleC4NCg0KVmlhIHNtYWxsIFdlYiBh
cHBsaWNhdGlvbiB5b3UgY2FuIHNlZS9maWx0ZXIvc29ydCB0aGUgbG9nIG1lc3NhZ2VzLiAN
Ci0tIA0KVmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDogaHR0cDovL2x1Y2VuZS40NzIw
NjYubjMubmFiYmxlLmNvbS9sdWNlbmUtYmFzZWQtbG9nLXNlYXJjaGVyLXRwMjI0Nzk2OXAy
MjQ5MjE1Lmh0bWwNClNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5n
IGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmc=

------=_NextPart_4D2FE380_D989F4E8_67C0965F--


From java-user-return-48347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 06:37:19 2011
Return-Path: <java-user-return-48347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37007 invoked from network); 14 Jan 2011 06:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 06:37:18 -0000
Received: (qmail 28727 invoked by uid 500); 14 Jan 2011 06:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28488 invoked by uid 500); 14 Jan 2011 06:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28480 invoked by uid 99); 14 Jan 2011 06:37:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 06:37:12 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 06:37:05 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <benzionk@yahoo.com>)
	id 1PddHA-0004Hm-3l
	for java-user@lucene.apache.org; Thu, 13 Jan 2011 22:36:44 -0800
Date: Thu, 13 Jan 2011 22:36:44 -0800 (PST)
From: Benzion G <benzionk@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1294987004113-2253738.post@n3.nabble.com>
In-Reply-To: <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com>
References: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net> <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com>
Subject: Re: lucene-based log searcher?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


If you can define one searchable word for the whole log message and index
this word only maybe you can use DB instead.
I apply Analyzer to every and whole log message text - and then I can
quickly find all messages, that have e.g. "NullPointerException" or "user
not found" text or anything else.

In DB using select with "LIKE '%something%'" will do full table scan.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/lucene-based-log-searcher-tp2247969p2253738.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 07:00:17 2011
Return-Path: <java-user-return-48348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40656 invoked from network); 14 Jan 2011 07:00:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 07:00:17 -0000
Received: (qmail 44177 invoked by uid 500); 14 Jan 2011 07:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43801 invoked by uid 500); 14 Jan 2011 07:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43793 invoked by uid 99); 14 Jan 2011 07:00:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 07:00:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 07:00:03 +0000
Received: by wwd20 with SMTP id 20so2502788wwd.5
        for <java-user@lucene.apache.org>; Thu, 13 Jan 2011 22:59:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=Q/qF/sFkeJqa5xq/K+tU7Ul0kNvSjdH683QjTLL6/mc=;
        b=i8k/JNBxp8aq5/6V7jmAsIUx0xI2BEBQXDyj7vZUEDhVOUC9eLYvRVN63UTVlwOYSH
         InovUS+u3caWinTvDLPJP6OIGnrX2FyrOusMCYvYjcqdPcR4Oi3v3MZW6csAuBpPFi12
         NrGsSrOsbAIs3LAYDPVYg4wYoOkGnxtep4SeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=U/hjsJ14di3GsYXhN0VHNhONv9/U6gPmtKakeY0ChgrJd8ix19zBLAf9CG6qOlo1pA
         In54Y84wVpL4kGX+l0qO0j+RX9AWgRbKUrA0z3/qdQrAWdQCQPyzqqFE0y8woISYjGDu
         7r35pbFK+FAHoMN0ok8jdofFn2kwLVB8MFoe0=
Received: by 10.216.183.209 with SMTP id q59mr292323wem.17.1294988381621; Thu,
 13 Jan 2011 22:59:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Thu, 13 Jan 2011 22:59:00 -0800 (PST)
In-Reply-To: <AANLkTinrcMw6MgO4Rau7qqYOvSnySgCTZTH9ushj483V@mail.gmail.com>
References: <4D2F5EDE.5030800@fastmail.fm> <AANLkTinrcMw6MgO4Rau7qqYOvSnySgCTZTH9ushj483V@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Fri, 14 Jan 2011 12:29:00 +0530
Message-ID: <AANLkTi=6eB-i9b6m_=C4W9f2WWhGYv39JeDTAsioEEd2@mail.gmail.com>
Subject: Re: Closing indexsearcher , making sur eit is in use
To: java-user@lucene.apache.org
Cc: paul_t100@fastmail.fm
Content-Type: multipart/alternative; boundary=001636416f197990f70499c8fa97
X-Virus-Checked: Checked by ClamAV on apache.org

--001636416f197990f70499c8fa97
Content-Type: text/plain; charset=ISO-8859-1

You can use  ReadWriteLock
<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html>as
low level technique to manage access.

A ReadWriteLock maintains a pair of associated
locks<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html>,
one for read-only operations and one for writing. The read
lock<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html#readLock%28%29>may
be held simultaneously by multiple reader threads, so long as there
are
no writers. The write
lock<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html#writeLock%28%29>is
exclusive.

Wrap the lucene's searcher into your SearchManager class, which exposes its
own API for search and forwards the requests to underlying searcher.

 The search and reopen will sync up by using ReadWriteLock . search takes
readlock and reopen takes writelock.

PS: 1. Use indexreader.reopen() instead of closing it off and then open
again. It is much faster. (Documented)
Thanks & Regards
Umesh Prasad

On Fri, Jan 14, 2011 at 2:25 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Use something with reference counting - Lucene in action second
> edition has a searcher manager class  which I think might be available
> standalone.  Or a couple of low-tech alternatives: instead of closing
> the old searcher, move it out of the way and keep a reference to it
> and close it after n seconds or searches or whatever.  Or catch the
> closed Exception and rerun the query with the up to date searcher.
>
>
> --
> Ian.
>
>
> On Thu, Jan 13, 2011 at 8:21 PM, Paul Taylor <paul_t100@fastmail.fm>
> wrote:
> > As recommended, I use just one Index Searcher on my multithreaded GUI app
> > using a singleton pattern
> > If data is modified in the index I then close the reader and searcher,
> and
> > they will be recreate on next call to getInstance() but Ive hit a problem
> > whereby one thread was closing a searcher, another thread already the
> > searcher open but when came to use it gave exception 'the IndexReader is
> > closed'
> >
> > I obviously dont want access to the searcher to be synchronized as it is
> > designed to work multithreaded, so how should I close it safetly, i.e
> close
> > if no current references to it.
> >
> > Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636416f197990f70499c8fa97--

From java-user-return-48349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 08:18:44 2011
Return-Path: <java-user-return-48349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76061 invoked from network); 14 Jan 2011 08:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 08:18:43 -0000
Received: (qmail 25647 invoked by uid 500); 14 Jan 2011 08:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25254 invoked by uid 500); 14 Jan 2011 08:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25246 invoked by uid 99); 14 Jan 2011 08:18:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 08:18:36 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 08:18:32 +0000
Received: by fxm2 with SMTP id 2so2533096fxm.35
        for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 00:18:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=OlK0Ce/BoOppFG04qz3dPKHoKvVMXG6YFvzesL2rwOY=;
        b=k+LQP8eFknPHfhhoxFb/oIo/1LYtj4Wl0PT9F3MVjkB0pnw+ZEzcj+6IzqNKSn+C5Q
         aW3Ceu+AddSZ03VDqGzWzB9gxIBIC5z6wBEMv2gzdY6U7jXq4qeK+NwuYChsjvwlXYMR
         FDGXyLGheNOKg7KvWSNQGR3R/os5iIACZLhZ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=euSDyj90XMjuCRCr02ngz1eaMcjSfUwj2aCUF5LgEUD4OwhV79zlkq92WQwrhTy8EF
         Q+j4fA5gauF/QDlU/Mzu10T6pN+47zXxhZWEO4l5Q1HGx3DOCqteay6AMekoYaaf9rG5
         5/qj3P5rYCgowLyXJKv7bkecenhUmW4QTB6ag=
Received: by 10.223.83.11 with SMTP id d11mr418887fal.37.1294992154848; Fri,
 14 Jan 2011 00:02:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.29.13 with HTTP; Fri, 14 Jan 2011 00:02:14 -0800 (PST)
In-Reply-To: <1294987004113-2253738.post@n3.nabble.com>
References: <535F776C-63B8-4B2E-A1EA-859A8FA68A8E@hoplahup.net>
 <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com> <1294987004113-2253738.post@n3.nabble.com>
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
Date: Fri, 14 Jan 2011 09:02:14 +0100
Message-ID: <AANLkTik+WiemeMY70GHu66_wRmJwFUDyihpbZWbP=Qrt@mail.gmail.com>
Subject: Re: lucene-based log searcher?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a54960807b0499c9db9c

--20cf3054a54960807b0499c9db9c
Content-Type: text/plain; charset=UTF-8

Hi,

I haven't tried that myself so far but may be you can check logstash as well
(http://www.loggly.com/2010/11/do-you-have-a-logstash/).

Regards,
Lukas

On Fri, Jan 14, 2011 at 7:36 AM, Benzion G <benzionk@yahoo.com> wrote:

>
> If you can define one searchable word for the whole log message and index
> this word only maybe you can use DB instead.
> I apply Analyzer to every and whole log message text - and then I can
> quickly find all messages, that have e.g. "NullPointerException" or "user
> not found" text or anything else.
>
> In DB using select with "LIKE '%something%'" will do full table scan.
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/lucene-based-log-searcher-tp2247969p2253738.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3054a54960807b0499c9db9c--

From java-user-return-48350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 09:39:49 2011
Return-Path: <java-user-return-48350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9279 invoked from network); 14 Jan 2011 09:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 09:39:49 -0000
Received: (qmail 45037 invoked by uid 500); 14 Jan 2011 09:39:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44632 invoked by uid 500); 14 Jan 2011 09:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44619 invoked by uid 99); 14 Jan 2011 09:39:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 09:39:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matthieu.huin@wallix.com designates 84.14.156.235 as permitted sender)
Received: from [84.14.156.235] (HELO paris.office.wallix.com) (84.14.156.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 09:39:36 +0000
Received: from zimbra.ifr.lan (zimbra.ifr.lan [10.10.1.211])
	by paris.office.wallix.com (Postfix) with ESMTP id AD89D6A4266
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 10:39:15 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra.ifr.lan (Postfix) with ESMTP id 5F01F3242805
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 10:39:17 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.9
X-Spam-Level: 
Received: from zimbra.ifr.lan ([127.0.0.1])
	by localhost (zimbra.ifr.lan [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id n7pm15zdeF4c for <java-user@lucene.apache.org>;
	Fri, 14 Jan 2011 10:39:17 +0100 (CET)
Received: from [10.10.4.7] (mhu.ifr.lan [10.10.4.7])
	by zimbra.ifr.lan (Postfix) with ESMTP id 00EBD32427AD
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 10:39:16 +0100 (CET)
Message-ID: <4D3019C5.3080109@wallix.com>
Date: Fri, 14 Jan 2011 10:39:17 +0100
From: Matthieu Huin <matthieu.huin@wallix.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene-based log searcher?
References: <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com>
In-Reply-To: <tencent_6FE5A33F7FA4F2926EF8C39B@qq.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.9 tagged_above=-10 required=10
	tests=[ALL_TRUSTED=-1, BAYES_00=-1.9] autolearn=ham

Hello,

I've been working on logs and metadata and I've been working on this 
specific problem for quite a while.

if you have a constant, predefined number of fields associated to each 
log, a relational database might perform just fine and offer you more 
possibilities regarding log analysis (statistics, aggregation, min/max 
... ). As a side note, you might not be aware that PostgreSQL ( > 8.3 ) 
comes with built-in full text search capabilities, so you don't have to 
sacrifice the functionality. A column-based database would probably be 
also worth trying.

On the other hand, if fields can vary in type and number for each log, 
the relational database model will perform very badly : if you normalize 
a lot you'll end up with a compact database schema that takes a lot of 
time to query ( and queries can become hellishly hard to write); if you 
don't you're losing most of what a database would bring you in the first 
place. This is a very close problem to the one discussed here : 
http://www.pui.ch/phred/archives/2005/04/tags-database-schemas.html this 
link is worth a read if you want to go on with databases.

Do not forget also that unless you use a column-based database, you 
might probably want to use indices on your tables in order to speed up 
some lookups ... But it will come at a hefty price at insertion time 
after you reach a certain amount of indexed logs.

Concerning my project (where we fall in the second case), current tests 
with lucene are very encouraging. Sure, we lose some analytics 
capabilities and the hard disk footprint is rather huge, but the query 
response time, be it from full-text searches or complex queries on 
specific fields, is outstanding.


Of course, in the end, it all depends on what you need to do. Just my 
personal experience here ...

Regards,

Matthieu Huin

Le 14/01/2011 06:47, chensheng a crit :
> Hi, I have a similar case.
> If I only index some fixed fields with single-word/number, instead of full-text search,
> is Lucene any better than a relational database?
>
>
> ------------------ Original ------------------
> From:  "Benzion G"<benzionk@yahoo.com>;
> Date:  Fri, Jan 14, 2011 01:15 AM
> To:  "java-user"<java-user@lucene.apache.org>;
>
> Subject:  Re: lucene-based log searcher?
>
>
>
> Hi,
>
> I almost finished these days to write such a tool.
>
> It reads via FTPClient the log files and adds to Lucene index.
>
> Via small Web application you can see/filter/sort the log messages.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 15:43:13 2011
Return-Path: <java-user-return-48351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82237 invoked from network); 14 Jan 2011 15:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 15:43:13 -0000
Received: (qmail 7078 invoked by uid 500); 14 Jan 2011 15:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6631 invoked by uid 500); 14 Jan 2011 15:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6622 invoked by uid 99); 14 Jan 2011 15:43:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 15:43:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matthieu.huin@wallix.com designates 84.14.156.235 as permitted sender)
Received: from [84.14.156.235] (HELO paris.office.wallix.com) (84.14.156.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 15:42:59 +0000
Received: from zimbra.ifr.lan (zimbra.ifr.lan [10.10.1.211])
	by paris.office.wallix.com (Postfix) with ESMTP id EC07E6A4204
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 16:42:36 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra.ifr.lan (Postfix) with ESMTP id A435632426D8
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 16:42:38 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.9
X-Spam-Level: 
Received: from zimbra.ifr.lan ([127.0.0.1])
	by localhost (zimbra.ifr.lan [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QYLDHoYRXiyj for <java-user@lucene.apache.org>;
	Fri, 14 Jan 2011 16:42:38 +0100 (CET)
Received: from [10.10.4.7] (mhu.ifr.lan [10.10.4.7])
	by zimbra.ifr.lan (Postfix) with ESMTP id 735B13242696
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 16:42:38 +0100 (CET)
Message-ID: <4D306EEF.6080003@wallix.com>
Date: Fri, 14 Jan 2011 16:42:39 +0100
From: Matthieu Huin <matthieu.huin@wallix.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to get the frequency of indexed words ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.9 tagged_above=-10 required=10
	tests=[ALL_TRUSTED=-1, BAYES_00=-1.9] autolearn=ham

Greetings,

Is there an easy way to figure out the frequency of words in an index ? 
I'd like to get, say, the 1000 most often indexed words in order to 
create an auto-completion cache for my application.

Thanks in advance,


Matthieu Huin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 16:01:21 2011
Return-Path: <java-user-return-48352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90735 invoked from network); 14 Jan 2011 16:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 16:01:21 -0000
Received: (qmail 44040 invoked by uid 500); 14 Jan 2011 16:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43571 invoked by uid 500); 14 Jan 2011 16:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43563 invoked by uid 99); 14 Jan 2011 16:01:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:01:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:01:08 +0000
Received: by bwz8 with SMTP id 8so2976787bwz.35
        for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 08:00:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=twE/ANlVZ6ZlGSbaFe8/nksXTRLEHy/QkqCNhS9Y+Y8=;
        b=F/KXmOnbVpS7Q6MB9CbUHgMNJcmQl8gW6I9AP921u7AimsYjdXENonWxZeZxst1gdK
         BOKZp274/pBeiBepACVwn+8V772SzPKN9rtW7B8vrb0CWQe8cbEJilKzRtcmNlsyHEwE
         FtVMhcHv5xZwgmlN5lV39L45uBvVw4/xMLeKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Wqqu9kmM8opcdiu13PyGePP4YvSbAHuUSqmX68t/cD8UEGk6bMALJ7oz7lOH28fE6Y
         dFoqj27JRcnKw2E/fMk7L303DQuQ+qWzMVkV92IzBS7E+sIMHOApgZZ4UK/JsapDsEDg
         0p+Q2hueSIHwUnbKUQLlr9k8+ND4GEUh4+yLk=
Received: by 10.204.100.136 with SMTP id y8mr736287bkn.171.1295020846591; Fri,
 14 Jan 2011 08:00:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 14 Jan 2011 08:00:26 -0800 (PST)
In-Reply-To: <4D306EEF.6080003@wallix.com>
References: <4D306EEF.6080003@wallix.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 14 Jan 2011 16:00:26 +0000
Message-ID: <AANLkTinhio2jCjMzsKAXwnsVYNX6T3FM4gO-=oOrvAvv@mail.gmail.com>
Subject: Re: How to get the frequency of indexed words ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

http://lucene.apache.org/java/3_0_3/api/contrib-misc/org/apache/lucene/misc/HighFreqTerms.html

--
Ian.

On Fri, Jan 14, 2011 at 3:42 PM, Matthieu Huin <matthieu.huin@wallix.com> wrote:
> Greetings,
>
> Is there an easy way to figure out the frequency of words in an index ? I'd
> like to get, say, the 1000 most often indexed words in order to create an
> auto-completion cache for my application.
>
> Thanks in advance,
>
>
> Matthieu Huin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 16:07:09 2011
Return-Path: <java-user-return-48353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2251 invoked from network); 14 Jan 2011 16:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 16:07:08 -0000
Received: (qmail 51777 invoked by uid 500); 14 Jan 2011 16:07:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51121 invoked by uid 500); 14 Jan 2011 16:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51113 invoked by uid 99); 14 Jan 2011 16:07:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:07:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matthieu.huin@wallix.com designates 84.14.156.235 as permitted sender)
Received: from [84.14.156.235] (HELO paris.office.wallix.com) (84.14.156.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:06:54 +0000
Received: from zimbra.ifr.lan (zimbra.ifr.lan [10.10.1.211])
	by paris.office.wallix.com (Postfix) with ESMTP id A53746A433E
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:06:34 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra.ifr.lan (Postfix) with ESMTP id 5DFBD324245F
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:06:36 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.9
X-Spam-Level: 
Received: from zimbra.ifr.lan ([127.0.0.1])
	by localhost (zimbra.ifr.lan [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4uqRTXshDcm6 for <java-user@lucene.apache.org>;
	Fri, 14 Jan 2011 17:06:36 +0100 (CET)
Received: from [10.10.4.7] (mhu.ifr.lan [10.10.4.7])
	by zimbra.ifr.lan (Postfix) with ESMTP id 1F8803242441
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:06:36 +0100 (CET)
Message-ID: <4D30748D.8060703@wallix.com>
Date: Fri, 14 Jan 2011 17:06:37 +0100
From: Matthieu Huin <matthieu.huin@wallix.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to get the frequency of indexed words ?
References: <4D306EEF.6080003@wallix.com> <AANLkTinhio2jCjMzsKAXwnsVYNX6T3FM4gO-=oOrvAvv@mail.gmail.com>
In-Reply-To: <AANLkTinhio2jCjMzsKAXwnsVYNX6T3FM4gO-=oOrvAvv@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.9 tagged_above=-10 required=10
	tests=[ALL_TRUSTED=-1, BAYES_00=-1.9] autolearn=ham

Ian,

Thanks for the quick answer. I see this is part of lucene's "contrib" 
modules, but I am using pyLucene. Is there a way to access this module 
through pyLucene ?

Regards,

Matthieu

Le 14/01/2011 17:00, Ian Lea a crit :
> http://lucene.apache.org/java/3_0_3/api/contrib-misc/org/apache/lucene/misc/HighFreqTerms.html
>
> --
> Ian.
>
> On Fri, Jan 14, 2011 at 3:42 PM, Matthieu Huin<matthieu.huin@wallix.com>  wrote:
>> Greetings,
>>
>> Is there an easy way to figure out the frequency of words in an index ? I'd
>> like to get, say, the 1000 most often indexed words in order to create an
>> auto-completion cache for my application.
>>
>> Thanks in advance,
>>
>>
>> Matthieu Huin
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 16:29:39 2011
Return-Path: <java-user-return-48354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13367 invoked from network); 14 Jan 2011 16:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 16:29:39 -0000
Received: (qmail 91549 invoked by uid 500); 14 Jan 2011 16:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91101 invoked by uid 500); 14 Jan 2011 16:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91093 invoked by uid 99); 14 Jan 2011 16:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:29:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:29:27 +0000
Received: by bwz8 with SMTP id 8so3002066bwz.35
        for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 08:29:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=3Jrbi80PhGmPbGpXfILtVvkpF1R228GxvQSwTaLuMbE=;
        b=UW7ktZb8NU/lJIZwCxvMH2iDChbF1RylH6TtIoXgjgVZQx6sCRC8flDOle7Gzh5Ics
         wmTsF/r6tucR7w5qmg0aa97i5NDVaDkEkh+2Tar75hSDtlAy8Pvh0UdHBOh3kVzeQU2o
         0BDrHl7kZ+UNes24yO1vukTh6KymfSJUC0XFo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=KpPTSp4ECA0yW3KCRoSOaalZ0nS7A8yB7aHKYsedEjwUAYZlepL6Y60tBcrbPhPRSV
         eSVJ4xd50+7L4U9nqLZfCiYsKGybLA6p/Ccgx/H1b7gkFFUx6KQLO9I886KlACd+FPMz
         27P545njytDcW6XXsbMSyVQNqn+J+YmH/IxTE=
Received: by 10.204.76.18 with SMTP id a18mr786722bkk.9.1295022126894; Fri, 14
 Jan 2011 08:22:06 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 14 Jan 2011 08:17:18 -0800 (PST)
In-Reply-To: <4D30748D.8060703@wallix.com>
References: <4D306EEF.6080003@wallix.com> <AANLkTinhio2jCjMzsKAXwnsVYNX6T3FM4gO-=oOrvAvv@mail.gmail.com>
 <4D30748D.8060703@wallix.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 14 Jan 2011 16:17:18 +0000
Message-ID: <AANLkTimJ+HNebFufLG0T0Q64aBCWfRTz33SPMTiHQofq@mail.gmail.com>
Subject: Re: How to get the frequency of indexed words ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry - no idea.


--
Ian.


On Fri, Jan 14, 2011 at 4:06 PM, Matthieu Huin <matthieu.huin@wallix.com> w=
rote:
> Ian,
>
> Thanks for the quick answer. I see this is part of lucene's "contrib"
> modules, but I am using pyLucene. Is there a way to access this module
> through pyLucene ?
>
> Regards,
>
> Matthieu
>
> Le 14/01/2011 17:00, Ian Lea a =E9crit :
>>
>>
>> http://lucene.apache.org/java/3_0_3/api/contrib-misc/org/apache/lucene/m=
isc/HighFreqTerms.html
>>
>> --
>> Ian.
>>
>> On Fri, Jan 14, 2011 at 3:42 PM, Matthieu Huin<matthieu.huin@wallix.com>
>> =A0wrote:
>>>
>>> Greetings,
>>>
>>> Is there an easy way to figure out the frequency of words in an index ?
>>> I'd
>>> like to get, say, the 1000 most often indexed words in order to create =
an
>>> auto-completion cache for my application.
>>>
>>> Thanks in advance,
>>>
>>>
>>> Matthieu Huin
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 16:32:15 2011
Return-Path: <java-user-return-48355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14649 invoked from network); 14 Jan 2011 16:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 16:32:15 -0000
Received: (qmail 97542 invoked by uid 500); 14 Jan 2011 16:32:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97285 invoked by uid 500); 14 Jan 2011 16:32:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97276 invoked by uid 99); 14 Jan 2011 16:32:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:32:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matthieu.huin@wallix.com designates 84.14.156.235 as permitted sender)
Received: from [84.14.156.235] (HELO paris.office.wallix.com) (84.14.156.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 16:32:04 +0000
Received: from zimbra.ifr.lan (zimbra.ifr.lan [10.10.1.211])
	by paris.office.wallix.com (Postfix) with ESMTP id 066056A4204
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:31:43 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra.ifr.lan (Postfix) with ESMTP id B176F324265F
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:31:44 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.9
X-Spam-Level: 
Received: from zimbra.ifr.lan ([127.0.0.1])
	by localhost (zimbra.ifr.lan [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id tTWQkiqBP5mV for <java-user@lucene.apache.org>;
	Fri, 14 Jan 2011 17:31:44 +0100 (CET)
Received: from [10.10.4.7] (mhu.ifr.lan [10.10.4.7])
	by zimbra.ifr.lan (Postfix) with ESMTP id 5DF163242652
	for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 17:31:44 +0100 (CET)
Message-ID: <4D307A71.3070302@wallix.com>
Date: Fri, 14 Jan 2011 17:31:45 +0100
From: Matthieu Huin <matthieu.huin@wallix.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to get the frequency of indexed words ?
References: <4D306EEF.6080003@wallix.com> <AANLkTinhio2jCjMzsKAXwnsVYNX6T3FM4gO-=oOrvAvv@mail.gmail.com> <4D30748D.8060703@wallix.com> <AANLkTimJ+HNebFufLG0T0Q64aBCWfRTz33SPMTiHQofq@mail.gmail.com>
In-Reply-To: <AANLkTimJ+HNebFufLG0T0Q64aBCWfRTz33SPMTiHQofq@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.9 tagged_above=-10 required=10
	tests=[ALL_TRUSTED=-1, BAYES_00=-1.9] autolearn=ham

Nevermind, this seems to be the solution : 
http://www.mail-archive.com/pylucene-dev@osafoundation.org/msg02149.html

Le 14/01/2011 17:17, Ian Lea a crit :
> Sorry - no idea.
>
>
> --
> Ian.
>
>
> On Fri, Jan 14, 2011 at 4:06 PM, Matthieu Huin<matthieu.huin@wallix.com>  wrote:
>> Ian,
>>
>> Thanks for the quick answer. I see this is part of lucene's "contrib"
>> modules, but I am using pyLucene. Is there a way to access this module
>> through pyLucene ?
>>
>> Regards,
>>
>> Matthieu
>>
>> Le 14/01/2011 17:00, Ian Lea a crit :
>>>
>>> http://lucene.apache.org/java/3_0_3/api/contrib-misc/org/apache/lucene/misc/HighFreqTerms.html
>>>
>>> --
>>> Ian.
>>>
>>> On Fri, Jan 14, 2011 at 3:42 PM, Matthieu Huin<matthieu.huin@wallix.com>
>>>   wrote:
>>>> Greetings,
>>>>
>>>> Is there an easy way to figure out the frequency of words in an index ?
>>>> I'd
>>>> like to get, say, the 1000 most often indexed words in order to create an
>>>> auto-completion cache for my application.
>>>>
>>>> Thanks in advance,
>>>>
>>>>
>>>> Matthieu Huin
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 19:16:42 2011
Return-Path: <java-user-return-48356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13753 invoked from network); 14 Jan 2011 19:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 19:16:42 -0000
Received: (qmail 73818 invoked by uid 500); 14 Jan 2011 19:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73689 invoked by uid 500); 14 Jan 2011 19:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73681 invoked by uid 99); 14 Jan 2011 19:16:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 19:16:39 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 19:16:33 +0000
Received: by qyk7 with SMTP id 7so6536244qyk.14
        for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 11:16:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=9NRw/ROj42sZfQWa9sAcaUAVLjQnCSSd9hfULfOsNH4=;
        b=UgHojPfW+ynKMBe9W87izBhpDhtrzxJ485HzzuGAp0F4Iu7vK4rlQELKXM1l5kBqiw
         yZI0t8YGEI49FgSTDfqK94qGN9vzsDHEC1yuNbM9ouivWaDDXbsKnVocTF58WwR4AFgi
         H/APreYSqC040V0/Nt9laq9hPLFJwq5sd12Ro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZV/FBdk5XrQ0DQu6j43FM5MBJCN5Iwc0AnFI8PgsACTK6rq/78vlL8/k9/GDFUTz+o
         SfdXQ550e9G4D4sUYmZ5kPdq7Z51H35wQX2fLOjnmB3xa79EopPCCrKZLm1//QyRbNfE
         MVENoqDFGTt9mta6JT0b80vQbw3+sXyqIbu5o=
MIME-Version: 1.0
Received: by 10.229.189.6 with SMTP id dc6mr971245qcb.175.1295032573161; Fri,
 14 Jan 2011 11:16:13 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Fri, 14 Jan 2011 11:16:13 -0800 (PST)
In-Reply-To: <AANLkTi=cka=mDo5FHG_urFAMhS4M3-5bWsUz=Z1X+PNa@mail.gmail.com>
References: <1294728155406-2232931.post@n3.nabble.com>
	<AANLkTimFXtcTt-w4B_6Sho4KLmSqfGRX730xi6MQHnyB@mail.gmail.com>
	<1294735144267-2233220.post@n3.nabble.com>
	<AANLkTi=cka=mDo5FHG_urFAMhS4M3-5bWsUz=Z1X+PNa@mail.gmail.com>
Date: Fri, 14 Jan 2011 11:16:13 -0800
Message-ID: <AANLkTimiqqtDsR=aT=z0BAX34-KB14CzWRNvFJ3xh6Tp@mail.gmail.com>
Subject: Re: Searching Multivalued fileds
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f8dd7ef3530499d34443

--00163630f8dd7ef3530499d34443
Content-Type: text/plain; charset=ISO-8859-1

You need to create (and it's pretty easy) your own analysis chain that
returns a larger position increment gap, which is intended for this
very situation using the proximity (or SpanNear) as Jokin suggested.

Best
Erick

On Tue, Jan 11, 2011 at 1:24 AM, Jokin Cuadrado <jokin.c@gmail.com> wrote:

> you should use a proximity search, so the matching words are near:
> q=Itemname:("item movie"~2)
> I don't remember if you need also to customize your indexing analyser
> so diferent values are far enough for your needs or if that it's
> already done.
>
>
> On Tue, Jan 11, 2011 at 9:39 AM, Sailesh <sailesh.jain@gmail.com> wrote:
> >
> > I want no fields to be returned, as they belong to different fields but
> > their fieldnames are same.
> > --
> > View this message in context:
> http://lucene.472066.n3.nabble.com/Searching-Multivalued-fileds-tp2233114p2233220.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> --
> Jokin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f8dd7ef3530499d34443--

From java-user-return-48357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 14 19:25:34 2011
Return-Path: <java-user-return-48357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16468 invoked from network); 14 Jan 2011 19:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jan 2011 19:25:34 -0000
Received: (qmail 89120 invoked by uid 500); 14 Jan 2011 19:25:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89059 invoked by uid 500); 14 Jan 2011 19:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89051 invoked by uid 99); 14 Jan 2011 19:25:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 19:25:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jan 2011 19:25:25 +0000
Received: by qyk7 with SMTP id 7so6544260qyk.14
        for <java-user@lucene.apache.org>; Fri, 14 Jan 2011 11:25:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=IGwr9PtzCk/AhMxj8f1WO2C8+TXiHBMhhOQEz3WTPtM=;
        b=r3x1JTeri7v860ytLTR/yDuFHSJGYB1HXcBdB+GZu8WKKTovNQv2PHJyQ1TsR3RnAE
         B1fEHKL6+VGut81dz6FRLGQQvEcEoxJCdHGhvwoWIBseAFiL2LV+E2hmWfL0ifNWcoXA
         LjHrwH2icQTnE0JCE4M0osWyvoiBl/Ebk9dQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lS1KqOPTk99ZaXpvmM5HdGLzZLKNyfzlcmbirJB1RA5wG7C/aWQyMJD3GRMidFh2BF
         bEk3Kl+PR665kLazhS8towWLX7rAfXvwFfmLSGoXX85i9Gy0IAt7P2uyo3OkXejR28hJ
         ovVXBWY9Yl6A/na7M4dU4n02bJRO4oIJmmvCk=
MIME-Version: 1.0
Received: by 10.229.235.147 with SMTP id kg19mr1009191qcb.61.1295033104212;
 Fri, 14 Jan 2011 11:25:04 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Fri, 14 Jan 2011 11:25:04 -0800 (PST)
In-Reply-To: <AANLkTin0euQ2cAO4EhoO85Pd0aVwS8X=ycEeGD=reSuQ@mail.gmail.com>
References: <AANLkTim456sizafRhB6UD3f8L5EDGezSfe+2Z5EJ88hk@mail.gmail.com>
	<AANLkTin0euQ2cAO4EhoO85Pd0aVwS8X=ycEeGD=reSuQ@mail.gmail.com>
Date: Fri, 14 Jan 2011 11:25:04 -0800
Message-ID: <AANLkTin9CGJ+Mp2H8U3NfhM-iOtn03H63EU=vxXzeit-@mail.gmail.com>
Subject: Re: lucene across many clients
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f922de2623640499d364c6
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f922de2623640499d364c6
Content-Type: text/plain; charset=ISO-8859-1

That is certainly one way of approaching it. Another is to add a
ClientId field to each document and add a mandatory "AND
ClientId=thisclient"
to each query.

This will have some effect on relevance since the statistics are
gathered over the whole corpus rather than just the individual client.

Also, if you us autosuggest, you may well suggest terms that will
result in zero hits.

Best
Erick

On Thu, Jan 13, 2011 at 9:58 AM, Sean Joyce <sean@arluckpromotions.com>wrote:

> Hi Lucene Users,
>
> I work on a product with several thousand clients. We use Lucene to
> index various client data and make the functionality available as part
> of our product. Currently, each client has its own index for security
> reasons, but I am wondering if this is the best way to handle the
> indexing moving forward. Right now we don't take advantage of the near
> real-time indexing. As we scale up (and potentially incorporate NRT),
> I am wondering if an index per client is the best way to architect the
> system. Maintaining hundreds or more IndexWriters in memory to support
> NRT seems potentially problematic. Perhaps a better way would be to
> create one large index (or several large indices) and use a BitSet to
> to limit the results to only the relevant client. Has any one worked
> on a system similar to this one and can provide some architecture
> advice?
>
> -Sean
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f922de2623640499d364c6--

From java-user-return-48358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 15 08:50:36 2011
Return-Path: <java-user-return-48358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74106 invoked from network); 15 Jan 2011 08:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jan 2011 08:50:35 -0000
Received: (qmail 29755 invoked by uid 500); 15 Jan 2011 08:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29212 invoked by uid 500); 15 Jan 2011 08:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29204 invoked by uid 99); 15 Jan 2011 08:50:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jan 2011 08:50:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jan 2011 08:50:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C9D1E45EB39
	for <java-user@lucene.apache.org>; Sat, 15 Jan 2011 09:50:00 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FxBA0K7abvY8 for <java-user@lucene.apache.org>;
	Sat, 15 Jan 2011 09:49:50 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A5EE145EACB
	for <java-user@lucene.apache.org>; Sat, 15 Jan 2011 09:49:49 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTim456sizafRhB6UD3f8L5EDGezSfe+2Z5EJ88hk@mail.gmail.com>	<AANLkTin0euQ2cAO4EhoO85Pd0aVwS8X=ycEeGD=reSuQ@mail.gmail.com> <AANLkTin9CGJ+Mp2H8U3NfhM-iOtn03H63EU=vxXzeit-@mail.gmail.com>
In-Reply-To: <AANLkTin9CGJ+Mp2H8U3NfhM-iOtn03H63EU=vxXzeit-@mail.gmail.com>
Subject: RE: lucene across many clients
Date: Sat, 15 Jan 2011 09:49:54 +0100
Message-ID: <00dc01cbb491$2e2d2800$8a877800$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHpQ7L0+5DIdPz2gEGrck8I33ohZQIre3d4Afp2ommTdWtA8A==
Content-Language: de

To don't affect Scoring, use ConstantScoreQuery for the AND clause :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, January 14, 2011 8:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucene across many clients
> 
> That is certainly one way of approaching it. Another is to add a ClientId
field
> to each document and add a mandatory "AND ClientId=thisclient"
> to each query.
> 
> This will have some effect on relevance since the statistics are gathered
over
> the whole corpus rather than just the individual client.
> 
> Also, if you us autosuggest, you may well suggest terms that will result
in
> zero hits.
> 
> Best
> Erick
> 
> On Thu, Jan 13, 2011 at 9:58 AM, Sean Joyce
> <sean@arluckpromotions.com>wrote:
> 
> > Hi Lucene Users,
> >
> > I work on a product with several thousand clients. We use Lucene to
> > index various client data and make the functionality available as part
> > of our product. Currently, each client has its own index for security
> > reasons, but I am wondering if this is the best way to handle the
> > indexing moving forward. Right now we don't take advantage of the near
> > real-time indexing. As we scale up (and potentially incorporate NRT),
> > I am wondering if an index per client is the best way to architect the
> > system. Maintaining hundreds or more IndexWriters in memory to support
> > NRT seems potentially problematic. Perhaps a better way would be to
> > create one large index (or several large indices) and use a BitSet to
> > to limit the results to only the relevant client. Has any one worked
> > on a system similar to this one and can provide some architecture
> > advice?
> >
> > -Sean
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 07:32:23 2011
Return-Path: <java-user-return-48359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62358 invoked from network); 16 Jan 2011 07:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 07:32:23 -0000
Received: (qmail 48269 invoked by uid 500); 16 Jan 2011 07:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47759 invoked by uid 500); 16 Jan 2011 07:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47751 invoked by uid 99); 16 Jan 2011 07:32:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 07:32:15 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 07:32:08 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <Amr.ElAdawy@etisalat.com>)
	id 1PeN5U-00061S-7q
	for java-user@lucene.apache.org; Sat, 15 Jan 2011 23:31:44 -0800
Date: Sat, 15 Jan 2011 23:31:44 -0800 (PST)
From: Amr ElAdawy <Amr.ElAdawy@etisalat.com>
To: java-user@lucene.apache.org
Message-ID: <1295163104226-2265633.post@n3.nabble.com>
In-Reply-To: <1294247310133-2199732.post@n3.nabble.com>
References: <1294038939049-2183420.post@n3.nabble.com> <996817.46891.qm@web121702.mail.ne1.yahoo.com> <1294047086752-2183784.post@n3.nabble.com> <846141.33754.qm@web121705.mail.ne1.yahoo.com> <1294060168195-2184613.post@n3.nabble.com> <994537.79417.qm@web121702.mail.ne1.yahoo.com> <1294213616056-2197077.post@n3.nabble.com> <372386.16354.qm@web121706.mail.ne1.yahoo.com> <1294247310133-2199732.post@n3.nabble.com>
Subject: Re: Search Score percentage, Should not be relative to the highest
 score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


any ideas?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Search-Score-percentage-Should-not-be-relative-to-the-highest-score-tp2183420p2265633.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 10:07:00 2011
Return-Path: <java-user-return-48360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8248 invoked from network); 16 Jan 2011 10:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 10:06:59 -0000
Received: (qmail 5865 invoked by uid 500); 16 Jan 2011 10:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5276 invoked by uid 500); 16 Jan 2011 10:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5268 invoked by uid 99); 16 Jan 2011 10:06:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 10:06:52 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.117] (HELO web30504.mail.mud.yahoo.com) (68.142.200.117)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jan 2011 10:06:46 +0000
Received: (qmail 67106 invoked by uid 60001); 16 Jan 2011 10:06:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295172385; bh=5o86zN8jvrkpdMzqa+WtDWzcYKm1PvZJMKR4SzNxu10=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ouPRCfuucBEjwhgLRbDLW//6DRTlyQjuAAKWcrFNA5l+1SQpY6bM4yAP5oPa1fwXOQw8mA7BSRgmpYbH4tgMHSiLTi1I3eZHNlqgfS3paCAZa4SwEVyL92dvmsgJZQ+VKl6l7xyECj+04KfyduneLRLlYfsTbID8KVW1IOE5amw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=FWQbaXtA6rzMEl7yxJi7l3ZZYLMJfZkUz38LT7r78uWcvD0EBVIzMobss2MpZ64kc9XdB1VtdRODdWOkTlbzFuhGET0fGUTxBuLezqtSPK4jAhUjrbZttjFoe+bZTLCYu3leFp7DZ4orTi7xiGT1B98jXCslTm6WpSwwdZh1xqA=;
Message-ID: <241684.64056.qm@web30504.mail.mud.yahoo.com>
X-YMail-OSG: z35LY0gVM1lStCSHteRktOvrR6QIm6tDakeF4vUqDbDmmyu
 5yYeg3mrVl0ulZ7_zOU6c2DgCv8mz0bqOcSl1qvmjod2nGzu6XaHdVmLZuzR
 deqxaGcQ11_GMoIbx4fndzfSjl6TQkJ5JSrifoACFwEg72XRbvKRliC4eZbz
 nLGQQfeaeLnwkLZuFUl1fTsdJbB1i6ffX51k5AgsyWDZg7XTXtWBppe8ric8
 dksgGMexAN9Pi3SjxBZHD5M8pP95il.BqznTjhmBYYrVxsfrWZE1.8sq.gP_
 47EK7Fhdkx1QYXYt6DLBibN1DzlQX4JhJzU5uGzgWa_Yq6p3rB4njKIYF6wj
 ZJl8PiMPaDt.pk8ubsUKRMXuAaluJFIJ63Ny9JOuMh7DBwAgYfJNeIpk-
Received: from [212.143.35.226] by web30504.mail.mud.yahoo.com via HTTP; Sun, 16 Jan 2011 02:06:25 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Sun, 16 Jan 2011 02:06:25 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: RE: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
In-Reply-To: <005b01cbb338$4130aa80$c391ff80$@thetaphi.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-970111663-1295172385=:64056"

--0-970111663-1295172385=:64056
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

Thank you kindly for replying.=20
Unfortunately, reopen() doesn't help me see the changes.
Here's my test:
First I write & commit a document, and run a search - which correctly finds=
 this document.
Then I write & commit another document, re-open the reader and run another =
search - this should find 2 documents, but it only finds 1 document (the fi=
rst one).
BTW if instead of 'reader.reopen()' I instantiate a brand-new searcher (and=
 reader), it correctly finds 2 documents...

// Shared objects:
Directory directory =3D FSDirectory.open(new File("c:/myDir"));
Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);=20
IndexWriter writer =3D new IndexWriter(directory, analyzer,=20
=A0=A0=A0=A0 IndexWriter.MaxFieldLength.LIMITED);
Query query =3D=A0 new TermQuery(new Term("title", "hello"));

// Write document #1:
writer.addDocument(makeDoc("hello world 1")); // Field title=3D"hello world=
 1"
writer.commit();

// First search (yields document #1 as expected):
IndexReader reader=3DIndexReader.open(directory, true);
IndexSearcher searcher =3D new IndexSearcher(reader);
TopDocs results1 =3D searcher.search(query, 10000);
printResults(searcher, results1);

// Write document #2:
writer.addDocument(makeDoc("hello world 2")); // Field title=3D"hello world=
 2"
writer.commit();

// Reopen reader, and search (should yield 2 documents, but I only see 1):
reader.reopen(true);
TopDocs results2 =3D searcher.search(query, 10000);
printResults(searcher, results2);


--- On Thu, 1/13/11, Uwe Schindler <uwe@thetaphi.de> wrote:

From: Uwe Schindler <uwe@thetaphi.de>
Subject: RE: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
Date: Thursday, January 13, 2011, 7:40 AM

You can leave the IndexWriter and IndexSearcher all the time. The only
important thing, changes made by IndexWriter's commit() method are only see=
n
by IndexSearcher, when the underlying IndexReader is reopened (e.g. by usin=
g
IndexReader.reopen()) - please note that this only works with direct access
to the IndexReaders, so I would recommend using the constructors of
IndexSearcher that take IndexReaders (the Directory ones are only for easy
beginner's use).=20

=0A=0A=0A      
--0-970111663-1295172385=:64056--

From java-user-return-48361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 11:17:47 2011
Return-Path: <java-user-return-48361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26603 invoked from network); 16 Jan 2011 11:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 11:17:47 -0000
Received: (qmail 41959 invoked by uid 500); 16 Jan 2011 11:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41515 invoked by uid 500); 16 Jan 2011 11:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41507 invoked by uid 99); 16 Jan 2011 11:17:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 11:17:40 +0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 11:17:33 +0000
Received: by pzk28 with SMTP id 28so821420pzk.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 03:17:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=aSRsLg/k8wkdUpFekuAkeq2ndx0wM6RnL4OObPph2/8=;
        b=G0DGs2l5Gz+sIc9fP94xP4fQv32zxOAJ5Spp+AOApSm9FrPqQQkvM163xOFbg6oh+u
         KoGielk+8lCtkKn3yMfekrdLX0IVa6YNJlLdBi4FZAfnWUTv1wP5h9L5AlNUzsQNa36+
         OoY1UCfKZtK0zLcNzN1x+sL6FIM4gixo0ZWjc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=uZWft8/4cUeI/HVHKbvdbKDUQUzDHKFZCSP58amdAmkhGB+SshznU2cVSLWfEpYRoE
         mWQWZgBg4Y4T1UqAF/1gcb1ENsBJaE5LRRSf5nqLgkr2Ojo27y9Cez6pLh2wkag8ompv
         vtDz4k7xnUbd8GgunRqRNPV/fnKov89wpfSdk=
Received: by 10.142.97.15 with SMTP id u15mr2543146wfb.54.1295176631483; Sun,
 16 Jan 2011 03:17:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.104.2 with HTTP; Sun, 16 Jan 2011 03:16:51 -0800 (PST)
In-Reply-To: <241684.64056.qm@web30504.mail.mud.yahoo.com>
References: <005b01cbb338$4130aa80$c391ff80$@thetaphi.de> <241684.64056.qm@web30504.mail.mud.yahoo.com>
From: Raf <r.ventaglio@gmail.com>
Date: Sun, 16 Jan 2011 12:16:51 +0100
Message-ID: <AANLkTi=jQ9RPo2vMJOa4yemB+7xMeDZRa+DGgcrMthae@mail.gmail.com>
Subject: Re: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c82c0a7e7b0499f4cf03
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c82c0a7e7b0499f4cf03
Content-Type: text/plain; charset=ISO-8859-1

Look at the JavaDoc:
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/index/IndexReader.html#reopen()

The *reopen* method returns a *new reader* if the index has changed since
the original reader was opened.

So, you should do something like this:
IndexReader newReader = reader.reopen(true);
if (newReader != reader) {
reader.close();
 reader = newReader;
searcher = new IndexSearcher(reader);
}

instead of
reader.reopen(true);

Bye.
*Raf*

On Sun, Jan 16, 2011 at 11:06 AM, sol myr <solmyr72@yahoo.com> wrote:

> Hi,
>
> Thank you kindly for replying.
> Unfortunately, reopen() doesn't help me see the changes.
> Here's my test:
> First I write & commit a document, and run a search - which correctly finds
> this document.
> Then I write & commit another document, re-open the reader and run another
> search - this should find 2 documents, but it only finds 1 document (the
> first one).
> BTW if instead of 'reader.reopen()' I instantiate a brand-new searcher (and
> reader), it correctly finds 2 documents...
>
> // Shared objects:
> Directory directory = FSDirectory.open(new File("c:/myDir"));
> Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
> IndexWriter writer = new IndexWriter(directory, analyzer,
>      IndexWriter.MaxFieldLength.LIMITED);
> Query query =  new TermQuery(new Term("title", "hello"));
>
> // Write document #1:
> writer.addDocument(makeDoc("hello world 1")); // Field title="hello world
> 1"
> writer.commit();
>
> // First search (yields document #1 as expected):
> IndexReader reader=IndexReader.open(directory, true);
> IndexSearcher searcher = new IndexSearcher(reader);
> TopDocs results1 = searcher.search(query, 10000);
> printResults(searcher, results1);
>
> // Write document #2:
> writer.addDocument(makeDoc("hello world 2")); // Field title="hello world
> 2"
> writer.commit();
>
> // Reopen reader, and search (should yield 2 documents, but I only see 1):
> reader.reopen(true);
> TopDocs results2 = searcher.search(query, 10000);
> printResults(searcher, results2);
>
>
> --- On Thu, 1/13/11, Uwe Schindler <uwe@thetaphi.de> wrote:
>
> From: Uwe Schindler <uwe@thetaphi.de>
> Subject: RE: Newbie: "Life span" of IndexWriter / IndexSearcher?
> To: java-user@lucene.apache.org
> Date: Thursday, January 13, 2011, 7:40 AM
>
> You can leave the IndexWriter and IndexSearcher all the time. The only
> important thing, changes made by IndexWriter's commit() method are only
> seen
> by IndexSearcher, when the underlying IndexReader is reopened (e.g. by
> using
> IndexReader.reopen()) - please note that this only works with direct access
> to the IndexReaders, so I would recommend using the constructors of
> IndexSearcher that take IndexReaders (the Directory ones are only for easy
> beginner's use).
>
>
>
>
>

--00504502c82c0a7e7b0499f4cf03--

From java-user-return-48362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 12:22:51 2011
Return-Path: <java-user-return-48362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50616 invoked from network); 16 Jan 2011 12:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 12:22:51 -0000
Received: (qmail 92412 invoked by uid 500); 16 Jan 2011 12:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91965 invoked by uid 500); 16 Jan 2011 12:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91953 invoked by uid 99); 16 Jan 2011 12:22:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 12:22:44 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.120] (HELO web30507.mail.mud.yahoo.com) (68.142.200.120)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jan 2011 12:22:38 +0000
Received: (qmail 5985 invoked by uid 60001); 16 Jan 2011 12:22:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295180536; bh=VhCIK7sWtdKDxLlQz46BYJurwz9vcDULK9cpb3qYwW0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=z72MZo82XBpkPEVnGN/GVy8HU34zt/kgKRTPWngZN+leyphDuc+m+ShADT+E/HO+rTq4+u3tIUC+WjacK0T+UwKsNgGoGPrCejnAGKTwl32P2pw5p6wE43+baz4BDDjP/ErO5XLd3IdmHTuXiX2KHR+D5wLW2a40ao54Qrz2BAg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=gVoQiBqMRMfmKrWHPKkGIhV/iMtACH0R3j1LXnH9dLDe1dbARs09H7gFeqTKObz9DIGagZYGfDjIdGqPBEF3wWfemMfZyMDWRlefXCqC4BoC4jH3agRb1S04hgVFrLsibX+mRWV4mWkNFNSA2KDQEyNx6JVYjfbWEbyuBOTt/jo=;
Message-ID: <120604.5756.qm@web30507.mail.mud.yahoo.com>
X-YMail-OSG: vB3qIgMVM1kxN.UmGaxnbpxSpshbhJQqTYhWDSx_GopFswf
 m6m_SpozaQhkGNnMJC7sXoWKvkkVd_qMyd.tqYdlx02G91u0Fz32GzktIQXb
 _YZgm3S1nGDoUR2GjzZd9Zj_ALisJepUnc3zaL7qMtzXUaEwTkoM2Z8sfNfM
 HnqYvdBt_PPDS6bHepPXvRtwZi9Lh1jCQ5yRXrAS.6yTBZBASkL7VKJSAazC
 f3rww_Cl_1FXehj3Ae4oDJdmN7ymW.qwu63h3JFHpdzZKhiHYglKUemKpoxG
 QdbXdnXdijxeswPNlc.i_.nH925u.JlZXjdkdmWrs6pfRR28jzg--
Received: from [212.143.35.226] by web30507.mail.mud.yahoo.com via HTTP; Sun, 16 Jan 2011 04:22:15 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Sun, 16 Jan 2011 04:22:15 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Re: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTi=jQ9RPo2vMJOa4yemB+7xMeDZRa+DGgcrMthae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1116461622-1295180535=:5756"

--0-1116461622-1295180535=:5756
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Worked like a charm - thanks a lot.


--- On Sun, 1/16/11, Raf <r.ventaglio@gmail.com> wrote:

From: Raf <r.ventaglio@gmail.com>
Subject: Re: Newbie: "Life span" of IndexWriter / IndexSearcher?
To: java-user@lucene.apache.org
Date: Sunday, January 16, 2011, 3:16 AM

Look at the JavaDoc:
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/index/IndexR=
eader.html#reopen()

The *reopen* method returns a *new reader* if the index has changed since
the original reader was opened.

So, you should do something like this:
IndexReader newReader =3D reader.reopen(true);
if (newReader !=3D reader) {
reader.close();
 reader =3D newReader;
searcher =3D new IndexSearcher(reader);
}

instead of
reader.reopen(true);

Bye.
*Raf*

On Sun, Jan 16, 2011 at 11:06 AM, sol myr <solmyr72@yahoo.com> wrote:

> Hi,
>
> Thank you kindly for replying.
> Unfortunately, reopen() doesn't help me see the changes.
> Here's my test:
> First I write & commit a document, and run a search - which correctly fin=
ds
> this document.
> Then I write & commit another document, re-open the reader and run anothe=
r
> search - this should find 2 documents, but it only finds 1 document (the
> first one).
> BTW if instead of 'reader.reopen()' I instantiate a brand-new searcher (a=
nd
> reader), it correctly finds 2 documents...
>
> // Shared objects:
> Directory directory =3D FSDirectory.open(new File("c:/myDir"));
> Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
> IndexWriter writer =3D new IndexWriter(directory, analyzer,
>=A0 =A0 =A0 IndexWriter.MaxFieldLength.LIMITED);
> Query query =3D=A0 new TermQuery(new Term("title", "hello"));
>
> // Write document #1:
> writer.addDocument(makeDoc("hello world 1")); // Field title=3D"hello wor=
ld
> 1"
> writer.commit();
>
> // First search (yields document #1 as expected):
> IndexReader reader=3DIndexReader.open(directory, true);
> IndexSearcher searcher =3D new IndexSearcher(reader);
> TopDocs results1 =3D searcher.search(query, 10000);
> printResults(searcher, results1);
>
> // Write document #2:
> writer.addDocument(makeDoc("hello world 2")); // Field title=3D"hello wor=
ld
> 2"
> writer.commit();
>
> // Reopen reader, and search (should yield 2 documents, but I only see 1)=
:
> reader.reopen(true);
> TopDocs results2 =3D searcher.search(query, 10000);
> printResults(searcher, results2);
>
>
> --- On Thu, 1/13/11, Uwe Schindler <uwe@thetaphi.de> wrote:
>
> From: Uwe Schindler <uwe@thetaphi.de>
> Subject: RE: Newbie: "Life span" of IndexWriter / IndexSearcher?
> To: java-user@lucene.apache.org
> Date: Thursday, January 13, 2011, 7:40 AM
>
> You can leave the IndexWriter and IndexSearcher all the time. The only
> important thing, changes made by IndexWriter's commit() method are only
> seen
> by IndexSearcher, when the underlying IndexReader is reopened (e.g. by
> using
> IndexReader.reopen()) - please note that this only works with direct acce=
ss
> to the IndexReaders, so I would recommend using the constructors of
> IndexSearcher that take IndexReaders (the Directory ones are only for eas=
y
> beginner's use).
>
>
>
>
>
=0A=0A=0A      
--0-1116461622-1295180535=:5756--

From java-user-return-48363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 14:33:48 2011
Return-Path: <java-user-return-48363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99520 invoked from network); 16 Jan 2011 14:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 14:33:47 -0000
Received: (qmail 67137 invoked by uid 500); 16 Jan 2011 14:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66786 invoked by uid 500); 16 Jan 2011 14:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66777 invoked by uid 99); 16 Jan 2011 14:33:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 14:33:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.143.35.233] (HELO exchange1.timetoknow.local) (212.143.35.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 14:33:33 +0000
Received: from exchange1.timetoknow.local ([192.168.40.96]) by
 exchange1.timetoknow.local ([192.168.40.96]) with mapi; Sun, 16 Jan 2011
 16:33:11 +0200
From: Pelit Mamani <Pelit.Mamani@timetoknow.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 16 Jan 2011 16:33:10 +0200
Subject: Result ordering
Thread-Topic: Result ordering
Thread-Index: Acu1hf4UGS1UMJiISqSTm50+muv7AA==
Message-ID: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-esetresult: clean, is OK
x-esetid: CAA1D720055548329EE5
Content-Type: multipart/alternative;
	boundary="_000_6F60A8998A8E6746B153E6618FE9EEA7052E22AAACexchange1time_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_6F60A8998A8E6746B153E6618FE9EEA7052E22AAACexchange1time_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I'm maintaining some Lucene-based code, and we're trying to get control ove=
r result ordering (users aren't happy with the default).
I know how to boost a Field or Document (very useful).
But:


1)      Is there a way to boost "OR" queries, based on the number of matche=
d terms?
So the OR query "lord rings" will first show the document "LORD of the RING=
S" (which holds both words), and only later "selected jewels and RINGS" (wh=
ich only holds one word).
Is that what you call "Term Frequency"? And how do you boost it further?
I did a bit of tinkering and got the impression Lucene would boost it by de=
fault, but not enough - it's sometimes overridden by other boosting factors=
 (maybe the boost for short expressions).


2)      Is there a way to boost based on "positions"?
So "LORD of the RINGS" gets precedence over "LORD of the funny golden RINGS=
", because the search words are positioned closer to each other?


3)      With wildcard searches, is there a way to boost documents that hold=
 an exact match.
So if I search for "ring*", I first see the exact match "story of a RING", =
and only later "a RINGING failure"

Thanx a bunch.




--_000_6F60A8998A8E6746B153E6618FE9EEA7052E22AAACexchange1time_--

From java-user-return-48364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 15:16:16 2011
Return-Path: <java-user-return-48364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13846 invoked from network); 16 Jan 2011 15:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 15:16:15 -0000
Received: (qmail 85560 invoked by uid 500); 16 Jan 2011 15:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85166 invoked by uid 500); 16 Jan 2011 15:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85157 invoked by uid 99); 16 Jan 2011 15:16:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 15:16:09 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.115] (HELO web30502.mail.mud.yahoo.com) (68.142.200.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jan 2011 15:16:01 +0000
Received: (qmail 82797 invoked by uid 60001); 16 Jan 2011 15:15:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295190940; bh=fg0TytxFAHtKTOEdxbHxrdhnA2YQQYHfBlSxjd7OvYM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=EQcxwU4PF4sx2B3Pdrvdn1x4bwQXF/KSQd/wl+1O4Q8j+Ddd8c77xyc9qdsfdtADuvzkN8gGfB9fAFP/FUcffvBm1BaRJ+oelSEfRUjFyGUM0VJj+PTrTUsiW5+VRd4pz1CkOgMrYnirU25JcNZvUN87e/dcMkiKmGaQI7LZU8Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=CYJbrxrt23ebsrr1tiRiSShjI8D9f7UcltZ4jmU1Oksp1Pp4qiDIieNNw1SojXXID96Ym0TRu5S6+uhgHIpVT8T2GwmH/aL8DRPTqf7O/8F0b1wm5rxrifLBGVhx4otu11BL1KFnPhhKr6MFXHs+TyGxd1uCge9FMUift2aSCLQ=;
Message-ID: <621653.82316.qm@web30502.mail.mud.yahoo.com>
X-YMail-OSG: smLvvWgVM1kXuZ2hI9R6OM4sTD8segARfsTf_fsykU0HGuy
 Fq020dTGqU9pcsJC.qQWf9AtDoE1xSYQwhR4znugiBWs_3i4oUmsAmM8T_KJ
 7kotlr.hmImCkPC2Fjn28Qwlrexle5_3iqZi2_Iygv4VldGDxp69E6k7.ri5
 xP3WLSt43rsr.in5FS4kTb5npjIgnpmfWGvy8YpNHWp.1RQtgNrynRn9y6ey
 sBOf5v6VpSl197uUyAoem4Zz0W2kktSgTQy9TcTCP7j42HMIvlEuTyJQU984
 0Y1SCLJPm
Received: from [212.143.35.226] by web30502.mail.mud.yahoo.com via HTTP; Sun, 16 Jan 2011 07:15:40 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Sun, 16 Jan 2011 07:15:40 -0800 (PST)
From: sol myr <solmyr72@yahoo.com>
Subject: Question on writer optimize() / file merging?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1973843852-1295190940=:82316"

--0-1973843852-1295190940=:82316
Content-Type: text/plain; charset=us-ascii

Hi,

I'm trying to understand the behavior of file merging / optimization.
I see that whenever my IndexWriter calls 'commit()', it creates a new file (or fileS).
I also see these files merged when calling 'optimize()' , as much as allowed by the parameter 'NoCFSRatio' .

But I'm still trying to figure out:

1) Will my writer still perform some file merging, even if I don't explicitly call 'optimize()'?

2) Is there a way to configure the number or files, or their size?

3) I always keep an open IndexSearcher (and IndexReader). I know they should be re-opened when a change occurs, but it's not crucial to see changes immediately, so I just poll periodically, and it might be a few minutes before my reader is re-opened and allowed to see changes.
But will this approach disturb the writer's ability to optimize / merge files? If a reader is open, will it prevent file merging?

Thanks




      
--0-1973843852-1295190940=:82316--

From java-user-return-48365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 15:26:57 2011
Return-Path: <java-user-return-48365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15877 invoked from network); 16 Jan 2011 15:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 15:26:57 -0000
Received: (qmail 91298 invoked by uid 500); 16 Jan 2011 15:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90865 invoked by uid 500); 16 Jan 2011 15:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90857 invoked by uid 99); 16 Jan 2011 15:26:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 15:26:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 15:26:46 +0000
Received: by fxm2 with SMTP id 2so5184443fxm.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 07:26:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=toG7+zxoPLdoG8lzCtZYeGYBNDgs0/Lz+4ulcgSyrH0=;
        b=CYUFKdQRXZJ4aoGPQcp0sJZnXxF/BRidv22vLbYtFC5Kh266KbxQBhITC/U2Bzl17B
         Nf6aXrsckHznvrRfWUwqeT0F1thOHv5BIfzvkpYNUfe6rzMTJvhKvnia5gqWNP9gpTaO
         d4+AKnnOqEjvS3mD40CKnoFU6/ZW9B/UX7zf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=KKgUnlrbdmiLDyPgkmRdEHki2ircdIRV2xzs5DIF3kQqMTOmcpfgYCnpRBnqTIta/V
         HjVd4SpE76UG6iincykMbh7aTCJw2mxGEKG0a5XWS16eC80jO7g4LyvBFOlzQhMsw29y
         mdbPlna18Yyl4NfGpXXWbKTnGtz45SnhXjtDU=
Received: by 10.223.122.146 with SMTP id l18mr3574646far.67.1295191585147;
 Sun, 16 Jan 2011 07:26:25 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.111.142 with HTTP; Sun, 16 Jan 2011 07:26:04 -0800 (PST)
In-Reply-To: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
References: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
From: Anshum <anshumg@gmail.com>
Date: Sun, 16 Jan 2011 20:56:04 +0530
Message-ID: <AANLkTimne1FNj+URxkVaA_-W3Rj3JLtpqgZRXXc62pzD@mail.gmail.com>
Subject: Re: Result ordering
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a78f594c3e0499f84af5

--001636c5a78f594c3e0499f84af5
Content-Type: text/plain; charset=ISO-8859-1

Hi Pelit,
Firstly, number of words that match a query in a document is not term
frequency. You may get some more idea on the terminologies used in search
at
http://www.miislita.com/term-vector/term-vector-3.html

Looking at what you're trying to achieve, a few solutions to you would be.
Below, I am assuming your query to be for terms "A B":
1. Look at phrase queries and setting a high slop value so matches like "A
B" are weighted more than "A .... B" (separated by a few positions).
2. Also you could have a custom similarity (advanced)
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/SimilarityDelegator.html
and
use the coord value.
3. For wildcard searches, a brute force mechanism could be, you may have an
or query  (finally the query is expanded to an OR query anyways) for RING OR
RING* and boost the former part.

Looking at your current query seems like you'd need more understanding on
lucene and getting a copy of "Lucene In Action 2nd
Ed<http://www.manning.com/hatcher3/>."
would be  a good idea for you and everyone in your position.
Hope that helps.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Sun, Jan 16, 2011 at 8:03 PM, Pelit Mamani
<Pelit.Mamani@timetoknow.com>wrote:

> Hi,
>
> I'm maintaining some Lucene-based code, and we're trying to get control
> over result ordering (users aren't happy with the default).
> I know how to boost a Field or Document (very useful).
> But:
>
>
> 1)      Is there a way to boost "OR" queries, based on the number of
> matched terms?
> So the OR query "lord rings" will first show the document "LORD of the
> RINGS" (which holds both words), and only later "selected jewels and RINGS"
> (which only holds one word).
> Is that what you call "Term Frequency"? And how do you boost it further?
> I did a bit of tinkering and got the impression Lucene would boost it by
> default, but not enough - it's sometimes overridden by other boosting
> factors (maybe the boost for short expressions).
>
>
> 2)      Is there a way to boost based on "positions"?
> So "LORD of the RINGS" gets precedence over "LORD of the funny golden
> RINGS", because the search words are positioned closer to each other?
>
>
> 3)      With wildcard searches, is there a way to boost documents that hold
> an exact match.
> So if I search for "ring*", I first see the exact match "story of a RING",
> and only later "a RINGING failure"
>
> Thanx a bunch.
>
>
>
>

--001636c5a78f594c3e0499f84af5--

From java-user-return-48366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 15:50:32 2011
Return-Path: <java-user-return-48366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23769 invoked from network); 16 Jan 2011 15:50:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 15:50:31 -0000
Received: (qmail 39030 invoked by uid 500); 16 Jan 2011 15:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38845 invoked by uid 500); 16 Jan 2011 15:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38827 invoked by uid 99); 16 Jan 2011 15:50:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 15:50:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 15:50:19 +0000
Received: by wwd20 with SMTP id 20so4327395wwd.5
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 07:49:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=gKmVjfoX0KF/vGgUgfjgW2ezdHV1SK/7wXuabGQ9mVI=;
        b=Dokd56ZDgoQWe7GT4bnmQLHj4Hh+jKxfAlFgtJZH7sPpLye8mbkh3O3owaag5LRJeP
         PPufZB+AkXsTw/XETZDzhCfO1oLKunvAb4kYsWFkBsxluVvskKgvWGlOrltW5yJTpqPG
         3s2Jmj1j5rwtDwgQibGGOJnoigl9Q6icfAZDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZWcvPrJoFvzEioLR4ye7k/z92e27vdQTUSAQrT5h1uJ1s3Y4aOrhB72zsKtNq8Euck
         ExGWRQ/GCUNk3OUVvdcO7NxZFI2E74fLLdK2eAMv4pKzp1xhcHsNuUZ+RXQtVRFUxN3p
         H62uMNBuk6fynEVEFxy7927ceAY/QwMx9kF8w=
Received: by 10.216.8.141 with SMTP id 13mr2454868wer.47.1295192998245; Sun,
 16 Jan 2011 07:49:58 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Sun, 16 Jan 2011 07:49:38 -0800 (PST)
In-Reply-To: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
References: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Sun, 16 Jan 2011 21:19:38 +0530
Message-ID: <AANLkTim-hC19bPYDYMsWSipDtkpvusYKfmhUifd+Tu54@mail.gmail.com>
Subject: Re: Result ordering
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d1e23937f2d0499f89ef7

--0016364d1e23937f2d0499f89ef7
Content-Type: text/plain; charset=ISO-8859-1

Hi Pelit,
 My comments are inline.


On Sun, Jan 16, 2011 at 8:03 PM, Pelit Mamani
<Pelit.Mamani@timetoknow.com>wrote:

> Hi,
>
> I'm maintaining some Lucene-based code, and we're trying to get control
> over result ordering (users aren't happy with the default).
> I know how to boost a Field or Document (very useful).
> But:
>
>
> 1)      Is there a way to boost "OR" queries, based on the number of
> matched terms?
> So the OR query "lord rings" will first show the document "LORD of the
> RINGS" (which holds both words), and only later "selected jewels and RINGS"
> (which only holds one word).
> Is that what you call "Term Frequency"? And how do you boost it further?
> I did a bit of tinkering and got the impression Lucene would boost it by
> default, but not enough - it's sometimes overridden by other boosting
> factors (maybe the boost for short expressions).
>
>
The score of a document does get affected by the fraction of query terms it
actually contains. See
It is encapsulated in
Similarity.cord()<http://lucene.apache.org/java/2_9_0/api/core/org/apache/lucene/search/Similarity.html#coord%28int,%20int%29>
You can override it as per your needs.


2)      Is there a way to boost based on "positions"?
> So "LORD of the RINGS" gets precedence over "LORD of thet  funny golden
> RINGS", because the search words are positioned closer to each other?
>
>    SpanQueries support positional/proximity matches and allow you to
specify slopes, but checkout  if it assigns a higher score if terms are
closer.  Else if you are creating your queries programatically, then you can
create multiple span queries with different slopes, assign different boost
to them, and join them together as OR clauses.


>
> 3)      With wildcard searches, is there a way to boost documents that hold
> an exact match.
> So if I search for "ring*", I first see the exact match "story of a RING",
> and only later "a RINGING failure"
>
> Thanx a bunch.
>
>
>
>


-- 
---
Thanks & Regards
Umesh Prasad

--0016364d1e23937f2d0499f89ef7--

From java-user-return-48367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 17:42:53 2011
Return-Path: <java-user-return-48367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62755 invoked from network); 16 Jan 2011 17:42:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 17:42:53 -0000
Received: (qmail 37353 invoked by uid 500); 16 Jan 2011 17:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36974 invoked by uid 500); 16 Jan 2011 17:42:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36966 invoked by uid 99); 16 Jan 2011 17:42:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 17:42:47 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.72.192.243] (HELO fmmailgate05.web.de) (217.72.192.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 17:42:38 +0000
Received:  from mwmweb010  ( [172.20.18.19])
	by fmmailgate05.web.de (Postfix) with ESMTP id 64955645901D
	for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 18:42:18 +0100 (CET)
Received:  from [88.73.226.235]  by  mwmweb010  with HTTP; Sun
 Jan 16 18:42:18 CET 2011
Date: Sun, 16 Jan 2011 18:42:18 +0100 (CET)
From: "Livia Hauser" <livia.hauser@web.de>
Message-ID: <952581476.3551341.1295199738407.JavaMail.fmail@mwmweb010>
Subject: how to implement a proximity search feature using Queries instead
 of terms
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-UI-Message-Type: mail
X-UI-ATTACHMENT-ID-POSTFIX: f8f0c4e3-1261-4fd4-bb8a-fa1b5faf28ab
To: java-user@lucene.apache.org
X-Priority: 3
Importance: normal
Sensitivity: Normal
X-Provags-ID: V01U2FsdGVkX1/Jc4SFoqc/HJ/Xm5T1kisFRgoFRqhhjpwHGOUIzoQRaKUt8puJBIZd
 deSNbQhnWDsUURB553Z1E7GMcP3OcMX8+Ho1qJ8pIyw=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,   =20

i have my own query parser which generates fuzzy/wildcard queries instances=
. It works fantastic, Lucene rocks ;-).
But i have to make sure the words are not to far apart.=C2=A0 I checked cur=
rent proximity implementation. What i found is: PhraseQuery calculates a di=
stance between terms (no fuzzy logic possible).
I have to calculate the distance (proximity) on the base of fuzzy queries.

Somebody=C2=A0 a idea how i can implement this feature?

Short example:
indexed string: "left word a b c d e f other right"
query string (fuzzy 0.5): "ohter word"
expected distance: 6

Many thanks!
___________________________________________________________
NEU: FreePhone - kostenlos mobil telefonieren und surfen!=09=09=09=09
Jetzt informieren: http://produkte.web.de/go/webdefreephone

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 16 17:51:31 2011
Return-Path: <java-user-return-48368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65146 invoked from network); 16 Jan 2011 17:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jan 2011 17:51:31 -0000
Received: (qmail 43338 invoked by uid 500); 16 Jan 2011 17:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42917 invoked by uid 500); 16 Jan 2011 17:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42909 invoked by uid 99); 16 Jan 2011 17:51:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 17:51:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jan 2011 17:51:17 +0000
Received: by fxm2 with SMTP id 2so5322591fxm.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 09:50:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=J9W+AouSZtp05IxhJJbxMp7UUYYGNACgddPYJFSnpeg=;
        b=FEYlNtCn6jhd6fYwa55K010eUWZCNy3Xfrnv9ivKbfr0pFP2Q7BmAWz8AjiB2vUusd
         lTXxYvTgcCl4VA6wmamsQdn9qrOg1B1NdowvR3duE7o9Zt1jb5dgs2xMCjgrW1iQXb2s
         /QXZ/MqGeIFJrY1FPtrmjaJ+MhINnwd2NxWp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=nJZ1m1UI4wdcnUjWFagyDNcihana5itAB3Jsd7b6WJdliUtHref5gUxi0ePCrKvN0o
         PngWUUg3ibo5Fdl3QS1vLQMIjz8pYeVy24wc3X+Dt31M5rHmB764mdKTq42euLKwnAT7
         CHoafjVynPdqbH15RJ+sJTX7l1dRDSQjNSeKE=
Received: by 10.204.123.12 with SMTP id n12mr1587153bkr.174.1295200256601;
 Sun, 16 Jan 2011 09:50:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Sun, 16 Jan 2011 09:50:36 -0800 (PST)
In-Reply-To: <952581476.3551341.1295199738407.JavaMail.fmail@mwmweb010>
References: <952581476.3551341.1295199738407.JavaMail.fmail@mwmweb010>
From: Robert Muir <rcmuir@gmail.com>
Date: Sun, 16 Jan 2011 12:50:36 -0500
Message-ID: <AANLkTim+3E8WFRt8URvG21ZWxVqnwtxG15U5X=5bA7hf@mail.gmail.com>
Subject: Re: how to implement a proximity search feature using Queries instead
 of terms
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Jan 16, 2011 at 12:42 PM, Livia Hauser <livia.hauser@web.de> wrote:
> Hi All,
>
> i have my own query parser which generates fuzzy/wildcard queries instanc=
es. It works fantastic, Lucene rocks ;-).
> But i have to make sure the words are not to far apart.=C2=A0 I checked c=
urrent proximity implementation. What i found is: PhraseQuery calculates a =
distance between terms (no fuzzy logic possible).
> I have to calculate the distance (proximity) on the base of fuzzy queries=
.
>
> Somebody=C2=A0 a idea how i can implement this feature?
>
> Short example:
> indexed string: "left word a b c d e f other right"
> query string (fuzzy 0.5): "ohter word"
> expected distance: 6
>

I think you can do this with lucene's stable branch (what should be
our next 3.1 release):
http://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x/

Have a look at SpanMultiTermQueryWrapper: it allows you to rewrite any
MultiTermQuery (such as Fuzzy/Wildcard) into a SpanQuery.
For example in this case I think you would do:

FuzzyQuery f1 =3D new FuzzyQuery(new Term("field", "ohter"));
SpanQuery s1 =3D new SpanMultiTermQueryWrapper<FuzzyQuery>(f1);

FuzzyQuery f2 =3D new FuzzyQuery(new Term("field", "word"));
SpanQuery s2 =3D new SpanMultiTermQueryWrapper<FuzzyQuery>(f2);

Now you can put the two spanqueries (s1 and s2) into a SpanNearQuery,
and specify the maximum slop, and if they are required to be in order
or not, etc etc.

For more examples see the unit test:
http://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x/lucene/src/te=
st/org/apache/lucene/search/spans/TestSpanMultiTermQueryWrapper.java

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 00:37:45 2011
Return-Path: <java-user-return-48369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41827 invoked from network); 17 Jan 2011 00:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 00:37:45 -0000
Received: (qmail 39161 invoked by uid 500); 17 Jan 2011 00:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39103 invoked by uid 500); 17 Jan 2011 00:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39095 invoked by uid 99); 17 Jan 2011 00:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 00:37:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 00:37:34 +0000
Received: by yxm8 with SMTP id 8so2034127yxm.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 16:37:13 -0800 (PST)
Received: by 10.100.205.12 with SMTP id c12mr2119962ang.194.1295224633691;
        Sun, 16 Jan 2011 16:37:13 -0800 (PST)
Received: from mail-gx0-f176.google.com (mail-gx0-f176.google.com [209.85.161.176])
        by mx.google.com with ESMTPS id x31sm4743713ana.9.2011.01.16.16.37.13
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 16 Jan 2011 16:37:13 -0800 (PST)
Received: by gxk4 with SMTP id 4so2031436gxk.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 16:37:12 -0800 (PST)
MIME-Version: 1.0
Received: by 10.101.70.7 with SMTP id x7mr2155191ank.185.1295224632728; Sun,
 16 Jan 2011 16:37:12 -0800 (PST)
Received: by 10.147.170.8 with HTTP; Sun, 16 Jan 2011 16:37:12 -0800 (PST)
Date: Mon, 17 Jan 2011 11:37:12 +1100
Message-ID: <AANLkTimEzfkueke_ryT2LR9+zO+FsPR7-h5ioD9AteM5@mail.gmail.com>
Subject: Unicode normalisation *before* tokenisation?
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi all.

I discovered there is a normalise filter now, using ICU's Normalizer2
(org.apache.lucene.analysis.icu.ICUNormalizer2Filter).  However, as
this is a filter, various problems can result if used with
StandardTokenizer.

One in particular is half-width Katakana.

Supposing you start out with the following (four Java chars):

    =EF=BE=8A=EF=BE=9F=EF=BE=8A=EF=BE=9F

StandardTokenizer will break this up into four separate tokens of one
char each.  (I can't show an example as the combining handakuten
doesn't actually render by itself on my system.)

Passing this through the normalising filter converts it back to normal
full-width Katakana, but unfortunately still generates four separate
tokens.

Thinking that I could avoid this problem if I filtered the content
*before* the tokeniser got to it, I wrote a NormalisingReader and
passed the text through this before the tokeniser could get its hands
on it.  I figured this would also be faster, as normalisation could be
done in chunks of a few kilobytes instead of smaller chunks.
Unfortunately, it doesn't give usable results, because the text
offsets the tokeniser reports are relative to the normalising reader,
not the original text.  This quickly caused issues when trying to
highlight the hits.

There are alternative workarounds for the specific issue of half-width
Katakana, of course:
    1. Write a filter which joins tokens containing a dakuten or
handakuten with the previous token.
    2. Modify the tokeniser itself to make it output such pairs as
single tokens.

I am currently reluctant to either of these, as there are other issues
with not normalising up-front.  For instance, if "=C2=BD" appeared, it
would be indexed as one token "1/2", and someone searching for it by
typing "1/2" would not find it, as "1/2" would be analysed as two
tokens ("1","2".)  Writing a general filter to join together tokens
which normalise with each other (and split apart those which decompose
into a sequence which won't recompose into anything) seems to be a
significantly difficult task.

So I guess I have two questions:
    1. Is there some way to do filtering to the text before
tokenisation without upsetting the offsets reported by the tokeniser?
    2. Is there some more general solution to this problem, such as an
existing tokeniser similar to StandardTokeniser but with better
Unicode awareness?

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 00:54:26 2011
Return-Path: <java-user-return-48370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44433 invoked from network); 17 Jan 2011 00:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 00:54:26 -0000
Received: (qmail 50032 invoked by uid 500); 17 Jan 2011 00:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49978 invoked by uid 500); 17 Jan 2011 00:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49965 invoked by uid 99); 17 Jan 2011 00:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 00:54:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 00:54:18 +0000
Received: by fxm2 with SMTP id 2so5692792fxm.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 16:53:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=a7BJVlLIP1svgiQy7uphhVKEalhmZUGcDGiX0Mtgi1w=;
        b=BKkmDzFfPgwWuypYerB+s5tbpsy0gQXKXbhOpnaSst4C0kgEQfbSMebDXMB7s4YpMX
         xVhiZ2EdGiE629BwShColhVIAxrVBi4jUfEhLWvat/c4RvnATJthmwEZfKkXGgjRKlLt
         imsKd7lGECjMXB+H8JKtihL5U0egcWHA4fHT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=s8hhpQiaBz/ZP0Nk2wvcYiqbtvrd9rFfR/ilAD+gqR1bVkEY4VAxj/0RlfsC2oPtwy
         FQ16u1xC6rzVMCaIm3q9FuAmTJ7+d+3yUmMaffI4yQk6S5krs1bt6E4/oHhDhgAmmWn1
         gfqfUFa1BUqlTc5xHijqP2MPY5DythHM/IDE4=
Received: by 10.204.121.142 with SMTP id h14mr1726894bkr.93.1295225636465;
 Sun, 16 Jan 2011 16:53:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Sun, 16 Jan 2011 16:53:36 -0800 (PST)
In-Reply-To: <AANLkTimEzfkueke_ryT2LR9+zO+FsPR7-h5ioD9AteM5@mail.gmail.com>
References: <AANLkTimEzfkueke_ryT2LR9+zO+FsPR7-h5ioD9AteM5@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sun, 16 Jan 2011 19:53:36 -0500
Message-ID: <AANLkTikuDNxLcCUUeLPg6tDdzyEaNh-d3Am-m5AUdaJw@mail.gmail.com>
Subject: Re: Unicode normalisation *before* tokenisation?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Sun, Jan 16, 2011 at 7:37 PM, Trejkaz <trejkaz@trypticon.org> wrote:
> So I guess I have two questions:
> =C2=A0 =C2=A01. Is there some way to do filtering to the text before
> tokenisation without upsetting the offsets reported by the tokeniser?
> =C2=A0 =C2=A02. Is there some more general solution to this problem, such=
 as an
> existing tokeniser similar to StandardTokeniser but with better
> Unicode awareness?
>

Hi, I think you want to try the StandardTokenizer in 3.1 (make sure
you pass Version.LUCENE_31 to get the new behavior)
It implements UAX#29 algorithm which respects canonical equivalence...
it sounds like thats what you want.

http://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x/lucene/src/ja=
va/org/apache/lucene/analysis/standard/StandardTokenizer.java

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 01:54:50 2011
Return-Path: <java-user-return-48371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65398 invoked from network); 17 Jan 2011 01:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 01:54:49 -0000
Received: (qmail 89823 invoked by uid 500); 17 Jan 2011 01:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89766 invoked by uid 500); 17 Jan 2011 01:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89758 invoked by uid 99); 17 Jan 2011 01:54:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 01:54:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 01:54:40 +0000
Received: by gwj15 with SMTP id 15so1573644gwj.35
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 17:54:19 -0800 (PST)
Received: by 10.91.153.10 with SMTP id f10mr3900095ago.172.1295229259590;
        Sun, 16 Jan 2011 17:54:19 -0800 (PST)
Received: from mail-yi0-f46.google.com (mail-yi0-f46.google.com [209.85.218.46])
        by mx.google.com with ESMTPS id i10sm4822926anh.12.2011.01.16.17.54.18
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 16 Jan 2011 17:54:19 -0800 (PST)
Received: by yib18 with SMTP id 18so2273011yib.5
        for <java-user@lucene.apache.org>; Sun, 16 Jan 2011 17:54:18 -0800 (PST)
MIME-Version: 1.0
Received: by 10.236.102.171 with SMTP id d31mr6943920yhg.19.1295229258546;
 Sun, 16 Jan 2011 17:54:18 -0800 (PST)
Received: by 10.147.170.8 with HTTP; Sun, 16 Jan 2011 17:54:18 -0800 (PST)
In-Reply-To: <AANLkTikuDNxLcCUUeLPg6tDdzyEaNh-d3Am-m5AUdaJw@mail.gmail.com>
References: <AANLkTimEzfkueke_ryT2LR9+zO+FsPR7-h5ioD9AteM5@mail.gmail.com>
	<AANLkTikuDNxLcCUUeLPg6tDdzyEaNh-d3Am-m5AUdaJw@mail.gmail.com>
Date: Mon, 17 Jan 2011 12:54:18 +1100
Message-ID: <AANLkTimzE2_FY=LDAt+1ABNm4j2TDZ+fDwLteRMjVY9T@mail.gmail.com>
Subject: Re: Unicode normalisation *before* tokenisation?
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Jan 17, 2011 at 11:53 AM, Robert Muir <rcmuir@gmail.com> wrote:
> On Sun, Jan 16, 2011 at 7:37 PM, Trejkaz <trejkaz@trypticon.org> wrote:
>> So I guess I have two questions:
>> =C2=A0 =C2=A01. Is there some way to do filtering to the text before
>> tokenisation without upsetting the offsets reported by the tokeniser?
>> =C2=A0 =C2=A02. Is there some more general solution to this problem, suc=
h as an
>> existing tokeniser similar to StandardTokeniser but with better
>> Unicode awareness?
>>
>
> Hi, I think you want to try the StandardTokenizer in 3.1 (make sure
> you pass Version.LUCENE_31 to get the new behavior)
> It implements UAX#29 algorithm which respects canonical equivalence...
> it sounds like thats what you want.

This does sound like what we want, although it sounds like it might
take time to first identify whether UAX#29 will break the text the way
we want it (there aren't any solid examples of how the algorithm works
on different kinds of text in the standard itself, which is a bit
unfortunate.)

The other problem is that we're still stuck on 2.9 due to having
deprecated features in our codebase still, and having very little time
to do anything about it.  Moving to the new API is taking a while, as
some of those API changes are quite tricky to refactor for
(TokenStream in particular, makes fixing a single class take half a
day, once you add the time to verify that it is working correctly.)

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 07:51:16 2011
Return-Path: <java-user-return-48372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9077 invoked from network); 17 Jan 2011 07:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 07:51:16 -0000
Received: (qmail 93970 invoked by uid 500); 17 Jan 2011 07:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93557 invoked by uid 500); 17 Jan 2011 07:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93549 invoked by uid 99); 17 Jan 2011 07:51:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 07:51:05 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.72.192.248] (HELO fmmailgate07.web.de) (217.72.192.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 07:50:58 +0000
Received:  from mwmweb009  ( [172.20.18.18])
	by fmmailgate07.web.de (Postfix) with ESMTP id B4145796CBC
	for <java-user@lucene.apache.org>; Mon, 17 Jan 2011 08:50:36 +0100 (CET)
Received:  from [62.159.39.101]  by  mwmweb009  with HTTP; Mon
 Jan 17 08:50:36 CET 2011
Date: Mon, 17 Jan 2011 08:50:36 +0100 (CET)
From: "Livia Hauser" <livia.hauser@web.de>
To: java-user@lucene.apache.org
Message-ID: <1317147344.243679.1295250636730.JavaMail.fmail@mwmweb009>
In-Reply-To: <AANLkTim+3E8WFRt8URvG21ZWxVqnwtxG15U5X=5bA7hf@mail.gmail.com>
References: <952581476.3551341.1295199738407.JavaMail.fmail@mwmweb010>,
 <AANLkTim+3E8WFRt8URvG21ZWxVqnwtxG15U5X=5bA7hf@mail.gmail.com>
Subject: Re: how to implement a proximity search feature using Queries
 instead of terms
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-UI-Message-Type: mail
X-UI-ATTACHMENT-ID-POSTFIX: d1c75948-d090-4faf-8db6-f348d10ca4b4
X-Priority: 3
Importance: normal
Sensitivity: Normal
X-Provags-ID: V01U2FsdGVkX19GnRzFMTG5YUjZWeRw5ivrhTc69QWqjWxCA1aKPmgCCKupMiMsjIEU
 dy0EY4pfSJDe40oiGXnfNlZEtqDWhfzuAkY4VVoJyik=

Hi Robert,

it looks really good!
Many thanks!

Regards,
Livia


-----Urspr=C3=BCngliche Nachricht-----
Von: "Robert Muir" &lt;rcmuir@gmail.com&gt;
Gesendet: 16.01.2011 18:50:36
An: java-user@lucene.apache.org
Betreff: Re: how to implement a proximity search feature using Queries inst=
ead of terms

>On Sun, Jan 16, 2011 at 12:42 PM, Livia Hauser <livia.hauser@web.de> wrote=
:
>> Hi All,
>>
>> i have my own query parser which generates fuzzy/wildcard queries instan=
ces. It works fantastic, Lucene rocks ;-).
>> But i have to make sure the words are not to far apart.=C2=A0 I checked =
current proximity implementation. What i found is: PhraseQuery calculates a=
 distance between terms (no fuzzy logic possible).
>> I have to calculate the distance (proximity) on the base of fuzzy querie=
s.
>>
>> Somebody=C2=A0 a idea how i can implement this feature?
>>
>> Short example:
>> indexed string: "left word a b c d e f other right"
>> query string (fuzzy 0.5): "ohter word"
>> expected distance: 6
>>
>
>I think you can do this with lucene's stable branch (what should be
>our next 3.1 release):
>http://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x/
>
>Have a look at SpanMultiTermQueryWrapper: it allows you to rewrite any
>MultiTermQuery (such as Fuzzy/Wildcard) into a SpanQuery.
>For example in this case I think you would do:
>
>FuzzyQuery f1 =3D new FuzzyQuery(new Term("field", "ohter"));
>SpanQuery s1 =3D new SpanMultiTermQueryWrapper<FuzzyQuery>(f1);
>
>FuzzyQuery f2 =3D new FuzzyQuery(new Term("field", "word"));
>SpanQuery s2 =3D new SpanMultiTermQueryWrapper<FuzzyQuery>(f2);
>
>Now you can put the two spanqueries (s1 and s2) into a SpanNearQuery,
>and specify the maximum slop, and if they are required to be in order
>or not, etc etc.
>
>For more examples see the unit test:
>http://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x/lucene/src/t=
est/org/apache/lucene/search/spans/TestSpanMultiTermQueryWrapper.java
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
___________________________________________________________
Empfehlen Sie WEB.DE DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.web.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 08:46:59 2011
Return-Path: <java-user-return-48373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32295 invoked from network); 17 Jan 2011 08:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 08:46:58 -0000
Received: (qmail 49175 invoked by uid 500); 17 Jan 2011 08:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48717 invoked by uid 500); 17 Jan 2011 08:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48709 invoked by uid 99); 17 Jan 2011 08:46:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 08:46:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.143.35.233] (HELO exchange1.timetoknow.local) (212.143.35.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 08:46:46 +0000
Received: from exchange1.timetoknow.local ([192.168.40.96]) by
 exchange1.timetoknow.local ([192.168.40.96]) with mapi; Mon, 17 Jan 2011
 10:46:23 +0200
From: Pelit Mamani <Pelit.Mamani@timetoknow.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 17 Jan 2011 10:46:24 +0200
Subject: RE: Result ordering
Thread-Topic: Result ordering
Thread-Index: Acu1kdH9A3K0kOc8Rk6bV4tBfO8VpQAkSJoQ
Message-ID: <6F60A8998A8E6746B153E6618FE9EEA7052E22AC72@exchange1.timetoknow.local>
References: <6F60A8998A8E6746B153E6618FE9EEA7052E22AAAC@exchange1.timetoknow.local>
 <AANLkTimne1FNj+URxkVaA_-W3Rj3JLtpqgZRXXc62pzD@mail.gmail.com>
In-Reply-To: <AANLkTimne1FNj+URxkVaA_-W3Rj3JLtpqgZRXXc62pzD@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-esetresult: clean, is OK
x-esetid: CAA1D720055548329EE7
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you both, Umesh Prasad and Anshum.
You've been a great help.



-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Sunday, January 16, 2011 5:26 PM
To: java-user@lucene.apache.org
Subject: Re: Result ordering

Hi Pelit,
Firstly, number of words that match a query in a document is not term frequ=
ency. You may get some more idea on the terminologies used in search at htt=
p://www.miislita.com/term-vector/term-vector-3.html

Looking at what you're trying to achieve, a few solutions to you would be.
Below, I am assuming your query to be for terms "A B":
1. Look at phrase queries and setting a high slop value so matches like "A =
B" are weighted more than "A .... B" (separated by a few positions).
2. Also you could have a custom similarity (advanced) http://lucene.apache.=
org/java/2_4_0/api/org/apache/lucene/search/SimilarityDelegator.html
and
use the coord value.
3. For wildcard searches, a brute force mechanism could be, you may have an=
 or query  (finally the query is expanded to an OR query anyways) for RING =
OR
RING* and boost the former part.

Looking at your current query seems like you'd need more understanding on l=
ucene and getting a copy of "Lucene In Action 2nd Ed<http://www.manning.com=
/hatcher3/>."
would be  a good idea for you and everyone in your position.
Hope that helps.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Sun, Jan 16, 2011 at 8:03 PM, Pelit Mamani
<Pelit.Mamani@timetoknow.com>wrote:

> Hi,
>
> I'm maintaining some Lucene-based code, and we're trying to get=20
> control over result ordering (users aren't happy with the default).
> I know how to boost a Field or Document (very useful).
> But:
>
>
> 1)      Is there a way to boost "OR" queries, based on the number of
> matched terms?
> So the OR query "lord rings" will first show the document "LORD of the=20
> RINGS" (which holds both words), and only later "selected jewels and RING=
S"
> (which only holds one word).
> Is that what you call "Term Frequency"? And how do you boost it further?
> I did a bit of tinkering and got the impression Lucene would boost it=20
> by default, but not enough - it's sometimes overridden by other=20
> boosting factors (maybe the boost for short expressions).
>
>
> 2)      Is there a way to boost based on "positions"?
> So "LORD of the RINGS" gets precedence over "LORD of the funny golden=20
> RINGS", because the search words are positioned closer to each other?
>
>
> 3)      With wildcard searches, is there a way to boost documents that ho=
ld
> an exact match.
> So if I search for "ring*", I first see the exact match "story of a=20
> RING", and only later "a RINGING failure"
>
> Thanx a bunch.
>
>
>
>

=20
=20
***************************************************************************=
*********
This footnote confirms that this email message has been scanned by PineApp =
Mail-SeCure for the presence of malicious code, vandals & computer viruses.
***************************************************************************=
*********




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 17 12:55:50 2011
Return-Path: <java-user-return-48374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52352 invoked from network); 17 Jan 2011 12:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jan 2011 12:55:49 -0000
Received: (qmail 648 invoked by uid 500); 17 Jan 2011 12:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 300 invoked by uid 500); 17 Jan 2011 12:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 292 invoked by uid 99); 17 Jan 2011 12:55:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 12:55:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jan 2011 12:55:35 +0000
Received: by qwh6 with SMTP id 6so4851576qwh.35
        for <java-user@lucene.apache.org>; Mon, 17 Jan 2011 04:55:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Xq0xlpeXCuCT/rcLPEuvU6k79IuUpiqcpzO2kSDhYmE=;
        b=n7Y+Itsv6B8pX8UnXDkdOEUXRBhzPjethkUJoGyaUS0tcbeKGZU3d/8bvufRTxRWsd
         pejhmQwPSHP9GhH+7Q1JVqc59eS5Qu+uVBpPJScNsAZIqASdp5weXcZcLBwjfJGMq+sa
         nig3tSoy4s1em8UoemgeQvJo1vP/trjFXtRQg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TT0GC28zf/Y00bZKnNAOrAinPDrb74CHMAUThRDPL443uVIjSThHBUEBog0m5w2VVI
         1c29OIkCCVsT06SlqltVpF0+sne6Wvjon+gxaCXG/2E2i+LmlatKPobGJczQigwUHiuL
         MPC6o+OZQduN4hyeIAbsCp6RNf2owY6BkBB4Q=
MIME-Version: 1.0
Received: by 10.229.95.200 with SMTP id e8mr3565091qcn.213.1295268912333; Mon,
 17 Jan 2011 04:55:12 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Mon, 17 Jan 2011 04:55:12 -0800 (PST)
In-Reply-To: <621653.82316.qm@web30502.mail.mud.yahoo.com>
References: <621653.82316.qm@web30502.mail.mud.yahoo.com>
Date: Mon, 17 Jan 2011 07:55:12 -0500
Message-ID: <AANLkTimqNhwoh3Kyd=JFREfHqn7uh9-y363xj6PF8QFR@mail.gmail.com>
Subject: Re: Question on writer optimize() / file merging?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee32a68949e049a0a4b60
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee32a68949e049a0a4b60
Content-Type: text/plain; charset=ISO-8859-1

See below:

On Sun, Jan 16, 2011 at 10:15 AM, sol myr <solmyr72@yahoo.com> wrote:

> Hi,
>
> I'm trying to understand the behavior of file merging / optimization.
> I see that whenever my IndexWriter calls 'commit()', it creates a new file
> (or fileS).
> I also see these files merged when calling 'optimize()' , as much as
> allowed by the parameter 'NoCFSRatio' .
>
> But I'm still trying to figure out:
>
> 1) Will my writer still perform some file merging, even if I don't
> explicitly call 'optimize()'?
>
>
Yes. The merge factor controls this so you don't have a huge number of
files. There are some
nifty diagrams floating around on the net, but I don't have one right at
hand...



> 2) Is there a way to configure the number or files, or their size?
>
> IndexWriter.setMergeFactor controls the number of segments. There's no way
I know
of to control by size however.

> 3) I always keep an open IndexSearcher (and IndexReader). I know they
> should be re-opened when a change occurs, but it's not crucial to see
> changes immediately, so I just poll periodically, and it might be a few
> minutes before my reader is re-opened and allowed to see changes.
> But will this approach disturb the writer's ability to optimize / merge
> files? If a reader is open, will it prevent file merging?
>
>
No, this is a fine approach. Lucene index segments are never changed. A
merge will #copy# the
segments being merged to a new segment and when you open a new reader it
will look at the new
segment while the old reader merrily looks at the old segments. This is why
the disk space may
double during a merge.

Best
Erick


> Thanks
>
>
>
>
>

--0016364ee32a68949e049a0a4b60--

From java-user-return-48375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 12:12:50 2011
Return-Path: <java-user-return-48375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63358 invoked from network); 18 Jan 2011 12:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 12:12:50 -0000
Received: (qmail 8163 invoked by uid 500); 18 Jan 2011 12:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7819 invoked by uid 500); 18 Jan 2011 12:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7810 invoked by uid 99); 18 Jan 2011 12:12:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:12:44 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahiruts@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:12:36 +0000
Received: by iyb26 with SMTP id 26so6561718iyb.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 04:12:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=1p47Olyy+J0mH/GEz1uAt/C3I1aY3can8uNGkqe56W8=;
        b=s27Kyl5yBxkd/cnzQU52D22giRoXITU8W4YnhYA4hSWARNrnK+e591s42Q6gL1XyoX
         bWjr2G0AvjD0amywg825vAgmkzJNSJoJ3T19pul7v4rUAJUL8H1RzvgzRUcY9Ht/0Lho
         gCUjLow/47Kr2PmIMMK6Hn1hbFprOHUgAB8PE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=oEUNZwCnJNaI1w9dTwdOKRMcOisMhmH8rSSMMo+5WZCZNRJtuvA18QH93tlwi7XKnc
         lv0kSom+0HdiviVNFRWHXZCSVRny4q9RyK4L3A31DN3a05uqOZkaMpWDjwmJLTu5DHxO
         S7WlNs4WTbTyHIwnA5hkEI1QG7+pvJ/bH36b0=
MIME-Version: 1.0
Received: by 10.231.199.196 with SMTP id et4mr5928790ibb.71.1295352735219;
 Tue, 18 Jan 2011 04:12:15 -0800 (PST)
Received: by 10.231.139.147 with HTTP; Tue, 18 Jan 2011 04:12:15 -0800 (PST)
Date: Tue, 18 Jan 2011 17:42:15 +0530
Message-ID: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
Subject: Lucene Ranking Problem
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba53a4f4a4406f049a1dcf97
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba53a4f4a4406f049a1dcf97
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Dear All,

 I have two documents. The analyzed and the tokenized contents are mentione=
d
below.

 *Document 1 :*

 *when*, null_1, *my*, null_1, money,

fund, amount, payment, creditcard, credit,

card, *bank, account*, debit, deduct,

*charge*, null_1, my, mobile, usage,

*service*, connection


 *Document 2:*

 *when*, what, time, what, day,

null_1, money, fund, cash, payment,

null_1, i, do, you, i,

null_1, deduct, *charge*, reduce, debit,

from, *my*, *bank, account*, credit,

card, null_1, *adsl*, adsl1, adsl-2,

adsl-1, adsl2, adsl, 1, adsl,

2, usage, connection, *service*


 Then, I searched for the following text.

 *Query:* when my bank account charge adsl service

 *Scores
*

Document 1 =3D 0.74406385

Document 2 =3D Score =3D 0.66067594

 I was expecting to have Document 2 as the top ranked document. But I get
Document 1 as the top ranked even it does not contains  the term =93adsl=94=
.

 The word order of the Document 1 matches with the query very well. Can it
be the reason ?

If it is, how can I neglect the word order when searching. (I am not using
phase queries).

My searching code look like below and it is very simple.


 *QueryParser parser =3D new QueryParser(Version.LUCENE_30, *

*"pattern", *

*new StandardAnalyzer(Version.LUCENE_30)); *

*org.apache.lucene.search.Query query1 =3D
parser.parse(this.query.getQuestion()); *

*TopDocs hits =3D is.search(query1, 10); *

 Please advice


Thanks,

Lahiru

--90e6ba53a4f4a4406f049a1dcf97--

From java-user-return-48376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 12:13:38 2011
Return-Path: <java-user-return-48376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63691 invoked from network); 18 Jan 2011 12:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 12:13:38 -0000
Received: (qmail 11395 invoked by uid 500); 18 Jan 2011 12:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11248 invoked by uid 500); 18 Jan 2011 12:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11238 invoked by uid 99); 18 Jan 2011 12:13:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:13:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of danbsutton@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:13:26 +0000
Received: by qwh6 with SMTP id 6so5998008qwh.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 04:13:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=yTvhC680eN39i1fC8DFtwgHFDrN1IrPkH/rSENi6ftA=;
        b=lwJ8tVwqDHRjromGkELTLJyssCQ1lfTxgC92DNlnbnNCASPwU5oVoOuNlS2TTyeghI
         rx7LkCrAygEym/X9QTFq2N+j5+90/t8ONhT0GaPIIDnNZ+mQ8laaGRJj2TVvORiEWCTr
         GXTMIAcQTl4E7xAx2saWK4D0+4hNOQcHl1QpM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=G0fMnB+q9thi7R2XvVs/GJesw8XW5j0EzinxceCAFVnUHYSk77OpnB7QMEptkiRWxN
         yMTgPG8nDQTNp5xzELVruOSrJ9xByJwoi36Ttai+6F/2IVMGyXvtbj3sA4KBqAo7Obrd
         dSWzVVA4nJdnunY153r0qyCOKuiZTkF2fsFGM=
MIME-Version: 1.0
Received: by 10.229.91.72 with SMTP id l8mr4060986qcm.137.1295352785651; Tue,
 18 Jan 2011 04:13:05 -0800 (PST)
Received: by 10.229.11.84 with HTTP; Tue, 18 Jan 2011 04:13:05 -0800 (PST)
Date: Tue, 18 Jan 2011 12:13:05 +0000
Message-ID: <AANLkTi=5BtADgV=b2taxrRH9ZSz9R_Sd1exY2Jf2LAKj@mail.gmail.com>
Subject: Large .frq file
From: dan sutton <danbsutton@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We're trying to create a large index via solr for trends and notice
that we have a large '.frq' file after doing the following:


make all text fields index="true", stored="false",
omitTermFreqAndPositions="true" omitNorms="true" termPositions="false"
termOffsets="false" termVectors="false"

We are using a variation on org.apache.lucene.analysis.cjk and notice
that the .frq is about 4 time larger than, for example, the
WhiteSpaceTokenizer.


Considering that with omitTermFreqAndPositions="true" for the text
fields I'd have thought this should be : "If omitTf were true it would
be this sequence of VInts instead:"
(http://lucene.apache.org/java/2_9_1/fileformats.html#Frequencies)


Can anyone suggest how I can reduce the size of this file?


Many thanks,
Dan

Lucene Specification Version: 2.9.1
Solr Specification Version: 1.4.0.2010.09.10.17.10.36

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 12:29:44 2011
Return-Path: <java-user-return-48377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66570 invoked from network); 18 Jan 2011 12:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 12:29:43 -0000
Received: (qmail 24670 invoked by uid 500); 18 Jan 2011 12:29:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24353 invoked by uid 500); 18 Jan 2011 12:29:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24345 invoked by uid 99); 18 Jan 2011 12:29:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:29:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:29:29 +0000
Received: by bwz8 with SMTP id 8so3693053bwz.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 04:29:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=RQfM4ozh+vKRpKzK6Im8v0T3aGOZjq/JyzDEerci9bU=;
        b=qKPlVbSHn1svloDAI48Thjj8eroGITa6GKzezo0gx86nVtkjIb986LbPjKHr9Ykwqh
         eGxewg3h+y/pbtVgq+SssjHt87WlTyk2BNgrWBqGyn1LT4bx6x2nOBlBp4rV/v8lAtIU
         otrw3wokiuViZmIzH0VDg2kutdc9guz4/rfOw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=IVPhgubOHvVTn10lfeS+el3sa+J8qWNBNQPU8yf6Gw9o/+rSCsm7B6QTVMXh8Np+CP
         8sI2Suis9R1kJcfybkvUd86ICsc7icLaPaGPGvTkjEbDKeNjzOqyt/BBz5reA9kmO0Jq
         4mm0UN8DphuVbfZovdf79msXm8zNaTvYSQV+k=
Received: by 10.204.100.136 with SMTP id y8mr3277837bkn.171.1295353749066;
 Tue, 18 Jan 2011 04:29:09 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Tue, 18 Jan 2011 04:28:48 -0800 (PST)
In-Reply-To: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
References: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 18 Jan 2011 12:28:48 +0000
Message-ID: <AANLkTi=0yFAN9YndrhSo-py_Y6u4_K=eR2=01__cyaun@mail.gmail.com>
Subject: Re: Lucene Ranking Problem
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

See what Searcher.explain() says for each hit. I don't think that word
order will matter with the query you give.  There are several factors
in scoring - see oal.search.Similarity or google lucene scoring.

Or have a play with Luke: invaluable for investigating things with
lucene and will tell you everything about your index.


--
Ian.


On Tue, Jan 18, 2011 at 12:12 PM, Lahiru Samarakoon <lahiruts@gmail.com> wr=
ote:
> Dear All,
>
> =A0I have two documents. The analyzed and the tokenized contents are ment=
ioned
> below.
>
> =A0*Document 1 :*
>
> =A0*when*, null_1, *my*, null_1, money,
>
> fund, amount, payment, creditcard, credit,
>
> card, *bank, account*, debit, deduct,
>
> *charge*, null_1, my, mobile, usage,
>
> *service*, connection
>
>
> =A0*Document 2:*
>
> =A0*when*, what, time, what, day,
>
> null_1, money, fund, cash, payment,
>
> null_1, i, do, you, i,
>
> null_1, deduct, *charge*, reduce, debit,
>
> from, *my*, *bank, account*, credit,
>
> card, null_1, *adsl*, adsl1, adsl-2,
>
> adsl-1, adsl2, adsl, 1, adsl,
>
> 2, usage, connection, *service*
>
>
> =A0Then, I searched for the following text.
>
> =A0*Query:* when my bank account charge adsl service
>
> =A0*Scores
> *
>
> Document 1 =3D 0.74406385
>
> Document 2 =3D Score =3D 0.66067594
>
> =A0I was expecting to have Document 2 as the top ranked document. But I g=
et
> Document 1 as the top ranked even it does not contains =A0the term =93ads=
l=94.
>
> =A0The word order of the Document 1 matches with the query very well. Can=
 it
> be the reason ?
>
> If it is, how can I neglect the word order when searching. (I am not usin=
g
> phase queries).
>
> My searching code look like below and it is very simple.
>
>
> =A0*QueryParser parser =3D new QueryParser(Version.LUCENE_30, *
>
> *"pattern", *
>
> *new StandardAnalyzer(Version.LUCENE_30)); *
>
> *org.apache.lucene.search.Query query1 =3D
> parser.parse(this.query.getQuestion()); *
>
> *TopDocs hits =3D is.search(query1, 10); *
>
> =A0Please advice
>
>
> Thanks,
>
> Lahiru
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 12:33:20 2011
Return-Path: <java-user-return-48378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74004 invoked from network); 18 Jan 2011 12:33:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 12:33:20 -0000
Received: (qmail 28226 invoked by uid 500); 18 Jan 2011 12:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27958 invoked by uid 500); 18 Jan 2011 12:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27950 invoked by uid 99); 18 Jan 2011 12:33:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:33:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:33:06 +0000
Received: by wye20 with SMTP id 20so6242795wye.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 04:32:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=yXDzqUZWcjdLIE79bTp9ll3Cv3uy2e6tESgNEvK/JAA=;
        b=e81n7UaJ26GIF8yx7Ofgd9cCWo3eZpQG2cjRYqflroxYYm7RwXzLSunjrFD5YcBBev
         ykXK7nVNEeAm1WsH4Jt+kH5RDLIIpBpa9+tCG1tCJ1JFWxJ+9bOzqzG+0ECEyvHffbcf
         8S9WPDQ7B4cRLN4aOJZR5+a+/2WcihAOGy85M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ruzzYqkiWw+mouuZ254xyG26NvuAUlzAMQSyyJaETtDWcvV9gsuY8KBmDSNtII9kpq
         pdtJaxnY0eh1pDdQPi1WPTb/145NhZ+VI7sbs2W96ojgfXlLFMBo5NUeJyShMvqs5DLd
         mzIPLoa5vdfomcb5XkbknJbHCftd67bRlTj1s=
Received: by 10.216.167.65 with SMTP id h43mr1082369wel.17.1295353966277; Tue,
 18 Jan 2011 04:32:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Tue, 18 Jan 2011 04:31:32 -0800 (PST)
In-Reply-To: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
References: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Tue, 18 Jan 2011 18:01:32 +0530
Message-ID: <AANLkTinLbvej6kMfQd5efiZ_jNOxq-yuXeZpjh9du76D@mail.gmail.com>
Subject: Re: Lucene Ranking Problem
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c7d5704b3d0049a1e1981
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c7d5704b3d0049a1e1981
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi Lahiru,
   Comments are inline:


On Tue, Jan 18, 2011 at 5:42 PM, Lahiru Samarakoon <lahiruts@gmail.com>wrot=
e:

> Dear All,
>
>  I have two documents. The analyzed and the tokenized contents are
> mentioned
> below.
>
>  *Document 1 :*
>
>  *when*, null_1, *my*, null_1, money,
>
> fund, amount, payment, creditcard, credit,
>
> card, *bank, account*, debit, deduct,
>
> *charge*, null_1, my, mobile, usage,
>
> *service*, connection
>
>
>  *Document 2:*
>
>  *when*, what, time, what, day,
>
> null_1, money, fund, cash, payment,
>
> null_1, i, do, you, i,
>
> null_1, deduct, *charge*, reduce, debit,
>
> from, *my*, *bank, account*, credit,
>
> card, null_1, *adsl*, adsl1, adsl-2,
>
> adsl-1, adsl2, adsl, 1, adsl,
>
> 2, usage, connection, *service*
>
>
>  Then, I searched for the following text.
>
>  *Query:* when my bank account charge adsl service
>
>  *Scores
> *
>
> Document 1 =3D 0.74406385
>
> Document 2 =3D Score =3D 0.66067594
>
>     Please read the documentation of lucene scoring.
 http://lucene.apache.org/java/2_9_1/scoring.html.
That will help you understand the bigger picture.


>  I was expecting to have Document 2 as the top ranked document. But I get
> Document 1 as the top ranked even it does not contains  the term =93adsl=
=94.
>
>  The word order of the Document 1 matches with the query very well. Can i=
t
> be the reason ?
>
> Word order doesn't matter. However tf/idf , norms and other factors do
matter as described in above link.

You can get see how , documents got assigned score by using

IndexSearcher.explain(query,docId); as described in
http://lucene.apache.org/java/2_9_1/api/core/org/apache/lucene/search/Searc=
her.html#explain%28org.apache.lucene.search.Query,%20int%29


If it is, how can I neglect the word order when searching. (I am not using
> phase queries).
>
> My searching code look like below and it is very simple.
>
>
>  *QueryParser parser =3D new QueryParser(Version.LUCENE_30, *
>
> *"pattern", *
>
> *new StandardAnalyzer(Version.LUCENE_30)); *
>
> *org.apache.lucene.search.Query query1 =3D
> parser.parse(this.query.getQuestion()); *
>
> *TopDocs hits =3D is.search(query1, 10); *
>
>  Please advice
>
>
> Thanks,
>
> Lahiru
>



--=20
---
Thanks & Regards
Umesh Prasad

--0016364c7d5704b3d0049a1e1981--

From java-user-return-48379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 12:41:39 2011
Return-Path: <java-user-return-48379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77341 invoked from network); 18 Jan 2011 12:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 12:41:39 -0000
Received: (qmail 40736 invoked by uid 500); 18 Jan 2011 12:41:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40495 invoked by uid 500); 18 Jan 2011 12:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40477 invoked by uid 99); 18 Jan 2011 12:41:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:41:34 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 12:41:26 +0000
Received: by pwj9 with SMTP id 9so1333739pwj.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 04:41:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MLcgXMi3opM/GZ0cztP8fRgIjn+BJHYrzjaF75ZSRB4=;
        b=I3IqMy+FuMVm9VF2b9Cysm3mFoEefTFot34b77JQlHISO3VbX4zTwIpKU/oI/vyAV6
         Mu+KahY/foPoyeqgWNlBmSzrQMegUv+xiHkaMKIiIDsiPoqO+8mrXm6HFDO2ILN03wUA
         jT0YmSmovri5FKBY+LNClWRB7vMtKfzaNoS1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rRPJKRUsrOWp6VkIBan8/Ylq7aViJpeYF4BumXmQiuDQA3Wyc5BS9vPEY49nPaFYIF
         xaNSMBESSXf3ymZSj47BKY2rENAvAJ2QiLahr0ssuwr+i4n/KvbkIKm82ZwB0j2KKkaR
         2liCSKmY2cdcq+8IPiyzFsKpILUEdclXItlWo=
MIME-Version: 1.0
Received: by 10.142.48.9 with SMTP id v9mr5000973wfv.405.1295354462751; Tue,
 18 Jan 2011 04:41:02 -0800 (PST)
Received: by 10.143.10.11 with HTTP; Tue, 18 Jan 2011 04:41:02 -0800 (PST)
In-Reply-To: <AANLkTi=5BtADgV=b2taxrRH9ZSz9R_Sd1exY2Jf2LAKj@mail.gmail.com>
References: <AANLkTi=5BtADgV=b2taxrRH9ZSz9R_Sd1exY2Jf2LAKj@mail.gmail.com>
Date: Tue, 18 Jan 2011 14:41:02 +0200
Message-ID: <AANLkTimWwAa2XmE9ZEVd7-+1p4UHB0p-N4it_iJoeVTV@mail.gmail.com>
Subject: Re: Large .frq file
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517592ca69c4c03049a1e36d5
X-Virus-Checked: Checked by ClamAV on apache.org

--001517592ca69c4c03049a1e36d5
Content-Type: text/plain; charset=ISO-8859-1

If I understand correctly, you compare the size of the .frq when
WhitespaceTokenizer is used, vs the CJK ones?

I'd bet this is because WhitespaceTokenizer creates far less terms than the
CJK one. Whitespace tokenizes the text by separating on whitespace, while
CJK does sort of N-Gram tokenization, which usually leads to much more terms
created. This affects the .frq file in that there are much more posting
lists created, which are stored in the .frq file.

See if the .tii and .tis files differ and if their difference is the same
order of the .frq differences (e.g. if they are 2x larger w/ CJK, so .frq
should be of the same order of difference), then I believe this is the
reason.

Shai

On Tue, Jan 18, 2011 at 2:13 PM, dan sutton <danbsutton@gmail.com> wrote:

> Hi,
>
> We're trying to create a large index via solr for trends and notice
> that we have a large '.frq' file after doing the following:
>
>
> make all text fields index="true", stored="false",
> omitTermFreqAndPositions="true" omitNorms="true" termPositions="false"
> termOffsets="false" termVectors="false"
>
> We are using a variation on org.apache.lucene.analysis.cjk and notice
> that the .frq is about 4 time larger than, for example, the
> WhiteSpaceTokenizer.
>
>
> Considering that with omitTermFreqAndPositions="true" for the text
> fields I'd have thought this should be : "If omitTf were true it would
> be this sequence of VInts instead:"
> (http://lucene.apache.org/java/2_9_1/fileformats.html#Frequencies)
>
>
> Can anyone suggest how I can reduce the size of this file?
>
>
> Many thanks,
> Dan
>
> Lucene Specification Version: 2.9.1
> Solr Specification Version: 1.4.0.2010.09.10.17.10.36
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517592ca69c4c03049a1e36d5--

From java-user-return-48380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 13:47:13 2011
Return-Path: <java-user-return-48380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5461 invoked from network); 18 Jan 2011 13:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 13:47:12 -0000
Received: (qmail 53639 invoked by uid 500); 18 Jan 2011 13:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52676 invoked by uid 500); 18 Jan 2011 13:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52656 invoked by uid 99); 18 Jan 2011 13:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 13:47:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lahiruts@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 13:46:58 +0000
Received: by iwn2 with SMTP id 2so6548516iwn.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 05:46:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3SjHsPU8fJ26ivbST5gvhOMF5tDVsfT2iYJDbM0pX7Y=;
        b=soIUekArYQs74hhJIrCkHWMF/1JoDE29lxKaIlkOF/Mn/jOnTB3bsBAgc66nBrCqST
         eq9jI0S8j27eNZUhgXCOodDl7pe+oASXPsHWxib/65NIWXGhSqrVy/Upy5wsOZAY5Yfp
         Ls48fZ8x/BHvL+dYXQv72zSrskIO0rDxEHryA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nswUQ4chpJEMgD6Mjb4FGiNIK6CMrDupW7QpoJgmt6/ongyNHZ3wUXfKRpekipl2Fh
         MrQaqACRdouK6SLy+F6sSf6cbNMEWFU5jdgcrqo08tWSOYQ0vI23jgeugzOLKZhCteKM
         gAu8crtGp4j1T/F5+xm999gcdpYz390c1XYqY=
MIME-Version: 1.0
Received: by 10.231.11.4 with SMTP id r4mr6037680ibr.146.1295358398120; Tue,
 18 Jan 2011 05:46:38 -0800 (PST)
Received: by 10.231.139.147 with HTTP; Tue, 18 Jan 2011 05:46:38 -0800 (PST)
In-Reply-To: <AANLkTinLbvej6kMfQd5efiZ_jNOxq-yuXeZpjh9du76D@mail.gmail.com>
References: <AANLkTik4CgfxP6464+YMG=h334J2qVqOMy5Hu2k8-pOR@mail.gmail.com>
	<AANLkTinLbvej6kMfQd5efiZ_jNOxq-yuXeZpjh9du76D@mail.gmail.com>
Date: Tue, 18 Jan 2011 19:16:38 +0530
Message-ID: <AANLkTinNyBtOY9NHaps51_XvMopC07uQ2ncr2ATEGGOA@mail.gmail.com>
Subject: Re: Lucene Ranking Problem
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221532ca282d5ca6049a1f21f5

--00221532ca282d5ca6049a1f21f5
Content-Type: text/plain; charset=ISO-8859-1

HI Ian & Umesh.

This is what I was looking for.
Thank a lot.

Regards,
Lahiru

--00221532ca282d5ca6049a1f21f5--

From java-user-return-48381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 16:11:02 2011
Return-Path: <java-user-return-48381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87641 invoked from network); 18 Jan 2011 16:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 16:11:02 -0000
Received: (qmail 30084 invoked by uid 500); 18 Jan 2011 16:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29754 invoked by uid 500); 18 Jan 2011 16:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29742 invoked by uid 99); 18 Jan 2011 16:10:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 16:10:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of danbsutton@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 16:10:46 +0000
Received: by qyk10 with SMTP id 10so6421773qyk.14
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 08:10:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=gckBKJ27CT4ZuyX76KN8qbLitN/2OJB2Po8Y52cZ6GA=;
        b=j6Jz2UEu+HFjHnSMsiSxlS8zdu+rTNonpZa4ICeGsyucbDRKrlvXMseYugp4VQqONy
         weEXUXq1m22U2GIDQAfRbdzNztmYqF/r9sUoXgHqr5gzx8zBT4lbiav1PESf/pUU43A6
         Ac9kZMHkjQrlRS6eKxKzji6ySbzn8yZo8XRAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=EBzOrU90WAcCmsaV38R2+x4YgTDVQcEeRzd0/5oTLgaYoqtLTaNQOzkrtR+q9BSWyN
         Dx76BXbtP3dITPZc0oM+C9PFDYww2yjfSOXPmMKYms0YGrFg/P+szFo+ozBkZpxIw/VD
         txPxBONDs2laV5w8gLFSjaFb2VaXDzXey2U7E=
MIME-Version: 1.0
Received: by 10.229.189.6 with SMTP id dc6mr4889745qcb.175.1295367025096; Tue,
 18 Jan 2011 08:10:25 -0800 (PST)
Received: by 10.229.11.84 with HTTP; Tue, 18 Jan 2011 08:10:25 -0800 (PST)
In-Reply-To: <AANLkTimWwAa2XmE9ZEVd7-+1p4UHB0p-N4it_iJoeVTV@mail.gmail.com>
References: <AANLkTi=5BtADgV=b2taxrRH9ZSz9R_Sd1exY2Jf2LAKj@mail.gmail.com>
	<AANLkTimWwAa2XmE9ZEVd7-+1p4UHB0p-N4it_iJoeVTV@mail.gmail.com>
Date: Tue, 18 Jan 2011 16:10:25 +0000
Message-ID: <AANLkTimG2hn+-zMYkZ+Srt7QCe-hCGkZrUrTggEUb6Bm@mail.gmail.com>
Subject: Re: Large .frq file
From: dan sutton <danbsutton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

What I really wanted to do was reduce the frq file size

Oddly (when tokenizing 3 seperate fields) with the
WhitespaceTokenizer, more terms are produced than with the CJK
analyzer and the CJK frq filesize is much larger ... examples below:

with WhitespaceTokenizer:
89M 	        _0.tis
1.4M 	_0.tii
71 	        _0.fnm
5.8M  	_0.fdx
741K 	_0.fdt
20  	       segments.gen
293  	segments_2
119M  	_0.frq

with CJKTokenizer:
31M   	_0.tis
633K 	_0.tii
71  	        _0.fnm
5.8M 	_0.fdx
741K  	_0.fdt
20  	        segments.gen
293  	segments_2
166M  	_0.frq

Also I believe solr calls addDocument with payLoads turned off. I'm
not sure why the size is much larger.

Cheers,
Dan

On Tue, Jan 18, 2011 at 12:41 PM, Shai Erera <serera@gmail.com> wrote:
> If I understand correctly, you compare the size of the .frq when
> WhitespaceTokenizer is used, vs the CJK ones?
>
> I'd bet this is because WhitespaceTokenizer creates far less terms than the
> CJK one. Whitespace tokenizes the text by separating on whitespace, while
> CJK does sort of N-Gram tokenization, which usually leads to much more terms
> created. This affects the .frq file in that there are much more posting
> lists created, which are stored in the .frq file.
>
> See if the .tii and .tis files differ and if their difference is the same
> order of the .frq differences (e.g. if they are 2x larger w/ CJK, so .frq
> should be of the same order of difference), then I believe this is the
> reason.
>
> Shai
>
> On Tue, Jan 18, 2011 at 2:13 PM, dan sutton <danbsutton@gmail.com> wrote:
>
>> Hi,
>>
>> We're trying to create a large index via solr for trends and notice
>> that we have a large '.frq' file after doing the following:
>>
>>
>> make all text fields index="true", stored="false",
>> omitTermFreqAndPositions="true" omitNorms="true" termPositions="false"
>> termOffsets="false" termVectors="false"
>>
>> We are using a variation on org.apache.lucene.analysis.cjk and notice
>> that the .frq is about 4 time larger than, for example, the
>> WhiteSpaceTokenizer.
>>
>>
>> Considering that with omitTermFreqAndPositions="true" for the text
>> fields I'd have thought this should be : "If omitTf were true it would
>> be this sequence of VInts instead:"
>> (http://lucene.apache.org/java/2_9_1/fileformats.html#Frequencies)
>>
>>
>> Can anyone suggest how I can reduce the size of this file?
>>
>>
>> Many thanks,
>> Dan
>>
>> Lucene Specification Version: 2.9.1
>> Solr Specification Version: 1.4.0.2010.09.10.17.10.36
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 17:54:37 2011
Return-Path: <java-user-return-48382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46684 invoked from network); 18 Jan 2011 17:54:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 17:54:36 -0000
Received: (qmail 75590 invoked by uid 500); 18 Jan 2011 17:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75051 invoked by uid 500); 18 Jan 2011 17:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75022 invoked by uid 99); 18 Jan 2011 17:54:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 17:54:26 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 17:54:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id D7B11C2125
	for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 18:53:58 +0100 (CET)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zN+bZvQM2DtT for <java-user@lucene.apache.org>;
	Tue, 18 Jan 2011 18:53:58 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id BBA3DC2118
	for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 18:53:58 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 18 Jan 2011 18:53:58 +0100
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 18 Jan 2011 18:53:57 +0100
Subject: Best practices for multiple languages?
Thread-Topic: Best practices for multiple languages?
Thread-Index: Acu3OEXzAi1meNUnQ/yLF6+g82l3VQAAFJqA
Message-ID: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

What is the "best practice" to support multiple languages, i.e. Lucene-Docu=
ments that have multiple language content/fields?=20
Should
a) each language be indexed in a seperate index/directory or should
b) the Documents (in a single directory) hold the diverse localized fields?

We most often will be searching "language dependent" which (at least perfor=
mance wise) mandates one-directory-per-language...

Any (lucene specific) white papers on this topic?

Thx in advance
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 19:15:16 2011
Return-Path: <java-user-return-48383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40316 invoked from network); 18 Jan 2011 19:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 19:15:15 -0000
Received: (qmail 46089 invoked by uid 500); 18 Jan 2011 19:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45938 invoked by uid 500); 18 Jan 2011 19:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45924 invoked by uid 99); 18 Jan 2011 19:15:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 19:15:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.91.234] (HELO nm28-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Jan 2011 19:15:06 +0000
Received: from [98.139.91.61] by nm28.bullet.mail.sp2.yahoo.com with NNFMP; 18 Jan 2011 19:14:45 -0000
Received: from [98.139.91.47] by tm1.bullet.mail.sp2.yahoo.com with NNFMP; 18 Jan 2011 19:14:45 -0000
Received: from [127.0.0.1] by omp1047.mail.sp2.yahoo.com with NNFMP; 18 Jan 2011 19:14:45 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 356407.71351.bm@omp1047.mail.sp2.yahoo.com
Received: (qmail 16892 invoked by uid 60001); 18 Jan 2011 19:14:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295378084; bh=+nOUtQcStqtM1TOjimKBQhaUdRtNUvW7grgARTbpbaM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=nOOHK+xikm/P7Y19+vZYv1xPG+DqornX+bXzYK23mU5sgFWputMj4thNRCdNxmxblabu83WfCvOwIPkDOm5+DQ0zsMF8sGH5GWo0d+oMGuiKmOSJLwPNSZ4a7XqXzgvvjykF1geh4XVYVlRc/N/7/7foZXCszG0oZnFnE3R4vwg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=xR+s+MR9hOjEo9RN3CPdp8UKb2yjB+xh7JwGeVJL+CpjKixdGycIpX0o7lu6xltJLCxwix0gBmhzOxV55uJ9DGEmHHzlPPk8LpgGqpozwkU0sOEIhzPJDHacXIbBIyXUyvlHZXQWyxdvhlY5CuCkQz6C3PvQPuW7y1rz1ea8mLU=;
Message-ID: <859947.14906.qm@web130105.mail.mud.yahoo.com>
X-YMail-OSG: jctl7lYVM1mRsB7wtNF7DYmXFE_X0qx82aNeGGsXpJyqcrs
 uB0N6qvrd5bHhvzL4HNmQp.jmCBO5n6Q5Sed7sdjuHa2ls7yGjOzPmqifiOv
 Sgspmu_mfpAD..8rhdl1NvwG1zP45EeUVm4CCt0w3zNlu28u4utp0RMAbISY
 FJwGtxb.eTwlme2hIaCASGP9KLht6k0dR.gBrWfN6p50dTyGpcZ42LT2x_z9
 cMp7xsYfsiFz3x8rfx0WWe4Y1bC._4NqfEgz83wEh1FNcKlgd7IO3Ntf_Rd8
 gxDQJ_0iNn3NPM.Z6TcmamVm9MW.bLOIql0P_KRNVGA2hrdTJJA--
Received: from [61.224.49.197] by web130105.mail.mud.yahoo.com via HTTP; Tue, 18 Jan 2011 11:14:44 PST
X-Mailer: YahooMailRC/555 YahooMailWebService/0.8.107.285259
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
Date: Tue, 18 Jan 2011 11:14:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Best practices for multiple languages?
To: java-user@lucene.apache.org
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi Clemens,

If you will be searching individual languages, go with language-specific 
indices.  Wunder likes to give an example of "die" in German vs. English. :)

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Clemens Wyss <clemensdev@mysign.ch>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Tue, January 18, 2011 12:53:57 PM
> Subject: Best practices for multiple languages?
> 
> What is the "best practice" to support multiple languages, i.e. 
>Lucene-Documents  that have multiple language content/fields? 
>
> Should
> a) each language be  indexed in a seperate index/directory or should
> b) the Documents (in a single  directory) hold the diverse localized fields?
> 
> We most often will be  searching "language dependent" which (at least 
>performance wise) mandates  one-directory-per-language...
> 
> Any (lucene specific) white papers on this  topic?
> 
> Thx in  advance
> Clemens
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 19:28:26 2011
Return-Path: <java-user-return-48384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54330 invoked from network); 18 Jan 2011 19:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 19:28:25 -0000
Received: (qmail 82487 invoked by uid 500); 18 Jan 2011 19:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82411 invoked by uid 500); 18 Jan 2011 19:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82402 invoked by uid 99); 18 Jan 2011 19:28:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 19:28:22 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 19:28:17 +0000
Received: by pzk28 with SMTP id 28so1323180pzk.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 11:27:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Cdrtol4kkce9AR5BHPAak1pLUdzGtvVMXWMKYCz+61g=;
        b=xoLJtwXeVeM4GJzP4blE8vlwHXt/MaZ514doCbv4BSnVjeqfPFT/KdCxt1jz7P1eRD
         aU51kMxyS9G4uiGVjX9jhzNlg8EF9iGC8xg/nCeSL5xbHCj0cTR7j5qGFUi28DQi1r3x
         TvCPiIzixBHuvrco7Xj1dadFawyhTG+lH5FS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DFkQBwddNOcV2yMALV1weWsafg/yPu28e9z7GWWmwNvu/SVU/dJCamsxmNyLsBPXLp
         eCOxCtNWFSV+8Xz9RDKLYl2HDy2cuti+suQrOWCUEeTFSVKCtf2o4GaEFABkJr8ijMdo
         4Esagn3H0mv3zopMncfeedtMGcTYqBiAuMVs0=
MIME-Version: 1.0
Received: by 10.142.239.11 with SMTP id m11mr5581499wfh.120.1295378876782;
 Tue, 18 Jan 2011 11:27:56 -0800 (PST)
Received: by 10.143.10.11 with HTTP; Tue, 18 Jan 2011 11:27:56 -0800 (PST)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
Date: Tue, 18 Jan 2011 21:27:56 +0200
Message-ID: <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com>
Subject: Re: Best practices for multiple languages?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd14494ccdab0049a23e5d9

--000e0cd14494ccdab0049a23e5d9
Content-Type: text/plain; charset=ISO-8859-1

Hi

There are two types of multi-language docs:
1) Docs in different languages -- every document is one language
2) Each document has fields in different languages

I've dealt with both, and there are different solutions to each. Which of
them is yours?

Shai

On Tue, Jan 18, 2011 at 7:53 PM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> What is the "best practice" to support multiple languages, i.e.
> Lucene-Documents that have multiple language content/fields?
> Should
> a) each language be indexed in a seperate index/directory or should
> b) the Documents (in a single directory) hold the diverse localized fields?
>
> We most often will be searching "language dependent" which (at least
> performance wise) mandates one-directory-per-language...
>
> Any (lucene specific) white papers on this topic?
>
> Thx in advance
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd14494ccdab0049a23e5d9--

From java-user-return-48385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:04:27 2011
Return-Path: <java-user-return-48385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5740 invoked from network); 18 Jan 2011 21:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:04:27 -0000
Received: (qmail 66638 invoked by uid 500); 18 Jan 2011 21:04:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66496 invoked by uid 500); 18 Jan 2011 21:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66484 invoked by uid 99); 18 Jan 2011 21:04:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:04:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Jan 2011 21:04:23 +0000
Received: (qmail 4976 invoked by uid 99); 18 Jan 2011 21:04:03 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:04:03 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Date: Tue, 18 Jan 2011 16:04:01 -0500
Message-Id: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)

As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we =
really don't have a good sense of how people get Lucene and Solr for use =
in their application.  Because of this, there has been some talk of =
dropping Maven support for Lucene artifacts (or at least make them =
external).  Before we do that, I'd like to conduct an informal poll of =
actual users out there and see how you get Lucene or Solr.

Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene =
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a =
downstream project)

Please put an X in the box that applies to you.  Multiple selections are =
OK (for instance, if one project uses a mirror and another uses Maven)

Please do not turn this thread into a discussion on Maven and it's =
(de)merits, I simply want to know, informally, where people get their =
JARs from.  In other words, no discussion is necessary (we already have =
that going on dev@lucene.apache.org which you are welcome to join.)

Thanks,
Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:08:55 2011
Return-Path: <java-user-return-48386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27905 invoked from network); 18 Jan 2011 21:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:08:55 -0000
Received: (qmail 77178 invoked by uid 500); 18 Jan 2011 21:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77122 invoked by uid 500); 18 Jan 2011 21:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77114 invoked by uid 99); 18 Jan 2011 21:08:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:08:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [70.42.235.200] (HELO mail.vast.com) (70.42.235.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:08:44 +0000
Received: from vast ([82.117.199.26])
	(authenticated bits=0)
	by mail.vast.com (8.14.2/8.14.2) with ESMTP id p0IL7vhH009288
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 22:08:16 +0100
Content-Type: text/plain; charset=utf-8; format=flowed; delsp=yes
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 22:08:13 +0100
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: "Luka Stojanovic" <lukas@vast.com>
Organization: Vast
Message-ID: <op.vpivnz0huare8z@vast>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
User-Agent: Opera Mail/11.00 (Linux)
X-Scanned-By: MIMEDefang 2.53 on 70.42.235.200
X-Virus-Checked: Checked by ClamAV on apache.org


Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene
  website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
  downstream project)


-- 
Luka Stojanovic
lukas@vast.com
Platform Engineering

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:12:44 2011
Return-Path: <java-user-return-48387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43740 invoked from network); 18 Jan 2011 21:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:12:43 -0000
Received: (qmail 83416 invoked by uid 500); 18 Jan 2011 21:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83311 invoked by uid 500); 18 Jan 2011 21:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83295 invoked by uid 99); 18 Jan 2011 21:12:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:12:36 +0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FREEMAIL_FROM,MISSING_HEADERS,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:12:27 +0000
Received: by ywo7 with SMTP id 7so21103ywo.35
        for <multiple recipients>; Tue, 18 Jan 2011 13:12:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:cc:content-transfer-encoding:message-id:references
         :x-mailer;
        bh=6FHLjYOxys4z97EulFAFI7dLw7c8GWmEZ7q9TRqzWgc=;
        b=Ly7+1Z2kdvPcfvQyyHE7N4gqoW2Inq8TrchLtHLz/exOCQxfHlN0jf9N6nTZHmCM9V
         YkowjB7XQlYgYzSH41d84rPOgWuF75KiY3oq3fKzZNqJn0vqbZRluLHp+n/2yIF0gquJ
         AEoeGISrqjpTV9JEj7idoZ5rw+b9QlCn4VLhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:x-mailer;
        b=ZirFIMAd/02sNwTw/jtWvV6TuEIUJDHCP53oopIwC8IfrOQsKynAhwhfvwN1B0NMXg
         R+6Vgk3GRpnG8JU2W+DuOY5hXBuHlBFX8Pqleh2GJYumexYwhbf1zvO1jBwXpdw5T9M1
         9JcOskxNzT4NfjLx++yZSpd9bS1/yrreOhRrw=
Received: by 10.150.216.7 with SMTP id o7mr1509742ybg.139.1295385126251;
        Tue, 18 Jan 2011 13:12:06 -0800 (PST)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id p32sm3757283ybk.20.2011.01.18.13.12.04
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Jan 2011 13:12:05 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
From: Grant Ingersoll <grant.ingersoll@gmail.com>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 16:12:03 -0500
Cc: java-user@lucene.apache.org,
 solr-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org

And here's mine:

On Jan 18, 2011, at 4:04 PM, Grant Ingersoll wrote:
>=20
> Where do you get your Lucene/Solr downloads from?
>=20
> [] ASF Mirrors (linked in our release announcements or via the Lucene =
website)
>=20
> [x] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [x] I/we build them from source via an SVN/Git checkout.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:15:58 2011
Return-Path: <java-user-return-48388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52802 invoked from network); 18 Jan 2011 21:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:15:56 -0000
Received: (qmail 97131 invoked by uid 500); 18 Jan 2011 21:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97061 invoked by uid 500); 18 Jan 2011 21:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97047 invoked by uid 99); 18 Jan 2011 21:15:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:15:53 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ps1991@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:15:48 +0000
Received: by qyk10 with SMTP id 10so65944qyk.14
        for <multiple recipients>; Tue, 18 Jan 2011 13:15:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=lSwn1+M4mLWi06/6aBRJmvkFeH77hmm9zLP792eKjMU=;
        b=Gbq3SGBxnIegie28fefq+Msml5lVTu3yyg/TZrCH8NzAmm6zoSMjia1kxGsRmJMxFl
         owXFv5JLuRElzLSv2ojTbP7ODYE6fku0ISgJm2EfziDRZR1MELEe9nIYc2nG7C2siL5N
         2smrkH1tmS7xqjcKtgvfr8Ai8lr7hFxuhLTzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=MpGDsmeVYXTb3QSswdPcS0WNAojXrtsE65YPAPvvnUou6BVO5Os3hs8T70zi2z4QAu
         7RIwBTYWvNWs0wirykNzF3o7NEOMgb2M0rHycEnCUyBVTXvX+xuPfvIJvhYoD1YiCBs/
         d9aBAY2feTYeS/x5y3Nbbdpx6HbArGWuy4PQE=
Received: by 10.229.183.142 with SMTP id cg14mr5281002qcb.90.1295385326606;
 Tue, 18 Jan 2011 13:15:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.79.17 with HTTP; Tue, 18 Jan 2011 13:15:06 -0800 (PST)
In-Reply-To: <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
From: Patrick Samborski <ps1991@googlemail.com>
Date: Tue, 18 Jan 2011 22:15:06 +0100
Message-ID: <AANLkTin=hXJjL=WmyBSoc7pq8mh=ybF+5RoqTcohYxvv@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163631012f3d5c39049a256625

--00163631012f3d5c39049a256625
Content-Type: text/plain; charset=ISO-8859-1

[X] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)

--00163631012f3d5c39049a256625--

From java-user-return-48389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:23:30 2011
Return-Path: <java-user-return-48389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82357 invoked from network); 18 Jan 2011 21:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:23:29 -0000
Received: (qmail 14120 invoked by uid 500); 18 Jan 2011 21:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13892 invoked by uid 500); 18 Jan 2011 21:23:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13878 invoked by uid 99); 18 Jan 2011 21:23:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:23:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryan@glassdoor.com designates 69.50.2.38 as permitted sender)
Received: from [69.50.2.38] (HELO ht1.hostedexchange.local) (69.50.2.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:23:20 +0000
Received: from mbx2.hostedexchange.local ([172.16.69.30]) by
 ht2.hostedexchange.local ([172.16.69.40]) with mapi; Tue, 18 Jan 2011
 13:22:59 -0800
From: Ryan Aylward <ryan@glassdoor.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "solr-user@lucene.apache.org" <solr-user@lucene.apache.org>
Date: Tue, 18 Jan 2011 13:23:31 -0800
Subject: RE: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Topic: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Index: Acu3VORHUB9ofbqvRpWQkRVhmO5ESQAAQamg
Message-ID: <E1E61A9983E3F94DAA95AEDE2D487E7006190B499D@mbx2.hostedexchange.local>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
 <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
 <AANLkTin=hXJjL=WmyBSoc7pq8mh=ybF+5RoqTcohYxvv@mail.gmail.com>
In-Reply-To: <AANLkTin=hXJjL=WmyBSoc7pq8mh=ybF+5RoqTcohYxvv@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

[] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:25:22 2011
Return-Path: <java-user-return-48390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86965 invoked from network); 18 Jan 2011 21:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:25:22 -0000
Received: (qmail 19959 invoked by uid 500); 18 Jan 2011 21:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19913 invoked by uid 500); 18 Jan 2011 21:25:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19898 invoked by uid 99); 18 Jan 2011 21:25:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:25:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:25:12 +0000
Received: by qwh6 with SMTP id 6so77887qwh.35
        for <multiple recipients>; Tue, 18 Jan 2011 13:24:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=Bf2d56OgVsQuQF62DrUmGTPODJXmHsDoSbaEHby7M70=;
        b=SALynRDgSdbc544HtCZ6exvbPSqOlPs6xZyPI9vqGInwmsKPks8K4KXjTPcXESYjMI
         3PT2LxyNvJHMqzbd8CH5/rKhCFAfbt992io/ZPeI0NWukMDTytP8uXsNsm8Duci/D0DZ
         c+vSq7rtGLgUGDEQbDaKjjn29SiJzfrJDWiAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=YURnTFCVoVciebJ8RI/bn46Am140LMmPnB/W8ex39tnrPuEiMtgIdrLDyqsnGSfZCR
         VubNYa+uZvChc31BqZlGpoxN2H3C4SWSbCTSp5hzpni+TaQ12AYG/9cV8ou4XLHxPIrE
         XoOuyIgICDCFnvElXgF0sHeaO/Toq+sBteG1A=
Received: by 10.229.215.147 with SMTP id he19mr5153955qcb.79.1295385891672;
 Tue, 18 Jan 2011 13:24:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.89.69 with HTTP; Tue, 18 Jan 2011 13:24:31 -0800 (PST)
In-Reply-To: <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Tue, 18 Jan 2011 16:24:31 -0500
Message-ID: <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Where do you get your Lucene/Solr downloads from?

[x] ASF Mirrors (linked in our release announcements or via the Lucene website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.


-Glen Newton


-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:25:29 2011
Return-Path: <java-user-return-48391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87076 invoked from network); 18 Jan 2011 21:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:25:28 -0000
Received: (qmail 23858 invoked by uid 500); 18 Jan 2011 21:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23499 invoked by uid 500); 18 Jan 2011 21:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73536 invoked by uid 99); 18 Jan 2011 21:07:52 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
X-Virus-Scanned: Debian amavisd-new at office.openindex.io
From: Markus Jelsma <markus.jelsma@openindex.io>
Reply-To: markus.jelsma@openindex.io
Organization: Openindex
To: solr-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Date: Tue, 18 Jan 2011 22:06:03 +0100
User-Agent: KMail/1.13.5 (Linux/2.6.35-24-generic; KDE/4.5.1; i686; ; )
Cc: Grant Ingersoll <gsingers@apache.org>,
 java-user@lucene.apache.org
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <201101182206.03349.markus.jelsma@openindex.io>


> [X] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
> 
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
> 
> [X] I/we build them from source via an SVN/Git checkout.
> 
> [] Other (someone in your company mirrors them internally or via a
> downstream project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:29:02 2011
Return-Path: <java-user-return-48392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93321 invoked from network); 18 Jan 2011 21:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:29:02 -0000
Received: (qmail 37501 invoked by uid 500); 18 Jan 2011 21:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37453 invoked by uid 500); 18 Jan 2011 21:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37445 invoked by uid 99); 18 Jan 2011 21:28:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:28:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ppuffinburger@tlcdelivers.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:28:52 +0000
Received: by qwh6 with SMTP id 6so82036qwh.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 13:28:31 -0800 (PST)
Received: by 10.224.74.10 with SMTP id s10mr5457456qaj.291.1295386111116;
        Tue, 18 Jan 2011 13:28:31 -0800 (PST)
Received: from [192.168.0.52] ([12.131.0.2])
        by mx.google.com with ESMTPS id s10sm4127658qco.47.2011.01.18.13.28.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Jan 2011 13:28:30 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
From: Philip Puffinburger <ppuffinburger@tlcdelivers.com>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 16:28:29 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <46865E77-AC32-45B1-B054-29795646EFD6@tlcdelivers.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)

> Where do you get your Lucene/Solr downloads from?
>=20
> [] ASF Mirrors (linked in our release announcements or via the Lucene =
website)
>=20
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [] I/we build them from source via an SVN/Git checkout.
>=20
> [] Other (someone in your company mirrors them internally or via a =
downstream project)
>=20
> Please put an X in the box that applies to you.  Multiple selections =
are OK (for instance, if one project uses a mirror and another uses =
Maven)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:35:05 2011
Return-Path: <java-user-return-48393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12166 invoked from network); 18 Jan 2011 21:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:35:04 -0000
Received: (qmail 64376 invoked by uid 500); 18 Jan 2011 21:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64258 invoked by uid 500); 18 Jan 2011 21:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64243 invoked by uid 99); 18 Jan 2011 21:34:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:34:58 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:34:48 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p0ILWhh3031191
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
	Tue, 18 Jan 2011 16:34:27 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Tue, 18 Jan 2011
 16:34:03 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
        "solr-user@lucene.apache.org" <solr-user@lucene.apache.org>
Date: Tue, 18 Jan 2011 16:33:31 -0500
Subject: RE: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Topic: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Index: Acu3Vjoell7UjB0QSlG8ilVXUh4zvAAAPM4Q
Message-ID: <2D127F11DC79714E9B6A43AC9458147F8AEB000D@suex07-mbx-03.ad.syr.edu>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
 <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
 <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
In-Reply-To: <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-01-18_07:2011-01-18,2011-01-18,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

PiBbeF0gQVNGIE1pcnJvcnMgKGxpbmtlZCBpbiBvdXIgcmVsZWFzZSBhbm5vdW5jZW1lbnRzIG9y
IHZpYSB0aGUgTHVjZW5lDQo+IHdlYnNpdGUpDQo+IA0KPiBbeF0gTWF2ZW4gcmVwb3NpdG9yeSAo
d2hldGhlciB5b3UgdXNlIE1hdmVuLCBBbnQrSXZ5LCBCdWlsZHIsIGV0Yy4pDQo+IA0KPiBbeF0g
SS93ZSBidWlsZCB0aGVtIGZyb20gc291cmNlIHZpYSBhbiBTVk4vR2l0IGNoZWNrb3V0Lg0K


From java-user-return-48394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:36:13 2011
Return-Path: <java-user-return-48394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15854 invoked from network); 18 Jan 2011 21:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:36:13 -0000
Received: (qmail 70845 invoked by uid 500); 18 Jan 2011 21:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70417 invoked by uid 500); 18 Jan 2011 21:36:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70350 invoked by uid 99); 18 Jan 2011 21:36:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:36:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of earlhood@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:36:01 +0000
Received: by pvb32 with SMTP id 32so23100pvb.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 13:35:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=Uka6QaXVtcoLpPQuoVEgH1uIrTdmlG+bthMa8Tw3WP8=;
        b=k6T3FHreyTppx1ixvZ9o2lndqEuC7O074Jff77VynuIujZBXx5IplCpWVHpGCgXrs1
         4cDTar4ETih6mxFrSvnzloZsvSyxy8i3DD9NKcPYcLB8RYRNp+lJkrwuS0tYPhkqB1sC
         MIMISsqAzSHKEq+n4h7EJMPOjshiTMl67eO/c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=df/b5tB045wWZypJWKc7Jrp7muiWlZq+RLocvQV65liBAdOV8S2ThECwP36nMJiOVc
         rgbW/gunAn/oKpbyQovGQUD6aGZEVMMSE7quicDvNKhggxQ1k0w39obWLIneaWnLW+Zc
         GYGc0z5o9OQmx4mURXfJN/wM53iFlDEbF21tc=
MIME-Version: 1.0
Received: by 10.142.172.3 with SMTP id u3mr5665433wfe.374.1295386540485; Tue,
 18 Jan 2011 13:35:40 -0800 (PST)
Sender: earlhood@gmail.com
Received: by 10.142.171.4 with HTTP; Tue, 18 Jan 2011 13:35:40 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 15:35:40 -0600
X-Google-Sender-Auth: 5EeQG39cyYmbodPPBihtpLgJwEE
Message-ID: <AANLkTik1f48PvrbfSptVAJHiDfd56ikLHgjkbVCwJqSu@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Earl Hood <earl@earlhood.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> Where do you get your Lucene/Solr downloads from?
>
> [X] ASF Mirrors (linked in our release announcements or via the Lucene website)

--ewh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:36:27 2011
Return-Path: <java-user-return-48395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15939 invoked from network); 18 Jan 2011 21:36:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:36:26 -0000
Received: (qmail 73302 invoked by uid 500); 18 Jan 2011 21:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73241 invoked by uid 500); 18 Jan 2011 21:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73233 invoked by uid 99); 18 Jan 2011 21:36:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:36:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.17.10] (HELO moutng.kundenserver.de) (212.227.17.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:36:15 +0000
Received: from sarmakand.local (92-32-44-94.tn.glocalnet.net [92.32.44.94])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MHajE-1PgPg50lcS-003boU; Tue, 18 Jan 2011 22:35:54 +0100
Content-Type: text/plain; charset=iso-8859-15; format=flowed; delsp=yes
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 22:35:52 +0100
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
From: "Hardy Ferentschik" <lucene@ferentschik.de>
Message-ID: <op.vpiwx2es7ont1c@sarmakand.local>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
User-Agent: Opera Mail/10.10 (MacIntel)
X-Provags-ID: V02:K0:jwUXZqRe1wIrV1DGf+zJ09AbUUi82ifAMhn0cfS/3to
 8jFYM4I++qT4XcOuOLc4sD7ShHfjtIOU+MC1NeL753V+mIuc4q
 lhuxQ9/XcGoK7Jm6jC4uF2RAMSv+extGX8OZld0FpWGiGLXhYG
 vE9H+7+9B+JY7IddjIiKnkJA8I/MxjYK4J2HeCCEzG8Y6VdrHT
 3HFcN75o+QsCPdbfwmbgyykq4PhQ4cYt6pfmc602Tk=
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 18 Jan 2011 22:04:01 +0100, Grant Ingersoll <gsingers@apache.org>  
wrote:

  [] ASF Mirrors (linked in our release announcements or via the Lucene  
website)

  [x] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

  [] I/we build them from source via an SVN/Git checkout.

  [] Other (someone in your company mirrors them internally or via a

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:37:27 2011
Return-Path: <java-user-return-48396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19503 invoked from network); 18 Jan 2011 21:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:37:27 -0000
Received: (qmail 79594 invoked by uid 500); 18 Jan 2011 21:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79402 invoked by uid 500); 18 Jan 2011 21:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 50687 invoked by uid 99); 18 Jan 2011 21:32:58 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of robomon1@gmail.com designates 209.85.216.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=ichZw0Ti+k2e3MQa0RA5r+wb9Dg472HipgCnw9abdLY=;
        b=v+xx7zb9lEltF3MMDSMuYgpIxdnQ2wO9YHIVKrGaIDztCJjP8HjE8msV3dQju0Uu5Q
         TI0fHn4qtnyHuvYDDOe7reDwdA7g5UtKmnJU2Top/Qr8rINd8X+p4IOLGOISfesuV2ra
         WVjUmRqvibZBmActWstO4ynXaMGKrgJpbCgm0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=ROfv4ksQHfX9v3B2OOVGAReYS+Xlk0yN0oXIP0XKjsCVc+eu2LFY1sAwILAVW8QTPP
         o4QRRwtVexsu8YWasF5o3E4MrK850aB5cu9stkqPgg6Q7+RR12HX7LeJZ+WzAvP1DMhV
         lDl0gxw8ghqGHkxG0kvQ7Y5tUFkTs2xboDsis=
MIME-Version: 1.0
In-Reply-To: <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
	<1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
	<AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
Date: Tue, 18 Jan 2011 13:32:29 -0800
Message-ID: <AANLkTik6xu0LOC_7h9nfs-EE_zgRs8Lc=3JpfUOHJuz1@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: robo - <robomon1@gmail.com>
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

 [x] ASF Mirrors (linked in our release announcements or via the Lucene website)

 [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

 [] I/we build them from source via an SVN/Git checkout.


On Tue, Jan 18, 2011 at 1:24 PM, Glen Newton <glen.newton@gmail.com> wrote:
> Where do you get your Lucene/Solr downloads from?
>
> [x] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
>
> -Glen Newton
>
>
> --
>
> -
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:39:27 2011
Return-Path: <java-user-return-48397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27905 invoked from network); 18 Jan 2011 21:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:39:26 -0000
Received: (qmail 87875 invoked by uid 500); 18 Jan 2011 21:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87800 invoked by uid 500); 18 Jan 2011 21:39:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87786 invoked by uid 99); 18 Jan 2011 21:39:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:39:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of beaotx@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:39:16 +0000
Received: by pwj9 with SMTP id 9so31839pwj.35
        for <multiple recipients>; Tue, 18 Jan 2011 13:38:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=uvzA4nd7+GbDlBMl5tfKUJsXBNh49v4UdI5FCSs9Ad0=;
        b=S+tcqpPK+tZnlFN28Bqwk9eamsiiRq19cw/El+zPMZdYjuC+Xu4NsRfnsH3xqKxGSb
         yaOlQzIo23nvSChGOzHOIMXm6MLg8acxaSYaflYAN8Ju02WFk3N+O4u5iYp/xJmHXzEE
         hxYBR3otV0jOLG/wj80JaDmpKKGeNWeuIM4kk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=t3n9ZewCUwoWbTu1D8zxy32/O/A0lvPPFrrTPbKnGngFsgpqekEMg379jPvU7T0DLT
         +Nbfw4XcwH6qlG2CV96sxA8Zo1rMN9Pqs2R3HGus9B6I8NG36/jQDSJ5gW20tyQH52+a
         WvYOe0RHEf6oISOS1iquEwevKdecV/X1fz0lA=
MIME-Version: 1.0
Received: by 10.142.221.9 with SMTP id t9mr5747046wfg.67.1295386734545; Tue,
 18 Jan 2011 13:38:54 -0800 (PST)
Received: by 10.143.13.14 with HTTP; Tue, 18 Jan 2011 13:38:54 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 22:38:54 +0100
Message-ID: <AANLkTi=DzfHhn67BCLrXuLiu-PznQC5dsXonHbHT6P4T@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Beatriz Nombela <beaotx@gmail.com>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd146dc28cd94049a25bafc
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd146dc28cd94049a25bafc
Content-Type: text/plain; charset=ISO-8859-1

Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)

>
>

-- 
Beatriz Nombela Escobar
beaotx@gmail.com

--000e0cd146dc28cd94049a25bafc--

From java-user-return-48398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:42:00 2011
Return-Path: <java-user-return-48398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33488 invoked from network); 18 Jan 2011 21:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:42:00 -0000
Received: (qmail 3317 invoked by uid 500); 18 Jan 2011 21:41:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3256 invoked by uid 500); 18 Jan 2011 21:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3248 invoked by uid 99); 18 Jan 2011 21:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:41:56 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:41:50 +0000
Received: by bwz8 with SMTP id 8so160812bwz.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 13:41:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=kWDOIgC2chdI9qp0jMpX9cJCTiT9X+WA8Yi8HilT98g=;
        b=I+Shj8hdb5IZIPmgil0quLp+CB92MOIWVBmZHTSqgNvXqvWa0aoWkvdpVu775hzVfl
         ohPIcT2hN1ZZSVPgZ67f0QohgFF+WPoMfzPUAUkDqpQZGsILZenph4SVEzwGx21fSlcd
         g0tiJxaJcD9h3z4Zumi3hfd2sgSPSyqvmpIO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=qTON/OWFljLqRvrOPMrOWXfHkBrbPk0xlRDlK1Z6W3yqYf2S6jOsaSTjbNjZ52rr3/
         Rqv9990aPD6Wmq1gWKrkIypyRrvvXXur32rLoEos2+TQwJhw1+y3Fa4Kg8kYhZTS4Iel
         617OgtzFMI20opIR4TUY668N7bnwM4puY7vKw=
Received: by 10.204.100.136 with SMTP id y8mr4012737bkn.171.1295386885544;
 Tue, 18 Jan 2011 13:41:25 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Tue, 18 Jan 2011 13:41:05 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 18 Jan 2011 21:41:05 +0000
Message-ID: <AANLkTinN8ncPBBQ6y9F5mMAAAbRfh9=koS_KgYDbFKL1@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> Where do you get your Lucene/Solr downloads from?
>
> [X] ASF Mirrors (linked in our release announcements or via the Lucene we=
bsite)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a downst=
ream project)
>
> Please put an X in the box that applies to you. =A0Multiple selections ar=
e OK (for instance, if one project uses a mirror and another uses Maven)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:44:44 2011
Return-Path: <java-user-return-48399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37036 invoked from network); 18 Jan 2011 21:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:44:44 -0000
Received: (qmail 9703 invoked by uid 500); 18 Jan 2011 21:44:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9566 invoked by uid 500); 18 Jan 2011 21:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9550 invoked by uid 99); 18 Jan 2011 21:44:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:44:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 21:44:29 +0000
Received: by iwn2 with SMTP id 2so119691iwn.35
        for <multiple recipients>; Tue, 18 Jan 2011 13:44:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=QKwrZ8k/dqSNU+d6OJ/DYk5gMp146KpNl3TFaEOTeZo=;
        b=Fx6XzEVI2VyNGJhdZTS7+dqB0X1Uu+MnaDQUhsGf2ZbaNZcm1pkN6jLtNzHLX9bFK0
         Fowe0ZTmjJ78NOEHBobB0DKVD1/SPqQH46JIYkjnoefdFp576kyLjYPl+8V+Rf5xFM8c
         KMV6WjlXEjA99rVIvDiLLeY6gQOn5lOkjdziQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=FzBCwl52ezNBGWncPJIe2PUKxCQ9/6AItvH1fhMBctqnROG2nvr0i8Tb3l0SBG6MNN
         Spol5/bYwqzSzDT4YzWIUhreddqJoawcRNQE5Vki2PSFyTuP/A08ha4Mh6t7N52n8cOR
         hq//UOiB0ofAqbyhHBOoH3CCyVmxdgT802w4o=
MIME-Version: 1.0
Received: by 10.231.38.6 with SMTP id z6mr6777560ibd.8.1295387048110; Tue, 18
 Jan 2011 13:44:08 -0800 (PST)
Received: by 10.231.154.76 with HTTP; Tue, 18 Jan 2011 13:44:08 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 16:44:08 -0500
Message-ID: <AANLkTi=qx2qwxBvHcehNVh39B24gTfOfw6HpxNxSGbcz@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [X] I/we build them from source via an SVN/Git checkout.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 21:49:19 2011
Return-Path: <java-user-return-48400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47656 invoked from network); 18 Jan 2011 21:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 21:49:19 -0000
Received: (qmail 25707 invoked by uid 500); 18 Jan 2011 21:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25649 invoked by uid 500); 18 Jan 2011 21:49:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 19175 invoked by uid 99); 18 Jan 2011 21:47:00 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
X-Virus-Scanned: amavisd-new at backendmedia.com
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=us-ascii
From: Lukas Kahwe Smith <mls@pooteeweet.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 22:46:30 +0100
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <C9C2494D-272F-4B41-BE5D-DD9303F82DDA@pooteeweet.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
To: solr-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org


On 18.01.2011, at 22:04, Grant Ingersoll wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we =
really don't have a good sense of how people get Lucene and Solr for use =
in their application.  Because of this, there has been some talk of =
dropping Maven support for Lucene artifacts (or at least make them =
external).  Before we do that, I'd like to conduct an informal poll of =
actual users out there and see how you get Lucene or Solr.
>=20
> Where do you get your Lucene/Solr downloads from?
>=20
> [X] ASF Mirrors (linked in our release announcements or via the Lucene =
website)
>=20
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [X] I/we build them from source via an SVN/Git checkout.
>=20
> [] Other (someone in your company mirrors them internally or via a =
downstream project)


regards,
Lukas Kahwe Smith
mls@pooteeweet.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 22:30:51 2011
Return-Path: <java-user-return-48401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46652 invoked from network); 18 Jan 2011 22:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 22:30:51 -0000
Received: (qmail 83412 invoked by uid 500); 18 Jan 2011 22:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82890 invoked by uid 500); 18 Jan 2011 22:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82736 invoked by uid 99); 18 Jan 2011 22:30:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:30:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.125] (HELO web121704.mail.ne1.yahoo.com) (98.138.90.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Jan 2011 22:30:38 +0000
Received: (qmail 50602 invoked by uid 60001); 18 Jan 2011 22:30:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295389816; bh=nmQwzcTk38pcbTkL6YBYhYht0vtV/EbhP1LtW/uh4A0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=5wlgPKtr9coFNhlBZihX13JVgI6ATKI1ZUq03l/IJvZTfVq7BX40uOXOE6L6m672goAV8nvfx2Ga6pzAZOIqm+bvbe8JCg19p9G1xRowW1Ln8YbumG6RKawCCrdTh+3j+mRUTNBGKnildlPVX34UBXibIyLy44UXbq1yeg2roGY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=I406pos5qBKKLIitFbvReY71rqD95U/pF4pked3zW3eJSgQhDh7LOh7zha8bklRsJmbnz0+brrxG1Zdh6P4Vw6HVGaNy5UqwtbX1jRYcI1ZK4xGocaIv3N+3eOiLTQt0tM6kxQgcTkJzv+Fz9JAGwU19EUbK1TC+06u7wJT7GHQ=;
Message-ID: <608234.50591.qm@web121704.mail.ne1.yahoo.com>
X-YMail-OSG: Ft0CfM0VM1m2zRTl4HMbhnFJFNskvxLGrMX.SjSXQpR0oX7
 oUANgu_4CgnWTcdVCqoc8Ha_BUVyPbKhgA9BtjHW4sPj0RpIhz.4FpON8aQw
 Wd3VVGBjR5MHKhUmpH.ToDL.AjO3s8rxvs.Aypu2giVNCM3C2raCcuxcCJTv
 _A.p8SXTHyaqJ4aU0URODYSvh8rbOzPXaFOQhjsf.g9nZez3u0Mf6uJe_nNy
 oM0sw3Ktlgw1EVTnIPAAGpvovV.UD9q7sryJ6eovB
Received: from [78.165.96.134] by web121704.mail.ne1.yahoo.com via HTTP; Tue, 18 Jan 2011 14:30:16 PST
X-Mailer: YahooMailClassic/11.4.20 YahooMailWebService/0.8.107.285259
Date: Tue, 18 Jan 2011 14:30:16 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> [] ASF Mirrors (linked in our release announcements or via
> the Lucene website)
> 
> [X] Maven repository (whether you use Maven, Ant+Ivy,
> Buildr, etc.)
> 
> [] I/we build them from source via an SVN/Git checkout.
> 
> [] Other (someone in your company mirrors them internally
> or via a downstream project)


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 22:31:20 2011
Return-Path: <java-user-return-48402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48169 invoked from network); 18 Jan 2011 22:31:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 22:31:20 -0000
Received: (qmail 89392 invoked by uid 500); 18 Jan 2011 22:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89324 invoked by uid 500); 18 Jan 2011 22:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89315 invoked by uid 99); 18 Jan 2011 22:31:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:31:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ckstjohn@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:31:10 +0000
Received: by qyk7 with SMTP id 7so3349064qyk.14
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 14:30:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=SYN6Nkpx4XvKtA5MAGrICXgrAdmDzk/UNOVqovLSWsU=;
        b=f1xwbfSF0E0xy0v4lVTVCdUxKxgyF4es5VEIpJOVxLGjTHbM7FvuWduZ/E73BBUrmp
         GgaAe7/krWW3C8ud5hFhOYbFjR9X6oYzIlbkG2o3se3P7biU+zRZQDYznrLvqKaRpX5e
         TR1DltVe76caag6U/7HHxQ8zY/ZJyJyBDc4ns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iGbwK5LWTiy0JE6bqEz5Ia18uhev4XS55U2ZOmgK2p/wx8E9tsA0hNvzhWwO8HBo7p
         53DeswLbvac28LOgm87nAfDLCgZesAwJiKFtTG/S9zX73Rx43JxENXC0w+vEaRI7sAF/
         /lc68Uj8uw9nglu+jYVvbZERIxIpkk+Ip0HNI=
MIME-Version: 1.0
Received: by 10.229.6.207 with SMTP id a15mr5191224qca.298.1295389849531; Tue,
 18 Jan 2011 14:30:49 -0800 (PST)
Received: by 10.220.191.130 with HTTP; Tue, 18 Jan 2011 14:30:49 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Tue, 18 Jan 2011 16:30:49 -0600
Message-ID: <AANLkTim2Jhvx0hv6fyFZWD0Eo9DQoxsgUJCzqm3TZvPC@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Christopher St John <ckstjohn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Jan 18, 2011 at 3:04 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [x] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a downstream project)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 22:36:32 2011
Return-Path: <java-user-return-48403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62049 invoked from network); 18 Jan 2011 22:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 22:36:32 -0000
Received: (qmail 1228 invoked by uid 500); 18 Jan 2011 22:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1054 invoked by uid 500); 18 Jan 2011 22:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1046 invoked by uid 99); 18 Jan 2011 22:36:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:36:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cristian.vat@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:36:21 +0000
Received: by iwn2 with SMTP id 2so170589iwn.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 14:36:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=sOiP/KbXS0o4RN++PQduiPlUGPnYRWvqg9KJcd+iFFU=;
        b=NsICwtuGO8JOHxUUc2vdFcR0xU+3VTWZpVYb/qDCM/wmtYrWKB1U5GoQ3UrrB3kcUV
         LTiiv1LQJ3ElXLzB+4aZVLGDD1yMDsDzt7PcyhBZeRnIjovWGLGQMuX6E8RiI2qtKxmg
         xbt/Qt1d30YMHCRPCV7jvd7x6gU88AZlEYIA4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qEGwcriIOLw8CohbFEpUjmIke81VQTeXczzfyOWqUKqvxDkatFCNe4pGnlybL3i/RE
         rgpQj2IDIRWnuoGEmlnLhRi1rFY44i890/1KdK/3LCsjzwgdwPYs3loSbz9zEdHFkyh5
         p61jQRYIdjUM9e/IfB4D7VL0HQ205ssdzcZdw=
MIME-Version: 1.0
Received: by 10.231.167.201 with SMTP id r9mr6849213iby.46.1295390160513; Tue,
 18 Jan 2011 14:36:00 -0800 (PST)
Received: by 10.231.32.194 with HTTP; Tue, 18 Jan 2011 14:36:00 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 00:36:00 +0200
Message-ID: <AANLkTi=ZW0Qqh-_Whp8kKsb9zEjot2z0WLb3n0Gfyyv5@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Cristian Vat <cristian.vat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> [X] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a downstream project)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 22:47:04 2011
Return-Path: <java-user-return-48404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65103 invoked from network); 18 Jan 2011 22:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 22:47:04 -0000
Received: (qmail 16780 invoked by uid 500); 18 Jan 2011 22:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16734 invoked by uid 500); 18 Jan 2011 22:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16726 invoked by uid 99); 18 Jan 2011 22:47:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:47:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tommaso.teofili@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:46:55 +0000
Received: by pzk28 with SMTP id 28so36697pzk.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 14:46:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=ZMNAALl/cO+652mpc6UxwEjmGqsiC45ybt0ZudyFq4Q=;
        b=Igt/ichL4GFC/ZAcMe8fXcn3W1SSH1wA2tyrwhMuqUJFj58OXC+kFLe8rssmoxjQOR
         x+H1ukjrkfKSw7mOrZ3eUzui5nNpTmR/pEXeLrI14sl56Nb1PWihb9lWwVM0+WxDKivd
         QmtWRwyYqJ90G8bjJEaDgrUFHCbycSZyQ/5Pg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=DAPSjLua9uXAwsuNn4P8AAOdeWr37J021hrGU0GWUCUoEiSiUW1+KcfPXIPLOpjX3A
         5Twgwxj7N/T5tw3VqaBIyQVDS4Ktc6wPmd0U1j0x2vPo0qbuoUL9drHOQZyYkUj0wpBp
         CYLvbdBvYoDNy0svS2pY8Js9v5B3n4uKFrXXo=
Received: by 10.142.221.21 with SMTP id t21mr5769240wfg.423.1295390794995;
 Tue, 18 Jan 2011 14:46:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.218.10 with HTTP; Tue, 18 Jan 2011 14:46:14 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
From: Tommaso Teofili <tommaso.teofili@gmail.com>
Date: Tue, 18 Jan 2011 23:46:14 +0100
Message-ID: <AANLkTikDdUKJch5iYAT7vp91ZRnY4WTyoWh+189LwjJx@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd327142e5962049a26aca8

--000e0cd327142e5962049a26aca8
Content-Type: text/plain; charset=ISO-8859-1

[X] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)

2011/1/18 Grant Ingersoll <gsingers@apache.org>

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we really
> don't have a good sense of how people get Lucene and Solr for use in their
> application.  Because of this, there has been some talk of dropping Maven
> support for Lucene artifacts (or at least make them external).  Before we do
> that, I'd like to conduct an informal poll of actual users out there and see
> how you get Lucene or Solr.
>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
> Please put an X in the box that applies to you.  Multiple selections are OK
> (for instance, if one project uses a mirror and another uses Maven)
>
> Please do not turn this thread into a discussion on Maven and it's
> (de)merits, I simply want to know, informally, where people get their JARs
> from.  In other words, no discussion is necessary (we already have that
> going on dev@lucene.apache.org which you are welcome to join.)
>
> Thanks,
> Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd327142e5962049a26aca8--

From java-user-return-48405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 22:54:29 2011
Return-Path: <java-user-return-48405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81455 invoked from network); 18 Jan 2011 22:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 22:54:29 -0000
Received: (qmail 29509 invoked by uid 500); 18 Jan 2011 22:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29418 invoked by uid 500); 18 Jan 2011 22:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29403 invoked by uid 99); 18 Jan 2011 22:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:54:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gento0nz@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 22:54:16 +0000
Received: by iwn2 with SMTP id 2so186846iwn.35
        for <multiple recipients>; Tue, 18 Jan 2011 14:53:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=FiiNA+BXG9slCqqz6SRLhHhZSet1mnW908/L3lwIqr4=;
        b=LjKIOUyhUVSIzKtBfNRdyzHWvpuhsm6VwiV2lQqnavV08E1FvLu58Kumdvz1Hk2ngJ
         1XNELNLA8cK1jMn6KK9Bvk2dXrUGP7eD2vQx1ljMg90HF63s+edoQApnqBbE/1mo4UFM
         AePmySfdB80e2hv9+yhK0UCr5ifL3Fv5Srp1I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=MXTp6iZiTYuGGuEg7FSZMR90b4MaSWYeKAlrFRvIKXXRSa9HWnLuqupaLf2nGFyVfe
         +peEFQYhJYllJl5/sRC7J+CMGffemlFWIQQdUUnB2Lptmz7py9Tr89e1zzTQABJpqJgh
         Kn5Dr+pBuHMpJq9Smt7k18eT8ihfOdk5zzzS4=
MIME-Version: 1.0
Received: by 10.231.40.13 with SMTP id i13mr6785187ibe.190.1295391236179; Tue,
 18 Jan 2011 14:53:56 -0800 (PST)
Received: by 10.231.39.129 with HTTP; Tue, 18 Jan 2011 14:53:56 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 11:53:56 +1300
Message-ID: <AANLkTin+ZxEwLf769wZL__Ctr4jNbycvRDPPuLXovNSa@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Chris Male <gento0nz@gmail.com>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0003255763fe7a47e5049a26c63d

--0003255763fe7a47e5049a26c63d
Content-Type: text/plain; charset=ISO-8859-1

>
>
> [X] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>

--0003255763fe7a47e5049a26c63d--

From java-user-return-48406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 23:00:42 2011
Return-Path: <java-user-return-48406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96301 invoked from network); 18 Jan 2011 23:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 23:00:41 -0000
Received: (qmail 44617 invoked by uid 500); 18 Jan 2011 23:00:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44409 invoked by uid 500); 18 Jan 2011 23:00:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44389 invoked by uid 99); 18 Jan 2011 23:00:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:00:38 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:00:29 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <387486(2)>; Tue, 18 Jan 2011 14:59:50 PST
To: java-user@lucene.apache.org
cc: solr-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
In-reply-to: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Comments: In-reply-to Grant Ingersoll <gsingers@apache.org>
    message dated "Tue, 18 Jan 2011 13:04:01 -0800."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Tue, 18 Jan 2011 14:59:49 PST
Message-ID: <6420.1295391589@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll <gsingers@apache.org> wrote:

> Where do you get your Lucene/Solr downloads from?
> 
> [x] ASF Mirrors (linked in our release announcements or via the Lucene website)
> 
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
> 
> [x] I/we build them from source via an SVN/Git checkout.
> 
> [] Other (someone in your company mirrors them internally or via a downstream project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 23:14:42 2011
Return-Path: <java-user-return-48407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47873 invoked from network); 18 Jan 2011 23:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 23:14:42 -0000
Received: (qmail 69931 invoked by uid 500); 18 Jan 2011 23:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69889 invoked by uid 500); 18 Jan 2011 23:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69881 invoked by uid 99); 18 Jan 2011 23:14:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:14:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.254.141.183] (HELO mail-05.primus.ca) (216.254.141.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:14:32 +0000
Received: from ottawa-hs-64-26-155-186.s-ip.magma.ca ([64.26.155.186] helo=[192.168.0.204])
	by mail-05.primus.ca with esmtpa (Exim 4.72)
	(envelope-from <dev@brightminds.org>)
	id 1PfKkc-00025y-2R
	for java-user@lucene.apache.org; Tue, 18 Jan 2011 18:14:10 -0500
Message-ID: <4D361EC2.9040004@brightminds.org>
Date: Tue, 18 Jan 2011 18:14:10 -0500
From: BrightMinds Dev <dev@brightminds.org>
Reply-To: dev@brightminds.org
Organization: BrightMinds Software Inc.
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated: bm011 - ottawa-hs-64-26-155-186.s-ip.magma.ca ([192.168.0.204]) [64.26.155.186]

[] ASF Mirrors (linked in our release announcements or via the Lucene website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a downstream project)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 18 23:58:45 2011
Return-Path: <java-user-return-48408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36523 invoked from network); 18 Jan 2011 23:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jan 2011 23:58:44 -0000
Received: (qmail 28834 invoked by uid 500); 18 Jan 2011 23:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28792 invoked by uid 500); 18 Jan 2011 23:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28778 invoked by uid 99); 18 Jan 2011 23:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:58:42 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jan 2011 23:58:35 +0000
X-SBRS: None
X-MID: 216127775
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ah4VABO4NU0K0CrD/2dsb2JhbACDWKFdwkKFUASEb4E3hCyECg
Received: from unknown (HELO FDSWP2195.fda.gov) ([10.208.42.195])
  by ironport4.fda.gov with ESMTP/TLS/AES128-SHA; 18 Jan 2011 18:58:14 -0500
Received: from FDSWV2130.fda.gov ([169.254.1.112]) by FDSWP2195.fda.gov
 ([10.208.42.195]) with mapi; Tue, 18 Jan 2011 18:58:13 -0500
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
CC: 'Grant Ingersoll' <gsingers@apache.org>
Date: Tue, 18 Jan 2011 18:58:13 -0500
Subject: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Topic: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Index: Acu3Y4gUClyGSp0rQFmdVZSSjW5aCwAB+Wlg
Message-ID: <DDF2F4F8C0BDCC4CA63B2E35115F14B8123D42F62B@FDSWV2130.fda.gov>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
 <6420.1295391589@parc.com>
In-Reply-To: <6420.1295391589@parc.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

=20


Sincerely,
Sithu D Sudarsan

Grant Ingersoll <gsingers@apache.org> wrote:

> Where do you get your Lucene/Solr downloads from?
>=20
> [x] ASF Mirrors (linked in our release announcements or via the Lucene we=
bsite)
>=20
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [x] I/we build them from source via an SVN/Git checkout.
>=20
> [] Other (someone in your company mirrors them internally or via a downst=
ream project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 02:22:47 2011
Return-Path: <java-user-return-48409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94998 invoked from network); 19 Jan 2011 02:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 02:22:47 -0000
Received: (qmail 76760 invoked by uid 500); 19 Jan 2011 02:22:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76697 invoked by uid 500); 19 Jan 2011 02:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 40079 invoked by uid 99); 19 Jan 2011 01:23:26 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.bohlig@lucidimagination.com designates 38.102.63.180 as permitted sender)
Date: Tue, 18 Jan 2011 19:22:59 -0600 (CST)
From: Michael Bohlig <michael.bohlig@lucidimagination.com>
To: solr-user@lucene.apache.org, java-user@lucene.apache.org
Message-ID: <1951223568.111027.1295400179815.JavaMail.root@mail-5.01.com>
In-Reply-To: <888045993.104255.1295390050705.JavaMail.root@mail-5.01.com>
Subject: Lucene Revolution 2011 is Coming - May 25 & 26 - Save The Date and
 Call For Papers
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111026_1990183199.1295400179815"
X-Originating-IP: [207.179.4.183]
X-Mailer: Zimbra 6.0.7_GA_2476.RHEL4 (ZimbraWebClient - FF3.0 (Mac)/6.0.7_GA_2470.RHEL5_64)

------=_Part_111026_1990183199.1295400179815
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Mark your calendars today! The largest worldwide conference dedicated to Lu=
cene and Solr will take place in the San Francisco/Bay Area May 25-26.=20











The 2011 conference will build on the success of last year's Lucene Revolut=
ion in Boston. Sponsored by Lucid Imagination with additional support from =
community and other commercial co-sponsors, we'll be adding new sessions, n=
ew speakers, and new training sessions to the agenda.=20

Lucid Imagination is the commercial entity exclusively dedicated to Apache =
Lucene/Solr open source search technology.=20

Registration will begin shortly - so make sure to save-the-date.=20

In the meantime, the Call For Participation (CFP) is now open for Lucene Re=
volution 2011. If you have a great Solr or Lucene talk, this is a fantastic=
 opportunity to share it with the community.=20

To submit a proposal for a 45-minute presentation, please complete the form=
 at:=20
http://www.lucidimagination.com/revolution/2011/cfp=20

Topics of interest include:=20
- Lucene and Solr in the Enterprise (case studies, implementation, return o=
n investment, etc.)=20
- Use of LucidWorks Enterprise=20
- =E2=80=9CHow We Did It=E2=80=9D development case studies=20
- Lucene/Solr technology deep dives: features, how to use, etc.=20
- Spatial/Geo/local search=20
- Lucene and Solr in the Cloud=20
- Scalability and performance tuning=20
- Large Scale Search=20
- Real Time Search (or NRT search)=20
- Data Integration/Data Management=20
- Lucene & Solr for Mobile Applications=20
- Associated technologies: Mahout, Nutch, NLP, etc.=20

All accepted speakers will get complimentary conference passes. Financial a=
ssistance is available for speakers that qualify.=20

Submissions must be received by Wednesday , March 2 , 2011 , 12 Midnight PS=
T=20


Key Dates:=20
January 18 , 2011 : Call For Participation open; form available for complet=
ion at: http://www.lucidimagination.com/revolution/2011/cfp=20
March 2, 2011 : Call For Participation Closes=20
March 9, 2011 : Speaker Acceptance Notification=20
May 23-24, 2011 : Lucene and Solr Training Sessions=20
May 25-26, 2011 : Lucene Revolution Conference Sessions=20

If you have more than one topic that you would like to propose, please comp=
lete an additional online form.=20

To be considered, proposals must be received by 12 Midnight PDT, March 2 , =
2011 .=20

Interested in registration or other conference news? Want to be added to th=
e conference mailing list? Is your organization interested in sponsorship o=
pportunities? Please send an email to: info@lucenerevolution.org=20

We look forward to seeing you in the San Francisco/Bay Area!=20

Regards,=20
Mike=20





Michael Bohlig | Lucid Imagination=20
Enterprise Marketing=20
p +1 650 353 4057 x132=20
m+1 650 703 8383=20
www.lucidimagination.com=20



------=_Part_111026_1990183199.1295400179815--

From java-user-return-48410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 03:34:58 2011
Return-Path: <java-user-return-48410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23937 invoked from network); 19 Jan 2011 03:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 03:34:57 -0000
Received: (qmail 43810 invoked by uid 500); 19 Jan 2011 03:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43213 invoked by uid 500); 19 Jan 2011 03:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 93600 invoked by uid 99); 19 Jan 2011 02:43:32 -0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
From: "Mattmann, Chris A (388J)" <chris.a.mattmann@jpl.nasa.gov>
To: "solr-user@lucene.apache.org" <solr-user@lucene.apache.org>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 18 Jan 2011 18:42:56 -0800
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Topic: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Thread-Index: Acu3gpXl/e4CLtBIQuy5cXzLVNnzBg==
Message-ID: <2F7AE597-4E9D-4A41-A1BF-55FDAFBA8DA7@jpl.nasa.gov>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
 <1C9E3883-DCB4-496B-8CC8-4BFDCDBFC5EA@gmail.com>
 <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
In-Reply-To: <AANLkTikisHpULbpAYRiUC2hnSDokdsKKuV_ed7rLmNWK@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Source-IP: altvirehtstap01.jpl.nasa.gov [128.149.137.72]
X-Source-Sender: chris.a.mattmann@jpl.nasa.gov
X-AUTH: Authorized
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 18, 2011, at 2:24 PM, Glen Newton wrote:

> Where do you get your Lucene/Solr downloads from?
>=20
> [] ASF Mirrors (linked in our release announcements or via the Lucene web=
site)
>=20
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [] I/we build them from source via an SVN/Git checkout.


Cheers,
Chris

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Chris Mattmann, Ph.D.
Senior Computer Scientist
NASA Jet Propulsion Laboratory Pasadena, CA 91109 USA
Office: 171-266B, Mailstop: 171-246
Email: chris.a.mattmann@nasa.gov
WWW:   http://sunset.usc.edu/~mattmann/
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Adjunct Assistant Professor, Computer Science Department
University of Southern California, Los Angeles, CA 90089 USA
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 04:09:56 2011
Return-Path: <java-user-return-48411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95197 invoked from network); 19 Jan 2011 04:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 04:09:55 -0000
Received: (qmail 76713 invoked by uid 500); 19 Jan 2011 04:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76297 invoked by uid 500); 19 Jan 2011 04:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76288 invoked by uid 99); 19 Jan 2011 04:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 04:09:49 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of falha404@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 04:09:42 +0000
Received: by iwn2 with SMTP id 2so414166iwn.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 20:09:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:from
         :date:x-google-sender-auth:message-id:subject:to:content-type;
        bh=YTJTPNq6fYsARC7uxgLPARSGkbB6FekAow6rsPKYA40=;
        b=LVo06MZvqOzI2Lza/lZxbsQg9fFIM87L3qs6DcUNulDkb5XK7Bd/FP3guMQI16APDT
         cVzjWTd/B7yFSPsowbxhXwXOY+PzrR2ReXjGFjFAvzwDi/88WwA7L5orKYZIRMyRjiz4
         1AnyuvjXXTS+ep5diNnAX1DXQ0dIVWvsc7dMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=BwgqzOeRvJgT2erlEqVnEa9yovsHNYU9aOVMjGSDr7wQ+X2PTkvyrzJXQ4C6Iy1jAd
         +MudiSkVtCIJo6C8OMzgiMFJNBjpD2gr4bKuv3JVxJ9FbpFrRol0MGyFdcW/ITNXOc6B
         NXiM81tLAWvA/HJLYTbn31ebMUFxUMgJqABSo=
Received: by 10.42.176.135 with SMTP id be7mr177842icb.399.1295410162135; Tue,
 18 Jan 2011 20:09:22 -0800 (PST)
MIME-Version: 1.0
Sender: falha404@gmail.com
Received: by 10.42.108.8 with HTTP; Tue, 18 Jan 2011 20:09:02 -0800 (PST)
In-Reply-To: <AANLkTim2Jhvx0hv6fyFZWD0Eo9DQoxsgUJCzqm3TZvPC@mail.gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <AANLkTim2Jhvx0hv6fyFZWD0Eo9DQoxsgUJCzqm3TZvPC@mail.gmail.com>
From: Fabiano Nunes <fabiano@nunes.me>
Date: Wed, 19 Jan 2011 02:09:02 -0200
X-Google-Sender-Auth: prDPzXNRhWnIHRH5RgVcD1_TeJ8
Message-ID: <AANLkTi=nTtw_vjZgJAuOL3ztezQgRZ8eicVX3agEHrmk@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8f7c8d73d4049a2b2e3a

--90e6ba6e8f7c8d73d4049a2b2e3a
Content-Type: text/plain; charset=ISO-8859-1

[x] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

--90e6ba6e8f7c8d73d4049a2b2e3a--

From java-user-return-48412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 04:39:21 2011
Return-Path: <java-user-return-48412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1560 invoked from network); 19 Jan 2011 04:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 04:39:20 -0000
Received: (qmail 158 invoked by uid 500); 19 Jan 2011 04:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99595 invoked by uid 500); 19 Jan 2011 04:39:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99587 invoked by uid 99); 19 Jan 2011 04:39:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 04:39:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.139.52.220] (HELO nm23.bullet.mail.ac4.yahoo.com) (98.139.52.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jan 2011 04:39:04 +0000
Received: from [98.139.52.197] by nm23.bullet.mail.ac4.yahoo.com with NNFMP; 19 Jan 2011 04:38:43 -0000
Received: from [98.139.52.176] by tm10.bullet.mail.ac4.yahoo.com with NNFMP; 19 Jan 2011 04:38:43 -0000
Received: from [127.0.0.1] by omp1059.mail.ac4.yahoo.com with NNFMP; 19 Jan 2011 04:38:43 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 73570.34771.bm@omp1059.mail.ac4.yahoo.com
Received: (qmail 80940 invoked by uid 60001); 19 Jan 2011 04:38:42 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295411922; bh=92kmcAhI/piufdm7+RP9YXuzbi9foa7cxQp+XA6SUBA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=LaMim7BWRzoPGo3mMbyhsP3f26oVoxTwryKiXlJV9WnSBc2DAA9yFGZmDHsSoWkIyqfbzSGDzO+ps9zQzsNVA8f4vdGGk+uNf9A0zPhjf6mSge2/cGQvqdasoafHctl36Xle1tuLndk5xjxgLnhB0q59c5rzVsPGIqMV9EWwzCk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Mije6Tm+22aX9qUEmFQGmegNm0gS0G3elE8qCO/SguLt9Esbp3z0gcRFrLs7ZMNZMTDAEvZEooxN7898TcKj+9KjurUaI9y/qQMhv341dLCgRCxLCfw2jI6J9qeaQcg4XXTEn9MKtqy3UqyePwbM3egux4I7J5gXxLqw2hLlksA=;
Message-ID: <441014.80933.qm@web130101.mail.mud.yahoo.com>
X-YMail-OSG: JZjaXncVM1n04HqTMmp.gQwlGI9eZ.GYyM.8_3X3whcUzi1
 VkItOJYGaaHEISOZlIUrqNF2qgbTQCxuFwQcjh_FYDgM687l3x4KmzUnPZdj
 ocfd51oNo0QxHlvvp.nXZMRSorxevS7ZmPZNQBKr17GrLQkRKV1XSwRjQsEM
 pN.tmt7zVPo3lunRZdSgiiSPg.qtkRwYtkc6VDoAXA1yEWxzsFYodE6ImVm4
 UNvmdy_aQ6wcw6ZaVSJGJH.wWBqPPjpUC2Q8Q3mAbGh6rE8RqNBXsIdLlvtq
 EaBs8Dl2jH2JtBuihyuDvYL1f4DdFEcJe__3vYMc.vjaKYs6.bZTejOUR04p
 z7eCAH2LAHGCfenj2rjrwF1mvLqPCrBpg.0fm50Addon1Rvj.kI4XxFfR2w8
 HHsSaRhi_f7c-
Received: from [59.115.162.177] by web130101.mail.mud.yahoo.com via HTTP; Tue, 18 Jan 2011 20:38:42 PST
X-Mailer: YahooMailRC/555 YahooMailWebService/0.8.107.285259
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <4D361EC2.9040004@brightminds.org>
Date: Tue, 18 Jan 2011 20:38:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
To: java-user@lucene.apache.org
In-Reply-To: <4D361EC2.9040004@brightminds.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> [X] ASF Mirrors (linked in our release announcements or via the Lucene  
>website)

> 
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr,  etc.)
> 
> [X] I/we build them from source via an SVN/Git checkout.
> 
> []  Other (someone in your company mirrors them internally or via a downstream  
>project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 06:07:55 2011
Return-Path: <java-user-return-48413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66576 invoked from network); 19 Jan 2011 06:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 06:07:54 -0000
Received: (qmail 59382 invoked by uid 500); 19 Jan 2011 06:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59018 invoked by uid 500); 19 Jan 2011 06:07:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59010 invoked by uid 99); 19 Jan 2011 06:07:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 06:07:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 06:07:39 +0000
Received: by fxm2 with SMTP id 2so526378fxm.35
        for <java-user@lucene.apache.org>; Tue, 18 Jan 2011 22:07:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=1J2Z6rXASqiUVUTOPeiJTw9bVHY0d6r4/cmsCe+QQ5E=;
        b=c37CV3uaKP3QL4pRoe08D6C9q5Mv7R2uQWLm5WKW8YubPeownkfbMY6+LLnB7p9koo
         xUx2M0MOUcv/MDIkuKLCunMJMfSMbhcmTHiW6jYJMra+mfJs6JTiOpmMICM4U1h7H7dc
         xf14/ID758B2FizR5WlO+Cnx28dyYL7PxunTU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XAJha6zd1VondPy+AsM8yFnXFlh74JKdGBerpC0glmYcan9XE57uZasdKBKq4raeJa
         ROwiMT70YoXGVwFFnd2QHc7WdI2I6Kczw3224lAzLNxQjwQqgFLY0Q0YRNYZ2Zr6kuZE
         gEyOEfkyImP41J9RFUwt5zRdi3Qq28YFObLY0=
Received: by 10.223.125.196 with SMTP id z4mr252527far.124.1295417239096; Tue,
 18 Jan 2011 22:07:19 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.111.142 with HTTP; Tue, 18 Jan 2011 22:06:58 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
From: Anshum <anshumg@gmail.com>
Date: Wed, 19 Jan 2011 11:36:58 +0530
Message-ID: <AANLkTim8r=Uv1-4MgzDo_jieF-peq3QQNEi8+zPjHAEK@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5c2415f4c8f049a2cd48c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5c2415f4c8f049a2cd48c
Content-Type: text/plain; charset=ISO-8859-1

Where do you get your Lucene/Solr downloads from?

[X] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[X] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)
--
Anshum Gupta
http://ai-cafe.blogspot.com

--001636c5c2415f4c8f049a2cd48c--

From java-user-return-48414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 07:00:43 2011
Return-Path: <java-user-return-48414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47151 invoked from network); 19 Jan 2011 07:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 07:00:43 -0000
Received: (qmail 96801 invoked by uid 500); 19 Jan 2011 07:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96352 invoked by uid 500); 19 Jan 2011 07:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96330 invoked by uid 99); 19 Jan 2011 07:00:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:00:35 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.18.3.34] (HELO exprod8og117.obsmtp.com) (64.18.3.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jan 2011 07:00:28 +0000
Received: from source ([216.109.100.75]) by exprod8ob117.postini.com ([64.18.7.12]) with SMTP
	ID DSNKTTaL9pMttkVcEfzOJeJ/2ax4X/E4wQJs@postini.com; Tue, 18 Jan 2011 23:00:08 PST
Received: from us-pghmail2.ariba.com ([10.32.16.203]) by outboundpghmail.ariba.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Jan 2011 02:00:14 -0500
Received: from in-blrmail2.ariba.com ([10.57.16.56]) by us-pghmail2.ariba.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 19 Jan 2011 01:53:59 -0500
Received: from [10.57.36.104] ([10.57.36.104]) by in-blrmail2.ariba.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Wed, 19 Jan 2011 12:23:54 +0530
Message-ID: <4D368A6F.7090304@ariba.com>
Date: Wed, 19 Jan 2011 12:23:35 +0530
From: Vinaya Kumar Thimmappa <vthimmappa@ariba.com>
Reply-To: vthimmappa@ariba.com
Organization: Ariba 
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.13) Gecko/20101208 Lightning/1.0b2 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best practices for multiple languages?
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 19 Jan 2011 06:53:54.0323 (UTC) FILETIME=[A30D3630:01CBB7A5]

I think we should be using lucene with snowball jar's which means one 
index for all languages (ofcourse size of index is always a matter of 
concerns).

Hope this helps.
-vinaya

On Tuesday 18 January 2011 11:23 PM, Clemens Wyss wrote:
> What is the "best practice" to support multiple languages, i.e. Lucene-Documents that have multiple language content/fields?
> Should
> a) each language be indexed in a seperate index/directory or should
> b) the Documents (in a single directory) hold the diverse localized fields?
>
> We most often will be searching "language dependent" which (at least performance wise) mandates one-directory-per-language...
>
> Any (lucene specific) white papers on this topic?
>
> Thx in advance
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 07:09:55 2011
Return-Path: <java-user-return-48415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85889 invoked from network); 19 Jan 2011 07:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 07:09:54 -0000
Received: (qmail 10990 invoked by uid 500); 19 Jan 2011 07:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10701 invoked by uid 500); 19 Jan 2011 07:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10693 invoked by uid 99); 19 Jan 2011 07:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:09:49 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:09:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id EA89FC2125
	for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 08:09:22 +0100 (CET)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jJlBVikW6V9l for <java-user@lucene.apache.org>;
	Wed, 19 Jan 2011 08:09:22 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id C6F16C2118
	for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 08:09:22 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 19 Jan 2011 08:09:22 +0100
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 19 Jan 2011 08:09:21 +0100
Subject: AW: Best practices for multiple languages?
Thread-Topic: Best practices for multiple languages?
Thread-Index: Acu3ReGEmmldZRHORFyioCneBnUM4QAXSiAw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
 <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com>
In-Reply-To: <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> 1) Docs in different languages -- every document is one language
> 2) Each document has fields in different languages
We mainly have 1)-models

Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Shai Erera [mailto:serera@gmail.com]
> Gesendet: Dienstag, 18. Januar 2011 20:28
> An: java-user@lucene.apache.org
> Betreff: Re: Best practices for multiple languages?
>=20
> Hi
>=20
> There are two types of multi-language docs:
> 1) Docs in different languages -- every document is one language
> 2) Each document has fields in different languages
>=20
> I've dealt with both, and there are different solutions to each. Which of=
 them
> is yours?
>=20
> Shai
>=20
> On Tue, Jan 18, 2011 at 7:53 PM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
>=20
> > What is the "best practice" to support multiple languages, i.e.
> > Lucene-Documents that have multiple language content/fields?
> > Should
> > a) each language be indexed in a seperate index/directory or should
> > b) the Documents (in a single directory) hold the diverse localized fie=
lds?
> >
> > We most often will be searching "language dependent" which (at least
> > performance wise) mandates one-directory-per-language...
> >
> > Any (lucene specific) white papers on this topic?
> >
> > Thx in advance
> > Clemens
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 07:32:46 2011
Return-Path: <java-user-return-48416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98454 invoked from network); 19 Jan 2011 07:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 07:32:46 -0000
Received: (qmail 42718 invoked by uid 500); 19 Jan 2011 07:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42438 invoked by uid 500); 19 Jan 2011 07:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42430 invoked by uid 99); 19 Jan 2011 07:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:32:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:32:36 +0000
To: java-user@lucene.apache.org
MIME-Version: 1.0
X-KeepSent: 10F07B67:0BD45E51-C125781D:00292208;
 type=4; name=$KeepSent
X-Mailer: OpenMailer1.0
From: v.sevel@lombardodier.com
Message-ID: <OF10F07B67.0BD45E51-ONC125781D.00292208-C125781D.0029513C@biz.lodh.com>
Date: Wed, 19 Jan 2011 08:31:17 +0100
Subject: recurrent IO/CPU peaks
X-SendAsMailing: 0
X-MIMETrack: Cleaned
Content-Type: multipart/mixed; boundary="=_mixed 00295138C125781D_="

--=_mixed 00295138C125781D_=
Content-Type: multipart/alternative; boundary="=_alternative 00295138C125781D_="


--=_alternative 00295138C125781D_=
Content-Type: text/plain; charset="US-ASCII"

Hi,

I have an application that continously indexes 140 documents/s (we commit 
after each second) using lucene 2.9. at the beginning of the test the 
index is empty. during the test, I monitored this application, 
specifically in terms of IOs and CPU.

what I have seen, is that, on a regular basis (a few minutes), there are 
small peaks both for IOs and CPU, and once in a while, there is a much 
higher peak. the small peaks are small enough that do not disrupt the 
system, however, the high peak tends to steal some resources out of the 
other processes, and gets disruptive when the machine is loaded.

I logged the internal activity of the lucene writer during the high peak, 
and what I have seen that could correlate is the number of merge documents 
that suddenly grows, and executes shortly after another merge:

        Line 131: 17:46:26.268 IW 0 [Lucene Merge Thread #215]: merge: 
total 1391 docs
        Line 539: 17:46:36.449 IW 0 [Lucene Merge Thread #216]: merge: 
total 1462 docs
        Line 570: 17:46:36.565 IW 0 [Lucene Merge Thread #216]: merge: 
total 13753 docs
        Line 597: 17:46:37.381 IW 0 [Lucene Merge Thread #216]: merge: 
total 171593 docs
        Line 991: 17:46:46.503 IW 0 [Lucene Merge Thread #217]: merge: 
total 1537 docs
        Line 1439: 17:46:57.602 IW 0 [Lucene Merge Thread #218]: merge: 
total 1710 docs
        Line 1874: 17:47:07.680 IW 0 [Lucene Merge Thread #219]: merge: 
total 1532 docs
        Line 2282: 17:47:17.804 IW 0 [Lucene Merge Thread #220]: merge: 
total 1555 docs


Assuming this is a normal behavior, are there ways to minimize the 
amplitude of the high peaks?

I am attaching the lucene writer log and the systar report.

Thanks for the help.




Vincent




************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier
Darier Hentsch & Cie or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 00295138C125781D_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi,</font>
<br>
<br><font size=2 face="sans-serif">I have an application that continously
indexes 140 documents/s (we commit after each second) using lucene 2.9.
at the beginning of the test the index is empty. during the test, I monitored
this application, specifically in terms of IOs and CPU.</font>
<br>
<br><font size=2 face="sans-serif">what I have seen, is that, on a regular
basis (a few minutes), there are small peaks both for IOs and CPU, and
once in a while, there is a much higher peak. the small peaks are small
enough that do not disrupt the system, however, the high peak tends to
steal some resources out of the other processes, and gets disruptive when
the machine is loaded.</font>
<br>
<br><font size=2 face="sans-serif">I logged the internal activity of the
lucene writer during the high peak, and what I have seen that could correlate
is the number of merge documents that suddenly grows, and executes shortly
after another merge:</font>
<br>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
131: 17:46:26.268 IW 0 [Lucene Merge Thread #215]: merge: total 1391 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
539: 17:46:36.449 IW 0 [Lucene Merge Thread #216]: merge: total 1462 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
570: 17:46:36.565 IW 0 [Lucene Merge Thread #216]: merge: total 13753 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
597: 17:46:37.381 IW 0 [Lucene Merge Thread #216]: merge: total 171593
docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
991: 17:46:46.503 IW 0 [Lucene Merge Thread #217]: merge: total 1537 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
1439: 17:46:57.602 IW 0 [Lucene Merge Thread #218]: merge: total 1710 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
1874: 17:47:07.680 IW 0 [Lucene Merge Thread #219]: merge: total 1532 docs</font>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Line
2282: 17:47:17.804 IW 0 [Lucene Merge Thread #220]: merge: total 1555 docs</font>
<br>
<br>
<br><font size=2 face="sans-serif">Assuming this is a normal behavior,
are there ways to minimize the amplitude of the high peaks?</font>
<br>
<br><font size=2 face="sans-serif">I am attaching the lucene writer log
and the systar report.</font>
<br>
<br><font size=2 face="sans-serif">Thanks for the help.</font>
<br>
<br>
<br><font size=2 face="sans-serif"><br>
<br>
Vincent</font>
<br>
<br><font size=2 face="sans-serif"><br>
<br>
<br>
************************ DISCLAIMER ************************<br>
This message is intended only for use by the person to<br>
whom it is addressed. It may contain information that is<br>
privileged and confidential. Its content does not<br>
constitute a formal commitment by Lombard Odier<br>
Darier Hentsch &amp; Cie or any of its branches or affiliates.<br>
If you are not the intended recipient of this message,<br>
kindly notify the sender immediately and destroy this<br>
message. Thank You.<br>
*****************************************************************<br>
</font>
--=_alternative 00295138C125781D_=--
--=_mixed 00295138C125781D_=
Content-Type: text/plain;
	name="lucene.txt"
Content-Disposition: attachment;
	filename="lucene.txt"
Content-Transfer-Encoding: quoted-printable

17:46:23.235 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:23.235 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.2557354: 8 segme=
nts
17:46:23.235 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.2774396: 7 segments
17:46:23.235 IW 0 [EJB-Timer]: CMS: now merge
17:46:23.235 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu:c136 =
=5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136
17:46:23.235 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:23.235 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:23.235 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 changeCou=
nt=3D8780
17:46:23.235 IW 0 [EJB-Timer]: now sync =5F2gz.cfs
17:46:23.249 IW 0 [EJB-Timer]: done all syncs
17:46:23.249 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:23.258 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F287"
17:46:23.258 IFD [EJB-Timer]: now checkpoint "segments=5F287" [24 segments =
; isCommit =3D true]
17:46:23.258 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
286"
17:46:23.258 IFD [EJB-Timer]: delete "segments=5F286"
17:46:23.258 IW 0 [EJB-Timer]: commit: done
17:46:24.246 IW 0 [EJB-Timer]: commit: start
17:46:24.246 IW 0 [EJB-Timer]: commit: enter lock
17:46:24.246 IW 0 [EJB-Timer]: commit: now prepare
17:46:24.246 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:24.246 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h0 docStoreSegment=3D=
=5F2h0 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D136 numBufDelTerms=3D0
17:46:24.246 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136
17:46:24.247 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h0 numDocs=
=3D136
17:46:24.247 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h0 numDocs=3D136
17:46:24.257 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D579584 newFlushedSize=3D1=
89172 docs/MB=3D753.845 new/old=3D32.639%
17:46:24.257 IFD [EJB-Timer]: now checkpoint "segments=5F287" [25 segments =
; isCommit =3D false]
17:46:24.258 IFD [EJB-Timer]: now checkpoint "segments=5F287" [25 segments =
; isCommit =3D false]
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.nrm"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.fnm"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.prx"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.fdt"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.frq"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.fdx"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.tis"
17:46:24.259 IFD [EJB-Timer]: delete "=5F2h0.tii"
17:46:24.260 IFD [EJB-Timer]: now checkpoint "segments=5F287" [25 segments =
; isCommit =3D false]
17:46:24.260 IW 0 [EJB-Timer]: LMP: findMerges: 25 segments
17:46:24.260 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:24.260 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.2557354: 8 segme=
nts
17:46:24.260 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.2774396: 8 segments
17:46:24.260 IW 0 [EJB-Timer]: CMS: now merge
17:46:24.260 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu:c136 =
=5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136
17:46:24.260 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:24.260 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:24.260 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c1=
36 changeCount=3D8784
17:46:24.260 IW 0 [EJB-Timer]: now sync =5F2h0.cfs
17:46:24.267 IW 0 [EJB-Timer]: done all syncs
17:46:24.267 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:24.302 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F288"
17:46:24.302 IFD [EJB-Timer]: now checkpoint "segments=5F288" [25 segments =
; isCommit =3D true]
17:46:24.302 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
287"
17:46:24.302 IFD [EJB-Timer]: delete "segments=5F287"
17:46:24.302 IW 0 [EJB-Timer]: commit: done
17:46:25.253 IW 0 [EJB-Timer]: commit: start
17:46:25.253 IW 0 [EJB-Timer]: commit: enter lock
17:46:25.253 IW 0 [EJB-Timer]: commit: now prepare
17:46:25.253 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:25.253 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h1 docStoreSegment=3D=
=5F2h1 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D167 numBufDelTerms=3D0
17:46:25.253 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c1=
36
17:46:25.253 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h1 numDocs=
=3D167
17:46:25.253 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h1 numDocs=3D167
17:46:25.266 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
29809 docs/MB=3D761.99 new/old=3D32.858%
17:46:25.266 IFD [EJB-Timer]: now checkpoint "segments=5F288" [26 segments =
; isCommit =3D false]
17:46:25.267 IFD [EJB-Timer]: now checkpoint "segments=5F288" [26 segments =
; isCommit =3D false]
17:46:25.267 IFD [EJB-Timer]: delete "=5F2h1.fdt"
17:46:25.267 IFD [EJB-Timer]: delete "=5F2h1.fdx"
17:46:25.268 IFD [EJB-Timer]: delete "=5F2h1.prx"
17:46:25.268 IFD [EJB-Timer]: delete "=5F2h1.nrm"
17:46:25.268 IFD [EJB-Timer]: delete "=5F2h1.tis"
17:46:25.268 IFD [EJB-Timer]: delete "=5F2h1.fnm"
17:46:25.269 IFD [EJB-Timer]: delete "=5F2h1.frq"
17:46:25.269 IFD [EJB-Timer]: delete "=5F2h1.tii"
17:46:25.269 IFD [EJB-Timer]: now checkpoint "segments=5F288" [26 segments =
; isCommit =3D false]
17:46:25.269 IW 0 [EJB-Timer]: LMP: findMerges: 26 segments
17:46:25.269 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:25.269 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.2557354: 8 segme=
nts
17:46:25.269 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.361626: 9 segments
17:46:25.269 IW 0 [EJB-Timer]: CMS: now merge
17:46:25.269 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu:c136 =
=5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136 =5F=
2h1:c167
17:46:25.269 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:25.269 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:25.269 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c1=
36 =5F2h1:c167 changeCount=3D8788
17:46:25.270 IW 0 [EJB-Timer]: now sync =5F2h1.cfs
17:46:25.302 IW 0 [EJB-Timer]: done all syncs
17:46:25.302 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:25.302 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F289"
17:46:25.302 IFD [EJB-Timer]: now checkpoint "segments=5F289" [26 segments =
; isCommit =3D true]
17:46:25.302 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
288"
17:46:25.302 IFD [EJB-Timer]: delete "segments=5F288"
17:46:25.302 IW 0 [EJB-Timer]: commit: done
17:46:26.247 IW 0 [EJB-Timer]: commit: start
17:46:26.247 IW 0 [EJB-Timer]: commit: enter lock
17:46:26.247 IW 0 [EJB-Timer]: commit: now prepare
17:46:26.247 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:26.248 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h2 docStoreSegment=3D=
=5F2h2 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D136 numBufDelTerms=3D0
17:46:26.248 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c1=
36 =5F2h1:c167
17:46:26.248 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h2 numDocs=
=3D136
17:46:26.248 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h2 numDocs=3D136
17:46:26.260 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D579584 newFlushedSize=3D1=
89013 docs/MB=3D754.479 new/old=3D32.612%
17:46:26.260 IFD [EJB-Timer]: now checkpoint "segments=5F289" [27 segments =
; isCommit =3D false]
17:46:26.261 IFD [EJB-Timer]: now checkpoint "segments=5F289" [27 segments =
; isCommit =3D false]
17:46:26.261 IFD [EJB-Timer]: delete "=5F2h2.fdt"
17:46:26.261 IFD [EJB-Timer]: delete "=5F2h2.fnm"
17:46:26.261 IFD [EJB-Timer]: delete "=5F2h2.fdx"
17:46:26.262 IFD [EJB-Timer]: delete "=5F2h2.prx"
17:46:26.262 IFD [EJB-Timer]: delete "=5F2h2.frq"
17:46:26.262 IFD [EJB-Timer]: delete "=5F2h2.tis"
17:46:26.262 IFD [EJB-Timer]: delete "=5F2h2.tii"
17:46:26.262 IFD [EJB-Timer]: delete "=5F2h2.nrm"
17:46:26.262 IFD [EJB-Timer]: now checkpoint "segments=5F289" [27 segments =
; isCommit =3D false]
17:46:26.262 IW 0 [EJB-Timer]: LMP: findMerges: 27 segments
17:46:26.262 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:26.262 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.2557354: 8 segme=
nts
17:46:26.262 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.361626: 10 segments
17:46:26.262 IW 0 [EJB-Timer]: LMP:     17 to 27: add this merge
17:46:26.263 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2gt:c136 =5F2=
gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:=
c136 =5F2h1:c167 =5F2h2:c136 [total 1 pending]
17:46:26.263 IW 0 [EJB-Timer]: CMS: now merge
17:46:26.263 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu:c136 =
=5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136 =5F=
2h1:c167 =5F2h2:c136
17:46:26.263 IW 0 [EJB-Timer]: CMS:   consider merge =5F2gt:c136 =5F2gu:c13=
6 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136 =
=5F2h1:c167 =5F2h2:c136 into =5F2h3 [mergeDocStores]
17:46:26.263 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #215]
17:46:26.263 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:26.263 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:26.263 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2gt:c136 =5F2gu=
:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c1=
36 =5F2h1:c167 =5F2h2:c136 changeCount=3D8793
17:46:26.263 IW 0 [EJB-Timer]: now sync =5F2h2.cfs
17:46:26.263 IW 0 [Lucene Merge Thread #215]: CMS:   merge thread: start
17:46:26.266 IW 0 [Lucene Merge Thread #215]: now merge
  merge=3D=5F2gt:c136 =5F2gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2g=
y:c136 =5F2gz:c136 =5F2h0:c136 =5F2h1:c167 =5F2h2:c136 into =5F2h3 [mergeDo=
cStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@67346c5e
  index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =
=5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c13=
80 =5F2gs:c1360 =5F2gt:c136 =5F2gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136=
 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136 =5F2h1:c167 =5F2h2:c136
17:46:26.266 IW 0 [Lucene Merge Thread #215]: merging =5F2gt:c136 =5F2gu:c1=
36 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:c136 =
=5F2h1:c167 =5F2h2:c136 into =5F2h3 [mergeDocStores]
17:46:26.268 IW 0 [Lucene Merge Thread #215]: merge: total 1391 docs
17:46:26.333 IW 0 [EJB-Timer]: done all syncs
17:46:26.333 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:26.512 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28a"
17:46:26.512 IFD [EJB-Timer]: now checkpoint "segments=5F28a" [27 segments =
; isCommit =3D true]
17:46:26.512 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
289"
17:46:26.512 IFD [EJB-Timer]: delete "segments=5F289"
17:46:26.512 IW 0 [EJB-Timer]: commit: done
17:46:26.512 IW 0 [Lucene Merge Thread #215]: commitMerge: =5F2gt:c136 =5F2=
gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =5F2h0:=
c136 =5F2h1:c167 =5F2h2:c136 into =5F2h3 [mergeDocStores] index=3D=5Fwi:c16=
306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =
=5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:=
c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2=
gt:c136 =5F2gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:=
c136 =5F2h0:c136 =5F2h1:c167 =5F2h2:c136
17:46:26.512 IW 0 [Lucene Merge Thread #215]: commitMergeDeletes =5F2gt:c13=
6 =5F2gu:c136 =5F2gv:c136 =5F2gw:c136 =5F2gx:c136 =5F2gy:c136 =5F2gz:c136 =
=5F2h0:c136 =5F2h1:c167 =5F2h2:c136 into =5F2h3 [mergeDocStores]
17:46:26.513 IFD [Lucene Merge Thread #215]: now checkpoint "segments=5F28a=
" [18 segments ; isCommit =3D false]
17:46:26.558 IFD [Lucene Merge Thread #215]: now checkpoint "segments=5F28a=
" [18 segments ; isCommit =3D false]
17:46:26.649 IFD [Lucene Merge Thread #215]: now checkpoint "segments=5F28a=
" [18 segments ; isCommit =3D false]
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.fdx"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.frq"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.tis"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.fnm"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.fdt"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.tii"
17:46:26.649 IFD [Lucene Merge Thread #215]: delete "=5F2h3.prx"
17:46:26.649 IW 0 [Lucene Merge Thread #215]: LMP: findMerges: 18 segments
17:46:26.649 IW 0 [Lucene Merge Thread #215]: LMP:   level 6.729369 to 7.47=
9369: 9 segments
17:46:26.649 IW 0 [Lucene Merge Thread #215]: LMP:   level 6.2247195 to 6.2=
59157: 9 segments
17:46:26.649 IW 0 [Lucene Merge Thread #215]: CMS:   merge thread: done
17:46:27.253 IW 0 [EJB-Timer]: commit: start
17:46:27.253 IW 0 [EJB-Timer]: commit: enter lock
17:46:27.253 IW 0 [EJB-Timer]: commit: now prepare
17:46:27.253 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:27.253 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h4 docStoreSegment=3D=
=5F2h4 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D158 numBufDelTerms=3D0
17:46:27.253 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391
17:46:27.253 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h4 numDocs=
=3D158
17:46:27.253 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h4 numDocs=3D158
17:46:27.267 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
17553 docs/MB=3D761.539 new/old=3D32.736%
17:46:27.267 IFD [EJB-Timer]: now checkpoint "segments=5F28a" [19 segments =
; isCommit =3D false]
17:46:27.269 IFD [EJB-Timer]: now checkpoint "segments=5F28a" [19 segments =
; isCommit =3D false]
17:46:27.269 IFD [EJB-Timer]: delete "=5F2h4.prx"
17:46:27.269 IFD [EJB-Timer]: delete "=5F2h4.frq"
17:46:27.269 IFD [EJB-Timer]: delete "=5F2h4.fdt"
17:46:27.270 IFD [EJB-Timer]: delete "=5F2h4.tii"
17:46:27.270 IFD [EJB-Timer]: delete "=5F2h4.tis"
17:46:27.270 IFD [EJB-Timer]: delete "=5F2h4.fdx"
17:46:27.271 IFD [EJB-Timer]: delete "=5F2h4.nrm"
17:46:27.271 IFD [EJB-Timer]: delete "=5F2h4.fnm"
17:46:27.271 IFD [EJB-Timer]: now checkpoint "segments=5F28a" [19 segments =
; isCommit =3D false]
17:46:27.271 IW 0 [EJB-Timer]: LMP: findMerges: 19 segments
17:46:27.271 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:27.271 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:27.271 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3378386: 1 segments
17:46:27.271 IW 0 [EJB-Timer]: CMS: now merge
17:46:27.271 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158
17:46:27.271 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:27.271 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:27.271 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 changeCount=3D8799
17:46:27.271 IW 0 [EJB-Timer]: now sync =5F2h3.cfs
17:46:27.318 IW 0 [EJB-Timer]: now sync =5F2h4.cfs
17:46:27.318 IW 0 [EJB-Timer]: done all syncs
17:46:27.318 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:27.333 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28b"
17:46:27.333 IFD [EJB-Timer]: now checkpoint "segments=5F28b" [19 segments =
; isCommit =3D true]
17:46:27.333 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28a"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gv.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gw.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "segments=5F28a"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gx.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gz.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gy.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2h0.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2h1.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gt.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2h2.cfs"
17:46:27.333 IFD [EJB-Timer]: delete "=5F2gu.cfs"
17:46:27.333 IW 0 [EJB-Timer]: commit: done
17:46:28.233 IW 0 [EJB-Timer]: commit: start
17:46:28.233 IW 0 [EJB-Timer]: commit: enter lock
17:46:28.233 IW 0 [EJB-Timer]: commit: now prepare
17:46:28.233 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:28.233 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h5 docStoreSegment=3D=
=5F2h5 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D128 numBufDelTerms=3D0
17:46:28.233 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158
17:46:28.233 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h5 numDocs=
=3D128
17:46:28.233 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h5 numDocs=3D128
17:46:28.249 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D562176 newFlushedSize=3D1=
78781 docs/MB=3D750.738 new/old=3D31.802%
17:46:28.249 IFD [EJB-Timer]: now checkpoint "segments=5F28b" [20 segments =
; isCommit =3D false]
17:46:28.249 IFD [EJB-Timer]: now checkpoint "segments=5F28b" [20 segments =
; isCommit =3D false]
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.tis"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.fnm"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.tii"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.frq"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.fdt"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.prx"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.fdx"
17:46:28.249 IFD [EJB-Timer]: delete "=5F2h5.nrm"
17:46:28.249 IFD [EJB-Timer]: now checkpoint "segments=5F28b" [20 segments =
; isCommit =3D false]
17:46:28.249 IW 0 [EJB-Timer]: LMP: findMerges: 20 segments
17:46:28.249 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:28.249 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:28.249 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3378386: 2 segments
17:46:28.249 IW 0 [EJB-Timer]: CMS: now merge
17:46:28.249 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128
17:46:28.249 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:28.249 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:28.249 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 changeCount=3D8803
17:46:28.249 IW 0 [EJB-Timer]: now sync =5F2h5.cfs
17:46:28.280 IW 0 [EJB-Timer]: done all syncs
17:46:28.280 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:28.296 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28c"
17:46:28.296 IFD [EJB-Timer]: now checkpoint "segments=5F28c" [20 segments =
; isCommit =3D true]
17:46:28.296 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28b"
17:46:28.296 IFD [EJB-Timer]: delete "segments=5F28b"
17:46:28.296 IW 0 [EJB-Timer]: commit: done
17:46:29.256 IW 0 [EJB-Timer]: commit: start
17:46:29.256 IW 0 [EJB-Timer]: commit: enter lock
17:46:29.256 IW 0 [EJB-Timer]: commit: now prepare
17:46:29.256 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:29.256 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h6 docStoreSegment=3D=
=5F2h6 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D91 numBufDelTerms=3D0
17:46:29.256 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128
17:46:29.256 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h6 numDocs=
=3D91
17:46:29.256 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h6 numDocs=3D91
17:46:29.272 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D409600 newFlushedSize=3D1=
28866 docs/MB=3D740.462 new/old=3D31.461%
17:46:29.272 IFD [EJB-Timer]: now checkpoint "segments=5F28c" [21 segments =
; isCommit =3D false]
17:46:29.272 IFD [EJB-Timer]: now checkpoint "segments=5F28c" [21 segments =
; isCommit =3D false]
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.tis"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.nrm"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.tii"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.frq"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.prx"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.fdt"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.fdx"
17:46:29.272 IFD [EJB-Timer]: delete "=5F2h6.fnm"
17:46:29.272 IFD [EJB-Timer]: now checkpoint "segments=5F28c" [21 segments =
; isCommit =3D false]
17:46:29.272 IW 0 [EJB-Timer]: LMP: findMerges: 21 segments
17:46:29.272 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:29.272 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:29.272 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3378386: 3 segments
17:46:29.272 IW 0 [EJB-Timer]: CMS: now merge
17:46:29.272 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91
17:46:29.272 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:29.272 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:29.272 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 changeCount=3D8807
17:46:29.272 IW 0 [EJB-Timer]: now sync =5F2h6.cfs
17:46:29.287 IW 0 [EJB-Timer]: done all syncs
17:46:29.287 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:29.287 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28d"
17:46:29.287 IFD [EJB-Timer]: now checkpoint "segments=5F28d" [21 segments =
; isCommit =3D true]
17:46:29.287 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28c"
17:46:29.287 IFD [EJB-Timer]: delete "segments=5F28c"
17:46:29.287 IW 0 [EJB-Timer]: commit: done
17:46:30.249 IW 0 [EJB-Timer]: commit: start
17:46:30.249 IW 0 [EJB-Timer]: commit: enter lock
17:46:30.249 IW 0 [EJB-Timer]: commit: now prepare
17:46:30.249 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:30.249 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h7 docStoreSegment=3D=
=5F2h7 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D136 numBufDelTerms=3D0
17:46:30.249 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91
17:46:30.249 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h7 numDocs=
=3D136
17:46:30.249 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h7 numDocs=3D136
17:46:30.265 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D579584 newFlushedSize=3D1=
89062 docs/MB=3D754.283 new/old=3D32.62%
17:46:30.265 IFD [EJB-Timer]: now checkpoint "segments=5F28d" [22 segments =
; isCommit =3D false]
17:46:30.265 IFD [EJB-Timer]: now checkpoint "segments=5F28d" [22 segments =
; isCommit =3D false]
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.nrm"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.prx"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.tis"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.fnm"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.fdt"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.tii"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.fdx"
17:46:30.265 IFD [EJB-Timer]: delete "=5F2h7.frq"
17:46:30.265 IFD [EJB-Timer]: now checkpoint "segments=5F28d" [22 segments =
; isCommit =3D false]
17:46:30.265 IW 0 [EJB-Timer]: LMP: findMerges: 22 segments
17:46:30.265 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:30.265 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:30.265 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3378386: 4 segments
17:46:30.265 IW 0 [EJB-Timer]: CMS: now merge
17:46:30.265 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136
17:46:30.265 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:30.265 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:30.265 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 changeCount=3D8811
17:46:30.265 IW 0 [EJB-Timer]: now sync =5F2h7.cfs
17:46:30.280 IW 0 [EJB-Timer]: done all syncs
17:46:30.280 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:30.296 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28e"
17:46:30.296 IFD [EJB-Timer]: now checkpoint "segments=5F28e" [22 segments =
; isCommit =3D true]
17:46:30.296 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28d"
17:46:30.296 IFD [EJB-Timer]: delete "segments=5F28d"
17:46:30.296 IW 0 [EJB-Timer]: commit: done
17:46:31.287 IW 0 [EJB-Timer]: commit: start
17:46:31.287 IW 0 [EJB-Timer]: commit: enter lock
17:46:31.287 IW 0 [EJB-Timer]: commit: now prepare
17:46:31.287 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:31.287 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h8 docStoreSegment=3D=
=5F2h8 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D136 numBufDelTerms=3D0
17:46:31.287 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136
17:46:31.287 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h8 numDocs=
=3D136
17:46:31.287 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h8 numDocs=3D136
17:46:31.303 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D579584 newFlushedSize=3D1=
88821 docs/MB=3D755.246 new/old=3D32.579%
17:46:31.303 IFD [EJB-Timer]: now checkpoint "segments=5F28e" [23 segments =
; isCommit =3D false]
17:46:31.303 IFD [EJB-Timer]: now checkpoint "segments=5F28e" [23 segments =
; isCommit =3D false]
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.fnm"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.nrm"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.tii"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.fdx"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.fdt"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.frq"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.prx"
17:46:31.303 IFD [EJB-Timer]: delete "=5F2h8.tis"
17:46:31.303 IFD [EJB-Timer]: now checkpoint "segments=5F28e" [23 segments =
; isCommit =3D false]
17:46:31.303 IW 0 [EJB-Timer]: LMP: findMerges: 23 segments
17:46:31.303 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:31.303 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:31.303 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3378386: 5 segments
17:46:31.303 IW 0 [EJB-Timer]: CMS: now merge
17:46:31.303 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136
17:46:31.303 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:31.303 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:31.303 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 changeCount=3D8815
17:46:31.303 IW 0 [EJB-Timer]: now sync =5F2h8.cfs
17:46:31.328 IW 0 [EJB-Timer]: done all syncs
17:46:31.328 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:31.334 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28f"
17:46:31.334 IFD [EJB-Timer]: now checkpoint "segments=5F28f" [23 segments =
; isCommit =3D true]
17:46:31.334 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28e"
17:46:31.334 IFD [EJB-Timer]: delete "segments=5F28e"
17:46:31.334 IW 0 [EJB-Timer]: commit: done
17:46:32.328 IW 0 [EJB-Timer]: commit: start
17:46:32.328 IW 0 [EJB-Timer]: commit: enter lock
17:46:32.328 IW 0 [EJB-Timer]: commit: now prepare
17:46:32.328 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:32.328 IW 0 [EJB-Timer]:   flush: segment=3D=5F2h9 docStoreSegment=3D=
=5F2h9 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D181 numBufDelTerms=3D0
17:46:32.328 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136
17:46:32.328 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2h9 numDocs=
=3D181
17:46:32.328 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2h9 numDocs=3D181
17:46:32.340 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D782336 newFlushedSize=3D2=
48036 docs/MB=3D765.18 new/old=3D31.705%
17:46:32.341 IFD [EJB-Timer]: now checkpoint "segments=5F28f" [24 segments =
; isCommit =3D false]
17:46:32.342 IFD [EJB-Timer]: now checkpoint "segments=5F28f" [24 segments =
; isCommit =3D false]
17:46:32.342 IFD [EJB-Timer]: delete "=5F2h9.frq"
17:46:32.342 IFD [EJB-Timer]: delete "=5F2h9.fnm"
17:46:32.342 IFD [EJB-Timer]: delete "=5F2h9.fdt"
17:46:32.343 IFD [EJB-Timer]: delete "=5F2h9.tii"
17:46:32.343 IFD [EJB-Timer]: delete "=5F2h9.tis"
17:46:32.343 IFD [EJB-Timer]: delete "=5F2h9.fdx"
17:46:32.343 IFD [EJB-Timer]: delete "=5F2h9.nrm"
17:46:32.343 IFD [EJB-Timer]: delete "=5F2h9.prx"
17:46:32.343 IFD [EJB-Timer]: now checkpoint "segments=5F28f" [24 segments =
; isCommit =3D false]
17:46:32.344 IW 0 [EJB-Timer]: LMP: findMerges: 24 segments
17:46:32.344 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:32.344 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:32.344 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3947544: 6 segments
17:46:32.344 IW 0 [EJB-Timer]: CMS: now merge
17:46:32.344 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181
17:46:32.344 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:32.344 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:32.344 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 changeCou=
nt=3D8819
17:46:32.344 IW 0 [EJB-Timer]: now sync =5F2h9.cfs
17:46:32.359 IW 0 [EJB-Timer]: done all syncs
17:46:32.359 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:32.366 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28g"
17:46:32.366 IFD [EJB-Timer]: now checkpoint "segments=5F28g" [24 segments =
; isCommit =3D true]
17:46:32.366 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28f"
17:46:32.366 IFD [EJB-Timer]: delete "segments=5F28f"
17:46:32.366 IW 0 [EJB-Timer]: commit: done
17:46:33.365 IW 0 [EJB-Timer]: commit: start
17:46:33.365 IW 0 [EJB-Timer]: commit: enter lock
17:46:33.365 IW 0 [EJB-Timer]: commit: now prepare
17:46:33.365 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:33.365 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ha docStoreSegment=3D=
=5F2ha docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D148 numBufDelTerms=3D0
17:46:33.365 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181
17:46:33.365 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ha numDocs=
=3D148
17:46:33.365 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ha numDocs=3D148
17:46:33.371 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D647168 newFlushedSize=3D2=
05648 docs/MB=3D754.635 new/old=3D31.777%
17:46:33.371 IFD [EJB-Timer]: now checkpoint "segments=5F28g" [25 segments =
; isCommit =3D false]
17:46:33.372 IFD [EJB-Timer]: now checkpoint "segments=5F28g" [25 segments =
; isCommit =3D false]
17:46:33.372 IFD [EJB-Timer]: delete "=5F2ha.nrm"
17:46:33.372 IFD [EJB-Timer]: delete "=5F2ha.tis"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.fnm"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.fdx"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.fdt"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.tii"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.prx"
17:46:33.373 IFD [EJB-Timer]: delete "=5F2ha.frq"
17:46:33.374 IFD [EJB-Timer]: now checkpoint "segments=5F28g" [25 segments =
; isCommit =3D false]
17:46:33.374 IW 0 [EJB-Timer]: LMP: findMerges: 25 segments
17:46:33.374 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:33.374 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:33.374 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3947544: 7 segments
17:46:33.374 IW 0 [EJB-Timer]: CMS: now merge
17:46:33.374 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148
17:46:33.374 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:33.374 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:33.374 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 changeCount=3D8823
17:46:33.374 IW 0 [EJB-Timer]: now sync =5F2ha.cfs
17:46:33.392 IW 0 [EJB-Timer]: done all syncs
17:46:33.392 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:33.398 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28h"
17:46:33.398 IFD [EJB-Timer]: now checkpoint "segments=5F28h" [25 segments =
; isCommit =3D true]
17:46:33.398 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28g"
17:46:33.398 IFD [EJB-Timer]: delete "segments=5F28g"
17:46:33.398 IW 0 [EJB-Timer]: commit: done
17:46:34.391 IW 0 [EJB-Timer]: commit: start
17:46:34.391 IW 0 [EJB-Timer]: commit: enter lock
17:46:34.391 IW 0 [EJB-Timer]: commit: now prepare
17:46:34.391 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:34.391 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hb docStoreSegment=3D=
=5F2hb docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D164 numBufDelTerms=3D0
17:46:34.391 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48
17:46:34.391 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hb numDocs=
=3D164
17:46:34.391 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hb numDocs=3D164
17:46:34.407 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
26372 docs/MB=3D759.663 new/old=3D32.367%
17:46:34.407 IFD [EJB-Timer]: now checkpoint "segments=5F28h" [26 segments =
; isCommit =3D false]
17:46:34.408 IFD [EJB-Timer]: now checkpoint "segments=5F28h" [26 segments =
; isCommit =3D false]
17:46:34.408 IFD [EJB-Timer]: delete "=5F2hb.frq"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.prx"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.fnm"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.fdt"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.fdx"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.tii"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.nrm"
17:46:34.409 IFD [EJB-Timer]: delete "=5F2hb.tis"
17:46:34.410 IFD [EJB-Timer]: now checkpoint "segments=5F28h" [26 segments =
; isCommit =3D false]
17:46:34.410 IW 0 [EJB-Timer]: LMP: findMerges: 26 segments
17:46:34.410 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:34.410 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:34.410 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3947544: 8 segments
17:46:34.410 IW 0 [EJB-Timer]: CMS: now merge
17:46:34.410 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2=
hb:c164
17:46:34.410 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:34.410 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:34.410 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 =5F2hb:c164 changeCount=3D8827
17:46:34.410 IW 0 [EJB-Timer]: now sync =5F2hb.cfs
17:46:34.503 IW 0 [EJB-Timer]: done all syncs
17:46:34.503 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:34.503 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28i"
17:46:34.503 IFD [EJB-Timer]: now checkpoint "segments=5F28i" [26 segments =
; isCommit =3D true]
17:46:34.503 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28h"
17:46:34.503 IFD [EJB-Timer]: delete "segments=5F28h"
17:46:34.503 IW 0 [EJB-Timer]: commit: done
17:46:35.412 IW 0 [EJB-Timer]: commit: start
17:46:35.412 IW 0 [EJB-Timer]: commit: enter lock
17:46:35.412 IW 0 [EJB-Timer]: commit: now prepare
17:46:35.412 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:35.412 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hc docStoreSegment=3D=
=5F2hc docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D158 numBufDelTerms=3D0
17:46:35.412 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 =5F2hb:c164
17:46:35.412 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hc numDocs=
=3D158
17:46:35.412 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hc numDocs=3D158
17:46:35.412 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D681984 newFlushedSize=3D2=
16335 docs/MB=3D765.826 new/old=3D31.721%
17:46:35.412 IFD [EJB-Timer]: now checkpoint "segments=5F28i" [27 segments =
; isCommit =3D false]
17:46:35.413 IFD [EJB-Timer]: now checkpoint "segments=5F28i" [27 segments =
; isCommit =3D false]
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.frq"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.fnm"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.tis"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.tii"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.nrm"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.prx"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.fdx"
17:46:35.413 IFD [EJB-Timer]: delete "=5F2hc.fdt"
17:46:35.413 IFD [EJB-Timer]: now checkpoint "segments=5F28i" [27 segments =
; isCommit =3D false]
17:46:35.413 IW 0 [EJB-Timer]: LMP: findMerges: 27 segments
17:46:35.413 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:35.413 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:35.413 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3947544: 9 segments
17:46:35.413 IW 0 [EJB-Timer]: CMS: now merge
17:46:35.413 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2=
hb:c164 =5F2hc:c158
17:46:35.413 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:35.413 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:35.413 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 =5F2hb:c164 =5F2hc:c158 changeCount=3D8831
17:46:35.413 IW 0 [EJB-Timer]: now sync =5F2hc.cfs
17:46:35.416 IW 0 [EJB-Timer]: done all syncs
17:46:35.416 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:35.423 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28j"
17:46:35.423 IFD [EJB-Timer]: now checkpoint "segments=5F28j" [27 segments =
; isCommit =3D true]
17:46:35.424 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28i"
17:46:35.424 IFD [EJB-Timer]: delete "segments=5F28i"
17:46:35.424 IW 0 [EJB-Timer]: commit: done
17:46:36.420 IW 0 [EJB-Timer]: commit: start
17:46:36.420 IW 0 [EJB-Timer]: commit: enter lock
17:46:36.420 IW 0 [EJB-Timer]: commit: now prepare
17:46:36.420 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:36.420 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hd docStoreSegment=3D=
=5F2hd docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D162 numBufDelTerms=3D0
17:46:36.420 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 =5F2hb:c164 =5F2hc:c158
17:46:36.420 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hd numDocs=
=3D162
17:46:36.420 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hd numDocs=3D162
17:46:36.438 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D681984 newFlushedSize=3D2=
22242 docs/MB=3D764.344 new/old=3D32.588%
17:46:36.438 IFD [EJB-Timer]: now checkpoint "segments=5F28j" [28 segments =
; isCommit =3D false]
17:46:36.440 IFD [EJB-Timer]: now checkpoint "segments=5F28j" [28 segments =
; isCommit =3D false]
17:46:36.440 IFD [EJB-Timer]: delete "=5F2hd.prx"
17:46:36.440 IFD [EJB-Timer]: delete "=5F2hd.fnm"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.frq"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.fdx"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.tii"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.fdt"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.tis"
17:46:36.441 IFD [EJB-Timer]: delete "=5F2hd.nrm"
17:46:36.442 IFD [EJB-Timer]: now checkpoint "segments=5F28j" [28 segments =
; isCommit =3D false]
17:46:36.442 IW 0 [EJB-Timer]: LMP: findMerges: 28 segments
17:46:36.442 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 9 segments
17:46:36.442 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.259157: 9 segmen=
ts
17:46:36.442 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3947544: 10 segments
17:46:36.442 IW 0 [EJB-Timer]: LMP:     18 to 28: add this merge
17:46:36.442 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2h4:c158 =5F2=
h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2hb:c=
164 =5F2hc:c158 =5F2hd:c162 [total 1 pending]
17:46:36.442 IW 0 [EJB-Timer]: CMS: now merge
17:46:36.442 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F=
2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =
=5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2=
hb:c164 =5F2hc:c158 =5F2hd:c162
17:46:36.442 IW 0 [EJB-Timer]: CMS:   consider merge =5F2h4:c158 =5F2h5:c12=
8 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2hb:c164 =
=5F2hc:c158 =5F2hd:c162 into =5F2he [mergeDocStores]
17:46:36.442 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #216]
17:46:36.442 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:36.442 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:36.442 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c=
1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2h=
4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c1=
48 =5F2hb:c164 =5F2hc:c158 =5F2hd:c162 changeCount=3D8836
17:46:36.442 IW 0 [EJB-Timer]: now sync =5F2hd.cfs
17:46:36.442 IW 0 [Lucene Merge Thread #216]: CMS:   merge thread: start
17:46:36.447 IW 0 [Lucene Merge Thread #216]: now merge
  merge=3D=5F2h4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9=
:c181 =5F2ha:c148 =5F2hb:c164 =5F2hc:c158 =5F2hd:c162 into =5F2he [mergeDoc=
Stores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@684b0d55
  index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =
=5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c13=
80 =5F2gs:c1360 =5F2h3:c1391 =5F2h4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136=
 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2hb:c164 =5F2hc:c158 =5F2hd:c162
17:46:36.447 IW 0 [Lucene Merge Thread #216]: merging =5F2h4:c158 =5F2h5:c1=
28 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2hb:c164 =
=5F2hc:c158 =5F2hd:c162 into =5F2he [mergeDocStores]
17:46:36.449 IW 0 [Lucene Merge Thread #216]: merge: total 1462 docs
17:46:36.455 IW 0 [EJB-Timer]: done all syncs
17:46:36.455 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:36.464 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28k"
17:46:36.464 IFD [EJB-Timer]: now checkpoint "segments=5F28k" [28 segments =
; isCommit =3D true]
17:46:36.464 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28j"
17:46:36.465 IFD [EJB-Timer]: delete "segments=5F28j"
17:46:36.465 IW 0 [EJB-Timer]: commit: done
17:46:36.564 IW 0 [Lucene Merge Thread #216]: commitMerge: =5F2h4:c158 =5F2=
h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =5F2hb:c=
164 =5F2hc:c158 =5F2hd:c162 into =5F2he [mergeDocStores] index=3D=5Fwi:c163=
06 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =
=5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1360 =5F2f9:=
c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2=
h3:c1391 =5F2h4:c158 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:=
c181 =5F2ha:c148 =5F2hb:c164 =5F2hc:c158 =5F2hd:c162
17:46:36.564 IW 0 [Lucene Merge Thread #216]: commitMergeDeletes =5F2h4:c15=
8 =5F2h5:c128 =5F2h6:c91 =5F2h7:c136 =5F2h8:c136 =5F2h9:c181 =5F2ha:c148 =
=5F2hb:c164 =5F2hc:c158 =5F2hd:c162 into =5F2he [mergeDocStores]
17:46:36.564 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [19 segments ; isCommit =3D false]
17:46:36.564 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [19 segments ; isCommit =3D false]
17:46:36.564 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [19 segments ; isCommit =3D false]
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.tis"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.prx"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.frq"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.fnm"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.fdt"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.fdx"
17:46:36.564 IFD [Lucene Merge Thread #216]: delete "=5F2he.tii"
17:46:36.565 IW 0 [Lucene Merge Thread #216]: LMP: findMerges: 19 segments
17:46:36.565 IW 0 [Lucene Merge Thread #216]: LMP:   level 6.729369 to 7.47=
9369: 9 segments
17:46:36.565 IW 0 [Lucene Merge Thread #216]: LMP:   level 6.2247195 to 6.2=
79434: 10 segments
17:46:36.565 IW 0 [Lucene Merge Thread #216]: LMP:     9 to 19: add this me=
rge
17:46:36.565 IW 0 [Lucene Merge Thread #216]: add merge to pendingMerges: =
=5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c13=
60 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462 [total 1 pending]
17:46:36.565 IW 0 [Lucene Merge Thread #216]: CMS:   merge thread: do anoth=
er merge =5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =
=5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462 into =5F2h=
f [mergeDocStores]
17:46:36.565 IW 0 [Lucene Merge Thread #216]: now merge
  merge=3D=5F2en:c1360 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =
=5F2g6:c1360 =5F2gh:c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462 into =5F2h=
f [mergeDocStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@16d1e934
  index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =
=5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c13=
80 =5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462
17:46:36.565 IW 0 [Lucene Merge Thread #216]: merging =5F2en:c1360 =5F2ey:c=
1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2g=
s:c1360 =5F2h3:c1391 =5F2he:c1462 into =5F2hf [mergeDocStores]
17:46:36.565 IW 0 [Lucene Merge Thread #216]: merge: total 13753 docs
17:46:37.334 IW 0 [Lucene Merge Thread #216]: commitMerge: =5F2en:c1360 =5F=
2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =
=5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462 into =5F2hf [mergeDocStores] index=
=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F=
253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2en:c1360 =5F2ey:c1=
360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:c1380 =5F2gs=
:c1360 =5F2h3:c1391 =5F2he:c1462
17:46:37.334 IW 0 [Lucene Merge Thread #216]: commitMergeDeletes =5F2en:c13=
60 =5F2ey:c1360 =5F2f9:c1360 =5F2fk:c1360 =5F2fv:c1360 =5F2g6:c1360 =5F2gh:=
c1380 =5F2gs:c1360 =5F2h3:c1391 =5F2he:c1462 into =5F2hf [mergeDocStores]
17:46:37.334 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [10 segments ; isCommit =3D false]
17:46:37.334 IFD [Lucene Merge Thread #216]: delete "=5F2he.cfs"
17:46:37.334 IFD [Lucene Merge Thread #216]: IndexFileDeleter: unable to re=
move file "=5F2he.cfs": java.io.IOException: Cannot delete F:\logserver\ind=
ex\INFRA-LOGSERVER1=5FUNIV=5Funiv=5FTBIZ\=5F2he.cfs; Will re-try later.
17:46:37.334 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [10 segments ; isCommit =3D false]
17:46:37.334 IFD [Lucene Merge Thread #216]: delete pending file =5F2he.cfs
17:46:37.334 IFD [Lucene Merge Thread #216]: delete "=5F2he.cfs"
17:46:37.365 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28k=
" [10 segments ; isCommit =3D false]
17:46:37.365 IFD [Lucene Merge Thread #216]: delete "=5F2hf.fdx"
17:46:37.365 IFD [Lucene Merge Thread #216]: delete "=5F2hf.tis"
17:46:37.365 IFD [Lucene Merge Thread #216]: delete "=5F2hf.fdt"
17:46:37.365 IFD [Lucene Merge Thread #216]: delete "=5F2hf.tii"
17:46:37.365 IFD [Lucene Merge Thread #216]: delete "=5F2hf.fnm"
17:46:37.381 IFD [Lucene Merge Thread #216]: delete "=5F2hf.prx"
17:46:37.381 IFD [Lucene Merge Thread #216]: delete "=5F2hf.frq"
17:46:37.381 IW 0 [Lucene Merge Thread #216]: LMP: findMerges: 10 segments
17:46:37.381 IW 0 [Lucene Merge Thread #216]: LMP:   level 6.729369 to 7.47=
9369: 10 segments
17:46:37.381 IW 0 [Lucene Merge Thread #216]: LMP:     0 to 10: add this me=
rge
17:46:37.381 IW 0 [Lucene Merge Thread #216]: add merge to pendingMerges: =
=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253=
:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 [total 1 pe=
nding]
17:46:37.381 IW 0 [Lucene Merge Thread #216]: CMS:   merge thread: do anoth=
er merge =5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c224=
15 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 in=
to =5F2hg [mergeDocStores]
17:46:37.381 IW 0 [Lucene Merge Thread #216]: now merge
  merge=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 i=
nto =5F2hg [mergeDocStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@6d2cd069
  index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753
17:46:37.381 IW 0 [Lucene Merge Thread #216]: merging =5Fwi:c16306 =5F1kp:c=
17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861=
 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 into =5F2hg [mergeDocStores]
17:46:37.381 IW 0 [Lucene Merge Thread #216]: merge: total 171593 docs
17:46:37.452 IW 0 [EJB-Timer]: commit: start
17:46:37.452 IW 0 [EJB-Timer]: commit: enter lock
17:46:37.452 IW 0 [EJB-Timer]: commit: now prepare
17:46:37.452 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:37.452 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hh docStoreSegment=3D=
=5F2hh docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D155 numBufDelTerms=3D0
17:46:37.452 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753
17:46:37.452 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hh numDocs=
=3D155
17:46:37.452 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hh numDocs=3D155
17:46:37.463 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
15190 docs/MB=3D755.283 new/old=3D32.38%
17:46:37.463 IFD [EJB-Timer]: now checkpoint "segments=5F28k" [11 segments =
; isCommit =3D false]
17:46:37.466 IFD [EJB-Timer]: now checkpoint "segments=5F28k" [11 segments =
; isCommit =3D false]
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.fdt"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.fdx"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.tis"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.fnm"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.nrm"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.frq"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.prx"
17:46:37.466 IFD [EJB-Timer]: delete "=5F2hh.tii"
17:46:37.466 IFD [EJB-Timer]: now checkpoint "segments=5F28k" [11 segments =
; isCommit =3D false]
17:46:37.466 IW 0 [EJB-Timer]: LMP: findMerges: 11 segments
17:46:37.467 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:37.467 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:37.467 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3330984: 1 segments
17:46:37.467 IW 0 [EJB-Timer]: CMS: now merge
17:46:37.467 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155
17:46:37.467 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:37.467 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:37.467 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 changeCount=3D8846
17:46:37.467 IW 0 [EJB-Timer]: now sync =5F2hh.cfs
17:46:37.502 IW 0 [EJB-Timer]: now sync =5F2hf.cfs
17:46:37.565 IW 0 [EJB-Timer]: done all syncs
17:46:37.565 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:37.567 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28l"
17:46:37.567 IFD [EJB-Timer]: now checkpoint "segments=5F28l" [11 segments =
; isCommit =3D true]
17:46:37.567 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28k"
17:46:37.567 IFD [EJB-Timer]: delete "=5F2h3.cfs"
17:46:37.568 IFD [EJB-Timer]: delete "=5F2h7.cfs"
17:46:37.568 IFD [EJB-Timer]: delete "=5F2fv.cfs"
17:46:37.569 IFD [EJB-Timer]: delete "=5F2h8.cfs"
17:46:37.569 IFD [EJB-Timer]: delete "=5F2hb.cfs"
17:46:37.570 IFD [EJB-Timer]: delete "=5F2en.cfs"
17:46:37.571 IFD [EJB-Timer]: delete "=5F2h9.cfs"
17:46:37.571 IFD [EJB-Timer]: delete "=5F2ey.cfs"
17:46:37.571 IFD [EJB-Timer]: delete "=5F2gs.cfs"
17:46:37.572 IFD [EJB-Timer]: delete "=5F2gh.cfs"
17:46:37.572 IFD [EJB-Timer]: delete "=5F2hd.cfs"
17:46:37.573 IFD [EJB-Timer]: delete "=5F2ha.cfs"
17:46:37.573 IFD [EJB-Timer]: delete "=5F2g6.cfs"
17:46:37.573 IFD [EJB-Timer]: delete "=5F2hc.cfs"
17:46:37.573 IFD [EJB-Timer]: delete "segments=5F28k"
17:46:37.574 IFD [EJB-Timer]: delete "=5F2h5.cfs"
17:46:37.574 IFD [EJB-Timer]: delete "=5F2f9.cfs"
17:46:37.574 IFD [EJB-Timer]: delete "=5F2h4.cfs"
17:46:37.574 IFD [EJB-Timer]: delete "=5F2h6.cfs"
17:46:37.575 IFD [EJB-Timer]: delete "=5F2fk.cfs"
17:46:37.575 IW 0 [EJB-Timer]: commit: done
17:46:38.463 IW 0 [EJB-Timer]: commit: start
17:46:38.463 IW 0 [EJB-Timer]: commit: enter lock
17:46:38.463 IW 0 [EJB-Timer]: commit: now prepare
17:46:38.463 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:38.463 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hi docStoreSegment=3D=
=5F2hi docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D168 numBufDelTerms=3D0
17:46:38.463 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155
17:46:38.463 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hi numDocs=
=3D168
17:46:38.463 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hi numDocs=3D168
17:46:38.502 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
31875 docs/MB=3D759.723 new/old=3D33.154%
17:46:38.502 IFD [EJB-Timer]: now checkpoint "segments=5F28l" [12 segments =
; isCommit =3D false]
17:46:38.502 IFD [EJB-Timer]: now checkpoint "segments=5F28l" [12 segments =
; isCommit =3D false]
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.prx"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.fnm"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.tis"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.fdt"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.tii"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.frq"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.fdx"
17:46:38.502 IFD [EJB-Timer]: delete "=5F2hi.nrm"
17:46:38.502 IFD [EJB-Timer]: now checkpoint "segments=5F28l" [12 segments =
; isCommit =3D false]
17:46:38.502 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:46:38.502 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:38.502 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:38.502 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 2 segments
17:46:38.502 IW 0 [EJB-Timer]: CMS: now merge
17:46:38.502 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168
17:46:38.502 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:38.502 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:38.502 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 changeCou=
nt=3D8850
17:46:38.502 IW 0 [EJB-Timer]: now sync =5F2hi.cfs
17:46:38.518 IW 0 [EJB-Timer]: done all syncs
17:46:38.518 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:38.533 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28m"
17:46:38.533 IFD [EJB-Timer]: now checkpoint "segments=5F28m" [12 segments =
; isCommit =3D true]
17:46:38.533 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28l"
17:46:38.533 IFD [EJB-Timer]: delete "segments=5F28l"
17:46:38.533 IW 0 [EJB-Timer]: commit: done
17:46:39.449 IW 0 [EJB-Timer]: commit: start
17:46:39.449 IW 0 [EJB-Timer]: commit: enter lock
17:46:39.449 IW 0 [EJB-Timer]: commit: now prepare
17:46:39.449 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:39.449 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hj docStoreSegment=3D=
=5F2hj docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D140 numBufDelTerms=3D0
17:46:39.449 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168
17:46:39.449 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hj numDocs=
=3D140
17:46:39.449 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hj numDocs=3D140
17:46:39.459 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D629760 newFlushedSize=3D1=
94794 docs/MB=3D753.62 new/old=3D30.931%
17:46:39.459 IFD [EJB-Timer]: now checkpoint "segments=5F28m" [13 segments =
; isCommit =3D false]
17:46:39.460 IFD [EJB-Timer]: now checkpoint "segments=5F28m" [13 segments =
; isCommit =3D false]
17:46:39.460 IFD [EJB-Timer]: delete "=5F2hj.tis"
17:46:39.460 IFD [EJB-Timer]: delete "=5F2hj.frq"
17:46:39.460 IFD [EJB-Timer]: delete "=5F2hj.prx"
17:46:39.461 IFD [EJB-Timer]: delete "=5F2hj.fnm"
17:46:39.461 IFD [EJB-Timer]: delete "=5F2hj.fdx"
17:46:39.461 IFD [EJB-Timer]: delete "=5F2hj.nrm"
17:46:39.461 IFD [EJB-Timer]: delete "=5F2hj.fdt"
17:46:39.461 IFD [EJB-Timer]: delete "=5F2hj.tii"
17:46:39.461 IFD [EJB-Timer]: now checkpoint "segments=5F28m" [13 segments =
; isCommit =3D false]
17:46:39.461 IW 0 [EJB-Timer]: LMP: findMerges: 13 segments
17:46:39.461 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:39.461 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:39.461 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 3 segments
17:46:39.461 IW 0 [EJB-Timer]: CMS: now merge
17:46:39.461 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140
17:46:39.461 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:39.461 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:39.461 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 changeCount=3D8854
17:46:39.461 IW 0 [EJB-Timer]: now sync =5F2hj.cfs
17:46:39.502 IW 0 [EJB-Timer]: done all syncs
17:46:39.502 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:39.518 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28n"
17:46:39.518 IFD [EJB-Timer]: now checkpoint "segments=5F28n" [13 segments =
; isCommit =3D true]
17:46:39.518 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28m"
17:46:39.518 IFD [EJB-Timer]: delete "segments=5F28m"
17:46:39.518 IW 0 [EJB-Timer]: commit: done
17:46:40.448 IW 0 [EJB-Timer]: commit: start
17:46:40.448 IW 0 [EJB-Timer]: commit: enter lock
17:46:40.448 IW 0 [EJB-Timer]: commit: now prepare
17:46:40.448 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:40.448 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hk docStoreSegment=3D=
=5F2hk docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:46:40.448 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40
17:46:40.448 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hk numDocs=
=3D154
17:46:40.448 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hk numDocs=3D154
17:46:40.456 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13711 docs/MB=3D755.603 new/old=3D32.157%
17:46:40.456 IFD [EJB-Timer]: now checkpoint "segments=5F28n" [14 segments =
; isCommit =3D false]
17:46:40.457 IFD [EJB-Timer]: now checkpoint "segments=5F28n" [14 segments =
; isCommit =3D false]
17:46:40.457 IFD [EJB-Timer]: delete "=5F2hk.tii"
17:46:40.457 IFD [EJB-Timer]: delete "=5F2hk.fdx"
17:46:40.457 IFD [EJB-Timer]: delete "=5F2hk.frq"
17:46:40.457 IFD [EJB-Timer]: delete "=5F2hk.fdt"
17:46:40.458 IFD [EJB-Timer]: delete "=5F2hk.nrm"
17:46:40.458 IFD [EJB-Timer]: delete "=5F2hk.tis"
17:46:40.458 IFD [EJB-Timer]: delete "=5F2hk.fnm"
17:46:40.458 IFD [EJB-Timer]: delete "=5F2hk.prx"
17:46:40.458 IFD [EJB-Timer]: now checkpoint "segments=5F28n" [14 segments =
; isCommit =3D false]
17:46:40.458 IW 0 [EJB-Timer]: LMP: findMerges: 14 segments
17:46:40.458 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:40.458 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:40.458 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 4 segments
17:46:40.458 IW 0 [EJB-Timer]: CMS: now merge
17:46:40.458 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154
17:46:40.458 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:40.458 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:40.458 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 changeCount=3D8858
17:46:40.458 IW 0 [EJB-Timer]: now sync =5F2hk.cfs
17:46:40.502 IW 0 [EJB-Timer]: done all syncs
17:46:40.502 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:40.518 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28o"
17:46:40.518 IFD [EJB-Timer]: now checkpoint "segments=5F28o" [14 segments =
; isCommit =3D true]
17:46:40.518 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28n"
17:46:40.518 IFD [EJB-Timer]: delete "segments=5F28n"
17:46:40.518 IW 0 [EJB-Timer]: commit: done
17:46:41.453 IW 0 [EJB-Timer]: commit: start
17:46:41.453 IW 0 [EJB-Timer]: commit: enter lock
17:46:41.453 IW 0 [EJB-Timer]: commit: now prepare
17:46:41.453 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:41.453 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hl docStoreSegment=3D=
=5F2hl docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:46:41.453 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154
17:46:41.453 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hl numDocs=
=3D154
17:46:41.453 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hl numDocs=3D154
17:46:41.467 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13816 docs/MB=3D755.232 new/old=3D32.173%
17:46:41.467 IFD [EJB-Timer]: now checkpoint "segments=5F28o" [15 segments =
; isCommit =3D false]
17:46:41.469 IFD [EJB-Timer]: now checkpoint "segments=5F28o" [15 segments =
; isCommit =3D false]
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.tii"
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.fdt"
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.fdx"
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.nrm"
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.frq"
17:46:41.469 IFD [EJB-Timer]: delete "=5F2hl.tis"
17:46:41.470 IFD [EJB-Timer]: delete "=5F2hl.fnm"
17:46:41.470 IFD [EJB-Timer]: delete "=5F2hl.prx"
17:46:41.470 IFD [EJB-Timer]: now checkpoint "segments=5F28o" [15 segments =
; isCommit =3D false]
17:46:41.470 IW 0 [EJB-Timer]: LMP: findMerges: 15 segments
17:46:41.470 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:41.470 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:41.470 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 5 segments
17:46:41.470 IW 0 [EJB-Timer]: CMS: now merge
17:46:41.470 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154
17:46:41.470 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:41.470 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:41.470 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 changeCount=3D8862
17:46:41.470 IW 0 [EJB-Timer]: now sync =5F2hl.cfs
17:46:41.502 IW 0 [EJB-Timer]: done all syncs
17:46:41.502 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:41.502 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28p"
17:46:41.502 IFD [EJB-Timer]: now checkpoint "segments=5F28p" [15 segments =
; isCommit =3D true]
17:46:41.502 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28o"
17:46:41.502 IFD [EJB-Timer]: delete "segments=5F28o"
17:46:41.502 IW 0 [EJB-Timer]: commit: done
17:46:42.488 IW 0 [EJB-Timer]: commit: start
17:46:42.488 IW 0 [EJB-Timer]: commit: enter lock
17:46:42.488 IW 0 [EJB-Timer]: commit: now prepare
17:46:42.488 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:42.488 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hm docStoreSegment=3D=
=5F2hm docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:46:42.488 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154
17:46:42.488 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hm numDocs=
=3D154
17:46:42.488 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hm numDocs=3D154
17:46:42.503 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13802 docs/MB=3D755.282 new/old=3D32.171%
17:46:42.503 IFD [EJB-Timer]: now checkpoint "segments=5F28p" [16 segments =
; isCommit =3D false]
17:46:42.503 IFD [EJB-Timer]: now checkpoint "segments=5F28p" [16 segments =
; isCommit =3D false]
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.nrm"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.fnm"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.prx"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.tis"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.fdx"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.fdt"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.tii"
17:46:42.503 IFD [EJB-Timer]: delete "=5F2hm.frq"
17:46:42.503 IFD [EJB-Timer]: now checkpoint "segments=5F28p" [16 segments =
; isCommit =3D false]
17:46:42.503 IW 0 [EJB-Timer]: LMP: findMerges: 16 segments
17:46:42.503 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:42.503 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:42.503 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 6 segments
17:46:42.503 IW 0 [EJB-Timer]: CMS: now merge
17:46:42.503 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154 =5F2hm:c154
17:46:42.503 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:42.503 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:42.503 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 changeCount=3D8866
17:46:42.503 IW 0 [EJB-Timer]: now sync =5F2hm.cfs
17:46:42.504 IW 0 [EJB-Timer]: done all syncs
17:46:42.504 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:42.504 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28q"
17:46:42.504 IFD [EJB-Timer]: now checkpoint "segments=5F28q" [16 segments =
; isCommit =3D true]
17:46:42.504 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28p"
17:46:42.504 IFD [EJB-Timer]: delete "segments=5F28p"
17:46:42.504 IW 0 [EJB-Timer]: commit: done
17:46:43.488 IW 0 [EJB-Timer]: commit: start
17:46:43.488 IW 0 [EJB-Timer]: commit: enter lock
17:46:43.488 IW 0 [EJB-Timer]: commit: now prepare
17:46:43.488 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:43.488 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hn docStoreSegment=3D=
=5F2hn docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:46:43.488 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154
17:46:43.488 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hn numDocs=
=3D154
17:46:43.488 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hn numDocs=3D154
17:46:43.488 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13839 docs/MB=3D755.151 new/old=3D32.177%
17:46:43.488 IFD [EJB-Timer]: now checkpoint "segments=5F28q" [17 segments =
; isCommit =3D false]
17:46:43.488 IFD [EJB-Timer]: now checkpoint "segments=5F28q" [17 segments =
; isCommit =3D false]
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.nrm"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.tis"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.prx"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.fdt"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.fnm"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.tii"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.fdx"
17:46:43.488 IFD [EJB-Timer]: delete "=5F2hn.frq"
17:46:43.488 IFD [EJB-Timer]: now checkpoint "segments=5F28q" [17 segments =
; isCommit =3D false]
17:46:43.488 IW 0 [EJB-Timer]: LMP: findMerges: 17 segments
17:46:43.488 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:43.488 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:43.488 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 7 segments
17:46:43.488 IW 0 [EJB-Timer]: CMS: now merge
17:46:43.488 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154
17:46:43.488 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:43.488 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:43.488 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 changeCount=3D8870
17:46:43.488 IW 0 [EJB-Timer]: now sync =5F2hn.cfs
17:46:43.503 IW 0 [EJB-Timer]: done all syncs
17:46:43.503 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:43.503 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28r"
17:46:43.503 IFD [EJB-Timer]: now checkpoint "segments=5F28r" [17 segments =
; isCommit =3D true]
17:46:43.503 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28q"
17:46:43.503 IFD [EJB-Timer]: delete "segments=5F28q"
17:46:43.503 IW 0 [EJB-Timer]: commit: done
17:46:44.472 IW 0 [EJB-Timer]: commit: start
17:46:44.472 IW 0 [EJB-Timer]: commit: enter lock
17:46:44.472 IW 0 [EJB-Timer]: commit: now prepare
17:46:44.472 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:44.472 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ho docStoreSegment=3D=
=5F2ho docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:46:44.472 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154
17:46:44.472 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ho numDocs=
=3D154
17:46:44.472 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ho numDocs=3D154
17:46:44.488 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13867 docs/MB=3D755.052 new/old=3D32.181%
17:46:44.488 IFD [EJB-Timer]: now checkpoint "segments=5F28r" [18 segments =
; isCommit =3D false]
17:46:44.488 IFD [EJB-Timer]: now checkpoint "segments=5F28r" [18 segments =
; isCommit =3D false]
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.prx"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.fdx"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.fdt"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.tis"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.nrm"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.fnm"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.tii"
17:46:44.488 IFD [EJB-Timer]: delete "=5F2ho.frq"
17:46:44.488 IFD [EJB-Timer]: now checkpoint "segments=5F28r" [18 segments =
; isCommit =3D false]
17:46:44.488 IW 0 [EJB-Timer]: LMP: findMerges: 18 segments
17:46:44.488 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:44.488 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:44.488 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 8 segments
17:46:44.488 IW 0 [EJB-Timer]: CMS: now merge
17:46:44.488 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154
17:46:44.488 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:44.488 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:44.488 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 changeCount=
=3D8874
17:46:44.488 IW 0 [EJB-Timer]: now sync =5F2ho.cfs
17:46:44.504 IW 0 [EJB-Timer]: done all syncs
17:46:44.504 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:44.510 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28s"
17:46:44.510 IFD [EJB-Timer]: now checkpoint "segments=5F28s" [18 segments =
; isCommit =3D true]
17:46:44.511 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28r"
17:46:44.511 IFD [EJB-Timer]: delete "segments=5F28r"
17:46:44.511 IW 0 [EJB-Timer]: commit: done
17:46:45.488 IW 0 [EJB-Timer]: commit: start
17:46:45.488 IW 0 [EJB-Timer]: commit: enter lock
17:46:45.488 IW 0 [EJB-Timer]: commit: now prepare
17:46:45.488 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:45.488 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hp docStoreSegment=3D=
=5F2hp docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:45.488 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154
17:46:45.488 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hp numDocs=
=3D152
17:46:45.488 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hp numDocs=3D152
17:46:45.503 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11007 docs/MB=3D755.347 new/old=3D31.751%
17:46:45.503 IFD [EJB-Timer]: now checkpoint "segments=5F28s" [19 segments =
; isCommit =3D false]
17:46:45.503 IFD [EJB-Timer]: now checkpoint "segments=5F28s" [19 segments =
; isCommit =3D false]
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.tis"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.nrm"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.tii"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.fdt"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.fdx"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.prx"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.frq"
17:46:45.503 IFD [EJB-Timer]: delete "=5F2hp.fnm"
17:46:45.503 IFD [EJB-Timer]: now checkpoint "segments=5F28s" [19 segments =
; isCommit =3D false]
17:46:45.503 IW 0 [EJB-Timer]: LMP: findMerges: 19 segments
17:46:45.503 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:45.503 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:45.503 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 9 segments
17:46:45.503 IW 0 [EJB-Timer]: CMS: now merge
17:46:45.503 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152
17:46:45.503 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:45.503 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:45.503 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152 =
changeCount=3D8878
17:46:45.503 IW 0 [EJB-Timer]: now sync =5F2hp.cfs
17:46:45.504 IW 0 [EJB-Timer]: done all syncs
17:46:45.504 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:45.507 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28t"
17:46:45.507 IFD [EJB-Timer]: now checkpoint "segments=5F28t" [19 segments =
; isCommit =3D true]
17:46:45.507 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28s"
17:46:45.507 IFD [EJB-Timer]: delete "segments=5F28s"
17:46:45.507 IW 0 [EJB-Timer]: commit: done
17:46:46.488 IW 0 [EJB-Timer]: commit: start
17:46:46.488 IW 0 [EJB-Timer]: commit: enter lock
17:46:46.488 IW 0 [EJB-Timer]: commit: now prepare
17:46:46.488 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:46.488 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hq docStoreSegment=3D=
=5F2hq docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:46.488 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152
17:46:46.488 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hq numDocs=
=3D152
17:46:46.488 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hq numDocs=3D152
17:46:46.488 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
10920 docs/MB=3D755.659 new/old=3D31.738%
17:46:46.488 IFD [EJB-Timer]: now checkpoint "segments=5F28t" [20 segments =
; isCommit =3D false]
17:46:46.488 IFD [EJB-Timer]: now checkpoint "segments=5F28t" [20 segments =
; isCommit =3D false]
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.tii"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.frq"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.tis"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.fnm"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.nrm"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.fdx"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.fdt"
17:46:46.488 IFD [EJB-Timer]: delete "=5F2hq.prx"
17:46:46.488 IFD [EJB-Timer]: now checkpoint "segments=5F28t" [20 segments =
; isCommit =3D false]
17:46:46.488 IW 0 [EJB-Timer]: LMP: findMerges: 20 segments
17:46:46.488 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:46.488 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:46.488 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3655105: 10 segments
17:46:46.488 IW 0 [EJB-Timer]: LMP:     10 to 20: add this merge
17:46:46.488 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2hh:c155 =5F2=
hi:c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:=
c154 =5F2hp:c152 =5F2hq:c152 [total 1 pending]
17:46:46.488 IW 0 [EJB-Timer]: CMS: now merge
17:46:46.488 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2h=
k:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152 =5F2hq:c=
152
17:46:46.488 IW 0 [EJB-Timer]: CMS:   consider merge =5F2hh:c155 =5F2hi:c16=
8 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =
=5F2hp:c152 =5F2hq:c152 into =5F2hr [mergeDocStores]
17:46:46.488 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #217]
17:46:46.488 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:46.488 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:46.488 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:c168 =5F2hj:c1=
40 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152 =
=5F2hq:c152 changeCount=3D8883
17:46:46.488 IW 0 [EJB-Timer]: now sync =5F2hq.cfs
17:46:46.488 IW 0 [Lucene Merge Thread #217]: CMS:   merge thread: start
17:46:46.503 IW 0 [Lucene Merge Thread #217]: now merge
  merge=3D=5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2h=
m:c154 =5F2hn:c154 =5F2ho:c154 =5F2hp:c152 =5F2hq:c152 into =5F2hr [mergeDo=
cStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@211cae48
  index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =
=5F2hh:c155 =5F2hi:c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F=
2hn:c154 =5F2ho:c154 =5F2hp:c152 =5F2hq:c152
17:46:46.503 IW 0 [Lucene Merge Thread #217]: merging =5F2hh:c155 =5F2hi:c1=
68 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c154 =
=5F2hp:c152 =5F2hq:c152 into =5F2hr [mergeDocStores]
17:46:46.503 IW 0 [Lucene Merge Thread #217]: merge: total 1537 docs
17:46:46.503 IW 0 [EJB-Timer]: done all syncs
17:46:46.503 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:46.504 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28u"
17:46:46.504 IFD [EJB-Timer]: now checkpoint "segments=5F28u" [20 segments =
; isCommit =3D true]
17:46:46.504 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28t"
17:46:46.504 IFD [EJB-Timer]: delete "segments=5F28t"
17:46:46.504 IW 0 [EJB-Timer]: commit: done
17:46:46.618 IW 0 [Lucene Merge Thread #217]: commitMerge: =5F2hh:c155 =5F2=
hi:c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:=
c154 =5F2hp:c152 =5F2hq:c152 into =5F2hr [mergeDocStores] index=3D=5Fwi:c16=
306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =
=5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hh:c155 =5F2hi:=
c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =5F2ho:c15=
4 =5F2hp:c152 =5F2hq:c152
17:46:46.618 IW 0 [Lucene Merge Thread #217]: commitMergeDeletes =5F2hh:c15=
5 =5F2hi:c168 =5F2hj:c140 =5F2hk:c154 =5F2hl:c154 =5F2hm:c154 =5F2hn:c154 =
=5F2ho:c154 =5F2hp:c152 =5F2hq:c152 into =5F2hr [mergeDocStores]
17:46:46.618 IFD [Lucene Merge Thread #217]: now checkpoint "segments=5F28u=
" [11 segments ; isCommit =3D false]
17:46:46.618 IFD [Lucene Merge Thread #217]: now checkpoint "segments=5F28u=
" [11 segments ; isCommit =3D false]
17:46:46.634 IFD [Lucene Merge Thread #217]: now checkpoint "segments=5F28u=
" [11 segments ; isCommit =3D false]
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.fdt"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.fnm"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.tis"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.prx"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.tii"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.frq"
17:46:46.634 IFD [Lucene Merge Thread #217]: delete "=5F2hr.fdx"
17:46:46.634 IW 0 [Lucene Merge Thread #217]: LMP: findMerges: 11 segments
17:46:46.634 IW 0 [Lucene Merge Thread #217]: LMP:   level 6.729369 to 7.47=
9369: 10 segments
17:46:46.634 IW 0 [Lucene Merge Thread #217]: LMP:     0 to 10: add this me=
rge
17:46:46.634 IW 0 [Lucene Merge Thread #217]: LMP:   level 6.2247195 to 6.3=
020597: 1 segments
17:46:46.634 IW 0 [Lucene Merge Thread #217]: CMS:   merge thread: done
17:46:47.465 IW 0 [EJB-Timer]: commit: start
17:46:47.465 IW 0 [EJB-Timer]: commit: enter lock
17:46:47.465 IW 0 [EJB-Timer]: commit: now prepare
17:46:47.465 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:47.465 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hs docStoreSegment=3D=
=5F2hs docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:47.465 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537
17:46:47.465 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hs numDocs=
=3D152
17:46:47.465 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hs numDocs=3D152
17:46:47.468 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11000 docs/MB=3D755.372 new/old=3D31.75%
17:46:47.468 IFD [EJB-Timer]: now checkpoint "segments=5F28u" [12 segments =
; isCommit =3D false]
17:46:47.470 IFD [EJB-Timer]: now checkpoint "segments=5F28u" [12 segments =
; isCommit =3D false]
17:46:47.470 IFD [EJB-Timer]: delete "=5F2hs.frq"
17:46:47.470 IFD [EJB-Timer]: delete "=5F2hs.nrm"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.fdx"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.tii"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.fnm"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.fdt"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.tis"
17:46:47.471 IFD [EJB-Timer]: delete "=5F2hs.prx"
17:46:47.472 IFD [EJB-Timer]: now checkpoint "segments=5F28u" [12 segments =
; isCommit =3D false]
17:46:47.472 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:46:47.472 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:47.472 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:47.472 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:47.472 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3245645: 1 segments
17:46:47.472 IW 0 [EJB-Timer]: CMS: now merge
17:46:47.472 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152
17:46:47.472 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:47.472 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:47.472 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 changeCo=
unt=3D8889
17:46:47.472 IW 0 [EJB-Timer]: now sync =5F2hs.cfs
17:46:47.481 IW 0 [EJB-Timer]: now sync =5F2hr.cfs
17:46:47.500 IW 0 [EJB-Timer]: done all syncs
17:46:47.500 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:47.506 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28v"
17:46:47.506 IFD [EJB-Timer]: now checkpoint "segments=5F28v" [12 segments =
; isCommit =3D true]
17:46:47.506 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28u"
17:46:47.506 IFD [EJB-Timer]: delete "=5F2ho.cfs"
17:46:47.506 IFD [EJB-Timer]: delete "segments=5F28u"
17:46:47.506 IFD [EJB-Timer]: delete "=5F2hj.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hk.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hn.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hp.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hm.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hq.cfs"
17:46:47.507 IFD [EJB-Timer]: delete "=5F2hh.cfs"
17:46:47.508 IFD [EJB-Timer]: delete "=5F2hl.cfs"
17:46:47.508 IFD [EJB-Timer]: delete "=5F2hi.cfs"
17:46:47.508 IW 0 [EJB-Timer]: commit: done
17:46:48.496 IW 0 [EJB-Timer]: commit: start
17:46:48.496 IW 0 [EJB-Timer]: commit: enter lock
17:46:48.496 IW 0 [EJB-Timer]: commit: now prepare
17:46:48.496 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:48.496 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ht docStoreSegment=3D=
=5F2ht docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:48.496 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152
17:46:48.496 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ht numDocs=
=3D152
17:46:48.496 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ht numDocs=3D152
17:46:48.512 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11132 docs/MB=3D754.9 new/old=3D31.769%
17:46:48.512 IFD [EJB-Timer]: now checkpoint "segments=5F28v" [13 segments =
; isCommit =3D false]
17:46:48.512 IFD [EJB-Timer]: now checkpoint "segments=5F28v" [13 segments =
; isCommit =3D false]
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.tii"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.fdt"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.nrm"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.prx"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.fnm"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.tis"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.fdx"
17:46:48.512 IFD [EJB-Timer]: delete "=5F2ht.frq"
17:46:48.512 IFD [EJB-Timer]: now checkpoint "segments=5F28v" [13 segments =
; isCommit =3D false]
17:46:48.512 IW 0 [EJB-Timer]: LMP: findMerges: 13 segments
17:46:48.512 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:48.512 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:48.512 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:48.512 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.324836: 2 segments
17:46:48.512 IW 0 [EJB-Timer]: CMS: now merge
17:46:48.512 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c152
17:46:48.512 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:48.512 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:48.512 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c=
152 changeCount=3D8893
17:46:48.512 IW 0 [EJB-Timer]: now sync =5F2ht.cfs
17:46:48.519 IW 0 [EJB-Timer]: done all syncs
17:46:48.519 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:48.535 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28w"
17:46:48.535 IFD [EJB-Timer]: now checkpoint "segments=5F28w" [13 segments =
; isCommit =3D true]
17:46:48.535 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28v"
17:46:48.535 IFD [EJB-Timer]: delete "segments=5F28v"
17:46:48.535 IW 0 [EJB-Timer]: commit: done
17:46:49.513 IW 0 [EJB-Timer]: commit: start
17:46:49.513 IW 0 [EJB-Timer]: commit: enter lock
17:46:49.513 IW 0 [EJB-Timer]: commit: now prepare
17:46:49.513 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:49.513 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hu docStoreSegment=3D=
=5F2hu docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:49.513 IW 0 [EJB-Timer]:   index before flush =5Fwi:c16306 =5F1kp:c17=
304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c=
152
17:46:49.513 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hu numDocs=
=3D152
17:46:49.513 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hu numDocs=3D152
17:46:49.525 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11240 docs/MB=3D754.514 new/old=3D31.786%
17:46:49.525 IFD [EJB-Timer]: now checkpoint "segments=5F28w" [14 segments =
; isCommit =3D false]
17:46:49.527 IFD [EJB-Timer]: now checkpoint "segments=5F28w" [14 segments =
; isCommit =3D false]
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.tis"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.frq"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.nrm"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.tii"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.fnm"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.fdt"
17:46:49.527 IFD [EJB-Timer]: delete "=5F2hu.prx"
17:46:49.528 IFD [EJB-Timer]: delete "=5F2hu.fdx"
17:46:49.528 IFD [EJB-Timer]: now checkpoint "segments=5F28w" [14 segments =
; isCommit =3D false]
17:46:49.528 IW 0 [EJB-Timer]: LMP: findMerges: 14 segments
17:46:49.528 IW 0 [EJB-Timer]: LMP:   level 6.729369 to 7.479369: 10 segmen=
ts
17:46:49.528 IW 0 [EJB-Timer]: LMP:     0 to 10: add this merge
17:46:49.528 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:49.528 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3250575: 3 segments
17:46:49.528 IW 0 [EJB-Timer]: CMS: now merge
17:46:49.528 IW 0 [EJB-Timer]: CMS:   index: =5Fwi:c16306 =5F1kp:c17304 =5F=
1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =5F2b9:c=
13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c152 =5F2=
hu:c152
17:46:49.528 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:49.528 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:49.528 IW 0 [EJB-Timer]: startCommit index=3D=5Fwi:c16306 =5F1kp:c173=
04 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c13861 =
=5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c=
152 =5F2hu:c152 changeCount=3D8897
17:46:49.528 IW 0 [EJB-Timer]: now sync =5F2hu.cfs
17:46:49.542 IW 0 [EJB-Timer]: done all syncs
17:46:49.542 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:49.549 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28x"
17:46:49.549 IFD [EJB-Timer]: now checkpoint "segments=5F28x" [14 segments =
; isCommit =3D true]
17:46:49.549 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28w"
17:46:49.549 IFD [EJB-Timer]: delete "segments=5F28w"
17:46:49.549 IW 0 [EJB-Timer]: commit: done
17:46:50.512 IW 0 [Lucene Merge Thread #216]: commitMerge: =5Fwi:c16306 =5F=
1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =5F286:c=
13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 into =5F2hg [mergeDocStores=
] index=3D=5Fwi:c16306 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22=
415 =5F253:c13764 =5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 =
=5F2hr:c1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152
17:46:50.512 IW 0 [Lucene Merge Thread #216]: commitMergeDeletes =5Fwi:c163=
06 =5F1kp:c17304 =5F1qk:c23216 =5F1wf:c23620 =5F220:c22415 =5F253:c13764 =
=5F286:c13861 =5F2b9:c13680 =5F2ec:c13674 =5F2hf:c13753 into =5F2hg [mergeD=
ocStores]
17:46:50.512 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28x=
" [5 segments ; isCommit =3D false]
17:46:50.512 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28x=
" [5 segments ; isCommit =3D false]
17:46:50.558 IW 0 [EJB-Timer]: commit: start
17:46:50.558 IW 0 [EJB-Timer]: commit: enter lock
17:46:50.558 IW 0 [EJB-Timer]: commit: now prepare
17:46:50.558 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:50.558 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hv docStoreSegment=3D=
=5F2hv docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D155 numBufDelTerms=3D0
17:46:50.558 IW 0 [EJB-Timer]:   index before flush =5F2hg:C171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152
17:46:50.558 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hv numDocs=
=3D155
17:46:50.559 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hv numDocs=3D155
17:46:50.602 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
15007 docs/MB=3D755.926 new/old=3D32.353%
17:46:50.602 IFD [EJB-Timer]: now checkpoint "segments=5F28x" [6 segments ;=
 isCommit =3D false]
17:46:50.602 IFD [EJB-Timer]: now checkpoint "segments=5F28x" [6 segments ;=
 isCommit =3D false]
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.tis"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.prx"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.frq"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.fdx"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.tii"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.fdt"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.fnm"
17:46:50.602 IFD [EJB-Timer]: delete "=5F2hv.nrm"
17:46:50.602 IFD [EJB-Timer]: now checkpoint "segments=5F28x" [6 segments ;=
 isCommit =3D false]
17:46:50.602 IW 0 [EJB-Timer]: LMP: findMerges: 6 segments
17:46:50.602 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:50.602 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:50.602 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3327293: 4 segments
17:46:50.602 IW 0 [EJB-Timer]: CMS: now merge
17:46:50.602 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:C171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155
17:46:50.602 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:50.602 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:50.602 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:C171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 changeCount=3D8902
17:46:50.602 IW 0 [EJB-Timer]: now sync =5F2hg.tis
17:46:51.567 IFD [Lucene Merge Thread #216]: now checkpoint "segments=5F28x=
" [6 segments ; isCommit =3D false]
17:46:51.567 IW 0 [Lucene Merge Thread #216]: LMP: findMerges: 6 segments
17:46:51.567 IW 0 [Lucene Merge Thread #216]: LMP:   level 7.591896 to 8.34=
1896: 1 segments
17:46:51.567 IW 0 [Lucene Merge Thread #216]: LMP:   level 6.2247195 to 6.3=
020597: 1 segments
17:46:51.567 IW 0 [Lucene Merge Thread #216]: LMP:   level -1.0 to 5.332729=
3: 4 segments
17:46:51.567 IW 0 [Lucene Merge Thread #216]: CMS:   merge thread: done
17:46:51.570 IW 0 [EJB-Timer]: now sync =5F2hv.cfs
17:46:51.602 IW 0 [EJB-Timer]: now sync =5F2hg.fdx
17:46:51.602 IW 0 [EJB-Timer]: now sync =5F2hg.fnm
17:46:51.602 IW 0 [EJB-Timer]: now sync =5F2hg.fdt
17:46:51.602 IW 0 [EJB-Timer]: now sync =5F2hg.tii
17:46:51.602 IW 0 [EJB-Timer]: now sync =5F2hg.frq
17:46:51.618 IW 0 [EJB-Timer]: now sync =5F2hg.prx
17:46:52.418 IW 0 [EJB-Timer]: done all syncs
17:46:52.418 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:52.434 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28y"
17:46:52.434 IFD [EJB-Timer]: now checkpoint "segments=5F28y" [6 segments ;=
 isCommit =3D true]
17:46:52.434 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28x"
17:46:52.434 IFD [EJB-Timer]: delete "=5F220.cfs"
17:46:52.434 IFD [EJB-Timer]: delete "segments=5F28x"
17:46:52.434 IFD [EJB-Timer]: delete "=5F1kp.cfs"
17:46:52.449 IFD [EJB-Timer]: delete "=5F1wf.cfs"
17:46:52.449 IFD [EJB-Timer]: delete "=5F2ec.cfs"
17:46:52.449 IFD [EJB-Timer]: delete "=5F2hf.cfs"
17:46:52.449 IFD [EJB-Timer]: delete "=5Fwi.cfs"
17:46:52.465 IFD [EJB-Timer]: delete "=5F253.cfs"
17:46:52.465 IFD [EJB-Timer]: delete "=5F1qk.cfs"
17:46:52.465 IFD [EJB-Timer]: delete "=5F286.cfs"
17:46:52.465 IFD [EJB-Timer]: delete "=5F2b9.cfs"
17:46:52.465 IW 0 [EJB-Timer]: commit: done
17:46:52.512 IW 0 [EJB-Timer]: commit: start
17:46:52.512 IW 0 [EJB-Timer]: commit: enter lock
17:46:52.512 IW 0 [EJB-Timer]: commit: now prepare
17:46:52.512 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:52.512 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hw docStoreSegment=3D=
=5F2hw docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D85 numBufDelTerms=3D0
17:46:52.512 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155
17:46:52.512 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hw numDocs=
=3D85
17:46:52.512 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hw numDocs=3D85
17:46:52.512 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D392192 newFlushedSize=3D1=
18215 docs/MB=3D753.956 new/old=3D30.142%
17:46:52.512 IFD [EJB-Timer]: now checkpoint "segments=5F28y" [7 segments ;=
 isCommit =3D false]
17:46:52.512 IFD [EJB-Timer]: now checkpoint "segments=5F28y" [7 segments ;=
 isCommit =3D false]
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.fnm"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.tii"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.prx"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.fdt"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.fdx"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.tis"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.nrm"
17:46:52.512 IFD [EJB-Timer]: delete "=5F2hw.frq"
17:46:52.512 IFD [EJB-Timer]: now checkpoint "segments=5F28y" [7 segments ;=
 isCommit =3D false]
17:46:52.512 IW 0 [EJB-Timer]: LMP: findMerges: 7 segments
17:46:52.512 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:52.512 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:52.512 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3327293: 5 segments
17:46:52.512 IW 0 [EJB-Timer]: CMS: now merge
17:46:52.512 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85
17:46:52.512 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:52.512 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:52.512 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 changeCount=
=3D8907
17:46:52.512 IW 0 [EJB-Timer]: now sync =5F2hw.cfs
17:46:52.554 IW 0 [EJB-Timer]: now sync =5F2hg.cfs
17:46:53.371 IW 0 [EJB-Timer]: done all syncs
17:46:53.371 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:53.418 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F28z"
17:46:53.418 IFD [EJB-Timer]: now checkpoint "segments=5F28z" [7 segments ;=
 isCommit =3D true]
17:46:53.418 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28y"
17:46:53.418 IFD [EJB-Timer]: delete "=5F2hg.fdx"
17:46:53.418 IFD [EJB-Timer]: delete "segments=5F28y"
17:46:53.418 IFD [EJB-Timer]: delete "=5F2hg.fnm"
17:46:53.418 IFD [EJB-Timer]: delete "=5F2hg.fdt"
17:46:53.434 IFD [EJB-Timer]: delete "=5F2hg.tii"
17:46:53.434 IFD [EJB-Timer]: delete "=5F2hg.prx"
17:46:53.434 IFD [EJB-Timer]: delete "=5F2hg.tis"
17:46:53.449 IFD [EJB-Timer]: delete "=5F2hg.frq"
17:46:53.465 IW 0 [EJB-Timer]: commit: done
17:46:53.552 IW 0 [EJB-Timer]: commit: start
17:46:53.552 IW 0 [EJB-Timer]: commit: enter lock
17:46:53.552 IW 0 [EJB-Timer]: commit: now prepare
17:46:53.552 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:53.552 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hx docStoreSegment=3D=
=5F2hx docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D417 numBufDelTerms=3D0
17:46:53.552 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85
17:46:53.552 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hx numDocs=
=3D417
17:46:53.552 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hx numDocs=3D417
17:46:53.602 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D1682432 newFlushedSize=3D=
556281 docs/MB=3D786.035 new/old=3D33.064%
17:46:53.602 IFD [EJB-Timer]: now checkpoint "segments=5F28z" [8 segments ;=
 isCommit =3D false]
17:46:53.602 IFD [EJB-Timer]: now checkpoint "segments=5F28z" [8 segments ;=
 isCommit =3D false]
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.fdt"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.prx"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.tii"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.frq"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.fdx"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.nrm"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.fnm"
17:46:53.602 IFD [EJB-Timer]: delete "=5F2hx.tis"
17:46:53.602 IFD [EJB-Timer]: now checkpoint "segments=5F28z" [8 segments ;=
 isCommit =3D false]
17:46:53.602 IW 0 [EJB-Timer]: LMP: findMerges: 8 segments
17:46:53.602 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:53.602 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:53.602 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.745401: 6 segments
17:46:53.602 IW 0 [EJB-Timer]: CMS: now merge
17:46:53.602 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417
17:46:53.602 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:53.602 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:53.602 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =
changeCount=3D8911
17:46:53.602 IW 0 [EJB-Timer]: now sync =5F2hx.cfs
17:46:53.618 IW 0 [EJB-Timer]: done all syncs
17:46:53.618 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:53.633 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F290"
17:46:53.633 IFD [EJB-Timer]: now checkpoint "segments=5F290" [8 segments ;=
 isCommit =3D true]
17:46:53.633 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
28z"
17:46:53.633 IFD [EJB-Timer]: delete "segments=5F28z"
17:46:53.633 IW 0 [EJB-Timer]: commit: done
17:46:54.513 IW 0 [EJB-Timer]: commit: start
17:46:54.513 IW 0 [EJB-Timer]: commit: enter lock
17:46:54.513 IW 0 [EJB-Timer]: commit: now prepare
17:46:54.513 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:54.513 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hy docStoreSegment=3D=
=5F2hy docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D148 numBufDelTerms=3D0
17:46:54.513 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417
17:46:54.513 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hy numDocs=
=3D148
17:46:54.513 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hy numDocs=3D148
17:46:54.513 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D647168 newFlushedSize=3D2=
05221 docs/MB=3D756.205 new/old=3D31.711%
17:46:54.513 IFD [EJB-Timer]: now checkpoint "segments=5F290" [9 segments ;=
 isCommit =3D false]
17:46:54.515 IFD [EJB-Timer]: now checkpoint "segments=5F290" [9 segments ;=
 isCommit =3D false]
17:46:54.515 IFD [EJB-Timer]: delete "=5F2hy.fnm"
17:46:54.515 IFD [EJB-Timer]: delete "=5F2hy.prx"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.fdt"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.tis"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.frq"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.fdx"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.tii"
17:46:54.516 IFD [EJB-Timer]: delete "=5F2hy.nrm"
17:46:54.516 IFD [EJB-Timer]: now checkpoint "segments=5F290" [9 segments ;=
 isCommit =3D false]
17:46:54.516 IW 0 [EJB-Timer]: LMP: findMerges: 9 segments
17:46:54.516 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:54.516 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:54.516 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.745401: 7 segments
17:46:54.516 IW 0 [EJB-Timer]: CMS: now merge
17:46:54.516 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2=
hy:c148
17:46:54.516 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:54.516 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:54.516 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =
=5F2hy:c148 changeCount=3D8915
17:46:54.517 IW 0 [EJB-Timer]: now sync =5F2hy.cfs
17:46:54.540 IW 0 [EJB-Timer]: done all syncs
17:46:54.540 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:54.547 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F291"
17:46:54.547 IFD [EJB-Timer]: now checkpoint "segments=5F291" [9 segments ;=
 isCommit =3D true]
17:46:54.547 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
290"
17:46:54.547 IFD [EJB-Timer]: delete "segments=5F290"
17:46:54.548 IW 0 [EJB-Timer]: commit: done
17:46:55.532 IW 0 [EJB-Timer]: commit: start
17:46:55.532 IW 0 [EJB-Timer]: commit: enter lock
17:46:55.532 IW 0 [EJB-Timer]: commit: now prepare
17:46:55.532 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:55.532 IW 0 [EJB-Timer]:   flush: segment=3D=5F2hz docStoreSegment=3D=
=5F2hz docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D141 numBufDelTerms=3D0
17:46:55.532 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417=
 =5F2hy:c148
17:46:55.532 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2hz numDocs=
=3D141
17:46:55.532 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2hz numDocs=3D141
17:46:55.546 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D629760 newFlushedSize=3D1=
96311 docs/MB=3D753.138 new/old=3D31.172%
17:46:55.547 IFD [EJB-Timer]: now checkpoint "segments=5F291" [10 segments =
; isCommit =3D false]
17:46:55.548 IFD [EJB-Timer]: now checkpoint "segments=5F291" [10 segments =
; isCommit =3D false]
17:46:55.548 IFD [EJB-Timer]: delete "=5F2hz.fdt"
17:46:55.548 IFD [EJB-Timer]: delete "=5F2hz.tii"
17:46:55.548 IFD [EJB-Timer]: delete "=5F2hz.fnm"
17:46:55.548 IFD [EJB-Timer]: delete "=5F2hz.nrm"
17:46:55.548 IFD [EJB-Timer]: delete "=5F2hz.frq"
17:46:55.549 IFD [EJB-Timer]: delete "=5F2hz.fdx"
17:46:55.549 IFD [EJB-Timer]: delete "=5F2hz.prx"
17:46:55.549 IFD [EJB-Timer]: delete "=5F2hz.tis"
17:46:55.549 IFD [EJB-Timer]: now checkpoint "segments=5F291" [10 segments =
; isCommit =3D false]
17:46:55.549 IW 0 [EJB-Timer]: LMP: findMerges: 10 segments
17:46:55.549 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:55.549 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:55.549 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.745401: 8 segments
17:46:55.549 IW 0 [EJB-Timer]: CMS: now merge
17:46:55.549 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2=
hy:c148 =5F2hz:c141
17:46:55.549 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:55.549 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:55.549 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =
=5F2hy:c148 =5F2hz:c141 changeCount=3D8919
17:46:55.549 IW 0 [EJB-Timer]: now sync =5F2hz.cfs
17:46:55.561 IW 0 [EJB-Timer]: done all syncs
17:46:55.561 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:55.567 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F292"
17:46:55.567 IFD [EJB-Timer]: now checkpoint "segments=5F292" [10 segments =
; isCommit =3D true]
17:46:55.567 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
291"
17:46:55.567 IFD [EJB-Timer]: delete "segments=5F291"
17:46:55.567 IW 0 [EJB-Timer]: commit: done
17:46:56.550 IW 0 [EJB-Timer]: commit: start
17:46:56.550 IW 0 [EJB-Timer]: commit: enter lock
17:46:56.550 IW 0 [EJB-Timer]: commit: now prepare
17:46:56.550 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:56.550 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i0 docStoreSegment=3D=
=5F2i0 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D156 numBufDelTerms=3D0
17:46:56.550 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417=
 =5F2hy:c148 =5F2hz:c141
17:46:56.550 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i0 numDocs=
=3D156
17:46:56.550 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i0 numDocs=3D156
17:46:56.563 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
16228 docs/MB=3D756.506 new/old=3D32.536%
17:46:56.563 IFD [EJB-Timer]: now checkpoint "segments=5F292" [11 segments =
; isCommit =3D false]
17:46:56.566 IFD [EJB-Timer]: now checkpoint "segments=5F292" [11 segments =
; isCommit =3D false]
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.tii"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.prx"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.fnm"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.tis"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.fdx"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.fdt"
17:46:56.566 IFD [EJB-Timer]: delete "=5F2i0.nrm"
17:46:56.567 IFD [EJB-Timer]: delete "=5F2i0.frq"
17:46:56.567 IFD [EJB-Timer]: now checkpoint "segments=5F292" [11 segments =
; isCommit =3D false]
17:46:56.567 IW 0 [EJB-Timer]: LMP: findMerges: 11 segments
17:46:56.567 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:56.567 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:56.567 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.745401: 9 segments
17:46:56.567 IW 0 [EJB-Timer]: CMS: now merge
17:46:56.567 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2=
hy:c148 =5F2hz:c141 =5F2i0:c156
17:46:56.567 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:56.567 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:56.567 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =
=5F2hy:c148 =5F2hz:c141 =5F2i0:c156 changeCount=3D8923
17:46:56.567 IW 0 [EJB-Timer]: now sync =5F2i0.cfs
17:46:56.602 IW 0 [EJB-Timer]: done all syncs
17:46:56.602 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:56.602 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F293"
17:46:56.602 IFD [EJB-Timer]: now checkpoint "segments=5F293" [11 segments =
; isCommit =3D true]
17:46:56.602 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
292"
17:46:56.602 IFD [EJB-Timer]: delete "segments=5F292"
17:46:56.617 IW 0 [EJB-Timer]: commit: done
17:46:57.552 IW 0 [EJB-Timer]: commit: start
17:46:57.552 IW 0 [EJB-Timer]: commit: enter lock
17:46:57.552 IW 0 [EJB-Timer]: commit: now prepare
17:46:57.552 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:57.552 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i1 docStoreSegment=3D=
=5F2i1 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:46:57.552 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417=
 =5F2hy:c148 =5F2hz:c141 =5F2i0:c156
17:46:57.552 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i1 numDocs=
=3D152
17:46:57.552 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i1 numDocs=3D152
17:46:57.568 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11290 docs/MB=3D754.336 new/old=3D31.793%
17:46:57.568 IFD [EJB-Timer]: now checkpoint "segments=5F293" [12 segments =
; isCommit =3D false]
17:46:57.570 IFD [EJB-Timer]: now checkpoint "segments=5F293" [12 segments =
; isCommit =3D false]
17:46:57.570 IFD [EJB-Timer]: delete "=5F2i1.nrm"
17:46:57.570 IFD [EJB-Timer]: delete "=5F2i1.tis"
17:46:57.570 IFD [EJB-Timer]: delete "=5F2i1.tii"
17:46:57.570 IFD [EJB-Timer]: delete "=5F2i1.prx"
17:46:57.570 IFD [EJB-Timer]: delete "=5F2i1.fdt"
17:46:57.571 IFD [EJB-Timer]: delete "=5F2i1.fnm"
17:46:57.571 IFD [EJB-Timer]: delete "=5F2i1.fdx"
17:46:57.571 IFD [EJB-Timer]: delete "=5F2i1.frq"
17:46:57.571 IFD [EJB-Timer]: now checkpoint "segments=5F293" [12 segments =
; isCommit =3D false]
17:46:57.571 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:46:57.571 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:46:57.571 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:57.571 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3020597: 1 segme=
nts
17:46:57.571 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.745401: 10 segments
17:46:57.571 IW 0 [EJB-Timer]: LMP:     2 to 12: add this merge
17:46:57.571 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2hs:c152 =5F2=
ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =5F2hz:c=
141 =5F2i0:c156 =5F2i1:c152 [total 1 pending]
17:46:57.571 IW 0 [EJB-Timer]: CMS: now merge
17:46:57.571 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2=
hy:c148 =5F2hz:c141 =5F2i0:c156 =5F2i1:c152
17:46:57.571 IW 0 [EJB-Timer]: CMS:   consider merge =5F2hs:c152 =5F2ht:c15=
2 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =5F2hz:c141 =
=5F2i0:c156 =5F2i1:c152 into =5F2i2 [mergeDocStores]
17:46:57.571 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #218]
17:46:57.571 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:57.571 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:57.586 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =
=5F2hy:c148 =5F2hz:c141 =5F2i0:c156 =5F2i1:c152 changeCount=3D8928
17:46:57.586 IW 0 [EJB-Timer]: now sync =5F2i1.cfs
17:46:57.586 IW 0 [Lucene Merge Thread #218]: CMS:   merge thread: start
17:46:57.602 IW 0 [Lucene Merge Thread #218]: now merge
  merge=3D=5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx=
:c417 =5F2hy:c148 =5F2hz:c141 =5F2i0:c156 =5F2i1:c152 into =5F2i2 [mergeDoc=
Stores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@6b7c45ea
  index=3D=5F2hg:c171593 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =
=5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =5F2hz:c141 =5F2i0:c156 =5F2=
i1:c152
17:46:57.602 IW 0 [Lucene Merge Thread #218]: merging =5F2hs:c152 =5F2ht:c1=
52 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =5F2hz:c141 =
=5F2i0:c156 =5F2i1:c152 into =5F2i2 [mergeDocStores]
17:46:57.602 IW 0 [Lucene Merge Thread #218]: merge: total 1710 docs
17:46:57.633 IW 0 [EJB-Timer]: done all syncs
17:46:57.633 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:57.649 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F294"
17:46:57.649 IFD [EJB-Timer]: now checkpoint "segments=5F294" [12 segments =
; isCommit =3D true]
17:46:57.649 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
293"
17:46:57.649 IFD [EJB-Timer]: delete "segments=5F293"
17:46:57.649 IW 0 [EJB-Timer]: commit: done
17:46:57.692 IW 0 [Lucene Merge Thread #218]: commitMerge: =5F2hs:c152 =5F2=
ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =5F2hz:c=
141 =5F2i0:c156 =5F2i1:c152 into =5F2i2 [mergeDocStores] index=3D=5F2hg:c17=
1593 =5F2hr:c1537 =5F2hs:c152 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c8=
5 =5F2hx:c417 =5F2hy:c148 =5F2hz:c141 =5F2i0:c156 =5F2i1:c152
17:46:57.692 IW 0 [Lucene Merge Thread #218]: commitMergeDeletes =5F2hs:c15=
2 =5F2ht:c152 =5F2hu:c152 =5F2hv:c155 =5F2hw:c85 =5F2hx:c417 =5F2hy:c148 =
=5F2hz:c141 =5F2i0:c156 =5F2i1:c152 into =5F2i2 [mergeDocStores]
17:46:57.692 IFD [Lucene Merge Thread #218]: now checkpoint "segments=5F294=
" [3 segments ; isCommit =3D false]
17:46:57.693 IFD [Lucene Merge Thread #218]: now checkpoint "segments=5F294=
" [3 segments ; isCommit =3D false]
17:46:57.698 IFD [Lucene Merge Thread #218]: now checkpoint "segments=5F294=
" [3 segments ; isCommit =3D false]
17:46:57.698 IFD [Lucene Merge Thread #218]: delete "=5F2i2.tis"
17:46:57.698 IFD [Lucene Merge Thread #218]: delete "=5F2i2.fnm"
17:46:57.698 IFD [Lucene Merge Thread #218]: delete "=5F2i2.fdx"
17:46:57.698 IFD [Lucene Merge Thread #218]: delete "=5F2i2.prx"
17:46:57.698 IFD [Lucene Merge Thread #218]: delete "=5F2i2.frq"
17:46:57.699 IFD [Lucene Merge Thread #218]: delete "=5F2i2.fdt"
17:46:57.699 IFD [Lucene Merge Thread #218]: delete "=5F2i2.tii"
17:46:57.699 IW 0 [Lucene Merge Thread #218]: LMP: findMerges: 3 segments
17:46:57.699 IW 0 [Lucene Merge Thread #218]: LMP:   level 7.591896 to 8.34=
1896: 1 segments
17:46:57.699 IW 0 [Lucene Merge Thread #218]: LMP:   level 6.2247195 to 6.3=
44726: 2 segments
17:46:57.699 IW 0 [Lucene Merge Thread #218]: CMS:   merge thread: done
17:46:58.549 IW 0 [EJB-Timer]: commit: start
17:46:58.549 IW 0 [EJB-Timer]: commit: enter lock
17:46:58.549 IW 0 [EJB-Timer]: commit: now prepare
17:46:58.549 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:58.549 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i3 docStoreSegment=3D=
=5F2i3 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D161 numBufDelTerms=3D0
17:46:58.549 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710
17:46:58.549 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i3 numDocs=
=3D161
17:46:58.549 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i3 numDocs=3D161
17:46:58.565 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
27668 docs/MB=3D741.522 new/old=3D32.552%
17:46:58.565 IFD [EJB-Timer]: now checkpoint "segments=5F294" [4 segments ;=
 isCommit =3D false]
17:46:58.565 IFD [EJB-Timer]: now checkpoint "segments=5F294" [4 segments ;=
 isCommit =3D false]
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.fdt"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.tii"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.frq"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.fdx"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.nrm"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.tis"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.prx"
17:46:58.565 IFD [EJB-Timer]: delete "=5F2i3.fnm"
17:46:58.565 IFD [EJB-Timer]: now checkpoint "segments=5F294" [4 segments ;=
 isCommit =3D false]
17:46:58.565 IW 0 [EJB-Timer]: LMP: findMerges: 4 segments
17:46:58.565 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:58.565 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:46:58.565 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3575635: 1 segments
17:46:58.565 IW 0 [EJB-Timer]: CMS: now merge
17:46:58.565 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161
17:46:58.565 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:58.565 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:58.565 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 changeCount=3D8934
17:46:58.565 IW 0 [EJB-Timer]: now sync =5F2i3.cfs
17:46:58.580 IW 0 [EJB-Timer]: now sync =5F2i2.cfs
17:46:58.580 IW 0 [EJB-Timer]: done all syncs
17:46:58.580 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:58.580 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F295"
17:46:58.580 IFD [EJB-Timer]: now checkpoint "segments=5F295" [4 segments ;=
 isCommit =3D true]
17:46:58.580 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
294"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hw.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hx.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2i0.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hy.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hv.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hs.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hz.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "segments=5F294"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2i1.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2ht.cfs"
17:46:58.580 IFD [EJB-Timer]: delete "=5F2hu.cfs"
17:46:58.580 IW 0 [EJB-Timer]: commit: done
17:46:59.565 IW 0 [EJB-Timer]: commit: start
17:46:59.565 IW 0 [EJB-Timer]: commit: enter lock
17:46:59.565 IW 0 [EJB-Timer]: commit: now prepare
17:46:59.565 IW 0 [EJB-Timer]: prepareCommit: flush
17:46:59.565 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i4 docStoreSegment=3D=
=5F2i4 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D145 numBufDelTerms=3D0
17:46:59.565 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161
17:46:59.565 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i4 numDocs=
=3D145
17:46:59.565 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i4 numDocs=3D145
17:46:59.565   purge field=3DMETRICS.METRIC=5F1.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F0.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F1.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F2.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F3.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F4.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F5.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F6.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F0.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F7.METRIC=5FUNIT
17:46:59.565   purge field=3DMETRICS.METRIC=5F1.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F2.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F3.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F4.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F5.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F6.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F6.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F7.METRIC=5FNAME
17:46:59.565   purge field=3DMETRICS.METRIC=5F2.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F7.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F3.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRIC=5FAGGREGATION=5FMARKER
17:46:59.565   purge field=3DMETRICS.METRIC=5F4.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F0.METRIC=5FVALUE
17:46:59.565   purge field=3DMETRICS.METRIC=5F5.METRIC=5FVALUE
17:46:59.565 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D647168 newFlushedSize=3D2=
01843 docs/MB=3D753.276 new/old=3D31.189%
17:46:59.565 IFD [EJB-Timer]: now checkpoint "segments=5F295" [5 segments ;=
 isCommit =3D false]
17:46:59.565 IFD [EJB-Timer]: now checkpoint "segments=5F295" [5 segments ;=
 isCommit =3D false]
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.fdt"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.frq"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.tis"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.nrm"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.fnm"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.tii"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.fdx"
17:46:59.565 IFD [EJB-Timer]: delete "=5F2i4.prx"
17:46:59.565 IFD [EJB-Timer]: now checkpoint "segments=5F295" [5 segments ;=
 isCommit =3D false]
17:46:59.565 IW 0 [EJB-Timer]: LMP: findMerges: 5 segments
17:46:59.565 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:46:59.565 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:46:59.565 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3575635: 2 segments
17:46:59.565 IW 0 [EJB-Timer]: CMS: now merge
17:46:59.565 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145
17:46:59.565 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:46:59.565 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:46:59.565 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 changeCount=3D8938
17:46:59.580 IW 0 [EJB-Timer]: now sync =5F2i4.cfs
17:46:59.612 IW 0 [EJB-Timer]: done all syncs
17:46:59.612 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:46:59.613 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F296"
17:46:59.613 IFD [EJB-Timer]: now checkpoint "segments=5F296" [5 segments ;=
 isCommit =3D true]
17:46:59.613 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
295"
17:46:59.613 IFD [EJB-Timer]: delete "segments=5F295"
17:46:59.613 IW 0 [EJB-Timer]: commit: done
17:47:00.581 IW 0 [EJB-Timer]: commit: start
17:47:00.581 IW 0 [EJB-Timer]: commit: enter lock
17:47:00.581 IW 0 [EJB-Timer]: commit: now prepare
17:47:00.581 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:00.581 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i5 docStoreSegment=3D=
=5F2i5 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:47:00.581 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145
17:47:00.581 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i5 numDocs=
=3D154
17:47:00.581 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i5 numDocs=3D154
17:47:00.596 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13937 docs/MB=3D754.805 new/old=3D32.192%
17:47:00.596 IFD [EJB-Timer]: now checkpoint "segments=5F296" [6 segments ;=
 isCommit =3D false]
17:47:00.596 IFD [EJB-Timer]: now checkpoint "segments=5F296" [6 segments ;=
 isCommit =3D false]
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.fdx"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.fdt"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.fnm"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.tii"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.prx"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.frq"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.tis"
17:47:00.596 IFD [EJB-Timer]: delete "=5F2i5.nrm"
17:47:00.596 IFD [EJB-Timer]: now checkpoint "segments=5F296" [6 segments ;=
 isCommit =3D false]
17:47:00.596 IW 0 [EJB-Timer]: LMP: findMerges: 6 segments
17:47:00.596 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:00.596 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:00.596 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3575635: 3 segments
17:47:00.596 IW 0 [EJB-Timer]: CMS: now merge
17:47:00.596 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154
17:47:00.596 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:00.596 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:00.596 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 changeCount=3D8942
17:47:00.596 IW 0 [EJB-Timer]: now sync =5F2i5.cfs
17:47:00.616 IW 0 [EJB-Timer]: done all syncs
17:47:00.616 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:00.622 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F297"
17:47:00.622 IFD [EJB-Timer]: now checkpoint "segments=5F297" [6 segments ;=
 isCommit =3D true]
17:47:00.622 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
296"
17:47:00.622 IFD [EJB-Timer]: delete "segments=5F296"
17:47:00.622 IW 0 [EJB-Timer]: commit: done
17:47:01.604 IW 0 [EJB-Timer]: commit: start
17:47:01.604 IW 0 [EJB-Timer]: commit: enter lock
17:47:01.604 IW 0 [EJB-Timer]: commit: now prepare
17:47:01.604 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:01.604 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i6 docStoreSegment=3D=
=5F2i6 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D159 numBufDelTerms=3D0
17:47:01.604 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154
17:47:01.604 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i6 numDocs=
=3D159
17:47:01.604 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i6 numDocs=3D159
17:47:01.612 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D681984 newFlushedSize=3D2=
20124 docs/MB=3D757.408 new/old=3D32.277%
17:47:01.613 IFD [EJB-Timer]: now checkpoint "segments=5F297" [7 segments ;=
 isCommit =3D false]
17:47:01.614 IFD [EJB-Timer]: now checkpoint "segments=5F297" [7 segments ;=
 isCommit =3D false]
17:47:01.614 IFD [EJB-Timer]: delete "=5F2i6.fnm"
17:47:01.615 IFD [EJB-Timer]: delete "=5F2i6.fdt"
17:47:01.615 IFD [EJB-Timer]: delete "=5F2i6.tii"
17:47:01.615 IFD [EJB-Timer]: delete "=5F2i6.fdx"
17:47:01.615 IFD [EJB-Timer]: delete "=5F2i6.prx"
17:47:01.616 IFD [EJB-Timer]: delete "=5F2i6.tis"
17:47:01.616 IFD [EJB-Timer]: delete "=5F2i6.nrm"
17:47:01.616 IFD [EJB-Timer]: delete "=5F2i6.frq"
17:47:01.616 IFD [EJB-Timer]: now checkpoint "segments=5F297" [7 segments ;=
 isCommit =3D false]
17:47:01.617 IW 0 [EJB-Timer]: LMP: findMerges: 7 segments
17:47:01.617 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:01.617 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:01.617 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3575635: 4 segments
17:47:01.617 IW 0 [EJB-Timer]: CMS: now merge
17:47:01.617 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159
17:47:01.617 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:01.617 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:01.617 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 changeCoun=
t=3D8946
17:47:01.617 IW 0 [EJB-Timer]: now sync =5F2i6.cfs
17:47:01.629 IW 0 [EJB-Timer]: done all syncs
17:47:01.629 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:01.703 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F298"
17:47:01.703 IFD [EJB-Timer]: now checkpoint "segments=5F298" [7 segments ;=
 isCommit =3D true]
17:47:01.703 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
297"
17:47:01.703 IFD [EJB-Timer]: delete "segments=5F297"
17:47:01.703 IW 0 [EJB-Timer]: commit: done
17:47:02.633 maxFieldLength 10000 reached for field ALL, ignoring following=
 tokens
17:47:02.633 maxFieldLength 10000 reached for field MESSAGE, ignoring follo=
wing tokens
17:47:02.664 IW 0 [EJB-Timer]: commit: start
17:47:02.664 IW 0 [EJB-Timer]: commit: enter lock
17:47:02.664 IW 0 [EJB-Timer]: commit: now prepare
17:47:02.664 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:02.664 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i7 docStoreSegment=3D=
=5F2i7 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:47:02.664 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159
17:47:02.664 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i7 numDocs=
=3D154
17:47:02.664 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i7 numDocs=3D154
17:47:02.665 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D815104 newFlushedSize=3D4=
60259 docs/MB=3D350.847 new/old=3D56.466%
17:47:02.665 IFD [EJB-Timer]: now checkpoint "segments=5F298" [8 segments ;=
 isCommit =3D false]
17:47:02.665 IFD [EJB-Timer]: now checkpoint "segments=5F298" [8 segments ;=
 isCommit =3D false]
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.frq"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.prx"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.fnm"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.tii"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.nrm"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.fdt"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.tis"
17:47:02.665 IFD [EJB-Timer]: delete "=5F2i7.fdx"
17:47:02.665 IFD [EJB-Timer]: now checkpoint "segments=5F298" [8 segments ;=
 isCommit =3D false]
17:47:02.665 IW 0 [EJB-Timer]: LMP: findMerges: 8 segments
17:47:02.665 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:02.665 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:02.665 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 5 segments
17:47:02.665 IW 0 [EJB-Timer]: CMS: now merge
17:47:02.665 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154
17:47:02.665 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:02.665 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:02.665 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 changeCount=3D8950
17:47:02.665 IW 0 [EJB-Timer]: now sync =5F2i7.cfs
17:47:02.677 IW 0 [EJB-Timer]: done all syncs
17:47:02.677 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:02.684 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F299"
17:47:02.684 IFD [EJB-Timer]: now checkpoint "segments=5F299" [8 segments ;=
 isCommit =3D true]
17:47:02.684 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
298"
17:47:02.684 IFD [EJB-Timer]: delete "segments=5F298"
17:47:02.684 IW 0 [EJB-Timer]: commit: done
17:47:03.672 IW 0 [EJB-Timer]: commit: start
17:47:03.672 IW 0 [EJB-Timer]: commit: enter lock
17:47:03.672 IW 0 [EJB-Timer]: commit: now prepare
17:47:03.672 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:03.672 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i8 docStoreSegment=3D=
=5F2i8 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:03.672 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c1=
54
17:47:03.672 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i8 numDocs=
=3D152
17:47:03.672 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i8 numDocs=3D152
17:47:03.688 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11130 docs/MB=3D754.907 new/old=3D31.769%
17:47:03.688 IFD [EJB-Timer]: now checkpoint "segments=5F299" [9 segments ;=
 isCommit =3D false]
17:47:03.688 IFD [EJB-Timer]: now checkpoint "segments=5F299" [9 segments ;=
 isCommit =3D false]
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.tii"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.prx"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.fdx"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.fdt"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.fnm"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.frq"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.tis"
17:47:03.688 IFD [EJB-Timer]: delete "=5F2i8.nrm"
17:47:03.688 IFD [EJB-Timer]: now checkpoint "segments=5F299" [9 segments ;=
 isCommit =3D false]
17:47:03.688 IW 0 [EJB-Timer]: LMP: findMerges: 9 segments
17:47:03.688 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:03.688 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:03.688 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 6 segments
17:47:03.688 IW 0 [EJB-Timer]: CMS: now merge
17:47:03.688 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =
=5F2i8:c152
17:47:03.688 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:03.688 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:03.688 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 =5F2i8:c152 changeCount=3D8954
17:47:03.688 IW 0 [EJB-Timer]: now sync =5F2i8.cfs
17:47:03.703 IW 0 [EJB-Timer]: done all syncs
17:47:03.703 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:03.704 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29a"
17:47:03.704 IFD [EJB-Timer]: now checkpoint "segments=5F29a" [9 segments ;=
 isCommit =3D true]
17:47:03.704 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
299"
17:47:03.704 IFD [EJB-Timer]: delete "segments=5F299"
17:47:03.704 IW 0 [EJB-Timer]: commit: done
17:47:04.656 IW 0 [EJB-Timer]: commit: start
17:47:04.656 IW 0 [EJB-Timer]: commit: enter lock
17:47:04.656 IW 0 [EJB-Timer]: commit: now prepare
17:47:04.656 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:04.656 IW 0 [EJB-Timer]:   flush: segment=3D=5F2i9 docStoreSegment=3D=
=5F2i9 docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:04.656 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c1=
54 =5F2i8:c152
17:47:04.656 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2i9 numDocs=
=3D152
17:47:04.656 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2i9 numDocs=3D152
17:47:04.669 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11165 docs/MB=3D754.782 new/old=3D31.774%
17:47:04.669 IFD [EJB-Timer]: now checkpoint "segments=5F29a" [10 segments =
; isCommit =3D false]
17:47:04.671 IFD [EJB-Timer]: now checkpoint "segments=5F29a" [10 segments =
; isCommit =3D false]
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.fnm"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.nrm"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.prx"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.tii"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.frq"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.fdx"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.tis"
17:47:04.671 IFD [EJB-Timer]: delete "=5F2i9.fdt"
17:47:04.686 IFD [EJB-Timer]: now checkpoint "segments=5F29a" [10 segments =
; isCommit =3D false]
17:47:04.686 IW 0 [EJB-Timer]: LMP: findMerges: 10 segments
17:47:04.686 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:04.686 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:04.686 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 7 segments
17:47:04.686 IW 0 [EJB-Timer]: CMS: now merge
17:47:04.686 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =
=5F2i8:c152 =5F2i9:c152
17:47:04.686 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:04.686 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:04.686 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 =5F2i8:c152 =5F2i9:c152 changeCount=3D8958
17:47:04.686 IW 0 [EJB-Timer]: now sync =5F2i9.cfs
17:47:04.718 IW 0 [EJB-Timer]: done all syncs
17:47:04.718 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:04.718 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29b"
17:47:04.718 IFD [EJB-Timer]: now checkpoint "segments=5F29b" [10 segments =
; isCommit =3D true]
17:47:04.718 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29a"
17:47:04.718 IFD [EJB-Timer]: delete "segments=5F29a"
17:47:04.718 IW 0 [EJB-Timer]: commit: done
17:47:05.665 IW 0 [EJB-Timer]: commit: start
17:47:05.665 IW 0 [EJB-Timer]: commit: enter lock
17:47:05.665 IW 0 [EJB-Timer]: commit: now prepare
17:47:05.665 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:05.665 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ia docStoreSegment=3D=
=5F2ia docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:05.665 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c1=
54 =5F2i8:c152 =5F2i9:c152
17:47:05.665 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ia numDocs=
=3D152
17:47:05.665 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ia numDocs=3D152
17:47:05.680 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
10970 docs/MB=3D755.48 new/old=3D31.745%
17:47:05.680 IFD [EJB-Timer]: now checkpoint "segments=5F29b" [11 segments =
; isCommit =3D false]
17:47:05.680 IFD [EJB-Timer]: now checkpoint "segments=5F29b" [11 segments =
; isCommit =3D false]
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.fdx"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.nrm"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.fdt"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.tis"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.prx"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.tii"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.frq"
17:47:05.680 IFD [EJB-Timer]: delete "=5F2ia.fnm"
17:47:05.680 IFD [EJB-Timer]: now checkpoint "segments=5F29b" [11 segments =
; isCommit =3D false]
17:47:05.680 IW 0 [EJB-Timer]: LMP: findMerges: 11 segments
17:47:05.680 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:05.680 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:05.680 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 8 segments
17:47:05.680 IW 0 [EJB-Timer]: CMS: now merge
17:47:05.680 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =
=5F2i8:c152 =5F2i9:c152 =5F2ia:c152
17:47:05.680 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:05.680 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:05.680 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 changeCount=3D8962
17:47:05.680 IW 0 [EJB-Timer]: now sync =5F2ia.cfs
17:47:05.696 IW 0 [EJB-Timer]: done all syncs
17:47:05.696 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:05.712 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29c"
17:47:05.712 IFD [EJB-Timer]: now checkpoint "segments=5F29c" [11 segments =
; isCommit =3D true]
17:47:05.712 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29b"
17:47:05.712 IFD [EJB-Timer]: delete "segments=5F29b"
17:47:05.712 IW 0 [EJB-Timer]: commit: done
17:47:06.665 IW 0 [EJB-Timer]: commit: start
17:47:06.665 IW 0 [EJB-Timer]: commit: enter lock
17:47:06.665 IW 0 [EJB-Timer]: commit: now prepare
17:47:06.665 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:06.665 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ib docStoreSegment=3D=
=5F2ib docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D151 numBufDelTerms=3D0
17:47:06.665 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c1=
54 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152
17:47:06.665 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ib numDocs=
=3D151
17:47:06.665 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ib numDocs=3D151
17:47:06.680 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
09956 docs/MB=3D754.134 new/old=3D31.592%
17:47:06.680 IFD [EJB-Timer]: now checkpoint "segments=5F29c" [12 segments =
; isCommit =3D false]
17:47:06.680 IFD [EJB-Timer]: now checkpoint "segments=5F29c" [12 segments =
; isCommit =3D false]
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.tii"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.fdx"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.fdt"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.prx"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.fnm"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.tis"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.frq"
17:47:06.680 IFD [EJB-Timer]: delete "=5F2ib.nrm"
17:47:06.680 IFD [EJB-Timer]: now checkpoint "segments=5F29c" [12 segments =
; isCommit =3D false]
17:47:06.680 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:47:06.680 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:06.680 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:06.680 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 9 segments
17:47:06.680 IW 0 [EJB-Timer]: CMS: now merge
17:47:06.680 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =
=5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151
17:47:06.680 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:06.680 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:06.680 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151 changeCount=3D8966
17:47:06.680 IW 0 [EJB-Timer]: now sync =5F2ib.cfs
17:47:06.696 IW 0 [EJB-Timer]: done all syncs
17:47:06.696 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:06.712 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29d"
17:47:06.712 IFD [EJB-Timer]: now checkpoint "segments=5F29d" [12 segments =
; isCommit =3D true]
17:47:06.712 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29c"
17:47:06.712 IFD [EJB-Timer]: delete "segments=5F29c"
17:47:06.712 IW 0 [EJB-Timer]: commit: done
17:47:07.665 IW 0 [EJB-Timer]: commit: start
17:47:07.665 IW 0 [EJB-Timer]: commit: enter lock
17:47:07.665 IW 0 [EJB-Timer]: commit: now prepare
17:47:07.665 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:07.665 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ic docStoreSegment=3D=
=5F2ic docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:07.665 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c1=
54 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151
17:47:07.665 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ic numDocs=
=3D152
17:47:07.665 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ic numDocs=3D152
17:47:07.680 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11242 docs/MB=3D754.507 new/old=3D31.786%
17:47:07.680 IFD [EJB-Timer]: now checkpoint "segments=5F29d" [13 segments =
; isCommit =3D false]
17:47:07.680 IFD [EJB-Timer]: now checkpoint "segments=5F29d" [13 segments =
; isCommit =3D false]
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.fdt"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.nrm"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.tis"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.prx"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.fnm"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.tii"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.fdx"
17:47:07.680 IFD [EJB-Timer]: delete "=5F2ic.frq"
17:47:07.680 IFD [EJB-Timer]: now checkpoint "segments=5F29d" [13 segments =
; isCommit =3D false]
17:47:07.680 IW 0 [EJB-Timer]: LMP: findMerges: 13 segments
17:47:07.680 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:07.680 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.344726: 2 segmen=
ts
17:47:07.680 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.6631317: 10 segments
17:47:07.680 IW 0 [EJB-Timer]: LMP:     3 to 13: add this merge
17:47:07.680 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2i3:c161 =5F2=
i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:=
c152 =5F2ib:c151 =5F2ic:c152 [total 1 pending]
17:47:07.680 IW 0 [EJB-Timer]: CMS: now merge
17:47:07.680 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =
=5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151 =5F2ic:c152
17:47:07.680 IW 0 [EJB-Timer]: CMS:   consider merge =5F2i3:c161 =5F2i4:c14=
5 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =
=5F2ib:c151 =5F2ic:c152 into =5F2id [mergeDocStores]
17:47:07.680 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #219]
17:47:07.680 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:07.680 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:07.680 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c15=
4 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151 =5F2ic:c152 changeCount=
=3D8971
17:47:07.680 IW 0 [EJB-Timer]: now sync =5F2ic.cfs
17:47:07.680 IW 0 [Lucene Merge Thread #219]: CMS:   merge thread: start
17:47:07.680 IW 0 [Lucene Merge Thread #219]: now merge
  merge=3D=5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i=
8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151 =5F2ic:c152 into =5F2id [mergeDo=
cStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@e91162
  index=3D=5F2hg:c171593 =5F2hr:c1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =
=5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F=
2ib:c151 =5F2ic:c152
17:47:07.680 IW 0 [Lucene Merge Thread #219]: merging =5F2i3:c161 =5F2i4:c1=
45 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =
=5F2ib:c151 =5F2ic:c152 into =5F2id [mergeDocStores]
17:47:07.680 IW 0 [Lucene Merge Thread #219]: merge: total 1532 docs
17:47:07.696 IW 0 [EJB-Timer]: done all syncs
17:47:07.696 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:07.712 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29e"
17:47:07.712 IFD [EJB-Timer]: now checkpoint "segments=5F29e" [13 segments =
; isCommit =3D true]
17:47:07.712 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29d"
17:47:07.712 IFD [EJB-Timer]: delete "segments=5F29d"
17:47:07.712 IW 0 [EJB-Timer]: commit: done
17:47:07.768 IW 0 [Lucene Merge Thread #219]: commitMerge: =5F2i3:c161 =5F2=
i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:=
c152 =5F2ib:c151 =5F2ic:c152 into =5F2id [mergeDocStores] index=3D=5F2hg:c1=
71593 =5F2hr:c1537 =5F2i2:c1710 =5F2i3:c161 =5F2i4:c145 =5F2i5:c154 =5F2i6:=
c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =5F2ia:c152 =5F2ib:c151 =5F2ic:c152
17:47:07.768 IW 0 [Lucene Merge Thread #219]: commitMergeDeletes =5F2i3:c16=
1 =5F2i4:c145 =5F2i5:c154 =5F2i6:c159 =5F2i7:c154 =5F2i8:c152 =5F2i9:c152 =
=5F2ia:c152 =5F2ib:c151 =5F2ic:c152 into =5F2id [mergeDocStores]
17:47:07.768 IFD [Lucene Merge Thread #219]: now checkpoint "segments=5F29e=
" [4 segments ; isCommit =3D false]
17:47:07.769 IFD [Lucene Merge Thread #219]: now checkpoint "segments=5F29e=
" [4 segments ; isCommit =3D false]
17:47:07.802 IFD [Lucene Merge Thread #219]: now checkpoint "segments=5F29e=
" [4 segments ; isCommit =3D false]
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.fdt"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.prx"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.fnm"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.tis"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.tii"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.frq"
17:47:07.802 IFD [Lucene Merge Thread #219]: delete "=5F2id.fdx"
17:47:07.802 IW 0 [Lucene Merge Thread #219]: LMP: findMerges: 4 segments
17:47:07.802 IW 0 [Lucene Merge Thread #219]: LMP:   level 7.591896 to 8.34=
1896: 1 segments
17:47:07.802 IW 0 [Lucene Merge Thread #219]: LMP:   level 6.2247195 to 6.3=
520274: 3 segments
17:47:07.802 IW 0 [Lucene Merge Thread #219]: CMS:   merge thread: done
17:47:08.665 IW 0 [EJB-Timer]: commit: start
17:47:08.665 IW 0 [EJB-Timer]: commit: enter lock
17:47:08.665 IW 0 [EJB-Timer]: commit: now prepare
17:47:08.665 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:08.665 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ie docStoreSegment=3D=
=5F2ie docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:08.665 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532
17:47:08.665 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ie numDocs=
=3D152
17:47:08.665 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ie numDocs=3D152
17:47:08.680 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11208 docs/MB=3D754.628 new/old=3D31.781%
17:47:08.680 IFD [EJB-Timer]: now checkpoint "segments=5F29e" [5 segments ;=
 isCommit =3D false]
17:47:08.680 IFD [EJB-Timer]: now checkpoint "segments=5F29e" [5 segments ;=
 isCommit =3D false]
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.fdx"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.tis"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.frq"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.prx"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.fnm"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.fdt"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.nrm"
17:47:08.680 IFD [EJB-Timer]: delete "=5F2ie.tii"
17:47:08.680 IFD [EJB-Timer]: now checkpoint "segments=5F29e" [5 segments ;=
 isCommit =3D false]
17:47:08.680 IW 0 [EJB-Timer]: LMP: findMerges: 5 segments
17:47:08.680 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:08.680 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:08.680 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3249917: 1 segments
17:47:08.680 IW 0 [EJB-Timer]: CMS: now merge
17:47:08.680 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152
17:47:08.680 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:08.680 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:08.680 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 changeCount=3D8977
17:47:08.680 IW 0 [EJB-Timer]: now sync =5F2ie.cfs
17:47:08.696 IW 0 [EJB-Timer]: now sync =5F2id.cfs
17:47:08.696 IW 0 [EJB-Timer]: done all syncs
17:47:08.696 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:08.712 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29f"
17:47:08.712 IFD [EJB-Timer]: now checkpoint "segments=5F29f" [5 segments ;=
 isCommit =3D true]
17:47:08.712 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29e"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i3.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i6.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i5.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i8.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i9.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "segments=5F29e"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2ic.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i7.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2ib.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2i4.cfs"
17:47:08.712 IFD [EJB-Timer]: delete "=5F2ia.cfs"
17:47:08.712 IW 0 [EJB-Timer]: commit: done
17:47:09.703 IW 0 [EJB-Timer]: commit: start
17:47:09.703 IW 0 [EJB-Timer]: commit: enter lock
17:47:09.703 IW 0 [EJB-Timer]: commit: now prepare
17:47:09.703 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:09.703 IW 0 [EJB-Timer]:   flush: segment=3D=5F2if docStoreSegment=3D=
=5F2if docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D153 numBufDelTerms=3D0
17:47:09.703 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152
17:47:09.703 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2if numDocs=
=3D153
17:47:09.703 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2if numDocs=3D153
17:47:09.704 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
12577 docs/MB=3D754.701 new/old=3D31.987%
17:47:09.704 IFD [EJB-Timer]: now checkpoint "segments=5F29f" [6 segments ;=
 isCommit =3D false]
17:47:09.704 IFD [EJB-Timer]: now checkpoint "segments=5F29f" [6 segments ;=
 isCommit =3D false]
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.fdt"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.tis"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.fdx"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.fnm"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.nrm"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.frq"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.tii"
17:47:09.704 IFD [EJB-Timer]: delete "=5F2if.prx"
17:47:09.704 IFD [EJB-Timer]: now checkpoint "segments=5F29f" [6 segments ;=
 isCommit =3D false]
17:47:09.704 IW 0 [EJB-Timer]: LMP: findMerges: 6 segments
17:47:09.704 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:09.704 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:09.704 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.327796: 2 segments
17:47:09.704 IW 0 [EJB-Timer]: CMS: now merge
17:47:09.704 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153
17:47:09.704 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:09.704 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:09.704 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 changeCount=3D8981
17:47:09.704 IW 0 [EJB-Timer]: now sync =5F2if.cfs
17:47:09.707 IW 0 [EJB-Timer]: done all syncs
17:47:09.707 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:09.717 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29g"
17:47:09.717 IFD [EJB-Timer]: now checkpoint "segments=5F29g" [6 segments ;=
 isCommit =3D true]
17:47:09.717 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29f"
17:47:09.717 IFD [EJB-Timer]: delete "segments=5F29f"
17:47:09.717 IW 0 [EJB-Timer]: commit: done
17:47:10.706 IW 0 [EJB-Timer]: commit: start
17:47:10.706 IW 0 [EJB-Timer]: commit: enter lock
17:47:10.706 IW 0 [EJB-Timer]: commit: now prepare
17:47:10.706 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:10.706 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ig docStoreSegment=3D=
=5F2ig docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D154 numBufDelTerms=3D0
17:47:10.707 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153
17:47:10.707 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ig numDocs=
=3D154
17:47:10.707 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ig numDocs=3D154
17:47:10.719 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
13728 docs/MB=3D755.543 new/old=3D32.16%
17:47:10.719 IFD [EJB-Timer]: now checkpoint "segments=5F29g" [7 segments ;=
 isCommit =3D false]
17:47:10.721 IFD [EJB-Timer]: now checkpoint "segments=5F29g" [7 segments ;=
 isCommit =3D false]
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.tis"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.frq"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.fdt"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.fnm"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.fdx"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.nrm"
17:47:10.721 IFD [EJB-Timer]: delete "=5F2ig.tii"
17:47:10.722 IFD [EJB-Timer]: delete "=5F2ig.prx"
17:47:10.722 IFD [EJB-Timer]: now checkpoint "segments=5F29g" [7 segments ;=
 isCommit =3D false]
17:47:10.722 IW 0 [EJB-Timer]: LMP: findMerges: 7 segments
17:47:10.722 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:10.722 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:10.722 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3301396: 3 segments
17:47:10.722 IW 0 [EJB-Timer]: CMS: now merge
17:47:10.722 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154
17:47:10.722 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:10.722 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:10.722 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 changeCou=
nt=3D8985
17:47:10.722 IW 0 [EJB-Timer]: now sync =5F2ig.cfs
17:47:10.738 IW 0 [EJB-Timer]: done all syncs
17:47:10.738 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:10.745 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29h"
17:47:10.745 IFD [EJB-Timer]: now checkpoint "segments=5F29h" [7 segments ;=
 isCommit =3D true]
17:47:10.745 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29g"
17:47:10.745 IFD [EJB-Timer]: delete "segments=5F29g"
17:47:10.745 IW 0 [EJB-Timer]: commit: done
17:47:11.735 IW 0 [EJB-Timer]: commit: start
17:47:11.735 IW 0 [EJB-Timer]: commit: enter lock
17:47:11.735 IW 0 [EJB-Timer]: commit: now prepare
17:47:11.735 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:11.735 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ih docStoreSegment=3D=
=5F2ih docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D157 numBufDelTerms=3D0
17:47:11.735 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154
17:47:11.735 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ih numDocs=
=3D157
17:47:11.735 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ih numDocs=3D157
17:47:11.745 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D681984 newFlushedSize=3D2=
17692 docs/MB=3D756.236 new/old=3D31.92%
17:47:11.745 IFD [EJB-Timer]: now checkpoint "segments=5F29h" [8 segments ;=
 isCommit =3D false]
17:47:11.746 IFD [EJB-Timer]: now checkpoint "segments=5F29h" [8 segments ;=
 isCommit =3D false]
17:47:11.746 IFD [EJB-Timer]: delete "=5F2ih.frq"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.nrm"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.tis"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.fdt"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.tii"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.fdx"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.prx"
17:47:11.747 IFD [EJB-Timer]: delete "=5F2ih.fnm"
17:47:11.747 IFD [EJB-Timer]: now checkpoint "segments=5F29h" [8 segments ;=
 isCommit =3D false]
17:47:11.747 IW 0 [EJB-Timer]: LMP: findMerges: 8 segments
17:47:11.747 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:11.747 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:11.747 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3381157: 4 segments
17:47:11.747 IW 0 [EJB-Timer]: CMS: now merge
17:47:11.747 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157
17:47:11.747 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:11.747 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:11.747 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 changeCount=3D8989
17:47:11.747 IW 0 [EJB-Timer]: now sync =5F2ih.cfs
17:47:11.760 IW 0 [EJB-Timer]: done all syncs
17:47:11.760 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:11.765 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29i"
17:47:11.765 IFD [EJB-Timer]: now checkpoint "segments=5F29i" [8 segments ;=
 isCommit =3D true]
17:47:11.765 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29h"
17:47:11.765 IFD [EJB-Timer]: delete "segments=5F29h"
17:47:11.765 IW 0 [EJB-Timer]: commit: done
17:47:12.763 IW 0 [EJB-Timer]: commit: start
17:47:12.763 IW 0 [EJB-Timer]: commit: enter lock
17:47:12.763 IW 0 [EJB-Timer]: commit: now prepare
17:47:12.763 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:12.763 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ii docStoreSegment=3D=
=5F2ii docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D159 numBufDelTerms=3D0
17:47:12.763 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157
17:47:12.763 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ii numDocs=
=3D159
17:47:12.763 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ii numDocs=3D159
17:47:12.803 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D681984 newFlushedSize=3D2=
20192 docs/MB=3D757.174 new/old=3D32.287%
17:47:12.803 IFD [EJB-Timer]: now checkpoint "segments=5F29i" [9 segments ;=
 isCommit =3D false]
17:47:12.803 IFD [EJB-Timer]: now checkpoint "segments=5F29i" [9 segments ;=
 isCommit =3D false]
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.tis"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.nrm"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.fnm"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.fdx"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.tii"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.frq"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.fdt"
17:47:12.803 IFD [EJB-Timer]: delete "=5F2ii.prx"
17:47:12.803 IFD [EJB-Timer]: now checkpoint "segments=5F29i" [9 segments ;=
 isCommit =3D false]
17:47:12.803 IW 0 [EJB-Timer]: LMP: findMerges: 9 segments
17:47:12.803 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:12.803 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:12.803 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.343072: 5 segments
17:47:12.803 IW 0 [EJB-Timer]: CMS: now merge
17:47:12.803 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159
17:47:12.803 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:12.803 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:12.803 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 changeCount=3D8993
17:47:12.803 IW 0 [EJB-Timer]: now sync =5F2ii.cfs
17:47:12.818 IW 0 [EJB-Timer]: done all syncs
17:47:12.818 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:12.834 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29j"
17:47:12.834 IFD [EJB-Timer]: now checkpoint "segments=5F29j" [9 segments ;=
 isCommit =3D true]
17:47:12.834 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29i"
17:47:12.834 IFD [EJB-Timer]: delete "segments=5F29i"
17:47:12.834 IW 0 [EJB-Timer]: commit: done
17:47:13.765 IW 0 [EJB-Timer]: commit: start
17:47:13.765 IW 0 [EJB-Timer]: commit: enter lock
17:47:13.765 IW 0 [EJB-Timer]: commit: now prepare
17:47:13.765 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:13.765 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ij docStoreSegment=3D=
=5F2ij docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D172 numBufDelTerms=3D0
17:47:13.765 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157 =5F2ii:c159
17:47:13.765 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ij numDocs=
=3D172
17:47:13.765 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ij numDocs=3D172
17:47:13.781 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
36840 docs/MB=3D761.506 new/old=3D33.864%
17:47:13.781 IFD [EJB-Timer]: now checkpoint "segments=5F29j" [10 segments =
; isCommit =3D false]
17:47:13.781 IFD [EJB-Timer]: now checkpoint "segments=5F29j" [10 segments =
; isCommit =3D false]
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.fdt"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.fnm"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.prx"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.tis"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.frq"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.fdx"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.nrm"
17:47:13.781 IFD [EJB-Timer]: delete "=5F2ij.tii"
17:47:13.781 IFD [EJB-Timer]: now checkpoint "segments=5F29j" [10 segments =
; isCommit =3D false]
17:47:13.781 IW 0 [EJB-Timer]: LMP: findMerges: 10 segments
17:47:13.781 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:13.781 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:13.781 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.374706: 6 segments
17:47:13.781 IW 0 [EJB-Timer]: CMS: now merge
17:47:13.781 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159 =5F2ij:c172
17:47:13.781 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:13.781 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:13.781 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 =5F2ij:c172 changeCount=3D8997
17:47:13.781 IW 0 [EJB-Timer]: now sync =5F2ij.cfs
17:47:13.812 IW 0 [EJB-Timer]: done all syncs
17:47:13.812 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:13.813 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29k"
17:47:13.813 IFD [EJB-Timer]: now checkpoint "segments=5F29k" [10 segments =
; isCommit =3D true]
17:47:13.813 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29j"
17:47:13.813 IFD [EJB-Timer]: delete "segments=5F29j"
17:47:13.813 IW 0 [EJB-Timer]: commit: done
17:47:14.766 IW 0 [EJB-Timer]: commit: start
17:47:14.766 IW 0 [EJB-Timer]: commit: enter lock
17:47:14.766 IW 0 [EJB-Timer]: commit: now prepare
17:47:14.766 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:14.766 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ik docStoreSegment=3D=
=5F2ik docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D143 numBufDelTerms=3D0
17:47:14.766 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157 =5F2ii:c159 =5F2ij:c172
17:47:14.766 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ik numDocs=
=3D143
17:47:14.766 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ik numDocs=3D143
17:47:14.802 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D647168 newFlushedSize=3D1=
98687 docs/MB=3D754.686 new/old=3D30.701%
17:47:14.802 IFD [EJB-Timer]: now checkpoint "segments=5F29k" [11 segments =
; isCommit =3D false]
17:47:14.802 IFD [EJB-Timer]: now checkpoint "segments=5F29k" [11 segments =
; isCommit =3D false]
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.nrm"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.tii"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.fdx"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.fnm"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.fdt"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.frq"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.prx"
17:47:14.802 IFD [EJB-Timer]: delete "=5F2ik.tis"
17:47:14.802 IFD [EJB-Timer]: now checkpoint "segments=5F29k" [11 segments =
; isCommit =3D false]
17:47:14.802 IW 0 [EJB-Timer]: LMP: findMerges: 11 segments
17:47:14.802 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:14.802 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:14.802 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.374706: 7 segments
17:47:14.802 IW 0 [EJB-Timer]: CMS: now merge
17:47:14.802 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159 =5F2ij:c172 =5F2ik:c143
17:47:14.802 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:14.802 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:14.802 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 changeCount=3D9001
17:47:14.802 IW 0 [EJB-Timer]: now sync =5F2ik.cfs
17:47:14.818 IW 0 [EJB-Timer]: done all syncs
17:47:14.818 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:14.818 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29l"
17:47:14.818 IFD [EJB-Timer]: now checkpoint "segments=5F29l" [11 segments =
; isCommit =3D true]
17:47:14.818 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29k"
17:47:14.818 IFD [EJB-Timer]: delete "segments=5F29k"
17:47:14.818 IW 0 [EJB-Timer]: commit: done
17:47:15.768 IW 0 [EJB-Timer]: commit: start
17:47:15.768 IW 0 [EJB-Timer]: commit: enter lock
17:47:15.768 IW 0 [EJB-Timer]: commit: now prepare
17:47:15.768 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:15.768 IW 0 [EJB-Timer]:   flush: segment=3D=5F2il docStoreSegment=3D=
=5F2il docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D141 numBufDelTerms=3D0
17:47:15.768 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143
17:47:15.768 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2il numDocs=
=3D141
17:47:15.768 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2il numDocs=3D141
17:47:15.802 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D629760 newFlushedSize=3D1=
95961 docs/MB=3D754.483 new/old=3D31.117%
17:47:15.802 IFD [EJB-Timer]: now checkpoint "segments=5F29l" [12 segments =
; isCommit =3D false]
17:47:15.802 IFD [EJB-Timer]: now checkpoint "segments=5F29l" [12 segments =
; isCommit =3D false]
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.prx"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.tis"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.nrm"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.fdt"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.fnm"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.frq"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.fdx"
17:47:15.802 IFD [EJB-Timer]: delete "=5F2il.tii"
17:47:15.802 IFD [EJB-Timer]: now checkpoint "segments=5F29l" [12 segments =
; isCommit =3D false]
17:47:15.802 IW 0 [EJB-Timer]: LMP: findMerges: 12 segments
17:47:15.802 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:15.802 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:15.802 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.374706: 8 segments
17:47:15.802 IW 0 [EJB-Timer]: CMS: now merge
17:47:15.802 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141
17:47:15.802 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:15.802 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:15.802 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 changeCount=3D9005
17:47:15.802 IW 0 [EJB-Timer]: now sync =5F2il.cfs
17:47:15.818 IW 0 [EJB-Timer]: done all syncs
17:47:15.818 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:15.834 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29m"
17:47:15.834 IFD [EJB-Timer]: now checkpoint "segments=5F29m" [12 segments =
; isCommit =3D true]
17:47:15.834 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29l"
17:47:15.834 IFD [EJB-Timer]: delete "segments=5F29l"
17:47:15.834 IW 0 [EJB-Timer]: commit: done
17:47:16.787 IW 0 [EJB-Timer]: commit: start
17:47:16.787 IW 0 [EJB-Timer]: commit: enter lock
17:47:16.787 IW 0 [EJB-Timer]: commit: now prepare
17:47:16.787 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:16.787 IW 0 [EJB-Timer]:   flush: segment=3D=5F2im docStoreSegment=3D=
=5F2im docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:16.787 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141
17:47:16.787 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2im numDocs=
=3D152
17:47:16.787 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2im numDocs=3D152
17:47:16.802 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11091 docs/MB=3D755.047 new/old=3D31.763%
17:47:16.802 IFD [EJB-Timer]: now checkpoint "segments=5F29m" [13 segments =
; isCommit =3D false]
17:47:16.802 IFD [EJB-Timer]: now checkpoint "segments=5F29m" [13 segments =
; isCommit =3D false]
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.fnm"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.fdt"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.tis"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.prx"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.frq"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.nrm"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.fdx"
17:47:16.802 IFD [EJB-Timer]: delete "=5F2im.tii"
17:47:16.802 IFD [EJB-Timer]: now checkpoint "segments=5F29m" [13 segments =
; isCommit =3D false]
17:47:16.802 IW 0 [EJB-Timer]: LMP: findMerges: 13 segments
17:47:16.802 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:16.802 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:16.802 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.374706: 9 segments
17:47:16.802 IW 0 [EJB-Timer]: CMS: now merge
17:47:16.802 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152
17:47:16.802 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:16.802 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:16.802 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152 changeCount=
=3D9009
17:47:16.802 IW 0 [EJB-Timer]: now sync =5F2im.cfs
17:47:16.834 IW 0 [EJB-Timer]: done all syncs
17:47:16.834 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:16.849 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29n"
17:47:16.849 IFD [EJB-Timer]: now checkpoint "segments=5F29n" [13 segments =
; isCommit =3D true]
17:47:16.849 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29m"
17:47:16.849 IFD [EJB-Timer]: delete "segments=5F29m"
17:47:16.849 IW 0 [EJB-Timer]: commit: done
17:47:17.803 IW 0 [EJB-Timer]: commit: start
17:47:17.803 IW 0 [EJB-Timer]: commit: enter lock
17:47:17.803 IW 0 [EJB-Timer]: commit: now prepare
17:47:17.803 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:17.803 IW 0 [EJB-Timer]:   flush: segment=3D=5F2in docStoreSegment=3D=
=5F2in docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D172 numBufDelTerms=3D0
17:47:17.803 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c=
157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152
17:47:17.803 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2in numDocs=
=3D172
17:47:17.803 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2in numDocs=3D172
17:47:17.804 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D699392 newFlushedSize=3D2=
36562 docs/MB=3D762.401 new/old=3D33.824%
17:47:17.804 IFD [EJB-Timer]: now checkpoint "segments=5F29n" [14 segments =
; isCommit =3D false]
17:47:17.804 IFD [EJB-Timer]: now checkpoint "segments=5F29n" [14 segments =
; isCommit =3D false]
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.fdx"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.frq"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.tii"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.fdt"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.tis"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.prx"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.nrm"
17:47:17.804 IFD [EJB-Timer]: delete "=5F2in.fnm"
17:47:17.804 IFD [EJB-Timer]: now checkpoint "segments=5F29n" [14 segments =
; isCommit =3D false]
17:47:17.804 IW 0 [EJB-Timer]: LMP: findMerges: 14 segments
17:47:17.804 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:17.804 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 3 segme=
nts
17:47:17.804 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.374706: 10 segments
17:47:17.804 IW 0 [EJB-Timer]: LMP:     4 to 14: add this merge
17:47:17.804 IW 0 [EJB-Timer]: add merge to pendingMerges: =5F2ie:c152 =5F2=
if:c153 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:=
c141 =5F2im:c152 =5F2in:c172 [total 1 pending]
17:47:17.804 IW 0 [EJB-Timer]: CMS: now merge
17:47:17.804 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =
=5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152 =5F2in:c172
17:47:17.804 IW 0 [EJB-Timer]: CMS:   consider merge =5F2ie:c152 =5F2if:c15=
3 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =
=5F2im:c152 =5F2in:c172 into =5F2io [mergeDocStores]
17:47:17.804 IW 0 [EJB-Timer]: CMS:     launch new thread [Lucene Merge Thr=
ead #220]
17:47:17.804 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:17.804 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:17.804 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c1=
57 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152 =5F2in:c172 =
changeCount=3D9014
17:47:17.804 IW 0 [EJB-Timer]: now sync =5F2in.cfs
17:47:17.804 IW 0 [Lucene Merge Thread #220]: CMS:   merge thread: start
17:47:17.804 IW 0 [Lucene Merge Thread #220]: now merge
  merge=3D=5F2ie:c152 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2i=
j:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c152 =5F2in:c172 into =5F2io [mergeDo=
cStores]
  merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@39c9211
  index=3D=5F2hg:c171593 =5F2hr:c1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152=
 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =
=5F2il:c141 =5F2im:c152 =5F2in:c172
17:47:17.804 IW 0 [Lucene Merge Thread #220]: merging =5F2ie:c152 =5F2if:c1=
53 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =
=5F2im:c152 =5F2in:c172 into =5F2io [mergeDocStores]
17:47:17.804 IW 0 [Lucene Merge Thread #220]: merge: total 1555 docs
17:47:17.810 IW 0 [EJB-Timer]: done all syncs
17:47:17.810 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:17.820 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29o"
17:47:17.820 IFD [EJB-Timer]: now checkpoint "segments=5F29o" [14 segments =
; isCommit =3D true]
17:47:17.820 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29n"
17:47:17.820 IFD [EJB-Timer]: delete "segments=5F29n"
17:47:17.822 IW 0 [EJB-Timer]: commit: done
17:47:17.918 IW 0 [Lucene Merge Thread #220]: commitMerge: =5F2ie:c152 =5F2=
if:c153 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:=
c141 =5F2im:c152 =5F2in:c172 into =5F2io [mergeDocStores] index=3D=5F2hg:c1=
71593 =5F2hr:c1537 =5F2i2:c1710 =5F2id:c1532 =5F2ie:c152 =5F2if:c153 =5F2ig=
:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =5F2il:c141 =5F2im:c1=
52 =5F2in:c172
17:47:17.918 IW 0 [Lucene Merge Thread #220]: commitMergeDeletes =5F2ie:c15=
2 =5F2if:c153 =5F2ig:c154 =5F2ih:c157 =5F2ii:c159 =5F2ij:c172 =5F2ik:c143 =
=5F2il:c141 =5F2im:c152 =5F2in:c172 into =5F2io [mergeDocStores]
17:47:17.918 IFD [Lucene Merge Thread #220]: now checkpoint "segments=5F29o=
" [5 segments ; isCommit =3D false]
17:47:17.918 IFD [Lucene Merge Thread #220]: now checkpoint "segments=5F29o=
" [5 segments ; isCommit =3D false]
17:47:17.922 IFD [Lucene Merge Thread #220]: now checkpoint "segments=5F29o=
" [5 segments ; isCommit =3D false]
17:47:17.922 IFD [Lucene Merge Thread #220]: delete "=5F2io.fdx"
17:47:17.922 IFD [Lucene Merge Thread #220]: delete "=5F2io.fnm"
17:47:17.923 IFD [Lucene Merge Thread #220]: delete "=5F2io.tis"
17:47:17.923 IFD [Lucene Merge Thread #220]: delete "=5F2io.fdt"
17:47:17.923 IFD [Lucene Merge Thread #220]: delete "=5F2io.tii"
17:47:17.923 IFD [Lucene Merge Thread #220]: delete "=5F2io.frq"
17:47:17.924 IFD [Lucene Merge Thread #220]: delete "=5F2io.prx"
17:47:17.924 IW 0 [Lucene Merge Thread #220]: LMP: findMerges: 5 segments
17:47:17.924 IW 0 [Lucene Merge Thread #220]: LMP:   level 7.591896 to 8.34=
1896: 1 segments
17:47:17.924 IW 0 [Lucene Merge Thread #220]: LMP:   level 6.2247195 to 6.3=
520274: 4 segments
17:47:17.924 IW 0 [Lucene Merge Thread #220]: CMS:   merge thread: done
17:47:18.833 IW 0 [EJB-Timer]: commit: start
17:47:18.833 IW 0 [EJB-Timer]: commit: enter lock
17:47:18.833 IW 0 [EJB-Timer]: commit: now prepare
17:47:18.833 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:18.833 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ip docStoreSegment=3D=
=5F2ip docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D149 numBufDelTerms=3D0
17:47:18.833 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555
17:47:18.833 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ip numDocs=
=3D149
17:47:18.833 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ip numDocs=3D149
17:47:18.833 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D647168 newFlushedSize=3D2=
06957 docs/MB=3D754.929 new/old=3D31.979%
17:47:18.833 IFD [EJB-Timer]: now checkpoint "segments=5F29o" [6 segments ;=
 isCommit =3D false]
17:47:18.833 IFD [EJB-Timer]: now checkpoint "segments=5F29o" [6 segments ;=
 isCommit =3D false]
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.prx"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.fdx"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.frq"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.fdt"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.tis"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.tii"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.fnm"
17:47:18.833 IFD [EJB-Timer]: delete "=5F2ip.nrm"
17:47:18.833 IFD [EJB-Timer]: now checkpoint "segments=5F29o" [6 segments ;=
 isCommit =3D false]
17:47:18.833 IW 0 [EJB-Timer]: LMP: findMerges: 6 segments
17:47:18.833 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:18.833 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 4 segme=
nts
17:47:18.833 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3161674: 1 segments
17:47:18.833 IW 0 [EJB-Timer]: CMS: now merge
17:47:18.833 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149
17:47:18.833 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:18.833 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:18.833 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 changeCount=3D9020
17:47:18.833 IW 0 [EJB-Timer]: now sync =5F2io.cfs
17:47:18.849 IW 0 [EJB-Timer]: now sync =5F2ip.cfs
17:47:18.864 IW 0 [EJB-Timer]: done all syncs
17:47:18.864 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:18.864 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29p"
17:47:18.864 IFD [EJB-Timer]: now checkpoint "segments=5F29p" [6 segments ;=
 isCommit =3D true]
17:47:18.864 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29o"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2if.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ik.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2in.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ig.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2il.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ij.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2im.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ie.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ii.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "=5F2ih.cfs"
17:47:18.864 IFD [EJB-Timer]: delete "segments=5F29o"
17:47:18.864 IW 0 [EJB-Timer]: commit: done
17:47:19.849 IW 0 [EJB-Timer]: commit: start
17:47:19.849 IW 0 [EJB-Timer]: commit: enter lock
17:47:19.849 IW 0 [EJB-Timer]: commit: now prepare
17:47:19.849 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:19.849 IW 0 [EJB-Timer]:   flush: segment=3D=5F2iq docStoreSegment=3D=
=5F2iq docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D155 numBufDelTerms=3D0
17:47:19.849 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149
17:47:19.849 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2iq numDocs=
=3D155
17:47:19.849 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2iq numDocs=3D155
17:47:19.864 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
14906 docs/MB=3D756.281 new/old=3D32.337%
17:47:19.864 IFD [EJB-Timer]: now checkpoint "segments=5F29p" [7 segments ;=
 isCommit =3D false]
17:47:19.864 IFD [EJB-Timer]: now checkpoint "segments=5F29p" [7 segments ;=
 isCommit =3D false]
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.fdt"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.fdx"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.prx"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.fnm"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.tii"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.frq"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.tis"
17:47:19.864 IFD [EJB-Timer]: delete "=5F2iq.nrm"
17:47:19.864 IFD [EJB-Timer]: now checkpoint "segments=5F29p" [7 segments ;=
 isCommit =3D false]
17:47:19.864 IW 0 [EJB-Timer]: LMP: findMerges: 7 segments
17:47:19.864 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:19.864 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 4 segme=
nts
17:47:19.864 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3325253: 2 segments
17:47:19.864 IW 0 [EJB-Timer]: CMS: now merge
17:47:19.864 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 =5F2iq:c155
17:47:19.864 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:19.864 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:19.864 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 =5F2iq:c155 changeCo=
unt=3D9024
17:47:19.864 IW 0 [EJB-Timer]: now sync =5F2iq.cfs
17:47:19.865 IW 0 [EJB-Timer]: done all syncs
17:47:19.865 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:19.865 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29q"
17:47:19.865 IFD [EJB-Timer]: now checkpoint "segments=5F29q" [7 segments ;=
 isCommit =3D true]
17:47:19.865 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29p"
17:47:19.865 IFD [EJB-Timer]: delete "segments=5F29p"
17:47:19.865 IW 0 [EJB-Timer]: commit: done
17:47:20.864 IW 0 [EJB-Timer]: commit: start
17:47:20.864 IW 0 [EJB-Timer]: commit: enter lock
17:47:20.864 IW 0 [EJB-Timer]: commit: now prepare
17:47:20.864 IW 0 [EJB-Timer]: prepareCommit: flush
17:47:20.864 IW 0 [EJB-Timer]:   flush: segment=3D=5F2ir docStoreSegment=3D=
=5F2ir docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStor=
es=3Dtrue numDocs=3D152 numBufDelTerms=3D0
17:47:20.864 IW 0 [EJB-Timer]:   index before flush =5F2hg:c171593 =5F2hr:c=
1537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 =5F2iq:c155
17:47:20.864 IW 0 [EJB-Timer]: DW: flush postings as segment =5F2ir numDocs=
=3D152
17:47:20.864 IW 0 [EJB-Timer]: DW: closeDocStore: 2 files to flush to segme=
nt =5F2ir numDocs=3D152
17:47:20.865 IW 0 [EJB-Timer]: DW:   oldRAMSize=3D664576 newFlushedSize=3D2=
11202 docs/MB=3D754.65 new/old=3D31.78%
17:47:20.865 IFD [EJB-Timer]: now checkpoint "segments=5F29q" [8 segments ;=
 isCommit =3D false]
17:47:20.865 IFD [EJB-Timer]: now checkpoint "segments=5F29q" [8 segments ;=
 isCommit =3D false]
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.tii"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.prx"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.frq"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.tis"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.fnm"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.nrm"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.fdt"
17:47:20.865 IFD [EJB-Timer]: delete "=5F2ir.fdx"
17:47:20.865 IFD [EJB-Timer]: now checkpoint "segments=5F29q" [8 segments ;=
 isCommit =3D false]
17:47:20.865 IW 0 [EJB-Timer]: LMP: findMerges: 8 segments
17:47:20.865 IW 0 [EJB-Timer]: LMP:   level 7.591896 to 8.341896: 1 segments
17:47:20.865 IW 0 [EJB-Timer]: LMP:   level 6.2247195 to 6.3520274: 4 segme=
nts
17:47:20.865 IW 0 [EJB-Timer]: LMP:   level -1.0 to 5.3325253: 3 segments
17:47:20.865 IW 0 [EJB-Timer]: CMS: now merge
17:47:20.865 IW 0 [EJB-Timer]: CMS:   index: =5F2hg:c171593 =5F2hr:c1537 =
=5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 =5F2iq:c155 =5F2ir:c152
17:47:20.865 IW 0 [EJB-Timer]: CMS:   no more merges pending; now return
17:47:20.865 IW 0 [EJB-Timer]: startCommit(): start sizeInBytes=3D0
17:47:20.865 IW 0 [EJB-Timer]: startCommit index=3D=5F2hg:c171593 =5F2hr:c1=
537 =5F2i2:c1710 =5F2id:c1532 =5F2io:c1555 =5F2ip:c149 =5F2iq:c155 =5F2ir:c=
152 changeCount=3D9028
17:47:20.865 IW 0 [EJB-Timer]: now sync =5F2ir.cfs
17:47:20.868 IW 0 [EJB-Timer]: done all syncs
17:47:20.868 IW 0 [EJB-Timer]: commit: pendingCommit !=3D null
17:47:20.873 IW 0 [EJB-Timer]: commit: wrote segments file "segments=5F29r"
17:47:20.874 IFD [EJB-Timer]: now checkpoint "segments=5F29r" [8 segments ;=
 isCommit =3D true]
17:47:20.874 IFD [EJB-Timer]: deleteCommits: now decRef commit "segments=5F=
29q"
17:47:20.874 IFD [EJB-Timer]: delete "segments=5F29q"
17:47:20.874 IW 0 [EJB-Timer]: commit: done



--=_mixed 00295138C125781D_=
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_mixed 00295138C125781D_=--

From java-user-return-48417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 07:44:54 2011
Return-Path: <java-user-return-48417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45620 invoked from network); 19 Jan 2011 07:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 07:44:54 -0000
Received: (qmail 58445 invoked by uid 500); 19 Jan 2011 07:44:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58131 invoked by uid 500); 19 Jan 2011 07:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58119 invoked by uid 99); 19 Jan 2011 07:44:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:44:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 07:44:39 +0000
Received: from [10.8.0.14] (cermat.PH-Karlsruhe.DE [193.197.80.3])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0LjuXJ-1QH0WX38ET-00bqYo; Wed, 19 Jan 2011 08:44:17 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Best practices for multiple languages?
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <4D368A6F.7090304@ariba.com>
Date: Wed, 19 Jan 2011 08:44:15 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <29145E83-65E7-486A-B973-876C2EF0D2CB@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <4D368A6F.7090304@ariba.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:mzkQVY28fNhqpXQEPRDIyvwpBtP/NEwYCRfTYObFcMm
 YbDOcT3hkYDb0mZJIxipqL7P2+HSIcpRR2GL2D82e2kE/uqolH
 n/busy/zmOWuynOlCu6ZhJmK1hwThzegRk+UmOmOFvHBcWPazg
 XyCARYDrJj1DNX20bTnT2GkgEkTaPozKGro/1TtnKJrI4v9Qf9
 KD66HXwpJRTPUmJ6l6uXdj8w7faXTDT6zgmALnupQM=


But for this, you need a skillfully designed:
- set of fields
- multiplexing analyzer
- query expansion
In one of my projects, we do not split language by fields and it's a =
pain... I'm having recurring issues in one sense or the other.
- the "die" example that Oti s mentioned is a good one: stop-word in =
German, essential verb in English
- I had recently issues with the contribution of the word Fourier (for =
the name of series): in English it stays fourier, in French in becomes =
fouri. So: if the resource is contributed in French, the indexed value =
is fouri, English seekers won't find it; if the resource is contributed =
in English, French seekers won't find it.
So my last lesson: always have a whitespace-lowercase unstemmed field =
also at hand and prefer it over the others in your query expansion.

A wiki page should probably be made.

paul


Le 19 janv. 2011 =E0 07:53, Vinaya Kumar Thimmappa a =E9crit :
> I think we should be using lucene with snowball jar's which means one =
index for all languages (ofcourse size of index is always a matter of =
concerns).
>=20
> Hope this helps.
> -vinaya
>=20
> On Tuesday 18 January 2011 11:23 PM, Clemens Wyss wrote:
>> What is the "best practice" to support multiple languages, i.e. =
Lucene-Documents that have multiple language content/fields?
>> Should
>> a) each language be indexed in a seperate index/directory or should
>> b) the Documents (in a single directory) hold the diverse localized =
fields?
>>=20
>> We most often will be searching "language dependent" which (at least =
performance wise) mandates one-directory-per-language...
>>=20
>> Any (lucene specific) white papers on this topic?
>>=20
>> Thx in advance
>> Clemens
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:17:06 2011
Return-Path: <java-user-return-48418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31737 invoked from network); 19 Jan 2011 08:17:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:17:05 -0000
Received: (qmail 2980 invoked by uid 500); 19 Jan 2011 08:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2578 invoked by uid 500); 19 Jan 2011 08:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2570 invoked by uid 99); 19 Jan 2011 08:16:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:16:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:16:49 +0000
Received: from webmail.xs4all.nl (dovemail9.xs4all.nl [194.109.26.11])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id p0J8GTQu053563
	for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 09:16:29 +0100 (CET)
	(envelope-from wheijke@xs4all.nl)
Received: from 85.90.76.130
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Wed, 19 Jan 2011 09:16:29 +0100
Message-ID: <6e0985a5bb877c1a67db8177c8354890.squirrel@webmail.xs4all.nl>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 09:16:29 +0100
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.18
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:20:59 2011
Return-Path: <java-user-return-48419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39049 invoked from network); 19 Jan 2011 08:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:20:58 -0000
Received: (qmail 9383 invoked by uid 500); 19 Jan 2011 08:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9037 invoked by uid 500); 19 Jan 2011 08:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9029 invoked by uid 99); 19 Jan 2011 08:20:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:20:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.91.34.194] (HELO rousseau.informatik.uni-duisburg.de) (134.91.34.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:20:43 +0000
Received: from freinet.inf.uni-due.de ([134.91.34.217])
	by rousseau.informatik.uni-duisburg.de with esmtpsa (TLS1.0:RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <engler@collide.info>)
	id 1PfTH7-0002Y7-Ds
	for java-user@lucene.apache.org; Wed, 19 Jan 2011 09:20:22 +0100
Message-ID: <4D369EBD.6020802@collide.info>
Date: Wed, 19 Jan 2011 09:20:13 +0100
From: Jan Engler <engler@collide.info>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Lightning/1.0b2 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <6e0985a5bb877c1a67db8177c8354890.squirrel@webmail.xs4all.nl>
In-Reply-To: <6e0985a5bb877c1a67db8177c8354890.squirrel@webmail.xs4all.nl>
X-Enigmail-Version: 1.1.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 134.91.34.217
X-SA-Exim-Mail-From: engler@collide.info
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	rousseau.informatik.uni-duisburg.de
X-Spam-Level: 
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
X-SA-Exim-Version: 4.2.1 (built Wed, 25 Jun 2008 17:14:11 +0000)
X-SA-Exim-Scanned: Yes (on rousseau.informatik.uni-duisburg.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.4 required=5.0 tests=ALL_TRUSTED
	autolearn=disabled version=3.2.5


 Where do you get your Lucene/Solr downloads from?

 [X] ASF Mirrors (linked in our release announcements or via the Lucene
 website)

 [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

 [] I/we build them from source via an SVN/Git checkout.

 [] Other (someone in your company mirrors them internally or via a
 downstream project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:22:20 2011
Return-Path: <java-user-return-48420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41492 invoked from network); 19 Jan 2011 08:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:22:19 -0000
Received: (qmail 12919 invoked by uid 500); 19 Jan 2011 08:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12775 invoked by uid 500); 19 Jan 2011 08:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12761 invoked by uid 99); 19 Jan 2011 08:22:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:22:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kirunews@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:22:07 +0000
Received: by gxk4 with SMTP id 4so144578gxk.35
        for <multiple recipients>; Wed, 19 Jan 2011 00:21:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=v1XJl7nr2XtLdroLXM+mNAB/DNaLa+tiFvmXM5e92UA=;
        b=sF9irYuBr2VOqqWypIh/U5+g643GSrsksXXtDfW4kMtAH+c+459iG/d0ctXt8f37jp
         p7RSBMVL6QfpvIb6vJOTAJdnbP6iq7TnGUm8toT/E5ka+P7VlcmoN9TYcP/MGAKZi8t4
         BzavSSw/n7qr1KKMXX4SHqzEpcddKtK85Bdw0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=Bkx8w6kYIjgSRuvLk/Av91GNyUUU0+ibNqXYJU7e+3mc2GzlWxdbyaaE+MXfENvY2v
         x8aV/NBvMPJ63jdXJgReLbH1P82F2a0C1Mn3hBZBWyaXHtgE+6hM19FMa+6nKcBf2Q7+
         R2Y9hvX09filg3D7QwaG/A21rQMZ6NJQxWZZY=
MIME-Version: 1.0
Received: by 10.100.205.12 with SMTP id c12mr278718ang.194.1295425220899; Wed,
 19 Jan 2011 00:20:20 -0800 (PST)
Received: by 10.100.172.13 with HTTP; Wed, 19 Jan 2011 00:20:20 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 09:20:20 +0100
Message-ID: <AANLkTimcpn6+9D6Y9yGEKh-Hhc_1w9-s=zi9mhUGUUrQ@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: =?ISO-8859-1?B?UOl0ZXIgS2ly4Wx5?= <kirunews@gmail.com>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> [x] ASF Mirrors (linked in our release announcements or via the Lucene we=
bsite)
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
> [x] I/we build them from source via an SVN/Git checkout.
> I rarely build, only if I would like to try an interesting patch.
> [] Other (someone in your company mirrors them internally or via a downst=
ream project)

Kir=E1ly P=E9ter
eXtensible Catalog
http://eXtensibleCatalog.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:24:32 2011
Return-Path: <java-user-return-48421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47305 invoked from network); 19 Jan 2011 08:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:24:32 -0000
Received: (qmail 29026 invoked by uid 500); 19 Jan 2011 08:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28796 invoked by uid 500); 19 Jan 2011 08:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28788 invoked by uid 99); 19 Jan 2011 08:24:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:24:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:24:18 +0000
Received: by pvb32 with SMTP id 32so118522pvb.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 00:23:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=rYIvIAwD+GddIFbYeHdkApaYl3y5f7dIx0Gibvp71NA=;
        b=lyuV+edEQc9nU9jZ1Wjvrsv/4xtBuyxm3Ne4OJ6/GjTY6hTa1jE/LMrq0jPywXyKOo
         PKq4zmRRxhPFqRb79VrNDStQccHANh6mVs0nLZotp2/NvsnVU4X7Ucm/Hz9UWCr+4Dy3
         rQzLWfMhvuqnYFLD+j4mFiAdE/nHEbPFKV0uE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lCymy4HC5g5NlG1WtzCYeaFPfibG0kqQHOY4wVjOSlcISOSZ4BwO51eRZTgyvbw0bU
         y6vpRjrTPyuK1PIpBrYGzEsTq4VU4iVqVel5bxDh07s7Opn88VWbUQLazvxv0WWv4qMb
         tIZ3kAjyvCD1KNEwbgwPtxDi45tJGiXqRLvco=
MIME-Version: 1.0
Received: by 10.142.239.11 with SMTP id m11mr349466wfh.120.1295425437261; Wed,
 19 Jan 2011 00:23:57 -0800 (PST)
Received: by 10.143.10.11 with HTTP; Wed, 19 Jan 2011 00:23:57 -0800 (PST)
In-Reply-To: <29145E83-65E7-486A-B973-876C2EF0D2CB@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
	<4D368A6F.7090304@ariba.com>
	<29145E83-65E7-486A-B973-876C2EF0D2CB@hoplahup.net>
Date: Wed, 19 Jan 2011 10:23:57 +0200
Message-ID: <AANLkTimJ9-7t2W9EM10KgnvEjnD+jetCWAMJRTta7tBJ@mail.gmail.com>
Subject: Re: Best practices for multiple languages?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1449405600b049a2ebdd4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1449405600b049a2ebdd4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

If you index documents, each in a different language, but all its fields ar=
e
of the same language, then what you can do is the following:

Create separate indexes per language
-------------------------------------------------------
This will work and is not too hard to set up. Requires some maintenance cod=
e
(e.g. directing a search request against the relevant index) but nothing to=
o
complicated. The advantage of using this approach is that you don't risk
running into issues like search for "die" when the language is German, yet
you will find documents in English indexed w/ that word. So your searches
are "language safe". A disadvantage is that if you ever require to do
cross-language operation, like search two languages, you need to do search
federation which is less good. Also, maintenance becomes a slight pain,
because you e.g. need to optimize multiple indexes, make sure they don't tr=
y
to optimize at once, resulting in a sudden burst of IO.

Create one index
-------------------------
Here, you'd use IndexWriter.addDocument(doc, analyzer) method and pass the
proper Analyzer per the doc's language. That way, all your documents are
located in the same index so administration is really simple. They also
don't step on each other toes - each document is analyzed exactly as it
should. You might get into weird situations like the "die" example (fetchin=
g
a document in incorrect language), but that's easily solvable by indexing
for each document a "language" field and use it as a Filter during the
search. You can cache that Filter so that its posting list isn't traversed
for every query but instead only once.

We use the second approach and we're required to support 32 languages. Whil=
e
in most deployments the number never exceeds 3-4 languages, I know of some
that handle > 10. If you're careful enough, it just works.

Hope this helps.

Shai

On Wed, Jan 19, 2011 at 9:44 AM, Paul Libbrecht <paul@hoplahup.net> wrote:

>
> But for this, you need a skillfully designed:
> - set of fields
> - multiplexing analyzer
> - query expansion
> In one of my projects, we do not split language by fields and it's a
> pain... I'm having recurring issues in one sense or the other.
> - the "die" example that Oti s mentioned is a good one: stop-word in
> German, essential verb in English
> - I had recently issues with the contribution of the word Fourier (for th=
e
> name of series): in English it stays fourier, in French in becomes fouri.
> So: if the resource is contributed in French, the indexed value is fouri,
> English seekers won't find it; if the resource is contributed in English,
> French seekers won't find it.
> So my last lesson: always have a whitespace-lowercase unstemmed field als=
o
> at hand and prefer it over the others in your query expansion.
>
> A wiki page should probably be made.
>
> paul
>
>
> Le 19 janv. 2011 =E0 07:53, Vinaya Kumar Thimmappa a =E9crit :
> > I think we should be using lucene with snowball jar's which means one
> index for all languages (ofcourse size of index is always a matter of
> concerns).
> >
> > Hope this helps.
> > -vinaya
> >
> > On Tuesday 18 January 2011 11:23 PM, Clemens Wyss wrote:
> >> What is the "best practice" to support multiple languages, i.e.
> Lucene-Documents that have multiple language content/fields?
> >> Should
> >> a) each language be indexed in a seperate index/directory or should
> >> b) the Documents (in a single directory) hold the diverse localized
> fields?
> >>
> >> We most often will be searching "language dependent" which (at least
> performance wise) mandates one-directory-per-language...
> >>
> >> Any (lucene specific) white papers on this topic?
> >>
> >> Thx in advance
> >> Clemens
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1449405600b049a2ebdd4--

From java-user-return-48422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:54:37 2011
Return-Path: <java-user-return-48422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26700 invoked from network); 19 Jan 2011 08:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:54:37 -0000
Received: (qmail 86399 invoked by uid 500); 19 Jan 2011 08:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86104 invoked by uid 500); 19 Jan 2011 08:54:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86096 invoked by uid 99); 19 Jan 2011 08:54:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:54:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:54:22 +0000
Received: from [10.8.0.14] (cermat.PH-Karlsruhe.DE [193.197.80.3])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0MQat7-1Pph5B3Ic9-00UgWP; Wed, 19 Jan 2011 09:54:01 +0100
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <DDF2F4F8C0BDCC4CA63B2E35115F14B8123D42F62B@FDSWV2130.fda.gov>
Date: Wed, 19 Jan 2011 09:53:58 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <D10613B4-96E4-4D6E-B600-13303A20C1E8@hoplahup.net>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <6420.1295391589@parc.com> <DDF2F4F8C0BDCC4CA63B2E35115F14B8123D42F62B@FDSWV2130.fda.gov>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:MX7A8LO6SfQC8IQpPPbwlNc6V2KOE2hOxflunx/NrsA
 G2gsykq87/DcUSDNSfzFhsjHVA2yNqJzDWly03yzCHLORdBpyZ
 iSZ76S2oZ4V5A32/KT43Y7U/BoTzOBj6Dfwk6moRadjXZ+1M0z
 jTi9vQeOelQcFKQ3a5IWll7FrtXTB38HGG9yB9oLaaoXChpmQ5
 xFgXJ0Yr66g9mcUwaY1PQ5Vs7ZCE3StlVd0t4hIMzM=

Grant Ingersoll <gsingers@apache.org> wrote:

> Where do you get your Lucene/Solr downloads from?
>=20
> [x] ASF Mirrors (linked in our release announcements or via the Lucene =
website)
>=20
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>=20
> [X] I/we build them from source via an SVN/Git checkout.
>=20
> [X] Other (someone in your company mirrors them internally or via a =
downstream project)

For the last one that doesn't seem popular: we sure ship Lucene with =
binary deliveries so anyone in the company using binaries uses that. =
Moreover we do store lucene jars in CVS for older build-systems. I'm =
sure most others do that.

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 08:57:15 2011
Return-Path: <java-user-return-48423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31657 invoked from network); 19 Jan 2011 08:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 08:57:14 -0000
Received: (qmail 90305 invoked by uid 500); 19 Jan 2011 08:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89136 invoked by uid 500); 19 Jan 2011 08:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89125 invoked by uid 99); 19 Jan 2011 08:57:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:57:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 08:57:01 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id BCC9524001
	for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 10:56:39 +0200 (EET)
Message-ID: <4D36A747.7070909@sirma.bg>
Date: Wed, 19 Jan 2011 10:56:39 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

On 18.1.2011 . 23:04, Grant Ingersoll wrote:
> [x] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [x] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a downstream project)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 09:43:24 2011
Return-Path: <java-user-return-48424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3315 invoked from network); 19 Jan 2011 09:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 09:43:24 -0000
Received: (qmail 65277 invoked by uid 500); 19 Jan 2011 09:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64740 invoked by uid 500); 19 Jan 2011 09:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64727 invoked by uid 99); 19 Jan 2011 09:43:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 09:43:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of d.de.wit@o3spaces.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 09:43:08 +0000
Received: by qyk7 with SMTP id 7so354414qyk.14
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 01:42:47 -0800 (PST)
Received: by 10.229.79.12 with SMTP id n12mr451464qck.129.1295430165966; Wed,
 19 Jan 2011 01:42:45 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.94.193 with HTTP; Wed, 19 Jan 2011 01:42:25 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
From: Daan de Wit <d.de.wit@o3spaces.com>
Date: Wed, 19 Jan 2011 10:42:25 +0100
Message-ID: <AANLkTikuWj_ZGf62q9aZtXFxpYu8Ewvuj49TFchmyVj7@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d924dfbd59049a2fd6da
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d924dfbd59049a2fd6da
Content-Type: text/plain; charset=ISO-8859-1

>
> Where do you get your Lucene/Solr downloads from?

>
[] ASF Mirrors (linked in our release announcements or via the Lucene
website)

>
[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

>
[] I/we build them from source via an SVN/Git checkout.

>
[] Other (someone in your company mirrors them internally or via a
downstream project)

Daan de Wit

--00163646d924dfbd59049a2fd6da--

From java-user-return-48425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 09:58:59 2011
Return-Path: <java-user-return-48425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6144 invoked from network); 19 Jan 2011 09:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 09:58:59 -0000
Received: (qmail 88505 invoked by uid 500); 19 Jan 2011 09:58:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87985 invoked by uid 500); 19 Jan 2011 09:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87975 invoked by uid 99); 19 Jan 2011 09:58:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 09:58:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tropicano@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 09:58:46 +0000
Received: by qyk10 with SMTP id 10so644903qyk.14
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 01:58:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Z3AE9sgJH5y1jtwbavbrzAcV4Njb6a+FyBBbzWfChYI=;
        b=n5CEmhd5U8csWsGGBpelrQ2iWun03riMyS2m8fBIEdf0kM2GEQ6oROnvt7SujjxYlX
         tBH92P0mBacnZzQS8/S7FvE6pOH3n1DYE1GOk7BltHsErxcuoWUfh73+WDb0ZaxyNcs1
         xB3dgDLOU1K0LgFdajKCUxDYpfe5JNgo2MzYc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=N3Q2ISYRD5pMvztV1nybatnDRDTsB+Dh2m9UjFJeCfJ8VLJo7GvxBJqHF2xk98U88Q
         fDaa9PqWkAClHH5/zMyZThm3ouPndlPJKlRzdEd7/0qiEdr4qAtmPbZJknZh7FwOjrE1
         os7aTphkI1pJgwGXXhgolNS/ZMUfGceHKULPw=
MIME-Version: 1.0
Received: by 10.224.45.68 with SMTP id d4mr524379qaf.115.1295431105112; Wed,
 19 Jan 2011 01:58:25 -0800 (PST)
Received: by 10.220.51.207 with HTTP; Wed, 19 Jan 2011 01:58:25 -0800 (PST)
Reply-To: tropicano@gmail.com
In-Reply-To: <AANLkTikuWj_ZGf62q9aZtXFxpYu8Ewvuj49TFchmyVj7@mail.gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
	<AANLkTikuWj_ZGf62q9aZtXFxpYu8Ewvuj49TFchmyVj7@mail.gmail.com>
Date: Wed, 19 Jan 2011 10:58:25 +0100
Message-ID: <AANLkTinRGMRB8wo2YN=qvOsTZpzTqsOMxRKvZdXzbwjr@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: heikki <tropicano@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cbac6d9eac2049a300eab

--0015175cbac6d9eac2049a300eab
Content-Type: text/plain; charset=UTF-8

>
> >
> > Where do you get your Lucene/Solr downloads from?
>
> >
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> >
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> >
> [] I/we build them from source via an SVN/Git checkout.
>
> >
> [] Other (someone in your company mirrors them internally or via a
> downstream project)


Heikki Doeleman

--0015175cbac6d9eac2049a300eab--

From java-user-return-48426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 10:06:26 2011
Return-Path: <java-user-return-48426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16882 invoked from network); 19 Jan 2011 10:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 10:06:26 -0000
Received: (qmail 1194 invoked by uid 500); 19 Jan 2011 10:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 865 invoked by uid 500); 19 Jan 2011 10:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 851 invoked by uid 99); 19 Jan 2011 10:06:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 10:06:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.241.168.151] (HELO mua02.mx.cix.co.uk) (212.241.168.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 10:06:09 +0000
X-Envelope-From: dawn@digitorial.co.uk
Received: from mail.lemur.co.uk (host86-142-227-31.range86-142.btcentralplus.com [86.142.227.31])
	by mua02.mx.cix.co.uk (8.13.8/8.13.4) with SMTP id p0JA5mpH024932
	for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 10:05:48 GMT
Received: from [192.168.1.250] ([192.168.1.250])
	by mail.lemur.co.uk
	with hMailServer ; Wed, 19 Jan 2011 10:05:47 +0000
Message-ID: <4D36B744.1060804@digitorial.co.uk>
Date: Wed, 19 Jan 2011 10:04:52 +0000
From: =?ISO-8859-1?Q?Dawn_Zo=EB_Raison?= <dawn@digitorial.co.uk>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.13) Gecko/20101207 Lightning/1.0b2 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


On 18/01/2011 21:04, Grant Ingersoll wrote:
> [X] ASF Mirrors (linked in our release announcements or via the Lucene website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a downstream project)

-- 

Rgds.
*Dawn Raison*
Technical Director, Digitorial Ltd.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 10:08:25 2011
Return-Path: <java-user-return-48427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17263 invoked from network); 19 Jan 2011 10:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 10:08:24 -0000
Received: (qmail 6963 invoked by uid 500); 19 Jan 2011 10:08:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6722 invoked by uid 500); 19 Jan 2011 10:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6714 invoked by uid 99); 19 Jan 2011 10:08:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 10:08:19 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [193.92.148.113] (HELO vvms-exch10.vis-intranet) (193.92.148.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 10:08:12 +0000
Received: from vvms_vector.vis-intranet (192.168.1.35) by
 vvms-exch10.vis-intranet (192.168.1.226) with Microsoft SMTP Server id
 14.0.702.0; Wed, 19 Jan 2011 12:08:40 +0200
Date: Wed, 19 Jan 2011 12:08:40 +0200
From: "Developer PAV(Panagiotis Vlissidis)" <pav@vector.gr>
Sender: "Developer PAV(Panagiotis Vlissidis)" <pav@vector.gr>
To: <java-user@lucene.apache.org>
Message-ID: <16594582.32.1295431720599.JavaMail.javamailuser@localhost>
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF
 Mirrors?(RefNo:115224)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_31_27330470.1295431720599"
Priority: normal
Importance: normal
X-Priority: 3
X-UMSMessageType: Email
X-UMSMessageId: 115224

------=_Part_31_27330470.1295431720599
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-UMSPartId: 103026

[X] ASF Mirrors (linked in our release announcements or via the Lucene

website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)


------=_Part_31_27330470.1295431720599--

From java-user-return-48428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 11:23:49 2011
Return-Path: <java-user-return-48428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44084 invoked from network); 19 Jan 2011 11:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 11:23:49 -0000
Received: (qmail 92844 invoked by uid 500); 19 Jan 2011 11:23:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92471 invoked by uid 500); 19 Jan 2011 11:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92463 invoked by uid 99); 19 Jan 2011 11:23:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 11:23:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 11:23:33 +0000
Received: by ewy20 with SMTP id 20so311639ewy.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 03:23:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=a9pkwd9jnBdHHnXrrJ3kszvKNmTJ+W0S5mEiixm0czY=;
        b=Zg1CZRT6TaDGp0BLzbBm6QyLsZ35+fCmDBNwMixY/SeNFS2H9HXEIk8cyI+dKNxmuG
         RfSEa/cICWHi/a6ka/OAibF/zs9l7dD5G4Z8NTRnoZAUTyalFN0EolIcG6eF1imceiws
         7bRGXlwpRCUeqFf05IksAb58RSPE4PncpW07E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=TV7g8CsS6k8TxrsQTeps4dQxeTmtuq4oJqFRb4uU6tiCIJwff2ZQ85+90PayCKOoyf
         BWnEEt5Um+YdSHRiLFyYBBnY8IKoeOL6V5UJ8Ce94R0ujXyDx71A/OT530hrUFo3zq9+
         hdnHPuXZTC2kbhZcQ8MeuvrydaYRCweLEI2/E=
Received: by 10.14.47.6 with SMTP id s6mr466918eeb.15.1295436193313;
        Wed, 19 Jan 2011 03:23:13 -0800 (PST)
Received: from c-1b8270d5.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-1b8270d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.130.27])
        by mx.google.com with ESMTPS id t50sm5448117eeh.18.2011.01.19.03.23.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 19 Jan 2011 03:23:11 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
From: Karl Wettin <karl.wettin@gmail.com>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 12:23:08 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <2E88513A-A7D3-4FE1-BE64-F3581805EB5C@gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 18, 2011, at 10:04 PM, Grant Ingersoll wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we =
really don't have a good sense of how people get Lucene and Solr for use =
in their application.  Because of this, there has been some talk of =
dropping Maven support for Lucene artifacts (or at least make them =
external).  Before we do that, I'd like to conduct an informal poll of =
actual users out there and see how you get Lucene or Solr.
>=20
> Where do you get your Lucene/Solr downloads from?
>=20
> [] ASF Mirrors (linked in our release announcements or via the Lucene =
website)
>=20
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

Via repo1 using Maven for stable builds.

>=20
> [X] I/we build them from source via an SVN/Git checkout.

For trunk and branch builds.

>=20
> [] Other (someone in your company mirrors them internally or via a =
downstream project)
>=20
> Please put an X in the box that applies to you.  Multiple selections =
are OK (for instance, if one project uses a mirror and another uses =
Maven)
>=20
> Please do not turn this thread into a discussion on Maven and it's =
(de)merits, I simply want to know, informally, where people get their =
JARs from.  In other words, no discussion is necessary (we already have =
that going on dev@lucene.apache.org which you are welcome to join.)
>=20
> Thanks,
> Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 11:43:29 2011
Return-Path: <java-user-return-48429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74441 invoked from network); 19 Jan 2011 11:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 11:43:29 -0000
Received: (qmail 19566 invoked by uid 500); 19 Jan 2011 11:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19258 invoked by uid 500); 19 Jan 2011 11:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19250 invoked by uid 99); 19 Jan 2011 11:43:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 11:43:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pierre.gosse@arisem.com designates 192.93.160.42 as permitted sender)
Received: from [192.93.160.42] (HELO mail.arisem.com) (192.93.160.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 11:43:17 +0000
Received: from enodios.ARISEM.COM (192.168.1.105) by mail.arisem.com
 (192.168.3.42) with Microsoft SMTP Server (TLS) id 8.1.436.0; Wed, 19 Jan
 2011 12:42:52 +0100
Received: from enodios.ARISEM.COM ([192.168.1.105]) by enodios.ARISEM.COM
 ([192.168.1.105]) with mapi; Wed, 19 Jan 2011 12:42:54 +0100
From: Pierre GOSSE <pierre.gosse@arisem.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 19 Jan 2011 12:42:53 +0100
Subject: RE: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Thread-Topic: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Thread-Index: Acu3U0wCsn4rWfuYTKS4JYnyjLaKBAAeqddQ
Message-ID: <4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24A9D@enodios.ARISEM.COM>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: fr-FR, en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene websi=
te)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[X] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a downstre=
am project)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 12:49:55 2011
Return-Path: <java-user-return-48430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72370 invoked from network); 19 Jan 2011 12:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 12:49:54 -0000
Received: (qmail 5346 invoked by uid 500); 19 Jan 2011 12:49:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4986 invoked by uid 500); 19 Jan 2011 12:49:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4962 invoked by uid 99); 19 Jan 2011 12:49:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 12:49:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rafael.rossini@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 12:49:39 +0000
Received: by fxm2 with SMTP id 2so871216fxm.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 04:49:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=zuKN6akbFxT4e/OGOTf0KD52FOB/rBMyeFra//rpriw=;
        b=faCDWkgM/jH9je6UT2srQ/FLa9c3wP0oNgWZuX+9W3UrlgfZg3T1bjMxqoAxVitBVJ
         MPiNHZDECNZqdcwYtOa8gJuBtaBtbvpZihmAJz98HzFueoUygorurYo737urO6pEzFvo
         uEXOWJVHnU0Hq93EZ3663FXNaB2ebtCXeHoeo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=hZ0c4wqEPL9PgrGBavxjWgljCTNHievK5HnujaXqaoc7GY/LCWCOIIAQQ1Z/xuuFy4
         4OJF1dEC5wOQNSrR6PY0G3VhdVBhQK2m28TRW++M+40J6zz5noVVGZMtpXJcZ9srBgRH
         bRx/Quic2d73utBM+aNigqFtg6Vt14jOtFPeA=
MIME-Version: 1.0
Received: by 10.223.74.142 with SMTP id u14mr667403faj.97.1295441358911; Wed,
 19 Jan 2011 04:49:18 -0800 (PST)
Sender: rafael.rossini@gmail.com
Received: by 10.223.123.202 with HTTP; Wed, 19 Jan 2011 04:49:18 -0800 (PST)
In-Reply-To: <4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24A9D@enodios.ARISEM.COM>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
	<4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24A9D@enodios.ARISEM.COM>
Date: Wed, 19 Jan 2011 10:49:18 -0200
X-Google-Sender-Auth: jZGUtur-gq9cmE_vFxgFBXWsSwA
Message-ID: <AANLkTinYX6SsN_8ZDJhKoCT2g1fakyKSeH1XuxBWB-QP@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Rafael Rossini <rafael.rossini@cortex-intelligence.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a505067a7a049a32720b
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a505067a7a049a32720b
Content-Type: text/plain; charset=ISO-8859-1

Where do you get your Lucene/Solr downloads from?

>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
>

--20cf3054a505067a7a049a32720b--

From java-user-return-48431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 13:37:37 2011
Return-Path: <java-user-return-48431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24356 invoked from network); 19 Jan 2011 13:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 13:37:37 -0000
Received: (qmail 69415 invoked by uid 500); 19 Jan 2011 13:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69081 invoked by uid 500); 19 Jan 2011 13:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69073 invoked by uid 99); 19 Jan 2011 13:37:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 13:37:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 13:37:23 +0000
Received: by wwd20 with SMTP id 20so875744wwd.5
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 05:37:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.4.83 with SMTP id 61mr2327090wei.67.1295444222807; Wed, 19
 Jan 2011 05:37:02 -0800 (PST)
Received: by 10.216.245.79 with HTTP; Wed, 19 Jan 2011 05:37:02 -0800 (PST)
In-Reply-To: <OF10F07B67.0BD45E51-ONC125781D.00292208-C125781D.0029513C@biz.lodh.com>
References: <OF10F07B67.0BD45E51-ONC125781D.00292208-C125781D.0029513C@biz.lodh.com>
Date: Wed, 19 Jan 2011 08:37:02 -0500
Message-ID: <AANLkTimbGCcP4BH8-xJyWtXJ3H32UBE_0jSd4cvB2hvk@mail.gmail.com>
Subject: Re: recurrent IO/CPU peaks
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is normal behavior, unfortunately.

The default LogByteSizeMergePolicy does mergeFactor (default 10) small
merges in a row, then must do a 10X bigger merge.  Every 100 small
merges it does a 100X bigger merge, etc.

You can try using the BalancedSegmentMergePolicy (in contrib/misc) --
it tries to reduce the large merges, and never "inadvertently
optimizes" like Lucene's default merge policy.

If you do use it, please report back... we are tempted to improve the
default merge policy by either slurping BSMP into core, or, borrowing
it's approach...

If you are on Linux, you could also try using the
DirectIOLinuxDirectory, which avoid messing up the OS's buffer cache
due to merging.  But that dir impl is experimental, and you can't just
"use" it across the board (you should use it only for IndexWriter, and
possibly only when merges are kicking off).

Mike

On Wed, Jan 19, 2011 at 2:31 AM,  <v.sevel@lombardodier.com> wrote:
>
> Hi,
>
> I have an application that continously indexes 140 documents/s (we commit
> after each second) using lucene 2.9. at the beginning of the test the ind=
ex
> is empty. during the test, I monitored this application, specifically in
> terms of IOs and CPU.
>
> what I have seen, is that, on a regular basis (a few minutes), there are
> small peaks both for IOs and CPU, and once in a while, there is a much
> higher peak. the small peaks are small enough that do not disrupt the
> system, however, the high peak tends to steal some resources out of the
> other processes, and gets disruptive when the machine is loaded.
>
> I logged the internal activity of the lucene writer during the high peak,
> and what I have seen that could correlate is the number of merge document=
s
> that suddenly grows, and executes shortly after another merge:
>
> =A0 =A0 =A0 =A0 Line 131: 17:46:26.268 IW 0 [Lucene Merge Thread #215]: m=
erge: total
> 1391 docs
> =A0 =A0 =A0 =A0 Line 539: 17:46:36.449 IW 0 [Lucene Merge Thread #216]: m=
erge: total
> 1462 docs
> =A0 =A0 =A0 =A0 Line 570: 17:46:36.565 IW 0 [Lucene Merge Thread #216]: m=
erge: total
> 13753 docs
> =A0 =A0 =A0 =A0 Line 597: 17:46:37.381 IW 0 [Lucene Merge Thread #216]: m=
erge: total
> 171593 docs
> =A0 =A0 =A0 =A0 Line 991: 17:46:46.503 IW 0 [Lucene Merge Thread #217]: m=
erge: total
> 1537 docs
> =A0 =A0 =A0 =A0 Line 1439: 17:46:57.602 IW 0 [Lucene Merge Thread #218]: =
merge:
> total 1710 docs
> =A0 =A0 =A0 =A0 Line 1874: 17:47:07.680 IW 0 [Lucene Merge Thread #219]: =
merge:
> total 1532 docs
> =A0 =A0 =A0 =A0 Line 2282: 17:47:17.804 IW 0 [Lucene Merge Thread #220]: =
merge:
> total 1555 docs
>
>
> Assuming this is a normal behavior, are there ways to minimize the amplit=
ude
> of the high peaks?
>
> I am attaching the lucene writer log and the systar report.
>
> Thanks for the help.
>
>
>
>
> Vincent
>
>
>
>
> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to
> whom it is addressed. It may contain information that is
> privileged and confidential. Its content does not
> constitute a formal commitment by Lombard Odier
> Darier Hentsch & Cie or any of its branches or affiliates.
> If you are not the intended recipient of this message,
> kindly notify the sender immediately and destroy this
> message. Thank You.
> *****************************************************************
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 15:21:32 2011
Return-Path: <java-user-return-48432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79314 invoked from network); 19 Jan 2011 15:21:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 15:21:31 -0000
Received: (qmail 92688 invoked by uid 500); 19 Jan 2011 15:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91890 invoked by uid 500); 19 Jan 2011 15:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91867 invoked by uid 99); 19 Jan 2011 15:21:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 15:21:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amel.fraisse@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 15:21:12 +0000
Received: by vws18 with SMTP id 18so328927vws.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 07:20:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=I4iLhTfs4LlcRcwQPVkf8K59jMeLf4gaUSqLSJkRY4s=;
        b=vo3Ri0aeRO2Gd0RyXCRkc+fyVuGd/wO/DgRqmCVshHdxT1eQFrMxdoXzeFBBuUftvB
         InKUctzLDYL2Pn5Bg29smQ0e86G1Up+Zo01dgsmDCe38MBrhdbXGuHyXf5UMin6hPoGM
         Ue44pLqZnRPTJCCiRU38ZOf33TvoWcJn9tpUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jJcCgnFvV5NMNYNcfjfC41RnhDFi3x7NZGTFfA+0F2evw/cLnEEodYgetKQaXWX2bw
         g/JrIeYamnboS/7gZTCLnpD/hldRmNPNJnWEMJLXzT8HYs/z4tUaVGbMxwK9wgmNAaMW
         PonEOGwQKbSIZG+ZVy+BmYh3nQl6mjgJgfPok=
MIME-Version: 1.0
Received: by 10.229.245.4 with SMTP id ls4mr683101qcb.208.1295450443998; Wed,
 19 Jan 2011 07:20:43 -0800 (PST)
Received: by 10.229.225.69 with HTTP; Wed, 19 Jan 2011 07:20:43 -0800 (PST)
Date: Wed, 19 Jan 2011 16:20:43 +0100
Message-ID: <AANLkTinyBRJ7NO6C_Lf0ATfsuG_XcX=_djtyOnr0PRX3@mail.gmail.com>
Subject: QueryWeight
From: Amel Fraisse <amel.fraisse@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64bb7ba89e869049a348fb7

--0016e64bb7ba89e869049a348fb7
Content-Type: text/plain; charset=ISO-8859-1

Hello,

When I display Explanation of Lucene Scoring, sometimes the queryWeight
component of the score doesn't show, and it seems it's not even calculated
into the score. And sometimes it appear in the scoring. That seems wrong.
Has anyone run into this, and fixed it?

And why when the queryWeight is calculated the Field contain 2 NGrams ?

 I am using the following Analyzer:
<analyzer>
            <tokenizer class="solr.LetterTokenizerFactory"/>
            <!--tokenizer class="solr.WhitespaceTokenizerFactory"/-->
            <filter
class="fr.splayce.analysis.detection.TokenFilterNgramFactory"
nGramSize="8"/>
            <!--filter class="solr.StopFilterFactory" words="stopwords.txt"
ignoreCase="true"/-->
  </analyzer>

 1.0 = (MATCH) fieldWeight(contenu:No doubt my dear friend no doubt but in
0), product of:
    1.0 = tf(termFreq(contenu:No doubt my dear friend no doubt but)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:doubt my dear friend no doubt but in in
0), product of:
    1.0 = tf(termFreq(contenu:doubt my dear friend no doubt but in)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:my dear friend no doubt but in the in
0), product of:
    1.0 = tf(termFreq(contenu:my dear friend no doubt but in the)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:dear friend no doubt but in the
meanwhile in 0), product of:
    1.0 = tf(termFreq(contenu:dear friend no doubt but in the meanwhile)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:friend no doubt but in the meanwhile
suppose in 0), product of:
    1.0 = tf(termFreq(contenu:friend no doubt but in the meanwhile
suppose)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:no doubt but in the meanwhile suppose we
in 0), product of:
    1.0 = tf(termFreq(contenu:no doubt but in the meanwhile suppose we)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:doubt but in the meanwhile suppose we
talk in 0), product of:
    1.0 = tf(termFreq(contenu:doubt but in the meanwhile suppose we talk)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:but in the meanwhile suppose we talk of
in 0), product of:
    1.0 = tf(termFreq(contenu:but in the meanwhile suppose we talk of)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:in the meanwhile suppose we talk of this
in 0), product of:
    1.0 = tf(termFreq(contenu:in the meanwhile suppose we talk of this)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  4.0 = weight(contenu:"the meanwhile suppose we talk of this annuity
meanwhile suppose we talk of this annuity Shall" in 0), product of:
    2.0 = queryWeight(contenu:"the meanwhile suppose we talk of this annuity
meanwhile suppose we talk of this annuity Shall"), product of:
      2.0 = idf(contenu: the meanwhile suppose we talk of this annuity=1
meanwhile suppose we talk of this annuity Shall=1)
      1.0 = queryNorm
    2.0 = fieldWeight(contenu:"the meanwhile suppose we talk of this annuity
meanwhile suppose we talk of this annuity Shall" in 0), product of:
      1.0 = tf(phraseFreq=1.0)
      2.0 = idf(contenu: the meanwhile suppose we talk of this annuity=1
meanwhile suppose we talk of this annuity Shall=1)
      1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:suppose we talk of this annuity Shall we
in 0), product of:
    1.0 = tf(termFreq(contenu:suppose we talk of this annuity Shall we)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)
  1.0 = (MATCH) fieldWeight(contenu:we talk of this annuity Shall we say in
0), product of:
    1.0 = tf(termFreq(contenu:we talk of this annuity Shall we say)=1)
    1.0 = idf(docFreq=1, maxDocs=10)
    1.0 = fieldNorm(field=contenu, doc=0)

Thank you.
Amel.

--0016e64bb7ba89e869049a348fb7--

From java-user-return-48433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 17:59:54 2011
Return-Path: <java-user-return-48433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16972 invoked from network); 19 Jan 2011 17:59:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 17:59:53 -0000
Received: (qmail 95224 invoked by uid 500); 19 Jan 2011 17:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94776 invoked by uid 500); 19 Jan 2011 17:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94760 invoked by uid 99); 19 Jan 2011 17:59:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 17:59:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luca.rondanini@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 17:59:43 +0000
Received: by fxm2 with SMTP id 2so1199538fxm.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 09:59:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=1dfJLNSyCmnvqrJzeGzFzQZRAyhoGdSHRpv/955cW5Q=;
        b=FTGkgqOGWNiHqnYCr6EfFsXPcMV7yfVnJ0r7yfveE/mNsPggESUHxGQB5+fYM0o3R9
         t/2+UQnxzyChnIPhQjfjLMIrom+kdY8wc3hyNuvWCC6momqgwhdRO6fsNvVbFOYWrXek
         SoLaBH3x3EHGiqh4NXZ2C4bZvr1sPOPnnKeQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UIh9P/MGHP6IrBdLfiHKSDdFDeqUrMptS+Y9bUmJg3/tLKCZkGhTIdmVhElZvoDP0C
         b1BY+F6cfdFRdjQxFzMTGd/JPucWUYAEqh6MF+/cIZl9/L2bapF9wqST/Gd9q0CwWAng
         SsrhIJMGuNFI7Hh1GccYmwDN5kZYZISneScIs=
MIME-Version: 1.0
Received: by 10.223.112.1 with SMTP id u1mr966413fap.109.1295459961609; Wed,
 19 Jan 2011 09:59:21 -0800 (PST)
Received: by 10.223.74.4 with HTTP; Wed, 19 Jan 2011 09:59:21 -0800 (PST)
In-Reply-To: <AANLkTimJ9-7t2W9EM10KgnvEjnD+jetCWAMJRTta7tBJ@mail.gmail.com>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
	<4D368A6F.7090304@ariba.com>
	<29145E83-65E7-486A-B973-876C2EF0D2CB@hoplahup.net>
	<AANLkTimJ9-7t2W9EM10KgnvEjnD+jetCWAMJRTta7tBJ@mail.gmail.com>
Date: Wed, 19 Jan 2011 09:59:21 -0800
Message-ID: <AANLkTimobX9gETLpQfr8ZuR3+tOSAFw9mN9yQsY1v14L@mail.gmail.com>
Subject: Re: Best practices for multiple languages?
From: Luca Rondanini <luca.rondanini@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a4e5d51d74049a36c6b3

--001636c5a4e5d51d74049a36c6b3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

why not just using the StandardAnalyzer? it works pretty well even with
Asian languages!



On Wed, Jan 19, 2011 at 12:23 AM, Shai Erera <serera@gmail.com> wrote:

> If you index documents, each in a different language, but all its fields
> are
> of the same language, then what you can do is the following:
>
> Create separate indexes per language
> -------------------------------------------------------
> This will work and is not too hard to set up. Requires some maintenance
> code
> (e.g. directing a search request against the relevant index) but nothing
> too
> complicated. The advantage of using this approach is that you don't risk
> running into issues like search for "die" when the language is German, ye=
t
> you will find documents in English indexed w/ that word. So your searches
> are "language safe". A disadvantage is that if you ever require to do
> cross-language operation, like search two languages, you need to do searc=
h
> federation which is less good. Also, maintenance becomes a slight pain,
> because you e.g. need to optimize multiple indexes, make sure they don't
> try
> to optimize at once, resulting in a sudden burst of IO.
>
> Create one index
> -------------------------
> Here, you'd use IndexWriter.addDocument(doc, analyzer) method and pass th=
e
> proper Analyzer per the doc's language. That way, all your documents are
> located in the same index so administration is really simple. They also
> don't step on each other toes - each document is analyzed exactly as it
> should. You might get into weird situations like the "die" example
> (fetching
> a document in incorrect language), but that's easily solvable by indexing
> for each document a "language" field and use it as a Filter during the
> search. You can cache that Filter so that its posting list isn't traverse=
d
> for every query but instead only once.
>
> We use the second approach and we're required to support 32 languages.
> While
> in most deployments the number never exceeds 3-4 languages, I know of som=
e
> that handle > 10. If you're careful enough, it just works.
>
> Hope this helps.
>
> Shai
>
> On Wed, Jan 19, 2011 at 9:44 AM, Paul Libbrecht <paul@hoplahup.net> wrote=
:
>
> >
> > But for this, you need a skillfully designed:
> > - set of fields
> > - multiplexing analyzer
> > - query expansion
> > In one of my projects, we do not split language by fields and it's a
> > pain... I'm having recurring issues in one sense or the other.
> > - the "die" example that Oti s mentioned is a good one: stop-word in
> > German, essential verb in English
> > - I had recently issues with the contribution of the word Fourier (for
> the
> > name of series): in English it stays fourier, in French in becomes four=
i.
> > So: if the resource is contributed in French, the indexed value is four=
i,
> > English seekers won't find it; if the resource is contributed in Englis=
h,
> > French seekers won't find it.
> > So my last lesson: always have a whitespace-lowercase unstemmed field
> also
> > at hand and prefer it over the others in your query expansion.
> >
> > A wiki page should probably be made.
> >
> > paul
> >
> >
> > Le 19 janv. 2011 =C3=A0 07:53, Vinaya Kumar Thimmappa a =C3=A9crit :
> > > I think we should be using lucene with snowball jar's which means one
> > index for all languages (ofcourse size of index is always a matter of
> > concerns).
> > >
> > > Hope this helps.
> > > -vinaya
> > >
> > > On Tuesday 18 January 2011 11:23 PM, Clemens Wyss wrote:
> > >> What is the "best practice" to support multiple languages, i.e.
> > Lucene-Documents that have multiple language content/fields?
> > >> Should
> > >> a) each language be indexed in a seperate index/directory or should
> > >> b) the Documents (in a single directory) hold the diverse localized
> > fields?
> > >>
> > >> We most often will be searching "language dependent" which (at least
> > performance wise) mandates one-directory-per-language...
> > >>
> > >> Any (lucene specific) white papers on this topic?
> > >>
> > >> Thx in advance
> > >> Clemens
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--001636c5a4e5d51d74049a36c6b3--

From java-user-return-48434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 18:17:05 2011
Return-Path: <java-user-return-48434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46925 invoked from network); 19 Jan 2011 18:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 18:17:04 -0000
Received: (qmail 29187 invoked by uid 500); 19 Jan 2011 18:17:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28663 invoked by uid 500); 19 Jan 2011 18:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28655 invoked by uid 99); 19 Jan 2011 18:16:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:16:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:16:52 +0000
Received: from [10.8.0.14] (cermat.PH-Karlsruhe.DE [193.197.80.3])
	by mrelayeu.kundenserver.de (node=mrbap2) with ESMTP (Nemesis)
	id 0M5qIb-1QU9vZ0bkX-00yTDS; Wed, 19 Jan 2011 19:16:29 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Best practices for multiple languages?
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <AANLkTimobX9gETLpQfr8ZuR3+tOSAFw9mN9yQsY1v14L@mail.gmail.com>
Date: Wed, 19 Jan 2011 19:16:25 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <F1496005-4F17-469F-B295-70CEA429E777@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <4D368A6F.7090304@ariba.com> <29145E83-65E7-486A-B973-876C2EF0D2CB@hoplahup.net> <AANLkTimJ9-7t2W9EM10KgnvEjnD+jetCWAMJRTta7tBJ@mail.gmail.com> <AANLkTimobX9gETLpQfr8ZuR3+tOSAFw9mN9yQsY1v14L@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:AY7b4MbBzncrlZiGk6Gr9Rh3ohuAEXRa4TkDL0EtmNv
 ApiLsb+Iv19ymHd25sNMjhREdeNOQHPXmoa9HvU5b16Pjv3zGs
 Q60vxCdIhH+HYuMIb5/pMaBt6mlfveSH5NJiL2Kcl4xovGnrpT
 KZ3e2cN1uv5gBtxZDF1CNq6ROYuSl0WwqcKtuq14xDz1z02TfH
 FRiJOUnzBPe1XPBpriB1qamxNPTbjVu5blww2ibjCg=

Because it does not find "junks" when you search "junk".
Or... chevaux when you search cheval.

paul


Le 19 janv. 2011 =E0 18:59, Luca Rondanini a =E9crit :

> why not just using the StandardAnalyzer? it works pretty well even =
with
> Asian languages!
>=20
>=20
>=20
> On Wed, Jan 19, 2011 at 12:23 AM, Shai Erera <serera@gmail.com> wrote:
>=20
>> If you index documents, each in a different language, but all its =
fields
>> are
>> of the same language, then what you can do is the following:
>>=20
>> Create separate indexes per language
>> -------------------------------------------------------
>> This will work and is not too hard to set up. Requires some =
maintenance
>> code
>> (e.g. directing a search request against the relevant index) but =
nothing
>> too
>> complicated. The advantage of using this approach is that you don't =
risk
>> running into issues like search for "die" when the language is =
German, yet
>> you will find documents in English indexed w/ that word. So your =
searches
>> are "language safe". A disadvantage is that if you ever require to do
>> cross-language operation, like search two languages, you need to do =
search
>> federation which is less good. Also, maintenance becomes a slight =
pain,
>> because you e.g. need to optimize multiple indexes, make sure they =
don't
>> try
>> to optimize at once, resulting in a sudden burst of IO.
>>=20
>> Create one index
>> -------------------------
>> Here, you'd use IndexWriter.addDocument(doc, analyzer) method and =
pass the
>> proper Analyzer per the doc's language. That way, all your documents =
are
>> located in the same index so administration is really simple. They =
also
>> don't step on each other toes - each document is analyzed exactly as =
it
>> should. You might get into weird situations like the "die" example
>> (fetching
>> a document in incorrect language), but that's easily solvable by =
indexing
>> for each document a "language" field and use it as a Filter during =
the
>> search. You can cache that Filter so that its posting list isn't =
traversed
>> for every query but instead only once.
>>=20
>> We use the second approach and we're required to support 32 =
languages.
>> While
>> in most deployments the number never exceeds 3-4 languages, I know of =
some
>> that handle > 10. If you're careful enough, it just works.
>>=20
>> Hope this helps.
>>=20
>> Shai
>>=20
>> On Wed, Jan 19, 2011 at 9:44 AM, Paul Libbrecht <paul@hoplahup.net> =
wrote:
>>=20
>>>=20
>>> But for this, you need a skillfully designed:
>>> - set of fields
>>> - multiplexing analyzer
>>> - query expansion
>>> In one of my projects, we do not split language by fields and it's a
>>> pain... I'm having recurring issues in one sense or the other.
>>> - the "die" example that Oti s mentioned is a good one: stop-word in
>>> German, essential verb in English
>>> - I had recently issues with the contribution of the word Fourier =
(for
>> the
>>> name of series): in English it stays fourier, in French in becomes =
fouri.
>>> So: if the resource is contributed in French, the indexed value is =
fouri,
>>> English seekers won't find it; if the resource is contributed in =
English,
>>> French seekers won't find it.
>>> So my last lesson: always have a whitespace-lowercase unstemmed =
field
>> also
>>> at hand and prefer it over the others in your query expansion.
>>>=20
>>> A wiki page should probably be made.
>>>=20
>>> paul
>>>=20
>>>=20
>>> Le 19 janv. 2011 =E0 07:53, Vinaya Kumar Thimmappa a =E9crit :
>>>> I think we should be using lucene with snowball jar's which means =
one
>>> index for all languages (ofcourse size of index is always a matter =
of
>>> concerns).
>>>>=20
>>>> Hope this helps.
>>>> -vinaya
>>>>=20
>>>> On Tuesday 18 January 2011 11:23 PM, Clemens Wyss wrote:
>>>>> What is the "best practice" to support multiple languages, i.e.
>>> Lucene-Documents that have multiple language content/fields?
>>>>> Should
>>>>> a) each language be indexed in a seperate index/directory or =
should
>>>>> b) the Documents (in a single directory) hold the diverse =
localized
>>> fields?
>>>>>=20
>>>>> We most often will be searching "language dependent" which (at =
least
>>> performance wise) mandates one-directory-per-language...
>>>>>=20
>>>>> Any (lucene specific) white papers on this topic?
>>>>>=20
>>>>> Thx in advance
>>>>> Clemens
>>>>>=20
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>=20
>>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 18:22:41 2011
Return-Path: <java-user-return-48435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54099 invoked from network); 19 Jan 2011 18:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 18:22:41 -0000
Received: (qmail 35303 invoked by uid 500); 19 Jan 2011 18:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35081 invoked by uid 500); 19 Jan 2011 18:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35070 invoked by uid 99); 19 Jan 2011 18:22:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:22:35 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:22:30 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <316701(1)>; Wed, 19 Jan 2011 10:21:52 PST
To: java-user@lucene.apache.org
Subject: Re: AW: Best practices for multiple languages?
In-reply-to: <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp>
Comments: In-reply-to Clemens Wyss <clemensdev@mysign.ch>
    message dated "Tue, 18 Jan 2011 23:09:21 -0800."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Wed, 19 Jan 2011 10:21:51 PST
Message-ID: <36966.1295461311@parc.com>
From: Bill Janssen <janssen@parc.com>

Clemens Wyss <clemensdev@mysign.ch> wrote:

> > 1) Docs in different languages -- every document is one language
> > 2) Each document has fields in different languages
> We mainly have 1)-models

I've recently done this for UpLib.  I run a language-guesser over the
document to identify the primary language when the document comes into
my repository, and save that language as part of the metadata for my
document.  When UpLib indexes the document into Lucene, it uses that
language as a key into a table of available Analyzers, and uses the
selected Analyzer for the document's text.  (I'm actually doing this on
a per-paragraph level now, but the principle is the same.)

The tricky part is the query parser.  My extended query parser allows
a pseudo-field "_query_language" to specify that the query itself is in
a particular language, in which case the appropriate Analyzer is used
for the query.

You can read the code for all this at
<http://uplib.parc.com/hg/uplib/file/e29e36f751f7/python/uplib/indexing.py>.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 18:36:46 2011
Return-Path: <java-user-return-48436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59890 invoked from network); 19 Jan 2011 18:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 18:36:45 -0000
Received: (qmail 62372 invoked by uid 500); 19 Jan 2011 18:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62089 invoked by uid 500); 19 Jan 2011 18:36:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62075 invoked by uid 99); 19 Jan 2011 18:36:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:36:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.186] (HELO moutng.kundenserver.de) (212.227.126.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 18:36:34 +0000
Received: from [10.8.0.14] (cermat.PH-Karlsruhe.DE [193.197.80.3])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0Lg6qx-1Q36oB0x3L-00pHsL; Wed, 19 Jan 2011 19:36:12 +0100
Subject: Re: AW: Best practices for multiple languages?
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=iso-8859-1
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <36966.1295461311@parc.com>
Date: Wed, 19 Jan 2011 19:36:08 +0100
Cc: janssen@parc.com
Content-Transfer-Encoding: quoted-printable
Message-Id: <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:r7dksDMTc0w5WTADQnNWHl/XQPnba8lf7UoYxd1dFLR
 5MuKewPogC7/ZBoTicxeFy80S5q9C7RwUXP7BDBatT84a89aja
 OameenIzftAV4Kt0fBu8av3vSwvAPmPOBp8oF4ohR4xECKph/W
 xxP6sI+fLnB58k6dQGiA6dXuG4ReKiV3ckrM0R9e7TqQiPYd/p
 JsGY32Mqc+Nc4LyY7fNPPKIFyKR6oBGv0HGfFFOfyo=

So you are only indexing "analyzed" and querying "analyzed". Is that =
correct?
Wouldn't it be better to prefer precise matches (a field that is =
analyzed with StandardAnalyzer for example) but also allow matches are =
stemmed.

paul


Le 19 janv. 2011 =E0 19:21, Bill Janssen a =E9crit :

> Clemens Wyss <clemensdev@mysign.ch> wrote:
>=20
>>> 1) Docs in different languages -- every document is one language
>>> 2) Each document has fields in different languages
>> We mainly have 1)-models
>=20
> I've recently done this for UpLib.  I run a language-guesser over the
> document to identify the primary language when the document comes into
> my repository, and save that language as part of the metadata for my
> document.  When UpLib indexes the document into Lucene, it uses that
> language as a key into a table of available Analyzers, and uses the
> selected Analyzer for the document's text.  (I'm actually doing this =
on
> a per-paragraph level now, but the principle is the same.)
>=20
> The tricky part is the query parser.  My extended query parser allows
> a pseudo-field "_query_language" to specify that the query itself is =
in
> a particular language, in which case the appropriate Analyzer is used
> for the query.
>=20
> You can read the code for all this at
> =
<http://uplib.parc.com/hg/uplib/file/e29e36f751f7/python/uplib/indexing.py=
>.
>=20
> Bill
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 18:52:22 2011
Return-Path: <java-user-return-48437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64281 invoked from network); 19 Jan 2011 18:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 18:52:22 -0000
Received: (qmail 91838 invoked by uid 500); 19 Jan 2011 18:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91700 invoked by uid 500); 19 Jan 2011 18:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 54630 invoked by uid 99); 19 Jan 2011 08:35:45 -0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_DSN,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cn.mingyuan@foxmail.com designates 64.71.138.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qq.com; s=s0907;
	t=1295426109; bh=UUKsL38CyVkhgW3WoMRN3YBEvhUa4Lzpny8Ect83hl8=;
	h=X-QQ-SSF:X-QQ-BUSINESS-ORIGIN:X-Originating-IP:X-QQ-STYLE:
	 X-QQ-mid:From:To:Subject:Mime-Version:Content-Type:
	 Content-Transfer-Encoding:Date:X-Priority:Message-ID:X-QQ-MIME:
	 X-Mailer:X-QQ-Mailer:X-QQ-ReplyHash;
	b=bHrl9xtT9ySvjEkaipxQ95faUfsaZB1PHtP1B5bIFc8zuuOSEfNyb/PgzE6IWzY52
	 TL8JPV1wOCkG+IbCXN0hpDemDNHUFLcTQhnXXiYmX8IcyvKBC1Z2AGjc0aNsKry
X-QQ-SSF:00000000000000F0
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 159.226.193.235
X-QQ-STYLE:
X-QQ-mid:webmail68t1295426106t3543812
From: "=?ISO-8859-1?B?Y24ubWluZ3l1YW4=?=" <cn.mingyuan@foxmail.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D36A23A_DF8628B0_591D7939"
Content-Transfer-Encoding: 8Bit
Date: Wed, 19 Jan 2011 16:35:06 +0800
X-Priority: 3
Message-ID: <tencent_26588F0F67A0D6CD1E9EC62D@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 2266028191

------=_NextPart_4D36A23A_DF8628B0_591D7939
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

W1hdIEFTRiBNaXJyb3JzIChsaW5rZWQgaW4gb3VyIHJlbGVhc2UgYW5ub3VuY2VtZW50cyBv
ciB2aWEgdGhlIEx1Y2VuZQ0Kd2Vic2l0ZSkNCg0KW10gTWF2ZW4gcmVwb3NpdG9yeSAod2hl
dGhlciB5b3UgdXNlIE1hdmVuLCBBbnQrSXZ5LCBCdWlsZHIsIGV0Yy4pDQoNCltdIEkvd2Ug
YnVpbGQgdGhlbSBmcm9tIHNvdXJjZSB2aWEgYW4gU1ZOL0dpdCBjaGVja291dC4NCg0KW10g
T3RoZXIgKHNvbWVvbmUgaW4geW91ciBjb21wYW55IG1pcnJvcnMgdGhlbSBpbnRlcm5hbGx5
IG9yIHZpYSBhDQpkb3duc3RyZWFtIHByb2plY3QpDQoNCiAgDQogICAgICANCiAgICANCiAg
IA0KICANCiAgLS0tLS0tLS0tLS0tLS0tLS0tIE9yaWdpbmFsIC0tLS0tLS0tLS0tLS0tLS0t
LQ0KICBGcm9tOiAgIlBhdHJpY2sgU2FtYm9yc2tpIjxwczE5OTFAZ29vZ2xlbWFpbC5jb20+
Ow0KIERhdGU6ICBXZWQsIEphbiAxOSwgMjAxMSAwNToxNSBBTQ0KIFRvOiAgImphdmEtdXNl
ciI8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPjsgDQogQ2M6ICAic29sci11c2VyIjxz
b2xyLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+OyANCiBTdWJqZWN0OiAgUmU6IFtQT0xMXSBX
aGVyZSBkbyB5b3UgZ2V0IEx1Y2VuZS9Tb2xyIGZyb20/IE1hdmVuPyBBU0YgTWlycm9ycz8N
Cg0KICANCltYXSBBU0YgTWlycm9ycyAobGlua2VkIGluIG91ciByZWxlYXNlIGFubm91bmNl
bWVudHMgb3IgdmlhIHRoZSBMdWNlbmUNCndlYnNpdGUpDQoNCltdIE1hdmVuIHJlcG9zaXRv
cnkgKHdoZXRoZXIgeW91IHVzZSBNYXZlbiwgQW50K0l2eSwgQnVpbGRyLCBldGMuKQ0KDQpb
XSBJL3dlIGJ1aWxkIHRoZW0gZnJvbSBzb3VyY2UgdmlhIGFuIFNWTi9HaXQgY2hlY2tvdXQu
DQoNCltdIE90aGVyIChzb21lb25lIGluIHlvdXIgY29tcGFueSBtaXJyb3JzIHRoZW0gaW50
ZXJuYWxseSBvciB2aWEgYQ0KZG93bnN0cmVhbSBwcm9qZWN0KQ==

------=_NextPart_4D36A23A_DF8628B0_591D7939--


From java-user-return-48438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 19:03:50 2011
Return-Path: <java-user-return-48438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70096 invoked from network); 19 Jan 2011 19:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 19:03:50 -0000
Received: (qmail 21678 invoked by uid 500); 19 Jan 2011 19:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21617 invoked by uid 500); 19 Jan 2011 19:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21609 invoked by uid 99); 19 Jan 2011 19:03:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 19:03:47 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.149.205] (HELO na3sys009aog111.obsmtp.com) (74.125.149.205)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jan 2011 19:03:38 +0000
Received: from source ([209.85.161.54]) (using TLSv1) by na3sys009aob111.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTTc1c1gh9kBXq2TJrfsrhuBQy7N6Gx25@postini.com; Wed, 19 Jan 2011 11:03:17 PST
Received: by mail-fx0-f54.google.com with SMTP id 16so1211458fxm.13
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 11:03:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.107.147 with SMTP id b19mr1044413fap.118.1295463795184;
 Wed, 19 Jan 2011 11:03:15 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Wed, 19 Jan 2011 11:03:15 -0800 (PST)
Date: Wed, 19 Jan 2011 11:03:15 -0800
Message-ID: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
Subject: search on a field that is NOT_ANALYZED
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5afbe54d3e8049a37ab3d
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5afbe54d3e8049a37ab3d
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I am trying to use
*IndexSearcher<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28org.apache.lucene.store.Directory%29>
* to retrieve a doc from an existing index by reading a field
that is NOT_ANALYZED. I am trying to use that field as a unique id to
retrieve a specific
document. The id will be a url. is this possible to do? which type of query
should I use?

Thank you.

Yuhan

--001636c5afbe54d3e8049a37ab3d--

From java-user-return-48439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 19:57:34 2011
Return-Path: <java-user-return-48439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44598 invoked from network); 19 Jan 2011 19:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 19:57:34 -0000
Received: (qmail 38825 invoked by uid 500); 19 Jan 2011 19:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38391 invoked by uid 500); 19 Jan 2011 19:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38251 invoked by uid 99); 19 Jan 2011 19:57:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 19:57:28 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 19:57:22 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <510837(2)>; Wed, 19 Jan 2011 11:56:34 PST
To: java-user@lucene.apache.org
Subject: Re: AW: Best practices for multiple languages?
In-reply-to: <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net>
Comments: In-reply-to Paul Libbrecht <paul@hoplahup.net>
    message dated "Wed, 19 Jan 2011 10:36:08 -0800."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Date: Wed, 19 Jan 2011 11:56:34 PST
Message-ID: <39362.1295466994@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Libbrecht <paul@hoplahup.net> wrote:

> So you are only indexing "analyzed" and querying "analyzed". Is that corr=
ect?

Yes, that's correct.  I fall back to StandardAnalyzer if no
language-specific analyzer is available.

> Wouldn't it be better to prefer precise matches (a field that is
> analyzed with StandardAnalyzer for example) but also allow matches are
> stemmed.

StandardAnalyzer isn't quite precise, is it?  StandardFilter does some
kind of English-centric alterations to things.

Perhaps the approach you suggest would be slightly better, but I'd have
to see numbers on that from some reasonable corpus to be convinced it
would be worth it.

Bill

>=20
> paul
>=20
>=20
> Le 19 janv. 2011 =C3=A0 19:21, Bill Janssen a =C3=A9crit :
>=20
> > Clemens Wyss <clemensdev@mysign.ch> wrote:
> >=20
> >>> 1) Docs in different languages -- every document is one language
> >>> 2) Each document has fields in different languages
> >> We mainly have 1)-models
> >=20
> > I've recently done this for UpLib.  I run a language-guesser over the
> > document to identify the primary language when the document comes into
> > my repository, and save that language as part of the metadata for my
> > document.  When UpLib indexes the document into Lucene, it uses that
> > language as a key into a table of available Analyzers, and uses the
> > selected Analyzer for the document's text.  (I'm actually doing this on
> > a per-paragraph level now, but the principle is the same.)
> >=20
> > The tricky part is the query parser.  My extended query parser allows
> > a pseudo-field "_query_language" to specify that the query itself is in
> > a particular language, in which case the appropriate Analyzer is used
> > for the query.
> >=20
> > You can read the code for all this at
> > <http://uplib.parc.com/hg/uplib/file/e29e36f751f7/python/uplib/indexing=
.py>.
> >=20
> > Bill
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 20:12:33 2011
Return-Path: <java-user-return-48440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65061 invoked from network); 19 Jan 2011 20:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 20:12:33 -0000
Received: (qmail 68385 invoked by uid 500); 19 Jan 2011 20:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68288 invoked by uid 500); 19 Jan 2011 20:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68179 invoked by uid 99); 19 Jan 2011 20:12:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 20:12:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 20:12:22 +0000
Received: from ip-2-204-180-63.web.vodafone.de (ip-2-204-180-63.web.vodafone.de [2.204.180.63])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0MMJXF-1Pc60w1gEP-008m2N; Wed, 19 Jan 2011 21:12:00 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: search on a field that is NOT_ANALYZED
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
Date: Wed, 19 Jan 2011 21:11:56 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <016D7925-670A-4EC9-801D-F1185383305C@hoplahup.net>
References: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:CMr+AxGZhIbKh5f6aYqzLFOjYiwdWKrxzGuvEpJ6o1E
 LSwmLstPLuhcnSvOuNjw2nfpu/9K8AkNyNx8+DmdZ1J6S5Giyx
 HQtwq8HQHsqFsgNzPPxiKPEsUfpzAj+ZhV1VwK4cM7yASH0AB4
 YxFid0hEuEC1o+LAD8z2wpHzeyUBFBK5xQ5fPy/EyHeHjjrdIy
 3M2N8Oirc+rBUkJUoLBkNIlOuvZ8KgSzeLS5gXObjs=

I think you should use a TermQuery.

paul


Le 19 janv. 2011 =E0 20:03, Yuhan Zhang a =E9crit :

> Hi all,
>=20
> I am trying to use
> =
*IndexSearcher<http://lucene.apache.org/java/3_0_1/api/core/org/apache/luc=
ene/search/IndexSearcher.html#IndexSearcher%28org.apache.lucene.store.Dire=
ctory%29>
> * to retrieve a doc from an existing index by reading a field
> that is NOT_ANALYZED. I am trying to use that field as a unique id to
> retrieve a specific
> document. The id will be a url. is this possible to do? which type of =
query
> should I use?
>=20
> Thank you.
>=20
> Yuhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 21:16:05 2011
Return-Path: <java-user-return-48441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79166 invoked from network); 19 Jan 2011 21:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 21:16:05 -0000
Received: (qmail 51395 invoked by uid 500); 19 Jan 2011 21:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51292 invoked by uid 500); 19 Jan 2011 21:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51284 invoked by uid 99); 19 Jan 2011 21:16:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 21:16:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of earlhood@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 21:15:57 +0000
Received: by pxi11 with SMTP id 11so273072pxi.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 13:15:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=V0B5EVMkrR11Da7b2sLabpg0UgJLwKG7LCvabS1dM8I=;
        b=bbppJwOoGWzir779nzSM3VyexCZgXmDY+oJS9/ngKXJV8pr0JZ+fmmIGF5G++tIuBe
         O5md5xg1o02sWVDtkWUacoappUVBaoWXtQmH69IGLgM1Z9opmoUewQtWKVUI/tkQt5hs
         6ztf69CdeVPVoZen31Oi218yPG+FdVI9vwYto=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=vfmz3KOlIMDcjDI2ySz+qQkGEpk+7rMG1s8ABF0j3ivI6EWNgwT2dPNs0ClWNC4Gk6
         aVVRjnI7Km+hCokMlxxlUhB+5BHFw6ZgnE/ehFR0vh9HCy7eLnybyTcVNwur84U1eh44
         BIe6Gvk2uKEC54G322J/p6BsQ+4zt33F9gXI8=
MIME-Version: 1.0
Received: by 10.142.230.21 with SMTP id c21mr1235341wfh.431.1295471736539;
 Wed, 19 Jan 2011 13:15:36 -0800 (PST)
Sender: earlhood@gmail.com
Received: by 10.142.171.4 with HTTP; Wed, 19 Jan 2011 13:15:36 -0800 (PST)
In-Reply-To: <016D7925-670A-4EC9-801D-F1185383305C@hoplahup.net>
References: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
	<016D7925-670A-4EC9-801D-F1185383305C@hoplahup.net>
Date: Wed, 19 Jan 2011 15:15:36 -0600
X-Google-Sender-Auth: Ze49hKn3FI_2xmj0l84znoHQ96o
Message-ID: <AANLkTik12OrRrFtvmBTVT-z0PzqDfUYX1u+LSOFfgpNi@mail.gmail.com>
Subject: Re: search on a field that is NOT_ANALYZED
From: Earl Hood <earl@earlhood.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Jan 19, 2011 at 2:11 PM, Paul Libbrecht <paul@hoplahup.net> wrote:
> I think you should use a TermQuery.

How about IndexReader.termDocs()?


>> I am trying to use
>> *IndexSearcher<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28org.apache.lucene.store.Directory%29>
>> * to retrieve a doc from an existing index by reading a field
>> that is NOT_ANALYZED. I am trying to use that field as a unique id to
>> retrieve a specific
>> document. The id will be a url. is this possible to do? which type of query
>> should I use?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 21:45:01 2011
Return-Path: <java-user-return-48442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52380 invoked from network); 19 Jan 2011 21:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 21:45:01 -0000
Received: (qmail 7365 invoked by uid 500); 19 Jan 2011 21:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7149 invoked by uid 500); 19 Jan 2011 21:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7141 invoked by uid 99); 19 Jan 2011 21:44:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 21:44:58 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of viruslviv@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 21:44:51 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <viruslviv@gmail.com>)
	id 1PffpO-0007yZ-Ux
	for java-user@lucene.apache.org; Wed, 19 Jan 2011 13:44:30 -0800
Date: Wed, 19 Jan 2011 13:44:30 -0800 (PST)
From: viruslviv <viruslviv@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1295473470827-2290706.post@n3.nabble.com>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project) 

Best regards.
Zenoviy Veres
-- 
View this message in context: http://lucene.472066.n3.nabble.com/POLL-Where-do-you-get-Lucene-Solr-from-Maven-ASF-Mirrors-tp2282812p2290706.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 22:21:51 2011
Return-Path: <java-user-return-48443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69041 invoked from network); 19 Jan 2011 22:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 22:21:51 -0000
Received: (qmail 67797 invoked by uid 500); 19 Jan 2011 22:21:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67634 invoked by uid 500); 19 Jan 2011 22:21:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67626 invoked by uid 99); 19 Jan 2011 22:21:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 22:21:48 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 22:21:42 +0000
Received: from ip-109-85-233-124.web.vodafone.de (ip-109-85-233-124.web.vodafone.de [109.85.233.124])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0M51cU-1QSj2n2rPC-00zIDV; Wed, 19 Jan 2011 23:21:20 +0100
Subject: Re: AW: Best practices for multiple languages?
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=iso-8859-1
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <39362.1295466994@parc.com>
Date: Wed, 19 Jan 2011 23:08:41 +0100
Cc: janssen@parc.com
Content-Transfer-Encoding: quoted-printable
Message-Id: <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net> <39362.1295466994@parc.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:iTIxTNFgvIMhy/U3sprRfEq2j35cq437S7r1v6/r4gT
 C6NXwEhuFCWXwpVpnyFfTSS5u7F47FMhpK8aegcyIabtWOQcMD
 AxgzxyLLCPGymByH/nAm7pjgI0JOi3jIveENF+PTii+FG7dbO6
 GbQMfLH4/MmTRRmZ88WgMK0wyQrp0VzPdY2Xqb5ljJxGV6652l
 9NYtm930scmBaF9Q6F2DKiPeuIr21QWs6qpRmraUYU=


Le 19 janv. 2011 =E0 20:56, Bill Janssen a =E9crit :

> Paul Libbrecht <paul@hoplahup.net> wrote:
>=20
>> So you are only indexing "analyzed" and querying "analyzed". Is that =
correct?
>=20
> Yes, that's correct.  I fall back to StandardAnalyzer if no
> language-specific analyzer is available.

>=20
>> Wouldn't it be better to prefer precise matches (a field that is
>> analyzed with StandardAnalyzer for example) but also allow matches =
are
>> stemmed.
>=20
> StandardAnalyzer isn't quite precise, is it?  StandardFilter does some
> kind of English-centric alterations to things.

from here:
=
http://lucene.apache.org/java/2_9_1/api/core/org/apache/lucene/analysis/st=
andard/StandardTokenizer.html

I can only conclude that it handles correctly the characters variety but =
does not stemming.
The default constructor of StandardAnalyzer comes with a bunch of =
stop-words but they are easily deactivatable.


I think it's quite precise, and certainly a lot more precise than =
removing the aux of chevaux!

> Perhaps the approach you suggest would be slightly better, but I'd =
have
> to see numbers on that from some reasonable corpus to be convinced it
> would be worth it.

I am not sure I have these.
I did several changes of this sort and the precision and recall measures =
went better in particular in presence of language-indication failure =
which happened to be very common in our authoring environment.

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 23:29:01 2011
Return-Path: <java-user-return-48444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69703 invoked from network); 19 Jan 2011 23:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 23:29:01 -0000
Received: (qmail 87846 invoked by uid 500); 19 Jan 2011 23:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87675 invoked by uid 500); 19 Jan 2011 23:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87667 invoked by uid 99); 19 Jan 2011 23:28:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 23:28:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 23:28:52 +0000
Received: by vws18 with SMTP id 18so638659vws.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 15:28:31 -0800 (PST)
Received: by 10.220.91.198 with SMTP id o6mr347273vcm.22.1295479710755;
        Wed, 19 Jan 2011 15:28:30 -0800 (PST)
Received: from mail-gy0-f176.google.com (mail-gy0-f176.google.com [209.85.160.176])
        by mx.google.com with ESMTPS id e10sm2474160vch.43.2011.01.19.15.28.29
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 19 Jan 2011 15:28:30 -0800 (PST)
Received: by gyf1 with SMTP id 1so668455gyf.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 15:28:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.146.86.12 with SMTP id j12mr1786217yab.27.1295479709421; Wed,
 19 Jan 2011 15:28:29 -0800 (PST)
Received: by 10.147.170.8 with HTTP; Wed, 19 Jan 2011 15:28:29 -0800 (PST)
In-Reply-To: <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp>
	<AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp>
	<36966.1295461311@parc.com>
	<7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net>
	<39362.1295466994@parc.com>
	<A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net>
Date: Thu, 20 Jan 2011 10:28:29 +1100
Message-ID: <AANLkTikTX9vzLUXtGRsawTEd2dZ_2MLt4QZTxYJ5NcjD@mail.gmail.com>
Subject: Re: AW: Best practices for multiple languages?
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Jan 20, 2011 at 9:08 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
>>> Wouldn't it be better to prefer precise matches (a field that is
>>> analyzed with StandardAnalyzer for example) but also allow matches are
>>> stemmed.
>>
>> StandardAnalyzer isn't quite precise, is it? =C2=A0StandardFilter does s=
ome
>> kind of English-centric alterations to things.
>
> from here:
> http://lucene.apache.org/java/2_9_1/api/core/org/apache/lucene/analysis/s=
tandard/StandardTokenizer.html
>
> I can only conclude that it handles correctly the characters variety but =
does not stemming.

Doesn't StandardAnalyzer also run this?
http://lucene.apache.org/java/2_9_1/api/core/org/apache/lucene/analysis/sta=
ndard/StandardFilter.html

This thing definitely performs English-specific filtering for "'s" and "'S"=
.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 19 23:30:19 2011
Return-Path: <java-user-return-48445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70424 invoked from network); 19 Jan 2011 23:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jan 2011 23:30:19 -0000
Received: (qmail 91009 invoked by uid 500); 19 Jan 2011 23:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90931 invoked by uid 500); 19 Jan 2011 23:30:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90923 invoked by uid 99); 19 Jan 2011 23:30:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 23:30:16 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jan 2011 23:30:09 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <388067(2)>; Wed, 19 Jan 2011 15:29:36 PST
To: Paul Libbrecht <paul@hoplahup.net>
cc: java-user@lucene.apache.org
Subject: Re: AW: Best practices for multiple languages?
In-reply-to: <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net> <39362.1295466994@parc.com> <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net>
Comments: In-reply-to Paul Libbrecht <paul@hoplahup.net>
    message dated "Wed, 19 Jan 2011 14:08:41 -0800."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Wed, 19 Jan 2011 15:29:36 PST
Message-ID: <43989.1295479776@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Libbrecht <paul@hoplahup.net> wrote:

> I did several changes of this sort and the precision and recall
> measures went better in particular in presence of language-indication
> failure which happened to be very common in our authoring environment.

There are two kinds of failures:  no language, or wrong language.

For no language, I fall back to StandardAnalyzer, so I should have
results similar to yours.  For wrong language, well, I'm using OTS
trigram-based language guessers, and they're pretty good these days.

> >> Wouldn't it be better to prefer precise matches (a field that is
> >> analyzed with StandardAnalyzer for example) but also allow matches are
> >> stemmed.

Yes, I think it might improve things, but again, by how much?  Stemming is
better than no stemming, in terms of recall.  But this approach would also
improve precision.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 01:18:09 2011
Return-Path: <java-user-return-48446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91958 invoked from network); 20 Jan 2011 01:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 01:18:09 -0000
Received: (qmail 7099 invoked by uid 500); 20 Jan 2011 01:18:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7002 invoked by uid 500); 20 Jan 2011 01:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6993 invoked by uid 99); 20 Jan 2011 01:18:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 01:18:06 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.149.77] (HELO na3sys009aog106.obsmtp.com) (74.125.149.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Jan 2011 01:17:58 +0000
Received: from source ([209.85.161.46]) (using TLSv1) by na3sys009aob106.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTTeNMEL6ijJtjFXOwgGj9CNRoBaQWFxD@postini.com; Wed, 19 Jan 2011 17:17:38 PST
Received: by mail-fx0-f46.google.com with SMTP id 20so72717fxm.5
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 17:17:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.97.2 with SMTP id j2mr1414458fan.23.1295486255084; Wed, 19
 Jan 2011 17:17:35 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Wed, 19 Jan 2011 17:17:35 -0800 (PST)
In-Reply-To: <AANLkTik12OrRrFtvmBTVT-z0PzqDfUYX1u+LSOFfgpNi@mail.gmail.com>
References: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
	<016D7925-670A-4EC9-801D-F1185383305C@hoplahup.net>
	<AANLkTik12OrRrFtvmBTVT-z0PzqDfUYX1u+LSOFfgpNi@mail.gmail.com>
Date: Wed, 19 Jan 2011 17:17:35 -0800
Message-ID: <AANLkTimhJ0zVU+wkPS4pnj4+dbv58V9vPGMVBUovH7c8@mail.gmail.com>
Subject: Re: search on a field that is NOT_ANALYZED
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054ac790bb571049a3ce699
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054ac790bb571049a3ce699
Content-Type: text/plain; charset=ISO-8859-1

Hi Paul and Earl,

thanks.

I tried TermQuery. it gave me back zero document my termDocs is also
empty... having a feeling that
no term was gathered if a field was not analyzed.

Yuhan

On Wed, Jan 19, 2011 at 1:15 PM, Earl Hood <earl@earlhood.com> wrote:

> On Wed, Jan 19, 2011 at 2:11 PM, Paul Libbrecht <paul@hoplahup.net> wrote:
> > I think you should use a TermQuery.
>
> How about IndexReader.termDocs()?
>
>
> >> I am trying to use
> >> *IndexSearcher<
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28org.apache.lucene.store.Directory%29
> >
> >> * to retrieve a doc from an existing index by reading a field
> >> that is NOT_ANALYZED. I am trying to use that field as a unique id to
> >> retrieve a specific
> >> document. The id will be a url. is this possible to do? which type of
> query
> >> should I use?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3054ac790bb571049a3ce699--

From java-user-return-48447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 01:19:34 2011
Return-Path: <java-user-return-48447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92505 invoked from network); 20 Jan 2011 01:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 01:19:34 -0000
Received: (qmail 10651 invoked by uid 500); 20 Jan 2011 01:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10442 invoked by uid 500); 20 Jan 2011 01:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10434 invoked by uid 99); 20 Jan 2011 01:19:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 01:19:31 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.73] (HELO na3sys009aog104.obsmtp.com) (74.125.149.73)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Jan 2011 01:19:24 +0000
Received: from source ([209.85.161.54]) (using TLSv1) by na3sys009aob104.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTTeNhhhADs0fv8yGJNA5Akhj1kcHPRkO@postini.com; Wed, 19 Jan 2011 17:19:03 PST
Received: by mail-fx0-f54.google.com with SMTP id 16so60189fxm.27
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 17:19:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.107.147 with SMTP id b19mr1404135fap.118.1295486342129;
 Wed, 19 Jan 2011 17:19:02 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Wed, 19 Jan 2011 17:19:00 -0800 (PST)
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 17:19:00 -0800
Message-ID: <AANLkTik=ApSV+jG=11fBFbC4u67WJkL2n1GP=ixy8dNK@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5afbe3be8ff049a3cebb0

--001636c5afbe3be8ff049a3cebb0
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Jan 18, 2011 at 1:04 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we really
> don't have a good sense of how people get Lucene and Solr for use in their
> application.  Because of this, there has been some talk of dropping Maven
> support for Lucene artifacts (or at least make them external).  Before we do
> that, I'd like to conduct an informal poll of actual users out there and see
> how you get Lucene or Solr.
>
> Where do you get your Lucene/Solr downloads from?
>
> [x] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
> Please put an X in the box that applies to you.  Multiple selections are OK
> (for instance, if one project uses a mirror and another uses Maven)
>
> Please do not turn this thread into a discussion on Maven and it's
> (de)merits, I simply want to know, informally, where people get their JARs
> from.  In other words, no discussion is necessary (we already have that
> going on dev@lucene.apache.org which you are welcome to join.)
>
> Thanks,
> Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c5afbe3be8ff049a3cebb0--

From java-user-return-48448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 01:36:22 2011
Return-Path: <java-user-return-48448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9872 invoked from network); 20 Jan 2011 01:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 01:36:21 -0000
Received: (qmail 26054 invoked by uid 500); 20 Jan 2011 01:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25976 invoked by uid 500); 20 Jan 2011 01:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25968 invoked by uid 99); 20 Jan 2011 01:36:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 01:36:19 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.149.67] (HELO na3sys009aog101.obsmtp.com) (74.125.149.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Jan 2011 01:36:11 +0000
Received: from source ([209.85.161.43]) (using TLSv1) by na3sys009aob101.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTTeRdmkRph7Giq6/MQNr380+hpdtXgIn@postini.com; Wed, 19 Jan 2011 17:35:51 PST
Received: by mail-fx0-f43.google.com with SMTP id 18so108691fxm.2
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 17:35:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.103.198 with SMTP id l6mr1393849fao.99.1295487349619; Wed,
 19 Jan 2011 17:35:49 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Wed, 19 Jan 2011 17:35:49 -0800 (PST)
In-Reply-To: <AANLkTimhJ0zVU+wkPS4pnj4+dbv58V9vPGMVBUovH7c8@mail.gmail.com>
References: <AANLkTi=z_GBfbr+J4+VfwOHHBYJbMpRZWCGw-+1=X95Y@mail.gmail.com>
	<016D7925-670A-4EC9-801D-F1185383305C@hoplahup.net>
	<AANLkTik12OrRrFtvmBTVT-z0PzqDfUYX1u+LSOFfgpNi@mail.gmail.com>
	<AANLkTimhJ0zVU+wkPS4pnj4+dbv58V9vPGMVBUovH7c8@mail.gmail.com>
Date: Wed, 19 Jan 2011 17:35:49 -0800
Message-ID: <AANLkTik9L0_wGOOTe2qDqcE1Xk8xfgnrbzFskdwCCb-o@mail.gmail.com>
Subject: Re: search on a field that is NOT_ANALYZED
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b0d948fd15049a3d279a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b0d948fd15049a3d279a
Content-Type: text/plain; charset=ISO-8859-1

oh, TermQuery works! it was my own mistake. thanks for the help!

Yuhan

On Wed, Jan 19, 2011 at 5:17 PM, Yuhan Zhang <yzhang@onescreen.com> wrote:

> Hi Paul and Earl,
>
> thanks.
>
> I tried TermQuery. it gave me back zero document my termDocs is also
> empty... having a feeling that
> no term was gathered if a field was not analyzed.
>
> Yuhan
>
>
> On Wed, Jan 19, 2011 at 1:15 PM, Earl Hood <earl@earlhood.com> wrote:
>
>> On Wed, Jan 19, 2011 at 2:11 PM, Paul Libbrecht <paul@hoplahup.net>
>> wrote:
>> > I think you should use a TermQuery.
>>
>> How about IndexReader.termDocs()?
>>
>>
>> >> I am trying to use
>> >> *IndexSearcher<
>> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28org.apache.lucene.store.Directory%29
>> >
>> >> * to retrieve a doc from an existing index by reading a field
>> >> that is NOT_ANALYZED. I am trying to use that field as a unique id to
>> >> retrieve a specific
>> >> document. The id will be a url. is this possible to do? which type of
>> query
>> >> should I use?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001636c5b0d948fd15049a3d279a--

From java-user-return-48449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 02:28:49 2011
Return-Path: <java-user-return-48449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30451 invoked from network); 20 Jan 2011 02:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 02:28:49 -0000
Received: (qmail 58357 invoked by uid 500); 20 Jan 2011 02:28:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58177 invoked by uid 500); 20 Jan 2011 02:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58169 invoked by uid 99); 20 Jan 2011 02:28:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 02:28:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.91.84] (HELO nm14.bullet.mail.sp2.yahoo.com) (98.139.91.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Jan 2011 02:28:36 +0000
Received: from [98.139.91.61] by nm14.bullet.mail.sp2.yahoo.com with NNFMP; 20 Jan 2011 02:28:14 -0000
Received: from [98.139.91.29] by tm1.bullet.mail.sp2.yahoo.com with NNFMP; 20 Jan 2011 02:28:14 -0000
Received: from [127.0.0.1] by omp1029.mail.sp2.yahoo.com with NNFMP; 20 Jan 2011 02:28:14 -0000
X-Yahoo-Newman-Id: 818636.35105.bm@omp1029.mail.sp2.yahoo.com
Received: (qmail 71949 invoked from network); 20 Jan 2011 02:28:14 -0000
Received: from [192.168.2.202] (nhira@97.116.7.22 with plain)
        by smtp111.biz.mail.sp1.yahoo.com with SMTP; 19 Jan 2011 18:28:14 -0800 PST
X-Yahoo-SMTP: HoVJrkCswBCb_P7EOXqfUDnuuw--
X-YMail-OSG: __yLPFAVM1nq.WEkQkg4b_.q6QuYV52Ff1IQ2ijiM3jhaGz
 RMXu64d1J7rIq7TKs1NwhdZMDSukucl10Yi8mCbW9giQY8hYaqjdVLLqqPig
 m5_6ZlUxMVglI5deH7GXETnkBG9KZWCNNOwQkaRgLSaGaqS.mH1v2ui5U93u
 Q9fdDhu5I6mxQI1ZkDYSWM1Fn697XPWP9Zw2ogiljxoXbebffz7CLDdlcz8p
 Y1h8zOFctwmrOub3OspDvEJizppQ0cY.XBaP0qBDHxfZMPWPO6YCGmUk-
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
From: "N. Hira" <nhira@cognocys.com>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Wed, 19 Jan 2011 20:28:13 -0600
Content-Transfer-Encoding: quoted-printable
Message-Id: <D712A138-2CCB-4E42-A28F-729F15F0535B@cognocys.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org

Where do you get your Lucene/Solr downloads from?

[X] ASF Mirrors (linked in our release announcements or via the Lucene =
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a =
downstream project)

Please put an X in the box that applies to you.  Multiple selections are =
OK (for instance, if one project uses a mirror and another uses Maven)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 03:14:24 2011
Return-Path: <java-user-return-48450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76824 invoked from network); 20 Jan 2011 03:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 03:14:23 -0000
Received: (qmail 81404 invoked by uid 500); 20 Jan 2011 03:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81147 invoked by uid 500); 20 Jan 2011 03:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81139 invoked by uid 99); 20 Jan 2011 03:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 03:14:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amgqas@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 03:14:09 +0000
Received: by ywo7 with SMTP id 7so39898ywo.35
        for <java-user@lucene.apache.org>; Wed, 19 Jan 2011 19:13:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=NLFo7ES+mAI6j1T2b87KvaIfOroZgfRiIvrpEY1Eqv8=;
        b=ODkc1Kvwd9ZH8A2yYqXJiW97t4SOIBfVG3lQvGJuJujzZ0p94ED1S0j27VytGDLnF6
         vJz+WOEhs4e8W1ANf+cxeme5EDnO2+0DeK1VdjkvInYwoqCbGxqGrSU5n8grb5kCVfIo
         JXEmc4EqqiFiaaxuDumC+ZxTzlOP2yDcgalmA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=loUEWFkeLYth1auYfky1fXQCfihnAc60mWFiEh40jMQBZ1Fidlt66naUExXOxfZh7+
         utPIyUyXZtScYeiqlqRjDY06A5iiR+Sk6jU6BWStiVgau2IyzvoPIWTq2Xmc9XYFLTyX
         g5h8G9ajeCtWFJ0P1/7S71dvU7VmC3wxtKGaA=
MIME-Version: 1.0
Received: by 10.146.84.2 with SMTP id h2mr2048958yab.16.1295493229088; Wed, 19
 Jan 2011 19:13:49 -0800 (PST)
Received: by 10.147.136.17 with HTTP; Wed, 19 Jan 2011 19:13:49 -0800 (PST)
Date: Wed, 19 Jan 2011 19:13:49 -0800
Message-ID: <AANLkTi=HQHr3Ot5Gw29HwVP5f2ttLWz9L0aNkEKtSPWm@mail.gmail.com>
Subject: Phrase query on multiple fields
From: amg qas <amgqas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have two question regarding phrase query :

1) How can I execute a phrase query over multiple fields ? I can only
get PhraseQuery to work over a single field - For eg something like
this :

                                PhraseQuery query = new PhraseQuery();
		query.setSlop(10);
		String[] phrase = { "george", "bush" };
		for (String word : phrase) {
		query.add(new Term(field, word));
		}

2) Is there a way to execute a phrase query along with
MultiFieldQueryParser ? So if I have a query {A B} and fields F1 and
F2, I want the query to be something like this :
(F1:A F2:A) (F1:B F2:B) (F1:"A B"~10 F2:"A B"~10)

		MultiFieldQueryParser queryParser = new MultiFieldQueryParser(
				Version.LUCENE_30, fields, new SnowballAnalyzer(
						Version.LUCENE_30, "English"), boosts);
		Query query = queryParser.parse(queryString);

Thanks,
amg

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 07:36:43 2011
Return-Path: <java-user-return-48451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19066 invoked from network); 20 Jan 2011 07:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 07:36:43 -0000
Received: (qmail 60437 invoked by uid 500); 20 Jan 2011 07:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59945 invoked by uid 500); 20 Jan 2011 07:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59937 invoked by uid 99); 20 Jan 2011 07:36:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 07:36:35 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 07:36:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 87BC6C2126
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 08:36:07 +0100 (CET)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ffmYv10sQtWK for <java-user@lucene.apache.org>;
	Thu, 20 Jan 2011 08:36:07 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 69EB0C2118
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 08:36:07 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 20 Jan 2011 08:36:07 +0100
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 20 Jan 2011 08:36:05 +0100
Subject: Paging with Lucene
Thread-Topic: Paging with Lucene
Thread-Index: Acu4dKUW7n/XdaJqS9aGjzP4AwvQWw==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

(thanks fort he many answers to my initial lucene question "Best practices =
for multiple languages?")

We shall be confronted with the followong problem:
due to the very dynamic access rules on our content, we shall not be able t=
o formulate these in/as Filter(s).=20
Hence we need to first search and then apply the access rules (i.e. securit=
y filter).=20
What is the best approach to implement paging in this situation? Not to for=
get, the "overall context" is a web app ;-)

Thx for your advices
- Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 08:01:57 2011
Return-Path: <java-user-return-48452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48379 invoked from network); 20 Jan 2011 08:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 08:01:57 -0000
Received: (qmail 81780 invoked by uid 500); 20 Jan 2011 08:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81337 invoked by uid 500); 20 Jan 2011 08:01:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81305 invoked by uid 99); 20 Jan 2011 08:01:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 08:01:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [78.142.133.7] (HELO zcs.punkt.at) (78.142.133.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 08:01:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by zcs.punkt.at (Postfix) with ESMTP id B55D7449681;
	Thu, 20 Jan 2011 09:00:12 +0100 (CET)
X-Virus-Scanned: amavisd-new at zcs.punkt.at
Received: from zcs.punkt.at ([127.0.0.1])
	by localhost (zcs.punkt.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YlCz9eA87ecC; Thu, 20 Jan 2011 09:00:12 +0100 (CET)
Received: from zcs.punkt.at (zcs.punkt.at [78.142.133.7])
	by zcs.punkt.at (Postfix) with ESMTP id 780D3449680;
	Thu, 20 Jan 2011 09:00:12 +0100 (CET)
Date: Thu, 20 Jan 2011 09:00:12 +0100 (CET)
From: =?utf-8?Q?J=C3=BCrgen_Jakobitsch?= <jakobitschj@punkt.at>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Message-ID: <28540355.9474.1295510412427.JavaMail.root@zcs>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [213.47.190.242]
X-Mailer: Zimbra 6.0.10_GA_2692 (ZimbraWebClient - FF3.0 (Linux)/6.0.10_GA_2692)
X-Virus-Checked: Checked by ClamAV on apache.org

Where do you get your Lucene/Solr downloads from?

[] ASF Mirrors (linked in our release announcements or via the Lucene website)

[X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[X] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a downstream project)

wkr turnguard

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 09:46:44 2011
Return-Path: <java-user-return-48453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3144 invoked from network); 20 Jan 2011 09:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 09:46:44 -0000
Received: (qmail 9690 invoked by uid 500); 20 Jan 2011 09:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9173 invoked by uid 500); 20 Jan 2011 09:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8762 invoked by uid 99); 20 Jan 2011 09:46:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 09:46:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.23.130.172] (HELO zig.albert.com) (62.23.130.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 09:46:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by zig.albert.com (Postfix) with ESMTP id 17947184CA7;
	Thu, 20 Jan 2011 10:46:11 +0100 (CET)
X-Virus-Scanned: amavisd-new at albert.com
Received: from zig.albert.com ([127.0.0.1])
	by localhost (zig.albert.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5QeD93AeymuN; Thu, 20 Jan 2011 10:46:10 +0100 (CET)
Received: from MacBook-Pro-de-Dominique-Bejean.local (ip-36.net-89-2-87.rev.numericable.fr [89.2.87.36])
	(using TLSv1 with cipher DHE-RSA-CAMELLIA256-SHA (256/256 bits))
	(No client certificate requested)
	by zig.albert.com (Postfix) with ESMTP id D301E184CA6;
	Thu, 20 Jan 2011 10:46:09 +0100 (CET)
Message-ID: <4D38045F.3060103@eolya.fr>
Date: Thu, 20 Jan 2011 10:46:07 +0100
From: Dominique Bejean <dominique.bejean@eolya.fr>
Reply-To: dominique.bejean@eolya.fr
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; fr; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Bill Janssen <janssen@parc.com>, Paul Libbrecht <paul@hoplahup.net>
Subject: Re: AW: Best practices for multiple languages?
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net> <39362.1295466994@parc.com> <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net> <43989.1295479776@parc.com>
In-Reply-To: <43989.1295479776@parc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi,

During a recent Solr project we needed to index document in a lot of 
languages. The natural solution with Lucene and Solr is to define one 
field per languages. Each field is configured in the schema.xml file to 
use a language specific processing (tokenizing, stop words, stemmer, 
...).  This is really not easy to manage if you have a lot of languages 
and this means that 1) the search interface need to know in which 
language your are searching 2) the search interface can't search in all 
languages at the same time.

So, I decided that the only solution was to index all languages in only 
one field.

Obviously, each language needs to be processed specifically. For this, I 
developped a analyzer that is in charge to redirect content to the 
correct tockenizer, filters and stemmer  accordingly to its language. 
This analyzer is also used at query time. If the user specify the 
language of its query, the query is processed by appropriate tockenizer, 
filters and stemmer otherwise the query is processed by a defaut 
tockenizer, filters and stemmer.

With this solution :

1. I only need one field (or two if I want both stemmed and unstemmed 
processing)
2. The user can search in all document regarless to there language

I hope this help.

Dominique
www.zoonix.fr
www.crawl-anywhere.com



Le 20/01/11 00:29, Bill Janssen a crit :
> Paul Libbrecht<paul@hoplahup.net>  wrote:
>
>> I did several changes of this sort and the precision and recall
>> measures went better in particular in presence of language-indication
>> failure which happened to be very common in our authoring environment.
> There are two kinds of failures:  no language, or wrong language.
>
> For no language, I fall back to StandardAnalyzer, so I should have
> results similar to yours.  For wrong language, well, I'm using OTS
> trigram-based language guessers, and they're pretty good these days.
>
>>>> Wouldn't it be better to prefer precise matches (a field that is
>>>> analyzed with StandardAnalyzer for example) but also allow matches are
>>>> stemmed.
> Yes, I think it might improve things, but again, by how much?  Stemming is
> better than no stemming, in terms of recall.  But this approach would also
> improve precision.
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 09:50:53 2011
Return-Path: <java-user-return-48454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6192 invoked from network); 20 Jan 2011 09:50:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 09:50:53 -0000
Received: (qmail 14734 invoked by uid 500); 20 Jan 2011 09:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14502 invoked by uid 500); 20 Jan 2011 09:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14494 invoked by uid 99); 20 Jan 2011 09:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 09:50:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of roman.baeriswyl@comparis.ch designates 77.109.144.6 as permitted sender)
Received: from [77.109.144.6] (HELO exchange.comparis.ch) (77.109.144.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 09:50:41 +0000
Received: from exchange.office.comparis.intra ([192.168.1.161]) by
 exchange.office.comparis.intra ([192.168.1.161]) with mapi; Thu, 20 Jan 2011
 10:50:19 +0100
From: comparis.ch - Roman Baeriswyl <roman.baeriswyl@comparis.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 20 Jan 2011 10:50:18 +0100
Subject: Filter Performance
Thread-Topic: Filter Performance
Thread-Index: Acu4h3IerK3IdVMAT4uKeRBLxJHtwQ==
Message-ID: <B6185CC7B3488840970E1083BF7C1C760A32DEA087@exchange.office.comparis.intra>
Accept-Language: de-DE, de-CH
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: multipart/alternative;
	boundary="_000_B6185CC7B3488840970E1083BF7C1C760A32DEA087exchangeoffic_"
MIME-Version: 1.0

--_000_B6185CC7B3488840970E1083BF7C1C760A32DEA087exchangeoffic_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all

I've got an Index with a few 100k documents and I want to run a rather comp=
lex wildcard (incl. leading wildcards) query on it.
The wildcard query takes about 2 seconds to complete.
Now, I want to limit the items on which the wildcard query will be executed=
.
Let's say, I want to limit the items to those which have the field "Product=
Name" set to "milk" (this query itself runs in less than 5 milliseconds and=
 returns about 100 items).
So, I tried different things but everything resulted in having the exact sa=
me execution time like without this  filter. Even if I run the query multip=
le times in a row with the same Query and Filter items.

Here's what I tried:

-          Adding "+ProductName:milk" to the Query

-          Added FieldCacheTermsFilter("ProductName ", new String[] { "milk=
" }) as Filter

-          Wrapped the Filter in CachingWrapperFilter

-          Used  BooleanQuery filterQuery =3D new BooleanQuery(); filterQue=
ry.add(new TermQuery(new Term("ProductName", "milk ")), BooleanClause.Occur=
.MUST); and wrapped it with a QueryWrapperFilter and also tried wrapping it=
 in a FilteredQuery

Nothing improved the searchspeed, it had always the same speed as when he p=
arsed thru all documents without any pre-filtering.

Is this pre-filtering different than I thought? Am I doing something wrong?=
 Does the index need to be build somehow special for this to work?

Thanks for your help
//Roman

________________________________
Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil: ht=
tp://www.facebook.com/pages/Preissturz/218831069608

Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1

--_000_B6185CC7B3488840970E1083BF7C1C760A32DEA087exchangeoffic_--

From java-user-return-48455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 10:04:15 2011
Return-Path: <java-user-return-48455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9751 invoked from network); 20 Jan 2011 10:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 10:04:14 -0000
Received: (qmail 34514 invoked by uid 500); 20 Jan 2011 10:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34064 invoked by uid 500); 20 Jan 2011 10:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34056 invoked by uid 99); 20 Jan 2011 10:04:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 10:04:07 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.138.147] (HELO mail195.messagelabs.com) (85.158.138.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 10:03:58 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-14.tower-195.messagelabs.com!1295517817!46814009!1
X-StarScan-Version: 6.2.9; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 30614 invoked from network); 20 Jan 2011 10:03:37 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-14.tower-195.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 20 Jan 2011 10:03:37 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id p0KA3bZl022503
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 11:03:37 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Thu Jan 20 11:03:37 2011
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: [POLL] Where do you get Lucene/Solr from?  Maven?  ASF Mirrors?
Date: Thu, 20 Jan 2011 11:03:32 +0100
User-Agent: KMail/1.9.10
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <201101201103.32263.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 18 January 2011 22:04:01 Grant Ingersoll wrote:

Where do you get your Lucene/Solr downloads from?

[x] ASF Mirrors (linked in our release announcements or via the Lucene 
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a 
downstream project)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 13:20:13 2011
Return-Path: <java-user-return-48456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82126 invoked from network); 20 Jan 2011 13:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 13:20:13 -0000
Received: (qmail 21476 invoked by uid 500); 20 Jan 2011 13:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21087 invoked by uid 500); 20 Jan 2011 13:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21079 invoked by uid 99); 20 Jan 2011 13:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:20:06 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:19:59 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id AC8D820777
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 08:19:38 -0500 (EST)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Thu, 20 Jan 2011 08:19:38 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=gTl9dnl/6NEawyXTfVYO5QWT72M=; b=Ksx0AY06pSmQYd7Rco/kLF92+9x/oHLXCe4oxI1iaqWU4GC2uWEUILJjy0fQhsEPXXP6fvtLX49vdnvHQVTtzUvKgqEwJMMEeR/sYGrOrMOPrDKpK3SlKjfUSuP2xco0GpxJKaGo7kjSXYK90RDS/5dH84EOvZwmiIZub0p6MjA=
X-Sasl-enc: ez7KOtsgFzckHt/G/rxEVSuG0389wW2oE3GSP9P4XXPT 1295529578
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 4AD82444237
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 08:19:38 -0500 (EST)
Message-ID: <4D383669.1090003@fastmail.fm>
Date: Thu, 20 Jan 2011 13:19:37 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Trying to extend MappingCharFilter so that it only changes a token
 if the length of the token matches the length of singleMatch
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Trying to extend MappingCharFilter so that it only changes a token if 
the length of the token matches the length of singleMatch in 
NormalizeCharMap  (currently the singleMatch just has to be found in the 
token I want ut to match the whole token). Can this be done it sounds 
simple enough but I cannot make any headway understanding the 
MappingCharFilter source code

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 13:29:00 2011
Return-Path: <java-user-return-48457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85113 invoked from network); 20 Jan 2011 13:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 13:29:00 -0000
Received: (qmail 39986 invoked by uid 500); 20 Jan 2011 13:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39544 invoked by uid 500); 20 Jan 2011 13:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39530 invoked by uid 99); 20 Jan 2011 13:28:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:28:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:28:46 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 691DCD36004
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 14:28:26 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bikEaWa-HZI2 for <java-user@lucene.apache.org>;
	Thu, 20 Jan 2011 14:28:21 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 09CA2D36003
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 14:28:20 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <B6185CC7B3488840970E1083BF7C1C760A32DEA087@exchange.office.comparis.intra>
In-Reply-To: <B6185CC7B3488840970E1083BF7C1C760A32DEA087@exchange.office.comparis.intra>
Subject: RE: Filter Performance
Date: Thu, 20 Jan 2011 14:28:31 +0100
Message-ID: <024401cbb8a5$ee2fb650$ca8f22f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQG+q4DMdXPYPeVlQVhp6kuFwdiSgpPz9Dbg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The reason for this is that the filters and other boolean clauses are
applied during result collection. But wildcard query first needs to
investigate all terms that match and this is done before the results are
collected. And this step takes the time (especially before Lucene 4.0).

There is no way to change this.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> Sent: Thursday, January 20, 2011 10:50 AM
> To: 'java-user@lucene.apache.org'
> Subject: Filter Performance
> 
> Hi all
> 
> I've got an Index with a few 100k documents and I want to run a rather
> complex wildcard (incl. leading wildcards) query on it.
> The wildcard query takes about 2 seconds to complete.
> Now, I want to limit the items on which the wildcard query will be
executed.
> Let's say, I want to limit the items to those which have the field
> "ProductName" set to "milk" (this query itself runs in less than 5
milliseconds
> and returns about 100 items).
> So, I tried different things but everything resulted in having the exact
same
> execution time like without this  filter. Even if I run the query multiple
times
> in a row with the same Query and Filter items.
> 
> Here's what I tried:
> 
> -          Adding "+ProductName:milk" to the Query
> 
> -          Added FieldCacheTermsFilter("ProductName ", new String[] {
"milk" })
> as Filter
> 
> -          Wrapped the Filter in CachingWrapperFilter
> 
> -          Used  BooleanQuery filterQuery = new BooleanQuery();
> filterQuery.add(new TermQuery(new Term("ProductName", "milk ")),
> BooleanClause.Occur.MUST); and wrapped it with a QueryWrapperFilter and
> also tried wrapping it in a FilteredQuery
> 
> Nothing improved the searchspeed, it had always the same speed as when
> he parsed thru all documents without any pre-filtering.
> 
> Is this pre-filtering different than I thought? Am I doing something
wrong?
> Does the index need to be build somehow special for this to work?
> 
> Thanks for your help
> //Roman
> 
> ________________________________
> Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> http://www.facebook.com/pages/Preissturz/218831069608
> 
> Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 13:49:18 2011
Return-Path: <java-user-return-48458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16189 invoked from network); 20 Jan 2011 13:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 13:49:17 -0000
Received: (qmail 82736 invoked by uid 500); 20 Jan 2011 13:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82461 invoked by uid 500); 20 Jan 2011 13:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82453 invoked by uid 99); 20 Jan 2011 13:49:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:49:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of roman.baeriswyl@comparis.ch designates 77.109.144.6 as permitted sender)
Received: from [77.109.144.6] (HELO exchange.comparis.ch) (77.109.144.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 13:49:06 +0000
Received: from exchange.office.comparis.intra ([192.168.1.161]) by
 exchange.office.comparis.intra ([192.168.1.161]) with mapi; Thu, 20 Jan 2011
 14:48:44 +0100
From: comparis.ch - Roman Baeriswyl <roman.baeriswyl@comparis.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 20 Jan 2011 14:48:43 +0100
Subject: RE: Filter Performance
Thread-Topic: Filter Performance
Thread-Index: AQG+q4DMdXPYPeVlQVhp6kuFwdiSgpPz9DbggAAD/vA=
Message-ID: <B6185CC7B3488840970E1083BF7C1C760A32DEA089@exchange.office.comparis.intra>
References: <B6185CC7B3488840970E1083BF7C1C760A32DEA087@exchange.office.comparis.intra>
 <024401cbb8a5$ee2fb650$ca8f22f0$@thetaphi.de>
In-Reply-To: <024401cbb8a5$ee2fb650$ca8f22f0$@thetaphi.de>
Accept-Language: de-DE, de-CH
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks for the answer. That does make sense.
It first gets thru all (not only those which could pass the filter) terms a=
vailable and investigates all terms which match any of the wildcard queries=
. And that could take quite some time if I got leading wildcard queries.

Guess I'll try another approach then with "reverse" indexing the fields whi=
ch can be searched and then transform the leading wildcard queries to follo=
wing wildcards by reversing them too.

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]
Sent: Donnerstag, 20. Januar 2011 14:29
To: java-user@lucene.apache.org
Subject: RE: Filter Performance

The reason for this is that the filters and other boolean clauses are
applied during result collection. But wildcard query first needs to
investigate all terms that match and this is done before the results are
collected. And this step takes the time (especially before Lucene 4.0).

There is no way to change this.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> Sent: Thursday, January 20, 2011 10:50 AM
> To: 'java-user@lucene.apache.org'
> Subject: Filter Performance
>
> Hi all
>
> I've got an Index with a few 100k documents and I want to run a rather
> complex wildcard (incl. leading wildcards) query on it.
> The wildcard query takes about 2 seconds to complete.
> Now, I want to limit the items on which the wildcard query will be
executed.
> Let's say, I want to limit the items to those which have the field
> "ProductName" set to "milk" (this query itself runs in less than 5
milliseconds
> and returns about 100 items).
> So, I tried different things but everything resulted in having the exact
same
> execution time like without this  filter. Even if I run the query multipl=
e
times
> in a row with the same Query and Filter items.
>
> Here's what I tried:
>
> -          Adding "+ProductName:milk" to the Query
>
> -          Added FieldCacheTermsFilter("ProductName ", new String[] {
"milk" })
> as Filter
>
> -          Wrapped the Filter in CachingWrapperFilter
>
> -          Used  BooleanQuery filterQuery =3D new BooleanQuery();
> filterQuery.add(new TermQuery(new Term("ProductName", "milk ")),
> BooleanClause.Occur.MUST); and wrapped it with a QueryWrapperFilter and
> also tried wrapping it in a FilteredQuery
>
> Nothing improved the searchspeed, it had always the same speed as when
> he parsed thru all documents without any pre-filtering.
>
> Is this pre-filtering different than I thought? Am I doing something
wrong?
> Does the index need to be build somehow special for this to work?
>
> Thanks for your help
> //Roman
>
> ________________________________
> Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> http://www.facebook.com/pages/Preissturz/218831069608
>
> Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz=
1


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil: ht=
tp://www.facebook.com/pages/Preissturz/218831069608

Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 15:00:07 2011
Return-Path: <java-user-return-48459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88024 invoked from network); 20 Jan 2011 15:00:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 15:00:06 -0000
Received: (qmail 3321 invoked by uid 500); 20 Jan 2011 15:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2703 invoked by uid 500); 20 Jan 2011 15:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2671 invoked by uid 99); 20 Jan 2011 15:00:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 15:00:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 14:59:52 +0000
Received: by bwz8 with SMTP id 8so625671bwz.35
        for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 06:59:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=M7JBi8PN86S+OcLiEAezPsvIIK22C+rjbbkJ9ItHZgY=;
        b=tRXT+Gp1IMrokeEbwHd0/7d7IUeeowa7MQa2JgLyS/brce2uBe675wWz83ZuXq1WZu
         Gg6cN7Oo5WRZNgMnygCKPz1MaWAjRwibe3l3oOz+ge/KINvj5J4+chziiO35M4jjmITR
         zgEWPT9l/2nWMn6EuJ2+c+xK469xEFhD39lSM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=AfK/Pcj2Rg1J48jre/kCPIcgf62qgUyUvvux6PIBsxwIWwD1JSnOwsoIqcfoD3Nq+B
         h8aWUi0fDiMUT7g9GySt/oBBM8Uxl6AOfvHfnDQiZ6k16K2xRZOCxMnL3veozrDfov5c
         280xy4hsNwcgCjxU+CGVeNzq8BlFouyLdreFQ=
Received: by 10.204.57.197 with SMTP id d5mr2007038bkh.63.1295535572030; Thu,
 20 Jan 2011 06:59:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Thu, 20 Jan 2011 06:59:11 -0800 (PST)
In-Reply-To: <AANLkTi=HQHr3Ot5Gw29HwVP5f2ttLWz9L0aNkEKtSPWm@mail.gmail.com>
References: <AANLkTi=HQHr3Ot5Gw29HwVP5f2ttLWz9L0aNkEKtSPWm@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 20 Jan 2011 14:59:11 +0000
Message-ID: <AANLkTik-L9QQAsp+zWHFgmAj55BsCDdvksENmQQbpn7N@mail.gmail.com>
Subject: Re: Phrase query on multiple fields
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

No and No.

Alternative approaches might include building a general "contents"
field holding any/all searchable fields or building up the query
yourself.  The latter is quite straightforward:

 BooleanQuery bq =3D new BooleanQuery();
 PhraseQuery pq1 =3D ...;
 PhraseQuery pq2 =3D ...;
 bq.add(pq1, ...);
 bq.add(pq2, ...);
 etc.


--
Ian.


On Thu, Jan 20, 2011 at 3:13 AM, amg qas <amgqas@gmail.com> wrote:
> Hi,
>
> I have two question regarding phrase query :
>
> 1) How can I execute a phrase query over multiple fields ? I can only
> get PhraseQuery to work over a single field - For eg something like
> this :
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0PhraseQuer=
y query =3D new PhraseQuery();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query.setSlop(10);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String[] phrase =3D { "george", "bush" };
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (String word : phrase) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query.add(new Term(field, word));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> 2) Is there a way to execute a phrase query along with
> MultiFieldQueryParser ? So if I have a query {A B} and fields F1 and
> F2, I want the query to be something like this :
> (F1:A F2:A) (F1:B F2:B) (F1:"A B"~10 F2:"A B"~10)
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0MultiFieldQueryParser queryParser =3D new =
MultiFieldQueryParser(
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Version.LU=
CENE_30, fields, new SnowballAnalyzer(
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0Version.LUCENE_30, "English"), boosts);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query =3D queryParser.parse(queryStr=
ing);
>
> Thanks,
> amg
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 16:29:46 2011
Return-Path: <java-user-return-48460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12112 invoked from network); 20 Jan 2011 16:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 16:29:46 -0000
Received: (qmail 77195 invoked by uid 500); 20 Jan 2011 16:29:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76799 invoked by uid 500); 20 Jan 2011 16:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76791 invoked by uid 99); 20 Jan 2011 16:29:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 16:29:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 16:29:32 +0000
Received: from brouwer.fritz.box (srbk-5d807b12.pool.mediaWays.net [93.128.123.18])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0MdEuZ-1PyJJV0X7D-00IXdi; Thu, 20 Jan 2011 17:29:10 +0100
From: Paul Libbrecht <paul@hoplahup.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: NOT_ANALYZED... should be an analyzer
Date: Thu, 20 Jan 2011 17:29:09 +0100
Message-Id: <E710B037-0D02-4EE2-B27B-ED9E69CF7E20@hoplahup.net>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:nA9/jiMXuG6ni5WQf6LHimgz4j+pixUxnpYZtdMf0eS
 9fDDJFJHSggYVfALAPgVsu1vztCxj6LC/9gPiSQLtHjMOAhzVw
 8Ft1QxvogqZF5j+SSKeS5II6mnZNfTtnAcx2+zcfz1vNJMLiH6
 V6YRA9OoNxYUl9xdhTwGfIDqJ7pZN2KzaANOlKOGFTRBlBD8P+
 y6bYsU6Jr4r5KVqIiqIFJt0EC2Z8bT0BeednV+oi3Y=


Hello list,

I am hitting a stupid bug where a unit test shows me that QueryParser =
analyzes fierciely anything it finds hence... I have to tune the =
analyzer to not decompose the terms with fields that should be =
non-analyzed.

For indexing, you can choose to have something not_analyzed.
For query-parsing you cannot.

Why?

I think it'd be simpler and more understandable to have NOT_ANALYZED be =
replaced by NopAnalyzer or something like that.

Agreeing?

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 16:43:26 2011
Return-Path: <java-user-return-48461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16585 invoked from network); 20 Jan 2011 16:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 16:43:25 -0000
Received: (qmail 1828 invoked by uid 500); 20 Jan 2011 16:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1320 invoked by uid 500); 20 Jan 2011 16:43:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1312 invoked by uid 99); 20 Jan 2011 16:43:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 16:43:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 16:43:13 +0000
Received: by bwz8 with SMTP id 8so732254bwz.35
        for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 08:42:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=DGuSnkLOSp4Np7ZC7bumDsv3TLrIBkGj/WMWjgnKFFA=;
        b=lYp81saZ3yokgmm3YaSHE9mTKFtTEw3Qf/ewQhdQGyOnGnvFowa76aMJFYWheMq3l6
         UiSC0TCYBcFP/IlLsl+zqCjCx6xGkBCVB1OR0/xww4ow/Zq8A1H8WZcHXN1OggbwgRNN
         TzI77UvX7CXK2qhD8Y0WL//ZZ/R60eQ68tzt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=A19SzBx/ZsNyhSag2kw6cXCCwMW8zUqkAQwsKnOKinbYrAaGTUmrdGlmCvDKCdHu5g
         VFDTILiexdsw/+UnmIcjC9hSSomyc8iyFdOwkuwWAsKsJM5TY0vlq7l8BeJNmzolTXYc
         Z5hlfEa0fbyNvSibWzyY70pHtM/y8QHIW5fU0=
Received: by 10.204.63.2 with SMTP id z2mr2131695bkh.66.1295541773052; Thu, 20
 Jan 2011 08:42:53 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.80.85 with HTTP; Thu, 20 Jan 2011 08:39:19 -0800 (PST)
In-Reply-To: <E710B037-0D02-4EE2-B27B-ED9E69CF7E20@hoplahup.net>
References: <E710B037-0D02-4EE2-B27B-ED9E69CF7E20@hoplahup.net>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 20 Jan 2011 11:39:19 -0500
Message-ID: <AANLkTinu3puvv78Zfi6ffvSfYj1cqAfpd-iNEzZ1piFn@mail.gmail.com>
Subject: Re: NOT_ANALYZED... should be an analyzer
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 20, 2011 at 11:29 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
>
> Hello list,
>
> I am hitting a stupid bug where a unit test shows me that QueryParser analyzes fierciely anything it finds hence... I have to tune the analyzer to not decompose the terms with fields that should be non-analyzed.
>
> For indexing, you can choose to have something not_analyzed.
> For query-parsing you cannot.
>
> Why?
>
> I think it'd be simpler and more understandable to have NOT_ANALYZED be replaced by NopAnalyzer or something like that.
>
> Agreeing?

Personally I totally agree... KeywordAnalyzer is more intuitive, as
then it works at query-time too.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 17:31:39 2011
Return-Path: <java-user-return-48462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42596 invoked from network); 20 Jan 2011 17:31:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 17:31:39 -0000
Received: (qmail 26799 invoked by uid 500); 20 Jan 2011 17:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26531 invoked by uid 500); 20 Jan 2011 17:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26523 invoked by uid 99); 20 Jan 2011 17:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 17:31:33 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 17:31:28 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <510968(1)>; Thu, 20 Jan 2011 09:30:57 PST
To: dominique.bejean@eolya.fr
cc: java-user@lucene.apache.org, Paul Libbrecht <paul@hoplahup.net>
Subject: Re: AW: Best practices for multiple languages?
In-reply-to: <4D38045F.3060103@eolya.fr>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net> <39362.1295466994@parc.com> <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net> <43989.1295479776@parc.com> <4D38045F.3060103@eolya.fr>
Comments: In-reply-to Dominique Bejean <dominique.bejean@eolya.fr>
    message dated "Thu, 20 Jan 2011 01:46:07 -0800."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Date: Thu, 20 Jan 2011 09:30:55 PST
Message-ID: <70349.1295544655@parc.com>
From: Bill Janssen <janssen@parc.com>

Dominique Bejean <dominique.bejean@eolya.fr> wrote:

> Hi,
>=20
> During a recent Solr project we needed to index document in a lot of
> languages. The natural solution with Lucene and Solr is to define one
> field per languages. Each field is configured in the schema.xml file
> to use a language specific processing (tokenizing, stop words,
> stemmer, ...).  This is really not easy to manage if you have a lot of
> languages and this means that 1) the search interface need to know in
> which language your are searching 2) the search interface can't search
> in all languages at the same time.
>=20
> So, I decided that the only solution was to index all languages in
> only one field.
>=20
> Obviously, each language needs to be processed specifically. For this,
> I developped a analyzer that is in charge to redirect content to the
> correct tockenizer, filters and stemmer  accordingly to its
> language. This analyzer is also used at query time. If the user
> specify the language of its query, the query is processed by
> appropriate tockenizer, filters and stemmer otherwise the query is
> processed by a defaut tockenizer, filters and stemmer.

I'm not sure how much this helps.  My query processing is the same as
yours, but I only index the document with a single analyzer, based on
the language determination.  With your approach, multiple analyses are
all mixed together in a single field, so I'd expect a lower precision
score, due to words that accidentally stem to the same root in multiple
different languages.

Bill

>=20
> With this solution :
>=20
> 1. I only need one field (or two if I want both stemmed and unstemmed
> processing)
> 2. The user can search in all document regarless to there language
>=20
> I hope this help.
>=20
> Dominique
> www.zoonix.fr
> www.crawl-anywhere.com
>=20
>=20
>=20
> Le 20/01/11 00:29, Bill Janssen a =C3=A9crit :
> > Paul Libbrecht<paul@hoplahup.net>  wrote:
> >
> >> I did several changes of this sort and the precision and recall
> >> measures went better in particular in presence of language-indication
> >> failure which happened to be very common in our authoring environment.
> > There are two kinds of failures:  no language, or wrong language.
> >
> > For no language, I fall back to StandardAnalyzer, so I should have
> > results similar to yours.  For wrong language, well, I'm using OTS
> > trigram-based language guessers, and they're pretty good these days.
> >
> >>>> Wouldn't it be better to prefer precise matches (a field that is
> >>>> analyzed with StandardAnalyzer for example) but also allow matches a=
re
> >>>> stemmed.
> > Yes, I think it might improve things, but again, by how much?  Stemming=
 is
> > better than no stemming, in terms of recall.  But this approach would a=
lso
> > improve precision.
> >
> > Bill
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 18:06:32 2011
Return-Path: <java-user-return-48463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63375 invoked from network); 20 Jan 2011 18:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 18:06:32 -0000
Received: (qmail 17055 invoked by uid 500); 20 Jan 2011 18:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15759 invoked by uid 500); 20 Jan 2011 18:06:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15740 invoked by uid 99); 20 Jan 2011 18:06:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 18:06:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brendan.grainger@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 18:06:12 +0000
Received: by qwh6 with SMTP id 6so842571qwh.35
        for <multiple recipients>; Thu, 20 Jan 2011 10:05:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:mime-version:content-type:from
         :in-reply-to:date:cc:content-transfer-encoding:message-id:references
         :to:x-mailer;
        bh=AmKA2xf65Bv6X1gBTtSBILsOCdua7VGvCRf+5cHHQnM=;
        b=pMKpjYz5O09rjOIapz24T3VIMcYSUCkhvjnRVfvLELBT49BT1LQO7y5KdFcGR4g/de
         FnpsURsbgQNEnsi5o4mQllzEeXMHSfJ7ZMah2WIcBLo8Xn1lWcGLEJtPQG1xKdKMlk5j
         D/mBXNIxIrUpjc41Ad1XGdPg29w0JxO3eGLt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:mime-version:content-type:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=a0YdoDoCkVTjdq4uL3jFG0d4Dn4JW2/NqgjXdTQhWZeiwe1mbmWvF0ZPVgNG5zAqem
         VSaFOCmxwCXiQ93nTTtMtT/YkmZ9o425spL74TDxHApu7VDNlzSlIlEBOd7YSh2AIRBO
         PkCSlH6X3bLLgocpM17HsEwTM0mvZ8DblwYv8=
Received: by 10.229.99.143 with SMTP id u15mr1954488qcn.206.1295546751789;
        Thu, 20 Jan 2011 10:05:51 -0800 (PST)
Received: from [192.168.5.140] (pool-173-79-248-150.washdc.fios.verizon.net [173.79.248.150])
        by mx.google.com with ESMTPS id g32sm5861984qck.10.2011.01.20.10.05.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 20 Jan 2011 10:05:50 -0800 (PST)
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=us-ascii
From: Brendan Grainger <brendan.grainger@gmail.com>
In-Reply-To: <AANLkTikZp0aDr7UKf+snLFn2eieA1a8WujW+VwUwp6BH@mail.gmail.com>
Date: Thu, 20 Jan 2011 13:05:48 -0500
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <7F3FC5A7-61C0-4C88-8340-D315ECC66C03@gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <AANLkTikZp0aDr7UKf+snLFn2eieA1a8WujW+VwUwp6BH@mail.gmail.com>
To: solr-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org


> On Tue, Jan 18, 2011 at 6:04 PM, Grant Ingersoll =
<gsingers@apache.org>wrote:
>=20
>> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we =
really
>> don't have a good sense of how people get Lucene and Solr for use in =
their
>> application.  Because of this, there has been some talk of dropping =
Maven
>> support for Lucene artifacts (or at least make them external).  =
Before we do
>> that, I'd like to conduct an informal poll of actual users out there =
and see
>> how you get Lucene or Solr.
>>=20
>> Where do you get your Lucene/Solr downloads from?
>>=20
>> [] ASF Mirrors (linked in our release announcements or via the Lucene
>> website)
>>=20
>> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>>=20
>> [] I/we build them from source via an SVN/Git checkout.
>>=20
>> [] Other (someone in your company mirrors them internally or via a
>> downstream project)
>>=20
>> Please put an X in the box that applies to you.  Multiple selections =
are OK
>> (for instance, if one project uses a mirror and another uses Maven)
>>=20
>> Please do not turn this thread into a discussion on Maven and it's
>> (de)merits, I simply want to know, informally, where people get their =
JARs
>> from.  In other words, no discussion is necessary (we already have =
that
>> going on dev@lucene.apache.org which you are welcome to join.)
>>=20
>> Thanks,
>> Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 18:59:48 2011
Return-Path: <java-user-return-48464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6448 invoked from network); 20 Jan 2011 18:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 18:59:48 -0000
Received: (qmail 13150 invoked by uid 500); 20 Jan 2011 18:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12544 invoked by uid 500); 20 Jan 2011 18:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12522 invoked by uid 99); 20 Jan 2011 18:59:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 18:59:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 18:59:32 +0000
Received: by pwj9 with SMTP id 9so191215pwj.35
        for <multiple recipients>; Thu, 20 Jan 2011 10:59:10 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.231.8 with SMTP id d8mr2518136wfh.252.1295549950120; Thu,
 20 Jan 2011 10:59:10 -0800 (PST)
Received: by 10.142.100.16 with HTTP; Thu, 20 Jan 2011 10:59:10 -0800 (PST)
Date: Thu, 20 Jan 2011 13:59:10 -0500
Message-ID: <AANLkTinbPV8DY+GHYDn8HgpbBP+-gCDsQgw7+VD19OtO@mail.gmail.com>
Subject: WARNING: re-index all trunk indices
From: Michael McCandless <lucene@mikemccandless.com>
To: Lucene Users <java-user@lucene.apache.org>, solr-user@lucene.apache.org, 
	"dev@lucene.apache.org Dev" <dev@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you are using Lucene's trunk (to be 4.0) builds, read on...

I just committed LUCENE-2872, which is a hard break on the index file format.

If you are living on Lucene's trunk then you have to remove any
previously created indices and re-index, after updating.

The change cuts over to a faster on-disk terms dictionary format,
which block-encodes term data & metadata between indexed
terms.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 19:05:06 2011
Return-Path: <java-user-return-48465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10939 invoked from network); 20 Jan 2011 19:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 19:05:05 -0000
Received: (qmail 24591 invoked by uid 500); 20 Jan 2011 19:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24514 invoked by uid 500); 20 Jan 2011 19:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 26746 invoked by uid 99); 20 Jan 2011 10:00:31 -0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of apancholi@chambal.com does not designate 216.139.236.26 as permitted sender)
Date: Thu, 20 Jan 2011 02:00:05 -0800 (PST)
From: Ashish Pancholi <apancholi@chambal.com>
To: java-user@lucene.apache.org
Message-ID: <1295517605174-2293832.post@n3.nabble.com>
Subject: Please Help
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Using Lucene_3.0.3. we would like to implement following: 
The number of occurrences of the term in the entire index.
      For Example :     
      If we have indexed following text : amazon, amazon s3, amazon
simpledb, amazon aws;
      Then we are supposed to get results : 

            amazon    4
            s3           1
            simpledb   1 
            aws         1

Showing phrases by combining the words, in the same sequence as they were in
original text, before Indexing.   

      Lets suppose, we have indexed following text : amazon, amazon s3,
amazon simpledb, amazon aws;
      And for two word pharses we are supposed to get results 

                amazon amazon
                amazon s3
                s3 amazon
                amazon simpledb
                simpledb amazon
                amazon aws

      And for three word pharses we are supposed to get results : 

               amazon amazon s3
               amazon s3 amazon
               s3 amazon simpledb
               amazon simpledb amazon
               simpledb amazon aws

Any help will be appreciated. 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Please-Help-tp2293832p2293832.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 19:05:14 2011
Return-Path: <java-user-return-48466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13630 invoked from network); 20 Jan 2011 19:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 19:05:14 -0000
Received: (qmail 27646 invoked by uid 500); 20 Jan 2011 19:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27607 invoked by uid 500); 20 Jan 2011 19:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 97667 invoked by uid 99); 20 Jan 2011 17:59:58 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tomasflobbe@gmail.com designates 209.85.210.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=DLt2EITzWDWkZqb8xv3vhqJgOjUGU98GV5IjjHHvkDI=;
        b=A7v7eAivvVNaDxIZEzKpPlPhG5Dxf/AB2KfHwv8B6Opyg0KD3DW0puU0GVvhLKvOqr
         Q5GRvl76xvfeVpHcxOhZNPwK9d7qPBzmS5JWMdingTdtZ6+XFgH9lFcIoJuhaLm9XPve
         QCPA9DW2Tvq92t/Q1ISMHzMZYehoyQzHVjNfM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=jyXnHL5Dg+hMv3Bbq48oGjUs3LotvcJDq80+C+3cg6O1HLITz0JDmqk/vZqSGwcx6z
         nPlraSgYXmYpQ+amFMWu4kFeu2BrQielO34on4fTfMAPo8oc7Keg2sOqqLlpZnZgWbjx
         S72FVL3cTTfXe2lSvuDmXWtgAeaifheaPLcqY=
MIME-Version: 1.0
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Thu, 20 Jan 2011 14:59:31 -0300
Message-ID: <AANLkTikZp0aDr7UKf+snLFn2eieA1a8WujW+VwUwp6BH@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: =?ISO-8859-1?Q?Tom=E1s_Fern=E1ndez_L=F6bbe?= <tomasflobbe@gmail.com>
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3135a5235dd049a4ae5ab

--000e0cd3135a5235dd049a4ae5ab
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Jan 18, 2011 at 6:04 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we really
> don't have a good sense of how people get Lucene and Solr for use in their
> application.  Because of this, there has been some talk of dropping Maven
> support for Lucene artifacts (or at least make them external).  Before we do
> that, I'd like to conduct an informal poll of actual users out there and see
> how you get Lucene or Solr.
>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [X] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
> Please put an X in the box that applies to you.  Multiple selections are OK
> (for instance, if one project uses a mirror and another uses Maven)
>
> Please do not turn this thread into a discussion on Maven and it's
> (de)merits, I simply want to know, informally, where people get their JARs
> from.  In other words, no discussion is necessary (we already have that
> going on dev@lucene.apache.org which you are welcome to join.)
>
> Thanks,
> Grant

--000e0cd3135a5235dd049a4ae5ab--

From java-user-return-48467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 21:37:43 2011
Return-Path: <java-user-return-48467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30433 invoked from network); 20 Jan 2011 21:37:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 21:37:42 -0000
Received: (qmail 67032 invoked by uid 500); 20 Jan 2011 21:37:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66873 invoked by uid 500); 20 Jan 2011 21:37:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66865 invoked by uid 99); 20 Jan 2011 21:37:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 21:37:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 21:37:32 +0000
Received: by wwd20 with SMTP id 20so1191686wwd.5
        for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 13:37:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:content-type:content-transfer-encoding
         :subject:date:message-id:to:mime-version:x-mailer;
        bh=WlrDTemFL252CLg4y/pLKWCRIuiCLW8maGLmZck9Jkc=;
        b=OMngS1q/19cRzyF+wzXXZR23ShVvqeBqMh2i9wZpIzV1i5iPTseUXiADjL7VTcb+31
         dNfyREIE+Z0ds7fmyJOr2BE4/nUyJlzqs/quX9Bx9SYH+Ldz41rNphMgiVA5C7K9t3Df
         RJB/ABfMe7MIz2iUBQL7Q8kyDmKkVUq5yJYUk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=s7XC3/QfesX0dA698kvU7zewWhRRpmN0/S8Mmcm/7uEHXli03wDj4+3NAN7W0+Zz0z
         N3EvxQ5yn+KPLc6kebCAdf/zQvbsV0cW/OmIMck3OgzpCIj6nzZQV7bLEqJbG/NWppzx
         FCnaS1q67UdwAgIN67u3khXNHAIGv5lSt6ob0=
Received: by 10.227.158.21 with SMTP id d21mr2992074wbx.21.1295559430909;
        Thu, 20 Jan 2011 13:37:10 -0800 (PST)
Received: from sarahlp.home (host86-155-171-16.range86-155.btcentralplus.com [86.155.171.16])
        by mx.google.com with ESMTPS id n78sm4503393weq.3.2011.01.20.13.37.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 20 Jan 2011 13:37:10 -0800 (PST)
From: Amin Mohammed-Coleman <aminmc@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Wildcard Case Sensitivity
Date: Thu, 20 Jan 2011 21:37:15 +0000
Message-Id: <D339F421-E590-4A37-ABBB-0B0EAE46ADAF@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)

Hi

Apologies up front if this question has been asked before.

I have a document which contains a field that stores an untokenized =
value such as TEST_TYPE.  The analyser used is StandardAnalyzer and I =
pass the same analyzer into the query.  I perform the following query : =
fieldName:TEST_*, however this does not return any results.  Is this the =
expected behaviour?  Can I use capital letters in my wildcard query or =
do i need to do some processing before passing it to the query parser?=20=



Any help would be appreciated.

Thanks
Amin=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 21:56:59 2011
Return-Path: <java-user-return-48468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55605 invoked from network); 20 Jan 2011 21:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 21:56:58 -0000
Received: (qmail 16197 invoked by uid 500); 20 Jan 2011 21:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16015 invoked by uid 500); 20 Jan 2011 21:56:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16006 invoked by uid 99); 20 Jan 2011 21:56:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 21:56:55 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 21:56:48 +0000
Received: from brouwer.fritz.box (srbk-5d807b12.pool.mediaWays.net [93.128.123.18])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0LnFph-1Q9sT50PPh-00hqDq; Thu, 20 Jan 2011 22:56:22 +0100
Subject: Re: Best practices for multiple languages?
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: text/plain; charset=iso-8859-1
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <4D38045F.3060103@eolya.fr>
Date: Thu, 20 Jan 2011 22:56:20 +0100
Cc: Bill Janssen <janssen@parc.com>
Content-Transfer-Encoding: quoted-printable
Message-Id: <964C28DD-954B-4A5D-A7F6-3DB07F82A650@hoplahup.net>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FDFD0@Exchange2007.mysigndomain.corp> <AANLkTi=GCeDjseXdRa6YZBjHxQyrXoxCbrSn8TboXVzr@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FDFDA@Exchange2007.mysigndomain.corp> <36966.1295461311@parc.com> <7C4FC074-AF5B-425B-9B69-1AE1CE818B6D@hoplahup.net> <39362.1295466994@parc.com> <A14418A8-8D65-4E0D-8F02-8C49B8ACC8AB@hoplahup.net> <43989.1295479776@parc.com> <4D38045F.3060103@eolya.fr>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:vZBqxIrfA3dbax4IacbuRSa+ulF+fWjNEk9vgWl6v2e
 3DAJSr6/+pRW73l97/YANryQp8EmiR11UKw3IjB/m22rqOu2rz
 ByTENs9eLQNlExj4xC1gggM38t0UmLwqjr8BKulke/xpQ2xvvc
 eQYn9/FEYYH7mG0rW1VB7VRR2CQQBc3MzFyouoAg1jJUabXiL6
 Bfqb8/BZPJGnCV/9EOSafHE+fabSwVdI5Ykc+LSVWo=
X-Virus-Checked: Checked by ClamAV on apache.org

Isn't this approach somewhat bad for term-frequency?

Words that would appear in several languages would be a lot more =
frequent (hence less significative).

I'm still preferring the split-field method with a proper query =
expansion.
This way, the term-frequency is evaluated on the corpus of one language.

Dominique, in your case, at least if on the web, you have:
- the user's preferred language (if defined in a profile)
- the list of languages the browser says it accepts
And that can easily be limited to around 8 so that you cover any =
language the user is expecting to search.

paul


Le 20 janv. 2011 =E0 10:46, Dominique Bejean a =E9crit :

> Hi,
>=20
> During a recent Solr project we needed to index document in a lot of =
languages. The natural solution with Lucene and Solr is to define one =
field per languages. Each field is configured in the schema.xml file to =
use a language specific processing (tokenizing, stop words, stemmer, =
...).  This is really not easy to manage if you have a lot of languages =
and this means that 1) the search interface need to know in which =
language your are searching 2) the search interface can't search in all =
languages at the same time.
>=20
> So, I decided that the only solution was to index all languages in =
only one field.
>=20
> Obviously, each language needs to be processed specifically. For this, =
I developped a analyzer that is in charge to redirect content to the =
correct tockenizer, filters and stemmer  accordingly to its language. =
This analyzer is also used at query time. If the user specify the =
language of its query, the query is processed by appropriate tockenizer, =
filters and stemmer otherwise the query is processed by a defaut =
tockenizer, filters and stemmer.
>=20
> With this solution :
>=20
> 1. I only need one field (or two if I want both stemmed and unstemmed =
processing)
> 2. The user can search in all document regarless to there language
>=20
> I hope this help.
>=20
> Dominique
> www.zoonix.fr
> www.crawl-anywhere.com
>=20
>=20
>=20
> Le 20/01/11 00:29, Bill Janssen a =E9crit :
>> Paul Libbrecht<paul@hoplahup.net>  wrote:
>>=20
>>> I did several changes of this sort and the precision and recall
>>> measures went better in particular in presence of =
language-indication
>>> failure which happened to be very common in our authoring =
environment.
>> There are two kinds of failures:  no language, or wrong language.
>>=20
>> For no language, I fall back to StandardAnalyzer, so I should have
>> results similar to yours.  For wrong language, well, I'm using OTS
>> trigram-based language guessers, and they're pretty good these days.
>>=20
>>>>> Wouldn't it be better to prefer precise matches (a field that is
>>>>> analyzed with StandardAnalyzer for example) but also allow matches =
are
>>>>> stemmed.
>> Yes, I think it might improve things, but again, by how much?  =
Stemming is
>> better than no stemming, in terms of recall.  But this approach would =
also
>> improve precision.
>>=20
>> Bill
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 20 23:23:14 2011
Return-Path: <java-user-return-48469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17777 invoked from network); 20 Jan 2011 23:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jan 2011 23:23:14 -0000
Received: (qmail 57769 invoked by uid 500); 20 Jan 2011 23:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57624 invoked by uid 500); 20 Jan 2011 23:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57613 invoked by uid 99); 20 Jan 2011 23:23:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 23:23:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jack.krupansky@lucidimagination.com designates 38.102.63.183 as permitted sender)
Received: from [38.102.63.183] (HELO smtp-4.01.com) (38.102.63.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jan 2011 23:23:02 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp-4.01.com (Postfix) with ESMTP id 9538559DA2
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 17:22:41 -0600 (CST)
Received: from smtp-4.01.com ([127.0.0.1])
	by localhost (smtp-4.01.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ocIYiqdd+Lf1 for <java-user@lucene.apache.org>;
	Thu, 20 Jan 2011 17:22:41 -0600 (CST)
Received: by smtp-4.01.com (Postfix, from userid 99)
	id 7C11C59DA1; Thu, 20 Jan 2011 17:22:41 -0600 (CST)
Received: from JackKrupansky (207-237-117-231.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com [207.237.117.231])
	by smtp-4.01.com (Postfix) with ESMTPSA id 46AEA59DA2
	for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 17:22:41 -0600 (CST)
Message-ID: <CE380D3E9C814A6D8F5DBAF0B6278098@JackKrupansky>
From: "Jack Krupansky" <jack.krupansky@lucidimagination.com>
To: <java-user@lucene.apache.org>
References: <D339F421-E590-4A37-ABBB-0B0EAE46ADAF@gmail.com>
In-Reply-To: <D339F421-E590-4A37-ABBB-0B0EAE46ADAF@gmail.com>
Subject: Re: Wildcard Case Sensitivity
Date: Thu, 20 Jan 2011 18:22:35 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3502.922
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3502.922
X-Virus-Checked: Checked by ClamAV on apache.org

Wildcards only work for a single term. At index time the underscore in 
TEST_TYPE is treated as if it were a space separator, producing two terms. 
At query time the existence of the wildcard suppresses ALL analysis of the 
term (although that behavior may vary between query parsers), so that the 
underscore is kept at query time even though StandardAnalyzer (or 
WordDelimiterFilter or similar filter) would produce a text stream without 
any underscores.

StandardAnalyzer lower cases its output, so there is no case sensitivity. 
But, if you happen to use upper case in a wildcard query term that query 
term will fail to match anything because the existence of the wildcard 
suppresses all analysis, including the lowercasing. Once again, different 
query parsers may behave differently.

-- Jack Krupansky

-----Original Message----- 
From: Amin Mohammed-Coleman
Sent: Thursday, January 20, 2011 4:37 PM
To: java-user@lucene.apache.org
Subject: Wildcard Case Sensitivity

Hi

Apologies up front if this question has been asked before.

I have a document which contains a field that stores an untokenized value 
such as TEST_TYPE.  The analyser used is StandardAnalyzer and I pass the 
same analyzer into the query.  I perform the following query : 
fieldName:TEST_*, however this does not return any results.  Is this the 
expected behaviour?  Can I use capital letters in my wildcard query or do i 
need to do some processing before passing it to the query parser?


Any help would be appreciated.

Thanks
Amin
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 05:22:54 2011
Return-Path: <java-user-return-48470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88590 invoked from network); 21 Jan 2011 05:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 05:22:54 -0000
Received: (qmail 94033 invoked by uid 500); 21 Jan 2011 05:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93193 invoked by uid 500); 21 Jan 2011 05:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93184 invoked by uid 99); 21 Jan 2011 05:22:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 05:22:45 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [121.101.151.213] (HELO nm4-vm0.bullet.mail.in.yahoo.com) (121.101.151.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jan 2011 05:22:39 +0000
Received: from [121.101.151.238] by nm4.bullet.mail.in.yahoo.com with NNFMP; 21 Jan 2011 05:22:24 -0000
Received: from [121.101.151.232] by tm3.bullet.mail.in.yahoo.com with NNFMP; 21 Jan 2011 05:22:19 -0000
Received: from [127.0.0.1] by omp1001.mail.in.yahoo.com with NNFMP; 21 Jan 2011 05:22:39 -0000
X-Yahoo-Newman-Id: 291499.90025.bm@omp1001.mail.in.yahoo.com
Received: (qmail 98003 invoked from network); 21 Jan 2011 05:22:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=m9Ub/ajE+CQ82akZieGnvgEU2TSOfpGwnnl3JwoHl/srbmbBkwpKffIiJevJc9RQ3DgjRunLPq+uL0+xIp32TvGpfD9oUyr0ASRrV+g+sG+R0M6ODbkYwOKgqEXcIJZeJ2U2jqTyi1OJlb5+W8n6f5duyZi4RzgMKMhypIwF3Jo=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1295587335; bh=H5Qp4+VxQ2X94pnxwUS9yZ07BdlW5Rr6USqLgAmdrgo=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=aJrz+XcDwhJtt2J/yc3+4nSgMNVcYBYFFOs94VRF+/5IBX+ZpjRSIGahIe1poPrs8UHYVW86tBVmsaiBLTbt9yHtzJJJWNn+8LSW8vQabW+GDpwNvV+O6fZj4mgVhP0DXLqpwRJgZDZbk3eNilqoeGg6Zg1CTrpe33NHAj/kFJc=
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp109.mail.in.yahoo.com with SMTP; 21 Jan 2011 10:52:15 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: BJxBUOAVM1mhLDqTCD16oqgwyNZZ1Xuzi010CGO6pl.tElX
 li6QdJXLuYEkLMkFWDh9XtTo1I70Q430KT7IlWFFGY7GtM6bRMtQIUZZb2UP
 loeWj287mjB3df474FJT5Cpnopxjo0kjtV1vdvdZRRRu12P5kv4HkzMjsoG1
 TcI459LkVSrweqGoqRghIIFDdqgyoPKS9
X-Yahoo-Newman-Property: ymail-3
Message-ID: <3A79253D430F44B4947C210BE1FFC929@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Scale out design patterns
Date: Fri, 21 Jan 2011 10:52:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931

Hello all,

Could you any one guide me what all the various ways we could scale out?

1. Index:  Add data to the nodes in round-robin.=20
   Search: Query all the nodes and cluster the results using carrot2.=20

2.Horizontal partitioning and No shared architecture,=20
   Index:   Split the data based on userid and index few set of users =
data in each node.   =20
   Search: Have a mapper kind of application which could tell which =
userid is mapped to node, redirect the search traffic to corresponding =
node.

Which one is best? Did you guys tried any of these approach. Please =
share your thoughts.

Regards
Ganesh    
Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Download Now! http://messenger.yahoo.com/download.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 05:47:40 2011
Return-Path: <java-user-return-48471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8449 invoked from network); 21 Jan 2011 05:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 05:47:40 -0000
Received: (qmail 11947 invoked by uid 500); 21 Jan 2011 05:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11638 invoked by uid 500); 21 Jan 2011 05:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11629 invoked by uid 99); 21 Jan 2011 05:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 05:47:34 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 05:47:30 +0000
Received: by fxm2 with SMTP id 2so1511708fxm.35
        for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 21:47:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=ob9xQOVla76iyTYOVw0adI7K8lQTDefY2GXOrtJ/gUU=;
        b=IbPvZG6wNFGLveclZlhtJMKSvPUH8zv+aFVpCtxmLeUEhx+wUTwS02MHnDY1VTOt3A
         pM/oAIFiv5xEzsoSxR4OmWf/6ReCei0o+4Y96dd+AJHzf7EPuCbfvKI1diLhC2jnyPDp
         62r6S5pSBj4oD8mgX0UzewNceZazo42nJmrzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=OjCv0Og879iOYowkCrad2I/rpmlC4XA+9kVMnQ5CBONT4OLwbydh9zAm7kr4Holq/R
         1exqjnmo6J4MYWaiZcfCDDWXfKuj9dKv5nGbrc/t563spogxPdxCYcYU3S+c8wzlTpHj
         NPUdmoWyZyRiWvgia/wI8VqzlTjZbxavk29tc=
Received: by 10.223.125.196 with SMTP id z4mr208011far.124.1295588828326; Thu,
 20 Jan 2011 21:47:08 -0800 (PST)
MIME-Version: 1.0
Received: by 10.223.111.142 with HTTP; Thu, 20 Jan 2011 21:46:48 -0800 (PST)
In-Reply-To: <1295517605174-2293832.post@n3.nabble.com>
References: <1295517605174-2293832.post@n3.nabble.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 21 Jan 2011 11:16:48 +0530
Message-ID: <AANLkTi=QB-17h6Pjk2mfpihTN33g=iPnQWm1DC3Gz+zX@mail.gmail.com>
Subject: Re: Please Help
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5c241e32c76049a54c792

--001636c5c241e32c76049a54c792
Content-Type: text/plain; charset=ISO-8859-1

Hi,
You could just try the following code to print the term freq for individual
terms.
************************
public static void printTermFreq(String indexPath) throws
CorruptIndexException, IOException{
    IndexReader ir = IndexReader.open(new NIOFSDirectory(new
File(indexPath)));
    TermEnum te = ir.terms();
    while(te.next()){
      System.out.println(te.term().text()+":"+te.docFreq());
    }
    ir.close();
  }
*************************

For phrases, you'd have to build/use a different tokenizer that tokenizes
the input text into those phrases (stored as a single term). Something of an
ngram, and then treat those phrases at terms.
Doing it at runtime would not be a feasible option.


--
Anshum Gupta
http://ai-cafe.blogspot.com


On Thu, Jan 20, 2011 at 3:30 PM, Ashish Pancholi <apancholi@chambal.com>wrote:

>
> Using Lucene_3.0.3. we would like to implement following:
> The number of occurrences of the term in the entire index.
>      For Example :
>      If we have indexed following text : amazon, amazon s3, amazon
> simpledb, amazon aws;
>      Then we are supposed to get results :
>
>            amazon    4
>            s3           1
>            simpledb   1
>            aws         1
>
> Showing phrases by combining the words, in the same sequence as they were
> in
> original text, before Indexing.
>
>      Lets suppose, we have indexed following text : amazon, amazon s3,
> amazon simpledb, amazon aws;
>      And for two word pharses we are supposed to get results
>
>                amazon amazon
>                amazon s3
>                s3 amazon
>                amazon simpledb
>                simpledb amazon
>                amazon aws
>
>      And for three word pharses we are supposed to get results :
>
>               amazon amazon s3
>               amazon s3 amazon
>               s3 amazon simpledb
>               amazon simpledb amazon
>               simpledb amazon aws
>
> Any help will be appreciated.
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Please-Help-tp2293832p2293832.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c5c241e32c76049a54c792--

From java-user-return-48472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 06:35:37 2011
Return-Path: <java-user-return-48472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35541 invoked from network); 21 Jan 2011 06:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 06:35:37 -0000
Received: (qmail 49204 invoked by uid 500); 21 Jan 2011 06:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48805 invoked by uid 500); 21 Jan 2011 06:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48764 invoked by uid 99); 21 Jan 2011 06:35:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 06:35:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 06:35:25 +0000
Received: by iwn2 with SMTP id 2so1510177iwn.35
        for <java-user@lucene.apache.org>; Thu, 20 Jan 2011 22:35:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=+iYpypCArGaXsuyouchOUYRgeKN9lamxZ2AfzwylcOQ=;
        b=V+dTEB4q8LlQLtuFhdMpy4dCz9OfHsV2tqfQNkztbHiRKa41qfHgX3+9PNZSfVz1da
         VEpTnF9HIxVWQbmc1UwpuGKhSuYiiAwiqOnwCuHfXxbgLBEr2nRa3yC41907dgA7Smgj
         abSC0LfcNR/YNrAo4IIZ8FqYugAEIO9FiF1TM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=N7KZYWqmsEFy4IALQzos+BP7uQe2R+XYsWqIkVi6x/j8h2oh4w37v1TeUZscYn1f5L
         W7YFLBm4qpKUQWDgp+hqQ8Q1+YLkFi6Asp4eaAeFZR3HZIvFEY6V6ulNz5D20J/CnBx8
         Fb7W+pRqWLxKUsKqVsyQUZE/KaiVJuhDMqBBA=
Received: by 10.42.169.193 with SMTP id c1mr253807icz.371.1295591704896; Thu,
 20 Jan 2011 22:35:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.176.3 with HTTP; Thu, 20 Jan 2011 22:34:44 -0800 (PST)
In-Reply-To: <3A79253D430F44B4947C210BE1FFC929@sv.us.sonicwall.com>
References: <3A79253D430F44B4947C210BE1FFC929@sv.us.sonicwall.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 21 Jan 2011 12:04:44 +0530
Message-ID: <AANLkTik6YYi0i7ezhwSV32qMuuB7NCpoh8PGxNX7_kxj@mail.gmail.com>
Subject: Re: Scale out design patterns
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8a3058253b049a557353

--90e6ba6e8a3058253b049a557353
Content-Type: text/plain; charset=ISO-8859-1

Hi Ganesh,
I'd suggest, if you have a particular dimension/field on which you could
shard your data such that the query/data breakup gets predictable, that
would be a good way to scale out e.g. if you have users which are equally
active/searched then you may want to split their data on a simple mod of
some numeric (auto increment) userid.
This works well under normal cases unless your partitioning is not
predictable.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Fri, Jan 21, 2011 at 10:52 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello all,
>
> Could you any one guide me what all the various ways we could scale out?
>
> 1. Index:  Add data to the nodes in round-robin.
>   Search: Query all the nodes and cluster the results using carrot2.
>
> 2.Horizontal partitioning and No shared architecture,
>   Index:   Split the data based on userid and index few set of users data
> in each node.
>   Search: Have a mapper kind of application which could tell which userid
> is mapped to node, redirect the search traffic to corresponding node.
>
> Which one is best? Did you guys tried any of these approach. Please share
> your thoughts.
>
> Regards
> Ganesh
> Send free SMS to your Friends on Mobile from your Yahoo! Messenger.
> Download Now! http://messenger.yahoo.com/download.php
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6e8a3058253b049a557353--

From java-user-return-48473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 09:05:15 2011
Return-Path: <java-user-return-48473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91794 invoked from network); 21 Jan 2011 09:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 09:05:14 -0000
Received: (qmail 23481 invoked by uid 500); 21 Jan 2011 09:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22853 invoked by uid 500); 21 Jan 2011 09:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22829 invoked by uid 99); 21 Jan 2011 09:05:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:05:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of qingyujingyu@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:04:58 +0000
Received: by iyb26 with SMTP id 26so1597542iyb.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 01:04:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=mIed4gKUoQYGFKN0wKJ0cwyxDKYwyfHeXIZ3BjmAkOY=;
        b=m2k5wFpCE/RYY9MdeHISo4ibPkGMGCdlb+XIRfQVJnSsNF5zQ5fludc0GYp8C/w6Lz
         fqfmN0BYvSnkT42Ku0TezdrSCvBMBekP6bF6in+45J9eLBOZ8unfxLtegWe08gC1KY2K
         XmjwtItObX9Kcuv3Sr1R5pxSRKIcGavnI49o4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XNebAt7vQWdRT5zAV/ZJhfe8cvNnr9iRFLQEFBkGNPnNCtpa4hq7pMTGzMI9gQT0kg
         MaSKW2VgYRJr4nK61EXUXoyMCD0lb4Ga0bbT28VYGyCLCKFkWzbeHIOV+FmKcNTRmk0E
         HW83HaZ/o++llfUMVpNbsY6AhweMFeBJljUlE=
MIME-Version: 1.0
Received: by 10.42.217.198 with SMTP id hn6mr393850icb.346.1295600677578; Fri,
 21 Jan 2011 01:04:37 -0800 (PST)
Received: by 10.42.221.201 with HTTP; Fri, 21 Jan 2011 01:04:37 -0800 (PST)
Date: Fri, 21 Jan 2011 17:04:37 +0800
Message-ID: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
Subject: How to rebuild index
From: =?UTF-8?B?6buE6Z2W5a6H?= <qingyujingyu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf305641e1286670049a578aab
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf305641e1286670049a578aab
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi,
I am new to lucene. Recently I was assigned for some lucene related
workitems.
Now there is one problem. Before, we use StandardAnalyzer in our
application, and our application has been online for about two years.
Now, we must to write a Custom Analyzer to replace the StandarAnalyzer for
enhancement requirement.
But there are already much exists production data and the lucene
index(generated with StandardAnalyzer).
What I need to do if I change to use the new Custom Analyzer?
>From the book "Lucene In Action". I see follow sentence:
"If you=92re changing analyzers, you should rebuild your index using the ne=
w
analyzer so that all documents are analyzed in the same manner."

But I don't know how to rebuild the exists index with a new Analyzer. I
can't find a API related to this.
Any help will be appreciated.
Thanks In Advance.

--20cf305641e1286670049a578aab--

From java-user-return-48474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 09:28:54 2011
Return-Path: <java-user-return-48474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3131 invoked from network); 21 Jan 2011 09:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 09:28:54 -0000
Received: (qmail 55188 invoked by uid 500); 21 Jan 2011 09:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54688 invoked by uid 500); 21 Jan 2011 09:28:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54673 invoked by uid 99); 21 Jan 2011 09:28:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:28:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lahiruts@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:28:39 +0000
Received: by iyb26 with SMTP id 26so1617284iyb.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 01:28:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=RANNV2v22UxFZLC+ktpulikTesPx4eU8X3/SKyhQ7g4=;
        b=sr9pAoxbdT1CXu8scDvKcPo4Zf7JVd9PgRIV4q4N0CONtX241QtXC8Put+584ALRWn
         1+QqBzeAP6J86N7s6RZQVv5tWQAct80dO5O+SS8TiBXvA6NDTX20ZWb9F7v9CpOwXTYD
         97QpOiAkS9Xv649eB5I85j29y8ImdyYx9bACg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BzJIYibpCuRTszgRoB9YpxR3woCZ1Y0yspCl0MCLubD+Uxt9FBmaMW4xyRm3eHrB7t
         CMdFcjdKC/1xQSDgZ+sMMs5xCCXeGBysUIkLqVPg7fy6TAtj76Rx0ppSEdYZl3GbPpwr
         J7eE/BLf+1+Nkyex5ZY/oB4gTOfC/D2tCVE58=
MIME-Version: 1.0
Received: by 10.231.31.139 with SMTP id y11mr427784ibc.96.1295602098476; Fri,
 21 Jan 2011 01:28:18 -0800 (PST)
Received: by 10.231.139.147 with HTTP; Fri, 21 Jan 2011 01:28:18 -0800 (PST)
In-Reply-To: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
References: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
Date: Fri, 21 Jan 2011 14:58:18 +0530
Message-ID: <AANLkTikzc5ypfx0qDZxP-cv+Y10pHqXN4D0zxdYdiaKP@mail.gmail.com>
Subject: Re: How to rebuild index
From: Lahiru Samarakoon <lahiruts@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00235433303ad9984d049a57deeb
X-Virus-Checked: Checked by ClamAV on apache.org

--00235433303ad9984d049a57deeb
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

HI

You were using a system for two years and it used an index created using
lucene with the StandardAnalyzer. So, There must be an index creation code
with your system.

 Anyway,Since you have the book =E2=80=9C*Lucene in action*=E2=80=9D you ca=
n find how to
create an index by reading chapter 2 (Indexing). Please refer that section
and you will have a better understanding. It also contains the API details.

 Thank you,

 Best Regards,

Lahiru


On Fri, Jan 21, 2011 at 2:34 PM, =E9=BB=84=E9=9D=96=E5=AE=87 <qingyujingyu@=
gmail.com> wrote:

> Hi,
> I am new to lucene. Recently I was assigned for some lucene related
> workitems.
> Now there is one problem. Before, we use StandardAnalyzer in our
> application, and our application has been online for about two years.
> Now, we must to write a Custom Analyzer to replace the StandarAnalyzer fo=
r
> enhancement requirement.
> But there are already much exists production data and the lucene
> index(generated with StandardAnalyzer).
> What I need to do if I change to use the new Custom Analyzer?
> From the book "Lucene In Action". I see follow sentence:
> "If you=E2=80=99re changing analyzers, you should rebuild your index usin=
g the new
> analyzer so that all documents are analyzed in the same manner."
>
> But I don't know how to rebuild the exists index with a new Analyzer. I
> can't find a API related to this.
> Any help will be appreciated.
> Thanks In Advance.
>

--00235433303ad9984d049a57deeb--

From java-user-return-48475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 09:33:05 2011
Return-Path: <java-user-return-48475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4740 invoked from network); 21 Jan 2011 09:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 09:33:05 -0000
Received: (qmail 58930 invoked by uid 500); 21 Jan 2011 09:33:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58771 invoked by uid 500); 21 Jan 2011 09:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58758 invoked by uid 99); 21 Jan 2011 09:32:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:32:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 09:32:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8614ED36005
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 10:32:29 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B+l-9r+lSuyY for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 10:32:24 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id ECFADD36003
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 10:32:23 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
In-Reply-To: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
Subject: RE: How to rebuild index
Date: Fri, 21 Jan 2011 10:32:35 +0100
Message-ID: <003b01cbb94e$23639eb0$6a2adc10$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHfYnUYm7HfO5gYkXGfHslXJt91WpOz1vpg
Content-Language: de

Hi,

> "If you$B!G(Bre changing analyzers, you should rebuild your index using the
new analyzer so that all documents are analyzed in the same manner."

It says everything: Take your original data and re-create the index.
Indexing is a lossy operation, so you must recreate the index using *all*
the original data like it was done the last 2 years. Just use another
analyzer.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: $B2+Lw1'(B [mailto:qingyujingyu@gmail.com]
> Sent: Friday, January 21, 2011 10:05 AM
> To: java-user@lucene.apache.org
> Subject: How to rebuild index
>
> Hi,
> I am new to lucene. Recently I was assigned for some lucene related
> workitems.
> Now there is one problem. Before, we use StandardAnalyzer in our
> application, and our application has been online for about two years.
> Now, we must to write a Custom Analyzer to replace the StandarAnalyzer for
> enhancement requirement.
> But there are already much exists production data and the lucene
> index(generated with StandardAnalyzer).
> What I need to do if I change to use the new Custom Analyzer?
> From the book "Lucene In Action". I see follow sentence:
> "If you$B!G(Bre changing analyzers, you should rebuild your index using the
new
> analyzer so that all documents are analyzed in the same manner."
>
> But I don't know how to rebuild the exists index with a new Analyzer. I
can't
> find a API related to this.
> Any help will be appreciated.
> Thanks In Advance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 10:00:22 2011
Return-Path: <java-user-return-48476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15402 invoked from network); 21 Jan 2011 10:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 10:00:21 -0000
Received: (qmail 91181 invoked by uid 500); 21 Jan 2011 10:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90874 invoked by uid 500); 21 Jan 2011 10:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90865 invoked by uid 99); 21 Jan 2011 10:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 10:00:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of qingyujingyu@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 10:00:08 +0000
Received: by iyb26 with SMTP id 26so1644859iyb.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 01:59:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=0Om4qv8M6+m5BqLvXzXjaIIkVCvGBRrC82I4GQ2MqCI=;
        b=GwpGvl/N0qCZglhEt5vThR4bwaO7egkOzixlowQ/+hut3Ol4hMZ9q+VRkpEVHJfcsD
         652VPUaJRdy5mhiBcv34L2OeuSimMA9to7D9iZNDKzYru6JADZGsP0vOhlwWS5VzXiTC
         PCAFZV7zhFsapzgVQkUiOUr3cBW0TYVTq9d14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RmNBeL4Uy4XFgJjGZ3ETX1P0r4dskIWDC/90UYCfvWYbSkzK9p2HhB/vlr/l4hy6KT
         nqVk+Nft9DtKlCJqd0+72TqxJuYVGsEBl3pLY/zsktiTayibx5DNGFGiNGvbWUwunAhl
         nNfi3EFg+PerPiCi3x5JESyQcPU1RBKiv8Fko=
MIME-Version: 1.0
Received: by 10.42.217.198 with SMTP id hn6mr464135icb.346.1295603988502; Fri,
 21 Jan 2011 01:59:48 -0800 (PST)
Received: by 10.42.221.201 with HTTP; Fri, 21 Jan 2011 01:59:48 -0800 (PST)
In-Reply-To: <003b01cbb94e$23639eb0$6a2adc10$@thetaphi.de>
References: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
	<003b01cbb94e$23639eb0$6a2adc10$@thetaphi.de>
Date: Fri, 21 Jan 2011 17:59:48 +0800
Message-ID: <AANLkTi=75BbbTy8mNfDeP_8bk2hEEfcPbw13CtH+Qg+N@mail.gmail.com>
Subject: Re: How to rebuild index
From: =?UTF-8?B?6buE6Z2W5a6H?= <qingyujingyu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf305641e1811936049a584fc5

--20cf305641e1811936049a584fc5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hmm, I see. Thanks very much.

2011/1/21 Uwe Schindler <uwe@thetaphi.de>

> Hi,
>
> > "If you=E2=80=99re changing analyzers, you should rebuild your index us=
ing the
> new analyzer so that all documents are analyzed in the same manner."
>
> It says everything: Take your original data and re-create the index.
> Indexing is a lossy operation, so you must recreate the index using *all*
> the original data like it was done the last 2 years. Just use another
> analyzer.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: =E9=BB=84=E9=9D=96=E5=AE=87 [mailto:qingyujingyu@gmail.com]
> > Sent: Friday, January 21, 2011 10:05 AM
> > To: java-user@lucene.apache.org
> > Subject: How to rebuild index
> >
> > Hi,
> > I am new to lucene. Recently I was assigned for some lucene related
> > workitems.
> > Now there is one problem. Before, we use StandardAnalyzer in our
> > application, and our application has been online for about two years.
> > Now, we must to write a Custom Analyzer to replace the StandarAnalyzer
> for
> > enhancement requirement.
> > But there are already much exists production data and the lucene
> > index(generated with StandardAnalyzer).
> > What I need to do if I change to use the new Custom Analyzer?
> > From the book "Lucene In Action". I see follow sentence:
> > "If you=E2=80=99re changing analyzers, you should rebuild your index us=
ing the
> new
> > analyzer so that all documents are analyzed in the same manner."
> >
> > But I don't know how to rebuild the exists index with a new Analyzer. I
> can't
> > find a API related to this.
> > Any help will be appreciated.
> > Thanks In Advance.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf305641e1811936049a584fc5--

From java-user-return-48477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 10:10:31 2011
Return-Path: <java-user-return-48477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29935 invoked from network); 21 Jan 2011 10:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 10:10:30 -0000
Received: (qmail 8469 invoked by uid 500); 21 Jan 2011 10:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8128 invoked by uid 500); 21 Jan 2011 10:10:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8115 invoked by uid 99); 21 Jan 2011 10:10:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 10:10:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 10:10:19 +0000
Received: by bwz8 with SMTP id 8so1467656bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 02:09:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=tyVAcJ/ld9hOPjoJmEjriO46vObVkzdnjXHQd9rUx64=;
        b=NeYtqY7yZLpc//gurSLmum6uQRnKQT4ifud4iUoxSU2JGGCJn/gbQU+wvApsr7lUGI
         SZ2FNFIxhOUOdiq6hLsYeO+YF35B8tS/mbdqtp2hC3gL334ZAFkWfN0LPonn3JjCsPt+
         F5iQ/BogSenasYpuLPUlWe4c0kCdIak4p++4s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YrZX3gVb5NJZ3bwZsspbkHvVJSdr89mPg70A8RNOpzY3MmAeTpGn/pXaWeh8hzFwg0
         g8SA+YZJ+1GQj1yCtpoahbTduAXkpxeYZ62dXecPiKdZ7pxFjrtv3odEIh9idff7rWZd
         pSzM9iqpIbDjSu0pLtMmhiHmHyDjqTGUcHS0w=
Received: by 10.204.98.65 with SMTP id p1mr352984bkn.198.1295604597012; Fri,
 21 Jan 2011 02:09:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 21 Jan 2011 02:09:36 -0800 (PST)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 21 Jan 2011 10:09:36 +0000
Message-ID: <AANLkTi=-4SkCdwG6z=7=ffb_akGok6b8sok08LoX0gyO@mail.gmail.com>
Subject: Re: Paging with Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

The standard recommendation for paging is to re-execute the search
for second and subsequent pages and return the second or subsequent
chunk of hits.  Would that not work in your case?

An alternative is to read and cache hits from the initial search but
that is generally more complex.


--
Ian.

On Thu, Jan 20, 2011 at 7:36 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> (thanks fort he many answers to my initial lucene question "Best practices for multiple languages?")
>
> We shall be confronted with the followong problem:
> due to the very dynamic access rules on our content, we shall not be able to formulate these in/as Filter(s).
> Hence we need to first search and then apply the access rules (i.e. security filter).
> What is the best approach to implement paging in this situation? Not to forget, the "overall context" is a web app ;-)
>
> Thx for your advices
> - Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 11:11:51 2011
Return-Path: <java-user-return-48478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63833 invoked from network); 21 Jan 2011 11:11:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 11:11:51 -0000
Received: (qmail 5708 invoked by uid 500); 21 Jan 2011 11:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4845 invoked by uid 500); 21 Jan 2011 11:11:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4265 invoked by uid 99); 21 Jan 2011 11:11:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 11:11:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hz.root@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 11:11:38 +0000
Received: by iwn2 with SMTP id 2so1722688iwn.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 03:11:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=0w/6ARzgB/une007auFp8B76ijTZDM0ndh2sPe7lUcQ=;
        b=fjv9rPGGGJomsLq8Ol6lxGaCNHbE+Y/mDSwyGwx2YxuMAEvHNDf1xlvQu17XEKu990
         3Ogr7Cfadpop1VI1qqvmJEkOdiNOV8fr5N+Kr91hh6N5tiuburnFI3Vr67uQmsac9LEF
         GutKG7UFb4Mqxjami7IwxY3AUz3dgkI6WkDhk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ay+tXGnhPufGIwNZS5BiRLpDK2LQZk5DiuNi0NbXWwtRD4NG4DMzxn9JdsxJWxe9Ia
         Vq8zXd6RK6jCV8aqCYSfUdV0nhWVuvx+P+/EngiBg1nJwvOxxH93yeHw0Q6HyPBCijG5
         ibcF+dKtWEgdiY63naWJU4n0MKV0B92EOY0W4=
MIME-Version: 1.0
Received: by 10.231.11.204 with SMTP id u12mr545180ibu.109.1295608277781; Fri,
 21 Jan 2011 03:11:17 -0800 (PST)
Received: by 10.231.167.142 with HTTP; Fri, 21 Jan 2011 03:11:17 -0800 (PST)
In-Reply-To: <AANLkTi=75BbbTy8mNfDeP_8bk2hEEfcPbw13CtH+Qg+N@mail.gmail.com>
References: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
	<003b01cbb94e$23639eb0$6a2adc10$@thetaphi.de>
	<AANLkTi=75BbbTy8mNfDeP_8bk2hEEfcPbw13CtH+Qg+N@mail.gmail.com>
Date: Fri, 21 Jan 2011 13:11:17 +0200
Message-ID: <AANLkTinShJRaibEtWwHOmo4ZqzLjMTWnAHU232kVBgZj@mail.gmail.com>
Subject: Re: How to rebuild index
From: Erdinc Akkaya <hz.root@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d62e52a4e0b049a594feb

--0022152d62e52a4e0b049a594feb
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

First of all try it on different folder than your current index folder. new
analyzer will make different index but same data. First you should create
index on different folder than just replace your new index with current
index files. If it fits, then replace the code and it will work.

2011/1/21 =E9=BB=84=E9=9D=96=E5=AE=87 <qingyujingyu@gmail.com>

> Hmm, I see. Thanks very much.
>
> 2011/1/21 Uwe Schindler <uwe@thetaphi.de>
>
> > Hi,
> >
> > > "If you=E2=80=99re changing analyzers, you should rebuild your index =
using the
> > new analyzer so that all documents are analyzed in the same manner."
> >
> > It says everything: Take your original data and re-create the index.
> > Indexing is a lossy operation, so you must recreate the index using *al=
l*
> > the original data like it was done the last 2 years. Just use another
> > analyzer.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: =E9=BB=84=E9=9D=96=E5=AE=87 [mailto:qingyujingyu@gmail.com]
> > > Sent: Friday, January 21, 2011 10:05 AM
> > > To: java-user@lucene.apache.org
> > > Subject: How to rebuild index
> > >
> > > Hi,
> > > I am new to lucene. Recently I was assigned for some lucene related
> > > workitems.
> > > Now there is one problem. Before, we use StandardAnalyzer in our
> > > application, and our application has been online for about two years.
> > > Now, we must to write a Custom Analyzer to replace the StandarAnalyze=
r
> > for
> > > enhancement requirement.
> > > But there are already much exists production data and the lucene
> > > index(generated with StandardAnalyzer).
> > > What I need to do if I change to use the new Custom Analyzer?
> > > From the book "Lucene In Action". I see follow sentence:
> > > "If you=E2=80=99re changing analyzers, you should rebuild your index =
using the
> > new
> > > analyzer so that all documents are analyzed in the same manner."
> > >
> > > But I don't know how to rebuild the exists index with a new Analyzer.=
 I
> > can't
> > > find a API related to this.
> > > Any help will be appreciated.
> > > Thanks In Advance.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--0022152d62e52a4e0b049a594feb--

From java-user-return-48479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 13:31:11 2011
Return-Path: <java-user-return-48479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33550 invoked from network); 21 Jan 2011 13:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 13:31:10 -0000
Received: (qmail 7442 invoked by uid 500); 21 Jan 2011 13:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7021 invoked by uid 500); 21 Jan 2011 13:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7013 invoked by uid 99); 21 Jan 2011 13:31:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:31:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:30:58 +0000
To: java-user@lucene.apache.org
MIME-Version: 1.0
X-KeepSent: 27E64A7D:7B866170-C125781F:0048B7C9;
 type=4; name=$KeepSent
X-Mailer: OpenMailer1.0
From: v.sevel@lombardodier.com
Message-ID: <OF27E64A7D.7B866170-ONC125781F.0048B7C9-C125781F.0049FB59@biz.lodh.com>
Date: Fri, 21 Jan 2011 14:28:04 +0100
Subject: gracefully interrupting an optimize
X-SendAsMailing: 0
X-MIMETrack: Cleaned
Content-Type: multipart/alternative; boundary="=_alternative 0049FB57C125781F_="

--=_alternative 0049FB57C125781F_=
Content-Type: text/plain; charset="US-ASCII"

Hi,

Each night I optimize an index that contains 35 millions docs. Its takes 
about 1.5 hours. For maintenance reasons, it may happen that the machine 
gets rebooted. In that case, server gets a chance to gracefully shutdown, 
but eventually, the reboot script will kill the processes that did not 
stop in time. My preference would to stop gracefully the optimize rather 
than getting the process killed. Is there a way to do that?

Thanks,

Vincent

************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier
Darier Hentsch & Cie or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 0049FB57C125781F_=--

From java-user-return-48480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 13:32:27 2011
Return-Path: <java-user-return-48480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34205 invoked from network); 21 Jan 2011 13:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 13:32:27 -0000
Received: (qmail 9635 invoked by uid 500); 21 Jan 2011 13:32:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9282 invoked by uid 500); 21 Jan 2011 13:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9267 invoked by uid 99); 21 Jan 2011 13:32:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:32:21 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:32:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 6432FC216A
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 14:31:54 +0100 (CET)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xDpnzJNIQokN for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 14:31:54 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 29BC5C2118
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 14:31:54 +0100 (CET)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 21 Jan 2011 14:31:54 +0100
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 21 Jan 2011 14:31:52 +0100
Subject: AW: Paging with Lucene
Thread-Topic: Paging with Lucene
Thread-Index: Acu5U3A1jAZNyKNRSAeV5vqtKGYGrAAGg6eg
Message-ID: <E594BA962D832C49A3CF858DAA3A696C103F5FE223@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp>
 <AANLkTi=-4SkCdwG6z=7=ffb_akGok6b8sok08LoX0gyO@mail.gmail.com>
In-Reply-To: <AANLkTi=-4SkCdwG6z=7=ffb_akGok6b8sok08LoX0gyO@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

The problem is, that due to the "filtering" AFTER having searched the index=
, we don't know how many TopDocs to read in order have "enough" for page x.

Does lucene's search allow injecting kind of a "voter"/"vetoer", which is c=
alled for any hit (ScoreDoc) lucene has encountered. This voter should be a=
ble to reject the given hit from TopDocs (by returning false). Can this be =
done with a custom Filter?
This of course comes with a performance penalty, but it would allow to sear=
ch for n ScoreDocs, even in our case...

> -----Urspr=FCngliche Nachricht-----
> Von: Ian Lea [mailto:ian.lea@gmail.com]
> Gesendet: Freitag, 21. Januar 2011 11:10
> An: java-user@lucene.apache.org
> Betreff: Re: Paging with Lucene
>=20
> The standard recommendation for paging is to re-execute the search for
> second and subsequent pages and return the second or subsequent chunk
> of hits.  Would that not work in your case?
>=20
> An alternative is to read and cache hits from the initial search but that=
 is
> generally more complex.
>=20
>=20
> --
> Ian.
>=20
> On Thu, Jan 20, 2011 at 7:36 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > (thanks fort he many answers to my initial lucene question "Best
> > practices for multiple languages?")
> >
> > We shall be confronted with the followong problem:
> > due to the very dynamic access rules on our content, we shall not be ab=
le
> to formulate these in/as Filter(s).
> > Hence we need to first search and then apply the access rules (i.e. sec=
urity
> filter).
> > What is the best approach to implement paging in this situation? Not
> > to forget, the "overall context" is a web app ;-)
> >
> > Thx for your advices
> > - Clemens
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 13:39:30 2011
Return-Path: <java-user-return-48481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40289 invoked from network); 21 Jan 2011 13:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 13:39:29 -0000
Received: (qmail 22360 invoked by uid 500); 21 Jan 2011 13:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21838 invoked by uid 500); 21 Jan 2011 13:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21830 invoked by uid 99); 21 Jan 2011 13:39:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:39:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jack.krupansky@lucidimagination.com designates 38.102.63.180 as permitted sender)
Received: from [38.102.63.180] (HELO smtp-1.01.com) (38.102.63.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:39:15 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp-1.01.com (Postfix) with ESMTP id 0F6C8E3707
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 07:38:55 -0600 (CST)
Received: from smtp-1.01.com ([127.0.0.1])
	by localhost (smtp-1.01.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id z3WLXcapwmSY for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 07:38:54 -0600 (CST)
Received: by smtp-1.01.com (Postfix, from userid 99)
	id E8E83E371E; Fri, 21 Jan 2011 07:38:54 -0600 (CST)
Received: from JackKrupansky (207-237-117-231.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com [207.237.117.231])
	by smtp-1.01.com (Postfix) with ESMTPSA id B5A28E3707
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 07:38:54 -0600 (CST)
Message-ID: <B7D3D07A61CE430DAD5C894555ABBC18@JackKrupansky>
From: "Jack Krupansky" <jack.krupansky@lucidimagination.com>
To: <java-user@lucene.apache.org>
References: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
In-Reply-To: <AANLkTi=MVUzp8k4eoBQ6jcC5ahKfMMn=3Oc2z54heQhp@mail.gmail.com>
Subject: Re: How to rebuild index
Date: Fri, 21 Jan 2011 08:38:48 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3502.922
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3502.922

The best thing is to re-index from your original source data, but if that is 
not available, you can also re-index stored fields, assuming that you 
created the index using stored fields for text fields. You would have to 
write custom code to retrieve the stored values (not the actual terms since 
those were analyzed and won't be guaranteed to be re-analyzed compatibly 
with a different analyzer.) For non-text fields such as numbers and raw 
strings you can of course just retrieve the raw term values and use them for 
re-indexing. None of this is easy or automatic, but at least you can 
retrieve the text to be re-indexed - if and only if it was indexed in stored 
fields.

-- Jack Krupansky

-----Original Message----- 
From: 
Sent: Friday, January 21, 2011 4:04 AM
To: java-user@lucene.apache.org
Subject: How to rebuild index

Hi,
I am new to lucene. Recently I was assigned for some lucene related
workitems.
Now there is one problem. Before, we use StandardAnalyzer in our
application, and our application has been online for about two years.
Now, we must to write a Custom Analyzer to replace the StandarAnalyzer for
enhancement requirement.
But there are already much exists production data and the lucene
index(generated with StandardAnalyzer).
What I need to do if I change to use the new Custom Analyzer?
>From the book "Lucene In Action". I see follow sentence:
"If youre changing analyzers, you should rebuild your index using the new
analyzer so that all documents are analyzed in the same manner."

But I don't know how to rebuild the exists index with a new Analyzer. I
can't find a API related to this.
Any help will be appreciated.
Thanks In Advance. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 13:57:45 2011
Return-Path: <java-user-return-48482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46190 invoked from network); 21 Jan 2011 13:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 13:57:44 -0000
Received: (qmail 50712 invoked by uid 500); 21 Jan 2011 13:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50431 invoked by uid 500); 21 Jan 2011 13:57:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50423 invoked by uid 99); 21 Jan 2011 13:57:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:57:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:57:32 +0000
Received: by bwz8 with SMTP id 8so1655390bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 05:57:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=NeUPB2otA7mWmQbyLN7nyLWYZSVJTCy3YKDL8AqPcCw=;
        b=WlOLv50tjqWnd5upME9kqX46vqBLsaiJG1N5CCFVSgF7gVutu6oUroaApSF8s3veHo
         +wxBCZ6jZ2/CsgCCjFLuizQAMiOe54l4JX6Uj9l4g3AsEoMngjPs14j5ASTRYrVTh6T4
         CLJa54I1o2CSZAb9EUrZvqc2G3K86AT/Vjixc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=i/yVwVwrOYWsqDxApd+9D8DAopQTyUWlVwd4C41Gn7mDmMvK8Qc95SJhgI73MMhsE3
         snyj2yfQ8OMGtPxoBbIBqWI4E88uaNHS6N/oPsd7epRS3xwyHwnQtbCIFAMpq7u6Yuup
         FSzwyHr/6xo8bR2HINoNbeIfTL7nAehErQcgo=
Received: by 10.204.76.18 with SMTP id a18mr639744bkk.9.1295618231334; Fri, 21
 Jan 2011 05:57:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 21 Jan 2011 05:56:51 -0800 (PST)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FE223@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp>
 <AANLkTi=-4SkCdwG6z=7=ffb_akGok6b8sok08LoX0gyO@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FE223@Exchange2007.mysigndomain.corp>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 21 Jan 2011 13:56:51 +0000
Message-ID: <AANLkTimWfR--w++JYuGVPuSBpzoheEYPurNrw4nUSVA9@mail.gmail.com>
Subject: Re: Paging with Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> The problem is, that due to the "filtering" AFTER having searched the index, we don't know how many TopDocs to read in order have "enough" for page x.

Think of a number and double it?  Unless the number get really high
lucene is generally plenty fast enough.  Or read n and if, after
filtering, don't have enough, loop and read n + something.

> Does lucene's search allow injecting kind of a "voter"/"vetoer", which is called for any hit (ScoreDoc) lucene has encountered. This voter should be able to reject the given hit from TopDocs (by returning false). Can this be done with a custom Filter?
> This of course comes with a performance penalty, but it would allow to search for n ScoreDocs, even in our case...

You can use a custom Collector.  From the javadocs:

"Collectors are primarily meant to be used to gather raw results from
a search, and implement sorting or custom result filtering, collation,
etc.".

Custom result filtering sounds familiar ...


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 13:58:56 2011
Return-Path: <java-user-return-48483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46513 invoked from network); 21 Jan 2011 13:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 13:58:55 -0000
Received: (qmail 52680 invoked by uid 500); 21 Jan 2011 13:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52518 invoked by uid 500); 21 Jan 2011 13:58:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52500 invoked by uid 99); 21 Jan 2011 13:58:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:58:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 13:58:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 598D545E5CB
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 14:58:22 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pzxxPuqFtALZ for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 14:58:17 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 30AEF45E5BF
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 14:58:17 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C103F5FE0C1@Exchange2007.mysigndomain.corp> <AANLkTi=-4SkCdwG6z=7=ffb_akGok6b8sok08LoX0gyO@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C103F5FE223@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C103F5FE223@Exchange2007.mysigndomain.corp>
Subject: RE: Paging with Lucene
Date: Fri, 21 Jan 2011 14:58:29 +0100
Message-ID: <000601cbb973$48641fd0$d92c5f70$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQH2jimp8U1vIhHuCAinZsrN8kFuLwGI2x9lAbiUuoyTa7130A==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You can write a custom Collector that does this (just not delegating the
collect(int) call) and wrap TopDocsCollector with that.

Alternative: Plug in a Filter that filters your documents during the =
query.
As doing this on iterating hits is often costly, the ideal solution =
would be
to create a cachedLlucene Filter that stores the documents allowed to =
access
in an OpenBitSet and returns that on getDocIdSet().

When implementing such a filter (and also the collector above), remember
that Lucene works on index segments so please use the IndexReader and
docBase passed to Collector.setNextReader() and Filter.getDocIdSet().

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Sent: Friday, January 21, 2011 2:32 PM
> To: java-user@lucene.apache.org
> Subject: AW: Paging with Lucene
>=20
> The problem is, that due to the "filtering" AFTER having searched the
index,
> we don't know how many TopDocs to read in order have "enough" for page
> x.
>=20
> Does lucene's search allow injecting kind of a "voter"/"vetoer", which =
is
> called for any hit (ScoreDoc) lucene has encountered. This voter =
should be
> able to reject the given hit from TopDocs (by returning false). Can =
this
be
> done with a custom Filter?
> This of course comes with a performance penalty, but it would allow to
> search for n ScoreDocs, even in our case...
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Ian Lea [mailto:ian.lea@gmail.com]
> > Gesendet: Freitag, 21. Januar 2011 11:10
> > An: java-user@lucene.apache.org
> > Betreff: Re: Paging with Lucene
> >
> > The standard recommendation for paging is to re-execute the search =
for
> > second and subsequent pages and return the second or subsequent =
chunk
> > of hits.  Would that not work in your case?
> >
> > An alternative is to read and cache hits from the initial search but
> > that is generally more complex.
> >
> >
> > --
> > Ian.
> >
> > On Thu, Jan 20, 2011 at 7:36 AM, Clemens Wyss <clemensdev@mysign.ch>
> > wrote:
> > > (thanks fort he many answers to my initial lucene question "Best
> > > practices for multiple languages?")
> > >
> > > We shall be confronted with the followong problem:
> > > due to the very dynamic access rules on our content, we shall not =
be
> > > able
> > to formulate these in/as Filter(s).
> > > Hence we need to first search and then apply the access rules =
(i.e.
> > > security
> > filter).
> > > What is the best approach to implement paging in this situation? =
Not
> > > to forget, the "overall context" is a web app ;-)
> > >
> > > Thx for your advices
> > > - Clemens
> > >
> > > =
--------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 14:14:10 2011
Return-Path: <java-user-return-48484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63244 invoked from network); 21 Jan 2011 14:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 14:14:08 -0000
Received: (qmail 75775 invoked by uid 500); 21 Jan 2011 14:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75486 invoked by uid 500); 21 Jan 2011 14:14:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75387 invoked by uid 99); 21 Jan 2011 14:13:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:13:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:13:52 +0000
Received: by ewy20 with SMTP id 20so849918ewy.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 06:13:31 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.4.83 with SMTP id 61mr4971482wei.67.1295619211396; Fri, 21
 Jan 2011 06:13:31 -0800 (PST)
Received: by 10.216.245.79 with HTTP; Fri, 21 Jan 2011 06:13:31 -0800 (PST)
In-Reply-To: <OF27E64A7D.7B866170-ONC125781F.0048B7C9-C125781F.0049FB59@biz.lodh.com>
References: <OF27E64A7D.7B866170-ONC125781F.0048B7C9-C125781F.0049FB59@biz.lodh.com>
Date: Fri, 21 Jan 2011 09:13:31 -0500
Message-ID: <AANLkTimxBjNNSaH++fOy5EXGoYOc-Bn7QY91U0vYwAmY@mail.gmail.com>
Subject: Re: gracefully interrupting an optimize
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you call optimize(false), that'll return immediately but run the
optimize "in the background" (assuming you are using the default
ConcurrentMergeScheduler).

Later, when it's time to stop optimizing, call IW.close(false), which
will abort any running merges yet keep any merges that had finished
(so some work, but not necessarily all work, is lost); it should
return quickly.

Mike

On Fri, Jan 21, 2011 at 8:28 AM,  <v.sevel@lombardodier.com> wrote:
> Hi,
>
> Each night I optimize an index that contains 35 millions docs. Its takes
> about 1.5 hours. For maintenance reasons, it may happen that the machine
> gets rebooted. In that case, server gets a chance to gracefully shutdown,
> but eventually, the reboot script will kill the processes that did not
> stop in time. My preference would to stop gracefully the optimize rather
> than getting the process killed. Is there a way to do that?
>
> Thanks,
>
> Vincent
>
> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to
> whom it is addressed. It may contain information that is
> privileged and confidential. Its content does not
> constitute a formal commitment by Lombard Odier
> Darier Hentsch & Cie or any of its branches or affiliates.
> If you are not the intended recipient of this message,
> kindly notify the sender immediately and destroy this
> message. Thank You.
> *****************************************************************
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 14:20:46 2011
Return-Path: <java-user-return-48485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65853 invoked from network); 21 Jan 2011 14:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 14:20:45 -0000
Received: (qmail 92053 invoked by uid 500); 21 Jan 2011 14:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91298 invoked by uid 500); 21 Jan 2011 14:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91287 invoked by uid 99); 21 Jan 2011 14:20:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:20:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:20:28 +0000
Received: from [192.168.178.47] (srbk-5d80707c.pool.mediaWays.net [93.128.112.124])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0MB15o-1PYcLb2ESq-009uvK; Fri, 21 Jan 2011 15:20:07 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: gracefully interrupting an optimize
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <AANLkTimxBjNNSaH++fOy5EXGoYOc-Bn7QY91U0vYwAmY@mail.gmail.com>
Date: Fri, 21 Jan 2011 15:20:06 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <953D0897-5713-48A1-B35D-19E4A131D15F@hoplahup.net>
References: <OF27E64A7D.7B866170-ONC125781F.0048B7C9-C125781F.0049FB59@biz.lodh.com> <AANLkTimxBjNNSaH++fOy5EXGoYOc-Bn7QY91U0vYwAmY@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:44kqqMtAtz/melE3bRHNimXkZjmSy64k34kCXqr7wdU
 BVeiplLcUnk5VFlekoaYhWek/1HphIEZzFNUD7WE4qUG8dJxXd
 w00B8sYEeyNy0l69pqeVW/S0AJ7EOe9CpHSknF4MDWZ6P7aEuY
 7KxxQAJArBorglzfuup2MgghUoff5ASywLSnFAmIS9oeFRJgf6
 NleOhR+9rP6o7XG//20gCjgrnp5Q9YM03Gx/kNUKMA=
X-Virus-Checked: Checked by ClamAV on apache.org

Would that happen "automagically" at finalization?

paul


Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :

> If you call optimize(false), that'll return immediately but run the
> optimize "in the background" (assuming you are using the default
> ConcurrentMergeScheduler).
>=20
> Later, when it's time to stop optimizing, call IW.close(false), which
> will abort any running merges yet keep any merges that had finished
> (so some work, but not necessarily all work, is lost); it should
> return quickly.
>=20
> Mike
>=20
> On Fri, Jan 21, 2011 at 8:28 AM,  <v.sevel@lombardodier.com> wrote:
>> Hi,
>>=20
>> Each night I optimize an index that contains 35 millions docs. Its =
takes
>> about 1.5 hours. For maintenance reasons, it may happen that the =
machine
>> gets rebooted. In that case, server gets a chance to gracefully =
shutdown,
>> but eventually, the reboot script will kill the processes that did =
not
>> stop in time. My preference would to stop gracefully the optimize =
rather
>> than getting the process killed. Is there a way to do that?
>>=20
>> Thanks,
>>=20
>> Vincent
>>=20
>> ************************ DISCLAIMER ************************
>> This message is intended only for use by the person to
>> whom it is addressed. It may contain information that is
>> privileged and confidential. Its content does not
>> constitute a formal commitment by Lombard Odier
>> Darier Hentsch & Cie or any of its branches or affiliates.
>> If you are not the intended recipient of this message,
>> kindly notify the sender immediately and destroy this
>> message. Thank You.
>> *****************************************************************
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 14:48:06 2011
Return-Path: <java-user-return-48486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78686 invoked from network); 21 Jan 2011 14:48:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 14:48:06 -0000
Received: (qmail 37714 invoked by uid 500); 21 Jan 2011 14:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37547 invoked by uid 500); 21 Jan 2011 14:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37534 invoked by uid 99); 21 Jan 2011 14:48:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:48:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 14:47:53 +0000
Received: by wwd20 with SMTP id 20so1993491wwd.5
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 06:47:33 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.187.10 with SMTP id x10mr666397wem.97.1295621252858; Fri,
 21 Jan 2011 06:47:32 -0800 (PST)
Received: by 10.216.245.79 with HTTP; Fri, 21 Jan 2011 06:47:32 -0800 (PST)
In-Reply-To: <953D0897-5713-48A1-B35D-19E4A131D15F@hoplahup.net>
References: <OF27E64A7D.7B866170-ONC125781F.0048B7C9-C125781F.0049FB59@biz.lodh.com>
	<AANLkTimxBjNNSaH++fOy5EXGoYOc-Bn7QY91U0vYwAmY@mail.gmail.com>
	<953D0897-5713-48A1-B35D-19E4A131D15F@hoplahup.net>
Date: Fri, 21 Jan 2011 09:47:32 -0500
Message-ID: <AANLkTimkJcBzE_mEjstEEO0ur_TweFXLzqpff71D4=mG@mail.gmail.com>
Subject: Re: gracefully interrupting an optimize
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

No.

If you just do IW.close() <-- no boolean specified, then that defaults
to IW.close(true) which means "wait for all BG merges to finish".

So "normally" IW.close() reserves the right to take a long time.

But IW.close(false) should finish relatively quickly...

Mike

On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
> Would that happen "automagically" at finalization?
>
> paul
>
>
> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>
>> If you call optimize(false), that'll return immediately but run the
>> optimize "in the background" (assuming you are using the default
>> ConcurrentMergeScheduler).
>>
>> Later, when it's time to stop optimizing, call IW.close(false), which
>> will abort any running merges yet keep any merges that had finished
>> (so some work, but not necessarily all work, is lost); it should
>> return quickly.
>>
>> Mike
>>
>> On Fri, Jan 21, 2011 at 8:28 AM, =A0<v.sevel@lombardodier.com> wrote:
>>> Hi,
>>>
>>> Each night I optimize an index that contains 35 millions docs. Its take=
s
>>> about 1.5 hours. For maintenance reasons, it may happen that the machin=
e
>>> gets rebooted. In that case, server gets a chance to gracefully shutdow=
n,
>>> but eventually, the reboot script will kill the processes that did not
>>> stop in time. My preference would to stop gracefully the optimize rathe=
r
>>> than getting the process killed. Is there a way to do that?
>>>
>>> Thanks,
>>>
>>> Vincent
>>>
>>> ************************ DISCLAIMER ************************
>>> This message is intended only for use by the person to
>>> whom it is addressed. It may contain information that is
>>> privileged and confidential. Its content does not
>>> constitute a formal commitment by Lombard Odier
>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>> If you are not the intended recipient of this message,
>>> kindly notify the sender immediately and destroy this
>>> message. Thank You.
>>> *****************************************************************
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 15:16:29 2011
Return-Path: <java-user-return-48487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99829 invoked from network); 21 Jan 2011 15:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 15:16:28 -0000
Received: (qmail 96661 invoked by uid 500); 21 Jan 2011 15:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96090 invoked by uid 500); 21 Jan 2011 15:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96077 invoked by uid 99); 21 Jan 2011 15:16:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:16:21 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.18.2.210] (HELO exprod7og127.obsmtp.com) (64.18.2.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jan 2011 15:16:13 +0000
Received: from source ([74.125.82.180]) (using TLSv1) by exprod7ob127.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTTmjJUY8F3b2Whk4rT9FT+C2RalgX0nn@postini.com; Fri, 21 Jan 2011 07:15:52 PST
Received: by mail-wy0-f180.google.com with SMTP id 28so1881586wyb.11
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 07:15:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.227.145.71 with SMTP id c7mr929525wbv.15.1295622948978; Fri,
 21 Jan 2011 07:15:48 -0800 (PST)
Received: by 10.227.151.198 with HTTP; Fri, 21 Jan 2011 07:15:48 -0800 (PST)
Date: Fri, 21 Jan 2011 10:15:48 -0500
Message-ID: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
Subject: Performing a query on token length
From: Camden Daily <camden@jaunter.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fb92ea30100049a5cb9fc
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367fb92ea30100049a5cb9fc
Content-Type: text/plain; charset=ISO-8859-1

Hello all,

Does anyone know if it is possible in Lucene to do a query based on the
string length of the value of a field?

For example, if I wanted all index matches where a specific field like
'first_name' was between 10 and 20 characters.

Thanks!
-Camden Daily

--0016367fb92ea30100049a5cb9fc--

From java-user-return-48488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 15:22:33 2011
Return-Path: <java-user-return-48488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2593 invoked from network); 21 Jan 2011 15:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 15:22:33 -0000
Received: (qmail 10810 invoked by uid 500); 21 Jan 2011 15:22:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10665 invoked by uid 500); 21 Jan 2011 15:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10652 invoked by uid 99); 21 Jan 2011 15:22:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:22:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:22:17 +0000
Received: by bwz8 with SMTP id 8so1737442bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 07:21:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=GltdZwmq/1FoUz420IVsXQBmoMt49EyEgS+ORQF+zE8=;
        b=AfadJ+8JfNtCjiLXgcY6hCAWaG8XhZ1V+P3kbLtQZWfRmKtIWlRxcQQr8FoPCD/f7x
         MAcxC6VYh8tcAgXQcOOX0ikqW4eNC4U+bPrYdAf6ZCeSFHZLEg2oyVKK+Vlq1H4zAPQK
         IV3krMVa15Xyiv3SDu6tYlVt1z98kNYZd4s8A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Oh/Bc0uu0ErOQR8MoA1knsXLP/7OM4AGP+dmuBqFG+JZC2TQ8AWB3xRneSUvdZ+OKv
         HKzwkHE5py7fVMN+8zUdx34qHqV3cOsCpGUC4koPCk7R0EXvKWash5U1bUmiszZs7CPq
         efuZg24UvX0bv6c+k48Njw6GVVfPeoEPazND8=
Received: by 10.204.113.75 with SMTP id z11mr753163bkp.90.1295623317121; Fri,
 21 Jan 2011 07:21:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 21 Jan 2011 07:21:35 -0800 (PST)
In-Reply-To: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
References: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 21 Jan 2011 15:21:35 +0000
Message-ID: <AANLkTimeerTA2y3zXU68Vx3LG0gqETqzF6HkJnVpk6+J@mail.gmail.com>
Subject: Re: Performing a query on token length
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Not directly, but you could index a NumericField called "length" and
do a NumericRangeQuery on it.

Or loop through all the terms checking length.  But that isn't a query
and will be slow.


--
Ian.


On Fri, Jan 21, 2011 at 3:15 PM, Camden Daily <camden@jaunter.com> wrote:
> Hello all,
>
> Does anyone know if it is possible in Lucene to do a query based on the
> string length of the value of a field?
>
> For example, if I wanted all index matches where a specific field like
> 'first_name' was between 10 and 20 characters.
>
> Thanks!
> -Camden Daily
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 15:27:17 2011
Return-Path: <java-user-return-48489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4242 invoked from network); 21 Jan 2011 15:27:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 15:27:17 -0000
Received: (qmail 19977 invoked by uid 500); 21 Jan 2011 15:27:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19650 invoked by uid 500); 21 Jan 2011 15:27:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19629 invoked by uid 99); 21 Jan 2011 15:27:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:27:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jack.krupansky@lucidimagination.com designates 38.102.63.180 as permitted sender)
Received: from [38.102.63.180] (HELO smtp-1.01.com) (38.102.63.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:27:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp-1.01.com (Postfix) with ESMTP id E490BE331D
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 09:26:40 -0600 (CST)
Received: from smtp-1.01.com ([127.0.0.1])
	by localhost (smtp-1.01.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lUzEgF3fANyT for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 09:26:40 -0600 (CST)
Received: by smtp-1.01.com (Postfix, from userid 99)
	id CCFD1E3375; Fri, 21 Jan 2011 09:26:40 -0600 (CST)
Received: from JackKrupansky (207-237-117-231.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com [207.237.117.231])
	by smtp-1.01.com (Postfix) with ESMTPSA id A1BB3E331D
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 09:26:40 -0600 (CST)
Message-ID: <73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
From: "Jack Krupansky" <jack.krupansky@lucidimagination.com>
To: <java-user@lucene.apache.org>
References: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
In-Reply-To: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
Subject: Re: Performing a query on token length
Date: Fri, 21 Jan 2011 10:26:33 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3502.922
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3502.922
X-Virus-Checked: Checked by ClamAV on apache.org

A wildcard query with 10 leading question marks, each of which requires a 
single character. This would also depend on leading wildcards being enabled 
in your query parser (if you are using one.)

first_name:??????????*

The performance would not necessarily be great, but functionally it would do 
exactly what you asked.

-- Jack Krupansky

-----Original Message----- 
From: Camden Daily
Sent: Friday, January 21, 2011 10:15 AM
To: java-user@lucene.apache.org
Subject: Performing a query on token length

Hello all,

Does anyone know if it is possible in Lucene to do a query based on the
string length of the value of a field?

For example, if I wanted all index matches where a specific field like
'first_name' was between 10 and 20 characters.

Thanks!
-Camden Daily 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 15:31:26 2011
Return-Path: <java-user-return-48490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6820 invoked from network); 21 Jan 2011 15:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 15:31:26 -0000
Received: (qmail 29888 invoked by uid 500); 21 Jan 2011 15:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28358 invoked by uid 500); 21 Jan 2011 15:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28275 invoked by uid 99); 21 Jan 2011 15:31:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:31:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jack.krupansky@lucidimagination.com designates 38.102.63.181 as permitted sender)
Received: from [38.102.63.181] (HELO smtp-2.01.com) (38.102.63.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:31:11 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp-2.01.com (Postfix) with ESMTP id 353921ADA45
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 09:30:51 -0600 (CST)
Received: from smtp-2.01.com ([127.0.0.1])
	by localhost (smtp-2.01.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pUdOmuAOR0Wr for <java-user@lucene.apache.org>;
	Fri, 21 Jan 2011 09:30:51 -0600 (CST)
Received: by smtp-2.01.com (Postfix, from userid 99)
	id 000C51ADA34; Fri, 21 Jan 2011 09:30:50 -0600 (CST)
Received: from JackKrupansky (207-237-117-231.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com [207.237.117.231])
	by smtp-2.01.com (Postfix) with ESMTPSA id 5EAAE1ADA40
	for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 09:30:49 -0600 (CST)
Message-ID: <C56766342E424E14B0C545F3BBC25926@JackKrupansky>
From: "Jack Krupansky" <jack.krupansky@lucidimagination.com>
To: <java-user@lucene.apache.org>
References: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com> <73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
In-Reply-To: <73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
Subject: Re: Performing a query on token length
Date: Fri, 21 Jan 2011 10:30:43 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3502.922
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3502.922

Oops... I only solved half the problem, the other half was to limit length 
to 20, which would be done with a negated leading wildcard of 21 question 
marks:

first_name:??????????* -first_name:?????????????????????*

-- Jack Krupansky

-----Original Message----- 
From: Jack Krupansky
Sent: Friday, January 21, 2011 10:26 AM
To: java-user@lucene.apache.org
Subject: Re: Performing a query on token length

A wildcard query with 10 leading question marks, each of which requires a
single character. This would also depend on leading wildcards being enabled
in your query parser (if you are using one.)

first_name:??????????*

The performance would not necessarily be great, but functionally it would do
exactly what you asked.

-- Jack Krupansky

-----Original Message----- 
From: Camden Daily
Sent: Friday, January 21, 2011 10:15 AM
To: java-user@lucene.apache.org
Subject: Performing a query on token length

Hello all,

Does anyone know if it is possible in Lucene to do a query based on the
string length of the value of a field?

For example, if I wanted all index matches where a specific field like
'first_name' was between 10 and 20 characters.

Thanks!
-Camden Daily


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 15:36:53 2011
Return-Path: <java-user-return-48491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9244 invoked from network); 21 Jan 2011 15:36:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 15:36:53 -0000
Received: (qmail 36295 invoked by uid 500); 21 Jan 2011 15:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35946 invoked by uid 500); 21 Jan 2011 15:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35938 invoked by uid 99); 21 Jan 2011 15:36:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:36:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 15:36:39 +0000
Received: by bwz8 with SMTP id 8so1751533bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 07:36:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=a7bV0ab+eNNlIV+3nK1cBMxt42h1xouVoISy98POQuk=;
        b=XQxbSqZeFSzfms+3oe54QOlO+ovXe/O6DTLv27Y9Q1BnQsqyTQHiBp+75W2GMj2euY
         2C3J9DF0LOhENlFfMjcH4D/E2hpHHGYMtccteSGDh9KjxLLgexnXtcwfN2PccqfdHstM
         4n597Br8jpB6nMwXTgbpM0eNZEtw+oYXfebf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=tNr4/H+EEgwNkw86HnSCS/x76UkbYZBPUmNs5mWpftrOoJ27Scvxgz2DhIhR9wD6p5
         F6NjcgnFOf3oFOk2Agls+FQDbnjXoEQ0dZ4yofrE/9SCg5Il/W1i2Se9UXlW+IILdqpx
         MfhilaqhO83umvbmNe55a9RjD5yaR25seTWRo=
Received: by 10.204.140.70 with SMTP id h6mr759047bku.117.1295624173908; Fri,
 21 Jan 2011 07:36:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.57.143 with HTTP; Fri, 21 Jan 2011 07:35:53 -0800 (PST)
In-Reply-To: <73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
References: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com> <73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 21 Jan 2011 15:35:53 +0000
Message-ID: <AANLkTikBv0L0a1Vez_qagukDe8RTuW-eJ8ADHfbrfP-k@mail.gmail.com>
Subject: Re: Performing a query on token length
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Wouldn't that also match names with length > 20?


--
Ian.


On Fri, Jan 21, 2011 at 3:26 PM, Jack Krupansky
<jack.krupansky@lucidimagination.com> wrote:
> A wildcard query with 10 leading question marks, each of which requires a
> single character. This would also depend on leading wildcards being enabled
> in your query parser (if you are using one.)
>
> first_name:??????????*
>
> The performance would not necessarily be great, but functionally it would do
> exactly what you asked.
>
> -- Jack Krupansky
>
> -----Original Message----- From: Camden Daily
> Sent: Friday, January 21, 2011 10:15 AM
> To: java-user@lucene.apache.org
> Subject: Performing a query on token length
>
> Hello all,
>
> Does anyone know if it is possible in Lucene to do a query based on the
> string length of the value of a field?
>
> For example, if I wanted all index matches where a specific field like
> 'first_name' was between 10 and 20 characters.
>
> Thanks!
> -Camden Daily
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 17:29:21 2011
Return-Path: <java-user-return-48492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84392 invoked from network); 21 Jan 2011 17:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 17:29:20 -0000
Received: (qmail 33938 invoked by uid 500); 21 Jan 2011 17:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33582 invoked by uid 500); 21 Jan 2011 17:29:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33570 invoked by uid 99); 21 Jan 2011 17:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 17:29:15 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.18.2.219] (HELO exprod7og116.obsmtp.com) (64.18.2.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jan 2011 17:29:08 +0000
Received: from source ([74.125.82.50]) (using TLSv1) by exprod7ob116.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTTnCTyZ4viVEjpzbhq1SmVTVZjEqUvEq@postini.com; Fri, 21 Jan 2011 09:28:48 PST
Received: by wwf26 with SMTP id 26so2099595wwf.19
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 09:28:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.227.157.19 with SMTP id z19mr1080585wbw.189.1295630925709;
 Fri, 21 Jan 2011 09:28:45 -0800 (PST)
Received: by 10.227.151.198 with HTTP; Fri, 21 Jan 2011 09:28:45 -0800 (PST)
In-Reply-To: <AANLkTikBv0L0a1Vez_qagukDe8RTuW-eJ8ADHfbrfP-k@mail.gmail.com>
References: <AANLkTimxbEA-XD96B96aLt-evN3gECCMO46CQWGpTYnC@mail.gmail.com>
	<73ED683E01324C959D5766E980EC1E1E@JackKrupansky>
	<AANLkTikBv0L0a1Vez_qagukDe8RTuW-eJ8ADHfbrfP-k@mail.gmail.com>
Date: Fri, 21 Jan 2011 12:28:45 -0500
Message-ID: <AANLkTimqAewuTspCQbP5d5uAkujBgqhiaQs2HNw9F-Si@mail.gmail.com>
Subject: Re: Performing a query on token length
From: Camden Daily <camden@jaunter.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016365ee9d21643fc049a5e9516

--0016365ee9d21643fc049a5e9516
Content-Type: text/plain; charset=ISO-8859-1

Thank you Ian and Jack,

I believe I'll go with simply creating a NumericField for the length, as
that will result in the best performance.

-Camden

On Fri, Jan 21, 2011 at 10:35 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Wouldn't that also match names with length > 20?
>
>
> --
> Ian.
>
>
> On Fri, Jan 21, 2011 at 3:26 PM, Jack Krupansky
> <jack.krupansky@lucidimagination.com> wrote:
> > A wildcard query with 10 leading question marks, each of which requires a
> > single character. This would also depend on leading wildcards being
> enabled
> > in your query parser (if you are using one.)
> >
> > first_name:??????????*
> >
> > The performance would not necessarily be great, but functionally it would
> do
> > exactly what you asked.
> >
> > -- Jack Krupansky
> >
> > -----Original Message----- From: Camden Daily
> > Sent: Friday, January 21, 2011 10:15 AM
> > To: java-user@lucene.apache.org
> > Subject: Performing a query on token length
> >
> > Hello all,
> >
> > Does anyone know if it is possible in Lucene to do a query based on the
> > string length of the value of a field?
> >
> > For example, if I wanted all index matches where a specific field like
> > 'first_name' was between 10 and 20 characters.
> >
> > Thanks!
> > -Camden Daily
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016365ee9d21643fc049a5e9516--

From java-user-return-48493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 21 19:59:56 2011
Return-Path: <java-user-return-48493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85540 invoked from network); 21 Jan 2011 19:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jan 2011 19:59:56 -0000
Received: (qmail 35260 invoked by uid 500); 21 Jan 2011 19:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35150 invoked by uid 500); 21 Jan 2011 19:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35142 invoked by uid 99); 21 Jan 2011 19:59:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 19:59:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of softwarevisualization@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jan 2011 19:59:45 +0000
Received: by bwz8 with SMTP id 8so2015104bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 11:59:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wj2ZV1+6lxETcuOHMjevpPUVYOGcSHzGfWCA4/G3Nq0=;
        b=vp5d8YyFTUDNNvcWHqrsuEqyd9U9pNeKk/3jEzIFppRuyyvpMCVg0+p0tXqPhaFfAX
         /vAMDZhdN4GJdPOVhRI668wp2mLcPW8j2EyTsNqhPYW+QGAumgy2VkdW/Uc2Uj/mD+Mj
         7i345AiGqCfKtEaCsIH/cDNSTtl053pJKFIhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=Rl/nOlaRDK/kWVh/kKNHcChoXlEkdVVnZGayGdJF2Vyv4lgAhSIGonxAhZmfS/wKdb
         w3QPByFK96+RjR3LNIpmWrcUEI7GR3axJV6Z6mvvIaavhuJj9FKFd13L1uD7zsrW2yU2
         hZlnxSM76b22XakPnPSE0ypvXx24Of/2i+NVE=
MIME-Version: 1.0
Received: by 10.204.58.201 with SMTP id i9mr1106160bkh.192.1295639964445; Fri,
 21 Jan 2011 11:59:24 -0800 (PST)
Received: by 10.204.152.138 with HTTP; Fri, 21 Jan 2011 11:59:24 -0800 (PST)
Reply-To: softwarevisualization@gmail.com
In-Reply-To: <AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com>
	<1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
	<AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
	<37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
	<AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
	<499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
	<AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
	<AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
Date: Fri, 21 Jan 2011 14:59:24 -0500
Message-ID: <AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
From: software visualization <softwarevisualization@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2beed66d32049a60af59
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e2beed66d32049a60af59
Content-Type: text/plain; charset=ISO-8859-1

Hi sorry for the long delay.

The idea is that a single user is editing a single document. As they edit,
any indexes built against the document become stale, actually wrong.
Example:  references to specific localities within this document are all
instantly wrong the first time a user types a new beginning  character-
they're all off by one. Deleting  words is of course disastrous etc. etc.
 So our story is- we used to have this document nicely indexed and now we
have nothing useful.

Considering what Lucene does prior to indexing, stemming for instance,  I am
not sure no, I am quite sure I can't  recreate the same powerful indexing
functionality.

But it seems wrong  to lure our users into opening this document with
promises that this that and the other thing is has been located for them
only to invalidate all that just because they began to edit the document. I
understand why that happens , but my users are perhaps not as tech savvy and
I think it will just feel "wrong" to them.

So I am looking for a way around this.



On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com> wrote:

> I would think this is more like it.
> But the essential thing, so it seems to me, is whether there is a
> requirement for a serialised index, i.e. a more permanent record, aside
> from
> the saved document.
> Then, if there is a penalty to creating the index compared to regex,
> stringsearch or so, it is justified on other grounds.
> I think it is an interesting q. when does that requirement emerge?
> There is size of document.
> But there would also be field types. I think I have this right. This is
> really a classification system, so more than bare regex.
> There must be other criteria that apply to this use case, too?
>
> Adam
>
> p.s. we (in my work project) are just beginning to use Lucene for geometry
> objects and I am looking forward to understanding its use better,
> including,
> possibly, expanding it to other use cases apart from geo objects.
>
> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
>
> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.org>
> > wrote:
> > > There is also the MemoryIndex, which is in contrib and is designed for
> > one document at a time.  That being said, basic grep/regex is probably
> fast
> > enough.
> > >
> >
> > In cases where you are doing a 'find' in a document similar to what a
> > wordprocessor would do (especially if you want to iterate
> > forwards/backwards through matches etc), you might want to consider
> > something like
> > http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--0016368e2beed66d32049a60af59--

From java-user-return-48494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 02:12:17 2011
Return-Path: <java-user-return-48494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94759 invoked from network); 22 Jan 2011 02:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 02:12:17 -0000
Received: (qmail 63222 invoked by uid 500); 22 Jan 2011 02:12:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63110 invoked by uid 500); 22 Jan 2011 02:12:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63097 invoked by uid 99); 22 Jan 2011 02:12:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 02:12:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 02:12:07 +0000
Received: by wwd20 with SMTP id 20so2583478wwd.5
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 18:11:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=Mg9l+rPqUUQtecgE0WOGkcCvNiDBWxXDSkuvJyT0O/g=;
        b=B8mZ5oUPCxof2KbGxz1AR0x3UN7KdwCf7/Ff9n5UXFtD7DVaIoKspLOcKshRj6PdXJ
         ZhN7w5/54bEHXBCc6GgkK5RVhTZjl1MRnb47w3j7sEioBPzyT1b6iyUb7QnnoKIdMzSz
         qVkmV+l0fKcBAsgu652lcz8IcBS0hyGK8tz0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fESoeZC+ExWTVyCyOSJ5r58w2tlhJnmcfksKY/5evQXWUqdnhcmT7g5waRa2/fwLSc
         9WGIVU09e96tWn9QWTbiiAQWrc0A17WPi2rxpSegHYenrpdP3apQe7b9bI3kedFS5tGO
         F3SdBSAEliS28ttQf9eLSpG88RR2barZE2HPk=
Received: by 10.216.17.204 with SMTP id j54mr76391wej.32.1295662306343; Fri,
 21 Jan 2011 18:11:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Fri, 21 Jan 2011 18:11:26 -0800 (PST)
In-Reply-To: <AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com> <1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
 <AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
 <37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
 <AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
 <499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org> <AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
 <AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com> <AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Sat, 22 Jan 2011 07:41:26 +0530
Message-ID: <AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
   One work around would be to version the documents and store the
version as well as the timestamp of indexed document into the index.

Reading between lines I assume that
Document is
a) stored in some DB/File :
b) indexed in lucene index

User Search  On on b)
Document ids
but documents are displayed to user after retrieving from a).

Now I do not know a way in which I can keep a) and b) completely in
sync in realtime. As there will be some time taken in indexing
operation itself. a) --> b) .

Instead we can do following.
a) stored : Document ID + Document Text + Document Version +
Modification Time Stamp (T1)
b) Indexed : Document ID + Document Text + Document Version +
Modification Time Stamp (T2) (when indexed) (broken into date + hour +
mins + sec for minimizing number of terms)

User Searches b)
Search System gets Document ID + Modification Time Stamp (T2) and gives to
Presentation layer which compares the  T1 & T2.
If T2 < T1, Skip the result.

Assumption : Stored document is always in sync. Documents are
persisted somewhere and not served from memory.

Thanks & Regards
Umesh Prasad



On Sat, Jan 22, 2011 at 1:29 AM, software visualization
<softwarevisualization@gmail.com> wrote:
> Hi sorry for the long delay.
>
> The idea is that a single user is editing a single document. As they edit=
,
> any indexes built against the document become stale, actually wrong.
> Example: =A0references to specific localities within this document are al=
l
> instantly wrong the first time a user types a new beginning =A0character-
> they're all off by one. Deleting =A0words is of course disastrous etc. et=
c.
> =A0So our story is- we used to have this document nicely indexed and now =
we
> have nothing useful.
>
> Considering what Lucene does prior to indexing, stemming for instance, =
=A0I am
> not sure no, I am quite sure I can't =A0recreate the same powerful indexi=
ng
> functionality.
>
> But it seems wrong =A0to lure our users into opening this document with
> promises that this that and the other thing is has been located for them
> only to invalidate all that just because they began to edit the document.=
 I
> understand why that happens , but my users are perhaps not as tech savvy =
and
> I think it will just feel "wrong" to them.
>
> So I am looking for a way around this.
>
>
>
> On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com> wrote:
>
>> I would think this is more like it.
>> But the essential thing, so it seems to me, is whether there is a
>> requirement for a serialised index, i.e. a more permanent record, aside
>> from
>> the saved document.
>> Then, if there is a penalty to creating the index compared to regex,
>> stringsearch or so, it is justified on other grounds.
>> I think it is an interesting q. when does that requirement emerge?
>> There is size of document.
>> But there would also be field types. I think I have this right. This is
>> really a classification system, so more than bare regex.
>> There must be other criteria that apply to this use case, too?
>>
>> Adam
>>
>> p.s. we (in my work project) are just beginning to use Lucene for geomet=
ry
>> objects and I am looking forward to understanding its use better,
>> including,
>> possibly, expanding it to other use cases apart from geo objects.
>>
>> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
>>
>> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.org>
>> > wrote:
>> > > There is also the MemoryIndex, which is in contrib and is designed f=
or
>> > one document at a time. =A0That being said, basic grep/regex is probab=
ly
>> fast
>> > enough.
>> > >
>> >
>> > In cases where you are doing a 'find' in a document similar to what a
>> > wordprocessor would do (especially if you want to iterate
>> > forwards/backwards through matches etc), you might want to consider
>> > something like
>> > http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>



--=20
---
Thanks & Regards
Umesh Prasad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 05:29:17 2011
Return-Path: <java-user-return-48495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71351 invoked from network); 22 Jan 2011 05:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 05:29:16 -0000
Received: (qmail 39404 invoked by uid 500); 22 Jan 2011 05:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39161 invoked by uid 500); 22 Jan 2011 05:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39052 invoked by uid 99); 22 Jan 2011 05:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 05:29:08 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of softwarevisualization@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 05:29:00 +0000
Received: by bwz8 with SMTP id 8so2351866bwz.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 21:28:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=SPvPd2PlMk/Hgg/zx8HdIRcg4bBcSJEAC9G9yDyurug=;
        b=F3yi+iVJVrl3dQJKTvo74CCIoKqRkcVC7zMH2SWbgdYNs/zNoSS7xztrbQCXjz4m4i
         KdvDJxc6O7E1FsvnQHIn2iFK5+M74AonN1h+6pWrJ2NtfWRxUYGnplddRvf7kRhe46CP
         qsjC0leUd1pRoQIGY02fmz+2AX5spMpucnGNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=Wo/CBMawyyOdoR/sW5p075PcqcKZBJGcdspRVUJk1PYIT76SOgZY68vQExKrXmuqFK
         AOYsw72AA29ENCO+gsYuiMvvp6MVfZ09c9r7QybO0R4i41OjvTtNfRqiI0jmyhhsZrEy
         GDjxtKGAQH4HQV60wc6NeVam+7mCRDZ689bPo=
MIME-Version: 1.0
Received: by 10.204.68.76 with SMTP id u12mr1491779bki.57.1295674118671; Fri,
 21 Jan 2011 21:28:38 -0800 (PST)
Received: by 10.204.152.138 with HTTP; Fri, 21 Jan 2011 21:28:38 -0800 (PST)
Reply-To: softwarevisualization@gmail.com
In-Reply-To: <AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com>
	<1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
	<AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
	<37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
	<AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
	<499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
	<AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
	<AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
	<AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
	<AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com>
Date: Sat, 22 Jan 2011 00:28:38 -0500
Message-ID: <AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
From: software visualization <softwarevisualization@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5bd86968ea3049a68a375
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5bd86968ea3049a68a375
Content-Type: text/plain; charset=ISO-8859-1

If I understand you correctly, I think that this :

If T2 < T1, Skip the result.

will always  be the case. The live being edited document is always "later"
in time than the indexed information about it.



On Fri, Jan 21, 2011 at 9:11 PM, Umesh Prasad <umesh.iitk@gmail.com> wrote:

> Hi,
>   One work around would be to version the documents and store the
> version as well as the timestamp of indexed document into the index.
>
> Reading between lines I assume that
> Document is
> a) stored in some DB/File :
> b) indexed in lucene index
>
> User Search  On on b)
> Document ids
> but documents are displayed to user after retrieving from a).
>
> Now I do not know a way in which I can keep a) and b) completely in
> sync in realtime. As there will be some time taken in indexing
> operation itself. a) --> b) .
>
> Instead we can do following.
> a) stored : Document ID + Document Text + Document Version +
> Modification Time Stamp (T1)
> b) Indexed : Document ID + Document Text + Document Version +
> Modification Time Stamp (T2) (when indexed) (broken into date + hour +
> mins + sec for minimizing number of terms)
>
> User Searches b)
> Search System gets Document ID + Modification Time Stamp (T2) and gives to
> Presentation layer which compares the  T1 & T2.
> If T2 < T1, Skip the result.
>
> Assumption : Stored document is always in sync. Documents are
> persisted somewhere and not served from memory.
>
> Thanks & Regards
> Umesh Prasad
>
>
>
> On Sat, Jan 22, 2011 at 1:29 AM, software visualization
> <softwarevisualization@gmail.com> wrote:
> > Hi sorry for the long delay.
> >
> > The idea is that a single user is editing a single document. As they
> edit,
> > any indexes built against the document become stale, actually wrong.
> > Example:  references to specific localities within this document are all
> > instantly wrong the first time a user types a new beginning  character-
> > they're all off by one. Deleting  words is of course disastrous etc. etc.
> >  So our story is- we used to have this document nicely indexed and now we
> > have nothing useful.
> >
> > Considering what Lucene does prior to indexing, stemming for instance,  I
> am
> > not sure no, I am quite sure I can't  recreate the same powerful indexing
> > functionality.
> >
> > But it seems wrong  to lure our users into opening this document with
> > promises that this that and the other thing is has been located for them
> > only to invalidate all that just because they began to edit the document.
> I
> > understand why that happens , but my users are perhaps not as tech savvy
> and
> > I think it will just feel "wrong" to them.
> >
> > So I am looking for a way around this.
> >
> >
> >
> > On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com> wrote:
> >
> >> I would think this is more like it.
> >> But the essential thing, so it seems to me, is whether there is a
> >> requirement for a serialised index, i.e. a more permanent record, aside
> >> from
> >> the saved document.
> >> Then, if there is a penalty to creating the index compared to regex,
> >> stringsearch or so, it is justified on other grounds.
> >> I think it is an interesting q. when does that requirement emerge?
> >> There is size of document.
> >> But there would also be field types. I think I have this right. This is
> >> really a classification system, so more than bare regex.
> >> There must be other criteria that apply to this use case, too?
> >>
> >> Adam
> >>
> >> p.s. we (in my work project) are just beginning to use Lucene for
> geometry
> >> objects and I am looking forward to understanding its use better,
> >> including,
> >> possibly, expanding it to other use cases apart from geo objects.
> >>
> >> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
> >>
> >> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.org
> >
> >> > wrote:
> >> > > There is also the MemoryIndex, which is in contrib and is designed
> for
> >> > one document at a time.  That being said, basic grep/regex is probably
> >> fast
> >> > enough.
> >> > >
> >> >
> >> > In cases where you are doing a 'find' in a document similar to what a
> >> > wordprocessor would do (especially if you want to iterate
> >> > forwards/backwards through matches etc), you might want to consider
> >> > something like
> >> >
> http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >
>
>
>
> --
> ---
> Thanks & Regards
> Umesh Prasad
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c5bd86968ea3049a68a375--

From java-user-return-48496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 05:47:26 2011
Return-Path: <java-user-return-48496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90558 invoked from network); 22 Jan 2011 05:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 05:47:25 -0000
Received: (qmail 52954 invoked by uid 500); 22 Jan 2011 05:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52777 invoked by uid 500); 22 Jan 2011 05:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 37804 invoked by uid 99); 21 Jan 2011 16:32:17 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saidtherobot@gmail.com designates 74.125.83.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=+AGmmMP4fn3KH6rNE8azpMANpcfb+cLwpprKvdNqkQo=;
        b=K3f6sapbiz0+l+3ZZhFjQ6iO6sR3cGR93twHc1YQ6aDsK7b1xfQTYH2LP/XVjzGhGT
         Rq9asSWBFohMGhOYA/Cdsi3m0Iwq4ztNmfV9LngjxOHsuHyqjaVGByDp0aLSdvd4YFFd
         I07xcTUD102z2xclwKPMuctps0TzseqePgbq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=QSdjVUjKKmVYcbCkBbhTbhavNmAT2ZQtRidOeQvV23RIlbe7y8tyUWL77T2b1sANUv
         CXTSo2QU6q5+J2KlEUxNl/ZGboMLTBovk/gENHd+I3482NL1EzGEgMTsvNm7jc37GywF
         2jse8UyHtgRzUALGpR0Kt4AVL/Cv7NL1R2ut8=
MIME-Version: 1.0
In-Reply-To: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org>
Date: Fri, 21 Jan 2011 11:31:46 -0500
Message-ID: <AANLkTi=1ngN3G+=27Ja82s+XCHjriUwpnsDD0d+ghL53@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
From: mike anderson <saidtherobot@gmail.com>
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636416acb50a142049a5dc9b3
X-Virus-Checked: Checked by ClamAV on apache.org

--001636416acb50a142049a5dc9b3
Content-Type: text/plain; charset=ISO-8859-1

[x] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[x] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)


On Tue, Jan 18, 2011 at 4:04 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we really
> don't have a good sense of how people get Lucene and Solr for use in their
> application.  Because of this, there has been some talk of dropping Maven
> support for Lucene artifacts (or at least make them external).  Before we do
> that, I'd like to conduct an informal poll of actual users out there and see
> how you get Lucene or Solr.
>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
> Please put an X in the box that applies to you.  Multiple selections are OK
> (for instance, if one project uses a mirror and another uses Maven)
>
> Please do not turn this thread into a discussion on Maven and it's
> (de)merits, I simply want to know, informally, where people get their JARs
> from.  In other words, no discussion is necessary (we already have that
> going on dev@lucene.apache.org which you are welcome to join.)
>
> Thanks,
> Grant

--001636416acb50a142049a5dc9b3--

From java-user-return-48497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 05:47:37 2011
Return-Path: <java-user-return-48497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90622 invoked from network); 22 Jan 2011 05:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 05:47:36 -0000
Received: (qmail 54770 invoked by uid 500); 22 Jan 2011 05:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54676 invoked by uid 500); 22 Jan 2011 05:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 48951 invoked by uid 99); 21 Jan 2011 21:04:33 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
MIME-Version: 1.0
From: Sharma Kollaparthi <sharma.kollaparthi@ansys.com>
Date: Fri, 21 Jan 2011 16:03:41 -0500
Message-ID: <AANLkTimHwZOFR9goREg7avaouzz4bzTQ0yX0eGpRVOcT@mail.gmail.com>
Subject: Lucene , hits per document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636458ae6ea713d049a61965b
X-Virus-Checked: Checked by ClamAV on apache.org

--001636458ae6ea713d049a61965b
Content-Type: text/plain; charset=ISO-8859-1

Hi ,

       I have started to use Lucene for searching in HTML files. Is it
possible to get Hits per document, when we search for phrases like "Hello
World" and wild card searches like "te?t"?

 I managed to return the number of hits per document if there is only one
term using termfrequency vector.


Thanks,
Sharma

-- 
Sharma Kollaparthi
CDU Systems & Process Tools
Software Developer I
ANSYS INC.

--001636458ae6ea713d049a61965b--

From java-user-return-48498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 06:20:01 2011
Return-Path: <java-user-return-48498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14173 invoked from network); 22 Jan 2011 06:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 06:20:00 -0000
Received: (qmail 88535 invoked by uid 500); 22 Jan 2011 06:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88121 invoked by uid 500); 22 Jan 2011 06:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88112 invoked by uid 99); 22 Jan 2011 06:19:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 06:19:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.210.183] (HELO web161704.mail.bf1.yahoo.com) (98.139.210.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 22 Jan 2011 06:19:45 +0000
Received: (qmail 73228 invoked by uid 60001); 22 Jan 2011 06:19:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1295677162; bh=7ybKga2e2TYIf8S/nadr/XrBvDlsjNUgmOqNV3C/5/w=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=DQJg/Hj7GJxVyHg/WwbFZUZ3yrOroYp7R9aOKpc5ubRHkjMw7ve3ZriUi1RL52Wvl48x01QY7HhM07ILpQPxo2CUlwTqMAf2IsL3fC6su5Zep8wWvFJreNeyDUbcABnaXZBqR4LP3xjT1totq66Ed22gRSivt5DRCRjIWXmvNHI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=1o3sLZb2mmnc9B8mzPzvKHLXvAc+dXE19MVbdq1jRz0JRXxQj84iF4xRam44yjSb94xz1GjF8+hF+vfi3tbiT9Z/Wtn7S94mff3LbbvoV10U7kso8pqrazkDvg5sPgVTtHHAlm2OGfr3F8yhHlTjG66O/FkGGZxSmUhR/hkGxEQ=;
Message-ID: <734208.73111.qm@web161704.mail.bf1.yahoo.com>
X-YMail-OSG: efnObuMVM1m5zTuNaOaJnQyWNlbBJ.AaMx7k_j4E8U3u4ZI
 n4BFCRTrcU_h2MyEx0iejC2LhIIBBtfHP3iZeGpCTJZDyqA439A20xmDjtrB
 Wg140ji1I9FoUXGWUJk6mFxIe5cU.I78K1JzWNqIBGZ0SlfyHw5u0k9OZjCx
 30vmQp6S5S.ai81Kmnnw2hC1iWygRK57F_s3sq61Y0Zyy0L0thecbKXRETEE
 6ijygVQA1qqj3vPOw9vsweMXk2T8Lilms9lK4abRJZRXcAffYUYkfInPDkjO
 lO89HUanwA_sHK.MLFqZV
Received: from [91.186.200.195] by web161704.mail.bf1.yahoo.com via HTTP; Fri, 21 Jan 2011 22:19:22 PST
X-Mailer: YahooMailWebService/0.8.107.285259
Date: Fri, 21 Jan 2011 22:19:22 -0800 (PST)
From: Khosro Asgharifard <khosro_question@yahoo.com>
Reply-To: Khosro Asgharifard <khosro_question@yahoo.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-619083533-1295677162=:73111"

--0-619083533-1295677162=:73111
Content-Type: text/plain; charset=us-ascii



[x] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[x] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)


On Tue, Jan 18, 2011 at 4:04 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> As devs of Lucene/Solr, due to the way ASF mirrors, etc. works, we really
> don't have a good sense of how people get Lucene and Solr for use in their
> application.  Because of this, there has been some talk of dropping Maven
> support for Lucene artifacts (or at least make them external).  Before we do
> that, I'd like to conduct an informal poll of actual users out there and see
> how you get Lucene or Solr.
>
> Where do you get your Lucene/Solr downloads from?
>
> [] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>
> Please put an X in the box that applies to you.  Multiple selections are OK
> (for instance, if one project uses a mirror and another uses Maven)
>
> Please do not turn this thread into a discussion on Maven and it's
> (de)merits, I simply want to know, informally, where people get their JARs
> from.  In other words, no discussion is necessary (we already have that
> going on dev@lucene.apache.org which you are welcome to join.)
>
> Thanks,
> Grant


      
--0-619083533-1295677162=:73111--

From java-user-return-48499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 07:22:34 2011
Return-Path: <java-user-return-48499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39070 invoked from network); 22 Jan 2011 07:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 07:22:34 -0000
Received: (qmail 20898 invoked by uid 500); 22 Jan 2011 07:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20576 invoked by uid 500); 22 Jan 2011 07:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20564 invoked by uid 99); 22 Jan 2011 07:22:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:22:27 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:22:20 +0000
Received: by fxm2 with SMTP id 2so2832040fxm.35
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 23:22:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=rw1Vf56+s573nQdKR/T0jz1vU5PbMJHmAsqDid0V57A=;
        b=OdSevvLFM3v9cO5o8otEmQ5EdquqnM96z+nwzjUcwVw53mDXLZ0oDzZxvy096wQ38a
         +FVoSz0l+9fzkahtAtBwA/ZBOGiJKhS+0NTGt1PN7crxMfDCVGZe2eMc00iXsRZlpa6Q
         cljq58kKBrQ3+Cvxs7CS2I+Qg3l+CKJ6EWJ3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=F+rqaDu8m1LO/01GWXWYnxymP1vfZbVhWFsLrlgoL62DMo3LC3CX+BNY+OnSwCcyPB
         hEIjm3YGTblRU8BFce9/aQIFmVPSmL518H4Rv2imid3XStW5zQv0ho5pEOp9aS/yOv4/
         QAEKZR9NVbs+WEPrwg5mJeae72DSZqGKsQG0Q=
MIME-Version: 1.0
Received: by 10.223.96.78 with SMTP id g14mr1646258fan.15.1295680918963; Fri,
 21 Jan 2011 23:21:58 -0800 (PST)
Received: by 10.223.83.204 with HTTP; Fri, 21 Jan 2011 23:21:58 -0800 (PST)
In-Reply-To: <AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com>
	<1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
	<AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
	<37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
	<AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
	<499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
	<AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
	<AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
	<AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
	<AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com>
	<AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
Date: Fri, 21 Jan 2011 23:21:58 -0800
Message-ID: <AANLkTimq2Y+TYk7-8JO=yQXymWagXfzU8ECXYSgwskUR@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org, softwarevisualization@gmail.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There's a feature in lucene called an "instantiated" index. This has
all of the Lucene data structures directly as objects instead of
serialized to disk or a RAMDirectory. It never needs to be committed:
you index a document and it is immediately searchable. It is larger
and faster than a normal index, but might be the right thing for this
use case. You cannot store it to disk, it only lives in memory.

On Fri, Jan 21, 2011 at 9:28 PM, software visualization
<softwarevisualization@gmail.com> wrote:
> If I understand you correctly, I think that this :
>
> If T2 < T1, Skip the result.
>
> will always =C2=A0be the case. The live being edited document is always "=
later"
> in time than the indexed information about it.
>
>
>
> On Fri, Jan 21, 2011 at 9:11 PM, Umesh Prasad <umesh.iitk@gmail.com> wrot=
e:
>
>> Hi,
>> =C2=A0 One work around would be to version the documents and store the
>> version as well as the timestamp of indexed document into the index.
>>
>> Reading between lines I assume that
>> Document is
>> a) stored in some DB/File :
>> b) indexed in lucene index
>>
>> User Search =C2=A0On on b)
>> Document ids
>> but documents are displayed to user after retrieving from a).
>>
>> Now I do not know a way in which I can keep a) and b) completely in
>> sync in realtime. As there will be some time taken in indexing
>> operation itself. a) --> b) .
>>
>> Instead we can do following.
>> a) stored : Document ID + Document Text + Document Version +
>> Modification Time Stamp (T1)
>> b) Indexed : Document ID + Document Text + Document Version +
>> Modification Time Stamp (T2) (when indexed) (broken into date + hour +
>> mins + sec for minimizing number of terms)
>>
>> User Searches b)
>> Search System gets Document ID + Modification Time Stamp (T2) and gives =
to
>> Presentation layer which compares the =C2=A0T1 & T2.
>> If T2 < T1, Skip the result.
>>
>> Assumption : Stored document is always in sync. Documents are
>> persisted somewhere and not served from memory.
>>
>> Thanks & Regards
>> Umesh Prasad
>>
>>
>>
>> On Sat, Jan 22, 2011 at 1:29 AM, software visualization
>> <softwarevisualization@gmail.com> wrote:
>> > Hi sorry for the long delay.
>> >
>> > The idea is that a single user is editing a single document. As they
>> edit,
>> > any indexes built against the document become stale, actually wrong.
>> > Example: =C2=A0references to specific localities within this document =
are all
>> > instantly wrong the first time a user types a new beginning =C2=A0char=
acter-
>> > they're all off by one. Deleting =C2=A0words is of course disastrous e=
tc. etc.
>> > =C2=A0So our story is- we used to have this document nicely indexed an=
d now we
>> > have nothing useful.
>> >
>> > Considering what Lucene does prior to indexing, stemming for instance,=
 =C2=A0I
>> am
>> > not sure no, I am quite sure I can't =C2=A0recreate the same powerful =
indexing
>> > functionality.
>> >
>> > But it seems wrong =C2=A0to lure our users into opening this document =
with
>> > promises that this that and the other thing is has been located for th=
em
>> > only to invalidate all that just because they began to edit the docume=
nt.
>> I
>> > understand why that happens , but my users are perhaps not as tech sav=
vy
>> and
>> > I think it will just feel "wrong" to them.
>> >
>> > So I am looking for a way around this.
>> >
>> >
>> >
>> > On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com> wrote:
>> >
>> >> I would think this is more like it.
>> >> But the essential thing, so it seems to me, is whether there is a
>> >> requirement for a serialised index, i.e. a more permanent record, asi=
de
>> >> from
>> >> the saved document.
>> >> Then, if there is a penalty to creating the index compared to regex,
>> >> stringsearch or so, it is justified on other grounds.
>> >> I think it is an interesting q. when does that requirement emerge?
>> >> There is size of document.
>> >> But there would also be field types. I think I have this right. This =
is
>> >> really a classification system, so more than bare regex.
>> >> There must be other criteria that apply to this use case, too?
>> >>
>> >> Adam
>> >>
>> >> p.s. we (in my work project) are just beginning to use Lucene for
>> geometry
>> >> objects and I am looking forward to understanding its use better,
>> >> including,
>> >> possibly, expanding it to other use cases apart from geo objects.
>> >>
>> >> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
>> >>
>> >> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.o=
rg
>> >
>> >> > wrote:
>> >> > > There is also the MemoryIndex, which is in contrib and is designe=
d
>> for
>> >> > one document at a time. =C2=A0That being said, basic grep/regex is =
probably
>> >> fast
>> >> > enough.
>> >> > >
>> >> >
>> >> > In cases where you are doing a 'find' in a document similar to what=
 a
>> >> > wordprocessor would do (especially if you want to iterate
>> >> > forwards/backwards through matches etc), you might want to consider
>> >> > something like
>> >> >
>> http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >
>>
>>
>>
>> --
>> ---
>> Thanks & Regards
>> Umesh Prasad
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 07:25:37 2011
Return-Path: <java-user-return-48500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39368 invoked from network); 22 Jan 2011 07:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 07:25:36 -0000
Received: (qmail 25194 invoked by uid 500); 22 Jan 2011 07:25:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24951 invoked by uid 500); 22 Jan 2011 07:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24936 invoked by uid 99); 22 Jan 2011 07:25:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:25:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:25:23 +0000
Received: by wwd20 with SMTP id 20so2703729wwd.5
        for <java-user@lucene.apache.org>; Fri, 21 Jan 2011 23:25:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=gRVZ8mnS+mPZEw9og6FETotZ2JzUwsvKtCHs/N04etE=;
        b=L7eM+mwvIGicmKwL+LFVMUirmXya5qi/N5w6hvuH6nlx6/zWnhP/9ZuRTFFbEJUIQW
         DFm9rE6InSniqb/gpY392iWEPxmx1vZScRmti+BunlZxuCo0V/kffcyYDmC+s/ItnANk
         hvHvZoL6OY5kMDDfiNR7F4HOjodI4sHQMit20=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=u7QRUwaF0QZPqYDfChtG13iydoRhPrOtljVL0QLhEsYhVwpiITDD1rjz5FQrDusBDm
         WmC1OlV71tdNZJuE91awy0KuF/ZvFNwscBHutUEuB2pN8W3GAaTx6TbX7SJsytaqfBNS
         rE+6Z2uuS6WVr+WDofR2v+2pYw29GSc0zlBPc=
Received: by 10.216.168.82 with SMTP id j60mr247893wel.47.1295681101559; Fri,
 21 Jan 2011 23:25:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Fri, 21 Jan 2011 23:24:40 -0800 (PST)
In-Reply-To: <AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com> <1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
 <AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
 <37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
 <AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
 <499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org> <AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
 <AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
 <AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
 <AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com> <AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Sat, 22 Jan 2011 12:54:40 +0530
Message-ID: <AANLkTi=pim3HzSNFCUktydc_1MMWgBUAyVRmg4ga2ij6@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Nopes. It won't be the case always. Users will not be always editing
the document. They will edit the document, then save which will be
persisted in db. You can use db triggers to push it into a indexing
queue, from which indexer can regularly pick up the document for
indexing. You can schedule your indexer so that it picks the indexing
jobs every minute or so.
    Unless you have a mission critical system, the approach should be
more than sufficient.



On Sat, Jan 22, 2011 at 10:58 AM, software visualization
<softwarevisualization@gmail.com> wrote:
> If I understand you correctly, I think that this :
>
> If T2 < T1, Skip the result.
>
> will always =A0be the case. The live being edited document is always "lat=
er"
> in time than the indexed information about it.
>
>
>
> On Fri, Jan 21, 2011 at 9:11 PM, Umesh Prasad <umesh.iitk@gmail.com> wrot=
e:
>
>> Hi,
>> =A0 One work around would be to version the documents and store the
>> version as well as the timestamp of indexed document into the index.
>>
>> Reading between lines I assume that
>> Document is
>> a) stored in some DB/File :
>> b) indexed in lucene index
>>
>> User Search =A0On on b)
>> Document ids
>> but documents are displayed to user after retrieving from a).
>>
>> Now I do not know a way in which I can keep a) and b) completely in
>> sync in realtime. As there will be some time taken in indexing
>> operation itself. a) --> b) .
>>
>> Instead we can do following.
>> a) stored : Document ID + Document Text + Document Version +
>> Modification Time Stamp (T1)
>> b) Indexed : Document ID + Document Text + Document Version +
>> Modification Time Stamp (T2) (when indexed) (broken into date + hour +
>> mins + sec for minimizing number of terms)
>>
>> User Searches b)
>> Search System gets Document ID + Modification Time Stamp (T2) and gives =
to
>> Presentation layer which compares the =A0T1 & T2.
>> If T2 < T1, Skip the result.
>>
>> Assumption : Stored document is always in sync. Documents are
>> persisted somewhere and not served from memory.
>>
>> Thanks & Regards
>> Umesh Prasad
>>
>>
>>
>> On Sat, Jan 22, 2011 at 1:29 AM, software visualization
>> <softwarevisualization@gmail.com> wrote:
>> > Hi sorry for the long delay.
>> >
>> > The idea is that a single user is editing a single document. As they
>> edit,
>> > any indexes built against the document become stale, actually wrong.
>> > Example: =A0references to specific localities within this document are=
 all
>> > instantly wrong the first time a user types a new beginning =A0charact=
er-
>> > they're all off by one. Deleting =A0words is of course disastrous etc.=
 etc.
>> > =A0So our story is- we used to have this document nicely indexed and n=
ow we
>> > have nothing useful.
>> >
>> > Considering what Lucene does prior to indexing, stemming for instance,=
 =A0I
>> am
>> > not sure no, I am quite sure I can't =A0recreate the same powerful ind=
exing
>> > functionality.
>> >
>> > But it seems wrong =A0to lure our users into opening this document wit=
h
>> > promises that this that and the other thing is has been located for th=
em
>> > only to invalidate all that just because they began to edit the docume=
nt.
>> I
>> > understand why that happens , but my users are perhaps not as tech sav=
vy
>> and
>> > I think it will just feel "wrong" to them.
>> >
>> > So I am looking for a way around this.
>> >
>> >
>> >
>> > On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com> wrote:
>> >
>> >> I would think this is more like it.
>> >> But the essential thing, so it seems to me, is whether there is a
>> >> requirement for a serialised index, i.e. a more permanent record, asi=
de
>> >> from
>> >> the saved document.
>> >> Then, if there is a penalty to creating the index compared to regex,
>> >> stringsearch or so, it is justified on other grounds.
>> >> I think it is an interesting q. when does that requirement emerge?
>> >> There is size of document.
>> >> But there would also be field types. I think I have this right. This =
is
>> >> really a classification system, so more than bare regex.
>> >> There must be other criteria that apply to this use case, too?
>> >>
>> >> Adam
>> >>
>> >> p.s. we (in my work project) are just beginning to use Lucene for
>> geometry
>> >> objects and I am looking forward to understanding its use better,
>> >> including,
>> >> possibly, expanding it to other use cases apart from geo objects.
>> >>
>> >> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
>> >>
>> >> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <gsingers@apache.o=
rg
>> >
>> >> > wrote:
>> >> > > There is also the MemoryIndex, which is in contrib and is designe=
d
>> for
>> >> > one document at a time. =A0That being said, basic grep/regex is pro=
bably
>> >> fast
>> >> > enough.
>> >> > >
>> >> >
>> >> > In cases where you are doing a 'find' in a document similar to what=
 a
>> >> > wordprocessor would do (especially if you want to iterate
>> >> > forwards/backwards through matches etc), you might want to consider
>> >> > something like
>> >> >
>> http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >
>>
>>
>>
>> --
>> ---
>> Thanks & Regards
>> Umesh Prasad
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
---
Thanks & Regards
Umesh Prasad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 07:28:08 2011
Return-Path: <java-user-return-48501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39801 invoked from network); 22 Jan 2011 07:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 07:28:08 -0000
Received: (qmail 29313 invoked by uid 500); 22 Jan 2011 07:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28950 invoked by uid 500); 22 Jan 2011 07:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28934 invoked by uid 99); 22 Jan 2011 07:27:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:27:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 07:27:50 +0000
Received: by wwd20 with SMTP id 20so2704644wwd.5
        for <multiple recipients>; Fri, 21 Jan 2011 23:27:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=rD/8NNbUjcpF/JV3ejH07thDZTEcwRpFn4I4nFnM0XY=;
        b=PUNKjLAeGJjfCPyYUAxLeHuPObe3ifnJyKH7Y8jZJUG85hmsIZMmcM2IVw5vvYq+Df
         qvXcm4C22+1TtaPpxhB8UsKQ0n/yTA3A86sclXeyo/KAB6DHOo3P6TiI7fyX0vnkoL2O
         ag25Bdz2k0LRPDXY2IW27cjk7TF3PN0mzR8vo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=DSXxsE3za7F/nTwkawUowuqsGvXPxZQtPcsQTdvi/Qq2ept9rZq9wsT7/Cyvk6C8gY
         oOzaQi+tZJB/hSuCl+PWjvgpRC9oOrZDtqJyDVGO7Dy8YKdk7JOtCWnHpnx7fJJzSuxS
         iqC9c5Idi7K+Kaz4QwxGb7ivLnTGnynq6SGSI=
Received: by 10.216.183.209 with SMTP id q59mr1562844wem.17.1295681250354;
 Fri, 21 Jan 2011 23:27:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Fri, 21 Jan 2011 23:27:09 -0800 (PST)
In-Reply-To: <AANLkTi=1ngN3G+=27Ja82s+XCHjriUwpnsDD0d+ghL53@mail.gmail.com>
References: <75CA5E12-3449-4E02-9033-F80B7A397F1D@apache.org> <AANLkTi=1ngN3G+=27Ja82s+XCHjriUwpnsDD0d+ghL53@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Sat, 22 Jan 2011 12:57:09 +0530
Message-ID: <AANLkTinRJuyS8ZhqaAe5mmf0gTmkFJYsh=Atmhb1NJQf@mail.gmail.com>
Subject: Re: [POLL] Where do you get Lucene/Solr from? Maven? ASF Mirrors?
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

[] ASF Mirrors (linked in our release announcements or via the Lucene
website)

[x] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)

[x] I/we build them from source via an SVN/Git checkout.

[] Other (someone in your company mirrors them internally or via a
downstream project)

On Fri, Jan 21, 2011 at 10:01 PM, mike anderson <saidtherobot@gmail.com> wrote:
> [x] ASF Mirrors (linked in our release announcements or via the Lucene
> website)
>
> [] Maven repository (whether you use Maven, Ant+Ivy, Buildr, etc.)
>
> [x] I/we build them from source via an SVN/Git checkout.
>
> [] Other (someone in your company mirrors them internally or via a
> downstream project)
>



-- 
---
Thanks & Regards
Umesh Prasad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 15:44:16 2011
Return-Path: <java-user-return-48502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22706 invoked from network); 22 Jan 2011 15:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 15:44:16 -0000
Received: (qmail 96760 invoked by uid 500); 22 Jan 2011 15:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96500 invoked by uid 500); 22 Jan 2011 15:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96492 invoked by uid 99); 22 Jan 2011 15:44:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 15:44:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 15:44:03 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 4B9FCD2289
	for <java-user@lucene.apache.org>; Sun, 23 Jan 2011 00:43:42 +0900 (JST)
Message-ID: <4D3AFB2D.5070505@r.email.ne.jp>
Date: Sun, 23 Jan 2011 00:43:41 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Trying to extend MappingCharFilter so that it only changes a
 token if the length of the token matches the length of singleMatch
References: <4D383669.1090003@fastmail.fm>
In-Reply-To: <4D383669.1090003@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

(11/01/20 22:19), Paul Taylor wrote:
> Trying to extend MappingCharFilter so that it only changes a token if the length of the token
> matches the length of singleMatch in NormalizeCharMap (currently the singleMatch just has to be
> found in the token I want ut to match the whole token). Can this be done it sounds simple enough but
> I cannot make any headway understanding the MappingCharFilter source code
>
> thanks Paul

Paul,

Can you give us a concrete input/output (you wanted) with mapping table
so that I can understand what you want?

Thanks,

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 15:55:44 2011
Return-Path: <java-user-return-48503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24908 invoked from network); 22 Jan 2011 15:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 15:55:44 -0000
Received: (qmail 6439 invoked by uid 500); 22 Jan 2011 15:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6094 invoked by uid 500); 22 Jan 2011 15:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6084 invoked by uid 99); 22 Jan 2011 15:55:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 15:55:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of softwarevisualization@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 15:55:32 +0000
Received: by bwz8 with SMTP id 8so2613881bwz.35
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 07:55:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wNixTsL+JJGsmZ1RAdWiTk1qXH6+36YtbtotEvVnW2Y=;
        b=NllD3asAhIk6Q3Uwvwgf+RKGBp7ce0uIh3xnqSMvwRciXWzFnfFBNFEeC66st35T+Z
         DntDdBgafcZzi1SMjgR0S7g2YMmZHoIZKVROlfu3B6ONn2hZ3no5bPEH6HbmE4zLp6rf
         xvZEHNPhX2KtCzNXtQluTf2qDKMssDI0FXzDQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=OgQymu7Cvrbd6Nz6EDI13dHjmQrDBRQ3ThPXb/Xd267s6vpTwpdnrAbCh7eohmDleh
         DEtazbF+GBNLwGNFhWh34nuHIWD9MGByLK7FamF2iY5v+E6ix04NifaKEsjzlrXbOkhs
         kxLSKrZPQq2W+V170EUCWrRTWAr44iLNvyGTw=
MIME-Version: 1.0
Received: by 10.204.0.65 with SMTP id 1mr1874288bka.111.1295711709084; Sat, 22
 Jan 2011 07:55:09 -0800 (PST)
Received: by 10.204.152.138 with HTTP; Sat, 22 Jan 2011 07:55:09 -0800 (PST)
Reply-To: softwarevisualization@gmail.com
In-Reply-To: <AANLkTi=pim3HzSNFCUktydc_1MMWgBUAyVRmg4ga2ij6@mail.gmail.com>
References: <tencent_016058B91870538D7A4400B4@qq.com>
	<1596394141-1293637049-cardhu_decombobulator_blackberry.rim.net-1951755217-@b15.c6.bise7.blackberry>
	<AANLkTimZpH9BnaDdgrk2K-B3cfwbbwspALsTLnOgHtxW@mail.gmail.com>
	<37455700-1293642926-cardhu_decombobulator_blackberry.rim.net-1955853008-@b15.c6.bise7.blackberry>
	<AANLkTim+enpp=Ou=19W7CFbeubJ2k+zRS5GZz5BRosrP@mail.gmail.com>
	<499C43A3-01DA-4099-AB23-D1941FCC639A@apache.org>
	<AANLkTinayng2c4_dYinFkEcnhsXXqNDJYGSN-BxjT6SX@mail.gmail.com>
	<AANLkTikDcT9-P3fgwt34zzyJA9ym_jNfWFPn_K1Af3-X@mail.gmail.com>
	<AANLkTi=kQFh3M98smJPeG0YGzAO88b3c4Df1ccF=6Pkh@mail.gmail.com>
	<AANLkTik5r3XRNLtC7R+rFuVp35tjk_wCkbtnHNURNB80@mail.gmail.com>
	<AANLkTi=zpYyfx0tPotpp2VZ0pj4=jD=KOV5XrY+OMyyR@mail.gmail.com>
	<AANLkTi=pim3HzSNFCUktydc_1MMWgBUAyVRmg4ga2ij6@mail.gmail.com>
Date: Sat, 22 Jan 2011 10:55:09 -0500
Message-ID: <AANLkTinowu-_gxzp-eNgx3Nep2FuR7yvwu=a+Hztw_6p@mail.gmail.com>
Subject: Re: Using Lucene to search live, being-edited documents
From: software visualization <softwarevisualization@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e5f226baa0049a7164b1

--00151750e5f226baa0049a7164b1
Content-Type: text/plain; charset=ISO-8859-1

Lance, Umesh thank you.

Lance I will look into this and report results when I try it out. Thank you
very much!

 Umesh: Just thinking along these lines, when a user saves the document,
that event may have a  semantic meaning  that developers aren't privy to.
The user might be experimenting with the document in some way as a means of
gaining useful knowledge but specifically and deliberately NOT saving it.
Users surprise you, no?

For this reason, I am not inclined to create a dependency between search and
save; they should be able to search at any time  irrespective of whether
they've saved.

But what's to stop us from hooking this up to a timer, say and indexing it
every so often?  It's not perfect, since  indexing = I/O = possibly
noticeable delays (but the CPU can carry on doing useful things of course).


The only problem in this scenario besides the not-really-real-time aspect to
it is if the user decides- again for their own good reasons - not to save
but rather to back out of he changes they have in memory; is the index now
"ahead"  of the document? I suppose in that case I blow away the existing
index with the  version of the document the user did decide to save adn
there's no discontinuity.



Just thinking aloud now for anyone interested  in the same problem.

On Sat, Jan 22, 2011 at 2:24 AM, Umesh Prasad <umesh.iitk@gmail.com> wrote:

> Nopes. It won't be the case always. Users will not be always editing
> the document. They will edit the document, then save which will be
> persisted in db. You can use db triggers to push it into a indexing
> queue, from which indexer can regularly pick up the document for
> indexing. You can schedule your indexer so that it picks the indexing
> jobs every minute or so.
>    Unless you have a mission critical system, the approach should be
> more than sufficient.
>
>
>
> On Sat, Jan 22, 2011 at 10:58 AM, software visualization
> <softwarevisualization@gmail.com> wrote:
> > If I understand you correctly, I think that this :
> >
> > If T2 < T1, Skip the result.
> >
> > will always  be the case. The live being edited document is always
> "later"
> > in time than the indexed information about it.
> >
> >
> >
> > On Fri, Jan 21, 2011 at 9:11 PM, Umesh Prasad <umesh.iitk@gmail.com>
> wrote:
> >
> >> Hi,
> >>   One work around would be to version the documents and store the
> >> version as well as the timestamp of indexed document into the index.
> >>
> >> Reading between lines I assume that
> >> Document is
> >> a) stored in some DB/File :
> >> b) indexed in lucene index
> >>
> >> User Search  On on b)
> >> Document ids
> >> but documents are displayed to user after retrieving from a).
> >>
> >> Now I do not know a way in which I can keep a) and b) completely in
> >> sync in realtime. As there will be some time taken in indexing
> >> operation itself. a) --> b) .
> >>
> >> Instead we can do following.
> >> a) stored : Document ID + Document Text + Document Version +
> >> Modification Time Stamp (T1)
> >> b) Indexed : Document ID + Document Text + Document Version +
> >> Modification Time Stamp (T2) (when indexed) (broken into date + hour +
> >> mins + sec for minimizing number of terms)
> >>
> >> User Searches b)
> >> Search System gets Document ID + Modification Time Stamp (T2) and gives
> to
> >> Presentation layer which compares the  T1 & T2.
> >> If T2 < T1, Skip the result.
> >>
> >> Assumption : Stored document is always in sync. Documents are
> >> persisted somewhere and not served from memory.
> >>
> >> Thanks & Regards
> >> Umesh Prasad
> >>
> >>
> >>
> >> On Sat, Jan 22, 2011 at 1:29 AM, software visualization
> >> <softwarevisualization@gmail.com> wrote:
> >> > Hi sorry for the long delay.
> >> >
> >> > The idea is that a single user is editing a single document. As they
> >> edit,
> >> > any indexes built against the document become stale, actually wrong.
> >> > Example:  references to specific localities within this document are
> all
> >> > instantly wrong the first time a user types a new beginning
>  character-
> >> > they're all off by one. Deleting  words is of course disastrous etc.
> etc.
> >> >  So our story is- we used to have this document nicely indexed and now
> we
> >> > have nothing useful.
> >> >
> >> > Considering what Lucene does prior to indexing, stemming for instance,
>  I
> >> am
> >> > not sure no, I am quite sure I can't  recreate the same powerful
> indexing
> >> > functionality.
> >> >
> >> > But it seems wrong  to lure our users into opening this document with
> >> > promises that this that and the other thing is has been located for
> them
> >> > only to invalidate all that just because they began to edit the
> document.
> >> I
> >> > understand why that happens , but my users are perhaps not as tech
> savvy
> >> and
> >> > I think it will just feel "wrong" to them.
> >> >
> >> > So I am looking for a way around this.
> >> >
> >> >
> >> >
> >> > On Tue, Jan 4, 2011 at 1:25 PM, adasal <adam.saltiel@gmail.com>
> wrote:
> >> >
> >> >> I would think this is more like it.
> >> >> But the essential thing, so it seems to me, is whether there is a
> >> >> requirement for a serialised index, i.e. a more permanent record,
> aside
> >> >> from
> >> >> the saved document.
> >> >> Then, if there is a penalty to creating the index compared to regex,
> >> >> stringsearch or so, it is justified on other grounds.
> >> >> I think it is an interesting q. when does that requirement emerge?
> >> >> There is size of document.
> >> >> But there would also be field types. I think I have this right. This
> is
> >> >> really a classification system, so more than bare regex.
> >> >> There must be other criteria that apply to this use case, too?
> >> >>
> >> >> Adam
> >> >>
> >> >> p.s. we (in my work project) are just beginning to use Lucene for
> >> geometry
> >> >> objects and I am looking forward to understanding its use better,
> >> >> including,
> >> >> possibly, expanding it to other use cases apart from geo objects.
> >> >>
> >> >> On 3 January 2011 15:31, Robert Muir <rcmuir@gmail.com> wrote:
> >> >>
> >> >> > On Mon, Jan 3, 2011 at 10:16 AM, Grant Ingersoll <
> gsingers@apache.org
> >> >
> >> >> > wrote:
> >> >> > > There is also the MemoryIndex, which is in contrib and is
> designed
> >> for
> >> >> > one document at a time.  That being said, basic grep/regex is
> probably
> >> >> fast
> >> >> > enough.
> >> >> > >
> >> >> >
> >> >> > In cases where you are doing a 'find' in a document similar to what
> a
> >> >> > wordprocessor would do (especially if you want to iterate
> >> >> > forwards/backwards through matches etc), you might want to consider
> >> >> > something like
> >> >> >
> >> http://icu-project.org/apiref/icu4j/com/ibm/icu/text/StringSearch.html
> >> >> >
> >> >> >
> ---------------------------------------------------------------------
> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >>
> >> >
> >>
> >>
> >>
> >> --
> >> ---
> >> Thanks & Regards
> >> Umesh Prasad
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
> ---
> Thanks & Regards
> Umesh Prasad
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750e5f226baa0049a7164b1--

From java-user-return-48504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 18:56:30 2011
Return-Path: <java-user-return-48504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39669 invoked from network); 22 Jan 2011 18:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 18:56:29 -0000
Received: (qmail 33196 invoked by uid 500); 22 Jan 2011 18:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33094 invoked by uid 500); 22 Jan 2011 18:56:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33086 invoked by uid 99); 22 Jan 2011 18:56:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 18:56:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amgqas@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 18:56:18 +0000
Received: by ywc21 with SMTP id 21so526116ywc.35
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 10:55:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=f7nt0CieDkliKd865VDatV0Xn2TE7ROKXUQqMHDTRPc=;
        b=h/ZTcTwHGqfg7ncXbWEmKqfB8cE5kag/yh/FU9jdqwhpsPA77NBFONdb9I3r9xvFji
         Qxd4TUSYMX+3UaDLtJTEEV12AlvVuu9+tn62xmkZKLUa+C+iJoUHQuccNUnSCu1XQFiR
         B2+MmxTr0lckKEhEL1O7ZqPnOhKzvk+lermrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=my8ihMZpOy2rdV6smT1Td1AXE+yoEdtvXYYwsjYIsXfUFwB7Yi8D0JjC0vp9quGu2A
         lrFX+dtTd3q8DNQOSkw3MVElTPHV4xbATHk97oQJHMwu7n26w6vwKb+JGH68RJVJshR9
         fA+B4ffYZ8fhoGJyBwjApopoDkpAFhJMmbwkk=
MIME-Version: 1.0
Received: by 10.150.138.4 with SMTP id l4mr2444439ybd.340.1295722557645; Sat,
 22 Jan 2011 10:55:57 -0800 (PST)
Received: by 10.147.136.17 with HTTP; Sat, 22 Jan 2011 10:55:57 -0800 (PST)
In-Reply-To: <AANLkTik-L9QQAsp+zWHFgmAj55BsCDdvksENmQQbpn7N@mail.gmail.com>
References: <AANLkTi=HQHr3Ot5Gw29HwVP5f2ttLWz9L0aNkEKtSPWm@mail.gmail.com>
	<AANLkTik-L9QQAsp+zWHFgmAj55BsCDdvksENmQQbpn7N@mail.gmail.com>
Date: Sat, 22 Jan 2011 10:55:57 -0800
Message-ID: <AANLkTi=g7ZyV1JK5Tu7Ht0VFZdn3nVkco-ZgBCLz8Osg@mail.gmail.com>
Subject: Re: Phrase query on multiple fields
From: amg qas <amgqas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Ian. The alternative approach you have mentioned works for me.

-amg

On Thu, Jan 20, 2011 at 6:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
> No and No.
>
> Alternative approaches might include building a general "contents"
> field holding any/all searchable fields or building up the query
> yourself. =A0The latter is quite straightforward:
>
> =A0BooleanQuery bq =3D new BooleanQuery();
> =A0PhraseQuery pq1 =3D ...;
> =A0PhraseQuery pq2 =3D ...;
> =A0bq.add(pq1, ...);
> =A0bq.add(pq2, ...);
> =A0etc.
>
>
> --
> Ian.
>
>
> On Thu, Jan 20, 2011 at 3:13 AM, amg qas <amgqas@gmail.com> wrote:
>> Hi,
>>
>> I have two question regarding phrase query :
>>
>> 1) How can I execute a phrase query over multiple fields ? I can only
>> get PhraseQuery to work over a single field - For eg something like
>> this :
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0PhraseQue=
ry query =3D new PhraseQuery();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query.setSlop(10);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String[] phrase =3D { "george", "bush" };
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (String word : phrase) {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query.add(new Term(field, word));
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>
>> 2) Is there a way to execute a phrase query along with
>> MultiFieldQueryParser ? So if I have a query {A B} and fields F1 and
>> F2, I want the query to be something like this :
>> (F1:A F2:A) (F1:B F2:B) (F1:"A B"~10 F2:"A B"~10)
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0MultiFieldQueryParser queryParser =3D new=
 MultiFieldQueryParser(
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Version.L=
UCENE_30, fields, new SnowballAnalyzer(
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0Version.LUCENE_30, "English"), boosts);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query =3D queryParser.parse(querySt=
ring);
>>
>> Thanks,
>> amg
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 19:32:52 2011
Return-Path: <java-user-return-48505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76115 invoked from network); 22 Jan 2011 19:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 19:32:51 -0000
Received: (qmail 54559 invoked by uid 500); 22 Jan 2011 19:32:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54476 invoked by uid 500); 22 Jan 2011 19:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54468 invoked by uid 99); 22 Jan 2011 19:32:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 19:32:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amgqas@gmail.com designates 74.125.83.66 as permitted sender)
Received: from [74.125.83.66] (HELO mail-gw0-f66.google.com) (74.125.83.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 19:32:42 +0000
Received: by gwj18 with SMTP id 18so1128044gwj.5
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 11:32:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=gNi31/kkl1DRAUeeowUJKiucrF79sDTmuX1y6NhvOEQ=;
        b=yCKGkbmicVELeWZ8N44QNL1yHJOnOecbfqEBvqiRQ2fDWnmBGsnkbfZ9w1yS5zVD4n
         pd2i/JUGZ1C0/tzvnPmV7LZfZwzcQlVN3u9mk3sMEchfH1gh/2plbplFwgxEizkSE1FV
         gyBsKqeyzxzXJBXwPoo8fe+UHQcJ5SKSB+Rvw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ud21XuIdxtplLZcGWBhAOApw6rvxs6Q5kuITa/kKeSBlr0u5W7r9suNwXhBGDbMqcf
         XDlTMET8kJFBQfk8H+WUcdHNWiMu27XaKD6YOT0L7uOUkR9/V/GEETEI8f3gSelM+Nt+
         qPYNtuPXijPgWbKnmZ/ZvaykaE0WV+GUBhF44=
MIME-Version: 1.0
Received: by 10.100.248.13 with SMTP id v13mr1608078anh.56.1295724741457; Sat,
 22 Jan 2011 11:32:21 -0800 (PST)
Received: by 10.147.136.17 with HTTP; Sat, 22 Jan 2011 11:32:21 -0800 (PST)
Date: Sat, 22 Jan 2011 11:32:21 -0800
Message-ID: <AANLkTikFKS7+Gh3Pxwfxy38pWX0+QZMmaKm9sy-NA_FV@mail.gmail.com>
Subject: Filter documents on a field value while searching the index
From: amg qas <amgqas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have couple of questions on filtering result set while performing a
search in lucene index :

1) I want to filter the document set returned when searching an index
based on a match on a particular field.
For eg if I have a Field in my index called CompanyName - then while
searching for documents that match
some query I want to restict the result set to only those documents
where CompanyName = 'Foo'. I looked
at the existing Filters in Lucene and could not figure out a way to
accomplish this using any of those filters.

2) Filter result set on a collection of values - for eg in the case
mentioned in 1 can I filter documents
where CompanyName = 'Foo' OR 'Bar' OR 'FooBar'.

3) Filter result set on multiple fields - for eg if my index has the
fields CompanyName & Location -
can I filter documents where CompanyName = 'Foo' & Location = 'Arizona'.

4) Filter result set on multiple fileds on collection of values for
each field - for eg if my index has the fields
CompanyName & Location - can I filter documents where (CompanyName =
'Foo' OR 'Bar') & (Location = 'Arizona'
OR 'Washington').

Thanks,
-amg

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 20:17:26 2011
Return-Path: <java-user-return-48506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96818 invoked from network); 22 Jan 2011 20:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 20:17:26 -0000
Received: (qmail 80781 invoked by uid 500); 22 Jan 2011 20:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80716 invoked by uid 500); 22 Jan 2011 20:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80708 invoked by uid 99); 22 Jan 2011 20:17:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:17:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:17:17 +0000
Received: by qwh6 with SMTP id 6so2819722qwh.35
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 12:16:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=tx8CzrOupuqzMwBPp++XqLDAsSHvTWt1TMvmjShrRig=;
        b=GsvCNBynKxbg2kuKuVDVmYH+7k+ve+UMhvAF+nZGSZXahTD/MKR6J0WRE83GaTqyv1
         R6rvKn1boLjYTW2Tpy3G4qhqYHxzBM8xiu5QhMRpaJIx3AqTu3w40I78G9azMSY+Ebqt
         /tng/7JSV1ogL7HSHS5iDGnC7B69QCm5v8Z6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bfO3XUW/L20QEcUxu+Le5UNOALpp7p/Hu4MqyytLIwh0br6IP8/jwkrLZicrXd+87g
         w47yKbvQ80KBZDadpiofUnGGOiEspcYJu04z1alaZ8jedUmoUudCrgnbtW9bF5Cra6d+
         lVq1MnvZ819ZpgeWqKdgFP0RODeMPt4KD14yk=
MIME-Version: 1.0
Received: by 10.229.95.81 with SMTP id c17mr2043409qcn.99.1295727415850; Sat,
 22 Jan 2011 12:16:55 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Sat, 22 Jan 2011 12:16:55 -0800 (PST)
In-Reply-To: <B6185CC7B3488840970E1083BF7C1C760A32DEA089@exchange.office.comparis.intra>
References: <B6185CC7B3488840970E1083BF7C1C760A32DEA087@exchange.office.comparis.intra>
	<024401cbb8a5$ee2fb650$ca8f22f0$@thetaphi.de>
	<B6185CC7B3488840970E1083BF7C1C760A32DEA089@exchange.office.comparis.intra>
Date: Sat, 22 Jan 2011 15:16:55 -0500
Message-ID: <AANLkTi=YD-JP+N3=P2zkqnR0=Db0VJKAX5gN4UqcUHk7@mail.gmail.com>
Subject: Re: Filter Performance
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364274b458f85b049a750cfc
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364274b458f85b049a750cfc
Content-Type: text/plain; charset=ISO-8859-1

That's certainly valid. You could also consider n-grams here as another
approach.

Its also useful to restrict the number of leading (or trailing) characters
you allow. For
instance, requiring at least 3 non-wildcard leading characters makes a big
difference.
It's also a legitimate question how well users are served by, say, a*. The
results are
often too broad to be useful...

Best
Erick

On Thu, Jan 20, 2011 at 8:48 AM, comparis.ch - Roman Baeriswyl <
roman.baeriswyl@comparis.ch> wrote:

> Thanks for the answer. That does make sense.
> It first gets thru all (not only those which could pass the filter) terms
> available and investigates all terms which match any of the wildcard
> queries. And that could take quite some time if I got leading wildcard
> queries.
>
> Guess I'll try another approach then with "reverse" indexing the fields
> which can be searched and then transform the leading wildcard queries to
> following wildcards by reversing them too.
>
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Donnerstag, 20. Januar 2011 14:29
> To: java-user@lucene.apache.org
> Subject: RE: Filter Performance
>
> The reason for this is that the filters and other boolean clauses are
> applied during result collection. But wildcard query first needs to
> investigate all terms that match and this is done before the results are
> collected. And this step takes the time (especially before Lucene 4.0).
>
> There is no way to change this.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> > Sent: Thursday, January 20, 2011 10:50 AM
> > To: 'java-user@lucene.apache.org'
> > Subject: Filter Performance
> >
> > Hi all
> >
> > I've got an Index with a few 100k documents and I want to run a rather
> > complex wildcard (incl. leading wildcards) query on it.
> > The wildcard query takes about 2 seconds to complete.
> > Now, I want to limit the items on which the wildcard query will be
> executed.
> > Let's say, I want to limit the items to those which have the field
> > "ProductName" set to "milk" (this query itself runs in less than 5
> milliseconds
> > and returns about 100 items).
> > So, I tried different things but everything resulted in having the exact
> same
> > execution time like without this  filter. Even if I run the query
> multiple
> times
> > in a row with the same Query and Filter items.
> >
> > Here's what I tried:
> >
> > -          Adding "+ProductName:milk" to the Query
> >
> > -          Added FieldCacheTermsFilter("ProductName ", new String[] {
> "milk" })
> > as Filter
> >
> > -          Wrapped the Filter in CachingWrapperFilter
> >
> > -          Used  BooleanQuery filterQuery = new BooleanQuery();
> > filterQuery.add(new TermQuery(new Term("ProductName", "milk ")),
> > BooleanClause.Occur.MUST); and wrapped it with a QueryWrapperFilter and
> > also tried wrapping it in a FilteredQuery
> >
> > Nothing improved the searchspeed, it had always the same speed as when
> > he parsed thru all documents without any pre-filtering.
> >
> > Is this pre-filtering different than I thought? Am I doing something
> wrong?
> > Does the index need to be build somehow special for this to work?
> >
> > Thanks for your help
> > //Roman
> >
> > ________________________________
> > Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> > http://www.facebook.com/pages/Preissturz/218831069608
> >
> > Die besten Elektronik-Aktionen auf Twitter:
> http://twitter.com/preissturz1
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> Holen Sie die besten Elektronik-Aktionen direkt auf Ihr Facebook-Profil:
> http://www.facebook.com/pages/Preissturz/218831069608
>
> Die besten Elektronik-Aktionen auf Twitter: http://twitter.com/preissturz1
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364274b458f85b049a750cfc--

From java-user-return-48507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 20:32:42 2011
Return-Path: <java-user-return-48507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1158 invoked from network); 22 Jan 2011 20:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 20:32:41 -0000
Received: (qmail 89948 invoked by uid 500); 22 Jan 2011 20:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89892 invoked by uid 500); 22 Jan 2011 20:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89884 invoked by uid 99); 22 Jan 2011 20:32:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:32:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:32:30 +0000
Received: by qwh6 with SMTP id 6so2825642qwh.35
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 12:32:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=kyy3yxWEtk8jVTVNIvHciFdWgkCG0C9henV+zxDmAOM=;
        b=ggBHhFZ6joquc7ffdz5rkIt34eCccfvlDe+BBc6cM+Mv8RexCb7NdJAxOL5JWsNG2z
         6Jab9yiBCEqIDdCm9xcQh1hZ9xYRTo/YrIol6qBA4cQiw+YV+sMLyJbTh6HpHpKjq00S
         X6PcIE1kCCffHzlmcD6JU31D+GI7k/jqvfq5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hOzalRW9iPl69jzyPeFX62PfW7/HDJxRazVIHfsbw4XFaNbPnDp/DpVk675nYIPqGf
         RlfOBlnqJJ0AmuEt8kP38NLRcxnh6Q/ZM31/IjtUzSuO2WPUzqYpAEao5Gi7siENAVd8
         s/Fy2SpwH0wE12iwMw3wEoCYiFsyLshYmC5/g=
MIME-Version: 1.0
Received: by 10.229.86.149 with SMTP id s21mr2091772qcl.23.1295728329131; Sat,
 22 Jan 2011 12:32:09 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Sat, 22 Jan 2011 12:32:09 -0800 (PST)
In-Reply-To: <AANLkTikFKS7+Gh3Pxwfxy38pWX0+QZMmaKm9sy-NA_FV@mail.gmail.com>
References: <AANLkTikFKS7+Gh3Pxwfxy38pWX0+QZMmaKm9sy-NA_FV@mail.gmail.com>
Date: Sat, 22 Jan 2011 15:32:09 -0500
Message-ID: <AANLkTinf+8jdaxaRNNovos7Ao0upvFambrm4HeE9ZPBV@mail.gmail.com>
Subject: Re: Filter documents on a field value while searching the index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364272b5c8863e049a754240
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364272b5c8863e049a754240
Content-Type: text/plain; charset=ISO-8859-1

I guess I don't see what the problem is. These look to me like
standard Lucene query syntax options. If I'm off base here,
let me know.

If you're building your own BooleanQuery,
you can add these as sub-clauses

Here's the Lucene query syntax:
http://lucene.apache.org/java/2_9_1/queryparsersyntax.html

See below

Best
Erick

On Sat, Jan 22, 2011 at 2:32 PM, amg qas <amgqas@gmail.com> wrote:

> Hi,
>
> I have couple of questions on filtering result set while performing a
> search in lucene index :
>
> 1) I want to filter the document set returned when searching an index
> based on a match on a particular field.
> For eg if I have a Field in my index called CompanyName - then while
> searching for documents that match
> some query I want to restict the result set to only those documents
> where CompanyName = 'Foo'. I looked
> at the existing Filters in Lucene and could not figure out a way to
> accomplish this using any of those filters.
>
>
Add a clause +CompanyName:foo


> 2) Filter result set on a collection of values - for eg in the case
> mentioned in 1 can I filter documents
> where CompanyName = 'Foo' OR 'Bar' OR 'FooBar'.
>
> Add a clause like +CompanyName:(Foo Bar)


> 3) Filter result set on multiple fields - for eg if my index has the
> fields CompanyName & Location -
> can I filter documents where CompanyName = 'Foo' & Location = 'Arizona'.
>
> +CompanyName:Foo +Location:Arizona


> 4) Filter result set on multiple fileds on collection of values for
> each field - for eg if my index has the fields
> CompanyName & Location - can I filter documents where (CompanyName =
> 'Foo' OR 'Bar') & (Location = 'Arizona'
> OR 'Washington').
>
> +CompanyName:(Foo Bar) +Location:(Arizona Washington)


> Thanks,
> -amg
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364272b5c8863e049a754240--

From java-user-return-48508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 20:55:30 2011
Return-Path: <java-user-return-48508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8722 invoked from network); 22 Jan 2011 20:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 20:55:30 -0000
Received: (qmail 7844 invoked by uid 500); 22 Jan 2011 20:55:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7768 invoked by uid 500); 22 Jan 2011 20:55:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7760 invoked by uid 99); 22 Jan 2011 20:55:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:55:27 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amgqas@gmail.com designates 209.85.213.194 as permitted sender)
Received: from [209.85.213.194] (HELO mail-yx0-f194.google.com) (209.85.213.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 20:55:19 +0000
Received: by yxd5 with SMTP id 5so1146702yxd.5
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 12:54:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=fbunVDpRlijxYb41z8TOwNuTbpYzosQquRKeCJaIIDA=;
        b=SZIehsbZP96R3MW+OMefmu7z4Uao7/9Xrt7YLw6nu8ZhZbRJIMuvecEXIyTza1dDjm
         6sKo2BI7xTjn/ih05pAYMUWwCGfsR04tW/s9oCdii5V+GtIsXyJdMzmfQOcmV+bZluYI
         MRVL81MB5kTPvv7YDJwaIURvsXmAdkiBmKEu4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WCcalA4Dt+1CZiNXFO3pEWC42/0DoEy0jZYhfwFNUolLchjAZaH/E1RAlp8VoK4cK2
         CpKFtrHktU3kOV8+Ez5ZaKh4g9jc3OryIwIU2VycL0xoRyFDu4lnaJC+5+uoxi4Qtb3K
         XKul/Y427hzPerSzBkBFEfjRsNK2jkSkubIGI=
MIME-Version: 1.0
Received: by 10.90.72.8 with SMTP id u8mr2785689aga.72.1295729698785; Sat, 22
 Jan 2011 12:54:58 -0800 (PST)
Received: by 10.147.136.17 with HTTP; Sat, 22 Jan 2011 12:54:58 -0800 (PST)
In-Reply-To: <AANLkTinf+8jdaxaRNNovos7Ao0upvFambrm4HeE9ZPBV@mail.gmail.com>
References: <AANLkTikFKS7+Gh3Pxwfxy38pWX0+QZMmaKm9sy-NA_FV@mail.gmail.com>
	<AANLkTinf+8jdaxaRNNovos7Ao0upvFambrm4HeE9ZPBV@mail.gmail.com>
Date: Sat, 22 Jan 2011 12:54:58 -0800
Message-ID: <AANLkTikGpbnkN7vUax1duepZUxPj3hTPyezfN8H0cdM9@mail.gmail.com>
Subject: Re: Filter documents on a field value while searching the index
From: amg qas <amgqas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

Thanks for the answer.. This does works for me in most cases..

I am actually new to lucene and still getting acquainted to the
various features exposed by it.
When I looked at the API of IndexSearcher I thought that it is the
purpose of the filter class
to filter the returned result set.

So :
  public TopDocs search(Weight weight, Filter filter, int nDocs)
throws IOException {

So my thinking was that there should be some Filter available in
lucene which would filter out
the resultset on match on a field.

I think the reason this functionality is not there in Lucene is
because searching a subset of the
index will be much faster - and this can be specified in BooleanQuery.

However what if I have a use case where I want to score documents on
all the fields but filter
them later on on certian fields ? How shoudl I handle this in Lucene ?

-amg

On Sat, Jan 22, 2011 at 12:32 PM, Erick Erickson
<erickerickson@gmail.com> wrote:
> I guess I don't see what the problem is. These look to me like
> standard Lucene query syntax options. If I'm off base here,
> let me know.
>
> If you're building your own BooleanQuery,
> you can add these as sub-clauses
>
> Here's the Lucene query syntax:
> http://lucene.apache.org/java/2_9_1/queryparsersyntax.html
>
> See below
>
> Best
> Erick
>
> On Sat, Jan 22, 2011 at 2:32 PM, amg qas <amgqas@gmail.com> wrote:
>
>> Hi,
>>
>> I have couple of questions on filtering result set while performing a
>> search in lucene index :
>>
>> 1) I want to filter the document set returned when searching an index
>> based on a match on a particular field.
>> For eg if I have a Field in my index called CompanyName - then while
>> searching for documents that match
>> some query I want to restict the result set to only those documents
>> where CompanyName = 'Foo'. I looked
>> at the existing Filters in Lucene and could not figure out a way to
>> accomplish this using any of those filters.
>>
>>
> Add a clause +CompanyName:foo
>
>
>> 2) Filter result set on a collection of values - for eg in the case
>> mentioned in 1 can I filter documents
>> where CompanyName = 'Foo' OR 'Bar' OR 'FooBar'.
>>
>> Add a clause like +CompanyName:(Foo Bar)
>
>
>> 3) Filter result set on multiple fields - for eg if my index has the
>> fields CompanyName & Location -
>> can I filter documents where CompanyName = 'Foo' & Location = 'Arizona'.
>>
>> +CompanyName:Foo +Location:Arizona
>
>
>> 4) Filter result set on multiple fileds on collection of values for
>> each field - for eg if my index has the fields
>> CompanyName & Location - can I filter documents where (CompanyName =
>> 'Foo' OR 'Bar') & (Location = 'Arizona'
>> OR 'Washington').
>>
>> +CompanyName:(Foo Bar) +Location:(Arizona Washington)
>
>
>> Thanks,
>> -amg
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 22 22:00:11 2011
Return-Path: <java-user-return-48509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36020 invoked from network); 22 Jan 2011 22:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jan 2011 22:00:11 -0000
Received: (qmail 60370 invoked by uid 500); 22 Jan 2011 22:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60152 invoked by uid 500); 22 Jan 2011 22:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60144 invoked by uid 99); 22 Jan 2011 22:00:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 22:00:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jan 2011 22:00:01 +0000
Received: by qyk7 with SMTP id 7so1631534qyk.14
        for <java-user@lucene.apache.org>; Sat, 22 Jan 2011 13:59:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Dhg0QRTPZIS2X+Zp/8CB8qZAqFvLqvU1/XHZc+hFddo=;
        b=AJ6RM43e5Gj+RSSIRYp7MJJa4HAUlQzcJpEZl2ZG+4JpUsGDuGIEVq4uAst10uOJZh
         tx2HDEVHAHPnLMZ2/Lfj51Fx5TuGyCGOaiRA7RtfpbSq8FUGfRMjnA1VF3rS9oG3gCOA
         cXTHldyASOSmxELJNx7/t5yrLX8QqB0hjAwWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uWTElt6rX+ka3Y++4UlDn4PfZpx/w22ioP3zK13AqgDywhMfafACXLoKanWEzBcs4M
         lsfKGNeu8mYdGzZuVC2fZCM60yTzOLFMeQn6jaM3VhUkwUKlh8WuidB1uv+tj1pNkVdy
         F73IuJ3tpm6lPAbzZL2Hr1kD7hgdb0G1Esuis=
MIME-Version: 1.0
Received: by 10.229.95.81 with SMTP id c17mr2110115qcn.99.1295733579818; Sat,
 22 Jan 2011 13:59:39 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Sat, 22 Jan 2011 13:59:39 -0800 (PST)
In-Reply-To: <AANLkTikGpbnkN7vUax1duepZUxPj3hTPyezfN8H0cdM9@mail.gmail.com>
References: <AANLkTikFKS7+Gh3Pxwfxy38pWX0+QZMmaKm9sy-NA_FV@mail.gmail.com>
	<AANLkTinf+8jdaxaRNNovos7Ao0upvFambrm4HeE9ZPBV@mail.gmail.com>
	<AANLkTikGpbnkN7vUax1duepZUxPj3hTPyezfN8H0cdM9@mail.gmail.com>
Date: Sat, 22 Jan 2011 16:59:39 -0500
Message-ID: <AANLkTimn-VvmUDyW8O-8qVWN5YZY_BjiqsPN6Wuj-AhE@mail.gmail.com>
Subject: Re: Filter documents on a field value while searching the index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364274b4bfa8c2049a767bb1

--0016364274b4bfa8c2049a767bb1
Content-Type: text/plain; charset=ISO-8859-1

See below...

On Sat, Jan 22, 2011 at 3:54 PM, amg qas <amgqas@gmail.com> wrote:

> Hi Eric,
>
> Thanks for the answer.. This does works for me in most cases..
>
> I am actually new to lucene and still getting acquainted to the
> various features exposed by it.
> When I looked at the API of IndexSearcher I thought that it is the
> purpose of the filter class
> to filter the returned result set.
>
> So :
>  public TopDocs search(Weight weight, Filter filter, int nDocs)
> throws IOException {
>
> So my thinking was that there should be some Filter available in
> lucene which would filter out
> the resultset on match on a field.
>
>
What you have to do here is *construct* a filter. This is often accomplished
by walking the terms (via TermDocs) to construct your Filter, then passing
that filter in. The Filter can be cached (CachingWrapperFilter as I
remember)
if desired for later reuse.


> I think the reason this functionality is not there in Lucene is
> because searching a subset of the
> index will be much faster - and this can be specified in BooleanQuery.
>
>
I *think* a filter restricts the documents to be scored, which is, indeed,
faster. But
the cost is that the field filtered on doesn't contribute to relevancy
scoring. Which
may be OK. The question to answer first is whether you care. If simply
adding the
clauses to the query is simpler and fast enough, the added complexity of
creating a filter is debatable. That said, you know your problem space and I
don't....


> However what if I have a use case where I want to score documents on
> all the fields but filter
> them later on on certian fields ? How shoudl I handle this in Lucene ?
>
>
This confuses me. Why do you want to? If you're not going to return the docs
anyway,
why filter them later?

Best
Erick


> -amg
>
> On Sat, Jan 22, 2011 at 12:32 PM, Erick Erickson
> <erickerickson@gmail.com> wrote:
> > I guess I don't see what the problem is. These look to me like
> > standard Lucene query syntax options. If I'm off base here,
> > let me know.
> >
> > If you're building your own BooleanQuery,
> > you can add these as sub-clauses
> >
> > Here's the Lucene query syntax:
> > http://lucene.apache.org/java/2_9_1/queryparsersyntax.html
> >
> > See below
> >
> > Best
> > Erick
> >
> > On Sat, Jan 22, 2011 at 2:32 PM, amg qas <amgqas@gmail.com> wrote:
> >
> >> Hi,
> >>
> >> I have couple of questions on filtering result set while performing a
> >> search in lucene index :
> >>
> >> 1) I want to filter the document set returned when searching an index
> >> based on a match on a particular field.
> >> For eg if I have a Field in my index called CompanyName - then while
> >> searching for documents that match
> >> some query I want to restict the result set to only those documents
> >> where CompanyName = 'Foo'. I looked
> >> at the existing Filters in Lucene and could not figure out a way to
> >> accomplish this using any of those filters.
> >>
> >>
> > Add a clause +CompanyName:foo
> >
> >
> >> 2) Filter result set on a collection of values - for eg in the case
> >> mentioned in 1 can I filter documents
> >> where CompanyName = 'Foo' OR 'Bar' OR 'FooBar'.
> >>
> >> Add a clause like +CompanyName:(Foo Bar)
> >
> >
> >> 3) Filter result set on multiple fields - for eg if my index has the
> >> fields CompanyName & Location -
> >> can I filter documents where CompanyName = 'Foo' & Location = 'Arizona'.
> >>
> >> +CompanyName:Foo +Location:Arizona
> >
> >
> >> 4) Filter result set on multiple fileds on collection of values for
> >> each field - for eg if my index has the fields
> >> CompanyName & Location - can I filter documents where (CompanyName =
> >> 'Foo' OR 'Bar') & (Location = 'Arizona'
> >> OR 'Washington').
> >>
> >> +CompanyName:(Foo Bar) +Location:(Arizona Washington)
> >
> >
> >> Thanks,
> >> -amg
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364274b4bfa8c2049a767bb1--

From java-user-return-48510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 23 05:15:03 2011
Return-Path: <java-user-return-48510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26870 invoked from network); 23 Jan 2011 05:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jan 2011 05:15:02 -0000
Received: (qmail 90516 invoked by uid 500); 23 Jan 2011 05:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88179 invoked by uid 500); 23 Jan 2011 05:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88159 invoked by uid 99); 23 Jan 2011 05:14:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 05:14:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 05:14:46 +0000
Received: by pwj9 with SMTP id 9so631404pwj.35
        for <multiple recipients>; Sat, 22 Jan 2011 21:14:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=KFowg25bK5YjAA5g2k+4Cyl6F6Atmnwv85zrwX15bbo=;
        b=SZtgS5Ewf29NRtHAV/+/OqzzZRzt9GuM/tt+YU6r8+n8Cl+GQe06Ctz17HCawy+W8R
         H8ASI2F+7gZ2x0eKIAFyPY4wTTubyuHMlpCzFnI9wfS8DE3RoKTuG2+nXCTASLiLb0Rn
         E/7nxyT3GWgygsEFi1urPgwPFocGLnVzawH38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EHmuJllBFaMtb40xk3On7v3IWLkuqSq8fWQ/dtZm/X8A4ayb8mZ3leeWLFlMoIiT7b
         WE8FOzm7QWjxqVXihz0ThNcLCKqjTeSLFaB9aQfptHbRZltsy3BAjxjH1+F/tGY24FI3
         nXZroAxhlq+z50jIsDFPqqaiYI4w6jXpSFu48=
MIME-Version: 1.0
Received: by 10.142.48.9 with SMTP id v9mr2337998wfv.405.1295759666312; Sat,
 22 Jan 2011 21:14:26 -0800 (PST)
Received: by 10.143.10.11 with HTTP; Sat, 22 Jan 2011 21:14:26 -0800 (PST)
Date: Sun, 23 Jan 2011 07:14:26 +0200
Message-ID: <AANLkTi=sZJgK5QwLz_s53HzVd+AZfLPa_eHsi0w4LAk+@mail.gmail.com>
Subject: [REINDEX] Note: re-indexing required !
From: Shai Erera <serera@gmail.com>
To: dev@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517592ca69ff7fa049a7c8ea8

--001517592ca69ff7fa049a7c8ea8
Content-Type: text/plain; charset=ISO-8859-1

Hi

Under LUCENE-2720 the index format of both trunk and 3x has changed. You
should re-index any indexes created with either of these code streams.

Shai

--001517592ca69ff7fa049a7c8ea8--

From java-user-return-48511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 23 16:19:17 2011
Return-Path: <java-user-return-48511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6094 invoked from network); 23 Jan 2011 16:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jan 2011 16:19:16 -0000
Received: (qmail 31004 invoked by uid 500); 23 Jan 2011 16:19:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30940 invoked by uid 500); 23 Jan 2011 16:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30926 invoked by uid 99); 23 Jan 2011 16:19:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 16:19:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of earlhood@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 16:19:02 +0000
Received: by pvb32 with SMTP id 32so682530pvb.35
        for <multiple recipients>; Sun, 23 Jan 2011 08:18:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        bh=OgmEA7OeAusCu9js3vUVlNCVp/NQpWb12hfbQ5lNY4E=;
        b=CuPUkLXiWYkXdLKliRdg79gzzPXBFzinxKX5h4mk0LL0DhpNCQY0ht2HuDkffpe9Wd
         GeImynBujDV8iTKkb5ggMZ8p/88kGWoWCjiT0P8p/QlR4FzDDM8Qx7bbmbjP1P/+U2zR
         XmS2gl7G5tUGYX3mLCF4TScAsfYIUFQqx2/YU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        b=DSZxwZZfhFmCMhUbHfveEm27e6x3iLfWIBiPSiWBh9QflvZ/R0jEL6Zk7245jFOw1o
         s6mHZgUhP0VSrsyB+ATEz8WI0wAUc1jrIwNW6q26GHrE1LnLcpelwYrZOEfnA5Ifyw1T
         +ZX4A4rt2iDTi44fg/sG5TfAWt02XFpsW7W8k=
MIME-Version: 1.0
Received: by 10.142.154.3 with SMTP id b3mr280264wfe.32.1295799521745; Sun, 23
 Jan 2011 08:18:41 -0800 (PST)
Sender: earlhood@gmail.com
Received: by 10.142.171.4 with HTTP; Sun, 23 Jan 2011 08:18:41 -0800 (PST)
In-Reply-To: <AANLkTi=sZJgK5QwLz_s53HzVd+AZfLPa_eHsi0w4LAk+@mail.gmail.com>
References: <AANLkTi=sZJgK5QwLz_s53HzVd+AZfLPa_eHsi0w4LAk+@mail.gmail.com>
Date: Sun, 23 Jan 2011 10:18:41 -0600
X-Google-Sender-Auth: HmxfsGnC_b8bEMqdfP8hJ5Xm_iE
Message-ID: <AANLkTi=LAKfbuA7eNXsQrFGO5JRn5xqqijWLKJd7XgQk@mail.gmail.com>
Subject: Re: [REINDEX] Note: re-indexing required !
From: Earl Hood <earl@earlhood.com>
To: java-user@lucene.apache.org
Cc: dev@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Jan 22, 2011 at 11:14 PM, Shai Erera <serera@gmail.com> wrote:
> Under LUCENE-2720 the index format of both trunk and 3x has changed. You
> should re-index any indexes created with either of these code streams.

Does the "3x" refer to the 3.x development branch?

I.e. For those of using the stable 3.x release of Lucene, will
a future 3.x release require rebuilding indexes?

--ewh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 23 17:03:11 2011
Return-Path: <java-user-return-48512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26560 invoked from network); 23 Jan 2011 17:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jan 2011 17:03:10 -0000
Received: (qmail 67738 invoked by uid 500); 23 Jan 2011 17:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67441 invoked by uid 500); 23 Jan 2011 17:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67433 invoked by uid 99); 23 Jan 2011 17:03:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 17:03:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 17:02:57 +0000
Received: by qwh6 with SMTP id 6so3260518qwh.35
        for <java-user@lucene.apache.org>; Sun, 23 Jan 2011 09:02:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3fLGvunHN7SmuTngI1VxUij8Pybwg8kka5IbXZLoCio=;
        b=tn4baDAWqYdhxxJ2d3esjZKIUu8qk8f13ROtixK190HQj1sUkVcLhDi8FGGLz9fbuO
         LeAh+0DwQviUOZH7XS6AkgxLJvHM00DnTvNP75cfEcLw3g4ChCoKvF/CXH8UvvVyf8oM
         ajddY91fP5WTTspjPBIiKy0pd/1gPmRPg6F7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bJA1bYwEFrcUduQKjDn2idXrDIEfuL3EaO5M3UmPW0mx7UXM9y6pBVsROAtnRsB8X5
         QGOTZ60GAR8/CRLiJUCbXJcd1HRus0qxMfNSWQakRQbRNNyzOVafw1eGG/1MTcdVyntt
         QXJVaWIiDl923EHNLhDeNWAdYEUGprgp3QMww=
MIME-Version: 1.0
Received: by 10.229.95.200 with SMTP id e8mr2810940qcn.213.1295802157067; Sun,
 23 Jan 2011 09:02:37 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Sun, 23 Jan 2011 09:02:37 -0800 (PST)
In-Reply-To: <AANLkTi=LAKfbuA7eNXsQrFGO5JRn5xqqijWLKJd7XgQk@mail.gmail.com>
References: <AANLkTi=sZJgK5QwLz_s53HzVd+AZfLPa_eHsi0w4LAk+@mail.gmail.com>
	<AANLkTi=LAKfbuA7eNXsQrFGO5JRn5xqqijWLKJd7XgQk@mail.gmail.com>
Date: Sun, 23 Jan 2011 12:02:37 -0500
Message-ID: <AANLkTi=Q2t09Wc6RLBixErVL_VvaC6zUka6qPKRCPS8c@mail.gmail.com>
Subject: Re: [REINDEX] Note: re-indexing required !
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee32a456fc5049a867362
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee32a456fc5049a867362
Content-Type: text/plain; charset=ISO-8859-1

<<<Does the "3x" refer to the 3.x development branch?>>>
yes


<<<will a future 3.x release require rebuilding indexes>>>
Unknown. The devs are trying mightily to keep this kind of thing out of
the 3_x branch, but this was a fairly nasty bug rather than an
enhancement which made it important enough to put in the 3x branch.

This is NOT the same sort of issue you've seen in messages about
rebuilding trunk indexes, those are enhancements and, I believe,
will never be back-ported to 3x

Best
Erick

On Sun, Jan 23, 2011 at 11:18 AM, Earl Hood <earl@earlhood.com> wrote:

> On Sat, Jan 22, 2011 at 11:14 PM, Shai Erera <serera@gmail.com> wrote:
> > Under LUCENE-2720 the index format of both trunk and 3x has changed. You
> > should re-index any indexes created with either of these code streams.
>
> Does the "3x" refer to the 3.x development branch?
>
> I.e. For those of using the stable 3.x release of Lucene, will
> a future 3.x release require rebuilding indexes?
>
> --ewh
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ee32a456fc5049a867362--

From java-user-return-48513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 23 19:41:04 2011
Return-Path: <java-user-return-48513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13576 invoked from network); 23 Jan 2011 19:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jan 2011 19:41:03 -0000
Received: (qmail 17599 invoked by uid 500); 23 Jan 2011 19:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17525 invoked by uid 500); 23 Jan 2011 19:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17517 invoked by uid 99); 23 Jan 2011 19:41:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 19:41:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jan 2011 19:40:55 +0000
Received: by ywc21 with SMTP id 21so738492ywc.35
        for <java-user@lucene.apache.org>; Sun, 23 Jan 2011 11:40:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.100.154.8 with SMTP id b8mr2256605ane.236.1295811633841; Sun,
 23 Jan 2011 11:40:33 -0800 (PST)
Received: by 10.146.84.15 with HTTP; Sun, 23 Jan 2011 11:40:33 -0800 (PST)
In-Reply-To: <AANLkTi=Q2t09Wc6RLBixErVL_VvaC6zUka6qPKRCPS8c@mail.gmail.com>
References: <AANLkTi=sZJgK5QwLz_s53HzVd+AZfLPa_eHsi0w4LAk+@mail.gmail.com>
	<AANLkTi=LAKfbuA7eNXsQrFGO5JRn5xqqijWLKJd7XgQk@mail.gmail.com>
	<AANLkTi=Q2t09Wc6RLBixErVL_VvaC6zUka6qPKRCPS8c@mail.gmail.com>
Date: Sun, 23 Jan 2011 14:40:33 -0500
Message-ID: <AANLkTi=M-ESO4RT843vN0JNmQYAH-RrXvxyZrnZzL96M@mail.gmail.com>
Subject: Re: [REINDEX] Note: re-indexing required !
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Actually, 3.x indices are fine: on upgrading to 3.1 (once released,
soon), you don't need to reindex.  This was a minor index format
change, but it's fully back compatible to 3.0/2.x indices.

But if you are using trunk, then you must do a clean reindex (discard
old index & build new one).

Also this issue (LUCENE-2720) was not really a nasty bug -- it was
closer to an enhancement: we want to make sure that if you open an
IndexWriter on a too-old index (eg 4.0 opens a 2.9 index) that you
quickly get a clear exception saying so.

This is Lucene's index back-compatibility:

  http://wiki.apache.org/lucene-java/BackwardsCompatibility

Ie, you'll never have to do a full reindex on upgrading to a new
dot-release (eg 3.0 -> 3.1) or to the next major release (eg 3.0 ->
4.0).

It's only if you're using 4.0 (trunk, not yet released) that you must
be prepared to discard your index and rebuild it, since there are no
guarantees on the index format from one night to the next.

Mike

On Sun, Jan 23, 2011 at 12:02 PM, Erick Erickson
<erickerickson@gmail.com> wrote:
> <<<Does the "3x" refer to the 3.x development branch?>>>
> yes
>
>
> <<<will a future 3.x release require rebuilding indexes>>>
> Unknown. The devs are trying mightily to keep this kind of thing out of
> the 3_x branch, but this was a fairly nasty bug rather than an
> enhancement which made it important enough to put in the 3x branch.
>
> This is NOT the same sort of issue you've seen in messages about
> rebuilding trunk indexes, those are enhancements and, I believe,
> will never be back-ported to 3x
>
> Best
> Erick
>
> On Sun, Jan 23, 2011 at 11:18 AM, Earl Hood <earl@earlhood.com> wrote:
>
>> On Sat, Jan 22, 2011 at 11:14 PM, Shai Erera <serera@gmail.com> wrote:
>> > Under LUCENE-2720 the index format of both trunk and 3x has changed. You
>> > should re-index any indexes created with either of these code streams.
>>
>> Does the "3x" refer to the 3.x development branch?
>>
>> I.e. For those of using the stable 3.x release of Lucene, will
>> a future 3.x release require rebuilding indexes?
>>
>> --ewh
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 08:39:40 2011
Return-Path: <java-user-return-48514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21674 invoked from network); 24 Jan 2011 08:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 08:39:40 -0000
Received: (qmail 11756 invoked by uid 500); 24 Jan 2011 08:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11216 invoked by uid 500); 24 Jan 2011 08:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11207 invoked by uid 99); 24 Jan 2011 08:39:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 08:39:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of d.barabash@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 08:39:25 +0000
Received: by qwh6 with SMTP id 6so3793537qwh.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 00:39:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=fqztg2z3LUv/OozUiDJNHQHPCj4hBYn3QmhZABp6pzM=;
        b=AWUw0Ohn0+mz96SEUV7Jj6fcIz5O00+bhG9khaS34WCxUHw1AnDuDf18TdyCVoIpor
         91b+QBy3fKdaniA2X4G6P9JUE9BU6iMw1H9bvZTI+G6C2oRT0N0nQl6CTh3Xi5DlJnml
         6J48pG0nBzFxxepP+apGDHHf4/NkBYOMslWuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=BwLjJqU+3XXpPjQrrn4HVfEDoiRhkpMiCEkF1ZqJrnwU2TzC/7cuktXqftjB0WJAtL
         FCDm0wziEWjAfW994eEhlyn81GrlBkDWGMtvkiTWZXpXPTZYmF7/9pNDj7XsQWb9GtNN
         7s1wFCcrtG9uUmUZDl60dKqJebozK6OmiI1g8=
MIME-Version: 1.0
Received: by 10.229.95.19 with SMTP id b19mr3543483qcn.179.1295858343239; Mon,
 24 Jan 2011 00:39:03 -0800 (PST)
Received: by 10.220.186.4 with HTTP; Mon, 24 Jan 2011 00:39:03 -0800 (PST)
Date: Mon, 24 Jan 2011 10:39:03 +0200
Message-ID: <AANLkTimMSW=O1-ctD5S=+rCCwsUmmB_n0Y_CJJrSivwJ@mail.gmail.com>
Subject: Unusual scoring
From: Dmytro Barabash <d.barabash@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!
My index contains a few (really 7) fields and I need to search by all
of them. I use BooleanQuery and seven TermQueries added to this one.
Problem: result must to be sorted by max(field.boost), not by Lucene=92s
default formula.
I think, for this I need to implement MySimilarity (it will simply
return 1.0 from all methods =96 empty similarity), MyBooleanQuery (and
MyBooleanWeight, and MyBooleanScorer), MyTermQuery (and MyTermWeight,
and MyTermScorer), and at last MyCollector. Collector should be
overridden because at this point possible change default summation to
max().
Maybe I was mistaken and there is more straightforward way to realize
such behavior?
Thanks in advance!
Dmytro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 09:26:59 2011
Return-Path: <java-user-return-48515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41496 invoked from network); 24 Jan 2011 09:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 09:26:59 -0000
Received: (qmail 70270 invoked by uid 500); 24 Jan 2011 09:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69819 invoked by uid 500); 24 Jan 2011 09:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69811 invoked by uid 99); 24 Jan 2011 09:26:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 09:26:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 09:26:44 +0000
Received: by wye20 with SMTP id 20so3998045wye.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 01:26:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=L25QXwaBiq5gLIpnE87KI1wkW1PDfjRw3SppoXQS33o=;
        b=l0DJfA3ZSdFOOwnyqwX4nZeaOGi+ixWoXQk+R+tduRuGoRTafElIsilUqCk8mvil3o
         D9mEsOPFQ69xhNiLZuKGPbsBBdJMJ8LSDwqdddo+HVBtr3xihDCZ5SBOqooD4ptHziP8
         YYM3/A0FAb6EjBTFtkADh2shlFw/x0tagnwrE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MIAAc2HMqUOBBEGhMtd/2lhJabpruz9o/nZiyIP/r+9iG/2W+N5cqExh09ZtMOMQsc
         wBknRc/leG8RUCDDSuH9DguBoPCbv1IOb58SzcmCIO3l28qwEcxkBfw0oGi8F1xJlsKM
         Lk4LEPHh+I9vuvrXrQTD9wxRXCrL/xjnhXzdw=
Received: by 10.216.183.209 with SMTP id q59mr3340207wem.17.1295861184062;
 Mon, 24 Jan 2011 01:26:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.27.10 with HTTP; Mon, 24 Jan 2011 01:26:03 -0800 (PST)
In-Reply-To: <AANLkTimMSW=O1-ctD5S=+rCCwsUmmB_n0Y_CJJrSivwJ@mail.gmail.com>
References: <AANLkTimMSW=O1-ctD5S=+rCCwsUmmB_n0Y_CJJrSivwJ@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Mon, 24 Jan 2011 14:56:03 +0530
Message-ID: <AANLkTinXci8DcqHDN93wSOpp6d+JqCCSB8QS0M_Dvdt9@mail.gmail.com>
Subject: Re: Unusual scoring
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636416f198de4f0049a9431d3
X-Virus-Checked: Checked by ClamAV on apache.org

--001636416f198de4f0049a9431d3
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

 DisjunctionMaxQuery may be one you are looking for.
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Disjunctio=
nMaxQuery.html
   *This is useful when searching for a word in multiple fields with
different boost factors (so that the fields cannot be combined equivalently
into a single search field). We want the primary score to be the one
associated with the highest boost, not the sum of the field scores (as
BooleanQuery would give)*

Thanks & Regards
Umesh

On Mon, Jan 24, 2011 at 2:09 PM, Dmytro Barabash <d.barabash@gmail.com>
wrote:
> Hi!
> My index contains a few (really 7) fields and I need to search by all
> of them. I use BooleanQuery and seven TermQueries added to this one.
> Problem: result must to be sorted by max(field.boost), not by Lucene=92s
> default formula.
> I think, for this I need to implement MySimilarity (it will simply
> return 1.0 from all methods =96 empty similarity), MyBooleanQuery (and
> MyBooleanWeight, and MyBooleanScorer), MyTermQuery (and MyTermWeight,
> and MyTermScorer), and at last MyCollector. Collector should be
> overridden because at this point possible change default summation to
> max().
> Maybe I was mistaken and there is more straightforward way to realize
> such behavior?
> Thanks in advance!
> Dmytro
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
---
Thanks & Regards
Umesh Prasad

--001636416f198de4f0049a9431d3--

From java-user-return-48516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 09:32:27 2011
Return-Path: <java-user-return-48516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42956 invoked from network); 24 Jan 2011 09:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 09:32:27 -0000
Received: (qmail 81992 invoked by uid 500); 24 Jan 2011 09:32:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81773 invoked by uid 500); 24 Jan 2011 09:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81765 invoked by uid 99); 24 Jan 2011 09:32:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 09:32:20 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of d.barabash@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 09:32:14 +0000
Received: by qwh6 with SMTP id 6so3837466qwh.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 01:31:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=ymtjkHkRqSbIYwRAczo/8eLmEx9Z9SI7xAwO7qUUBmA=;
        b=X2xcV50OdnG5jbF56xjHqvAdnMvxs8Oov48is7OZ7fYXP4bRfECsK1YYDHmHvNtpfb
         YHUhiNjh9NJb2/j2fyVUxER8ysFF6pXBAu5PYVaEcmuDuac2u0CmqQZN0VwgyRuu1Vcc
         t+gQEeG3K3HxVNoaPvWRmWt4eESqLFkpVBac4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=twrUjXO+BCN+IuD3QSz0wkWNxl8hg/55xEJ2KCbpD/smhEefm1Ax23uFB5lbYBXr7z
         ZpkCtapSC+oofRb8oyucwfNYVvIuh7vgU+rlXf6SFhPho55n0UcAeuHEgTVu9B1Wdqc1
         0TyoamhHRRzzZYlsAPcNlrkElHrA+EpsbW/Y0=
MIME-Version: 1.0
Received: by 10.229.43.74 with SMTP id v10mr3598099qce.293.1295861513056; Mon,
 24 Jan 2011 01:31:53 -0800 (PST)
Received: by 10.220.186.4 with HTTP; Mon, 24 Jan 2011 01:31:53 -0800 (PST)
In-Reply-To: <AANLkTinXci8DcqHDN93wSOpp6d+JqCCSB8QS0M_Dvdt9@mail.gmail.com>
References: <AANLkTimMSW=O1-ctD5S=+rCCwsUmmB_n0Y_CJJrSivwJ@mail.gmail.com>
	<AANLkTinXci8DcqHDN93wSOpp6d+JqCCSB8QS0M_Dvdt9@mail.gmail.com>
Date: Mon, 24 Jan 2011 11:31:53 +0200
Message-ID: <AANLkTinNaZWdvOjne5uK4GUh-sHsGOrS66xbpXpJZq2e@mail.gmail.com>
Subject: Re: Unusual scoring
From: Dmytro Barabash <d.barabash@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks a lot, Umesh!

2011/1/24 Umesh Prasad <umesh.iitk@gmail.com>:
> =A0DisjunctionMaxQuery may be one you are looking for.
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Disjunct=
ionMaxQuery.html
> =A0 *This is useful when searching for a word in multiple fields with
> different boost factors (so that the fields cannot be combined equivalent=
ly
> into a single search field). We want the primary score to be the one
> associated with the highest boost, not the sum of the field scores (as
> BooleanQuery would give)*
>
> Thanks & Regards
> Umesh
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 13:34:22 2011
Return-Path: <java-user-return-48517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58614 invoked from network); 24 Jan 2011 13:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 13:34:21 -0000
Received: (qmail 7803 invoked by uid 500); 24 Jan 2011 13:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7463 invoked by uid 500); 24 Jan 2011 13:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 63656 invoked by uid 99); 24 Jan 2011 13:04:02 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.169 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=c/tsiw62QnX8QkTRf5UAWlgxOO0QhSRFRRS829SBwpI=;
        b=pFOQSX5zpDnjGIKLiU9aVsSk4rwx+gSfLclvdhZvkBT4uVuNmAPe89ngsUpt085TCg
         l4h32vyOniZLtYO3VgW4ySVAda0+kSTiRuVCCwlGMxx7bR6GeotYWbfDUQaQduFWiC4+
         6cgAnRwJ/5iuLxJs4YuL98e+0BcQ43sOxpz0w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=bEXyW/EDxiIUP1zljrZIFwSeO2d4/3qxxmPIPHFG474LWu1s87hUiH5vcXkpdrPSM8
         oUF6OvnmvGmEMuY+jBlh2lqFMJxNgfxW2DELm9vn9xigb/q/U1dbtcG4u2ZmMm9W0+O5
         U7WPfNwnIrqyidAlFMh8U/Jfd4ykFhTGVYBi8=
MIME-Version: 1.0
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Mon, 24 Jan 2011 14:03:14 +0100
Message-ID: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
Subject: Preserving original HTML file offsets for highlighting
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee32a37a1e1049a973a5b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee32a37a1e1049a973a5b
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I'm new to Lucene and have a question about indexing/highlighting of HTML
files with Lucene.

What I need to do is highlight the hits (terms) in the original HTML file
(or get the positions of the terms/tokens in the original file).
This problem has already been described by Fred Toth in this thread in 2005
(Preserving original HTML file offsets for highlighting, need
HTMLTokenizer?):

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3C6.2.1.2.2.20050530134630.063ae978@fast.synernet.com%3E

I've searched the mailing list archives hoping for an answer, but I had no
luck.

Does anyone have an idea, if there is a solution for this problem? Also if
you know, that it's not possible with Lucene to highlight the hits in the
original html-file, it would be helpful to know (I could stop looking for
it...).

Many thanks in advance!
Karo

P.S. Actually I wanted to answer the original thred/question from 2005 - is
there a way to do this? How can I post an answer to an old thread/mail from
the mailing list?

--0016364ee32a37a1e1049a973a5b--

From java-user-return-48518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 13:47:51 2011
Return-Path: <java-user-return-48518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62643 invoked from network); 24 Jan 2011 13:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 13:47:51 -0000
Received: (qmail 32557 invoked by uid 500); 24 Jan 2011 13:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32129 invoked by uid 500); 24 Jan 2011 13:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32121 invoked by uid 99); 24 Jan 2011 13:47:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 13:47:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 13:47:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2225D45EB5D
	for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 14:47:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nsXN0Y12MEcP for <java-user@lucene.apache.org>;
	Mon, 24 Jan 2011 14:47:12 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EFFCA45EB99
	for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 14:47:11 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
In-Reply-To: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
Subject: RE: Preserving original HTML file offsets for highlighting
Date: Mon, 24 Jan 2011 14:47:26 +0100
Message-ID: <001001cbbbcd$3ca75480$b5f5fd80$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQH0lgyl2jJVUMnybJK97XKrpv9dApOObdzA
Content-Language: de

You can use HTMLStripCharFilter that is plugged into the chain before the
Tokenizer. This one strips all HTML but preserves the Token positions, so
you can later highlight using those positions.

This filter is currently only released through Apache Solr, but in Lucene
4.0 its part of the analysis module.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Karolina Bernat [mailto:karolina.bernat@googlemail.com]
> Sent: Monday, January 24, 2011 2:03 PM
> To: java-user@lucene.apache.org
> Subject: Preserving original HTML file offsets for highlighting
> 
> Hi all,
> 
> I'm new to Lucene and have a question about indexing/highlighting of HTML
> files with Lucene.
> 
> What I need to do is highlight the hits (terms) in the original HTML file
(or get
> the positions of the terms/tokens in the original file).
> This problem has already been described by Fred Toth in this thread in
2005
> (Preserving original HTML file offsets for highlighting, need
> HTMLTokenizer?):
> 
> http://mail-archives.apache.org/mod_mbox/lucene-java-
> user/200505.mbox/%3C6.2.1.2.2.20050530134630.063ae978@fast.synernet.c
> om%3E
> 
> I've searched the mailing list archives hoping for an answer, but I had no
luck.
> 
> Does anyone have an idea, if there is a solution for this problem? Also if
you
> know, that it's not possible with Lucene to highlight the hits in the
original
> html-file, it would be helpful to know (I could stop looking for it...).
> 
> Many thanks in advance!
> Karo
> 
> P.S. Actually I wanted to answer the original thred/question from 2005 -
is
> there a way to do this? How can I post an answer to an old thread/mail
from
> the mailing list?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 17:15:17 2011
Return-Path: <java-user-return-48519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74040 invoked from network); 24 Jan 2011 17:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 17:15:17 -0000
Received: (qmail 11187 invoked by uid 500); 24 Jan 2011 17:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9497 invoked by uid 500); 24 Jan 2011 17:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9473 invoked by uid 99); 24 Jan 2011 17:15:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 17:15:07 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 17:14:59 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 1204F20556;
	Mon, 24 Jan 2011 12:14:39 -0500 (EST)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Mon, 24 Jan 2011 12:14:39 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=XDa6O//AQgOae9Nv0MfG5kDX9IA=; b=sJADunHFcxNpRw7udKC+zKW+yC9m1IkfMqORzF+AfKmZMNTkc3MOTFk4jWMA0FDLgCv6V/MsUdDREMEzFXEJIQFo9Yt+KJAgDGIIYPmCNKTYbu/ztafN5xiVPezk/W+gNcqrmc34sTCiVPq/uf8j2xtWoEpa/WutC/fB72j73O0=
X-Sasl-enc: KjJg7bJgO+FrIc+5nEVbOLB99VpE8yg3PF7ukTSdreA5 1295889278
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 51AC34403B2;
	Mon, 24 Jan 2011 12:14:38 -0500 (EST)
Message-ID: <4D3DB37E.90700@fastmail.fm>
Date: Mon, 24 Jan 2011 17:14:38 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Koji Sekiguchi <koji@r.email.ne.jp>
Subject: Re: Trying to extend MappingCharFilter so that it only changes a
 token if the length of the token matches the length of singleMatch
References: <4D383669.1090003@fastmail.fm> <4D3AFB2D.5070505@r.email.ne.jp>
In-Reply-To: <4D3AFB2D.5070505@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 22/01/2011 15:43, Koji Sekiguchi wrote:
> (11/01/20 22:19), Paul Taylor wrote:
>> Trying to extend MappingCharFilter so that it only changes a token if 
>> the length of the token
>> matches the length of singleMatch in NormalizeCharMap (currently the 
>> singleMatch just has to be
>> found in the token I want ut to match the whole token). Can this be 
>> done it sounds simple enough but
>> I cannot make any headway understanding the MappingCharFilter source 
>> code
>>
>> thanks Paul
>
> Paul,
>
> Can you give us a concrete input/output (you wanted) with mapping table
> so that I can understand what you want?
>
> Thanks,
>
> Koji
Sure

charConvertMap.add("!!!","ApostropheApostropheApostrophe");
charConvertMap.add("*** ***","StarStarStar");
charConvertMap.add("!","Apostrophe");

Normally, punctuation gets removed during index and searching which is 
what I want for good search results but when the token only contains 
specific punctuation strings I don't want to remove the punctuation 
because it would make it impossible to match, so I convert it to a 
textual representation.

As it stands in the 3rd case '!' will be preserved wherever it is found, 
so to get a good match on 'Wow!' you would have to search for 'Wow!. But 
I want you to be able to search for 'Wow' and it return 'Wow!' which is 
the case if "!" isn't in the char convert map, but if you searched for 
'!'  I want it to  return the token which is just '!' which is only the 
case if the value is added to the map.

I need to do this because the text we are indexing and searching are 
short strings representing an music artist name (there is an artist 
called !!!)

thanks Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 21:02:53 2011
Return-Path: <java-user-return-48520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84482 invoked from network); 24 Jan 2011 21:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 21:02:53 -0000
Received: (qmail 12678 invoked by uid 500); 24 Jan 2011 21:02:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12606 invoked by uid 500); 24 Jan 2011 21:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12597 invoked by uid 99); 24 Jan 2011 21:02:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 21:02:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 21:02:41 +0000
Received: by pzk28 with SMTP id 28so926734pzk.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 13:02:21 -0800 (PST)
Received: by 10.142.51.6 with SMTP id y6mr4416826wfy.71.1295902941659;
        Mon, 24 Jan 2011 13:02:21 -0800 (PST)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id b11sm17899905wff.9.2011.01.24.13.02.20
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 Jan 2011 13:02:20 -0800 (PST)
From: Chris Schilling <chris@cellixis.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Indexing with weights
Date: Mon, 24 Jan 2011 13:02:17 -0800
Message-Id: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)

Hello,

I have a bunch of text documents formatted like so:

keyword1 wt1
keyword2 wt2
keyword3 wt3

I would like to index the documents based on the keywords.  When I =
retrieve (search) for a keyword, I would like the list of documents to =
be sorted by the weight for that keyword.   Is there an example anywhere =
of how to do this.  I own LIA, but have not made it through the entire =
book yet.  Apologies if this is addressed.

Thank you!
Chris S.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 21:17:26 2011
Return-Path: <java-user-return-48521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 391 invoked from network); 24 Jan 2011 21:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 21:17:26 -0000
Received: (qmail 77387 invoked by uid 500); 24 Jan 2011 21:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77339 invoked by uid 500); 24 Jan 2011 21:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77328 invoked by uid 99); 24 Jan 2011 21:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 21:17:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 21:17:18 +0000
Received: by qyk10 with SMTP id 10so4528550qyk.14
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 13:16:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=d8Znyv0GEImERPgwsKk5U5hV0eUpmgPX1HAQCiRFKdU=;
        b=YrVUrPw5p/lK7X/x7kYrV60ieOqowv+CoFmpMACV0e54MJ5UYayWMzkXHhUGsvqjk5
         DRs76AG8U181vJvwiXETkw1WB3uj3e6wJFsHZa0NZGTGzdCi4hTZ3AOvBS6z0DINxzl9
         OUCMFQ5TMGrmqeAnzqR/D0Zk4YI2yLXgqYPZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=njP39+Y7lDBN/P21vM9Dx5dh8B3m7cmhgAag1D0Vfhlc8p3sDBdp1+3Z/g2vrdxAOe
         YrHZ3epXnJXwYIR6XK0/npfKQ3yh2HifAKno1m559Hyx6RcT5LfBhZKBeqbQ5zSLbJBA
         ETufqxO8aeB+wcIME8ug6wCUOc1McsFw93k5s=
MIME-Version: 1.0
Received: by 10.229.95.81 with SMTP id c17mr4221429qcn.99.1295903814823; Mon,
 24 Jan 2011 13:16:54 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Mon, 24 Jan 2011 13:16:54 -0800 (PST)
In-Reply-To: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com>
References: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com>
Date: Mon, 24 Jan 2011 16:16:54 -0500
Message-ID: <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
Subject: Re: Indexing with weights
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364274b48bb0f7049a9e1e71

--0016364274b48bb0f7049a9e1e71
Content-Type: text/plain; charset=ISO-8859-1

I think all you need to do is index the keywords in one field and weights in
another.
Then just search on keywords and sort on weight.

Note: the field you sort on should NOT be tokenized.

Best
Erick

On Mon, Jan 24, 2011 at 4:02 PM, Chris Schilling <chris@cellixis.com> wrote:

> Hello,
>
> I have a bunch of text documents formatted like so:
>
> keyword1 wt1
> keyword2 wt2
> keyword3 wt3
>
> I would like to index the documents based on the keywords.  When I retrieve
> (search) for a keyword, I would like the list of documents to be sorted by
> the weight for that keyword.   Is there an example anywhere of how to do
> this.  I own LIA, but have not made it through the entire book yet.
>  Apologies if this is addressed.
>
> Thank you!
> Chris S.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364274b48bb0f7049a9e1e71--

From java-user-return-48522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 22:05:37 2011
Return-Path: <java-user-return-48522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27679 invoked from network); 24 Jan 2011 22:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 22:05:37 -0000
Received: (qmail 76420 invoked by uid 500); 24 Jan 2011 22:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76330 invoked by uid 500); 24 Jan 2011 22:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76322 invoked by uid 99); 24 Jan 2011 22:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:05:34 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrewrkane@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:05:27 +0000
Received: by wye20 with SMTP id 20so4731167wye.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 14:05:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=c1FNejhRDKSZIO83aYBvTGoxfBqogQ4hy+oGoogRlIo=;
        b=DctouKlBYSl+LdYi6bDxpUI7vjQStSppsMeKhEpqVdcUkZLY/BGF1UukQj1ukr2uyi
         mCRNO0KpFNVFRtXEDijsix+dPbwmhLGNwCy/N0MKuJFC3vYAxXxB5mTG0exAC4m4YxzZ
         uu/0Z1pA/rHmQ0U48QaI/7tOzAzjHeIY42Lmo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hGKMh3NV5cDgcWA3+CnPamikwc5uu4Z8pwz63ZsSzPfQ6mTS/m4F4RaAZDjyu3WAWF
         hQtTKxz3Ze39nYytXk4ckTgSmYzjuOshhZN0Om6WpbfDfpSRUgpX1gOPQQNJRDiFnU+q
         42YDu3cG8471ccY2gGdimaxW2emDkRtk9C1AM=
MIME-Version: 1.0
Received: by 10.216.163.69 with SMTP id z47mr4308801wek.43.1295906706604; Mon,
 24 Jan 2011 14:05:06 -0800 (PST)
Received: by 10.216.65.129 with HTTP; Mon, 24 Jan 2011 14:05:06 -0800 (PST)
Date: Mon, 24 Jan 2011 17:05:06 -0500
Message-ID: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
Subject: Query parse errors for dashes in Lucene (3.0.3)
From: Andrew Kane <andrewrkane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636416343e8c455049a9eca7f

--001636416343e8c455049a9eca7f
Content-Type: text/plain; charset=ISO-8859-1

Shouldn't these two queries be fine?  (from TREC million query track).
 Should this be entered as a bug?

Thanks,

Andrew.



Cannot parse 'statistics on child labor laws 1930 -': Encountered "<EOF>" at
line 1, column 37.
Was expecting one of:
    "(" ...
    "*" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    <TERM> ...
    "*" ...

Cannot parse 'u.s. census bureau local employment dynamics --': Encountered
" "-" "- "" at line 1, column 46.
Was expecting one of:
    "(" ...
    "*" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    <TERM> ...
    "*" ...

--001636416343e8c455049a9eca7f--

From java-user-return-48523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 22:16:00 2011
Return-Path: <java-user-return-48523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39028 invoked from network); 24 Jan 2011 22:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 22:16:00 -0000
Received: (qmail 99435 invoked by uid 500); 24 Jan 2011 22:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99386 invoked by uid 500); 24 Jan 2011 22:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99378 invoked by uid 99); 24 Jan 2011 22:15:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:15:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:15:49 +0000
Received: by wye20 with SMTP id 20so4740527wye.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 14:15:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=PKQ8B+44++bVg0lPFOx5cvJas6+6foEEJtCE0jwnbLI=;
        b=Wj/Fildm3mVR50wLqOL7H3UrgLM9ctFubsaMeDdEMry1sgSswUgiNKmA1Vc2lSedUN
         knD9XI/RZjfrPxnt0PpoWMT/HyMcjC7x02eqPaxJylHRCJi33d0v/n9MEQUB82lZDYUr
         A5lI1KcqoJvOErXPvo5qI7uR3ujngSG1NupeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qFJvd8AvrDGNZYi1f0P4bQi9U4TxN+1Js0GJN6OY6BlQ2sPfrWrfPjNIMYH43ewtAK
         vkTlEqEEKwLjBb/njR23zDI2gb9XAFi8ffTQuEojb5M2ysJzyKr5EuDRSDjDizYqp21w
         sC1yfozBcmdk9SlBLEt45So3J9OoL7eLJdLkg=
Received: by 10.216.156.149 with SMTP id m21mr3010535wek.22.1295907328927;
 Mon, 24 Jan 2011 14:15:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.244.206 with HTTP; Mon, 24 Jan 2011 14:15:08 -0800 (PST)
In-Reply-To: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
References: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Mon, 24 Jan 2011 17:15:08 -0500
Message-ID: <AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
Subject: Re: Query parse errors for dashes in Lucene (3.0.3)
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f4541800cf13049a9ef0de
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f4541800cf13049a9ef0de
Content-Type: text/plain; charset=ISO-8859-1

It's valid syntax error, since - is the exclusion operator, so the QP
expects a term, phrase, parenthesis, etc after that.

On Mon, Jan 24, 2011 at 5:05 PM, Andrew Kane <andrewrkane@gmail.com> wrote:

> Shouldn't these two queries be fine?  (from TREC million query track).
>  Should this be entered as a bug?
>
> Thanks,
>
> Andrew.
>
>
>
> Cannot parse 'statistics on child labor laws 1930 -': Encountered "<EOF>"
> at
> line 1, column 37.
> Was expecting one of:
>    "(" ...
>    "*" ...
>    <QUOTED> ...
>    <TERM> ...
>    <PREFIXTERM> ...
>    <WILDTERM> ...
>    "[" ...
>    "{" ...
>    <NUMBER> ...
>    <TERM> ...
>    "*" ...
>
> Cannot parse 'u.s. census bureau local employment dynamics --': Encountered
> " "-" "- "" at line 1, column 46.
> Was expecting one of:
>    "(" ...
>    "*" ...
>    <QUOTED> ...
>    <TERM> ...
>    <PREFIXTERM> ...
>    <WILDTERM> ...
>    "[" ...
>    "{" ...
>    <NUMBER> ...
>    <TERM> ...
>    "*" ...
>

--001485f4541800cf13049a9ef0de--

From java-user-return-48524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 22:41:41 2011
Return-Path: <java-user-return-48524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97685 invoked from network); 24 Jan 2011 22:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 22:41:40 -0000
Received: (qmail 37796 invoked by uid 500); 24 Jan 2011 22:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37744 invoked by uid 500); 24 Jan 2011 22:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37735 invoked by uid 99); 24 Jan 2011 22:41:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:41:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 22:41:31 +0000
Received: by vws18 with SMTP id 18so2033048vws.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 14:41:09 -0800 (PST)
Received: by 10.220.192.202 with SMTP id dr10mr1362262vcb.67.1295908868057;
        Mon, 24 Jan 2011 14:41:08 -0800 (PST)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id o6sm4332703vcr.3.2011.01.24.14.41.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 Jan 2011 14:41:07 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Indexing with weights
From: Chris Schilling <chris@cellixis.com>
In-Reply-To: <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
Date: Mon, 24 Jan 2011 14:41:05 -0800
Content-Transfer-Encoding: quoted-printable
Message-Id: <A8399F8E-0B64-442A-8883-F7792E84EB38@cellixis.com>
References: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com> <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)

Thanks Erick,

So something like:

while(parseFile) {
	String keyword =3D ...;
	String score =3D ...;
	doc.add(new Field("keywords", keyword, Field.Store.NO, =
Field.Index.ANALYZED));
	doc.add(new Field("scores", score, Field.Store.YES, =
Field.Index.NOT_ANALYZED));
}

How would I then retrieve the score associated with the keyword I =
searched for?



On Jan 24, 2011, at 1:16 PM, Erick Erickson wrote:

> I think all you need to do is index the keywords in one field and =
weights in
> another.
> Then just search on keywords and sort on weight.
>=20
> Note: the field you sort on should NOT be tokenized.
>=20
> Best
> Erick
>=20
> On Mon, Jan 24, 2011 at 4:02 PM, Chris Schilling <chris@cellixis.com> =
wrote:
>=20
>> Hello,
>>=20
>> I have a bunch of text documents formatted like so:
>>=20
>> keyword1 wt1
>> keyword2 wt2
>> keyword3 wt3
>>=20
>> I would like to index the documents based on the keywords.  When I =
retrieve
>> (search) for a keyword, I would like the list of documents to be =
sorted by
>> the weight for that keyword.   Is there an example anywhere of how to =
do
>> this.  I own LIA, but have not made it through the entire book yet.
>> Apologies if this is addressed.
>>=20
>> Thank you!
>> Chris S.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 24 23:13:00 2011
Return-Path: <java-user-return-48525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18565 invoked from network); 24 Jan 2011 23:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jan 2011 23:13:00 -0000
Received: (qmail 79364 invoked by uid 500); 24 Jan 2011 23:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78973 invoked by uid 500); 24 Jan 2011 23:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78964 invoked by uid 99); 24 Jan 2011 23:12:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 23:12:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jan 2011 23:12:50 +0000
Received: by qwh6 with SMTP id 6so4652022qwh.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 15:12:29 -0800 (PST)
Received: by 10.224.53.213 with SMTP id n21mr4609085qag.399.1295910747764;
        Mon, 24 Jan 2011 15:12:27 -0800 (PST)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id w12sm8631008qco.8.2011.01.24.15.12.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 24 Jan 2011 15:12:27 -0800 (PST)
From: Chris Schilling <chris@cellixis.com>
Mime-Version: 1.0 (Apple Message framework v1082)
Content-Type: multipart/alternative; boundary=Apple-Mail-4--224034422
Subject: Re: Indexing with weights
Date: Mon, 24 Jan 2011 15:12:25 -0800
In-Reply-To: <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
To: java-user@lucene.apache.org
References: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com> <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
Message-Id: <F5CEDF67-58EB-4ADA-B232-5627F7161BA3@cellixis.com>
X-Mailer: Apple Mail (2.1082)

--Apple-Mail-4--224034422
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Well, maybe this trick is better?

while(parseFile) {
	String keyword =3D ...;
	String score =3D ...;
	doc.add(new Field("keywords", keyword, Field.Store.NO, =
Field.Index.ANALYZED));
	doc.add(new NumericField(keyword).setAsDouble(score));
}

Then, I guess I can sort based on the value of the field corresponding =
to the keyword that I search for. =20

Ill run with this for now to see if it works.

Thanks
C

On Jan 24, 2011, at 1:16 PM, Erick Erickson wrote:

> I think all you need to do is index the keywords in one field and =
weights in
> another.
> Then just search on keywords and sort on weight.
>=20
> Note: the field you sort on should NOT be tokenized.
>=20
> Best
> Erick
>=20
> On Mon, Jan 24, 2011 at 4:02 PM, Chris Schilling <chris@cellixis.com> =
wrote:
>=20
>> Hello,
>>=20
>> I have a bunch of text documents formatted like so:
>>=20
>> keyword1 wt1
>> keyword2 wt2
>> keyword3 wt3
>>=20
>> I would like to index the documents based on the keywords.  When I =
retrieve
>> (search) for a keyword, I would like the list of documents to be =
sorted by
>> the weight for that keyword.   Is there an example anywhere of how to =
do
>> this.  I own LIA, but have not made it through the entire book yet.
>> Apologies if this is addressed.
>>=20
>> Thank you!
>> Chris S.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


--Apple-Mail-4--224034422--

From java-user-return-48526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 01:41:01 2011
Return-Path: <java-user-return-48526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93474 invoked from network); 25 Jan 2011 01:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 01:41:01 -0000
Received: (qmail 34617 invoked by uid 500); 25 Jan 2011 01:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34558 invoked by uid 500); 25 Jan 2011 01:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34550 invoked by uid 99); 25 Jan 2011 01:40:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 01:40:58 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrewrkane@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 01:40:50 +0000
Received: by eyz10 with SMTP id 10so2244808eyz.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 17:40:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=jJSGT+qe/eLx8umayyLxf8+T+e+v5BAKSbevj2HFDBs=;
        b=qaYcCnyYbKW4Ilm3D17hCSjfpRvQ6xVthmRcRx5pyIL59rEbYt9dESRTiuM0By4Wl5
         tNmA3DXeWgpkJRlMGANiQKIdQDnflC7Jf4WLPW3Sre+Udissd+kyrKsasApqr8RQI1fl
         pN7KRBAu2z/pz6ATpyOdXmIVQltI7hdoSyuOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jltinxWdUH7HiiDz5sbbc87oWsNLQ50jP73QUz7u9GlBfsT2XW3YVflxWD4YDGD8we
         oDCw8462AIvf0sEuNNWBoueNP13u3AnByVYhdV4+M0JVRpVSovzAiWV2jLk+qmuY7LWy
         eImx0qwTUYFmm2cDN/PsJeJUmeo/MtwDHFilQ=
MIME-Version: 1.0
Received: by 10.216.87.130 with SMTP id y2mr3108194wee.58.1295919629700; Mon,
 24 Jan 2011 17:40:29 -0800 (PST)
Received: by 10.216.65.129 with HTTP; Mon, 24 Jan 2011 17:40:29 -0800 (PST)
In-Reply-To: <AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
References: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
	<AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
Date: Mon, 24 Jan 2011 20:40:29 -0500
Message-ID: <AANLkTin4S6qHeMtJDueJ+5uSGdFi518b6UH_ZMtt9wkm@mail.gmail.com>
Subject: Re: Query parse errors for dashes in Lucene (3.0.3)
From: Andrew Kane <andrewrkane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6da2eb62f8edf049aa1cd1f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6da2eb62f8edf049aa1cd1f
Content-Type: text/plain; charset=ISO-8859-1

What are you talking about?!  A search engine isn't a compiler with a
programmer for a user and a strict syntax.  The job of a search engine is to
produce the best results it can *for any given input*.  Am I missing
something here?

Andrew.


On Mon, Jan 24, 2011 at 5:15 PM, Adriano Crestani <adrianocrestani@gmail.com
> wrote:

> It's valid syntax error, since - is the exclusion operator, so the QP
> expects a term, phrase, parenthesis, etc after that.
>
> On Mon, Jan 24, 2011 at 5:05 PM, Andrew Kane <andrewrkane@gmail.com>
> wrote:
>
> > Shouldn't these two queries be fine?  (from TREC million query track).
> >  Should this be entered as a bug?
> >
> > Thanks,
> >
> > Andrew.
> >
> >
> >
> > Cannot parse 'statistics on child labor laws 1930 -': Encountered "<EOF>"
> > at
> > line 1, column 37.
> > Was expecting one of:
> >    "(" ...
> >    "*" ...
> >    <QUOTED> ...
> >    <TERM> ...
> >    <PREFIXTERM> ...
> >    <WILDTERM> ...
> >    "[" ...
> >    "{" ...
> >    <NUMBER> ...
> >    <TERM> ...
> >    "*" ...
> >
> > Cannot parse 'u.s. census bureau local employment dynamics --':
> Encountered
> > " "-" "- "" at line 1, column 46.
> > Was expecting one of:
> >    "(" ...
> >    "*" ...
> >    <QUOTED> ...
> >    <TERM> ...
> >    <PREFIXTERM> ...
> >    <WILDTERM> ...
> >    "[" ...
> >    "{" ...
> >    <NUMBER> ...
> >    <TERM> ...
> >    "*" ...
> >
>

--0016e6da2eb62f8edf049aa1cd1f--

From java-user-return-48527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 01:52:30 2011
Return-Path: <java-user-return-48527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96068 invoked from network); 25 Jan 2011 01:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 01:52:30 -0000
Received: (qmail 49674 invoked by uid 500); 25 Jan 2011 01:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49620 invoked by uid 500); 25 Jan 2011 01:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49612 invoked by uid 99); 25 Jan 2011 01:52:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 01:52:26 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 01:52:20 +0000
Received: by qwh6 with SMTP id 6so4755682qwh.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 17:51:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=7xyenpSyg5I9YNwajj7MkIkietcpoAVGEIt62riMp7A=;
        b=rRo7+IqsVEZADEi05RGh/nS4HsiEYxSd7WxZ9vB6Dx0DwhhQxUhT7oY1csp/fJQbE/
         A411ljp9GhvpvkcLUqGIJtwhzhhuzsWzKi6Ot3m3GKb4aw6DrciVJRCUV+AhdBuG2NYh
         VzrsaNZi3+b/pGIB4suATVR2VOpHWPnZ+lVZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HXO1AjghwzNAnTYyHxp6ZCYgiUiqm2KEZijA9E1MrydbGV/+lPReEue9j+CrIm/MnR
         ZNIjMN/zErWCovHhuHSg08qv1jIxQXJnl5zhI6GOAPb09Xym1SEUG0hHhPze5zwvD7cT
         jfAj9TZsqPLhiQPcstXCKhrPVvtod13bAgIrs=
MIME-Version: 1.0
Received: by 10.224.45.142 with SMTP id e14mr4724145qaf.242.1295920319509;
 Mon, 24 Jan 2011 17:51:59 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Mon, 24 Jan 2011 17:51:59 -0800 (PST)
In-Reply-To: <AANLkTin4S6qHeMtJDueJ+5uSGdFi518b6UH_ZMtt9wkm@mail.gmail.com>
References: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
	<AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
	<AANLkTin4S6qHeMtJDueJ+5uSGdFi518b6UH_ZMtt9wkm@mail.gmail.com>
Date: Mon, 24 Jan 2011 20:51:59 -0500
Message-ID: <AANLkTinVJWPgDoCoZnv161Te6ADOUAc9zCYddN95KYdk@mail.gmail.com>
Subject: Re: Query parse errors for dashes in Lucene (3.0.3)
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cddda4d3694049aa1f62e

--0015175cddda4d3694049aa1f62e
Content-Type: text/plain; charset=ISO-8859-1

Yes. You're confusing an *engine* with a full-blown application.

The user here is a Java programmer. I argue that guessing, which
is what you're asking for, is emphatically NOT in the domain of the
search *engine*, which is what Lucene is. Imagine the poor programmer
trying to understand why certain results were returned when the
engine changed the query while attempting to guess. Chaos.

Dealing with bad user input is the application's responsibility. You're
perfectly
free to try to figure out what "the right thing to do" is, given your search
domain, when you catch a parsing error. And I flat guarantee you'll be wrong
for some percentage of cases.

Which is why the engine is doing what it's doing, IMO...

Best
Erick

On Mon, Jan 24, 2011 at 8:40 PM, Andrew Kane <andrewrkane@gmail.com> wrote:

> What are you talking about?!  A search engine isn't a compiler with a
> programmer for a user and a strict syntax.  The job of a search engine is
> to
> produce the best results it can *for any given input*.  Am I missing
> something here?
>
> Andrew.
>
>
> On Mon, Jan 24, 2011 at 5:15 PM, Adriano Crestani <
> adrianocrestani@gmail.com
> > wrote:
>
> > It's valid syntax error, since - is the exclusion operator, so the QP
> > expects a term, phrase, parenthesis, etc after that.
> >
> > On Mon, Jan 24, 2011 at 5:05 PM, Andrew Kane <andrewrkane@gmail.com>
> > wrote:
> >
> > > Shouldn't these two queries be fine?  (from TREC million query track).
> > >  Should this be entered as a bug?
> > >
> > > Thanks,
> > >
> > > Andrew.
> > >
> > >
> > >
> > > Cannot parse 'statistics on child labor laws 1930 -': Encountered
> "<EOF>"
> > > at
> > > line 1, column 37.
> > > Was expecting one of:
> > >    "(" ...
> > >    "*" ...
> > >    <QUOTED> ...
> > >    <TERM> ...
> > >    <PREFIXTERM> ...
> > >    <WILDTERM> ...
> > >    "[" ...
> > >    "{" ...
> > >    <NUMBER> ...
> > >    <TERM> ...
> > >    "*" ...
> > >
> > > Cannot parse 'u.s. census bureau local employment dynamics --':
> > Encountered
> > > " "-" "- "" at line 1, column 46.
> > > Was expecting one of:
> > >    "(" ...
> > >    "*" ...
> > >    <QUOTED> ...
> > >    <TERM> ...
> > >    <PREFIXTERM> ...
> > >    <WILDTERM> ...
> > >    "[" ...
> > >    "{" ...
> > >    <NUMBER> ...
> > >    <TERM> ...
> > >    "*" ...
> > >
> >
>

--0015175cddda4d3694049aa1f62e--

From java-user-return-48528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 02:04:10 2011
Return-Path: <java-user-return-48528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98912 invoked from network); 25 Jan 2011 02:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 02:04:09 -0000
Received: (qmail 60577 invoked by uid 500); 25 Jan 2011 02:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60359 invoked by uid 500); 25 Jan 2011 02:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60350 invoked by uid 99); 25 Jan 2011 02:04:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 02:04:04 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrewrkane@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 02:03:58 +0000
Received: by eyz10 with SMTP id 10so2252813eyz.35
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 18:03:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=G/NhKcphtYKZPQj8Yjif/jQd/w0EhnTtZJjvwCXn0aE=;
        b=ahwGPbU+4tji3l+5pbLm+LgA8tCagdITcIkaNRfK14xvfYa5ydP7NC2yIWNFxdmxGn
         b4Epi9OG6tN8xu01ssK0kwkKpn4Bzb6NAYlZ1PnYuXVn8fvG0LJf7VcUa9v8o5US+T1p
         nLRAOx3xT4/pQnK7tp7kpQlnSmEnMKxm0LJVg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NA+oQUu4XZI4+P9h2CIn/S3HN2wohQFmLO6VU5EKYZm8WNZw7/f7RSrSrNtekt7h6M
         YF4AK51zquedRU2blgmzQs02yCQnrfptHXZMMvk+zOEyzE0AzfrCkRHY18ATyQfb7GYk
         LS3DytjIaIDyXziyXPDwq4UX87+XWqNzYzz5k=
MIME-Version: 1.0
Received: by 10.216.181.76 with SMTP id k54mr3146690wem.58.1295921016852; Mon,
 24 Jan 2011 18:03:36 -0800 (PST)
Received: by 10.216.65.129 with HTTP; Mon, 24 Jan 2011 18:03:36 -0800 (PST)
In-Reply-To: <AANLkTinVJWPgDoCoZnv161Te6ADOUAc9zCYddN95KYdk@mail.gmail.com>
References: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
	<AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
	<AANLkTin4S6qHeMtJDueJ+5uSGdFi518b6UH_ZMtt9wkm@mail.gmail.com>
	<AANLkTinVJWPgDoCoZnv161Te6ADOUAc9zCYddN95KYdk@mail.gmail.com>
Date: Mon, 24 Jan 2011 21:03:36 -0500
Message-ID: <AANLkTimkBwJwqKv0fQHvdm-8595rXcshTUhyTZiBzj_c@mail.gmail.com>
Subject: Re: Query parse errors for dashes in Lucene (3.0.3)
From: Andrew Kane <andrewrkane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363ba5abddcf43049aa21f28

--0016363ba5abddcf43049aa21f28
Content-Type: text/plain; charset=ISO-8859-1

Wow, passing the buck doesn't really work for me.  If you think Lucene is a
*database* that's fine, but in your demo code (or wherever) you should have
a translation routine to convert user input into *SQL/whatever language
you're using* and solve 95% of the use cases.  Does such a translation
routine exist?

Andrew.


On Mon, Jan 24, 2011 at 8:51 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Yes. You're confusing an *engine* with a full-blown application.
>
> The user here is a Java programmer. I argue that guessing, which
> is what you're asking for, is emphatically NOT in the domain of the
> search *engine*, which is what Lucene is. Imagine the poor programmer
> trying to understand why certain results were returned when the
> engine changed the query while attempting to guess. Chaos.
>
> Dealing with bad user input is the application's responsibility. You're
> perfectly
> free to try to figure out what "the right thing to do" is, given your
> search
> domain, when you catch a parsing error. And I flat guarantee you'll be
> wrong
> for some percentage of cases.
>
> Which is why the engine is doing what it's doing, IMO...
>
> Best
> Erick
>
> On Mon, Jan 24, 2011 at 8:40 PM, Andrew Kane <andrewrkane@gmail.com>
> wrote:
>
> > What are you talking about?!  A search engine isn't a compiler with a
> > programmer for a user and a strict syntax.  The job of a search engine is
> > to
> > produce the best results it can *for any given input*.  Am I missing
> > something here?
> >
> > Andrew.
> >
> >
> > On Mon, Jan 24, 2011 at 5:15 PM, Adriano Crestani <
> > adrianocrestani@gmail.com
> > > wrote:
> >
> > > It's valid syntax error, since - is the exclusion operator, so the QP
> > > expects a term, phrase, parenthesis, etc after that.
> > >
> > > On Mon, Jan 24, 2011 at 5:05 PM, Andrew Kane <andrewrkane@gmail.com>
> > > wrote:
> > >
> > > > Shouldn't these two queries be fine?  (from TREC million query
> track).
> > > >  Should this be entered as a bug?
> > > >
> > > > Thanks,
> > > >
> > > > Andrew.
> > > >
> > > >
> > > >
> > > > Cannot parse 'statistics on child labor laws 1930 -': Encountered
> > "<EOF>"
> > > > at
> > > > line 1, column 37.
> > > > Was expecting one of:
> > > >    "(" ...
> > > >    "*" ...
> > > >    <QUOTED> ...
> > > >    <TERM> ...
> > > >    <PREFIXTERM> ...
> > > >    <WILDTERM> ...
> > > >    "[" ...
> > > >    "{" ...
> > > >    <NUMBER> ...
> > > >    <TERM> ...
> > > >    "*" ...
> > > >
> > > > Cannot parse 'u.s. census bureau local employment dynamics --':
> > > Encountered
> > > > " "-" "- "" at line 1, column 46.
> > > > Was expecting one of:
> > > >    "(" ...
> > > >    "*" ...
> > > >    <QUOTED> ...
> > > >    <TERM> ...
> > > >    <PREFIXTERM> ...
> > > >    <WILDTERM> ...
> > > >    "[" ...
> > > >    "{" ...
> > > >    <NUMBER> ...
> > > >    <TERM> ...
> > > >    "*" ...
> > > >
> > >
> >
>

--0016363ba5abddcf43049aa21f28--

From java-user-return-48529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 02:42:07 2011
Return-Path: <java-user-return-48529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13874 invoked from network); 25 Jan 2011 02:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 02:42:07 -0000
Received: (qmail 82083 invoked by uid 500); 25 Jan 2011 02:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81729 invoked by uid 500); 25 Jan 2011 02:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81714 invoked by uid 99); 25 Jan 2011 02:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 02:42:03 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.242] (HELO na3sys009aog117.obsmtp.com) (74.125.149.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jan 2011 02:41:56 +0000
Received: from source ([209.85.161.45]) (using TLSv1) by na3sys009aob117.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTT44Xhmix0x7QWP7aEy1GGGBYfAAxpmb@postini.com; Mon, 24 Jan 2011 18:41:36 PST
Received: by mail-fx0-f45.google.com with SMTP id 12so5145323fxm.32
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 18:41:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=onescreen.com; s=google;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=wWMUnzwOc2czv1BIdI7X+aQpB7kmqoz4mMlE9MWUPtI=;
        b=T2HdXkLOUKvyyoUlHleJRME/MAEzR6cUMWCIRvdO6PgZ9SYoTt3IVldjMsUSovo1vc
         5MtlFzDrd4R1b9DpiTWrkptt+BLSx+ESP4egDSWjYDoq4dberdbSSEAVPs4GnImlqR/x
         A2KQxfeNuInIka8XhUTD/RDdua70KAm6nLA/E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=onescreen.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hIhn+f4C5IGItMObOOZTmK+GeskpZ3Tv0X6zcMTvqh21xHkzX8GOcCl+6T8dZHqUH/
         Mg0Vg34VZ4CTZFrsCiJq90AYaNwyDVBB73Cl2+ypd4fRfQaMUZx7eJMvCirZZA7mo6Zw
         NDC8TPRyvH96WfIK5lp3hy4TQ86EK7hPEMC+4=
MIME-Version: 1.0
Received: by 10.223.83.144 with SMTP id f16mr2060628fal.4.1295923294126; Mon,
 24 Jan 2011 18:41:34 -0800 (PST)
Received: by 10.223.119.201 with HTTP; Mon, 24 Jan 2011 18:41:34 -0800 (PST)
In-Reply-To: <AANLkTimkBwJwqKv0fQHvdm-8595rXcshTUhyTZiBzj_c@mail.gmail.com>
References: <AANLkTi=wwsTeFBYHVte502paOZu0e=aySdaDENCMQON=@mail.gmail.com>
	<AANLkTi=vOURNO1fNvmcECLKJoi898_Zpn4XPnvwMJE4F@mail.gmail.com>
	<AANLkTin4S6qHeMtJDueJ+5uSGdFi518b6UH_ZMtt9wkm@mail.gmail.com>
	<AANLkTinVJWPgDoCoZnv161Te6ADOUAc9zCYddN95KYdk@mail.gmail.com>
	<AANLkTimkBwJwqKv0fQHvdm-8595rXcshTUhyTZiBzj_c@mail.gmail.com>
Date: Mon, 24 Jan 2011 18:41:34 -0800
Message-ID: <AANLkTikVoMeU-Uao1aYJYjayBM+q7+jG_QWpbRgujXu3@mail.gmail.com>
Subject: Re: Query parse errors for dashes in Lucene (3.0.3)
From: Yuhan Zhang <yzhang@onescreen.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a7379a42a4049aa2a77e

--20cf3054a7379a42a4049aa2a77e
Content-Type: text/plain; charset=ISO-8859-1

Hi Andrew,

you can escape the special characters in the string that QueryParser
reserves
by:

String queryString = QueryParser.escape( queryString );
Query query = QueryParser.parse( queryString );

Yuhan

On Mon, Jan 24, 2011 at 6:03 PM, Andrew Kane <andrewrkane@gmail.com> wrote:

> Wow, passing the buck doesn't really work for me.  If you think Lucene is a
> *database* that's fine, but in your demo code (or wherever) you should have
> a translation routine to convert user input into *SQL/whatever language
> you're using* and solve 95% of the use cases.  Does such a translation
> routine exist?
>
> Andrew.
>
>
> On Mon, Jan 24, 2011 at 8:51 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Yes. You're confusing an *engine* with a full-blown application.
> >
> > The user here is a Java programmer. I argue that guessing, which
> > is what you're asking for, is emphatically NOT in the domain of the
> > search *engine*, which is what Lucene is. Imagine the poor programmer
> > trying to understand why certain results were returned when the
> > engine changed the query while attempting to guess. Chaos.
> >
> > Dealing with bad user input is the application's responsibility. You're
> > perfectly
> > free to try to figure out what "the right thing to do" is, given your
> > search
> > domain, when you catch a parsing error. And I flat guarantee you'll be
> > wrong
> > for some percentage of cases.
> >
> > Which is why the engine is doing what it's doing, IMO...
> >
> > Best
> > Erick
> >
> > On Mon, Jan 24, 2011 at 8:40 PM, Andrew Kane <andrewrkane@gmail.com>
> > wrote:
> >
> > > What are you talking about?!  A search engine isn't a compiler with a
> > > programmer for a user and a strict syntax.  The job of a search engine
> is
> > > to
> > > produce the best results it can *for any given input*.  Am I missing
> > > something here?
> > >
> > > Andrew.
> > >
> > >
> > > On Mon, Jan 24, 2011 at 5:15 PM, Adriano Crestani <
> > > adrianocrestani@gmail.com
> > > > wrote:
> > >
> > > > It's valid syntax error, since - is the exclusion operator, so the QP
> > > > expects a term, phrase, parenthesis, etc after that.
> > > >
> > > > On Mon, Jan 24, 2011 at 5:05 PM, Andrew Kane <andrewrkane@gmail.com>
> > > > wrote:
> > > >
> > > > > Shouldn't these two queries be fine?  (from TREC million query
> > track).
> > > > >  Should this be entered as a bug?
> > > > >
> > > > > Thanks,
> > > > >
> > > > > Andrew.
> > > > >
> > > > >
> > > > >
> > > > > Cannot parse 'statistics on child labor laws 1930 -': Encountered
> > > "<EOF>"
> > > > > at
> > > > > line 1, column 37.
> > > > > Was expecting one of:
> > > > >    "(" ...
> > > > >    "*" ...
> > > > >    <QUOTED> ...
> > > > >    <TERM> ...
> > > > >    <PREFIXTERM> ...
> > > > >    <WILDTERM> ...
> > > > >    "[" ...
> > > > >    "{" ...
> > > > >    <NUMBER> ...
> > > > >    <TERM> ...
> > > > >    "*" ...
> > > > >
> > > > > Cannot parse 'u.s. census bureau local employment dynamics --':
> > > > Encountered
> > > > > " "-" "- "" at line 1, column 46.
> > > > > Was expecting one of:
> > > > >    "(" ...
> > > > >    "*" ...
> > > > >    <QUOTED> ...
> > > > >    <TERM> ...
> > > > >    <PREFIXTERM> ...
> > > > >    <WILDTERM> ...
> > > > >    "[" ...
> > > > >    "{" ...
> > > > >    <NUMBER> ...
> > > > >    <TERM> ...
> > > > >    "*" ...
> > > > >
> > > >
> > >
> >
>

--20cf3054a7379a42a4049aa2a77e--

From java-user-return-48530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 02:42:19 2011
Return-Path: <java-user-return-48530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14144 invoked from network); 25 Jan 2011 02:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 02:42:19 -0000
Received: (qmail 85000 invoked by uid 500); 25 Jan 2011 02:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84945 invoked by uid 500); 25 Jan 2011 02:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84937 invoked by uid 99); 25 Jan 2011 02:42:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 02:42:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,MIME_BASE64_TEXT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of baleksan@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 02:42:08 +0000
Received: by qyk7 with SMTP id 7so3528133qyk.14
        for <java-user@lucene.apache.org>; Mon, 24 Jan 2011 18:41:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:x-rim-org-msg-ref-id:message-id
         :content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=kzLxDgxyWysaTLe1RCAg0mllU9H6XiSNbdl0lR254FQ=;
        b=wrlZfXzfqNexxmn8+U0//6sHP+q9RNc8M9RZapGFZPBmubucBQmUu6q/6oW/9bMguF
         OCdEeddcwki2bQbxjiUEaKUcCMDYRJGDvAuKvf+lxuTuxsgJXjNyHA2gWyWOf8qc400F
         hj0gmXZPyXgPyNbHPRLyL4PbI5IaWLtuhwALc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=QJkDJfYoM/7Y6ZQD6ZrqxvnyhwrM/LrzVOLE5DAJ0IWu3kvD+4iYDedqQXczf5ur1c
         gfthj2JMBnnmcU8UVHTfLJWx/iskZ1g4083y+hbN3Coc6ohOjvrNL+BWqrYgy5wzJsq+
         U52WKaqwadD3Ste0YsWkmo/+F316NpUXtv1qg=
Received: by 10.229.98.135 with SMTP id q7mr4210558qcn.270.1295923307872;
        Mon, 24 Jan 2011 18:41:47 -0800 (PST)
Received: from bda676.bisx.prod.on.blackberry (bda-67-223-81-96.bise.na.blackberry.com [67.223.81.96])
        by mx.google.com with ESMTPS id g28sm9888512qck.37.2011.01.24.18.41.46
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Jan 2011 18:41:46 -0800 (PST)
X-rim-org-msg-ref-id:1475687039
Message-ID:<1475687039-1295923304-cardhu_decombobulator_blackberry.rim.net-1833366504-@bda682.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: baleksan@gmail.com
X-Priority: Normal
References: <BC802543-C5B8-460C-A727-2E2FD3CD796C@cellixis.com><AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
In-Reply-To: <AANLkTim1SaBDGiC+NmAwB7GGaoKeEFq5G7jfhzz-9C84@mail.gmail.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: Indexing with weightsjxcmhcl$bn
From: baleksan@gmail.com
Date: Tue, 25 Jan 2011 02:41:33 +0000
Content-Type: text/plain
MIME-Version: 1.0

V3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3cNClNl
bnQgdmlhIEJsYWNrQmVycnkgZnJvbSBULU1vYmlsZQ0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KRnJvbTogRXJpY2sgRXJpY2tzb24gPGVyaWNrZXJpY2tzb25AZ21haWwuY29tPg0KRGF0
ZTogTW9uLCAyNCBKYW4gMjAxMSAxNjoxNjo1NCANClRvOiA8amF2YS11c2VyQGx1Y2VuZS5hcGFj
aGUub3JnPg0KUmVwbHktVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDog
UmU6IEluZGV4aW5nIHdpdGggd2VpZ2h0cw0KDQpJIHRoaW5rIGFsbCB5b3UgbmVlZCB0byBkbyBp
cyBpbmRleCB0aGUga2V5d29yZHMgaW4gb25lIGZpZWxkIGFuZCB3ZWlnaHRzIGluDQphbm90aGVy
Lg0KVGhlbiBqdXN0IHNlYXJjaCBvbiBrZXl3b3JkcyBhbmQgc29ydCBvbiB3ZWlnaHQuDQoNCk5v
dGU6IHRoZSBmaWVsZCB5b3Ugc29ydCBvbiBzaG91bGQgTk9UIGJlIHRva2VuaXplZC4NCg0KQmVz
dA0KRXJpY2sNCg0KT24gTW9uLCBKYW4gMjQsIDIwMTEgYXQgNDowMiBQTSwgQ2hyaXMgU2NoaWxs
aW5nIDxjaHJpc0BjZWxsaXhpcy5jb20+IHdyb3RlOg0KDQo+IEhlbGxvLA0KPg0KPiBJIGhhdmUg
YSBidW5jaCBvZiB0ZXh0IGRvY3VtZW50cyBmb3JtYXR0ZWQgbGlrZSBzbzoNCj4NCj4ga2V5d29y
ZDEgd3QxDQo+IGtleXdvcmQyIHd0Mg0KPiBrZXl3b3JkMyB3dDMNCj4NCj4gSSB3b3VsZCBsaWtl
IHRvIGluZGV4IHRoZSBkb2N1bWVudHMgYmFzZWQgb24gdGhlIGtleXdvcmRzLiAgV2hlbiBJIHJl
dHJpZXZlDQo+IChzZWFyY2gpIGZvciBhIGtleXdvcmQsIEkgd291bGQgbGlrZSB0aGUgbGlzdCBv
ZiBkb2N1bWVudHMgdG8gYmUgc29ydGVkIGJ5DQo+IHRoZSB3ZWlnaHQgZm9yIHRoYXQga2V5d29y
ZC4gICBJcyB0aGVyZSBhbiBleGFtcGxlIGFueXdoZXJlIG9mIGhvdyB0byBkbw0KPiB0aGlzLiAg
SSBvd24gTElBLCBidXQgaGF2ZSBub3QgbWFkZSBpdCB0aHJvdWdoIHRoZSBlbnRpcmUgYm9vayB5
ZXQuDQo+ICBBcG9sb2dpZXMgaWYgdGhpcyBpcyBhZGRyZXNzZWQuDQo+DQo+IFRoYW5rIHlvdSEN
Cj4gQ2hyaXMgUy4NCj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1h
aWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
Pg0KPg0KDQo=



From java-user-return-48531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 12:46:11 2011
Return-Path: <java-user-return-48531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67056 invoked from network); 25 Jan 2011 12:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 12:46:11 -0000
Received: (qmail 50113 invoked by uid 500); 25 Jan 2011 12:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49776 invoked by uid 500); 25 Jan 2011 12:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49723 invoked by uid 99); 25 Jan 2011 12:46:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 12:46:06 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 12:45:59 +0000
Received: by qyk10 with SMTP id 10so5217648qyk.14
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 04:45:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=YnqMaiolEhjKaHuH9Su+cT5HWe4Au+4F1NARfcOgjI0=;
        b=gFgvkqQpOPOE1VAydUQha8z8hsgKG2ec1mcSrS52OLLcwgaA8/UwSfiChpxOn+nxrF
         lUFBb8b/Ia6DbTzJop1+NVQBMR/oQjfBsr6buMgK2DfSL1Tx9uotC5bIrJtG8OtBt45q
         eeI08kMUHb5BjQ7dmXNBsETLCPYw7Wstw9JwM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=FpR577Z0MhyLzIKCs6tSOhMqIrAqK2iKvzjUnjOTAiQQCIV7QSp6j2xiPbY9YX3j7w
         NJ1DM3g5utAkGc1Bh2pew+eCCBA2fbkCgNpprUl+R7zfBd8n93/RblErJPomD6o9k7T2
         qpJSf1+ebvU2Vp05clIC0K3rhZTXvhsTpNApU=
Received: by 10.229.211.206 with SMTP id gp14mr4723469qcb.289.1295959538460;
 Tue, 25 Jan 2011 04:45:38 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.82.6 with HTTP; Tue, 25 Jan 2011 04:45:18 -0800 (PST)
In-Reply-To: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
References: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Tue, 25 Jan 2011 13:45:18 +0100
Message-ID: <AANLkTinABrpQecNaoJ9BwwRgNNP3NT1itnemTTdb+UZG@mail.gmail.com>
Subject: Re: Preserving original HTML file offsets for highlighting
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6509d4aeee9e3049aab176e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6509d4aeee9e3049aab176e
Content-Type: text/plain; charset=ISO-8859-1

Hi Uwe,

thanks for this hint. I'm not sure, how much of the Solr functionality do I
need to implement for using the HTTPStripCharFilter. I'm using Apache Tika
for HTML parsing. Furthermore I use the StandardAnalyzer to initialize my
IndexWriter. I don't use a Tokenizer - this would be the Solr approach?

At this point, I'm not sure, how to use the Solr within my application,
where I already use Lucene. Can I use i.e. just this one or few classes from
the Solr Core while indexing with Lucene IndexWriter? Or do I need to switch
my indexing and searching to the Solr way, just to get what I need
(highlighting of the hits within HTML files).

Thank you so much for your help:-)
Karo



On Mon, Jan 24, 2011 at 2:03 PM, Karolina Bernat <
karolina.bernat@googlemail.com> wrote:

> Hi all,
>
> I'm new to Lucene and have a question about indexing/highlighting of HTML
> files with Lucene.
>
> What I need to do is highlight the hits (terms) in the original HTML file
> (or get the positions of the terms/tokens in the original file).
> This problem has already been described by Fred Toth in this thread in 2005
> (Preserving original HTML file offsets for highlighting, need
> HTMLTokenizer?):
>
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3C6.2.1.2.2.20050530134630.063ae978@fast.synernet.com%3E
>
> I've searched the mailing list archives hoping for an answer, but I had no
> luck.
>
> Does anyone have an idea, if there is a solution for this problem? Also if
> you know, that it's not possible with Lucene to highlight the hits in the
> original html-file, it would be helpful to know (I could stop looking for
> it...).
>
> Many thanks in advance!
> Karo
>
> P.S. Actually I wanted to answer the original thred/question from 2005 - is
> there a way to do this? How can I post an answer to an old thread/mail from
> the mailing list?
>

--0016e6509d4aeee9e3049aab176e--

From java-user-return-48532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 13:16:12 2011
Return-Path: <java-user-return-48532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82983 invoked from network); 25 Jan 2011 13:16:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 13:16:12 -0000
Received: (qmail 12342 invoked by uid 500); 25 Jan 2011 13:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11917 invoked by uid 500); 25 Jan 2011 13:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11903 invoked by uid 99); 25 Jan 2011 13:16:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 13:16:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 13:16:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 19FF9D36001
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 14:15:39 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6ygeRj+FthwI for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 14:15:34 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EAACE45F1D1
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 14:15:33 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com> <AANLkTinABrpQecNaoJ9BwwRgNNP3NT1itnemTTdb+UZG@mail.gmail.com>
In-Reply-To: <AANLkTinABrpQecNaoJ9BwwRgNNP3NT1itnemTTdb+UZG@mail.gmail.com>
Subject: RE: Preserving original HTML file offsets for highlighting
Date: Tue, 25 Jan 2011 14:15:50 +0100
Message-ID: <007101cbbc91$fcfadd50$f6f097f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQH0lgyl2jJVUMnybJK97XKrpv9dAgHPfqJ3k4F6R1A=
Content-language: de

Hi Karolina,

for this no Solr is needed at all. The CharFilter is simply placed outside
Lucene, but you can use without anything else from Solr. You can copy the
java file from Solr's source, choose another package name and you are
finished.

About Tokenizer and Analyzer: StandardAnalyzer does the combination of
Tokenizers and TokenFilters (and possibly CharFilters). It is just an
easy-to-use class that serves as a factory for TokenStreams (which is the
superclass of Tokenizers). If you want your own analysis, you have to
implement an Analyzer class (possibly use StandardAnalyzer source code as
basis) and add the needed Filters (this HTMLStripCharFilter) to the factory
method.

You may read the analysis' package javadocs to get information how to do
this. Note: This HTMLStripCharFilter does not need TIKA at all).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Karolina Bernat [mailto:karolina.bernat@googlemail.com]
> Sent: Tuesday, January 25, 2011 1:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: Preserving original HTML file offsets for highlighting
> 
> Hi Uwe,
> 
> thanks for this hint. I'm not sure, how much of the Solr functionality do
I
> need to implement for using the HTTPStripCharFilter. I'm using Apache Tika
> for HTML parsing. Furthermore I use the StandardAnalyzer to initialize my
> IndexWriter. I don't use a Tokenizer - this would be the Solr approach?
> 
> At this point, I'm not sure, how to use the Solr within my application,
where I
> already use Lucene. Can I use i.e. just this one or few classes from the
Solr
> Core while indexing with Lucene IndexWriter? Or do I need to switch my
> indexing and searching to the Solr way, just to get what I need
(highlighting
> of the hits within HTML files).
> 
> Thank you so much for your help:-)
> Karo
> 
> 
> 
> On Mon, Jan 24, 2011 at 2:03 PM, Karolina Bernat <
> karolina.bernat@googlemail.com> wrote:
> 
> > Hi all,
> >
> > I'm new to Lucene and have a question about indexing/highlighting of
> > HTML files with Lucene.
> >
> > What I need to do is highlight the hits (terms) in the original HTML
> > file (or get the positions of the terms/tokens in the original file).
> > This problem has already been described by Fred Toth in this thread in
> > 2005 (Preserving original HTML file offsets for highlighting, need
> > HTMLTokenizer?):
> >
> >
> > http://mail-archives.apache.org/mod_mbox/lucene-java-
> user/200505.mbox/
> > %3C6.2.1.2.2.20050530134630.063ae978@fast.synernet.com%3E
> >
> > I've searched the mailing list archives hoping for an answer, but I
> > had no luck.
> >
> > Does anyone have an idea, if there is a solution for this problem?
> > Also if you know, that it's not possible with Lucene to highlight the
> > hits in the original html-file, it would be helpful to know (I could
> > stop looking for it...).
> >
> > Many thanks in advance!
> > Karo
> >
> > P.S. Actually I wanted to answer the original thred/question from 2005
> > - is there a way to do this? How can I post an answer to an old
> > thread/mail from the mailing list?
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 15:12:51 2011
Return-Path: <java-user-return-48533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33887 invoked from network); 25 Jan 2011 15:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 15:12:51 -0000
Received: (qmail 94226 invoked by uid 500); 25 Jan 2011 15:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94071 invoked by uid 500); 25 Jan 2011 15:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94063 invoked by uid 99); 25 Jan 2011 15:12:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:12:46 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:12:39 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1PhkZ8-0002ix-BT
	for java-user@lucene.apache.org; Tue, 25 Jan 2011 07:12:18 -0800
Date: Tue, 25 Jan 2011 07:12:18 -0800 (PST)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1295968338325-2330598.post@n3.nabble.com>
Subject: Could not find implementing class
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

I used a small indexing example from "Lucene in Action" and can run and
compile the program under eclipse. If I want to compile and run it by
console I get this error:


java.lang.IllegalArgumentException: Could not find implementing class for
org.apache.lucene.analysis.tokenattributes.TermAttribute
	at
org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeFactory.getClassForInterface(AttributeSource.java:87)
	at
org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeFactory.createAttributeInstance(AttributeSource.java:66)
	at
org.apache.lucene.util.AttributeSource.addAttribute(AttributeSource.java:245)
	at
org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource.<init>(DocInverterPerThread.java:41)
	at
org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource.<init>(DocInverterPerThread.java:36)
	at
org.apache.lucene.index.DocInverterPerThread.<init>(DocInverterPerThread.java:34)
	at org.apache.lucene.index.DocInverter.addThread(DocInverter.java:95)
	at
org.apache.lucene.index.DocFieldProcessorPerThread.<init>(DocFieldProcessorPerThread.java:62)
	at
org.apache.lucene.index.DocFieldProcessor.addThread(DocFieldProcessor.java:88)
	at
org.apache.lucene.index.DocumentsWriterThreadState.<init>(DocumentsWriterThreadState.java:43)
	at
org.apache.lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java:739)
	at
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:814)
	at
org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:802)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1998)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1972)
	at Demo.setUp(Demo.java:86)
	at Demo.main(Demo.java:46)

I compile the command with javac -cp <path/Lucene/sources> Demo.java which
finishes without errors but running the program isn't possible. What am I
missing?? Basically I am just creating a directory, getting an indexwriter
with analyzer etc.. Line 86 in Demo.java is writer.addDocument(doc);.

Greetings Alex
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Could-not-find-implementing-class-tp2330598p2330598.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 15:18:37 2011
Return-Path: <java-user-return-48534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35680 invoked from network); 25 Jan 2011 15:18:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 15:18:37 -0000
Received: (qmail 3059 invoked by uid 500); 25 Jan 2011 15:18:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2856 invoked by uid 500); 25 Jan 2011 15:18:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2848 invoked by uid 99); 25 Jan 2011 15:18:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:18:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jan 2011 15:18:32 +0000
Received: (qmail 35613 invoked by uid 99); 25 Jan 2011 15:18:12 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:18:12 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Lucene , hits per document
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTimHwZOFR9goREg7avaouzz4bzTQ0yX0eGpRVOcT@mail.gmail.com>
Date: Tue, 25 Jan 2011 10:18:09 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <6A5A73BC-1326-49A6-A69B-5CC1FF2EF053@apache.org>
References: <AANLkTimHwZOFR9goREg7avaouzz4bzTQ0yX0eGpRVOcT@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)

With a little logic on your size to count, you can use SpanQueries to do =
that.

-Grant

On Jan 21, 2011, at 4:03 PM, Sharma Kollaparthi wrote:

> Hi ,
>=20
>       I have started to use Lucene for searching in HTML files. Is it
> possible to get Hits per document, when we search for phrases like =
"Hello
> World" and wild card searches like "te?t"?
>=20
> I managed to return the number of hits per document if there is only =
one
> term using termfrequency vector.
>=20
>=20
> Thanks,
> Sharma
>=20
> --=20
> Sharma Kollaparthi
> CDU Systems & Process Tools
> Software Developer I
> ANSYS INC.

--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 15:35:49 2011
Return-Path: <java-user-return-48535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41191 invoked from network); 25 Jan 2011 15:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 15:35:48 -0000
Received: (qmail 42773 invoked by uid 500); 25 Jan 2011 15:35:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42585 invoked by uid 500); 25 Jan 2011 15:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42577 invoked by uid 99); 25 Jan 2011 15:35:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:35:45 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 15:35:40 +0000
Received: by pxi11 with SMTP id 11so1087971pxi.35
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 07:35:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=K6AM7Bwgd4EuqPlRGJyYFQYe0eKEq7mpFybsQT3BAPk=;
        b=E9kqtBzgarMjI5fOLQa8ebMObBYUd+8EvVe78Hf5s983CwaXcaI0wk8HJAhBaE6Cga
         nO3THEP193I1/cDD8RUfbteMAvM5RfbsEaJLG90j1OYbq8e/2cGmQc4cqPpLT4Ywq5W4
         aUuCsVjhOFLfuq7M1sw+0svCptEVQ8Xiejeig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ow4t34i7jJXQ4gGPcGbaUXaii1gnm4kxB+BGtCtXoyuXALVk86NcaBlrh1xWvndTgU
         BEEpR2BeAw7nCMEb6hyZaoQZMp8jJpdDY/4NcoNHGFzg6xcST42Ds6FqoqvUhI+RynJn
         gd3TZkkXaId6L9ef4A07m0n6yQrGod1Uz50/s=
Received: by 10.142.132.7 with SMTP id f7mr5330417wfd.163.1295969706655; Tue,
 25 Jan 2011 07:35:06 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.178.8 with HTTP; Tue, 25 Jan 2011 07:34:46 -0800 (PST)
In-Reply-To: <1295968338325-2330598.post@n3.nabble.com>
References: <1295968338325-2330598.post@n3.nabble.com>
From: Alexander Aristov <alexander.aristov@gmail.com>
Date: Tue, 25 Jan 2011 18:34:46 +0300
Message-ID: <AANLkTinD9F7xMFsEFwPMnQQuYKJGg64-+Ku9fKn9+7GO@mail.gmail.com>
Subject: Re: Could not find implementing class
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd176d8013ff9049aad76fb

--000e0cd176d8013ff9049aad76fb
Content-Type: text/plain; charset=ISO-8859-1

Set correct classpath. you may want to compare which libraries eclipse
includes in classpath.


Best Regards
Alexander Aristov


On 25 January 2011 18:12, Alex vB <mail@avomberg.de> wrote:

>
> Hello everybody,
>
> I used a small indexing example from "Lucene in Action" and can run and
> compile the program under eclipse. If I want to compile and run it by
> console I get this error:
>
>
> java.lang.IllegalArgumentException: Could not find implementing class for
> org.apache.lucene.analysis.tokenattributes.TermAttribute
>        at
>
> org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeFactory.getClassForInterface(AttributeSource.java:87)
>        at
>
> org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeFactory.createAttributeInstance(AttributeSource.java:66)
>        at
>
> org.apache.lucene.util.AttributeSource.addAttribute(AttributeSource.java:245)
>        at
>
> org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource.<init>(DocInverterPerThread.java:41)
>        at
>
> org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource.<init>(DocInverterPerThread.java:36)
>        at
>
> org.apache.lucene.index.DocInverterPerThread.<init>(DocInverterPerThread.java:34)
>        at
> org.apache.lucene.index.DocInverter.addThread(DocInverter.java:95)
>        at
>
> org.apache.lucene.index.DocFieldProcessorPerThread.<init>(DocFieldProcessorPerThread.java:62)
>        at
>
> org.apache.lucene.index.DocFieldProcessor.addThread(DocFieldProcessor.java:88)
>        at
>
> org.apache.lucene.index.DocumentsWriterThreadState.<init>(DocumentsWriterThreadState.java:43)
>        at
>
> org.apache.lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java:739)
>        at
>
> org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:814)
>        at
>
> org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:802)
>        at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1998)
>        at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1972)
>        at Demo.setUp(Demo.java:86)
>        at Demo.main(Demo.java:46)
>
> I compile the command with javac -cp <path/Lucene/sources> Demo.java which
> finishes without errors but running the program isn't possible. What am I
> missing?? Basically I am just creating a directory, getting an indexwriter
> with analyzer etc.. Line 86 in Demo.java is writer.addDocument(doc);.
>
> Greetings Alex
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Could-not-find-implementing-class-tp2330598p2330598.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd176d8013ff9049aad76fb--

From java-user-return-48536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:18:55 2011
Return-Path: <java-user-return-48536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67118 invoked from network); 25 Jan 2011 16:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:18:55 -0000
Received: (qmail 35796 invoked by uid 500); 25 Jan 2011 16:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35713 invoked by uid 500); 25 Jan 2011 16:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35704 invoked by uid 99); 25 Jan 2011 16:18:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:18:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:18:43 +0000
Received: by iyb26 with SMTP id 26so5809880iyb.35
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 08:18:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=XfqWhCRYzKn0A3NfrE2CG4JG3y/fYovtSlocYnGa3IA=;
        b=qXqBUO2BPt7kiQO0FUmZC2FQmvCVjYIYggQyBNQxy4cKvRQ2vXgql+IpvccfBrZ14V
         DYCIEjMmQetTW1rr8Bv6o7uIe3Z8O4xOj5JeO/y+jtV9jCJZ29ADXA8Hu6jyKTw6zCUD
         HDlkPyRTsJNXdc7prst+QV6Z3zxnV5gp2PKEc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tQQnC/Ga7i9LDCyzGGnTVZr54mx3L8alxNMzO1i2hztWvhcu4UiHvm1i9L35r7BuVw
         m/XG1ZJHf3AM2odFYyUlq/SEhuvwSfOxbFSGW22PmluFvk31rbD+iwClQ15/1RJUaft+
         RWX5vRpjQzCn2U3eNcVVrAo/XiLXX+8imcMEg=
MIME-Version: 1.0
Received: by 10.231.37.74 with SMTP id w10mr6860519ibd.4.1295972302172; Tue,
 25 Jan 2011 08:18:22 -0800 (PST)
Received: by 10.231.208.81 with HTTP; Tue, 25 Jan 2011 08:18:22 -0800 (PST)
Date: Tue, 25 Jan 2011 16:18:22 +0000
Message-ID: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
Subject: AssertionError
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325572caeb5f061049aae107c

--000325572caeb5f061049aae107c
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors from
IndexWriter.ReaderPool.commit, at this line:

      // We invoke deleter.checkpoint below, so we must be
>       // sync'd on IW:
>       assert Thread.holdsLock(IndexWriter.this);
>

Has anyone encountered this before? I'm hoping this is a common scenario and
there is a quick fix to avoid it.

Thanks

Anuj

--000325572caeb5f061049aae107c--

From java-user-return-48537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:34:29 2011
Return-Path: <java-user-return-48537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72842 invoked from network); 25 Jan 2011 16:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:34:29 -0000
Received: (qmail 64910 invoked by uid 500); 25 Jan 2011 16:34:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64868 invoked by uid 500); 25 Jan 2011 16:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64847 invoked by uid 99); 25 Jan 2011 16:34:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:34:25 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.18.2.175 as permitted sender)
Received: from [64.18.2.175] (HELO exprod7og111.obsmtp.com) (64.18.2.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jan 2011 16:34:16 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob111.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTT77cUV7YHrlhxTixc84ohXvjq8Dmt/O@postini.com; Tue, 25 Jan 2011 08:33:56 PST
Received: from [10.10.1.18] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.436.0; Tue, 25 Jan 2011 11:39:36
 -0500
Message-ID: <4D3EFAE3.3000302@jobdiva.com>
Date: Tue, 25 Jan 2011 11:31:31 -0500
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Lucene on Multi-Processor/Core machines
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hello there,
I was looking for best practices for indexing/searching on a 
multi-processor/core machine but could not find any specific material on 
that.  Do you think it is a good idea to create a guide/how-to for that 
purpose?  It would be very helpful for many people in todays world, 
where almost all the machines come with multi cores and optionally 
multi-processors.

regards
-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:41:08 2011
Return-Path: <java-user-return-48538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75033 invoked from network); 25 Jan 2011 16:41:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:41:07 -0000
Received: (qmail 74995 invoked by uid 500); 25 Jan 2011 16:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74842 invoked by uid 500); 25 Jan 2011 16:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74834 invoked by uid 99); 25 Jan 2011 16:41:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:41:04 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:40:59 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1Phlwb-0002zX-8i
	for java-user@lucene.apache.org; Tue, 25 Jan 2011 08:40:37 -0800
Date: Tue, 25 Jan 2011 08:40:37 -0800 (PST)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1295973637263-2331617.post@n3.nabble.com>
In-Reply-To: <AANLkTinD9F7xMFsEFwPMnQQuYKJGg64-+Ku9fKn9+7GO@mail.gmail.com>
References: <1295968338325-2330598.post@n3.nabble.com> <AANLkTinD9F7xMFsEFwPMnQQuYKJGg64-+Ku9fKn9+7GO@mail.gmail.com>
Subject: Re: Could not find implementing class
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hello Alexander,

isn't it enough to add the classpath through -cp? If I don't use -cp I can't
compile my project. I thought after compiling without errors all sources are
correctly added. In Eclipse I added Lucene sources the same  way(which
works) and I also tried using the jar file. Therefore I seem to find all
classes but I don't get a clue with the error message. This error message is
thrown by the Lucene class DefaultAttributeFactory in 
org.apache.lucene.util.AttributeSource. I work under Ubuntu and configured
java with 

- sudo update-alternatives --config java 
- sudo update-java-alternatives -java-6-sun

Greetings
Alex


-- 
View this message in context: http://lucene.472066.n3.nabble.com/Could-not-find-implementing-class-tp2330598p2331617.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:48:20 2011
Return-Path: <java-user-return-48539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78021 invoked from network); 25 Jan 2011 16:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:48:20 -0000
Received: (qmail 93404 invoked by uid 500); 25 Jan 2011 16:48:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93354 invoked by uid 500); 25 Jan 2011 16:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93346 invoked by uid 99); 25 Jan 2011 16:48:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:48:16 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:48:09 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 93C4CD36001
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:47:49 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UTdakJDrqu9U for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 17:47:44 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D45C345E203
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:47:43 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1295968338325-2330598.post@n3.nabble.com> <AANLkTinD9F7xMFsEFwPMnQQuYKJGg64-+Ku9fKn9+7GO@mail.gmail.com> <1295973637263-2331617.post@n3.nabble.com>
In-Reply-To: <1295973637263-2331617.post@n3.nabble.com>
Subject: RE: Could not find implementing class
Date: Tue, 25 Jan 2011 17:48:00 +0100
Message-ID: <008b01cbbcaf$a0846140$e18d23c0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQLXjo3HpkVvV1D9h23w8avzg9svtgI9Kn4hAJaartaRs6LPwA==
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You have to also pass the classpath to java runtime, not only to javac.

If you get this problem within Eclipse, have you tried to cleanup the
project, maybe not all files are compiled?

Are you also compiling Lucene from source? If yes, make sure that all Lucene
classes are compiled (see cleanup above, uncheck any options to compile only
used classes). Lucene uses reflection to load some additional classes not
referenced in the .java files directly (dynamic loading), so missing ones
would not be seen by javac? Also it may be the case that inside Eclipse you
are using the veeeeery old Eclipse-shipped lucene-core.jar that interferes
with your program.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Alex vB [mailto:mail@avomberg.de]
> Sent: Tuesday, January 25, 2011 5:41 PM
> To: java-user@lucene.apache.org
> Subject: Re: Could not find implementing class
> 
> 
> Hello Alexander,
> 
> isn't it enough to add the classpath through -cp? If I don't use -cp I
can't
> compile my project. I thought after compiling without errors all sources
are
> correctly added. In Eclipse I added Lucene sources the same  way(which
> works) and I also tried using the jar file. Therefore I seem to find all
classes
> but I don't get a clue with the error message. This error message is
thrown by
> the Lucene class DefaultAttributeFactory in
> org.apache.lucene.util.AttributeSource. I work under Ubuntu and configured
> java with
> 
> - sudo update-alternatives --config java
> - sudo update-java-alternatives -java-6-sun
> 
> Greetings
> Alex
> 
> 
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Could-
> not-find-implementing-class-tp2330598p2331617.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:52:27 2011
Return-Path: <java-user-return-48540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79220 invoked from network); 25 Jan 2011 16:52:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:52:26 -0000
Received: (qmail 5645 invoked by uid 500); 25 Jan 2011 16:52:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5613 invoked by uid 500); 25 Jan 2011 16:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5605 invoked by uid 99); 25 Jan 2011 16:52:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:52:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:52:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0F9A6D36002
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:51:56 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zgIcpO2Ckpnl for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 17:51:44 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 215FCD36001
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:51:44 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
In-Reply-To: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
Subject: RE: AssertionError
Date: Tue, 25 Jan 2011 17:52:00 +0100
Message-ID: <008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQHPW9xFKt/EqgV+JwwiDRzh+wRUnJPaqJsQ
Content-language: de

Can you post your code?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Anuj Shah [mailto:anujshahwork@gmail.com]
> Sent: Tuesday, January 25, 2011 5:18 PM
> To: java-user@lucene.apache.org
> Subject: AssertionError
> 
> Hi,
> 
> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors from
> IndexWriter.ReaderPool.commit, at this line:
> 
>       // We invoke deleter.checkpoint below, so we must be
> >       // sync'd on IW:
> >       assert Thread.holdsLock(IndexWriter.this);
> >
> 
> Has anyone encountered this before? I'm hoping this is a common scenario
> and there is a quick fix to avoid it.
> 
> Thanks
> 
> Anuj


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 16:59:42 2011
Return-Path: <java-user-return-48541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82186 invoked from network); 25 Jan 2011 16:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 16:59:41 -0000
Received: (qmail 19415 invoked by uid 500); 25 Jan 2011 16:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19341 invoked by uid 500); 25 Jan 2011 16:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19333 invoked by uid 99); 25 Jan 2011 16:59:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:59:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 16:59:32 +0000
Received: by bwz8 with SMTP id 8so555382bwz.35
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 08:59:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=BL1upIjq/FWQxaT5aL7I7nkG3sfUj1bDoZQ04LGhNQ0=;
        b=yErC0JwCJTO2Fa9m6fgdBUDehbIN/YfLG5wXCH7Xm+7xuZLSNCVgdZ90/pah4i5Nhm
         uhQL/Yvc/Nj4Qswp7q0puXwsVv5Gme0riVcAkEAJ43eLNf+1Ukb64b9KqqQv/WDXCCJ5
         Js4J9M1TgImDXf19sNRi27CNDQDXHkO8mPa3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=LM0Rt+cfdPnFKoA9j7yYTQFH9+bjnMBOkgDqipRwINiCQdoLRKO3Yd9TKB0rPVMNJc
         UFmmGek43ovu4EHNy4jcBR4sfg4hkRIfshI1AOPdZARvtvxhNz3hTlySOIPs5ReGFNK4
         HjwMqBKYTansrR9BW/aIXSB6PHPQIS94mWZYM=
Received: by 10.204.116.5 with SMTP id k5mr5411372bkq.73.1295974590419; Tue,
 25 Jan 2011 08:56:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.64.140 with HTTP; Tue, 25 Jan 2011 08:52:21 -0800 (PST)
In-Reply-To: <4D3EFAE3.3000302@jobdiva.com>
References: <4D3EFAE3.3000302@jobdiva.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Tue, 25 Jan 2011 11:52:21 -0500
Message-ID: <AANLkTikVMDGYFGQokdNe-AmsHE0OGuXUGqwcrAod436P@mail.gmail.com>
Subject: Re: Lucene on Multi-Processor/Core machines
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is some older stuff I have done, likely still fairly relevant. I
would say that today things are _better_ than these results for Lucene
multithreading / multicore. :-)
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.htm=
l
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.h=
tml

Glen Newton


On Tue, Jan 25, 2011 at 11:31 AM, Siraj Haider <siraj@jobdiva.com> wrote:
> Hello there,
> I was looking for best practices for indexing/searching on a
> multi-processor/core machine but could not find any specific material on
> that. =C2=A0Do you think it is a good idea to create a guide/how-to for t=
hat
> purpose? =C2=A0It would be very helpful for many people in todays world, =
where
> almost all the machines come with multi cores and optionally
> multi-processors.
>
> regards
> -siraj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 17:31:16 2011
Return-Path: <java-user-return-48542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99739 invoked from network); 25 Jan 2011 17:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 17:31:16 -0000
Received: (qmail 74151 invoked by uid 500); 25 Jan 2011 17:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74071 invoked by uid 500); 25 Jan 2011 17:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74063 invoked by uid 99); 25 Jan 2011 17:31:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 17:31:13 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 17:31:06 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1Phmj7-000845-No
	for java-user@lucene.apache.org; Tue, 25 Jan 2011 09:30:45 -0800
Date: Tue, 25 Jan 2011 09:30:45 -0800 (PST)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1295976645729-2332141.post@n3.nabble.com>
In-Reply-To: <008b01cbbcaf$a0846140$e18d23c0$@thetaphi.de>
References: <1295968338325-2330598.post@n3.nabble.com> <AANLkTinD9F7xMFsEFwPMnQQuYKJGg64-+Ku9fKn9+7GO@mail.gmail.com> <1295973637263-2331617.post@n3.nabble.com> <008b01cbbcaf$a0846140$e18d23c0$@thetaphi.de>
Subject: RE: Could not find implementing class
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Uwe,

I recompiled some classes manually in Lucene sources. No it's running fine!
Something went wrong there.

Thank you very much!

Best regards
Alex
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Could-not-find-implementing-class-tp2330598p2332141.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 17:41:03 2011
Return-Path: <java-user-return-48543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61797 invoked from network); 25 Jan 2011 17:41:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 17:41:02 -0000
Received: (qmail 90345 invoked by uid 500); 25 Jan 2011 17:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90274 invoked by uid 500); 25 Jan 2011 17:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90266 invoked by uid 99); 25 Jan 2011 17:40:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 17:40:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 17:40:51 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id BB38E1FC29
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:38:19 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Nl6jFdQKRkds for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 18:38:14 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 7E60C1FC70; Tue, 25 Jan 2011 18:38:14 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 4983E1FC29
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 17:38:14 +0000 (UTC)
Message-ID: <4D3F0B08.5060100@dosco.de>
Date: Tue, 25 Jan 2011 18:40:24 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Highlight Wildcard Queries
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I'm just migrating our small search customization from Lucene version 
2.3 to the current version (3.0.3) and wonder why, in contrast to the 
old version, we no longer get the Wildcard Queries (which are default, 
since surround the search string with asterisks) highlighted.

We're using the "traditional" Highlighter and don't store documents 
content (in total about 100MB) in the index.

As far I understand in the earlier version a WildCard Query was 
rewritten (expanded) into many Term Queries before highlighting (but in 
practice never exceeded the maximum clauses size since we only wrapped 
strings longer than 3 characters...)

Now however, QueryParser returns a BooleanQuery conataining a 
ConstantScoreQuery which has an enmpty extractTerms method and thus 
doesnt contribute terms for the highlighter.

What do I have to do to get the wildcard query results highlighted?
Use th old Rewrite methods (if possible)??
Go back to Lucene 2.3???

Wulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 18:38:22 2011
Return-Path: <java-user-return-48544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97172 invoked from network); 25 Jan 2011 18:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 18:38:22 -0000
Received: (qmail 99240 invoked by uid 500); 25 Jan 2011 18:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99143 invoked by uid 500); 25 Jan 2011 18:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99135 invoked by uid 99); 25 Jan 2011 18:38:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 18:38:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 18:38:12 +0000
Received: by ywc21 with SMTP id 21so1554476ywc.35
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 10:37:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.153.1 with SMTP id f1mr6506194ybo.144.1295980670150; Tue,
 25 Jan 2011 10:37:50 -0800 (PST)
Received: by 10.146.84.15 with HTTP; Tue, 25 Jan 2011 10:37:50 -0800 (PST)
In-Reply-To: <008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
	<008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
Date: Tue, 25 Jan 2011 13:37:50 -0500
Message-ID: <AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com>
Subject: Re: AssertionError
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

... and also the full exception?

Mike

On Tue, Jan 25, 2011 at 11:52 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Can you post your code?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Anuj Shah [mailto:anujshahwork@gmail.com]
>> Sent: Tuesday, January 25, 2011 5:18 PM
>> To: java-user@lucene.apache.org
>> Subject: AssertionError
>>
>> Hi,
>>
>> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors fro=
m
>> IndexWriter.ReaderPool.commit, at this line:
>>
>> =A0 =A0 =A0 // We invoke deleter.checkpoint below, so we must be
>> > =A0 =A0 =A0 // sync'd on IW:
>> > =A0 =A0 =A0 assert Thread.holdsLock(IndexWriter.this);
>> >
>>
>> Has anyone encountered this before? I'm hoping this is a common scenario
>> and there is a quick fix to avoid it.
>>
>> Thanks
>>
>> Anuj
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 19:44:22 2011
Return-Path: <java-user-return-48545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26283 invoked from network); 25 Jan 2011 19:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 19:44:22 -0000
Received: (qmail 14609 invoked by uid 500); 25 Jan 2011 19:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14236 invoked by uid 500); 25 Jan 2011 19:44:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14148 invoked by uid 99); 25 Jan 2011 19:44:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 19:44:17 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kanarsky2010@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 19:44:11 +0000
Received: by wye20 with SMTP id 20so153811wye.35
        for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 11:43:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=IiPYkV867kwcrQXCe6/KrJuTRg3k7awf/6HwSCNBeKA=;
        b=SPbOuKRsiOuEDq0gcJfsAF3y3FOJsSJgKUMSYGxBw21nr0j9GoCLFgx7vyhL9VZSKJ
         zcCQjlX2mImmusd0Jee29VH1Z1c2OTquIKIu8YrVHCXJKcLudokkULXIMYdYn9l79vrG
         YTLu9qyIYuJDYiXeUqH1uNXOueeKNFhPT0Eeo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IopvJtfGU4Z9hPMo9ZI02HjA8XC5Cho/i00qs1ClrTNMysroRW9LYA03fKhEEejBPA
         cWxJxWNr3pvNjPXoze952rI7ok9Im7/IL+JJ8EylRopoIVkPju1XubjSk86bCESEFjbH
         9EjSwLp06560qk9UdQq9h7bMAH/cBLWfJ+xNg=
MIME-Version: 1.0
Received: by 10.216.51.67 with SMTP id a45mr4211264wec.19.1295984631491; Tue,
 25 Jan 2011 11:43:51 -0800 (PST)
Received: by 10.216.38.136 with HTTP; Tue, 25 Jan 2011 11:43:51 -0800 (PST)
In-Reply-To: <4D3F0B08.5060100@dosco.de>
References: <4D3F0B08.5060100@dosco.de>
Date: Tue, 25 Jan 2011 11:43:51 -0800
Message-ID: <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>
Subject: Re: Highlight Wildcard Queries
From: Alexander Kanarsky <kanarsky2010@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wulf,

Check the http://www.lucidimagination.com/blog/2009/06/08/bringing-the-highlighter-back-to-wildcard-queries-in-solr-14/
this may help. I do not know what of Mark's changes are in Lucene 3.x,
but most likely you
will just need to set a proper RewriteMethod for the MultiTermQuery somewhere.

-Alexander

On Tue, Jan 25, 2011 at 9:40 AM, Wulf Berschin <berschin@dosco.de> wrote:
> Hi,
>
> I'm just migrating our small search customization from Lucene version 2.3 to
> the current version (3.0.3) and wonder why, in contrast to the old version,
> we no longer get the Wildcard Queries (which are default, since surround the
> search string with asterisks) highlighted.
>
> We're using the "traditional" Highlighter and don't store documents content
> (in total about 100MB) in the index.
>
> As far I understand in the earlier version a WildCard Query was rewritten
> (expanded) into many Term Queries before highlighting (but in practice never
> exceeded the maximum clauses size since we only wrapped strings longer than
> 3 characters...)
>
> Now however, QueryParser returns a BooleanQuery conataining a
> ConstantScoreQuery which has an enmpty extractTerms method and thus doesnt
> contribute terms for the highlighter.
>
> What do I have to do to get the wildcard query results highlighted?
> Use th old Rewrite methods (if possible)??
> Go back to Lucene 2.3???
>
> Wulf
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 20:02:09 2011
Return-Path: <java-user-return-48546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31416 invoked from network); 25 Jan 2011 20:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 20:02:09 -0000
Received: (qmail 39464 invoked by uid 500); 25 Jan 2011 20:02:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39429 invoked by uid 500); 25 Jan 2011 20:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39421 invoked by uid 99); 25 Jan 2011 20:02:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:02:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:02:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9005F45F0F0
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 21:01:39 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id s75AeSJ8LV4L for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 21:01:34 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 87B4345E20F
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 21:01:33 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>
In-Reply-To: <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>
Subject: RE: Highlight Wildcard Queries
Date: Tue, 25 Jan 2011 21:01:50 +0100
Message-ID: <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldkt0AafA=
Content-language: de

You can set setExpandMultiTermQuery(true) on QueryScorer (or
WeightedSpanTermExtractor), which is  needed by the Highlighter CTOR - that
would do exactly what you want with the standard highlighter.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Alexander Kanarsky [mailto:kanarsky2010@gmail.com]
> Sent: Tuesday, January 25, 2011 8:44 PM
> To: java-user@lucene.apache.org
> Subject: Re: Highlight Wildcard Queries
> 
> Hi Wulf,
> 
> Check the http://www.lucidimagination.com/blog/2009/06/08/bringing-the-
> highlighter-back-to-wildcard-queries-in-solr-14/
> this may help. I do not know what of Mark's changes are in Lucene 3.x, but
> most likely you will just need to set a proper RewriteMethod for the
> MultiTermQuery somewhere.
> 
> -Alexander
> 
> On Tue, Jan 25, 2011 at 9:40 AM, Wulf Berschin <berschin@dosco.de> wrote:
> > Hi,
> >
> > I'm just migrating our small search customization from Lucene version
> > 2.3 to the current version (3.0.3) and wonder why, in contrast to the
> > old version, we no longer get the Wildcard Queries (which are default,
> > since surround the search string with asterisks) highlighted.
> >
> > We're using the "traditional" Highlighter and don't store documents
> > content (in total about 100MB) in the index.
> >
> > As far I understand in the earlier version a WildCard Query was
> > rewritten
> > (expanded) into many Term Queries before highlighting (but in practice
> > never exceeded the maximum clauses size since we only wrapped strings
> > longer than
> > 3 characters...)
> >
> > Now however, QueryParser returns a BooleanQuery conataining a
> > ConstantScoreQuery which has an enmpty extractTerms method and thus
> > doesnt contribute terms for the highlighter.
> >
> > What do I have to do to get the wildcard query results highlighted?
> > Use th old Rewrite methods (if possible)??
> > Go back to Lucene 2.3???
> >
> > Wulf
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 20:04:50 2011
Return-Path: <java-user-return-48547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32263 invoked from network); 25 Jan 2011 20:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 20:04:50 -0000
Received: (qmail 46814 invoked by uid 500); 25 Jan 2011 20:04:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46749 invoked by uid 500); 25 Jan 2011 20:04:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46741 invoked by uid 99); 25 Jan 2011 20:04:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:04:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:04:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 361F045F0F0
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 21:04:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3nJi+UdpVuJX for <java-user@lucene.apache.org>;
	Tue, 25 Jan 2011 21:04:14 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 44BF445E20F
	for <java-user@lucene.apache.org>; Tue, 25 Jan 2011 21:04:14 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>
In-Reply-To: <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>
Subject: RE: Highlight Wildcard Queries
Date: Tue, 25 Jan 2011 21:04:30 +0100
Message-ID: <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldAbqtWlSSzyzSoA==
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

And: you don't need to rewrite queries before highlighting, highlighter does
this automatically internally if needed.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Tuesday, January 25, 2011 9:02 PM
> To: java-user@lucene.apache.org
> Subject: RE: Highlight Wildcard Queries
> 
> You can set setExpandMultiTermQuery(true) on QueryScorer (or
> WeightedSpanTermExtractor), which is  needed by the Highlighter CTOR -
> that would do exactly what you want with the standard highlighter.
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: Alexander Kanarsky [mailto:kanarsky2010@gmail.com]
> > Sent: Tuesday, January 25, 2011 8:44 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Highlight Wildcard Queries
> >
> > Hi Wulf,
> >
> > Check the
> > http://www.lucidimagination.com/blog/2009/06/08/bringing-the-
> > highlighter-back-to-wildcard-queries-in-solr-14/
> > this may help. I do not know what of Mark's changes are in Lucene 3.x,
> > but most likely you will just need to set a proper RewriteMethod for
> > the MultiTermQuery somewhere.
> >
> > -Alexander
> >
> > On Tue, Jan 25, 2011 at 9:40 AM, Wulf Berschin <berschin@dosco.de>
> wrote:
> > > Hi,
> > >
> > > I'm just migrating our small search customization from Lucene
> > > version
> > > 2.3 to the current version (3.0.3) and wonder why, in contrast to
> > > the old version, we no longer get the Wildcard Queries (which are
> > > default, since surround the search string with asterisks) highlighted.
> > >
> > > We're using the "traditional" Highlighter and don't store documents
> > > content (in total about 100MB) in the index.
> > >
> > > As far I understand in the earlier version a WildCard Query was
> > > rewritten
> > > (expanded) into many Term Queries before highlighting (but in
> > > practice never exceeded the maximum clauses size since we only
> > > wrapped strings longer than
> > > 3 characters...)
> > >
> > > Now however, QueryParser returns a BooleanQuery conataining a
> > > ConstantScoreQuery which has an enmpty extractTerms method and
> thus
> > > doesnt contribute terms for the highlighter.
> > >
> > > What do I have to do to get the wildcard query results highlighted?
> > > Use th old Rewrite methods (if possible)??
> > > Go back to Lucene 2.3???
> > >
> > > Wulf
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 25 20:54:58 2011
Return-Path: <java-user-return-48548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55392 invoked from network); 25 Jan 2011 20:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jan 2011 20:54:57 -0000
Received: (qmail 8394 invoked by uid 500); 25 Jan 2011 20:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7512 invoked by uid 500); 25 Jan 2011 20:54:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7457 invoked by uid 99); 25 Jan 2011 20:54:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:54:38 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jan 2011 20:54:31 +0000
Received: from isabel-drost.de ([85.214.115.60] helo=motokokusanagi.localnet)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1Phptu-0001Ql-CV; Tue, 25 Jan 2011 20:54:07 +0000
From: Isabel Drost <isabel@apache.org>
Reply-To: isabel@apache.org
To: user@mahout.apache.org
Subject: CFP - Berlin Buzzwords 2011 - Search, Score, Scale
Date: Tue, 25 Jan 2011 21:53:28 +0100
User-Agent: KMail/1.13.5 (Linux/2.6.32-5-amd64; KDE/4.4.5; x86_64; ; )
Cc: general@lucene.apache.org,
 general@hadoop.apache.org,
 user@hbase.apache.org,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 user@nutch.apache.org
X-KMail-Markup: true
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2073183.1OyNNgtYSL";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <201101252153.30628.isabel@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart2073183.1OyNNgtYSL
Content-Type: multipart/alternative;
  boundary="Boundary-01=_KhzPNKWdhpyvYFX"
Content-Transfer-Encoding: 7bit

--Boundary-01=_KhzPNKWdhpyvYFX
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

This is to announce the Berlin Buzzwords 2011. The second edition of the=20
successful conference on scalable and open search, data processing and data=
=20
storage in Germany, taking place in Berlin.

                    Call for Presentations Berlin Buzzwords
                           http://berlinbuzzwords.de
                  Berlin Buzzwords 2011 - Search, Store, Scale
                                6/7 June 2011

The event will comprise presentations on scalable data processing. We invit=
e you=20
to submit talks on the topics:

   * IR / Search - Lucene, Solr, katta or comparable solutions
   * NoSQL - like CouchDB, MongoDB, Jackrabbit, HBase and others
   * Hadoop - Hadoop itself, MapReduce, Cascading or Pig and relatives
   * Closely related topics not explicitly listed above are welcome. We are
     looking for presentations on the implementation of the systems themsel=
ves,
     real world applications and case studies.

Important Dates (all dates in GMT +2)
   * Submission deadline: March 1st 2011, 23:59 MEZ
   * Notification of accepted speakers: March 22th, 2011, MEZ.
   * Publication of final schedule: April 5th, 2011.
   * Conference: June 6/7. 2011

High quality, technical submissions are called for, ranging from principles=
 to=20
practice. We are looking for real world use cases, background on the=20
architecture of specific projects and a deep dive into architectures built =
on=20
top of e.g. Hadoop clusters.

Proposals should be submitted at http://berlinbuzzwords.de/content/cfp-0 no=
=20
later than March 1st, 2011. Acceptance notifications will be sent out soon =
after=20
the submission deadline. Please include your name, bio and email, the title=
 of=20
the talk, a brief abstract in English language. Please indicate whether you=
 want=20
to give a lightning (10min), short (20min) or long (40min) presentation and=
=20
indicate the level of experience with the topic your audience should have (=
e.g.=20
whether your talk will be suitable for newbies or is targeted for experienc=
ed=20
users.) If you'd like to pitch your brand new product in your talk, please =
let=20
us know as well - there will be extra space for presenting new ideas, aweso=
me=20
products and great new projects.

The presentation format is short. We will be enforcing the schedule rigorou=
sly.

If you are interested in sponsoring the event (e.g. we would be happy to pr=
ovide=20
videos after the event, free drinks for attendees as well as an after-show=
=20
party), please contact us.

=46ollow @hadoopberlin on Twitter for updates. Tickets, news on the confere=
nce,=20
and the final schedule are be published at http://berlinbuzzwords.de.

Program Chairs: Isabel Drost, Jan Lehnardt, and Simon Willnauer.

Please re-distribute this CfP to people who might be interested.

If you are local and wish to meet us earlier, please note that this Thursda=
y=20
evening there will be an Apache Hadoop Get Together (videos kindly sponsore=
d by=20
Cloudera, venue kindly provided for free by Zanox) featuring talks on Apach=
e=20
Hadoop in production as well as news on current Apache Lucene developments.

Contact us at:

newthinking communications=20
GmbH Sch=F6nhauser Allee 6/7=20
10119 Berlin,=20
Germany=20

Julia Gem=E4hlich
Isabel Drost=20

+49(0)30-9210 596

--Boundary-01=_KhzPNKWdhpyvYFX
Content-Type: text/html;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-=
html40/strict.dtd">
<html><head><meta name=3D"qrichtext" content=3D"1" /><style type=3D"text/cs=
s">
p, li { white-space: pre-wrap; }
</style></head><body style=3D" font-family:'Monospace'; font-size:8pt; font=
=2Dweight:400; font-style:normal;">
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">This is to announce the Berlin Buzzw=
ords 2011. The second edition of the successful conference on scalable and =
open search, data processing and data storage in Germany, taking place in B=
erlin.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />                    Call for P=
resentations Berlin Buzzwords</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">                           http://be=
rlinbuzzwords.de</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">                  Berlin Buzzwords 2=
011 - Search, Store, Scale</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">                                6/7 =
June 2011</span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">The event will comprise presentation=
s on scalable data processing. We invite you to submit talks on the topics:=
</span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * IR / Search - Lucene, Solr, kat=
ta or comparable solutions</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * NoSQL - like CouchDB, MongoDB, =
Jackrabbit, HBase and others</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Hadoop - Hadoop itself, MapRedu=
ce, Cascading or Pig and relatives</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Closely related topics not expl=
icitly listed above are welcome. We are</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">     looking for presentations on th=
e implementation of the systems themselves,</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">     real world applications and cas=
e studies.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />Important Dates (all dates in =
GMT +2)</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Submission deadline: March 1st =
2011, 23:59 MEZ</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Notification of accepted speake=
rs: March 22th, 2011, MEZ.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Publication of final schedule: =
April 5th, 2011.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">   * Conference: June 6/7. 2011</spa=
n></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">High quality, technical submissions =
are called for, ranging from principles to practice. We are looking for rea=
l world use cases, background on the architecture of specific projects and =
a deep dive into architectures built on top of e.g. Hadoop clusters.</span>=
</p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />Proposals should be submitted =
at http://berlinbuzzwords.de/content/cfp-0 no later than March 1st, 2011. A=
cceptance notifications will be sent out soon after the submission deadline=
=2E Please include your name, bio and email, the title of the talk, a brief=
 abstract in English language. Please indicate whether you want to give a l=
ightning (10min), short (20min) or long (40min) presentation and indicate t=
he level of experience with the topic your audience should have (e.g. wheth=
er your talk will be suitable for newbies or is targeted for experienced us=
ers.) If you'd like to pitch your brand new product in your talk, please le=
t us know as well - there will be extra space for presenting new ideas, awe=
some products and great new projects.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />The presentation format is sho=
rt. We will be enforcing the schedule rigorously.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />If you are interested in spons=
oring the event (e.g. we would be happy to provide videos after the event, =
free drinks for attendees as well as an after-show party), please contact u=
s.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />Follow @hadoopberlin on Twitte=
r for updates. Tickets, news on the conference, and the final schedule are =
be published at http://berlinbuzzwords.de.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />Program Chairs: Isabel Drost, =
Jan Lehnardt, and Simon Willnauer.</span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">Please re-distribute this CfP to peo=
ple who might be interested.</span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" color:#141312;">If you are local and wish to meet us earlier, please n=
ote that this Thursday evening there will be an Apache Hadoop Get Together =
(videos kindly sponsored by Cloudera, venue kindly provided for free by Zan=
ox) featuring talks on Apache Hadoop in production as well as news on curre=
nt Apache Lucene developments.</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />Contact us at:</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;"><br />newthinking communications </s=
pan></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">GmbH Sch=F6nhauser Allee 6/7 </span>=
</p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">10119 Berlin, </span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">Germany </span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">Julia Gem=E4hlich</span></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">Isabel Drost </span></p>
<p style=3D"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; ma=
rgin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-u=
ser-state:0; font-size:medium; color:#141312;"></p>
<p style=3D" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-rig=
ht:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=
=3D" font-size:medium; color:#141312;">+49(0)30-9210 596</span></p></body><=
/html>
--Boundary-01=_KhzPNKWdhpyvYFX--

--nextPart2073183.1OyNNgtYSL
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEABECAAYFAk0/OEoACgkQPJpCBAwIhbRqCwCfS6MZ0C/CgOnz8zcSaVRix3/A
nIMAmQH/1wVnJbGAJ/Lvu07DqoUxFyvq
=je5I
-----END PGP SIGNATURE-----

--nextPart2073183.1OyNNgtYSL--

From java-user-return-48549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 09:53:28 2011
Return-Path: <java-user-return-48549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4673 invoked from network); 26 Jan 2011 09:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 09:53:28 -0000
Received: (qmail 15862 invoked by uid 500); 26 Jan 2011 09:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15365 invoked by uid 500); 26 Jan 2011 09:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15357 invoked by uid 99); 26 Jan 2011 09:53:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 09:53:21 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 09:53:15 +0000
Received: by qyk10 with SMTP id 10so747688qyk.14
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 01:52:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=B+PGaer41a1VaI/l7Tv4sSUgyrDQZ47UabLA1u271WI=;
        b=DqLo6coASe19x0xIT5yGkWpUA3Fywty+WLM3DMA/X475vFOuOjnTNv0WM07ZJwtehw
         KJDgrTBVL5OaOyB5U+b2t+AJ08oHEERDiyIp7pKsH902eQ2CybCL/V9sSts4FUNTV8BF
         i+MHEfoK0RV12SgsgFiOFAnO/CWNllo9dVFhE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=OHr/cA80gOD5MMDZNpwpV/9u0XCo7YZhR9aIrShbNNmoqkk/MdMPUWlRkKyk/42oSM
         C81qYtzRchP9M5f5fclz6+YBOZ4sCx3zUc/yr1X/DjyrzV4idKVSjf2hB8MIXDdBK0ab
         J6gJUYLg3EkPDBuCuDl2Ttyy2aRY++jCAuFvk=
Received: by 10.229.91.72 with SMTP id l8mr227056qcm.137.1296035574059; Wed,
 26 Jan 2011 01:52:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.82.6 with HTTP; Wed, 26 Jan 2011 01:52:33 -0800 (PST)
In-Reply-To: <007101cbbc91$fcfadd50$f6f097f0$@thetaphi.de>
References: <AANLkTik4nqnq=wmoS1g6aJnbcWZTdF8Y5EtUupWdPq1r@mail.gmail.com>
 <AANLkTinABrpQecNaoJ9BwwRgNNP3NT1itnemTTdb+UZG@mail.gmail.com> <007101cbbc91$fcfadd50$f6f097f0$@thetaphi.de>
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Wed, 26 Jan 2011 10:52:33 +0100
Message-ID: <AANLkTi=TfVzVx6oLdv1nTJas42wsdf9-PRrQudNc8neG@mail.gmail.com>
Subject: Re: Preserving original HTML file offsets for highlighting
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016360e3d3002125c049abcccd0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016360e3d3002125c049abcccd0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Uwe,

thank you so much for your help, it worked like a dream!:-)

I made a custom analyzer classand extended it from the StandardAnalyzer.
Then I needed to override the tokenStream method like that:

public TokenStream tokenStream(String fieldName, Reader reader) {
        CharStream chStream =3D CharReader.get(reader);
        HTMLStripCharFilter filter =3D new HTMLStripCharFilter(chStream);
        return super.tokenStream(fieldName, filter);
    }

and in the constructor I called the super constructor.
That worked really good and it was the ony place I needed to make some
changes.

Thanks once again!

Viele Gr=FC=DFe aus Hamburg,
Karo


On Tue, Jan 25, 2011 at 2:15 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi Karolina,
>
> for this no Solr is needed at all. The CharFilter is simply placed outsid=
e
> Lucene, but you can use without anything else from Solr. You can copy the
> java file from Solr's source, choose another package name and you are
> finished.
>
> About Tokenizer and Analyzer: StandardAnalyzer does the combination of
> Tokenizers and TokenFilters (and possibly CharFilters). It is just an
> easy-to-use class that serves as a factory for TokenStreams (which is the
> superclass of Tokenizers). If you want your own analysis, you have to
> implement an Analyzer class (possibly use StandardAnalyzer source code as
> basis) and add the needed Filters (this HTMLStripCharFilter) to the facto=
ry
> method.
>
> You may read the analysis' package javadocs to get information how to do
> this. Note: This HTMLStripCharFilter does not need TIKA at all).
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Karolina Bernat [mailto:karolina.bernat@googlemail.com]
> > Sent: Tuesday, January 25, 2011 1:45 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Preserving original HTML file offsets for highlighting
> >
> > Hi Uwe,
> >
> > thanks for this hint. I'm not sure, how much of the Solr functionality =
do
> I
> > need to implement for using the HTTPStripCharFilter. I'm using Apache
> Tika
> > for HTML parsing. Furthermore I use the StandardAnalyzer to initialize =
my
> > IndexWriter. I don't use a Tokenizer - this would be the Solr approach?
> >
> > At this point, I'm not sure, how to use the Solr within my application,
> where I
> > already use Lucene. Can I use i.e. just this one or few classes from th=
e
> Solr
> > Core while indexing with Lucene IndexWriter? Or do I need to switch my
> > indexing and searching to the Solr way, just to get what I need
> (highlighting
> > of the hits within HTML files).
> >
> > Thank you so much for your help:-)
> > Karo
> >
> >
> >
> > On Mon, Jan 24, 2011 at 2:03 PM, Karolina Bernat <
> > karolina.bernat@googlemail.com> wrote:
> >
> > > Hi all,
> > >
> > > I'm new to Lucene and have a question about indexing/highlighting of
> > > HTML files with Lucene.
> > >
> > > What I need to do is highlight the hits (terms) in the original HTML
> > > file (or get the positions of the terms/tokens in the original file).
> > > This problem has already been described by Fred Toth in this thread i=
n
> > > 2005 (Preserving original HTML file offsets for highlighting, need
> > > HTMLTokenizer?):
> > >
> > >
> > > http://mail-archives.apache.org/mod_mbox/lucene-java-
> > user/200505.mbox/
> > > %3C6.2.1.2.2.20050530134630.063ae978@fast.synernet.com%3E
> > >
> > > I've searched the mailing list archives hoping for an answer, but I
> > > had no luck.
> > >
> > > Does anyone have an idea, if there is a solution for this problem?
> > > Also if you know, that it's not possible with Lucene to highlight the
> > > hits in the original html-file, it would be helpful to know (I could
> > > stop looking for it...).
> > >
> > > Many thanks in advance!
> > > Karo
> > >
> > > P.S. Actually I wanted to answer the original thred/question from 200=
5
> > > - is there a way to do this? How can I post an answer to an old
> > > thread/mail from the mailing list?
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016360e3d3002125c049abcccd0--

From java-user-return-48550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 09:59:50 2011
Return-Path: <java-user-return-48550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6462 invoked from network); 26 Jan 2011 09:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 09:59:49 -0000
Received: (qmail 27785 invoked by uid 500); 26 Jan 2011 09:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27423 invoked by uid 500); 26 Jan 2011 09:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 15270 invoked by uid 99); 26 Jan 2011 09:53:03 -0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Date: Wed, 26 Jan 2011 01:52:35 -0800 (PST)
From: Emmad <emmad_fast@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1296035555961-2352751.post@n3.nabble.com>
Subject: how to find filtered term enum?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


hi, i have been searching for getting the term enum for filtered documents...
I have index containing fields "group_id" and "user"..i know that we can
easily get unique Terms and their count for specific filed by following
code..

HashMap hmap= new HashMap();
TermEnum tenum= reader.terms(new Term("group_id"));
boolean next=true;

while(next==true && tenum.term().field().equals("group_id")){
       hmap.put(tenum.term().text(), tenum.docFreq());
       next=tenum.next();
}

but now problem is that i want to find unique term count on basis of some
filter...
e.g "I want to get users and their count in 'group_id:Java'  "

I can fulfill my requirement by iterating on documents whose "group_id:Java"
but this will slow down the process. Please guide me how to do this
efficiently... any other idea is highly appreciated :)
Thanks

-- 
View this message in context: http://lucene.472066.n3.nabble.com/how-to-find-filtered-term-enum-tp2352751p2352751.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 10:01:00 2011
Return-Path: <java-user-return-48551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7229 invoked from network); 26 Jan 2011 10:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 10:00:59 -0000
Received: (qmail 30713 invoked by uid 500); 26 Jan 2011 10:00:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30541 invoked by uid 500); 26 Jan 2011 10:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30533 invoked by uid 99); 26 Jan 2011 10:00:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 10:00:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.241.168.151] (HELO mua02.mx.cix.co.uk) (212.241.168.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 10:00:44 +0000
X-Envelope-From: dawn@digitorial.co.uk
Received: from mail.lemur.co.uk (host86-140-29-44.range86-140.btcentralplus.com [86.140.29.44])
	by mua02.mx.cix.co.uk (8.13.8/8.13.4) with SMTP id p0QA0Ngm027879
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 10:00:23 GMT
Received: from [192.168.1.250] ([192.168.1.250])
	by mail.lemur.co.uk
	with hMailServer ; Wed, 26 Jan 2011 10:00:24 +0000
Message-ID: <4D3FF095.6040303@digitorial.co.uk>
Date: Wed, 26 Jan 2011 09:59:49 +0000
From: =?ISO-8859-1?Q?Dawn_Zo=EB_Raison?= <dawn@digitorial.co.uk>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.13) Gecko/20101207 Lightning/1.0b2 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlight Wildcard Queries
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de> <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
In-Reply-To: <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Removing redundant calls to rewrite was the key when I had this issue 
moving from 2.3.x to 3.0.x...

Dawn

On 25/01/2011 20:04, Uwe Schindler wrote:
> And: you don't need to rewrite queries before highlighting, highlighter does
> this automatically internally if needed.
>
> -----
> Uwe Schindler



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 10:07:33 2011
Return-Path: <java-user-return-48552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16978 invoked from network); 26 Jan 2011 10:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 10:07:33 -0000
Received: (qmail 38871 invoked by uid 500); 26 Jan 2011 10:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38459 invoked by uid 500); 26 Jan 2011 10:07:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38451 invoked by uid 99); 26 Jan 2011 10:07:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 10:07:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 10:07:18 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id EC2611FC33
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 10:04:37 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NM+cW29NkaMT for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 11:04:35 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id D6FEA1FC50; Wed, 26 Jan 2011 11:04:35 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 93E721FC33
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 10:04:35 +0000 (UTC)
Message-ID: <4D3FF23F.5000407@dosco.de>
Date: Wed, 26 Jan 2011 11:06:55 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: RE: Highlight Wildcard Queries
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de> <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
In-Reply-To: <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Thank you Alexander and Uwe, for your help.

I read Marks explanation but it seems to me that his changes are not 
contained in Lucene-3.0.3.

So I commented out the rewrite, changed QueryTermScorer back to 
QueryScorer and now I got the wildcard queries highlighted again.

Wulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 12:20:38 2011
Return-Path: <java-user-return-48553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68826 invoked from network); 26 Jan 2011 12:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 12:20:38 -0000
Received: (qmail 5405 invoked by uid 500); 26 Jan 2011 12:20:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4930 invoked by uid 500); 26 Jan 2011 12:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4922 invoked by uid 99); 26 Jan 2011 12:20:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 12:20:32 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 12:20:27 +0000
Received: by iwn2 with SMTP id 2so887399iwn.35
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 04:20:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=31Q4cUBA4HO3n7UTnGwHoF3LS9Dh0LvmM/SYIOgkFkg=;
        b=vWGHWBpa2wfQnopaSSxof9K8ItKwQ1Ky/aI/z5jN/JY5OsA8zXTilel+R75WtJwHfF
         3AL1/aFvN0vD3Hf2x4q4D4hwXS29BB0xSqYj3YQR8Z+Xaf6aLc550TmvSaKLMSXhtRLg
         XolDn5vHAFIE6X5LKCnx2pGKtgeGrh+zhALBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=boFFiU262pRDc6H+legBcgxb3JdIo9QZ32HlLCmkXRrH+4lDKRSiBA8dPtmnvdNfKC
         X00/9qyuBBBTUFBuAwHKofsISL+9L/NkHtKUOevINiNrBgSwc/0bQMV3Ws2QsxRuw+Il
         u+MG6Se/VFx4yZ8yHMubqanfhI6ei2dQ3v3aI=
MIME-Version: 1.0
Received: by 10.231.171.197 with SMTP id i5mr8146571ibz.54.1296044406675; Wed,
 26 Jan 2011 04:20:06 -0800 (PST)
Received: by 10.231.208.81 with HTTP; Wed, 26 Jan 2011 04:20:06 -0800 (PST)
In-Reply-To: <AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
	<008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
	<AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com>
Date: Wed, 26 Jan 2011 12:20:06 +0000
Message-ID: <AANLkTinq3PZAorXewNhJAsB50A1YJiwKrd=sJFbgDTr=@mail.gmail.com>
Subject: Re: AssertionError
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c924367919cc049abeda55

--001636c924367919cc049abeda55
Content-Type: text/plain; charset=ISO-8859-1

It looks like Mockito is the culprit here.

Code fragment causing error:

final IndexWriter indexWriter = Mockito.spy(new
> IndexWriter(FSDirectory.open(new File("")), new
>      StandardAnalyzer(Version.LUCENE_30), MaxFieldLength.LIMITED));
> indexWriter.addDocument(new Document());
> indexWriter.commit();
>


Stack trace:
java.lang.AssertionError
    at
org.apache.lucene.index.IndexWriter$ReaderPool.commit(IndexWriter.java:557)
    at
org.apache.lucene.index.IndexWriter.startCommit(IndexWriter.java:4737)
    at
org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:3461)
    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3534)
    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3505)
    at myTestClass.test(myTestClass.java:10)


On Tue, Jan 25, 2011 at 6:37 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> ... and also the full exception?
>
> Mike
>
> On Tue, Jan 25, 2011 at 11:52 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > Can you post your code?
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Anuj Shah [mailto:anujshahwork@gmail.com]
> >> Sent: Tuesday, January 25, 2011 5:18 PM
> >> To: java-user@lucene.apache.org
> >> Subject: AssertionError
> >>
> >> Hi,
> >>
> >> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors
> from
> >> IndexWriter.ReaderPool.commit, at this line:
> >>
> >>       // We invoke deleter.checkpoint below, so we must be
> >> >       // sync'd on IW:
> >> >       assert Thread.holdsLock(IndexWriter.this);
> >> >
> >>
> >> Has anyone encountered this before? I'm hoping this is a common scenario
> >> and there is a quick fix to avoid it.
> >>
> >> Thanks
> >>
> >> Anuj
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c924367919cc049abeda55--

From java-user-return-48554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 12:40:24 2011
Return-Path: <java-user-return-48554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83625 invoked from network); 26 Jan 2011 12:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 12:40:24 -0000
Received: (qmail 27360 invoked by uid 500); 26 Jan 2011 12:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26990 invoked by uid 500); 26 Jan 2011 12:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26982 invoked by uid 99); 26 Jan 2011 12:40:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 12:40:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 12:40:11 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 16325D36003
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 13:39:51 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gg11TtJk2+1k for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 13:39:45 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9B434D36001
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 13:39:45 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>	<008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>	<AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com> <AANLkTinq3PZAorXewNhJAsB50A1YJiwKrd=sJFbgDTr=@mail.gmail.com>
In-Reply-To: <AANLkTinq3PZAorXewNhJAsB50A1YJiwKrd=sJFbgDTr=@mail.gmail.com>
Subject: RE: AssertionError
Date: Wed, 26 Jan 2011 13:40:03 +0100
Message-ID: <000a01cbbd56$27811840$768348c0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHPW9xFKt/EqgV+JwwiDRzh+wRUnAJfQIeBAqbJenACOgTtEJOh8qmQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I don't know Mockito, but the javadocs explains everything:

http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#spy(T)

IndexWriter is very sensitive to locking, so when the mocked implementation
does not lock on the real IndexWriter itself but instead on itself (because
the mock is synchronized on itself) you would violate this asserting. I also
expect that later (when assertions are disabled), your whole IndexWriter
will deadlock.

Why do you want to intercept calls to IW? The warning in the javadocs says
everything: " Partial mock usually means that the complexity has been moved
to a different method on the same object.
 In most cases, this is not the way you want to design your application.
However, there are rare cases when partial mocks come handy:  dealing with
code you cannot change easily (3rd party interfaces, interim refactoring of
legacy code etc.). However, I wouldn't use partial mocks for new,
test-driven & well-designed code."

Does any of this apply to Lucene? It's open source, so you can look into
source code and even change it!

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Anuj Shah [mailto:anujshahwork@gmail.com]
> Sent: Wednesday, January 26, 2011 1:20 PM
> To: java-user@lucene.apache.org
> Subject: Re: AssertionError
> 
> It looks like Mockito is the culprit here.
> 
> Code fragment causing error:
> 
> final IndexWriter indexWriter = Mockito.spy(new
> > IndexWriter(FSDirectory.open(new File("")), new
> >      StandardAnalyzer(Version.LUCENE_30), MaxFieldLength.LIMITED));
> > indexWriter.addDocument(new Document()); indexWriter.commit();
> >
> 
> 
> Stack trace:
> java.lang.AssertionError
>     at
> org.apache.lucene.index.IndexWriter$ReaderPool.commit(IndexWriter.java:
> 557)
>     at
> org.apache.lucene.index.IndexWriter.startCommit(IndexWriter.java:4737)
>     at
> org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:3461
> )
>     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3534)
>     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3505)
>     at myTestClass.test(myTestClass.java:10)
> 
> 
> On Tue, Jan 25, 2011 at 6:37 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
> 
> > ... and also the full exception?
> >
> > Mike
> >
> > On Tue, Jan 25, 2011 at 11:52 AM, Uwe Schindler <uwe@thetaphi.de>
> wrote:
> > > Can you post your code?
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > >> -----Original Message-----
> > >> From: Anuj Shah [mailto:anujshahwork@gmail.com]
> > >> Sent: Tuesday, January 25, 2011 5:18 PM
> > >> To: java-user@lucene.apache.org
> > >> Subject: AssertionError
> > >>
> > >> Hi,
> > >>
> > >> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors
> > from
> > >> IndexWriter.ReaderPool.commit, at this line:
> > >>
> > >>       // We invoke deleter.checkpoint below, so we must be
> > >> >       // sync'd on IW:
> > >> >       assert Thread.holdsLock(IndexWriter.this);
> > >> >
> > >>
> > >> Has anyone encountered this before? I'm hoping this is a common
> scenario
> > >> and there is a quick fix to avoid it.
> > >>
> > >> Thanks
> > >>
> > >> Anuj
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 13:58:07 2011
Return-Path: <java-user-return-48555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10943 invoked from network); 26 Jan 2011 13:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 13:58:07 -0000
Received: (qmail 14943 invoked by uid 500); 26 Jan 2011 13:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14526 invoked by uid 500); 26 Jan 2011 13:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14512 invoked by uid 99); 26 Jan 2011 13:57:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 13:57:59 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pierre.gosse@arisem.com designates 192.93.160.42 as permitted sender)
Received: from [192.93.160.42] (HELO mail.arisem.com) (192.93.160.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 13:57:52 +0000
Received: from enodios.ARISEM.COM (192.168.1.105) by mail.arisem.com
 (192.168.3.42) with Microsoft SMTP Server (TLS) id 8.1.436.0; Wed, 26 Jan
 2011 14:57:32 +0100
Received: from enodios.ARISEM.COM ([192.168.1.105]) by enodios.ARISEM.COM
 ([192.168.1.105]) with mapi; Wed, 26 Jan 2011 14:57:31 +0100
From: Pierre GOSSE <pierre.gosse@arisem.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 26 Jan 2011 14:57:29 +0100
Subject: RE: how to find filtered term enum?
Thread-Topic: how to find filtered term enum?
Thread-Index: Acu9P8WVk1InIPs5Q2ObYtYcKBdLTQAILu0w
Message-ID: <4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24E9D@enodios.ARISEM.COM>
References: <1296035555961-2352751.post@n3.nabble.com>
In-Reply-To: <1296035555961-2352751.post@n3.nabble.com>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: fr-FR, en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Solr's faceting would be the answer .. in solr.=20

Maybe you could find hints about doing that with lucene by having a look at=
 solr's code for faceting.

Pierre

-----Message d'origine-----
De=A0: Emmad [mailto:emmad_fast@yahoo.com]=20
Envoy=E9=A0: mercredi 26 janvier 2011 10:53
=C0=A0: java-user@lucene.apache.org
Objet=A0: how to find filtered term enum?


hi, i have been searching for getting the term enum for filtered documents.=
..
I have index containing fields "group_id" and "user"..i know that we can
easily get unique Terms and their count for specific filed by following
code..

HashMap hmap=3D new HashMap();
TermEnum tenum=3D reader.terms(new Term("group_id"));
boolean next=3Dtrue;

while(next=3D=3Dtrue && tenum.term().field().equals("group_id")){
       hmap.put(tenum.term().text(), tenum.docFreq());
       next=3Dtenum.next();
}

but now problem is that i want to find unique term count on basis of some
filter...
e.g "I want to get users and their count in 'group_id:Java'  "

I can fulfill my requirement by iterating on documents whose "group_id:Java=
"
but this will slow down the process. Please guide me how to do this
efficiently... any other idea is highly appreciated :)
Thanks

--=20
View this message in context: http://lucene.472066.n3.nabble.com/how-to-fin=
d-filtered-term-enum-tp2352751p2352751.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:10:46 2011
Return-Path: <java-user-return-48556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22828 invoked from network); 26 Jan 2011 14:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:10:46 -0000
Received: (qmail 29354 invoked by uid 500); 26 Jan 2011 14:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29230 invoked by uid 500); 26 Jan 2011 14:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29214 invoked by uid 99); 26 Jan 2011 14:10:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:10:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:10:31 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id F42071FC34
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:07:47 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CFoXjnLAx2Iv for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 15:07:47 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 38B821FC5D; Wed, 26 Jan 2011 15:07:47 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 01EF31FC34
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:07:46 +0000 (UTC)
Message-ID: <4D402B41.3020307@dosco.de>
Date: Wed, 26 Jan 2011 15:10:09 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlight Wildcard Queries: Scores
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de> <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de> <4D3FF23F.5000407@dosco.de>
In-Reply-To: <4D3FF23F.5000407@dosco.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Now I have the highlighted wildcards but obviously the scoring is lost. 
I see that a rewrite of the wildcard query produces a constant score 
query. I added
 
setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);

to my QueryParser instance but no effect. What's to be done now?

Wulf



Am 26.01.2011 11:06, schrieb Wulf Berschin:
> Thank you Alexander and Uwe, for your help.
>
> I read Marks explanation but it seems to me that his changes are not
> contained in Lucene-3.0.3.
>
> So I commented out the rewrite, changed QueryTermScorer back to
> QueryScorer and now I got the wildcard queries highlighted again.
>
> Wulf
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:19:30 2011
Return-Path: <java-user-return-48557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25539 invoked from network); 26 Jan 2011 14:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:19:29 -0000
Received: (qmail 43545 invoked by uid 500); 26 Jan 2011 14:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43321 invoked by uid 500); 26 Jan 2011 14:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43313 invoked by uid 99); 26 Jan 2011 14:19:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:19:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:19:16 +0000
Received: by qwe4 with SMTP id 4so976909qwe.35
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 06:18:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=MlM5JnCEWTPh2Iy39Aa5k/a6SadMjdKz2A/mkKrke+4=;
        b=Zt/lYsX1OSS1/98MLXlXz2GF5J4yG2fV/dbei4Zu0TwhMuA6yLQSUSvsFQMmj4iMq5
         PXWlmKh0BcIC1pV4ty0Rca8e7uBrF8MYvq2GnC74EpwnR+SPnZLckDAXduPJ+TFI+BVc
         K2LtVT3BgEcvwjV/PUOwCOnn+DMAcoyvcBpoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hVrfM2i1mGEo2frvBYX6i6h6rBFjB8LZ/PAj2wf4PVGxvpBgn7cmkAP/i2UjLQFwIc
         Qkosybk2zT4mHQApSgVJOMI/EepOonozWbUhqGGGNn/dvTGDtZy+wqkvmCXf/0EVBiD+
         fV6cssvbpjKw6Dw8xLckM3aSf9EwQrMv00V7o=
MIME-Version: 1.0
Received: by 10.229.95.200 with SMTP id e8mr422779qcn.213.1296051535486; Wed,
 26 Jan 2011 06:18:55 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Wed, 26 Jan 2011 06:18:55 -0800 (PST)
In-Reply-To: <4D402B41.3020307@dosco.de>
References: <4D3F0B08.5060100@dosco.de>
	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>
	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>
	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>
	<4D3FF23F.5000407@dosco.de>
	<4D402B41.3020307@dosco.de>
Date: Wed, 26 Jan 2011 09:18:55 -0500
Message-ID: <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com>
Subject: Re: Highlight Wildcard Queries: Scores
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee32a621f06049ac083aa
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee32a621f06049ac083aa
Content-Type: text/plain; charset=ISO-8859-1

It is, I think, a legitimate question to ask whether scoring is worthwhile
on wildcards. That is,
does it really improve the user experience? Because the MaxBooleanClause
gets tripped
pretty quickly if you add the terms back in, so you'd have to deal with
that.

Would your users be satisfied with sorting in the case of only searching on
wildcard characters
by, say, dates or titles or subjects or.....?

Then just let the scoring work on fields that aren't wildcarded...

This may not be reasonable in your particular case, but it's worth
considering before assuming that
scoring is necessary on wildcard terms.

Best
Erick

On Wed, Jan 26, 2011 at 9:10 AM, Wulf Berschin <berschin@dosco.de> wrote:

> Now I have the highlighted wildcards but obviously the scoring is lost. I
> see that a rewrite of the wildcard query produces a constant score query. I
> added
>
> setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);
>
> to my QueryParser instance but no effect. What's to be done now?
>
> Wulf
>
>
>
> Am 26.01.2011 11:06, schrieb Wulf Berschin:
>
>> Thank you Alexander and Uwe, for your help.
>>
>> I read Marks explanation but it seems to me that his changes are not
>> contained in Lucene-3.0.3.
>>
>> So I commented out the rewrite, changed QueryTermScorer back to
>> QueryScorer and now I got the wildcard queries highlighted again.
>>
>> Wulf
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ee32a621f06049ac083aa--

From java-user-return-48558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:24:30 2011
Return-Path: <java-user-return-48558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27202 invoked from network); 26 Jan 2011 14:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:24:30 -0000
Received: (qmail 50061 invoked by uid 500); 26 Jan 2011 14:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49742 invoked by uid 500); 26 Jan 2011 14:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49733 invoked by uid 99); 26 Jan 2011 14:24:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:24:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:24:17 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 97CD91F731
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:21:35 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NFjxf4Kvkq1S for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 15:21:34 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id CE0B11FC88; Wed, 26 Jan 2011 15:21:34 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 876191F731
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:21:34 +0000 (UTC)
Message-ID: <4D402E7C.3020005@dosco.de>
Date: Wed, 26 Jan 2011 15:23:56 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlight Wildcard Queries: Scores
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de> <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de> <4D3FF23F.5000407@dosco.de> <4D402B41.3020307@dosco.de>
In-Reply-To: <4D402B41.3020307@dosco.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Sorry for bothering, that was my fault: I my subclass of QueryParser 
which wraps * around the terms I had not yet considered the new 
multiTermRewriteMethod. After adding these scoring seems to work and 
even the rewrite is possible again.

Wulf

Am 26.01.2011 15:10, schrieb Wulf Berschin:
> Now I have the highlighted wildcards but obviously the scoring is lost.
> I see that a rewrite of the wildcard query produces a constant score
> query. I added
>
> setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);
>
> to my QueryParser instance but no effect. What's to be done now?
>
> Wulf
>
>
>
> Am 26.01.2011 11:06, schrieb Wulf Berschin:
>> Thank you Alexander and Uwe, for your help.
>>
>> I read Marks explanation but it seems to me that his changes are not
>> contained in Lucene-3.0.3.
>>
>> So I commented out the rewrite, changed QueryTermScorer back to
>> QueryScorer and now I got the wildcard queries highlighted again.
>>
>> Wulf
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


-- 

Mit freundlichen Gren,

Wulf Berschin

--

<!-- *****************************************************************
* Wulf Berschin                            Telefon: +49 6221 1486 16 *
* DOSCO Document Systems Consulting GmbH   Telefax: +49 6221 1486 19 *
* Mannheimer Strasse 1                     E-Mail: berschin@dosco.de *
* 69115 Heidelberg, Germany                http://www.dosco.de       *
* Handelsregister: Heidelberg HRB 335122                             *
* Geschftsfhrung: Robert Erfle                                     *
****************************************************************** -->


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:43:55 2011
Return-Path: <java-user-return-48559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33653 invoked from network); 26 Jan 2011 14:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:43:54 -0000
Received: (qmail 80101 invoked by uid 500); 26 Jan 2011 14:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79673 invoked by uid 500); 26 Jan 2011 14:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79661 invoked by uid 99); 26 Jan 2011 14:43:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:43:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:43:40 +0000
In-Reply-To: <AANLkTimkJcBzE_mEjstEEO0ur_TweFXLzqpff71D4=mG@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
X-KeepSent: 36B6B128:36BB5799-C1257824:004FB3A7;
 type=4; name=$KeepSent
X-Mailer: OpenMailer1.0
From: v.sevel@lombardodier.com
Message-ID: <OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com>
Date: Wed, 26 Jan 2011 15:33:12 +0100
Subject: Re: gracefully interrupting an optimize
X-SendAsMailing: 0
X-MIMETrack: Cleaned
Content-Type: multipart/alternative; boundary="=_alternative 004FF1BCC1257824_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004FF1BCC1257824_=
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Michael,

I suppose that as you suggested, if I do a close(false) during an optimize =

I am supposed to expect the following exception:

java.io.IOException: background merge hit exception: =5F3ud72:c33936445=20
=5F3uqhr:c126349 =5F3uuf8:c57041 =5F3v27p:c78599 =5F3vf2s:c111005 =5F3vfad:=
c6574=20
=5F3vrcj:c130263 =5F3vrci:c1224 into =5F3vrck [optimize] [mergeDocStores]
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2859)
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2794)
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2764)
        at logserver.LuceneWriter.optimize(LuceneWriter.java:91)
        at logserver.SweeperMgr.optimize(SweeperMgr.java:196)
        at logserver.SweeperMgr.safelyExecute(SweeperMgr.java:104)
        at logserver.SweeperMgr.access$1(SweeperMgr.java:90)
        at logserver.SweeperMgr$1.run(SweeperMgr.java:74)
Caused by: org.apache.lucene.index.MergePolicy$MergeAbortedException:=20
merge is aborted: =5F3ud72:c33936445 =5F3uqhr:c126349 =5F3uuf8:c57041=20
=5F3v27p:c78599 =5F3vf2s:c111005 =5F3vfad:c6574 =5F3vrcj:c130263 =5F3vrci:c=
1224 into=20
=5F3vrck [optimize] [mergeDocStores]
        at=20
org.apache.lucene.index.MergePolicy$OneMerge.checkAborted(MergePolicy.java:=
122)
        at=20
org.apache.lucene.index.SegmentMerger$CheckAbort.work(SegmentMerger.java:78=
8)
        at=20
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:650)
        at=20
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586)
        at=20
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
        at=20
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
        at=20
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
        at=20
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeSch=
eduler.java:235)
        at=20
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurrent=
MergeScheduler.java:291)

right? I can interpret this as "everything is as planned".

thanks


Vincent Sevel








Michael McCandless <lucene@mikemccandless.com>=20
=20
=20
21.01.2011 15:48
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: gracefully interrupting an optimize






No.

If you just do IW.close() <-- no boolean specified, then that defaults
to IW.close(true) which means "wait for all BG merges to finish".

So "normally" IW.close() reserves the right to take a long time.

But IW.close(false) should finish relatively quickly...

Mike

On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
> Would that happen "automagically" at finalization?
>
> paul
>
>
> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>
>> If you call optimize(false), that'll return immediately but run the
>> optimize "in the background" (assuming you are using the default
>> ConcurrentMergeScheduler).
>>
>> Later, when it's time to stop optimizing, call IW.close(false), which
>> will abort any running merges yet keep any merges that had finished
>> (so some work, but not necessarily all work, is lost); it should
>> return quickly.
>>
>> Mike
>>
>> On Fri, Jan 21, 2011 at 8:28 AM,  <v.sevel@lombardodier.com> wrote:
>>> Hi,
>>>
>>> Each night I optimize an index that contains 35 millions docs. Its=20
takes
>>> about 1.5 hours. For maintenance reasons, it may happen that the=20
machine
>>> gets rebooted. In that case, server gets a chance to gracefully=20
shutdown,
>>> but eventually, the reboot script will kill the processes that did not
>>> stop in time. My preference would to stop gracefully the optimize=20
rather
>>> than getting the process killed. Is there a way to do that?
>>>
>>> Thanks,
>>>
>>> Vincent
>>>
>>> ************************ DISCLAIMER ************************
>>> This message is intended only for use by the person to
>>> whom it is addressed. It may contain information that is
>>> privileged and confidential. Its content does not
>>> constitute a formal commitment by Lombard Odier
>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>> If you are not the intended recipient of this message,
>>> kindly notify the sender immediately and destroy this
>>> message. Thank You.
>>> *****************************************************************
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier
Darier Hentsch & Cie or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 004FF1BCC1257824_=--

From java-user-return-48560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:56:06 2011
Return-Path: <java-user-return-48560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37085 invoked from network); 26 Jan 2011 14:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:56:05 -0000
Received: (qmail 2154 invoked by uid 500); 26 Jan 2011 14:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1862 invoked by uid 500); 26 Jan 2011 14:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1854 invoked by uid 99); 26 Jan 2011 14:55:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:55:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:55:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 586FAD36003
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 15:55:30 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fdlazxXDEbxa for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 15:55:23 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 96403D36001
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 15:55:23 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de> <AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com> <00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de> <00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de> <4D3FF23F.5000407@dosco.de> <4D402B41.3020307@dosco.de> <4D402E7C.3020005@dosco.de>
In-Reply-To: <4D402E7C.3020005@dosco.de>
Subject: RE: Highlight Wildcard Queries: Scores
Date: Wed, 26 Jan 2011 15:55:41 +0100
Message-ID: <001401cbbd69$1a02adb0$4e080910$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldAbqtWlQBcBemrQGfztF/AUpm5JkB0+cm+5Ke9j+A
Content-Language: de

You should still not rewrite yourself and let always Lucene do that. =
When
you rewrite, Lucene is no longer able to detect the correct rewrite =
mode, as
it only sees ConstantScore query. Rewrite should only be called by =
internal
Lucene APIs (e.g. IndexSearcher does it before executing the query) and
(that=92s most important) highlighter does it more effective by only =
using the
One-Document-Index. If you rewrite the query before highlighting against
your IndexSearcher, it gets rewritten against the complete index which =
may
cost lots of time for wildcards or other MultiTermQueries. If you let
highlighter rewrite it, it will only rewrite it against the one-document
MemoryIndex that needs to be highlighted.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Wulf Berschin [mailto:berschin@dosco.de]
> Sent: Wednesday, January 26, 2011 3:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: Highlight Wildcard Queries: Scores
>=20
> Sorry for bothering, that was my fault: I my subclass of QueryParser =
which
> wraps * around the terms I had not yet considered the new
> multiTermRewriteMethod. After adding these scoring seems to work and
> even the rewrite is possible again.
>=20
> Wulf
>=20
> Am 26.01.2011 15:10, schrieb Wulf Berschin:
> > Now I have the highlighted wildcards but obviously the scoring is =
lost.
> > I see that a rewrite of the wildcard query produces a constant score
> > query. I added
> >
> >
> setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY
> _REWRITE
> > );
> >
> > to my QueryParser instance but no effect. What's to be done now?
> >
> > Wulf
> >
> >
> >
> > Am 26.01.2011 11:06, schrieb Wulf Berschin:
> >> Thank you Alexander and Uwe, for your help.
> >>
> >> I read Marks explanation but it seems to me that his changes are =
not
> >> contained in Lucene-3.0.3.
> >>
> >> So I commented out the rewrite, changed QueryTermScorer back to
> >> QueryScorer and now I got the wildcard queries highlighted again.
> >>
> >> Wulf
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
>=20
>=20
> --
>=20
> Mit freundlichen Gr=FC=DFen,
>=20
> Wulf Berschin
>=20
> --
>=20
> <!--
> **********************************************************
> *******
> * Wulf Berschin                            Telefon: +49 6221 1486 16 *
> * DOSCO Document Systems Consulting GmbH   Telefax: +49 6221 1486 19 *
> * Mannheimer Strasse 1                     E-Mail: berschin@dosco.de *
> * 69115 Heidelberg, Germany                http://www.dosco.de       *
> * Handelsregister: Heidelberg HRB 335122                             *
> * Gesch=E4ftsf=FChrung: Robert Erfle                                   =
  *
> **********************************************************
> ******** -->
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:56:45 2011
Return-Path: <java-user-return-48561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37186 invoked from network); 26 Jan 2011 14:56:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:56:45 -0000
Received: (qmail 3969 invoked by uid 500); 26 Jan 2011 14:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3842 invoked by uid 500); 26 Jan 2011 14:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3832 invoked by uid 99); 26 Jan 2011 14:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:56:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:56:33 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id B0A231FC5D
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:53:49 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QvRUKucKtheT for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 15:53:48 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 3A03C1FC7F; Wed, 26 Jan 2011 15:53:48 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id D93241FC5D
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 14:53:47 +0000 (UTC)
Message-ID: <4D40360A.2060706@dosco.de>
Date: Wed, 26 Jan 2011 15:56:10 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: Scores
References: <4D3F0B08.5060100@dosco.de>	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>	<4D3FF23F.5000407@dosco.de>	<4D402B41.3020307@dosco.de> <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com>
In-Reply-To: <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi Erick,

good points, but:

our index is fed with german text. In german (in contrast to english) 
nouns are just appended to create new words. E.g.

Kaffee
Kaffeemaschine
Kaffeemaschinensatzbehlter

In our scenario standard fulltext search on "Maschine" shall present all 
of these nouns. That's why we add * before and after on each term.

Of course we provide an option "full words only" which finds none of these.

Since we do not wrap * around words shorter than 4 characters we weren't 
yet faced with the too many clauses exception.

Greetings
Wulf

Am 26.01.2011 15:18, schrieb Erick Erickson:
> It is, I think, a legitimate question to ask whether scoring is worthwhile
> on wildcards. That is,
> does it really improve the user experience? Because the MaxBooleanClause
> gets tripped
> pretty quickly if you add the terms back in, so you'd have to deal with
> that.
>
> Would your users be satisfied with sorting in the case of only searching on
> wildcard characters
> by, say, dates or titles or subjects or.....?
>
> Then just let the scoring work on fields that aren't wildcarded...
>
> This may not be reasonable in your particular case, but it's worth
> considering before assuming that
> scoring is necessary on wildcard terms.
>
> Best
> Erick
>
> On Wed, Jan 26, 2011 at 9:10 AM, Wulf Berschin<berschin@dosco.de>  wrote:
>
>> Now I have the highlighted wildcards but obviously the scoring is lost. I
>> see that a rewrite of the wildcard query produces a constant score query. I
>> added
>>
>> setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);
>>
>> to my QueryParser instance but no effect. What's to be done now?
>>
>> Wulf
>>
>>
>>
>> Am 26.01.2011 11:06, schrieb Wulf Berschin:
>>
>>> Thank you Alexander and Uwe, for your help.
>>>
>>> I read Marks explanation but it seems to me that his changes are not
>>> contained in Lucene-3.0.3.
>>>
>>> So I commented out the rewrite, changed QueryTermScorer back to
>>> QueryScorer and now I got the wildcard queries highlighted again.
>>>
>>> Wulf
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 14:56:52 2011
Return-Path: <java-user-return-48562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37261 invoked from network); 26 Jan 2011 14:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 14:56:52 -0000
Received: (qmail 6010 invoked by uid 500); 26 Jan 2011 14:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4745 invoked by uid 500); 26 Jan 2011 14:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4517 invoked by uid 99); 26 Jan 2011 14:56:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:56:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 14:56:36 +0000
In-Reply-To: <OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
X-KeepSent: 3809FCD5:EB3A2512-C1257824:0051952D;
 type=4; name=$KeepSent
X-Mailer: OpenMailer1.0
From: v.sevel@lombardodier.com
Message-ID: <OF3809FCD5.EB3A2512-ONC1257824.0051952D-C1257824.0052059C@biz.lodh.com>
Date: Wed, 26 Jan 2011 15:55:53 +0100
Subject: Re: gracefully interrupting an optimize
X-SendAsMailing: 0
X-MIMETrack: Cleaned
Content-Type: multipart/alternative; boundary="=_alternative 0052059AC1257824_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0052059AC1257824_=
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

And do I need to do any cleanup once I catch the MergeAbortedException=20
(such as writer commit or rollback)?
Thanks,


Vincent=20







v.sevel@lombardodier.com=20
=20
=20
26.01.2011 15:44
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: gracefully interrupting an optimize






Hi Michael,

I suppose that as you suggested, if I do a close(false) during an optimize =


I am supposed to expect the following exception:

java.io.IOException: background merge hit exception: =5F3ud72:c33936445=20
=5F3uqhr:c126349 =5F3uuf8:c57041 =5F3v27p:c78599 =5F3vf2s:c111005 =5F3vfad:=
c6574=20
=5F3vrcj:c130263 =5F3vrci:c1224 into =5F3vrck [optimize] [mergeDocStores]
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2859)
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2794)
        at=20
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2764)
        at logserver.LuceneWriter.optimize(LuceneWriter.java:91)
        at logserver.SweeperMgr.optimize(SweeperMgr.java:196)
        at logserver.SweeperMgr.safelyExecute(SweeperMgr.java:104)
        at logserver.SweeperMgr.access$1(SweeperMgr.java:90)
        at logserver.SweeperMgr$1.run(SweeperMgr.java:74)
Caused by: org.apache.lucene.index.MergePolicy$MergeAbortedException:=20
merge is aborted: =5F3ud72:c33936445 =5F3uqhr:c126349 =5F3uuf8:c57041=20
=5F3v27p:c78599 =5F3vf2s:c111005 =5F3vfad:c6574 =5F3vrcj:c130263 =5F3vrci:c=
1224 into=20

=5F3vrck [optimize] [mergeDocStores]
        at=20
org.apache.lucene.index.MergePolicy$OneMerge.checkAborted(MergePolicy.java:=
122)
        at=20
org.apache.lucene.index.SegmentMerger$CheckAbort.work(SegmentMerger.java:78=
8)
        at=20
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:650)
        at=20
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586)
        at=20
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
        at=20
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
        at=20
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
        at=20
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeSch=
eduler.java:235)
        at=20
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurrent=
MergeScheduler.java:291)

right? I can interpret this as "everything is as planned".

thanks


Vincent Sevel








Michael McCandless <lucene@mikemccandless.com>=20
=20
=20
21.01.2011 15:48
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: gracefully interrupting an optimize






No.

If you just do IW.close() <-- no boolean specified, then that defaults
to IW.close(true) which means "wait for all BG merges to finish".

So "normally" IW.close() reserves the right to take a long time.

But IW.close(false) should finish relatively quickly...

Mike

On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> wrote:
> Would that happen "automagically" at finalization?
>
> paul
>
>
> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>
>> If you call optimize(false), that'll return immediately but run the
>> optimize "in the background" (assuming you are using the default
>> ConcurrentMergeScheduler).
>>
>> Later, when it's time to stop optimizing, call IW.close(false), which
>> will abort any running merges yet keep any merges that had finished
>> (so some work, but not necessarily all work, is lost); it should
>> return quickly.
>>
>> Mike
>>
>> On Fri, Jan 21, 2011 at 8:28 AM,  <v.sevel@lombardodier.com> wrote:
>>> Hi,
>>>
>>> Each night I optimize an index that contains 35 millions docs. Its=20
takes
>>> about 1.5 hours. For maintenance reasons, it may happen that the=20
machine
>>> gets rebooted. In that case, server gets a chance to gracefully=20
shutdown,
>>> but eventually, the reboot script will kill the processes that did not
>>> stop in time. My preference would to stop gracefully the optimize=20
rather
>>> than getting the process killed. Is there a way to do that?
>>>
>>> Thanks,
>>>
>>> Vincent
>>>
>>> ************************ DISCLAIMER ************************
>>> This message is intended only for use by the person to
>>> whom it is addressed. It may contain information that is
>>> privileged and confidential. Its content does not
>>> constitute a formal commitment by Lombard Odier
>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>> If you are not the intended recipient of this message,
>>> kindly notify the sender immediately and destroy this
>>> message. Thank You.
>>> *****************************************************************
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier
Darier Hentsch & Cie or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************



************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier
Darier Hentsch & Cie or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 0052059AC1257824_=--

From java-user-return-48563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 15:01:11 2011
Return-Path: <java-user-return-48563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39816 invoked from network); 26 Jan 2011 15:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 15:01:10 -0000
Received: (qmail 29379 invoked by uid 500); 26 Jan 2011 15:01:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28927 invoked by uid 500); 26 Jan 2011 15:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28906 invoked by uid 99); 26 Jan 2011 15:01:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 15:01:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 15:00:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 716AED36003
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 16:00:35 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7-tylasUIxpt for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 16:00:30 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3C9EDD36001
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 16:00:30 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de>	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>	<4D3FF23F.5000407@dosco.de>	<4D402B41.3020307@dosco.de> <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com> <4D40360A.2060706@dosco.de>
In-Reply-To: <4D40360A.2060706@dosco.de>
Subject: RE: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: Scores
Date: Wed, 26 Jan 2011 16:00:47 +0100
Message-ID: <001801cbbd69$d0c41c00$724c5400$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldAbqtWlQBcBemrQGfztF/AUpm5JkCKyICQgJmem0ukokKeaA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wulf,

You should consider decompounding! There are filters based on =
dictionaries
that support decompounding german words. It=92s a TokenFilter to be put =
into
your analysis chain.
There is a simple Lucene-Rule: Whenever you need wildcards think about =
your
analysis, you probably did something wrong :-) Add stemming, =
decompounding,
synonyms,...

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Wulf Berschin [mailto:berschin@dosco.de]
> Sent: Wednesday, January 26, 2011 3:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: Scores
>=20
> Hi Erick,
>=20
> good points, but:
>=20
> our index is fed with german text. In german (in contrast to english)
nouns
> are just appended to create new words. E.g.
>=20
> Kaffee
> Kaffeemaschine
> Kaffeemaschinensatzbeh=E4lter
>=20
> In our scenario standard fulltext search on "Maschine" shall present =
all
of
> these nouns. That's why we add * before and after on each term.
>=20
> Of course we provide an option "full words only" which finds none of
these.
>=20
> Since we do not wrap * around words shorter than 4 characters we =
weren't
> yet faced with the too many clauses exception.
>=20
> Greetings
> Wulf
>=20
> Am 26.01.2011 15:18, schrieb Erick Erickson:
> > It is, I think, a legitimate question to ask whether scoring is
> > worthwhile on wildcards. That is, does it really improve the user
> > experience? Because the MaxBooleanClause gets tripped pretty quickly
> > if you add the terms back in, so you'd have to deal with that.
> >
> > Would your users be satisfied with sorting in the case of only
> > searching on wildcard characters by, say, dates or titles or =
subjects
> > or.....?
> >
> > Then just let the scoring work on fields that aren't wildcarded...
> >
> > This may not be reasonable in your particular case, but it's worth
> > considering before assuming that scoring is necessary on wildcard
> > terms.
> >
> > Best
> > Erick
> >
> > On Wed, Jan 26, 2011 at 9:10 AM, Wulf Berschin<berschin@dosco.de>
> wrote:
> >
> >> Now I have the highlighted wildcards but obviously the scoring is
> >> lost. I see that a rewrite of the wildcard query produces a =
constant
> >> score query. I added
> >>
> >>
> setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY
> _REWRIT
> >> E);
> >>
> >> to my QueryParser instance but no effect. What's to be done now?
> >>
> >> Wulf
> >>
> >>
> >>
> >> Am 26.01.2011 11:06, schrieb Wulf Berschin:
> >>
> >>> Thank you Alexander and Uwe, for your help.
> >>>
> >>> I read Marks explanation but it seems to me that his changes are =
not
> >>> contained in Lucene-3.0.3.
> >>>
> >>> So I commented out the rewrite, changed QueryTermScorer back to
> >>> QueryScorer and now I got the wildcard queries highlighted again.
> >>>
> >>> Wulf
> >>>
> >>>
> >>> =
--------------------------------------------------------------------
> >>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 16:08:04 2011
Return-Path: <java-user-return-48564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81584 invoked from network); 26 Jan 2011 16:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 16:08:03 -0000
Received: (qmail 71243 invoked by uid 500); 26 Jan 2011 16:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71003 invoked by uid 500); 26 Jan 2011 16:07:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70995 invoked by uid 99); 26 Jan 2011 16:07:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:07:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:07:50 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id C564C1F8A9
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 16:05:07 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mknYmrhQDQwF for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 17:05:06 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id BA1931FC93; Wed, 26 Jan 2011 17:05:06 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 6A9C01F8A9
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 16:05:06 +0000 (UTC)
Message-ID: <4D4046C1.2020701@dosco.de>
Date: Wed, 26 Jan 2011 17:07:29 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlight Wildcard Queries: Scores
References: <4D3F0B08.5060100@dosco.de>	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>	<4D3FF23F.5000407@dosco.de>	<4D402B41.3020307@dosco.de> <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com> <4D40360A.2060706@dosco.de> <001801cbbd69$d0c41c00$724c5400$@thetaphi.de>
In-Reply-To: <001801cbbd69$d0c41c00$724c5400$@thetaphi.de>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit

Hallo Uwe,

yes, thanks for the hint, that sounds good, but it seems to me I would 
then need more fields for all our search modes:

Now we have the fields "contents" without stoppwords and with stemming 
and "contents-unstemmed" whithout stemming.

The search options are:
- whole word (search "contents", no asterisks are being added before search)
- exact match (search "contents-unstemmed", implies whole word)

When decomposition comes into play I will need a third field 
"contents-undecomposed" (sorry) to perform the whole word search. 
Furthermore the contents-unstemmed should not be decomposed as well.

Would you still prefer this approach?

Viele Gre aus Heidelberg
Wulf






Am 26.01.2011 16:00, schrieb Uwe Schindler:
> Hi Wulf,
>
> You should consider decompounding! There are filters based on dictionaries
> that support decompounding german words. Its a TokenFilter to be put into
> your analysis chain.
> There is a simple Lucene-Rule: Whenever you need wildcards think about your
> analysis, you probably did something wrong :-) Add stemming, decompounding,
> synonyms,...
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Wulf Berschin [mailto:berschin@dosco.de]
>> Sent: Wednesday, January 26, 2011 3:56 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: Scores
>>
>> Hi Erick,
>>
>> good points, but:
>>
>> our index is fed with german text. In german (in contrast to english)
> nouns
>> are just appended to create new words. E.g.
>>
>> Kaffee
>> Kaffeemaschine
>> Kaffeemaschinensatzbehlter
>>
>> In our scenario standard fulltext search on "Maschine" shall present all
> of
>> these nouns. That's why we add * before and after on each term.
>>
>> Of course we provide an option "full words only" which finds none of
> these.
>>
>> Since we do not wrap * around words shorter than 4 characters we weren't
>> yet faced with the too many clauses exception.
>>
>> Greetings
>> Wulf
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 16:34:35 2011
Return-Path: <java-user-return-48565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88537 invoked from network); 26 Jan 2011 16:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 16:34:35 -0000
Received: (qmail 10463 invoked by uid 500); 26 Jan 2011 16:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9782 invoked by uid 500); 26 Jan 2011 16:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9768 invoked by uid 99); 26 Jan 2011 16:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:34:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:34:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6940DD36003
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 17:34:00 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sH2sNcg1+clC for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 17:33:55 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3187DD36001
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 17:33:55 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de>	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>	<4D3FF23F.5000407@dosco.de>	<4D402B41.3020307@dosco.de> <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com> <4D40360A.2060706@dosco.de> <001801cbbd69$d0c41c00$724c5400$@thetaphi.de> <4D4046C1.2020701@dosco.de>
In-Reply-To: <4D4046C1.2020701@dosco.de>
Subject: RE: Highlight Wildcard Queries: Scores
Date: Wed, 26 Jan 2011 17:34:12 +0100
Message-ID: <001d01cbbd76$dd9262e0$98b728a0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldAbqtWlQBcBemrQGfztF/AUpm5JkCKyICQgJmem0uAeSjpf4B4itxMpJq7oGg
Content-Language: de

You can always decompose because QueryParser will also decompose and =
will
do-the-right-thing (internal using a PhraseQuery - don't hurt me, =
Robert).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Wulf Berschin [mailto:berschin@dosco.de]
> Sent: Wednesday, January 26, 2011 5:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: Highlight Wildcard Queries: Scores
>=20
> Hallo Uwe,
>=20
> yes, thanks for the hint, that sounds good, but it seems to me I would
then
> need more fields for all our search modes:
>=20
> Now we have the fields "contents" without stoppwords and with stemming
> and "contents-unstemmed" whithout stemming.
>=20
> The search options are:
> - whole word (search "contents", no asterisks are being added before
> search)
> - exact match (search "contents-unstemmed", implies whole word)
>=20
> When decomposition comes into play I will need a third field =
"contents-
> undecomposed" (sorry) to perform the whole word search.
> Furthermore the contents-unstemmed should not be decomposed as well.
>=20
> Would you still prefer this approach?
>=20
> Viele Gr=FC=DFe aus Heidelberg
> Wulf
>=20
>=20
>=20
>=20
>=20
>=20
> Am 26.01.2011 16:00, schrieb Uwe Schindler:
> > Hi Wulf,
> >
> > You should consider decompounding! There are filters based on
> > dictionaries that support decompounding german words. It=92s a
> > TokenFilter to be put into your analysis chain.
> > There is a simple Lucene-Rule: Whenever you need wildcards think =
about
> > your analysis, you probably did something wrong :-) Add stemming,
> > decompounding, synonyms,...
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Wulf Berschin [mailto:berschin@dosco.de]
> >> Sent: Wednesday, January 26, 2011 3:56 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: =
Scores
> >>
> >> Hi Erick,
> >>
> >> good points, but:
> >>
> >> our index is fed with german text. In german (in contrast to =
english)
> > nouns
> >> are just appended to create new words. E.g.
> >>
> >> Kaffee
> >> Kaffeemaschine
> >> Kaffeemaschinensatzbeh=E4lter
> >>
> >> In our scenario standard fulltext search on "Maschine" shall =
present
> >> all
> > of
> >> these nouns. That's why we add * before and after on each term.
> >>
> >> Of course we provide an option "full words only" which finds none =
of
> > these.
> >>
> >> Since we do not wrap * around words shorter than 4 characters we
> >> weren't yet faced with the too many clauses exception.
> >>
> >> Greetings
> >> Wulf
> >>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 16:43:50 2011
Return-Path: <java-user-return-48566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91597 invoked from network); 26 Jan 2011 16:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 16:43:50 -0000
Received: (qmail 25261 invoked by uid 500); 26 Jan 2011 16:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24794 invoked by uid 500); 26 Jan 2011 16:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24779 invoked by uid 99); 26 Jan 2011 16:43:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:43:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 16:43:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 205AA45EC1C
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 17:43:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nCKlhEOeTWBK for <java-user@lucene.apache.org>;
	Wed, 26 Jan 2011 17:43:12 +0100 (CET)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D4BB445E96C
	for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 17:43:11 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4D3F0B08.5060100@dosco.de>	<AANLkTintKmG9adL_iNH+7ZxkaoqNRhUgEQMMY3cFjB1+@mail.gmail.com>	<00ab01cbbcca$b46143c0$1d23cb40$@thetaphi.de>	<00ac01cbbccb$1438a270$3ca9e750$@thetaphi.de>	<4D3FF23F.5000407@dosco.de>	<4D402B41.3020307@dosco.de> <AANLkTi=_oGHbHfpnhA45wPXmx0FbNXvDRLaTCs84M-dM@mail.gmail.com> <4D40360A.2060706@dosco.de> <001801cbbd69$d0c41c00$724c5400$@thetaphi.de> <4D4046C1.2020701@dosco.de> <001d01cbbd76$dd9262e0$98b728a0$@thetaphi.de>
In-Reply-To: <001d01cbbd76$dd9262e0$98b728a0$@thetaphi.de>
Subject: RE: Highlight Wildcard Queries: Scores
Date: Wed, 26 Jan 2011 17:43:29 +0100
Message-ID: <001e01cbbd78$295a9ac0$7c0fd040$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJFX4XY+uky4+10mS8HRg1Aeh85cQI6lqldAbqtWlQBcBemrQGfztF/AUpm5JkCKyICQgJmem0uAeSjpf4B4itxMgFOo955kmB6roA=
Content-Language: de

Hi again,

Sorry, the TokenFilter for decomposing will also add the original token =
to
the filter, so for Donaudampfschifffahrtskapit=E4n it will produce the
following tokens:

Donaudampfschifffahrtskapit=E4n, donau, dampf, schiff, fahrts, kapit=E4n

If you assume that, you would use the Decompounder only during Indexing =
and
on the query side you would leave this tokenfilter out (use 2 different
analyszers like solr does for its "index" and "query" analyzers). No =
need
for separate fields. On query side no decompounding is done so you can =
enter
any of the above terms and get a hit.

Stemming should be done after decompounding.

Sorry for misinformation before, sometimes you have to read the
documentation!
Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Wednesday, January 26, 2011 5:34 PM
> To: java-user@lucene.apache.org
> Subject: RE: Highlight Wildcard Queries: Scores
>=20
> You can always decompose because QueryParser will also decompose and
> will do-the-right-thing (internal using a PhraseQuery - don't hurt me,
Robert).
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Wulf Berschin [mailto:berschin@dosco.de]
> > Sent: Wednesday, January 26, 2011 5:07 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Highlight Wildcard Queries: Scores
> >
> > Hallo Uwe,
> >
> > yes, thanks for the hint, that sounds good, but it seems to me I =
would
> then
> > need more fields for all our search modes:
> >
> > Now we have the fields "contents" without stoppwords and with
> stemming
> > and "contents-unstemmed" whithout stemming.
> >
> > The search options are:
> > - whole word (search "contents", no asterisks are being added before
> > search)
> > - exact match (search "contents-unstemmed", implies whole word)
> >
> > When decomposition comes into play I will need a third field
> > "contents- undecomposed" (sorry) to perform the whole word search.
> > Furthermore the contents-unstemmed should not be decomposed as well.
> >
> > Would you still prefer this approach?
> >
> > Viele Gr=FC=DFe aus Heidelberg
> > Wulf
> >
> >
> >
> >
> >
> >
> > Am 26.01.2011 16:00, schrieb Uwe Schindler:
> > > Hi Wulf,
> > >
> > > You should consider decompounding! There are filters based on
> > > dictionaries that support decompounding german words. It=92s a
> > > TokenFilter to be put into your analysis chain.
> > > There is a simple Lucene-Rule: Whenever you need wildcards think
> > > about your analysis, you probably did something wrong :-) Add
> > > stemming, decompounding, synonyms,...
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > >> -----Original Message-----
> > >> From: Wulf Berschin [mailto:berschin@dosco.de]
> > >> Sent: Wednesday, January 26, 2011 3:56 PM
> > >> To: java-user@lucene.apache.org
> > >> Subject: Re: ****SPAM(5.0)**** Re: Highlight Wildcard Queries: =
Scores
> > >>
> > >> Hi Erick,
> > >>
> > >> good points, but:
> > >>
> > >> our index is fed with german text. In german (in contrast to =
english)
> > > nouns
> > >> are just appended to create new words. E.g.
> > >>
> > >> Kaffee
> > >> Kaffeemaschine
> > >> Kaffeemaschinensatzbeh=E4lter
> > >>
> > >> In our scenario standard fulltext search on "Maschine" shall =
present
> > >> all
> > > of
> > >> these nouns. That's why we add * before and after on each term.
> > >>
> > >> Of course we provide an option "full words only" which finds none =
of
> > > these.
> > >>
> > >> Since we do not wrap * around words shorter than 4 characters we
> > >> weren't yet faced with the too many clauses exception.
> > >>
> > >> Greetings
> > >> Wulf
> > >>
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 17:23:10 2011
Return-Path: <java-user-return-48567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12364 invoked from network); 26 Jan 2011 17:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 17:23:09 -0000
Received: (qmail 88201 invoked by uid 500); 26 Jan 2011 17:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87696 invoked by uid 500); 26 Jan 2011 17:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 88784 invoked by uid 99); 26 Jan 2011 16:14:46 -0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Date: Wed, 26 Jan 2011 08:14:19 -0800 (PST)
From: Emmad <emmad_fast@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1296058459460-2355007.post@n3.nabble.com>
In-Reply-To: <4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24E9D@enodios.ARISEM.COM>
References: <1296035555961-2352751.post@n3.nabble.com> <4A1AC1E08A1A4A438C4E4502E73AFC7449D8F24E9D@enodios.ARISEM.COM>
Subject: RE: how to find filtered term enum?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Pierre for your reply. Actually m not able to find that could you
please elaborate that how solr do this? any guess?
-- 
View this message in context: http://lucene.472066.n3.nabble.com/how-to-find-filtered-term-enum-tp2352751p2355007.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 17:27:57 2011
Return-Path: <java-user-return-48568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13774 invoked from network); 26 Jan 2011 17:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 17:27:57 -0000
Received: (qmail 97056 invoked by uid 500); 26 Jan 2011 17:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96879 invoked by uid 500); 26 Jan 2011 17:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96869 invoked by uid 99); 26 Jan 2011 17:27:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 17:27:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 17:27:47 +0000
Received: by iyb26 with SMTP id 26so638737iyb.35
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 09:27:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=vC4artHhprN7+FeDfjXhVO+y9FvjxdnfNHcHyijYr6w=;
        b=i4jVWaFMYIQ0qgGL5xz/oAhdT8N2WJ5ew5fsXP6xCvJa2BoU97NpMTL1O0YpRx4C3F
         KVC03lWGsaerEt8VLFHsHUTiW4oJUoFuFydf7QXaofw8mGscPuMAgff2+K+nSHFJb+QT
         7PENKXGwhbdJRS2Yj2zRnkUNFMpgkS5RlL3Oo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZeujxxeyIiMOg1jqk9WlApb8+ObRkQs0vyOHyOfL+aiWlmZuQ6M5Frr8H3LH56xRIY
         6dhYTAMoasYIqDKSjtjUj0rpBuUTHjHd/jO7tM7MmOHo050iCvxCUdNv0S19z6J9n8VY
         P6ynnLp85iiZOaCwyVb2ksTiHt2u2FcR6nqv8=
MIME-Version: 1.0
Received: by 10.231.40.3 with SMTP id i3mr8575666ibe.129.1296062844507; Wed,
 26 Jan 2011 09:27:24 -0800 (PST)
Received: by 10.231.208.81 with HTTP; Wed, 26 Jan 2011 09:27:24 -0800 (PST)
In-Reply-To: <000a01cbbd56$27811840$768348c0$@thetaphi.de>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
	<008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
	<AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com>
	<AANLkTinq3PZAorXewNhJAsB50A1YJiwKrd=sJFbgDTr=@mail.gmail.com>
	<000a01cbbd56$27811840$768348c0$@thetaphi.de>
Date: Wed, 26 Jan 2011 17:27:24 +0000
Message-ID: <AANLkTimTntP_1MbN3szNLVKntmk9z+DtN0hNvOq_uD4M@mail.gmail.com>
Subject: Re: AssertionError
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325574926741621049ac32531

--000325574926741621049ac32531
Content-Type: text/plain; charset=ISO-8859-1

Thanks Uwe,  that does explain why it fails.

Unfortunately, modifying third party libraries is somehting that will need a
lot of justification for our management. It would be easier on my part to
change our test behaviour to not partial mock. IndexWriter was
originally difficult for us to mock for two reasons:
1) There is no interface
2) The commit method is final

I'll have a deeper dig into these.

On 26 January 2011 12:40, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> I don't know Mockito, but the javadocs explains everything:
>
> http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#spy(T)
>
> IndexWriter is very sensitive to locking, so when the mocked implementation
> does not lock on the real IndexWriter itself but instead on itself (because
> the mock is synchronized on itself) you would violate this asserting. I
> also
> expect that later (when assertions are disabled), your whole IndexWriter
> will deadlock.
>
> Why do you want to intercept calls to IW? The warning in the javadocs says
> everything: " Partial mock usually means that the complexity has been moved
> to a different method on the same object.
>  In most cases, this is not the way you want to design your application.
> However, there are rare cases when partial mocks come handy:  dealing with
> code you cannot change easily (3rd party interfaces, interim refactoring of
> legacy code etc.). However, I wouldn't use partial mocks for new,
> test-driven & well-designed code."
>
> Does any of this apply to Lucene? It's open source, so you can look into
> source code and even change it!
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Anuj Shah [mailto:anujshahwork@gmail.com]
> > Sent: Wednesday, January 26, 2011 1:20 PM
> > To: java-user@lucene.apache.org
>  > Subject: Re: AssertionError
> >
> > It looks like Mockito is the culprit here.
> >
> > Code fragment causing error:
> >
> > final IndexWriter indexWriter = Mockito.spy(new
> > > IndexWriter(FSDirectory.open(new File("")), new
> > >      StandardAnalyzer(Version.LUCENE_30), MaxFieldLength.LIMITED));
> > > indexWriter.addDocument(new Document()); indexWriter.commit();
> > >
> >
> >
> > Stack trace:
> > java.lang.AssertionError
> >     at
> > org.apache.lucene.index.IndexWriter$ReaderPool.commit(IndexWriter.java:
> > 557)
> >     at
> > org.apache.lucene.index.IndexWriter.startCommit(IndexWriter.java:4737)
> >     at
> > org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:3461
> > )
> >     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3534)
> >     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3505)
> >     at myTestClass.test(myTestClass.java:10)
> >
> >
> > On Tue, Jan 25, 2011 at 6:37 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> > > ... and also the full exception?
> > >
> > > Mike
> > >
> > > On Tue, Jan 25, 2011 at 11:52 AM, Uwe Schindler <uwe@thetaphi.de>
> > wrote:
> > > > Can you post your code?
> > > >
> > > > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > > >
> > > >> -----Original Message-----
> > > >> From: Anuj Shah [mailto:anujshahwork@gmail.com]
> > > >> Sent: Tuesday, January 25, 2011 5:18 PM
> > > >> To: java-user@lucene.apache.org
> > > >> Subject: AssertionError
> > > >>
> > > >> Hi,
> > > >>
> > > >> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion errors
> > > from
> > > >> IndexWriter.ReaderPool.commit, at this line:
> > > >>
> > > >>       // We invoke deleter.checkpoint below, so we must be
> > > >> >       // sync'd on IW:
> > > >> >       assert Thread.holdsLock(IndexWriter.this);
> > > >> >
> > > >>
> > > >> Has anyone encountered this before? I'm hoping this is a common
> > scenario
> > > >> and there is a quick fix to avoid it.
> > > >>
> > > >> Thanks
> > > >>
> > > >> Anuj
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000325574926741621049ac32531--

From java-user-return-48569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 19:04:40 2011
Return-Path: <java-user-return-48569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58089 invoked from network); 26 Jan 2011 19:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 19:04:40 -0000
Received: (qmail 49363 invoked by uid 500); 26 Jan 2011 19:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49243 invoked by uid 500); 26 Jan 2011 19:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49235 invoked by uid 99); 26 Jan 2011 19:04:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:04:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:04:31 +0000
Received: by ywc21 with SMTP id 21so278083ywc.35
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 11:04:10 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.153.1 with SMTP id f1mr1521757ybo.144.1296068650067; Wed,
 26 Jan 2011 11:04:10 -0800 (PST)
Received: by 10.146.84.15 with HTTP; Wed, 26 Jan 2011 11:04:10 -0800 (PST)
In-Reply-To: <OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com>
References: <AANLkTimkJcBzE_mEjstEEO0ur_TweFXLzqpff71D4=mG@mail.gmail.com>
	<OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com>
Date: Wed, 26 Jan 2011 14:04:10 -0500
Message-ID: <AANLkTik+qOojSazkqvw+6xB=ZUOtTG-5W-A9d8TW9_Zc@mail.gmail.com>
Subject: Re: gracefully interrupting an optimize
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, this is what's expected -- the exception notifies the thread
calling optimize that the merge was aborted.

Mike

On Wed, Jan 26, 2011 at 9:33 AM,  <v.sevel@lombardodier.com> wrote:
> Hi Michael,
>
> I suppose that as you suggested, if I do a close(false) during an optimiz=
e
> I am supposed to expect the following exception:
>
> java.io.IOException: background merge hit exception: _3ud72:c33936445
> _3uqhr:c126349 _3uuf8:c57041 _3v27p:c78599 _3vf2s:c111005 _3vfad:c6574
> _3vrcj:c130263 _3vrci:c1224 into _3vrck [optimize] [mergeDocStores]
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2859)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2794)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2764)
> =A0 =A0 =A0 =A0at logserver.LuceneWriter.optimize(LuceneWriter.java:91)
> =A0 =A0 =A0 =A0at logserver.SweeperMgr.optimize(SweeperMgr.java:196)
> =A0 =A0 =A0 =A0at logserver.SweeperMgr.safelyExecute(SweeperMgr.java:104)
> =A0 =A0 =A0 =A0at logserver.SweeperMgr.access$1(SweeperMgr.java:90)
> =A0 =A0 =A0 =A0at logserver.SweeperMgr$1.run(SweeperMgr.java:74)
> Caused by: org.apache.lucene.index.MergePolicy$MergeAbortedException:
> merge is aborted: _3ud72:c33936445 _3uqhr:c126349 _3uuf8:c57041
> _3v27p:c78599 _3vf2s:c111005 _3vfad:c6574 _3vrcj:c130263 _3vrci:c1224 int=
o
> _3vrck [optimize] [mergeDocStores]
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.MergePolicy$OneMerge.checkAborted(MergePolicy.jav=
a:122)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger$CheckAbort.work(SegmentMerger.java:=
788)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:6=
50)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeS=
cheduler.java:235)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurre=
ntMergeScheduler.java:291)
>
> right? I can interpret this as "everything is as planned".
>
> thanks
>
>
> Vincent Sevel
>
>
>
>
>
>
>
>
> Michael McCandless <lucene@mikemccandless.com>
>
>
> 21.01.2011 15:48
> Please respond to
> java-user@lucene.apache.org
>
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: gracefully interrupting an optimize
>
>
>
>
>
>
> No.
>
> If you just do IW.close() <-- no boolean specified, then that defaults
> to IW.close(true) which means "wait for all BG merges to finish".
>
> So "normally" IW.close() reserves the right to take a long time.
>
> But IW.close(false) should finish relatively quickly...
>
> Mike
>
> On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> wrote=
:
>> Would that happen "automagically" at finalization?
>>
>> paul
>>
>>
>> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>>
>>> If you call optimize(false), that'll return immediately but run the
>>> optimize "in the background" (assuming you are using the default
>>> ConcurrentMergeScheduler).
>>>
>>> Later, when it's time to stop optimizing, call IW.close(false), which
>>> will abort any running merges yet keep any merges that had finished
>>> (so some work, but not necessarily all work, is lost); it should
>>> return quickly.
>>>
>>> Mike
>>>
>>> On Fri, Jan 21, 2011 at 8:28 AM, =A0<v.sevel@lombardodier.com> wrote:
>>>> Hi,
>>>>
>>>> Each night I optimize an index that contains 35 millions docs. Its
> takes
>>>> about 1.5 hours. For maintenance reasons, it may happen that the
> machine
>>>> gets rebooted. In that case, server gets a chance to gracefully
> shutdown,
>>>> but eventually, the reboot script will kill the processes that did not
>>>> stop in time. My preference would to stop gracefully the optimize
> rather
>>>> than getting the process killed. Is there a way to do that?
>>>>
>>>> Thanks,
>>>>
>>>> Vincent
>>>>
>>>> ************************ DISCLAIMER ************************
>>>> This message is intended only for use by the person to
>>>> whom it is addressed. It may contain information that is
>>>> privileged and confidential. Its content does not
>>>> constitute a formal commitment by Lombard Odier
>>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>>> If you are not the intended recipient of this message,
>>>> kindly notify the sender immediately and destroy this
>>>> message. Thank You.
>>>> *****************************************************************
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to
> whom it is addressed. It may contain information that is
> privileged and confidential. Its content does not
> constitute a formal commitment by Lombard Odier
> Darier Hentsch & Cie or any of its branches or affiliates.
> If you are not the intended recipient of this message,
> kindly notify the sender immediately and destroy this
> message. Thank You.
> *****************************************************************
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 19:12:18 2011
Return-Path: <java-user-return-48570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68489 invoked from network); 26 Jan 2011 19:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 19:12:18 -0000
Received: (qmail 58777 invoked by uid 500); 26 Jan 2011 19:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58742 invoked by uid 500); 26 Jan 2011 19:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58734 invoked by uid 99); 26 Jan 2011 19:12:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:12:14 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:12:09 +0000
Received: from brouwer.fritz.box (srbk-5d807855.pool.mediaWays.net [93.128.120.85])
	by mrelayeu.kundenserver.de (node=mrbap2) with ESMTP (Nemesis)
	id 0MaU9p-1PSzHO3Rf7-00KjXa; Wed, 26 Jan 2011 20:11:48 +0100
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: gracefully interrupting an optimize
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <AANLkTik+qOojSazkqvw+6xB=ZUOtTG-5W-A9d8TW9_Zc@mail.gmail.com>
Date: Wed, 26 Jan 2011 20:11:47 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <A2119006-56B9-46F0-98C9-3EE9342AA3CD@hoplahup.net>
References: <AANLkTimkJcBzE_mEjstEEO0ur_TweFXLzqpff71D4=mG@mail.gmail.com> <OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com> <AANLkTik+qOojSazkqvw+6xB=ZUOtTG-5W-A9d8TW9_Zc@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Provags-ID: V02:K0:iVtSiY5JExm9uxnbtcchLEgAkN//KyVKROp9TR/4z82
 NonlXO3DuKywQjbl4jdnNHRPLdk7tkvdiE6cD2lZPhw6DdxJlv
 e0I99rdulxUKmioYeorjq6lMqauN4JxPtWmso4MI+Ii967uLrP
 76dgsQtq+f8Pbx06R89cNAzsgEerFUbtgHsQrkV7j4KVM508Vx
 /73AeuZaDK45sR0GlWds4ckZ3JWMyYeS0S/b9L/28w=

Please make sure all of that is in the javadoc.
This is precious info I feel.

paul


Le 26 janv. 2011 =E0 20:04, Michael McCandless a =E9crit :

> Yes, this is what's expected -- the exception notifies the thread
> calling optimize that the merge was aborted.
>=20
> Mike
>=20
> On Wed, Jan 26, 2011 at 9:33 AM,  <v.sevel@lombardodier.com> wrote:
>> Hi Michael,
>>=20
>> I suppose that as you suggested, if I do a close(false) during an =
optimize
>> I am supposed to expect the following exception:
>>=20
>> java.io.IOException: background merge hit exception: _3ud72:c33936445
>> _3uqhr:c126349 _3uuf8:c57041 _3v27p:c78599 _3vf2s:c111005 =
_3vfad:c6574
>> _3vrcj:c130263 _3vrci:c1224 into _3vrck [optimize] [mergeDocStores]
>>        at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2859)
>>        at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2794)
>>        at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2764)
>>        at logserver.LuceneWriter.optimize(LuceneWriter.java:91)
>>        at logserver.SweeperMgr.optimize(SweeperMgr.java:196)
>>        at logserver.SweeperMgr.safelyExecute(SweeperMgr.java:104)
>>        at logserver.SweeperMgr.access$1(SweeperMgr.java:90)
>>        at logserver.SweeperMgr$1.run(SweeperMgr.java:74)
>> Caused by: org.apache.lucene.index.MergePolicy$MergeAbortedException:
>> merge is aborted: _3ud72:c33936445 _3uqhr:c126349 _3uuf8:c57041
>> _3v27p:c78599 _3vf2s:c111005 _3vfad:c6574 _3vrcj:c130263 _3vrci:c1224 =
into
>> _3vrck [optimize] [mergeDocStores]
>>        at
>> =
org.apache.lucene.index.MergePolicy$OneMerge.checkAborted(MergePolicy.java=
:122)
>>        at
>> =
org.apache.lucene.index.SegmentMerger$CheckAbort.work(SegmentMerger.java:7=
88)
>>        at
>> =
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:65=
0)
>>        at
>> =
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586)
>>        at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
>>        at
>> =
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
>>        at
>> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
>>        at
>> =
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeSc=
heduler.java:235)
>>        at
>> =
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurren=
tMergeScheduler.java:291)
>>=20
>> right? I can interpret this as "everything is as planned".
>>=20
>> thanks
>>=20
>>=20
>> Vincent Sevel
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>> Michael McCandless <lucene@mikemccandless.com>
>>=20
>>=20
>> 21.01.2011 15:48
>> Please respond to
>> java-user@lucene.apache.org
>>=20
>>=20
>>=20
>> To
>> java-user@lucene.apache.org
>> cc
>>=20
>> Subject
>> Re: gracefully interrupting an optimize
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>> No.
>>=20
>> If you just do IW.close() <-- no boolean specified, then that =
defaults
>> to IW.close(true) which means "wait for all BG merges to finish".
>>=20
>> So "normally" IW.close() reserves the right to take a long time.
>>=20
>> But IW.close(false) should finish relatively quickly...
>>=20
>> Mike
>>=20
>> On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> =
wrote:
>>> Would that happen "automagically" at finalization?
>>>=20
>>> paul
>>>=20
>>>=20
>>> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>>>=20
>>>> If you call optimize(false), that'll return immediately but run the
>>>> optimize "in the background" (assuming you are using the default
>>>> ConcurrentMergeScheduler).
>>>>=20
>>>> Later, when it's time to stop optimizing, call IW.close(false), =
which
>>>> will abort any running merges yet keep any merges that had finished
>>>> (so some work, but not necessarily all work, is lost); it should
>>>> return quickly.
>>>>=20
>>>> Mike
>>>>=20
>>>> On Fri, Jan 21, 2011 at 8:28 AM,  <v.sevel@lombardodier.com> wrote:
>>>>> Hi,
>>>>>=20
>>>>> Each night I optimize an index that contains 35 millions docs. Its
>> takes
>>>>> about 1.5 hours. For maintenance reasons, it may happen that the
>> machine
>>>>> gets rebooted. In that case, server gets a chance to gracefully
>> shutdown,
>>>>> but eventually, the reboot script will kill the processes that did =
not
>>>>> stop in time. My preference would to stop gracefully the optimize
>> rather
>>>>> than getting the process killed. Is there a way to do that?
>>>>>=20
>>>>> Thanks,
>>>>>=20
>>>>> Vincent
>>>>>=20
>>>>> ************************ DISCLAIMER ************************
>>>>> This message is intended only for use by the person to
>>>>> whom it is addressed. It may contain information that is
>>>>> privileged and confidential. Its content does not
>>>>> constitute a formal commitment by Lombard Odier
>>>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>>>> If you are not the intended recipient of this message,
>>>>> kindly notify the sender immediately and destroy this
>>>>> message. Thank You.
>>>>> *****************************************************************
>>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>>=20
>> ************************ DISCLAIMER ************************
>> This message is intended only for use by the person to
>> whom it is addressed. It may contain information that is
>> privileged and confidential. Its content does not
>> constitute a formal commitment by Lombard Odier
>> Darier Hentsch & Cie or any of its branches or affiliates.
>> If you are not the intended recipient of this message,
>> kindly notify the sender immediately and destroy this
>> message. Thank You.
>> *****************************************************************
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 26 19:17:30 2011
Return-Path: <java-user-return-48571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70085 invoked from network); 26 Jan 2011 19:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jan 2011 19:17:29 -0000
Received: (qmail 70133 invoked by uid 500); 26 Jan 2011 19:17:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70083 invoked by uid 500); 26 Jan 2011 19:17:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70075 invoked by uid 99); 26 Jan 2011 19:17:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:17:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jan 2011 19:17:20 +0000
Received: by gwj15 with SMTP id 15so304488gwj.35
        for <java-user@lucene.apache.org>; Wed, 26 Jan 2011 11:16:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.146.86.18 with SMTP id j18mr10697682yab.7.1296069418792; Wed,
 26 Jan 2011 11:16:58 -0800 (PST)
Received: by 10.146.84.15 with HTTP; Wed, 26 Jan 2011 11:16:58 -0800 (PST)
In-Reply-To: <A2119006-56B9-46F0-98C9-3EE9342AA3CD@hoplahup.net>
References: <AANLkTimkJcBzE_mEjstEEO0ur_TweFXLzqpff71D4=mG@mail.gmail.com>
	<OF36B6B128.36BB5799-ONC1257824.004FB3A7-C1257824.004FF1BC@biz.lodh.com>
	<AANLkTik+qOojSazkqvw+6xB=ZUOtTG-5W-A9d8TW9_Zc@mail.gmail.com>
	<A2119006-56B9-46F0-98C9-3EE9342AA3CD@hoplahup.net>
Date: Wed, 26 Jan 2011 14:16:58 -0500
Message-ID: <AANLkTi=ZoPrzwdHmTGCb=+1P6uQYszkYD-A7fMbck6=N@mail.gmail.com>
Subject: Re: gracefully interrupting an optimize
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Good point -- I'll fix the jdocs.

Mike

On Wed, Jan 26, 2011 at 2:11 PM, Paul Libbrecht <paul@hoplahup.net> wrote:
> Please make sure all of that is in the javadoc.
> This is precious info I feel.
>
> paul
>
>
> Le 26 janv. 2011 =E0 20:04, Michael McCandless a =E9crit :
>
>> Yes, this is what's expected -- the exception notifies the thread
>> calling optimize that the merge was aborted.
>>
>> Mike
>>
>> On Wed, Jan 26, 2011 at 9:33 AM, =A0<v.sevel@lombardodier.com> wrote:
>>> Hi Michael,
>>>
>>> I suppose that as you suggested, if I do a close(false) during an optim=
ize
>>> I am supposed to expect the following exception:
>>>
>>> java.io.IOException: background merge hit exception: _3ud72:c33936445
>>> _3uqhr:c126349 _3uuf8:c57041 _3v27p:c78599 _3vf2s:c111005 _3vfad:c6574
>>> _3vrcj:c130263 _3vrci:c1224 into _3vrck [optimize] [mergeDocStores]
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2859)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2794)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2764)
>>> =A0 =A0 =A0 =A0at logserver.LuceneWriter.optimize(LuceneWriter.java:91)
>>> =A0 =A0 =A0 =A0at logserver.SweeperMgr.optimize(SweeperMgr.java:196)
>>> =A0 =A0 =A0 =A0at logserver.SweeperMgr.safelyExecute(SweeperMgr.java:10=
4)
>>> =A0 =A0 =A0 =A0at logserver.SweeperMgr.access$1(SweeperMgr.java:90)
>>> =A0 =A0 =A0 =A0at logserver.SweeperMgr$1.run(SweeperMgr.java:74)
>>> Caused by: org.apache.lucene.index.MergePolicy$MergeAbortedException:
>>> merge is aborted: _3ud72:c33936445 _3uqhr:c126349 _3uuf8:c57041
>>> _3v27p:c78599 _3vf2s:c111005 _3vfad:c6574 _3vrcj:c130263 _3vrci:c1224 i=
nto
>>> _3vrck [optimize] [mergeDocStores]
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.MergePolicy$OneMerge.checkAborted(MergePolicy.j=
ava:122)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.SegmentMerger$CheckAbort.work(SegmentMerger.jav=
a:788)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java=
:650)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586=
)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerg=
eScheduler.java:235)
>>> =A0 =A0 =A0 =A0at
>>> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concur=
rentMergeScheduler.java:291)
>>>
>>> right? I can interpret this as "everything is as planned".
>>>
>>> thanks
>>>
>>>
>>> Vincent Sevel
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> Michael McCandless <lucene@mikemccandless.com>
>>>
>>>
>>> 21.01.2011 15:48
>>> Please respond to
>>> java-user@lucene.apache.org
>>>
>>>
>>>
>>> To
>>> java-user@lucene.apache.org
>>> cc
>>>
>>> Subject
>>> Re: gracefully interrupting an optimize
>>>
>>>
>>>
>>>
>>>
>>>
>>> No.
>>>
>>> If you just do IW.close() <-- no boolean specified, then that defaults
>>> to IW.close(true) which means "wait for all BG merges to finish".
>>>
>>> So "normally" IW.close() reserves the right to take a long time.
>>>
>>> But IW.close(false) should finish relatively quickly...
>>>
>>> Mike
>>>
>>> On Fri, Jan 21, 2011 at 9:20 AM, Paul Libbrecht <paul@hoplahup.net> wro=
te:
>>>> Would that happen "automagically" at finalization?
>>>>
>>>> paul
>>>>
>>>>
>>>> Le 21 janv. 2011 =E0 15:13, Michael McCandless a =E9crit :
>>>>
>>>>> If you call optimize(false), that'll return immediately but run the
>>>>> optimize "in the background" (assuming you are using the default
>>>>> ConcurrentMergeScheduler).
>>>>>
>>>>> Later, when it's time to stop optimizing, call IW.close(false), which
>>>>> will abort any running merges yet keep any merges that had finished
>>>>> (so some work, but not necessarily all work, is lost); it should
>>>>> return quickly.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Jan 21, 2011 at 8:28 AM, =A0<v.sevel@lombardodier.com> wrote:
>>>>>> Hi,
>>>>>>
>>>>>> Each night I optimize an index that contains 35 millions docs. Its
>>> takes
>>>>>> about 1.5 hours. For maintenance reasons, it may happen that the
>>> machine
>>>>>> gets rebooted. In that case, server gets a chance to gracefully
>>> shutdown,
>>>>>> but eventually, the reboot script will kill the processes that did n=
ot
>>>>>> stop in time. My preference would to stop gracefully the optimize
>>> rather
>>>>>> than getting the process killed. Is there a way to do that?
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Vincent
>>>>>>
>>>>>> ************************ DISCLAIMER ************************
>>>>>> This message is intended only for use by the person to
>>>>>> whom it is addressed. It may contain information that is
>>>>>> privileged and confidential. Its content does not
>>>>>> constitute a formal commitment by Lombard Odier
>>>>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>>>>> If you are not the intended recipient of this message,
>>>>>> kindly notify the sender immediately and destroy this
>>>>>> message. Thank You.
>>>>>> *****************************************************************
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>> ************************ DISCLAIMER ************************
>>> This message is intended only for use by the person to
>>> whom it is addressed. It may contain information that is
>>> privileged and confidential. Its content does not
>>> constitute a formal commitment by Lombard Odier
>>> Darier Hentsch & Cie or any of its branches or affiliates.
>>> If you are not the intended recipient of this message,
>>> kindly notify the sender immediately and destroy this
>>> message. Thank You.
>>> *****************************************************************
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 27 16:08:45 2011
Return-Path: <java-user-return-48572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19706 invoked from network); 27 Jan 2011 16:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jan 2011 16:08:45 -0000
Received: (qmail 75941 invoked by uid 500); 27 Jan 2011 16:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75607 invoked by uid 500); 27 Jan 2011 16:08:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75599 invoked by uid 99); 27 Jan 2011 16:08:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jan 2011 16:08:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jan 2011 16:08:31 +0000
Received: (qmail 30544 invoked from network); 27 Jan 2011 07:56:44 -0800
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 27 Jan 2011 07:56:44 -0800
Message-ID: <4D4196EA.3020508@transaxtions.com>
Date: Thu, 27 Jan 2011 08:01:46 -0800
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] RankingAlgorithm ver 1.0
Content-Type: multipart/alternative;
 boundary="------------060008060205010707040806"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060008060205010707040806
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi!

I would like to announce RankingAlgorithm. RankingAlgorithm is a new search
algorithm that seems to enable Solr to returns results comparable to 
Google site
search results, and much better than Lucene 
<http://tgels.com/wiki/en/ComparisonWithGoogleSiteSearchAndLucene>. 
RankingAlgorithm uses
Lucene for Indexing but searches, scores and ranks on its own.  It is very
easy to use as there is  no change to the existing indexes, except that 
the results
and the score, which is again very easy to read and shows the relevancy
of the match.

You can get more information about RankingAlgorithm from here:
http://rankingalgorithm.tgels.com

You can try out a demo with Solr here: 
http://solr-ra.tgels.com/rankingsearch.jsp

A case study "Integrating RankingAlgorithm with JAMWiki" is available 
here: http://solr-ra.tgels.com/wiki/en/Case_Study


You can download RankingAlgorithm from here (it is free):
http://rankingalgorithm.tgels.com

Please give it a try and send your feedback to rankingalgorithm@tgels.com.


Sincerely,

- Nagendra Nagarajayya
rankingalgorithm.tgels.com



--------------060008060205010707040806--

From java-user-return-48573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 27 23:36:27 2011
Return-Path: <java-user-return-48573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46636 invoked from network); 27 Jan 2011 23:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jan 2011 23:36:27 -0000
Received: (qmail 34187 invoked by uid 500); 27 Jan 2011 23:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34065 invoked by uid 500); 27 Jan 2011 23:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34057 invoked by uid 99); 27 Jan 2011 23:36:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jan 2011 23:36:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jan 2011 23:36:16 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PibNZ-00088b-Fn
	for java-user@lucene.apache.org; Fri, 28 Jan 2011 00:35:53 +0100
Received: from 77-58-222-177.dclient.hispeed.ch ([77.58.222.177])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 00:35:53 +0100
Received: from janburse by 77-58-222-177.dclient.hispeed.ch with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 00:35:53 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: Jan Burse <janburse@fastmail.fm>
Subject: Re: [Announce] RankingAlgorithm ver 1.0
Date: Fri, 28 Jan 2011 00:35:37 +0100
Lines: 41
Message-ID: <ihsvg9$vch$1@dough.gmane.org>
References: <4D4196EA.3020508@transaxtions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: 77-58-222-177.dclient.hispeed.ch
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; de; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11
In-Reply-To: <4D4196EA.3020508@transaxtions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Do you take into accout the links between the documents?

Nagendra Nagarajayya schrieb:
> Hi!
>
> I would like to announce RankingAlgorithm. RankingAlgorithm is a new search
> algorithm that seems to enable Solr to returns results comparable to
> Google site
> search results, and much better than Lucene
> <http://tgels.com/wiki/en/ComparisonWithGoogleSiteSearchAndLucene>.
> RankingAlgorithm uses
> Lucene for Indexing but searches, scores and ranks on its own. It is very
> easy to use as there is no change to the existing indexes, except that
> the results
> and the score, which is again very easy to read and shows the relevancy
> of the match.
>
> You can get more information about RankingAlgorithm from here:
> http://rankingalgorithm.tgels.com
>
> You can try out a demo with Solr here:
> http://solr-ra.tgels.com/rankingsearch.jsp
>
> A case study "Integrating RankingAlgorithm with JAMWiki" is available
> here: http://solr-ra.tgels.com/wiki/en/Case_Study
>
>
> You can download RankingAlgorithm from here (it is free):
> http://rankingalgorithm.tgels.com
>
> Please give it a try and send your feedback to rankingalgorithm@tgels.com.
>
>
> Sincerely,
>
> - Nagendra Nagarajayya
> rankingalgorithm.tgels.com
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 02:49:11 2011
Return-Path: <java-user-return-48574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19420 invoked from network); 28 Jan 2011 02:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 02:49:11 -0000
Received: (qmail 24431 invoked by uid 500); 28 Jan 2011 02:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24054 invoked by uid 500); 28 Jan 2011 02:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24030 invoked by uid 99); 28 Jan 2011 02:49:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 02:49:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Jan 2011 02:49:00 +0000
Received: (qmail 3604 invoked from network); 27 Jan 2011 18:43:54 -0800
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 27 Jan 2011 18:43:54 -0800
Message-ID: <4D422E9A.9010109@transaxtions.com>
Date: Thu, 27 Jan 2011 18:48:58 -0800
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [Announce] RankingAlgorithm ver 1.0
References: <4D4196EA.3020508@transaxtions.com> <ihsvg9$vch$1@dough.gmane.org>
In-Reply-To: <ihsvg9$vch$1@dough.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Jan:

No, not in this version ...

Regards,
- NN

On 1/27/2011 3:35 PM, Jan Burse wrote:
> Do you take into accout the links between the documents?
>
> Nagendra Nagarajayya schrieb:
>> Hi!
>>
>> I would like to announce RankingAlgorithm. RankingAlgorithm is a new 
>> search
>> algorithm that seems to enable Solr to returns results comparable to
>> Google site
>> search results, and much better than Lucene
>> <http://tgels.com/wiki/en/ComparisonWithGoogleSiteSearchAndLucene>.
>> RankingAlgorithm uses
>> Lucene for Indexing but searches, scores and ranks on its own. It is 
>> very
>> easy to use as there is no change to the existing indexes, except that
>> the results
>> and the score, which is again very easy to read and shows the relevancy
>> of the match.
>>
>> You can get more information about RankingAlgorithm from here:
>> http://rankingalgorithm.tgels.com
>>
>> You can try out a demo with Solr here:
>> http://solr-ra.tgels.com/rankingsearch.jsp
>>
>> A case study "Integrating RankingAlgorithm with JAMWiki" is available
>> here: http://solr-ra.tgels.com/wiki/en/Case_Study
>>
>>
>> You can download RankingAlgorithm from here (it is free):
>> http://rankingalgorithm.tgels.com
>>
>> Please give it a try and send your feedback to 
>> rankingalgorithm@tgels.com.
>>
>>
>> Sincerely,
>>
>> - Nagendra Nagarajayya
>> rankingalgorithm.tgels.com
>>
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 09:17:15 2011
Return-Path: <java-user-return-48575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8161 invoked from network); 28 Jan 2011 09:17:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 09:17:15 -0000
Received: (qmail 26967 invoked by uid 500); 28 Jan 2011 09:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26465 invoked by uid 500); 28 Jan 2011 09:17:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26446 invoked by uid 99); 28 Jan 2011 09:17:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 09:17:07 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 09:16:59 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 8954920143
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 04:16:38 -0500 (EST)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 28 Jan 2011 04:16:38 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=WolBhmA1JJJmrzc7tKjGjgOCU50=; b=qY1QzD9vyKuSlIKIXD4LlwEwsbnsbOQ57DEZ58ORnRHb5c677LF2HyYtdt54RVZ62U4V3addmnRIPifzRvWgNbCC1W7TdiBHavnwKw06PNY6g3tL2H/EzOsHwxKrka+O4M/CeV+CTKFR0R0GuyKZqYidj0r+l8b/0AMYRBRtxoE=
X-Sasl-enc: e8geA6hCEOtD7U6s7RK5UiHAAwsQQrreXUWQcsSrT7sx 1296206198
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 23105402371
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 04:16:38 -0500 (EST)
Message-ID: <4D428976.6010402@fastmail.fm>
Date: Fri, 28 Jan 2011 09:16:38 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How do you know when index.optimize has finished ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm building six different indexes in series, at the end of building an 
index I call optimize() and then close() the writer, then move onto the 
next one.
I build them in series because they are extracting the data from a 
database and I don't want to overload the database.
However the optimization takes a while and because that does'nt effect 
the db I want to start building the next index whilst the optimize of 
the last one is being done by using optimize(false), but if I do this 
how do I know when the optimization is finished so I can close the writer ?

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 11:34:40 2011
Return-Path: <java-user-return-48576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59441 invoked from network); 28 Jan 2011 11:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 11:34:39 -0000
Received: (qmail 59864 invoked by uid 500); 28 Jan 2011 11:34:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59404 invoked by uid 500); 28 Jan 2011 11:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59396 invoked by uid 99); 28 Jan 2011 11:34:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 11:34:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 11:34:27 +0000
Received: by gyf1 with SMTP id 1so1120694gyf.35
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 03:34:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.236.102.171 with SMTP id d31mr4951723yhg.59.1296214444824;
 Fri, 28 Jan 2011 03:34:04 -0800 (PST)
Received: by 10.146.84.15 with HTTP; Fri, 28 Jan 2011 03:34:04 -0800 (PST)
In-Reply-To: <4D428976.6010402@fastmail.fm>
References: <4D428976.6010402@fastmail.fm>
Date: Fri, 28 Jan 2011 06:34:04 -0500
Message-ID: <AANLkTimDPMwQYs_X2sZiem2HHykyNPdoFcfaepyxmgp6@mail.gmail.com>
Subject: Re: How do you know when index.optimize has finished ?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You can call IW.waitForMerges().

Mike

On Fri, Jan 28, 2011 at 4:16 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> I'm building six different indexes in series, at the end of building an
> index I call optimize() and then close() the writer, then move onto the next
> one.
> I build them in series because they are extracting the data from a database
> and I don't want to overload the database.
> However the optimization takes a while and because that does'nt effect the
> db I want to start building the next index whilst the optimize of the last
> one is being done by using optimize(false), but if I do this how do I know
> when the optimization is finished so I can close the writer ?
>
> thanks Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 12:06:23 2011
Return-Path: <java-user-return-48577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76272 invoked from network); 28 Jan 2011 12:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 12:06:23 -0000
Received: (qmail 3134 invoked by uid 500); 28 Jan 2011 12:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2683 invoked by uid 500); 28 Jan 2011 12:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2675 invoked by uid 99); 28 Jan 2011 12:06:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:06:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:06:04 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 18EF31F8AD
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 12:05:41 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7fpW04y3FXg0 for <java-user@lucene.apache.org>;
	Fri, 28 Jan 2011 13:05:39 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 389DC1FCCD; Fri, 28 Jan 2011 13:05:39 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 016711F8AD
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 12:05:39 +0000 (UTC)
Message-ID: <4D42B118.6000705@dosco.de>
Date: Fri, 28 Jan 2011 13:05:44 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to index part numbers
References: <4D428976.6010402@fastmail.fm>
In-Reply-To: <4D428976.6010402@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm poking in the dark and hope someone has some light...

We have part numbers in technical documentation to retrieve. For now we 
have a (long) regular expression to find those in a string. The part 
numbers have letters, digits and (redundant) whitespace. Furthermore 
authors often used a compressed notation for number ranges with dashes 
or slashes, like A123-56 or A123/4.

When searching for part numbers users should be able to enter specific 
numbers like A126 (then the text "A123-56" should be found too) or 
wildcard searches like "A12?" or "A*". This part number seach is a 
separate feature apart from regular full text search.

As far I see I have to

- add an extra field for storing part numbers

- create a Tokenizer which recognizes just the part numbers and skips 
all other text

- create an Analyzer which expands ranges like A123-56 to A123, A124, 
..., A156 and normalizes numbers by remving whitespace

With this analyzer I hope to get the highlighting to work too (e.g. 
"A123-56" highlighted when "A126" was the search term).

Is this the right way? What could I use as starting point (I found 
org.apache.lucene.analysis.miscellaneous.PatternAnalyzer which does much 
more than I need...)

Thanks for all hints!

Wulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 12:32:13 2011
Return-Path: <java-user-return-48578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88175 invoked from network); 28 Jan 2011 12:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 12:32:13 -0000
Received: (qmail 28273 invoked by uid 500); 28 Jan 2011 12:32:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27746 invoked by uid 500); 28 Jan 2011 12:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27737 invoked by uid 99); 28 Jan 2011 12:32:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:32:07 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:32:01 +0000
Received: by qwe4 with SMTP id 4so3288091qwe.35
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 04:31:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=GBVZGXbxDeX6JUv+D/HgUdc80gq9hj0LS7rzG/hi3tk=;
        b=NZX6pmzkIMLIT5/TCPM7zFFUmwfSuAVLFSMYVcY5w2DjyLCrxSHhe1gSmHFO9aMhEo
         2BJYqL5NdnBoQ270+YQxSUuMTkRevX009xeQ2yczVMiz7gYWOpJ+XCG14Uo8T6U8KNED
         KusyO+BCmIZaXw+vzacdC22lvIxlQ0gp9j1+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=r9ldePwEo6i7p1dcLLFsOhoPFKlqgkn9R1BJc1zVThObV3fjitxZ3n2G3GhTpC91/1
         7D/nut8Fcwk/ll8piSZiLcH0Rmt2HsmoOgZLCB9YwtP3ANMG0b5qzJhdGXh2P80JJYKJ
         WSwsV5vNYuyx5LXPMz9kAYbi3oj/f5AhRUGdE=
Received: by 10.229.86.149 with SMTP id s21mr2681454qcl.23.1296217899889; Fri,
 28 Jan 2011 04:31:39 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.82.6 with HTTP; Fri, 28 Jan 2011 04:31:19 -0800 (PST)
In-Reply-To: <4D42B118.6000705@dosco.de>
References: <4D428976.6010402@fastmail.fm> <4D42B118.6000705@dosco.de>
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Fri, 28 Jan 2011 13:31:19 +0100
Message-ID: <AANLkTinvC4JkJTZkGcG8RtdzSpOCY_E89x+WD+VJWe19@mail.gmail.com>
Subject: Re: How to index part numbers
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364272b5797524049ae73fb1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364272b5797524049ae73fb1
Content-Type: text/plain; charset=ISO-8859-1

Hi Wulf,

can I ask, if it is structured documentation (like XML or SGML) you're
dealing with? It's because I also work with technical documentation and we
do exactly, waht you're asking for, but it is XML-data.


On Fri, Jan 28, 2011 at 1:05 PM, Wulf Berschin <berschin@dosco.de> wrote:

> Hi,
>
> I'm poking in the dark and hope someone has some light...
>
> We have part numbers in technical documentation to retrieve. For now we
> have a (long) regular expression to find those in a string. The part numbers
> have letters, digits and (redundant) whitespace. Furthermore authors often
> used a compressed notation for number ranges with dashes or slashes, like
> A123-56 or A123/4.
>
> When searching for part numbers users should be able to enter specific
> numbers like A126 (then the text "A123-56" should be found too) or wildcard
> searches like "A12?" or "A*". This part number seach is a separate feature
> apart from regular full text search.
>
> As far I see I have to
>
> - add an extra field for storing part numbers
>
> - create a Tokenizer which recognizes just the part numbers and skips all
> other text
>
> - create an Analyzer which expands ranges like A123-56 to A123, A124, ...,
> A156 and normalizes numbers by remving whitespace
>
> With this analyzer I hope to get the highlighting to work too (e.g.
> "A123-56" highlighted when "A126" was the search term).
>
> Is this the right way? What could I use as starting point (I found
> org.apache.lucene.analysis.miscellaneous.PatternAnalyzer which does much
> more than I need...)
>
> Thanks for all hints!
>
> Wulf
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364272b5797524049ae73fb1--

From java-user-return-48579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 12:45:44 2011
Return-Path: <java-user-return-48579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91634 invoked from network); 28 Jan 2011 12:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 12:45:44 -0000
Received: (qmail 46117 invoked by uid 500); 28 Jan 2011 12:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45637 invoked by uid 500); 28 Jan 2011 12:45:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45626 invoked by uid 99); 28 Jan 2011 12:45:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:45:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 12:45:29 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 37C431FCCE
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 12:45:05 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aguulLaxDyLd for <java-user@lucene.apache.org>;
	Fri, 28 Jan 2011 13:45:02 +0100 (CET)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id B8AC51FCD0; Fri, 28 Jan 2011 13:45:02 +0100 (CET)
Received: from [195.110.10.179] (unknown [195.110.10.179])
	by mail.dosco.de (Postfix) with ESMTP id 6C4401FCCE
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 12:45:02 +0000 (UTC)
Message-ID: <4D42BA54.3090706@dosco.de>
Date: Fri, 28 Jan 2011 13:45:08 +0100
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ****SPAM(5.0)**** Re: How to index part numbers
References: <4D428976.6010402@fastmail.fm> <4D42B118.6000705@dosco.de> <AANLkTinvC4JkJTZkGcG8RtdzSpOCY_E89x+WD+VJWe19@mail.gmail.com>
In-Reply-To: <AANLkTinvC4JkJTZkGcG8RtdzSpOCY_E89x+WD+VJWe19@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karolina,

yes (of course!) We have an XML element for the part numbers, but upto 
now they are not all tagged thus we need regex matching as well...

Am 28.01.2011 13:31, schrieb Karolina Bernat:
> Hi Wulf,
>
> can I ask, if it is structured documentation (like XML or SGML) you're
> dealing with? It's because I also work with technical documentation and we
> do exactly, waht you're asking for, but it is XML-data.
>
>
> On Fri, Jan 28, 2011 at 1:05 PM, Wulf Berschin<berschin@dosco.de>  wrote:
>
>> Hi,
>>
>> I'm poking in the dark and hope someone has some light...
>>
>> We have part numbers in technical documentation to retrieve. For now we
>> have a (long) regular expression to find those in a string. The part numbers
>> have letters, digits and (redundant) whitespace. Furthermore authors often
>> used a compressed notation for number ranges with dashes or slashes, like
>> A123-56 or A123/4.
>>
>> When searching for part numbers users should be able to enter specific
>> numbers like A126 (then the text "A123-56" should be found too) or wildcard
>> searches like "A12?" or "A*". This part number seach is a separate feature
>> apart from regular full text search.
>>
>> As far I see I have to
>>
>> - add an extra field for storing part numbers
>>
>> - create a Tokenizer which recognizes just the part numbers and skips all
>> other text
>>
>> - create an Analyzer which expands ranges like A123-56 to A123, A124, ...,
>> A156 and normalizes numbers by remving whitespace
>>
>> With this analyzer I hope to get the highlighting to work too (e.g.
>> "A123-56" highlighted when "A126" was the search term).
>>
>> Is this the right way? What could I use as starting point (I found
>> org.apache.lucene.analysis.miscellaneous.PatternAnalyzer which does much
>> more than I need...)
>>
>> Thanks for all hints!
>>
>> Wulf
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


-- 

Mit freundlichen Gren,

Wulf Berschin

--

<!-- *****************************************************************
* Wulf Berschin                            Telefon: +49 6221 1486 16 *
* DOSCO Document Systems Consulting GmbH   Telefax: +49 6221 1486 19 *
* Mannheimer Strasse 1                     E-Mail: berschin@dosco.de *
* 69115 Heidelberg, Germany                http://www.dosco.de       *
* Handelsregister: Heidelberg HRB 335122                             *
* Geschftsfhrung: Robert Erfle                                     *
****************************************************************** -->


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 13:33:22 2011
Return-Path: <java-user-return-48580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14841 invoked from network); 28 Jan 2011 13:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 13:33:22 -0000
Received: (qmail 14945 invoked by uid 500); 28 Jan 2011 13:33:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14718 invoked by uid 500); 28 Jan 2011 13:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14709 invoked by uid 99); 28 Jan 2011 13:33:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 13:33:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 13:33:11 +0000
Received: by qyk10 with SMTP id 10so3305363qyk.14
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 05:32:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=1WU/XkhKjefodhEMnunKlrweo0TgJfOCo3DSoyPXo5Q=;
        b=GbEOqG4Q8ccWxPlWQZTVnV/1ejSKCour2cini6oDvjhSkA6Phz56N/bTlI5qXBF0Gy
         RkLoWmrbptQWftc9tnHxB5UvFXcRZNS6RXTA4Nvkgx6kJ3/ceCGgcHiHcqX3R9SWk48L
         sJH4FSDjT24R53OgxbtT8qlKjI+g1QyJznScM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=W714J3RD1OBWlTbWuZl7siTisOPXbBoNlWnESCd9gtTEzpO8Pzb8N+5eRPtc1dhAq5
         rutlCdvBoihU12VZB1vIEQ4QLMVf/jRpXYCBEFuYVylGsZGMv7H274gdr/dyyLt0oo3m
         Wh/1kTsMNqhCqmSG4PWHi8UwqPawHlpnuMQQU=
Received: by 10.229.89.78 with SMTP id d14mr2662786qcm.251.1296221569922; Fri,
 28 Jan 2011 05:32:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.82.6 with HTTP; Fri, 28 Jan 2011 05:32:29 -0800 (PST)
In-Reply-To: <4D42BA54.3090706@dosco.de>
References: <4D428976.6010402@fastmail.fm> <4D42B118.6000705@dosco.de>
 <AANLkTinvC4JkJTZkGcG8RtdzSpOCY_E89x+WD+VJWe19@mail.gmail.com> <4D42BA54.3090706@dosco.de>
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Fri, 28 Jan 2011 14:32:29 +0100
Message-ID: <AANLkTimeU4D8MXZnL01Oq3PPGWLO-neAmwyE1Qufh0Tu@mail.gmail.com>
Subject: Re: ****SPAM(5.0)**** Re: How to index part numbers
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee4e239b7d0049ae81ac7

--0016364ee4e239b7d0049ae81ac7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

oh, okay.. well for the XML part we use Apache Digester and define rules to
enclose the correct elements. But I can't tell what's the best way to
proceed in your case, sorry. The steps you listed here sound reasonable to
me.

If you want to get search hits for a part number range and highlight
'A123-56' when searching for A124, you would need to create new tokens for
A124 and save all the information (like offset, docId ..), except for the
terms text, for those tokens by copying it from 'A123-56' for each of your
new tokens (I think..).


On Fri, Jan 28, 2011 at 1:45 PM, Wulf Berschin <berschin@dosco.de> wrote:

> Hi Karolina,
>
> yes (of course!) We have an XML element for the part numbers, but upto no=
w
> they are not all tagged thus we need regex matching as well...
>
> Am 28.01.2011 13:31, schrieb Karolina Bernat:
>
>> Hi Wulf,
>>
>> can I ask, if it is structured documentation (like XML or SGML) you're
>> dealing with? It's because I also work with technical documentation and =
we
>> do exactly, waht you're asking for, but it is XML-data.
>>
>>
>> On Fri, Jan 28, 2011 at 1:05 PM, Wulf Berschin<berschin@dosco.de>  wrote=
:
>>
>>  Hi,
>>>
>>> I'm poking in the dark and hope someone has some light...
>>>
>>> We have part numbers in technical documentation to retrieve. For now we
>>> have a (long) regular expression to find those in a string. The part
>>> numbers
>>> have letters, digits and (redundant) whitespace. Furthermore authors
>>> often
>>> used a compressed notation for number ranges with dashes or slashes, li=
ke
>>> A123-56 or A123/4.
>>>
>>> When searching for part numbers users should be able to enter specific
>>> numbers like A126 (then the text "A123-56" should be found too) or
>>> wildcard
>>> searches like "A12?" or "A*". This part number seach is a separate
>>> feature
>>> apart from regular full text search.
>>>
>>> As far I see I have to
>>>
>>> - add an extra field for storing part numbers
>>>
>>> - create a Tokenizer which recognizes just the part numbers and skips a=
ll
>>> other text
>>>
>>> - create an Analyzer which expands ranges like A123-56 to A123, A124,
>>> ...,
>>> A156 and normalizes numbers by remving whitespace
>>>
>>> With this analyzer I hope to get the highlighting to work too (e.g.
>>> "A123-56" highlighted when "A126" was the search term).
>>>
>>> Is this the right way? What could I use as starting point (I found
>>> org.apache.lucene.analysis.miscellaneous.PatternAnalyzer which does muc=
h
>>> more than I need...)
>>>
>>> Thanks for all hints!
>>>
>>> Wulf
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>
> --
>
> Mit freundlichen Gr=FC=DFen,
>
> Wulf Berschin
>
> --
>
> <!-- *****************************************************************
> * Wulf Berschin                            Telefon: +49 6221 1486 16 *
> * DOSCO Document Systems Consulting GmbH   Telefax: +49 6221 1486 19 *
> * Mannheimer Strasse 1                     E-Mail: berschin@dosco.de *
> * 69115 Heidelberg, Germany                http://www.dosco.de       *
> * Handelsregister: Heidelberg HRB 335122                             *
> * Gesch=E4ftsf=FChrung: Robert Erfle                                     =
*
> ****************************************************************** -->
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ee4e239b7d0049ae81ac7--

From java-user-return-48581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 13:52:27 2011
Return-Path: <java-user-return-48581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19932 invoked from network); 28 Jan 2011 13:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 13:52:27 -0000
Received: (qmail 40494 invoked by uid 500); 28 Jan 2011 13:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39995 invoked by uid 500); 28 Jan 2011 13:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39981 invoked by uid 99); 28 Jan 2011 13:52:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 13:52:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 13:52:09 +0000
Received: by qyk10 with SMTP id 10so3323692qyk.14
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 05:51:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=GYnDEByPr5Rjb7sH8+bfQfknhoTdzKa9wzjeAcyA5y4=;
        b=AEmnvYMBf2tRwnQXHbOrPhMebuD9vDpO6SThgqTHxpoZyfaDJDtB7slSVXkLPsK9SU
         WWkjHro70Lzqg3eYbBFyrcxF2eGHJkpAfGZKJvZowgqxks7qGKHPhjBTsjIL9tMJyX6A
         qBBQ1cljAbe5JXsCQlt0qBAX32MegLB4mCYnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=K8chGL/JrV9oT5rg8OS4amcTffsRuyjttfI7uvFaOgJVRglQOZ6k1Ja9ATiaItJF4C
         v2yoblTZ9LQN6YvdcxPw1VhmYnBtI3mAouUPmdp21lM+ZYmiiUjepmhEBXQfv5uuBw3i
         Fm9sNt4ikh31VTptCJ+9HuVQNtZcz30IDXybE=
MIME-Version: 1.0
Received: by 10.229.95.200 with SMTP id e8mr947433qcn.213.1296222708102; Fri,
 28 Jan 2011 05:51:48 -0800 (PST)
Received: by 10.229.228.144 with HTTP; Fri, 28 Jan 2011 05:51:48 -0800 (PST)
In-Reply-To: <4D42BA54.3090706@dosco.de>
References: <4D428976.6010402@fastmail.fm>
	<4D42B118.6000705@dosco.de>
	<AANLkTinvC4JkJTZkGcG8RtdzSpOCY_E89x+WD+VJWe19@mail.gmail.com>
	<4D42BA54.3090706@dosco.de>
Date: Fri, 28 Jan 2011 08:51:48 -0500
Message-ID: <AANLkTimwnFKnRPHfuBH5esTmxrFnvFg2S3pVdtf=ji+A@mail.gmail.com>
Subject: Re: ****SPAM(5.0)**** Re: How to index part numbers
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee32a10f7e7049ae85ec3
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee32a10f7e7049ae85ec3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I wonder if you can define the problem away? It sounds like
you have essentially random input here. That is, the users
can put in whatever they want so whatever you do will be wrong
sometime. Could you sidestep the problem with auto-complete
and prefix queries (essentially adding * to the user's input)?

That way, the user would see the exact input (A123-56 in
your example).

This assumes there's some kind of GUI front end, so I may
be way off base....

You could still let them search free-form if they really wanted,
but you wouldn't then have to try to figure out what the user
meant when they added A123,5,7....

FWIW
Erick


On Fri, Jan 28, 2011 at 7:45 AM, Wulf Berschin <berschin@dosco.de> wrote:

> Hi Karolina,
>
> yes (of course!) We have an XML element for the part numbers, but upto no=
w
> they are not all tagged thus we need regex matching as well...
>
> Am 28.01.2011 13:31, schrieb Karolina Bernat:
>
>> Hi Wulf,
>>
>> can I ask, if it is structured documentation (like XML or SGML) you're
>> dealing with? It's because I also work with technical documentation and =
we
>> do exactly, waht you're asking for, but it is XML-data.
>>
>>
>> On Fri, Jan 28, 2011 at 1:05 PM, Wulf Berschin<berschin@dosco.de>  wrote=
:
>>
>>  Hi,
>>>
>>> I'm poking in the dark and hope someone has some light...
>>>
>>> We have part numbers in technical documentation to retrieve. For now we
>>> have a (long) regular expression to find those in a string. The part
>>> numbers
>>> have letters, digits and (redundant) whitespace. Furthermore authors
>>> often
>>> used a compressed notation for number ranges with dashes or slashes, li=
ke
>>> A123-56 or A123/4.
>>>
>>> When searching for part numbers users should be able to enter specific
>>> numbers like A126 (then the text "A123-56" should be found too) or
>>> wildcard
>>> searches like "A12?" or "A*". This part number seach is a separate
>>> feature
>>> apart from regular full text search.
>>>
>>> As far I see I have to
>>>
>>> - add an extra field for storing part numbers
>>>
>>> - create a Tokenizer which recognizes just the part numbers and skips a=
ll
>>> other text
>>>
>>> - create an Analyzer which expands ranges like A123-56 to A123, A124,
>>> ...,
>>> A156 and normalizes numbers by remving whitespace
>>>
>>> With this analyzer I hope to get the highlighting to work too (e.g.
>>> "A123-56" highlighted when "A126" was the search term).
>>>
>>> Is this the right way? What could I use as starting point (I found
>>> org.apache.lucene.analysis.miscellaneous.PatternAnalyzer which does muc=
h
>>> more than I need...)
>>>
>>> Thanks for all hints!
>>>
>>> Wulf
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>
> --
>
> Mit freundlichen Gr=FC=DFen,
>
> Wulf Berschin
>
> --
>
> <!-- *****************************************************************
> * Wulf Berschin                            Telefon: +49 6221 1486 16 *
> * DOSCO Document Systems Consulting GmbH   Telefax: +49 6221 1486 19 *
> * Mannheimer Strasse 1                     E-Mail: berschin@dosco.de *
> * 69115 Heidelberg, Germany                http://www.dosco.de       *
> * Handelsregister: Heidelberg HRB 335122                             *
> * Gesch=E4ftsf=FChrung: Robert Erfle                                     =
*
> ****************************************************************** -->
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ee32a10f7e7049ae85ec3--

From java-user-return-48582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 15:42:20 2011
Return-Path: <java-user-return-48582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74379 invoked from network); 28 Jan 2011 15:42:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 15:42:17 -0000
Received: (qmail 15717 invoked by uid 500); 28 Jan 2011 15:42:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15533 invoked by uid 500); 28 Jan 2011 15:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15525 invoked by uid 99); 28 Jan 2011 15:42:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 15:42:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karolina.bernat@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 15:42:07 +0000
Received: by qwe4 with SMTP id 4so3481544qwe.35
        for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 07:41:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=szSGBRa3OW3uD6vqL8rJ89n1P2Uhak6II49JMJMiANA=;
        b=bPM64rMWLfA2oGuvAk3INebGwkTyAlfWTwxmF1sNC9cLUDplA5pmjhTNdxGzZvfqFJ
         ir8qFZIXjKMZ9X0hKG8qyBtjiGQZnOVEHIO8UNo5qobBkEn0Due9zn7QtLn1HsyMm+Ac
         jBPq0ieHUZu6RUQUuqKXWLIpXlq0u0oj0q4F0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Q33WkCB6Tkml1qpRkVUDdm+sYeraIknxVDZq7JH0tStY6MMYenJBPK8/5HnGoFpsLW
         b9LQeCj/yjWz8PPEOtWto0cM8++LFD0FypvHAJV8ZukzJ9G4boo6CnVo82abaVNAN0My
         TftMwHgNOJXiJOE9DN8FhQd0C5/wN9dh83N2I=
Received: by 10.229.91.72 with SMTP id l8mr2786040qcm.137.1296229306337; Fri,
 28 Jan 2011 07:41:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.82.6 with HTTP; Fri, 28 Jan 2011 07:41:26 -0800 (PST)
From: Karolina Bernat <karolina.bernat@googlemail.com>
Date: Fri, 28 Jan 2011 16:41:26 +0100
Message-ID: <AANLkTin=c_qLGW_2yZGta9DPi1OOACcA74yCr=URfXEs@mail.gmail.com>
Subject: Token position vs. token offset - how to bring them together?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016360e3d305a0aef049ae9e7ad

--0016360e3d305a0aef049ae9e7ad
Content-Type: text/plain; charset=ISO-8859-1

Hello,

since I moved on with my offset-info problem in HTML files, I got a new one
trying to bring the tokens positions information together with tokens/term
offset information. Can someone tell me, how can I get a token, if I know
its position? It would be nice to get the tokens position from the Token
class, but I could only get the positionIncrement, which is not really
helpful..

What I'm actually trying to do, is to find the offset information of a
span/phrase query. I know, that the contrib highligter can highlight phrase
queries, but I want/need to do it one my own (or rather give the information
to another application, that does the highlighting of my documents). I also
couldn't really understand, how does the highlighter recognize, that the
individual tokens/terms belong to the phrase (i.e. if I search for "peter
pan" at the moment I also get the tokens 'peter' and 'pan' as weighted
terms, also if they occur individually).

Thanks so much in advance!
Karolina

--0016360e3d305a0aef049ae9e7ad--

From java-user-return-48583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 28 21:31:55 2011
Return-Path: <java-user-return-48583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56733 invoked from network); 28 Jan 2011 21:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jan 2011 21:31:54 -0000
Received: (qmail 26074 invoked by uid 500); 28 Jan 2011 21:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25962 invoked by uid 500); 28 Jan 2011 21:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25954 invoked by uid 99); 28 Jan 2011 21:31:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 21:31:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hossman_lucene@fucit.org designates 208.69.42.181 as permitted sender)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jan 2011 21:31:45 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1A36371C189; Fri, 28 Jan 2011 13:31:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2E2E671C228
	for <java-user@lucene.apache.org>; Fri, 28 Jan 2011 13:31:21 -0800 (PST)
Date: Fri, 28 Jan 2011 13:31:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to index part numbers
In-Reply-To: <4D42B118.6000705@dosco.de>
Message-ID: <alpine.DEB.1.10.1101281330430.19126@radix.cryptio.net>
References: <4D428976.6010402@fastmail.fm> <4D42B118.6000705@dosco.de>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: How to index part numbers
: References: <4D428976.6010402@fastmail.fm>
: In-Reply-To: <4D428976.6010402@fastmail.fm>

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 29 01:45:47 2011
Return-Path: <java-user-return-48584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71930 invoked from network); 29 Jan 2011 01:45:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jan 2011 01:45:47 -0000
Received: (qmail 1738 invoked by uid 500); 29 Jan 2011 01:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1567 invoked by uid 500); 29 Jan 2011 01:45:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1559 invoked by uid 99); 29 Jan 2011 01:45:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jan 2011 01:45:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jan 2011 01:45:36 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id BBD1BD3B4C
	for <java-user@lucene.apache.org>; Sat, 29 Jan 2011 10:45:14 +0900 (JST)
Message-ID: <4D43712A.2000800@r.email.ne.jp>
Date: Sat, 29 Jan 2011 10:45:14 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Trying to extend MappingCharFilter so that it only changes a
 token if the length of the token matches the length of singleMatch
References: <4D383669.1090003@fastmail.fm> <4D3AFB2D.5070505@r.email.ne.jp> <4D3DB37E.90700@fastmail.fm>
In-Reply-To: <4D3DB37E.90700@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(11/01/25 2:14), Paul Taylor wrote:
> On 22/01/2011 15:43, Koji Sekiguchi wrote:
>> (11/01/20 22:19), Paul Taylor wrote:
>>> Trying to extend MappingCharFilter so that it only changes a token if the length of the token
>>> matches the length of singleMatch in NormalizeCharMap (currently the singleMatch just has to be
>>> found in the token I want ut to match the whole token). Can this be done it sounds simple enough but
>>> I cannot make any headway understanding the MappingCharFilter source code
>>>
>>> thanks Paul
>>
>> Paul,
>>
>> Can you give us a concrete input/output (you wanted) with mapping table
>> so that I can understand what you want?
>>
>> Thanks,
>>
>> Koji
> Sure
>
> charConvertMap.add("!!!","ApostropheApostropheApostrophe");
> charConvertMap.add("*** ***","StarStarStar");
> charConvertMap.add("!","Apostrophe");
>
> Normally, punctuation gets removed during index and searching which is what I want for good search
> results but when the token only contains specific punctuation strings I don't want to remove the
> punctuation because it would make it impossible to match, so I convert it to a textual representation.
>
> As it stands in the 3rd case '!' will be preserved wherever it is found, so to get a good match on
> 'Wow!' you would have to search for 'Wow!. But I want you to be able to search for 'Wow' and it
> return 'Wow!' which is the case if "!" isn't in the char convert map, but if you searched for '!' I
> want it to return the token which is just '!' which is only the case if the value is added to the map.
>
> I need to do this because the text we are indexing and searching are short strings representing an
> music artist name (there is an artist called !!!)
>
> thanks Paul
>
>
Hi Paul,

Still I'm not sure I understand your issue correctly, but if you want:

query="Wow!" result="Wow!"
query="Wow"  result="Wow!"
query="!"    result="Wow!"
query="!!!"  result="!!!"

does the following maps solve your problem?
(I assume you use Whitespace-type-Tokenizer here)

charConvertMap.add("!!!","ApostropheApostropheApostrophe");
charConvertMap.add("!"," Apostrophe");  // there is a space in front of "!"

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 29 11:09:58 2011
Return-Path: <java-user-return-48585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77328 invoked from network); 29 Jan 2011 11:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jan 2011 11:09:58 -0000
Received: (qmail 90429 invoked by uid 500); 29 Jan 2011 11:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89959 invoked by uid 500); 29 Jan 2011 11:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89951 invoked by uid 99); 29 Jan 2011 11:09:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jan 2011 11:09:51 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jan 2011 11:09:44 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 5AD5720591;
	Sat, 29 Jan 2011 06:09:23 -0500 (EST)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Sat, 29 Jan 2011 06:09:23 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=L51dnl+6gsP5r3vmgzixvm9wOcw=; b=CuAQQS6tahisSQfZbmBopyOPcolu/nRQLOKVIgLfL5qB9kW2lqjYbTzZWKBph50NgE24X9hauZIpaaS5w3/kFdJiuUiSo00KJvc0CO6KxBEzNJuPS2+aIAEKTZgcT5dWEDGtxCGahZI4UYKhFTvlRzVAQOPfZ2Fp90AjaHRHnyU=
X-Sasl-enc: ha0eDxF44v2tNjKIg7W2ye97RxE4v6IoPs0JlGOJG333 1296299362
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 9376B441534;
	Sat, 29 Jan 2011 06:09:22 -0500 (EST)
Message-ID: <4D43F561.60000@fastmail.fm>
Date: Sat, 29 Jan 2011 11:09:21 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Koji Sekiguchi <koji@r.email.ne.jp>
Subject: Re: Trying to extend MappingCharFilter so that it only changes a
 token if the length of the token matches the length of singleMatch
References: <4D383669.1090003@fastmail.fm> <4D3AFB2D.5070505@r.email.ne.jp> <4D3DB37E.90700@fastmail.fm> <4D43712A.2000800@r.email.ne.jp>
In-Reply-To: <4D43712A.2000800@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 29/01/2011 01:45, Koji Sekiguchi wrote:
> (11/01/25 2:14), Paul Taylor wrote:
>> On 22/01/2011 15:43, Koji Sekiguchi wrote:
>>> (11/01/20 22:19), Paul Taylor wrote:
>>>> Trying to extend MappingCharFilter so that it only changes a token 
>>>> if the length of the token
>>>> matches the length of singleMatch in NormalizeCharMap (currently 
>>>> the singleMatch just has to be
>>>> found in the token I want ut to match the whole token). Can this be 
>>>> done it sounds simple enough but
>>>> I cannot make any headway understanding the MappingCharFilter 
>>>> source code
>>>>
>>>> thanks Paul
>>>
>>> Paul,
>>>
>>> Can you give us a concrete input/output (you wanted) with mapping table
>>> so that I can understand what you want?
>>>
>>> Thanks,
>>>
>>> Koji
>> Sure
>>
>> charConvertMap.add("!!!","ApostropheApostropheApostrophe");
>> charConvertMap.add("*** ***","StarStarStar");
>> charConvertMap.add("!","Apostrophe");
>>
>> Normally, punctuation gets removed during index and searching which 
>> is what I want for good search
>> results but when the token only contains specific punctuation strings 
>> I don't want to remove the
>> punctuation because it would make it impossible to match, so I 
>> convert it to a textual representation.
>>
>> As it stands in the 3rd case '!' will be preserved wherever it is 
>> found, so to get a good match on
>> 'Wow!' you would have to search for 'Wow!. But I want you to be able 
>> to search for 'Wow' and it
>> return 'Wow!' which is the case if "!" isn't in the char convert map, 
>> but if you searched for '!' I
>> want it to return the token which is just '!' which is only the case 
>> if the value is added to the map.
>>
>> I need to do this because the text we are indexing and searching are 
>> short strings representing an
>> music artist name (there is an artist called !!!)
>>
>> thanks Paul
>>
>>
> Hi Paul,
>
> Still I'm not sure I understand your issue correctly, but if you want:
>
> query="Wow!" result="Wow!"
> query="Wow"  result="Wow!"
> query="!"    result="Wow!"
> query="!!!"  result="!!!"
>
> does the following maps solve your problem?
> (I assume you use Whitespace-type-Tokenizer here)
>
> charConvertMap.add("!!!","ApostropheApostropheApostrophe");
> charConvertMap.add("!"," Apostrophe");  // there is a space in front 
> of "!"
>
> Koji
No, the list of names  your solution would convert all cases of 
apostrophe which is not what I want to, and I need to do this for is 
much larger than the two examples I give here,so you cannot rely on the 
order they are added
in.

Is it possible to help me with the original question, how do I subclass 
MaapingCharFilter so that it only changes complete matching tokens.

i.e if my charconvertmap contained

charConvertMap.add("!!!","ApostropheApostropheApostrophe");

it would convert a token of !!! to 'ApostropheApostropheApostrophe' but 
a token of 'Hello!!!' becomes Hello

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 30 21:25:38 2011
Return-Path: <java-user-return-48586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62570 invoked from network); 30 Jan 2011 21:25:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jan 2011 21:25:37 -0000
Received: (qmail 3114 invoked by uid 500); 30 Jan 2011 21:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2915 invoked by uid 500); 30 Jan 2011 21:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2905 invoked by uid 99); 30 Jan 2011 21:25:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jan 2011 21:25:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jan 2011 21:25:28 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Pjelc-0003KK-OJ
	for java-user@lucene.apache.org; Sun, 30 Jan 2011 22:25:05 +0100
Received: from firewall.ansys.com ([192.104.24.222])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 30 Jan 2011 22:25:04 +0100
Received: from sharma.kollaparthi by firewall.ansys.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 30 Jan 2011 22:25:04 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: sharma <sharma.kollaparthi@ansys.com>
Subject: Re: Lucene , hits per document
Date: Sun, 30 Jan 2011 21:14:17 +0000 (UTC)
Lines: 46
Message-ID: <loom.20110130T220951-389@post.gmane.org>
References: <AANLkTimHwZOFR9goREg7avaouzz4bzTQ0yX0eGpRVOcT@mail.gmail.com> <6A5A73BC-1326-49A6-A69B-5CC1FF2EF053@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 192.104.24.222 (Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13)


Grant Ingersoll <gsingers <at> apache.org> writes:





 With a little logic on your size to count, you can use SpanQueries to do that.
 
 -Grant
 
 On Jan 21, 2011, at 4:03 PM, Sharma Kollaparthi wrote:
 
 Hi ,
 
       I have started to use Lucene for searching in HTML files. Is it
 possible to get Hits per document, when we search for phrases like "Hello
 World" and wild card searches like "te?t"?
 
 I managed to return the number of hits per document if there is only one
 term using termfrequency vector.
 
 
 Thanks,
 Sharma

 
 Sharma Kollaparthi
 CDU Systems & Process Tools
 Software Developer I
 ANSYS INC.
 
--------------------------
 Grant Ingersoll
 http://www.lucidimagination.com
 


Grant-

Thanks for reply. Do you have an example on it?

Thanks,
Sharma




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 31 15:52:22 2011
Return-Path: <java-user-return-48587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35487 invoked from network); 31 Jan 2011 15:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jan 2011 15:52:22 -0000
Received: (qmail 46267 invoked by uid 500); 31 Jan 2011 15:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45854 invoked by uid 500); 31 Jan 2011 15:52:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45841 invoked by uid 99); 31 Jan 2011 15:52:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 15:52:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of az.jassal@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 15:52:06 +0000
Received: by gyf1 with SMTP id 1so2228024gyf.35
        for <java-user@lucene.apache.org>; Mon, 31 Jan 2011 07:51:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=6tBlD5oyfUber67XROqy3GDEy5iMcR0nLty/VFOZ8SI=;
        b=bDt74xQPVQvUqAhsyGwTqTJoJHSXGfPdluPbNGgI8b5Q54PD6meyGQo/EGNce0HT2z
         HxRlfTU0FjMi4Jm+8KeXwFOeGTfwPaEoyI9ChQ7m6qEOmEp1Uyaadvh569FOQd5Cmws+
         AEeS9B0JIDyOaNDmjBM1bUUec5soegYVq8DXQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=whQRG0ei3uLQR+Mw0jab220ZoJVCTEzKkIK/IdCPfc/9o28Ppe6EJlplXt92XfJhaw
         pCJLgjyONvQO5Q8UKeGjQPCWHRaZlmD2ZXGnLM33z8EV1EHqYtVAdPX/iKqHUF3RAhGb
         qLOuFqV1ccBVE4RImPuJKGXEjK/Vpw24rqCJU=
MIME-Version: 1.0
Received: by 10.236.95.143 with SMTP id p15mr13018244yhf.9.1296489105409; Mon,
 31 Jan 2011 07:51:45 -0800 (PST)
Received: by 10.236.109.36 with HTTP; Mon, 31 Jan 2011 07:51:45 -0800 (PST)
Date: Mon, 31 Jan 2011 15:51:45 +0000
Message-ID: <AANLkTinLuqkdoHFkndwGRWvAsSgSxQnsbBMUkPREkuyL@mail.gmail.com>
Subject: Sort results by number of document fields
From: Azhar Jassal <az.jassal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023547c895b955c75049b266402
X-Virus-Checked: Checked by ClamAV on apache.org

--0023547c895b955c75049b266402
Content-Type: text/plain; charset=ISO-8859-1

Hi,

How can I use Lucene to sort search results by the number of fields each
document has? (highest to lowest - documents with more fields in my index
are better results)

Also my fields are named as URI's i.e. "<
http://www.w3.org/2000/01/rdf-schema#label>", how should I form queries with
field names containing such syntax? How shall I pass them in, escaped?

Thanks

--0023547c895b955c75049b266402--

From java-user-return-48588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 31 16:00:31 2011
Return-Path: <java-user-return-48588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38012 invoked from network); 31 Jan 2011 16:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jan 2011 16:00:31 -0000
Received: (qmail 62829 invoked by uid 500); 31 Jan 2011 16:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62452 invoked by uid 500); 31 Jan 2011 16:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62442 invoked by uid 99); 31 Jan 2011 16:00:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 16:00:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 16:00:15 +0000
Received: by vws18 with SMTP id 18so1905354vws.35
        for <java-user@lucene.apache.org>; Mon, 31 Jan 2011 07:59:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=2fNmhkrEPZqV6k5UmYuT+nvP3PYXjQyxwaLH1PykILk=;
        b=sIP1ecNK3e+fKU+lYWrQua53F9aJwzo6AaT6xVvyl1MSuu7etawxZJXYX2ZhjNUk1K
         oe/SdjxnwCNPwZs/5efiWKh2TUpNOkBwGKDXUJpl9a7nCDQtZggkMn5+zA1mXmZ3wG2i
         U2jx+68i96GX9LStj9AfhN4tWs23dCbzXL12A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=ulsIa1cuUH4pXoEqBEbnDB85kKBqg2Yzpos7GPdkPdyJUWmBA64ioOOjTT5lOgTwc6
         b1rndicUBnkTtUZIly2+6lETlT2po4QJiORXUKpzo/wR4WLizjgU6fDLgbMaKlLT3EGs
         TaQAXCzGyf+XLm0gS/a9k7Q9jTpfBzfzslcZg=
Received: by 10.220.98.200 with SMTP id r8mr1753333vcn.122.1296489594233;
        Mon, 31 Jan 2011 07:59:54 -0800 (PST)
Received: from [192.168.1.3] (c-76-104-27-104.hsd1.va.comcast.net [76.104.27.104])
        by mx.google.com with ESMTPS id y15sm7066647vch.29.2011.01.31.07.59.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 31 Jan 2011 07:59:53 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1082)
Subject: Re: Sort results by number of document fields
From: Erik Hatcher <erik.hatcher@gmail.com>
In-Reply-To: <AANLkTinLuqkdoHFkndwGRWvAsSgSxQnsbBMUkPREkuyL@mail.gmail.com>
Date: Mon, 31 Jan 2011 10:59:51 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <CB65F9C6-83E5-421B-B3AC-3ECC3CCA2240@gmail.com>
References: <AANLkTinLuqkdoHFkndwGRWvAsSgSxQnsbBMUkPREkuyL@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1082)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 31, 2011, at 10:51 , Azhar Jassal wrote:
> How can I use Lucene to sort search results by the number of fields =
each
> document has? (highest to lowest - documents with more fields in my =
index
> are better results)

When you know you need to query on something you have available during =
indexing time, make your life easy and index it!  In other words, index =
the number of (other) fields as a numeric into a "num_fields" field or =
something like that.

This could be done automatically if you were to write a custom update =
processor and add it to the update processing chain, but easy enough to =
do in most custom indexers I've ever come across as well.

> Also my fields are named as URI's i.e. "<
> http://www.w3.org/2000/01/rdf-schema#label>", how should I form =
queries with
> field names containing such syntax? How shall I pass them in, escaped?

Good luck on this one... you'll have to contend with escaping (with a =
backslash) if you're using the "lucene" query parser, and perhaps other =
related headaches with other query parsers depending on how they do =
their thing underneath.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-48589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 31 17:21:35 2011
Return-Path: <java-user-return-48589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82442 invoked from network); 31 Jan 2011 17:21:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jan 2011 17:21:35 -0000
Received: (qmail 99718 invoked by uid 500); 31 Jan 2011 17:21:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99401 invoked by uid 500); 31 Jan 2011 17:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99392 invoked by uid 99); 31 Jan 2011 17:21:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 17:21:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anujshahwork@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 17:21:22 +0000
Received: by iwn2 with SMTP id 2so6230631iwn.35
        for <java-user@lucene.apache.org>; Mon, 31 Jan 2011 09:21:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=R/5crQd9HYtxLAvgN/Xlhp7b2VYUYWVEJmXUH9T/Hio=;
        b=HLxJ5dxTIORYQ2BVtKUFnprgMMGVTzNNHcclFfurCVDd3sFPs0Rcy+siYKibu5fyvT
         XQZfDR/xlNlKEeiXWgv+rxmN+H7aWJXtB+vsuBsH5mDQ4QkvLaqZo4ZRfuIIU0MI0g+5
         vwOFuc2RlREtexlwYZXh6eNd9NYfdnOv96LU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=o7KojxtjI6n1DF0FqXuvODO5O/vNZLOIxLs+ou/Iw9CA+WotW4MA0brQ9MyJdJ0zcw
         mtLcWsp1WUKzK0Mf9MJzcuC9RIRlg3xuUhzACTPuYx5OBmut60NqcCUh8lPAbGEafSQu
         zc67sxFIBKX9+KPgJSXCaMy79MEhhVvOTOn6w=
MIME-Version: 1.0
Received: by 10.231.16.132 with SMTP id o4mr6919108iba.154.1296494461159; Mon,
 31 Jan 2011 09:21:01 -0800 (PST)
Received: by 10.231.208.81 with HTTP; Mon, 31 Jan 2011 09:21:01 -0800 (PST)
In-Reply-To: <AANLkTimTntP_1MbN3szNLVKntmk9z+DtN0hNvOq_uD4M@mail.gmail.com>
References: <AANLkTinyLX42CS2G16gx-y=p_KdcqJB7=-J-3-PKJwAA@mail.gmail.com>
	<008c01cbbcb0$2fb7c5f0$8f2751d0$@thetaphi.de>
	<AANLkTi=HQOBECT_Fg5D-WpHKiYRKHThJhTEjsHQbOWgM@mail.gmail.com>
	<AANLkTinq3PZAorXewNhJAsB50A1YJiwKrd=sJFbgDTr=@mail.gmail.com>
	<000a01cbbd56$27811840$768348c0$@thetaphi.de>
	<AANLkTimTntP_1MbN3szNLVKntmk9z+DtN0hNvOq_uD4M@mail.gmail.com>
Date: Mon, 31 Jan 2011 17:21:01 +0000
Message-ID: <AANLkTi=5xUfvh8a-nMNj0ARtew9-jQbAYZDBRT64Mqik@mail.gmail.com>
Subject: Re: AssertionError
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d7e0bcf8991049b27a354
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d7e0bcf8991049b27a354
Content-Type: text/plain; charset=ISO-8859-1

On this issue, I ended up writing a simple interface and delegating proxy to
use for calls to IndexWriter methods.

It would be nice if future versions had an interface architecture around key
components to promote unit testing.

On 26 January 2011 17:27, Anuj Shah <anujshahwork@gmail.com> wrote:

> Thanks Uwe,  that does explain why it fails.
>
> Unfortunately, modifying third party libraries is somehting that will need
> a lot of justification for our management. It would be easier on my part to
> change our test behaviour to not partial mock. IndexWriter was
> originally difficult for us to mock for two reasons:
> 1) There is no interface
> 2) The commit method is final
>
> I'll have a deeper dig into these.
>
> On 26 January 2011 12:40, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> Hi,
>>
>> I don't know Mockito, but the javadocs explains everything:
>>
>> http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#spy(T)<http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#spy%28T%29>
>>
>> IndexWriter is very sensitive to locking, so when the mocked
>> implementation
>> does not lock on the real IndexWriter itself but instead on itself
>> (because
>> the mock is synchronized on itself) you would violate this asserting. I
>> also
>> expect that later (when assertions are disabled), your whole IndexWriter
>> will deadlock.
>>
>> Why do you want to intercept calls to IW? The warning in the javadocs says
>> everything: " Partial mock usually means that the complexity has been
>> moved
>> to a different method on the same object.
>>  In most cases, this is not the way you want to design your application.
>> However, there are rare cases when partial mocks come handy:  dealing with
>> code you cannot change easily (3rd party interfaces, interim refactoring
>> of
>> legacy code etc.). However, I wouldn't use partial mocks for new,
>> test-driven & well-designed code."
>>
>> Does any of this apply to Lucene? It's open source, so you can look into
>> source code and even change it!
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>> > -----Original Message-----
>> > From: Anuj Shah [mailto:anujshahwork@gmail.com]
>> > Sent: Wednesday, January 26, 2011 1:20 PM
>> > To: java-user@lucene.apache.org
>>  > Subject: Re: AssertionError
>> >
>> > It looks like Mockito is the culprit here.
>> >
>> > Code fragment causing error:
>> >
>> > final IndexWriter indexWriter = Mockito.spy(new
>> > > IndexWriter(FSDirectory.open(new File("")), new
>> > >      StandardAnalyzer(Version.LUCENE_30), MaxFieldLength.LIMITED));
>> > > indexWriter.addDocument(new Document()); indexWriter.commit();
>> > >
>> >
>> >
>> > Stack trace:
>> > java.lang.AssertionError
>> >     at
>> > org.apache.lucene.index.IndexWriter$ReaderPool.commit(IndexWriter.java:
>> > 557)
>> >     at
>> > org.apache.lucene.index.IndexWriter.startCommit(IndexWriter.java:4737)
>> >     at
>> > org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:3461
>> > )
>> >     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3534)
>> >     at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3505)
>> >     at myTestClass.test(myTestClass.java:10)
>> >
>> >
>> > On Tue, Jan 25, 2011 at 6:37 PM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> > > ... and also the full exception?
>> > >
>> > > Mike
>> > >
>> > > On Tue, Jan 25, 2011 at 11:52 AM, Uwe Schindler <uwe@thetaphi.de>
>> > wrote:
>> > > > Can you post your code?
>> > > >
>> > > > -----
>> > > > Uwe Schindler
>> > > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > > http://www.thetaphi.de
>> > > > eMail: uwe@thetaphi.de
>> > > >
>> > > >
>> > > >> -----Original Message-----
>> > > >> From: Anuj Shah [mailto:anujshahwork@gmail.com]
>> > > >> Sent: Tuesday, January 25, 2011 5:18 PM
>> > > >> To: java-user@lucene.apache.org
>> > > >> Subject: AssertionError
>> > > >>
>> > > >> Hi,
>> > > >>
>> > > >> I've upgraded from 3.00 to 3.0.3 and am now hitting assertion
>> errors
>> > > from
>> > > >> IndexWriter.ReaderPool.commit, at this line:
>> > > >>
>> > > >>       // We invoke deleter.checkpoint below, so we must be
>> > > >> >       // sync'd on IW:
>> > > >> >       assert Thread.holdsLock(IndexWriter.this);
>> > > >> >
>> > > >>
>> > > >> Has anyone encountered this before? I'm hoping this is a common
>> > scenario
>> > > >> and there is a quick fix to avoid it.
>> > > >>
>> > > >> Thanks
>> > > >>
>> > > >> Anuj
>> > > >
>> > > >
>> > > >
>> ---------------------------------------------------------------------
>> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0022152d7e0bcf8991049b27a354--

From java-user-return-48590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 31 20:13:41 2011
Return-Path: <java-user-return-48590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78269 invoked from network); 31 Jan 2011 20:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jan 2011 20:13:41 -0000
Received: (qmail 4385 invoked by uid 500); 31 Jan 2011 20:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4208 invoked by uid 500); 31 Jan 2011 20:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 1865 invoked by uid 99); 31 Jan 2011 14:30:52 -0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: lucene-core-3.0.3.jar | creating index too slow
Thread-Topic: lucene-core-3.0.3.jar | creating index too slow
Thread-Index: AcvBU2GLbRLlz1H6Rj2BBSwdie4COg==
Date: Mon, 31 Jan 2011 14:30:17 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C2EAB8ADA@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C2EAB8ADAMAILotssolution_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_AD21521D44870544AC66F4FDFC0A474C2EAB8ADAMAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi;
               While I am creating index using lucene-core-3.0.3.jar it tak=
es more time as compare too lucene-core-3.0.2.jar .
                Please give your suggestion.

Thanks & Regards,
Ranjit Kumar

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C2EAB8ADAMAILotssolution_--

From java-user-return-48591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 31 23:30:27 2011
Return-Path: <java-user-return-48591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83002 invoked from network); 31 Jan 2011 23:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jan 2011 23:30:27 -0000
Received: (qmail 30643 invoked by uid 500); 31 Jan 2011 23:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30576 invoked by uid 500); 31 Jan 2011 23:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30568 invoked by uid 99); 31 Jan 2011 23:30:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 23:30:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hz.root@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jan 2011 23:30:17 +0000
Received: by iwn2 with SMTP id 2so6587818iwn.35
        for <java-user@lucene.apache.org>; Mon, 31 Jan 2011 15:29:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=51uSgRjxgI7Mtc/oEBekZT9kjtrwyx4wKa5+TboGH4c=;
        b=nVU7jp+Q+TfZfdlXWXEQcFLcFTfkTw9x9zQhj0ngaIMOkATC13gkaJ7X/AmvdyPp24
         tUzQV6jBb4WWvA28tUGYX/8Kd/N68K25TBmj9QsNOM6zBd1hvTpEFrFD/s+czJwezFC/
         aHPwArwaPlKOFcRUHJ1IDcAaH+Js0JA9UUbqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UFnnWRC8EI16/WC40eTQse3ZOLjb668SZj/KIzU5PCbuhT1DdYlzStMgPTcwILxERQ
         DH/PSbtYnU9Hq67C1PVpYsvoEqPnxNyXWhjq5ZhfZuysfTPmGZ0+kEIL6/bKMReXFkhX
         y0u31oWtDlWWyaqz2w1AJlsg9PbvbwCeT1Xp8=
MIME-Version: 1.0
Received: by 10.231.35.5 with SMTP id n5mr7413853ibd.159.1296516595726; Mon,
 31 Jan 2011 15:29:55 -0800 (PST)
Received: by 10.231.167.142 with HTTP; Mon, 31 Jan 2011 15:29:55 -0800 (PST)
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C2EAB8ADA@MAIL.otssolutions.com>
References: <AD21521D44870544AC66F4FDFC0A474C2EAB8ADA@MAIL.otssolutions.com>
Date: Tue, 1 Feb 2011 01:29:55 +0200
Message-ID: <AANLkTinsqHPSZj+Xs0mQ5D0pBNeaiartT6o5xcmNLevR@mail.gmail.com>
Subject: Re: lucene-core-3.0.3.jar | creating index too slow
From: Erdinc Akkaya <hz.root@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555ce962238ba049b2ccb7e
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555ce962238ba049b2ccb7e
Content-Type: text/plain; charset=ISO-8859-1

How about the code? What is the problem you think? Is it also taking long
time to insert one document? I didnt have slow writing speed when upgrade.
May be you can check
http://lucene.apache.org/java/3_0_3/changes/Changes.html and your code

2011/1/31 Ranjit Kumar <Ranjit.Kumar@otssolutions.com>

> Hi;
>               While I am creating index using lucene-core-3.0.3.jar it
> takes more time as compare too lucene-core-3.0.2.jar .
>                Please give your suggestion.
>
> Thanks & Regards,
> Ranjit Kumar
>
> ===================================================================================================
> Private, Confidential and Privileged. This e-mail and any files and
> attachments transmitted with it are confidential and/or privileged. They are
> intended solely for the use of the intended recipient. The content of this
> e-mail and any file or attachment transmitted with it may have been changed
> or altered without the consent of the author. If you are not the intended
> recipient, please note that any review, dissemination, disclosure,
> alteration, printing, circulation or Transmission of this e-mail and/or any
> file or attachment transmitted with it, is prohibited and may be unlawful.
> If you have received this e-mail or any file or attachment transmitted with
> it in error please notify OTS Solutions at info@otssolutions.com===================================================================================================
>



--

--00032555ce962238ba049b2ccb7e--

