From java-user-return-47371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 01 05:39:25 2010
Return-Path: <java-user-return-47371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82878 invoked from network); 1 Oct 2010 05:39:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Oct 2010 05:39:25 -0000
Received: (qmail 97474 invoked by uid 500); 1 Oct 2010 05:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97046 invoked by uid 500); 1 Oct 2010 05:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 3906 invoked by uid 99); 30 Sep 2010 20:58:58 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1285880306; bh=FcwJkIM0X+DS/xd2+EFatMlkLrODBdlASw0b5TRUNdI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=PVViZmAUe8zdysGEqB7VTiRBFaww7G0wrm1/sDRPNOhxe7WnquIOIXZwHAaUeg9c3NBPT4bEhhGgfKZOAxZ2gHcRvEeP1P+BywFGC04lghFosK76gam95W7qmWGyfFMh/erLQX+K9LWIQgQ9qte+1GQdbC5ITcIpU5IcTp0UuFE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=f2vRawNAYNa+pN6jPKLn3juGKPqdYsHM4Dw1+GgvXuZmxMcjTvDP/ieDxzkzfFKxaca994oNIpjfqpM+HqtGtNJxX13q4ak0NQrvPsH9BCV6tqcy6WXpT9SMLMNWaSahDToEWM1lmXSARJyNMbwwhpbvzNrPSbgm1YsDF/tkMz0=;
Message-ID: <851147.89208.qm@web33804.mail.mud.yahoo.com>
X-YMail-OSG: LV0ls80VM1kMZqO2mpkcJTUmkmzF2VV4WJL7zkfkOQGuzVr
 AEzUFmTuSIWYbl7rlhyh9u.o10.0A7LBRgl_V2Txl8ZnHceO7xPEWUHzSX_i
 5pBxdRXzb3IXWBTD5QX9foqKnvJJehvRMlLWX1va7f7Rf_DghooIVcBXgcvf
 P0NtVYtw5KxM3BAHpCZhG_7rc2yGVYXcVyX1Q9yH_WdnvIlI8wC7DfJZuhyX
 6guoO5NqPfA0JnuK2A7jg3.EY8qQ4.2.ec.YzM3cYBzTPy5zlg_ZtmXmxDFe
 wU9jsjyMn
X-Mailer: YahooMailRC/497 YahooMailWebService/0.8.105.279950
Date: Thu, 30 Sep 2010 13:58:26 -0700 (PDT)
From: Jonathan Ciampi <jonciampi@yahoo.com>
Subject: Looking for advice on using Lucene to semantically compare two documents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2046786559-1285880306=:89208"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2046786559-1285880306=:89208
Content-Type: text/plain; charset=us-ascii

Advice on comparing two documents.
 
Summary
This project is not a search engine but a semantic comparison between two 
documents.  The purpose of this application is to assist users in modifying the 
text in a document to improve the relevancy rank of the document to another 
document.  For example, the user would want to compare Document A to Document B 
to identify the text in Document A that has relevancy to Document B.  Then, the 
user would want the ability to identify the text to modify to improve the 
relevancy rating.    
 
 
Description: 
 
Both documents are XML with tags identifying the keywords or blocks of text in 
the document.  

 
Sample Structure
 
Document A
<DocumentName>DocumentA</DocumentName>
<Keyword>This is keyword 1</Keyword> 
<Keyword>Keywords can be any length</Keyword> 
<Keyword>Some keywords will match Document B</Keyword> 
<Keyword>Some keywords will not match</Keyword> 
<Keyword>Keywords can contain text, numbers, and symbols</Keyword> 
 
Document B
<DocumentName>DocumentB</DocumentName>
<Keyword>This is Document B keyword 1</Keyword> 
<Keyword>Document B serves as the basis or standard for comparing</Keyword> 
<Keyword>Document A will be modified by the user to match the keywords in 
Document B</Keyword> 

<Keyword>Document A and Document B will always be compared to each 
other</Keyword> 

<Keyword>This application is to help users add text, numbers and symbols to 
improve their relevancy ranking</Keyword> 

 
We believe we need to use Lucene to do semantic searches to determine 
relevance.  Our preferred output would be to show a user the words from each 
document with their relevancy.  To remove excessive data, the output would show 
all keywords from Document B, and only those with a relevancy ranking  from 
Document A.
 
Sample Output
 
Document B Document A Relevancy 
This is Document B keyword 1 This is keyword 1 .25 
This is Document B keyword 1 Keywords can be any length .25 
This is Document B keyword 1 Some keywords will match Document B .25 
This is Document B keyword 1 Some keywords will not match .25 
This is Document B keyword 1 Keywords can contain text, numbers, and symbols .25 

Document B serves as the basis or standard for comparing Some keywords will 
match Document B .5 

Document A will be modified by the user to match the   keywords in Document B 
This is keyword  1 .1 

Document A will be modified by the user to match the   keywords in Document B 
Keywords can be any length .1 

Document A will be modified by the user to match the   keywords in Document B 
Some keywords will not match .1 

Document A will be modified by the user to match the   keywords in Document B 
Some keywords will match Document B .75 

Document A will be modified by the user to match the   keywords in Document B 
Keywords can contain text, numbers, and symbols .1 

This application is to help users add text, numbers and   symbols to improve 
their relevancy ranking Keywords can contain text, numbers, and symbols .9 

      
  Jon Ciampi
Mobile (415) 990-3151

--0-2046786559-1285880306=:89208--

From java-user-return-47372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 01 05:42:13 2010
Return-Path: <java-user-return-47372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83331 invoked from network); 1 Oct 2010 05:42:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Oct 2010 05:42:13 -0000
Received: (qmail 4394 invoked by uid 500); 1 Oct 2010 05:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4186 invoked by uid 500); 1 Oct 2010 05:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4178 invoked by uid 99); 1 Oct 2010 05:42:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 05:42:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 05:42:00 +0000
Received: from serve.stimulussoft.com (localhost.localdomain [127.0.0.1])
	by serve.stimulussoft.com (Postfix) with ESMTP id 463A210747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 22:41:40 -0700 (PDT)
Received: by serve.stimulussoft.com (Postfix, from userid 5001)
	id 328DF1078C; Thu, 30 Sep 2010 22:41:40 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	serve.stimulussoft.com
X-Spam-Level: 
Received: from Jamie-Bands-MacBook-Pro.local (196-210-169-220.dynamic.isadsl.co.za [196.210.169.220])
	by serve.stimulussoft.com (Postfix) with ESMTPA id 5DDBD10747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 22:41:37 -0700 (PDT)
Message-ID: <4CA57479.8000405@stimulussoft.com>
Date: Fri, 01 Oct 2010 07:41:13 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
References: <4CA37BD8.8050608@stimulussoft.com>	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>	<4CA38A5F.1000100@stimulussoft.com>	<000001cb607d$486b9660$d942c320$@thetaphi.de>	<4CA457AE.8080203@stimulussoft.com>	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>	<4CA45F93.4000503@stimulussoft.com> <AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com>
In-Reply-To: <AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Old-Spam-Status: No, score=-4.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00
	autolearn=ham version=3.2.4

  Hi Mike

  I managed to get hold of a copy of your book through Safari Books. 
Quite an impressive online reading system they have there! I integrated 
your SearchManager class into our code, but I am still seeing file 
handles marked deleted in the index directory. I am running the 
following command on Linux:

sudo watch -n 0 "lsof | grep /var/index | grep deleted | wc -l"

Every 0.1s: lsof | grep /var/index | grep deleted |...  Fri Oct  1 
09:37:36 2010

54

The deleted file handles fluctuate up and down. 54 -> 102 -> 64 -> 32, 
etc. They seem stable though. Is this to be expected when using NRT search?

  I am pretty certain that all Searchers are released at the end of 
every search. I double checked it at least twenty times.

Jamie



On 2010/09/30 11:56 PM, Michael McCandless wrote:
> On Thu, Sep 30, 2010 at 5:59 AM, Jamie<jamie@stimulussoft.com>  wrote:
>>   Hi Michael / Uwe
>>
>>> It's good to cache the reader, but, finalize would worry me too since
>>> you have no control over when GC gets around to calling it... you risk
>>> tying up resources for longer than necessary.
>> I did it this way, as I didn't want to over complicate the code by
>> introducing mechanisms to track the number of search threads using a shared
>> indexreader. Admittedly, its not a very clean solution but in my case it
>> does work. Is there a particular technique for knowing when to a close a
>> reader when there are multiple search threads using that reader? Should I
>> keep some kind of counter and override the close method of the reader such
>> that the underlying reader is only closed when everyone's done with it?
> See Uwe's response (or SearcherManager).
>
>>> IndexWriter has a reader pool, internally, where it holds open
>>> SegmentReaders for the still-live segments in the index.  This is used
>>> by IndexReader.reopen to share open SegmentReaders.
>>>
>>> But the open files should correspond only to segments still "live" in
>>> the index.  After segments are merged away, these readers are dropped.
>>>   Is this what you are seeing?
>>>
>> I dont fully understand your explanation/question. When I run lsof, I am
>> seeing the following:
>>
>> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyr.cfs
>> (deleted)
>> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyp.cfs
>> (deleted)
>>
>> I assume these are left by the OS after the merge operation tried to delete
>> old segments. The OS is unable to delete the files. I think its because our
>> new code never closes the indexwriter, but rather uses the
>> indexwriter.commit() method to apply the changes. Is this correct?
> Ahh I see they are deleted but held open... hmmm.
>
> Though this is also what you'd see if there were still a reader open.
> Are you certain all readers were closed (finalized) when you ran lsof?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 01 06:00:22 2010
Return-Path: <java-user-return-47373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85849 invoked from network); 1 Oct 2010 06:00:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Oct 2010 06:00:21 -0000
Received: (qmail 20288 invoked by uid 500); 1 Oct 2010 06:00:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19818 invoked by uid 500); 1 Oct 2010 06:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19810 invoked by uid 99); 1 Oct 2010 06:00:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 06:00:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 06:00:07 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9734745F1D8
	for <java-user@lucene.apache.org>; Fri,  1 Oct 2010 07:59:45 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FW3bKuJqO+fU for <java-user@lucene.apache.org>;
	Fri,  1 Oct 2010 07:59:33 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BA20F45F1C8
	for <java-user@lucene.apache.org>; Fri,  1 Oct 2010 07:59:32 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CA37BD8.8050608@stimulussoft.com>	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>	<4CA38A5F.1000100@stimulussoft.com>	<000001cb607d$486b9660$d942c320$@thetaphi.de>	<4CA457AE.8080203@stimulussoft.com>	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>	<4CA45F93.4000503@stimulussoft.com> <AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com> <4CA57479.8000405@stimulussoft.com>
In-Reply-To: <4CA57479.8000405@stimulussoft.com>
Subject: RE: File Handle Leaks During Lucene 3.0.2 Merge
Date: Fri, 1 Oct 2010 08:00:04 +0200
Message-ID: <005d01cb612d$e4ead950$aec08bf0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQK1IASPuHD7fWK4tGfTUhRYh1Mz8AJQ2/brAf/iy38B6P+tvQKZsL4xAcbXWDIBzpQnwgHBVo+kAsiDC1OQ0IXGYA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jamie,

YES, ist expected for the reasons described above (segments are still
referenced by the open IndexReaders, but files were already deleted by
IndexWriter). The approx. number of open, but already deleted files should
be approx. stable.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Jamie [mailto:jamie@stimulussoft.com]
> Sent: Friday, October 01, 2010 7:41 AM
> To: java-user@lucene.apache.org
> Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
> 
>   Hi Mike
> 
>   I managed to get hold of a copy of your book through Safari Books.
> Quite an impressive online reading system they have there! I integrated
your
> SearchManager class into our code, but I am still seeing file handles
marked
> deleted in the index directory. I am running the following command on
Linux:
> 
> sudo watch -n 0 "lsof | grep /var/index | grep deleted | wc -l"
> 
> Every 0.1s: lsof | grep /var/index | grep deleted |...  Fri Oct  1
> 09:37:36 2010
> 
> 54
> 
> The deleted file handles fluctuate up and down. 54 -> 102 -> 64 -> 32,
etc. They
> seem stable though. Is this to be expected when using NRT search?
> 
>   I am pretty certain that all Searchers are released at the end of every
search.
> I double checked it at least twenty times.
> 
> Jamie
> 
> 
> 
> On 2010/09/30 11:56 PM, Michael McCandless wrote:
> > On Thu, Sep 30, 2010 at 5:59 AM, Jamie<jamie@stimulussoft.com>  wrote:
> >>   Hi Michael / Uwe
> >>
> >>> It's good to cache the reader, but, finalize would worry me too
> >>> since you have no control over when GC gets around to calling it...
> >>> you risk tying up resources for longer than necessary.
> >> I did it this way, as I didn't want to over complicate the code by
> >> introducing mechanisms to track the number of search threads using a
> >> shared indexreader. Admittedly, its not a very clean solution but in
> >> my case it does work. Is there a particular technique for knowing
> >> when to a close a reader when there are multiple search threads using
> >> that reader? Should I keep some kind of counter and override the
> >> close method of the reader such that the underlying reader is only
closed
> when everyone's done with it?
> > See Uwe's response (or SearcherManager).
> >
> >>> IndexWriter has a reader pool, internally, where it holds open
> >>> SegmentReaders for the still-live segments in the index.  This is
> >>> used by IndexReader.reopen to share open SegmentReaders.
> >>>
> >>> But the open files should correspond only to segments still "live"
> >>> in the index.  After segments are merged away, these readers are
dropped.
> >>>   Is this what you are seeing?
> >>>
> >> I dont fully understand your explanation/question. When I run lsof, I
> >> am seeing the following:
> >>
> >> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyr.cf
> >> s
> >> (deleted)
> >> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyp.cf
> >> s
> >> (deleted)
> >>
> >> I assume these are left by the OS after the merge operation tried to
> >> delete old segments. The OS is unable to delete the files. I think
> >> its because our new code never closes the indexwriter, but rather
> >> uses the
> >> indexwriter.commit() method to apply the changes. Is this correct?
> > Ahh I see they are deleted but held open... hmmm.
> >
> > Though this is also what you'd see if there were still a reader open.
> > Are you certain all readers were closed (finalized) when you ran lsof?
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 01 09:48:37 2010
Return-Path: <java-user-return-47374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46612 invoked from network); 1 Oct 2010 09:48:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Oct 2010 09:48:37 -0000
Received: (qmail 99597 invoked by uid 500); 1 Oct 2010 09:48:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99155 invoked by uid 500); 1 Oct 2010 09:48:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99147 invoked by uid 99); 1 Oct 2010 09:48:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 09:48:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 09:48:23 +0000
Received: by wwb22 with SMTP id 22so1579523wwb.5
        for <java-user@lucene.apache.org>; Fri, 01 Oct 2010 02:48:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.67.66 with SMTP id i44mr1890007wed.53.1285926482522; Fri,
 01 Oct 2010 02:48:02 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Fri, 1 Oct 2010 02:48:02 -0700 (PDT)
In-Reply-To: <4CA57479.8000405@stimulussoft.com>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
	<4CA457AE.8080203@stimulussoft.com>
	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
	<4CA45F93.4000503@stimulussoft.com>
	<AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com>
	<4CA57479.8000405@stimulussoft.com>
Date: Fri, 1 Oct 2010 05:48:02 -0400
Message-ID: <AANLkTinmP6i5hMwTAiZPOb221_ieOVNon3sQGThyUiRK@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Oct 1, 2010 at 1:41 AM, Jamie <jamie@stimulussoft.com> wrote:

> =A0I managed to get hold of a copy of your book through Safari Books. Qui=
te an
> impressive online reading system they have there!

Neat!  I had never heard of Safari Books until now, but it looks cool.

> I integrated your
> SearchManager class into our code, but I am still seeing file handles mar=
ked
> deleted in the index directory. I am running the following command on Lin=
ux:
>
> sudo watch -n 0 "lsof | grep /var/index | grep deleted | wc -l"
>
> Every 0.1s: lsof | grep /var/index | grep deleted |... =A0Fri Oct =A01 09=
:37:36
> 2010
>
> 54
>
> The deleted file handles fluctuate up and down. 54 -> 102 -> 64 -> 32, et=
c.
> They seem stable though. Is this to be expected when using NRT search?
>
> =A0I am pretty certain that all Searchers are released at the end of ever=
y
> search. I double checked it at least twenty times.

SearcherManager always keeps one IndexReader open (the current "live"
one), so it's expected that this reader is holding open references to
deleted files if in fact IndexWriter has completed merges since the
reader was opened. Though.. I would expect you to sometimes see 0
deleted files in your lsof...

Maybe try this: 1) pause your indexing, 2) reopen the reader (call
SearcherManager.reopen), and then 3) run lsof again, at which point
you should see no deleted files still held open.

But note that to truly pause your indexing, you should switch
(temporarily, for this test) your IndexWriter to the
SerialMergeScheduler, and then ensure you stop calling IndexWriter ops
while you run steps 2 and 3.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 01 15:33:48 2010
Return-Path: <java-user-return-47375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7072 invoked from network); 1 Oct 2010 15:33:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Oct 2010 15:33:47 -0000
Received: (qmail 68583 invoked by uid 500); 1 Oct 2010 15:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68213 invoked by uid 500); 1 Oct 2010 15:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68190 invoked by uid 99); 1 Oct 2010 15:33:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 15:33:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Oct 2010 15:33:33 +0000
Received: by wwb22 with SMTP id 22so1856118wwb.5
        for <java-user@lucene.apache.org>; Fri, 01 Oct 2010 08:33:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=WifJ2yy+kZifLuUPzahyaqcuMvQmhmBtAsDxDO4/AQQ=;
        b=UnTvgvYVPYnDe3x+dnJXZvl07qVwBvsDqfx4/VByZt1b7JKXLY3OajLFm3OoZp/a8X
         h/RiRTu72kMlj7oXZRaijuY0nOTdI5qwQFLzmXTimwGCJFa7AR02EDS/U69Odpwv9jYc
         gOiViRY0nQgHrgzkSyzHHkRReQDmIi4yaTasY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EL4Uo1BA/9LCoIrPtKicQTELSEr4Uc3FuhlmO7iYvjp6HGM2Rl2bnmU8YJDd5I1HlC
         Rm34qWpZHLrTbjsu6o//ORz8nHN6ESwXFD9gwz35uWz3vggwOMkuRDuYyJmpoMtBPdn7
         jtzn4lF0K9QKLigYnNLi58nbb1TxsIRmRFlfQ=
MIME-Version: 1.0
Received: by 10.216.16.33 with SMTP id g33mr960973weg.40.1285947193607; Fri,
 01 Oct 2010 08:33:13 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Fri, 1 Oct 2010 08:33:13 -0700 (PDT)
Date: Fri, 1 Oct 2010 11:33:13 -0400
Message-ID: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
Subject: How to get the score of a term in a document?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175909b0acc4ef04918fe962
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175909b0acc4ef04918fe962
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I need to retrieve the score of a term in a document? I dont want to play
different scoring schemes. I just checked my index with Luke and it shows me
a score for each term in each document the term exists. So, I need just to
get that score.

Can anybody help me?

Thank you in advance.

Sahin.

--0015175909b0acc4ef04918fe962--

From java-user-return-47376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 02 01:22:39 2010
Return-Path: <java-user-return-47376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48226 invoked from network); 2 Oct 2010 01:22:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Oct 2010 01:22:39 -0000
Received: (qmail 12642 invoked by uid 500); 2 Oct 2010 01:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12538 invoked by uid 500); 2 Oct 2010 01:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12530 invoked by uid 99); 2 Oct 2010 01:22:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 01:22:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 01:22:28 +0000
Received: by qwk3 with SMTP id 3so2435743qwk.35
        for <java-user@lucene.apache.org>; Fri, 01 Oct 2010 18:22:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0c8op+qNKIrMi6xdaeWWdvw+WR24aNjSl3EJCfKgNrQ=;
        b=KTAqgky9rQ9PMJobQu7WHMssjFJsTRUlVDKZl91EeEFPJEi39s+cv4J1IhvRmLhDlL
         Lx0lIJIl93B7KWd8QBQsRXBBSw5YGeadHi3zgcOBfPyqDinMDHLIGlbCbZJmvXKvEPJu
         dG2u5dqlYyhaJQ9EaOIU3kKXjrPSxMVtSBhbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Hzf/Jv5ivmwyBVXbnRqOq1EekPwpsX5Pxpzxut68ClpdnlC5AGw9M5vYsiT5uWVkaa
         N7Ep6f6rSa0G9yrW1uu4YxR2zjwZ8tnQgUGbYsTgvAtLATVtRBe2otHs2DvoU2D0el56
         /JgdxNzIi1Teq6U+WYpFNhY67kAVA+W7czGTQ=
MIME-Version: 1.0
Received: by 10.229.181.12 with SMTP id bw12mr3193635qcb.249.1285982528055;
 Fri, 01 Oct 2010 18:22:08 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Fri, 1 Oct 2010 18:22:07 -0700 (PDT)
In-Reply-To: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
References: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
Date: Fri, 1 Oct 2010 21:22:07 -0400
Message-ID: <AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
Subject: Re: How to get the score of a term in a document?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7fe4c5aa1304919823f6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7fe4c5aa1304919823f6
Content-Type: text/plain; charset=ISO-8859-1

I'm not sure what you're asking for. "Score of a term in a document"? Do you
mean the amount a term contributed to a search for a particular document?
The frequency of a term in a document? ???

Could you elaborate on what you're trying to do? If you describe the problem
you're trying to solve, people can provide better answers.

Best
Erick

On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Hi all,
>
> I need to retrieve the score of a term in a document? I dont want to play
> different scoring schemes. I just checked my index with Luke and it shows
> me
> a score for each term in each document the term exists. So, I need just to
> get that score.
>
> Can anybody help me?
>
> Thank you in advance.
>
> Sahin.
>

--0016361e7fe4c5aa1304919823f6--

From java-user-return-47377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 02 03:50:20 2010
Return-Path: <java-user-return-47377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80423 invoked from network); 2 Oct 2010 03:50:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Oct 2010 03:50:19 -0000
Received: (qmail 84832 invoked by uid 500); 2 Oct 2010 03:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84399 invoked by uid 500); 2 Oct 2010 03:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84391 invoked by uid 99); 2 Oct 2010 03:50:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 03:50:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 03:50:03 +0000
Received: by wye20 with SMTP id 20so501385wye.35
        for <java-user@lucene.apache.org>; Fri, 01 Oct 2010 20:49:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=h40emQFcP46TMHaxZMDQ2r3ug0uRrdfcizwUi0vX8KA=;
        b=EuUKpIZABDweyc+NxyZh0hAZkRkFMvzdTlSLIwgTLG8bqvk783I8R3gcCwsf75cL1r
         FFs/u/EaZJTN6PsusMyUxb+AwzwbLpAQzCx6REC05U1IyjPdzaOLhmbeFbG+fZ8aFADU
         sEei8AYSmits+x9DAW/e+5y1RUSSyX3SpBNOY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XL5yRjJKjrGnb+2ootrdUA3dYjpbkANLuE01qeV7BSwa4cGutJkEpUPjUYosfPkve5
         rnJMqPkz4GmuiJJObpdp3xSDpk/lQySxecL370RkOiNeZ7eDwsIScy9jtMSj8RVDjBOf
         v/BjSmYiE8U+zMEajt6HhrTk2SzbX1x7+9Iww=
MIME-Version: 1.0
Received: by 10.216.22.131 with SMTP id t3mr5244028wet.39.1285991383067; Fri,
 01 Oct 2010 20:49:43 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Fri, 1 Oct 2010 20:49:42 -0700 (PDT)
In-Reply-To: <AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
References: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
	<AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
Date: Fri, 1 Oct 2010 23:49:42 -0400
Message-ID: <AANLkTi=tauntxH6NGxcw=sW26bFDdDXQkwVCjCbRZC-d@mail.gmail.com>
Subject: Re: How to get the score of a term in a document?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/mixed; boundary=0016364c7949926da504919a3301
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c7949926da504919a3301
Content-Type: multipart/alternative; boundary=0016364c7949926d9904919a33ff

--0016364c7949926d9904919a33ff
Content-Type: text/plain; charset=ISO-8859-1

Hi Erick,

I mean the score of a term in a document (we can think this as a one word
query) which is calculated by using "Default Similarity". Actually, when I
walk through my index term-by-term, Luke shows me the number of documents in
which the term exists. And for each document there is a score field. please
check the attachment for the screenshot. I am very new to the jargon of
Lucene, so I am sorry if I explain things in an incorrect way.

My question is: For a term in the index, can we retrieve the value (here I
say score) calculated by using default similarity? Is this a value which is
already stored in the index or is it calculated on the fly by Luke (since I
can only see by using Luke)?

My goal is to create an inverted index and write it into a text file in the
following form:

Term t        ft         Inverted list for t
----------------------------------------------------------------------------------
big              2        <2, 0.148> <3, 0.088>
in                5        <6, 0.159> <2, 0.143> <5, 0.088> <1, 0.076> <4,
0.065>
-
-
-
-
-
so on for all terms. Here ft is the total frequency of term t in the whole
index, <docID , score > pairs are ID of the document in which term t has a
score, and these pairs are listed according to the decreasing order of
scores.


I checked through the documentation, and found scorer class but couldnt
understand how to use it.

I hope this is a kind of better explanation.

Best.
Sahin.


On Fri, Oct 1, 2010 at 9:22 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> I'm not sure what you're asking for. "Score of a term in a document"? Do
> you
> mean the amount a term contributed to a search for a particular document?
> The frequency of a term in a document? ???
>
> Could you elaborate on what you're trying to do? If you describe the
> problem
> you're trying to solve, people can provide better answers.
>
> Best
> Erick
>
> On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > Hi all,
> >
> > I need to retrieve the score of a term in a document? I dont want to play
> > different scoring schemes. I just checked my index with Luke and it shows
> > me
> > a score for each term in each document the term exists. So, I need just
> to
> > get that score.
> >
> > Can anybody help me?
> >
> > Thank you in advance.
> >
> > Sahin.
> >
>

--0016364c7949926d9904919a33ff
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Erick,<br><br>I mean the score of a term in a document (we can think thi=
s as a one word query) which is calculated by using &quot;Default Similarit=
y&quot;. Actually, when I walk through my index term-by-term, Luke shows me=
 the number of documents in which the term exists. And for each document th=
ere is a score field. please check the attachment for the screenshot. I am =
very new to the jargon of Lucene, so I am sorry if I explain things in an i=
ncorrect way.<br>
<br>My question is: For a term in the index, can we retrieve the value (her=
e I say score) calculated by using default similarity? Is this a value whic=
h is already stored in the index or is it calculated on the fly by Luke (si=
nce I can only see by using Luke)?<br>
<br>My goal is to create an inverted index and write it into a text file in=
 the following form:<br><br>Term t=A0=A0=A0=A0=A0=A0=A0 ft=A0=A0=A0=A0=A0=
=A0=A0=A0 Inverted list for t<br>------------------------------------------=
----------------------------------------<br>
big=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 2=A0=A0=A0=A0=A0=A0=A0 &lt;2, 0.=
148&gt; &lt;3, 0.088&gt;<br>in=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
 5=A0=A0=A0=A0=A0=A0=A0 &lt;6, 0.159&gt; &lt;2, 0.143&gt; &lt;5, 0.088&gt; =
&lt;1, 0.076&gt; &lt;4, 0.065&gt;<br>-<br>-<br>-<br>-<br>-<br>so on for all=
 terms. Here ft is the total frequency of term t in the whole index, &lt;do=
cID , score &gt; pairs are ID of the document in which term t has a score, =
and these pairs are listed according to the decreasing order of scores.<br>
<br><br>I checked through the documentation, and found scorer class but cou=
ldnt understand how to use it.<br><br>I hope this is a kind of better expla=
nation.<br><br>Best.<br>Sahin.<br><br><br><div class=3D"gmail_quote">On Fri=
, Oct 1, 2010 at 9:22 PM, Erick Erickson <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:erickerickson@gmail.com">erickerickson@gmail.com</a>&gt;</span> wrote=
:<br>
<blockquote class=3D"gmail_quote" style=3D"margin: 0pt 0pt 0pt 0.8ex; borde=
r-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">I&#39;m not sure =
what you&#39;re asking for. &quot;Score of a term in a document&quot;? Do y=
ou<br>

mean the amount a term contributed to a search for a particular document?<b=
r>
The frequency of a term in a document? ???<br>
<br>
Could you elaborate on what you&#39;re trying to do? If you describe the pr=
oblem<br>
you&#39;re trying to solve, people can provide better answers.<br>
<br>
Best<br>
<font color=3D"#888888">Erick<br>
</font><div><div></div><div class=3D"h5"><br>
On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen &lt;<br>
<a href=3D"mailto:sahin.buyrukbilen@gmail.com">sahin.buyrukbilen@gmail.com<=
/a>&gt; wrote:<br>
<br>
&gt; Hi all,<br>
&gt;<br>
&gt; I need to retrieve the score of a term in a document? I dont want to p=
lay<br>
&gt; different scoring schemes. I just checked my index with Luke and it sh=
ows<br>
&gt; me<br>
&gt; a score for each term in each document the term exists. So, I need jus=
t to<br>
&gt; get that score.<br>
&gt;<br>
&gt; Can anybody help me?<br>
&gt;<br>
&gt; Thank you in advance.<br>
&gt;<br>
&gt; Sahin.<br>
&gt;<br>
</div></div></blockquote></div><br>

--0016364c7949926d9904919a33ff--

--0016364c7949926da504919a3301
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0016364c7949926da504919a3301--

From java-user-return-47378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 02 09:31:15 2010
Return-Path: <java-user-return-47378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51604 invoked from network); 2 Oct 2010 09:31:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Oct 2010 09:31:15 -0000
Received: (qmail 7938 invoked by uid 500); 2 Oct 2010 09:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7435 invoked by uid 500); 2 Oct 2010 09:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7427 invoked by uid 99); 2 Oct 2010 09:31:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 09:31:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 09:30:58 +0000
Received: by wye20 with SMTP id 20so639167wye.35
        for <java-user@lucene.apache.org>; Sat, 02 Oct 2010 02:30:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.165.16 with SMTP id d16mr5461491wel.0.1286011838163; Sat,
 02 Oct 2010 02:30:38 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Sat, 2 Oct 2010 02:30:38 -0700 (PDT)
In-Reply-To: <AANLkTi=tauntxH6NGxcw=sW26bFDdDXQkwVCjCbRZC-d@mail.gmail.com>
References: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
	<AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
	<AANLkTi=tauntxH6NGxcw=sW26bFDdDXQkwVCjCbRZC-d@mail.gmail.com>
Date: Sat, 2 Oct 2010 05:30:38 -0400
Message-ID: <AANLkTi=EkkQ2vz0rNcZCYn2ryY12Wj5-nA+HASsiOWYG@mail.gmail.com>
Subject: Re: How to get the score of a term in a document?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you can just use Lucene's enum APIs (IndexReader.terms,
IndexReader.termDocs) to walk the entire index, converting it to your
format?

I'm not sure how Luke computes the "score"... but maybe you could, for
every term, make a TermQuery and then directly walk its matching docs
& scores?  You'd have to do something like:

  Scorer s =3D TermQuery.weight(searcher).scorer(reader, true, false);

  int docID;
  while((docID =3D s.nextDoc()) !=3D Scorer.NO_MORE_DOCS) {
    float score =3D s.score();
  }

I think?

Mike

On Fri, Oct 1, 2010 at 11:49 PM, Sahin Buyrukbilen
<sahin.buyrukbilen@gmail.com> wrote:
> Hi Erick,
>
> I mean the score of a term in a document (we can think this as a one word
> query) which is calculated by using "Default Similarity". Actually, when =
I
> walk through my index term-by-term, Luke shows me the number of documents=
 in
> which the term exists. And for each document there is a score field. plea=
se
> check the attachment for the screenshot. I am very new to the jargon of
> Lucene, so I am sorry if I explain things in an incorrect way.
>
> My question is: For a term in the index, can we retrieve the value (here =
I
> say score) calculated by using default similarity? Is this a value which =
is
> already stored in the index or is it calculated on the fly by Luke (since=
 I
> can only see by using Luke)?
>
> My goal is to create an inverted index and write it into a text file in t=
he
> following form:
>
> Term t=A0=A0=A0=A0=A0=A0=A0 ft=A0=A0=A0=A0=A0=A0=A0=A0 Inverted list for =
t
> -------------------------------------------------------------------------=
---------
> big=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 2=A0=A0=A0=A0=A0=A0=A0 <2, 0.1=
48> <3, 0.088>
> in=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 5=A0=A0=A0=A0=A0=A0=A0 <6=
, 0.159> <2, 0.143> <5, 0.088> <1, 0.076> <4,
> 0.065>
> -
> -
> -
> -
> -
> so on for all terms. Here ft is the total frequency of term t in the whol=
e
> index, <docID , score > pairs are ID of the document in which term t has =
a
> score, and these pairs are listed according to the decreasing order of
> scores.
>
>
> I checked through the documentation, and found scorer class but couldnt
> understand how to use it.
>
> I hope this is a kind of better explanation.
>
> Best.
> Sahin.
>
>
> On Fri, Oct 1, 2010 at 9:22 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>>
>> I'm not sure what you're asking for. "Score of a term in a document"? Do
>> you
>> mean the amount a term contributed to a search for a particular document=
?
>> The frequency of a term in a document? ???
>>
>> Could you elaborate on what you're trying to do? If you describe the
>> problem
>> you're trying to solve, people can provide better answers.
>>
>> Best
>> Erick
>>
>> On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen <
>> sahin.buyrukbilen@gmail.com> wrote:
>>
>> > Hi all,
>> >
>> > I need to retrieve the score of a term in a document? I dont want to
>> > play
>> > different scoring schemes. I just checked my index with Luke and it
>> > shows
>> > me
>> > a score for each term in each document the term exists. So, I need jus=
t
>> > to
>> > get that score.
>> >
>> > Can anybody help me?
>> >
>> > Thank you in advance.
>> >
>> > Sahin.
>> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 02 13:43:34 2010
Return-Path: <java-user-return-47379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6657 invoked from network); 2 Oct 2010 13:43:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Oct 2010 13:43:33 -0000
Received: (qmail 26410 invoked by uid 500); 2 Oct 2010 13:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25906 invoked by uid 500); 2 Oct 2010 13:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25898 invoked by uid 99); 2 Oct 2010 13:43:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 13:43:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 13:43:20 +0000
Received: by wwb22 with SMTP id 22so2483227wwb.5
        for <java-user@lucene.apache.org>; Sat, 02 Oct 2010 06:43:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=JS5q+jKjRomAeo/f8KoJB3jkHgLaLfOj2CN24jMa94A=;
        b=c+n6xV8JlqxKuC+cntofi39uSRHqjOk+F4ohzlfKd31WarqFT2vKQqr2nMed3zSUJG
         ff8GrWYh1L/PvjTy5kw3WbxUbjkea04GM+J1WAduPNBvD4DbkHTfG2vTMkI49xwhTroB
         QpSkVNDAY5DGbRWgGpKyLzDNSs7YbrzFQMEro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=McUKtnOfVh0ki/07lQ2FY2FnNHxPxvRu/l/HDwt7MfPY/gTTJgXy+ohgdmUP3vin6A
         TRGtvDeACom/oUXTUDhwUSG847RVz2bItzpMrbTwPQpYcBkZS50VADR3wxug7IyT+Zz0
         EBAWLVGNUKY2XoAIMGLZC6c5NAgO9o4LVSEOQ=
MIME-Version: 1.0
Received: by 10.216.22.74 with SMTP id s52mr3249982wes.11.1286026979963; Sat,
 02 Oct 2010 06:42:59 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Sat, 2 Oct 2010 06:42:59 -0700 (PDT)
In-Reply-To: <AANLkTi=EkkQ2vz0rNcZCYn2ryY12Wj5-nA+HASsiOWYG@mail.gmail.com>
References: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
	<AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
	<AANLkTi=tauntxH6NGxcw=sW26bFDdDXQkwVCjCbRZC-d@mail.gmail.com>
	<AANLkTi=EkkQ2vz0rNcZCYn2ryY12Wj5-nA+HASsiOWYG@mail.gmail.com>
Date: Sat, 2 Oct 2010 09:42:59 -0400
Message-ID: <AANLkTinhNDN7xqAXKeDe3_g6QcYaN=mSs5rHD8VtSrzo@mail.gmail.com>
Subject: Re: How to get the score of a term in a document?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d1b8d4ff24f0491a27dfb
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364d1b8d4ff24f0491a27dfb
Content-Type: text/plain; charset=ISO-8859-1

Hi Mike,

I am already done with walking through the terms, frequencies and the docs
by using termenum, termdocs, and indexreader,. The only thing left is the
scores. I will try your suggestion. hope it works.

Thank you.

Sahin.

On Sat, Oct 2, 2010 at 5:30 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> It sounds like you can just use Lucene's enum APIs (IndexReader.terms,
> IndexReader.termDocs) to walk the entire index, converting it to your
> format?
>
> I'm not sure how Luke computes the "score"... but maybe you could, for
> every term, make a TermQuery and then directly walk its matching docs
> & scores?  You'd have to do something like:
>
>  Scorer s = TermQuery.weight(searcher).scorer(reader, true, false);
>
>  int docID;
>  while((docID = s.nextDoc()) != Scorer.NO_MORE_DOCS) {
>    float score = s.score();
>  }
>
> I think?
>
> Mike
>
> On Fri, Oct 1, 2010 at 11:49 PM, Sahin Buyrukbilen
>  <sahin.buyrukbilen@gmail.com> wrote:
> > Hi Erick,
> >
> > I mean the score of a term in a document (we can think this as a one word
> > query) which is calculated by using "Default Similarity". Actually, when
> I
> > walk through my index term-by-term, Luke shows me the number of documents
> in
> > which the term exists. And for each document there is a score field.
> please
> > check the attachment for the screenshot. I am very new to the jargon of
> > Lucene, so I am sorry if I explain things in an incorrect way.
> >
> > My question is: For a term in the index, can we retrieve the value (here
> I
> > say score) calculated by using default similarity? Is this a value which
> is
> > already stored in the index or is it calculated on the fly by Luke (since
> I
> > can only see by using Luke)?
> >
> > My goal is to create an inverted index and write it into a text file in
> the
> > following form:
> >
> > Term t        ft         Inverted list for t
> >
> ----------------------------------------------------------------------------------
> > big              2        <2, 0.148> <3, 0.088>
> > in                5        <6, 0.159> <2, 0.143> <5, 0.088> <1, 0.076>
> <4,
> > 0.065>
> > -
> > -
> > -
> > -
> > -
> > so on for all terms. Here ft is the total frequency of term t in the
> whole
> > index, <docID , score > pairs are ID of the document in which term t has
> a
> > score, and these pairs are listed according to the decreasing order of
> > scores.
> >
> >
> > I checked through the documentation, and found scorer class but couldnt
> > understand how to use it.
> >
> > I hope this is a kind of better explanation.
> >
> > Best.
> > Sahin.
> >
> >
> > On Fri, Oct 1, 2010 at 9:22 PM, Erick Erickson <erickerickson@gmail.com>
> > wrote:
> >>
> >> I'm not sure what you're asking for. "Score of a term in a document"? Do
> >> you
> >> mean the amount a term contributed to a search for a particular
> document?
> >> The frequency of a term in a document? ???
> >>
> >> Could you elaborate on what you're trying to do? If you describe the
> >> problem
> >> you're trying to solve, people can provide better answers.
> >>
> >> Best
> >> Erick
> >>
> >> On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen <
> >> sahin.buyrukbilen@gmail.com> wrote:
> >>
> >> > Hi all,
> >> >
> >> > I need to retrieve the score of a term in a document? I dont want to
> >> > play
> >> > different scoring schemes. I just checked my index with Luke and it
> >> > shows
> >> > me
> >> > a score for each term in each document the term exists. So, I need
> just
> >> > to
> >> > get that score.
> >> >
> >> > Can anybody help me?
> >> >
> >> > Thank you in advance.
> >> >
> >> > Sahin.
> >> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364d1b8d4ff24f0491a27dfb--

From java-user-return-47380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 02 18:49:31 2010
Return-Path: <java-user-return-47380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99144 invoked from network); 2 Oct 2010 18:49:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Oct 2010 18:49:31 -0000
Received: (qmail 31235 invoked by uid 500); 2 Oct 2010 18:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31111 invoked by uid 500); 2 Oct 2010 18:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31103 invoked by uid 99); 2 Oct 2010 18:49:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 18:49:28 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Oct 2010 18:49:23 +0000
Received: by wye20 with SMTP id 20so975473wye.35
        for <java-user@lucene.apache.org>; Sat, 02 Oct 2010 11:48:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=3v1QU/m03wmV+icLn7sVvrI1o0oZzvDgPNARzV3BJDE=;
        b=X9skWyuDeo3WuVidisVw69r8Je0tuQtHKBR6yxwmmzX5NdHHF7wJqkP3qnOHG5MJhO
         5LPvKAw652OHuU/OahOXSF1Ik8k7qSJmVctKwoxfyfmCdj3bqFd8m7CAs+W57+y0LkPy
         z0I7NAWEZT2Kv7NK1VYTvoWylgHkBFA3v8rRI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VFwQ5lDefQj+Hg3sEWqzm+FX2VZNc3dgT4GAczN8Cnaflez/alaeMwBoIq1fDy0utA
         rMwj8l/kiftEyUjFVSzUYEnmW3dd5hnvmZudUFOEBDXyJW7fcPVVMfUXOmsemv9O1dHn
         6oNRCCaY2t24lGJ/ddiEzwBTqPCFUWiKGUsSI=
MIME-Version: 1.0
Received: by 10.216.70.10 with SMTP id o10mr5897659wed.83.1286045338079; Sat,
 02 Oct 2010 11:48:58 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Sat, 2 Oct 2010 11:48:57 -0700 (PDT)
In-Reply-To: <AANLkTinhNDN7xqAXKeDe3_g6QcYaN=mSs5rHD8VtSrzo@mail.gmail.com>
References: <AANLkTinstdi9pb8zgRBDTkm6z8g3eXQMPOSZBL=SgDtB@mail.gmail.com>
	<AANLkTimR88+3VDOnr3QQ2TckaGP-4EaMTLTfAer_kXA_@mail.gmail.com>
	<AANLkTi=tauntxH6NGxcw=sW26bFDdDXQkwVCjCbRZC-d@mail.gmail.com>
	<AANLkTi=EkkQ2vz0rNcZCYn2ryY12Wj5-nA+HASsiOWYG@mail.gmail.com>
	<AANLkTinhNDN7xqAXKeDe3_g6QcYaN=mSs5rHD8VtSrzo@mail.gmail.com>
Date: Sat, 2 Oct 2010 14:48:57 -0400
Message-ID: <AANLkTimmJ5gfLGWvb3b059_XiP-ZSHp29n-Fo8Ljc8u0@mail.gmail.com>
Subject: Re: How to get the score of a term in a document?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d388cf8a93170491a6c353

--0016e6d388cf8a93170491a6c353
Content-Type: text/plain; charset=ISO-8859-1

Hi Mike and all other friends,

the code below does almost what I want. The only thing I need to do is to
write the <docID, score> pairs in the order with respect to score, not
docID. Current implementation does it wrt docID. I will try to solve that
problem, if anybody knows how to do that I appreciate if he/she shares with
me.

I am adding my code just in case anybody needs it.

Regards.

Sahin.

public class YilmazTest {


    public static void main(String[] args) {

        try{
            BufferedWriter out = new BufferedWriter(new
FileWriter("/home/guardian/Lucene/output")); // output file
            Directory dir = FSDirectory.open(new
File("/home/guardian/Lucene/Indexes"));

            IndexReader reader = IndexReader.open(dir);

            TermEnum termEnum = reader.terms();

            IndexSearcher searcher;
            searcher = new IndexSearcher(dir, true);

            System.out.println(reader.numDocs());


            while(termEnum.next()){
                TermDocs termDocs = reader.termDocs(termEnum.term());

                TermQuery tq = new TermQuery(new
Term(termEnum.term().field(), termEnum.term().text()));

                Scorer s = tq.weight(searcher).scorer(reader, true, false);

                boolean once = true;
                while(termDocs.next()){
                    if (once){
                        out.write(termEnum.term().text() + "      ");
                        out.write(termEnum.docFreq() + "      ");
                    }


                    s.nextDoc();

                    out.write("<" + termDocs.doc() + "," + s.score() + ">
");
                    once = false;
                }
                out.newLine();
            }
            out.close();
        }
        catch(IOException ex){}
    }
}


On Sat, Oct 2, 2010 at 9:42 AM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Hi Mike,
>
> I am already done with walking through the terms, frequencies and the docs
> by using termenum, termdocs, and indexreader,. The only thing left is the
> scores. I will try your suggestion. hope it works.
>
> Thank you.
>
> Sahin.
>
> On Sat, Oct 2, 2010 at 5:30 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> It sounds like you can just use Lucene's enum APIs (IndexReader.terms,
>> IndexReader.termDocs) to walk the entire index, converting it to your
>> format?
>>
>> I'm not sure how Luke computes the "score"... but maybe you could, for
>> every term, make a TermQuery and then directly walk its matching docs
>> & scores?  You'd have to do something like:
>>
>>  Scorer s = TermQuery.weight(searcher).scorer(reader, true, false);
>>
>>  int docID;
>>  while((docID = s.nextDoc()) != Scorer.NO_MORE_DOCS) {
>>    float score = s.score();
>>  }
>>
>> I think?
>>
>> Mike
>>
>> On Fri, Oct 1, 2010 at 11:49 PM, Sahin Buyrukbilen
>>  <sahin.buyrukbilen@gmail.com> wrote:
>> > Hi Erick,
>> >
>> > I mean the score of a term in a document (we can think this as a one
>> word
>> > query) which is calculated by using "Default Similarity". Actually, when
>> I
>> > walk through my index term-by-term, Luke shows me the number of
>> documents in
>> > which the term exists. And for each document there is a score field.
>> please
>> > check the attachment for the screenshot. I am very new to the jargon of
>> > Lucene, so I am sorry if I explain things in an incorrect way.
>> >
>> > My question is: For a term in the index, can we retrieve the value (here
>> I
>> > say score) calculated by using default similarity? Is this a value which
>> is
>> > already stored in the index or is it calculated on the fly by Luke
>> (since I
>> > can only see by using Luke)?
>> >
>> > My goal is to create an inverted index and write it into a text file in
>> the
>> > following form:
>> >
>> > Term t        ft         Inverted list for t
>> >
>> ----------------------------------------------------------------------------------
>> > big              2        <2, 0.148> <3, 0.088>
>> > in                5        <6, 0.159> <2, 0.143> <5, 0.088> <1, 0.076>
>> <4,
>> > 0.065>
>> > -
>> > -
>> > -
>> > -
>> > -
>> > so on for all terms. Here ft is the total frequency of term t in the
>> whole
>> > index, <docID , score > pairs are ID of the document in which term t has
>> a
>> > score, and these pairs are listed according to the decreasing order of
>> > scores.
>> >
>> >
>> > I checked through the documentation, and found scorer class but couldnt
>> > understand how to use it.
>> >
>> > I hope this is a kind of better explanation.
>> >
>> > Best.
>> > Sahin.
>> >
>> >
>> > On Fri, Oct 1, 2010 at 9:22 PM, Erick Erickson <erickerickson@gmail.com
>> >
>> > wrote:
>> >>
>> >> I'm not sure what you're asking for. "Score of a term in a document"?
>> Do
>> >> you
>> >> mean the amount a term contributed to a search for a particular
>> document?
>> >> The frequency of a term in a document? ???
>> >>
>> >> Could you elaborate on what you're trying to do? If you describe the
>> >> problem
>> >> you're trying to solve, people can provide better answers.
>> >>
>> >> Best
>> >> Erick
>> >>
>> >> On Fri, Oct 1, 2010 at 11:33 AM, Sahin Buyrukbilen <
>> >> sahin.buyrukbilen@gmail.com> wrote:
>> >>
>> >> > Hi all,
>> >> >
>> >> > I need to retrieve the score of a term in a document? I dont want to
>> >> > play
>> >> > different scoring schemes. I just checked my index with Luke and it
>> >> > shows
>> >> > me
>> >> > a score for each term in each document the term exists. So, I need
>> just
>> >> > to
>> >> > get that score.
>> >> >
>> >> > Can anybody help me?
>> >> >
>> >> > Thank you in advance.
>> >> >
>> >> > Sahin.
>> >> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016e6d388cf8a93170491a6c353--

From java-user-return-47381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 01:59:34 2010
Return-Path: <java-user-return-47381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2216 invoked from network); 4 Oct 2010 01:59:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 01:59:33 -0000
Received: (qmail 47603 invoked by uid 500); 4 Oct 2010 01:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47382 invoked by uid 500); 4 Oct 2010 01:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47374 invoked by uid 99); 4 Oct 2010 01:59:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 01:59:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 01:59:23 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id C7872B74C2
	for <java-user@lucene.apache.org>; Mon,  4 Oct 2010 10:59:00 +0900 (JST)
Message-ID: <4CA934E4.302@r.email.ne.jp>
Date: Mon, 04 Oct 2010 10:59:00 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: question about Scorer.freq()
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'd like to know which field got hit in each doc in the hit results.
To implement it, I thought I could use Scorer.freq() which
was introduced 3.1/4.0:

https://issues.apache.org/jira/browse/LUCENE-2590

But I didn't become successful so far. What I did is:

- in each visit methods in MockScorerVisitor (borrowed TestSubScorerFreqs),
  if child query is TermQuery (for simple PoC), add the pair of
  child query and scorer in a collection:

    if (collect.contains(Occur.MUST_NOT) && child instanceof TermQuery)
      tqsSet.add( new TermQueryScorer( (TermQuery)child, scorer ) );

  where tqsSet is:

    Set<TermQueryScorer> tqsSet = new HashSet<TermQueryScorer>();

  and TermQueryScorer is:

    private static class TermQueryScorer {
      private TermQuery query;
      private Scorer scorer;
      public TermQueryScorer( TermQuery query, Scorer scorer ){
        this.query = query;
        this.scorer = scorer;
      }
    }

- in collector.collect() method:

    public void collect(int doc) throws IOException {
      int freq = 0;
      for( TermQueryScorer tqs : tqsSet ){
        Scorer scorer = tqs.scorer;
        int matchId = scorer.docID();
        if( matchId == doc ){
          freq += scorer.freq();
        }
      }
      docCounts.put(doc + docBase, freq);
      collector.collect(doc);
    }

But freq was always zero.

In collect() method of TestSubScorerFreqs, scorer is BooleanScorer2,
then the matchId == doc condition is true. But in my case, matchId which is
got from TermScorer never equal to doc.

Can I use the feature of LUCENE-2590 to know not only freq but also
which field got hit?

Thank you,

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 04:14:14 2010
Return-Path: <java-user-return-47382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43985 invoked from network); 4 Oct 2010 04:14:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 04:14:14 -0000
Received: (qmail 19423 invoked by uid 500); 4 Oct 2010 04:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19149 invoked by uid 500); 4 Oct 2010 04:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19141 invoked by uid 99); 4 Oct 2010 04:14:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 04:14:07 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 04:14:00 +0000
Received: by pwj8 with SMTP id 8so1730075pwj.35
        for <java-user@lucene.apache.org>; Sun, 03 Oct 2010 21:13:38 -0700 (PDT)
Received: by 10.142.11.18 with SMTP id 18mr561265wfk.262.1286165618718;
        Sun, 03 Oct 2010 21:13:38 -0700 (PDT)
Received: from [10.0.1.90] (203-114-161-15.wir.sta.inspire.net.nz [203.114.161.15])
        by mx.google.com with ESMTPS id y4sm2623104wfd.20.2010.10.03.21.13.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 03 Oct 2010 21:13:37 -0700 (PDT)
Subject: Numeric range query not returning results
From: Todd Nine <todd@spidertracks.co.nz>
Reply-To: todd@spidertracks.co.nz
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-212IEdOz5TSXooICSivX"
Organization: Spidertracks
Date: Mon, 04 Oct 2010 17:13:07 +1300
Message-ID: <1286165587.15807.7.camel@greenlantern.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.3 

--=-212IEdOz5TSXooICSivX
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 7bit

Hi all,
  I'm having some issues with Numeric Range queries not working as
expected.  My underlying storage medium is the Lucandra index reader and
writer, so I'm not sure if this is an issue within Lucandra or with my
usage of numeric field.  My numeric range tests that are copies of Uwe's
pass in the Lucandra, source, so I have a feeling it's my usage.  I have
a simple test case, with 5 people.  I have a Date field, the LastLogin
field.  This date is converted to epoch milliseconds, and stored in the
index in the following way.

NumericField numeric = new NumericField("LastLogin");
numeric.setLongValue(fieldValue);
doc.add(numeric);

Where I have the following 2 field values on 2 documents.

1282197146L and 1282197946L

I then perform the following query.

NumericRangeQuery rangeQuery =
NumericRangeQuery.newLongRange("LastLogin", 1282197146L, 1282197146L,
true, true);

IndexReader reader = new IndexReader(columnFamily,
						getContext(conn));
				IndexSearcher searcher = new IndexSearcher(reader);

				TopDocs docs = searcher.search(query, maxResults);

				List<Document> documents = new ArrayList<Document>(
						docs.totalHits);

				Set<String> fields = new HashSet<String>();
				fields.add(IndexDocument.ROWKEY);
				fields.add(IndexDocument.IDSERIALIZED);

				SetBasedFieldSelector selector = new SetBasedFieldSelector(
						fields, null);

				for (ScoreDoc score : docs.scoreDocs) {
					documents.add(reader.document(score.doc, selector));
				}

				return documents;

I'm always getting 0 documents.  I know this is incorrect, I can see the
values getting written to Cassandra when I run it in debug mode.  Is
this an issue with precision step, or an issue with the Lucandra index
reader implementation?

Thanks,
Todd

--=-212IEdOz5TSXooICSivX--


From java-user-return-47383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 05:55:58 2010
Return-Path: <java-user-return-47383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71274 invoked from network); 4 Oct 2010 05:55:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 05:55:58 -0000
Received: (qmail 71133 invoked by uid 500); 4 Oct 2010 05:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70680 invoked by uid 500); 4 Oct 2010 05:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70672 invoked by uid 99); 4 Oct 2010 05:55:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 05:55:51 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 05:55:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 3C33745F2F0;
	Mon,  4 Oct 2010 07:55:21 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fw7hCa6XjADf; Mon,  4 Oct 2010 07:55:11 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A1F8045F2ED;
	Mon,  4 Oct 2010 07:55:10 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<todd@spidertracks.co.nz>
References: <1286165587.15807.7.camel@greenlantern.local>
In-Reply-To: <1286165587.15807.7.camel@greenlantern.local>
Subject: RE: Numeric range query not returning results
Date: Mon, 4 Oct 2010 07:55:43 +0200
Message-ID: <003b01cb6388$c8979330$59c6b990$@thetaphi.de>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003C_01CB6399.8C22D430"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFGGejvSPuPM8d+kwclpT46Ge3XL5Q63JAA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003C_01CB6399.8C22D430
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

This test works perfectly and returns 1 doucment:

=20

  public void testToddNine() throws Exception {

    RAMDirectory directory =3D new RAMDirectory();

    IndexWriter writer =3D new IndexWriter(directory, new =
WhitespaceAnalyzer(), true, MaxFieldLength.UNLIMITED);

    try {

      Document doc =3D new Document();

      doc.add(new NumericField("LastLogin").setLongValue(1282197146L));

      writer.addDocument(doc);

      doc =3D new Document();

      doc.add(new NumericField("LastLogin").setLongValue(1282197946L));

      writer.addDocument(doc);

    } finally {

      writer.close();

    }

=20

    NumericRangeQuery<Long> rangeQuery =3D

      NumericRangeQuery.newLongRange("LastLogin", 1282197146L, =
1282197146L, true, true);

=20

    IndexReader reader =3D IndexReader.open(directory, true);

    try {

      IndexSearcher searcher =3D new IndexSearcher(reader);

      TopDocs docs =3D searcher.search(rangeQuery, 1000);

      assertEquals(1,docs.totalHits);

    } finally {

      reader.close();

    }

  }

=20

Maybe you have the following problems:

-          Are you executing the same query than created. In your =
example code the searcher executed =E2=80=9Cquery=E2=80=9D but the range =
query was =E2=80=9CrangeQuery=E2=80=9D variable name

-          Are you sure that your document is not returned, but you miss =
some stored fields? E.g. the default NumericField ctor does not create =
the field as =E2=80=9Cstored=E2=80=9D to the document?

=20

public NumericField(String name)

Creates a field for numeric values using the default precisionStep =
NumericUtils.PRECISION_STEP_DEFAULT (4). The instance is not yet =
initialized with a numeric value, before indexing a document containing =
this field, set a value using the various set???Value() methods. This =
constructor creates an indexed, but not stored field.

=20

Uwe

=20

-----

Uwe Schindler

H.-H.-Meier-Allee 63, D-28213 Bremen

http://www.thetaphi.de

eMail: uwe@thetaphi.de

=20

=20

> -----Original Message-----

> From: Todd Nine [mailto:todd@spidertracks.co.nz]

> Sent: Monday, October 04, 2010 6:13 AM

> To: java-user@lucene.apache.org

> Subject: Numeric range query not returning results

>=20

> Hi all,

>   I'm having some issues with Numeric Range queries not working as =
expected.

> My underlying storage medium is the Lucandra index reader and writer, =
so I'm

> not sure if this is an issue within Lucandra or with my usage of =
numeric field.

> My numeric range tests that are copies of Uwe's pass in the Lucandra, =
source,

> so I have a feeling it's my usage.  I have a simple test case, with 5 =
people.  I

> have a Date field, the LastLogin field.  This date is converted to =
epoch

> milliseconds, and stored in the index in the following way.

>=20

> NumericField numeric =3D new NumericField("LastLogin");

> numeric.setLongValue(fieldValue); doc.add(numeric);

>=20

> Where I have the following 2 field values on 2 documents.

>=20

> 1282197146L and 1282197946L

>=20

> I then perform the following query.

>=20

> NumericRangeQuery rangeQuery =3D

> NumericRangeQuery.newLongRange("LastLogin", 1282197146L, 1282197146L,

> true, true);

>=20

> IndexReader reader =3D new IndexReader(columnFamily,

>                                                                        =
                   getContext(conn));

>                                                            =
IndexSearcher searcher =3D new

> IndexSearcher(reader);

>=20

>                                                            TopDocs =
docs =3D searcher.search(query,

> maxResults);

>=20

>                                                            =
List<Document> documents =3D new

> ArrayList<Document>(

>                                                                        =
                   docs.totalHits);

>=20

>                                                            Set<String> =
fields =3D new HashSet<String>();

>                                                            =
fields.add(IndexDocument.ROWKEY);

>                                                            =
fields.add(IndexDocument.IDSERIALIZED);

>=20

>                                                            =
SetBasedFieldSelector selector =3D new

> SetBasedFieldSelector(

>                                                                        =
                   fields, null);

>=20

>                                                            for =
(ScoreDoc score : docs.scoreDocs) {

>=20

>             documents.add(reader.document(score.doc, selector));

>                                                            }

>=20

>                                                            return =
documents;

>=20

> I'm always getting 0 documents.  I know this is incorrect, I can see =
the values

> getting written to Cassandra when I run it in debug mode.  Is this an =
issue with

> precision step, or an issue with the Lucandra index reader =
implementation?

>=20

> Thanks,

> Todd


------=_NextPart_000_003C_01CB6399.8C22D430--


From java-user-return-47384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 09:35:34 2010
Return-Path: <java-user-return-47384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40406 invoked from network); 4 Oct 2010 09:35:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 09:35:33 -0000
Received: (qmail 37495 invoked by uid 500); 4 Oct 2010 09:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37027 invoked by uid 500); 4 Oct 2010 09:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37019 invoked by uid 99); 4 Oct 2010 09:35:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 09:35:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 09:35:20 +0000
Received: by wwb22 with SMTP id 22so3387552wwb.5
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 02:34:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.11.202 with SMTP id 52mr7408803wex.28.1286184899584; Mon,
 04 Oct 2010 02:34:59 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Mon, 4 Oct 2010 02:34:59 -0700 (PDT)
In-Reply-To: <4CA934E4.302@r.email.ne.jp>
References: <4CA934E4.302@r.email.ne.jp>
Date: Mon, 4 Oct 2010 05:34:59 -0400
Message-ID: <AANLkTikxQn5nL3YBNOZP2HtXF1ch7BSbuKhthvPZ+RTi@mail.gmail.com>
Subject: Re: question about Scorer.freq()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm are you only gathering the MUST_NOT TermScorers?  (In which case
I'd expect that the .docID() would not match the docID being
collected).  Or do you also see .docID() not matching for SHOULD and
MUST sub queries?

Also, are you sure you are getting BooleanScorer2?  Because I think
this feature (LUCENE-2590) is not going to work correctly if
BooleanScorer is used.... getting that working isn't really possible
since BooleanScorer isn't doc-at-once.  I'll open an issue for this...

And, yes, you should be able to get which field a match occurred in,
because at the lowest level the atomic (TermQuery, PhraseQuery,
SpanTermQuery, AtomatonQuery, etc.) all operate on a single field.  So
when you find a sub that "matches", you should just check the field of
that query.

Hmm... but not all queries make it easy/possible to get the field
right?  MultiTermQuery has getField, TermQuery has getTerm, but
PhraseQuery doesn't have a .getField (oh but you can .getTerms() and
then get the field).

Mike

2010/10/3 Koji Sekiguchi <koji@r.email.ne.jp>:
> Hello,
>
> I'd like to know which field got hit in each doc in the hit results.
> To implement it, I thought I could use Scorer.freq() which
> was introduced 3.1/4.0:
>
> https://issues.apache.org/jira/browse/LUCENE-2590
>
> But I didn't become successful so far. What I did is:
>
> - in each visit methods in MockScorerVisitor (borrowed TestSubScorerFreqs=
),
> =A0if child query is TermQuery (for simple PoC), add the pair of
> =A0child query and scorer in a collection:
>
> =A0 =A0if (collect.contains(Occur.MUST_NOT) && child instanceof TermQuery=
)
> =A0 =A0 =A0tqsSet.add( new TermQueryScorer( (TermQuery)child, scorer ) );
>
> =A0where tqsSet is:
>
> =A0 =A0Set<TermQueryScorer> tqsSet =3D new HashSet<TermQueryScorer>();
>
> =A0and TermQueryScorer is:
>
> =A0 =A0private static class TermQueryScorer {
> =A0 =A0 =A0private TermQuery query;
> =A0 =A0 =A0private Scorer scorer;
> =A0 =A0 =A0public TermQueryScorer( TermQuery query, Scorer scorer ){
> =A0 =A0 =A0 =A0this.query =3D query;
> =A0 =A0 =A0 =A0this.scorer =3D scorer;
> =A0 =A0 =A0}
> =A0 =A0}
>
> - in collector.collect() method:
>
> =A0 =A0public void collect(int doc) throws IOException {
> =A0 =A0 =A0int freq =3D 0;
> =A0 =A0 =A0for( TermQueryScorer tqs : tqsSet ){
> =A0 =A0 =A0 =A0Scorer scorer =3D tqs.scorer;
> =A0 =A0 =A0 =A0int matchId =3D scorer.docID();
> =A0 =A0 =A0 =A0if( matchId =3D=3D doc ){
> =A0 =A0 =A0 =A0 =A0freq +=3D scorer.freq();
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0}
> =A0 =A0 =A0docCounts.put(doc + docBase, freq);
> =A0 =A0 =A0collector.collect(doc);
> =A0 =A0}
>
> But freq was always zero.
>
> In collect() method of TestSubScorerFreqs, scorer is BooleanScorer2,
> then the matchId =3D=3D doc condition is true. But in my case, matchId wh=
ich is
> got from TermScorer never equal to doc.
>
> Can I use the feature of LUCENE-2590 to know not only freq but also
> which field got hit?
>
> Thank you,
>
> Koji
> --
> http://www.rondhuit.com/en/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 10:41:06 2010
Return-Path: <java-user-return-47385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57116 invoked from network); 4 Oct 2010 10:41:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 10:41:06 -0000
Received: (qmail 10963 invoked by uid 500); 4 Oct 2010 10:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10409 invoked by uid 500); 4 Oct 2010 10:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10400 invoked by uid 99); 4 Oct 2010 10:41:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 10:41:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.18.95.81] (HELO aa002msb.fastweb.it) (85.18.95.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 10:40:51 +0000
Received: from [192.168.1.222] (83.103.113.106) by aa002msb.fastweb.it (8.5.016.6)
        id 4BFE46010AED6BE2 for java-user@lucene.apache.org; Mon, 4 Oct 2010 12:40:30 +0200
Message-ID: <4CA9AF1E.1000302@fissore.org>
Date: Mon, 04 Oct 2010 12:40:30 +0200
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.12) Gecko/20100915 Thunderbird/3.0.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: StringIndexCache throws ArrayIndexOutOfBound
Content-Type: multipart/mixed;
 boundary="------------010804070703080509050703"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010804070703080509050703
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hello all

We are migrating our apps from 2.4.1 to 2.9.3, removing deprecated calls 
so to fast switch to 3.0.2 asap

At startup, our apps look for the min and max value of some configured 
fields, to let the user know the range of documents he/she is looking at 
and to filter them

One of these apps has a field whose min value is stored/indexed while 
all other values are just indexed

When looking for the min/max, StringIndexCache complains

Attached you find the test case we've used to isolate the problem.

I'm not sure whether is we that are using lucene the wrong way (in which 
case please give some advice) or it is a bug

Looking forward for your feedback before opening a ticket on jira

Best regards

Federico Fissore

--------------010804070703080509050703
Content-Type: text/x-java;
 name="StringIndexCacheTest.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="StringIndexCacheTest.java"

package org.apache.lucene.search;

import static org.junit.Assert.*;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriter.MaxFieldLength;
import org.apache.lucene.search.FieldCache.StringIndex;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Before;
import org.junit.Test;

public class StringIndexCacheTest {

	private IndexReader reader;

	@Before
	public void setup() throws Exception {
		RAMDirectory dir = new RAMDirectory();
		IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(Version.LUCENE_24), MaxFieldLength.UNLIMITED);

		Document doc = new Document();
		doc.add(new Field("date_doc", "20100101", Field.Store.YES, Field.Index.NOT_ANALYZED));
		doc.add(new Field("date_doc", "20100102", Field.Store.NO, Field.Index.NOT_ANALYZED));

		writer.addDocument(doc);
		writer.commit();
		writer.close();

		reader = IndexReader.open(dir, true);
	}

	@Test
	public void shouldReturnArrayOfSize3() throws Exception {
		StringIndex stringIndex = FieldCache.DEFAULT.getStringIndex(reader, "date_doc");
		assertEquals(3, stringIndex.lookup.length);
	}

	@Test
	public void shouldSortByDateDoc() throws Exception {
		Searcher searcher = new IndexSearcher(reader);
		TopFieldDocs topDocs = searcher.search(new MatchAllDocsQuery(), (Filter) null, 1, new Sort(new SortField("date_doc", SortField.STRING, false)));
		assertEquals(1, topDocs.scoreDocs.length);
		assertEquals("20100101", reader.document(topDocs.scoreDocs[0].doc).getField("date_doc").stringValue());
	}

}


--------------010804070703080509050703
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------010804070703080509050703--

From java-user-return-47386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 10:49:16 2010
Return-Path: <java-user-return-47386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58345 invoked from network); 4 Oct 2010 10:49:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 10:49:16 -0000
Received: (qmail 17339 invoked by uid 500); 4 Oct 2010 10:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17008 invoked by uid 500); 4 Oct 2010 10:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17000 invoked by uid 99); 4 Oct 2010 10:49:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 10:49:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 10:49:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AC66E45F1E4
	for <java-user@lucene.apache.org>; Mon,  4 Oct 2010 12:48:42 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3rWptc-XJPxL for <java-user@lucene.apache.org>;
	Mon,  4 Oct 2010 12:48:31 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EF52A45F1BD
	for <java-user@lucene.apache.org>; Mon,  4 Oct 2010 12:48:30 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CA9AF1E.1000302@fissore.org>
In-Reply-To: <4CA9AF1E.1000302@fissore.org>
Subject: RE: StringIndexCache throws ArrayIndexOutOfBound
Date: Mon, 4 Oct 2010 12:49:03 +0200
Message-ID: <005801cb63b1$c2eb1aa0$48c14fe0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQLn71v48N1j8ugAb5YEGJG0Avjp0pD3hJeA
Content-Language: de

Fieldcache only support documents with one value per doc! So you are =
adding a multivalued field, which is not supported!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Federico Fissore [mailto:federico@fissore.org]
> Sent: Monday, October 04, 2010 12:41 PM
> To: java-user@lucene.apache.org
> Subject: StringIndexCache throws ArrayIndexOutOfBound
>=20
> Hello all
>=20
> We are migrating our apps from 2.4.1 to 2.9.3, removing deprecated =
calls so to
> fast switch to 3.0.2 asap
>=20
> At startup, our apps look for the min and max value of some configured =
fields,
> to let the user know the range of documents he/she is looking at and =
to filter
> them
>=20
> One of these apps has a field whose min value is stored/indexed while =
all other
> values are just indexed
>=20
> When looking for the min/max, StringIndexCache complains
>=20
> Attached you find the test case we've used to isolate the problem.
>=20
> I'm not sure whether is we that are using lucene the wrong way (in =
which case
> please give some advice) or it is a bug
>=20
> Looking forward for your feedback before opening a ticket on jira
>=20
> Best regards
>=20
> Federico Fissore


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 11:33:23 2010
Return-Path: <java-user-return-47387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71302 invoked from network); 4 Oct 2010 11:33:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 11:33:23 -0000
Received: (qmail 72397 invoked by uid 500); 4 Oct 2010 11:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71858 invoked by uid 500); 4 Oct 2010 11:33:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71846 invoked by uid 99); 4 Oct 2010 11:33:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 11:33:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 11:33:08 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 896D5B6C37
	for <java-user@lucene.apache.org>; Mon,  4 Oct 2010 20:32:46 +0900 (JST)
Message-ID: <4CA9BB5E.6090806@r.email.ne.jp>
Date: Mon, 04 Oct 2010 20:32:46 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: question about Scorer.freq()
References: <4CA934E4.302@r.email.ne.jp> <AANLkTikxQn5nL3YBNOZP2HtXF1ch7BSbuKhthvPZ+RTi@mail.gmail.com>
In-Reply-To: <AANLkTikxQn5nL3YBNOZP2HtXF1ch7BSbuKhthvPZ+RTi@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

> Hmm are you only gathering the MUST_NOT TermScorers?  (In which case
> I'd expect that the .docID() would not match the docID being
> collected).  Or do you also see .docID() not matching for SHOULD and
> MUST sub queries?

The snippet I copy-n-paste at previous mail was not appropriate.
Sorry for confusing you. Please see the whole program attached
in this mail.

> Also, are you sure you are getting BooleanScorer2?

Yes and no. I confirmed that I got BooleanScorer2 in my setScorer(),
but as I said I'm interested in TermScorer rather than BooleanScorer2
because I want to know which field a match occurred. Or am I missing
something here?

> And, yes, you should be able to get which field a match occurred in,
> because at the lowest level the atomic (TermQuery, PhraseQuery,
> SpanTermQuery, AtomatonQuery, etc.) all operate on a single field.  So
> when you find a sub that "matches", you should just check the field of
> that query.

I wanted it but docId() from sub scorers didn't match...

> Hmm... but not all queries make it easy/possible to get the field
> right?  MultiTermQuery has getField, TermQuery has getTerm, but
> PhraseQuery doesn't have a .getField (oh but you can .getTerms() and
> then get the field).

I agree, though for simple PoC, I'm interested in TermQuery in the
following program.


-----------------
public class Test2LUCENE2590 {

   static Analyzer analyzer = new WhitespaceAnalyzer( Version.LUCENE_31 );
   static Directory dir = new RAMDirectory();
   static final String F1 = "title";
   static final String F2 = "body";

   public static void main(String[] args) throws IOException {
     makeIndex();
     searchIndex();
   }

   static void makeIndex() throws IOException {
     IndexWriterConfig config = new IndexWriterConfig( Version.LUCENE_31, analyzer );
     IndexWriter writer = new IndexWriter( dir, config );
     //writer.addDocument( doc( "lucene", "lucene is a very popular search engine library. lucene 
runs overall in the world. lucene is great!" ) );
     writer.addDocument( doc( "lucene", "lucene is a very popular search engine library" ) );
     writer.addDocument( doc( "solr", "solr is a very popular search server and is using lucene" ) );
     writer.addDocument( doc( "nutch", "nutch is an internet search engine with web crawler and is 
using lucene and hadoop" ) );
     writer.close();
   }

   static Document doc( String v1, String v2 ){
     Document doc = new Document();
     if( v1 != null )
       doc.add( field( F1, v1 ) );
     if( v2 != null )
       doc.add( field( F2, v2 ) );
     return doc;
   }

   static Fieldable field( String field, String value ){
     return new Field( field, value, Store.YES, Index.ANALYZED );
   }

   static void searchIndex() throws IOException {
     IndexSearcher searcher = new IndexSearcher( dir );
     printResult( searcher, query( new Term( F1, "lucene"), new Term( F2, "lucene" ), new Term( F2, 
"search" ) ) );
     searcher.close();
   }

   static Query query( Term... ts ){
     if( ts == null || ts.length == 0 ){
       throw new IllegalArgumentException();
     }
     if( ts.length == 1 )
       return new TermQuery( ts[0] );
     BooleanQuery bq = new BooleanQuery();
     for( Term t : ts ){
       bq.add( new TermQuery( t ), Occur.SHOULD );
     }
     return bq;
   }

   static void printResult( IndexSearcher searcher, Query query ) throws IOException {
     MyCollector collector = new MyCollector();
     searcher.search( query, collector );
     TopDocs docs = collector.topDocs();
     for( ScoreDoc scoreDoc : docs.scoreDocs ){
       Document doc = searcher.doc( scoreDoc.doc );
       float score = scoreDoc.score;
       System.out.println( score + " : " + doc.get( F1 ) + " / " + doc.get( F2 ) );
       System.out.println( "  freq : " + collector.freq( scoreDoc.doc) );
     }
   }

   static class MyCollector extends Collector {

     private TopDocsCollector<ScoreDoc> collector;
     private int docBase;

     public final Map<Integer,Integer> docCounts = new HashMap<Integer,Integer>();

     private final Set<TermQueryScorer> tqsSet = new HashSet<TermQueryScorer>();
     private final ScorerVisitor<Query, Query, Scorer> visitor = new MockScorerVisitor();
     private final EnumSet<Occur> collect;

     MyCollector(){
       collector = TopScoreDocCollector.create( 10, true );
       collect = EnumSet.allOf( Occur.class );
     }

     @Override
     public boolean acceptsDocsOutOfOrder() {
       return false;
     }

     @Override
     public void collect(int doc) throws IOException {
       int freq = 0;
       for( TermQueryScorer tqs : tqsSet ){
         Scorer scorer = tqs.scorer;
         int matchId = scorer.docID();
         if( matchId == doc ){
           freq += scorer.freq();
         }
       }
       docCounts.put(doc + docBase, freq);
       collector.collect(doc);
     }

     @Override
     public void setNextReader(IndexReader reader, int docBase)
         throws IOException {
       this.docBase = docBase;
       collector.setNextReader( reader, docBase );
     }

     @Override
     public void setScorer(Scorer scorer) throws IOException {
       collector.setScorer( scorer );
       scorer.visitScorers( visitor );
     }

     public TopDocs topDocs(){
       return collector.topDocs();
     }

     public int freq( int doc ) throws IOException {
       return docCounts.get( doc );
     }

     private class MockScorerVisitor extends ScorerVisitor<Query, Query, Scorer> {

       @Override
       public void visitOptional(Query parent, Query child, Scorer scorer) {
         if (collect.contains(Occur.SHOULD) && child instanceof TermQuery)
           tqsSet.add( new TermQueryScorer( (TermQuery)child, scorer ) );
       }

       @Override
       public void visitProhibited(Query parent, Query child, Scorer scorer) {
         if (collect.contains(Occur.MUST_NOT) && child instanceof TermQuery)
           tqsSet.add( new TermQueryScorer( (TermQuery)child, scorer ) );
       }

       @Override
       public void visitRequired(Query parent, Query child, Scorer scorer) {
         if (collect.contains(Occur.MUST) && child instanceof TermQuery)
           tqsSet.add( new TermQueryScorer( (TermQuery)child, scorer ) );
       }
     }

     private static class TermQueryScorer {
       private TermQuery query;
       private Scorer scorer;
       public TermQueryScorer( TermQuery query, Scorer scorer ){
         this.query = query;
         this.scorer = scorer;
       }
     }
   }
}

Thank you,

Koji

-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 17:13:17 2010
Return-Path: <java-user-return-47388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19202 invoked from network); 4 Oct 2010 17:13:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 17:13:17 -0000
Received: (qmail 89116 invoked by uid 500); 4 Oct 2010 17:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88990 invoked by uid 500); 4 Oct 2010 17:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88981 invoked by uid 99); 4 Oct 2010 17:13:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 17:13:13 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 17:13:08 +0000
Received: by wwb22 with SMTP id 22so3777321wwb.5
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 10:12:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.236.146 with SMTP id w18mr8028188weq.19.1286212366428;
 Mon, 04 Oct 2010 10:12:46 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Mon, 4 Oct 2010 10:12:46 -0700 (PDT)
In-Reply-To: <4CA9BB5E.6090806@r.email.ne.jp>
References: <4CA934E4.302@r.email.ne.jp>
	<AANLkTikxQn5nL3YBNOZP2HtXF1ch7BSbuKhthvPZ+RTi@mail.gmail.com>
	<4CA9BB5E.6090806@r.email.ne.jp>
Date: Mon, 4 Oct 2010 13:12:46 -0400
Message-ID: <AANLkTinvO5uYWCCSRFV7HDftUf_V0-6c5qcp12GQhMr5@mail.gmail.com>
Subject: Re: question about Scorer.freq()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Mon, Oct 4, 2010 at 7:32 AM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> Hi Mike,
>
>> Hmm are you only gathering the MUST_NOT TermScorers? =A0(In which case
>> I'd expect that the .docID() would not match the docID being
>> collected). =A0Or do you also see .docID() not matching for SHOULD and
>> MUST sub queries?
>
> The snippet I copy-n-paste at previous mail was not appropriate.
> Sorry for confusing you. Please see the whole program attached
> in this mail.

OK.

>> Also, are you sure you are getting BooleanScorer2?
>
> Yes and no. I confirmed that I got BooleanScorer2 in my setScorer(),
> but as I said I'm interested in TermScorer rather than BooleanScorer2
> because I want to know which field a match occurred. Or am I missing
> something here?

Got it.  No, that's correct.  Top scorer is BS2 and the subs are TS
and so you should interact directly w/ the TSs to find the field/freq
for current doc/etc.

>> And, yes, you should be able to get which field a match occurred in,
>> because at the lowest level the atomic (TermQuery, PhraseQuery,
>> SpanTermQuery, AtomatonQuery, etc.) all operate on a single field. =A0So
>> when you find a sub that "matches", you should just check the field of
>> that query.
>
> I wanted it but docId() from sub scorers didn't match...

Odd.

>> Hmm... but not all queries make it easy/possible to get the field
>> right? =A0MultiTermQuery has getField, TermQuery has getTerm, but
>> PhraseQuery doesn't have a .getField (oh but you can .getTerms() and
>> then get the field).
>
> I agree, though for simple PoC, I'm interested in TermQuery in the
> following program.

OK.

So..... this looks like an issue with how DisjunctionSumScorer works.
Apparently, and unfortunately, it advances the sub scorers beyond the
current doc, and also aggregates the scores.  (ConjunctionScorer and
ReqOptScorer seem to work correctly -- they leave the subs at the
current doc, and, delay calling .score() on the subs until the
collector asks for it.)

I'll open an issue for this.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 17:17:52 2010
Return-Path: <java-user-return-47389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20183 invoked from network); 4 Oct 2010 17:17:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 17:17:52 -0000
Received: (qmail 119 invoked by uid 500); 4 Oct 2010 17:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99964 invoked by uid 500); 4 Oct 2010 17:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99956 invoked by uid 99); 4 Oct 2010 17:17:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 17:17:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 17:17:43 +0000
Received: by ewy10 with SMTP id 10so3002108ewy.35
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 10:17:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.0.206 with SMTP id 56mr8015999web.33.1286212642078; Mon,
 04 Oct 2010 10:17:22 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Mon, 4 Oct 2010 10:17:22 -0700 (PDT)
In-Reply-To: <AANLkTinvO5uYWCCSRFV7HDftUf_V0-6c5qcp12GQhMr5@mail.gmail.com>
References: <4CA934E4.302@r.email.ne.jp>
	<AANLkTikxQn5nL3YBNOZP2HtXF1ch7BSbuKhthvPZ+RTi@mail.gmail.com>
	<4CA9BB5E.6090806@r.email.ne.jp>
	<AANLkTinvO5uYWCCSRFV7HDftUf_V0-6c5qcp12GQhMr5@mail.gmail.com>
Date: Mon, 4 Oct 2010 13:17:22 -0400
Message-ID: <AANLkTi=1P=Qk44QjL1ShSCnvAWxp=RBg0YwO09NVFLmP@mail.gmail.com>
Subject: Re: question about Scorer.freq()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Oct 4, 2010 at 1:12 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:

> I'll open an issue for this.

OK I opened https://issues.apache.org/jira/browse/LUCENE-2686

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 18:03:21 2010
Return-Path: <java-user-return-47390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41053 invoked from network); 4 Oct 2010 18:03:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 18:03:21 -0000
Received: (qmail 86611 invoked by uid 500); 4 Oct 2010 18:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86495 invoked by uid 500); 4 Oct 2010 18:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86487 invoked by uid 99); 4 Oct 2010 18:03:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:03:18 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.81] (HELO web32904.mail.mud.yahoo.com) (209.191.69.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Oct 2010 18:03:09 +0000
Received: (qmail 94816 invoked by uid 60001); 4 Oct 2010 18:02:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1286215364; bh=klGIf5WbtFFTvJgdxaI+rFBtYQ8Ux2drBC1/Z/FWz5Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=WsL/n+HFCNYi0vIAGKRHj+wkM7n3iQHSbN+AdfMVF4GS1LyrV6kW1FufjuWQBL4Ti9NXlc4kqaBu+LMMIhArwLK8oan0gSxcXk/LpC9SDzpsIQSY7x13xcHUd71geJXaRlxsJ6QkCUTc/GDv7cqm6sTjwKArxoNrrSnd2+FgZrM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=kzqoP/c2+p0gxn77PJ+MOxpKn0gyaUBdE4eFz/9umtJ41kFru4JpSoT9jin9a5flcaZcPqAkUs3FugXhK4HmtcxghF+CMmWaz4DIgBiY3RqYUlyEnKuKHrCdpGz7CwY7nIxhTFGW0AGTo9Oui+YHjAztnx/cL3lhbLkTjbC730Y=;
Message-ID: <771535.94171.qm@web32904.mail.mud.yahoo.com>
X-YMail-OSG: 2YBIhAoVM1ndnR7fyMhP4pxab8nFC0ZgQIhs355jUL5O4cc
 zYgO.FyQHwi0Mat41l9e52T1TzPmwHLhQ6nWz1w4eL857rBaPebwkRpdDRJt
 tl2U5Y7RjLY8DIpPNBk72H2W2gh7lkUkgCVtf0riVZoCQE._csu9rEyX9zJA
 lxyrn8k2lCFbpU52E1Tk5wxaC26QtLdEhMlyq8x8o9F_N..4uCgTmaSxVz4O
 vsZX.Bq1kYA0GD8CpeASWIwcrIQ_6dtBxOAv7J6leiEI9zNKnBXtDnAGmEwS
 YVz7fCQBIQy_GzSQMXBWSpIxw0IPsoNf47MYgXtinIVWul6s0epRYRg--
Received: from [72.36.94.20] by web32904.mail.mud.yahoo.com via HTTP; Mon, 04 Oct 2010 11:02:44 PDT
X-Mailer: YahooMailRC/497 YahooMailWebService/0.8.106.282862
Date: Mon, 4 Oct 2010 11:02:44 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Updating documents with fields that aren't stored
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

The JavaDocs do not appear to mention that only stored fields persist 
IndexWriter.updateDocument. When opening new readers, from either 
IndexWriter.getReader or IndexReader.open, neither TermDocs nor IndexSearcher 
will find terms in fields which weren't stored.

Existing readers, however, do continue to find such terms after updateDocument 
has been called. At best, this is confusing. Is this a defect?

Thanks,
Justin


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 18:07:13 2010
Return-Path: <java-user-return-47391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46073 invoked from network); 4 Oct 2010 18:07:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 18:07:12 -0000
Received: (qmail 91121 invoked by uid 500); 4 Oct 2010 18:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90786 invoked by uid 500); 4 Oct 2010 18:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90778 invoked by uid 99); 4 Oct 2010 18:07:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:07:08 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:06:58 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o94I6bYj018665
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 4 Oct 2010 14:06:37 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Mon, 4 Oct 2010
 14:06:37 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 4 Oct 2010 14:05:36 -0400
Subject: RE: Updating documents with fields that aren't stored
Thread-Topic: Updating documents with fields that aren't stored
Thread-Index: Actj7nIVgSwsiLK0Q2mjNr9I4Q6OUwAABkBg
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7C2D734C@suex07-mbx-03.ad.syr.edu>
References: <771535.94171.qm@web32904.mail.mud.yahoo.com>
In-Reply-To: <771535.94171.qm@web32904.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-10-04_07:2010-10-04,2010-10-04,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

VGhpcyBpcyBub3QgYSBkZWZlY3Q6IDxodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1Y2VuZS1qYXZh
L0x1Y2VuZUZBUSNEb2VzX0x1Y2VuZV9hbGxvd19zZWFyY2hpbmdfYW5kX2luZGV4aW5nX3NpbXVs
dGFuZW91c2x5LjNGPi4NCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBK
dXN0aW4gW21haWx0bzpjcnluYXhAeWFob28uY29tXQ0KPiBTZW50OiBNb25kYXksIE9jdG9iZXIg
MDQsIDIwMTAgMjowMyBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1
YmplY3Q6IFVwZGF0aW5nIGRvY3VtZW50cyB3aXRoIGZpZWxkcyB0aGF0IGFyZW4ndCBzdG9yZWQN
Cj4gDQo+IEhpIGFsbCwNCj4gDQo+IFRoZSBKYXZhRG9jcyBkbyBub3QgYXBwZWFyIHRvIG1lbnRp
b24gdGhhdCBvbmx5IHN0b3JlZCBmaWVsZHMgcGVyc2lzdA0KPiBJbmRleFdyaXRlci51cGRhdGVE
b2N1bWVudC4gV2hlbiBvcGVuaW5nIG5ldyByZWFkZXJzLCBmcm9tIGVpdGhlcg0KPiBJbmRleFdy
aXRlci5nZXRSZWFkZXIgb3IgSW5kZXhSZWFkZXIub3BlbiwgbmVpdGhlciBUZXJtRG9jcyBub3IN
Cj4gSW5kZXhTZWFyY2hlcg0KPiB3aWxsIGZpbmQgdGVybXMgaW4gZmllbGRzIHdoaWNoIHdlcmVu
J3Qgc3RvcmVkLg0KPiANCj4gRXhpc3RpbmcgcmVhZGVycywgaG93ZXZlciwgZG8gY29udGludWUg
dG8gZmluZCBzdWNoIHRlcm1zIGFmdGVyDQo+IHVwZGF0ZURvY3VtZW50DQo+IGhhcyBiZWVuIGNh
bGxlZC4gQXQgYmVzdCwgdGhpcyBpcyBjb25mdXNpbmcuIElzIHRoaXMgYSBkZWZlY3Q/DQo+IA0K
PiBUaGFua3MsDQo+IEp1c3Rpbg0KPiANCj4gDQo+IA0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-47392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 18:15:31 2010
Return-Path: <java-user-return-47392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48698 invoked from network); 4 Oct 2010 18:15:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 18:15:31 -0000
Received: (qmail 3630 invoked by uid 500); 4 Oct 2010 18:15:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3565 invoked by uid 500); 4 Oct 2010 18:15:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3557 invoked by uid 99); 4 Oct 2010 18:15:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:15:28 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.84] (HELO web32907.mail.mud.yahoo.com) (209.191.69.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Oct 2010 18:15:21 +0000
Received: (qmail 53219 invoked by uid 60001); 4 Oct 2010 18:14:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1286216099; bh=KIkynPfL85iV6yysD57cqdYE8TqYnOp5P+ZBgjV/Ay4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=uKUs90WpjcbA8z18CKXFBZtSIxRXj1sbfcdJci63t3iNDXh9/2ivAxjLIH5BLmFYccvK43Xzog2XlTIZ5B9eLzTv6T7FkB8qRqCO7X4eP8RM51Cr4q0TnbB46AMpqCOMwYcFKJgNH9XFFi9xj4Yxy3LPCB6IP9dCaDECFkasPeQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=sgtmN7B1vf4pu00I3RtwcUW5KtBPsyh0mSkQU6eLw2zQtiUAr+26KyzfLfJIV1VAJp5fFXf8usuUg9q4/gprGQ8tkV4Uq8ZZ6zcK9bAT5ZL3G3sK0ERvKfxEzsuQNqICMYuSKKRlFMK1gzHhJ+hxtsADNzeXaxXObWhB3uL+SF8=;
Message-ID: <185268.46672.qm@web32907.mail.mud.yahoo.com>
X-YMail-OSG: x49mDC0VM1lKWWt2i3zZocY__nLrSRD_M36CjkHLmKZJpaa
 pP3YrH96qgUx_BqPC0MrNzK7.4vAcVp4drCvvg0lBMSRivWC7zR15I6G1xLD
 4_XU1rFFaSoevjri2xE1yMJfU6t8B4wvKFhdYMMGuVvXZRjRQl4fHNxqoUI9
 WSaQwPe9gqwU4hfWyuQ8N8MH8_agnX.baiQ5jWv8zvuLzKc8X.zZ0aw5YVu4
 MuXWPRdL3WDqFloB7tIiRAPs4DuMHT2kX.RUkA5.sJVUFERsqsbxTBPeFo2U
 MFjKJ1BwVn_.i_wEjuFhPac_LLLbT4DlzKUId2.hjUd8egV5wpRquDm.NADA
 mIVzqXBK9pT1yCYfK3mooeHEoTK8-
Received: from [72.36.94.20] by web32907.mail.mud.yahoo.com via HTTP; Mon, 04 Oct 2010 11:14:59 PDT
X-Mailer: YahooMailRC/497 YahooMailWebService/0.8.106.282862
References: <771535.94171.qm@web32904.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F7C2D734C@suex07-mbx-03.ad.syr.edu>
Date: Mon, 4 Oct 2010 11:14:59 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: Updating documents with fields that aren't stored
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F7C2D734C@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Even for IndexWriter.getReader (near real-time)? "changes made during an 
IndexWriter session can be  quickly made available for searching without closing  
the writer nor calling commit(long)."

http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/index/IndexWriter.html#getReader()





----- Original Message ----
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Sent: Mon, October 4, 2010 1:05:36 PM
Subject: RE: Updating documents with fields that aren't stored

This is not a defect: 
<http://wiki.apache.org/lucene-java/LuceneFAQ#Does_Lucene_allow_searching_and_indexing_simultaneously.3F>.


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Monday, October 04, 2010 2:03 PM
> To: java-user@lucene.apache.org
> Subject: Updating documents with fields that aren't stored
> 
> Hi all,
> 
> The JavaDocs do not appear to mention that only stored fields persist
> IndexWriter.updateDocument. When opening new readers, from either
> IndexWriter.getReader or IndexReader.open, neither TermDocs nor
> IndexSearcher
> will find terms in fields which weren't stored.
> 
> Existing readers, however, do continue to find such terms after
> updateDocument
> has been called. At best, this is confusing. Is this a defect?
> 
> Thanks,
> Justin
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 18:20:28 2010
Return-Path: <java-user-return-47393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49589 invoked from network); 4 Oct 2010 18:20:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 18:20:28 -0000
Received: (qmail 12144 invoked by uid 500); 4 Oct 2010 18:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12007 invoked by uid 500); 4 Oct 2010 18:20:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11999 invoked by uid 99); 4 Oct 2010 18:20:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:20:25 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 18:20:18 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o94IJv3I026220
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 4 Oct 2010 14:19:58 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Mon, 4 Oct 2010
 14:19:57 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 4 Oct 2010 14:18:56 -0400
Subject: RE: Updating documents with fields that aren't stored
Thread-Topic: Updating documents with fields that aren't stored
Thread-Index: Actj8CTs5KZ5ORPGR2ie5AXAvPYTGgAADYFw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7C2D734E@suex07-mbx-03.ad.syr.edu>
References: <771535.94171.qm@web32904.mail.mud.yahoo.com>
 <2D127F11DC79714E9B6A43AC9458147F7C2D734C@suex07-mbx-03.ad.syr.edu>
 <185268.46672.qm@web32907.mail.mud.yahoo.com>
In-Reply-To: <185268.46672.qm@web32907.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-10-04_07:2010-10-04,2010-10-04,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

WWVzLCBldmVuIGZvciBJVy5nZXRSZWFkZXIoKSAtIGZyb20gPGh0dHA6Ly93aWtpLmFwYWNoZS5v
cmcvbHVjZW5lLWphdmEvTmVhclJlYWx0aW1lU2VhcmNoPjoNCg0KCU5vdyBMdWNlbmUgb2ZmZXJz
IGEgdW5pZmllZCBBUEkgd2hlcmUgb25lIGNhbGxzIGdldFJlYWRlcg0KCWFuZCBhbnkgdXBkYXRl
cyBhcmUgaW1tZWRpYXRlbHkgc2VhcmNoYWJsZS4NCg0KSS5lLiwgdGhlIHJlYWRlciByZXR1cm5l
ZCBieSBnZXRSZWFkZXIgZG9lc24ndCB0cmFjayB1cGRhdGVzOyBpdCB0b28gcmVwcmVzZW50cyBh
IHNoYXBzaG90IGluIHRpbWUuICBJdCdzIGp1c3QgbGVzcyBjb3N0bHkgdG8gcmVvcGVuLg0KDQoN
Cj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogSnVzdGluIFttYWlsdG86Y3J5
bmF4QHlhaG9vLmNvbV0NCj4gU2VudDogTW9uZGF5LCBPY3RvYmVyIDA0LCAyMDEwIDI6MTUgUE0N
Cj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBSZTogVXBkYXRp
bmcgZG9jdW1lbnRzIHdpdGggZmllbGRzIHRoYXQgYXJlbid0IHN0b3JlZA0KPiANCj4gRXZlbiBm
b3IgSW5kZXhXcml0ZXIuZ2V0UmVhZGVyIChuZWFyIHJlYWwtdGltZSk/ICJjaGFuZ2VzIG1hZGUg
ZHVyaW5nIGFuDQo+IEluZGV4V3JpdGVyIHNlc3Npb24gY2FuIGJlICBxdWlja2x5IG1hZGUgYXZh
aWxhYmxlIGZvciBzZWFyY2hpbmcgd2l0aG91dA0KPiBjbG9zaW5nDQo+IHRoZSB3cml0ZXIgbm9y
IGNhbGxpbmcgY29tbWl0KGxvbmcpLiINCj4gDQo+IGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9q
YXZhLzNfMF8yL2FwaS9hbGwvb3JnL2FwYWNoZS9sdWNlbmUvaW5kZXgvSW5kZXhXDQo+IHJpdGVy
Lmh0bWwjZ2V0UmVhZGVyKCkNCj4gDQo+IA0KPiANCj4gDQo+IA0KPiAtLS0tLSBPcmlnaW5hbCBN
ZXNzYWdlIC0tLS0NCj4gRnJvbTogU3RldmVuIEEgUm93ZSA8c2Fyb3dlQHN5ci5lZHU+DQo+IFRv
OiAiamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIiA8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUu
b3JnPg0KPiBTZW50OiBNb24sIE9jdG9iZXIgNCwgMjAxMCAxOjA1OjM2IFBNDQo+IFN1YmplY3Q6
IFJFOiBVcGRhdGluZyBkb2N1bWVudHMgd2l0aCBmaWVsZHMgdGhhdCBhcmVuJ3Qgc3RvcmVkDQo+
IA0KPiBUaGlzIGlzIG5vdCBhIGRlZmVjdDoNCj4gPGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVj
ZW5lLQ0KPiBqYXZhL0x1Y2VuZUZBUSNEb2VzX0x1Y2VuZV9hbGxvd19zZWFyY2hpbmdfYW5kX2lu
ZGV4aW5nX3NpbXVsdGFuZW91c2x5LjNGPg0KPiAuDQo+IA0KPiANCj4gPiAtLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KPiA+IEZyb206IEp1c3RpbiBbbWFpbHRvOmNyeW5heEB5YWhvby5jb21d
DQo+ID4gU2VudDogTW9uZGF5LCBPY3RvYmVyIDA0LCAyMDEwIDI6MDMgUE0NCj4gPiBUbzogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gU3ViamVjdDogVXBkYXRpbmcgZG9jdW1lbnRz
IHdpdGggZmllbGRzIHRoYXQgYXJlbid0IHN0b3JlZA0KPiA+DQo+ID4gSGkgYWxsLA0KPiA+DQo+
ID4gVGhlIEphdmFEb2NzIGRvIG5vdCBhcHBlYXIgdG8gbWVudGlvbiB0aGF0IG9ubHkgc3RvcmVk
IGZpZWxkcyBwZXJzaXN0DQo+ID4gSW5kZXhXcml0ZXIudXBkYXRlRG9jdW1lbnQuIFdoZW4gb3Bl
bmluZyBuZXcgcmVhZGVycywgZnJvbSBlaXRoZXINCj4gPiBJbmRleFdyaXRlci5nZXRSZWFkZXIg
b3IgSW5kZXhSZWFkZXIub3BlbiwgbmVpdGhlciBUZXJtRG9jcyBub3INCj4gPiBJbmRleFNlYXJj
aGVyDQo+ID4gd2lsbCBmaW5kIHRlcm1zIGluIGZpZWxkcyB3aGljaCB3ZXJlbid0IHN0b3JlZC4N
Cj4gPg0KPiA+IEV4aXN0aW5nIHJlYWRlcnMsIGhvd2V2ZXIsIGRvIGNvbnRpbnVlIHRvIGZpbmQg
c3VjaCB0ZXJtcyBhZnRlcg0KPiA+IHVwZGF0ZURvY3VtZW50DQo+ID4gaGFzIGJlZW4gY2FsbGVk
LiBBdCBiZXN0LCB0aGlzIGlzIGNvbmZ1c2luZy4gSXMgdGhpcyBhIGRlZmVjdD8NCj4gPg0KPiA+
IFRoYW5rcywNCj4gPiBKdXN0aW4NCj4gPg0KPiA+DQo+ID4NCj4gPg0KPiA+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQ0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNl
bmUuYXBhY2hlLm9yZw0KPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+IA0KPiANCj4gDQo+IA0KPiAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 19:10:39 2010
Return-Path: <java-user-return-47394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81580 invoked from network); 4 Oct 2010 19:10:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 19:10:37 -0000
Received: (qmail 4976 invoked by uid 500); 4 Oct 2010 19:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4872 invoked by uid 500); 4 Oct 2010 19:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4864 invoked by uid 99); 4 Oct 2010 19:10:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 19:10:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jsaardchit@go2.com designates 38.97.64.35 as permitted sender)
Received: from [38.97.64.35] (HELO mail.go2.com) (38.97.64.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 19:10:25 +0000
Received: from [10.0.1.4] ([75.82.49.1]) by mail.go2.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 4 Oct 2010 15:10:04 -0400
From: Jordon Saardchit <jsaardchit@go2.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Matching Documents BitSet
Date: Mon, 4 Oct 2010 12:10:03 -0700
Message-Id: <8087ADAB-DDF8-466D-9E8E-DC1827D580FA@go2.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-OriginalArrivalTime: 04 Oct 2010 19:10:04.0230 (UTC) FILETIME=[C02AE660:01CB63F7]
X-Virus-Checked: Checked by ClamAV on apache.org

In lucene 3, is there an equivalent to obtaining a BitSet of documents =
from an Index as there was in version 2.x?  I'm trying to put together =
an upgrade path.

Thanks!=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 19:25:37 2010
Return-Path: <java-user-return-47395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87509 invoked from network); 4 Oct 2010 19:25:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 19:25:37 -0000
Received: (qmail 22730 invoked by uid 500); 4 Oct 2010 19:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22669 invoked by uid 500); 4 Oct 2010 19:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22661 invoked by uid 99); 4 Oct 2010 19:25:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 19:25:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 19:25:28 +0000
Received: by qyk33 with SMTP id 33so2177790qyk.14
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 12:25:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Szccz60NATUEJqoAoOtef16I9khrUwgbngO48GTF0IY=;
        b=Fd/965E8ldGLwhUCIWWgY2JOm4njilFmOrtvfoJ6AFlmN/f3gVeVgZBT5/WN+pqktp
         YkL33eWfasFiGPLHkcitKeZZFIlPzccx/nf7Khci3SBknZxAUAU/I5LL9vknYsy+42H8
         dtHfwLXSq8pIPFQ7g5vwO8IVyvFl5pjWdNPEo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=xZvX7ENMlfu0yBEAcFDdevbEOfcKbBo3Z+ciyMVNdJXGgCcZRAQDYkeDh7dDa06DaM
         DNvX/ZSGlUdh/Qb33PQPEM/cWhqL8gIfWEmCH0U4TN7XggFaWZW5xXQhlpiEDNR63L1E
         Nju824UIk1E0Npt1gqDq5fg5tj+YkqOqg2k9k=
MIME-Version: 1.0
Received: by 10.229.1.83 with SMTP id 19mr7050471qce.296.1286220306847; Mon,
 04 Oct 2010 12:25:06 -0700 (PDT)
Received: by 10.229.185.75 with HTTP; Mon, 4 Oct 2010 12:25:06 -0700 (PDT)
Date: Mon, 4 Oct 2010 12:25:06 -0700
Message-ID: <AANLkTimT9SngzYBUcqgrrcWyLcnjcq6aqv_1Smjq2iQK@mail.gmail.com>
Subject: Recreate segment infos
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Lets say the segment infos file is missing, and I'm aware of
CheckIndex, however is there a tool to recreate a segment infos file?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 04 20:21:24 2010
Return-Path: <java-user-return-47396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7499 invoked from network); 4 Oct 2010 20:21:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Oct 2010 20:21:24 -0000
Received: (qmail 17864 invoked by uid 500); 4 Oct 2010 20:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17708 invoked by uid 500); 4 Oct 2010 20:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17700 invoked by uid 99); 4 Oct 2010 20:21:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 20:21:21 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Oct 2010 20:21:15 +0000
Received: by pwj8 with SMTP id 8so2013062pwj.35
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 13:20:54 -0700 (PDT)
Received: by 10.114.89.11 with SMTP id m11mr12279843wab.69.1286223653991;
        Mon, 04 Oct 2010 13:20:53 -0700 (PDT)
Received: from [10.0.1.90] (203-114-161-15.wir.sta.inspire.net.nz [203.114.161.15])
        by mx.google.com with ESMTPS id 33sm9978058wad.6.2010.10.04.13.20.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 04 Oct 2010 13:20:52 -0700 (PDT)
Subject: RE: Numeric range query not returning results
From: Todd Nine <todd@spidertracks.co.nz>
Reply-To: todd@spidertracks.co.nz
To: Uwe Schindler <uwe@thetaphi.de>
Cc: java-user@lucene.apache.org
In-Reply-To: <003b01cb6388$c8979330$59c6b990$@thetaphi.de>
References: <1286165587.15807.7.camel@greenlantern.local>
	 <003b01cb6388$c8979330$59c6b990$@thetaphi.de>
Content-Type: multipart/alternative; boundary="=-wFuuBvYKRQs9j6osHihU"
Organization: Spidertracks
Date: Tue, 05 Oct 2010 09:20:17 +1300
Message-ID: <1286223617.15807.41.camel@greenlantern.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.3 

--=-wFuuBvYKRQs9j6osHihU
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit

Hi Uwe,
  My example wasn't very clear, as I have a load of other code in my
actual implementation and I was trying to cut it down for clarity.  This
is actually my indexing service for my Datanucleus Cassandra plugin, so
I have a 1 to 1 relationship where a single document corresponds to a
Persistent object.  I actually create 5 separate documents, and I would
expect 3 of those to be returned.  I've ported your entire set of tests
for 32 and 64 bit numeric range tests over, and it unfortunately appears
that Lucandra is still very broken in terms of numeric ranges even after
the Cassandra encoding fix for the 7bit shift into UTF 8 characters.
I'll hopefully be able to solve the bugs in the next few days.  Thanks
again for your help, it's always appreciated.

Todd




On Mon, 2010-10-04 at 07:55 +0200, Uwe Schindler wrote:
> This test works perfectly and returns 1 doucment:
> 
>  
> 
>   public void testToddNine() throws Exception {
> 
>     RAMDirectory directory = new RAMDirectory();
> 
>     IndexWriter writer = new IndexWriter(directory, new
> WhitespaceAnalyzer(), true, MaxFieldLength.UNLIMITED);
> 
>     try {
> 
>       Document doc = new Document();
> 
>       doc.add(new
> NumericField("LastLogin").setLongValue(1282197146L));
> 
>       writer.addDocument(doc);
> 
>       doc = new Document();
> 
>       doc.add(new
> NumericField("LastLogin").setLongValue(1282197946L));
> 
>       writer.addDocument(doc);
> 
>     } finally {
> 
>       writer.close();
> 
>     }
> 
>  
> 
>     NumericRangeQuery<Long> rangeQuery =
> 
>       NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> 1282197146L, true, true);
> 
>  
> 
>     IndexReader reader = IndexReader.open(directory, true);
> 
>     try {
> 
>       IndexSearcher searcher = new IndexSearcher(reader);
> 
>       TopDocs docs = searcher.search(rangeQuery, 1000);
> 
>       assertEquals(1,docs.totalHits);
> 
>     } finally {
> 
>       reader.close();
> 
>     }
> 
>   }
> 
>  
> 
> Maybe you have the following problems:
> 
> -          Are you executing the same query than created. In your
> example code the searcher executed query but the range query was
> rangeQuery variable name
> 
> -          Are you sure that your document is not returned, but you
> miss some stored fields? E.g. the default NumericField ctor does not
> create the field as stored to the document?
> 
>  
> 
> public NumericField(String name)
> 
> Creates a field for numeric values using the default precisionStep
> NumericUtils.PRECISION_STEP_DEFAULT (4). The instance is not yet
> initialized with a numeric value, before indexing a document
> containing this field, set a value using the various set???Value()
> methods. This constructor creates an indexed, but not stored field.
> 
>  
> 
> Uwe
> 
>  
> 
> -----
> 
> Uwe Schindler
> 
> H.-H.-Meier-Allee 63, D-28213 Bremen
> 
> http://www.thetaphi.de
> 
> eMail: uwe@thetaphi.de
> 
>  
> 
>  
> 
> > -----Original Message-----
> 
> > From: Todd Nine [mailto:todd@spidertracks.co.nz]
> 
> > Sent: Monday, October 04, 2010 6:13 AM
> 
> > To: java-user@lucene.apache.org
> 
> > Subject: Numeric range query not returning results
> 
> > 
> 
> > Hi all,
> 
> >   I'm having some issues with Numeric Range queries not working as
> expected.
> 
> > My underlying storage medium is the Lucandra index reader and
> writer, so I'm
> 
> > not sure if this is an issue within Lucandra or with my usage of
> numeric field.
> 
> > My numeric range tests that are copies of Uwe's pass in the
> Lucandra, source,
> 
> > so I have a feeling it's my usage.  I have a simple test case, with
> 5 people.  I
> 
> > have a Date field, the LastLogin field.  This date is converted to
> epoch
> 
> > milliseconds, and stored in the index in the following way.
> 
> > 
> 
> > NumericField numeric = new NumericField("LastLogin");
> 
> > numeric.setLongValue(fieldValue); doc.add(numeric);
> 
> > 
> 
> > Where I have the following 2 field values on 2 documents.
> 
> > 
> 
> > 1282197146L and 1282197946L
> 
> > 
> 
> > I then perform the following query.
> 
> > 
> 
> > NumericRangeQuery rangeQuery =
> 
> > NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> 1282197146L,
> 
> > true, true);
> 
> > 
> 
> > IndexReader reader = new IndexReader(columnFamily,
> 
> >
> getContext(conn));
> 
> >
> IndexSearcher searcher = new
> 
> > IndexSearcher(reader);
> 
> > 
> 
> >                                                            TopDocs
> docs = searcher.search(query,
> 
> > maxResults);
> 
> > 
> 
> >
> List<Document> documents = new
> 
> > ArrayList<Document>(
> 
> >
> docs.totalHits);
> 
> > 
> 
> >
> Set<String> fields = new HashSet<String>();
> 
> >
> fields.add(IndexDocument.ROWKEY);
> 
> >
> fields.add(IndexDocument.IDSERIALIZED);
> 
> > 
> 
> >
> SetBasedFieldSelector selector = new
> 
> > SetBasedFieldSelector(
> 
> >
> fields, null);
> 
> > 
> 
> >                                                            for
> (ScoreDoc score : docs.scoreDocs) {
> 
> > 
> 
> >             documents.add(reader.document(score.doc, selector));
> 
> >                                                            }
> 
> > 
> 
> >                                                            return
> documents;
> 
> > 
> 
> > I'm always getting 0 documents.  I know this is incorrect, I can see
> the values
> 
> > getting written to Cassandra when I run it in debug mode.  Is this
> an issue with
> 
> > precision step, or an issue with the Lucandra index reader
> implementation?
> 
> > 
> 
> > Thanks,
> 
> > Todd
> 
> 

--=-wFuuBvYKRQs9j6osHihU--


From java-user-return-47397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 06:14:39 2010
Return-Path: <java-user-return-47397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67997 invoked from network); 5 Oct 2010 06:14:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 06:14:39 -0000
Received: (qmail 39573 invoked by uid 500); 5 Oct 2010 06:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39196 invoked by uid 500); 5 Oct 2010 06:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 32599 invoked by uid 99); 4 Oct 2010 21:45:11 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of altafvasi@gmail.com designates 209.85.213.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=kyTVJukB0X3A2dECSxvyN+8duaUDF/JL6JuekP4t0s0=;
        b=IfDtfXRbMzL2D/7q49X9GP6ZAwuvckn2uZh4JDvleoh+VUgXyQri3VAw3zkVtb0/Xu
         pZRSlk1kMQzUnsyGaV3QtwuP8333lNqJdf1mHDXK/HKsjbAh44GAuleHzeOrWYvZX5Sd
         lINKjeNq4WdJ5leaV3VK9f+MnnI83/xqYkkYE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=sCrVoo/fZghBDQPCpzgCQJR60PAYA2Kc6fmTQUCFRRjkSfsC0OckC/H7++N3KpNV55
         MzQUVQW1BguARl8JtIAX8qVg06CUzRhL3Q9zgt+octu9GaZzg53gPSRgp4sRpSzZBwpq
         3jQUIyc07IJsiA/e/set7xYAztjd46v4FbWdM=
MIME-Version: 1.0
Date: Mon, 4 Oct 2010 17:44:42 -0400
Message-ID: <AANLkTi=ytvRBC_eUb5uG7bVWaehZb-6pn654YNwcieir@mail.gmail.com>
Subject: Need help regarding Lucene Document Iteration...
From: Altaf Vasi <altafvasi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7e7cbb493b0491d17301
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7e7cbb493b0491d17301
Content-Type: text/plain; charset=ISO-8859-1

Hi,

i am doing the following in java.

I am searching through a lucene index and getting a Collection of Documents.


Below is the code that i have written.


Collection<org.apache.lucene.document.Document> docCollection= new
ArrayList<org.apache.lucene.document.Document>();

        try {
            Query query = new TermQuery(new Term(nameType, queryStr));
            ScoreDoc[] hits = searcher.search(query, 1).scoreDocs;
            org.apache.lucene.document.Document doc = new
org.apache.lucene.document.Document();
            for (int i = 0; i < hits.length; i++) {
                 int docId = hits[i].doc;
                 doc = searcher.doc(docId);
                 docCollection.add(doc);
                }
        }  catch (IOException e) {
            e.printStackTrace();
        }
        return docCollection;


The above method snippet is returning a collection of Documents. The next
step for me is to iterate through the collection of lucene documents that i
got and convert the same into XML using javax.xml.stream.

The issue is that i cannot figure out how to iterate through the Collection
of documents....

*Below is the code where i am facing the problem*


public void write(XMLStreamWriter writer, Collection<Document>
docCollection) throws XMLStreamException {

        writer.writeStartDocument();
        writer.writeStartElement("documents");
        *Iterator<Document> document = docCollection.iterator();*

        while (document.hasNext()) {
        writer.writeStartElement("document");
  *          for (Field field : (List<Field>) document.getFields()) {*
                writer.writeStartElement("field");
                writer.writeAttribute("name", field.name());
                writer.writeAttribute("value", field.stringValue());
                writer.writeEndElement();
            }
            writer.writeEndElement();
        }

        writer.writeEndElement();
        writer.writeEndDocument();



Request you to correct the above code snippet..... How do i iterate through
the Collection of Lucene docs?
Please help !!!!

Thanks,
Altaf

--0016361e7e7cbb493b0491d17301--

From java-user-return-47398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 06:48:58 2010
Return-Path: <java-user-return-47398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79792 invoked from network); 5 Oct 2010 06:48:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 06:48:58 -0000
Received: (qmail 72845 invoked by uid 500); 5 Oct 2010 06:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72553 invoked by uid 500); 5 Oct 2010 06:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72543 invoked by uid 99); 5 Oct 2010 06:48:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 06:48:53 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_24,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_REMOTE_IMAGE,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 06:48:46 +0000
Received: by qwk3 with SMTP id 3so4677926qwk.35
        for <java-user@lucene.apache.org>; Mon, 04 Oct 2010 23:48:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=cqPRYP40zV8H3HxeZalaZ6mnIUXVJDe4dfS+frBp7cA=;
        b=EX7i/4eBhyoPpt/b52YUDiqvSfKGZlI+L8CEknJDsCl18B9NQDfcVgio1T8b0alONg
         iPOT9KfScKISsBTIZ6zDB8WPUyMyICuSg7E9CqgzPf3RcLTwbh+BFhmo9pflVEZzUmaE
         Snl4c2GQpkB8ifXx5cqX8qF7doDsxmRHaVsDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jbnKJjYgKlnHMBRnYbKx1ZSkZKskiCtsHO+wKIHa2nyoe+UoDp22mY8dXPlwuSYf6/
         17/Qj4fJBS9xB2Wg4VHJECzaOmtL1rJ3u+s3YPnR3qIH0gMHlyIIvUsGqbYPX7l5uIeo
         vQNH3r7q7JDhFfe6Wr9wcef/KtGyD9pJSamao=
MIME-Version: 1.0
Received: by 10.229.1.208 with SMTP id 16mr7702813qcg.264.1286261306055; Mon,
 04 Oct 2010 23:48:26 -0700 (PDT)
Received: by 10.229.30.136 with HTTP; Mon, 4 Oct 2010 23:48:26 -0700 (PDT)
In-Reply-To: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com>
References: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com>
Date: Tue, 5 Oct 2010 12:18:26 +0530
Message-ID: <AANLkTinE8zKVN0GNq_t4ShpAanCcA4UvKrsGnFOWkV=c@mail.gmail.com>
Subject: Re: Merge policy, optimization for small frequently changing indexes.
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0014853932ba3c5eee0491d90c13
X-Virus-Checked: Checked by ClamAV on apache.org

--0014853932ba3c5eee0491d90c13
Content-Type: text/plain; charset=ISO-8859-1

Hi
I have one more question, does Lucene purge the deleted documents before
merging the segments, or purging of deleted  documents done only when
optimized?

On Thu, Sep 30, 2010 at 4:59 PM, Naveen Kumar <id.navs@gmail.com> wrote:

> Hi
> I have a Very large number (say 3 million) of frequently changing Small
> indexes. 90% of these indexes contain about 50 documents, while a few 2-3%
> indexes have about 100,000 documents each (these being the more frequently
> used indexes).
> Each index belongs to a signed in user, thus can have unpredictable index
> changes, in short periods of time, or can be stagnant for a long time.
> What kind of indexing policy (mergefactor, maxmergedocs) would be optimal
> for this kind of index. Is optimizing for this kind of index needed? or
> wise?, if yes, what would be a good way to optimize (please note number of
> indexes are very large).
>
> Any suggestions would be very helpful.
>
> --
> Thanks
> Naveen Kumar
>
>
>
>


-- 
Thanks
Naveen Kumar

--0014853932ba3c5eee0491d90c13--

From java-user-return-47399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 09:04:22 2010
Return-Path: <java-user-return-47399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19074 invoked from network); 5 Oct 2010 09:04:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 09:04:22 -0000
Received: (qmail 92213 invoked by uid 500); 5 Oct 2010 09:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91924 invoked by uid 500); 5 Oct 2010 09:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91910 invoked by uid 99); 5 Oct 2010 09:04:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:04:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:04:09 +0000
Received: by qwk3 with SMTP id 3so4745856qwk.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 02:03:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=vGLTbEvIfEl/W0p+MEgDMruE2j/A4yJouAsmf76OEgA=;
        b=PIN448ugmZSft2CWtXn/9LNOOMskYwLvp1Vi1ppq3mkknWXTIVppp/u7HqbasgQm6y
         98kmu1rfyOCqYl43uekApNyJs5l6dGDwGtMc8SuvZccY/G8Pz5uO9WUZV13hvpiQNLx5
         6FrDlysNzDKYKArz7GMsaMvgOTG9Y3Fmp1f9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=E6mNByOOm8ctYKprV7mQPbqt8mVrcvJd1rC7CTcx4KdabQGw3LYJP6jva3pXHoNvKp
         X/6wdr+eThHHw3JtJ3xas6A2w7XLaG24jGHQ0Lg/N7I52x8e2BemSyQb41NdGtkq10rK
         KtrFHrHBW8qUqRz/oZHuRa85gt98Bdewe3uVE=
Received: by 10.229.251.210 with SMTP id mt18mr8070731qcb.151.1286269428352;
 Tue, 05 Oct 2010 02:03:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.99.204 with HTTP; Tue, 5 Oct 2010 02:03:27 -0700 (PDT)
In-Reply-To: <8087ADAB-DDF8-466D-9E8E-DC1827D580FA@go2.com>
References: <8087ADAB-DDF8-466D-9E8E-DC1827D580FA@go2.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Oct 2010 10:03:27 +0100
Message-ID: <AANLkTinZHxkNRgncOhdu5L7mgX9jbmVqnSEG8t3WdMhO@mail.gmail.com>
Subject: Re: Matching Documents BitSet
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How do you do this in 2.x?


--
Ian.


On Mon, Oct 4, 2010 at 8:10 PM, Jordon Saardchit <jsaardchit@go2.com> wrote=
:
> In lucene 3, is there an equivalent to obtaining a BitSet of documents fr=
om an Index as there was in version 2.x? =A0I'm trying to put together an u=
pgrade path.
>
> Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 09:18:23 2010
Return-Path: <java-user-return-47400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26839 invoked from network); 5 Oct 2010 09:18:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 09:18:22 -0000
Received: (qmail 12633 invoked by uid 500); 5 Oct 2010 09:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12219 invoked by uid 500); 5 Oct 2010 09:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12209 invoked by uid 99); 5 Oct 2010 09:18:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:18:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:18:10 +0000
Received: by qyk33 with SMTP id 33so449685qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 02:17:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=NQcg0eOYMHnTd1jrWTr99OEIPyHlZKVRkku2uJoVuVE=;
        b=bvPatPtiXMdvrVU52pPPeIDVBr21cgnNNNC4+a8kqcKCWmQmDgASPGLcr+qIVLkK7y
         H+trJkamm4ZEPj47aMNN8Efmszoez7fftaREfZvk0LRMFxOvzaROX5X4W5JR3kVzNGtB
         H+P0OYKs8dHou3JDHB2pfx8diDDO6jq5MZk2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=mY/RmJuRTusVNg1tvHNHiMALRTbbFJCu/99JAqdqRvqI+jGFLotQQKzvewr07F+tdZ
         AKLkkYdxpEIvCtkw/+zCK8BOPizwVLViNPXRXC213vYXSg4vgOyFwYS/14JjEIfd9yW7
         9tOWLay0NbqgibfdOZeRI6MVsD17c994G1t8U=
Received: by 10.224.65.95 with SMTP id h31mr7822539qai.116.1286270269217; Tue,
 05 Oct 2010 02:17:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.99.204 with HTTP; Tue, 5 Oct 2010 02:17:27 -0700 (PDT)
In-Reply-To: <AANLkTi=ytvRBC_eUb5uG7bVWaehZb-6pn654YNwcieir@mail.gmail.com>
References: <AANLkTi=ytvRBC_eUb5uG7bVWaehZb-6pn654YNwcieir@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Oct 2010 10:17:27 +0100
Message-ID: <AANLkTikqV+J6W7BGpWkCZB3b+7swefu7f7+zinVphDMa@mail.gmail.com>
Subject: Re: Need help regarding Lucene Document Iteration...
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

What exactly is the problem?  The standard idiom nowadays for
iterating through a List is what you're using in "for (Field field :
...)".  I haven't used an iterator for a long time.

But perhaps your iteration code is working and the problem is in your
search code.  The javadoc for search(query, n) finds the top n hits
for the query.  Maybe you need a larger number than 1.


--
Ian.


On Mon, Oct 4, 2010 at 10:44 PM, Altaf Vasi <altafvasi@gmail.com> wrote:
> Hi,
>
> i am doing the following in java.
>
> I am searching through a lucene index and getting a Collection of Documen=
ts.
>
>
> Below is the code that i have written.
>
>
> Collection<org.apache.lucene.document.Document> docCollection=3D new
> ArrayList<org.apache.lucene.document.Document>();
>
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0Query query =3D new TermQuery(new Term(nameType, q=
ueryStr));
> =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc[] hits =3D searcher.search(query, 1).scor=
eDocs;
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.document.Document doc =3D new
> org.apache.lucene.document.Document();
> =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < hits.length; i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 int docId =3D hits[i].doc;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 doc =3D searcher.doc(docId);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 docCollection.add(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0} =A0catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0e.printStackTrace();
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0return docCollection;
>
>
> The above method snippet is returning a collection of Documents. The next
> step for me is to iterate through the collection of lucene documents that=
 i
> got and convert the same into XML using javax.xml.stream.
>
> The issue is that i cannot figure out how to iterate through the Collecti=
on
> of documents....
>
> *Below is the code where i am facing the problem*
>
>
> public void write(XMLStreamWriter writer, Collection<Document>
> docCollection) throws XMLStreamException {
>
> =A0 =A0 =A0 =A0writer.writeStartDocument();
> =A0 =A0 =A0 =A0writer.writeStartElement("documents");
> =A0 =A0 =A0 =A0*Iterator<Document> document =3D docCollection.iterator();=
*
>
> =A0 =A0 =A0 =A0while (document.hasNext()) {
> =A0 =A0 =A0 =A0writer.writeStartElement("document");
> =A0* =A0 =A0 =A0 =A0 =A0for (Field field : (List<Field>) document.getFiel=
ds()) {*
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.writeStartElement("field");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.writeAttribute("name", field.name()=
);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.writeAttribute("value", field.strin=
gValue());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.writeEndElement();
> =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0writer.writeEndElement();
> =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0writer.writeEndElement();
> =A0 =A0 =A0 =A0writer.writeEndDocument();
>
>
>
> Request you to correct the above code snippet..... How do i iterate throu=
gh
> the Collection of Lucene docs?
> Please help !!!!
>
> Thanks,
> Altaf
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 09:25:48 2010
Return-Path: <java-user-return-47401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29050 invoked from network); 5 Oct 2010 09:25:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 09:25:48 -0000
Received: (qmail 21251 invoked by uid 500); 5 Oct 2010 09:25:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20703 invoked by uid 500); 5 Oct 2010 09:25:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20684 invoked by uid 99); 5 Oct 2010 09:25:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:25:41 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 09:25:33 +0000
Received: by qyk33 with SMTP id 33so460222qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 02:25:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=xIaGwjBhCJOjJXOdKr+td6/KVyUJf5kQM/F2oHAcS1c=;
        b=tuIdJsaS0z/7IdgL3MCPLriEt20BBmXelUXUdcR4Ym1LfcUrybt1MjV9qPLiUOCZFP
         LnO6TE3QFh2k7C4YZxe0EC2ipz2OfCL7+TQtWOmaEEa4kILFZW3LlzpsRFPmGZoLGNsm
         Cd3G44HahtADZmlqjP9peER14BB4bT7S72kJE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=rcVG/ufgixGf5+yn1PEy0OvdB6b8vdW8Vj//mz6gyO01N9+5lNKq8x74+y+Tbh0yph
         hJZqa8i47LEDavbv5U8hLR9TSlj6cDLOQEDWxtoRWourHTfBgzLTHbpp/utmocXFoXWI
         iTcCsCo8OnN78v9KSMZ5x4J/7m7DXwWAmjRns=
Received: by 10.224.109.137 with SMTP id j9mr7374606qap.209.1286270710368;
 Tue, 05 Oct 2010 02:25:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.99.204 with HTTP; Tue, 5 Oct 2010 02:24:49 -0700 (PDT)
In-Reply-To: <AANLkTinE8zKVN0GNq_t4ShpAanCcA4UvKrsGnFOWkV=c@mail.gmail.com>
References: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com> <AANLkTinE8zKVN0GNq_t4ShpAanCcA4UvKrsGnFOWkV=c@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Oct 2010 10:24:49 +0100
Message-ID: <AANLkTinLou4ga7Cs=P6Bjo2+pafxZ7RbCP9PYPWZkrzC@mail.gmail.com>
Subject: Re: Merge policy, optimization for small frequently changing indexes.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Deleted docs will be removed by lucene at some point - there is no
need to run optimize.
Read the javadocs for IndexWriter for details.  See also
expungeDeletes().  That may be just what you need.


--
Ian.


On Tue, Oct 5, 2010 at 7:48 AM, Naveen Kumar <id.navs@gmail.com> wrote:
> Hi
> I have one more question, does Lucene purge the deleted documents before
> merging the segments, or purging of deleted =A0documents done only when
> optimized?
>
> On Thu, Sep 30, 2010 at 4:59 PM, Naveen Kumar <id.navs@gmail.com> wrote:
>
>> Hi
>> I have a Very large number (say 3 million) of frequently changing Small
>> indexes. 90% of these indexes contain about 50 documents, while a few 2-=
3%
>> indexes have about 100,000 documents each (these being the more frequent=
ly
>> used indexes).
>> Each index belongs to a signed in user, thus can have unpredictable inde=
x
>> changes, in short periods of time, or can be stagnant for a long time.
>> What kind of indexing policy (mergefactor, maxmergedocs) would be optima=
l
>> for this kind of index. Is optimizing for this kind of index needed? or
>> wise?, if yes, what would be a good way to optimize (please note number =
of
>> indexes are very large).
>>
>> Any suggestions would be very helpful.
>>
>> --
>> Thanks
>> Naveen Kumar
>>
>>
>>
>>
>
>
> --
> Thanks
> Naveen Kumar
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 10:14:09 2010
Return-Path: <java-user-return-47402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44674 invoked from network); 5 Oct 2010 10:14:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 10:14:08 -0000
Received: (qmail 64293 invoked by uid 500); 5 Oct 2010 10:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63788 invoked by uid 500); 5 Oct 2010 10:14:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63780 invoked by uid 99); 5 Oct 2010 10:14:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:14:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:13:55 +0000
Received: by ewy10 with SMTP id 10so3541759ewy.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 03:13:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=BHobZLXCrBXiWSMuacNBtn8ONSlRcjTp9pBnHm4D/U0=;
        b=sraHkXb3n+T+70TzmqTULSEpEgDoh3G9NnHm1XwEyQN+p8DrR8X/bn+LbW91XTGwsF
         O4tYe823Z8na6OptruucihFPKtZcPxQDopJgOzg3/o/4E05KDGu5vhUNn98iXKb0qGwB
         ybXylPzUFo+mDxtkLh92cE9ydxsuikBCdfXGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=clYJLEmzMADyvcIAOBexlS6U/67W5N3Fs33ox79yIB3aozCWQ+Q+uqLI7uhIzZkKL8
         GpanBb/4C0abPFG0pSWiKyHgWUw+kxsxI/cRF/CiDXyxTZ38F9DNWbEtzhaHMv4DibBn
         5LCDK9Vu8qVAmZxCOpMkMPHBCnbAzHSUko7dM=
MIME-Version: 1.0
Received: by 10.213.8.130 with SMTP id h2mr2147012ebh.1.1286273615192; Tue, 05
 Oct 2010 03:13:35 -0700 (PDT)
Received: by 10.220.184.167 with HTTP; Tue, 5 Oct 2010 03:13:34 -0700 (PDT)
Date: Tue, 5 Oct 2010 11:13:34 +0100
Message-ID: <AANLkTimoLk=_YVs4wA1wbrMJsVyUKYLBu3md7XuMKgZK@mail.gmail.com>
Subject: Safely closing stale IndexReaders
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am keeping a ConcurrentMap of o.a.l.index.IndexReader which I use in
my system. These readers are retrieved by multiple threads and I have
no knowledge when these readers are actively used and when not.

When underlying index is updated, I reopen the reader and replace it in the map:

IndexReader newReader = oldReader.reopen();
if (newReader != oldReader) {  // reader has been changed
  map.replace(key, newReader);
}

The problem with this is that old reader doesn't get closed which adds
to open file handle footprint. I cannot close oldReader immediately
after map.replace() as there might be some other threads actively
using it.

One of solutions would be to use object pools. Each time IndexReader
is necessary, it would have to be borrowed from the pool and then
given back when done. This however has a disadvantage of massive
amount of scaffolding useless code and would still not guarantee that
all objects are given back safely as caller might forget to return the
object to the pool.

Another solution is to use finalizers. This requires extending IndexReader, e.g.

class SelfClosingIndexReader extends IndexReader {
  private final IndexReader delegate;
  public SelfClosingIndexReader(IndexReader delegate) {
    this.delegate = delegate;
  }

  public void anyPublicMethod() {
    delegate.anyPublicMethod();
  }

  public void anyProtectedMethod() {
    delegate.anyProtectedMethod();
  }

  protected void finalize() throws Throwable {
    try {
      delegate.close();
    } finally {
      super.finalize();
    }
  }
}

This solution works, but is utterly ugly:
- Finalizers are bad. I won't digress explaining why, just read Josh
Bloch's "Effective Java second edition" Item 7;
- IndexReader is an abstract class, not an interface -- this means I
have to override every single public and protected method, otherwise
this will fail. Moreover, it is very very slippery: if I upgrade to a
newer Lucene version, I have to carefully go through every single
method to ensure there are no new ones which I have to
override/un-override.

A better solution would be to use WeakReferences. However there is no
inner purposed object (e.g. Reader) of IndexReader that could be
referenced strongly and used for .close() upon polling relevant
reference queue. Extending WeakReference and keeping hard reference to
IndexReader inside it simply prevents whole object from being
reclaimed (or there's something I don't understand about
WeakReferences).

I was wondering if anybody has been in a similar situation and solved
this. Thanks in advance.

m.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 10:19:02 2010
Return-Path: <java-user-return-47403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46377 invoked from network); 5 Oct 2010 10:19:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 10:19:02 -0000
Received: (qmail 72370 invoked by uid 500); 5 Oct 2010 10:19:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72092 invoked by uid 500); 5 Oct 2010 10:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72083 invoked by uid 99); 5 Oct 2010 10:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:18:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_32,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:18:50 +0000
Received: by qyk33 with SMTP id 33so3336960qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 03:18:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uopQOXBchR0f6YZE+2Xy8bMM7O8Qv0/BFy2kiDpXXvQ=;
        b=GaXPla0PkXamEFPtxBOS4pMCDVHNtrPDjuHE3t0vITCvpaonTDYBi/sbJIrCyXgpBC
         LoO5LLQhKoGcx+TV1PR2pCcCOy4Ka3r5jxETXMSjwLvtiRzWYkOVos3XwxsszNeJH9cD
         AICle3eW6jQ6DdZopNR8pWZnYHN4nhQPbr+ow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KU5+XCI6Horkas6sJNLkfqMZ0SzXEka1ocS/zQbX126NXgYQZK/CWp2s8GAEIRJmrL
         gnaMSPzQmTCzvbO6eOKPLsWug8Z5jFxc4F5Kx61+YnGnowY6Wpa9hHaS2c0qWOQnoZLV
         KzTs2rl3YFmuu1RouRfDWbhLNUnDt3dMY3vK4=
MIME-Version: 1.0
Received: by 10.229.213.20 with SMTP id gu20mr8137235qcb.52.1286273908280;
 Tue, 05 Oct 2010 03:18:28 -0700 (PDT)
Received: by 10.229.30.136 with HTTP; Tue, 5 Oct 2010 03:18:28 -0700 (PDT)
In-Reply-To: <AANLkTinLou4ga7Cs=P6Bjo2+pafxZ7RbCP9PYPWZkrzC@mail.gmail.com>
References: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com>
	<AANLkTinE8zKVN0GNq_t4ShpAanCcA4UvKrsGnFOWkV=c@mail.gmail.com>
	<AANLkTinLou4ga7Cs=P6Bjo2+pafxZ7RbCP9PYPWZkrzC@mail.gmail.com>
Date: Tue, 5 Oct 2010 15:48:28 +0530
Message-ID: <AANLkTim+wDfyA_qk3uUbJSTMyk70P8t5hgGaYBb7mCwL@mail.gmail.com>
Subject: Re: Merge policy, optimization for small frequently changing indexes.
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630fa77630f090491dbfbc6
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630fa77630f090491dbfbc6
Content-Type: text/plain; charset=ISO-8859-1

Thank you, Ian
I have a large number of dynamically changing Index, so calling
expungeDeletes() and optimize() is very costly.
At this point I am opting to just set a optimum merge factor and skip
optimize()

On Tue, Oct 5, 2010 at 2:54 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Deleted docs will be removed by lucene at some point - there is no
> need to run optimize.
> Read the javadocs for IndexWriter for details.  See also
> expungeDeletes().  That may be just what you need.
>
>
> --
> Ian.
>
>
> On Tue, Oct 5, 2010 at 7:48 AM, Naveen Kumar <id.navs@gmail.com> wrote:
> > Hi
> > I have one more question, does Lucene purge the deleted documents before
> > merging the segments, or purging of deleted  documents done only when
> > optimized?
> >
> > On Thu, Sep 30, 2010 at 4:59 PM, Naveen Kumar <id.navs@gmail.com> wrote:
> >
> >> Hi
> >> I have a Very large number (say 3 million) of frequently changing Small
> >> indexes. 90% of these indexes contain about 50 documents, while a few
> 2-3%
> >> indexes have about 100,000 documents each (these being the more
> frequently
> >> used indexes).
> >> Each index belongs to a signed in user, thus can have unpredictable
> index
> >> changes, in short periods of time, or can be stagnant for a long time.
> >> What kind of indexing policy (mergefactor, maxmergedocs) would be
> optimal
> >> for this kind of index. Is optimizing for this kind of index needed? or
> >> wise?, if yes, what would be a good way to optimize (please note number
> of
> >> indexes are very large).
> >>
> >> Any suggestions would be very helpful.
> >>
> >> --
> >> Thanks
> >> Naveen Kumar
> >>
> >>
> >>
> >>
> >
> >
> > --
> > Thanks
> > Naveen Kumar
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


Naveen Kumar

--00163630fa77630f090491dbfbc6--

From java-user-return-47404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 10:27:27 2010
Return-Path: <java-user-return-47404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47778 invoked from network); 5 Oct 2010 10:27:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 10:27:27 -0000
Received: (qmail 78199 invoked by uid 500); 5 Oct 2010 10:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77788 invoked by uid 500); 5 Oct 2010 10:27:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77778 invoked by uid 99); 5 Oct 2010 10:27:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:27:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:27:13 +0000
Received: by wwb22 with SMTP id 22so4457005wwb.5
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 03:26:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.231.73 with SMTP id k51mr8996166weq.5.1286274413214; Tue,
 05 Oct 2010 03:26:53 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Tue, 5 Oct 2010 03:26:53 -0700 (PDT)
In-Reply-To: <AANLkTimT9SngzYBUcqgrrcWyLcnjcq6aqv_1Smjq2iQK@mail.gmail.com>
References: <AANLkTimT9SngzYBUcqgrrcWyLcnjcq6aqv_1Smjq2iQK@mail.gmail.com>
Date: Tue, 5 Oct 2010 06:26:53 -0400
Message-ID: <AANLkTinN6fgn7TAHxMsKUr5EndFzBvWK2arrh5jq9vmO@mail.gmail.com>
Subject: Re: Recreate segment infos
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

How did you lose your segments file...?

This was discussed before but I don't think the idea ever turned into a tool.

I think it should be possible.  You'd have to sort all files, deriving
segment names from the prefixes.  Then, you have to reconstruct the
metadata required for SegmentInfo.  EG open the fdx file to get
numDocs, the .del file to get delCount, check for prx file to set
.haxProx, etc.

You'd have to carefully map segment -> doc store segment.  Multiple
segments in a row may share the same docStore segment.  In this case
the docStore segment is given the same name as the first segment that
shares it.  However, unfortunately, because of merging, it's possible
that this mapping is not easy (maybe not possible, depending on the
merge policy...) to reconstruct.  I think this'll be the hardest part
:)

Mike

On Mon, Oct 4, 2010 at 3:25 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Lets say the segment infos file is missing, and I'm aware of
> CheckIndex, however is there a tool to recreate a segment infos file?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 10:30:07 2010
Return-Path: <java-user-return-47405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48156 invoked from network); 5 Oct 2010 10:30:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 10:30:07 -0000
Received: (qmail 80587 invoked by uid 500); 5 Oct 2010 10:30:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80240 invoked by uid 500); 5 Oct 2010 10:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80232 invoked by uid 99); 5 Oct 2010 10:30:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:30:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:29:53 +0000
Received: by qyk33 with SMTP id 33so544161qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 03:29:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=d/FsUOgg1rGbPkAeCrJl23EoAh4IRzoG3z7a5XgWb74=;
        b=KDifK2U3ReszOrQrEUouTIaVrakl0dd57SpnKSS8lAjzwZy5JTIHV12Hfbr5NQHUje
         6fq/TBH9MXgt8YhFDR4a21XIEj7MOJwfR382UAt2scXNo4HImWwPswRJ21FXMhD60l0j
         ZZRqJP1/mKqKP7Od2QwmSu+8A0UtyftzGDNB8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=TAPMGlq4bVU3tqntuZ6GI0AoR2teNCANpGt5sbccc/ey9T6OHB0q15nnXueQU+au8M
         OHj5jDWvGSozKTxgyBuRVGePmtMXDbMfQc1NTdmaMG+oqyr9P5zu4c+VKO4yzpGfpco5
         6mnbVD6vLIFdfYpsA1cy58cKbg003f7Cu3PHo=
Received: by 10.229.175.167 with SMTP id ba39mr8186886qcb.181.1286274568001;
 Tue, 05 Oct 2010 03:29:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.99.204 with HTTP; Tue, 5 Oct 2010 03:29:07 -0700 (PDT)
In-Reply-To: <AANLkTim+wDfyA_qk3uUbJSTMyk70P8t5hgGaYBb7mCwL@mail.gmail.com>
References: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com>
 <AANLkTinE8zKVN0GNq_t4ShpAanCcA4UvKrsGnFOWkV=c@mail.gmail.com>
 <AANLkTinLou4ga7Cs=P6Bjo2+pafxZ7RbCP9PYPWZkrzC@mail.gmail.com> <AANLkTim+wDfyA_qk3uUbJSTMyk70P8t5hgGaYBb7mCwL@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Oct 2010 11:29:07 +0100
Message-ID: <AANLkTinxHd24+m4XKKUWf7sKja2g6h8Wn-P4A7vtF7ke@mail.gmail.com>
Subject: Re: Merge policy, optimization for small frequently changing indexes.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Have you considered having fewer indexes, each storing data for
multiple users?  Obviously with some indexed field that you can use
for restricting searches to data for that user.

I believe that is more common practice for this sort of scenario and
is known to work well.  You seem to be adding possibly unnecessary
complexity and overhead for all the tiny indexes.


--
Ian.


On Tue, Oct 5, 2010 at 11:18 AM, Naveen Kumar <id.navs@gmail.com> wrote:
> Thank you, Ian
> I have a large number of dynamically changing Index, so calling
> expungeDeletes() and optimize() is very costly.
> At this point I am opting to just set a optimum merge factor and skip
> optimize()
>
> On Tue, Oct 5, 2010 at 2:54 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Deleted docs will be removed by lucene at some point - there is no
>> need to run optimize.
>> Read the javadocs for IndexWriter for details. =A0See also
>> expungeDeletes(). =A0That may be just what you need.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Oct 5, 2010 at 7:48 AM, Naveen Kumar <id.navs@gmail.com> wrote:
>> > Hi
>> > I have one more question, does Lucene purge the deleted documents befo=
re
>> > merging the segments, or purging of deleted =A0documents done only whe=
n
>> > optimized?
>> >
>> > On Thu, Sep 30, 2010 at 4:59 PM, Naveen Kumar <id.navs@gmail.com> wrot=
e:
>> >
>> >> Hi
>> >> I have a Very large number (say 3 million) of frequently changing Sma=
ll
>> >> indexes. 90% of these indexes contain about 50 documents, while a few
>> 2-3%
>> >> indexes have about 100,000 documents each (these being the more
>> frequently
>> >> used indexes).
>> >> Each index belongs to a signed in user, thus can have unpredictable
>> index
>> >> changes, in short periods of time, or can be stagnant for a long time=
.
>> >> What kind of indexing policy (mergefactor, maxmergedocs) would be
>> optimal
>> >> for this kind of index. Is optimizing for this kind of index needed? =
or
>> >> wise?, if yes, what would be a good way to optimize (please note numb=
er
>> of
>> >> indexes are very large).
>> >>
>> >> Any suggestions would be very helpful.
>> >>
>> >> --
>> >> Thanks
>> >> Naveen Kumar
>> >>
>> >>
>> >>
>> >>
>> >
>> >
>> > --
>> > Thanks
>> > Naveen Kumar
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> Naveen Kumar
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 10:35:02 2010
Return-Path: <java-user-return-47406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51132 invoked from network); 5 Oct 2010 10:35:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 10:35:02 -0000
Received: (qmail 87911 invoked by uid 500); 5 Oct 2010 10:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87563 invoked by uid 500); 5 Oct 2010 10:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87555 invoked by uid 99); 5 Oct 2010 10:34:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:34:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 10:34:50 +0000
Received: by wwb22 with SMTP id 22so4462031wwb.5
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 03:34:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.150.219 with SMTP id z69mr803959wej.75.1286274868592; Tue,
 05 Oct 2010 03:34:28 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Tue, 5 Oct 2010 03:34:28 -0700 (PDT)
In-Reply-To: <AANLkTimoLk=_YVs4wA1wbrMJsVyUKYLBu3md7XuMKgZK@mail.gmail.com>
References: <AANLkTimoLk=_YVs4wA1wbrMJsVyUKYLBu3md7XuMKgZK@mail.gmail.com>
Date: Tue, 5 Oct 2010 06:34:28 -0400
Message-ID: <AANLkTi=pX7Kbu=o=0u2kHn+LQr2BayuNQn6=LPzxLDqj@mail.gmail.com>
Subject: Re: Safely closing stale IndexReaders
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Check out the SearcherManager class in Lucene in Action 2nd edition's
source code.  It's free for download at Manning's site
(http://manning.com/lucene).  NOTE: I am one of the co-authors.

I think that class does exactly what you're seeking.  It uses
reference counts to ensure a reader is closed after all threads that
are using it have completed, and handles reopen and warming of new
readers.

It also works both in near-real-time mode (you pass it an IndexWriter
instance) or a non-NRT mode (using IndexReader.reopen).

However, each thread must release the reader else the reader will
never be closed.

Mike

2010/10/5 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
> Hi,
>
> I am keeping a ConcurrentMap of o.a.l.index.IndexReader which I use in
> my system. These readers are retrieved by multiple threads and I have
> no knowledge when these readers are actively used and when not.
>
> When underlying index is updated, I reopen the reader and replace it in t=
he map:
>
> IndexReader newReader =3D oldReader.reopen();
> if (newReader !=3D oldReader) { =C2=A0// reader has been changed
> =C2=A0map.replace(key, newReader);
> }
>
> The problem with this is that old reader doesn't get closed which adds
> to open file handle footprint. I cannot close oldReader immediately
> after map.replace() as there might be some other threads actively
> using it.
>
> One of solutions would be to use object pools. Each time IndexReader
> is necessary, it would have to be borrowed from the pool and then
> given back when done. This however has a disadvantage of massive
> amount of scaffolding useless code and would still not guarantee that
> all objects are given back safely as caller might forget to return the
> object to the pool.
>
> Another solution is to use finalizers. This requires extending IndexReade=
r, e.g.
>
> class SelfClosingIndexReader extends IndexReader {
> =C2=A0private final IndexReader delegate;
> =C2=A0public SelfClosingIndexReader(IndexReader delegate) {
> =C2=A0 =C2=A0this.delegate =3D delegate;
> =C2=A0}
>
> =C2=A0public void anyPublicMethod() {
> =C2=A0 =C2=A0delegate.anyPublicMethod();
> =C2=A0}
>
> =C2=A0public void anyProtectedMethod() {
> =C2=A0 =C2=A0delegate.anyProtectedMethod();
> =C2=A0}
>
> =C2=A0protected void finalize() throws Throwable {
> =C2=A0 =C2=A0try {
> =C2=A0 =C2=A0 =C2=A0delegate.close();
> =C2=A0 =C2=A0} finally {
> =C2=A0 =C2=A0 =C2=A0super.finalize();
> =C2=A0 =C2=A0}
> =C2=A0}
> }
>
> This solution works, but is utterly ugly:
> - Finalizers are bad. I won't digress explaining why, just read Josh
> Bloch's "Effective Java second edition" Item 7;
> - IndexReader is an abstract class, not an interface -- this means I
> have to override every single public and protected method, otherwise
> this will fail. Moreover, it is very very slippery: if I upgrade to a
> newer Lucene version, I have to carefully go through every single
> method to ensure there are no new ones which I have to
> override/un-override.
>
> A better solution would be to use WeakReferences. However there is no
> inner purposed object (e.g. Reader) of IndexReader that could be
> referenced strongly and used for .close() upon polling relevant
> reference queue. Extending WeakReference and keeping hard reference to
> IndexReader inside it simply prevents whole object from being
> reclaimed (or there's something I don't understand about
> WeakReferences).
>
> I was wondering if anybody has been in a similar situation and solved
> this. Thanks in advance.
>
> m.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 12:39:01 2010
Return-Path: <java-user-return-47407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8803 invoked from network); 5 Oct 2010 12:39:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 12:39:01 -0000
Received: (qmail 20041 invoked by uid 500); 5 Oct 2010 12:38:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18726 invoked by uid 500); 5 Oct 2010 12:38:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18699 invoked by uid 99); 5 Oct 2010 12:38:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 12:38:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 12:38:48 +0000
Received: by qwk3 with SMTP id 3so4862670qwk.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 05:38:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Udlos+4rWqG/YMikrA1Ba8hDN5IEfcpZlvQG+4ckeaY=;
        b=FLIizEpXMh84Kv95OasRXdutZcufWcTKOu+Ef1pXdvfcKGilc1nDjxbMNWkdhvXz5z
         7dmyLxd0N8nEzsngyvisJtt3InHg0kbqnFPV4xvUatSNdLFHvww8dojQQVY48UaVp2Qf
         6FqqbL7gSdkWrtcyD1Br+YyPiIXq1oyvdfQJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=EDeBaJcF277ILEaEPrn3/2MLQSpIiL95IFgJIinaSn6Z6DQCSYo5BZbEviTNYpXgep
         EdMkgINBwWGytJ6QJTn6xneKcpkYGNh93OqDA/b1IIPP/+j54V17EW+qKBJWnQDmOKI4
         rbg12YR+nZ+dwhnYcqAe77PKw/3eC1lXpkFQU=
MIME-Version: 1.0
Received: by 10.229.87.85 with SMTP id v21mr2788167qcl.158.1286282307814; Tue,
 05 Oct 2010 05:38:27 -0700 (PDT)
Received: by 10.229.185.75 with HTTP; Tue, 5 Oct 2010 05:38:27 -0700 (PDT)
In-Reply-To: <AANLkTinN6fgn7TAHxMsKUr5EndFzBvWK2arrh5jq9vmO@mail.gmail.com>
References: <AANLkTimT9SngzYBUcqgrrcWyLcnjcq6aqv_1Smjq2iQK@mail.gmail.com>
	<AANLkTinN6fgn7TAHxMsKUr5EndFzBvWK2arrh5jq9vmO@mail.gmail.com>
Date: Tue, 5 Oct 2010 05:38:27 -0700
Message-ID: <AANLkTinsvtbHfyBX49_1rfSshjdVZdW6GhuAue1-vRkE@mail.gmail.com>
Subject: Re: Recreate segment infos
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I'm not sure how it vanished, I think it was on a Solr rsync based
replication operation, and a lack of disk space.  Need to move to the
Java replication and get larger SSD drives, working on both, at least
they're SSDs, making some progress.  I was going to recover using the
IDs in the terms dict however there should be 130 mil and there were
only 16 mil.  So even if I had a way to recover, the index is far too
incomplete.  This is where re-indexing in Hadoop is coming in handy.

On Tue, Oct 5, 2010 at 3:26 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> How did you lose your segments file...?
>
> This was discussed before but I don't think the idea ever turned into a t=
ool.
>
> I think it should be possible. =A0You'd have to sort all files, deriving
> segment names from the prefixes. =A0Then, you have to reconstruct the
> metadata required for SegmentInfo. =A0EG open the fdx file to get
> numDocs, the .del file to get delCount, check for prx file to set
> .haxProx, etc.
>
> You'd have to carefully map segment -> doc store segment. =A0Multiple
> segments in a row may share the same docStore segment. =A0In this case
> the docStore segment is given the same name as the first segment that
> shares it. =A0However, unfortunately, because of merging, it's possible
> that this mapping is not easy (maybe not possible, depending on the
> merge policy...) to reconstruct. =A0I think this'll be the hardest part
> :)
>
> Mike
>
> On Mon, Oct 4, 2010 at 3:25 PM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
>> Lets say the segment infos file is missing, and I'm aware of
>> CheckIndex, however is there a tool to recreate a segment infos file?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 13:47:51 2010
Return-Path: <java-user-return-47408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57610 invoked from network); 5 Oct 2010 13:47:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 13:47:51 -0000
Received: (qmail 58954 invoked by uid 500); 5 Oct 2010 13:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58444 invoked by uid 500); 5 Oct 2010 13:47:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58436 invoked by uid 99); 5 Oct 2010 13:47:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 13:47:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jsaardchit@go2.com designates 38.97.64.35 as permitted sender)
Received: from [38.97.64.35] (HELO mail.go2.com) (38.97.64.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 13:47:37 +0000
Received: from [10.0.1.4] ([75.82.49.1]) by mail.go2.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 5 Oct 2010 09:47:16 -0400
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Matching Documents BitSet
From: Jordon Saardchit <jsaardchit@go2.com>
In-Reply-To: <AANLkTinZHxkNRgncOhdu5L7mgX9jbmVqnSEG8t3WdMhO@mail.gmail.com>
Date: Tue, 5 Oct 2010 06:47:15 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <A127CF67-B79E-4BAB-B765-F994CF6DB552@go2.com>
References: <8087ADAB-DDF8-466D-9E8E-DC1827D580FA@go2.com> <AANLkTinZHxkNRgncOhdu5L7mgX9jbmVqnSEG8t3WdMhO@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-OriginalArrivalTime: 05 Oct 2010 13:47:16.0653 (UTC) FILETIME=[D29AEDD0:01CB6493]
X-Virus-Checked: Checked by ClamAV on apache.org

Filter.bits( IndexReader ).  These have since been deprecated and =
removed from the lucene API in 3.x.  I have figured out how to produce =
the equivalent in the latest version of the API.  Thanks though.

Jordon

On Oct 5, 2010, at 2:03 AM, Ian Lea wrote:

> How do you do this in 2.x?
>=20
>=20
> --
> Ian.
>=20
>=20
> On Mon, Oct 4, 2010 at 8:10 PM, Jordon Saardchit <jsaardchit@go2.com> =
wrote:
>> In lucene 3, is there an equivalent to obtaining a BitSet of =
documents from an Index as there was in version 2.x?  I'm trying to put =
together an upgrade path.
>>=20
>> Thanks!
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 15:12:44 2010
Return-Path: <java-user-return-47409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96977 invoked from network); 5 Oct 2010 15:12:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 15:12:44 -0000
Received: (qmail 15101 invoked by uid 500); 5 Oct 2010 15:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14248 invoked by uid 500); 5 Oct 2010 15:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14230 invoked by uid 99); 5 Oct 2010 15:12:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 15:12:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 15:12:31 +0000
Received: by fxm5 with SMTP id 5so5412658fxm.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 08:12:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7xwUhEVPf3p14lQnymhhMF/VahteiRvDRcchniyLkqY=;
        b=h3vvdzlQi/G42sXpBS1cGlZBsKM1Uc/C6jmNWT2oUv443efCyTDjEU4hcpaX9tFcu9
         mGIcWI7EuQuHuj9kY39b9KtJcf3GOMiRbatOJ0bMAFaEe8nrfNsOGMkUm5N9FqxiA73L
         YMlouROLULT8qT2+vgt0P5lGRms1DzIYq0q6Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=snQkpWt9uZphMTrqEQ1lfqdnCik5xwtVOXp/Z4v0Hed86iY226xztK4bHyMnaBtJKs
         TarxUFbxu6x6XA5Jb1mOU9SxQWTgTZBBx0C2ryeOCqPZsdC4kSJ5RFaKe1wN8Ky8vaFx
         fdRcIwZH2JNl4GMS0HopypZAFa1BNXY3VeBbA=
MIME-Version: 1.0
Received: by 10.103.24.20 with SMTP id b20mr3844623muj.81.1286291531131; Tue,
 05 Oct 2010 08:12:11 -0700 (PDT)
Received: by 10.220.184.167 with HTTP; Tue, 5 Oct 2010 08:12:10 -0700 (PDT)
In-Reply-To: <AANLkTi=pX7Kbu=o=0u2kHn+LQr2BayuNQn6=LPzxLDqj@mail.gmail.com>
References: <AANLkTimoLk=_YVs4wA1wbrMJsVyUKYLBu3md7XuMKgZK@mail.gmail.com>
	<AANLkTi=pX7Kbu=o=0u2kHn+LQr2BayuNQn6=LPzxLDqj@mail.gmail.com>
Date: Tue, 5 Oct 2010 16:12:10 +0100
Message-ID: <AANLkTika9pqhy8chnizdVz2fdW494bW6riOCYuYu353X@mail.gmail.com>
Subject: Re: Safely closing stale IndexReaders
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for your input Mike.

As far as I understand, your suggestion is to do something like this:

IndexSearcher searcher =3D searcherManager.get();
try {
  // do searching & rendering here=E2=80=A6
} finally {
  searcherManager.release(searcher) ;
}

The key bit: release(searcher) here calls IndexReader.decRef() which
in turn closes the index when necessary.

This approach has the same disadvantage of object pooling I have
mentioned in my original email. The "do searching & rendering" phase
might be split among many classes and/or frameworks (e.g. JSPs) and
wrapping all that in a single try/finally might be quite awkward.

What I was trying to achieve was some sort of automatic resource
management, similar to what java.lang.AutoCloseable brings with JDK 7.

It seems that the only possible way to do this is using the finalizer metho=
d.

m.

p.s. our office does own a copy of LIA.

On Tue, Oct 5, 2010 at 11:34 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Check out the SearcherManager class in Lucene in Action 2nd edition's
> source code. =C2=A0It's free for download at Manning's site
> (http://manning.com/lucene). =C2=A0NOTE: I am one of the co-authors.
>
> I think that class does exactly what you're seeking. =C2=A0It uses
> reference counts to ensure a reader is closed after all threads that
> are using it have completed, and handles reopen and warming of new
> readers.
>
> It also works both in near-real-time mode (you pass it an IndexWriter
> instance) or a non-NRT mode (using IndexReader.reopen).
>
> However, each thread must release the reader else the reader will
> never be closed.
>
> Mike
>
> 2010/10/5 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>> Hi,
>>
>> I am keeping a ConcurrentMap of o.a.l.index.IndexReader which I use in
>> my system. These readers are retrieved by multiple threads and I have
>> no knowledge when these readers are actively used and when not.
>>
>> When underlying index is updated, I reopen the reader and replace it in =
the map:
>>
>> IndexReader newReader =3D oldReader.reopen();
>> if (newReader !=3D oldReader) { =C2=A0// reader has been changed
>> =C2=A0map.replace(key, newReader);
>> }
>>
>> The problem with this is that old reader doesn't get closed which adds
>> to open file handle footprint. I cannot close oldReader immediately
>> after map.replace() as there might be some other threads actively
>> using it.
>>
>> One of solutions would be to use object pools. Each time IndexReader
>> is necessary, it would have to be borrowed from the pool and then
>> given back when done. This however has a disadvantage of massive
>> amount of scaffolding useless code and would still not guarantee that
>> all objects are given back safely as caller might forget to return the
>> object to the pool.
>>
>> Another solution is to use finalizers. This requires extending IndexRead=
er, e.g.
>>
>> class SelfClosingIndexReader extends IndexReader {
>> =C2=A0private final IndexReader delegate;
>> =C2=A0public SelfClosingIndexReader(IndexReader delegate) {
>> =C2=A0 =C2=A0this.delegate =3D delegate;
>> =C2=A0}
>>
>> =C2=A0public void anyPublicMethod() {
>> =C2=A0 =C2=A0delegate.anyPublicMethod();
>> =C2=A0}
>>
>> =C2=A0public void anyProtectedMethod() {
>> =C2=A0 =C2=A0delegate.anyProtectedMethod();
>> =C2=A0}
>>
>> =C2=A0protected void finalize() throws Throwable {
>> =C2=A0 =C2=A0try {
>> =C2=A0 =C2=A0 =C2=A0delegate.close();
>> =C2=A0 =C2=A0} finally {
>> =C2=A0 =C2=A0 =C2=A0super.finalize();
>> =C2=A0 =C2=A0}
>> =C2=A0}
>> }
>>
>> This solution works, but is utterly ugly:
>> - Finalizers are bad. I won't digress explaining why, just read Josh
>> Bloch's "Effective Java second edition" Item 7;
>> - IndexReader is an abstract class, not an interface -- this means I
>> have to override every single public and protected method, otherwise
>> this will fail. Moreover, it is very very slippery: if I upgrade to a
>> newer Lucene version, I have to carefully go through every single
>> method to ensure there are no new ones which I have to
>> override/un-override.
>>
>> A better solution would be to use WeakReferences. However there is no
>> inner purposed object (e.g. Reader) of IndexReader that could be
>> referenced strongly and used for .close() upon polling relevant
>> reference queue. Extending WeakReference and keeping hard reference to
>> IndexReader inside it simply prevents whole object from being
>> reclaimed (or there's something I don't understand about
>> WeakReferences).
>>
>> I was wondering if anybody has been in a similar situation and solved
>> this. Thanks in advance.
>>
>> m.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 16:01:21 2010
Return-Path: <java-user-return-47410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13903 invoked from network); 5 Oct 2010 16:01:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 16:01:20 -0000
Received: (qmail 88623 invoked by uid 500); 5 Oct 2010 16:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88542 invoked by uid 500); 5 Oct 2010 16:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88534 invoked by uid 99); 5 Oct 2010 16:01:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 16:01:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 16:01:09 +0000
Received: by wwb22 with SMTP id 22so4753208wwb.5
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 09:00:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.158.7 with SMTP id p7mr9376528wek.58.1286294448807; Tue,
 05 Oct 2010 09:00:48 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Tue, 5 Oct 2010 09:00:48 -0700 (PDT)
In-Reply-To: <AANLkTika9pqhy8chnizdVz2fdW494bW6riOCYuYu353X@mail.gmail.com>
References: <AANLkTimoLk=_YVs4wA1wbrMJsVyUKYLBu3md7XuMKgZK@mail.gmail.com>
	<AANLkTi=pX7Kbu=o=0u2kHn+LQr2BayuNQn6=LPzxLDqj@mail.gmail.com>
	<AANLkTika9pqhy8chnizdVz2fdW494bW6riOCYuYu353X@mail.gmail.com>
Date: Tue, 5 Oct 2010 12:00:48 -0400
Message-ID: <AANLkTim0BntBMw8CvnqLQtGCsYVegd6t4vqZM4gg0x_F@mail.gmail.com>
Subject: Re: Safely closing stale IndexReaders
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2010/10/5 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:

> The key bit: release(searcher) here calls IndexReader.decRef() which
> in turn closes the index when necessary.

Ahh yes.

> This approach has the same disadvantage of object pooling I have
> mentioned in my original email. The "do searching & rendering" phase
> might be split among many classes and/or frameworks (e.g. JSPs) and
> wrapping all that in a single try/finally might be quite awkward.

OK.

> What I was trying to achieve was some sort of automatic resource
> management, similar to what java.lang.AutoCloseable brings with JDK 7.
>
> It seems that the only possible way to do this is using the finalizer met=
hod.

Yeah, icky.

> p.s. our office does own a copy of LIA.

Nice, thanks!!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 18:09:55 2010
Return-Path: <java-user-return-47411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66404 invoked from network); 5 Oct 2010 18:09:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 18:09:55 -0000
Received: (qmail 62311 invoked by uid 500); 5 Oct 2010 18:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62232 invoked by uid 500); 5 Oct 2010 18:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62083 invoked by uid 99); 5 Oct 2010 18:09:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 18:09:52 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zching01@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 18:09:47 +0000
Received: by fxm5 with SMTP id 5so5643427fxm.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 11:09:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type;
        bh=JWRSP8gVJL9bPWmqaKVImRVSEWlU+2VNh8DuG8ZEo9Y=;
        b=JuONgPfz/o6UP0CjD3z1kCX1MbQ1A7kDXFWRwGNboo4n8Phf1khm1xW1UNXpKH+IHt
         pUZVTrjXaGbqtOkik55pxdIsa8WXUWl/I11QlXZhpzBxEtCcVcdnRYsTHCTyoyw8lOSh
         6LSfRJ4Gw/3qyaKVYWPq+GPyGqNehVcx65AaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=pU+1DqDagNIjwU+kQnxI/dQWOUagDjh5rZO9eVEtR9ERwGt2rPyTQfW5jyc67QCXA1
         6KzOkvKS3K8jZthTlQ/QvpZHdS5r2kh6aUsDbsHi2imeT96dFCNy9rNIIUbbT0RW6CHm
         dmufmHHCUZjt6c2wEOfP0grUmA4D7iyJI9dDA=
MIME-Version: 1.0
Received: by 10.223.126.65 with SMTP id b1mr11232216fas.44.1286302165891; Tue,
 05 Oct 2010 11:09:25 -0700 (PDT)
Received: by 10.223.107.133 with HTTP; Tue, 5 Oct 2010 11:09:25 -0700 (PDT)
In-Reply-To: <1286223617.15807.41.camel@greenlantern.local>
References: <1286165587.15807.7.camel@greenlantern.local>
	<003b01cb6388$c8979330$59c6b990$@thetaphi.de>
	<1286223617.15807.41.camel@greenlantern.local>
Date: Tue, 5 Oct 2010 12:09:25 -0600
Message-ID: <AANLkTinzWohO1BLpHsywquKkHA1q5t-orzFX-W3NLNY2@mail.gmail.com>
Subject: Re: Numeric range query not returning results
From: Ching <zching01@gmail.com>
To: java-user@lucene.apache.org, todd@spidertracks.co.nz
Cc: Uwe Schindler <uwe@thetaphi.de>
Content-Type: multipart/alternative; boundary=0016e6d77ec9abfcd40491e28fde

--0016e6d77ec9abfcd40491e28fde
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

More problem with NumericRangeQuery when combined it with BooleanQuery. Her=
e
are the problem, please help.

1. I have a field of Date that is indexed as long
2. In the search, I need to exclude some time period, I used the
BooleanQuery to combined those excluded time periods like below,
BooleanQuery excludeQ =3D new BooleanQuery();
NumericRangeQuery<Long> rangeQuery =3D
NumericRangeQuery.newLongRange(FIELD_SRC_DATE, datelower, dateUpper, true,
true);
excludeQ.add(rangeQuery, BooleanClause.Occur.MUST_NOT);

3. After perform the search using above query, it always returns nothing.

Thanks for any help or light to the tunnel.



On Mon, Oct 4, 2010 at 2:20 PM, Todd Nine <todd@spidertracks.co.nz> wrote:

> Hi Uwe,
>  My example wasn't very clear, as I have a load of other code in my
> actual implementation and I was trying to cut it down for clarity.  This
> is actually my indexing service for my Datanucleus Cassandra plugin, so
> I have a 1 to 1 relationship where a single document corresponds to a
> Persistent object.  I actually create 5 separate documents, and I would
> expect 3 of those to be returned.  I've ported your entire set of tests
> for 32 and 64 bit numeric range tests over, and it unfortunately appears
> that Lucandra is still very broken in terms of numeric ranges even after
> the Cassandra encoding fix for the 7bit shift into UTF 8 characters.
> I'll hopefully be able to solve the bugs in the next few days.  Thanks
> again for your help, it's always appreciated.
>
> Todd
>
>
>
>
> On Mon, 2010-10-04 at 07:55 +0200, Uwe Schindler wrote:
> > This test works perfectly and returns 1 doucment:
> >
> >
> >
> >   public void testToddNine() throws Exception {
> >
> >     RAMDirectory directory =3D new RAMDirectory();
> >
> >     IndexWriter writer =3D new IndexWriter(directory, new
> > WhitespaceAnalyzer(), true, MaxFieldLength.UNLIMITED);
> >
> >     try {
> >
> >       Document doc =3D new Document();
> >
> >       doc.add(new
> > NumericField("LastLogin").setLongValue(1282197146L));
> >
> >       writer.addDocument(doc);
> >
> >       doc =3D new Document();
> >
> >       doc.add(new
> > NumericField("LastLogin").setLongValue(1282197946L));
> >
> >       writer.addDocument(doc);
> >
> >     } finally {
> >
> >       writer.close();
> >
> >     }
> >
> >
> >
> >     NumericRangeQuery<Long> rangeQuery =3D
> >
> >       NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > 1282197146L, true, true);
> >
> >
> >
> >     IndexReader reader =3D IndexReader.open(directory, true);
> >
> >     try {
> >
> >       IndexSearcher searcher =3D new IndexSearcher(reader);
> >
> >       TopDocs docs =3D searcher.search(rangeQuery, 1000);
> >
> >       assertEquals(1,docs.totalHits);
> >
> >     } finally {
> >
> >       reader.close();
> >
> >     }
> >
> >   }
> >
> >
> >
> > Maybe you have the following problems:
> >
> > -          Are you executing the same query than created. In your
> > example code the searcher executed =93query=94 but the range query was
> > =93rangeQuery=94 variable name
> >
> > -          Are you sure that your document is not returned, but you
> > miss some stored fields? E.g. the default NumericField ctor does not
> > create the field as =93stored=94 to the document?
> >
> >
> >
> > public NumericField(String name)
> >
> > Creates a field for numeric values using the default precisionStep
> > NumericUtils.PRECISION_STEP_DEFAULT (4). The instance is not yet
> > initialized with a numeric value, before indexing a document
> > containing this field, set a value using the various set???Value()
> > methods. This constructor creates an indexed, but not stored field.
> >
> >
> >
> > Uwe
> >
> >
> >
> > -----
> >
> > Uwe Schindler
> >
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> >
> > http://www.thetaphi.de
> >
> > eMail: uwe@thetaphi.de
> >
> >
> >
> >
> >
> > > -----Original Message-----
> >
> > > From: Todd Nine [mailto:todd@spidertracks.co.nz]
> >
> > > Sent: Monday, October 04, 2010 6:13 AM
> >
> > > To: java-user@lucene.apache.org
> >
> > > Subject: Numeric range query not returning results
> >
> > >
> >
> > > Hi all,
> >
> > >   I'm having some issues with Numeric Range queries not working as
> > expected.
> >
> > > My underlying storage medium is the Lucandra index reader and
> > writer, so I'm
> >
> > > not sure if this is an issue within Lucandra or with my usage of
> > numeric field.
> >
> > > My numeric range tests that are copies of Uwe's pass in the
> > Lucandra, source,
> >
> > > so I have a feeling it's my usage.  I have a simple test case, with
> > 5 people.  I
> >
> > > have a Date field, the LastLogin field.  This date is converted to
> > epoch
> >
> > > milliseconds, and stored in the index in the following way.
> >
> > >
> >
> > > NumericField numeric =3D new NumericField("LastLogin");
> >
> > > numeric.setLongValue(fieldValue); doc.add(numeric);
> >
> > >
> >
> > > Where I have the following 2 field values on 2 documents.
> >
> > >
> >
> > > 1282197146L and 1282197946L
> >
> > >
> >
> > > I then perform the following query.
> >
> > >
> >
> > > NumericRangeQuery rangeQuery =3D
> >
> > > NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > 1282197146L,
> >
> > > true, true);
> >
> > >
> >
> > > IndexReader reader =3D new IndexReader(columnFamily,
> >
> > >
> > getContext(conn));
> >
> > >
> > IndexSearcher searcher =3D new
> >
> > > IndexSearcher(reader);
> >
> > >
> >
> > >                                                            TopDocs
> > docs =3D searcher.search(query,
> >
> > > maxResults);
> >
> > >
> >
> > >
> > List<Document> documents =3D new
> >
> > > ArrayList<Document>(
> >
> > >
> > docs.totalHits);
> >
> > >
> >
> > >
> > Set<String> fields =3D new HashSet<String>();
> >
> > >
> > fields.add(IndexDocument.ROWKEY);
> >
> > >
> > fields.add(IndexDocument.IDSERIALIZED);
> >
> > >
> >
> > >
> > SetBasedFieldSelector selector =3D new
> >
> > > SetBasedFieldSelector(
> >
> > >
> > fields, null);
> >
> > >
> >
> > >                                                            for
> > (ScoreDoc score : docs.scoreDocs) {
> >
> > >
> >
> > >             documents.add(reader.document(score.doc, selector));
> >
> > >                                                            }
> >
> > >
> >
> > >                                                            return
> > documents;
> >
> > >
> >
> > > I'm always getting 0 documents.  I know this is incorrect, I can see
> > the values
> >
> > > getting written to Cassandra when I run it in debug mode.  Is this
> > an issue with
> >
> > > precision step, or an issue with the Lucandra index reader
> > implementation?
> >
> > >
> >
> > > Thanks,
> >
> > > Todd
> >
> >
>

--0016e6d77ec9abfcd40491e28fde--

From java-user-return-47412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 20:41:06 2010
Return-Path: <java-user-return-47412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73240 invoked from network); 5 Oct 2010 20:41:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 20:41:05 -0000
Received: (qmail 21065 invoked by uid 500); 5 Oct 2010 20:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20969 invoked by uid 500); 5 Oct 2010 20:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20961 invoked by uid 99); 5 Oct 2010 20:41:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 20:41:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 20:40:56 +0000
Received: by qwk3 with SMTP id 3so5173225qwk.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 13:40:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=/fzfAe2OP0YcO4HHRndVuen0L6JMdQsr1V3R0sX5Ah4=;
        b=pEp1G6tJTJQD2YE8gOZniSvtBQdjHC/RiggYkbBVKTnbrKNxamnCIRzSnh10804uS5
         c7kIsT9cLPKn6C6qF5Sk6+2OSyDFtkuI+bbCZXGM2yDoU36wST2zW1XFqnevl6D8Mz+x
         ClAAW12pleb7tC8+whflzJgX1dzL9MF+H1VCM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DrdJjUkl5ikuFaOtzFP7Oyn+RlwwOHtT2exbU9wjgeSMCKLd33RcAeHUf7rqiW/fW/
         +sRRZNQHDRBJp9ftdgcviUvG65rdJjWgQ4rRVylHuC8lTmi5dAOmFs1YvcKJfnVZUTrG
         kXFQVPA3l0mTmCcQ5/CJ2xuz5eWAyR1qwIHLs=
MIME-Version: 1.0
Received: by 10.224.36.132 with SMTP id t4mr783070qad.72.1286311231627; Tue,
 05 Oct 2010 13:40:31 -0700 (PDT)
Received: by 10.229.218.76 with HTTP; Tue, 5 Oct 2010 13:40:31 -0700 (PDT)
Date: Tue, 5 Oct 2010 22:40:31 +0200
Message-ID: <AANLkTi=QcJ5fhLE-p5DwOz6KAw=zieetVsDxE=c-t55E@mail.gmail.com>
Subject: Different analyzer on a different field
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f99dfd70827230491e4aca1

--00c09f99dfd70827230491e4aca1
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Is it possible to use WhitespaceAnalyzer in one field and another analyzer
in a differnt field?
If it is, how should it be written?

Many Thanks,
Liat

--00c09f99dfd70827230491e4aca1--

From java-user-return-47413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 20:46:46 2010
Return-Path: <java-user-return-47413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77065 invoked from network); 5 Oct 2010 20:46:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 20:46:44 -0000
Received: (qmail 35951 invoked by uid 500); 5 Oct 2010 20:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35889 invoked by uid 500); 5 Oct 2010 20:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35881 invoked by uid 99); 5 Oct 2010 20:46:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 20:46:41 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 20:46:34 +0000
Received: by qyk33 with SMTP id 33so1429047qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 13:46:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=8lOyAnpG3glgMVIC8JnhuSizrh15GRUFT/yfClU31zw=;
        b=lq4eCT5GM46h5/9afnyooI+3zUgeA2Q830wFhmmVjWxzl7vmQx6a22iv2YLLji1yAz
         6Ro3DecoVJVKhxKW70mkn2ToaWf/6sCrEtdFXqIRNRwJRhTXOvMl3RgeHtM/zVeuKz/D
         JVox51F/toVn2uNGuqL2M356OPNALawCgjERA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=EIayGbk9NWTptNSCyq38A+A3PhRvdH5USvsD3/2M812um6ewCL4+A+x1UnQusMWcSW
         /T/iGAniSBOJPBYABH//OE3TUpIuy33cQm4JC1/sDNba3LKUr6S1MZ+J49lUV0wBUz3u
         R3fFrZO0aUi1HtmLlxiiQfaU+OdapTGydOYQY=
Received: by 10.224.69.14 with SMTP id x14mr8653163qai.212.1286311573403; Tue,
 05 Oct 2010 13:46:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.99.204 with HTTP; Tue, 5 Oct 2010 13:45:53 -0700 (PDT)
In-Reply-To: <AANLkTi=QcJ5fhLE-p5DwOz6KAw=zieetVsDxE=c-t55E@mail.gmail.com>
References: <AANLkTi=QcJ5fhLE-p5DwOz6KAw=zieetVsDxE=c-t55E@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Oct 2010 21:45:53 +0100
Message-ID: <AANLkTikE9B-tNt2+PL43Dws9_FG-NvtQozV6He1pY1uG@mail.gmail.com>
Subject: Re: Different analyzer on a different field
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

org.apache.lucene.analysis.PerFieldAnalyzerWrapper

--
Ian.

On Tue, Oct 5, 2010 at 9:40 PM, liat oren <oren.liat@gmail.com> wrote:
> Hi,
>
> Is it possible to use WhitespaceAnalyzer in one field and another analyzer
> in a differnt field?
> If it is, how should it be written?
>
> Many Thanks,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 22:27:26 2010
Return-Path: <java-user-return-47414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26138 invoked from network); 5 Oct 2010 22:27:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 22:27:25 -0000
Received: (qmail 50451 invoked by uid 500); 5 Oct 2010 22:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50375 invoked by uid 500); 5 Oct 2010 22:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50359 invoked by uid 99); 5 Oct 2010 22:27:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 22:27:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.236] (HELO nm7-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.236)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Oct 2010 22:27:13 +0000
Received: from [217.146.183.181] by nm7.bullet.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 22:26:51 -0000
Received: from [217.146.183.74] by tm12.bullet.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 22:26:51 -0000
Received: from [127.0.0.1] by omp1035.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 22:26:49 -0000
X-Yahoo-Newman-Id: 10811.91636.bm@omp1035.mail.ukl.yahoo.com
Received: (qmail 53426 invoked from network); 5 Oct 2010 17:13:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:From:Content-Type:Content-Transfer-Encoding:Subject:Date:Message-Id:To:Mime-Version:X-Mailer;
  b=ATP/UYelPLqv0MKgqsGqVTLXeSf+GYD9UtUeSBX/RUnCP8/HIHThpvV+SEFavQVNI2ezc4A5kpevZlf0M5J/Xbp/1HCZCbjkN/N3WG7O7Wy9OzDIkmksj23z+BaTi7oz0aZZKTElQg/3bcRkFtUAYnPe2fAbJFhkHQaAdbR8HuI=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1286298801; bh=xYIPrnBjpaYYYUmfH8R+FQO5NCINcKr0zvWUxeCKRg0=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:From:Content-Type:Content-Transfer-Encoding:Subject:Date:Message-Id:To:Mime-Version:X-Mailer; b=gO6TDUSDpRY5o73PKwag6uesw6dcSezo6CrRhca+xyrsTWsOfdIz3E56CyzAHlouLMkm55faall+N3+cB8ZOgXgwnA7e10S/RVasRm16xNxYWt/kPXM+Fz36JDZqzFEET3l7AdBTFa6gEvhgKzCTwNPBrHyInC04fasol8y9QeU=
Received: from [192.168.2.50] (markharw00d@194.106.34.5 with plain)
        by smtp142.mail.ukl.yahoo.com with SMTP; 05 Oct 2010 17:13:21 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: cAcZqoYVM1nvAbyYH3kz9RLRJhylprDTaDVxbrV_bLMGFMr
 euw2arYRZhY4Cewa4CJf4lsDAJdvjlJC8C8yqO_AZ.xKtHMfummmhQJP8..h
 mZOcFuSGriOBbrHr4vnwQV7PksQ1NL7o1.B_JiIcRySdV1iBYxT8vpZmlUFO
 kEW0uY1RPIpRj4heXV0Xdpt_bnevY.O3u1q.HhTewWHK1JcKeMsG0a_pfrso
 DNORkmVejEr7t8hdPdG3cFrhobzCw
X-Yahoo-Newman-Property: ymail-3
From: Mark Harwood <markharw00d@yahoo.co.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Merge and commit behaviour - changed between 2.4 and 2.9?
Date: Tue, 5 Oct 2010 18:13:20 +0100
Message-Id: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Having upgraded a live system from 2.4 to 2.9.3 the client is reporting =
a change in merge behaviour that is causing some issues with their =
update monitoring logic.

The suggestion is that any merge operations now complete as part of the =
IW.prepareCommit() call rather than previously when they ran in the =
background after IW.commit calls.
This seems to make sense to me but I couldn't see any direct reference =
to this change in behaviour in changes.txt.

Can anyone confirm this change between versions?

Cheers,
Mark=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 22:32:33 2010
Return-Path: <java-user-return-47415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27533 invoked from network); 5 Oct 2010 22:32:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 22:32:33 -0000
Received: (qmail 58213 invoked by uid 500); 5 Oct 2010 22:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58165 invoked by uid 500); 5 Oct 2010 22:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58157 invoked by uid 99); 5 Oct 2010 22:32:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 22:32:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 22:32:24 +0000
Received: by wwb13 with SMTP id 13so150603wwb.5
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 15:32:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.231.97 with SMTP id k75mr9893296weq.4.1286317917707; Tue,
 05 Oct 2010 15:31:57 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Tue, 5 Oct 2010 15:31:57 -0700 (PDT)
In-Reply-To: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk>
References: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk>
Date: Tue, 5 Oct 2010 18:31:57 -0400
Message-ID: <AANLkTimCw3nhmR-49yd=qSizcWHNXm0mwPNKakb3ukuF@mail.gmail.com>
Subject: Re: Merge and commit behaviour - changed between 2.4 and 2.9?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hmm that shouldn't be the case, I think?

In both 2.4 and 2.9.x (and all later versions), neither .prepareCommit
nor .commit wait for merges.

That said, if a merge happens to complete before you call those
methods, then it is in fact committed.

Mike

On Tue, Oct 5, 2010 at 1:13 PM, Mark Harwood <markharw00d@yahoo.co.uk> wrote:
> Having upgraded a live system from 2.4 to 2.9.3 the client is reporting a change in merge behaviour that is causing some issues with their update monitoring logic.
>
> The suggestion is that any merge operations now complete as part of the IW.prepareCommit() call rather than previously when they ran in the background after IW.commit calls.
> This seems to make sense to me but I couldn't see any direct reference to this change in behaviour in changes.txt.
>
> Can anyone confirm this change between versions?
>
> Cheers,
> Mark
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 22:54:19 2010
Return-Path: <java-user-return-47416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36615 invoked from network); 5 Oct 2010 22:54:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 22:54:18 -0000
Received: (qmail 92813 invoked by uid 500); 5 Oct 2010 22:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92728 invoked by uid 500); 5 Oct 2010 22:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92720 invoked by uid 99); 5 Oct 2010 22:54:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 22:54:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 22:54:09 +0000
Received: by qyk33 with SMTP id 33so4350449qyk.14
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 15:53:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=hqrdlVE6ILeyeaBwBHlWfnNUXCXqf4xwMjsAvSqdXXU=;
        b=CQMoyTnSaNhPbUulGsurjBHY13ti5L15QqLWU77sxbQCaQxa6eOQA6V/pjds/BoA1s
         nRW3E5tuQ+AXUYJ8BVaU4vH21LSdwLruUNrg/s6gBKo+JWYiJ/RzYJRRCeauRxd2bA7X
         nHfOSo/V442aVF5oF4/VvYCwZxzdeoMrTtjPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ngAVutaK5Bzh1OxX/yl9TRglUNmRfQ0qx3fBa7QTQ+wsVH8AgXhbXgoCW+E4fPNaq6
         AtEmDY4kbwWavf2Ch0dOJPnmO3Bi/ADaLAZ5NY6wRubll1CZjZOs6JEjzTgTycPXfOCc
         sPYRiPZimuXvIaIWWe9VOaZuxRyuAsENuFh8c=
MIME-Version: 1.0
Received: by 10.220.201.71 with SMTP id ez7mr407743vcb.232.1286319224842; Tue,
 05 Oct 2010 15:53:44 -0700 (PDT)
Received: by 10.220.178.200 with HTTP; Tue, 5 Oct 2010 15:53:44 -0700 (PDT)
In-Reply-To: <AANLkTinzWohO1BLpHsywquKkHA1q5t-orzFX-W3NLNY2@mail.gmail.com>
References: <1286165587.15807.7.camel@greenlantern.local>
	<003b01cb6388$c8979330$59c6b990$@thetaphi.de>
	<1286223617.15807.41.camel@greenlantern.local>
	<AANLkTinzWohO1BLpHsywquKkHA1q5t-orzFX-W3NLNY2@mail.gmail.com>
Date: Tue, 5 Oct 2010 18:53:44 -0400
Message-ID: <AANLkTik6ReuAhGpcsMa0UFmdPYDX+8q=gw89iWTZsaLq@mail.gmail.com>
Subject: Re: Numeric range query not returning results
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba53a3c876ebfe0491e688b4
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba53a3c876ebfe0491e688b4
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Lucene doesn't (as far as I know) support pure negative queries. Have
you tried adding the MatchAllDocsQuery to your BQ? See:
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/MatchAllDo=
csQuery.html

<http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/MatchAllD=
ocsQuery.html>
HTH
Erick

On Tue, Oct 5, 2010 at 2:09 PM, Ching <zching01@gmail.com> wrote:

> More problem with NumericRangeQuery when combined it with BooleanQuery.
> Here
> are the problem, please help.
>
> 1. I have a field of Date that is indexed as long
> 2. In the search, I need to exclude some time period, I used the
> BooleanQuery to combined those excluded time periods like below,
> BooleanQuery excludeQ =3D new BooleanQuery();
> NumericRangeQuery<Long> rangeQuery =3D
> NumericRangeQuery.newLongRange(FIELD_SRC_DATE, datelower, dateUpper, true=
,
> true);
> excludeQ.add(rangeQuery, BooleanClause.Occur.MUST_NOT);
>
> 3. After perform the search using above query, it always returns nothing.
>
> Thanks for any help or light to the tunnel.
>
>
>
> On Mon, Oct 4, 2010 at 2:20 PM, Todd Nine <todd@spidertracks.co.nz> wrote=
:
>
> > Hi Uwe,
> >  My example wasn't very clear, as I have a load of other code in my
> > actual implementation and I was trying to cut it down for clarity.  Thi=
s
> > is actually my indexing service for my Datanucleus Cassandra plugin, so
> > I have a 1 to 1 relationship where a single document corresponds to a
> > Persistent object.  I actually create 5 separate documents, and I would
> > expect 3 of those to be returned.  I've ported your entire set of tests
> > for 32 and 64 bit numeric range tests over, and it unfortunately appear=
s
> > that Lucandra is still very broken in terms of numeric ranges even afte=
r
> > the Cassandra encoding fix for the 7bit shift into UTF 8 characters.
> > I'll hopefully be able to solve the bugs in the next few days.  Thanks
> > again for your help, it's always appreciated.
> >
> > Todd
> >
> >
> >
> >
> > On Mon, 2010-10-04 at 07:55 +0200, Uwe Schindler wrote:
> > > This test works perfectly and returns 1 doucment:
> > >
> > >
> > >
> > >   public void testToddNine() throws Exception {
> > >
> > >     RAMDirectory directory =3D new RAMDirectory();
> > >
> > >     IndexWriter writer =3D new IndexWriter(directory, new
> > > WhitespaceAnalyzer(), true, MaxFieldLength.UNLIMITED);
> > >
> > >     try {
> > >
> > >       Document doc =3D new Document();
> > >
> > >       doc.add(new
> > > NumericField("LastLogin").setLongValue(1282197146L));
> > >
> > >       writer.addDocument(doc);
> > >
> > >       doc =3D new Document();
> > >
> > >       doc.add(new
> > > NumericField("LastLogin").setLongValue(1282197946L));
> > >
> > >       writer.addDocument(doc);
> > >
> > >     } finally {
> > >
> > >       writer.close();
> > >
> > >     }
> > >
> > >
> > >
> > >     NumericRangeQuery<Long> rangeQuery =3D
> > >
> > >       NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > > 1282197146L, true, true);
> > >
> > >
> > >
> > >     IndexReader reader =3D IndexReader.open(directory, true);
> > >
> > >     try {
> > >
> > >       IndexSearcher searcher =3D new IndexSearcher(reader);
> > >
> > >       TopDocs docs =3D searcher.search(rangeQuery, 1000);
> > >
> > >       assertEquals(1,docs.totalHits);
> > >
> > >     } finally {
> > >
> > >       reader.close();
> > >
> > >     }
> > >
> > >   }
> > >
> > >
> > >
> > > Maybe you have the following problems:
> > >
> > > -          Are you executing the same query than created. In your
> > > example code the searcher executed =93query=94 but the range query wa=
s
> > > =93rangeQuery=94 variable name
> > >
> > > -          Are you sure that your document is not returned, but you
> > > miss some stored fields? E.g. the default NumericField ctor does not
> > > create the field as =93stored=94 to the document?
> > >
> > >
> > >
> > > public NumericField(String name)
> > >
> > > Creates a field for numeric values using the default precisionStep
> > > NumericUtils.PRECISION_STEP_DEFAULT (4). The instance is not yet
> > > initialized with a numeric value, before indexing a document
> > > containing this field, set a value using the various set???Value()
> > > methods. This constructor creates an indexed, but not stored field.
> > >
> > >
> > >
> > > Uwe
> > >
> > >
> > >
> > > -----
> > >
> > > Uwe Schindler
> > >
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > >
> > > http://www.thetaphi.de
> > >
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > >
> > >
> > >
> > > > -----Original Message-----
> > >
> > > > From: Todd Nine [mailto:todd@spidertracks.co.nz]
> > >
> > > > Sent: Monday, October 04, 2010 6:13 AM
> > >
> > > > To: java-user@lucene.apache.org
> > >
> > > > Subject: Numeric range query not returning results
> > >
> > > >
> > >
> > > > Hi all,
> > >
> > > >   I'm having some issues with Numeric Range queries not working as
> > > expected.
> > >
> > > > My underlying storage medium is the Lucandra index reader and
> > > writer, so I'm
> > >
> > > > not sure if this is an issue within Lucandra or with my usage of
> > > numeric field.
> > >
> > > > My numeric range tests that are copies of Uwe's pass in the
> > > Lucandra, source,
> > >
> > > > so I have a feeling it's my usage.  I have a simple test case, with
> > > 5 people.  I
> > >
> > > > have a Date field, the LastLogin field.  This date is converted to
> > > epoch
> > >
> > > > milliseconds, and stored in the index in the following way.
> > >
> > > >
> > >
> > > > NumericField numeric =3D new NumericField("LastLogin");
> > >
> > > > numeric.setLongValue(fieldValue); doc.add(numeric);
> > >
> > > >
> > >
> > > > Where I have the following 2 field values on 2 documents.
> > >
> > > >
> > >
> > > > 1282197146L and 1282197946L
> > >
> > > >
> > >
> > > > I then perform the following query.
> > >
> > > >
> > >
> > > > NumericRangeQuery rangeQuery =3D
> > >
> > > > NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > > 1282197146L,
> > >
> > > > true, true);
> > >
> > > >
> > >
> > > > IndexReader reader =3D new IndexReader(columnFamily,
> > >
> > > >
> > > getContext(conn));
> > >
> > > >
> > > IndexSearcher searcher =3D new
> > >
> > > > IndexSearcher(reader);
> > >
> > > >
> > >
> > > >                                                            TopDocs
> > > docs =3D searcher.search(query,
> > >
> > > > maxResults);
> > >
> > > >
> > >
> > > >
> > > List<Document> documents =3D new
> > >
> > > > ArrayList<Document>(
> > >
> > > >
> > > docs.totalHits);
> > >
> > > >
> > >
> > > >
> > > Set<String> fields =3D new HashSet<String>();
> > >
> > > >
> > > fields.add(IndexDocument.ROWKEY);
> > >
> > > >
> > > fields.add(IndexDocument.IDSERIALIZED);
> > >
> > > >
> > >
> > > >
> > > SetBasedFieldSelector selector =3D new
> > >
> > > > SetBasedFieldSelector(
> > >
> > > >
> > > fields, null);
> > >
> > > >
> > >
> > > >                                                            for
> > > (ScoreDoc score : docs.scoreDocs) {
> > >
> > > >
> > >
> > > >             documents.add(reader.document(score.doc, selector));
> > >
> > > >                                                            }
> > >
> > > >
> > >
> > > >                                                            return
> > > documents;
> > >
> > > >
> > >
> > > > I'm always getting 0 documents.  I know this is incorrect, I can se=
e
> > > the values
> > >
> > > > getting written to Cassandra when I run it in debug mode.  Is this
> > > an issue with
> > >
> > > > precision step, or an issue with the Lucandra index reader
> > > implementation?
> > >
> > > >
> > >
> > > > Thanks,
> > >
> > > > Todd
> > >
> > >
> >
>

--90e6ba53a3c876ebfe0491e688b4--

From java-user-return-47417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 23:12:23 2010
Return-Path: <java-user-return-47417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45889 invoked from network); 5 Oct 2010 23:12:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 23:12:23 -0000
Received: (qmail 11802 invoked by uid 500); 5 Oct 2010 23:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11741 invoked by uid 500); 5 Oct 2010 23:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11733 invoked by uid 99); 5 Oct 2010 23:12:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 23:12:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.225] (HELO nm4.bullet.mail.ukl.yahoo.com) (217.146.182.225)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Oct 2010 23:12:10 +0000
Received: from [217.146.183.180] by nm4.bullet.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 23:11:49 -0000
Received: from [217.146.183.32] by tm11.bullet.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 23:11:48 -0000
Received: from [127.0.0.1] by omp1021.mail.ukl.yahoo.com with NNFMP; 05 Oct 2010 23:11:48 -0000
X-Yahoo-Newman-Id: 194837.92688.bm@omp1021.mail.ukl.yahoo.com
Received: (qmail 57554 invoked from network); 5 Oct 2010 22:45:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=0v4TbI8DoyZT00mEApNRZF5e1QxV40lhPcPq21R88qRRuNx+qVxIEdbA6zYXLfn2FIEUNPmy//BA76ky4TmR8n8m5/IZKxumolFIemsJsYb/NgkWPUGXKxL9ec+DRVdQZwVhxfJ0WkNcUoSgILcnOhJf750BXQd6hJSbISVGibQ=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1286318708; bh=zaJsdfcubxQ59gZEWchjS+mmmLldFRVxkT/Q0B6BXzg=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer; b=EkFN2FMRtv87mcQgDMLbIbke3N2jZsoHxJHR0N6hMnn1Pvm615Q39LIeUCJZACKAmVwwy7h73eVwn95oGp5tp8H9ykTfnac5J4smfPPSyOf3Rp8pv3ipnpNGASPlAn1nMHwBBKSb/fEf74EjvDyjdyBiQUDUD/EbVQI4v+eEnJo=
Received: from [192.168.2.50] (markharw00d@194.106.34.5 with plain)
        by smtp149.mail.ukl.yahoo.com with SMTP; 05 Oct 2010 22:45:08 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: xyeObMwVM1kxhxMciQ6iZhjSdPOYIrWetMU98duit9wwwyu
 YnqWxaNRoxOBlGewPTOpml_rkEACNVS0YSQ76FtEVbyTwDFy.y4vmBvk.UUg
 JRdjpc5u2jgZqBJfSChIT6u.twEwrZpy0EvBDg1UT01ILHNHjR96jLMzg.65
 9sVYBNIDsvACr7mRxCucJ11dTEK.l8CgM.IQaPG6MyozvpjD9COLWHvYPseL
 MJMTikWBZPBHVW.Ikgp1EfSQy1nQUasSuj9NJSjbhyctBzPVuDGr96qvKY2M
 iMw--
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Merge and commit behaviour - changed between 2.4 and 2.9?
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <AANLkTimCw3nhmR-49yd=qSizcWHNXm0mwPNKakb3ukuF@mail.gmail.com>
Date: Tue, 5 Oct 2010 23:45:07 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <1A036B25-5CE4-4205-B920-B97565A55C9D@yahoo.co.uk>
References: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk> <AANLkTimCw3nhmR-49yd=qSizcWHNXm0mwPNKakb3ukuF@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

OK. I'll double check the reports.=20
So presumably when merges occur outside of transaction control (post =
commit) the post-merge update of the segments_N file is managed safely =
somehow?
I can see the logic in continuing file changes outside of transaction =
control because the document updates are safely committed (flushed as =
new segments) and the merges are essentially just a background tidying =
of committed state that can fail with no detrimental effect on the =
previous transaction.


On 5 Oct 2010, at 23:31, Michael McCandless wrote:

> Hmm that shouldn't be the case, I think?
>=20
> In both 2.4 and 2.9.x (and all later versions), neither .prepareCommit
> nor .commit wait for merges.
>=20
> That said, if a merge happens to complete before you call those
> methods, then it is in fact committed.
>=20
> Mike
>=20
> On Tue, Oct 5, 2010 at 1:13 PM, Mark Harwood <markharw00d@yahoo.co.uk> =
wrote:
>> Having upgraded a live system from 2.4 to 2.9.3 the client is =
reporting a change in merge behaviour that is causing some issues with =
their update monitoring logic.
>>=20
>> The suggestion is that any merge operations now complete as part of =
the IW.prepareCommit() call rather than previously when they ran in the =
background after IW.commit calls.
>> This seems to make sense to me but I couldn't see any direct =
reference to this change in behaviour in changes.txt.
>>=20
>> Can anyone confirm this change between versions?
>>=20
>> Cheers,
>> Mark
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 05 23:18:51 2010
Return-Path: <java-user-return-47418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46777 invoked from network); 5 Oct 2010 23:18:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Oct 2010 23:18:51 -0000
Received: (qmail 19506 invoked by uid 500); 5 Oct 2010 23:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19346 invoked by uid 500); 5 Oct 2010 23:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19338 invoked by uid 99); 5 Oct 2010 23:18:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 23:18:48 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Oct 2010 23:18:40 +0000
Received: by wye20 with SMTP id 20so4799956wye.35
        for <java-user@lucene.apache.org>; Tue, 05 Oct 2010 16:18:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.6.195 with SMTP id 45mr66081wen.86.1286320700348; Tue, 05
 Oct 2010 16:18:20 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Tue, 5 Oct 2010 16:18:20 -0700 (PDT)
In-Reply-To: <1A036B25-5CE4-4205-B920-B97565A55C9D@yahoo.co.uk>
References: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk>
	<AANLkTimCw3nhmR-49yd=qSizcWHNXm0mwPNKakb3ukuF@mail.gmail.com>
	<1A036B25-5CE4-4205-B920-B97565A55C9D@yahoo.co.uk>
Date: Tue, 5 Oct 2010 19:18:20 -0400
Message-ID: <AANLkTi=f12ciosTuVTUvZaWmaZu+2RkoxeiT-oVyTxuc@mail.gmail.com>
Subject: Re: Merge and commit behaviour - changed between 2.4 and 2.9?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, the merges continue running and altering the segments files, but
the changes done by the merges are not committed until the app calls
commit (or closes the IW).  Ie, no new segments_N file is written due
to merging after the last commit.

Mike

On Tue, Oct 5, 2010 at 6:45 PM, Mark Harwood <markharw00d@yahoo.co.uk> wrot=
e:
> OK. I'll double check the reports.
> So presumably when merges occur outside of transaction control (post comm=
it) the post-merge update of the segments_N file is managed safely somehow?
> I can see the logic in continuing file changes outside of transaction con=
trol because the document updates are safely committed (flushed as new segm=
ents) and the merges are essentially just a background tidying of committed=
 state that can fail with no detrimental effect on the previous transaction=
.
>
>
> On 5 Oct 2010, at 23:31, Michael McCandless wrote:
>
>> Hmm that shouldn't be the case, I think?
>>
>> In both 2.4 and 2.9.x (and all later versions), neither .prepareCommit
>> nor .commit wait for merges.
>>
>> That said, if a merge happens to complete before you call those
>> methods, then it is in fact committed.
>>
>> Mike
>>
>> On Tue, Oct 5, 2010 at 1:13 PM, Mark Harwood <markharw00d@yahoo.co.uk> w=
rote:
>>> Having upgraded a live system from 2.4 to 2.9.3 the client is reporting=
 a change in merge behaviour that is causing some issues with their update =
monitoring logic.
>>>
>>> The suggestion is that any merge operations now complete as part of the=
 IW.prepareCommit() call rather than previously when they ran in the backgr=
ound after IW.commit calls.
>>> This seems to make sense to me but I couldn't see any direct reference =
to this change in behaviour in changes.txt.
>>>
>>> Can anyone confirm this change between versions?
>>>
>>> Cheers,
>>> Mark
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 10:02:44 2010
Return-Path: <java-user-return-47419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71581 invoked from network); 6 Oct 2010 10:02:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 10:02:44 -0000
Received: (qmail 34050 invoked by uid 500); 6 Oct 2010 10:02:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33900 invoked by uid 500); 6 Oct 2010 10:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 1059 invoked by uid 99); 6 Oct 2010 09:29:09 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomas@informatik.hu-berlin.de designates 141.20.20.50 as permitted sender)
Message-ID: <4CAC4145.8080900@informatik.hu-berlin.de>
Date: Wed, 06 Oct 2010 11:28:37 +0200
From: Philippe Thomas <thomas@informatik.hu-berlin.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.12) Gecko/20100915 Thunderbird/3.0.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Restore documents marked as deleted
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: clamav-milter 0.96.3 at mailbox
X-Virus-Status: Clean
X-Greylist: Sender succeeded STARTTLS authentication, not delayed by milter-greylist-4.2.6 (mail.informatik.hu-berlin.de [141.20.20.50]); Wed, 06 Oct 2010 11:28:38 +0200 (CEST)

Hi,

I was indexing some documents, but my program crashed after several days 
of work. If I reopen this index it is empty. I guess the reason is that 
auto-commit was not set and I never performed  a commit. (Lesson 
learned) So probably all documents are marked as "deleted" and 
re-opening the index leads to deletion of these documents.

However, is there a possibility to avoid this? Or do I have to re-index 
all documents again?

Best,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 10:19:13 2010
Return-Path: <java-user-return-47420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78978 invoked from network); 6 Oct 2010 10:19:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 10:19:13 -0000
Received: (qmail 46659 invoked by uid 500); 6 Oct 2010 10:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46509 invoked by uid 500); 6 Oct 2010 10:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46498 invoked by uid 99); 6 Oct 2010 10:19:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:19:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:19:02 +0000
Received: by wwb18 with SMTP id 18so456340wwb.5
        for <java-user@lucene.apache.org>; Wed, 06 Oct 2010 03:18:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.164.66 with SMTP id b44mr633434wel.81.1286360317414; Wed,
 06 Oct 2010 03:18:37 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Wed, 6 Oct 2010 03:18:37 -0700 (PDT)
In-Reply-To: <4CAC4145.8080900@informatik.hu-berlin.de>
References: <4CAC4145.8080900@informatik.hu-berlin.de>
Date: Wed, 6 Oct 2010 06:18:37 -0400
Message-ID: <AANLkTikewzTSH+dRx8ej2rypVbRJax4UrytxFTFu10DD@mail.gmail.com>
Subject: Re: Restore documents marked as deleted
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

There's no quick way to recover from this.

You'd need to derive the segments_N file by opening the files that did
get written.  Conceptually this should be possible (there was a recent
thread about it), but I don't think anyone has actually created the
tool to do so...

Mike

On Wed, Oct 6, 2010 at 5:28 AM, Philippe Thomas
<thomas@informatik.hu-berlin.de> wrote:
> Hi,
>
> I was indexing some documents, but my program crashed after several days =
of
> work. If I reopen this index it is empty. I guess the reason is that
> auto-commit was not set and I never performed =A0a commit. (Lesson learne=
d) So
> probably all documents are marked as "deleted" and re-opening the index
> leads to deletion of these documents.
>
> However, is there a possibility to avoid this? Or do I have to re-index a=
ll
> documents again?
>
> Best,
> =A0 =A0Philippe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 10:22:41 2010
Return-Path: <java-user-return-47421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79444 invoked from network); 6 Oct 2010 10:22:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 10:22:40 -0000
Received: (qmail 52329 invoked by uid 500); 6 Oct 2010 10:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52099 invoked by uid 500); 6 Oct 2010 10:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52091 invoked by uid 99); 6 Oct 2010 10:22:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:22:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of semykov@yandex.ru designates 77.88.60.125 as permitted sender)
Received: from [77.88.60.125] (HELO forward6.mail.yandex.net) (77.88.60.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:22:27 +0000
Received: from web94.yandex.ru (web94.yandex.ru [77.88.60.18])
	by forward6.mail.yandex.net (Yandex) with ESMTP id DA9B8BB082D
	for <java-user@lucene.apache.org>; Wed,  6 Oct 2010 14:22:06 +0400 (MSD)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail;
	t=1286360526; bh=1lMpIMwEOLotis6K9TO+F6d9OmF4FyVILtkSsBM/GTg=;
	h=From:To:Subject:MIME-Version:Message-Id:Date:
	 Content-Transfer-Encoding:Content-Type;
	b=hhEcW3/2Gnb88Se5VWzEBLtAywT54Hhlp6xwX4BiHGth3QwtkyuhNZbTdQYzSjdi0
	 UtS6tT7EeawsSO9+Cp1FTKDO9e2yVqlcb3n0DD+lSv73vYftS5uQWoG3VFRgLs3CbY
	 rrPDEWXAxL7FFaEfwApvyFSKIWWEkjVgAzg2Tupg=
Received: from localhost (localhost.localdomain [127.0.0.1])
	by web94.yandex.ru (Yandex) with ESMTP id D0E2A19C0018
	for <java-user@lucene.apache.org>; Wed,  6 Oct 2010 14:22:06 +0400 (MSD)
X-Yandex-Spam: 0
X-Yandex-Front: web94.yandex.ru 
X-Yandex-TimeMark: 1286360526 
Received: from fortytwo.axmor.com (fortytwo.axmor.com [91.192.173.242]) by mail.yandex.ru with HTTP;
	Wed, 06 Oct 2010 14:22:06 +0400
From: Sergey <semykov@yandex.ru>
To: java-user@lucene.apache.org
Subject: How to find performance bottleneck
MIME-Version: 1.0
Message-Id: <260661286360526@web94.yandex.ru>
Date: Wed, 06 Oct 2010 14:22:06 +0400
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

When running application on Windows XP 32 bit machine the search time is 0.5 second. JVM is IBM Java 5 for 32 bit.
But when running the same application on much more powerfull Windows Server 2007 64 bit machine the search time is 3 seconds. JVM is IBM Java 5 for 64 bit.

It just does not make any sense to me.
Could you help me to find what is causing such poor performance. Maybe there are some tools that I can use.

I'm using MMapDirectory for IndexSearcher. Lucene version 3.0.1.

Typical search is:
(+keywords:cat* +keyword:cat~0.5) AND ((type:black AND catalogs:"57") OR (type:white AND bflag:n AND pflag:n  ))

I'm running absolutely the same searches on both machines.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 10:30:55 2010
Return-Path: <java-user-return-47422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81049 invoked from network); 6 Oct 2010 10:30:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 10:30:54 -0000
Received: (qmail 66363 invoked by uid 500); 6 Oct 2010 10:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66252 invoked by uid 500); 6 Oct 2010 10:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66243 invoked by uid 99); 6 Oct 2010 10:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:30:49 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:30:44 +0000
Received: by qyk4 with SMTP id 4so244156qyk.14
        for <java-user@lucene.apache.org>; Wed, 06 Oct 2010 03:30:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=NQV/9TgmXj0rVS6+fm1jOhE6aS9klH07QVcAdD8JJA0=;
        b=Kng2Jj6pDcHxuDk7cixQS/J6cO8LAljSSnUuPiDtH7bcqySKWlSWTFOu5Y1bp4eHRu
         RmkXB83UFYSmzkfOWiid5UO0rLGPQ996amjj2xMFHzcLGDKYrSca0AA1xNaqVjYo1TlV
         5OQS9LdYoza6N7lNjRXzmOwRH/FfMLQUCDqYE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=fpIZYNs57sz2/TT+kfDlzNxAJ/DCZmgihlCZqaRw1GFqj4gFskcV6+YSkBYjDvAnCB
         RCnwbFHKKEYCcHuB3jwZyInOClcD1OrT5mlLMBEv32KMgNHDWpsI8jR1HaBZAR6v7SBa
         +4YnGM1khHeTwppf9GY0aG1bk3nE5x2qp7i8M=
MIME-Version: 1.0
Received: by 10.224.69.14 with SMTP id x14mr9358957qai.212.1286361023628; Wed,
 06 Oct 2010 03:30:23 -0700 (PDT)
Received: by 10.229.245.138 with HTTP; Wed, 6 Oct 2010 03:30:23 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTikewzTSH+dRx8ej2rypVbRJax4UrytxFTFu10DD@mail.gmail.com>
References: <4CAC4145.8080900@informatik.hu-berlin.de>
	<AANLkTikewzTSH+dRx8ej2rypVbRJax4UrytxFTFu10DD@mail.gmail.com>
Date: Wed, 6 Oct 2010 12:30:23 +0200
Message-ID: <AANLkTikSsP+eJh-=6Kb2k0HLFddc7FrBDaQJFYAj9VfA@mail.gmail.com>
Subject: Re: Restore documents marked as deleted
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Oct 6, 2010 at 12:18 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> There's no quick way to recover from this.
>
> You'd need to derive the segments_N file by opening the files that did
> get written. =C2=A0Conceptually this should be possible (there was a rece=
nt
> thread about it), but I don't think anyone has actually created the
> tool to do so...

Seems its time to do that many folks come up with that kind of request
- I will see if I can find some time though....

simon
> Mike
>
> On Wed, Oct 6, 2010 at 5:28 AM, Philippe Thomas
> <thomas@informatik.hu-berlin.de> wrote:
>> Hi,
>>
>> I was indexing some documents, but my program crashed after several days=
 of
>> work. If I reopen this index it is empty. I guess the reason is that
>> auto-commit was not set and I never performed =C2=A0a commit. (Lesson le=
arned) So
>> probably all documents are marked as "deleted" and re-opening the index
>> leads to deletion of these documents.
>>
>> However, is there a possibility to avoid this? Or do I have to re-index =
all
>> documents again?
>>
>> Best,
>> =C2=A0 =C2=A0Philippe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 10:47:41 2010
Return-Path: <java-user-return-47423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84569 invoked from network); 6 Oct 2010 10:47:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 10:47:40 -0000
Received: (qmail 80216 invoked by uid 500); 6 Oct 2010 10:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80087 invoked by uid 500); 6 Oct 2010 10:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80078 invoked by uid 99); 6 Oct 2010 10:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:47:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 10:47:29 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Wed, 6 Oct 2010 12:47:07 +0200
Subject: Re: How to find performance bottleneck
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <260661286360526@web94.yandex.ru>
References: <260661286360526@web94.yandex.ru>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 6 Oct 2010 12:47:09 +0200
Message-ID: <1286362029.6415.8.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 8bit

On Wed, 2010-10-06 at 12:22 +0200, Sergey wrote:
> When running application on Windows XP 32 bit machine the search time is 0.5 second. JVM is IBM Java 5 for 32 bit.
> But when running the same application on much more powerfull Windows Server 2007 64 bit machine the search time is 3 seconds. JVM is IBM Java 5 for 64 bit.

If your memory allocation (-Xmx) is the same, the 64 bit machine will
have less available heap due to the 64 bit pointers. This could result
in excessive garbage collection. Try increasing the memory allocation
for the 64 bit machine with 50% or more.

Besides that, there should be no significant difference and you're left
with profiling. I recommend Process Explorer
http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx
for general system and single process load inspection. I/O is often the
sinner, s check read and write calls.

Switching to the Java part, try using visualvm
https://visualvm.dev.java.net/
with the Visual GC-plugin to see where the time is spend.

- Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 11:23:22 2010
Return-Path: <java-user-return-47424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96361 invoked from network); 6 Oct 2010 11:23:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 11:23:22 -0000
Received: (qmail 14102 invoked by uid 500); 6 Oct 2010 11:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13714 invoked by uid 500); 6 Oct 2010 11:23:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13706 invoked by uid 99); 6 Oct 2010 11:23:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 11:23:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of semykov@yandex.ru designates 95.108.130.93 as permitted sender)
Received: from [95.108.130.93] (HELO forward11.mail.yandex.net) (95.108.130.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 11:23:10 +0000
Received: from web121.yandex.ru (web121.yandex.ru [95.108.130.99])
	by forward11.mail.yandex.net (Yandex) with ESMTP id 071113ED00BF
	for <java-user@lucene.apache.org>; Wed,  6 Oct 2010 15:22:49 +0400 (MSD)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail;
	t=1286364169; bh=0qImLGrx5LugeYJWy5x6hEFi+3wy/HGFa+l3gOQUerA=;
	h=From:To:In-Reply-To:References:Subject:MIME-Version:Message-Id:
	 Date:Content-Transfer-Encoding:Content-Type;
	b=J5EceY/Z9+6R4XQxS++r7MlD50Ma7ALvpZYh4/tTswdGyM1Wje7a2PXub9esU75xs
	 xGFnj2k/c4P3QfIo6GRveo3wG4Z9FZQjFELkUd2d8ZFIixUZUjI8c1QH3PlUN96wSz
	 5u1WqhJnqLNQWFoHvFjvZE+sQp5iYdECF+lDx4NE=
Received: from localhost (localhost.localdomain [127.0.0.1])
	by web121.yandex.ru (Yandex) with ESMTP id 026C56C48033
	for <java-user@lucene.apache.org>; Wed,  6 Oct 2010 15:22:49 +0400 (MSD)
X-Yandex-Spam: 0
X-Yandex-Front: web121.yandex.ru 
X-Yandex-TimeMark: 1286364169 
Received: from fortytwo.axmor.com (fortytwo.axmor.com [91.192.173.242]) by mail.yandex.ru with HTTP;
	Wed, 06 Oct 2010 15:22:48 +0400
From: Sergey <semykov@yandex.ru>
To: java-user@lucene.apache.org
In-Reply-To: <1286362029.6415.8.camel@te-prime>
References: <260661286360526@web94.yandex.ru> <1286362029.6415.8.camel@te-prime>
Subject: Re: How to find performance bottleneck
MIME-Version: 1.0
Message-Id: <533151286364168@web121.yandex.ru>
Date: Wed, 06 Oct 2010 15:22:48 +0400
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=utf-8

Thanks, I'll give it a try.

06.10.10, 14:47, "Toke Eskildsen" <te@statsbiblioteket.dk>:

> On Wed, 2010-10-06 at 12:22 +0200, Sergey wrote:
>  > When running application on Windows XP 32 bit machine the search time is 0.5 second. JVM is IBM Java 5 for 32 bit.
>  > But when running the same application on much more powerfull Windows Server 2007 64 bit machine the search time is 3 seconds. JVM is IBM Java 5 for 64 bit.
>  
>  If your memory allocation (-Xmx) is the same, the 64 bit machine will
>  have less available heap due to the 64 bit pointers. This could result
>  in excessive garbage collection. Try increasing the memory allocation
>  for the 64 bit machine with 50% or more.
>  
>  Besides that, there should be no significant difference and you're left
>  with profiling. I recommend Process Explorer
>  http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx
>  for general system and single process load inspection. I/O is often the
>  sinner, s check read and write calls.
>  
>  Switching to the Java part, try using visualvm
>  https://visualvm.dev.java.net/
>  with the Visual GC-plugin to see where the time is spend.
>  
>  - Toke Eskildsen
>  
>  
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>  
>  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 15:25:13 2010
Return-Path: <java-user-return-47425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84357 invoked from network); 6 Oct 2010 15:25:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 15:25:13 -0000
Received: (qmail 42881 invoked by uid 500); 6 Oct 2010 15:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42835 invoked by uid 500); 6 Oct 2010 15:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42827 invoked by uid 99); 6 Oct 2010 15:25:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 15:25:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.110.163] (HELO web29017.mail.ird.yahoo.com) (212.82.110.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Oct 2010 15:25:04 +0000
Received: (qmail 62318 invoked by uid 60001); 6 Oct 2010 15:24:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1286378681; bh=+GCJaNVOAoNxb9wokWZNHVAJVk0e4BObpRWgs/uoExQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=zNT0HKNQBiKWwwYv/bjBccAUz9LEIwhmpjnn/2nH9rwZE5YF/Yqmwz8wphbM27uzSNoDNlN6rLQHZeCToIQ00+7auNpWMfoqbEoG/pNOngM8rhTAx6ZZJtYfz3rDXD6fK56+g2fB6DMRBL11tzWFnUPZoymjJru51u7+AE5lWoo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wofBMUd/NejMLEg+XZ8jUQ4Adf8bZ2WwiyFswPQV9+Rqrb6Gy7cukGLpHml+2w2qQp4eBdhWHykHotC95CTlbtrVLV+R7uJUWhAqNJ0ZTEWGrI+dgWrjJqb2/H5FXXK/LLwLEUgJjnd1t0HWDPxV92kUyTbnST1AD7sTJ77Lb2Y=;
Message-ID: <363163.58860.qm@web29017.mail.ird.yahoo.com>
X-YMail-OSG: O5wpc0wVM1kGXMGGRvP1qbFHsvlZtPgT4BhiEs0auoIecEW
 Z7GyQWMBOiAIrAPX2AbAHyG8t.W0LUKk.tbvelEf5YLxZSzTK.fjA9yH8OOP
 qhpuGuh8f.rUwoYYTLVEfv1bocpjfaZXPoZFzoTxyjz5Gx.XXQCxD5KjWOye
 DwulMwyDitQb0b8YJwNb6nJenhIO9zJ04InxiHuTawxFD44V8TUj2F5eWrU7
 Rli4wLWbLiTK8IL__MQJDM1oQ_1BrHGhnPyWdTI5wLXcTY38fNe1re98nFAK
 d33NDp4DEcHz3_OWBL4RhGoZQfgzrW4ZuxD_nce8MFOb2ZtVIdKrLkMZmtOH
 K0Ug_Ig--
Received: from [193.36.230.96] by web29017.mail.ird.yahoo.com via HTTP; Wed, 06 Oct 2010 15:24:41 GMT
X-Mailer: YahooMailRC/497 YahooMailWebService/0.8.105.279950
References: <F5C74CB3-152D-403E-9599-C65749B67D97@yahoo.co.uk> <AANLkTimCw3nhmR-49yd=qSizcWHNXm0mwPNKakb3ukuF@mail.gmail.com> <1A036B25-5CE4-4205-B920-B97565A55C9D@yahoo.co.uk> <AANLkTi=f12ciosTuVTUvZaWmaZu+2RkoxeiT-oVyTxuc@mail.gmail.com>
Date: Wed, 6 Oct 2010 15:24:41 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Merge and commit behaviour - changed between 2.4 and 2.9?
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTi=f12ciosTuVTUvZaWmaZu+2RkoxeiT-oVyTxuc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

> OK. I'll double check the reports.=0A=0AThe issue I'm tackling in this ap=
p is that multiple servers are applying =0Aequal-size volumes of updates in=
 a distributed transaction and one means of node =0Afailure detection is ba=
sed on detecting a server's failure to prepare a batch of =0Aupdates in a t=
imescale proportional to other nodes. Due to recent timeout =0Afailures aft=
er upgrading Lucene, the suggestion was that the way merge =0Aoperations is=
 handled changed from 2.4 to 2.9 and now some servers took longer =0Ato app=
ly updates and reach prepareToCommit() stage based on some shift to =0Afore=
ground rather than background merges in some stages.That looks not to be th=
e =0Acase.=0A=0AThe theory I'm working on now is that a call to IW.updateDo=
cuments() is blocking =0Aon a server because ConcurrentMergeScheduler has e=
xhausted maxMergeCount due to =0Asome ongoing large segment merges.It looks=
 like this blocking logic is not new =0Abetween 2.4 and 2.9 so maybe this h=
as just appeared now simply as a result of =0Athe index reaching a particul=
ar size/state.=0A=0ACheers=0AMark=0A=0A=0A=0A=0A=0A----- Original Message -=
---=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ATo: java-user@=
lucene.apache.org=0ASent: Wed, 6 October, 2010 0:18:20=0ASubject: Re: Merge=
 and commit behaviour - changed between 2.4 and 2.9?=0A=0AWell, the merges =
continue running and altering the segments files, but=0Athe changes done by=
 the merges are not committed until the app calls=0Acommit (or closes the I=
W).  Ie, no new segments_N file is written due=0Ato merging after the last =
commit.=0A=0AMike=0A=0AOn Tue, Oct 5, 2010 at 6:45 PM, Mark Harwood <markha=
rw00d@yahoo.co.uk> wrote:=0A> OK. I'll double check the reports.=0A> So pre=
sumably when merges occur outside of transaction control (post commit) =0A>=
the post-merge update of the segments_N file is managed safely somehow?=0A>=
 I can see the logic in continuing file changes outside of transaction cont=
rol =0A>because the document updates are safely committed (flushed as new s=
egments) and =0A>the merges are essentially just a background tidying of co=
mmitted state that can =0A>fail with no detrimental effect on the previous =
transaction.=0A>=0A>=0A> On 5 Oct 2010, at 23:31, Michael McCandless wrote:=
=0A>=0A>> Hmm that shouldn't be the case, I think?=0A>>=0A>> In both 2.4 an=
d 2.9.x (and all later versions), neither .prepareCommit=0A>> nor .commit w=
ait for merges.=0A>>=0A>> That said, if a merge happens to complete before =
you call those=0A>> methods, then it is in fact committed.=0A>>=0A>> Mike=
=0A>>=0A>> On Tue, Oct 5, 2010 at 1:13 PM, Mark Harwood <markharw00d@yahoo.=
co.uk> wrote:=0A>>> Having upgraded a live system from 2.4 to 2.9.3 the cli=
ent is reporting a =0A>>>change in merge behaviour that is causing some iss=
ues with their update =0A>>>monitoring logic.=0A>>>=0A>>> The suggestion is=
 that any merge operations now complete as part of the =0A>>>IW.prepareComm=
it() call rather than previously when they ran in the background =0A>>>afte=
r IW.commit calls.=0A>>> This seems to make sense to me but I couldn't see =
any direct reference to this =0A>>>change in behaviour in changes.txt.=0A>>=
>=0A>>> Can anyone confirm this change between versions?=0A>>>=0A>>> Cheers=
,=0A>>> Mark=0A>>> --------------------------------------------------------=
-------------=0A>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.ap=
ache.org=0A>>> For additional commands, e-mail: java-user-help@lucene.apach=
e.org=0A>>>=0A>>>=0A>>=0A>> -----------------------------------------------=
----------------------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0A>> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A>>=0A>=0A>=0A> ---------------------------------------------=
------------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0A> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A>=0A>=0A=0A-------------------------------------------------=
--------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene=
.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache=
.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 16:30:57 2010
Return-Path: <java-user-return-47426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8838 invoked from network); 6 Oct 2010 16:30:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 16:30:57 -0000
Received: (qmail 62159 invoked by uid 500); 6 Oct 2010 16:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62035 invoked by uid 500); 6 Oct 2010 16:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62027 invoked by uid 99); 6 Oct 2010 16:30:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 16:30:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 16:30:48 +0000
Received: by qyk4 with SMTP id 4so730080qyk.14
        for <java-user@lucene.apache.org>; Wed, 06 Oct 2010 09:30:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=DMphTKYfEgWpu5OdzOIHOmDq1RHxQWx6j27iIAw2TpY=;
        b=Lt/msHY+aK4OCzHX6Gma+QlcaeKu2ysTr8j8wgcgn4W55yDJCKtox3dhAf+DXErb3N
         8T7G7IMQVLsyJXd0JbwXZmgC4/cPDCkVIlrDrYQkRFxeb2fipF0m9fUOfOx+Q3GoyIei
         9qwqV+Z8j+ohWpq05eb1kAs3SAlAVmoNqEA54=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MGIdTzyP+BhuN8K0En42Keol01a9L2cBSqGDr5h00PxvkMYXTo2a8io50L8qe8TCJm
         X4q5l68xzUUQhI+r0N4kwAylb6MmB5+KwZJsnzVp5f3YNFCGgQM+33aqrn5ffgH/SIpK
         qkk36WEe1ni2z5E7OsAE67H4Jf4gNkzU6/Bus=
MIME-Version: 1.0
Received: by 10.224.34.212 with SMTP id m20mr9234810qad.397.1286382623304;
 Wed, 06 Oct 2010 09:30:23 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Wed, 6 Oct 2010 09:30:23 -0700 (PDT)
In-Reply-To: <533151286364168@web121.yandex.ru>
References: <260661286360526@web94.yandex.ru>
	<1286362029.6415.8.camel@te-prime>
	<533151286364168@web121.yandex.ru>
Date: Wed, 6 Oct 2010 12:30:23 -0400
Message-ID: <AANLkTiks6Cj-rXf93fgmKRVWNp=29aDkQ7wfWcQ3NwuD@mail.gmail.com>
Subject: Re: How to find performance bottleneck
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f9234e64eac340491f54b6f
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f9234e64eac340491f54b6f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Also note that if you've fired some warmup queries at one machine but not
the other that'll skew your results...

Erick

On Wed, Oct 6, 2010 at 7:22 AM, Sergey <semykov@yandex.ru> wrote:

> Thanks, I'll give it a try.
>
> 06.10.10, 14:47, "Toke Eskildsen" <te@statsbiblioteket.dk>:
>
> > On Wed, 2010-10-06 at 12:22 +0200, Sergey wrote:
> >  > When running application on Windows XP 32 bit machine the search tim=
e
> is 0.5 second. JVM is IBM Java 5 for 32 bit.
> >  > But when running the same application on much more powerfull Windows
> Server 2007 64 bit machine the search time is 3 seconds. JVM is IBM Java =
5
> for 64 bit.
> >
> >  If your memory allocation (-Xmx) is the same, the 64 bit machine will
> >  have less available heap due to the 64 bit pointers. This could result
> >  in excessive garbage collection. Try increasing the memory allocation
> >  for the 64 bit machine with 50% or more.
> >
> >  Besides that, there should be no significant difference and you're lef=
t
> >  with profiling. I recommend Process Explorer
> >  http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx
> >  for general system and single process load inspection. I/O is often th=
e
> >  sinner, s=E5 check read and write calls.
> >
> >  Switching to the Java part, try using visualvm
> >  https://visualvm.dev.java.net/
> >  with the Visual GC-plugin to see where the time is spend.
> >
> >  - Toke Eskildsen
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f9234e64eac340491f54b6f--

From java-user-return-47427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 18:33:11 2010
Return-Path: <java-user-return-47427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54336 invoked from network); 6 Oct 2010 18:33:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 18:33:10 -0000
Received: (qmail 4337 invoked by uid 500); 6 Oct 2010 18:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4260 invoked by uid 500); 6 Oct 2010 18:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4251 invoked by uid 99); 6 Oct 2010 18:33:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 18:33:08 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 18:33:01 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P3YnA-0005X7-Cs
	for java-user@lucene.apache.org; Wed, 06 Oct 2010 11:32:40 -0700
Date: Wed, 6 Oct 2010 11:32:40 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1286389960391-1644352.post@n3.nabble.com>
Subject: Issue with sentence specific search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello All: 

Can any one suggest me the best way to implement both sentence specific and
non sentence specific phrase search? The user is going to have a check box
for phrase search on the screen that says 'within sentence'. If s/he selects
'within sentence', then I should perform sentence specific search, if not
this should be a regular non sentence specific search.

Right now I am adding each sentence as a separate field(with the same field
name) to the same document. Also I am setting the  position increment gap
that I did by sub-classing Analyzer and overriding
Analyzer#getPositionIncrementGap() to return 10. 

Right now all I could think about is to maintain two different versions of
indexes, one for sentence specific and the other for non sentence specific.
But, this sounds crude as it doubles the size of my entire indexes (around 7
gigs). I am pretty sure that there should be a better way to achieve this.

Any hint would be highly appreciated. 
Thanks.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Issue-with-sentence-specific-search-tp1644352p1644352.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 18:41:56 2010
Return-Path: <java-user-return-47428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55721 invoked from network); 6 Oct 2010 18:41:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 18:41:56 -0000
Received: (qmail 11546 invoked by uid 500); 6 Oct 2010 18:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11292 invoked by uid 500); 6 Oct 2010 18:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11283 invoked by uid 99); 6 Oct 2010 18:41:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 18:41:53 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 18:41:44 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o96IfNrC010360
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 6 Oct 2010 14:41:24 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 6 Oct 2010
 14:41:23 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Oct 2010 14:40:26 -0400
Subject: RE: Issue with sentence specific search
Thread-Topic: Issue with sentence specific search
Thread-Index: ActlhPFBSGOJ2QiwSlKggaKoPJqDNAAAJKxw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com>
In-Reply-To: <1286389960391-1644352.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2010-10-06_10:2010-10-06,2010-10-06,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU2lyaXNoLA0KDQpJIHRoaW5rIEkgdW5kZXJzdGFuZCAid2l0aGluIHNlbnRlbmNlIiBwaHJh
c2Ugc2VhcmNoIC0geW91IHdhbnQgdGhlIGVudGlyZSBwaHJhc2UgdG8gYmUgd2l0aGluIGEgc2lu
Z2xlIHNlbnRlbmNlLiAgQnV0IGNhbiB5b3UgZ2l2ZSBhbiBleGFtcGxlIG9mICJub24gc2VudGVu
Y2Ugc3BlY2lmaWMgcGhyYXNlIHNlYXJjaCI/ICBJdCdzIG5vdCBjbGVhciB0byBtZSBob3cgdXNl
ZnVsIHN1Y2ggY2FwYWJpbGl0eSB3b3VsZCBiZS4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBTaXJpc2ggVmFkYWxhIFttYWlsdG86c2lyaXNocmVkZHlA
Z21haWwuY29tXQ0KPiBTZW50OiBXZWRuZXNkYXksIE9jdG9iZXIgMDYsIDIwMTAgMjozMyBQTQ0K
PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IElzc3VlIHdpdGgg
c2VudGVuY2Ugc3BlY2lmaWMgc2VhcmNoDQo+IA0KPiANCj4gSGVsbG8gQWxsOg0KPiANCj4gQ2Fu
IGFueSBvbmUgc3VnZ2VzdCBtZSB0aGUgYmVzdCB3YXkgdG8gaW1wbGVtZW50IGJvdGggc2VudGVu
Y2Ugc3BlY2lmaWMNCj4gYW5kDQo+IG5vbiBzZW50ZW5jZSBzcGVjaWZpYyBwaHJhc2Ugc2VhcmNo
PyBUaGUgdXNlciBpcyBnb2luZyB0byBoYXZlIGEgY2hlY2sgYm94DQo+IGZvciBwaHJhc2Ugc2Vh
cmNoIG9uIHRoZSBzY3JlZW4gdGhhdCBzYXlzICd3aXRoaW4gc2VudGVuY2UnLiBJZiBzL2hlDQo+
IHNlbGVjdHMNCj4gJ3dpdGhpbiBzZW50ZW5jZScsIHRoZW4gSSBzaG91bGQgcGVyZm9ybSBzZW50
ZW5jZSBzcGVjaWZpYyBzZWFyY2gsIGlmIG5vdA0KPiB0aGlzIHNob3VsZCBiZSBhIHJlZ3VsYXIg
bm9uIHNlbnRlbmNlIHNwZWNpZmljIHNlYXJjaC4NCj4gDQo+IFJpZ2h0IG5vdyBJIGFtIGFkZGlu
ZyBlYWNoIHNlbnRlbmNlIGFzIGEgc2VwYXJhdGUgZmllbGQod2l0aCB0aGUgc2FtZQ0KPiBmaWVs
ZA0KPiBuYW1lKSB0byB0aGUgc2FtZSBkb2N1bWVudC4gQWxzbyBJIGFtIHNldHRpbmcgdGhlICBw
b3NpdGlvbiBpbmNyZW1lbnQgZ2FwDQo+IHRoYXQgSSBkaWQgYnkgc3ViLWNsYXNzaW5nIEFuYWx5
emVyIGFuZCBvdmVycmlkaW5nDQo+IEFuYWx5emVyI2dldFBvc2l0aW9uSW5jcmVtZW50R2FwKCkg
dG8gcmV0dXJuIDEwLg0KPiANCj4gUmlnaHQgbm93IGFsbCBJIGNvdWxkIHRoaW5rIGFib3V0IGlz
IHRvIG1haW50YWluIHR3byBkaWZmZXJlbnQgdmVyc2lvbnMgb2YNCj4gaW5kZXhlcywgb25lIGZv
ciBzZW50ZW5jZSBzcGVjaWZpYyBhbmQgdGhlIG90aGVyIGZvciBub24gc2VudGVuY2UNCj4gc3Bl
Y2lmaWMuDQo+IEJ1dCwgdGhpcyBzb3VuZHMgY3J1ZGUgYXMgaXQgZG91YmxlcyB0aGUgc2l6ZSBv
ZiBteSBlbnRpcmUgaW5kZXhlcyAoYXJvdW5kDQo+IDcNCj4gZ2lncykuIEkgYW0gcHJldHR5IHN1
cmUgdGhhdCB0aGVyZSBzaG91bGQgYmUgYSBiZXR0ZXIgd2F5IHRvIGFjaGlldmUgdGhpcy4NCj4g
DQo+IEFueSBoaW50IHdvdWxkIGJlIGhpZ2hseSBhcHByZWNpYXRlZC4NCj4gVGhhbmtzLg0KPiAt
LQ0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0OiBodHRwOi8vbHVjZW5lLjQ3MjA2Ni5u
My5uYWJibGUuY29tL0lzc3VlLQ0KPiB3aXRoLXNlbnRlbmNlLXNwZWNpZmljLXNlYXJjaC10cDE2
NDQzNTJwMTY0NDM1Mi5odG1sDQo+IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBt
YWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLg0KPiANCj4gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-47429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 19:15:53 2010
Return-Path: <java-user-return-47429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69719 invoked from network); 6 Oct 2010 19:15:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 19:15:52 -0000
Received: (qmail 54625 invoked by uid 500); 6 Oct 2010 19:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54591 invoked by uid 500); 6 Oct 2010 19:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54583 invoked by uid 99); 6 Oct 2010 19:15:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 19:15:50 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 19:15:45 +0000
Received: by pzk4 with SMTP id 4so2689504pzk.35
        for <java-user@lucene.apache.org>; Wed, 06 Oct 2010 12:15:24 -0700 (PDT)
Received: by 10.142.127.11 with SMTP id z11mr12002653wfc.293.1286392523961;
        Wed, 06 Oct 2010 12:15:23 -0700 (PDT)
Received: from [10.0.1.90] (203-114-161-15.wir.sta.inspire.net.nz [203.114.161.15])
        by mx.google.com with ESMTPS id x1sm1205378wfd.8.2010.10.06.12.15.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 06 Oct 2010 12:15:21 -0700 (PDT)
Sender: Todd Nine <todd@spidertracks.co.nz>
Subject: RE: Numeric range query not returning results
From: Todd Nine <todd@spidertracks.com>
Reply-To: todd@spidertracks.com
To: todd@spidertracks.co.nz
Cc: Uwe Schindler <uwe@thetaphi.de>, java-user@lucene.apache.org
In-Reply-To: <1286223617.15807.41.camel@greenlantern.local>
References: <1286165587.15807.7.camel@greenlantern.local>
	 <003b01cb6388$c8979330$59c6b990$@thetaphi.de>
	 <1286223617.15807.41.camel@greenlantern.local>
Content-Type: multipart/alternative; boundary="=-yulDHb237QdgTS5jiNIt"
Organization: Spidertracks
Date: Thu, 07 Oct 2010 08:14:30 +1300
Message-ID: <1286392470.32538.74.camel@greenlantern.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.3

--=-yulDHb237QdgTS5jiNIt
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit

I've determined the problem.  It's the same end bug as we experienced
with the Cassandra encoding and the term enumeration not being properly
returned.  I've outlined the issues in this bug on Lucandra.

http://github.com/tjake/Lucandra/issues/#issue/40

As you can see, the enumeration of the LucandraTermEnum does not
enumerate in the same way as the SegmentTermEnum when using the
RamDirectory.  Uwe, can you please elaborate on how the
NumericRangeQuery.next() expects the underlying TermEnum to iterate over
terms?  It appears that it attempts to skip to the min term with the
full trie, then uses the most significant bits in the trie to get a
majority of the data.  How does it expect to enumerate terms for the
upper bound.  Is my example below correct?


Min  = 60077f7e6814 (encoded as 32 bits shifted to UTF 8 bytes)
Max = 60077f7e7111 (encoded as 32 bits shifted to UTF 8 bytes)

Step = 8

Start

60077f7e6814
60077f7e68
60077f7e
60077f7e71
60077f7e7111

End.

Thanks,
Todd



On Tue, 2010-10-05 at 09:20 +1300, Todd Nine wrote:

> Hi Uwe,
>   My example wasn't very clear, as I have a load of other code in my
> actual implementation and I was trying to cut it down for clarity.
> This is actually my indexing service for my Datanucleus Cassandra
> plugin, so I have a 1 to 1 relationship where a single document
> corresponds to a Persistent object.  I actually create 5 separate
> documents, and I would expect 3 of those to be returned.  I've ported
> your entire set of tests for 32 and 64 bit numeric range tests over,
> and it unfortunately appears that Lucandra is still very broken in
> terms of numeric ranges even after the Cassandra encoding fix for the
> 7bit shift into UTF 8 characters.  I'll hopefully be able to solve the
> bugs in the next few days.  Thanks again for your help, it's always
> appreciated.
> 
> Todd
> 
> 
> 
> 
> 
> 
> On Mon, 2010-10-04 at 07:55 +0200, Uwe Schindler wrote: 
> 
> > This test works perfectly and returns 1 doucment:
> > 
> >  
> > 
> >   public void testToddNine() throws Exception {
> > 
> >     RAMDirectory directory = new RAMDirectory();
> > 
> >     IndexWriter writer = new IndexWriter(directory, new
> > WhitespaceAnalyzer(), true, MaxFieldLength.UNLIMITED);
> > 
> >     try {
> > 
> >       Document doc = new Document();
> > 
> >       doc.add(new
> > NumericField("LastLogin").setLongValue(1282197146L));
> > 
> >       writer.addDocument(doc);
> > 
> >       doc = new Document();
> > 
> >       doc.add(new
> > NumericField("LastLogin").setLongValue(1282197946L));
> > 
> >       writer.addDocument(doc);
> > 
> >     } finally {
> > 
> >       writer.close();
> > 
> >     }
> > 
> >  
> > 
> >     NumericRangeQuery<Long> rangeQuery =
> > 
> >       NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > 1282197146L, true, true);
> > 
> >  
> > 
> >     IndexReader reader = IndexReader.open(directory, true);
> > 
> >     try {
> > 
> >       IndexSearcher searcher = new IndexSearcher(reader);
> > 
> >       TopDocs docs = searcher.search(rangeQuery, 1000);
> > 
> >       assertEquals(1,docs.totalHits);
> > 
> >     } finally {
> > 
> >       reader.close();
> > 
> >     }
> > 
> >   }
> > 
> >  
> > 
> > Maybe you have the following problems:
> > 
> > -          Are you executing the same query than created. In your
> > example code the searcher executed query but the range query was
> > rangeQuery variable name
> > 
> > -          Are you sure that your document is not returned, but you
> > miss some stored fields? E.g. the default NumericField ctor does not
> > create the field as stored to the document?
> > 
> >  
> > 
> > public NumericField(String name)
> > 
> > Creates a field for numeric values using the default precisionStep
> > NumericUtils.PRECISION_STEP_DEFAULT (4). The instance is not yet
> > initialized with a numeric value, before indexing a document
> > containing this field, set a value using the various set???Value()
> > methods. This constructor creates an indexed, but not stored field.
> > 
> >  
> > 
> > Uwe
> > 
> >  
> > 
> > -----
> > 
> > Uwe Schindler
> > 
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > 
> > http://www.thetaphi.de
> > 
> > eMail: uwe@thetaphi.de
> > 
> >  
> > 
> >  
> > 
> > > -----Original Message-----
> > 
> > > From: Todd Nine [mailto:todd@spidertracks.co.nz]
> > 
> > > Sent: Monday, October 04, 2010 6:13 AM
> > 
> > > To: java-user@lucene.apache.org
> > 
> > > Subject: Numeric range query not returning results
> > 
> > > 
> > 
> > > Hi all,
> > 
> > >   I'm having some issues with Numeric Range queries not working as
> > expected.
> > 
> > > My underlying storage medium is the Lucandra index reader and
> > writer, so I'm
> > 
> > > not sure if this is an issue within Lucandra or with my usage of
> > numeric field.
> > 
> > > My numeric range tests that are copies of Uwe's pass in the
> > Lucandra, source,
> > 
> > > so I have a feeling it's my usage.  I have a simple test case,
> > with 5 people.  I
> > 
> > > have a Date field, the LastLogin field.  This date is converted to
> > epoch
> > 
> > > milliseconds, and stored in the index in the following way.
> > 
> > > 
> > 
> > > NumericField numeric = new NumericField("LastLogin");
> > 
> > > numeric.setLongValue(fieldValue); doc.add(numeric);
> > 
> > > 
> > 
> > > Where I have the following 2 field values on 2 documents.
> > 
> > > 
> > 
> > > 1282197146L and 1282197946L
> > 
> > > 
> > 
> > > I then perform the following query.
> > 
> > > 
> > 
> > > NumericRangeQuery rangeQuery =
> > 
> > > NumericRangeQuery.newLongRange("LastLogin", 1282197146L,
> > 1282197146L,
> > 
> > > true, true);
> > 
> > > 
> > 
> > > IndexReader reader = new IndexReader(columnFamily,
> > 
> > >
> > getContext(conn));
> > 
> > >
> > IndexSearcher searcher = new
> > 
> > > IndexSearcher(reader);
> > 
> > > 
> > 
> > >                                                            TopDocs
> > docs = searcher.search(query,
> > 
> > > maxResults);
> > 
> > > 
> > 
> > >
> > List<Document> documents = new
> > 
> > > ArrayList<Document>(
> > 
> > >
> > docs.totalHits);
> > 
> > > 
> > 
> > >
> > Set<String> fields = new HashSet<String>();
> > 
> > >
> > fields.add(IndexDocument.ROWKEY);
> > 
> > >
> > fields.add(IndexDocument.IDSERIALIZED);
> > 
> > > 
> > 
> > >
> > SetBasedFieldSelector selector = new
> > 
> > > SetBasedFieldSelector(
> > 
> > >
> > fields, null);
> > 
> > > 
> > 
> > >                                                            for
> > (ScoreDoc score : docs.scoreDocs) {
> > 
> > > 
> > 
> > >             documents.add(reader.document(score.doc, selector));
> > 
> > >                                                            }
> > 
> > > 
> > 
> > >                                                            return
> > documents;
> > 
> > > 
> > 
> > > I'm always getting 0 documents.  I know this is incorrect, I can
> > see the values
> > 
> > > getting written to Cassandra when I run it in debug mode.  Is this
> > an issue with
> > 
> > > precision step, or an issue with the Lucandra index reader
> > implementation?
> > 
> > > 
> > 
> > > Thanks,
> > 
> > > Todd
> > 
> > 

--=-yulDHb237QdgTS5jiNIt--


From java-user-return-47430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 19:19:35 2010
Return-Path: <java-user-return-47430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70363 invoked from network); 6 Oct 2010 19:19:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 19:19:34 -0000
Received: (qmail 59831 invoked by uid 500); 6 Oct 2010 19:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59789 invoked by uid 500); 6 Oct 2010 19:19:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59781 invoked by uid 99); 6 Oct 2010 19:19:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 19:19:32 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 19:19:25 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P3ZW4-00016P-S2
	for java-user@lucene.apache.org; Wed, 06 Oct 2010 12:19:04 -0700
Date: Wed, 6 Oct 2010 12:19:04 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1286392744862-1644598.post@n3.nabble.com>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu>
Subject: RE: Issue with sentence specific search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm... My mistake.

In fact it is not a phrase search, but its a proximity search.

My screen gives four options to the user: -All words, -Exact phrase, -At
least one word, -Within proximity of xx words.

In case of -All words and -At least one word, this is irrelevant an
everything works fine.

In case of -Exact phrase, I do need to make it sentence specific that works
well with my current implementation.

In case of -Within proximity of xx words, the user wants to have an option,
to either check within xx words in the same sentence or without any sentence
boundaries.

I am using the following code to perform proximity search:

-----
QueryParser qParser = new QueryParser(Version.LUCENE_29, field,
this.analyzer);
qParser.setDefaultOperator(QueryParser.OR_OPERATOR);
query = qParser.parse(strQuery);

//strQuery format --> "Search Text"~SPAN

-----
bQuery.add(query, BooleanClause.Occur.MUST);
-----

this.analyzer is my custom analyzer. This is to implement, as I already
said, right now I am adding each sentence as a separate field(with the same
field name) to the same document. Also I am setting the  position increment
gap that I did by sub-classing Analyzer and overriding
Analyzer#getPositionIncrementGap() to return 10.

Since for each sentence, the position increment gap is modified, I am not
sure if I can perform a sentence independent proximity search. 

Apologize for not putting it well before and appreciate any responses.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Issue-with-sentence-specific-search-tp1644352p1644598.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 20:03:59 2010
Return-Path: <java-user-return-47431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81032 invoked from network); 6 Oct 2010 20:03:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 20:03:58 -0000
Received: (qmail 38836 invoked by uid 500); 6 Oct 2010 20:03:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38791 invoked by uid 500); 6 Oct 2010 20:03:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38783 invoked by uid 99); 6 Oct 2010 20:03:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 20:03:56 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 20:03:48 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o96K3RBT022733
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 6 Oct 2010 16:03:27 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 6 Oct 2010
 16:03:27 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Oct 2010 16:02:30 -0400
Subject: RE: Issue with sentence specific search
Thread-Topic: Issue with sentence specific search
Thread-Index: Actli2x8Sq4byIy+ThyTgyDJVgjBtwAA6sng
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu>
 <1286392744862-1644598.post@n3.nabble.com>
In-Reply-To: <1286392744862-1644598.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2010-10-06_10:2010-10-06,2010-10-06,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU2lyaXNoLA0KDQpIYXZlIHlvdSBsb29rZWQgYXQgU3BhblF1ZXJ5J3MgeWV0PzoNCg0KaHR0
cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvM18wXzIvYXBpL2FsbC9vcmcvYXBhY2hlL2x1Y2Vu
ZS9zZWFyY2gvc3BhbnMvcGFja2FnZS1zdW1tYXJ5Lmh0bWwNCg0KU2VlIGFsc28gdGhpcyBMdWNp
ZCBJbWFnaW5hdGlvbiBibG9nIHBvc3QgYnkgTWFyayBNaWxsZXI6DQoNCmh0dHA6Ly93d3cubHVj
aWRpbWFnaW5hdGlvbi5jb20vYmxvZy8yMDA5LzA3LzE4L3RoZS1zcGFucXVlcnkvDQoNCk9uZSBj
b21tb24gdGVjaG5pcXVlLCBpbnN0ZWFkIG9mIHVzaW5nIGEgbGFyZ2VyLXRoYW4tbm9ybWFsIHBv
c2l0aW9uIGluY3JlbWVudCBnYXAgYmV0d2VlbiBzZW50ZW5jZXMsIGlzIHVzaW5nIGEgc2VudGVu
Y2UgYm91bmRhcnkgdG9rZW4gbGlrZSAnJCcgb3Igc29tZXRoaW5nIGVsc2UgdGhhdCB3b24ndCBl
dmVyIGl0c2VsZiBiZSB0aGUgdGFyZ2V0IG9mIHNlYXJjaC4gIFF1b3RpbmcgZnJvbSBhIHBvc3Qg
TWFyayBNaWxsZXIgbWFkZSB0byB0aGUgbHVjZW5lLXVzZXIgbGlzdCBsYXN0IHllYXIgPGh0dHA6
Ly93d3cubHVjaWRpbWFnaW5hdGlvbi5jb20vc2VhcmNoL2RvY3VtZW50L2M5NjQxY2JiMWEzYmY5
MjgvbXVsdGlsaW5lX3JlZ2V4X3dpdGhfbHVjZW5lPik6DQoNCglGaXJzdCB5b3UgaW5qZWN0IHNw
ZWNpYWwgbWFya2VyIHRva2VucyBhcyB5b3VyIHBhcmFncmFwaC8NCglzZW50ZW5jZSBtYXJrZXJz
LCB0aGVuIHlvdSB1c2UgYSBTcGFuTm90UXVlcnkgdGhhdCBsb29rcw0KCWZvciBhIFNwYW5OZWFy
UXVlcnkgdGhhdCBkb2Vzbid0IGludGVyc2VjdCB3aXRoIGENCglTcGFuVGVybVF1ZXJ5IGNvbnRh
aW5pbmcgdGhlIHNwZWNpYWwgbWFya2VyIHRlcm0uDQoNCk1hcmsncyBzdWdnZXN0aW9uIHdvdWxk
IHdvcmsgZm9yIHlvdXIgd2l0aGluLXNlbnRlbmNlIGNhc2UsIGFuZCBmb3IgdGhlIGNhc2Ugd2hl
cmUgeW91IGRvbid0IGNhcmUgYWJvdXQgc2VudGVuY2UgYm91bmRhcmllcywgeW91IGNhbiB1c2Ug
U3Bhbk5lYXJRdWVyeSB3aXRob3V0IHRoZSBTcGFuTm90UXVlcnkuDQoNClVzaW5nIHRoaXMgdGVj
aG5pcXVlLCBhIHNpbmdsZSBmaWVsZCBzaG91bGQgc2VydmUgYWxsIG9mIHlvdXIgbmVlZHMuDQoN
ClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU2lyaXNoIFZh
ZGFsYSBbbWFpbHRvOnNpcmlzaHJlZGR5QGdtYWlsLmNvbV0NCj4gU2VudDogV2VkbmVzZGF5LCBP
Y3RvYmVyIDA2LCAyMDEwIDM6MTkgUE0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBTdWJqZWN0OiBSRTogSXNzdWUgd2l0aCBzZW50ZW5jZSBzcGVjaWZpYyBzZWFyY2gNCj4g
DQo+IA0KPiBIbW1tLi4uIE15IG1pc3Rha2UuDQo+IA0KPiBJbiBmYWN0IGl0IGlzIG5vdCBhIHBo
cmFzZSBzZWFyY2gsIGJ1dCBpdHMgYSBwcm94aW1pdHkgc2VhcmNoLg0KPiANCj4gTXkgc2NyZWVu
IGdpdmVzIGZvdXIgb3B0aW9ucyB0byB0aGUgdXNlcjogLUFsbCB3b3JkcywgLUV4YWN0IHBocmFz
ZSwgLUF0DQo+IGxlYXN0IG9uZSB3b3JkLCAtV2l0aGluIHByb3hpbWl0eSBvZiB4eCB3b3Jkcy4N
Cj4gDQo+IEluIGNhc2Ugb2YgLUFsbCB3b3JkcyBhbmQgLUF0IGxlYXN0IG9uZSB3b3JkLCB0aGlz
IGlzIGlycmVsZXZhbnQgYW4NCj4gZXZlcnl0aGluZyB3b3JrcyBmaW5lLg0KPiANCj4gSW4gY2Fz
ZSBvZiAtRXhhY3QgcGhyYXNlLCBJIGRvIG5lZWQgdG8gbWFrZSBpdCBzZW50ZW5jZSBzcGVjaWZp
YyB0aGF0DQo+IHdvcmtzDQo+IHdlbGwgd2l0aCBteSBjdXJyZW50IGltcGxlbWVudGF0aW9uLg0K
PiANCj4gSW4gY2FzZSBvZiAtV2l0aGluIHByb3hpbWl0eSBvZiB4eCB3b3JkcywgdGhlIHVzZXIg
d2FudHMgdG8gaGF2ZSBhbg0KPiBvcHRpb24sDQo+IHRvIGVpdGhlciBjaGVjayB3aXRoaW4geHgg
d29yZHMgaW4gdGhlIHNhbWUgc2VudGVuY2Ugb3Igd2l0aG91dCBhbnkNCj4gc2VudGVuY2UNCj4g
Ym91bmRhcmllcy4NCj4gDQo+IEkgYW0gdXNpbmcgdGhlIGZvbGxvd2luZyBjb2RlIHRvIHBlcmZv
cm0gcHJveGltaXR5IHNlYXJjaDoNCj4gDQo+IC0tLS0tDQo+IFF1ZXJ5UGFyc2VyIHFQYXJzZXIg
PSBuZXcgUXVlcnlQYXJzZXIoVmVyc2lvbi5MVUNFTkVfMjksIGZpZWxkLA0KPiB0aGlzLmFuYWx5
emVyKTsNCj4gcVBhcnNlci5zZXREZWZhdWx0T3BlcmF0b3IoUXVlcnlQYXJzZXIuT1JfT1BFUkFU
T1IpOw0KPiBxdWVyeSA9IHFQYXJzZXIucGFyc2Uoc3RyUXVlcnkpOw0KPiANCj4gLy9zdHJRdWVy
eSBmb3JtYXQgLS0+ICJTZWFyY2ggVGV4dCJ+U1BBTg0KPiANCj4gLS0tLS0NCj4gYlF1ZXJ5LmFk
ZChxdWVyeSwgQm9vbGVhbkNsYXVzZS5PY2N1ci5NVVNUKTsNCj4gLS0tLS0NCj4gDQo+IHRoaXMu
YW5hbHl6ZXIgaXMgbXkgY3VzdG9tIGFuYWx5emVyLiBUaGlzIGlzIHRvIGltcGxlbWVudCwgYXMg
SSBhbHJlYWR5DQo+IHNhaWQsIHJpZ2h0IG5vdyBJIGFtIGFkZGluZyBlYWNoIHNlbnRlbmNlIGFz
IGEgc2VwYXJhdGUgZmllbGQod2l0aCB0aGUNCj4gc2FtZQ0KPiBmaWVsZCBuYW1lKSB0byB0aGUg
c2FtZSBkb2N1bWVudC4gQWxzbyBJIGFtIHNldHRpbmcgdGhlICBwb3NpdGlvbg0KPiBpbmNyZW1l
bnQNCj4gZ2FwIHRoYXQgSSBkaWQgYnkgc3ViLWNsYXNzaW5nIEFuYWx5emVyIGFuZCBvdmVycmlk
aW5nDQo+IEFuYWx5emVyI2dldFBvc2l0aW9uSW5jcmVtZW50R2FwKCkgdG8gcmV0dXJuIDEwLg0K
PiANCj4gU2luY2UgZm9yIGVhY2ggc2VudGVuY2UsIHRoZSBwb3NpdGlvbiBpbmNyZW1lbnQgZ2Fw
IGlzIG1vZGlmaWVkLCBJIGFtIG5vdA0KPiBzdXJlIGlmIEkgY2FuIHBlcmZvcm0gYSBzZW50ZW5j
ZSBpbmRlcGVuZGVudCBwcm94aW1pdHkgc2VhcmNoLg0KPiANCj4gQXBvbG9naXplIGZvciBub3Qg
cHV0dGluZyBpdCB3ZWxsIGJlZm9yZSBhbmQgYXBwcmVjaWF0ZSBhbnkgcmVzcG9uc2VzLg0KPiAt
LQ0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0OiBodHRwOi8vbHVjZW5lLjQ3MjA2Ni5u
My5uYWJibGUuY29tL0lzc3VlLQ0KPiB3aXRoLXNlbnRlbmNlLXNwZWNpZmljLXNlYXJjaC10cDE2
NDQzNTJwMTY0NDU5OC5odG1sDQo+IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBt
YWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLg0KPiANCj4gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-47432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 06 20:45:30 2010
Return-Path: <java-user-return-47432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95479 invoked from network); 6 Oct 2010 20:45:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Oct 2010 20:45:30 -0000
Received: (qmail 3577 invoked by uid 500); 6 Oct 2010 20:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3541 invoked by uid 500); 6 Oct 2010 20:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3533 invoked by uid 99); 6 Oct 2010 20:45:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 20:45:28 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Oct 2010 20:45:22 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P3arF-0000Ds-50
	for java-user@lucene.apache.org; Wed, 06 Oct 2010 13:45:01 -0700
Date: Wed, 6 Oct 2010 13:45:01 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1286397901148-1645072.post@n3.nabble.com>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu> <1286392744862-1644598.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
Subject: RE: Issue with sentence specific search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Awesome! Thanks a lot Steven! This is exactly what I wanted.


Hi Sirish,

Have you looked at SpanQuery's yet?:

http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/search/spans/package-summary.html

See also this Lucid Imagination blog post by Mark Miller:

http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/

One common technique, instead of using a larger-than-normal position
increment gap between sentences, is using a sentence boundary token like '$'
or something else that won't ever itself be the target of search.  Quoting
from a post Mark Miller made to the lucene-user list last year
<http://www.lucidimagination.com/search/document/c9641cbb1a3bf928/multiline_regex_with_lucene>):

	First you inject special marker tokens as your paragraph/
	sentence markers, then you use a SpanNotQuery that looks
	for a SpanNearQuery that doesn't intersect with a
	SpanTermQuery containing the special marker term.

Mark's suggestion would work for your within-sentence case, and for the case
where you don't care about sentence boundaries, you can use SpanNearQuery
without the SpanNotQuery.

Using this technique, a single field should serve all of your needs.

Steve
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Issue-with-sentence-specific-search-tp1644352p1645072.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 07 05:09:08 2010
Return-Path: <java-user-return-47433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47340 invoked from network); 7 Oct 2010 05:09:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Oct 2010 05:09:08 -0000
Received: (qmail 8416 invoked by uid 500); 7 Oct 2010 05:09:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8257 invoked by uid 500); 7 Oct 2010 05:09:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7747 invoked by uid 99); 7 Oct 2010 05:09:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 05:09:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of semykov@yandex.ru designates 77.88.46.7 as permitted sender)
Received: from [77.88.46.7] (HELO forward2.mail.yandex.net) (77.88.46.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 05:08:57 +0000
Received: from web70.yandex.ru (web70.yandex.ru [77.88.46.30])
	by forward2.mail.yandex.net (Yandex) with ESMTP id E5C8A3678018
	for <java-user@lucene.apache.org>; Thu,  7 Oct 2010 09:08:36 +0400 (MSD)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail;
	t=1286428116; bh=FHKB7VFDWoytWrRko655LMOBk0xwhHaMHFHB8Jyu8PM=;
	h=From:To:In-Reply-To:References:Subject:MIME-Version:Message-Id:
	 Date:Content-Transfer-Encoding:Content-Type;
	b=jWC8wafCXS48zx9X/tapcLAzCTfGnAnbWk42oS4d90nWbW4hFU3U86rmjcUboGOVJ
	 ytAWxMZPoSXfONUg8HqLbEJN7ZygQr5Ntfq4gTpppkqhr3rNChHLlv3fbvjTfwY5A3
	 P1MhEJVNg927aDkcyWlqvsvOg4WvGbjMkYdhyYag=
Received: from localhost (localhost.localdomain [127.0.0.1])
	by web70.yandex.ru (Yandex) with ESMTP id E0F4A51803A
	for <java-user@lucene.apache.org>; Thu,  7 Oct 2010 09:08:36 +0400 (MSD)
X-Yandex-Spam: 0
X-Yandex-Front: web70.yandex.ru 
X-Yandex-TimeMark: 1286428116 
Received: from fortytwo.axmor.com (fortytwo.axmor.com [91.192.173.242]) by mail.yandex.ru with HTTP;
	Thu, 07 Oct 2010 09:08:35 +0400
From: Sergey <semykov@yandex.ru>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTiks6Cj-rXf93fgmKRVWNp=29aDkQ7wfWcQ3NwuD@mail.gmail.com>
References: <260661286360526@web94.yandex.ru> <1286362029.6415.8.camel@te-prime> <533151286364168@web121.yandex.ru> <AANLkTiks6Cj-rXf93fgmKRVWNp=29aDkQ7wfWcQ3NwuD@mail.gmail.com>
Subject: Re: How to find performance bottleneck
MIME-Version: 1.0
Message-Id: <619121286428116@web70.yandex.ru>
Date: Thu, 07 Oct 2010 09:08:35 +0400
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=utf-8
X-Virus-Checked: Checked by ClamAV on apache.org

I do some warmup queries on both machines.
I also checked heap size, it is 1G on 32 bit and 4G on 64 bit machine.

I also have SATA disk on 32 bit and SCSI on 64 bit. So I/O should not be a problem.
Actually if I'm using MMapDirectory and doing the same query over and over again I would guess the part of the file that is being used is placed into RAM.

Sergey

06.10.10, 20:30, "Erick Erickson" <erickerickson@gmail.com>:

> Also note that if you've fired some warmup queries at one machine but not
>  the other that'll skew your results...
>  
>  Erick
>  
>  On Wed, Oct 6, 2010 at 7:22 AM, Sergey  wrote:
>  
>  > Thanks, I'll give it a try.
>  >
>  > 06.10.10, 14:47, "Toke Eskildsen" :
>  >
>  > > On Wed, 2010-10-06 at 12:22 +0200, Sergey wrote:
>  > >  > When running application on Windows XP 32 bit machine the search time
>  > is 0.5 second. JVM is IBM Java 5 for 32 bit.
>  > >  > But when running the same application on much more powerfull Windows
>  > Server 2007 64 bit machine the search time is 3 seconds. JVM is IBM Java 5
>  > for 64 bit.
>  > >
>  > >  If your memory allocation (-Xmx) is the same, the 64 bit machine will
>  > >  have less available heap due to the 64 bit pointers. This could result
>  > >  in excessive garbage collection. Try increasing the memory allocation
>  > >  for the 64 bit machine with 50% or more.
>  > >
>  > >  Besides that, there should be no significant difference and you're left
>  > >  with profiling. I recommend Process Explorer
>  > >  http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx
>  > >  for general system and single process load inspection. I/O is often the
>  > >  sinner, s check read and write calls.
>  > >
>  > >  Switching to the Java part, try using visualvm
>  > >  https://visualvm.dev.java.net/
>  > >  with the Visual GC-plugin to see where the time is spend.
>  > >
>  > >  - Toke Eskildsen
>  > >
>  > >
>  > >  ---------------------------------------------------------------------
>  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >
>  > >
>  > >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  
>  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 07 05:13:19 2010
Return-Path: <java-user-return-47434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47811 invoked from network); 7 Oct 2010 05:13:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Oct 2010 05:13:18 -0000
Received: (qmail 11388 invoked by uid 500); 7 Oct 2010 05:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11328 invoked by uid 500); 7 Oct 2010 05:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11320 invoked by uid 99); 7 Oct 2010 05:13:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 05:13:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 05:13:09 +0000
Received: by ywo32 with SMTP id 32so180413ywo.35
        for <java-user@lucene.apache.org>; Wed, 06 Oct 2010 22:12:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=hZkx1gjuf74Sa/DJ9niIZJCjv56ZfRI3DelaS60dG5g=;
        b=V7fZ6s66B3N5/Jw53U98ylGVxDiqBWLgZ4eRoF8qhwXqyaCNff+DYzI23liP+HrsWM
         Rj9adfa1EjYR4/gqinPFgtVvPyzC8pvzZUi3+e1ZUKzO8MoRmawpkm2HW/Nspw9y6Jru
         21TH3ha2ZoGYYos4W6Qi9XEKYzkucyI/OGRoI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dERINd1h0j/U3ioT9/vZ7OAEHmE35plQ1aqrMiKQfZUcHOJ4m3Tbs0hxHAI9CcpnUl
         AF4IYm+p+NKvh1DPSutINF3NIkpQfxVofgFPUK0upENUtkQjp9g1AbuhvEpdpBRm0peQ
         s7z2mPqQysS3lBQV6fkFJJ69EDn0/NdzDqp+Q=
MIME-Version: 1.0
Received: by 10.90.29.12 with SMTP id c12mr240980agc.5.1286428368109; Wed, 06
 Oct 2010 22:12:48 -0700 (PDT)
Received: by 10.220.91.211 with HTTP; Wed, 6 Oct 2010 22:12:48 -0700 (PDT)
Date: Thu, 7 Oct 2010 10:42:48 +0530
Message-ID: <AANLkTim0zG20WOs+3E98iTb8a_dHARcLHvhLL19Tkzn0@mail.gmail.com>
Subject: Multiple searcher blocked threads
From: Shailendra Mudgal <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636163e61e9047b0491fff1aa

--001636163e61e9047b0491fff1aa
Content-Type: text/plain; charset=ISO-8859-1

Hi Everyone,

Recently we have migrated from lucene 2.2 to lucene 2.9.3.

We are having some issues in search. During the load, searchers are getting
hung up. When we took a process stack, we sound that there are around 450
threads are in the blocked state.


Thread t@885: (state = BLOCKED)
 -
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(byte[],
int, int) @bci=7, line=115 (Compiled frame)
 - org.apache.lucene.store.BufferedIndexInput.readBytes(byte[], int, int,
boolean) @bci=203, line=136 (Compiled frame)
 -
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(byte[],
int, int) @bci=51, line=247 (Compiled frame)
 - org.apache.lucene.store.BufferedIndexInput.refill() @bci=87, line=157
(Compiled frame)
 - org.apache.lucene.store.BufferedIndexInput.readByte() @bci=12, line=38
(Compiled frame)
 - org.apache.lucene.store.IndexInput.readVInt() @bci=1, line=78 (Compiled
frame)
 -
org.apache.lucene.index.TermBuffer.read(org.apache.lucene.store.IndexInput,
org.apache.lucene.index.FieldInfos) @bci=6, line=64 (Compiled frame)
 - org.apache.lucene.index.SegmentTermEnum.next() @bci=64, line=129
(Compiled frame)
 -
org.apache.lucene.index.SegmentTermEnum.scanTo(org.apache.lucene.index.Term)
@bci=25, line=160 (Compiled frame)
 - org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term,
boolean) @bci=211, line=232 (Compiled frame)
 - org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term)
@bci=3, line=179 (Compiled frame)
 -
org.apache.lucene.index.SegmentReader.docFreq(org.apache.lucene.index.Term)
@bci=12, line=997 (Compiled frame)
 -
org.apache.lucene.index.DirectoryReader.docFreq(org.apache.lucene.index.Term)
@bci=25, line=633 (Compiled frame)
 -
org.apache.lucene.index.FilterIndexReader.docFreq(org.apache.lucene.index.Term)
@bci=9, line=195 (Compiled frame)
 -
org.apache.lucene.search.IndexSearcher.docFreq(org.apache.lucene.index.Term)
@bci=5, line=147 (Compiled frame)
 -
org.apache.lucene.search.Similarity.idfExplain(org.apache.lucene.index.Term,
org.apache.lucene.search.Searcher) @bci=29, line=765 (Compiled frame)
 -
org.apache.lucene.search.TermQuery$TermWeight.<init>(org.apache.lucene.search.TermQuery,
org.apache.lucene.search.Searcher) @bci=28, line=46 (Compiled frame)
 -
org.apache.lucene.search.TermQuery.createWeight(org.apache.lucene.search.Searcher)
@bci=6, line=146 (Compiled frame)
 -
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.lucene.search.BooleanQuery,
org.apache.lucene.search.Searcher) @bci=72, line=184 (Compiled f
rame)
 -
org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.search.Searcher)
@bci=6, line=415 (Interpreted frame)
 -
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.lucene.search.BooleanQuery,
org.apache.lucene.search.Searcher) @bci=72, line=184 (Compiled f
rame)
 -
org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.search.Searcher)
@bci=6, line=415 (Interpreted frame)
 - org.apache.lucene.search.Query.weight(org.apache.lucene.search.Searcher)
@bci=8, line=99 (Interpreted frame)
 -
org.apache.lucene.search.Searcher.createWeight(org.apache.lucene.search.Query)
@bci=2, line=230 (Interpreted frame)
 - org.apache.lucene.search.Searcher.search(org.apache.lucene.search.Query,
org.apache.lucene.search.HitCollector) @bci=3, line=110 (Interpreted frame)
 - lucene.searcher.MySearcherThread.run() @bci=99, line=52 (Compiled frame)



I have a feeling that these blocked threads are the causing searcher not to
respond.

Our application is running on SunOS and we are using jdk1.6_04

Thanks in advance..
Vipin

--001636163e61e9047b0491fff1aa--

From java-user-return-47435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 07 06:38:19 2010
Return-Path: <java-user-return-47435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72166 invoked from network); 7 Oct 2010 06:38:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Oct 2010 06:38:19 -0000
Received: (qmail 68114 invoked by uid 500); 7 Oct 2010 06:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67738 invoked by uid 500); 7 Oct 2010 06:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 16372 invoked by uid 99); 7 Oct 2010 05:22:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ypavlidis@oneriot.com designates 199.117.103.141 as permitted sender)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Multiple searcher blocked threads
From: Yannis Pavlidis <ypavlidis@oneriot.com>
In-Reply-To: <AANLkTim0zG20WOs+3E98iTb8a_dHARcLHvhLL19Tkzn0@mail.gmail.com>
Date: Wed, 6 Oct 2010 23:22:25 -0600
Content-Transfer-Encoding: quoted-printable
Message-Id: <59B37841-F10D-4153-B3CB-5E4191B8B617@oneriot.com>
References: <AANLkTim0zG20WOs+3E98iTb8a_dHARcLHvhLL19Tkzn0@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-OriginalArrivalTime: 07 Oct 2010 05:22:26.0266 (UTC) FILETIME=[A0F42BA0:01CB65DF]
X-Virus-Checked: Checked by ClamAV on apache.org

I would recommend you use NIOFSDirectory. We had similar issues and =
after we switched to NIOFSDirectory these issues disappeared =
(dramatically reduced).=20

Also if you are using filters what has really helped us is to use cached =
filters (CachingWrapperFilters).

Hope that helps.

Yannis.

On Oct 6, 2010, at 11:12 PM, Shailendra Mudgal wrote:

> Hi Everyone,
>=20
> Recently we have migrated from lucene 2.2 to lucene 2.9.3.
>=20
> We are having some issues in search. During the load, searchers are =
getting
> hung up. When we took a process stack, we sound that there are around =
450
> threads are in the blocked state.
>=20
>=20
> Thread t@885: (state =3D BLOCKED)
> -
> =
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(=
byte[],
> int, int) @bci=3D7, line=3D115 (Compiled frame)
> - org.apache.lucene.store.BufferedIndexInput.readBytes(byte[], int, =
int,
> boolean) @bci=3D203, line=3D136 (Compiled frame)
> -
> =
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(byte[=
],
> int, int) @bci=3D51, line=3D247 (Compiled frame)
> - org.apache.lucene.store.BufferedIndexInput.refill() @bci=3D87, =
line=3D157
> (Compiled frame)
> - org.apache.lucene.store.BufferedIndexInput.readByte() @bci=3D12, =
line=3D38
> (Compiled frame)
> - org.apache.lucene.store.IndexInput.readVInt() @bci=3D1, line=3D78 =
(Compiled
> frame)
> -
> =
org.apache.lucene.index.TermBuffer.read(org.apache.lucene.store.IndexInput=
,
> org.apache.lucene.index.FieldInfos) @bci=3D6, line=3D64 (Compiled =
frame)
> - org.apache.lucene.index.SegmentTermEnum.next() @bci=3D64, line=3D129
> (Compiled frame)
> -
> =
org.apache.lucene.index.SegmentTermEnum.scanTo(org.apache.lucene.index.Ter=
m)
> @bci=3D25, line=3D160 (Compiled frame)
> - =
org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term,
> boolean) @bci=3D211, line=3D232 (Compiled frame)
> - =
org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term)
> @bci=3D3, line=3D179 (Compiled frame)
> -
> =
org.apache.lucene.index.SegmentReader.docFreq(org.apache.lucene.index.Term=
)
> @bci=3D12, line=3D997 (Compiled frame)
> -
> =
org.apache.lucene.index.DirectoryReader.docFreq(org.apache.lucene.index.Te=
rm)
> @bci=3D25, line=3D633 (Compiled frame)
> -
> =
org.apache.lucene.index.FilterIndexReader.docFreq(org.apache.lucene.index.=
Term)
> @bci=3D9, line=3D195 (Compiled frame)
> -
> =
org.apache.lucene.search.IndexSearcher.docFreq(org.apache.lucene.index.Ter=
m)
> @bci=3D5, line=3D147 (Compiled frame)
> -
> =
org.apache.lucene.search.Similarity.idfExplain(org.apache.lucene.index.Ter=
m,
> org.apache.lucene.search.Searcher) @bci=3D29, line=3D765 (Compiled =
frame)
> -
> =
org.apache.lucene.search.TermQuery$TermWeight.<init>(org.apache.lucene.sea=
rch.TermQuery,
> org.apache.lucene.search.Searcher) @bci=3D28, line=3D46 (Compiled =
frame)
> -
> =
org.apache.lucene.search.TermQuery.createWeight(org.apache.lucene.search.S=
earcher)
> @bci=3D6, line=3D146 (Compiled frame)
> -
> =
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.luce=
ne.search.BooleanQuery,
> org.apache.lucene.search.Searcher) @bci=3D72, line=3D184 (Compiled f
> rame)
> -
> =
org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.searc=
h.Searcher)
> @bci=3D6, line=3D415 (Interpreted frame)
> -
> =
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.luce=
ne.search.BooleanQuery,
> org.apache.lucene.search.Searcher) @bci=3D72, line=3D184 (Compiled f
> rame)
> -
> =
org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.searc=
h.Searcher)
> @bci=3D6, line=3D415 (Interpreted frame)
> - =
org.apache.lucene.search.Query.weight(org.apache.lucene.search.Searcher)
> @bci=3D8, line=3D99 (Interpreted frame)
> -
> =
org.apache.lucene.search.Searcher.createWeight(org.apache.lucene.search.Qu=
ery)
> @bci=3D2, line=3D230 (Interpreted frame)
> - =
org.apache.lucene.search.Searcher.search(org.apache.lucene.search.Query,
> org.apache.lucene.search.HitCollector) @bci=3D3, line=3D110 =
(Interpreted frame)
> - lucene.searcher.MySearcherThread.run() @bci=3D99, line=3D52 =
(Compiled frame)
>=20
>=20
>=20
> I have a feeling that these blocked threads are the causing searcher =
not to
> respond.
>=20
> Our application is running on SunOS and we are using jdk1.6_04
>=20
> Thanks in advance..
> Vipin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 07 15:46:07 2010
Return-Path: <java-user-return-47436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54223 invoked from network); 7 Oct 2010 15:46:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Oct 2010 15:46:07 -0000
Received: (qmail 11204 invoked by uid 500); 7 Oct 2010 15:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11137 invoked by uid 500); 7 Oct 2010 15:46:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11129 invoked by uid 99); 7 Oct 2010 15:46:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 15:46:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 15:45:59 +0000
Received: by pzk4 with SMTP id 4so234238pzk.35
        for <java-user@lucene.apache.org>; Thu, 07 Oct 2010 08:45:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=UDWJRVf+ENQaxCeiF6btWg602fwnBgWZbrIlV/hEZgY=;
        b=szL6+becUBCiYUGEyfN5f11iJecRZnmnPVZvGgzAjvMLs8tokSuJ8NdmWXnk77XllJ
         qUWACpfYpc1/M+AzgTT6z0nmDtt+0HTzBVRP0DyLgTZ2jctatQXxghPssNAhDWQCgrzU
         uJNJ0GT3/EJ0qVdkHerxTGWb31PxKteEONe1M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IyUsC0AKCxLhuLbBBN71DVgQQyjK8kp9tvXnoKlpxtJtAkOPJ+DH7CeR79BFHnxLGd
         lpuXBFAIcdfzMtmlQyfwESK97cxn9IefW/chzB/PmkeOy2iiHRzMoJYmnfaBoPymdMnu
         D3N4pRmpLluV8WHyYgG9mmPp6kSdeJMTuCFJU=
MIME-Version: 1.0
Received: by 10.142.121.7 with SMTP id t7mr769550wfc.88.1286466334623; Thu, 07
 Oct 2010 08:45:34 -0700 (PDT)
Received: by 10.220.91.211 with HTTP; Thu, 7 Oct 2010 08:45:34 -0700 (PDT)
In-Reply-To: <59B37841-F10D-4153-B3CB-5E4191B8B617@oneriot.com>
References: <AANLkTim0zG20WOs+3E98iTb8a_dHARcLHvhLL19Tkzn0@mail.gmail.com>
	<59B37841-F10D-4153-B3CB-5E4191B8B617@oneriot.com>
Date: Thu, 7 Oct 2010 21:15:34 +0530
Message-ID: <AANLkTinNS8gJH7U2dUjfMkNX4pAzLBd+hx-B8iaNrGVn@mail.gmail.com>
Subject: Re: Multiple searcher blocked threads
From: Shailendra Mudgal <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e909ebe40825049208c8d4

--001636e909ebe40825049208c8d4
Content-Type: text/plain; charset=ISO-8859-1

Hi Yannis,

Thanks for your reply.

It fixed the problem.

Thanks again.





On Thu, Oct 7, 2010 at 10:52 AM, Yannis Pavlidis <ypavlidis@oneriot.com>wrote:

> I would recommend you use NIOFSDirectory. We had similar issues and after
> we switched to NIOFSDirectory these issues disappeared (dramatically
> reduced).
>
> Also if you are using filters what has really helped us is to use cached
> filters (CachingWrapperFilters).
>
> Hope that helps.
>
> Yannis.
>
> On Oct 6, 2010, at 11:12 PM, Shailendra Mudgal wrote:
>
> > Hi Everyone,
> >
> > Recently we have migrated from lucene 2.2 to lucene 2.9.3.
> >
> > We are having some issues in search. During the load, searchers are
> getting
> > hung up. When we took a process stack, we sound that there are around 450
> > threads are in the blocked state.
> >
> >
> > Thread t@885: (state = BLOCKED)
> > -
> >
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(byte[],
> > int, int) @bci=7, line=115 (Compiled frame)
> > - org.apache.lucene.store.BufferedIndexInput.readBytes(byte[], int, int,
> > boolean) @bci=203, line=136 (Compiled frame)
> > -
> >
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(byte[],
> > int, int) @bci=51, line=247 (Compiled frame)
> > - org.apache.lucene.store.BufferedIndexInput.refill() @bci=87, line=157
> > (Compiled frame)
> > - org.apache.lucene.store.BufferedIndexInput.readByte() @bci=12, line=38
> > (Compiled frame)
> > - org.apache.lucene.store.IndexInput.readVInt() @bci=1, line=78 (Compiled
> > frame)
> > -
> >
> org.apache.lucene.index.TermBuffer.read(org.apache.lucene.store.IndexInput,
> > org.apache.lucene.index.FieldInfos) @bci=6, line=64 (Compiled frame)
> > - org.apache.lucene.index.SegmentTermEnum.next() @bci=64, line=129
> > (Compiled frame)
> > -
> >
> org.apache.lucene.index.SegmentTermEnum.scanTo(org.apache.lucene.index.Term)
> > @bci=25, line=160 (Compiled frame)
> > -
> org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term,
> > boolean) @bci=211, line=232 (Compiled frame)
> > -
> org.apache.lucene.index.TermInfosReader.get(org.apache.lucene.index.Term)
> > @bci=3, line=179 (Compiled frame)
> > -
> >
> org.apache.lucene.index.SegmentReader.docFreq(org.apache.lucene.index.Term)
> > @bci=12, line=997 (Compiled frame)
> > -
> >
> org.apache.lucene.index.DirectoryReader.docFreq(org.apache.lucene.index.Term)
> > @bci=25, line=633 (Compiled frame)
> > -
> >
> org.apache.lucene.index.FilterIndexReader.docFreq(org.apache.lucene.index.Term)
> > @bci=9, line=195 (Compiled frame)
> > -
> >
> org.apache.lucene.search.IndexSearcher.docFreq(org.apache.lucene.index.Term)
> > @bci=5, line=147 (Compiled frame)
> > -
> >
> org.apache.lucene.search.Similarity.idfExplain(org.apache.lucene.index.Term,
> > org.apache.lucene.search.Searcher) @bci=29, line=765 (Compiled frame)
> > -
> >
> org.apache.lucene.search.TermQuery$TermWeight.<init>(org.apache.lucene.search.TermQuery,
> > org.apache.lucene.search.Searcher) @bci=28, line=46 (Compiled frame)
> > -
> >
> org.apache.lucene.search.TermQuery.createWeight(org.apache.lucene.search.Searcher)
> > @bci=6, line=146 (Compiled frame)
> > -
> >
> org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.lucene.search.BooleanQuery,
> > org.apache.lucene.search.Searcher) @bci=72, line=184 (Compiled f
> > rame)
> > -
> >
> org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.search.Searcher)
> > @bci=6, line=415 (Interpreted frame)
> > -
> >
> org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(org.apache.lucene.search.BooleanQuery,
> > org.apache.lucene.search.Searcher) @bci=72, line=184 (Compiled f
> > rame)
> > -
> >
> org.apache.lucene.search.BooleanQuery.createWeight(org.apache.lucene.search.Searcher)
> > @bci=6, line=415 (Interpreted frame)
> > -
> org.apache.lucene.search.Query.weight(org.apache.lucene.search.Searcher)
> > @bci=8, line=99 (Interpreted frame)
> > -
> >
> org.apache.lucene.search.Searcher.createWeight(org.apache.lucene.search.Query)
> > @bci=2, line=230 (Interpreted frame)
> > -
> org.apache.lucene.search.Searcher.search(org.apache.lucene.search.Query,
> > org.apache.lucene.search.HitCollector) @bci=3, line=110 (Interpreted
> frame)
> > - lucene.searcher.MySearcherThread.run() @bci=99, line=52 (Compiled
> frame)
> >
> >
> >
> > I have a feeling that these blocked threads are the causing searcher not
> to
> > respond.
> >
> > Our application is running on SunOS and we are using jdk1.6_04
> >
> > Thanks in advance..
> > Vipin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e909ebe40825049208c8d4--

From java-user-return-47437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 07 23:13:44 2010
Return-Path: <java-user-return-47437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12636 invoked from network); 7 Oct 2010 23:13:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Oct 2010 23:13:44 -0000
Received: (qmail 96049 invoked by uid 500); 7 Oct 2010 23:13:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95998 invoked by uid 500); 7 Oct 2010 23:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95990 invoked by uid 99); 7 Oct 2010 23:13:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 23:13:41 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Oct 2010 23:13:36 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P3zeF-0006SM-I2
	for java-user@lucene.apache.org; Thu, 07 Oct 2010 16:13:15 -0700
Date: Thu, 7 Oct 2010 16:13:15 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1286493195553-1651512.post@n3.nabble.com>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu> <1286392744862-1644598.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
Subject: RE: Issue with sentence specific search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi Steven,

I have implemented sentence specific proximity search as suggested below.
However, unfortunately it still doesn't identify the sentence boundaries for
my search.

I am using # as a delimiter between my sentences while indexing the content:

------------
ArrayList<String> sentencesList = sentenceScanner.getAllSentences();
StringBuffer textWithToken = new StringBuffer();
for (String sentence : sentencesList){
	textWithToken.append(sentence + " # ");
}			
addFieldToDocument(document, IFIELD_TEXT, textWithToken.toString(), true,
true);
------------
* Used StandardAnalyzer to initialize the indexWriter while adding the
document

This is how I am performing my search:

------------
Query query = null;
strQuery = strQuery.replaceAll("\\s+", " ");
String[] spanTerms = strQuery.split(" ");
SpanQuery[] spanQueries = new SpanQuery[spanTerms.length];
for (int count = 0; count < spanTerms.length; count++) {
	String spanTerm = spanTerms[count];
	spanQueries[count] = new SpanTermQuery(new Term(field, spanTerm));
}
if(!withinSentence){
	SpanQuery spanQuery = new SpanNearQuery(spanQueries, span, true);
	query = spanQuery;
} else if (withinSentence){
	SpanQuery queryInclude = new SpanNearQuery(spanQueries, span, true);
	SpanQuery queryExclude = new SpanTermQuery(new Term(field, "#"));
	SpanQuery spanNotQuery = new SpanNotQuery(queryInclude, queryExclude);
	query = spanNotQuery;
}
bQuery.add(query, BooleanClause.Occur.MUST);

------------

When I eventually read my query on the console, this is how it looks in both
cases:

With no sentence boundary
+(author:amanda) +spanNear([text:efficiency, text:delta], 10, true)
+(year:2009 year:2010)

With sentence boundary
+(author:amanda) +spanNot(spanNear([text:efficiency, text:delta], 10, true),
text:#) +(year:2009 year:2010)

My guess is that probably, my index isn't saving the sentence boundary value
# as a separate term. Any hints or pointers on where exactly I am
mis-implementing would be highly appreciated.

Thanks.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Issue-with-sentence-specific-search-tp1644352p1651512.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 02:28:31 2010
Return-Path: <java-user-return-47438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74745 invoked from network); 8 Oct 2010 02:28:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 02:28:31 -0000
Received: (qmail 35119 invoked by uid 500); 8 Oct 2010 02:28:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34899 invoked by uid 500); 8 Oct 2010 02:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34891 invoked by uid 99); 8 Oct 2010 02:28:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 02:28:28 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 02:28:19 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o982Rw6O017589
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 7 Oct 2010 22:27:58 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Thu, 7 Oct 2010
 22:27:58 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 7 Oct 2010 22:27:01 -0400
Subject: RE: Issue with sentence specific search
Thread-Topic: Issue with sentence specific search
Thread-Index: ActmdU0y+andJKqGSg6ZNFg6ZMZspAADYv1A
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7E4E0944@suex07-mbx-03.ad.syr.edu>
References: <1286389960391-1644352.post@n3.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F7E4E091B@suex07-mbx-03.ad.syr.edu>
 <1286392744862-1644598.post@n3.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F7E4E0924@suex07-mbx-03.ad.syr.edu>
 <1286493195553-1651512.post@n3.nabble.com>
In-Reply-To: <1286493195553-1651512.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2010-10-07_09:2010-10-07,2010-10-07,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU2lyaXNoLA0KDQpTdGFuZGFyZFRva2VuaXplciBkb2VzIG5vdCBwcm9kdWNlIGEgdG9rZW4g
ZnJvbSAnIycsIGFzIHlvdSBzdXNwZWN0ZWQuICBTb21ldGhpbmcgdGhhdCBmaXRzIHRoZSAid29y
ZCIgZGVmaW5pdGlvbiwgYnV0IHdoaWNoIHdvbid0IGV2ZXIgYmUgZW5jb3VudGVyZWQgaW4geW91
ciBkb2N1bWVudHMsIGlzIHdoYXQgeW91IHNob3VsZCB1c2UgZm9yIHRoZSBkZWxpbWl0ZXIgLSBz
b21ldGhpbmcgbGlrZSBhMWIyYzNjMmIxYSAuDQoNClNlbnRlbmNlIGJvdW5kYXJ5IGhhbmRsaW5n
IGlzIGNsdW5reSBpbiBMdWNlbmUgcmlnaHQgbm93IC0gdGhlcmUgaGFzIGJlZW4gc29tZSBkaXNj
dXNzaW9uIG9mIGhvdyB0byBkaXJlY3RseSBzdXBwb3J0IHRoaXMga2luZCBvZiB0aGluZywgYnV0
IG5vIGNvZGUgYXQgdGhpcyBwb2ludC4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KPiBGcm9tOiBTaXJpc2ggVmFkYWxhIFttYWlsdG86c2lyaXNocmVkZHlAZ21haWwu
Y29tXQ0KPiBTZW50OiBUaHVyc2RheSwgT2N0b2JlciAwNywgMjAxMCA3OjEzIFBNDQo+IFRvOiBq
YXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IElzc3VlIHdpdGggc2Vu
dGVuY2Ugc3BlY2lmaWMgc2VhcmNoDQo+IA0KPiANCj4gSGkgU3RldmVuLA0KPiANCj4gSSBoYXZl
IGltcGxlbWVudGVkIHNlbnRlbmNlIHNwZWNpZmljIHByb3hpbWl0eSBzZWFyY2ggYXMgc3VnZ2Vz
dGVkIGJlbG93Lg0KPiBIb3dldmVyLCB1bmZvcnR1bmF0ZWx5IGl0IHN0aWxsIGRvZXNuJ3QgaWRl
bnRpZnkgdGhlIHNlbnRlbmNlIGJvdW5kYXJpZXMNCj4gZm9yDQo+IG15IHNlYXJjaC4NCj4gDQo+
IEkgYW0gdXNpbmcgIyBhcyBhIGRlbGltaXRlciBiZXR3ZWVuIG15IHNlbnRlbmNlcyB3aGlsZSBp
bmRleGluZyB0aGUNCj4gY29udGVudDoNCj4gDQo+IC0tLS0tLS0tLS0tLQ0KPiBBcnJheUxpc3Q8
U3RyaW5nPiBzZW50ZW5jZXNMaXN0ID0gc2VudGVuY2VTY2FubmVyLmdldEFsbFNlbnRlbmNlcygp
Ow0KPiBTdHJpbmdCdWZmZXIgdGV4dFdpdGhUb2tlbiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCj4g
Zm9yIChTdHJpbmcgc2VudGVuY2UgOiBzZW50ZW5jZXNMaXN0KXsNCj4gCXRleHRXaXRoVG9rZW4u
YXBwZW5kKHNlbnRlbmNlICsgIiAjICIpOw0KPiB9DQo+IGFkZEZpZWxkVG9Eb2N1bWVudChkb2N1
bWVudCwgSUZJRUxEX1RFWFQsIHRleHRXaXRoVG9rZW4udG9TdHJpbmcoKSwgdHJ1ZSwNCj4gdHJ1
ZSk7DQo+IC0tLS0tLS0tLS0tLQ0KPiAqIFVzZWQgU3RhbmRhcmRBbmFseXplciB0byBpbml0aWFs
aXplIHRoZSBpbmRleFdyaXRlciB3aGlsZSBhZGRpbmcgdGhlDQo+IGRvY3VtZW50DQo+IA0KPiBU
aGlzIGlzIGhvdyBJIGFtIHBlcmZvcm1pbmcgbXkgc2VhcmNoOg0KPiANCj4gLS0tLS0tLS0tLS0t
DQo+IFF1ZXJ5IHF1ZXJ5ID0gbnVsbDsNCj4gc3RyUXVlcnkgPSBzdHJRdWVyeS5yZXBsYWNlQWxs
KCJcXHMrIiwgIiAiKTsNCj4gU3RyaW5nW10gc3BhblRlcm1zID0gc3RyUXVlcnkuc3BsaXQoIiAi
KTsNCj4gU3BhblF1ZXJ5W10gc3BhblF1ZXJpZXMgPSBuZXcgU3BhblF1ZXJ5W3NwYW5UZXJtcy5s
ZW5ndGhdOw0KPiBmb3IgKGludCBjb3VudCA9IDA7IGNvdW50IDwgc3BhblRlcm1zLmxlbmd0aDsg
Y291bnQrKykgew0KPiAJU3RyaW5nIHNwYW5UZXJtID0gc3BhblRlcm1zW2NvdW50XTsNCj4gCXNw
YW5RdWVyaWVzW2NvdW50XSA9IG5ldyBTcGFuVGVybVF1ZXJ5KG5ldyBUZXJtKGZpZWxkLCBzcGFu
VGVybSkpOw0KPiB9DQo+IGlmKCF3aXRoaW5TZW50ZW5jZSl7DQo+IAlTcGFuUXVlcnkgc3BhblF1
ZXJ5ID0gbmV3IFNwYW5OZWFyUXVlcnkoc3BhblF1ZXJpZXMsIHNwYW4sIHRydWUpOw0KPiAJcXVl
cnkgPSBzcGFuUXVlcnk7DQo+IH0gZWxzZSBpZiAod2l0aGluU2VudGVuY2Upew0KPiAJU3BhblF1
ZXJ5IHF1ZXJ5SW5jbHVkZSA9IG5ldyBTcGFuTmVhclF1ZXJ5KHNwYW5RdWVyaWVzLCBzcGFuLCB0
cnVlKTsNCj4gCVNwYW5RdWVyeSBxdWVyeUV4Y2x1ZGUgPSBuZXcgU3BhblRlcm1RdWVyeShuZXcg
VGVybShmaWVsZCwgIiMiKSk7DQo+IAlTcGFuUXVlcnkgc3Bhbk5vdFF1ZXJ5ID0gbmV3IFNwYW5O
b3RRdWVyeShxdWVyeUluY2x1ZGUsDQo+IHF1ZXJ5RXhjbHVkZSk7DQo+IAlxdWVyeSA9IHNwYW5O
b3RRdWVyeTsNCj4gfQ0KPiBiUXVlcnkuYWRkKHF1ZXJ5LCBCb29sZWFuQ2xhdXNlLk9jY3VyLk1V
U1QpOw0KPiANCj4gLS0tLS0tLS0tLS0tDQo+IA0KPiBXaGVuIEkgZXZlbnR1YWxseSByZWFkIG15
IHF1ZXJ5IG9uIHRoZSBjb25zb2xlLCB0aGlzIGlzIGhvdyBpdCBsb29rcyBpbg0KPiBib3RoDQo+
IGNhc2VzOg0KPiANCj4gV2l0aCBubyBzZW50ZW5jZSBib3VuZGFyeQ0KPiArKGF1dGhvcjphbWFu
ZGEpICtzcGFuTmVhcihbdGV4dDplZmZpY2llbmN5LCB0ZXh0OmRlbHRhXSwgMTAsIHRydWUpDQo+
ICsoeWVhcjoyMDA5IHllYXI6MjAxMCkNCj4gDQo+IFdpdGggc2VudGVuY2UgYm91bmRhcnkNCj4g
KyhhdXRob3I6YW1hbmRhKSArc3Bhbk5vdChzcGFuTmVhcihbdGV4dDplZmZpY2llbmN5LCB0ZXh0
OmRlbHRhXSwgMTAsDQo+IHRydWUpLA0KPiB0ZXh0OiMpICsoeWVhcjoyMDA5IHllYXI6MjAxMCkN
Cj4gDQo+IE15IGd1ZXNzIGlzIHRoYXQgcHJvYmFibHksIG15IGluZGV4IGlzbid0IHNhdmluZyB0
aGUgc2VudGVuY2UgYm91bmRhcnkNCj4gdmFsdWUNCj4gIyBhcyBhIHNlcGFyYXRlIHRlcm0uIEFu
eSBoaW50cyBvciBwb2ludGVycyBvbiB3aGVyZSBleGFjdGx5IEkgYW0NCj4gbWlzLWltcGxlbWVu
dGluZyB3b3VsZCBiZSBoaWdobHkgYXBwcmVjaWF0ZWQuDQo+IA0KPiBUaGFua3MuDQo+IC0tDQo+
IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6IGh0dHA6Ly9sdWNlbmUuNDcyMDY2Lm4zLm5h
YmJsZS5jb20vSXNzdWUtDQo+IHdpdGgtc2VudGVuY2Utc3BlY2lmaWMtc2VhcmNoLXRwMTY0NDM1
MnAxNjUxNTEyLmh0bWwNCj4gU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxp
bmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uDQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 09:56:42 2010
Return-Path: <java-user-return-47439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1291 invoked from network); 8 Oct 2010 09:56:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 09:56:41 -0000
Received: (qmail 95492 invoked by uid 500); 8 Oct 2010 09:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95251 invoked by uid 500); 8 Oct 2010 09:56:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95243 invoked by uid 99); 8 Oct 2010 09:56:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 09:56:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.91.34.194] (HELO rousseau.informatik.uni-duisburg.de) (134.91.34.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 09:56:29 +0000
Received: from freinet.inf.uni-due.de ([134.91.34.217])
	by rousseau.informatik.uni-duisburg.de with esmtpsa (TLS1.0:RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <engler@collide.info>)
	id 1P49gK-0006Qq-P3
	for java-user@lucene.apache.org; Fri, 08 Oct 2010 11:56:06 +0200
Message-ID: <4CAEEAB0.70402@collide.info>
Date: Fri, 08 Oct 2010 11:56:00 +0200
From: Jan Engler <engler@collide.info>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.9) Gecko/20100915 Lightning/1.0b2 Thunderbird/3.1.4
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Enigmail-Version: 1.1.1
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 134.91.34.217
X-SA-Exim-Mail-From: engler@collide.info
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	rousseau.informatik.uni-duisburg.de
X-Spam-Level: 
Subject: Case insensitive search
X-SA-Exim-Version: 4.2.1 (built Wed, 25 Jun 2008 17:14:11 +0000)
X-SA-Exim-Scanned: Yes (on rousseau.informatik.uni-duisburg.de)
X-Old-Spam-Status: No, score=-1.4 required=5.0 tests=ALL_TRUSTED
	autolearn=disabled version=3.2.5

Hi everybody,

I am currently working on a system which stores objects in a database.
For searching these objects I use a lucene indexer which adds all
metadata of these objects as fields to a lucene document. Those metadata
are for instance title, author, etc. I am storing the fields inside
lucene as they are, like: author:Jan, title: Question to the Lucene
mailinglist.
What I want to do now is case-insensitive searching, so that the above
example will match a query like author:jan or author:jAn. I want to
return the Fields as the search result without touching the DB. That's
why I do not store the results in lowercase.
Is there any possibility to leave the index as it is (mixed lowercase
and uppercase) but allow the search to be case-insensitive?

I am using the Lucene 3.0.2 and (for now) the StandardAnalyzer...

Thanks for your help and best wishes from Germany,

 Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 10:10:23 2010
Return-Path: <java-user-return-47440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4450 invoked from network); 8 Oct 2010 10:10:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 10:10:23 -0000
Received: (qmail 16946 invoked by uid 500); 8 Oct 2010 10:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16841 invoked by uid 500); 8 Oct 2010 10:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16833 invoked by uid 99); 8 Oct 2010 10:10:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 10:10:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 10:10:14 +0000
Received: by qyk29 with SMTP id 29so1117975qyk.14
        for <java-user@lucene.apache.org>; Fri, 08 Oct 2010 03:09:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=5e4DqSLK6oKDnY7E26uuua0OzVxR16kyQ6zSodHV7fI=;
        b=S7Y/SbhiHuGXNBbp189uuj3og1tnFUXRIegEpnsElx9C1TSY53RrekHl7L1oN85/kl
         uFLmsiUm261Q2nAplsvz7dUjBvCtwuXIDiSYOj+LGlp4mSMMb1GfT4DJITEQ9tLx5wEp
         2CafRF2uksk010bMTlUuHUdAdQGXQSRAgcD2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=rb4VmsYGbb/7mA4xwjfPP/xS0kxEH62k2lJC1dvHuNRZvWMaz1IGHPHiDvoP/J5EzD
         /UVYE9QoVSFAmZ+hu6o2yvz2WppyEZ5WYaqvIsy6h+3C9qLWAcplxfceq8iWZmwfXijY
         WqCjOuWp8cStj88hkSODn+erakeTdWYhfkNcI=
Received: by 10.224.206.133 with SMTP id fu5mr1360751qab.276.1286532593332;
 Fri, 08 Oct 2010 03:09:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.127.94 with HTTP; Fri, 8 Oct 2010 03:09:32 -0700 (PDT)
In-Reply-To: <4CAEEAB0.70402@collide.info>
References: <4CAEEAB0.70402@collide.info>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Fri, 8 Oct 2010 13:09:32 +0300
Message-ID: <AANLkTi=0q=Q+z_t+W0W4Dozcu3sjnMf1W9Y5vb420PG_@mail.gmail.com>
Subject: Re: Case insensitive search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I think that StandardAnalyzer will do exactly that thing.
When you specify your field as STORED, the exact copy of the field is
stored so you can retrieve it later.

Analyzer job is just to extract tokens (the things that you'll search
for) and that's where you can play with lower case/stemming/stop words
and so on.

Just try it..and see how it goes

On Fri, Oct 8, 2010 at 12:56, Jan Engler <engler@collide.info> wrote:
> Hi everybody,
>
> I am currently working on a system which stores objects in a database.
> For searching these objects I use a lucene indexer which adds all
> metadata of these objects as fields to a lucene document. Those metadata
> are for instance title, author, etc. I am storing the fields inside
> lucene as they are, like: author:Jan, title: Question to the Lucene
> mailinglist.
> What I want to do now is case-insensitive searching, so that the above
> example will match a query like author:jan or author:jAn. I want to
> return the Fields as the search result without touching the DB. That's
> why I do not store the results in lowercase.
> Is there any possibility to leave the index as it is (mixed lowercase
> and uppercase) but allow the search to be case-insensitive?
>
> I am using the Lucene 3.0.2 and (for now) the StandardAnalyzer...
>
> Thanks for your help and best wishes from Germany,
>
> =C2=A0Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 12:35:09 2010
Return-Path: <java-user-return-47441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47609 invoked from network); 8 Oct 2010 12:35:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 12:35:08 -0000
Received: (qmail 83508 invoked by uid 500); 8 Oct 2010 12:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83292 invoked by uid 500); 8 Oct 2010 12:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83284 invoked by uid 99); 8 Oct 2010 12:35:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:35:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:34:55 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 3E87A24001
	for <java-user@lucene.apache.org>; Fri,  8 Oct 2010 15:34:35 +0300 (EEST)
Message-ID: <4CAF0FDB.3030408@sirma.bg>
Date: Fri, 08 Oct 2010 15:34:35 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: detect Lucene version
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

  Hi Guys,

Is there way to detect org.apache.lucene.util.Version of an index having 
IndexReader or just FSDirectory?
I know I can open segments file and read the proper bytes according to 
rules of creating it but is there more smart way to do this without 
using RandomAccessFile or something like this.
Actually I need just to know if index is pre Lucene 3_0 or 3_0 (or later).

Thanks,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 12:50:37 2010
Return-Path: <java-user-return-47442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52784 invoked from network); 8 Oct 2010 12:50:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 12:50:36 -0000
Received: (qmail 12536 invoked by uid 500); 8 Oct 2010 12:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12313 invoked by uid 500); 8 Oct 2010 12:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12303 invoked by uid 99); 8 Oct 2010 12:50:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:50:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:50:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4AD0945F352
	for <java-user@lucene.apache.org>; Fri,  8 Oct 2010 14:50:01 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C4S61QTi+ywj for <java-user@lucene.apache.org>;
	Fri,  8 Oct 2010 14:49:50 +0200 (CEST)
Received: from VEGA (unknown [12.53.193.57])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2756445F33D
	for <java-user@lucene.apache.org>; Fri,  8 Oct 2010 14:49:48 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CAF0FDB.3030408@sirma.bg>
In-Reply-To: <4CAF0FDB.3030408@sirma.bg>
Subject: RE: detect Lucene version
Date: Fri, 8 Oct 2010 08:50:23 -0400
Message-ID: <002701cb66e7$62fac030$28f04090$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJmItXogZGC7/iBbypWZDupIvYqzJIBhknQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

There is no easy way to get a global Lucene index version, as each segment
has its own versions and in each segment, even each file type has its own
version. There is an issue open, to also store the Lucene version in the
segments file itself after each update (so get the "newest" file type across
the whole index).

About 3.0: The file format in 3.0 didn't change, it is the same as in 2.9.
Only for stored fields, the version number was increased to easily detect a
segment, that has no compressed fields anymore and does not need to be
re-merged to remove compression. From user code, this version number is not
easily detectable.

An easy way is t use the CheckIndex tool, that will print all version
information in the diagnostics data for each segment. Please note, for 3.0
indexes it still prints 2.9 on the to-level index information (see above).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Friday, October 08, 2010 8:35 AM
> To: LUCENE MAIL LIST
> Subject: detect Lucene version
> 
>   Hi Guys,
> 
> Is there way to detect org.apache.lucene.util.Version of an index having
> IndexReader or just FSDirectory?
> I know I can open segments file and read the proper bytes according to
rules of
> creating it but is there more smart way to do this without using
> RandomAccessFile or something like this.
> Actually I need just to know if index is pre Lucene 3_0 or 3_0 (or later).
> 
> Thanks,
> Ivan
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 08 13:00:02 2010
Return-Path: <java-user-return-47443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54344 invoked from network); 8 Oct 2010 13:00:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Oct 2010 13:00:01 -0000
Received: (qmail 29576 invoked by uid 500); 8 Oct 2010 12:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29303 invoked by uid 500); 8 Oct 2010 12:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29295 invoked by uid 99); 8 Oct 2010 12:59:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:59:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Oct 2010 12:59:51 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 6861D24001
	for <java-user@lucene.apache.org>; Fri,  8 Oct 2010 15:59:28 +0300 (EEST)
Message-ID: <4CAF15B0.3070407@sirma.bg>
Date: Fri, 08 Oct 2010 15:59:28 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: detect Lucene version
References: <4CAF0FDB.3030408@sirma.bg> <002701cb66e7$62fac030$28f04090$@thetaphi.de>
In-Reply-To: <002701cb66e7$62fac030$28f04090$@thetaphi.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

  OK 10x Uwe :)

On 08.10.2010 . 15:50, Uwe Schindler wrote:
> There is no easy way to get a global Lucene index version, as each segment
> has its own versions and in each segment, even each file type has its own
> version. There is an issue open, to also store the Lucene version in the
> segments file itself after each update (so get the "newest" file type across
> the whole index).
>
> About 3.0: The file format in 3.0 didn't change, it is the same as in 2.9.
> Only for stored fields, the version number was increased to easily detect a
> segment, that has no compressed fields anymore and does not need to be
> re-merged to remove compression. From user code, this version number is not
> easily detectable.
>
> An easy way is t use the CheckIndex tool, that will print all version
> information in the diagnostics data for each segment. Please note, for 3.0
> indexes it still prints 2.9 on the to-level index information (see above).
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Sent: Friday, October 08, 2010 8:35 AM
>> To: LUCENE MAIL LIST
>> Subject: detect Lucene version
>>
>>    Hi Guys,
>>
>> Is there way to detect org.apache.lucene.util.Version of an index having
>> IndexReader or just FSDirectory?
>> I know I can open segments file and read the proper bytes according to
> rules of
>> creating it but is there more smart way to do this without using
>> RandomAccessFile or something like this.
>> Actually I need just to know if index is pre Lucene 3_0 or 3_0 (or later).
>>
>> Thanks,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 11 03:54:12 2010
Return-Path: <java-user-return-47444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29197 invoked from network); 11 Oct 2010 03:54:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Oct 2010 03:54:11 -0000
Received: (qmail 71887 invoked by uid 500); 11 Oct 2010 03:54:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71657 invoked by uid 500); 11 Oct 2010 03:54:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71649 invoked by uid 99); 11 Oct 2010 03:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 03:54:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pksinghus@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 03:53:58 +0000
Received: by iwn3 with SMTP id 3so4417323iwn.35
        for <java-user@lucene.apache.org>; Sun, 10 Oct 2010 20:53:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=/TA+rSyNDeE2mxcGkX8LADntMctSnMjU43p1rbwiMhM=;
        b=e7EUjW6EA9qBEalNFIAsBoo4l+8ylZZsWv5BoppHxGTfMHkD4vRzXnbgemByO/6wDX
         rBPFch8yQyIVauJmLcm0fYdiL9xVXot5ZgrnO0ycmnElmocM+i4wCbL8u6ol4G3IGhcm
         MSphH+iWhIb/Ai3X2nEs50RiH30bqltrbrggs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Mgdl8ha3dZd80Dg5/1DIa8uGxjsd36hp7QHgDNNE/KGnB6s/+6WfXyTPb+kxuMyRSQ
         UYsiZNjPaEgxGTMEuz7IcXLO3ftxY0ScDV0alPWjupu6cHdscX3Y16vNiNLzUC1sacT4
         +ezsrTrGIoDug6olXfSLqcm1uDXUcP/anv2Mw=
MIME-Version: 1.0
Received: by 10.231.166.72 with SMTP id l8mr4386162iby.95.1286769218313; Sun,
 10 Oct 2010 20:53:38 -0700 (PDT)
Received: by 10.231.187.165 with HTTP; Sun, 10 Oct 2010 20:53:38 -0700 (PDT)
Date: Sun, 10 Oct 2010 20:53:38 -0700
Message-ID: <AANLkTikWu2p-=rEmwoXmPmsHWYJkyQ_bXLsY64C1FU6H@mail.gmail.com>
Subject: Build environment
From: Pradeep Singh <pksinghus@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045013e1b2a5de504924f4ed0

--005045013e1b2a5de504924f4ed0
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I am having issues building Lucene and Solr from svn checkout. I had this
problem earlier but I was able to figure out the combination of ant and
maven-ant-tasks that worked. Last few months I've been building with Ant
1.8.1 and maven-ant-tasks 2.1.1 (I had always has ant 1.8.1 but an old
version of maven ant tasks and it would not build. I would get errors about
it not finding poms and those errors went away with the right version of ant
tasks).

Similar problem is occurring today (generate-maven-artifacts specifically)
and I suspect it has to do with this combination. I checked the hudson
report to see that Lucene build uses Ant 1.7.0. A short answer could
possibly solve this problem. What's the maven ant tasks version it is
using?

Could we please publish this information somewhere? Because it is clear that
"any" ant version higher than 1.6.3 is not the solution. And it sure needs a
specific version of maven ant tasks to work.

Thanks,
Pradeep

--005045013e1b2a5de504924f4ed0--

From java-user-return-47445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 11 12:44:33 2010
Return-Path: <java-user-return-47445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72502 invoked from network); 11 Oct 2010 12:44:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Oct 2010 12:44:33 -0000
Received: (qmail 62647 invoked by uid 500); 11 Oct 2010 12:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62152 invoked by uid 500); 11 Oct 2010 12:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62143 invoked by uid 99); 11 Oct 2010 12:44:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 12:44:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 12:44:20 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AFA5045F5D4
	for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 14:43:58 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Hn6fpl+L+iQ5 for <java-user@lucene.apache.org>;
	Mon, 11 Oct 2010 14:43:47 +0200 (CEST)
Received: from VEGA (unknown [82.113.121.113])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 57B6345F5D0
	for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 14:43:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTikWu2p-=rEmwoXmPmsHWYJkyQ_bXLsY64C1FU6H@mail.gmail.com>
In-Reply-To: <AANLkTikWu2p-=rEmwoXmPmsHWYJkyQ_bXLsY64C1FU6H@mail.gmail.com>
Subject: RE: Build environment
Date: Mon, 11 Oct 2010 14:44:28 +0200
Message-ID: <007401cb6942$0ce71560$26b54020$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQGOVdupRcgitpcaaPIZy7yEwFbeWpO113mQ
Content-language: de

Use ant 1.7.x, 1.8 is not backwards compatible and parts of Lucene  Build
don't work (redefinition of property data types in 1.8,...). With this
version the recent Maven-for-Ant 2.0.10 version should work.

Please note that Lucene trunk does not build maven artifacts for the modules
folder. Nor does it build src/bin artifacts. This is trunk and not 100%
finished and under heavy flux.

Lucene/Solr 3.x can be built as described above without probs.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Pradeep Singh [mailto:pksinghus@gmail.com]
> Sent: Monday, October 11, 2010 5:54 AM
> To: java-user@lucene.apache.org
> Subject: Build environment
> 
> Hi all,
> 
> I am having issues building Lucene and Solr from svn checkout. I had this
> problem earlier but I was able to figure out the combination of ant and
maven-
> ant-tasks that worked. Last few months I've been building with Ant
> 1.8.1 and maven-ant-tasks 2.1.1 (I had always has ant 1.8.1 but an old
version
> of maven ant tasks and it would not build. I would get errors about it not
finding
> poms and those errors went away with the right version of ant tasks).
> 
> Similar problem is occurring today (generate-maven-artifacts specifically)
and I
> suspect it has to do with this combination. I checked the hudson report to
see
> that Lucene build uses Ant 1.7.0. A short answer could possibly solve this
> problem. What's the maven ant tasks version it is using?
> 
> Could we please publish this information somewhere? Because it is clear
that
> "any" ant version higher than 1.6.3 is not the solution. And it sure needs
a
> specific version of maven ant tasks to work.
> 
> Thanks,
> Pradeep


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 11 15:51:32 2010
Return-Path: <java-user-return-47446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29988 invoked from network); 11 Oct 2010 15:51:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Oct 2010 15:51:32 -0000
Received: (qmail 88172 invoked by uid 500); 11 Oct 2010 15:51:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88045 invoked by uid 500); 11 Oct 2010 15:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87772 invoked by uid 99); 11 Oct 2010 15:51:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 15:51:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pksinghus@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 15:51:21 +0000
Received: by iwn3 with SMTP id 3so5239184iwn.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 08:51:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LU1ihcOAVIeKlAUIphEdwvTgK6cjaO7MKp34TqunHiM=;
        b=OEFiabcfG8F7eE0pL6FiuqDtF05Tj5HE/eq6ji9KsCcKZr363qwKIfc0Ed/xZiFsQ/
         W6ELuXhIV8cERDMgcZv6QDP10cSbFRlsgUU5pu0WQ9h7g8+2Q+EUXrIaAKjHWTqWfw66
         rcBfa+mLkwqQFn225GbgPOY+RJNecqF2/d2uw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FnioGs9y39GTee2PEwe961EPkr7c9TgyzcKsQPJQ31PC3eHgWEl7PWPLgbrM50GnZU
         sm5m7bSml3cwHlRk1wPKwJWudswoAQ1OwXeM3tH2paxT1RwYLI58zUGpwmLJ/x+Lmpwg
         xHGjhEkuI5rk3RMr+kIth5fyvSQn26XrNGndA=
MIME-Version: 1.0
Received: by 10.231.30.193 with SMTP id v1mr4825027ibc.87.1286812260495; Mon,
 11 Oct 2010 08:51:00 -0700 (PDT)
Received: by 10.231.187.165 with HTTP; Mon, 11 Oct 2010 08:51:00 -0700 (PDT)
In-Reply-To: <007401cb6942$0ce71560$26b54020$@thetaphi.de>
References: <AANLkTikWu2p-=rEmwoXmPmsHWYJkyQ_bXLsY64C1FU6H@mail.gmail.com>
	<007401cb6942$0ce71560$26b54020$@thetaphi.de>
Date: Mon, 11 Oct 2010 08:51:00 -0700
Message-ID: <AANLkTi=Whki-k9sP58=FNcR9B_emXrU1Mt_WqoEi1-BT@mail.gmail.com>
Subject: Re: Build environment
From: Pradeep Singh <pksinghus@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032557a0d6adf76d04925953c3
X-Virus-Checked: Checked by ClamAV on apache.org

--00032557a0d6adf76d04925953c3
Content-Type: text/plain; charset=ISO-8859-1

It worked with Ant 1.7.1 and maven-ant-tasks 2.0.10 and it actually built
everything - lucene, solr and analyzers (with ant generate-maven-artifacts
at the root). I had to add uniqueVersion="false" in artifact:deploy for the
macro m2-deploy in lucene/common-build.xml to stop generating new artifact
for every build and to keep a consistent name of artifact-4.0-SNAPSHOT.

Thanks

On Mon, Oct 11, 2010 at 5:44 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Use ant 1.7.x, 1.8 is not backwards compatible and parts of Lucene  Build
> don't work (redefinition of property data types in 1.8,...). With this
> version the recent Maven-for-Ant 2.0.10 version should work.
>
> Please note that Lucene trunk does not build maven artifacts for the
> modules
> folder. Nor does it build src/bin artifacts. This is trunk and not 100%
> finished and under heavy flux.
>
> Lucene/Solr 3.x can be built as described above without probs.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Pradeep Singh [mailto:pksinghus@gmail.com]
> > Sent: Monday, October 11, 2010 5:54 AM
> > To: java-user@lucene.apache.org
> > Subject: Build environment
> >
> > Hi all,
> >
> > I am having issues building Lucene and Solr from svn checkout. I had this
> > problem earlier but I was able to figure out the combination of ant and
> maven-
> > ant-tasks that worked. Last few months I've been building with Ant
> > 1.8.1 and maven-ant-tasks 2.1.1 (I had always has ant 1.8.1 but an old
> version
> > of maven ant tasks and it would not build. I would get errors about it
> not
> finding
> > poms and those errors went away with the right version of ant tasks).
> >
> > Similar problem is occurring today (generate-maven-artifacts
> specifically)
> and I
> > suspect it has to do with this combination. I checked the hudson report
> to
> see
> > that Lucene build uses Ant 1.7.0. A short answer could possibly solve
> this
> > problem. What's the maven ant tasks version it is using?
> >
> > Could we please publish this information somewhere? Because it is clear
> that
> > "any" ant version higher than 1.6.3 is not the solution. And it sure
> needs
> a
> > specific version of maven ant tasks to work.
> >
> > Thanks,
> > Pradeep
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00032557a0d6adf76d04925953c3--

From java-user-return-47447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 11 17:35:25 2010
Return-Path: <java-user-return-47447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64202 invoked from network); 11 Oct 2010 17:35:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Oct 2010 17:35:17 -0000
Received: (qmail 31661 invoked by uid 500); 11 Oct 2010 17:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31612 invoked by uid 500); 11 Oct 2010 17:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31602 invoked by uid 99); 11 Oct 2010 17:35:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 17:35:14 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 17:35:10 +0000
Received: by gxk1 with SMTP id 1so554234gxk.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 10:34:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.169.7 with SMTP id r7mr6782061ybe.403.1286818489039; Mon,
 11 Oct 2010 10:34:49 -0700 (PDT)
Received: by 10.150.191.10 with HTTP; Mon, 11 Oct 2010 10:34:48 -0700 (PDT)
In-Reply-To: <AANLkTimSJYn=UhybgxpT5uBhVBekmEdSM8N+PLOJLJqq@mail.gmail.com>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
	<AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
	<AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
	<AANLkTikJqgyv3zZ5GSLZHrVLDA9XXyd1Ah98LZ-W9Ovc@mail.gmail.com>
	<AANLkTimSJYn=UhybgxpT5uBhVBekmEdSM8N+PLOJLJqq@mail.gmail.com>
Date: Tue, 12 Oct 2010 00:34:48 +0700
Message-ID: <AANLkTikSCCWD7R7js9Rw4m9TKcNcA0Bk7Nim5DvbipWd@mail.gmail.com>
Subject: Re: flushing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
> Nope, never used jNotify, so I don't have any code handy...
>
> Good luck!
> Erick
>

so I did try JNotify but there is seems to be some bug in it that I
find it hards to integrate in my lucene source code.so I had to try a
looping option instead.

http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify

so anyway, I had another question now. I was trying to make a lucene
source code that can do indexing and store them first in a memory
using RAMDirectory and then flush this index in a memory into a disk
using FSDirectory. I had done some modifications of this code but to
no avail. maybe some of you can help me out a bit.
here is the source code again.

import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;


public class SimpleFileIndexer {
	
	
	public static void main(String[] args) throws Exception   {
		
		int i=0;
		while(i<10) {
		File indexDir = new
File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
		File dataDir = new
File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
		String suffix = "txt";
		
		SimpleFileIndexer indexer = new SimpleFileIndexer();
		
		int numIndex = indexer.index(indexDir, dataDir, suffix);
		
		System.out.println("Total files indexed " + numIndex);
		i++;
		Thread.sleep(10000);
		
		}
	}

	
	
	private int index(File indexDir, File dataDir, String suffix) throws
Exception {
		
		IndexWriter indexWriter = new IndexWriter(
				FSDirectory.open(indexDir),
				new SimpleAnalyzer(),
				true,
				IndexWriter.MaxFieldLength.LIMITED);
		indexWriter.setUseCompoundFile(false);
		
		indexDirectory(indexWriter, dataDir, suffix);
		
		int numIndexed = indexWriter.maxDoc();
		indexWriter.optimize();
		indexWriter.close();
		
		return numIndexed;
		
	}
	
	private void indexDirectory(IndexWriter indexWriter, File dataDir,
String suffix) throws IOException {
		File[] files = dataDir.listFiles();
		for (int i = 0; i < files.length; i++) {
			File f = files[i];
			if (f.isDirectory()) {
				indexDirectory(indexWriter, f, suffix);
			}
			else {
				indexFileWithIndexWriter(indexWriter, f, suffix);
			}
		}
	}
	
	private void indexFileWithIndexWriter(IndexWriter indexWriter, File
f, String suffix) throws IOException {
		if (f.isHidden() || f.isDirectory() || !f.canRead() || !f.exists()) {
			return;
		}
		if (suffix!=null && !f.getName().endsWith(suffix)) {
			return;
		}
		System.out.println("Indexing file " + f.getCanonicalPath());
		
		Document doc = new Document();
		doc.add(new Field("contents", new FileReader(f)));		
		doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.ANALYZED));
		
		indexWriter.addDocument(doc);
	}
	
}

so what's the best way for me to integrate RAMDirectory in that source
code before putting them in FSDirectory. any help would be appreciated
though.
thanks


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 11 20:45:49 2010
Return-Path: <java-user-return-47448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36611 invoked from network); 11 Oct 2010 20:45:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Oct 2010 20:45:49 -0000
Received: (qmail 50559 invoked by uid 500); 11 Oct 2010 20:45:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50508 invoked by uid 500); 11 Oct 2010 20:45:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50500 invoked by uid 99); 11 Oct 2010 20:45:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 20:45:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Oct 2010 20:45:42 +0000
Received: by qyk29 with SMTP id 29so5284018qyk.14
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 13:45:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=L6TkrzIDOYkAxfdPyf6JdMMMV8AzqJw5DFfg4j/g1rk=;
        b=rHW0njwHfEGULdFvfdzHxAGEqkDXdGMtTuzFnytieYauJRnvF4HB8LFUuVfuxXFkX8
         4O0+nMEPe5O7kP1WMna1n0tsfytH4mpFQ1xfp1pjPLokXA2nZlpiuRljUScc8U9LOpJT
         rKbj0p4g3IeH12pPnf4oeVz5l0Fj5qVhtWjgU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YKMc4g9eAt4hFeNkHubCxqPZNXkoIGJSrykVeLjSwp45dMrfh4YIm9J4OFimDo1mJD
         aWQU76NHC8S8EAIUcGhMQ6zU1GmzKI6cTlwXKcEbBKxTx5Fe+NvL8S4hkrNTV7wsroF5
         0xS+G8/RHlkHf5kz/38YLM66Aj6nfvdMe4Uqg=
MIME-Version: 1.0
Received: by 10.229.221.131 with SMTP id ic3mr5492297qcb.152.1286829920802;
 Mon, 11 Oct 2010 13:45:20 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Mon, 11 Oct 2010 13:45:20 -0700 (PDT)
In-Reply-To: <AANLkTikSCCWD7R7js9Rw4m9TKcNcA0Bk7Nim5DvbipWd@mail.gmail.com>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
	<AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
	<AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
	<AANLkTikJqgyv3zZ5GSLZHrVLDA9XXyd1Ah98LZ-W9Ovc@mail.gmail.com>
	<AANLkTimSJYn=UhybgxpT5uBhVBekmEdSM8N+PLOJLJqq@mail.gmail.com>
	<AANLkTikSCCWD7R7js9Rw4m9TKcNcA0Bk7Nim5DvbipWd@mail.gmail.com>
Date: Mon, 11 Oct 2010 16:45:20 -0400
Message-ID: <AANLkTi=gvrq7=3gQ-b4HxK8rbE1EDoeGK2w3w-zZ=vjW@mail.gmail.com>
Subject: Re: flushing index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362841a450d82b04925d70a3

--0016362841a450d82b04925d70a3
Content-Type: text/plain; charset=ISO-8859-1

It's a good idea to start a new thread when asking a different question,
see:
http://people.apache.org/~hossman/#threadhijack

<http://people.apache.org/~hossman/#threadhijack>I have to ask why you want
to integrate the RAM directory. If you're using it
to speed up indexing, you're probably making way more work for yourself
than you need to. If you're trying to do something with Near Real Time, one
suggestion is to just not bother. Add docs to the RAM directory AND your
FSDirectory simultaneously. The data you index to FSDir won't be visible
until you reopen the FSDir reader, so your flush could then be just
reopen everything...

Best
Erick

On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org> wrote:

> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
> > Nope, never used jNotify, so I don't have any code handy...
> >
> > Good luck!
> > Erick
> >
>
> so I did try JNotify but there is seems to be some bug in it that I
> find it hards to integrate in my lucene source code.so I had to try a
> looping option instead.
>
>
> http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify
>
> so anyway, I had another question now. I was trying to make a lucene
> source code that can do indexing and store them first in a memory
> using RAMDirectory and then flush this index in a memory into a disk
> using FSDirectory. I had done some modifications of this code but to
> no avail. maybe some of you can help me out a bit.
> here is the source code again.
>
> import java.io.File;
> import java.io.FileReader;
> import java.io.IOException;
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.FSDirectory;
>
>
> public class SimpleFileIndexer {
>
>
>        public static void main(String[] args) throws Exception   {
>
>                 int i=0;
>                while(i<10) {
>                 File indexDir = new
> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>                File dataDir = new
> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>                String suffix = "txt";
>
>                SimpleFileIndexer indexer = new SimpleFileIndexer();
>
>                int numIndex = indexer.index(indexDir, dataDir, suffix);
>
>                System.out.println("Total files indexed " + numIndex);
>                 i++;
>                Thread.sleep(10000);
>
>                }
>        }
>
>
>
>        private int index(File indexDir, File dataDir, String suffix) throws
> Exception {
>
>                IndexWriter indexWriter = new IndexWriter(
>                                FSDirectory.open(indexDir),
>                                new SimpleAnalyzer(),
>                                true,
>                                IndexWriter.MaxFieldLength.LIMITED);
>                indexWriter.setUseCompoundFile(false);
>
>                indexDirectory(indexWriter, dataDir, suffix);
>
>                int numIndexed = indexWriter.maxDoc();
>                indexWriter.optimize();
>                indexWriter.close();
>
>                return numIndexed;
>
>        }
>
>        private void indexDirectory(IndexWriter indexWriter, File dataDir,
> String suffix) throws IOException {
>                File[] files = dataDir.listFiles();
>                for (int i = 0; i < files.length; i++) {
>                        File f = files[i];
>                        if (f.isDirectory()) {
>                                indexDirectory(indexWriter, f, suffix);
>                        }
>                        else {
>                                indexFileWithIndexWriter(indexWriter, f,
> suffix);
>                        }
>                }
>        }
>
>        private void indexFileWithIndexWriter(IndexWriter indexWriter, File
> f, String suffix) throws IOException {
>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
> !f.exists()) {
>                        return;
>                }
>                if (suffix!=null && !f.getName().endsWith(suffix)) {
>                        return;
>                }
>                System.out.println("Indexing file " + f.getCanonicalPath());
>
>                Document doc = new Document();
>                doc.add(new Field("contents", new FileReader(f)));
>                doc.add(new Field("filename", f.getCanonicalPath(),
> Field.Store.YES,
> Field.Index.ANALYZED));
>
>                indexWriter.addDocument(doc);
>        }
>
> }
>
> so what's the best way for me to integrate RAMDirectory in that source
> code before putting them in FSDirectory. any help would be appreciated
> though.
> thanks
>
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016362841a450d82b04925d70a3--

From java-user-return-47449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 01:37:41 2010
Return-Path: <java-user-return-47449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63315 invoked from network); 12 Oct 2010 01:37:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 01:37:40 -0000
Received: (qmail 19756 invoked by uid 500); 12 Oct 2010 01:37:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19500 invoked by uid 500); 12 Oct 2010 01:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19492 invoked by uid 99); 12 Oct 2010 01:37:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 01:37:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 01:37:34 +0000
Received: by gxk1 with SMTP id 1so758032gxk.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 18:37:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.169.7 with SMTP id r7mr7292355ybe.403.1286847432687; Mon,
 11 Oct 2010 18:37:12 -0700 (PDT)
Received: by 10.150.191.10 with HTTP; Mon, 11 Oct 2010 18:37:12 -0700 (PDT)
Date: Tue, 12 Oct 2010 08:37:12 +0700
Message-ID: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
Subject: integrating RAMDirectory in FSDirectory
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

well actually I am doing a kind of a thesis regarding information
retrieval.and my tutor wanted me to be able to create a program that
firstly index a document in memory using RAMDirectory and then
flushing it to disk using FSDirectory periodically. I was having a
hard time implementing it in my source code. so that's why I am asking
what's the best way to put RAMDirectory methods in the source code
below? maybe you can give me an idea.eventhough I know it'll take
longer time to index due to the use of RAMDirectory and FSDirectory
but nonetheless I'd still be interested in how to integrate
RAMDirectory into FSDirectory.

thanks

PS : regarding the hijack thread, I thought because I was the one who
created it so I think I could hijack it.but thanks for the advice
though and now I am creating a new thread. :-)

On 10/12/10, Erick Erickson <erickerickson@gmail.com> wrote:
> It's a good idea to start a new thread when asking a different question,
> see:
> http://people.apache.org/~hossman/#threadhijack
>
> <http://people.apache.org/~hossman/#threadhijack>I have to ask why you want
> to integrate the RAM directory. If you're using it
> to speed up indexing, you're probably making way more work for yourself
> than you need to. If you're trying to do something with Near Real Time, one
> suggestion is to just not bother. Add docs to the RAM directory AND your
> FSDirectory simultaneously. The data you index to FSDir won't be visible
> until you reopen the FSDir reader, so your flush could then be just
> reopen everything...
>
> Best
> Erick
>
> On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org> wrote:
>
>> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
>> > Nope, never used jNotify, so I don't have any code handy...
>> >
>> > Good luck!
>> > Erick
>> >
>>
>> so I did try JNotify but there is seems to be some bug in it that I
>> find it hards to integrate in my lucene source code.so I had to try a
>> looping option instead.
>>
>>
>> http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify
>>
>> so anyway, I had another question now. I was trying to make a lucene
>> source code that can do indexing and store them first in a memory
>> using RAMDirectory and then flush this index in a memory into a disk
>> using FSDirectory. I had done some modifications of this code but to
>> no avail. maybe some of you can help me out a bit.
>> here is the source code again.
>>
>> import java.io.File;
>> import java.io.FileReader;
>> import java.io.IOException;
>> import org.apache.lucene.analysis.SimpleAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.store.FSDirectory;
>>
>>
>> public class SimpleFileIndexer {
>>
>>
>>        public static void main(String[] args) throws Exception   {
>>
>>                 int i=0;
>>                while(i<10) {
>>                 File indexDir = new
>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>                File dataDir = new
>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>                String suffix = "txt";
>>
>>                SimpleFileIndexer indexer = new SimpleFileIndexer();
>>
>>                int numIndex = indexer.index(indexDir, dataDir, suffix);
>>
>>                System.out.println("Total files indexed " + numIndex);
>>                 i++;
>>                Thread.sleep(10000);
>>
>>                }
>>        }
>>
>>
>>
>>        private int index(File indexDir, File dataDir, String suffix)
>> throws
>> Exception {
>>
>>                IndexWriter indexWriter = new IndexWriter(
>>                                FSDirectory.open(indexDir),
>>                                new SimpleAnalyzer(),
>>                                true,
>>                                IndexWriter.MaxFieldLength.LIMITED);
>>                indexWriter.setUseCompoundFile(false);
>>
>>                indexDirectory(indexWriter, dataDir, suffix);
>>
>>                int numIndexed = indexWriter.maxDoc();
>>                indexWriter.optimize();
>>                indexWriter.close();
>>
>>                return numIndexed;
>>
>>        }
>>
>>        private void indexDirectory(IndexWriter indexWriter, File dataDir,
>> String suffix) throws IOException {
>>                File[] files = dataDir.listFiles();
>>                for (int i = 0; i < files.length; i++) {
>>                        File f = files[i];
>>                        if (f.isDirectory()) {
>>                                indexDirectory(indexWriter, f, suffix);
>>                        }
>>                        else {
>>                                indexFileWithIndexWriter(indexWriter, f,
>> suffix);
>>                        }
>>                }
>>        }
>>
>>        private void indexFileWithIndexWriter(IndexWriter indexWriter, File
>> f, String suffix) throws IOException {
>>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
>> !f.exists()) {
>>                        return;
>>                }
>>                if (suffix!=null && !f.getName().endsWith(suffix)) {
>>                        return;
>>                }
>>                System.out.println("Indexing file " +
>> f.getCanonicalPath());
>>
>>                Document doc = new Document();
>>                doc.add(new Field("contents", new FileReader(f)));
>>                doc.add(new Field("filename", f.getCanonicalPath(),
>> Field.Store.YES,
>> Field.Index.ANALYZED));
>>
>>                indexWriter.addDocument(doc);
>>        }
>>
>> }
>>
>> so what's the best way for me to integrate RAMDirectory in that source
>> code before putting them in FSDirectory. any help would be appreciated
>> though.
>> thanks
>>
>>
>> --
>> http://jacobian.web.id
>>


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 05:25:32 2010
Return-Path: <java-user-return-47450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32039 invoked from network); 12 Oct 2010 05:25:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 05:25:32 -0000
Received: (qmail 94346 invoked by uid 500); 12 Oct 2010 05:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93984 invoked by uid 500); 12 Oct 2010 05:25:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93976 invoked by uid 99); 12 Oct 2010 05:25:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 05:25:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of castagna.lists@googlemail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 05:25:19 +0000
Received: by wyb38 with SMTP id 38so3547049wyb.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 22:24:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=hn8yti/aN3v62XroG+I8MVplMJxRFPr66DCvUGjnW0c=;
        b=tocb9epqXsHgOd5bj8Wlo54+fIaYutuxSfUTlmED8jH2VNePn6KGstpEPuB3M7a8y7
         mPsJvcqFmDXhAmPXx6tzbLHzya/6Ph+7eQRYjqrmUeAvrtHjPLRT22C1KGb0o6P4iTkC
         HG/IQ7/a4aS0g52OqSH0oMwdI0wSw4K9Q9zEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=G30iZqnv8QktuVVxoxnnxEA05HHeDNoK8AZdDQjlszHD/zhNPX4qETM3HNukEgIuab
         aztvx3Gx8s0R15Mqc2nKddIUjusPHtTfHgFTQaWMHM+XHsSPacvwewn0rxqcTT/xuWBO
         +mQRMMIH48LqaxC7OBe+LvtpgU8l7ISIVGZAQ=
Received: by 10.227.153.208 with SMTP id l16mr6400019wbw.199.1286861098548;
        Mon, 11 Oct 2010 22:24:58 -0700 (PDT)
Received: from [192.168.1.10] (79-66-210-219.dynamic.dsl.as9105.com [79.66.210.219])
        by mx.google.com with ESMTPS id h29sm6744122wbc.9.2010.10.11.22.24.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 11 Oct 2010 22:24:57 -0700 (PDT)
Message-ID: <4CB3F127.40209@googlemail.com>
Date: Tue, 12 Oct 2010 06:24:55 +0100
From: Paolo Castagna <castagna.lists@googlemail.com>
User-Agent: Thunderbird 2.0.0.24 (X11/20100411)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Why Lucene in Action, 2nd Edition isn't available on sale (new) on
 Amazon UK?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am curious. Do you know why the book Lucene in Action, Second Edition
is not available on sale (as new) on Amazon UK?
http://www.amazon.co.uk/Lucene-Action-Michael-McCandless/dp/1933988177

Do you know where else I could buy it in UK?

Thank you,
Paolo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 05:39:40 2010
Return-Path: <java-user-return-47451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39823 invoked from network); 12 Oct 2010 05:39:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 05:39:39 -0000
Received: (qmail 6307 invoked by uid 500); 12 Oct 2010 05:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6178 invoked by uid 500); 12 Oct 2010 05:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6170 invoked by uid 99); 12 Oct 2010 05:39:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 05:39:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Oct 2010 05:39:30 +0000
Received: (qmail 6665 invoked by uid 508); 12 Oct 2010 05:39:04 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=iDz19bnWvmYlr1Mft25YQiYPTDMCdkdlLpgDmiGwyxpK63NvnxrKnYvhpnKd8UO/  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 12 Oct 2010 05:39:04 -0000
MIME-Version: 1.0
Date: Tue, 12 Oct 2010 11:09:04 +0530
From: <suman.holani@zapak.co.in>
To: <java-user@lucene.apache.org>
Subject: Re: integrating RAMDirectory in FSDirectory or other way round
In-Reply-To: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
References: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
Message-ID: <433f7e5abc523d7c5db4886e82f40f7d@localhost>
X-Sender: suman.holani@zapak.co.in
User-Agent: RoundCube Webmail/0.3.1
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8


I am also having a similar requirement .But its other way round.

Basically ,I have indexes in FSDirectory and which is transferred to
another machine on regular basis. But now for the reason of faster
searches, it would be better to copy the indexes onto RAM. (RAMDirectory).

Not sure of how it can be achieved.


TIA!


regds,
Suman



On Tue, 12 Oct 2010 08:37:12 +0700, Yakob <jacobian@opensuse-id.org>
wrote:
> well actually I am doing a kind of a thesis regarding information
> retrieval.and my tutor wanted me to be able to create a program that
> firstly index a document in memory using RAMDirectory and then
> flushing it to disk using FSDirectory periodically. I was having a
> hard time implementing it in my source code. so that's why I am asking
> what's the best way to put RAMDirectory methods in the source code
> below? maybe you can give me an idea.eventhough I know it'll take
> longer time to index due to the use of RAMDirectory and FSDirectory
> but nonetheless I'd still be interested in how to integrate
> RAMDirectory into FSDirectory.
> 
> thanks
> 
> PS : regarding the hijack thread, I thought because I was the one who
> created it so I think I could hijack it.but thanks for the advice
> though and now I am creating a new thread. :-)
> 
> On 10/12/10, Erick Erickson <erickerickson@gmail.com> wrote:
>> It's a good idea to start a new thread when asking a different
question,
>> see:
>> http://people.apache.org/~hossman/#threadhijack
>>
>> <http://people.apache.org/~hossman/#threadhijack>I have to ask why you
>> want
>> to integrate the RAM directory. If you're using it
>> to speed up indexing, you're probably making way more work for yourself
>> than you need to. If you're trying to do something with Near Real Time,
>> one
>> suggestion is to just not bother. Add docs to the RAM directory AND
your
>> FSDirectory simultaneously. The data you index to FSDir won't be
visible
>> until you reopen the FSDir reader, so your flush could then be just
>> reopen everything...
>>
>> Best
>> Erick
>>
>> On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org>
wrote:
>>
>>> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
>>> > Nope, never used jNotify, so I don't have any code handy...
>>> >
>>> > Good luck!
>>> > Erick
>>> >
>>>
>>> so I did try JNotify but there is seems to be some bug in it that I
>>> find it hards to integrate in my lucene source code.so I had to try a
>>> looping option instead.
>>>
>>>
>>>
http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify
>>>
>>> so anyway, I had another question now. I was trying to make a lucene
>>> source code that can do indexing and store them first in a memory
>>> using RAMDirectory and then flush this index in a memory into a disk
>>> using FSDirectory. I had done some modifications of this code but to
>>> no avail. maybe some of you can help me out a bit.
>>> here is the source code again.
>>>
>>> import java.io.File;
>>> import java.io.FileReader;
>>> import java.io.IOException;
>>> import org.apache.lucene.analysis.SimpleAnalyzer;
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.store.FSDirectory;
>>>
>>>
>>> public class SimpleFileIndexer {
>>>
>>>
>>>        public static void main(String[] args) throws Exception   {
>>>
>>>                 int i=0;
>>>                while(i<10) {
>>>                 File indexDir = new
>>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>>                File dataDir = new
>>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>>                String suffix = "txt";
>>>
>>>                SimpleFileIndexer indexer = new SimpleFileIndexer();
>>>
>>>                int numIndex = indexer.index(indexDir, dataDir,
suffix);
>>>
>>>                System.out.println("Total files indexed " + numIndex);
>>>                 i++;
>>>                Thread.sleep(10000);
>>>
>>>                }
>>>        }
>>>
>>>
>>>
>>>        private int index(File indexDir, File dataDir, String suffix)
>>> throws
>>> Exception {
>>>
>>>                IndexWriter indexWriter = new IndexWriter(
>>>                                FSDirectory.open(indexDir),
>>>                                new SimpleAnalyzer(),
>>>                                true,
>>>                                IndexWriter.MaxFieldLength.LIMITED);
>>>                indexWriter.setUseCompoundFile(false);
>>>
>>>                indexDirectory(indexWriter, dataDir, suffix);
>>>
>>>                int numIndexed = indexWriter.maxDoc();
>>>                indexWriter.optimize();
>>>                indexWriter.close();
>>>
>>>                return numIndexed;
>>>
>>>        }
>>>
>>>        private void indexDirectory(IndexWriter indexWriter, File
>>>        dataDir,
>>> String suffix) throws IOException {
>>>                File[] files = dataDir.listFiles();
>>>                for (int i = 0; i < files.length; i++) {
>>>                        File f = files[i];
>>>                        if (f.isDirectory()) {
>>>                                indexDirectory(indexWriter, f, suffix);
>>>                        }
>>>                        else {
>>>                                indexFileWithIndexWriter(indexWriter,
f,
>>> suffix);
>>>                        }
>>>                }
>>>        }
>>>
>>>        private void indexFileWithIndexWriter(IndexWriter indexWriter,
>>>        File
>>> f, String suffix) throws IOException {
>>>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
>>> !f.exists()) {
>>>                        return;
>>>                }
>>>                if (suffix!=null && !f.getName().endsWith(suffix)) {
>>>                        return;
>>>                }
>>>                System.out.println("Indexing file " +
>>> f.getCanonicalPath());
>>>
>>>                Document doc = new Document();
>>>                doc.add(new Field("contents", new FileReader(f)));
>>>                doc.add(new Field("filename", f.getCanonicalPath(),
>>> Field.Store.YES,
>>> Field.Index.ANALYZED));
>>>
>>>                indexWriter.addDocument(doc);
>>>        }
>>>
>>> }
>>>
>>> so what's the best way for me to integrate RAMDirectory in that source
>>> code before putting them in FSDirectory. any help would be appreciated
>>> though.
>>> thanks
>>>
>>>
>>> --
>>> http://jacobian.web.id
>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 05:59:15 2010
Return-Path: <java-user-return-47452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44512 invoked from network); 12 Oct 2010 05:59:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 05:59:15 -0000
Received: (qmail 19653 invoked by uid 500); 12 Oct 2010 05:59:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19211 invoked by uid 500); 12 Oct 2010 05:59:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19198 invoked by uid 99); 12 Oct 2010 05:59:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 05:59:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 05:59:04 +0000
Received: by qwf7 with SMTP id 7so135154qwf.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 22:58:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=oOJFNp+kwNoPOaBuMqUCbcp6SZDCJ+EnxyysKaFYUzU=;
        b=Y7C0CM+FhpaOgw55O+fuJ7w5G1xcyLIoK78p4kBvVsoSwnx28R22fbESxn6xQivBMb
         gcEzCoMLsT3PRUXaCMsFtKnT4cHVpw550jGT9veTq+SW1e+SU0P2MrvM9rW8x5LyA+MA
         bouJAKtR+dpcfNg2HfMAeMg+u9wol4dc/8nBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=gfwEehYii/dBH9bJPZ88+1bfgrGrh8e336t/mvowe6H8M2w9XlY3gq9205xkV6fGHQ
         mTob1XcjARlLOyM6NGcy41C3I+YF+QcQ37xCl15GW7wR+5S3bLW2wqwo91vpbx8OPrDs
         yMz7vXVab5FakceHNieGAd22Vpvj7gWGUuhtw=
Received: by 10.224.11.6 with SMTP id r6mr4551063qar.194.1286863117563; Mon,
 11 Oct 2010 22:58:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Mon, 11 Oct 2010 22:58:17 -0700 (PDT)
In-Reply-To: <433f7e5abc523d7c5db4886e82f40f7d@localhost>
References: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com> <433f7e5abc523d7c5db4886e82f40f7d@localhost>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 12 Oct 2010 06:58:17 +0100
Message-ID: <AANLkTinWy3HpAeJRHJWh0chHJvmMXZKD-tPOxT7hhFnh@mail.gmail.com>
Subject: Re: integrating RAMDirectory in FSDirectory or other way round
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Start by reading the javadocs for RAMDirectory.


--
Ian.


On Tue, Oct 12, 2010 at 6:39 AM,  <suman.holani@zapak.co.in> wrote:
>
> I am also having a similar requirement .But its other way round.
>
> Basically ,I have indexes in FSDirectory and which is transferred to
> another machine on regular basis. But now for the reason of faster
> searches, it would be better to copy the indexes onto RAM. (RAMDirectory)=
.
>
> Not sure of how it can be achieved.
>
>
> TIA!
>
>
> regds,
> Suman
>
>
>
> On Tue, 12 Oct 2010 08:37:12 +0700, Yakob <jacobian@opensuse-id.org>
> wrote:
>> well actually I am doing a kind of a thesis regarding information
>> retrieval.and my tutor wanted me to be able to create a program that
>> firstly index a document in memory using RAMDirectory and then
>> flushing it to disk using FSDirectory periodically. I was having a
>> hard time implementing it in my source code. so that's why I am asking
>> what's the best way to put RAMDirectory methods in the source code
>> below? maybe you can give me an idea.eventhough I know it'll take
>> longer time to index due to the use of RAMDirectory and FSDirectory
>> but nonetheless I'd still be interested in how to integrate
>> RAMDirectory into FSDirectory.
>>
>> thanks
>>
>> PS : regarding the hijack thread, I thought because I was the one who
>> created it so I think I could hijack it.but thanks for the advice
>> though and now I am creating a new thread. :-)
>>
>> On 10/12/10, Erick Erickson <erickerickson@gmail.com> wrote:
>>> It's a good idea to start a new thread when asking a different
> question,
>>> see:
>>> http://people.apache.org/~hossman/#threadhijack
>>>
>>> <http://people.apache.org/~hossman/#threadhijack>I have to ask why you
>>> want
>>> to integrate the RAM directory. If you're using it
>>> to speed up indexing, you're probably making way more work for yourself
>>> than you need to. If you're trying to do something with Near Real Time,
>>> one
>>> suggestion is to just not bother. Add docs to the RAM directory AND
> your
>>> FSDirectory simultaneously. The data you index to FSDir won't be
> visible
>>> until you reopen the FSDir reader, so your flush could then be just
>>> reopen everything...
>>>
>>> Best
>>> Erick
>>>
>>> On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org>
> wrote:
>>>
>>>> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
>>>> > Nope, never used jNotify, so I don't have any code handy...
>>>> >
>>>> > Good luck!
>>>> > Erick
>>>> >
>>>>
>>>> so I did try JNotify but there is seems to be some bug in it that I
>>>> find it hards to integrate in my lucene source code.so I had to try a
>>>> looping option instead.
>>>>
>>>>
>>>>
> http://stackoverflow.com/questions/3840844/error-exception-access-violati=
on-in-jnotify
>>>>
>>>> so anyway, I had another question now. I was trying to make a lucene
>>>> source code that can do indexing and store them first in a memory
>>>> using RAMDirectory and then flush this index in a memory into a disk
>>>> using FSDirectory. I had done some modifications of this code but to
>>>> no avail. maybe some of you can help me out a bit.
>>>> here is the source code again.
>>>>
>>>> import java.io.File;
>>>> import java.io.FileReader;
>>>> import java.io.IOException;
>>>> import org.apache.lucene.analysis.SimpleAnalyzer;
>>>> import org.apache.lucene.document.Document;
>>>> import org.apache.lucene.document.Field;
>>>> import org.apache.lucene.index.IndexWriter;
>>>> import org.apache.lucene.store.FSDirectory;
>>>>
>>>>
>>>> public class SimpleFileIndexer {
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0public static void main(String[] args) throws Exception=
 =A0 {
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 int i=3D0;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while(i<10) {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 File indexDir =3D new
>>>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0File dataDir =3D new
>>>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String suffix =3D "txt";
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0SimpleFileIndexer indexer =3D new Simpl=
eFileIndexer();
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0int numIndex =3D indexer.index(indexDir=
, dataDir,
> suffix);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("Total files indexed=
 " + numIndex);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 i++;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Thread.sleep(10000);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0}
>>>>
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0private int index(File indexDir, File dataDir, String s=
uffix)
>>>> throws
>>>> Exception {
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWriter indexWriter =3D new IndexWr=
iter(
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FSDirec=
tory.open(indexDir),
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0new Sim=
pleAnalyzer(),
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0true,
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWr=
iter.MaxFieldLength.LIMITED);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.setUseCompoundFile(false);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexDirectory(indexWriter, dataDir, su=
ffix);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0int numIndexed =3D indexWriter.maxDoc()=
;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.optimize();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.close();
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return numIndexed;
>>>>
>>>> =A0 =A0 =A0 =A0}
>>>>
>>>> =A0 =A0 =A0 =A0private void indexDirectory(IndexWriter indexWriter, Fi=
le
>>>> =A0 =A0 =A0 =A0dataDir,
>>>> String suffix) throws IOException {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0File[] files =3D dataDir.listFiles();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < files.length; i++=
) {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0File f =3D files[i];
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (f.isDirectory()) {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexDi=
rectory(indexWriter, f, suffix);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexFi=
leWithIndexWriter(indexWriter,
> f,
>>>> suffix);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0}
>>>>
>>>> =A0 =A0 =A0 =A0private void indexFileWithIndexWriter(IndexWriter index=
Writer,
>>>> =A0 =A0 =A0 =A0File
>>>> f, String suffix) throws IOException {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (f.isHidden() || f.isDirectory() || =
!f.canRead() ||
>>>> !f.exists()) {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (suffix!=3Dnull && !f.getName().ends=
With(suffix)) {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println("Indexing file " +
>>>> f.getCanonicalPath());
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D new Document();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("contents", new FileR=
eader(f)));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("filename", f.getCano=
nicalPath(),
>>>> Field.Store.YES,
>>>> Field.Index.ANALYZED));
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
>>>> =A0 =A0 =A0 =A0}
>>>>
>>>> }
>>>>
>>>> so what's the best way for me to integrate RAMDirectory in that source
>>>> code before putting them in FSDirectory. any help would be appreciated
>>>> though.
>>>> thanks
>>>>
>>>>
>>>> --
>>>> http://jacobian.web.id
>>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 06:05:01 2010
Return-Path: <java-user-return-47453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45951 invoked from network); 12 Oct 2010 06:05:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 06:05:00 -0000
Received: (qmail 26139 invoked by uid 500); 12 Oct 2010 06:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26005 invoked by uid 500); 12 Oct 2010 06:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25997 invoked by uid 99); 12 Oct 2010 06:04:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:04:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:04:50 +0000
Received: by qwf7 with SMTP id 7so137211qwf.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 23:04:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=4R2v942E8AFkM0hkVyJpjenuBoIJkwEdE+UVpBaXh5w=;
        b=rFdpEO5lpPArf5axEtLn5Of+su4d8thhYOVQLLgw878dqw7b/+WO7o7snVpPrIlEGq
         PHnvN1+SUI55Y2M0Zeov1mvJb149twXQz2gxpea/x3+2iEvmWYogZ1xJydK4tgUjXi24
         ywA2Bts0cLeUL7FQFqJkNHWx4TePNESpfPAqY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=x/pSpfY6pkE7r6DZDxSKryR51aBp4ilXCY5dzQ2ZUJOPbYLJEk5uPMMFzFwgbkf99C
         zu1DAt3Trx3KEGQD2n5OLcXe5hR74SMUd9zXD2LuIb6vRZ77+gP1y5dFCzCNA1VAei95
         ExCN8V39JbO8LWUAlRdmnGSsalg+cidq/iCRA=
Received: by 10.229.189.131 with SMTP id de3mr5899900qcb.183.1286863467900;
 Mon, 11 Oct 2010 23:04:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Mon, 11 Oct 2010 23:04:06 -0700 (PDT)
In-Reply-To: <4CB3F127.40209@googlemail.com>
References: <4CB3F127.40209@googlemail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 12 Oct 2010 07:04:06 +0100
Message-ID: <AANLkTikp4jQB4jPomEgXVivCU6kJjtHNoHQ5xhNSaOdr@mail.gmail.com>
Subject: Re: Why Lucene in Action, 2nd Edition isn't available on sale (new)
 on Amazon UK?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I don't know why Amazon don't have it new.  You can buy it from
Blackwell's. http://bookshop.blackwell.co.uk/jsp/id/Lucene_in_Action/9781933988177


--
Ian.


On Tue, Oct 12, 2010 at 6:24 AM, Paolo Castagna
<castagna.lists@googlemail.com> wrote:
> Hi,
> I am curious. Do you know why the book Lucene in Action, Second Edition
> is not available on sale (as new) on Amazon UK?
> http://www.amazon.co.uk/Lucene-Action-Michael-McCandless/dp/1933988177
>
> Do you know where else I could buy it in UK?
>
> Thank you,
> Paolo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 06:06:40 2010
Return-Path: <java-user-return-47454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50601 invoked from network); 12 Oct 2010 06:06:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 06:06:40 -0000
Received: (qmail 29959 invoked by uid 500); 12 Oct 2010 06:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29759 invoked by uid 500); 12 Oct 2010 06:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29751 invoked by uid 99); 12 Oct 2010 06:06:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:06:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:06:30 +0000
Received: by qwf7 with SMTP id 7so137838qwf.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 23:06:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=ZsBFaG8/Fx3hpm3uSuxxImcdjq1yGRThGVGwm0vv2BY=;
        b=uPNNmpiuRSwQUUNIpAIx4PrfzyEwClQwMGODtc6/ZVp/Axfd30vj4VKjLLLoMcExVT
         scyFYmsONqR4wCDQS86LdT2LDfippYA4qH4iBQWFaAb1v8J906adAZUX8u5NOccU5JLh
         u0khWdQn+9gaNAFKyYrCgXBOyFzYsvrGJNUB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Ke9QcLA7kzaJU0TSjxaKWaN0GQApFU/D+cqHXt549eeBNUPh+ylXcOferxemIpeWn2
         P7yHznUUyd8RIew1CikACmQhZUtHww0WxA8AIW6Z6bxhqDSi/MT/O7mYn2k/ocx/YY6K
         Ah/PsVChCEFfP5/Ei64g0/s6KkIA0oXaiYjUs=
Received: by 10.229.214.13 with SMTP id gy13mr5914582qcb.155.1286863567175;
 Mon, 11 Oct 2010 23:06:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.195.106 with HTTP; Mon, 11 Oct 2010 23:05:47 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Mon, 11 Oct 2010 23:05:47 -0700
Message-ID: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com>
Subject: Update lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e834acbc03604926545cf

--0016361e834acbc03604926545cf
Content-Type: text/plain; charset=ISO-8859-1

Hi Group,

I understand that the process of updating a document in lucene index is to
delete the document and add it again. But I do not want to delete the
document.

I was thinking of a approach where I can create a new index with only the
fields I want to update. And then may be I can some how merge these two
indexes. I

I read about multiple searcher but that applies where you have two index
containing different documents. I think parallel reader might help me here
but was unable to understand clearly as I am very new to lucene.

What do you think my approach should be?

Nilesh

--0016361e834acbc03604926545cf--

From java-user-return-47455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 06:14:14 2010
Return-Path: <java-user-return-47455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53196 invoked from network); 12 Oct 2010 06:14:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 06:14:13 -0000
Received: (qmail 41569 invoked by uid 500); 12 Oct 2010 06:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41144 invoked by uid 500); 12 Oct 2010 06:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41136 invoked by uid 99); 12 Oct 2010 06:14:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:14:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:14:00 +0000
Received: by wyb38 with SMTP id 38so3575056wyb.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 23:13:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=lkD4oiadTmz6y3TyzJEj4CKyLchVXrY3YTCZobvAa2U=;
        b=p2pqV83Cutowezlw4IFPqlA6h46YlKpoJ9Xy7rW3TFz989VmUBCogZnHOAaiEanXH/
         qMT6CVne+HqkoJw5pAiGpVVZaYxjbpuDcp5+sM+axHB4loGMFf/rnetp+XSMFZUUCvd4
         NBGZ9tmo0dzNnio0DQ5hqrmz9Dti1U6NGaVIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=JYIRWV9wd3VwP+/AIW/gRHLqPYkto8FVottvkhsW+WH7LkLTXKnYv4+XoKqw/oBD0o
         5GMf9fVncZD5DB7fxFmCO6a8EBHOpto/nCSSZF/bhPDTYvpVHRJ5AMiCHF3YKNINQ0AV
         FGbCdAum7M80YA7WF1/RBf22AzAeeurd9yzNk=
Received: by 10.227.135.211 with SMTP id o19mr6529855wbt.73.1286864019755;
 Mon, 11 Oct 2010 23:13:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.150.194 with HTTP; Mon, 11 Oct 2010 23:13:19 -0700 (PDT)
In-Reply-To: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com>
References: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 12 Oct 2010 11:43:19 +0530
Message-ID: <AANLkTikfCMHesf8mRc+kHz=qpQcU0Wf+=ATR56RtBTx8@mail.gmail.com>
Subject: Re: Update lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65b5ee0c5931d04926560d8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65b5ee0c5931d04926560d8
Content-Type: text/plain; charset=ISO-8859-1

So what you essentially want is still being able to update a document. To
update a particular field in the lucene doc, you'd need to mark that field
as updated/deleted and create a new document with new field information
(that somehow gets merged while searching or gets taken care of in a similar
manner). This as of now is not possible, and even if you were to do it using
some logical workaround, it'd be much better to take the approach of just
adding another doc and deleting the current one completely (marking it
deleted unless you need to optimize).
So by the way, is there a reason for you wanting to do so? is it that you
only index data coming from a stream and you don't have access to the
original source at a later time?

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Oct 12, 2010 at 11:35 AM, Nilesh Vijaywargiay <
nilesh.vijay@gmail.com> wrote:

> Hi Group,
>
> I understand that the process of updating a document in lucene index is to
> delete the document and add it again. But I do not want to delete the
> document.
>
> I was thinking of a approach where I can create a new index with only the
> fields I want to update. And then may be I can some how merge these two
> indexes. I
>
> I read about multiple searcher but that applies where you have two index
> containing different documents. I think parallel reader might help me here
> but was unable to understand clearly as I am very new to lucene.
>
> What do you think my approach should be?
>
> Nilesh
>

--0016e65b5ee0c5931d04926560d8--

From java-user-return-47456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 06:20:02 2010
Return-Path: <java-user-return-47456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54424 invoked from network); 12 Oct 2010 06:20:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 06:20:01 -0000
Received: (qmail 47951 invoked by uid 500); 12 Oct 2010 06:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47917 invoked by uid 500); 12 Oct 2010 06:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47901 invoked by uid 99); 12 Oct 2010 06:19:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:19:58 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:19:52 +0000
Received: by qwf7 with SMTP id 7so143030qwf.35
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 23:19:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=qcyvn0rExc1n0mhjjXeUTi1x3iq2uGEljcvZAmSvBWo=;
        b=DSXP9ch0g++S9dRe/wzRDPMPSxDfj285CML3sLWR6HJVwD/0hfGJv0XuwBXaPZ3LKp
         6o5oyyNsW2og3jXcQ7YWF8opAPUDaFnwakn+gr/4T+DWP508qj/JvfzXCRiWI1hUlo/L
         YjGcbUdQk9JoIXuEbzi34y5lv2GMDMeJ5jXW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CyNywF0J9Nq7MFh8D5Tv31E1SUCPH2323RyJeiZfCt/4mqps8iN16JlUmlhnrpFOg5
         4r/X2nRdeE+TAD0AUQhs+RW213VrpGXc8cJ9uYjstgcI+L6tJxm2ZPrZnMxVyes8N5eL
         BgtBLDFeXSASw4cJ9pHOh/cMup4Pjl6+bQhcs=
Received: by 10.229.214.13 with SMTP id gy13mr5924599qcb.155.1286864372004;
 Mon, 11 Oct 2010 23:19:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.195.106 with HTTP; Mon, 11 Oct 2010 23:19:11 -0700 (PDT)
In-Reply-To: <AANLkTikfCMHesf8mRc+kHz=qpQcU0Wf+=ATR56RtBTx8@mail.gmail.com>
References: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com> <AANLkTikfCMHesf8mRc+kHz=qpQcU0Wf+=ATR56RtBTx8@mail.gmail.com>
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Mon, 11 Oct 2010 23:19:11 -0700
Message-ID: <AANLkTi=OKPrfGUkt2acdMArBirhUkCLLRqe2HVw5ARRN@mail.gmail.com>
Subject: Re: Update lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e834ac47779049265759c

--0016361e834ac47779049265759c
Content-Type: text/plain; charset=ISO-8859-1

Anshum,
Yea, I would like to do what you mentioned. The source won't be available at
later time and also other reason I understand is that if I delete and add a
document, it would get a different ID and would return inconsistent results
later if I search index built on this documents. Does that make sense?

What do you think about ParallelReader. Is it remotely helpful here?

Nilesh


On Mon, Oct 11, 2010 at 11:13 PM, Anshum <anshumg@gmail.com> wrote:

> So what you essentially want is still being able to update a document. To
> update a particular field in the lucene doc, you'd need to mark that field
> as updated/deleted and create a new document with new field information
> (that somehow gets merged while searching or gets taken care of in a
> similar
> manner). This as of now is not possible, and even if you were to do it
> using
> some logical workaround, it'd be much better to take the approach of just
> adding another doc and deleting the current one completely (marking it
> deleted unless you need to optimize).
> So by the way, is there a reason for you wanting to do so? is it that you
> only index data coming from a stream and you don't have access to the
> original source at a later time?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Oct 12, 2010 at 11:35 AM, Nilesh Vijaywargiay <
> nilesh.vijay@gmail.com> wrote:
>
> > Hi Group,
> >
> > I understand that the process of updating a document in lucene index is
> to
> > delete the document and add it again. But I do not want to delete the
> > document.
> >
> > I was thinking of a approach where I can create a new index with only the
> > fields I want to update. And then may be I can some how merge these two
> > indexes. I
> >
> > I read about multiple searcher but that applies where you have two index
> > containing different documents. I think parallel reader might help me
> here
> > but was unable to understand clearly as I am very new to lucene.
> >
> > What do you think my approach should be?
> >
> > Nilesh
> >
>

--0016361e834ac47779049265759c--

From java-user-return-47457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 06:35:47 2010
Return-Path: <java-user-return-47457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65872 invoked from network); 12 Oct 2010 06:35:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 06:35:47 -0000
Received: (qmail 69869 invoked by uid 500); 12 Oct 2010 06:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69770 invoked by uid 500); 12 Oct 2010 06:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69762 invoked by uid 99); 12 Oct 2010 06:35:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:35:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 06:35:37 +0000
Received: by wwb22 with SMTP id 22so447990wwb.5
        for <java-user@lucene.apache.org>; Mon, 11 Oct 2010 23:35:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UXP5jqOwfu0VzM8cn1JwlHUzKPwNhyXW3d7Kgv767wo=;
        b=LyDQcAfxVRXjxQ3y8bi8DzfomxLmNaPeuGilM07JnypcprQj6CGQ9DWqtD71o4I0+G
         SNXNc2HWdLk2Uvc1Dhv2c2jQQdh+N1rwjYAg8X8uDHEryuhUJ9ElNVHSH/fEePRbZMin
         94Y5CJW7FnSFQnLequhICVXAY+WhgHcxtpmRE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=nT9yIo3odoGcqZMdw6MpdDePPCmpDLxexO/adHsdJjpATMeexbkWC1kkSHCg1cXrvx
         ++Epe55FBSurOO+g6+7eBy+sSf/sImjkuDEIvbJKa8mBReQH1DXjhpbdkn8Y7+p3UOCV
         ahvIPP2lMSTeswJ6c2NDsTRJ5FGEmOB4kZ4AA=
Received: by 10.227.152.149 with SMTP id g21mr6146287wbw.228.1286865317124;
 Mon, 11 Oct 2010 23:35:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.150.194 with HTTP; Mon, 11 Oct 2010 23:34:57 -0700 (PDT)
In-Reply-To: <AANLkTi=OKPrfGUkt2acdMArBirhUkCLLRqe2HVw5ARRN@mail.gmail.com>
References: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com>
 <AANLkTikfCMHesf8mRc+kHz=qpQcU0Wf+=ATR56RtBTx8@mail.gmail.com> <AANLkTi=OKPrfGUkt2acdMArBirhUkCLLRqe2HVw5ARRN@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 12 Oct 2010 12:04:57 +0530
Message-ID: <AANLkTik=WhPQsWUE21j-fY+bBM_mJjuoYTui=bN-4AfT@mail.gmail.com>
Subject: Re: Update lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f039b219dc80049265aed9
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f039b219dc80049265aed9
Content-Type: text/plain; charset=ISO-8859-1

ParallelReader though theoretically sounds useful, I doubt if how much the
overhead of maintaining and synchronizing the document ids would be. I
haven't used it so far, perhaps someone who's used the ParallelReader for
such a purpose on production environment/scale may help you.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Oct 12, 2010 at 11:49 AM, Nilesh Vijaywargiay <
nilesh.vijay@gmail.com> wrote:

> Anshum,
> Yea, I would like to do what you mentioned. The source won't be available
> at
> later time and also other reason I understand is that if I delete and add a
> document, it would get a different ID and would return inconsistent results
> later if I search index built on this documents. Does that make sense?
>
> What do you think about ParallelReader. Is it remotely helpful here?
>
> Nilesh
>
>
> On Mon, Oct 11, 2010 at 11:13 PM, Anshum <anshumg@gmail.com> wrote:
>
> > So what you essentially want is still being able to update a document. To
> > update a particular field in the lucene doc, you'd need to mark that
> field
> > as updated/deleted and create a new document with new field information
> > (that somehow gets merged while searching or gets taken care of in a
> > similar
> > manner). This as of now is not possible, and even if you were to do it
> > using
> > some logical workaround, it'd be much better to take the approach of just
> > adding another doc and deleting the current one completely (marking it
> > deleted unless you need to optimize).
> > So by the way, is there a reason for you wanting to do so? is it that you
> > only index data coming from a stream and you don't have access to the
> > original source at a later time?
> >
> > --
> > Anshum Gupta
> > http://ai-cafe.blogspot.com
> >
> >
> > On Tue, Oct 12, 2010 at 11:35 AM, Nilesh Vijaywargiay <
> > nilesh.vijay@gmail.com> wrote:
> >
> > > Hi Group,
> > >
> > > I understand that the process of updating a document in lucene index is
> > to
> > > delete the document and add it again. But I do not want to delete the
> > > document.
> > >
> > > I was thinking of a approach where I can create a new index with only
> the
> > > fields I want to update. And then may be I can some how merge these two
> > > indexes. I
> > >
> > > I read about multiple searcher but that applies where you have two
> index
> > > containing different documents. I think parallel reader might help me
> > here
> > > but was unable to understand clearly as I am very new to lucene.
> > >
> > > What do you think my approach should be?
> > >
> > > Nilesh
> > >
> >
>

--001485f039b219dc80049265aed9--

From java-user-return-47458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 08:06:25 2010
Return-Path: <java-user-return-47458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13580 invoked from network); 12 Oct 2010 08:06:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 08:06:25 -0000
Received: (qmail 59484 invoked by uid 500); 12 Oct 2010 08:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59308 invoked by uid 500); 12 Oct 2010 08:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59300 invoked by uid 99); 12 Oct 2010 08:06:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:06:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:06:13 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P5Zrs-0000K6-Jv
	for java-user@lucene.apache.org; Tue, 12 Oct 2010 10:05:52 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene in Action, 2nd Edition isn't available on sale (new) on Amazon UK?
Date: Tue, 12 Oct 2010 10:05:47 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <4CB3F127.40209@googlemail.com>
In-Reply-To: <4CB3F127.40209@googlemail.com>
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010121005.47951.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Am Dienstag, 12. Oktober 2010, 07:24:55 schrieb Paolo Castagna:

Hello,

> I am curious. Do you know why the book Lucene in Action, Second Edition
> is not available on sale (as new) on Amazon UK?
> http://www.amazon.co.uk/Lucene-Action-Michael-McCandless/dp/1933988177
>=20
> Do you know where else I could buy it in UK?

you can directly buy it from manning:
http://www.manning.com/hatcher2/

An you might look for coupon codes on the web before buying.

rgds
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 08:08:16 2010
Return-Path: <java-user-return-47459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13975 invoked from network); 12 Oct 2010 08:08:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 08:08:16 -0000
Received: (qmail 66062 invoked by uid 500); 12 Oct 2010 08:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65952 invoked by uid 500); 12 Oct 2010 08:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65944 invoked by uid 99); 12 Oct 2010 08:08:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:08:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:08:05 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P5Ztg-0000R7-MK
	for java-user@lucene.apache.org; Tue, 12 Oct 2010 10:07:44 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Why Lucene in Action, 2nd Edition isn't available on sale (new) on Amazon UK?
Date: Tue, 12 Oct 2010 10:07:39 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <4CB3F127.40209@googlemail.com> <201010121005.47951.hermann@informatik.uni-freiburg.de>
In-Reply-To: <201010121005.47951.hermann@informatik.uni-freiburg.de>
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010121007.40470.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Am Dienstag, 12. Oktober 2010, 10:05:47 schrieb Christoph Hermann:

Hi,

> you can directly buy it from manning:
> http://www.manning.com/hatcher2/

*arg*, wrong url. I meant the second edition of course:
http://www.manning.com/hatcher3/

rgds
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 08:19:33 2010
Return-Path: <java-user-return-47460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16129 invoked from network); 12 Oct 2010 08:19:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 08:19:33 -0000
Received: (qmail 86449 invoked by uid 500); 12 Oct 2010 08:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86189 invoked by uid 500); 12 Oct 2010 08:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86175 invoked by uid 99); 12 Oct 2010 08:19:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:19:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of castagna.lists@googlemail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:19:20 +0000
Received: by wyb38 with SMTP id 38so3658228wyb.35
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 01:19:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=kVVEtnUtYaXnt+IVBlwMlqDDnHSwJiwpZmF2x+eBfsY=;
        b=ddCgQZoZqvGfI4nSym3c9C5mTOkOcJWdVEZTSqy3TMLdhP4gr0YMnqpDBJPc8dLAU8
         vh92OIT0nnlZZfOib4KNnLbcvfr5s1Pic9tJEqNzNmtU7lSqcERKqgqFUpb5vR1JzOiB
         86usulO7rlwPieOOWOXqD68qZOVGiluzn1zqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=KhQxkpOoPUfQmShKMSLYpTlSguDCgm+Uoek3BUCPbprkRzf/IpaIBHWBKwlsvhwgF7
         Bdag8pugNx41iIVKJvtPyF0Pz4UBg5EQ+npP62Xliw65MKzDpadeRBZpK0XWUpzFnjF+
         kiJ/tnKtXgij1uZRHmTt0XLJaKSaokU9eM19k=
Received: by 10.216.45.16 with SMTP id o16mr4577970web.45.1286871539854;
        Tue, 12 Oct 2010 01:18:59 -0700 (PDT)
Received: from [192.168.1.10] (79-66-210-219.dynamic.dsl.as9105.com [79.66.210.219])
        by mx.google.com with ESMTPS id u32sm5015666weq.11.2010.10.12.01.18.58
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 12 Oct 2010 01:18:58 -0700 (PDT)
Message-ID: <4CB419F0.4050301@googlemail.com>
Date: Tue, 12 Oct 2010 09:18:56 +0100
From: Paolo Castagna <castagna.lists@googlemail.com>
User-Agent: Thunderbird 2.0.0.24 (X11/20100411)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Why Lucene in Action, 2nd Edition isn't available on sale (new)
 on Amazon UK?
References: <4CB3F127.40209@googlemail.com> <AANLkTikp4jQB4jPomEgXVivCU6kJjtHNoHQ5xhNSaOdr@mail.gmail.com>
In-Reply-To: <AANLkTikp4jQB4jPomEgXVivCU6kJjtHNoHQ5xhNSaOdr@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Ian for your quick reply.

Paolo

Ian Lea wrote:
> I don't know why Amazon don't have it new.  You can buy it from
> Blackwell's. http://bookshop.blackwell.co.uk/jsp/id/Lucene_in_Action/9781933988177
> 
> 
> --
> Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 08:27:56 2010
Return-Path: <java-user-return-47461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17678 invoked from network); 12 Oct 2010 08:27:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 08:27:55 -0000
Received: (qmail 97596 invoked by uid 500); 12 Oct 2010 08:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97253 invoked by uid 500); 12 Oct 2010 08:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97243 invoked by uid 99); 12 Oct 2010 08:27:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:27:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 08:27:45 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6ECE3D36004
	for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 10:27:21 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UKSzwJxwTLeZ for <java-user@lucene.apache.org>;
	Tue, 12 Oct 2010 10:27:09 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.76])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id DFAF5D36003
	for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 10:27:08 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CB3F127.40209@googlemail.com>
In-Reply-To: <4CB3F127.40209@googlemail.com>
Subject: RE: Why Lucene in Action, 2nd Edition isn't available on sale (new) on Amazon UK?
Date: Tue, 12 Oct 2010 10:27:54 +0200
Message-ID: <000b01cb69e7$5e068ac0$1a13a040$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQIqVh5PEJofGLsT/1qcZT+eiN4hfJJ/Im0A
Content-Language: de

In Germany it's available:
http://www.amazon.de/Lucene-Action-Michael-McCandless/dp/1933988177

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paolo Castagna [mailto:castagna.lists@googlemail.com]
> Sent: Tuesday, October 12, 2010 7:25 AM
> To: java-user@lucene.apache.org
> Subject: Why Lucene in Action, 2nd Edition isn't available on sale (new)
on
> Amazon UK?
> 
> Hi,
> I am curious. Do you know why the book Lucene in Action, Second Edition is
not
> available on sale (as new) on Amazon UK?
> http://www.amazon.co.uk/Lucene-Action-Michael-McCandless/dp/1933988177
> 
> Do you know where else I could buy it in UK?
> 
> Thank you,
> Paolo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 18:50:36 2010
Return-Path: <java-user-return-47462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34163 invoked from network); 12 Oct 2010 18:50:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 18:50:36 -0000
Received: (qmail 71032 invoked by uid 500); 12 Oct 2010 18:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70978 invoked by uid 500); 12 Oct 2010 18:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70970 invoked by uid 99); 12 Oct 2010 18:50:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 18:50:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 18:50:27 +0000
Received: by qyk29 with SMTP id 29so6817904qyk.14
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 11:50:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=gukIM29sL0ELwq3/yNYPeUL7NOpYbO20C4LHAsXpXjs=;
        b=BXU2GDWFlbKW9GhNHXWKozaEqXxZqH/HiVzO6rCG1W0sPA/DDEayOjXsi7btXLOUJ2
         0n0czwB3m5vM6E+R6mP9oLEOpOcU9/ZP797kOkhDunl5MCiEQNr9tBjIopl72K3Vwe0I
         xy+CfykJLrxGvvGrtugzX9kn28BBl778vMwYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=JQCVDdoWVIkxNsLrmHzveGF3nzRSOKkzfCLlKIUPQw4NTQhkzh6V1PWUm1p3HWFzfK
         UAVJr2NEGSob0uSbwu8mdbq7C4ndb+a+TBXiJh+vEwK2aPUqJnR+QDdosK613+0abCai
         APozG8aGjvx8851Sh7V8ZCSspuyd6FJQLuh/k=
Received: by 10.229.211.83 with SMTP id gn19mr6606936qcb.19.1286909406063;
 Tue, 12 Oct 2010 11:50:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Tue, 12 Oct 2010 11:49:45 -0700 (PDT)
In-Reply-To: <AANLkTik=WhPQsWUE21j-fY+bBM_mJjuoYTui=bN-4AfT@mail.gmail.com>
References: <AANLkTikHgx9koEMHwLLO5iXBY_YpmXH=+oHg15KP87X-@mail.gmail.com>
 <AANLkTikfCMHesf8mRc+kHz=qpQcU0Wf+=ATR56RtBTx8@mail.gmail.com>
 <AANLkTi=OKPrfGUkt2acdMArBirhUkCLLRqe2HVw5ARRN@mail.gmail.com> <AANLkTik=WhPQsWUE21j-fY+bBM_mJjuoYTui=bN-4AfT@mail.gmail.com>
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Tue, 12 Oct 2010 11:49:45 -0700
Message-ID: <AANLkTinDZRq4nu3MSOkSZxJPD9EyvA-zBuF_4QFNi+_d@mail.gmail.com>
Subject: Re: Update lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628428a01b56c04926ff2dc

--00163628428a01b56c04926ff2dc
Content-Type: text/plain; charset=ISO-8859-1

Thanks Anshum.
Any one who used parallelReader, can yo provide me with a direction for this
particular issue? May be a good example using parallelReader to solve this
kind of problem would do.



On Mon, Oct 11, 2010 at 11:34 PM, Anshum <anshumg@gmail.com> wrote:

> ParallelReader though theoretically sounds useful, I doubt if how much the
> overhead of maintaining and synchronizing the document ids would be. I
> haven't used it so far, perhaps someone who's used the ParallelReader for
> such a purpose on production environment/scale may help you.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Oct 12, 2010 at 11:49 AM, Nilesh Vijaywargiay <
> nilesh.vijay@gmail.com> wrote:
>
> > Anshum,
> > Yea, I would like to do what you mentioned. The source won't be available
> > at
> > later time and also other reason I understand is that if I delete and add
> a
> > document, it would get a different ID and would return inconsistent
> results
> > later if I search index built on this documents. Does that make sense?
> >
> > What do you think about ParallelReader. Is it remotely helpful here?
> >
> > Nilesh
> >
> >
> > On Mon, Oct 11, 2010 at 11:13 PM, Anshum <anshumg@gmail.com> wrote:
> >
> > > So what you essentially want is still being able to update a document.
> To
> > > update a particular field in the lucene doc, you'd need to mark that
> > field
> > > as updated/deleted and create a new document with new field information
> > > (that somehow gets merged while searching or gets taken care of in a
> > > similar
> > > manner). This as of now is not possible, and even if you were to do it
> > > using
> > > some logical workaround, it'd be much better to take the approach of
> just
> > > adding another doc and deleting the current one completely (marking it
> > > deleted unless you need to optimize).
> > > So by the way, is there a reason for you wanting to do so? is it that
> you
> > > only index data coming from a stream and you don't have access to the
> > > original source at a later time?
> > >
> > > --
> > > Anshum Gupta
> > > http://ai-cafe.blogspot.com
> > >
> > >
> > > On Tue, Oct 12, 2010 at 11:35 AM, Nilesh Vijaywargiay <
> > > nilesh.vijay@gmail.com> wrote:
> > >
> > > > Hi Group,
> > > >
> > > > I understand that the process of updating a document in lucene index
> is
> > > to
> > > > delete the document and add it again. But I do not want to delete the
> > > > document.
> > > >
> > > > I was thinking of a approach where I can create a new index with only
> > the
> > > > fields I want to update. And then may be I can some how merge these
> two
> > > > indexes. I
> > > >
> > > > I read about multiple searcher but that applies where you have two
> > index
> > > > containing different documents. I think parallel reader might help me
> > > here
> > > > but was unable to understand clearly as I am very new to lucene.
> > > >
> > > > What do you think my approach should be?
> > > >
> > > > Nilesh
> > > >
> > >
> >
>

--00163628428a01b56c04926ff2dc--

From java-user-return-47463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 23:20:34 2010
Return-Path: <java-user-return-47463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30187 invoked from network); 12 Oct 2010 23:20:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 23:20:34 -0000
Received: (qmail 86834 invoked by uid 500); 12 Oct 2010 23:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86595 invoked by uid 500); 12 Oct 2010 23:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86587 invoked by uid 99); 12 Oct 2010 23:20:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 23:20:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 23:20:25 +0000
Received: by qyk29 with SMTP id 29so7177083qyk.14
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 16:20:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=wx7J/JETX30MFHeLvjUaSd5og7BjYHttG2Mm3LXNNYg=;
        b=Xhlppxc7ceTc+NAqYRcmps50GCzVrngt5AZQ/bCdG8nr8NI2s2zUMTr3Pid+Z/LokD
         Xl1/ovoF2VeUhomuPj+aK5qehkep0kKAi6PZHxSOvgZAHojirh3S/QQL/5GdOBmVl2Yx
         jl+foS6O0me3Jl5Gc7ajiHz4PwTOsaWuiUEJ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s+CRO2XxKkCpacm+fKhmFLoTvMEDe459bHLApYOXtnuiCt7pji7jWctXX5eeK9nHgR
         0D9oxMTt50qkf+dNJ55D8g6lLGefIxF9kgOmjV5tKaCzvqj7PToqihJuAagApPOWnYFj
         Sp8qoNGy7RkTuwsAG/WrMIeVc82m0MdymEJlA=
MIME-Version: 1.0
Received: by 10.224.190.3 with SMTP id dg3mr6289583qab.68.1286925603659; Tue,
 12 Oct 2010 16:20:03 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Tue, 12 Oct 2010 16:20:03 -0700 (PDT)
In-Reply-To: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
References: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
Date: Tue, 12 Oct 2010 19:20:03 -0400
Message-ID: <AANLkTik3KUbBd_SYuM6oDCRaX+K3Yvm_p1tEpD2oWM34@mail.gmail.com>
Subject: Re: integrating RAMDirectory in FSDirectory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fac9b7560ec049273b7a9
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fac9b7560ec049273b7a9
Content-Type: text/plain; charset=ISO-8859-1

Try IndexWrite.addIndexes. I confess that I haven't used that since
2.4, but I suspect it's what you want.

Best
Erick

P.S. hijacking. No problem. It's more a matter of helping find topics
rather than who started the conversation.....

On Mon, Oct 11, 2010 at 9:37 PM, Yakob <jacobian@opensuse-id.org> wrote:

> well actually I am doing a kind of a thesis regarding information
> retrieval.and my tutor wanted me to be able to create a program that
> firstly index a document in memory using RAMDirectory and then
> flushing it to disk using FSDirectory periodically. I was having a
> hard time implementing it in my source code. so that's why I am asking
> what's the best way to put RAMDirectory methods in the source code
> below? maybe you can give me an idea.eventhough I know it'll take
> longer time to index due to the use of RAMDirectory and FSDirectory
> but nonetheless I'd still be interested in how to integrate
> RAMDirectory into FSDirectory.
>
> thanks
>
> PS : regarding the hijack thread, I thought because I was the one who
> created it so I think I could hijack it.but thanks for the advice
> though and now I am creating a new thread. :-)
>
> On 10/12/10, Erick Erickson <erickerickson@gmail.com> wrote:
> > It's a good idea to start a new thread when asking a different question,
> > see:
> > http://people.apache.org/~hossman/#threadhijack
> >
> > <http://people.apache.org/~hossman/#threadhijack>I have to ask why you
> want
> > to integrate the RAM directory. If you're using it
> > to speed up indexing, you're probably making way more work for yourself
> > than you need to. If you're trying to do something with Near Real Time,
> one
> > suggestion is to just not bother. Add docs to the RAM directory AND your
> > FSDirectory simultaneously. The data you index to FSDir won't be visible
> > until you reopen the FSDir reader, so your flush could then be just
> > reopen everything...
> >
> > Best
> > Erick
> >
> > On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org> wrote:
> >
> >> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
> >> > Nope, never used jNotify, so I don't have any code handy...
> >> >
> >> > Good luck!
> >> > Erick
> >> >
> >>
> >> so I did try JNotify but there is seems to be some bug in it that I
> >> find it hards to integrate in my lucene source code.so I had to try a
> >> looping option instead.
> >>
> >>
> >>
> http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify
> >>
> >> so anyway, I had another question now. I was trying to make a lucene
> >> source code that can do indexing and store them first in a memory
> >> using RAMDirectory and then flush this index in a memory into a disk
> >> using FSDirectory. I had done some modifications of this code but to
> >> no avail. maybe some of you can help me out a bit.
> >> here is the source code again.
> >>
> >> import java.io.File;
> >> import java.io.FileReader;
> >> import java.io.IOException;
> >> import org.apache.lucene.analysis.SimpleAnalyzer;
> >> import org.apache.lucene.document.Document;
> >> import org.apache.lucene.document.Field;
> >> import org.apache.lucene.index.IndexWriter;
> >> import org.apache.lucene.store.FSDirectory;
> >>
> >>
> >> public class SimpleFileIndexer {
> >>
> >>
> >>        public static void main(String[] args) throws Exception   {
> >>
> >>                 int i=0;
> >>                while(i<10) {
> >>                 File indexDir = new
> >> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
> >>                File dataDir = new
> >> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
> >>                String suffix = "txt";
> >>
> >>                SimpleFileIndexer indexer = new SimpleFileIndexer();
> >>
> >>                int numIndex = indexer.index(indexDir, dataDir, suffix);
> >>
> >>                System.out.println("Total files indexed " + numIndex);
> >>                 i++;
> >>                Thread.sleep(10000);
> >>
> >>                }
> >>        }
> >>
> >>
> >>
> >>        private int index(File indexDir, File dataDir, String suffix)
> >> throws
> >> Exception {
> >>
> >>                IndexWriter indexWriter = new IndexWriter(
> >>                                FSDirectory.open(indexDir),
> >>                                new SimpleAnalyzer(),
> >>                                true,
> >>                                IndexWriter.MaxFieldLength.LIMITED);
> >>                indexWriter.setUseCompoundFile(false);
> >>
> >>                indexDirectory(indexWriter, dataDir, suffix);
> >>
> >>                int numIndexed = indexWriter.maxDoc();
> >>                indexWriter.optimize();
> >>                indexWriter.close();
> >>
> >>                return numIndexed;
> >>
> >>        }
> >>
> >>        private void indexDirectory(IndexWriter indexWriter, File
> dataDir,
> >> String suffix) throws IOException {
> >>                File[] files = dataDir.listFiles();
> >>                for (int i = 0; i < files.length; i++) {
> >>                        File f = files[i];
> >>                        if (f.isDirectory()) {
> >>                                indexDirectory(indexWriter, f, suffix);
> >>                        }
> >>                        else {
> >>                                indexFileWithIndexWriter(indexWriter, f,
> >> suffix);
> >>                        }
> >>                }
> >>        }
> >>
> >>        private void indexFileWithIndexWriter(IndexWriter indexWriter,
> File
> >> f, String suffix) throws IOException {
> >>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
> >> !f.exists()) {
> >>                        return;
> >>                }
> >>                if (suffix!=null && !f.getName().endsWith(suffix)) {
> >>                        return;
> >>                }
> >>                System.out.println("Indexing file " +
> >> f.getCanonicalPath());
> >>
> >>                Document doc = new Document();
> >>                doc.add(new Field("contents", new FileReader(f)));
> >>                doc.add(new Field("filename", f.getCanonicalPath(),
> >> Field.Store.YES,
> >> Field.Index.ANALYZED));
> >>
> >>                indexWriter.addDocument(doc);
> >>        }
> >>
> >> }
> >>
> >> so what's the best way for me to integrate RAMDirectory in that source
> >> code before putting them in FSDirectory. any help would be appreciated
> >> though.
> >> thanks
> >>
> >>
> >> --
> >> http://jacobian.web.id
> >>
>
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf300fac9b7560ec049273b7a9--

From java-user-return-47464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 12 23:23:31 2010
Return-Path: <java-user-return-47464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32880 invoked from network); 12 Oct 2010 23:23:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Oct 2010 23:23:30 -0000
Received: (qmail 93056 invoked by uid 500); 12 Oct 2010 23:23:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93018 invoked by uid 500); 12 Oct 2010 23:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93010 invoked by uid 99); 12 Oct 2010 23:23:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 23:23:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Oct 2010 23:23:22 +0000
Received: by qyk29 with SMTP id 29so7180316qyk.14
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 16:23:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Q2EivFjvgXqZv+u5dTTATdhBjVY7/bOQGO7+f8VEgpE=;
        b=koqp3cIwwtFyA0x5c+D6G3GLMXc/HI8+UEQUpm+5gBmsuPFMUhXeQowtMnJZeklCgB
         8eNValfqaMhTsAHBaTsbS1rzetyPTrXhx3JoeclWrQX5E/q2PWjW06e1pCwS3Obxu5w8
         iHqW/hXOzIzg3mZZlSc6mVCiS8V3h+7bXMn1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Tf3dL97VZlYdhYesvObECy+x8pEkTh05AUtNjLURBjLpmKrQab42EyeZJzThx2oCmg
         w/hOWeip655+cQBvU4ryduBYDpdX5ZVjWW2zYsCzwvYP1osmTop9RDTTxpUsKBbEKePG
         prRATFxUDjmwkQF8HLItwk9ZEVwOTAZN/wD7Q=
MIME-Version: 1.0
Received: by 10.224.11.129 with SMTP id t1mr4226879qat.222.1286925771218; Tue,
 12 Oct 2010 16:22:51 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Tue, 12 Oct 2010 16:22:50 -0700 (PDT)
In-Reply-To: <433f7e5abc523d7c5db4886e82f40f7d@localhost>
References: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
	<433f7e5abc523d7c5db4886e82f40f7d@localhost>
Date: Tue, 12 Oct 2010 19:22:50 -0400
Message-ID: <AANLkTini6rPc7Mfv8p-d79dCwW2h20JHAnOSA_O7XDok@mail.gmail.com>
Subject: Re: integrating RAMDirectory in FSDirectory or other way round
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175113e6722155049273c1e3
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175113e6722155049273c1e3
Content-Type: text/plain; charset=ISO-8859-1

I'm not at all sure this is true. We all start by thinking "of course if the
entire
directory were in RAM it would be faster". But lots of work has gone into
making efficient use of RAM for things like caches etc. So it may not
make any difference.

But that doesn't mean you can't try. It's trivial to instantiate a
RAMdirectory
by calling the constructor with a Directory. See Ian's comment.

Best
Erick

On Tue, Oct 12, 2010 at 1:39 AM, <suman.holani@zapak.co.in> wrote:

>
> I am also having a similar requirement .But its other way round.
>
> Basically ,I have indexes in FSDirectory and which is transferred to
> another machine on regular basis. But now for the reason of faster
> searches, it would be better to copy the indexes onto RAM. (RAMDirectory).
>
> Not sure of how it can be achieved.
>
>
> TIA!
>
>
> regds,
> Suman
>
>
>
> On Tue, 12 Oct 2010 08:37:12 +0700, Yakob <jacobian@opensuse-id.org>
> wrote:
> > well actually I am doing a kind of a thesis regarding information
> > retrieval.and my tutor wanted me to be able to create a program that
> > firstly index a document in memory using RAMDirectory and then
> > flushing it to disk using FSDirectory periodically. I was having a
> > hard time implementing it in my source code. so that's why I am asking
> > what's the best way to put RAMDirectory methods in the source code
> > below? maybe you can give me an idea.eventhough I know it'll take
> > longer time to index due to the use of RAMDirectory and FSDirectory
> > but nonetheless I'd still be interested in how to integrate
> > RAMDirectory into FSDirectory.
> >
> > thanks
> >
> > PS : regarding the hijack thread, I thought because I was the one who
> > created it so I think I could hijack it.but thanks for the advice
> > though and now I am creating a new thread. :-)
> >
> > On 10/12/10, Erick Erickson <erickerickson@gmail.com> wrote:
> >> It's a good idea to start a new thread when asking a different
> question,
> >> see:
> >> http://people.apache.org/~hossman/#threadhijack
> >>
> >> <http://people.apache.org/~hossman/#threadhijack>I have to ask why you
> >> want
> >> to integrate the RAM directory. If you're using it
> >> to speed up indexing, you're probably making way more work for yourself
> >> than you need to. If you're trying to do something with Near Real Time,
> >> one
> >> suggestion is to just not bother. Add docs to the RAM directory AND
> your
> >> FSDirectory simultaneously. The data you index to FSDir won't be
> visible
> >> until you reopen the FSDir reader, so your flush could then be just
> >> reopen everything...
> >>
> >> Best
> >> Erick
> >>
> >> On Mon, Oct 11, 2010 at 1:34 PM, Yakob <jacobian@opensuse-id.org>
> wrote:
> >>
> >>> On 9/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
> >>> > Nope, never used jNotify, so I don't have any code handy...
> >>> >
> >>> > Good luck!
> >>> > Erick
> >>> >
> >>>
> >>> so I did try JNotify but there is seems to be some bug in it that I
> >>> find it hards to integrate in my lucene source code.so I had to try a
> >>> looping option instead.
> >>>
> >>>
> >>>
>
> http://stackoverflow.com/questions/3840844/error-exception-access-violation-in-jnotify
> >>>
> >>> so anyway, I had another question now. I was trying to make a lucene
> >>> source code that can do indexing and store them first in a memory
> >>> using RAMDirectory and then flush this index in a memory into a disk
> >>> using FSDirectory. I had done some modifications of this code but to
> >>> no avail. maybe some of you can help me out a bit.
> >>> here is the source code again.
> >>>
> >>> import java.io.File;
> >>> import java.io.FileReader;
> >>> import java.io.IOException;
> >>> import org.apache.lucene.analysis.SimpleAnalyzer;
> >>> import org.apache.lucene.document.Document;
> >>> import org.apache.lucene.document.Field;
> >>> import org.apache.lucene.index.IndexWriter;
> >>> import org.apache.lucene.store.FSDirectory;
> >>>
> >>>
> >>> public class SimpleFileIndexer {
> >>>
> >>>
> >>>        public static void main(String[] args) throws Exception   {
> >>>
> >>>                 int i=0;
> >>>                while(i<10) {
> >>>                 File indexDir = new
> >>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
> >>>                File dataDir = new
> >>> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
> >>>                String suffix = "txt";
> >>>
> >>>                SimpleFileIndexer indexer = new SimpleFileIndexer();
> >>>
> >>>                int numIndex = indexer.index(indexDir, dataDir,
> suffix);
> >>>
> >>>                System.out.println("Total files indexed " + numIndex);
> >>>                 i++;
> >>>                Thread.sleep(10000);
> >>>
> >>>                }
> >>>        }
> >>>
> >>>
> >>>
> >>>        private int index(File indexDir, File dataDir, String suffix)
> >>> throws
> >>> Exception {
> >>>
> >>>                IndexWriter indexWriter = new IndexWriter(
> >>>                                FSDirectory.open(indexDir),
> >>>                                new SimpleAnalyzer(),
> >>>                                true,
> >>>                                IndexWriter.MaxFieldLength.LIMITED);
> >>>                indexWriter.setUseCompoundFile(false);
> >>>
> >>>                indexDirectory(indexWriter, dataDir, suffix);
> >>>
> >>>                int numIndexed = indexWriter.maxDoc();
> >>>                indexWriter.optimize();
> >>>                indexWriter.close();
> >>>
> >>>                return numIndexed;
> >>>
> >>>        }
> >>>
> >>>        private void indexDirectory(IndexWriter indexWriter, File
> >>>        dataDir,
> >>> String suffix) throws IOException {
> >>>                File[] files = dataDir.listFiles();
> >>>                for (int i = 0; i < files.length; i++) {
> >>>                        File f = files[i];
> >>>                        if (f.isDirectory()) {
> >>>                                indexDirectory(indexWriter, f, suffix);
> >>>                        }
> >>>                        else {
> >>>                                indexFileWithIndexWriter(indexWriter,
> f,
> >>> suffix);
> >>>                        }
> >>>                }
> >>>        }
> >>>
> >>>        private void indexFileWithIndexWriter(IndexWriter indexWriter,
> >>>        File
> >>> f, String suffix) throws IOException {
> >>>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
> >>> !f.exists()) {
> >>>                        return;
> >>>                }
> >>>                if (suffix!=null && !f.getName().endsWith(suffix)) {
> >>>                        return;
> >>>                }
> >>>                System.out.println("Indexing file " +
> >>> f.getCanonicalPath());
> >>>
> >>>                Document doc = new Document();
> >>>                doc.add(new Field("contents", new FileReader(f)));
> >>>                doc.add(new Field("filename", f.getCanonicalPath(),
> >>> Field.Store.YES,
> >>> Field.Index.ANALYZED));
> >>>
> >>>                indexWriter.addDocument(doc);
> >>>        }
> >>>
> >>> }
> >>>
> >>> so what's the best way for me to integrate RAMDirectory in that source
> >>> code before putting them in FSDirectory. any help would be appreciated
> >>> though.
> >>> thanks
> >>>
> >>>
> >>> --
> >>> http://jacobian.web.id
> >>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175113e6722155049273c1e3--

From java-user-return-47465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 02:39:21 2010
Return-Path: <java-user-return-47465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28715 invoked from network); 13 Oct 2010 02:39:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 02:39:20 -0000
Received: (qmail 69211 invoked by uid 500); 13 Oct 2010 02:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68886 invoked by uid 500); 13 Oct 2010 02:39:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68878 invoked by uid 99); 13 Oct 2010 02:39:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 02:39:16 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zching01@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 02:39:08 +0000
Received: by fxm13 with SMTP id 13so429025fxm.35
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 19:38:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=6FU9+2mJXLefcaf/5E86GvUkeonuOEeUagoZN1yUSOY=;
        b=O0+QOAQs02zcuCCMMai2Le/+c0F77uO6PCHYsfpy7idR8fOqyi5BYF8UQmTRnmn3qO
         GBgSJAvI1aTr1Jf3Euo1CdKRh4058G1jnXP5F2dT+Xj4JpuGgWwnMU+NsZESByti7D9L
         DkEVi/C8DWyceNN9GMuD0VCeAerF6COhL8Zro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=szRX8sFTQUoxHASjdV10D6KA6Ms3awVnjiWrkbFXGx+JN3inqPofD3RS4v3SXh6EkJ
         Ug/7jXbu7fkqQvcKYXYD+x8nEE7tA2iriEwkcSr93Nm8T0LqnvsApee4wipvl8Oz6bhD
         30PjSzXdx3kWYon5quDJgFnrLkxe+MJ6NMKMM=
MIME-Version: 1.0
Received: by 10.103.197.5 with SMTP id z5mr1108600mup.136.1286937528370; Tue,
 12 Oct 2010 19:38:48 -0700 (PDT)
Received: by 10.223.107.133 with HTTP; Tue, 12 Oct 2010 19:38:48 -0700 (PDT)
Date: Tue, 12 Oct 2010 20:38:48 -0600
Message-ID: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
Subject: Indexing is hung or doesn't complete
From: Ching <zching01@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e659f21a3a04e80492767e20
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e659f21a3a04e80492767e20
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

Can anyone help with this issue? I have about 2000 pdf files that I use
PDFBox to extract its text, then index them using for loop. The indexing
stopped after the fdt file reaches at 7,061 KB in size. There is no error,
the indexing simply stopped.  Thanks in advance for any help.

Ching

--0016e659f21a3a04e80492767e20--

From java-user-return-47466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 03:27:54 2010
Return-Path: <java-user-return-47466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45486 invoked from network); 13 Oct 2010 03:27:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 03:27:54 -0000
Received: (qmail 3705 invoked by uid 500); 13 Oct 2010 03:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3164 invoked by uid 500); 13 Oct 2010 03:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3016 invoked by uid 99); 13 Oct 2010 03:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 03:27:47 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,HK_RANDOM_ENVFROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbfudrpwjd@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 03:27:41 +0000
Received: by pwi1 with SMTP id 1so964900pwi.35
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 20:27:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=/6/pNg3pvbc6Y9undAi1hjHN9I4rgVNku68J2wqlK9U=;
        b=omsHmWmlQyCWqmzgQDISb+++2nJglX3dQsNtx2tAQs3d9JfZGPICnwZWYn7ADqK+H4
         tudOS/MS17+9dBKDpbP4vPOQWT53zgVDCGmMcdRLgzxH3qMKpRarxo+2y1cJ/g9CE/IW
         GDjLwiPM3A4y/qZWceVNiNKjZbFOCFkKH7uvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=PVIAxBiOZBHaDmEDFFptoaumxq1y0eDviW1z9FWFM3A8tutsSpzhw4iPQaR+csD9XK
         FPJhOfWTvefeF4TroArwQpS7CROW6arhWsbeUQZ0k9ebujiI7AQ4YT94YLeNtvDhlIFy
         26sVpZnDvIj5riLP639RMiID/JjJqaXo0exTI=
MIME-Version: 1.0
Received: by 10.142.49.11 with SMTP id w11mr7097544wfw.218.1286940440622; Tue,
 12 Oct 2010 20:27:20 -0700 (PDT)
Received: by 10.142.58.8 with HTTP; Tue, 12 Oct 2010 20:27:20 -0700 (PDT)
Date: Wed, 13 Oct 2010 12:27:20 +0900
Message-ID: <AANLkTi=wf_9bDqUVccvyta-TogKgX_wLL0r2Q8mEwVHv@mail.gmail.com>
Subject: How to make a search log
From: Hyun Joo Noh <dbfudrpwjd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32904cf78cd0492772b46

--000e0cd32904cf78cd0492772b46
Content-Type: text/plain; charset=ISO-8859-1

Hi, how would you make Lucene leave a search log of
who searched what, when, etc (i.e. cookie, query, timestamp, etc)?
Is there a built-in Lucene function that allows me to do this,
Or is Lucene doing it already by default and I just can't find it?

--000e0cd32904cf78cd0492772b46--

From java-user-return-47467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 03:42:58 2010
Return-Path: <java-user-return-47467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48820 invoked from network); 13 Oct 2010 03:42:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 03:42:57 -0000
Received: (qmail 13376 invoked by uid 500); 13 Oct 2010 03:42:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13061 invoked by uid 500); 13 Oct 2010 03:42:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13053 invoked by uid 99); 13 Oct 2010 03:42:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 03:42:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 03:42:44 +0000
Received: by wyb38 with SMTP id 38so5014881wyb.35
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 20:42:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=1cmGCPSWOyaqMCsa7Zyj4WXvyqCdGL2AeVbOe9tkl48=;
        b=qe1jT6UKGdiC/D+Y5D4IF9wRlYQQft38WA+KBv4AbDFPa1XcxreoofFdXM8lggwsxx
         IlVnrDygVntzxSpLfIGdvMocFEAZlmXts0omcU6/soYMFGz5e46FBFjhh5X/vZjr8Rhl
         IJGO52vf7PULPF8SBUx8sh66oua26qKEIkwfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=l7WR9qJZX0vhcx3hntlhzBUs4GUNng4yjY70lyo0wl3FScvY1VDAdYXdA3vdxHRBw8
         XYsHGYPd1BVcYTqjesPvSdw3AorOTEAQsWR3UTgao9FFjPhuxlsmytbqSa2BXPEiKw7K
         Fss6SZPFJz7ysLXjyd5A/PXS2aWD5eQPDldss=
Received: by 10.227.129.84 with SMTP id n20mr7741464wbs.61.1286941344171; Tue,
 12 Oct 2010 20:42:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.150.194 with HTTP; Tue, 12 Oct 2010 20:42:04 -0700 (PDT)
In-Reply-To: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 13 Oct 2010 09:12:04 +0530
Message-ID: <AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
Subject: Re: Indexing is hung or doesn't complete
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65aeaa2aa873c0492776168
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65aeaa2aa873c0492776168
Content-Type: text/plain; charset=ISO-8859-1

Hi Ching,
Does the app exit or hang and stay there? as in does the JVM stay alive and
idle?
Also, can you make sure that its not the pdfbox? as in, try commenting the
indexwriter part and just read the pdfs, does that work fine.
Can you also post info on your environment?
Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
This most probably seems like a code level issue rather than lucene, but I
may be wrong.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:

> Hi All,
>
> Can anyone help with this issue? I have about 2000 pdf files that I use
> PDFBox to extract its text, then index them using for loop. The indexing
> stopped after the fdt file reaches at 7,061 KB in size. There is no error,
> the indexing simply stopped.  Thanks in advance for any help.
>
> Ching
>

--0016e65aeaa2aa873c0492776168--

From java-user-return-47468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 04:04:40 2010
Return-Path: <java-user-return-47468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53320 invoked from network); 13 Oct 2010 04:04:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 04:04:40 -0000
Received: (qmail 36888 invoked by uid 500); 13 Oct 2010 04:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36476 invoked by uid 500); 13 Oct 2010 04:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36468 invoked by uid 99); 13 Oct 2010 04:04:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 04:04:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 04:04:26 +0000
Received: by wyb38 with SMTP id 38so5029710wyb.35
        for <java-user@lucene.apache.org>; Tue, 12 Oct 2010 21:04:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=8RIoi+HIsxj2XIi1Ac6FM+ui2xxD/Io8rovm6FVLz/M=;
        b=RXHwA6j1bcmzYoba/zI5ihZdd1tzQ3CmePMRpN5jrF4g7MjDOEaiPAm4kj4G/7nm/c
         gWval9AQhgyuS1cxXESlIMxK60yjW8PQStc++n97DDf1XzTCIJ4vsGiir+HBfhGabcTm
         oF3v3qQlicpTq8VpmCtTT5hJFy39GnF5ZI/0Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=PfjS7DXMnZOBxDk9oaZVKFRM8tnkiJBpSolqL4Bz4pdtgFy3ZAFyk1gjoSxQGJSvNT
         nGFuZuCsL6KEjls/8tDdEtKeTcdUF4n3PUK8BTQykymVDOwKypz+ho2iCNS++uO7IzW9
         kDwxL4p01gMkwCNtbm9P224bWezdU0S6/4Q9s=
Received: by 10.227.141.141 with SMTP id m13mr7958040wbu.152.1286941082752;
 Tue, 12 Oct 2010 20:38:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.150.194 with HTTP; Tue, 12 Oct 2010 20:37:42 -0700 (PDT)
In-Reply-To: <AANLkTi=wf_9bDqUVccvyta-TogKgX_wLL0r2Q8mEwVHv@mail.gmail.com>
References: <AANLkTi=wf_9bDqUVccvyta-TogKgX_wLL0r2Q8mEwVHv@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 13 Oct 2010 09:07:42 +0530
Message-ID: <AANLkTinFgAe6hP4gfJOtiydqn6tCnBrsjQL=EebN92vC@mail.gmail.com>
Subject: Re: How to make a search log
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636831776159677049277524e
X-Virus-Checked: Checked by ClamAV on apache.org

--001636831776159677049277524e
Content-Type: text/plain; charset=ISO-8859-1

Hi Hyun,

Lucene is a library and so does not log searches. You'd have to build it.
Plus in case you're looking at implementing things at that high a level, you
may instead use SOLR, though 'm not sure what's the stage of implementation
of your project. Incase you're yet to begin, you may look at SOLR, which
provides an out of the box engine.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Oct 13, 2010 at 8:57 AM, Hyun Joo Noh <dbfudrpwjd@gmail.com> wrote:

> Hi, how would you make Lucene leave a search log of
> who searched what, when, etc (i.e. cookie, query, timestamp, etc)?
> Is there a built-in Lucene function that allows me to do this,
> Or is Lucene doing it already by default and I just can't find it?
>

--001636831776159677049277524e--

From java-user-return-47469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 08:03:16 2010
Return-Path: <java-user-return-47469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31679 invoked from network); 13 Oct 2010 08:03:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 08:03:16 -0000
Received: (qmail 6754 invoked by uid 500); 13 Oct 2010 08:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6570 invoked by uid 500); 13 Oct 2010 08:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6559 invoked by uid 99); 13 Oct 2010 08:03:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 08:03:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of senthilruban@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 08:03:03 +0000
Received: by qyk7 with SMTP id 7so115902qyk.14
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 01:02:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4VQEO8yFA8uRe3SExOziMNpcbw8SldNIG0Bl6EraZis=;
        b=xD2hwYAAfIfVqB19ewIEph6NFQCnmf9ijWOY8X/nCgSofgxTR45gHoDB09OtB16v7j
         wVfXzYX/BAq192fOXBDs1UDBTmRq4JXQpScTJYTqGNSam8KjU2gp9H5kv9lO/z0T54Kp
         oTAmwjfl/kKKKiyhpP65LW1NCjbWTijaSdlVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LY4/JKSEjOlCCZ8WWVj1wTFO5Uml5MN1x+/yHUBzM4nDLQkQ0EuwDMA/jwyKH4AQPi
         uruczcFB6u7yaZ3dFdkaN0e55cmuTa4TYw7bGrtu7gkmvnTn+qMOovIwzKbaCA46gDpK
         4ZYE03NcuJql6mo3+6cNJtArMbkmZpRb369a0=
MIME-Version: 1.0
Received: by 10.229.212.205 with SMTP id gt13mr7277137qcb.161.1286956954970;
 Wed, 13 Oct 2010 01:02:34 -0700 (PDT)
Received: by 10.229.73.99 with HTTP; Wed, 13 Oct 2010 01:02:34 -0700 (PDT)
In-Reply-To: <AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
	<AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
Date: Wed, 13 Oct 2010 21:02:34 +1300
Message-ID: <AANLkTikj9w1Tyb4HMT1RwL06Lg_sFRXDAvSe9jQ746dj@mail.gmail.com>
Subject: Re: Indexing is hung or doesn't complete
From: Senthil <senthilruban@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283f4d2479ac04927b0409

--001636283f4d2479ac04927b0409
Content-Type: text/plain; charset=ISO-8859-1

Hi Ching

  I donot think issue with Lucene for 2000 documents. As Anshum mentioned,
give more details about environment.
And check what CPU usage and index fdt file timestamp while it hangs. And
using logs would help to identify real cause. I used to work with Lucene 2.4
and recently 3.0.2. No similar issues came across and used PDF files with
pdfbox lib too

Regards
Senthil

On Wed, Oct 13, 2010 at 4:42 PM, Anshum <anshumg@gmail.com> wrote:

> Hi Ching,
> Does the app exit or hang and stay there? as in does the JVM stay alive and
> idle?
> Also, can you make sure that its not the pdfbox? as in, try commenting the
> indexwriter part and just read the pdfs, does that work fine.
> Can you also post info on your environment?
> Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
> This most probably seems like a code level issue rather than lucene, but I
> may be wrong.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:
>
> > Hi All,
> >
> > Can anyone help with this issue? I have about 2000 pdf files that I use
> > PDFBox to extract its text, then index them using for loop. The indexing
> > stopped after the fdt file reaches at 7,061 KB in size. There is no
> error,
> > the indexing simply stopped.  Thanks in advance for any help.
> >
> > Ching
> >
>

--001636283f4d2479ac04927b0409--

From java-user-return-47470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 13:38:04 2010
Return-Path: <java-user-return-47470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47443 invoked from network); 13 Oct 2010 13:38:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 13:38:04 -0000
Received: (qmail 58648 invoked by uid 500); 13 Oct 2010 13:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58506 invoked by uid 500); 13 Oct 2010 13:38:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58498 invoked by uid 99); 13 Oct 2010 13:37:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 13:37:59 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FREEMAIL_FROM,HK_RANDOM_ENVFROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zjffdu@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 13:37:53 +0000
Received: by wwi14 with SMTP id 14so201246wwi.5
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 06:37:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=hmaWsPQEGvR2VUsQFt8jLZAn2eCS3HrpJgnCRRL4PQc=;
        b=cr/swd1kCEM4fuCzdmwEnbeldsImXAeg8dyJ0cskHkvRQAZ9LN+e+oBdzU0EHAU76O
         jWNqb1YTBTUqbaPSY33JQl8G7uyRhjSHesjYZcqxy3tq6ATh20efB9+EG4UTc05uR4JL
         RET/+FJLPhTyoaOBHgSjenaKGYIcMk64hL0nE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=VsV8c/K7WjA/nxUd9pQ77niMIpH5JnOY8/Fu1H9lppUR2uHJEEb6FccJlIVPA9WmXr
         FlyHsPsZJg2ggSB4TBkHsU5mZ/GXgVSi1RF+GNJTrtFHTy1EO2KlrXlb06+zFnKEm289
         1aE0lae0rwxp6tbaLm/ofupyp4i3lHSJpQ37E=
MIME-Version: 1.0
Received: by 10.216.62.73 with SMTP id x51mr749188wec.75.1286977051386; Wed,
 13 Oct 2010 06:37:31 -0700 (PDT)
Received: by 10.216.175.70 with HTTP; Wed, 13 Oct 2010 06:37:31 -0700 (PDT)
Date: Wed, 13 Oct 2010 21:37:31 +0800
Message-ID: <AANLkTi=2TYctA2RHTGAxG2KhYR+xqe3+ZfG=8Azo2y5o@mail.gmail.com>
Subject: How about lucene's delete performance ?
From: Jeff Zhang <zjffdu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi all,

I only want to index the latest one week's data, the previous data can
be deleted. So I'd like to know about lucene's delete performance and
whether it will has impact on the search performance when I do lots of
delete operation in the meantime.  Thanks

-- 
Best Regards

Jeff Zhang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 14:51:01 2010
Return-Path: <java-user-return-47471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79508 invoked from network); 13 Oct 2010 14:51:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 14:51:01 -0000
Received: (qmail 7963 invoked by uid 500); 13 Oct 2010 14:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7780 invoked by uid 500); 13 Oct 2010 14:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7772 invoked by uid 99); 13 Oct 2010 14:50:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 14:50:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 14:50:47 +0000
Received: by iwn3 with SMTP id 3so8878166iwn.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 07:50:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=qJUhhQIDWOXWHb1inGwLwRzujZPStsoaRONpzNS0eGc=;
        b=Ss5lxYfTh8Guu7jAJ94e9t8oMXOl32t1pUwotcuEwG9POLxYw32KICMTx9Ij1GabKC
         lk/XxEL/32ULIViLa9YpGvmnd1sCdSt2cfpHkJxpJTsy7auhZLfuhACuc7tnPDrb3RVF
         hego8BCzkaSuIstU5SyW4+Wo7jK1Fj7ocznkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mEUUGXfEH6GM86LXXCwSHH9TqUJj+pI9CkmjcKyxXSQzIaNhcvsAksK5OasnJc8oI9
         3nn3Dfsq7PuOHrEQ+szaLNpY2a9qfL3Tb7LLEvuEaHS7kJdEknumkTt7OufA9ycjSOz4
         hecIDBHkB01Ow2+xYpXS35wjWapwctQtmr36E=
MIME-Version: 1.0
Received: by 10.231.11.13 with SMTP id r13mr6535667ibr.137.1286981408966; Wed,
 13 Oct 2010 07:50:08 -0700 (PDT)
Received: by 10.231.184.147 with HTTP; Wed, 13 Oct 2010 07:50:08 -0700 (PDT)
In-Reply-To: <AANLkTi=2TYctA2RHTGAxG2KhYR+xqe3+ZfG=8Azo2y5o@mail.gmail.com>
References: <AANLkTi=2TYctA2RHTGAxG2KhYR+xqe3+ZfG=8Azo2y5o@mail.gmail.com>
Date: Wed, 13 Oct 2010 16:50:08 +0200
Message-ID: <AANLkTi=UfeBDx7Qj=FYy3TW8DADbB0QdVrdBCEA_eK+r@mail.gmail.com>
Subject: Re: How about lucene's delete performance ?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d622db703fb049280b550
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d622db703fb049280b550
Content-Type: text/plain; charset=ISO-8859-1

There's a deleteAll() method on IndexWriter, which is very fast. After you
commit(), all documents won't be visible to searchers anymore. When the last
searcher will be closed, the documents will completely disappear from the
index. All in all it's quite a good approach to take.

You can also consider creating a new index once a week, and after you finish
adding documents, merging (perhaps even optimize() it), swap all your
searchers to use the new directory and delete the old one. That is only
relevant if you don't do deletes during the week (i.e., it's all or
nothing).

Shai

On Wed, Oct 13, 2010 at 3:37 PM, Jeff Zhang <zjffdu@gmail.com> wrote:

> Hi all,
>
> I only want to index the latest one week's data, the previous data can
> be deleted. So I'd like to know about lucene's delete performance and
> whether it will has impact on the search performance when I do lots of
> delete operation in the meantime.  Thanks
>
> --
> Best Regards
>
> Jeff Zhang
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d622db703fb049280b550--

From java-user-return-47472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 14:54:05 2010
Return-Path: <java-user-return-47472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81036 invoked from network); 13 Oct 2010 14:54:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 14:54:05 -0000
Received: (qmail 15005 invoked by uid 500); 13 Oct 2010 14:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14930 invoked by uid 500); 13 Oct 2010 14:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14921 invoked by uid 99); 13 Oct 2010 14:54:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 14:54:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.123.65.155] (HELO mail2.acquiremedia.com) (209.123.65.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 14:53:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail2.acquiremedia.com (Postfix) with ESMTP id A363B5AC0BE
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 10:53:32 -0400 (EDT)
X-Virus-Scanned: amavisd-new at acquiremedia.com
Received: from mail2.acquiremedia.com ([127.0.0.1])
	by localhost (mail.mmu.acquiremedia.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id BI6P1B63-JQZ for <java-user@lucene.apache.org>;
	Wed, 13 Oct 2010 10:53:32 -0400 (EDT)
Received: from exchange.mmu.acquiremedia.com (exchange.mmu.acquiremedia.com [10.10.40.251])
	by mail2.acquiremedia.com (Postfix) with ESMTP
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 10:53:32 -0400 (EDT)
Received: from exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) by
 exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) with mapi; Wed, 13 Oct
 2010 10:53:32 -0400
From: Dan OConnor <doconnor@acquiremedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Wed, 13 Oct 2010 10:53:31 -0400
Subject: Re: How about lucene's delete performance ?
Thread-Topic: How about lucene's delete performance ?
Thread-Index: Actq29/C/C1qkOicTzSCF/QvogtgeAACodfv
Message-ID: <3B4AEBB59588ED409ECE3CB6517C417510C036EB23@exchange.windows.mmu.acquiremedia.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SmVmZiwNCkkgd291bGQgc3VnZ2VzdCBub3QgZGVsZXRpbmcgZG9jdW1lbnRzIG9mZiB0aGUgYmFj
ayBvZiB0aGUgaW5kZXggdW5sZXNzIHlvdSBjYW4gb3B0aW1pemUgeW91ciBpbmRleCByZWd1bGFy
bHkuIChEZXBlbmRpbmcgb24geW91ciB2b2x1bWUsIHRoaXMgY291bGQgYmUgZXZlcnkgZGF5IG9y
IG9uY2UgYSB3ZWVrKQ0KDQpJIHdvdWxkIHN1Z2dlc3QgaGF2aW5nIHR3byBpbmRleGVzLCBvbmUg
dGhhdCBpcyAidGhpcyIgd2VlayBhbmQgb25lIHRoYXQgaXMgImxhc3QiIHdlZWsgYW5kIGEgbXVs
dGktaW5kZXggc2VhcmNoZXIgdGhhdCBpcyBhd2FyZSBvZiB0aGUgZGF0ZS4gV2hlbiB5b3UgZ2V0
IHRvIHRoZSBlbmQgb2YgInRoaXMiIHdlZWssIHlvdSB3b3VsZCBkZWxldGUgImxhc3QiIHdlZWsn
cyBpbmRleCBhbmQgY3JlYXRlIGEgbmV3ICJuZXh0IiB3ZWVrIGluZGV4LiANCg0KUmVnYXJkcw0K
RGFuDQoNCg0KLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLQ0KRnJvbTogSmVmZiBaaGFuZyA8
empmZmR1QGdtYWlsLmNvbT4NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcgPGphdmEt
dXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClNlbnQ6IFdlZCBPY3QgMTMgMDk6Mzc6MzEgMjAxMApT
dWJqZWN0OiBIb3cgYWJvdXQgbHVjZW5lJ3MgZGVsZXRlIHBlcmZvcm1hbmNlID8NCg0KSGkgYWxs
LA0KDQpJIG9ubHkgd2FudCB0byBpbmRleCB0aGUgbGF0ZXN0IG9uZSB3ZWVrJ3MgZGF0YSwgdGhl
IHByZXZpb3VzIGRhdGEgY2FuDQpiZSBkZWxldGVkLiBTbyBJJ2QgbGlrZSB0byBrbm93IGFib3V0
IGx1Y2VuZSdzIGRlbGV0ZSBwZXJmb3JtYW5jZSBhbmQNCndoZXRoZXIgaXQgd2lsbCBoYXMgaW1w
YWN0IG9uIHRoZSBzZWFyY2ggcGVyZm9ybWFuY2Ugd2hlbiBJIGRvIGxvdHMgb2YNCmRlbGV0ZSBv
cGVyYXRpb24gaW4gdGhlIG1lYW50aW1lLiAgVGhhbmtzDQoNCi0tIA0KQmVzdCBSZWdhcmRzDQoN
CkplZmYgWmhhbmcNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 15:07:20 2010
Return-Path: <java-user-return-47473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92529 invoked from network); 13 Oct 2010 15:07:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 15:07:20 -0000
Received: (qmail 52410 invoked by uid 500); 13 Oct 2010 15:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51882 invoked by uid 500); 13 Oct 2010 15:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51864 invoked by uid 99); 13 Oct 2010 15:07:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 15:07:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 15:07:08 +0000
Received: by yxg6 with SMTP id 6so2640196yxg.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 08:06:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=F08Fl28Dl8GMYHYiXZSJpnE9ulR1j9hxYTV/oDLWpuM=;
        b=qURxvjTmP6dVAFtb0V5gEshIKImzXUwse77Mmx6dKwd5F0mj+r0wFxCK5VbfVS/5cV
         Oo3naeSNwrlyohXi2nCfLlLgY+va0ouwy8kb3Sg5sVZFQy7vh/dP50yBC+vxsnmf1UTU
         NI+wDx3JGUhXUUY4W58Afznji8VeauK/E6xaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pt+LO5J6TcMhbQsB7FABVY1BrC0scnvoyocosUQCeyN/EgIgSZJ7DehqTu6l2bGxrm
         LM/754K5R0v5Qviv/d4pvAJ7zFnraGPvimI5obgnNWP0AA4mnY4+SX5zo0/OGDwTZVzX
         35wQJ7yBLGWkNA896wbhyTYqboB9sz3W3EEEo=
MIME-Version: 1.0
Received: by 10.42.166.196 with SMTP id p4mr4213789icy.196.1286982406998; Wed,
 13 Oct 2010 08:06:46 -0700 (PDT)
Received: by 10.231.184.147 with HTTP; Wed, 13 Oct 2010 08:06:46 -0700 (PDT)
In-Reply-To: <3B4AEBB59588ED409ECE3CB6517C417510C036EB23@exchange.windows.mmu.acquiremedia.com>
References: <3B4AEBB59588ED409ECE3CB6517C417510C036EB23@exchange.windows.mmu.acquiremedia.com>
Date: Wed, 13 Oct 2010 17:06:46 +0200
Message-ID: <AANLkTinOMdNtshh6W6_netz+oX8=FBNiXPxVos4mvC_h@mail.gmail.com>
Subject: Re: How about lucene's delete performance ?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8ad2338ad5049280f179

--90e6ba6e8ad2338ad5049280f179
Content-Type: text/plain; charset=ISO-8859-1

Note that deleteAll does not require you to optimize anything. It literally
removes all segments from the index in one shot, and when the files are
unreferenced, they will be removed entirely.

Shai

On Wed, Oct 13, 2010 at 4:53 PM, Dan OConnor <doconnor@acquiremedia.com>wrote:

> Jeff,
> I would suggest not deleting documents off the back of the index unless you
> can optimize your index regularly. (Depending on your volume, this could be
> every day or once a week)
>
> I would suggest having two indexes, one that is "this" week and one that is
> "last" week and a multi-index searcher that is aware of the date. When you
> get to the end of "this" week, you would delete "last" week's index and
> create a new "next" week index.
>
> Regards
> Dan
>
>
> ----- Original Message -----
> From: Jeff Zhang <zjffdu@gmail.com>
> To: java-user@lucene.apache.org <java-user@lucene.apache.org>
> Sent: Wed Oct 13 09:37:31 2010
> Subject: How about lucene's delete performance ?
>
> Hi all,
>
> I only want to index the latest one week's data, the previous data can
> be deleted. So I'd like to know about lucene's delete performance and
> whether it will has impact on the search performance when I do lots of
> delete operation in the meantime.  Thanks
>
> --
> Best Regards
>
> Jeff Zhang
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6e8ad2338ad5049280f179--

From java-user-return-47474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 15:38:16 2010
Return-Path: <java-user-return-47474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2330 invoked from network); 13 Oct 2010 15:38:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 15:38:16 -0000
Received: (qmail 98654 invoked by uid 500); 13 Oct 2010 15:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98542 invoked by uid 500); 13 Oct 2010 15:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98534 invoked by uid 99); 13 Oct 2010 15:38:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 15:38:13 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Derek.Sykes@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 15:38:04 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id B86CC30425E
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 11:37:40 -0400 (EDT)
Received: from ny0031as01 (unknown [144.203.194.93])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id A304A3041F5
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 11:37:40 -0400 (EDT)
Received: from ny0031as01 (localhost [127.0.0.1])
	by ny0031as01 (msa-out Postfix) with ESMTP id 93DD39702FD
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 11:37:40 -0400 (EDT)
Received: from NPWEXGOB02.msad.ms.com (np212c1n1 [10.184.90.163])
	by ny0031as01 (mta-in Postfix) with ESMTP id 90FBAC0037
	for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 11:37:40 -0400 (EDT)
Received: from OYWEXHUB01.msad.ms.com (10.174.153.24) by NPWEXGOB02.msad.ms.com (10.184.90.163) with Microsoft SMTP Server (TLS) id 8.2.254.0; Wed, 13 Oct 2010 11:37:39 -0400
Received: from LNWEXMBX0105.msad.ms.com ([10.174.172.10]) by OYWEXHUB01.msad.ms.com ([10.174.153.24]) with mapi; Wed, 13 Oct 2010 16:37:39 +0100
From: "Sykes, Derek" <Derek.Sykes@morganstanley.com>
To: <java-user@lucene.apache.org>
Date: Wed, 13 Oct 2010 16:37:37 +0100
Subject: determining the type of a term - retrieving a payload
Content-Transfer-Encoding: 7bit
Thread-Topic: determining the type of a term - retrieving a payload
thread-index: Actq68z0ORU8zqfBTYyq8yIVMa9yHQ==
Message-ID: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com>
Accept-Language: en-US
Content-Language: en-US
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4657
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197LNWEXMBX0105m_"
MIME-Version: 1.0
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 13102010 #3981700, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197LNWEXMBX0105m_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi there,

I'm currently trying to work out how I can determine the type =
(string/number/date/etc)of a term.  I've not seen any off the shelf way =
to do it so am trying to store a payload against each term that records =
the type.

I'm having a little trouble retrieving a payload I'd stored onto the =
term.  At the moment I'm using the TypeAsPayloadTokenFilter, however =
I'll change this soon as it's not really what I'm after.

I'm then getting a TermEnum from either reader.terms() or using a =
PrefixTermEnum.

For each term I want the payload from I'm running this function:

    private String getPayload(Term term) {
        String payload =3D null;
        try {
            TermPositions termPositions =3D reader.termPositions(term);
            termPositions.next();
            if (termPositions.isPayloadAvailable()) {
                byte[] payloadBytes =3D new =
byte[termPositions.getPayloadLength()];
                payloadBytes =3D termPositions.getPayload(payloadBytes, =
0);
                payload =3D new String(payloadBytes);
                LOG.debug(payload);
            }
        }
        catch( IOException e) {
...

This never returns anything though.

Am I missing something here?  Any help would be greatly appreciated.

Cheers,
Derek

-------------------------------------------------------------------------=
-
NOTICE: Morgan Stanley is not acting as a municipal advisor and the =
opinions or views contained herein are not intended to be, and do not =
constitute, advice within the meaning of Section 975 of the Dodd-Frank =
Wall Street Reform and Consumer Protection Act. If you have received =
this communication in error, please destroy all electronic and paper =
copies and notify the sender immediately. Mistransmission is not =
intended to waive confidentiality or privilege. Morgan Stanley reserves =
the right, to the extent permitted under applicable law, to monitor =
electronic communications. This message is subject to terms available at =
the following link: http://www.morganstanley.com/disclaimers. If you =
cannot access these links, please notify us by reply message and we will =
send the contents to you. By messaging with Morgan Stanley you consent =
to the foregoing.

--_000_F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197LNWEXMBX0105m_--

From java-user-return-47475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 16:23:04 2010
Return-Path: <java-user-return-47475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20593 invoked from network); 13 Oct 2010 16:23:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 16:23:04 -0000
Received: (qmail 63204 invoked by uid 500); 13 Oct 2010 16:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63152 invoked by uid 500); 13 Oct 2010 16:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63144 invoked by uid 99); 13 Oct 2010 16:23:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 16:23:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 16:22:56 +0000
Received: by wyb38 with SMTP id 38so5784146wyb.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 09:22:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=BE9p6KPA/LHaibwa3L0smf4TOUZK0YH9aLhmLT7CaPc=;
        b=Fahx6efnpqTuwYWolk6xzINS2m25RLo32sibbzUGVbEORFSps+R9+UDR0+ggJ51YZU
         wIrN2ElxsofqOzliC0+6HswRyR+gkR35qoDsJ7B+oub2az71P4miO2p96z21uGDdHTOG
         vl517zz/uBRFz252ctWB83h6r/F9tEcXbgdr0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=m0zZXKZkXwNvC77lXLoUnrz68WMoLOedihStZKi4Gn0631PstkOiHilk+jH4hiMlgZ
         yO+9NqP9KdbhOGuilcPHGTvtuzYMmEQ+CiogPmQ/sWX3U1+eHIajYV2W+Scxuz9XAwsB
         ujj/VrQirkEvVsbOH0i96xvH0WafFzUWoDsz8=
Received: by 10.216.28.77 with SMTP id f55mr162560wea.91.1286986954337; Wed,
 13 Oct 2010 09:22:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.68.79 with HTTP; Wed, 13 Oct 2010 09:22:14 -0700 (PDT)
In-Reply-To: <F1AD6F6673633C4692F7689E42FF9AAA4215AE@ADAPA.ge-admin.ad.etat-ge.ch>
References: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch>
 <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com>
 <F1AD6F6673633C4692F7689E42FF9AAA4214CF@ADAPA.ge-admin.ad.etat-ge.ch>
 <AANLkTinNczRbQAS7fUB=O_hUWprDX0L=Fm=4wug7Q6jC@mail.gmail.com> <F1AD6F6673633C4692F7689E42FF9AAA4215AE@ADAPA.ge-admin.ad.etat-ge.ch>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Wed, 13 Oct 2010 21:52:14 +0530
Message-ID: <AANLkTim7dEHJ9f0mS=8HK1i90kCsmhKDRHnuTopDiwfg@mail.gmail.com>
Subject: Re: Questions about Lucene usage recommendations
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502cd363e6f1304928200bd

--00504502cd363e6f1304928200bd
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

One more suggestion:
With lucene 2.1 you might be using the hits API to search, which preloads
the documents

See
https://issues.apache.org/jira/browse/LUCENE-954?focusedCommentId=3D1257925=
8&page=3Dcom.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel=
#action_12579258

The performance hit is significant on a live server.

Switch to Topdocs based search, check out

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Hits.html

for details.

Thanks
Umesh Prasad




On Tue, Sep 28, 2010 at 1:36 PM, Pawlak Michel (DCTI) <
michel.pawlak@etat.ge.ch> wrote:

> Hello,
>
> I *hope* they do it this way, I'll have to check it. The number of fields
> cannot be made smaller as it has to respect an existing standard, regard =
to
> what you explain, searching concatened fields seems to be a smart way to =
do
> it. Thank you for the tip.
>
> Michel
>
>
> ____________________________________________________
> Michel Pawlak
> Architecte Solution
>
> Centre des Technologies de l'Information (CTI)
> Service Architecture et Composants Transversaux (ACT)
> Case postale 2285 - 64-66, rue du Grand Pr=C3=A9 - 1211 Gen=C3=A8ve 2
> T=C3=A9l. direct : +41 (0)22 388 00 95
> michel.pawlak@etat.ge.ch
>
>
> -----Message d'origine-----
> De : Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Envoy=C3=A9 : mardi, 28. septembre 2010 07:57
> =C3=80 : java-user@lucene.apache.org
> Objet : Re: Questions about Lucene usage recommendations
>
> You said you have 1000 fields...when performing search do you search
> in all 1000 fields?
> That could definitely be a major performance hit, as it translates to
> a BooleanQuery with 1000 TermQueries inside
>
> Maybe it make sense to concat data from fields that you search in
> fewer fields (preferably ONE).
> So basically your document will have 1000+1 field and search is
> performed on that additional field, instead of 1000 fields.
>
> But it depends on your usecase, adding title, author and book abstract
> may make sense together..for the search usecase
> On the other hand if you store number of pages, and release year it
> doesn't make sense to mix something like "349", "1997" with title and
> author.
> It depends on how you are searching and what results do you
> expect...but I hope you get the idea...
>
>
> On Mon, Sep 27, 2010 at 18:41, Pawlak Michel (DCTI)
> <michel.pawlak@etat.ge.ch> wrote:
> > Hello,
> >
> > Thank you for your quick reply, I'll do my best to answer your remarks
> and questions (I numbered them to make my mail more readable.)
> Unfortunately, as I wrote, I have no access to the source code, and the
> company is not really willing to answer my questions (that's why we
> investigate)... so I cannot be sure of what is really done.
> >
> > 1) yes 2.1.0 is really old that's why I'm wondering why the company
> providing the application didn't upgrade to a newer version, especially i=
f
> it's "almost jar drop-in"
> > 2) I mean that the application creates an index based on data stored in=
 a
> db and not in files (then the index is being used for the searches)
> > 3) only documents being changed are reindexed, not the entire document
> base. Around 100-150 "documents" per day need to be reindexed.
> > 4) no specific sorting is done by default (as far as I know...)
> > 5+6) each "document" is small (each "document" is a technical descripti=
on
> of a book (not the book's content itself), made of ~1000 database fields,
> each of which weight a few Kbyte), no highlighting is done
> > 7) IMHO the way lucene is being used is the bottleneck, not lucene
> itself. However I have no proof, as I do not have access to the code. Wha=
t I
> know is that as we have awfull performance issues and could not wait for =
a
> better solution, we've put the application on a high performance server,
> with a USPV SAN, and the performance improved dramatically (dropped from =
2.5
> minutes per search to around 10 seconds before optimization.) But we cann=
ot
> afford such a solution in the long run (using such an high end server for
> such a small application is a kind of joke). Currently, we observe read
> access peaks to the index file (up to 280 Mbyte/second) and performance
> improvements when optimizing the index (see below)
> > 8) We use no NFS, we're on a USPV SAN, but we were using physical HDD
> before (slower than the SAN, but it's only part of the problem IMHO)
> > 9-10) Thank you for the information
> > 11) On the high end server, after we optimized the index the average
> search time dropped from 10s to below 2s, now (after 2.5 weeks) the avera=
ge
> search time is 7s. Optimization seems required :-/
> > 12) ok
> >
> > Regards,
> >
> > Michel
> >
> > -----Message d'origine-----
> > De : Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> > Envoy=C3=A9 : lundi, 27. septembre 2010 14:53
> > =C3=80 : java-user@lucene.apache.org
> > Objet : Re: Questions about Lucene usage recommendations
> >
> > 1) Lucene 2.1 is really old...you should be able to migrate to lucene 2=
.9
> > without changing your code (almost jar drop-in, but be careful on
> > analyzers), and there could be huge improvements if you use lucene
> > properly.
> >
> > Few questions:
> > 2) - what does "all data to be indexed is stored in DB fields" mean? yo=
u
> > should store in lucene everything you need, so on search time you
> > shouldn't need to hit DB
> > 3) - what does "indexing is done right after every modification" mean? =
do
> > you index just the changed document? or reindex all 1.4 M docs?
> > 4) do you sort on some field, or just basic relevance?
> > 5) - how big is each document and what do you do with it? maybe
> > highlighting on large documents causes this?
> > 6) - what's in the document? if it's like a book...and almost every wor=
d
> > matches every document...there could be some issues
> > 7) - is the lucene the bottleneck? maybe you are calling from remote
> > server and marshaling+network+unmarshaling is slow?
> >
> > Usual lucene patterns are (assuming that you moved to lucene 2.9):
> > 8) - avoid using NFS (not necessary a performance bottleneck, and
> > definitely not something to cause 2 minutes query, but just to be on
> > the safe side)
> > 9) - keep writer open and add documents to the index (no need to rebuil=
d
> > everything)
> > 10) - keep your readers open and use reopen() once in a while (you may
> > even go for realtime search if you want to)
> > 11) - in your case, I don't think optimize will do any good, segments
> look
> > good to me, don't worry about cfs file size
> > 12) - there are ways to limit cfs files and play with setMaxXXX, but i
> > don't think it's the cause of your 2 minute query.
> >
> > On Mon, Sep 27, 2010 at 14:35, Pawlak Michel (DCTI)
> > <michel.pawlak@etat.ge.ch> wrote:
> >> Hello,
> >>
> >> We have an application which is using lucene and we have strong
> >> performance issues (on bad days, some searches take more than 2
> >> minutes). I'm new to the Lucene component, thus I'm not sure Lucene is
> >> correctly used and thus would like to have some information on lucene
> >> usage recommendations. This would help locate the problem (application
> >> code / lucene configuration / hardware / all) It would be great if a
> >> project committer / specialist could answer those questions.
> >>
> >> First some facts about the application :
> >> - Lucene version being used : 2.1.0 (february 2007...)
> >> - around 1.4M "documents" to be indexed.
> >> - Db size (all data to be indexed is stored in DB fields) : 3.5 GB
> >> - Index file size on disk : 1.6 GB (note that one cfs file is 780M,
> >> another one is 600M, the rest consists of smaller files)
> >> - single indexer, multiple readers (6 readers)
> >> - around 150 documents are modified per day
> >> - indexing is done right after every modification
> >> - simple searches can take ages (for instance searching for "chocolate=
"
> >> could take for more than 2 minutes)
> >> - I do not have access to source code (yes that's the funny part)
> >>
> >> My questions :
> >> - Is this version of Lucene still supported ?
> >> - What are the main reasons, if any, one should use the latest version
> >> of lucene instead of 2.1.0 ? (for instance : performance, stability,
> >> critical fixes, support, etc.) (the answer may sound obvious, but I
> >> would like to have an official answer)
> >> - Is there any recommendation concerning storage any Lucene user shoul=
d
> >> know (not benchmarks, but recommendations such as "better use physical
> >> HDD", "do not use NFS if possible", "if your cfs files are greater tha=
n
> >> XYZ, better use this kind of storage", "if you have more than XYZ
> >> searches per second, better..." etc)
> >> - Is there any recommandation concerning cfs file size ?
> >> - Is there a way to limit the size of cfs files ?
> >> - What is the impact on search performance if cfs file size is limited=
 ?
> >> - How often should optimization occur ? (every day, week, month ?)
> >> - I saw that IndexWriter has methods such as setMaxFieldLength()
> >> setMergeFactor() setMaxBufferedDocs() setMaxMergeDocs() Can you briefl=
y
> >> explain how these can affect performance ?
> >> - Is there any other recommandation "dummies" should be informed of, a=
nd
> >> every expert has to know ? For instance as a list of lucene patterns /
> >> anti patterns which may affect performance.
> >>
> >> If my questions are not precise enough, do not hesitate to ask for
> >> details. If you see an obvious problem do not hesitate to tell me.
> >>
> >> A big thank you in advance for your help,
> >>
> >> Best regards,
> >>
> >> Michel
> >>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
---
Thanks & Regards
Umesh Prasad

--00504502cd363e6f1304928200bd--

From java-user-return-47476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 17:22:58 2010
Return-Path: <java-user-return-47476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52974 invoked from network); 13 Oct 2010 17:22:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 17:22:58 -0000
Received: (qmail 70601 invoked by uid 500); 13 Oct 2010 17:22:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70547 invoked by uid 500); 13 Oct 2010 17:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70539 invoked by uid 99); 13 Oct 2010 17:22:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 17:22:55 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zching01@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 17:22:48 +0000
Received: by fxm13 with SMTP id 13so1040661fxm.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 10:22:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=SegclFsR84BQc+Pb1ctOecR1e28Oo153Py1rmKaUKB0=;
        b=fRtO3c+QZPfRq5OQVi297KCcvUZ78hLBgzkPZO9ZSfdbMNQFF/Kkt98QZXJm1HHyku
         YCLtQBmeVmv63tTxsfBx/jV0dA+e1XWNCQuwhMGXN65OVGlAsdG0tjt3hWJab5mSBLC+
         /3yml7dPqcHJhiKvGBZw8JpQ6e3XX04cd8zMs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xDlmNShTpskVBBXGHip+8vCR8slaCzC3wtLeJKIxxISEdt62I+WXFYDAob8QX86obm
         4oyeHOtQPVXkgw35uOC6gV6KNd/J+V7WHzgYuM6PMb7OIX+DEPxnDEsyTTOBt05xWwzM
         5GGZv8SwhkqmFzmuI5lv2PCyg3p6SD8dASdnA=
MIME-Version: 1.0
Received: by 10.103.175.13 with SMTP id c13mr1502350mup.30.1286990548283; Wed,
 13 Oct 2010 10:22:28 -0700 (PDT)
Received: by 10.223.107.133 with HTTP; Wed, 13 Oct 2010 10:22:28 -0700 (PDT)
In-Reply-To: <AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
	<AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
Date: Wed, 13 Oct 2010 11:22:28 -0600
Message-ID: <AANLkTimRTm8hafZu_-Dz-wUisO-o5BMMFv7Gvu_ezJss@mail.gmail.com>
Subject: Re: Indexing is hung or doesn't complete
From: Ching <zching01@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163662e56475b2b8049282d686
X-Virus-Checked: Checked by ClamAV on apache.org

--00163662e56475b2b8049282d686
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Thank you for your suggestions. I found the reason which is that PDFBox
seems having problem parsing large document (20MB), I have a few of them
within those 2000 docs, those are the ones throwing OutOfMemory errors. The
app does exit, and JVM died. I am running on 32bit machine.

-- Ching

On Tue, Oct 12, 2010 at 9:42 PM, Anshum <anshumg@gmail.com> wrote:

> Hi Ching,
> Does the app exit or hang and stay there? as in does the JVM stay alive and
> idle?
> Also, can you make sure that its not the pdfbox? as in, try commenting the
> indexwriter part and just read the pdfs, does that work fine.
> Can you also post info on your environment?
> Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
> This most probably seems like a code level issue rather than lucene, but I
> may be wrong.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:
>
> > Hi All,
> >
> > Can anyone help with this issue? I have about 2000 pdf files that I use
> > PDFBox to extract its text, then index them using for loop. The indexing
> > stopped after the fdt file reaches at 7,061 KB in size. There is no
> error,
> > the indexing simply stopped.  Thanks in advance for any help.
> >
> > Ching
> >
>

--00163662e56475b2b8049282d686--

From java-user-return-47477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 17:37:39 2010
Return-Path: <java-user-return-47477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60099 invoked from network); 13 Oct 2010 17:37:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 17:37:39 -0000
Received: (qmail 93361 invoked by uid 500); 13 Oct 2010 17:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93321 invoked by uid 500); 13 Oct 2010 17:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93313 invoked by uid 99); 13 Oct 2010 17:37:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 17:37:37 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of falha404@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 17:37:30 +0000
Received: by iwn3 with SMTP id 3so9107214iwn.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 10:37:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        bh=ti0+GYbiE8GTYF25ZcfYrluJyrD8Yp0UtgNEwG1S7lY=;
        b=qMTTeLMd131N3RBIanGx1db/qKg7VGOsElhriRlAV5AlYwm1Yo5qjUQAs6KiVc+8l7
         EZazOIUktKqT0Zf0sGMlZ5VfHIPvj8ZjKQooYgxEtigPddneuIxARkC3+8v/OwwrRydu
         8iuQ3cg36vhmWdKDUSeC7ASsVpMGvh+56QnaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=P9Rv+Gn4ofgPSQfMk8h8mAWIpDAGTsL3OmPeXfWpxv+/KPI19KbrdbhmMqDlA6pKgp
         zzQCzrK82FdaFrZsEogHICGIE67AoxzSqMEwXwD6NEDmLzJgqwR7x/O1t8JgsHbYtZjK
         oORLiL3HlOSHZ11s7nl1kCSVgeTgKKllhQuVM=
Received: by 10.231.170.21 with SMTP id b21mr7274122ibz.122.1286991427397;
 Wed, 13 Oct 2010 10:37:07 -0700 (PDT)
MIME-Version: 1.0
Sender: falha404@gmail.com
Received: by 10.231.154.209 with HTTP; Wed, 13 Oct 2010 10:36:46 -0700 (PDT)
In-Reply-To: <AANLkTimRTm8hafZu_-Dz-wUisO-o5BMMFv7Gvu_ezJss@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
 <AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com> <AANLkTimRTm8hafZu_-Dz-wUisO-o5BMMFv7Gvu_ezJss@mail.gmail.com>
From: Fabiano Nunes <fabiano@nunes.me>
Date: Wed, 13 Oct 2010 14:36:46 -0300
X-Google-Sender-Auth: Kc4oWBLt3WrSteJhykQuEJOm3_8
Message-ID: <AANLkTikLu1vfq2zd19dXD6Bk2DPDFjV1wwfYdNzyd9r-@mail.gmail.com>
Subject: Re: Indexing is hung or doesn't complete
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045029befdbe9600492830a66
X-Virus-Checked: Checked by ClamAV on apache.org

--005045029befdbe9600492830a66
Content-Type: text/plain; charset=ISO-8859-1

What version of PDFBox are you running?
PDFBox 0.72 does not work properly with some pdf documents. See more in
https://issues.apache.org/jira/browse/PDFBOX-361.
So, I wrote a extractor (a copy of the original, in fact) based on trunk
version (1.2.1, actually). Furthermore, this version is faster e more
efficient than 0.72, preventing from OutOfMemory. Nowadays, I don't use
PDFBox to extract text. I prefer poppler tools.

On Wed, Oct 13, 2010 at 2:22 PM, Ching <zching01@gmail.com> wrote:

> Hi,
>
> Thank you for your suggestions. I found the reason which is that PDFBox
> seems having problem parsing large document (20MB), I have a few of them
> within those 2000 docs, those are the ones throwing OutOfMemory errors. The
> app does exit, and JVM died. I am running on 32bit machine.
>
> -- Ching
>
> On Tue, Oct 12, 2010 at 9:42 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi Ching,
> > Does the app exit or hang and stay there? as in does the JVM stay alive
> and
> > idle?
> > Also, can you make sure that its not the pdfbox? as in, try commenting
> the
> > indexwriter part and just read the pdfs, does that work fine.
> > Can you also post info on your environment?
> > Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
> > This most probably seems like a code level issue rather than lucene, but
> I
> > may be wrong.
> >
> > --
> > Anshum Gupta
> > http://ai-cafe.blogspot.com
> >
> >
> > On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:
> >
> > > Hi All,
> > >
> > > Can anyone help with this issue? I have about 2000 pdf files that I use
> > > PDFBox to extract its text, then index them using for loop. The
> indexing
> > > stopped after the fdt file reaches at 7,061 KB in size. There is no
> > error,
> > > the indexing simply stopped.  Thanks in advance for any help.
> > >
> > > Ching
> > >
> >
>

--005045029befdbe9600492830a66--

From java-user-return-47478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 13 20:55:16 2010
Return-Path: <java-user-return-47478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51194 invoked from network); 13 Oct 2010 20:55:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Oct 2010 20:55:16 -0000
Received: (qmail 1921 invoked by uid 500); 13 Oct 2010 20:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1871 invoked by uid 500); 13 Oct 2010 20:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1863 invoked by uid 99); 13 Oct 2010 20:55:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Oct 2010 20:55:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.52.240] (HELO nm25-vm0.bullet.mail.ac4.yahoo.com) (98.139.52.240)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Oct 2010 20:55:07 +0000
Received: from [98.139.52.195] by nm25.bullet.mail.ac4.yahoo.com with NNFMP; 13 Oct 2010 20:54:46 -0000
Received: from [98.139.52.184] by tm8.bullet.mail.ac4.yahoo.com with NNFMP; 13 Oct 2010 20:54:46 -0000
Received: from [127.0.0.1] by omp1067.mail.ac4.yahoo.com with NNFMP; 13 Oct 2010 20:54:46 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 89002.36226.bm@omp1067.mail.ac4.yahoo.com
Received: (qmail 43707 invoked by uid 60001); 13 Oct 2010 20:54:46 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1287003285; bh=jkS3V26vpQEan5yIiH/unk5gFDrqtyUOA1yVZUqOHJg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=cICCD1dKTwut9EA5IyRShK/nyqvQKYw4MH3FmGVQgn2CrK++sadwrBKmkelAu5yXs+Cb8Ut/O4LWvRO77oKQps1leoTAWgCcsDw0XtqqSoN2nkC3P9H3SUdc0cOcDP/MIohs67vbPOOQUHcEjKvecRU88qSYjBlAdlNa1LpVqHQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BruVkj23b7jMhyzY+kXuv7wuQ/BlZJWnMWCwix7eRcJI+60YIuq/I/emoU3mpERoGesslRwuUevDJVuP7X8gzi2RZtIc5amNa6bLxy7jPZ0gu3spBdNamG28R2NnIQLCZ4am1FsNmBHecjsh/uAn9C0o7ybrTVKC2sYWAxjzCY0=;
Message-ID: <898709.38710.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: oRpsRw0VM1m_vEnUQLkFRTvvv7BA8WMxDEukFNuWu6d7Mbt
 8me81FBXtviDvAPzkxBb9RO.jQ0f2myqw5yN5aI1SoIoloKD_D7iCfBzKqnt
 bUKfEqfj2IXqaitE3iQFzdMxn4MT5BLFtCGBh2ov_cW_AHBphr6XgxJQfwe0
 sS3PUOyVjUAuiG.aoFlrTVM9t0FbjHjVAncRDK1Xa4x3vU.DQvczxeAEy2Nw
 484ZyACfaSUDQh8_5fVq_GJV8d5zIGIVRKToLjBE2xo_4HrcIsdSw_AoyqWZ
 JqxZ6vaS_xsHfN98BO47ogEXO.xU6ZwCGsmMGisIXfHKUClDDhTO7fID46s3
 esTyKpBU-
Received: from [184.75.0.186] by web50306.mail.re2.yahoo.com via HTTP; Wed, 13 Oct 2010 13:54:45 PDT
X-Mailer: YahooMailRC/504.5 YahooMailWebService/0.8.106.282862
References: <3B4AEBB59588ED409ECE3CB6517C417510C036EB23@exchange.windows.mmu.acquiremedia.com> <AANLkTinOMdNtshh6W6_netz+oX8=FBNiXPxVos4mvC_h@mail.gmail.com>
Date: Wed, 13 Oct 2010 13:54:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How about lucene's delete performance ?
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinOMdNtshh6W6_netz+oX8=FBNiXPxVos4mvC_h@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello,

Of course, if you actually want the last 7 days rolling effect and not the this 
week vs. previous week, then you could go with smaller indices, say daily ones.
Then you'd always add new docs to the latest index and removing the oldest index 
completely every 24 hours.

You could go hourly, too, depending on your exact needs.

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Shai Erera <serera@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wed, October 13, 2010 11:06:46 AM
> Subject: Re: How about lucene's delete performance ?
> 
> Note that deleteAll does not require you to optimize anything. It  literally
> removes all segments from the index in one shot, and when the files  are
> unreferenced, they will be removed entirely.
> 
> Shai
> 
> On Wed,  Oct 13, 2010 at 4:53 PM, Dan OConnor 
<doconnor@acquiremedia.com>wrote:
> 
> >  Jeff,
> > I would suggest not deleting documents off the back of the index  unless you
> > can optimize your index regularly. (Depending on your volume,  this could be
> > every day or once a week)
> >
> > I would suggest  having two indexes, one that is "this" week and one that is
> > "last" week  and a multi-index searcher that is aware of the date. When you
> > get to  the end of "this" week, you would delete "last" week's index and
> > create  a new "next" week index.
> >
> > Regards
> >  Dan
> >
> >
> > ----- Original Message -----
> > From: Jeff  Zhang <zjffdu@gmail.com>
> > To: java-user@lucene.apache.org <java-user@lucene.apache.org>
> >  Sent: Wed Oct 13 09:37:31 2010
> > Subject: How about lucene's delete  performance ?
> >
> > Hi all,
> >
> > I only want to index the  latest one week's data, the previous data can
> > be deleted. So I'd like to  know about lucene's delete performance and
> > whether it will has impact on  the search performance when I do lots of
> > delete operation in the  meantime.  Thanks
> >
> > --
> > Best Regards
> >
> >  Jeff Zhang
> >
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 01:05:31 2010
Return-Path: <java-user-return-47479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80116 invoked from network); 14 Oct 2010 01:05:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 01:05:31 -0000
Received: (qmail 4260 invoked by uid 500); 14 Oct 2010 01:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4227 invoked by uid 500); 14 Oct 2010 01:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4219 invoked by uid 99); 14 Oct 2010 01:05:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 01:05:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lev_bronshtein@hotmail.com designates 65.55.34.84 as permitted sender)
Received: from [65.55.34.84] (HELO col0-omc2-s10.col0.hotmail.com) (65.55.34.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 01:05:21 +0000
Received: from COL118-W22 ([65.55.34.72]) by col0-omc2-s10.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Wed, 13 Oct 2010 18:05:00 -0700
Message-ID: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>
X-Originating-IP: [96.224.227.191]
From: Lev Bronshtein <lev_bronshtein@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: MultiFieldQueryParser
Date: Wed, 13 Oct 2010 21:04:59 -0400
Importance: Normal
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Oct 2010 01:05:01.0086 (UTC) FILETIME=[D3CCFBE0:01CB6B3B]


Hi Group=2C=20

I have an isue when using MultiFieldQueryParser=2C I would like to use one =
query against a number of fields however I get an=20
java.lang.IllegalArgumentException: queries.length !=3D fields.length

Looked at the javadoc=2C and it looks like the only way to run one query ag=
ainst multiple fields is to define flags for every field
See http://lucene.apache.org/java/3_0_2/api/all/index.html=2C the very last=
 parse method.=A0 All I really want to do is just run a query against multi=
ple fields=2C is there a simple way?

Regards=2C

Lev Bronshtein


 		 	   		  =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 01:40:47 2010
Return-Path: <java-user-return-47480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90395 invoked from network); 14 Oct 2010 01:40:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 01:40:46 -0000
Received: (qmail 25015 invoked by uid 500); 14 Oct 2010 01:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24971 invoked by uid 500); 14 Oct 2010 01:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24963 invoked by uid 99); 14 Oct 2010 01:40:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 01:40:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 01:40:38 +0000
Received: by qyk7 with SMTP id 7so1471069qyk.14
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 18:40:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=AIxhsrgGukdGKPd3G5/xrYs+H28K6h1XYZbpoiSn+xY=;
        b=mCzwZg7Te8dpzkk4VElK9TRGAD6qjPBLfbJuUsLhJEk207QaqUmFO8oB5JFoRvsNdJ
         d8VJdexhgLS8CL2R9uDWwd0X1FbBIvnytax4yLCuc5Z1LeGAU/avw1T3m8uUWDKiFsjx
         F4WnItI8shVveOKfe3cCVD5IWNYEyUSnfWpgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=J9lzrKiNu9QWa+T62NeCmzqIrpNtToarXVnwwvYUa7G+WQTVmqfTT2jlKAtB2b7Pld
         l1jYoSxImudmasmMIIgi4WWh0PWiSA2zn4Ec5KOwb1q3IldtmvE9Z3AFSJ8W/M4HQUUT
         vMCvpyq+mhdEjW4eG88v/fu1x1swIdMIVKNCk=
MIME-Version: 1.0
Received: by 10.224.19.129 with SMTP id a1mr136704qab.206.1287020416949; Wed,
 13 Oct 2010 18:40:16 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Wed, 13 Oct 2010 18:40:16 -0700 (PDT)
In-Reply-To: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>
References: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>
Date: Wed, 13 Oct 2010 21:40:16 -0400
Message-ID: <AANLkTimbD2jzqDUMOufUnt4BZSuRf9T1cu63pU46tAZJ@mail.gmail.com>
Subject: Re: MultiFieldQueryParser
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb2c2c55c88049289ca69

--0015175cb2c2c55c88049289ca69
Content-Type: text/plain; charset=ISO-8859-1

I'm not quite sure what you mean by "run a query against multiple fields".
But would
creating your own BooleanQuery where each clause was the parsed result
against
a specific field work?

If this is irrelevant, could you give a couple of examples of what you're
looking to
accomplish?

Best
Erick

On Wed, Oct 13, 2010 at 9:04 PM, Lev Bronshtein
<lev_bronshtein@hotmail.com>wrote:

>
> Hi Group,
>
> I have an isue when using MultiFieldQueryParser, I would like to use one
> query against a number of fields however I get an
> java.lang.IllegalArgumentException: queries.length != fields.length
>
> Looked at the javadoc, and it looks like the only way to run one query
> against multiple fields is to define flags for every field
> See http://lucene.apache.org/java/3_0_2/api/all/index.html, the very last
> parse method.  All I really want to do is just run a query against multiple
> fields, is there a simple way?
>
> Regards,
>
> Lev Bronshtein
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cb2c2c55c88049289ca69--

From java-user-return-47481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 02:24:46 2010
Return-Path: <java-user-return-47481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8380 invoked from network); 14 Oct 2010 02:24:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 02:24:46 -0000
Received: (qmail 64178 invoked by uid 500); 14 Oct 2010 02:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64124 invoked by uid 500); 14 Oct 2010 02:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64116 invoked by uid 99); 14 Oct 2010 02:24:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 02:24:44 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zching01@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 02:24:37 +0000
Received: by fxm13 with SMTP id 13so1531261fxm.35
        for <java-user@lucene.apache.org>; Wed, 13 Oct 2010 19:24:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=PzOzuH9DP2xrkqrUE3ECRHEAVicQ8LtGjhfNnu1gsK0=;
        b=qfZSNfg5vPlZjOc7wd0awPRKwWLCP83GSIQ4H9tZXMK9R7NCp1IvInxjxGejr1YreH
         Xe34ltIMIVoHCvC8dlUXrQhHgl4DrLuKdqw31QhCMNGdaPTxgtOEt0TKrCYYVa27ZDk7
         GFr2MxyhK4uUQPyO1uYX2yS+t0izAmfW9NerE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mZ1Gg8LL3tJ2ty+tYQP2yyPEu76DvOI0iFyjdBr80vU1kCgyhMlwAnQ9NkahlIp2K0
         rRq/pxB2aAMWa9cMUIGQLwDTV18t8Ij0Ygecsa2XGCvmCsHC1R1BsflhJVGCN67inoK3
         1Zrs9iiUXjicFbB7TY0M64dDZkuHOaMGEvMMQ=
MIME-Version: 1.0
Received: by 10.103.171.6 with SMTP id y6mr1627762muo.99.1287023055867; Wed,
 13 Oct 2010 19:24:15 -0700 (PDT)
Received: by 10.223.107.133 with HTTP; Wed, 13 Oct 2010 19:24:15 -0700 (PDT)
In-Reply-To: <AANLkTikLu1vfq2zd19dXD6Bk2DPDFjV1wwfYdNzyd9r-@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com>
	<AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com>
	<AANLkTimRTm8hafZu_-Dz-wUisO-o5BMMFv7Gvu_ezJss@mail.gmail.com>
	<AANLkTikLu1vfq2zd19dXD6Bk2DPDFjV1wwfYdNzyd9r-@mail.gmail.com>
Date: Wed, 13 Oct 2010 20:24:15 -0600
Message-ID: <AANLkTi=qy_PiwHDgejKXacaBWqGzdjFjMbBnFstUVwu5@mail.gmail.com>
Subject: Re: Indexing is hung or doesn't complete
From: Ching <zching01@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64987c0100f0a04928a6884
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64987c0100f0a04928a6884
Content-Type: text/plain; charset=ISO-8859-1

I use PDFBox version 1.1.0; I did find a workaround now. Just wondering
which tools do you use to extract text from pdf? Thanks.

On Wed, Oct 13, 2010 at 11:36 AM, Fabiano Nunes <fabiano@nunes.me> wrote:

> What version of PDFBox are you running?
> PDFBox 0.72 does not work properly with some pdf documents. See more in
> https://issues.apache.org/jira/browse/PDFBOX-361.
> So, I wrote a extractor (a copy of the original, in fact) based on trunk
> version (1.2.1, actually). Furthermore, this version is faster e more
> efficient than 0.72, preventing from OutOfMemory. Nowadays, I don't use
> PDFBox to extract text. I prefer poppler tools.
>
> On Wed, Oct 13, 2010 at 2:22 PM, Ching <zching01@gmail.com> wrote:
>
> > Hi,
> >
> > Thank you for your suggestions. I found the reason which is that PDFBox
> > seems having problem parsing large document (20MB), I have a few of them
> > within those 2000 docs, those are the ones throwing OutOfMemory errors.
> The
> > app does exit, and JVM died. I am running on 32bit machine.
> >
> > -- Ching
> >
> > On Tue, Oct 12, 2010 at 9:42 PM, Anshum <anshumg@gmail.com> wrote:
> >
> > > Hi Ching,
> > > Does the app exit or hang and stay there? as in does the JVM stay alive
> > and
> > > idle?
> > > Also, can you make sure that its not the pdfbox? as in, try commenting
> > the
> > > indexwriter part and just read the pdfs, does that work fine.
> > > Can you also post info on your environment?
> > > Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
> > > This most probably seems like a code level issue rather than lucene,
> but
> > I
> > > may be wrong.
> > >
> > > --
> > > Anshum Gupta
> > > http://ai-cafe.blogspot.com
> > >
> > >
> > > On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:
> > >
> > > > Hi All,
> > > >
> > > > Can anyone help with this issue? I have about 2000 pdf files that I
> use
> > > > PDFBox to extract its text, then index them using for loop. The
> > indexing
> > > > stopped after the fdt file reaches at 7,061 KB in size. There is no
> > > error,
> > > > the indexing simply stopped.  Thanks in advance for any help.
> > > >
> > > > Ching
> > > >
> > >
> >
>

--0016e64987c0100f0a04928a6884--

From java-user-return-47482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 05:33:19 2010
Return-Path: <java-user-return-47482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60679 invoked from network); 14 Oct 2010 05:33:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 05:33:19 -0000
Received: (qmail 71132 invoked by uid 500); 14 Oct 2010 05:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71013 invoked by uid 500); 14 Oct 2010 05:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71005 invoked by uid 99); 14 Oct 2010 05:33:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 05:33:12 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 05:33:06 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <154585(1)>; Wed, 13 Oct 2010 22:32:32 PDT
To: java-user@lucene.apache.org
Subject: Re: Indexing is hung or doesn't complete
In-reply-to: <AANLkTi=qy_PiwHDgejKXacaBWqGzdjFjMbBnFstUVwu5@mail.gmail.com>
References: <AANLkTimHD-VbD03cxv0RebPHyzAsw9bxfQWuhcJimA-H@mail.gmail.com> <AANLkTimM8jzpdtYwu4FqxCU+U+RkvY6rpcjjUFgg_WTj@mail.gmail.com> <AANLkTimRTm8hafZu_-Dz-wUisO-o5BMMFv7Gvu_ezJss@mail.gmail.com> <AANLkTikLu1vfq2zd19dXD6Bk2DPDFjV1wwfYdNzyd9r-@mail.gmail.com> <AANLkTi=qy_PiwHDgejKXacaBWqGzdjFjMbBnFstUVwu5@mail.gmail.com>
Comments: In-reply-to Ching <zching01@gmail.com>
    message dated "Wed, 13 Oct 2010 19:24:15 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Wed, 13 Oct 2010 22:32:32 PDT
Message-ID: <24841.1287034352@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ching <zching01@gmail.com> wrote:

> I use PDFBox version 1.1.0; I did find a workaround now. Just wondering
> which tools do you use to extract text from pdf? Thanks.

Ching, in UpLib I use a patched version of xpdf which reports the
bounding box and font information for each word (as well as the Unicode
characters of the word :-).  It works fine with the Long_9.pdf file
that's attached to the issue you pointed out.  You might want to try
that.  (The same wordbox info is available from PDFBox, but you have to
write some code to access it.)

To build the patched xpdf:

Download and unpack xpdf-3.02pl4 from http://www.foolabs.com/xpdf/download.html.

Download UpLib from
http://uplib.parc.com/uplib/releases/1.7.10/uplib-1.7.10.tgz and untar
it.  You'll find a file called "patches/xpdf-3.02-PATCH".  Patch the
xpdf sources with that patch:

  cd xpdf-3.02
  patch -p0 < /tmp/uplib-1.7.10/patches/xpdf-3.02-PATCH

Then configure and build xpdf.  You can now extract words and wordbox info
from the PDF file with "pdftotext".  

There's still the issue that neither PDFBox or xpdf or the built-in
Windows, OS X, or Linux utilities for extracting text from PDFs does
layout analysis properly, so the words you get will often be in the
wrong order.  But that's usually only a problem if you are doing things
with multi-word phrases.

Bill

> On Wed, Oct 13, 2010 at 11:36 AM, Fabiano Nunes <fabiano@nunes.me> wrote:
> 
> > What version of PDFBox are you running?
> > PDFBox 0.72 does not work properly with some pdf documents. See more in
> > https://issues.apache.org/jira/browse/PDFBOX-361.
> > So, I wrote a extractor (a copy of the original, in fact) based on trunk
> > version (1.2.1, actually). Furthermore, this version is faster e more
> > efficient than 0.72, preventing from OutOfMemory. Nowadays, I don't use
> > PDFBox to extract text. I prefer poppler tools.
> >
> > On Wed, Oct 13, 2010 at 2:22 PM, Ching <zching01@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > Thank you for your suggestions. I found the reason which is that PDFBox
> > > seems having problem parsing large document (20MB), I have a few of them
> > > within those 2000 docs, those are the ones throwing OutOfMemory errors.
> > The
> > > app does exit, and JVM died. I am running on 32bit machine.
> > >
> > > -- Ching
> > >
> > > On Tue, Oct 12, 2010 at 9:42 PM, Anshum <anshumg@gmail.com> wrote:
> > >
> > > > Hi Ching,
> > > > Does the app exit or hang and stay there? as in does the JVM stay alive
> > > and
> > > > idle?
> > > > Also, can you make sure that its not the pdfbox? as in, try commenting
> > > the
> > > > indexwriter part and just read the pdfs, does that work fine.
> > > > Can you also post info on your environment?
> > > > Index Size? Lucene Version? Machine  and JVM (32/64 bit)?
> > > > This most probably seems like a code level issue rather than lucene,
> > but
> > > I
> > > > may be wrong.
> > > >
> > > > --
> > > > Anshum Gupta
> > > > http://ai-cafe.blogspot.com
> > > >
> > > >
> > > > On Wed, Oct 13, 2010 at 8:08 AM, Ching <zching01@gmail.com> wrote:
> > > >
> > > > > Hi All,
> > > > >
> > > > > Can anyone help with this issue? I have about 2000 pdf files that I
> > use
> > > > > PDFBox to extract its text, then index them using for loop. The
> > > indexing
> > > > > stopped after the fdt file reaches at 7,061 KB in size. There is no
> > > > error,
> > > > > the indexing simply stopped.  Thanks in advance for any help.
> > > > >
> > > > > Ching
> > > > >
> > > >
> > >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 09:07:51 2010
Return-Path: <java-user-return-47483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32537 invoked from network); 14 Oct 2010 09:07:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 09:07:50 -0000
Received: (qmail 51920 invoked by uid 500); 14 Oct 2010 09:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51580 invoked by uid 500); 14 Oct 2010 09:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51567 invoked by uid 99); 14 Oct 2010 09:07:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 09:07:43 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of labrassbandito@googlemail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 09:07:37 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <labrassbandito@googlemail.com>)
	id 1P6JmN-0005ZP-Ug
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 02:07:15 -0700
Date: Thu, 14 Oct 2010 02:07:15 -0700 (PDT)
From: subwayne <labrassbandito@googlemail.com>
To: java-user@lucene.apache.org
Message-ID: <1287047235931-1699711.post@n3.nabble.com>
Subject: IndexSearch very slow after reopening the index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'am facing some problems in using Lucene. The index I am using is
constructed like this:

try {
  Analyzer analyzer = new SnowballAnalyzer(Version.LUCENE_30, "English");
  Directory dir = MMapDirectory.open(index);
  IndexWriter writer = new IndexWriter(dir, analyzer,
MaxFieldLength.LIMITED);
  searcher = new IndexSearcher(dir);

  Document luceneDocument;
  int numClusters = clustering.getClusterCount();
  String[] clusterLabels = clustering.getClusterLabels();
  for (int cluId = 0; cluId != numClusters; ++cluId) {
    int[] docIds = clustering.getItemsOfCluster(cluId);
    for (int docId : docIds) {
      luceneDocument = new Document();
      luceneDocument.add(new NumericField("id", Field.Store.YES,
true).setIntValue(docId));
      luceneDocument.add(new NumericField("cluster_id", Field.Store.YES,
true).setIntValue(cluId));
      luceneDocument.add(new Field(
        "plaintext", texts.get(docId),
        Field.Store.NO, 
        Field.Index.ANALYZED, 
        Field.TermVector.YES));
      luceneDocument.add(new Field(
        "label", clusterLabels[cluId],
        Field.Store.YES, 
        Field.Index.ANALYZED, 
        Field.TermVector.YES));
      writer.addDocument(luceneDocument);
    }
  }

  writer.optimize();
  writer.close();

} catch (IOException e) {
  e.printStackTrace();
}

Then, while the Java application is running, the speed of Lucene is good. I
can sift through about 11,000 categories in a few minutes. However, if I
restart the application and read in the previous created Lucene index
instead of generating a new one via:

try {
  Directory dir = MMapDirectory.open(index);
  searcher = new IndexSearcher(dir);
} catch (CorruptIndexException e) {
  e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace();
}

Now, only about 10 categories are examined within a few minutes instead of
11,000 categories like before. Subsequently, my question is why the access
to Lucene is very slow in the second case. A usually query looks like this:

BooleanQuery booleanQuery = new BooleanQuery();
Term luceneTerm = new Term(PLAINTEXT, stemmer.process(candidate));
TermQuery termQuery = new TermQuery(luceneTerm);
booleanQuery.add(termQuery, BooleanClause.Occur.MUST);
NumericRangeQuery<Integer> lTerm = 
NumericRangeQuery.newIntRange(CLUSTER_ID, clusterId, clusterId, true, true);
booleanQuery.add(lTerm, BooleanClause.Occur.MUST);
TopDocs resultSet = queryIndex(searcher, booleanQuery);

Thank you!
-- 
View this message in context: http://lucene.472066.n3.nabble.com/IndexSearch-very-slow-after-reopening-the-index-tp1699711p1699711.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 09:34:44 2010
Return-Path: <java-user-return-47484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44421 invoked from network); 14 Oct 2010 09:34:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 09:34:43 -0000
Received: (qmail 92182 invoked by uid 500); 14 Oct 2010 09:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91772 invoked by uid 500); 14 Oct 2010 09:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91764 invoked by uid 99); 14 Oct 2010 09:34:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 09:34:38 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 09:34:32 +0000
Received: by qyk29 with SMTP id 29so9471335qyk.14
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 02:34:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=4CrmglO21ZwHvfNctUwT0DyBVt9hQt1yxeqDyMsYI6I=;
        b=ZRRAygneVvL/+HEZTzQpPsCK4BkxMTu9DO8c2l7I3v1BvV18VEm2+3Fjfr8e3tn2Sx
         o5ruIm3+wwmlZ+ETdb0Ix0UA7pCtdDPD1C3BS+V8S36EtGCj0avjPKtSpTNFWitOVslx
         m/NHp3F3dHl3G0WmqYpsbOug6TssraPOXcLyM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=YhPmfL7tQAvS18KCQdiZrp+Gj+0wCCBOJyZzbf0COY9ArfiDWMSdVMGLpADOBxE4Pi
         Aa0sSELRMHBh90rhthE3AwFy4BlpdzDtr+UOR3BKJodr7vut+qqUQGA9mAvsX3NQk8Ty
         pwPrAxgRFEH1oqgKJLztLi7PmsBGOFwYv7wHo=
Received: by 10.229.70.143 with SMTP id d15mr6870879qcj.232.1287048850974;
 Thu, 14 Oct 2010 02:34:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Thu, 14 Oct 2010 02:33:47 -0700 (PDT)
In-Reply-To: <1287047235931-1699711.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 14 Oct 2010 10:33:47 +0100
Message-ID: <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Do the fast searches that you get while the app is running use the
searcher you create before you add all the docs to the index?  Surely
that won't see the added docs.

There are general tips on speeding up searches at
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.  There are
some gotchas with MMapDirectory depending on your OS and whether you
are 32 or 64 bit - see the javadocs.  What are you running? What
happens when you use a standard disk based directory rather than MMap?
 How many docs are you adding?  How big is the index?  What version of
lucene are you using?

Your NumericRangeQuery doesn't look much like a range but I doubt
that's the problem.

Finally, you could run a profiler to see where the time is being spent.


--
Ian.

On Thu, Oct 14, 2010 at 10:07 AM, subwayne
<labrassbandito@googlemail.com> wrote:
>
> Hi,
>
> I'am facing some problems in using Lucene. The index I am using is
> constructed like this:
>
> try {
> =A0Analyzer analyzer =3D new SnowballAnalyzer(Version.LUCENE_30, "English=
");
> =A0Directory dir =3D MMapDirectory.open(index);
> =A0IndexWriter writer =3D new IndexWriter(dir, analyzer,
> MaxFieldLength.LIMITED);
> =A0searcher =3D new IndexSearcher(dir);
>
> =A0Document luceneDocument;
> =A0int numClusters =3D clustering.getClusterCount();
> =A0String[] clusterLabels =3D clustering.getClusterLabels();
> =A0for (int cluId =3D 0; cluId !=3D numClusters; ++cluId) {
> =A0 =A0int[] docIds =3D clustering.getItemsOfCluster(cluId);
> =A0 =A0for (int docId : docIds) {
> =A0 =A0 =A0luceneDocument =3D new Document();
> =A0 =A0 =A0luceneDocument.add(new NumericField("id", Field.Store.YES,
> true).setIntValue(docId));
> =A0 =A0 =A0luceneDocument.add(new NumericField("cluster_id", Field.Store.=
YES,
> true).setIntValue(cluId));
> =A0 =A0 =A0luceneDocument.add(new Field(
> =A0 =A0 =A0 =A0"plaintext", texts.get(docId),
> =A0 =A0 =A0 =A0Field.Store.NO,
> =A0 =A0 =A0 =A0Field.Index.ANALYZED,
> =A0 =A0 =A0 =A0Field.TermVector.YES));
> =A0 =A0 =A0luceneDocument.add(new Field(
> =A0 =A0 =A0 =A0"label", clusterLabels[cluId],
> =A0 =A0 =A0 =A0Field.Store.YES,
> =A0 =A0 =A0 =A0Field.Index.ANALYZED,
> =A0 =A0 =A0 =A0Field.TermVector.YES));
> =A0 =A0 =A0writer.addDocument(luceneDocument);
> =A0 =A0}
> =A0}
>
> =A0writer.optimize();
> =A0writer.close();
>
> } catch (IOException e) {
> =A0e.printStackTrace();
> }
>
> Then, while the Java application is running, the speed of Lucene is good.=
 I
> can sift through about 11,000 categories in a few minutes. However, if I
> restart the application and read in the previous created Lucene index
> instead of generating a new one via:
>
> try {
> =A0Directory dir =3D MMapDirectory.open(index);
> =A0searcher =3D new IndexSearcher(dir);
> } catch (CorruptIndexException e) {
> =A0e.printStackTrace();
> } catch (IOException e) {
> =A0e.printStackTrace();
> }
>
> Now, only about 10 categories are examined within a few minutes instead o=
f
> 11,000 categories like before. Subsequently, my question is why the acces=
s
> to Lucene is very slow in the second case. A usually query looks like thi=
s:
>
> BooleanQuery booleanQuery =3D new BooleanQuery();
> Term luceneTerm =3D new Term(PLAINTEXT, stemmer.process(candidate));
> TermQuery termQuery =3D new TermQuery(luceneTerm);
> booleanQuery.add(termQuery, BooleanClause.Occur.MUST);
> NumericRangeQuery<Integer> lTerm =3D
> NumericRangeQuery.newIntRange(CLUSTER_ID, clusterId, clusterId, true, tru=
e);
> booleanQuery.add(lTerm, BooleanClause.Occur.MUST);
> TopDocs resultSet =3D queryIndex(searcher, booleanQuery);
>
> Thank you!
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexSea=
rch-very-slow-after-reopening-the-index-tp1699711p1699711.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:04:29 2010
Return-Path: <java-user-return-47485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61657 invoked from network); 14 Oct 2010 10:04:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:04:24 -0000
Received: (qmail 30680 invoked by uid 500); 14 Oct 2010 10:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29338 invoked by uid 500); 14 Oct 2010 10:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29317 invoked by uid 99); 14 Oct 2010 10:04:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:04:15 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of labrassbandito@googlemail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:04:10 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <labrassbandito@googlemail.com>)
	id 1P6Kf7-0001kY-UP
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 03:03:49 -0700
Date: Thu, 14 Oct 2010 03:03:49 -0700 (PDT)
From: subwayne <labrassbandito@googlemail.com>
To: java-user@lucene.apache.org
Message-ID: <1287050629935-1699956.post@n3.nabble.com>
In-Reply-To: <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi Ian,

thank you for your quick response. I am running Lucene on Ubuntu 10.04, 64
bit. I switched from MMapDirectory to NIOFSDirectory without any significant
changes in performance. The Lucene version running is 3.0.2. I followed your
advice and opened the IndexSearcher after I added all documents to the
index. Now, the search performance is slow, too.

I am indexing a vast amount of the Open Directory Project; in particular
60,000 categories with about 1,400,000 documents. Each document is
represented by the short description made available bei ODP. Finally, the
index on hard disk is rather small---408 MBytes.

Regarding the NumericRangeQuery: It's true that I am only interested in an
exact match. However I found on some forum, that one can use the
NumericRangeQuery for exact matches as well without any performance loss.
Nevertheless, I am willing to learn how such an exact match can be don more
efficiently.

While searching with Lucene, I pose about 100 queries like in my first post
for each category.

Last but not least, I installed VisualVM as an Eclipse Plugin. But I am not
familiar with it and need to play with it a little bit.


Ian Lea wrote:
> 
> Do the fast searches that you get while the app is running use the
> searcher you create before you add all the docs to the index?  Surely
> that won't see the added docs.
> 
> There are general tips on speeding up searches at
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.  There are
> some gotchas with MMapDirectory depending on your OS and whether you
> are 32 or 64 bit - see the javadocs.  What are you running? What
> happens when you use a standard disk based directory rather than MMap?
>  How many docs are you adding?  How big is the index?  What version of
> lucene are you using?
> 
> Your NumericRangeQuery doesn't look much like a range but I doubt
> that's the problem.
> 
> Finally, you could run a profiler to see where the time is being spent.
> 
> 
> --
> Ian.
> 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/IndexSearch-very-slow-after-reopening-the-index-tp1699711p1699956.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:18:05 2010
Return-Path: <java-user-return-47486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77864 invoked from network); 14 Oct 2010 10:18:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:18:04 -0000
Received: (qmail 50728 invoked by uid 500); 14 Oct 2010 10:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50528 invoked by uid 500); 14 Oct 2010 10:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50520 invoked by uid 99); 14 Oct 2010 10:17:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:17:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:17:52 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P6KsK-0007Y4-PB
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 12:17:29 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Storing additional Metadata with Fields
Date: Thu, 14 Oct 2010 12:17:23 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
Organization: =?utf-8?q?Albert-Ludwigs-Universit=C3=A4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010141217.23568.hermann@informatik.uni-freiburg.de>

Hi,

is there a way to store additional metadata with fields?

My Problem is as follows:
I'm extracting extended html with tika. This extended html contains referen=
ces=20
to pages, x,y values of the text etc. I want to be able to retrieve those=20
values when text was found while searching.

So when creating the Document, i'm storing a Field for every part of the te=
xts=20
content of the document i'm currently indexing (lets call it "content").

Example:
I have the following content:
<html><body>
<span page=3D"1" x=3D"1", y=3D"1">This is a very</span>
<span page=3D"1" x=3D"1", y=3D"2">interesting text.</span>
<span page=3D"2" x=3D"1", y=3D"1">This is boring text</span>
</body></html>

So i would store the following:

doc.add(new Field("content", "This is a very", Field.Store.YES,=20
=46ield.Index.YES));
doc.add(new Field("content", "interesting text", Field.Store.YES,=20
=46ield.Index.YES));
doc.add(new Field("content", "This is boring text", Field.Store.YES,=20
=46ield.Index.YES));

Is there any way to include the page,x,y values in there?
I'd like to display the page when retrieving the results.

I thought about storing the same field twice and adding the page,x,y values=
 at=20
the beginning of the Field and then when retrieving the field extract those=
=20
values, but maybe theres a better way?

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:28:24 2010
Return-Path: <java-user-return-47487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83055 invoked from network); 14 Oct 2010 10:28:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:28:23 -0000
Received: (qmail 63830 invoked by uid 500); 14 Oct 2010 10:28:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63710 invoked by uid 500); 14 Oct 2010 10:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63702 invoked by uid 99); 14 Oct 2010 10:28:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:28:17 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pksinghus@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:28:11 +0000
Received: by gyh3 with SMTP id 3so2139933gyh.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 03:27:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=oNlIBGniTiPIf/WqiOkWWlM/yTM0HDToQXeFoRe93MA=;
        b=BDcFWmUUXh1dEjn7K6ggyhGupUt/b63nOOJCTSO+bNb920HjQNzaSGr9f0Lnaijpk/
         dJ4gfUcj5YSrPr/qdeHan+YOGZtpLTHtsgJ+YbEWkqFfgCxYrMWXSc0m7AIxInYbdS/O
         f+PEZKmHix1GXEp/tG/cqgjkcbYfWmu4OSplA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Alj5B4T0E8Xq+JJewUUSgYnMbXkH6q+QpfRC/PYWqjqNLyy8WBh1njkgeLotSv9wvC
         p+8Sj9fpIYRx7ZaTLrfSQfkhjhL3leSTn//G90XaqMK5LjxjOIKvARL7f3YV2XEucUrS
         OQJb7kdOiGjKkD3h92JlqfQrN0t4RHNosVo0I=
MIME-Version: 1.0
Received: by 10.42.104.210 with SMTP id s18mr4349636ico.471.1287052070075;
 Thu, 14 Oct 2010 03:27:50 -0700 (PDT)
Received: by 10.231.187.165 with HTTP; Thu, 14 Oct 2010 03:27:50 -0700 (PDT)
In-Reply-To: <1287050629935-1699956.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com>
	<AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
	<1287050629935-1699956.post@n3.nabble.com>
Date: Thu, 14 Oct 2010 03:27:50 -0700
Message-ID: <AANLkTikewTs+ERbJr7+orWbHv+4Av_KKeRVeYcOzbH-a@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
From: Pradeep Singh <pksinghus@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303ddb3271bced04929129c9
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303ddb3271bced04929129c9
Content-Type: text/plain; charset=ISO-8859-1

Many times when you run a search for the first time it has to load all field
values IF the field is being sorted on. Subsequent searches use that cache
and are faster. Does that happen in your case? From your description it
doesn't look like you are sorting, although this kind of performance
degradation would usually happen on first time sorts.

On Thu, Oct 14, 2010 at 3:03 AM, subwayne <labrassbandito@googlemail.com>wrote:

>
> Hi Ian,
>
> thank you for your quick response. I am running Lucene on Ubuntu 10.04, 64
> bit. I switched from MMapDirectory to NIOFSDirectory without any
> significant
> changes in performance. The Lucene version running is 3.0.2. I followed
> your
> advice and opened the IndexSearcher after I added all documents to the
> index. Now, the search performance is slow, too.
>
> I am indexing a vast amount of the Open Directory Project; in particular
> 60,000 categories with about 1,400,000 documents. Each document is
> represented by the short description made available bei ODP. Finally, the
> index on hard disk is rather small---408 MBytes.
>
> Regarding the NumericRangeQuery: It's true that I am only interested in an
> exact match. However I found on some forum, that one can use the
> NumericRangeQuery for exact matches as well without any performance loss.
> Nevertheless, I am willing to learn how such an exact match can be don more
> efficiently.
>
> While searching with Lucene, I pose about 100 queries like in my first post
> for each category.
>
> Last but not least, I installed VisualVM as an Eclipse Plugin. But I am not
> familiar with it and need to play with it a little bit.
>
>
> Ian Lea wrote:
> >
> > Do the fast searches that you get while the app is running use the
> > searcher you create before you add all the docs to the index?  Surely
> > that won't see the added docs.
> >
> > There are general tips on speeding up searches at
> > http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.  There are
> > some gotchas with MMapDirectory depending on your OS and whether you
> > are 32 or 64 bit - see the javadocs.  What are you running? What
> > happens when you use a standard disk based directory rather than MMap?
> >  How many docs are you adding?  How big is the index?  What version of
> > lucene are you using?
> >
> > Your NumericRangeQuery doesn't look much like a range but I doubt
> > that's the problem.
> >
> > Finally, you could run a profiler to see where the time is being spent.
> >
> >
> > --
> > Ian.
> >
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/IndexSearch-very-slow-after-reopening-the-index-tp1699711p1699956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf303ddb3271bced04929129c9--

From java-user-return-47488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:30:14 2010
Return-Path: <java-user-return-47488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83431 invoked from network); 14 Oct 2010 10:30:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:30:14 -0000
Received: (qmail 67032 invoked by uid 500); 14 Oct 2010 10:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66924 invoked by uid 500); 14 Oct 2010 10:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66916 invoked by uid 99); 14 Oct 2010 10:30:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:30:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pksinghus@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:30:04 +0000
Received: by iwn3 with SMTP id 3so10385292iwn.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 03:29:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=mlHBTIHoBfvdfz/UyaHIyKMJ6xyQJJcByZdmcW3bFUU=;
        b=tFBgLNkDSRaPRe5SWVIcxXoIfGsnbpuRsmAVG3KiI6zGWPwLCMm4k6hfvie75qIEac
         YqV7kudvF4s1g7ocC1+adLKnO5AyLxyM4BjCyTrizc5zB6NrnGP7dgt8W7hb9XdJbQcp
         pZsV7dULShGJ+4IHDe085X5BuKUqWiHZXp6sw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=izVfnVZz2NzU8jRKPsINeLOESH2mEUbiBz0JzZQRiu2FixQf/CcVQt7rxA1BhkU8DO
         7GRoRiIWw4DR9gBB5wcFOGvRUbVeLspooT8LSB/uvBcqJ2qpzoiPqa8g1A+qK1boCfRI
         ySo/brxzzkZ87BVKkoHvf38zQSUcs02Y1EIHw=
MIME-Version: 1.0
Received: by 10.42.216.142 with SMTP id hi14mr5080246icb.511.1287052183945;
 Thu, 14 Oct 2010 03:29:43 -0700 (PDT)
Received: by 10.231.187.165 with HTTP; Thu, 14 Oct 2010 03:29:43 -0700 (PDT)
In-Reply-To: <201010141217.23568.hermann@informatik.uni-freiburg.de>
References: <201010141217.23568.hermann@informatik.uni-freiburg.de>
Date: Thu, 14 Oct 2010 03:29:43 -0700
Message-ID: <AANLkTimeFj3b9AF6R-meQ1MVyeYJK_vC0jYFYS=eHoV-@mail.gmail.com>
Subject: Re: Storing additional Metadata with Fields
From: Pradeep Singh <pksinghus@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf301cbd6e3b435d049291307a

--20cf301cbd6e3b435d049291307a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Payload!!

2010/10/14 Christoph Hermann <hermann@informatik.uni-freiburg.de>

> Hi,
>
> is there a way to store additional metadata with fields?
>
> My Problem is as follows:
> I'm extracting extended html with tika. This extended html contains
> references
> to pages, x,y values of the text etc. I want to be able to retrieve those
> values when text was found while searching.
>
> So when creating the Document, i'm storing a Field for every part of the
> texts
> content of the document i'm currently indexing (lets call it "content").
>
> Example:
> I have the following content:
> <html><body>
> <span page=3D"1" x=3D"1", y=3D"1">This is a very</span>
> <span page=3D"1" x=3D"1", y=3D"2">interesting text.</span>
> <span page=3D"2" x=3D"1", y=3D"1">This is boring text</span>
> </body></html>
>
> So i would store the following:
>
> doc.add(new Field("content", "This is a very", Field.Store.YES,
> Field.Index.YES));
> doc.add(new Field("content", "interesting text", Field.Store.YES,
> Field.Index.YES));
> doc.add(new Field("content", "This is boring text", Field.Store.YES,
> Field.Index.YES));
>
> Is there any way to include the page,x,y values in there?
> I'd like to display the page when retrieving the results.
>
> I thought about storing the same field twice and adding the page,x,y valu=
es
> at
> the beginning of the Field and then when retrieving the field extract tho=
se
> values, but maybe theres a better way?
>
> regards
> Christoph Hermann
>
> --
> Christoph Hermann
> Institut f=FCr Informatik
> Tel: +49 761-203-8171 Fax: +49 761-203-8162
> e-mail: hermann@informatik.uni-freiburg.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf301cbd6e3b435d049291307a--

From java-user-return-47489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:30:37 2010
Return-Path: <java-user-return-47489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83514 invoked from network); 14 Oct 2010 10:30:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:30:37 -0000
Received: (qmail 68919 invoked by uid 500); 14 Oct 2010 10:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68849 invoked by uid 500); 14 Oct 2010 10:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68841 invoked by uid 99); 14 Oct 2010 10:30:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:30:32 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:30:26 +0000
Received: by qwf7 with SMTP id 7so1780530qwf.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 03:30:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=TwfaVuQUVTgB//UrAifXiRr/RjVZPw6PzscA8KNkCRw=;
        b=E/Ah4DE8dLaodJP/Z5SZvgmgErkyvgwxKabFX2VEyodh77Xff89DBQAO/BpV6bB6r4
         bF6OR5RpQC/pAwOmKZ/IXMcB35wCabLDR44ievLfCJlQUfa9mNsYPA4wDiU/qgQAWlGa
         jUw+/X1LTmVGjoW3Gv+cYM8Qtrq9WBIERZSMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=r6lmzgsRD1yq+B7m5SkY6oHLdVvCNkr88+acDWwiosWLwgJ+J+JPjg7fDFqPm+iJKJ
         G69r5aIb7KtHO2JE5gnycpKZ0QrmbSuTyvg2GO2unUQIdEVJyWq/iIYdMBbVqH5KsCW4
         oZVzdd/kyeiKv/ukK8AXezcvC6zZ9se3D9zIc=
Received: by 10.229.95.204 with SMTP id e12mr8690443qcn.139.1287052204652;
 Thu, 14 Oct 2010 03:30:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Thu, 14 Oct 2010 03:29:14 -0700 (PDT)
In-Reply-To: <1287050629935-1699956.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
 <1287050629935-1699956.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 14 Oct 2010 11:29:14 +0100
Message-ID: <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK, so it looks like we're down to a more general "why is searching
slow" question.

The number of docs is not very large by lucene standards.

Work through http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

If that still doesn't help, pick a slow query and post again with:

. the output of query.toString()
. the number of docs matched
. how long it took first time on new searcher, and second and third
and ... tenth
. ummm... anything else you think might be relevant.

Good luck.


--
Ian.

On Thu, Oct 14, 2010 at 11:03 AM, subwayne
<labrassbandito@googlemail.com> wrote:
>
> Hi Ian,
>
> thank you for your quick response. I am running Lucene on Ubuntu 10.04, 6=
4
> bit. I switched from MMapDirectory to NIOFSDirectory without any signific=
ant
> changes in performance. The Lucene version running is 3.0.2. I followed y=
our
> advice and opened the IndexSearcher after I added all documents to the
> index. Now, the search performance is slow, too.
>
> I am indexing a vast amount of the Open Directory Project; in particular
> 60,000 categories with about 1,400,000 documents. Each document is
> represented by the short description made available bei ODP. Finally, the
> index on hard disk is rather small---408 MBytes.
>
> Regarding the NumericRangeQuery: It's true that I am only interested in a=
n
> exact match. However I found on some forum, that one can use the
> NumericRangeQuery for exact matches as well without any performance loss.
> Nevertheless, I am willing to learn how such an exact match can be don mo=
re
> efficiently.
>
> While searching with Lucene, I pose about 100 queries like in my first po=
st
> for each category.
>
> Last but not least, I installed VisualVM as an Eclipse Plugin. But I am n=
ot
> familiar with it and need to play with it a little bit.
>
>
> Ian Lea wrote:
>>
>> Do the fast searches that you get while the app is running use the
>> searcher you create before you add all the docs to the index? =A0Surely
>> that won't see the added docs.
>>
>> There are general tips on speeding up searches at
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed. =A0There are
>> some gotchas with MMapDirectory depending on your OS and whether you
>> are 32 or 64 bit - see the javadocs. =A0What are you running? What
>> happens when you use a standard disk based directory rather than MMap?
>> =A0How many docs are you adding? =A0How big is the index? =A0What versio=
n of
>> lucene are you using?
>>
>> Your NumericRangeQuery doesn't look much like a range but I doubt
>> that's the problem.
>>
>> Finally, you could run a profiler to see where the time is being spent.
>>
>>
>> --
>> Ian.
>>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexSea=
rch-very-slow-after-reopening-the-index-tp1699711p1699956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:31:07 2010
Return-Path: <java-user-return-47490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85330 invoked from network); 14 Oct 2010 10:31:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:31:07 -0000
Received: (qmail 72076 invoked by uid 500); 14 Oct 2010 10:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71923 invoked by uid 500); 14 Oct 2010 10:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71915 invoked by uid 99); 14 Oct 2010 10:31:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:31:02 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:30:56 +0000
Received: by qyk29 with SMTP id 29so9532751qyk.14
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 03:30:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=TwfaVuQUVTgB//UrAifXiRr/RjVZPw6PzscA8KNkCRw=;
        b=pQZxFtvmh3r2rD3guZD4FYsuqmKwqFO414VQiXEXE4x1FDp3s5iMkPwYOMe/rAPkxc
         JIYq6WSCCi+ko+Awvtg2YKvNPbeg+vUKfmf5lswZBULEU3gI22DVDs8M8xmk/W8hOyO/
         0LKhr/95fiobSeidI22il9rYcZNC9C6t5ENAk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=r6lmzgsRD1yq+B7m5SkY6oHLdVvCNkr88+acDWwiosWLwgJ+J+JPjg7fDFqPm+iJKJ
         G69r5aIb7KtHO2JE5gnycpKZ0QrmbSuTyvg2GO2unUQIdEVJyWq/iIYdMBbVqH5KsCW4
         oZVzdd/kyeiKv/ukK8AXezcvC6zZ9se3D9zIc=
Received: by 10.224.60.131 with SMTP id p3mr1819369qah.272.1287052214533; Thu,
 14 Oct 2010 03:30:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Thu, 14 Oct 2010 03:29:14 -0700 (PDT)
In-Reply-To: <1287050629935-1699956.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
 <1287050629935-1699956.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 14 Oct 2010 11:29:14 +0100
Message-ID: <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK, so it looks like we're down to a more general "why is searching
slow" question.

The number of docs is not very large by lucene standards.

Work through http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

If that still doesn't help, pick a slow query and post again with:

. the output of query.toString()
. the number of docs matched
. how long it took first time on new searcher, and second and third
and ... tenth
. ummm... anything else you think might be relevant.

Good luck.


--
Ian.

On Thu, Oct 14, 2010 at 11:03 AM, subwayne
<labrassbandito@googlemail.com> wrote:
>
> Hi Ian,
>
> thank you for your quick response. I am running Lucene on Ubuntu 10.04, 6=
4
> bit. I switched from MMapDirectory to NIOFSDirectory without any signific=
ant
> changes in performance. The Lucene version running is 3.0.2. I followed y=
our
> advice and opened the IndexSearcher after I added all documents to the
> index. Now, the search performance is slow, too.
>
> I am indexing a vast amount of the Open Directory Project; in particular
> 60,000 categories with about 1,400,000 documents. Each document is
> represented by the short description made available bei ODP. Finally, the
> index on hard disk is rather small---408 MBytes.
>
> Regarding the NumericRangeQuery: It's true that I am only interested in a=
n
> exact match. However I found on some forum, that one can use the
> NumericRangeQuery for exact matches as well without any performance loss.
> Nevertheless, I am willing to learn how such an exact match can be don mo=
re
> efficiently.
>
> While searching with Lucene, I pose about 100 queries like in my first po=
st
> for each category.
>
> Last but not least, I installed VisualVM as an Eclipse Plugin. But I am n=
ot
> familiar with it and need to play with it a little bit.
>
>
> Ian Lea wrote:
>>
>> Do the fast searches that you get while the app is running use the
>> searcher you create before you add all the docs to the index? =A0Surely
>> that won't see the added docs.
>>
>> There are general tips on speeding up searches at
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed. =A0There are
>> some gotchas with MMapDirectory depending on your OS and whether you
>> are 32 or 64 bit - see the javadocs. =A0What are you running? What
>> happens when you use a standard disk based directory rather than MMap?
>> =A0How many docs are you adding? =A0How big is the index? =A0What versio=
n of
>> lucene are you using?
>>
>> Your NumericRangeQuery doesn't look much like a range but I doubt
>> that's the problem.
>>
>> Finally, you could run a profiler to see where the time is being spent.
>>
>>
>> --
>> Ian.
>>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexSea=
rch-very-slow-after-reopening-the-index-tp1699711p1699956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 10:35:27 2010
Return-Path: <java-user-return-47491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86454 invoked from network); 14 Oct 2010 10:35:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 10:35:27 -0000
Received: (qmail 80687 invoked by uid 500); 14 Oct 2010 10:35:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80402 invoked by uid 500); 14 Oct 2010 10:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80394 invoked by uid 99); 14 Oct 2010 10:35:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:35:22 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 10:35:17 +0000
Received: by bwz5 with SMTP id 5so405838bwz.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 03:34:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=TwfaVuQUVTgB//UrAifXiRr/RjVZPw6PzscA8KNkCRw=;
        b=ODAovtsrq3A8PjfhkXnhgUWxeT6KyDeqoyQ2rhnNnb4HfgOXjcNWwJajTJx24l4YVF
         9HXUuDvOby9EyrDwS3n4M5zGoBltKqLSatYMB+1Qbrx+2KBzZy1V6O4p8z6WLZPp8SCs
         UFqKUxUkI7irsHuLnW2BPOerUzLxzXgy38Q4M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=r6lmzgsRD1yq+B7m5SkY6oHLdVvCNkr88+acDWwiosWLwgJ+J+JPjg7fDFqPm+iJKJ
         G69r5aIb7KtHO2JE5gnycpKZ0QrmbSuTyvg2GO2unUQIdEVJyWq/iIYdMBbVqH5KsCW4
         oZVzdd/kyeiKv/ukK8AXezcvC6zZ9se3D9zIc=
Received: by 10.204.78.136 with SMTP id l8mr8838141bkk.63.1287052495053; Thu,
 14 Oct 2010 03:34:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Thu, 14 Oct 2010 03:29:14 -0700 (PDT)
In-Reply-To: <1287050629935-1699956.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
 <1287050629935-1699956.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 14 Oct 2010 11:29:14 +0100
Message-ID: <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK, so it looks like we're down to a more general "why is searching
slow" question.

The number of docs is not very large by lucene standards.

Work through http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

If that still doesn't help, pick a slow query and post again with:

. the output of query.toString()
. the number of docs matched
. how long it took first time on new searcher, and second and third
and ... tenth
. ummm... anything else you think might be relevant.

Good luck.


--
Ian.

On Thu, Oct 14, 2010 at 11:03 AM, subwayne
<labrassbandito@googlemail.com> wrote:
>
> Hi Ian,
>
> thank you for your quick response. I am running Lucene on Ubuntu 10.04, 6=
4
> bit. I switched from MMapDirectory to NIOFSDirectory without any signific=
ant
> changes in performance. The Lucene version running is 3.0.2. I followed y=
our
> advice and opened the IndexSearcher after I added all documents to the
> index. Now, the search performance is slow, too.
>
> I am indexing a vast amount of the Open Directory Project; in particular
> 60,000 categories with about 1,400,000 documents. Each document is
> represented by the short description made available bei ODP. Finally, the
> index on hard disk is rather small---408 MBytes.
>
> Regarding the NumericRangeQuery: It's true that I am only interested in a=
n
> exact match. However I found on some forum, that one can use the
> NumericRangeQuery for exact matches as well without any performance loss.
> Nevertheless, I am willing to learn how such an exact match can be don mo=
re
> efficiently.
>
> While searching with Lucene, I pose about 100 queries like in my first po=
st
> for each category.
>
> Last but not least, I installed VisualVM as an Eclipse Plugin. But I am n=
ot
> familiar with it and need to play with it a little bit.
>
>
> Ian Lea wrote:
>>
>> Do the fast searches that you get while the app is running use the
>> searcher you create before you add all the docs to the index? =A0Surely
>> that won't see the added docs.
>>
>> There are general tips on speeding up searches at
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed. =A0There are
>> some gotchas with MMapDirectory depending on your OS and whether you
>> are 32 or 64 bit - see the javadocs. =A0What are you running? What
>> happens when you use a standard disk based directory rather than MMap?
>> =A0How many docs are you adding? =A0How big is the index? =A0What versio=
n of
>> lucene are you using?
>>
>> Your NumericRangeQuery doesn't look much like a range but I doubt
>> that's the problem.
>>
>> Finally, you could run a profiler to see where the time is being spent.
>>
>>
>> --
>> Ian.
>>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexSea=
rch-very-slow-after-reopening-the-index-tp1699711p1699956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 12:40:08 2010
Return-Path: <java-user-return-47492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54429 invoked from network); 14 Oct 2010 12:40:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 12:40:08 -0000
Received: (qmail 22337 invoked by uid 500); 14 Oct 2010 12:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22160 invoked by uid 500); 14 Oct 2010 12:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22152 invoked by uid 99); 14 Oct 2010 12:40:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 12:40:02 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daclarke1006@hotmail.com designates 65.55.34.84 as permitted sender)
Received: from [65.55.34.84] (HELO col0-omc2-s10.col0.hotmail.com) (65.55.34.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 12:39:54 +0000
Received: from COL119-W12 ([65.55.34.72]) by col0-omc2-s10.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 14 Oct 2010 05:39:34 -0700
Message-ID: <COL119-W12381375AAAAF2CE7A592EDF560@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_18cdd5ed-4215-462a-9784-e9924cfd2057_"
X-Originating-IP: [138.25.131.44]
From: David Clarke <daclarke1006@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Cannot view open issues in Hudson
Date: Thu, 14 Oct 2010 22:39:33 +1000
Importance: Normal
In-Reply-To: <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
References: <1287047235931-1699711.post@n3.nabble.com>
 <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>,<1287050629935-1699956.post@n3.nabble.com>,<AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Oct 2010 12:39:34.0319 (UTC) FILETIME=[DAFBB3F0:01CB6B9C]

--_18cdd5ed-4215-462a-9784-e9924cfd2057_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hey Guys

Whenever I try to view open issues in hudson it doesn't display any informa=
tion.
Does anyone know why this is the case or how I could fix it?
Thanks in advance
-Dave Clarke
 		 	   		  =

--_18cdd5ed-4215-462a-9784-e9924cfd2057_--

From java-user-return-47493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 12:44:21 2010
Return-Path: <java-user-return-47493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55198 invoked from network); 14 Oct 2010 12:44:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 12:44:21 -0000
Received: (qmail 26003 invoked by uid 500); 14 Oct 2010 12:44:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25687 invoked by uid 500); 14 Oct 2010 12:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25678 invoked by uid 99); 14 Oct 2010 12:44:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 12:44:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 12:44:07 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P6N9u-0000Sn-RU
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 14:43:47 +0200
To: java-user@lucene.apache.org
Subject: Re: Storing additional Metadata with Fields
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
Organization: =?iso-8859-15?q?Albert-Ludwigs-Universit=E4t?= Freiburg
Date: Thu, 14 Oct 2010 14:43:41 +0200
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010141443.41973.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Am Donnerstag, 14. Oktober 2010, 12:29:43 schrieben Sie:

Hello,

> > is there a way to store additional metadata with fields?

> > Example:
> > I have the following content:
> > <html><body>
> > <span page=3D"1" x=3D"1", y=3D"1">This is a very</span>
> > <span page=3D"1" x=3D"1", y=3D"2">interesting text.</span>
> > <span page=3D"2" x=3D"1", y=3D"1">This is boring text</span>
> > </body></html>

> > Is there any way to include the page,x,y values in there?
> > I'd like to display the page when retrieving the results.

> Payload!!

Thanks for the hint. Looks good.

Although i have some additional questions. It seems Playload gets added to=
=20
every term in the index, so in my case i would store the x,y and page value=
s=20
for every word and increase the index much more than i'd need.
Any approach for preventing this?

And when searching, how can i access the payloads when displaying the resul=
t?=20
I haven't found information on that so far.

regards
Christoph Hermann

PS: Sorry for the direct reply earlier.

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 13:31:53 2010
Return-Path: <java-user-return-47494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72992 invoked from network); 14 Oct 2010 13:31:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 13:31:53 -0000
Received: (qmail 92810 invoked by uid 500); 14 Oct 2010 13:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92620 invoked by uid 500); 14 Oct 2010 13:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92606 invoked by uid 99); 14 Oct 2010 13:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 13:31:47 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of labrassbandito@googlemail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 13:31:42 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <labrassbandito@googlemail.com>)
	id 1P6Nty-0000f7-1q
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 06:31:22 -0700
Date: Thu, 14 Oct 2010 06:31:22 -0700 (PDT)
From: subwayne <labrassbandito@googlemail.com>
To: java-user@lucene.apache.org
Message-ID: <1287063082053-1701013.post@n3.nabble.com>
In-Reply-To: <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com> <1287050629935-1699956.post@n3.nabble.com> <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Ok, I read the Wiki page related to improving the searching speed and adopted
some advices. One of the slow queries is simply. Here are some:

plaintext:guid
107.0 ms
resultSet.totalHits = 1

plaintext:allianc
51.0 ms
resultSet.totalHists = 1

plaintext:engin
46.0 ms
resultSet.totalHits = 1

plaintext:servicetec
46.0 ms
resultSet.totalHits = 1

.. and so on. I pose about one hundred queries for each category. Therefore,
I retrieve a list of documents of a category by utilizing a QueryFilter:

Term luceneTerm = new Term("plaintext", stemmer.process(candidate));
TermQuery termQuery = new TermQuery(luceneTerm);
Filter qf = new CachingWrapperFilter(new QueryWrapperFilter(termQuery));

TopDocs resultSet = searcher.search(lTerm, qf, Integer.MAX_VALUE);

Each subsequent query is "only" 46 ms instead of 107 ms. However, I think it
is very slow. Note that these values are taken while the Lucene index is in
the RAM (RAMDirectory). It makes no difference in time if I am using the
RAMDirectory or NFIOSDirectory.

Thanks for further advices.

-- 
View this message in context: http://lucene.472066.n3.nabble.com/IndexSearch-very-slow-after-reopening-the-index-tp1699711p1701013.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 14:18:19 2010
Return-Path: <java-user-return-47495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95870 invoked from network); 14 Oct 2010 14:18:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 14:18:19 -0000
Received: (qmail 83619 invoked by uid 500); 14 Oct 2010 14:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83245 invoked by uid 500); 14 Oct 2010 14:18:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83233 invoked by uid 99); 14 Oct 2010 14:18:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 14:18:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.7 as permitted sender)
Received: from [212.74.114.7] (HELO mk-outboundfilter-3-a-1.mail.uk.tiscali.com) (212.74.114.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 14:18:03 +0000
X-Trace: 406262047/mk-outboundfilter-1.mail.uk.tiscali.com/PIPEX/$PIPEX-MX-ACCEPTED/pipex-infrastructure/193.61.44.46/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 193.61.44.46
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Pipex Webmail (IMP3.1)
X-IP-BHB: Once
X-IP-Webmail: TRUE
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkcFAFCttkzBPSwu/2dsb2JhbACTL8xHhUgEjT8
X-IronPort-AV: E=Sophos;i="4.57,330,1283727600"; 
   d="scan'208";a="406262047"
X-IP-Direction: IN
Received: from netmail.pipex.net (HELO mk-netmail-1.mail.uk.tiscali.com) ([212.74.100.20])
  by smtp.pipex.tiscali.co.uk with ESMTP/TLS/DHE-RSA-AES256-SHA; 14 Oct 2010 15:17:43 +0100
Received: from mk-netmail-1.mail.uk.tiscali.com (localhost.localdomain [127.0.0.1])
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8) with ESMTP id o9EEHhEM001140
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 15:17:43 +0100
Received: (from apache@localhost)
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8/Submit) id o9EEHhSK001139
	for java-user@lucene.apache.org; Thu, 14 Oct 2010 15:17:43 +0100
Received: from 193.61.44.46 ( [193.61.44.46])
	as user appy74@dsl.pipex.com by netmail.pipex.net with HTTP;
	Thu, 14 Oct 2010 15:17:43 +0100
Message-ID: <1287065863.4cb711077458e@netmail.pipex.net>
Date: Thu, 14 Oct 2010 15:17:43 +0100
From: appy74@dsl.pipex.com
To: java-user@lucene.apache.org
Subject: Use of Lucene to store data from RSS feeds
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Pipex Webmail (IMP3.1)
X-Originating-IP: 193.61.44.46
X-Pipex-Username: appy74@dsl.pipex.com
X-Usage: Pipex Webmail is subject to the standard Pipex terms and conditions of use
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I would like to store data retrieved hourly from RSS feeds in a database or in Lucene so that the text can be easily
indexed for word frequencies.

I need to get the text from the title and description elements of RSS items.

Ideally, for each hourly retrieval from a given feed, I would add a row to a table in a dataset made up of the
following columns:

feed_url, title_element_text, description_element_text, polling_date_time

>From this, I can look up any element in a feed and calculate keyword frequencies based upon the length of time required.

This can be done as a database table and hashmaps used to calculate word frequencies. But can I do this in Lucene to
this degree of granularity at all? If so, would each feed form a Lucene document or would each 'row' from the
database table form one?

Can anyone advise?

Thanks

Martin O'Shea.
-- 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 14:22:01 2010
Return-Path: <java-user-return-47496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97395 invoked from network); 14 Oct 2010 14:22:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 14:22:01 -0000
Received: (qmail 89701 invoked by uid 500); 14 Oct 2010 14:21:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89411 invoked by uid 500); 14 Oct 2010 14:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89403 invoked by uid 99); 14 Oct 2010 14:21:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 14:21:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Oct 2010 14:21:55 +0000
Received: (qmail 97344 invoked by uid 99); 14 Oct 2010 14:21:33 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 14:21:33 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: determining the type of a term - retrieving a payload
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com>
Date: Thu, 14 Oct 2010 10:21:31 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <D8582FC3-D661-4AFE-98C0-B8FF4E2DFB25@apache.org>
References: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 13, 2010, at 11:37 AM, Sykes, Derek wrote:

> Hi there,
>=20
> I'm currently trying to work out how I can determine the type =
(string/number/date/etc)of a term.  I've not seen any off the shelf way =
to do it so am trying to store a payload against each term that records =
the type.
>=20
> I'm having a little trouble retrieving a payload I'd stored onto the =
term.  At the moment I'm using the TypeAsPayloadTokenFilter, however =
I'll change this soon as it's not really what I'm after.
>=20
> I'm then getting a TermEnum from either reader.terms() or using a =
PrefixTermEnum.
>=20
> For each term I want the payload from I'm running this function:
>=20
>    private String getPayload(Term term) {
>        String payload =3D null;
>        try {
>            TermPositions termPositions =3D reader.termPositions(term);
>            termPositions.next();

 next() returns a boolean as to whether there is a valid entry, so you =
need to check that.  You may not actually have a match for that term.


>            if (termPositions.isPayloadAvailable()) {
>                byte[] payloadBytes =3D new =
byte[termPositions.getPayloadLength()];
>                payloadBytes =3D termPositions.getPayload(payloadBytes, =
0);
>                payload =3D new String(payloadBytes);
>                LOG.debug(payload);
>            }
>        }
>        catch( IOException e) {
> ...



What does your Analysis process look like?  Many of Lucene's analysis =
pieces don't bother setting type.  Have you looked at the index with =
Luke?  That should show you the payloads.  Also, have a look at the =
SpanTermQuery.  You can use the Spans object to step directly through =
the position matches and get the payloads, if they are available.



--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 15:22:03 2010
Return-Path: <java-user-return-47497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31433 invoked from network); 14 Oct 2010 15:22:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 15:22:03 -0000
Received: (qmail 23150 invoked by uid 500); 14 Oct 2010 15:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23089 invoked by uid 500); 14 Oct 2010 15:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23065 invoked by uid 99); 14 Oct 2010 15:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:22:00 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Oct 2010 15:21:59 +0000
Received: (qmail 31354 invoked by uid 99); 14 Oct 2010 15:21:38 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:21:38 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Use of Lucene to store data from RSS feeds
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <1287065863.4cb711077458e@netmail.pipex.net>
Date: Thu, 14 Oct 2010 11:21:36 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <B1C3AB73-E768-42E9-B9AF-D3F625AB8C8D@apache.org>
References: <1287065863.4cb711077458e@netmail.pipex.net>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)


On Oct 14, 2010, at 10:17 AM, appy74@dsl.pipex.com wrote:

> Hello
>=20
> I would like to store data retrieved hourly from RSS feeds in a =
database or in Lucene so that the text can be easily
> indexed for word frequencies.
>=20
> I need to get the text from the title and description elements of RSS =
items.
>=20
> Ideally, for each hourly retrieval from a given feed, I would add a =
row to a table in a dataset made up of the
> following columns:
>=20
> feed_url, title_element_text, description_element_text, =
polling_date_time
>=20
> =46rom this, I can look up any element in a feed and calculate keyword =
frequencies based upon the length of time required.
>=20
> This can be done as a database table and hashmaps used to calculate =
word frequencies. But can I do this in Lucene to
> this degree of granularity at all? If so, would each feed form a =
Lucene document or would each 'row' from the
> database table form one?


Yes, you should be able to do all of this.  Note, Solr's =
DataImportHandler easily handles RSS into Solr/Lucene and then you can =
either use the TermsComponent (which uses Lucene's TermEnum, etc.) to =
get at the frequencies.  You might also need to do some stuff with Spans =
and SpanQueries to properly incorporate your length of time requirement.

-Grant
--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 15:43:01 2010
Return-Path: <java-user-return-47498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37951 invoked from network); 14 Oct 2010 15:43:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 15:43:00 -0000
Received: (qmail 47858 invoked by uid 500); 14 Oct 2010 15:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47642 invoked by uid 500); 14 Oct 2010 15:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47593 invoked by uid 99); 14 Oct 2010 15:42:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:42:57 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:42:51 +0000
Received: by qwf7 with SMTP id 7so1959208qwf.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 08:42:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=7UX+2fcoO3jevgBUJU4VRtYioA7jlMLD0rvcgZs+HqE=;
        b=TeqlE4DtlT3c6DTdNUqyVnwOemxCITTC4IjV05Tfutfb85+NsYYOuXwDfJS2rgsaF9
         CBpYllJSKwO5zMtuU8z7OItM7eTDbZ2U+ItDxVIymuc5uElBnaWLrmuV8t70H/6aXnZX
         MirwNR247l3lYngalQ0ARuPJ491OgaiHDqtFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=utBPf4CzToAwkSZrItxTg2hFNmc1SJ0bNpQLOiwfq75Lj40sLsrXhDCKdUek3WslvH
         l0RfBHXMDLKOLRC+u2uyNyR5OdwFV1+zMM5eLAy0py4GDKio6LerZu7802xLrkHGoh6Y
         1se97T6l6iSk1uBSDC1VmJiB+X5ifa/KvUrj8=
Received: by 10.224.219.10 with SMTP id hs10mr3334283qab.100.1287070946028;
 Thu, 14 Oct 2010 08:42:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Thu, 14 Oct 2010 08:42:05 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Thu, 14 Oct 2010 08:42:05 -0700
Message-ID: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com>
Subject: ParallelReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3010edd589eb090492958ea3

--20cf3010edd589eb090492958ea3
Content-Type: text/plain; charset=ISO-8859-1

I have two index, A and B. Can two documents doc1[in index A] and doc2[in
index B] have a common field? doc1 and doc2 have same document Id's.

--20cf3010edd589eb090492958ea3--

From java-user-return-47499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 15:57:33 2010
Return-Path: <java-user-return-47499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44463 invoked from network); 14 Oct 2010 15:57:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 15:57:32 -0000
Received: (qmail 78040 invoked by uid 500); 14 Oct 2010 15:57:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77981 invoked by uid 500); 14 Oct 2010 15:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77973 invoked by uid 99); 14 Oct 2010 15:57:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:57:30 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Derek.Sykes@morganstanley.com designates 199.89.103.69 as permitted sender)
Received: from [199.89.103.69] (HELO pimtaint02.ms.com) (199.89.103.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 15:57:23 +0000
Received: from pimtaint02 (localhost.ms.com [127.0.0.1])
	by pimtaint02.ms.com (output Postfix) with ESMTP id 2FFA44006D6
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 11:57:02 -0400 (EDT)
Received: from ny0019as02 (unknown [144.203.210.133])
	by pimtaint02.ms.com (internal Postfix) with ESMTP id 124654006F0
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 11:57:02 -0400 (EDT)
Received: from ny0019as02 (localhost [127.0.0.1])
	by ny0019as02 (msa-out Postfix) with ESMTP id EE5CD70021A
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 11:57:01 -0400 (EDT)
Received: from HNWEXGOB03.msad.ms.com (hn211c7n1 [10.184.57.228])
	by ny0019as02 (mta-in Postfix) with ESMTP id EB1B12B4037
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 11:57:01 -0400 (EDT)
Received: from HNWEXGIB02.msad.ms.com (10.184.57.209) by HNWEXGOB03.msad.ms.com (10.184.57.228) with Microsoft SMTP Server (TLS) id 8.2.254.0; Thu, 14 Oct 2010 11:57:01 -0400
Received: from OYWEXHUB01.msad.ms.com (10.174.153.24) by HNWEXGIB02.msad.ms.com (10.184.57.209) with Microsoft SMTP Server (TLS) id 8.2.254.0; Thu, 14 Oct 2010 11:57:00 -0400
Received: from LNWEXMBX0105.msad.ms.com ([10.174.172.10]) by OYWEXHUB01.msad.ms.com ([10.174.153.24]) with mapi; Thu, 14 Oct 2010 16:57:00 +0100
From: "Sykes, Derek" <Derek.Sykes@morganstanley.com>
To: <java-user@lucene.apache.org>
Date: Thu, 14 Oct 2010 16:56:56 +0100
Subject: RE: determining the type of a term - retrieving a payload
Thread-Topic: determining the type of a term - retrieving a payload
thread-index: ActrqzLjDh/UOG6aSM+5WcJhPmmvyQAC7xeQ
Message-ID: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB48F@LNWEXMBX0105.msad.ms.com>
References: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com> <D8582FC3-D661-4AFE-98C0-B8FF4E2DFB25@apache.org>
In-Reply-To: <D8582FC3-D661-4AFE-98C0-B8FF4E2DFB25@apache.org>
Accept-Language: en-US
Content-Language: en-US
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4657
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 14102010 #3973741, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Grant,

Fair point on the next(). In this case I'm iterating through the terms =
returned from a PrefixTermEnum so I know they're in the index.

The analyser I'm using looks like this:

public class TypeSavingAnalyzer extends StandardAnalyzer {

    public TypeSavingAnalyzer(Version version) {
        super(version);
    }

    @Override
    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result =3D super.tokenStream(fieldName, reader);
        return new TypeAsPayloadTokenFilter(result);
    }

}

I'm creating the field with Field.TermVector.WITH_POSITIONS and see the =
little "p" indicator in luke however see no indication of a payload =
(though am not 100% sure where to look) being present and I still get =
false from isPayloadAvailable.

Basically what I'm trying to do is store in the payload some meta data =
so I know what type the term is as at the moment when I get a list of =
terms back from the reader some are numeric.  It seems NumericField =
doesn't allow payloads so it seems like I may have to find an =
alternative method.  Any suggestions would be greatly appreciated!

Regards,
Derek

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: 14 October 2010 15:22
To: java-user@lucene.apache.org
Subject: Re: determining the type of a term - retrieving a payload


On Oct 13, 2010, at 11:37 AM, Sykes, Derek wrote:

> Hi there,
>=20
> I'm currently trying to work out how I can determine the type =
(string/number/date/etc)of a term.  I've not seen any off the shelf way =
to do it so am trying to store a payload against each term that records =
the type.
>=20
> I'm having a little trouble retrieving a payload I'd stored onto the =
term.  At the moment I'm using the TypeAsPayloadTokenFilter, however =
I'll change this soon as it's not really what I'm after.
>=20
> I'm then getting a TermEnum from either reader.terms() or using a =
PrefixTermEnum.
>=20
> For each term I want the payload from I'm running this function:
>=20
>    private String getPayload(Term term) {
>        String payload =3D null;
>        try {
>            TermPositions termPositions =3D reader.termPositions(term);
>            termPositions.next();

 next() returns a boolean as to whether there is a valid entry, so you =
need to check that.  You may not actually have a match for that term.


>            if (termPositions.isPayloadAvailable()) {
>                byte[] payloadBytes =3D new =
byte[termPositions.getPayloadLength()];
>                payloadBytes =3D termPositions.getPayload(payloadBytes, =
0);
>                payload =3D new String(payloadBytes);
>                LOG.debug(payload);
>            }
>        }
>        catch( IOException e) {
> ...



What does your Analysis process look like?  Many of Lucene's analysis =
pieces don't bother setting type.  Have you looked at the index with =
Luke?  That should show you the payloads.  Also, have a look at the =
SpanTermQuery.  You can use the Spans object to step directly through =
the position matches and get the payloads, if they are available.



--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-------------------------------------------------------------------------=
-
NOTICE: Morgan Stanley is not acting as a municipal advisor and the =
opinions or views contained herein are not intended to be, and do not =
constitute, advice within the meaning of Section 975 of the Dodd-Frank =
Wall Street Reform and Consumer Protection Act. If you have received =
this communication in error, please destroy all electronic and paper =
copies and notify the sender immediately. Mistransmission is not =
intended to waive confidentiality or privilege. Morgan Stanley reserves =
the right, to the extent permitted under applicable law, to monitor =
electronic communications. This message is subject to terms available at =
the following link: http://www.morganstanley.com/disclaimers. If you =
cannot access these links, please notify us by reply message and we will =
send the contents to you. By messaging with Morgan Stanley you consent =
to the foregoing.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 14 16:06:39 2010
Return-Path: <java-user-return-47500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52150 invoked from network); 14 Oct 2010 16:06:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Oct 2010 16:06:39 -0000
Received: (qmail 4004 invoked by uid 500); 14 Oct 2010 16:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3966 invoked by uid 500); 14 Oct 2010 16:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3958 invoked by uid 99); 14 Oct 2010 16:06:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 16:06:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Oct 2010 16:06:30 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 3726B3672670
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 12:06:09 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 727lTBtfzqNa for <java-user@lucene.apache.org>;
	Thu, 14 Oct 2010 12:06:08 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 0167B36725C7
	for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 12:06:08 -0400 (EDT)
Message-ID: <4CB72AE2.7050701@ifactory.com>
Date: Thu, 14 Oct 2010 12:08:02 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: proposed change to CharTokenizer
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Background: I've been trying to enable hit highlighting of XML documents 
in such a way that the highlighting preserves the well-formedness of the 
XML.

I thought I could get this to work by implementing a CharFilter that 
extracts text from XML (somewhat like HTMLStripCharFilter, except I am 
using an XML parser - however I think the concept is also applicable to 
HTMLStripCharFilter) while preserving the offsets of the text in the 
original XML document so as to enable highlighting.

I ran into a problem in CharTokenizer.incrementToken(), which calls 
correctOffset() as follows:

     offsetAtt.setOffset(correctOffset(start), correctOffset(start+length));

The issue is that the end offset is computed as the offset of the 
beginning of the *next* block of text rather than the offset of the end 
of *this* block of text.

In my test case:

<p><b>bold text</b> regular text</p>

I get tokens like this ([] showing token boundaries):

                [bold] [text</b>][regular][text</p>]

instead of:

                [bold][text][regular][text]

I don't think this problem can be fixed by jiggling offsets, or indeed 
by wrapping or extending CharTokenizer in any straightforward way.  The 
fix I found is to change the line in CharTokenizer.incrementToken() to:

     offsetAtt.setOffset(correctOffset(start), 
correctOffset(start+length-1)+1);

Again, conceptually, this computes the corrected offset of the last 
character in the token, and then marks the end of the token as the 
immediately following position, rather than including all the garbage 
characters in between the end of this token and the beginning of the next.

My impression is that this change should be completely 
backwards-compatible since its behavior will be identical for 
CharFilters that don't actually perform character deletion, and AFAICT 
the only existing CharFilter performs replacements and expansions (of 
ligatures and the like).  But my knowledge of Lucene is far from 
comprehensive.
Does this seem like a reasonable patch?

-Mike

Michael Sokolov
Engineering Director
www.ifactory.com
@iFactoryBoston

PubFactory: the revolutionary e-publishing platform from iFactory


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 00:56:14 2010
Return-Path: <java-user-return-47501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79185 invoked from network); 15 Oct 2010 00:56:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 00:56:14 -0000
Received: (qmail 7009 invoked by uid 500); 15 Oct 2010 00:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6908 invoked by uid 500); 15 Oct 2010 00:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6900 invoked by uid 99); 15 Oct 2010 00:56:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 00:56:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 00:56:05 +0000
Received: by qyk29 with SMTP id 29so392786qyk.14
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 17:55:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=O/YdNfvy7TzbZCkaBQlRpTZnW98HUh8LrHxC7lSMfnU=;
        b=oibA1200IgXHB2Lvr2GQU82rTpsX/B1b7uDUxZqjiMEbNTtC+lHluZXgw7r+QYqASW
         eWlOtldQegYAIA2wpBrWCZ2s6x6mIMS73dP4/oEDDWMhNTH4g2ypUNMJ/naHvKPVwVBC
         wG5TqA9SawheDAkQ15ZH8NA6jc4edmlbbB5fw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Rh78JNc3AYiCkbtvl30zLG8/FK9cX3Vo/hSge4OiHHtL6P4+FXPwrywAjcG+/wmn8m
         A4YY+nYKik94BLu2cb0G4DXKGx5Ou5/Rs65usx4CFeogZ52gCRBPm+5P9ZVjZHNnu3m+
         f/bEjryPghTU5FMLKZQVF9eqXBNgsEyFy0ric=
MIME-Version: 1.0
Received: by 10.224.6.145 with SMTP id 17mr5860999qaz.370.1287104141427; Thu,
 14 Oct 2010 17:55:41 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Thu, 14 Oct 2010 17:55:41 -0700 (PDT)
In-Reply-To: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com>
References: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com>
Date: Thu, 14 Oct 2010 20:55:41 -0400
Message-ID: <AANLkTikRGJ-4d=_TEw5Q5iFraft3GzKyVQUe2KQGmUYB@mail.gmail.com>
Subject: Re: ParallelReader
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb05c2383c404929d49e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb05c2383c404929d49e9
Content-Type: text/plain; charset=ISO-8859-1

No. And you don't even want to try... Document IDs are NOT invariant.
Particularly
when you delete a document and optimize an index, all the documents that
come
after the deleted one get new doc IDs. Trying to keep these two indexes in
synch
will be a nightmare.

Perhaps you could explain what you're trying to accomplish and we could
suggest
other approaches. See:

http://people.apache.org/~hossman/#xyproblem

Your question appears to be an "XY Problem" ... that is: you are dealing
with "X", you are assuming "Y" will help you, and you are asking about "Y"
without giving more details about the "X" so that we can understand the
full issue.  Perhaps the best solution doesn't involve "Y" at all?
See Also: http://www.perlmonks.org/index.pl?node_id=542341

Best,
Erick

On Thu, Oct 14, 2010 at 11:42 AM, Nilesh Vijaywargiay <
nilesh.vijay@gmail.com> wrote:

> I have two index, A and B. Can two documents doc1[in index A] and doc2[in
> index B] have a common field? doc1 and doc2 have same document Id's.
>

--0015175cb05c2383c404929d49e9--

From java-user-return-47502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 01:07:41 2010
Return-Path: <java-user-return-47502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85241 invoked from network); 15 Oct 2010 01:07:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 01:07:40 -0000
Received: (qmail 21281 invoked by uid 500); 15 Oct 2010 01:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21244 invoked by uid 500); 15 Oct 2010 01:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21236 invoked by uid 99); 15 Oct 2010 01:07:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:07:38 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:07:31 +0000
Received: by qwf7 with SMTP id 7so131463qwf.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 18:07:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=1Ze0mZXhCN5znF/NQkV5TDzQGneAgGL6lI/uAbZ5Sh4=;
        b=kMJE0gPaemWYiuK1RoZhrzV5XRdjHGB7WmbKRmOCkSg+ieM/kmQjgw52tsTgk4DT6H
         0Gp/7BGpsHT7pmO813ClXnkC4lHrMnkcw4yafmrh0ajBJLb0zrBk5jyvaMq1gZ/99xPD
         H0UUIZ7MKs9dZYBV09p7Fy5H8JWPCAtgwUoAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=cOOpwirR9qkUHrsLVHs0EDluKBJBeJJBWGeUBt5loweKoPQsJA68/vXqofueK7kOKm
         mc0gNiR10fvaygmgvAv1y3Z8qJ7EjwABiYSKBKloWeK4bTr/VXxNX+YAhrRm56mVkIGi
         FPn6Atos6S9VD+4jJWSuTC+8sCZJmdWs1eW94=
Received: by 10.229.105.17 with SMTP id r17mr51930qco.187.1287104824797; Thu,
 14 Oct 2010 18:07:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Thu, 14 Oct 2010 18:06:44 -0700 (PDT)
In-Reply-To: <AANLkTikRGJ-4d=_TEw5Q5iFraft3GzKyVQUe2KQGmUYB@mail.gmail.com>
References: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com> <AANLkTikRGJ-4d=_TEw5Q5iFraft3GzKyVQUe2KQGmUYB@mail.gmail.com>
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Thu, 14 Oct 2010 18:06:44 -0700
Message-ID: <AANLkTinH-QqyHKfodSm-8HhFC5HY4yu_91GRzNw5bob+@mail.gmail.com>
Subject: Re: ParallelReader
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636427182deea1604929d71b9
X-Virus-Checked: Checked by ClamAV on apache.org

--001636427182deea1604929d71b9
Content-Type: text/plain; charset=ISO-8859-1

Hey Erick, Sure.
*
*
*What I am trying to achieve:*

A) Update a field in Index A
B) When searching for that old field, it should be a miss.

*How I achieved it*

*Index 1 *
Doc 1 - Field1, Value 1
Doc 2 - Field1, Value 1

*Index 2*
Doc 1 - Field1, Modified_Value 1
Doc 2 - EMPTY

Add index 2 before Index 1 in the parallel reader.
In short, I am creating a new index with same number of documents but all
the documents are empty except the ones I want to update.

*RESULTS:*
If I search for Field1:Value1, I get a miss[What I wanted]
If I search for Field1:Modified_Value 1, I get a hit[What I wanted]

*PROBLEM*
I am kinda finding it surprising that I am able to update a field[I was told
I can't]. Ofcourse there is downside of creating a new index with dummy
documents which might be huge. But apart from that, Is there something fishy
about it? Any case where it would break?



On Thu, Oct 14, 2010 at 5:55 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> No. And you don't even want to try... Document IDs are NOT invariant.
> Particularly
> when you delete a document and optimize an index, all the documents that
> come
> after the deleted one get new doc IDs. Trying to keep these two indexes in
> synch
> will be a nightmare.
>
> Perhaps you could explain what you're trying to accomplish and we could
> suggest
> other approaches. See:
>
> http://people.apache.org/~hossman/#xyproblem
>
> Your question appears to be an "XY Problem" ... that is: you are dealing
> with "X", you are assuming "Y" will help you, and you are asking about "Y"
> without giving more details about the "X" so that we can understand the
> full issue.  Perhaps the best solution doesn't involve "Y" at all?
> See Also: http://www.perlmonks.org/index.pl?node_id=542341
>
> Best,
> Erick
>
> On Thu, Oct 14, 2010 at 11:42 AM, Nilesh Vijaywargiay <
> nilesh.vijay@gmail.com> wrote:
>
> > I have two index, A and B. Can two documents doc1[in index A] and doc2[in
> > index B] have a common field? doc1 and doc2 have same document Id's.
> >
>

--001636427182deea1604929d71b9--

From java-user-return-47503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 01:35:55 2010
Return-Path: <java-user-return-47503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 607 invoked from network); 15 Oct 2010 01:35:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 01:35:55 -0000
Received: (qmail 46123 invoked by uid 500); 15 Oct 2010 01:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46062 invoked by uid 500); 15 Oct 2010 01:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46054 invoked by uid 99); 15 Oct 2010 01:35:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:35:53 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:35:48 +0000
Received: by qyk29 with SMTP id 29so433800qyk.14
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 18:35:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=RDd1M6k68yfGoBLqfoNZH2sm3NXckzCzg1mXUQM0m1A=;
        b=nmVeDAKJhmGmdFThfNxy+PSVYljJ6jHBYFxpwRyuBWKic8pdr+dkRrTiURW1tNvZZd
         6zvdpG6cWxo4Xws3pU3Fb+or6oAoK2lbMvD/UN/hq/L3XqIVkmD3rWifG/TAEqsDLj94
         kivKp4mLZPVXk3RwqBwt9rg2rb8/3dG4I/nKk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m2cjYyuDVqDdJYpXGESCsIb3gA0lfT75OvSVUOMfxRcOSb21Yen2ZfwjtiCZ1qdXzD
         avZi+eBG0I0NBTEzmaGCaNR5SB5LKm4Q3oPRZq7WuK+6G0REghVQ1osk3+RDmk0KlQ6T
         tU4y8ardh/ZbTULq+/xWpZO3MyRGLnnrypDHg=
MIME-Version: 1.0
Received: by 10.229.185.137 with SMTP id co9mr73343qcb.189.1287106527451; Thu,
 14 Oct 2010 18:35:27 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Thu, 14 Oct 2010 18:35:27 -0700 (PDT)
In-Reply-To: <AANLkTinH-QqyHKfodSm-8HhFC5HY4yu_91GRzNw5bob+@mail.gmail.com>
References: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com>
	<AANLkTikRGJ-4d=_TEw5Q5iFraft3GzKyVQUe2KQGmUYB@mail.gmail.com>
	<AANLkTinH-QqyHKfodSm-8HhFC5HY4yu_91GRzNw5bob+@mail.gmail.com>
Date: Thu, 14 Oct 2010 21:35:27 -0400
Message-ID: <AANLkTinomR9-A6wt=C2ygt+rxXnhYLo1nYw6Cwu5=fxh@mail.gmail.com>
Subject: Re: ParallelReader
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b87d45b59a104929dd775

--0016363b87d45b59a104929dd775
Content-Type: text/plain; charset=ISO-8859-1

This seems like far too much work if I'm reading things right. You can't
update
a field, but you #can# update a document which actually re-index that
document
under the covers (you have to have a way to uniquely identify the doc).
Then, when
you reopen your index reader, you'll only see the new value for the one
field that's
different. This doesn't rely on any second index at all.

So is there something I'm missing here that caused you to take the route
you're
taking? Because I'd just try updating the document and reopening the reader
first...

HTH
Erick

On Thu, Oct 14, 2010 at 9:06 PM, Nilesh Vijaywargiay <nilesh.vijay@gmail.com
> wrote:

> Hey Erick, Sure.
> *
> *
> *What I am trying to achieve:*
>
> A) Update a field in Index A
> B) When searching for that old field, it should be a miss.
>
> *How I achieved it*
>
> *Index 1 *
> Doc 1 - Field1, Value 1
> Doc 2 - Field1, Value 1
>
> *Index 2*
> Doc 1 - Field1, Modified_Value 1
> Doc 2 - EMPTY
>
> Add index 2 before Index 1 in the parallel reader.
> In short, I am creating a new index with same number of documents but all
> the documents are empty except the ones I want to update.
>
> *RESULTS:*
> If I search for Field1:Value1, I get a miss[What I wanted]
> If I search for Field1:Modified_Value 1, I get a hit[What I wanted]
>
> *PROBLEM*
> I am kinda finding it surprising that I am able to update a field[I was
> told
> I can't]. Ofcourse there is downside of creating a new index with dummy
> documents which might be huge. But apart from that, Is there something
> fishy
> about it? Any case where it would break?
>
>
>
> On Thu, Oct 14, 2010 at 5:55 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > No. And you don't even want to try... Document IDs are NOT invariant.
> > Particularly
> > when you delete a document and optimize an index, all the documents that
> > come
> > after the deleted one get new doc IDs. Trying to keep these two indexes
> in
> > synch
> > will be a nightmare.
> >
> > Perhaps you could explain what you're trying to accomplish and we could
> > suggest
> > other approaches. See:
> >
> > http://people.apache.org/~hossman/#xyproblem
> >
> > Your question appears to be an "XY Problem" ... that is: you are dealing
> > with "X", you are assuming "Y" will help you, and you are asking about
> "Y"
> > without giving more details about the "X" so that we can understand the
> > full issue.  Perhaps the best solution doesn't involve "Y" at all?
> > See Also: http://www.perlmonks.org/index.pl?node_id=542341
> >
> > Best,
> > Erick
> >
> > On Thu, Oct 14, 2010 at 11:42 AM, Nilesh Vijaywargiay <
> > nilesh.vijay@gmail.com> wrote:
> >
> > > I have two index, A and B. Can two documents doc1[in index A] and
> doc2[in
> > > index B] have a common field? doc1 and doc2 have same document Id's.
> > >
> >
>

--0016363b87d45b59a104929dd775--

From java-user-return-47504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 01:43:07 2010
Return-Path: <java-user-return-47504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1963 invoked from network); 15 Oct 2010 01:43:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 01:43:06 -0000
Received: (qmail 51218 invoked by uid 500); 15 Oct 2010 01:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51137 invoked by uid 500); 15 Oct 2010 01:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51129 invoked by uid 99); 15 Oct 2010 01:43:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:43:04 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robin.bygrave@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 01:42:59 +0000
Received: by ywi4 with SMTP id 4so168089ywi.35
        for <java-user@lucene.apache.org>; Thu, 14 Oct 2010 18:42:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ak+R+8C2/1shL0Ano/LA+uOJPKlrJ+F4hM8n1j4hIIU=;
        b=CGDdiuZyutgz+3FrABeWrlSMbhJU9wlNN4suNadxOidnnREiO3qr32QOZFAH8pnVkl
         uRgotL+1FN0XlXHBweGL2D9aHEfmgGe7C3UJ6aqDXMd7STofMLy/kiFT7bndk8O7izSq
         /zQYLm4wrUhB4UI5z6m1TCFO2ft32BCJ8z6XI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=F74t0R/buJBON95spGJrO6shVorSj/kVJxSR4Q0bz7nid+0UTD+4pt+hDHqJYPm++A
         Z4lA3LkVeSvuFgsiaCA4XYqclheUQV+rU3YttJP36ozeGvyoLemgjktOku8ZmP+Ph5mQ
         j7lmfcfb+aYdFU4h+RGqeYcMSKiJIW81XBSTk=
MIME-Version: 1.0
Received: by 10.101.156.36 with SMTP id i36mr6667571ano.174.1287106958682;
 Thu, 14 Oct 2010 18:42:38 -0700 (PDT)
Received: by 10.100.198.15 with HTTP; Thu, 14 Oct 2010 18:42:38 -0700 (PDT)
In-Reply-To: <AANLkTinomR9-A6wt=C2ygt+rxXnhYLo1nYw6Cwu5=fxh@mail.gmail.com>
References: <AANLkTimhfh=ZbB=u3kssfdy5KkMmPsjja3XAqXx8RVY=@mail.gmail.com>
	<AANLkTikRGJ-4d=_TEw5Q5iFraft3GzKyVQUe2KQGmUYB@mail.gmail.com>
	<AANLkTinH-QqyHKfodSm-8HhFC5HY4yu_91GRzNw5bob+@mail.gmail.com>
	<AANLkTinomR9-A6wt=C2ygt+rxXnhYLo1nYw6Cwu5=fxh@mail.gmail.com>
Date: Fri, 15 Oct 2010 14:42:38 +1300
Message-ID: <AANLkTimk5WurkOEzztWWdKkEf0skjP-Qytj8ZShNV3E5@mail.gmail.com>
Subject: Re: ParallelReader
From: Rob Bygrave <robin.bygrave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68dea3d0f69cb04929df194

--0016e68dea3d0f69cb04929df194
Content-Type: text/plain; charset=ISO-8859-1

>> Any case where it would break?

If a query uses multiple fields it would break. That is, usually all the
fields need to be in doc in index 2 - not just the modified one.


On Fri, Oct 15, 2010 at 2:35 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> This seems like far too much work if I'm reading things right. You can't
> update
> a field, but you #can# update a document which actually re-index that
> document
> under the covers (you have to have a way to uniquely identify the doc).
> Then, when
> you reopen your index reader, you'll only see the new value for the one
> field that's
> different. This doesn't rely on any second index at all.
>
> So is there something I'm missing here that caused you to take the route
> you're
> taking? Because I'd just try updating the document and reopening the reader
> first...
>
> HTH
> Erick
>
> On Thu, Oct 14, 2010 at 9:06 PM, Nilesh Vijaywargiay <
> nilesh.vijay@gmail.com
> > wrote:
>
> > Hey Erick, Sure.
> > *
> > *
> > *What I am trying to achieve:*
> >
> > A) Update a field in Index A
> > B) When searching for that old field, it should be a miss.
> >
> > *How I achieved it*
> >
> > *Index 1 *
> > Doc 1 - Field1, Value 1
> > Doc 2 - Field1, Value 1
> >
> > *Index 2*
> > Doc 1 - Field1, Modified_Value 1
> > Doc 2 - EMPTY
> >
> > Add index 2 before Index 1 in the parallel reader.
> > In short, I am creating a new index with same number of documents but all
> > the documents are empty except the ones I want to update.
> >
> > *RESULTS:*
> > If I search for Field1:Value1, I get a miss[What I wanted]
> > If I search for Field1:Modified_Value 1, I get a hit[What I wanted]
> >
> > *PROBLEM*
> > I am kinda finding it surprising that I am able to update a field[I was
> > told
> > I can't]. Ofcourse there is downside of creating a new index with dummy
> > documents which might be huge. But apart from that, Is there something
> > fishy
> > about it? Any case where it would break?
> >
> >
> >
> > On Thu, Oct 14, 2010 at 5:55 PM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > No. And you don't even want to try... Document IDs are NOT invariant.
> > > Particularly
> > > when you delete a document and optimize an index, all the documents
> that
> > > come
> > > after the deleted one get new doc IDs. Trying to keep these two indexes
> > in
> > > synch
> > > will be a nightmare.
> > >
> > > Perhaps you could explain what you're trying to accomplish and we could
> > > suggest
> > > other approaches. See:
> > >
> > > http://people.apache.org/~hossman/#xyproblem<http://people.apache.org/%7Ehossman/#xyproblem>
> > >
> > > Your question appears to be an "XY Problem" ... that is: you are
> dealing
> > > with "X", you are assuming "Y" will help you, and you are asking about
> > "Y"
> > > without giving more details about the "X" so that we can understand the
> > > full issue.  Perhaps the best solution doesn't involve "Y" at all?
> > > See Also: http://www.perlmonks.org/index.pl?node_id=542341
> > >
> > > Best,
> > > Erick
> > >
> > > On Thu, Oct 14, 2010 at 11:42 AM, Nilesh Vijaywargiay <
> > > nilesh.vijay@gmail.com> wrote:
> > >
> > > > I have two index, A and B. Can two documents doc1[in index A] and
> > doc2[in
> > > > index B] have a common field? doc1 and doc2 have same document Id's.
> > > >
> > >
> >
>

--0016e68dea3d0f69cb04929df194--

From java-user-return-47505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 08:31:03 2010
Return-Path: <java-user-return-47505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35923 invoked from network); 15 Oct 2010 08:31:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 08:31:03 -0000
Received: (qmail 34512 invoked by uid 500); 15 Oct 2010 08:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34298 invoked by uid 500); 15 Oct 2010 08:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34219 invoked by uid 99); 15 Oct 2010 08:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 08:30:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pasalic.zaharije@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 08:30:50 +0000
Received: by qyk7 with SMTP id 7so1282801qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 01:30:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=CgFl4jpvSgBN+MvxPNBGF3IAl4tsSMKb9GIlyh0VTT4=;
        b=LEQPoFdt1ygZVFBflb3nSSIN+yeYTY+qiX+GRhDhgAsg1GWPdKxPYuHb5Fb05jPvIg
         EPP1Hzi1gGFza0xu/qed/T3a0ATaFSGQz1M9M6kKe+y9pMF8RAjH4ss9YW1sNzrR0eyO
         MZqkyT/OEBgfLMcT9WbYIMwKRGsUv6jdaMs1M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dSnAkBGDRo1uKHTWAUDmUpkPxZKCEZLMFuJl9W97wiChaOzwH2poyHF2DO3btPO99T
         Y5DwLDmkzpOhZCliph7JWeNKeYa1Ji6mZJjxzAkpQDh3UeAgbgNRjOxolQPKVwSbBag3
         arGeFTYMXH4BQpHK/2U2BP71FJ3gZWbWU0Oyo=
MIME-Version: 1.0
Received: by 10.224.11.20 with SMTP id r20mr1552956qar.7.1287131428902; Fri,
 15 Oct 2010 01:30:28 -0700 (PDT)
Received: by 10.229.34.70 with HTTP; Fri, 15 Oct 2010 01:30:28 -0700 (PDT)
Date: Fri, 15 Oct 2010 10:30:28 +0200
Message-ID: <AANLkTi=9Y--CrThJWHGMs1FJofwV9_hVnx-8-GBCJHHz@mail.gmail.com>
Subject: Overriding DefaultScore
From: Zaharije Pasalic <pasalic.zaharije@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi

my original problem is to index large number of documents which
contains 360 integers in rage from 0-90K. Searching it's a little bit
complicated - I need to find most similar documents where query data
is also 360 numbers in range 0-90K. But (there is always 'but') i need
to create score with some predefined weight table. Here is example:

Index contains:

DOC1 : 1, 3, 5
DOC2 : 1, 100
DOC3 : 1, 5

I need to find all documents which are 'like' this:

SEARCH: 1,5,100

And suppose that i'm having table which says: "if value is larger than
10 wight hit as 0.5, else as 1" (in real application this is more
complicated weight table).

So for Query 1,5,100 i will have:

DOC1: SCORE=2    [1,5]
DOC3: SCORE=2    [1,5]
DOC2: SCORE=1.5 [1,100 (100>10- wight 0.5]

Searching is just: if hits occurs on field, increments score by 1*weight(value)

My first step was to create index with one field which contains all
360 values and to remove normals from it.

Now when i'm doing search like:

"F:1 F:5 F:100"

I'm getting results ok but score is not correct. Of course it gives me
score sorted by 'number of hits' (am I right?) but score value is not
calculated by increments of 1 nor i'm using wights at all.

So, my question is - is this even possible with lucene and if can, can
you point me into some directions (i already looked a little bit at
DefaultSimilarity overriding).

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 08:34:44 2010
Return-Path: <java-user-return-47506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37299 invoked from network); 15 Oct 2010 08:34:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 08:34:43 -0000
Received: (qmail 41930 invoked by uid 500); 15 Oct 2010 08:34:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40805 invoked by uid 500); 15 Oct 2010 08:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40797 invoked by uid 99); 15 Oct 2010 08:34:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 08:34:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 08:34:27 +0000
Received: (qmail 10660 invoked by uid 508); 15 Oct 2010 08:43:54 -0000
Received: from unknown (HELO spotter-dclnx) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 15 Oct 2010 08:43:54 -0000
Received: from techno by spotter-dclnx with local (Exim 4.72)
	(envelope-from <dcausse@spotter.com>)
	id 1P6fjq-0000L8-QG
	for java-user@lucene.apache.org; Fri, 15 Oct 2010 10:34:06 +0200
Date: Fri, 15 Oct 2010 10:34:06 +0200
From: David Causse <dcausse@spotter.com>
To: java-user@lucene.apache.org
Subject: Re: determining the type of a term - retrieving a payload
Message-ID: <20101015083406.GB15992@spotter-dclnx>
Mail-Followup-To: David Causse <dcausse@spotter.com>,
	java-user@lucene.apache.org
References: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Oct 13, 2010 at 04:37:37PM +0100, Sykes, Derek wrote:
> Hi there,
> 
> I'm currently trying to work out how I can determine the type (string/number/date/etc)of a term.  I've not seen any off the shelf way to do it so am trying to store a payload against each term that records the type.
> 
> I'm having a little trouble retrieving a payload I'd stored onto the term.  At the moment I'm using the TypeAsPayloadTokenFilter, however I'll change this soon as it's not really what I'm after.
> 
> I'm then getting a TermEnum from either reader.terms() or using a PrefixTermEnum.
> 
> For each term I want the payload from I'm running this function:
> 
>     private String getPayload(Term term) {
>         String payload = null;
>         try {
>             TermPositions termPositions = reader.termPositions(term);
>             termPositions.next();
>             if (termPositions.isPayloadAvailable()) {
>                 byte[] payloadBytes = new byte[termPositions.getPayloadLength()];
>                 payloadBytes = termPositions.getPayload(payloadBytes, 0);
>                 payload = new String(payloadBytes);
>                 LOG.debug(payload);
>             }
>         }
>         catch( IOException e) {
> ...
> 
> This never returns anything though.

Hi,

my guess is that you need to call nextPosition, why not something like
this :
// goto to the doc with skipTo(int internalId) or next()
// Iterate over positions
for(int i = 0; i < currentTermPos.freq(); i++) {
	int p = currentTermPos.nextPosition();
	payloadBuffer = currentTermPos.getPayload(payloadBuffer, 0);
	...
}

-- 
David Causse
Spotter
http://www.spotter.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 09:03:01 2010
Return-Path: <java-user-return-47507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43445 invoked from network); 15 Oct 2010 09:03:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 09:03:01 -0000
Received: (qmail 75553 invoked by uid 500); 15 Oct 2010 09:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75341 invoked by uid 500); 15 Oct 2010 09:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75333 invoked by uid 99); 15 Oct 2010 09:02:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 09:02:54 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 09:02:48 +0000
Received: by qyk7 with SMTP id 7so1317275qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 02:02:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=pHMfxSUbOmgKqNnUqxkLIh4o+3x38bNJlwCwgxHIadk=;
        b=AJbGz5lJfBmHODJ1nHiVS6omhWPziy43YnfRavBu51qbES7n050CJ4zoqwgswILFMI
         TYARoPHsUJLpGv9BIzqs4nUzwkO4FYWlC00j9KLzU9uWQBm3zqlxVb5Vu/zb5/GJH6id
         o93/DndgQtvz0YXAt1NVjuuZOSqa5Uc7uQvBo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rvmd3jEETkZM52/RhaZmELWXDk+NsHcNuL2uXBW+dp3rvFwp/hnTnvZqljGeV8K47V
         rC97rBZAueW9zw3+ui48IxuxAdBOu9Tg9S8467+LG0UhCy+GJ/ARBRRgv2qoNDXTrBXK
         gJtfva2zlEshJUPYDbbdJIk+adPM4SydjW6XQ=
Received: by 10.229.91.9 with SMTP id k9mr434864qcm.248.1287133347086; Fri, 15
 Oct 2010 02:02:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Fri, 15 Oct 2010 02:02:06 -0700 (PDT)
In-Reply-To: <1287063082053-1701013.post@n3.nabble.com>
References: <1287047235931-1699711.post@n3.nabble.com> <AANLkTikt7Qhm_yWyWevLy3zaa8qn+6qNgwF1R3v-FJCB@mail.gmail.com>
 <1287050629935-1699956.post@n3.nabble.com> <AANLkTim_Qefe1hnmMFcwgMMw70=2o6YSZyHqL_yS79M-@mail.gmail.com>
 <1287063082053-1701013.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 15 Oct 2010 10:02:06 +0100
Message-ID: <AANLkTim7tY_ermRcFjVbdAjhdVeosBBQpuRRp6QufXOD@mail.gmail.com>
Subject: Re: IndexSearch very slow after reopening the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'm a bit confused about what exactly you are timing.  Is the 46 ms
for one search on one term with one hit, or for 100 similar searches
or what?

Perhaps a minimal self-contained search program demonstrating exactly
what you are doing would help, with evidence of where it is spending
time.


--
Ian.


On Thu, Oct 14, 2010 at 2:31 PM, subwayne <labrassbandito@googlemail.com> wrote:
>
> Ok, I read the Wiki page related to improving the searching speed and adopted
> some advices. One of the slow queries is simply. Here are some:
>
> plaintext:guid
> 107.0 ms
> resultSet.totalHits = 1
>
> plaintext:allianc
> 51.0 ms
> resultSet.totalHists = 1
>
> plaintext:engin
> 46.0 ms
> resultSet.totalHits = 1
>
> plaintext:servicetec
> 46.0 ms
> resultSet.totalHits = 1
>
> .. and so on. I pose about one hundred queries for each category. Therefore,
> I retrieve a list of documents of a category by utilizing a QueryFilter:
>
> Term luceneTerm = new Term("plaintext", stemmer.process(candidate));
> TermQuery termQuery = new TermQuery(luceneTerm);
> Filter qf = new CachingWrapperFilter(new QueryWrapperFilter(termQuery));
>
> TopDocs resultSet = searcher.search(lTerm, qf, Integer.MAX_VALUE);
>
> Each subsequent query is "only" 46 ms instead of 107 ms. However, I think it
> is very slow. Note that these values are taken while the Lucene index is in
> the RAM (RAMDirectory). It makes no difference in time if I am using the
> RAMDirectory or NFIOSDirectory.
>
> Thanks for further advices.
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexSearch-very-slow-after-reopening-the-index-tp1699711p1701013.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 09:10:51 2010
Return-Path: <java-user-return-47508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49306 invoked from network); 15 Oct 2010 09:10:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 09:10:51 -0000
Received: (qmail 81927 invoked by uid 500); 15 Oct 2010 09:10:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81676 invoked by uid 500); 15 Oct 2010 09:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81668 invoked by uid 99); 15 Oct 2010 09:10:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 09:10:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 09:10:38 +0000
Received: by qwf7 with SMTP id 7so321832qwf.35
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 02:10:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=lY3TSu1vkHHXpmheA5V5oHaMwVJ/whOddgc02Hd4ZCo=;
        b=BsWbE69qVhmnETHNhpEYQXyYV2zN+nk2BYcqe6yoJ72R/xzjVzt89uSZf91uw3r2jX
         dH+gDKCZJoAcEUc6Y+ZzZMWUefV3XhXuyK64tMC+LWARhb01Hik2haafwHFG7/HmbXYw
         xJZSgeKn5OOkRsp/u8SlNM3+UaeiQxFlna9rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=OKkHTqUSSDsrK1wjD2gTih7l8pg5bYyJo6WQ5KZZvxcBlZ4tQ20zCoL85hWuM4LQaZ
         8HOSbEV2THMRZxa2kvMMTeX4SpQim+0fFiuSqNq5/g+pS4HfeyDoBFW4vWuGXHxH0W0C
         FlXb9ZsfWsW7qP2II3alaJjxSRX0pXEnkgRow=
Received: by 10.229.238.200 with SMTP id kt8mr489999qcb.0.1287133815284; Fri,
 15 Oct 2010 02:10:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.238.132 with HTTP; Fri, 15 Oct 2010 02:09:54 -0700 (PDT)
In-Reply-To: <AANLkTi=9Y--CrThJWHGMs1FJofwV9_hVnx-8-GBCJHHz@mail.gmail.com>
References: <AANLkTi=9Y--CrThJWHGMs1FJofwV9_hVnx-8-GBCJHHz@mail.gmail.com>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Fri, 15 Oct 2010 12:09:54 +0300
Message-ID: <AANLkTikB=3+=RB7x_adjAKadWdt_8akqK4jZ6sNYg-3F@mail.gmail.com>
Subject: Re: Overriding DefaultScore
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You could encode term score as payload while indexing, and use those
payloads on search time.

On Fri, Oct 15, 2010 at 11:30, Zaharije Pasalic
<pasalic.zaharije@gmail.com> wrote:
> Hi
>
> my original problem is to index large number of documents which
> contains 360 integers in rage from 0-90K. Searching it's a little bit
> complicated - I need to find most similar documents where query data
> is also 360 numbers in range 0-90K. But (there is always 'but') i need
> to create score with some predefined weight table. Here is example:
>
> Index contains:
>
> DOC1 : 1, 3, 5
> DOC2 : 1, 100
> DOC3 : 1, 5
>
> I need to find all documents which are 'like' this:
>
> SEARCH: 1,5,100
>
> And suppose that i'm having table which says: "if value is larger than
> 10 wight hit as 0.5, else as 1" (in real application this is more
> complicated weight table).
>
> So for Query 1,5,100 i will have:
>
> DOC1: SCORE=3D2 =C2=A0 =C2=A0[1,5]
> DOC3: SCORE=3D2 =C2=A0 =C2=A0[1,5]
> DOC2: SCORE=3D1.5 [1,100 (100>10- wight 0.5]
>
> Searching is just: if hits occurs on field, increments score by 1*weight(=
value)
>
> My first step was to create index with one field which contains all
> 360 values and to remove normals from it.
>
> Now when i'm doing search like:
>
> "F:1 F:5 F:100"
>
> I'm getting results ok but score is not correct. Of course it gives me
> score sorted by 'number of hits' (am I right?) but score value is not
> calculated by increments of 1 nor i'm using wights at all.
>
> So, my question is - is this even possible with lucene and if can, can
> you point me into some directions (i already looked a little bit at
> DefaultSimilarity overriding).
>
> Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 12:36:45 2010
Return-Path: <java-user-return-47509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22014 invoked from network); 15 Oct 2010 12:36:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 12:36:45 -0000
Received: (qmail 26203 invoked by uid 500); 15 Oct 2010 12:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26014 invoked by uid 500); 15 Oct 2010 12:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26004 invoked by uid 99); 15 Oct 2010 12:36:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 12:36:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 12:36:31 +0000
Received: by gyh3 with SMTP id 3so384163gyh.35
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 05:36:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=QgkSjOaA9c/UTpUL5ThKQAS+HwANYttbR/qX+CDhcig=;
        b=hek/OPGzyBO77YnvaBku53YZ4TO2XLPefNBtetfjuMOh8RmNXM3TI3ndWYlrJ7Gh3o
         DJs5WMSledttCSoXlYs6f+cy5agB+MSRkVtcsnzeHM5ZDTvNx7LnHvnzPAxXvoMlLxkA
         iK+88o2ctyNpe1pfuyHJJKt/kxlKcEJaa7MrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MtMBH5r1CJs7eFzYuYm44xUT27trLgoHqih+2CgE6AEBk8dML07gEpF4GAOUYiCq4e
         /V3PFwMvGzqWxle8rKCKij/Cm/vTqF7dSu9vgwY33sEKlwpHR8I/4ofolMdfY655l7rC
         S6EfcM8o55R5vtdsjvKAszQbZnaHUfgVASRlM=
MIME-Version: 1.0
Received: by 10.150.216.15 with SMTP id o15mr1545139ybg.323.1287146170237;
 Fri, 15 Oct 2010 05:36:10 -0700 (PDT)
Received: by 10.150.139.10 with HTTP; Fri, 15 Oct 2010 05:36:10 -0700 (PDT)
In-Reply-To: <1287065863.4cb711077458e@netmail.pipex.net>
References: <1287065863.4cb711077458e@netmail.pipex.net>
Date: Fri, 15 Oct 2010 08:36:10 -0400
Message-ID: <AANLkTi=8OqH=c2TTfgbRqz9wqawfdLxFdWzUy6vqxADE@mail.gmail.com>
Subject: Re: Use of Lucene to store data from RSS feeds
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

When you ask:
a) will each feed would form a Lucene document, or
b) will each database row would form a lucene document
I'm inclined to say that really depends on what type of aggregation
tool or logic you are using.

I don't know if "Tika" does it but if there is a tool out there that
can be pointed to a feed and tweaked to spit out documents with each
field having the settings that you want then you can go with that
approach. But if you are already parsing the feed and storing the raw
data into a database table then there is no reason that you can't
leverage that. From a database row perspective you have already done a
good deal of work to collect the data and breaking it down into chunks
that Lucene can happily index as separate fields in a document.

By the way I think there are tools that read from the database
directly too but I won't try to make things too complicated.

The way I see it, if you were to use the row at this moment and index
the 4 columns as fields ... plus you could set the feed body to be
ANALYZED (why don't I see the feed body in your database table?) ...
then lucene range queries on the date/time field could possibly return
some results. I am not sure how to get keyword frequencies but if the
analyzed tokens that lucene is keeping in its index sort of represent
the keywords that you are talking about then i do know that lucene
keeps some sort of inverted index per token in terms of how many
occurrences of it are there ... may be someone else on the list can
comment on how to extract that info in a query.

Sounds doable.

On Thu, Oct 14, 2010 at 10:17 AM,  <appy74@dsl.pipex.com> wrote:
> Hello
>
> I would like to store data retrieved hourly from RSS feeds in a database or in Lucene so that the text can be easily
> indexed for word frequencies.
>
> I need to get the text from the title and description elements of RSS items.
>
> Ideally, for each hourly retrieval from a given feed, I would add a row to a table in a dataset made up of the
> following columns:
>
> feed_url, title_element_text, description_element_text, polling_date_time
>
> From this, I can look up any element in a feed and calculate keyword frequencies based upon the length of time required.
>
> This can be done as a database table and hashmaps used to calculate word frequencies. But can I do this in Lucene to
> this degree of granularity at all? If so, would each feed form a Lucene document or would each 'row' from the
> database table form one?
>
> Can anyone advise?
>
> Thanks
>
> Martin O'Shea.
> --
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 13:19:59 2010
Return-Path: <java-user-return-47510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51925 invoked from network); 15 Oct 2010 13:19:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 13:19:58 -0000
Received: (qmail 4331 invoked by uid 500); 15 Oct 2010 13:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3940 invoked by uid 500); 15 Oct 2010 13:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3932 invoked by uid 99); 15 Oct 2010 13:19:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 13:19:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pasalic.zaharije@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 13:19:44 +0000
Received: by qwf7 with SMTP id 7so439813qwf.35
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 06:19:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Xd7Iat1R3P3/S3iZpPb/jDicNDygI2Rsh+7zCbUMUPs=;
        b=RD5GbZMeBUHznUYS+7cOICT0J/BY7oxkTcHdWAPDAjaWl2VPeMNniwdkOwe9qMMMGf
         CkEPXzVJxFrVDEMKHjqQnctv7NL385g92wtPtCsDxxIgV/YcaPCKUquel/xfumqXzaYN
         dEFP7+yncNiJGAJ7bSL++q9bJHnj0zfAeS1KA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ac/GaDrs5ejIpZ4jpXuu1l0jX9rkkxE1XIFMHT/znaRadVKBZwstBNwTcgpjokKyPz
         77s4vK27CKFTY+5mjTtSgJog9qrcVGT2MJfa2iz2fxna9x2D5yBQp2Yg4qs5WCdpuxBz
         U59iL65olgMUc20O/7Ukb8DbDEVse8kr5yzJs=
MIME-Version: 1.0
Received: by 10.224.36.42 with SMTP id r42mr8697497qad.164.1287148763543; Fri,
 15 Oct 2010 06:19:23 -0700 (PDT)
Received: by 10.229.34.70 with HTTP; Fri, 15 Oct 2010 06:19:23 -0700 (PDT)
In-Reply-To: <AANLkTikB=3+=RB7x_adjAKadWdt_8akqK4jZ6sNYg-3F@mail.gmail.com>
References: <AANLkTi=9Y--CrThJWHGMs1FJofwV9_hVnx-8-GBCJHHz@mail.gmail.com>
	<AANLkTikB=3+=RB7x_adjAKadWdt_8akqK4jZ6sNYg-3F@mail.gmail.com>
Date: Fri, 15 Oct 2010 15:19:23 +0200
Message-ID: <AANLkTimOmq71Mf_7YjHH22MEaCpjL2mOZjopK--8JLry@mail.gmail.com>
Subject: Re: Overriding DefaultScore
From: Zaharije Pasalic <pasalic.zaharije@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can anybody explain or point me to couple of links where i can find
more info about payloads?

Thx

On Fri, Oct 15, 2010 at 11:09 AM, Danil =C5=A2ORIN <torindan@gmail.com> wro=
te:
> You could encode term score as payload while indexing, and use those
> payloads on search time.
>
> On Fri, Oct 15, 2010 at 11:30, Zaharije Pasalic
> <pasalic.zaharije@gmail.com> wrote:
>> Hi
>>
>> my original problem is to index large number of documents which
>> contains 360 integers in rage from 0-90K. Searching it's a little bit
>> complicated - I need to find most similar documents where query data
>> is also 360 numbers in range 0-90K. But (there is always 'but') i need
>> to create score with some predefined weight table. Here is example:
>>
>> Index contains:
>>
>> DOC1 : 1, 3, 5
>> DOC2 : 1, 100
>> DOC3 : 1, 5
>>
>> I need to find all documents which are 'like' this:
>>
>> SEARCH: 1,5,100
>>
>> And suppose that i'm having table which says: "if value is larger than
>> 10 wight hit as 0.5, else as 1" (in real application this is more
>> complicated weight table).
>>
>> So for Query 1,5,100 i will have:
>>
>> DOC1: SCORE=3D2 =C2=A0 =C2=A0[1,5]
>> DOC3: SCORE=3D2 =C2=A0 =C2=A0[1,5]
>> DOC2: SCORE=3D1.5 [1,100 (100>10- wight 0.5]
>>
>> Searching is just: if hits occurs on field, increments score by 1*weight=
(value)
>>
>> My first step was to create index with one field which contains all
>> 360 values and to remove normals from it.
>>
>> Now when i'm doing search like:
>>
>> "F:1 F:5 F:100"
>>
>> I'm getting results ok but score is not correct. Of course it gives me
>> score sorted by 'number of hits' (am I right?) but score value is not
>> calculated by increments of 1 nor i'm using wights at all.
>>
>> So, my question is - is this even possible with lucene and if can, can
>> you point me into some directions (i already looked a little bit at
>> DefaultSimilarity overriding).
>>
>> Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 13:27:55 2010
Return-Path: <java-user-return-47511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54683 invoked from network); 15 Oct 2010 13:27:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 13:27:52 -0000
Received: (qmail 19281 invoked by uid 500); 15 Oct 2010 13:27:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18677 invoked by uid 500); 15 Oct 2010 13:27:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18656 invoked by uid 99); 15 Oct 2010 13:27:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 13:27:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 13:27:38 +0000
Received: by qyk7 with SMTP id 7so1638721qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 06:27:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=YydGTKas8zaP2NEMRAOSYgyAgrpG2OEy78DITiyx5HY=;
        b=L5pVLiRaa9cRDwTqZWPIdhGwxYcqWUZwctDCf7yizgZePJYq1DxfUzxWyOZE4rPKBV
         kwfioQ8dQOIim0mNhlIi4mtxu73C+0+/hlWrjjNboKKscMvam6S6XsWsPoEUz7laKd7v
         cOlDQccSgGCEj8Po3movQleqGWRZNlmOMpCHA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=NA+cJ25vknjZuZkfyt53IwlSiy14tWDfx11gLuMyaaBRTv78rFGnBuTTtDvwLBjPoZ
         +fe5fUeLa0H3dv1R3xz4tBVIsG+Jnba3iCYS7g9AdpuITpi+A7K6MxL6js+9x6Di1dRh
         hn+Fs2P0JvLsY7qpSJYzHM+f/UykDSJupDHFE=
Received: by 10.229.233.144 with SMTP id jy16mr684762qcb.293.1287149236982;
 Fri, 15 Oct 2010 06:27:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Fri, 15 Oct 2010 06:26:56 -0700 (PDT)
In-Reply-To: <AANLkTimOmq71Mf_7YjHH22MEaCpjL2mOZjopK--8JLry@mail.gmail.com>
References: <AANLkTi=9Y--CrThJWHGMs1FJofwV9_hVnx-8-GBCJHHz@mail.gmail.com>
 <AANLkTikB=3+=RB7x_adjAKadWdt_8akqK4jZ6sNYg-3F@mail.gmail.com> <AANLkTimOmq71Mf_7YjHH22MEaCpjL2mOZjopK--8JLry@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 15 Oct 2010 14:26:56 +0100
Message-ID: <AANLkTikWim7w++-b3C1irVr4_+0uxi-cD3EBBU2DnXnx@mail.gmail.com>
Subject: Re: Overriding DefaultScore
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payloa=
ds/
sounds a good place to start.

A much simpler alternative, although without exact control, would be
to use query boosting.  There is also CustomScoreQuery - complex but
powerful.


--
Ian.



On Fri, Oct 15, 2010 at 2:19 PM, Zaharije Pasalic
<pasalic.zaharije@gmail.com> wrote:
> Can anybody explain or point me to couple of links where i can find
> more info about payloads?
>
> Thx
>
> On Fri, Oct 15, 2010 at 11:09 AM, Danil =C5=A2ORIN <torindan@gmail.com> w=
rote:
>> You could encode term score as payload while indexing, and use those
>> payloads on search time.
>>
>> On Fri, Oct 15, 2010 at 11:30, Zaharije Pasalic
>> <pasalic.zaharije@gmail.com> wrote:
>>> Hi
>>>
>>> my original problem is to index large number of documents which
>>> contains 360 integers in rage from 0-90K. Searching it's a little bit
>>> complicated - I need to find most similar documents where query data
>>> is also 360 numbers in range 0-90K. But (there is always 'but') i need
>>> to create score with some predefined weight table. Here is example:
>>>
>>> Index contains:
>>>
>>> DOC1 : 1, 3, 5
>>> DOC2 : 1, 100
>>> DOC3 : 1, 5
>>>
>>> I need to find all documents which are 'like' this:
>>>
>>> SEARCH: 1,5,100
>>>
>>> And suppose that i'm having table which says: "if value is larger than
>>> 10 wight hit as 0.5, else as 1" (in real application this is more
>>> complicated weight table).
>>>
>>> So for Query 1,5,100 i will have:
>>>
>>> DOC1: SCORE=3D2 =C2=A0 =C2=A0[1,5]
>>> DOC3: SCORE=3D2 =C2=A0 =C2=A0[1,5]
>>> DOC2: SCORE=3D1.5 [1,100 (100>10- wight 0.5]
>>>
>>> Searching is just: if hits occurs on field, increments score by 1*weigh=
t(value)
>>>
>>> My first step was to create index with one field which contains all
>>> 360 values and to remove normals from it.
>>>
>>> Now when i'm doing search like:
>>>
>>> "F:1 F:5 F:100"
>>>
>>> I'm getting results ok but score is not correct. Of course it gives me
>>> score sorted by 'number of hits' (am I right?) but score value is not
>>> calculated by increments of 1 nor i'm using wights at all.
>>>
>>> So, my question is - is this even possible with lucene and if can, can
>>> you point me into some directions (i already looked a little bit at
>>> DefaultSimilarity overriding).
>>>
>>> Thanks
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 14:14:17 2010
Return-Path: <java-user-return-47512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78728 invoked from network); 15 Oct 2010 14:14:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 14:14:17 -0000
Received: (qmail 19686 invoked by uid 500); 15 Oct 2010 14:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19581 invoked by uid 500); 15 Oct 2010 14:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19573 invoked by uid 99); 15 Oct 2010 14:14:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:14:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:14:06 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P6l2W-0001gD-0R
	for java-user@lucene.apache.org; Fri, 15 Oct 2010 16:13:44 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Writing an Analyzer for storing and retrieving a payload (was: Storing additional Metadata with Fields)
Date: Fri, 15 Oct 2010 16:13:39 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <201010141443.41973.hermann@informatik.uni-freiburg.de>
In-Reply-To: <201010141443.41973.hermann@informatik.uni-freiburg.de>
Organization: =?iso-8859-15?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010151613.39497.hermann@informatik.uni-freiburg.de>

Am Donnerstag, 14. Oktober 2010, 14:43:41 schrieb Christoph Hermann:

Hello,

> It seems Playload gets added to
> every term in the index, so in my case i would store the x,y and page
> values for every word and increase the index much more than i'd need.
> Any approach for preventing this?
>=20
> And when searching, how can i access the payloads when displaying the
> result? I haven't found information on that so far.

Is there any example on how to use payloads?
And the above questions are still valid.

My current problem is that i've written a ContentHandler, that parses the=20
extended html from tika and sets boost values on created fields, but it see=
ms=20
that i need to move all this to the Analyzer since using boosts on Fields w=
ith=20
the same name has no real effect?
I.e.
add(new Field("contents","foo"))
add(new Field("contents","bar").setBoost(1.5f))

=3D> gets one "content" field with a common boost value?

If i'm correct, how would i proceed to achieve the desired effect?

Put all the HTML from the <body> (from tika) in one content field, and let =
the=20
Analyzer do the work?

Is there an example of an Analyzer that uses playloads available somewhere?

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 14:29:13 2010
Return-Path: <java-user-return-47513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86004 invoked from network); 15 Oct 2010 14:29:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 14:29:13 -0000
Received: (qmail 71972 invoked by uid 500); 15 Oct 2010 14:29:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71609 invoked by uid 500); 15 Oct 2010 14:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71601 invoked by uid 99); 15 Oct 2010 14:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:29:08 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Derek.Sykes@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:29:00 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id 0D7CF304799
	for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 10:28:40 -0400 (EDT)
Received: from ny0031as01 (unknown [144.203.194.93])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id DAAD3304293
	for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 10:28:39 -0400 (EDT)
Received: from ny0031as01 (localhost [127.0.0.1])
	by ny0031as01 (msa-out Postfix) with ESMTP id C1B159702FD
	for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 10:28:39 -0400 (EDT)
Received: from HNWEXGOB01.msad.ms.com (hn210c1n1 [10.184.121.166])
	by ny0031as01 (mta-in Postfix) with ESMTP id BEB9EC003A
	for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 10:28:39 -0400 (EDT)
Received: from HNWEXGIB02.msad.ms.com (10.184.57.209) by HNWEXGOB01.msad.ms.com (10.184.121.166) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 15 Oct 2010 10:28:39 -0400
Received: from OZWEXHUB01.msad.ms.com (10.174.147.76) by HNWEXGIB02.msad.ms.com (10.184.57.209) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 15 Oct 2010 10:28:38 -0400
Received: from LNWEXMBX0105.msad.ms.com ([10.174.172.10]) by OZWEXHUB01.msad.ms.com ([10.174.147.76]) with mapi; Fri, 15 Oct 2010 15:28:38 +0100
From: "Sykes, Derek" <Derek.Sykes@morganstanley.com>
To: <java-user@lucene.apache.org>
Date: Fri, 15 Oct 2010 15:28:36 +0100
Subject: RE: determining the type of a term - retrieving a payload
Thread-Topic: determining the type of a term - retrieving a payload
thread-index: ActsQ9PwuhbhM0qcS3ONKAdIyPtQkQAMOJeQ
Message-ID: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB6FC@LNWEXMBX0105.msad.ms.com>
References: <F3ABB2494D396645AA9BA5E5C7ECEF4CDF8EFFB197@LNWEXMBX0105.msad.ms.com> <20101015083406.GB15992@spotter-dclnx>
In-Reply-To: <20101015083406.GB15992@spotter-dclnx>
Accept-Language: en-US
Content-Language: en-US
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4657
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 15102010 #3968887, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi David,

nextPosition() was indeed the missing link.  Thanks very much!

Cheers,
Derek

-----Original Message-----
From: David Causse [mailto:dcausse@spotter.com]=20
Sent: 15 October 2010 09:34
To: java-user@lucene.apache.org
Subject: Re: determining the type of a term - retrieving a payload

On Wed, Oct 13, 2010 at 04:37:37PM +0100, Sykes, Derek wrote:
> Hi there,
>=20
> I'm currently trying to work out how I can determine the type =
(string/number/date/etc)of a term.  I've not seen any off the shelf way =
to do it so am trying to store a payload against each term that records =
the type.
>=20
> I'm having a little trouble retrieving a payload I'd stored onto the =
term.  At the moment I'm using the TypeAsPayloadTokenFilter, however =
I'll change this soon as it's not really what I'm after.
>=20
> I'm then getting a TermEnum from either reader.terms() or using a =
PrefixTermEnum.
>=20
> For each term I want the payload from I'm running this function:
>=20
>     private String getPayload(Term term) {
>         String payload =3D null;
>         try {
>             TermPositions termPositions =3D =
reader.termPositions(term);
>             termPositions.next();
>             if (termPositions.isPayloadAvailable()) {
>                 byte[] payloadBytes =3D new =
byte[termPositions.getPayloadLength()];
>                 payloadBytes =3D =
termPositions.getPayload(payloadBytes, 0);
>                 payload =3D new String(payloadBytes);
>                 LOG.debug(payload);
>             }
>         }
>         catch( IOException e) {
> ...
>=20
> This never returns anything though.

Hi,

my guess is that you need to call nextPosition, why not something like
this :
// goto to the doc with skipTo(int internalId) or next()
// Iterate over positions
for(int i =3D 0; i < currentTermPos.freq(); i++) {
	int p =3D currentTermPos.nextPosition();
	payloadBuffer =3D currentTermPos.getPayload(payloadBuffer, 0);
	...
}

--=20
David Causse
Spotter
http://www.spotter.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-------------------------------------------------------------------------=
-
NOTICE: Morgan Stanley is not acting as a municipal advisor and the =
opinions or views contained herein are not intended to be, and do not =
constitute, advice within the meaning of Section 975 of the Dodd-Frank =
Wall Street Reform and Consumer Protection Act. If you have received =
this communication in error, please destroy all electronic and paper =
copies and notify the sender immediately. Mistransmission is not =
intended to waive confidentiality or privilege. Morgan Stanley reserves =
the right, to the extent permitted under applicable law, to monitor =
electronic communications. This message is subject to terms available at =
the following link: http://www.morganstanley.com/disclaimers. If you =
cannot access these links, please notify us by reply message and we will =
send the contents to you. By messaging with Morgan Stanley you consent =
to the foregoing.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 14:36:07 2010
Return-Path: <java-user-return-47514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89159 invoked from network); 15 Oct 2010 14:36:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 14:36:07 -0000
Received: (qmail 82545 invoked by uid 500); 15 Oct 2010 14:36:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82304 invoked by uid 500); 15 Oct 2010 14:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82294 invoked by uid 99); 15 Oct 2010 14:36:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:36:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.37 as permitted sender)
Received: from [212.74.114.37] (HELO mk-outboundfilter-1.mail.uk.tiscali.com) (212.74.114.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 14:35:54 +0000
X-Trace: 406613851/mk-outboundfilter-1.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AmcKAHMDuExRVnIp/2dsb2JhbACDH50KeHKtHZIygSKDM3QEhX2EBEmCeoJwgWM
X-IronPort-AV: E=Sophos;i="4.57,336,1283727600"; 
   d="scan'208";a="406613851"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 15 Oct 2010 15:35:31 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
References: <1287065863.4cb711077458e@netmail.pipex.net> <AANLkTi=8OqH=c2TTfgbRqz9wqawfdLxFdWzUy6vqxADE@mail.gmail.com>
In-Reply-To: <AANLkTi=8OqH=c2TTfgbRqz9wqawfdLxFdWzUy6vqxADE@mail.gmail.com>
Subject: RE: Use of Lucene to store data from RSS feeds
Date: Fri, 15 Oct 2010 15:35:37 +0100
Message-ID: <000801cb6c76$3c274b60$b475e220$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: ActsZaGqYCtke4iqTX6yulf++f462AAD+V1Q
Content-Language: en-gb

@Pulkit Singhal: Thanks for the reply. Just to clarify my post =
yesterday, I'm not sure if each row in the database table would form a =
document or not because I do not know if Lucene works in this manner. In =
my case, each row of the table represents a single polling of an RSS =
feed to retrieve any new postings over a given number of hours. If =
Lucene allows a document to have separate time-based entries, then I am =
happy to use it for indexing. But if a separate document is needed per =
row of the table, then I'm uncertain. I always do have the option of =
using Lucene for in-memory indexing of postings to calculate the keyword =
frequencies. This I know how to do.

The individual columns of my table represent the only two elements of =
each RSS item that I'm interested in retrieving text from, i.e. the =
title and description.

-----Original Message-----
From: Pulkit Singhal [mailto:pulkitsinghal@gmail.com]=20
Sent: 15 Oct 2010 13 36
To: java-user@lucene.apache.org
Subject: Re: Use of Lucene to store data from RSS feeds

When you ask:
a) will each feed would form a Lucene document, or
b) will each database row would form a lucene document
I'm inclined to say that really depends on what type of aggregation
tool or logic you are using.

I don't know if "Tika" does it but if there is a tool out there that
can be pointed to a feed and tweaked to spit out documents with each
field having the settings that you want then you can go with that
approach. But if you are already parsing the feed and storing the raw
data into a database table then there is no reason that you can't
leverage that. From a database row perspective you have already done a
good deal of work to collect the data and breaking it down into chunks
that Lucene can happily index as separate fields in a document.

By the way I think there are tools that read from the database
directly too but I won't try to make things too complicated.

The way I see it, if you were to use the row at this moment and index
the 4 columns as fields ... plus you could set the feed body to be
ANALYZED (why don't I see the feed body in your database table?) ...
then lucene range queries on the date/time field could possibly return
some results. I am not sure how to get keyword frequencies but if the
analyzed tokens that lucene is keeping in its index sort of represent
the keywords that you are talking about then i do know that lucene
keeps some sort of inverted index per token in terms of how many
occurrences of it are there ... may be someone else on the list can
comment on how to extract that info in a query.

Sounds doable.

On Thu, Oct 14, 2010 at 10:17 AM,  <appy74@dsl.pipex.com> wrote:
> Hello
>
> I would like to store data retrieved hourly from RSS feeds in a =
database or in Lucene so that the text can be easily
> indexed for word frequencies.
>
> I need to get the text from the title and description elements of RSS =
items.
>
> Ideally, for each hourly retrieval from a given feed, I would add a =
row to a table in a dataset made up of the
> following columns:
>
> feed_url, title_element_text, description_element_text, =
polling_date_time
>
> From this, I can look up any element in a feed and calculate keyword =
frequencies based upon the length of time required.
>
> This can be done as a database table and hashmaps used to calculate =
word frequencies. But can I do this in Lucene to
> this degree of granularity at all? If so, would each feed form a =
Lucene document or would each 'row' from the
> database table form one?
>
> Can anyone advise?
>
> Thanks
>
> Martin O'Shea.
> --
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 16:16:11 2010
Return-Path: <java-user-return-47515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49606 invoked from network); 15 Oct 2010 16:16:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 16:16:11 -0000
Received: (qmail 67020 invoked by uid 500); 15 Oct 2010 16:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66860 invoked by uid 500); 15 Oct 2010 16:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66852 invoked by uid 99); 15 Oct 2010 16:16:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 16:16:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 16:16:02 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P6mwW-0002kv-DU
	for java-user@lucene.apache.org; Fri, 15 Oct 2010 18:15:40 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Tokenizing XML
Date: Fri, 15 Oct 2010 18:15:33 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010151815.33368.hermann@informatik.uni-freiburg.de>

Hi,

is there a Tokenizer in Lucene, that tokenizes XML correctly?

I.e. that one gets from the following XML:
<span>this is <span attr=3D"foo">example</span>text.</span>

Tokens (or similar):
<span> | this | is | <span attr=3D"foo"> | example | </span> | text. | </sp=
an>

Or would i need to write such a Tokenizer myself?

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 18:16:58 2010
Return-Path: <java-user-return-47516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12599 invoked from network); 15 Oct 2010 18:16:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 18:16:58 -0000
Received: (qmail 20496 invoked by uid 500); 15 Oct 2010 18:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20441 invoked by uid 500); 15 Oct 2010 18:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20433 invoked by uid 99); 15 Oct 2010 18:16:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:16:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:16:50 +0000
Received: by qyk7 with SMTP id 7so2026073qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 11:16:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ksG9L6taNwLWgz0iSTf71zK6C7AbCBGqFwfDOIeMrmw=;
        b=uVd7s8tRLSZYK80cvKaZfE+c+iBDeCHQ29eauCsCI/ecvqfVBt3mgBQwrhCD+lbvti
         Nl2+leVr6FfQgRjeBi1FajDJMFPJHE8+6B5whrN08SwI07BixZrWIhji3cGocKOijlIf
         j2zVkdFTNVnvNGBUyWS15n8INBLZav+gRovgI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ab84CtzkmML8XLFZvzL08oNS5Vr8OXb9ctXD1onyQxDsILiWFp/DsGEgaxA+EJQrVZ
         xyZ2pWG1o5ZAi/K1d+vglK+dTobShmdlQBGFy3FR292gzYF6smoosuZeJ9YpZy9LJd51
         +W3oUF+ArcIIbBfEnuf3jMYN85LW6Ibz2bB8I=
MIME-Version: 1.0
Received: by 10.229.83.145 with SMTP id f17mr985493qcl.165.1287166589105; Fri,
 15 Oct 2010 11:16:29 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Fri, 15 Oct 2010 11:16:29 -0700 (PDT)
In-Reply-To: <000801cb6c76$3c274b60$b475e220$@pipex.com>
References: <1287065863.4cb711077458e@netmail.pipex.net>
	<AANLkTi=8OqH=c2TTfgbRqz9wqawfdLxFdWzUy6vqxADE@mail.gmail.com>
	<000801cb6c76$3c274b60$b475e220$@pipex.com>
Date: Fri, 15 Oct 2010 14:16:29 -0400
Message-ID: <AANLkTin9+F0jp+PkicZHQfNtPPVTdet2Hcd6_mq6ZEAW@mail.gmail.com>
Subject: Re: Use of Lucene to store data from RSS feeds
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364274a04f75d60492abd304

--0016364274a04f75d60492abd304
Content-Type: text/plain; charset=ISO-8859-1

How many documents Lucene creates and when is entirely up to you. Your code
calls
IndexWriter.addDocument after all.

You can add multiple values to a #field# in a document if you want, just
call Document.add()
repeatedly...

HTH
Erick

On Fri, Oct 15, 2010 at 10:35 AM, Martin O'Shea <appy74@dsl.pipex.com>wrote:

> @Pulkit Singhal: Thanks for the reply. Just to clarify my post yesterday,
> I'm not sure if each row in the database table would form a document or not
> because I do not know if Lucene works in this manner. In my case, each row
> of the table represents a single polling of an RSS feed to retrieve any new
> postings over a given number of hours. If Lucene allows a document to have
> separate time-based entries, then I am happy to use it for indexing. But if
> a separate document is needed per row of the table, then I'm uncertain. I
> always do have the option of using Lucene for in-memory indexing of postings
> to calculate the keyword frequencies. This I know how to do.
>
> The individual columns of my table represent the only two elements of each
> RSS item that I'm interested in retrieving text from, i.e. the title and
> description.
>
> -----Original Message-----
> From: Pulkit Singhal [mailto:pulkitsinghal@gmail.com]
> Sent: 15 Oct 2010 13 36
> To: java-user@lucene.apache.org
> Subject: Re: Use of Lucene to store data from RSS feeds
>
> When you ask:
> a) will each feed would form a Lucene document, or
> b) will each database row would form a lucene document
> I'm inclined to say that really depends on what type of aggregation
> tool or logic you are using.
>
> I don't know if "Tika" does it but if there is a tool out there that
> can be pointed to a feed and tweaked to spit out documents with each
> field having the settings that you want then you can go with that
> approach. But if you are already parsing the feed and storing the raw
> data into a database table then there is no reason that you can't
> leverage that. From a database row perspective you have already done a
> good deal of work to collect the data and breaking it down into chunks
> that Lucene can happily index as separate fields in a document.
>
> By the way I think there are tools that read from the database
> directly too but I won't try to make things too complicated.
>
> The way I see it, if you were to use the row at this moment and index
> the 4 columns as fields ... plus you could set the feed body to be
> ANALYZED (why don't I see the feed body in your database table?) ...
> then lucene range queries on the date/time field could possibly return
> some results. I am not sure how to get keyword frequencies but if the
> analyzed tokens that lucene is keeping in its index sort of represent
> the keywords that you are talking about then i do know that lucene
> keeps some sort of inverted index per token in terms of how many
> occurrences of it are there ... may be someone else on the list can
> comment on how to extract that info in a query.
>
> Sounds doable.
>
> On Thu, Oct 14, 2010 at 10:17 AM,  <appy74@dsl.pipex.com> wrote:
> > Hello
> >
> > I would like to store data retrieved hourly from RSS feeds in a database
> or in Lucene so that the text can be easily
> > indexed for word frequencies.
> >
> > I need to get the text from the title and description elements of RSS
> items.
> >
> > Ideally, for each hourly retrieval from a given feed, I would add a row
> to a table in a dataset made up of the
> > following columns:
> >
> > feed_url, title_element_text, description_element_text, polling_date_time
> >
> > From this, I can look up any element in a feed and calculate keyword
> frequencies based upon the length of time required.
> >
> > This can be done as a database table and hashmaps used to calculate word
> frequencies. But can I do this in Lucene to
> > this degree of granularity at all? If so, would each feed form a Lucene
> document or would each 'row' from the
> > database table form one?
> >
> > Can anyone advise?
> >
> > Thanks
> >
> > Martin O'Shea.
> > --
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364274a04f75d60492abd304--

From java-user-return-47517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 18:21:23 2010
Return-Path: <java-user-return-47517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13825 invoked from network); 15 Oct 2010 18:21:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 18:21:23 -0000
Received: (qmail 30199 invoked by uid 500); 15 Oct 2010 18:21:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30154 invoked by uid 500); 15 Oct 2010 18:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30146 invoked by uid 99); 15 Oct 2010 18:21:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:21:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:21:15 +0000
Received: by qyk7 with SMTP id 7so2031970qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 11:20:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=z0BTKNuULZf0x2SssdQeE6cQkScQYMiqnZea3juHFeg=;
        b=lvDP81ihSl1+HGzmThMZ2UKLnYOPVTyR7EyaZPyWRxpEr0e1WCWblxDblIiIsEYh5a
         ENMsPZA78GGQLi4UeJ+oPn8gOlo1+bdPRb58wZO41sZ36/Sdx5zvbKLVYA5csVgYQc1W
         /lGBt0fsxhUumIVzk7FLTX7t+R7rtHx8l8Ms8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jKlrtgoDie477e4PtL3y+bdTq/RtEio93rUkHtX6yjJfbEMkRY7mL02BG2W3a14mP7
         oFA34ShnJL9TS9L3jNZkF4YrnwEOW99L11MVM8Lz4++7alO9NNePdfkNBQUZZiWvHG7W
         eJYmHdf21Qrq/iN0gKUjL6Z0qXwNggoD41vow=
MIME-Version: 1.0
Received: by 10.229.83.145 with SMTP id f17mr982607qcl.165.1287166397861; Fri,
 15 Oct 2010 11:13:17 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Fri, 15 Oct 2010 11:13:17 -0700 (PDT)
In-Reply-To: <201010151613.39497.hermann@informatik.uni-freiburg.de>
References: <201010141443.41973.hermann@informatik.uni-freiburg.de>
	<201010151613.39497.hermann@informatik.uni-freiburg.de>
Date: Fri, 15 Oct 2010 14:13:17 -0400
Message-ID: <AANLkTimfHpRp9Pp2kd21mKoYEJxb26w0RYkVN_T38gzJ@mail.gmail.com>
Subject: Re: Writing an Analyzer for storing and retrieving a payload (was:
 Storing additional Metadata with Fields)
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364274a0e951250492abc7aa
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364274a0e951250492abc7aa
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Have you seen:
http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payloa=
ds/
<http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-paylo=
ads/>
?

And I don't think payloads are added unless they're specified in the term.
And even if they are, is your index big enough to care?

2010/10/15 Christoph Hermann <hermann@informatik.uni-freiburg.de>

> Am Donnerstag, 14. Oktober 2010, 14:43:41 schrieb Christoph Hermann:
>
> Hello,
>
> > It seems Playload gets added to
> > every term in the index, so in my case i would store the x,y and page
> > values for every word and increase the index much more than i'd need.
> > Any approach for preventing this?
> >
> > And when searching, how can i access the payloads when displaying the
> > result? I haven't found information on that so far.
>
> Is there any example on how to use payloads?
> And the above questions are still valid.
>
> My current problem is that i've written a ContentHandler, that parses the
> extended html from tika and sets boost values on created fields, but it
> seems
> that i need to move all this to the Analyzer since using boosts on Fields
> with
> the same name has no real effect?
> I.e.
> add(new Field("contents","foo"))
> add(new Field("contents","bar").setBoost(1.5f))
>
> =3D> gets one "content" field with a common boost value?
>
> If i'm correct, how would i proceed to achieve the desired effect?
>
> Put all the HTML from the <body> (from tika) in one content field, and le=
t
> the
> Analyzer do the work?
>
> Is there an example of an Analyzer that uses playloads available somewher=
e?
>
> regards
> Christoph Hermann
>
> --
> Christoph Hermann
> Institut f=FCr Informatik
> Tel: +49 761-203-8171 Fax: +49 761-203-8162
> e-mail: hermann@informatik.uni-freiburg.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364274a0e951250492abc7aa--

From java-user-return-47518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 18:21:47 2010
Return-Path: <java-user-return-47518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13898 invoked from network); 15 Oct 2010 18:21:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 18:21:46 -0000
Received: (qmail 32073 invoked by uid 500); 15 Oct 2010 18:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32036 invoked by uid 500); 15 Oct 2010 18:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32028 invoked by uid 99); 15 Oct 2010 18:21:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:21:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 18:21:39 +0000
Received: by qyk7 with SMTP id 7so2032491qyk.14
        for <java-user@lucene.apache.org>; Fri, 15 Oct 2010 11:21:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=boEFHb3LtMM4nvZq27vmnEuEFP5NW2dvh9K3iYvWd44=;
        b=Cj/ADXDbYsMA5DQxh+b0l9I0wVvATXn/8/gY6zoobjuBWJy/u1/FMSgKQw2X9ir5AS
         yqU3PkRWTfkRXOtDPNS4t6Hpr2guhWk42AbNfFvrh3fStl6+WYYe3Ec5qHABIPrNXPN6
         8z9r2na3pmzgW3oFbxde1jGfqkfqS5wUDKdSw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aerWd/B60KqeRcAR+qWGTGYokRa4cK7SZEwswt+4f69gTqn3FCaMM1JpN2o8O7ICJ+
         ygfoLaPmOVDieMiDeLxt6aw5xQ80irJntvATNwyar2V3vhU8FTYvvNPT3VPuCe8bC0he
         OJ3hFuwMAdpiip8ipkCh9WcRmAMQ7/AkHkQho=
MIME-Version: 1.0
Received: by 10.229.247.15 with SMTP id ma15mr973292qcb.279.1287166878909;
 Fri, 15 Oct 2010 11:21:18 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Fri, 15 Oct 2010 11:21:18 -0700 (PDT)
In-Reply-To: <201010151815.33368.hermann@informatik.uni-freiburg.de>
References: <201010151815.33368.hermann@informatik.uni-freiburg.de>
Date: Fri, 15 Oct 2010 14:21:18 -0400
Message-ID: <AANLkTikQi+t39F5kxohNX_1bz3WPFVURiF8U1apcJPNj@mail.gmail.com>
Subject: Re: Tokenizing XML
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6470d8e9586890492abe405

--0016e6470d8e9586890492abe405
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Well, it's hard to say what "correctly" would be. Remove all
XML? Preserve attributes? Preserve tags? Put the attributes
and values into fields in the document? My point is that there's
no obviously "correct" parsing.

But if you just want to strip out all the <....>, it seems like
PatternTokenizer might work for you...

HTH
Erick

2010/10/15 Christoph Hermann <hermann@informatik.uni-freiburg.de>

> Hi,
>
> is there a Tokenizer in Lucene, that tokenizes XML correctly?
>
> I.e. that one gets from the following XML:
> <span>this is <span attr=3D"foo">example</span>text.</span>
>
> Tokens (or similar):
> <span> | this | is | <span attr=3D"foo"> | example | </span> | text. |
> </span>
>
> Or would i need to write such a Tokenizer myself?
>
> regards
> Christoph Hermann
>
> --
> Christoph Hermann
> Institut f=FCr Informatik
> Tel: +49 761-203-8171 Fax: +49 761-203-8162
> e-mail: hermann@informatik.uni-freiburg.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6470d8e9586890492abe405--

From java-user-return-47519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 15 19:23:09 2010
Return-Path: <java-user-return-47519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46680 invoked from network); 15 Oct 2010 19:23:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Oct 2010 19:23:09 -0000
Received: (qmail 31539 invoked by uid 500); 15 Oct 2010 19:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31466 invoked by uid 500); 15 Oct 2010 19:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31458 invoked by uid 99); 15 Oct 2010 19:23:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 19:23:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Oct 2010 19:23:00 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P6prU-0004Hd-6s
	for java-user@lucene.apache.org; Fri, 15 Oct 2010 21:22:40 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Writing an Analyzer for storing and retrieving a payload (was: Storing additional Metadata with Fields)
Date: Fri, 15 Oct 2010 21:22:35 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <201010141443.41973.hermann@informatik.uni-freiburg.de> <201010151613.39497.hermann@informatik.uni-freiburg.de> <AANLkTimfHpRp9Pp2kd21mKoYEJxb26w0RYkVN_T38gzJ@mail.gmail.com>
In-Reply-To: <AANLkTimfHpRp9Pp2kd21mKoYEJxb26w0RYkVN_T38gzJ@mail.gmail.com>
Organization: =?iso-8859-15?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010152122.35329.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Am Freitag, 15. Oktober 2010, 20:13:17 schrieb Erick Erickson:

Hello,

> Have you seen:
> http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payl=
oa
> ds/

Sure. There is also
http://www.lucidimagination.com/blog/2010/04/18/refresh-getting-started-wit=
h-
payloads/
http://sujitpal.blogspot.com/2010/10/custom-scoring-with-lucene-payloads.ht=
ml
and
http://lucene.grantingersoll.com/category/payloads/

to name a few

> And I don't think payloads are added unless they're specified in the term.
> And even if they are, is your index big enough to care?

Actually i think i'll be adding the payload to every term.
And currently i'm not (yet) worrying about the size, i'll think about that=
=20
later, i was just asking if there might be a better solution.

My current plan is to implement a TokenFilter that identifies some of the=20
tokens as Payload-Bytes, reads the Paylod from there and assigns it to the=
=20
following tokens until a new Payload-Bytes-Token is found.

So instead of only
doc.add(new Field("contents", "this is the value", ...));

i would do
byte[] payload =3D getCurrentPayload();
doc.add(new Field("contents", payload, ...));
doc.add(new Field("contents", "this is the value", ...));

Then in the Analyzer i can identify the payload (i.e. by the first one, two=
=20
bytes), decode the payload and use it for further tokens.

Anything wrong with that approach?

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 05:53:08 2010
Return-Path: <java-user-return-47520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50714 invoked from network); 16 Oct 2010 05:53:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 05:53:08 -0000
Received: (qmail 65327 invoked by uid 500); 16 Oct 2010 05:53:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64954 invoked by uid 500); 16 Oct 2010 05:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 22745 invoked by uid 99); 15 Oct 2010 23:51:43 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of barhen.dan@gmail.com)
Date: Fri, 15 Oct 2010 16:51:17 -0700 (PDT)
From: APOLO_11 <barhen.dan@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1287186677922-1712290.post@n3.nabble.com>
Subject: API that return the amount of terms indexed
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


hey - is there an API that return the number of term indexed?

I found  the API return the amount of document indexed
(IndexWriter.docCount) but cant find an API 
for the amount of terms in the index.

any idea ?

thanks,d.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/API-that-return-the-amount-of-terms-indexed-tp1712290p1712290.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 09:17:24 2010
Return-Path: <java-user-return-47521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8013 invoked from network); 16 Oct 2010 09:17:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 09:17:24 -0000
Received: (qmail 49740 invoked by uid 500); 16 Oct 2010 09:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49137 invoked by uid 500); 16 Oct 2010 09:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49118 invoked by uid 99); 16 Oct 2010 09:17:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 09:17:17 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 09:17:12 +0000
Received: by wyb36 with SMTP id 36so653367wyb.35
        for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 02:16:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.153.11 with SMTP id i11mr2072149wbw.150.1287220596397;
 Sat, 16 Oct 2010 02:16:36 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Sat, 16 Oct 2010 02:16:36 -0700 (PDT)
In-Reply-To: <1287186677922-1712290.post@n3.nabble.com>
References: <1287186677922-1712290.post@n3.nabble.com>
Date: Sat, 16 Oct 2010 05:16:36 -0400
Message-ID: <AANLkTik8UOgc7hhm6w2GHFMn50NS_3d9hhsUd7V-UQAT@mail.gmail.com>
Subject: Re: API that return the amount of terms indexed
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

4.0 will have an API to get the number of unique terms for a given
field, or across all fields, but only at the segment level.  (Getting
the count across segments requires a merge sort).

3.x and before doesn't have such an API, though the information is
tracked under the hood.  If you open the _X.tis file, skip the first
int, then call readLong(), that should be the number of unique terms
in that segment.

You can always simply fallback to getting the term enum and stepping
counting how many .next()'s there are until exhaustion...

Mike

On Fri, Oct 15, 2010 at 7:51 PM, APOLO_11 <barhen.dan@gmail.com> wrote:
>
> hey - is there an API that return the number of term indexed?
>
> I found =A0the API return the amount of document indexed
> (IndexWriter.docCount) but cant find an API
> for the amount of terms in the index.
>
> any idea ?
>
> thanks,d.
> --
> View this message in context: http://lucene.472066.n3.nabble.com/API-that=
-return-the-amount-of-terms-indexed-tp1712290p1712290.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 09:51:58 2010
Return-Path: <java-user-return-47522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14695 invoked from network); 16 Oct 2010 09:51:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 09:51:58 -0000
Received: (qmail 69133 invoked by uid 500); 16 Oct 2010 09:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68954 invoked by uid 500); 16 Oct 2010 09:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68946 invoked by uid 99); 16 Oct 2010 09:51:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 09:51:52 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 09:51:45 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 63F5D45F76B
	for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 11:51:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id duHPFwNwxXg8 for <java-user@lucene.apache.org>;
	Sat, 16 Oct 2010 11:51:12 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 0318045F767
	for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 11:51:11 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1287186677922-1712290.post@n3.nabble.com> <AANLkTik8UOgc7hhm6w2GHFMn50NS_3d9hhsUd7V-UQAT@mail.gmail.com>
In-Reply-To: <AANLkTik8UOgc7hhm6w2GHFMn50NS_3d9hhsUd7V-UQAT@mail.gmail.com>
Subject: RE: API that return the amount of terms indexed
Date: Sat, 16 Oct 2010 11:52:01 +0200
Message-ID: <003e01cb6d17$c813d750$583b85f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGeLOP7ZnnJXdTuw2JGbPo6atlVOQIQeWGBk41RTwA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

As far as I know, 3.0 also has this method:
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/index/Inde=
xRe
ader.html#getUniqueTermCount()

But it also only works on segment level, too! So you have to use
getSequentialSubReaders/ReaderUtil.gatherSubReaders() and do it per =
segment.
But to get the unique count for the whole index, there is no way around
iterating every term, as duplicates must be removed (which TermEnum =
does).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Saturday, October 16, 2010 11:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: API that return the amount of terms indexed
>=20
> 4.0 will have an API to get the number of unique terms for a given =
field,
or
> across all fields, but only at the segment level.  (Getting the count
across
> segments requires a merge sort).
>=20
> 3.x and before doesn't have such an API, though the information is =
tracked
> under the hood.  If you open the _X.tis file, skip the first int, then
call
> readLong(), that should be the number of unique terms in that segment.
>=20
> You can always simply fallback to getting the term enum and stepping
counting
> how many .next()'s there are until exhaustion...
>=20
> Mike
>=20
> On Fri, Oct 15, 2010 at 7:51 PM, APOLO_11 <barhen.dan@gmail.com> =
wrote:
> >
> > hey - is there an API that return the number of term indexed?
> >
> > I found =A0the API return the amount of document indexed
> > (IndexWriter.docCount) but cant find an API for the amount of terms =
in
> > the index.
> >
> > any idea ?
> >
> > thanks,d.
> > --
> > View this message in context:
> > =
http://lucene.472066.n3.nabble.com/API-that-return-the-amount-of-terms
> > -indexed-tp1712290p1712290.html Sent from the Lucene - Java Users
> > mailing list archive at Nabble.com.
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 10:16:57 2010
Return-Path: <java-user-return-47523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24038 invoked from network); 16 Oct 2010 10:16:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 10:16:57 -0000
Received: (qmail 78878 invoked by uid 500); 16 Oct 2010 10:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78513 invoked by uid 500); 16 Oct 2010 10:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78505 invoked by uid 99); 16 Oct 2010 10:16:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 10:16:50 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 10:16:44 +0000
Received: by wyb36 with SMTP id 36so689019wyb.35
        for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 03:16:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.93.9 with SMTP id k9mr2026520wef.89.1287224183607; Sat, 16
 Oct 2010 03:16:23 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Sat, 16 Oct 2010 03:16:23 -0700 (PDT)
In-Reply-To: <003e01cb6d17$c813d750$583b85f0$@thetaphi.de>
References: <1287186677922-1712290.post@n3.nabble.com>
	<AANLkTik8UOgc7hhm6w2GHFMn50NS_3d9hhsUd7V-UQAT@mail.gmail.com>
	<003e01cb6d17$c813d750$583b85f0$@thetaphi.de>
Date: Sat, 16 Oct 2010 06:16:23 -0400
Message-ID: <AANLkTi=HNDsGLZXWySWuhdHNASErNm_6=fxAdvLZbxkU@mail.gmail.com>
Subject: Re: API that return the amount of terms indexed
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ahh!  You are right, we did expose this before 4.0.

But yes it has the same requirement -- it only works on a SegmentReader.

Mike

On Sat, Oct 16, 2010 at 5:52 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi Mike,
>
> As far as I know, 3.0 also has this method:
> http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/index/Inde=
xRe
> ader.html#getUniqueTermCount()
>
> But it also only works on segment level, too! So you have to use
> getSequentialSubReaders/ReaderUtil.gatherSubReaders() and do it per segme=
nt.
> But to get the unique count for the whole index, there is no way around
> iterating every term, as duplicates must be removed (which TermEnum does)=
.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Saturday, October 16, 2010 11:17 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: API that return the amount of terms indexed
>>
>> 4.0 will have an API to get the number of unique terms for a given field=
,
> or
>> across all fields, but only at the segment level. =A0(Getting the count
> across
>> segments requires a merge sort).
>>
>> 3.x and before doesn't have such an API, though the information is track=
ed
>> under the hood. =A0If you open the _X.tis file, skip the first int, then
> call
>> readLong(), that should be the number of unique terms in that segment.
>>
>> You can always simply fallback to getting the term enum and stepping
> counting
>> how many .next()'s there are until exhaustion...
>>
>> Mike
>>
>> On Fri, Oct 15, 2010 at 7:51 PM, APOLO_11 <barhen.dan@gmail.com> wrote:
>> >
>> > hey - is there an API that return the number of term indexed?
>> >
>> > I found =A0the API return the amount of document indexed
>> > (IndexWriter.docCount) but cant find an API for the amount of terms in
>> > the index.
>> >
>> > any idea ?
>> >
>> > thanks,d.
>> > --
>> > View this message in context:
>> > http://lucene.472066.n3.nabble.com/API-that-return-the-amount-of-terms
>> > -indexed-tp1712290p1712290.html Sent from the Lucene - Java Users
>> > mailing list archive at Nabble.com.
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 14:55:18 2010
Return-Path: <java-user-return-47524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1960 invoked from network); 16 Oct 2010 14:55:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 14:55:18 -0000
Received: (qmail 90775 invoked by uid 500); 16 Oct 2010 14:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90655 invoked by uid 500); 16 Oct 2010 14:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90647 invoked by uid 99); 16 Oct 2010 14:55:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 14:55:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 14:55:08 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P789m-0002WW-RF
	for java-user@lucene.apache.org; Sat, 16 Oct 2010 16:54:47 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: scorePayload does not get called
Date: Sat, 16 Oct 2010 16:54:38 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
Organization: =?utf-8?q?Albert-Ludwigs-Universit=C3=A4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010161654.38862.hermann@informatik.uni-freiburg.de>

Hello,

i'm trying to introduce an additional weighting using payloads.

Therefore i implemented my own Similarity class (see below) and implemented=
=20
scorePayload().

My problem is, that scorePayload() is not called during search.
On the other Hand i overwrote the tf() method and that one gets called duri=
ng=20
searching.
I am also using PayloadTermQuery, so that should make the scorePayload()=20
method get called.

Anyone has an Idea what i'm doing wrong?

=2D--------
IndexSearcher searcher =3D getIndexSearcher(dir);
searcher.setSimilarity(new MySimilarity());
Term t =3D new Term(TikaConstants.FIELD_CONTENT, SEARCHTERM);
Query q =3D new PayloadTermQuery(t, new AveragePayloadFunction());
TopDocs docs =3D searcher.search(q, 15);
=2D--------
public class MySimilarity extends DefaultSimilarity {
=09
	@Override
	public float tf(float freq) {
		System.out.println("TF");
	        return super.tf(freq);
	}
=09
	@Override
	public float scorePayload(int docID, String fieldName, int start,=20
						int end, byte[] payload, int offset,=20
						int length) {
		System.out.println("Called!");
		if (payload !=3D null) {
			float boost =3D PayloadContainer.getBoost(payload);=20
			System.out.println("Boosting: "  + boost);
			return boost;
		} else {
			return 1.0f;
		}
	}
}
=2D--------

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 15:24:25 2010
Return-Path: <java-user-return-47525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11808 invoked from network); 16 Oct 2010 15:24:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 15:24:24 -0000
Received: (qmail 16785 invoked by uid 500); 16 Oct 2010 15:24:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16718 invoked by uid 500); 16 Oct 2010 15:24:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16710 invoked by uid 99); 16 Oct 2010 15:24:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 15:24:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 15:24:15 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A535045F767
	for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 17:23:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Nxd1Z6MOnUeu for <java-user@lucene.apache.org>;
	Sat, 16 Oct 2010 17:23:44 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C467945F761
	for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 17:23:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <201010161654.38862.hermann@informatik.uni-freiburg.de>
In-Reply-To: <201010161654.38862.hermann@informatik.uni-freiburg.de>
Subject: RE: scorePayload does not get called
Date: Sat, 16 Oct 2010 17:24:33 +0200
Message-ID: <000001cb6d46$3c6d1070$b5473150$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQIrD59U7o5iGj12kib4XkKlzKAYBZKEbJzg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

scorePayload should be called *if* there is a payload on the term you =
are
searching for. If there is a payload on other terms you would not see =
it. So
PayloadTermQuery only reports payloads on exactly the passed - in term =
(not
on any other field or other term in the same field).

Additionally, the payload byte array is a generally a very large one (it
shares many payloads), so your function to calculate the boost from the
payload must respect the offset and length parameter!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Christoph Hermann [mailto:hermann@informatik.uni-freiburg.de]
> Sent: Saturday, October 16, 2010 4:55 PM
> To: java-user@lucene.apache.org
> Subject: scorePayload does not get called
>=20
> Hello,
>=20
> i'm trying to introduce an additional weighting using payloads.
>=20
> Therefore i implemented my own Similarity class (see below) and
implemented
> scorePayload().
>=20
> My problem is, that scorePayload() is not called during search.
> On the other Hand i overwrote the tf() method and that one gets called
during
> searching.
> I am also using PayloadTermQuery, so that should make the =
scorePayload()
> method get called.
>=20
> Anyone has an Idea what i'm doing wrong?
>=20
> ---------
> IndexSearcher searcher =3D getIndexSearcher(dir); =
searcher.setSimilarity(new
> MySimilarity()); Term t =3D new Term(TikaConstants.FIELD_CONTENT,
> SEARCHTERM); Query q =3D new PayloadTermQuery(t, new
> AveragePayloadFunction()); TopDocs docs =3D searcher.search(q, 15);
>=20
> ---------
> public class MySimilarity extends DefaultSimilarity {
>=20
> 	@Override
> 	public float tf(float freq) {
> 		System.out.println("TF");
> 	        return super.tf(freq);
> 	}
>=20
> 	@Override
> 	public float scorePayload(int docID, String fieldName, int start,
> 						int end, byte[] payload, int
> offset,
> 						int length) {
> 		System.out.println("Called!");
> 		if (payload !=3D null) {
> 			float boost =3D PayloadContainer.getBoost(payload);
> 			System.out.println("Boosting: "  + boost);
> 			return boost;
> 		} else {
> 			return 1.0f;
> 		}
> 	}
> }
> ---------
>=20
> regards
> Christoph Hermann
>=20
> --
> Christoph Hermann
> Institut f=FCr Informatik
> Tel: +49 761-203-8171 Fax: +49 761-203-8162
> e-mail: hermann@informatik.uni-freiburg.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 16:48:05 2010
Return-Path: <java-user-return-47526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36637 invoked from network); 16 Oct 2010 16:48:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 16:48:05 -0000
Received: (qmail 81458 invoked by uid 500); 16 Oct 2010 16:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81319 invoked by uid 500); 16 Oct 2010 16:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81311 invoked by uid 99); 16 Oct 2010 16:48:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 16:48:03 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 16:47:58 +0000
Received: by yxs7 with SMTP id 7so597398yxs.35
        for <java-user@lucene.apache.org>; Sat, 16 Oct 2010 09:47:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.111.12 with SMTP id o12mr3907044ybm.4.1287247656598; Sat,
 16 Oct 2010 09:47:36 -0700 (PDT)
Received: by 10.150.191.10 with HTTP; Sat, 16 Oct 2010 09:47:36 -0700 (PDT)
In-Reply-To: <AANLkTik3KUbBd_SYuM6oDCRaX+K3Yvm_p1tEpD2oWM34@mail.gmail.com>
References: <AANLkTi=R9itnJfGEq7fhQk=cfEQhREm-5pyyD7wn4MbV@mail.gmail.com>
	<AANLkTik3KUbBd_SYuM6oDCRaX+K3Yvm_p1tEpD2oWM34@mail.gmail.com>
Date: Sat, 16 Oct 2010 23:47:36 +0700
Message-ID: <AANLkTi=hThkMtY9ZFXvjVwgYtx3+RQ6WiOi6WHbsmH-N@mail.gmail.com>
Subject: Re: integrating RAMDirectory in FSDirectory
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On 10/13/10, Erick Erickson <erickerickson@gmail.com> wrote:
> Try IndexWrite.addIndexes. I confess that I haven't used that since
> 2.4, but I suspect it's what you want.
>

ok after I started asking around in stackoverflow regarding this
problem. someone was kind enough to give an answer. well sort of.

private int index(File indexDir, File dataDir, String suffix) throws Exception {
    RAMDirectory ramDir = new RAMDirectory();          // 1
    IndexWriter indexWriter = new IndexWriter(
            ramDir,                                    // 2
            new SimpleAnalyzer(),
            true,
            IndexWriter.MaxFieldLength.LIMITED);
    indexWriter.setUseCompoundFile(false);
    indexDirectory(indexWriter, dataDir, suffix);
    int numIndexed = indexWriter.maxDoc();
    indexWriter.optimize();
    indexWriter.close();

    Directory.copy(ramDir, FSDirectory.open(indexDir)); // 3

    return numIndexed;
}

what I am asking now is that the last line.

Directory.copy(ramDir, FSDirectory.open(indexDir)); // 3

the above line is wrong when I try to compile it, as lucene didn't
reserve any keyword "copy" in its class. so is there any workaround
this problem? what's the best solution to copy directory from
RAMDirectory to FSDirectory besides using copy? thanks.

http://stackoverflow.com/questions/3913180/how-to-integrate-ramdirectory-into-fsdirectory-in-lucene/3923914#3923914
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 18:32:01 2010
Return-Path: <java-user-return-47527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68472 invoked from network); 16 Oct 2010 18:32:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 18:32:01 -0000
Received: (qmail 46483 invoked by uid 500); 16 Oct 2010 18:31:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46420 invoked by uid 500); 16 Oct 2010 18:31:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46412 invoked by uid 99); 16 Oct 2010 18:31:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 18:31:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 18:31:51 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P7BXX-0003uZ-F6
	for java-user@lucene.apache.org; Sat, 16 Oct 2010 20:31:31 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Copying Payload from one Token to the next
Date: Sat, 16 Oct 2010 20:31:26 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010162031.26548.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

how can i copy the Payload from the current token to the following token in=
 a=20
TokenFilter?

I have implemented a TokenFilter and thought, that i could use=20
input.incrementToken() to advance the stream to the next token and just cop=
y=20
the Payload to this next token.
But the problem with this approach is, that the token automatically gets=20
consumed, so on the next run i only get the third token (and so on).

What would be the best way to copy a payload from the current token to the=
=20
following ones?

regards
Christoph Hermann

PS: Thanks Uwe for the hint regarding scorePayload. That helped me to ident=
ify=20
the problem above (the payload was not copied to all elements).

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 16 18:39:30 2010
Return-Path: <java-user-return-47528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70368 invoked from network); 16 Oct 2010 18:39:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Oct 2010 18:39:30 -0000
Received: (qmail 56593 invoked by uid 500); 16 Oct 2010 18:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56467 invoked by uid 500); 16 Oct 2010 18:39:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56459 invoked by uid 99); 16 Oct 2010 18:39:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Oct 2010 18:39:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Oct 2010 18:39:20 +0000
Received: (qmail 23666 invoked from network); 16 Oct 2010 18:38:57 -0000
Received: from unknown (109.160.158.123)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 16 Oct 2010 18:38:22 -0000
Message-ID: <4CB9F119.1010502@code972.com>
Date: Sat, 16 Oct 2010 20:38:17 +0200
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.9) Gecko/20100915 Lightning/1.0b2 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser
References: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl> <AANLkTimbD2jzqDUMOufUnt4BZSuRf9T1cu63pU46tAZJ@mail.gmail.com>
In-Reply-To: <AANLkTimbD2jzqDUMOufUnt4BZSuRf9T1cu63pU46tAZJ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  Perhaps you met this issue which I have already reported?

https://issues.apache.org/jira/browse/LUCENE-2518

Itamar.

On 14/10/2010 3:40 AM, Erick Erickson wrote:
> I'm not quite sure what you mean by "run a query against multiple fields".
> But would
> creating your own BooleanQuery where each clause was the parsed result
> against
> a specific field work?
>
> If this is irrelevant, could you give a couple of examples of what you're
> looking to
> accomplish?
>
> Best
> Erick
>
> On Wed, Oct 13, 2010 at 9:04 PM, Lev Bronshtein
> <lev_bronshtein@hotmail.com>wrote:
>
>> Hi Group,
>>
>> I have an isue when using MultiFieldQueryParser, I would like to use one
>> query against a number of fields however I get an
>> java.lang.IllegalArgumentException: queries.length != fields.length
>>
>> Looked at the javadoc, and it looks like the only way to run one query
>> against multiple fields is to define flags for every field
>> See http://lucene.apache.org/java/3_0_2/api/all/index.html, the very last
>> parse method.  All I really want to do is just run a query against multiple
>> fields, is there a simple way?
>>
>> Regards,
>>
>> Lev Bronshtein
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 07:17:32 2010
Return-Path: <java-user-return-47529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36895 invoked from network); 17 Oct 2010 07:17:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 07:17:32 -0000
Received: (qmail 40591 invoked by uid 500); 17 Oct 2010 07:17:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40117 invoked by uid 500); 17 Oct 2010 07:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40109 invoked by uid 99); 17 Oct 2010 07:17:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 07:17:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mabdelkader@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 07:17:18 +0000
Received: by iwn3 with SMTP id 3so3331146iwn.35
        for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 00:16:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=zk/Wih/s7IgCcYcH/4qp6PEQWmJVi1d00WbyNVrbXGw=;
        b=nv5avg7KjX1QGxtIH+RG4Fsx6qpVhDSG4aRfd6ejK4uvRDs7AijI9tqAT1WuJCqc+L
         ODyP+evKj5oC/c+eHQw2zSN3LahYGCdPD4Tlu3+737CEs/pw++11NhMKonYLkmPhGkS+
         Z/V4JN8eLvEV6EPhcnLzLgnkGUQwjCvNAxSXc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=eFf+nHC9E0+Adv+hxDlrenK/pKGHfj65q7DdsEWBujymTdXJ5Vzu0p70q+31RJ63wr
         n8CwVxbLnijL8itVk3Y0bCLSk437d9s1qbvMuGALndr9VXTRdcZAjXggBFNJVrFB8fTY
         olGsmEBVQm1mc3fviW3UUROkXnOHJytvViP4Q=
Received: by 10.231.167.130 with SMTP id q2mr211168iby.163.1287299808555; Sun,
 17 Oct 2010 00:16:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.20.75 with HTTP; Sun, 17 Oct 2010 00:16:28 -0700 (PDT)
From: Mahmoud Abdelkader <mabdelkader@gmail.com>
Date: Sun, 17 Oct 2010 00:16:28 -0700
Message-ID: <AANLkTintNMosQXmBydYn8z+iPoWesuWACm5Mh2A6x8-C@mail.gmail.com>
Subject: Does Lucene compress postings (or posting lists) in its inverted index?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450143ddcef2d30492cad796
X-Virus-Checked: Checked by ClamAV on apache.org

--0050450143ddcef2d30492cad796
Content-Type: text/plain; charset=ISO-8859-1

Hello,

We're currently evaluating utilizing Lucene to index a large English corpus
and we were are optimizing for space. We're basically concerned that the
size of the postings lists will become extremely large. Does Lucene provide
some kind of compression for the generated posting lists within the index?
If not, is there a way to force Lucene do this?

Thanks for the help in advance,
Mahmoud

--0050450143ddcef2d30492cad796--

From java-user-return-47530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 08:00:20 2010
Return-Path: <java-user-return-47530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40743 invoked from network); 17 Oct 2010 08:00:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 08:00:20 -0000
Received: (qmail 56129 invoked by uid 500); 17 Oct 2010 08:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56015 invoked by uid 500); 17 Oct 2010 08:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56006 invoked by uid 99); 17 Oct 2010 08:00:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 08:00:13 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 08:00:08 +0000
Received: by qwg8 with SMTP id 8so155939qwg.35
        for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 00:59:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=rb+pD6cpgpbV9Xkn+F4epwsPj80ZIgq0meyvUjs+kHw=;
        b=qmJyVuaUD9MREbVa+KppNgFqDFwuLdQkSRwDE9u3WiaHlpchcH7KOy1qn2rZSqju2V
         6cAmL1X0yy9VCWjXMJSmq2E6h+0jRbS0MH9qxAWA+81xWqCH95z37/BuWHUoiIqwNoqk
         1L/EDeClyAGSN1Iiv0GEi7kqpDyena+P506dY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=yHIghhpQ4P0MA2rwFbOeGI2AYNgIWYSQ382/BXEJu0bkHLnplHDPZMu8BN4x8gUcba
         GmwZShy1tbyb5eFoRGT1qLRSu6ls/os4eJJs2k6w7bf8MVO5m4BzcijOGU19x8wVqoF5
         UrlAuURPz8mVlduETl51RqH8n7JrfBZUcz0QY=
MIME-Version: 1.0
Received: by 10.224.187.200 with SMTP id cx8mr1417904qab.29.1287302385230;
 Sun, 17 Oct 2010 00:59:45 -0700 (PDT)
Received: by 10.229.84.78 with HTTP; Sun, 17 Oct 2010 00:59:45 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTintNMosQXmBydYn8z+iPoWesuWACm5Mh2A6x8-C@mail.gmail.com>
References: <AANLkTintNMosQXmBydYn8z+iPoWesuWACm5Mh2A6x8-C@mail.gmail.com>
Date: Sun, 17 Oct 2010 09:59:45 +0200
Message-ID: <AANLkTikEXe9=BdBNztbuAUQOyq7ohq4F9mGpJY-5=Oi+@mail.gmail.com>
Subject: Re: Does Lucene compress postings (or posting lists) in its inverted index?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi Mahmoud,

On Sun, Oct 17, 2010 at 9:16 AM, Mahmoud Abdelkader
<mabdelkader@gmail.com> wrote:
> Hello,
>
> We're currently evaluating utilizing Lucene to index a large English corpus
> and we were are optimizing for space. We're basically concerned that the
> size of the postings lists will become extremely large. Does Lucene provide
> some kind of compression for the generated posting lists within the index?
> If not, is there a way to force Lucene do this?

Before you do any further investigation you should have a quick look
at the Lucene index format
(http://lucene.apache.org/java/3_0_2/fileformats.html) to get a
feeling about lucenes "standard" index format. We use some compression
techniques like delta coding, VarInt etc. in the current releases but
current trunk development might be more interesting for you. On Lucene
4.0 trunk you will be able to "plug-in" customized codecs for posting
lists, term dicts and others like stored fields (stored fields maybe
soon!). There are efforts towards implementations like PFor
(https://issues.apache.org/jira/browse/LUCENE-1410) and others coming
up (GVInt would be nice :).

You should also have a look at mikes post on PFoR
http://chbits.blogspot.com/2010/08/lucene-performance-with-pfordelta-codec.html

simon
>
> Thanks for the help in advance,
> Mahmoud
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 10:39:46 2010
Return-Path: <java-user-return-47531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73320 invoked from network); 17 Oct 2010 10:39:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 10:39:46 -0000
Received: (qmail 28930 invoked by uid 500); 17 Oct 2010 10:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28841 invoked by uid 500); 17 Oct 2010 10:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28833 invoked by uid 99); 17 Oct 2010 10:39:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 10:39:39 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 10:39:34 +0000
Received: by qyk29 with SMTP id 29so2955391qyk.14
        for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 03:39:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=n1rUSDku+tboDt7Wjw3JYMTrRK59Fa2rjMfigyJ4z6E=;
        b=I3t8h8kafDrHkO5CR4HRdqb9hj1SgoGMzxYjSma/61e5qyOVsqeRkE3Ra/H2VBeBra
         ZuPv1ufVeP2nkoMMaa6RD/iebOrt3BrBYvwT6AFm4MD9Dm4kfMfcvVofXkBcT/6wUzMM
         uZJ47a2kWxATI21HDJ6Y+DofGmbvl7f/5Nyrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=TOBkurPuklA2TvqVYGdPw0GjCyi6PDFS8XnYJCcE+k0TsvvOdBLwjnuN08uF68acK8
         Z323+mQAzkuMIdw2szzIGNIccqe5aZ1sPSg4nOeBC/h23xd4ahIhb9BAiddF4jKjIjJK
         uCHIks6mEEF8zxX0RVjIz60VaROn7LeYWJT2s=
MIME-Version: 1.0
Received: by 10.224.213.69 with SMTP id gv5mr1770638qab.152.1287311948530;
 Sun, 17 Oct 2010 03:39:08 -0700 (PDT)
Received: by 10.229.84.78 with HTTP; Sun, 17 Oct 2010 03:39:08 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>
References: <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>
Date: Sun, 17 Oct 2010 12:39:08 +0200
Message-ID: <AANLkTimhw2zJn8Pc5xT4XcdVdc-wYxjrKXfaZJPx+yvB@mail.gmail.com>
Subject: Re: MultiFieldQueryParser
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Oct 14, 2010 at 3:04 AM, Lev Bronshtein
<lev_bronshtein@hotmail.com> wrote:
>
> Hi Group,
>
> I have an isue when using MultiFieldQueryParser, I would like to use one =
query against a number of fields however I get an
> java.lang.IllegalArgumentException: queries.length !=3D fields.length
>
> Looked at the javadoc, and it looks like the only way to run one query ag=
ainst multiple fields is to define flags for every field
> See http://lucene.apache.org/java/3_0_2/api/all/index.html, the very last=
 parse method.=C2=A0 All I really want to do is just run a query against mu=
ltiple fields, is there a simple way?

Why don't you use the parse method without the flags?

  public static Query parse(Version matchVersion, String[] queries,
String[] fields,
      Analyzer analyzer) throws ParseException

simon
>
> Regards,
>
> Lev Bronshtein
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 17:36:03 2010
Return-Path: <java-user-return-47532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83168 invoked from network); 17 Oct 2010 17:36:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 17:36:03 -0000
Received: (qmail 61707 invoked by uid 500); 17 Oct 2010 17:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61651 invoked by uid 500); 17 Oct 2010 17:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61643 invoked by uid 99); 17 Oct 2010 17:36:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 17:36:00 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.15] (HELO web52905.mail.re2.yahoo.com) (206.190.49.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 17 Oct 2010 17:35:54 +0000
Received: (qmail 13108 invoked by uid 60001); 17 Oct 2010 17:35:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1287336933; bh=cKx1LKPoqDUPvQRv6GsAZ85a+4QAgeRhw8D023i2PIc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=d/IuByYtuq/TRULnNppGw4yTXCuJz1I2rT2WJsCRo0XtE0/Mirs8+en7FcV4b+BOkQvFI/E3o1rxuE/gDUyS+jdpx3sw900C7lGaYYj58lvhIDl0LhONlu0rFKlfHb+8Eujli1fJJ/UfFd0xxXVuPwcJ0S9TfDj4NK6rY5mJL/4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XP7HPQWsVcGMP2tgJUOLLpOy1GwqGJjB+0vu1APEAhggfL9XaXIC9li+HqITOsfS2PBMdsVXbaUt8OP5dnF2EC/4AVjzEph5BDGEBRpchYpmmWdeRCgg0cS2LCGAQrXuiD47mJPwLK/UUfTZjJnFHBOXsrxu6/9iw1PKtpT4dnQ=;
Message-ID: <283529.99287.qm@web52905.mail.re2.yahoo.com>
X-YMail-OSG: URRvxcEVM1kktXDLlDkyb.z5kH9kwAVbYhC9J8q8e_qwF4i
 osJd6fZS12UW8jlT08bmCvQ_wZZ3XIXoMStZKmMlJ9y7XaItO38H.0UBamP4
 0lAZQzfRVZtwM5Qg8qYT3hhwHQVDObt9nAXYHMGrPvX2Timmp5am6pZmAyWB
 coeKKl_Md0N1_yV76bo90w97A2p3kVTmynMFzSLKPslgPoydey78QOurWL8q
 cJVLMNKbX9Sj3wUFpHvE7N23lamYENR7am68nrpKAYW1cxjrClg19kL92qjG
 au9AjgPp6FadfM95yotOxv3rip5swY1a_ZZjlxOrmj21HYk_0O4Nsr3RmTT8
 -
Received: from [195.205.86.50] by web52905.mail.re2.yahoo.com via HTTP; Sun, 17 Oct 2010 10:35:33 PDT
X-Mailer: YahooMailClassic/11.4.9 YahooMailWebService/0.8.106.282862
Date: Sun, 17 Oct 2010 10:35:33 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Copying Payload from one Token to the next
To: java-user@lucene.apache.org
In-Reply-To: <201010162031.26548.hermann@informatik.uni-freiburg.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

org.apache.solr.analysis.BufferedTokenStream.java (that can peek n tokens a=
head in the buffered input stream, without modifying the stream) and Common=
GramsFilter.java may help.=0A=0A--- On Sat, 10/16/10, Christoph Hermann <he=
rmann@informatik.uni-freiburg.de> wrote:=0A=0A> From: Christoph Hermann <he=
rmann@informatik.uni-freiburg.de>=0A> Subject: Copying Payload from one Tok=
en to the next=0A> To: java-user@lucene.apache.org=0A> Date: Saturday, Octo=
ber 16, 2010, 9:31 PM=0A> Hello,=0A> =0A> how can i copy the Payload from t=
he current token to the=0A> following token in a =0A> TokenFilter?=0A> =0A>=
 I have implemented a TokenFilter and thought, that i could=0A> use =0A> in=
put.incrementToken() to advance the stream to the next=0A> token and just c=
opy =0A> the Payload to this next token.=0A> But the problem with this appr=
oach is, that the token=0A> automatically gets =0A> consumed, so on the nex=
t run i only get the third token=0A> (and so on).=0A> =0A> What would be th=
e best way to copy a payload from the=0A> current token to the =0A> followi=
ng ones?=0A> =0A> regards=0A> Christoph Hermann=0A> =0A> PS: Thanks Uwe for=
 the hint regarding scorePayload. That=0A> helped me to identify =0A> the p=
roblem above (the payload was not copied to all=0A> elements).=0A> =0A> -- =
=0A> Christoph Hermann=0A> Institut f=FCr Informatik=0A> Tel: +49 761-203-8=
171 Fax: +49 761-203-8162=0A> e-mail: hermann@informatik.uni-freiburg.de=0A=
> =0A> --------------------------------------------------------------------=
-=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 18:03:35 2010
Return-Path: <java-user-return-47533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87966 invoked from network); 17 Oct 2010 18:03:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 18:03:35 -0000
Received: (qmail 74213 invoked by uid 500); 17 Oct 2010 18:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74127 invoked by uid 500); 17 Oct 2010 18:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74119 invoked by uid 99); 17 Oct 2010 18:03:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 18:03:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 18:03:26 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1P7XZY-00046N-NL
	for java-user@lucene.apache.org; Sun, 17 Oct 2010 20:03:04 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Copying Payload from one Token to the next
Date: Sun, 17 Oct 2010 20:02:58 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <283529.99287.qm@web52905.mail.re2.yahoo.com>
In-Reply-To: <283529.99287.qm@web52905.mail.re2.yahoo.com>
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201010172002.58386.hermann@informatik.uni-freiburg.de>

Am Sonntag, 17. Oktober 2010, 19:35:33 schrieb Ahmet Arslan:

Hello,

> > how can i copy the Payload from the current token to the
> > following token in a
> > TokenFilter?

> org.apache.solr.analysis.BufferedTokenStream.java (that can peek n tokens
> ahead in the buffered input stream, without modifying the stream) and
> CommonGramsFilter.java may help.

Thanks for the hint i'll have a look if that allows me to improve my soluti=
on.

Anyway i found out what my problem was: For every Field() a "fresh" Analyze=
r=20
is used (makes sense, since it allows to use a different Analyzer for every=
=20
field). So that was the reason i could not transfer the Payload using a mem=
ber=20
variable in the Tokenfilter.

My current solution is to concatenate the Field() contents before adding a=
=20
=46ield() to the document. This way i can pass the payload from one token t=
o the=20
next. That also solved my problem with scorePayload earlier, since now ever=
y=20
token has its payload.

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 18:37:24 2010
Return-Path: <java-user-return-47534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4838 invoked from network); 17 Oct 2010 18:37:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 18:37:24 -0000
Received: (qmail 92821 invoked by uid 500); 17 Oct 2010 18:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92769 invoked by uid 500); 17 Oct 2010 18:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92761 invoked by uid 99); 17 Oct 2010 18:37:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 18:37:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 18:37:13 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id EB9193670804
	for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 14:36:42 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id K+Lfg2rnXiBD for <java-user@lucene.apache.org>;
	Sun, 17 Oct 2010 14:36:42 -0400 (EDT)
Received: from [192.168.0.8] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id B9832367056A
	for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 14:36:41 -0400 (EDT)
Message-ID: <4CBB40D3.3080808@ifactory.com>
Date: Sun, 17 Oct 2010 14:30:43 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: proposed change to CharTokenizer
References: <4CB72AE2.7050701@ifactory.com>
In-Reply-To: <4CB72AE2.7050701@ifactory.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

  OK - no responses to this, but in case you were curious...the patch I 
suggested won't work - so please don't install it :)

In the end I was able to get the behavior I wanted by fiddling with 
offsets in my CharFilter, but it requires detecting token boundaries in 
the CharFilter stage, which seems like abstraction leekage to me.  Maybe 
there's a better way?

-Mike

On 10/14/2010 12:08 PM, Mike Sokolov wrote:
> Background: I've been trying to enable hit highlighting of XML 
> documents in such a way that the highlighting preserves the 
> well-formedness of the XML.
>
> I thought I could get this to work by implementing a CharFilter that 
> extracts text from XML (somewhat like HTMLStripCharFilter, except I am 
> using an XML parser - however I think the concept is also applicable 
> to HTMLStripCharFilter) while preserving the offsets of the text in 
> the original XML document so as to enable highlighting.
>
> I ran into a problem in CharTokenizer.incrementToken(), which calls 
> correctOffset() as follows:
>
>     offsetAtt.setOffset(correctOffset(start), 
> correctOffset(start+length));
>
> The issue is that the end offset is computed as the offset of the 
> beginning of the *next* block of text rather than the offset of the 
> end of *this* block of text.
>
> In my test case:
>
> <p><b>bold text</b> regular text</p>
>
> I get tokens like this ([] showing token boundaries):
>
>                [bold] [text</b>][regular][text</p>]
>
> instead of:
>
>                [bold][text][regular][text]
>
> I don't think this problem can be fixed by jiggling offsets, or indeed 
> by wrapping or extending CharTokenizer in any straightforward way.  
> The fix I found is to change the line in 
> CharTokenizer.incrementToken() to:
>
>     offsetAtt.setOffset(correctOffset(start), 
> correctOffset(start+length-1)+1);
>
> Again, conceptually, this computes the corrected offset of the last 
> character in the token, and then marks the end of the token as the 
> immediately following position, rather than including all the garbage 
> characters in between the end of this token and the beginning of the 
> next.
>
> My impression is that this change should be completely 
> backwards-compatible since its behavior will be identical for 
> CharFilters that don't actually perform character deletion, and AFAICT 
> the only existing CharFilter performs replacements and expansions (of 
> ligatures and the like).  But my knowledge of Lucene is far from 
> comprehensive.
> Does this seem like a reasonable patch?
>
> -Mike
>
> Michael Sokolov
> Engineering Director
> www.ifactory.com
> @iFactoryBoston
>
> PubFactory: the revolutionary e-publishing platform from iFactory
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 19:52:58 2010
Return-Path: <java-user-return-47535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23670 invoked from network); 17 Oct 2010 19:52:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 19:52:58 -0000
Received: (qmail 42901 invoked by uid 500); 17 Oct 2010 19:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42825 invoked by uid 500); 17 Oct 2010 19:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42817 invoked by uid 99); 17 Oct 2010 19:52:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 19:52:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lev_bronshtein@hotmail.com designates 65.55.34.85 as permitted sender)
Received: from [65.55.34.85] (HELO col0-omc2-s11.col0.hotmail.com) (65.55.34.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 19:52:46 +0000
Received: from COL118-W61 ([65.55.34.73]) by col0-omc2-s11.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Sun, 17 Oct 2010 12:52:25 -0700
Message-ID: <COL118-W61A92CD4ECB13B76F019CFF3590@phx.gbl>
X-Originating-IP: [96.224.227.191]
From: Lev Bronshtein <lev_bronshtein@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: MultiFieldQueryParser
Date: Sun, 17 Oct 2010 15:52:24 -0400
Importance: Normal
In-Reply-To: <AANLkTimhw2zJn8Pc5xT4XcdVdc-wYxjrKXfaZJPx+yvB@mail.gmail.com>
References:
 <COL118-W223BA9A1E59BCF21FD85B4F3560@phx.gbl>,<AANLkTimhw2zJn8Pc5xT4XcdVdc-wYxjrKXfaZJPx+yvB@mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 17 Oct 2010 19:52:25.0181 (UTC) FILETIME=[D21000D0:01CB6E34]
X-Virus-Checked: Checked by ClamAV on apache.org



>
> Why don't you use the parse method without the flags?
>
> public static Query parse(Version matchVersion=2C String[] queries=2C
> String[] fields=2C
> Analyzer analyzer) throws ParseException
>

Thank you for the suggestion Simon.=20

However the point is that I want to apply one query as opposed to queries[]=
 to fields[].=A0 So if all I have is one query and 30 fields I wil have to =
create a query[30] array and copy the same value over and over I presume.=
=A0 I solved that problem exactly the same way but with fields=2C I took on=
e value SHOULD and repliacated that.=A0 The issue is not feasability=2C but=
 just the kludginess of doing something like that.=A0=20

Regards=2C

Lev Bronshtein
 		 	   		  =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 17 20:31:47 2010
Return-Path: <java-user-return-47536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33120 invoked from network); 17 Oct 2010 20:31:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Oct 2010 20:31:47 -0000
Received: (qmail 54655 invoked by uid 500); 17 Oct 2010 20:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54472 invoked by uid 500); 17 Oct 2010 20:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54464 invoked by uid 99); 17 Oct 2010 20:31:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 20:31:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Oct 2010 20:31:36 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 83816318FC
	for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 22:31:13 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 6CAD431857
	for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 22:31:13 +0200 (CEST)
Received: from [192.168.3.106] (5400722B.dsl.pool.telekom.hu [84.0.114.43])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 38B773111D
	for <java-user@lucene.apache.org>; Sun, 17 Oct 2010 22:31:13 +0200 (CEST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Does Lucene compress postings (or posting lists) in its inverted index?
From: Paul Libbrecht <paul@activemath.org>
In-Reply-To: <AANLkTintNMosQXmBydYn8z+iPoWesuWACm5Mh2A6x8-C@mail.gmail.com>
Date: Sun, 17 Oct 2010 22:31:11 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <0FF654C3-E534-4EBF-AE57-2AA1EE23991E@activemath.org>
References: <AANLkTintNMosQXmBydYn8z+iPoWesuWACm5Mh2A6x8-C@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)

Mahmoud,

Lucene's documents' fields can be, when stored, compressed on disk. I =
think that answers your question.

paul


On 17 oct. 2010, at 09:16, Mahmoud Abdelkader wrote:

> Hello,
>=20
> We're currently evaluating utilizing Lucene to index a large English =
corpus
> and we were are optimizing for space. We're basically concerned that =
the
> size of the postings lists will become extremely large. Does Lucene =
provide
> some kind of compression for the generated posting lists within the =
index?
> If not, is there a way to force Lucene do this?
>=20
> Thanks for the help in advance,
> Mahmoud


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 08:00:11 2010
Return-Path: <java-user-return-47537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30775 invoked from network); 18 Oct 2010 08:00:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 08:00:11 -0000
Received: (qmail 11059 invoked by uid 500); 18 Oct 2010 08:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10814 invoked by uid 500); 18 Oct 2010 08:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10805 invoked by uid 99); 18 Oct 2010 08:00:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 08:00:03 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonyjoseph89@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 07:59:55 +0000
Received: by ewy28 with SMTP id 28so463943ewy.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 00:59:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=d6dZRHBvYCNqvyDYhfrgnSh2s8kP6M537g8Xf3NXDqo=;
        b=vrcVoTHiMeN64Sw0zrdhmHqEIHBXKMnbcrwcxFlIaqDYUv985X/XZnbWs8gf8c8onH
         ueX1eXMTMHd2w9eo5SMANF/bXvFVWUPnkTJDcpVRb+I6weK04MekYf6ELEa3cjXU8A9+
         BelEfRId4tIdJs8ctd7GcRR3rlITC5s8xt4Yk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tbTnpsMvYe2BCDA/Oo3kB/yPq25d6UXT9/CEF/qVV7Jns0Za2MYx3I/aThSTUDQkcz
         OnK/6FDpsZjTo+qP3xCZ1Vyg2Tbf0EcyAD1UXw3oZx0HyIsVmFwe+vWPgayD4/6yVhdG
         DvL5nk5JmZO69EUbVGsnAwJXXdMR4dYPds3MA=
MIME-Version: 1.0
Received: by 10.213.105.78 with SMTP id s14mr3054715ebo.62.1287388773401; Mon,
 18 Oct 2010 00:59:33 -0700 (PDT)
Received: by 10.213.3.1 with HTTP; Mon, 18 Oct 2010 00:59:33 -0700 (PDT)
Date: Mon, 18 Oct 2010 13:29:33 +0530
Message-ID: <AANLkTi=DHYWzwRT5gwLTBXRJiC+E1qH-U==FfODynbm_@mail.gmail.com>
Subject: java.lang.OutOfMemoryError: Java heap space error crashed my application.
From: Antony Joseph <antonyjoseph89@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c383486c5220492df8e8d

--0015174c383486c5220492df8e8d
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I got this java.lang.OutOfMemoryError: Java heap space error on searching
and also it crashed my application [Python.exe].

Its an long running web application say 24X7, I created two separate threads
for indexing and searching.

I close my IndexWriter and IndexSearcher at the end of every 1000 docs get
added in the index.

When i start my application i do searching without any errors but after one
or two day if i do the same search i got  java.lang.OutOfMemoryError and
apps get crashed by java.

Is there any memory leaks in my app? or should i increase my JVM memory
size?

Please help me .

Thanks
Antony


*Settings*:

VM Arguments:
jvm_args: -Xms32m -Xmx1024m

*System:*

Python 2.5.1

Lucene 2.4.1

OS:squeeze/sid
uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:04:26 UTC 2009
i686
libc:glibc 2.10.1 NPTL 2.10.1
rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity
load average:4.19 2.49 1.88
CPU:total 8 (2 cores per cpu, 2 threads per core) family 15 model 6 stepping
4, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ht
Memory: 4k page, physical 3096484k(92904k free), swap 7812492k(7682632k
free)
vm_info: Java HotSpot(TM) Client VM (16.3-b01) for linux-x86 JRE
(1.6.0_20-b02), built on Apr 12 2010 14:15:08 by "java_re" with gcc 3.2.1-7a
(J2SE release)

*Index :*
*_8osa.cfs                          41.19  GB
_8osb.cfs                             2.38 GB
segments.gen                      0.01 KB
segments_7thj                     0.09 kB


crash report**:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0157d2e0, pid=9541, tid=93391728
#
# JRE version: 6.0_20-b02
# Java VM: Java HotSpot(TM) Client VM (16.3-b01 mixed mode, sharing
linux-x86 )
# Problematic frame:
# C  [_lucene.so+0x5882e0]  _ZN6JCCEnv15deleteGlobalRefEP8_jobjecti+0x170
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread is native thread

siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR),
si_addr=0x00000000

Registers:
EAX=0x00000000, EBX=0x016e5ff4, ECX=0x0a417f20, EDX=0x00000002
ESP=0x0590f0b0, EBP=0x0590f0e8, ESI=0xb4204814, EDI=0x481f0fd8
EIP=0x0157d2e0, CR2=0x00000000, EFLAGS=0x00210246

Top of Stack: (sp=0x0590f0b0)
0x0590f0b0:   00000002 0a417f20 0a417f20 0590f0d0
0x0590f0c0:   00000000 ffffffff 0a417f20 00000188
0x0590f0d0:   aaf00010 0035aff4 016e23c8 016e5ff4
0x0590f0e0:   00000000 9d879080 0590f128 01220dcc
0x0590f0f0:   b42047f8 0a417f20 00321faa 08079bc6
0x0590f100:   9fd4d860 0a417f20 aaf00010 00000001
0x0590f110:   016ddb70 00000000 00000000 09cb3d84
0x0590f120:   00000015 00000000 0590f168 0810f75b

Instructions: (pc=0x0157d2e0)
0x0157d2d0:   8b 00 89 55 e0 89 04 24 e8 83 d4 bc ff 8b 4d e0
0x0157d2e0:   8b 10 89 4c 24 04 89 04 24 ff 52 58 89 74 24 04

Stack: [0x05110000,0x05911000],  sp=0x0590f0b0,  free space=1ffc0590ea40k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
code)
C  [_lucene.so+0x5882e0]  _ZN6JCCEnv15deleteGlobalRefEP8_jobjecti+0x170
C  [_lucene.so+0x22bdcc]
C  [python2.5+0xc775b]
C  [python2.5+0xab2de]
C  [python2.5+0xab8eb]  _PyObject_GC_Malloc+0xcb
C  [python2.5+0xab955]  _PyObject_GC_New+0x15
C  [python2.5+0xc10e6]  PyCell_New+0x16
C  [python2.5+0x84e14]  PyEval_EvalCodeEx+0x6c4
C  [python2.5+0x83506]  PyEval_EvalFrameEx+0x4476
C  [python2.5+0x84e7c]  PyEval_EvalCodeEx+0x72c
C  [python2.5+0x83506]  PyEval_EvalFrameEx+0x4476
C  [python2.5+0xc6d4f]
C  [python2.5+0x341a6]
C  [python2.5+0x346ac]
C  [python2.5+0x61f99]
C  [python2.5+0x15367]  PyObject_Call+0x27
C  [python2.5+0x8322b]  PyEval_EvalFrameEx+0x419b
C  [python2.5+0x84e7c]  PyEval_EvalCodeEx+0x72c
C  [python2.5+0xc909e]
C  [python2.5+0x15367]  PyObject_Call+0x27
C  [python2.5+0x1bf5c]
C  [python2.5+0x15367]  PyObject_Call+0x27
C  [python2.5+0x5d149]
C  [python2.5+0x5d960]
C  [python2.5+0x82e33]  PyEval_EvalFrameEx+0x3da3
C  [python2.5+0x84685]  PyEval_EvalFrameEx+0x55f5
C  [python2.5+0x84685]  PyEval_EvalFrameEx+0x55f5
C  [python2.5+0x84685]  PyEval_EvalFrameEx+0x55f5
C  [python2.5+0x84685]  PyEval_EvalFrameEx+0x55f5
C  [python2.5+0x84e7c]  PyEval_EvalCodeEx+0x72c
C  [python2.5+0xc909e]
C  [python2.5+0x15367]  PyObject_Call+0x27
C  [python2.5+0x1bf5c]
C  [python2.5+0x15367]  PyObject_Call+0x27
C  [python2.5+0x7e0ac]  PyEval_CallObjectWithKeywords+0x6c
C  [python2.5+0xac288]
C  [libpthread.so.0+0x580e]


---------------  P R O C E S S  ---------------

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 314560K, used 166541K [0x4ed40000, 0x64290000,
0x64290000)
  eden space 279616K,  59% used [0x4ed40000, 0x58fe3588, 0x5fe50000)
  from space 34944K,   0% used [0x62070000, 0x62070000, 0x64290000)
  to   space 34944K,   0% used [0x5fe50000, 0x5fe50000, 0x62070000)
 tenured generation   total 699072K, used 523436K [0x64290000, 0x8ed40000,
0x8ed40000)
   the space 699072K,  74% used [0x64290000, 0x841bb148, 0x841bb200,
0x8ed40000)
 compacting perm gen  total 12288K, used 1839K [0x8ed40000, 0x8f940000,
0x92d40000)
   the space 12288K,  14% used [0x8ed40000, 0x8ef0bc60, 0x8ef0be00,
0x8f940000)
    ro space 10240K,  61% used [0x92d40000, 0x93366298, 0x93366400,
0x93740000)
    rw space 12288K,  60% used [0x93740000, 0x93e76cb8, 0x93e76e00,
0x94340000)

Dynamic libraries:
00110000-00151000 r-xp 00000000 08:02 1409241
/lib/i686/cmov/libssl.so.0.9.8
00151000-00152000 ---p 00041000 08:02 1409241
/lib/i686/cmov/libssl.so.0.9.8
00152000-00153000 r--p 00041000 08:02 1409241
/lib/i686/cmov/libssl.so.0.9.8
00153000-00156000 rw-p 00042000 08:02 1409241
/lib/i686/cmov/libssl.so.0.9.8
00156000-0015a000 r-xp 00000000 08:02 2878152
/usr/lib/python2.5/lib-dynload/strop.so
0015a000-0015b000 r--p 00004000 08:02 2878152
/usr/lib/python2.5/lib-dynload/strop.so
0015b000-0015d000 rw-p 00005000 08:02 2878152
/usr/lib/python2.5/lib-dynload/strop.so
0015d000-0015e000 r-xp 00000000 08:02 2878160
/usr/lib/python2.5/lib-dynload/_weakref.so
0015e000-0015f000 r--p 00000000 08:02 2878160
/usr/lib/python2.5/lib-dynload/_weakref.so
0015f000-00160000 rw-p 00001000 08:02 2878160
/usr/lib/python2.5/lib-dynload/_weakref.so
00160000-0016f000 r-xp 00000000 08:02 2878162
/usr/lib/python2.5/lib-dynload/datetime.so
0016f000-00170000 r--p 0000e000 08:02 2878162
/usr/lib/python2.5/lib-dynload/datetime.so
00170000-00173000 rw-p 0000f000 08:02 2878162
/usr/lib/python2.5/lib-dynload/datetime.so
00174000-0017e000 r-xp 00000000 08:02 2875818
/usr/lib/python2.5/lib-dynload/_socket.so
0017e000-0017f000 r--p 00009000 08:02 2875818
/usr/lib/python2.5/lib-dynload/_socket.so
0017f000-00182000 rw-p 0000a000 08:02 2875818
/usr/lib/python2.5/lib-dynload/_socket.so
00182000-00197000 r-xp 00000000 08:02 2878183
/usr/lib/python2.5/lib-dynload/_bsddb.so
00197000-00198000 r--p 00014000 08:02 2878183
/usr/lib/python2.5/lib-dynload/_bsddb.so
00198000-0019a000 rw-p 00015000 08:02 2878183
/usr/lib/python2.5/lib-dynload/_bsddb.so
0019a000-0019d000 r-xp 00000000 08:02 2877201
/usr/lib/python2.5/lib-dynload/math.so
0019d000-0019e000 r--p 00002000 08:02 2877201
/usr/lib/python2.5/lib-dynload/math.so
0019e000-0019f000 rw-p 00003000 08:02 2877201
/usr/lib/python2.5/lib-dynload/math.so
0019f000-001a2000 r-xp 00000000 08:02 2877198
/usr/lib/python2.5/lib-dynload/fcntl.so
001a2000-001a3000 r--p 00002000 08:02 2877198
/usr/lib/python2.5/lib-dynload/fcntl.so
001a3000-001a4000 rw-p 00003000 08:02 2877198
/usr/lib/python2.5/lib-dynload/fcntl.so
001a4000-001a6000 r-xp 00000000 08:02 2878182
/usr/lib/python2.5/lib-dynload/_hashlib.so
001a6000-001a7000 r--p 00001000 08:02 2878182
/usr/lib/python2.5/lib-dynload/_hashlib.so
001a7000-001a8000 rw-p 00002000 08:02 2878182
/usr/lib/python2.5/lib-dynload/_hashlib.so
001a8000-001b8000 r-xp 00000000 08:02 2878173
/usr/lib/python2.5/lib-dynload/cPickle.so
001b8000-001b9000 r--p 0000f000 08:02 2878173
/usr/lib/python2.5/lib-dynload/cPickle.so
001b9000-001ba000 rw-p 00010000 08:02 2878173
/usr/lib/python2.5/lib-dynload/cPickle.so
001ba000-001bc000 r-xp 00000000 08:02 2878187
/usr/lib/python2.5/lib-dynload/resource.so
001bc000-001bd000 r--p 00001000 08:02 2878187
/usr/lib/python2.5/lib-dynload/resource.so
001bd000-001be000 rw-p 00002000 08:02 2878187
/usr/lib/python2.5/lib-dynload/resource.so
001be000-001c3000 r-xp 00000000 08:02 2877200
/usr/lib/python2.5/lib-dynload/itertools.so
001c3000-001c4000 r--p 00004000 08:02 2877200
/usr/lib/python2.5/lib-dynload/itertools.so
001c4000-001c6000 rw-p 00005000 08:02 2877200
/usr/lib/python2.5/lib-dynload/itertools.so
001c6000-001f4000 r-xp 00000000 08:02 2878193
/usr/lib/python2.5/lib-dynload/pyexpat.so
001f4000-001f6000 r--p 0002d000 08:02 2878193
/usr/lib/python2.5/lib-dynload/pyexpat.so
001f6000-001f7000 rw-p 0002f000 08:02 2878193
/usr/lib/python2.5/lib-dynload/pyexpat.so
001f7000-001f8000 rw-p 00000000 00:00 0
001f8000-001fa000 r-xp 00000000 08:02 2875779
/usr/lib/pyshared/python2.5/OpenSSL/rand.so
001fa000-001fb000 r--p 00001000 08:02 2875779
/usr/lib/pyshared/python2.5/OpenSSL/rand.so
001fb000-001fc000 rw-p 00002000 08:02 2875779
/usr/lib/pyshared/python2.5/OpenSSL/rand.so
001fc000-001fd000 r-xp 00000000 08:02 2878164
/usr/lib/python2.5/lib-dynload/_bisect.so
001fd000-001fe000 r--p 00000000 08:02 2878164
/usr/lib/python2.5/lib-dynload/_bisect.so
001fe000-001ff000 rw-p 00001000 08:02 2878164
/usr/lib/python2.5/lib-dynload/_bisect.so
001ff000-00204000 r-xp 00000000 08:02 2803555    /usr/lib/libgdbm.so.3.0.0
00204000-00205000 r--p 00004000 08:02 2803555    /usr/lib/libgdbm.so.3.0.0
00205000-00206000 rw-p 00005000 08:02 2803555    /usr/lib/libgdbm.so.3.0.0
00206000-00209000 r-xp 00000000 08:02 2878151
/usr/lib/python2.5/lib-dynload/select.so
00209000-0020a000 r--p 00002000 08:02 2878151
/usr/lib/python2.5/lib-dynload/select.so
0020a000-0020b000 rw-p 00003000 08:02 2878151
/usr/lib/python2.5/lib-dynload/select.so
0020b000-00210000 r-xp 00000000 08:02 2878180
/usr/lib/python2.5/lib-dynload/_csv.so
00210000-00211000 r--p 00004000 08:02 2878180
/usr/lib/python2.5/lib-dynload/_csv.so
00211000-00213000 rw-p 00005000 08:02 2878180
/usr/lib/python2.5/lib-dynload/_csv.so
00213000-00219000 r-xp 00000000 08:02 164065
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/native_threads/libhpi.so
00219000-0021a000 rw-p 00006000 08:02 164065
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/native_threads/libhpi.so
0021a000-0021b000 r-xp 00000000 00:00 0          [vdso]
0021b000-00359000 r-xp 00000000 08:02 1434033    /lib/tls/i686/cmov/
libc-2.10.1.so
00359000-0035b000 r--p 0013e000 08:02 1434033    /lib/tls/i686/cmov/
libc-2.10.1.so
0035b000-0035c000 rw-p 00140000 08:02 1434033    /lib/tls/i686/cmov/
libc-2.10.1.so
0035c000-0035f000 rw-p 00000000 00:00 0
0035f000-0036c000 r-xp 00000000 08:02 2878184
/usr/lib/python2.5/lib-dynload/_sqlite3.so
0036c000-0036d000 r--p 0000c000 08:02 2878184
/usr/lib/python2.5/lib-dynload/_sqlite3.so
0036d000-0036e000 rw-p 0000d000 08:02 2878184
/usr/lib/python2.5/lib-dynload/_sqlite3.so
0036e000-00391000 r-xp 00000000 08:02 164077
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libjava.so
00391000-00393000 rw-p 00023000 08:02 164077
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libjava.so
00394000-00399000 r-xp 00000000 08:02 2876301
/usr/lib/python2.5/lib-dynload/_struct.so
00399000-0039a000 r--p 00004000 08:02 2876301
/usr/lib/python2.5/lib-dynload/_struct.so
0039a000-0039b000 rw-p 00005000 08:02 2876301
/usr/lib/python2.5/lib-dynload/_struct.so
0039b000-00400000 r-xp 00000000 08:02 2878155
/usr/lib/python2.5/lib-dynload/unicodedata.so
00400000-00401000 r--p 00064000 08:02 2878155
/usr/lib/python2.5/lib-dynload/unicodedata.so
00401000-00410000 rw-p 00065000 08:02 2878155
/usr/lib/python2.5/lib-dynload/unicodedata.so
00410000-0042c000 r-xp 00000000 08:02 1409081    /lib/libgcc_s.so.1
0042c000-0042d000 r--p 0001b000 08:02 1409081    /lib/libgcc_s.so.1
0042d000-0042e000 rw-p 0001c000 08:02 1409081    /lib/libgcc_s.so.1
0042f000-00431000 r-xp 00000000 08:02 2875768
/usr/lib/python2.5/lib-dynload/_random.so
00431000-00432000 r--p 00002000 08:02 2875768
/usr/lib/python2.5/lib-dynload/_random.so
00432000-00433000 rw-p 00003000 08:02 2875768
/usr/lib/python2.5/lib-dynload/_random.so
00433000-0043e000 r-xp 00000000 08:02 164076
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libverify.so
0043e000-0043f000 rw-p 0000b000 08:02 164076
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libverify.so
0043f000-00452000 r-xp 00000000 08:02 1434044    /lib/tls/i686/cmov/
libnsl-2.10.1.so
00452000-00453000 r--p 00012000 08:02 1434044    /lib/tls/i686/cmov/
libnsl-2.10.1.so
00453000-00454000 rw-p 00013000 08:02 1434044    /lib/tls/i686/cmov/
libnsl-2.10.1.so
00454000-00456000 rw-p 00000000 00:00 0
00456000-0045c000 r-xp 00000000 08:02 1434046    /lib/tls/i686/cmov/
libnss_compat-2.10.1.so
0045c000-0045d000 r--p 00005000 08:02 1434046    /lib/tls/i686/cmov/
libnss_compat-2.10.1.so
0045d000-0045e000 rw-p 00006000 08:02 1434046    /lib/tls/i686/cmov/
libnss_compat-2.10.1.so
0045e000-00467000 r-xp 00000000 08:02 1434054    /lib/tls/i686/cmov/
libnss_nis-2.10.1.so
00467000-00468000 r--p 00008000 08:02 1434054    /lib/tls/i686/cmov/
libnss_nis-2.10.1.so
00468000-00469000 rw-p 00009000 08:02 1434054    /lib/tls/i686/cmov/
libnss_nis-2.10.1.so
00469000-0046c000 r-xp 00000000 08:02 1409192    /lib/libuuid.so.1.3.0
0046c000-0046d000 r--p 00002000 08:02 1409192    /lib/libuuid.so.1.3.0
0046d000-0046e000 rw-p 00003000 08:02 1409192    /lib/libuuid.so.1.3.0
0046e000-00471000 r-xp 00000000 08:02 2703630
/home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.egg/Cheetah/_namemapper.so
00471000-00472000 r--p 00002000 08:02 2703630
/home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.egg/Cheetah/_namemapper.so
00472000-00473000 rw-p 00003000 08:02 2703630
/home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.egg/Cheetah/_namemapper.so
00473000-00475000 r-xp 00000000 08:02 1409132
/lib/libnss_mdns4_minimal.so.2
00475000-00476000 r--p 00001000 08:02 1409132
/lib/libnss_mdns4_minimal.so.2
00476000-00477000 rw-p 00002000 08:02 1409132
/lib/libnss_mdns4_minimal.so.2
00477000-0047a000 r-xp 00000000 08:02 2878154
/usr/lib/python2.5/lib-dynload/time.so
0047a000-0047b000 r--p 00002000 08:02 2878154
/usr/lib/python2.5/lib-dynload/time.so
0047b000-0047d000 rw-p 00003000 08:02 2878154
/usr/lib/python2.5/lib-dynload/time.so
0047d000-005aa000 r-xp 00000000 08:02 1409240
/lib/i686/cmov/libcrypto.so.0.9.8
005aa000-005b2000 r--p 0012c000 08:02 1409240
/lib/i686/cmov/libcrypto.so.0.9.8
005b2000-005bf000 rw-p 00134000 08:02 1409240
/lib/i686/cmov/libcrypto.so.0.9.8
005bf000-005c3000 rw-p 00000000 00:00 0
005c3000-005d2000 r-xp 00000000 08:02 164080
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libzip.so
005d2000-005d4000 rw-p 0000e000 08:02 164080
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libzip.so
005d4000-005d7000 ---p 00000000 00:00 0
005d7000-00625000 rwxp 00000000 00:00 0
00625000-0062b000 r-xp 00000000 08:02 2878195
/usr/lib/python2.5/lib-dynload/_multibytecodec.so
0062b000-0062c000 r--p 00005000 08:02 2878195
/usr/lib/python2.5/lib-dynload/_multibytecodec.so
0062c000-0062d000 rw-p 00006000 08:02 2878195
/usr/lib/python2.5/lib-dynload/_multibytecodec.so
00632000-00634000 r-xp 00000000 08:02 1434067    /lib/tls/i686/cmov/
libutil-2.10.1.so
00634000-00635000 r--p 00001000 08:02 1434067    /lib/tls/i686/cmov/
libutil-2.10.1.so
00635000-00636000 rw-p 00002000 08:02 1434067    /lib/tls/i686/cmov/
libutil-2.10.1.so
00636000-0063a000 r-xp 00000000 08:02 2878201
/usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
0063a000-0063b000 r--p 00003000 08:02 2878201
/usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
0063b000-0063c000 rw-p 00004000 08:02 2878201
/usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
00640000-00644000 r-xp 00000000 08:02 2878156
/usr/lib/python2.5/lib-dynload/zlib.so
00644000-00645000 r--p 00003000 08:02 2878156
/usr/lib/python2.5/lib-dynload/zlib.so
00645000-00646000 rw-p 00004000 08:02 2878156
/usr/lib/python2.5/lib-dynload/zlib.so
00646000-00649000 ---p 00000000 00:00 0
00649000-00697000 rwxp 00000000 00:00 0
006a4000-006c8000 r-xp 00000000 08:02 1434041    /lib/tls/i686/cmov/
libm-2.10.1.so
006c8000-006c9000 r--p 00023000 08:02 1434041    /lib/tls/i686/cmov/
libm-2.10.1.so
006c9000-006ca000 rw-p 00024000 08:02 1434041    /lib/tls/i686/cmov/
libm-2.10.1.so
006d2000-006ed000 r-xp 00000000 08:02 1409047    /lib/ld-2.10.1.so
006ed000-006ee000 r--p 0001a000 08:02 1409047    /lib/ld-2.10.1.so
006ee000-006ef000 rw-p 0001b000 08:02 1409047    /lib/ld-2.10.1.so
006ef000-006f2000 ---p 00000000 00:00 0
006f2000-00740000 rwxp 00000000 00:00 0
0074a000-00751000 r-xp 00000000 08:02 2705574
/home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simplejson/_speedups.so
00751000-00752000 r--p 00006000 08:02 2705574
/home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simplejson/_speedups.so
00752000-00753000 rw-p 00007000 08:02 2705574
/home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simplejson/_speedups.so
00753000-00756000 ---p 00000000 00:00 0
00756000-007a4000 rwxp 00000000 00:00 0
007a7000-007b5000 r-xp 00000000 08:02 2696528
/home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
007b5000-007b6000 ---p 0000e000 08:02 2696528
/home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
007b6000-007b7000 r--p 0000e000 08:02 2696528
/home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
007b7000-007b9000 rw-p 0000f000 08:02 2696528
/home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
007b9000-007bc000 ---p 00000000 00:00 0
007bc000-0080a000 rwxp 00000000 00:00 0
0080a000-0081a000 r-xp 00000000 08:02 2703679
/home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i686.egg/_ldap.so
0081a000-0081b000 r--p 0000f000 08:02 2703679
/home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i686.egg/_ldap.so
0081b000-0081c000 rw-p 00010000 08:02 2703679
/home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i686.egg/_ldap.so
0081c000-00834000 r-xp 00000000 08:02 2804105    /usr/lib/libsasl2.so.2.0.23
00834000-00835000 r--p 00017000 08:02 2804105    /usr/lib/libsasl2.so.2.0.23
00835000-00836000 rw-p 00018000 08:02 2804105    /usr/lib/libsasl2.so.2.0.23
00838000-0083f000 r-xp 00000000 08:02 2875949
/usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
0083f000-00840000 r--p 00006000 08:02 2875949
/usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
00840000-00841000 rw-p 00007000 08:02 2875949
/usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
00841000-00882000 r-xp 00000000 08:02 294945
/usr/lib/libldap_r-2.4.so.2.5.1
00882000-00883000 ---p 00041000 08:02 294945
/usr/lib/libldap_r-2.4.so.2.5.1
00883000-00884000 r--p 00041000 08:02 294945
/usr/lib/libldap_r-2.4.so.2.5.1
00884000-00885000 rw-p 00042000 08:02 294945
/usr/lib/libldap_r-2.4.so.2.5.1
00885000-00886000 rw-p 00000000 00:00 0
00894000-00897000 r-xp 00000000 08:02 2878170
/usr/lib/python2.5/lib-dynload/_locale.so
00897000-00898000 r--p 00002000 08:02 2878170
/usr/lib/python2.5/lib-dynload/_locale.so
00898000-00899000 rw-p 00003000 08:02 2878170
/usr/lib/python2.5/lib-dynload/_locale.so
00899000-008a9000 r-xp 00000000 08:02 1434061    /lib/tls/i686/cmov/
libresolv-2.10.1.so
008a9000-008aa000 r--p 00010000 08:02 1434061    /lib/tls/i686/cmov/
libresolv-2.10.1.so
008aa000-008ab000 rw-p 00011000 08:02 1434061    /lib/tls/i686/cmov/
libresolv-2.10.1.so
008ab000-008ad000 rw-p 00000000 00:00 0
008bd000-008bf000 r-xp 00000000 08:02 2878185
/usr/lib/python2.5/lib-dynload/dbm.so
008bf000-008c0000 r--p 00001000 08:02 2878185
/usr/lib/python2.5/lib-dynload/dbm.so
008c0000-008c1000 rw-p 00002000 08:02 2878185
/usr/lib/python2.5/lib-dynload/dbm.so
008c5000-008cf000 r-xp 00000000 08:02 1434050    /lib/tls/i686/cmov/
libnss_files-2.10.1.so
008cf000-008d0000 r--p 00009000 08:02 1434050    /lib/tls/i686/cmov/
libnss_files-2.10.1.so
008d0000-008d1000 rw-p 0000a000 08:02 1434050    /lib/tls/i686/cmov/
libnss_files-2.10.1.so
008e1000-008e5000 r-xp 00000000 08:02 2878163
/usr/lib/python2.5/lib-dynload/collections.so
008e5000-008e6000 r--p 00004000 08:02 2878163
/usr/lib/python2.5/lib-dynload/collections.so
008e6000-008e7000 rw-p 00005000 08:02 2878163
/usr/lib/python2.5/lib-dynload/collections.so
008f8000-00a36000 r-xp 00000000 08:02 2801926    /usr/lib/libdb-4.6.so
00a36000-00a38000 r--p 0013d000 08:02 2801926    /usr/lib/libdb-4.6.so
00a38000-00a39000 rw-p 0013f000 08:02 2801926    /usr/lib/libdb-4.6.so
00a39000-00abf000 r-xp 00000000 08:02 2804148
/usr/lib/libsqlite3.so.0.8.6
00abf000-00ac0000 r--p 00086000 08:02 2804148
/usr/lib/libsqlite3.so.0.8.6
00ac0000-00ac1000 rw-p 00087000 08:02 2804148
/usr/lib/libsqlite3.so.0.8.6
00ac1000-00ad1000 r-xp 00000000 08:02 2804162    /usr/lib/libtasn1.so.3.1.5
00ad1000-00ad2000 r--p 0000f000 08:02 2804162    /usr/lib/libtasn1.so.3.1.5
00ad2000-00ad3000 rw-p 00010000 08:02 2804162    /usr/lib/libtasn1.so.3.1.5
00ad3000-00ae7000 r-xp 00000000 08:02 2878158
/usr/lib/python2.5/lib-dynload/_ctypes.so
00ae7000-00ae8000 r--p 00014000 08:02 2878158
/usr/lib/python2.5/lib-dynload/_ctypes.so
00ae8000-00aea000 rw-p 00015000 08:02 2878158
/usr/lib/python2.5/lib-dynload/_ctypes.so
00b01000-00b03000 r-xp 00000000 08:02 1434039    /lib/tls/i686/cmov/
libdl-2.10.1.so
00b03000-00b04000 r--p 00001000 08:02 1434039    /lib/tls/i686/cmov/
libdl-2.10.1.so
00b04000-00b05000 rw-p 00002000 08:02 1434039    /lib/tls/i686/cmov/
libdl-2.10.1.so
00b11000-00b14000 r-xp 00000000 08:02 1409103    /lib/libgpg-error.so.0.4.0
00b14000-00b15000 r--p 00002000 08:02 1409103    /lib/libgpg-error.so.0.4.0
00b15000-00b16000 rw-p 00003000 08:02 1409103    /lib/libgpg-error.so.0.4.0
00b16000-00b2b000 r-xp 00000000 08:02 2878199
/usr/lib/python2.5/lib-dynload/_codecs_tw.so
00b2b000-00b2e000 r--p 00014000 08:02 2878199
/usr/lib/python2.5/lib-dynload/_codecs_tw.so
00b2e000-00b2f000 rw-p 00017000 08:02 2878199
/usr/lib/python2.5/lib-dynload/_codecs_tw.so
00b2f000-00b4c000 r-xp 00000000 08:02 2878198
/usr/lib/python2.5/lib-dynload/_codecs_cn.so
00b4c000-00b4f000 r--p 0001c000 08:02 2878198
/usr/lib/python2.5/lib-dynload/_codecs_cn.so
00b4f000-00b50000 rw-p 0001f000 08:02 2878198
/usr/lib/python2.5/lib-dynload/_codecs_cn.so
00b54000-00b59000 r-xp 00000000 08:02 1434048    /lib/tls/i686/cmov/
libnss_dns-2.10.1.so
00b59000-00b5a000 r--p 00004000 08:02 1434048    /lib/tls/i686/cmov/
libnss_dns-2.10.1.so
00b5a000-00b5b000 rw-p 00005000 08:02 1434048    /lib/tls/i686/cmov/
libnss_dns-2.10.1.so
00b6c000-00b73000 r-xp 00000000 08:02 1434063    /lib/tls/i686/cmov/
librt-2.10.1.so
00b73000-00b74000 r--p 00006000 08:02 1434063    /lib/tls/i686/cmov/
librt-2.10.1.so
00b74000-00b75000 rw-p 00007000 08:02 1434063    /lib/tls/i686/cmov/
librt-2.10.1.so
00b75000-00b78000 ---p 00000000 00:00 0
00b78000-00bc6000 rwxp 00000000 00:00 0
00bd1000-00bde000 r-xp 00000000 08:02 2704619
/home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTime.so
00bde000-00bdf000 r--p 0000c000 08:02 2704619
/home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTime.so
00bdf000-00be0000 rw-p 0000d000 08:02 2704619
/home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTime.so
00be2000-00be5000 r-xp 00000000 08:02 2875898
/usr/lib/python2.5/lib-dynload/gdbm.so
00be5000-00be6000 r--p 00002000 08:02 2875898
/usr/lib/python2.5/lib-dynload/gdbm.so
00be6000-00be7000 rw-p 00003000 08:02 2875898
/usr/lib/python2.5/lib-dynload/gdbm.so
00bfe000-00c03000 r-xp 00000000 08:02 2878150
/usr/lib/python2.5/lib-dynload/operator.so
00c03000-00c04000 r--p 00004000 08:02 2878150
/usr/lib/python2.5/lib-dynload/operator.so
00c04000-00c05000 rw-p 00005000 08:02 2878150
/usr/lib/python2.5/lib-dynload/operator.so
00c10000-00c1b000 r-xp 00000000 08:02 2878172
/usr/lib/python2.5/lib-dynload/parser.so
00c1b000-00c1c000 r--p 0000a000 08:02 2878172
/usr/lib/python2.5/lib-dynload/parser.so
00c1c000-00c1d000 rw-p 0000b000 08:02 2878172
/usr/lib/python2.5/lib-dynload/parser.so
00c1d000-00c4d000 r-xp 00000000 08:02 2878197
/usr/lib/python2.5/lib-dynload/_codecs_jp.so
00c4d000-00c54000 r--p 00030000 08:02 2878197
/usr/lib/python2.5/lib-dynload/_codecs_jp.so
00c54000-00c55000 rw-p 00037000 08:02 2878197
/usr/lib/python2.5/lib-dynload/_codecs_jp.so
00c7f000-00c86000 r-xp 00000000 08:02 2877196
/usr/lib/python2.5/lib-dynload/array.so
00c86000-00c87000 r--p 00006000 08:02 2877196
/usr/lib/python2.5/lib-dynload/array.so
00c87000-00c89000 rw-p 00007000 08:02 2877196
/usr/lib/python2.5/lib-dynload/array.so
00ced000-00d4c000 r-xp 00000000 08:02 2803627    /usr/lib/libgmp.so.3.5.0
00d4c000-00d4d000 r--p 0005e000 08:02 2803627    /usr/lib/libgmp.so.3.5.0
00d4d000-00d4e000 rw-p 0005f000 08:02 2803627    /usr/lib/libgmp.so.3.5.0
00d74000-00d76000 r-xp 00000000 08:02 2878165
/usr/lib/python2.5/lib-dynload/_heapq.so
00d76000-00d77000 r--p 00001000 08:02 2878165
/usr/lib/python2.5/lib-dynload/_heapq.so
00d77000-00d79000 rw-p 00002000 08:02 2878165
/usr/lib/python2.5/lib-dynload/_heapq.so
00dba000-00dc5000 r-xp 00000000 08:02 2875778
/usr/lib/pyshared/python2.5/OpenSSL/crypto.so
00dc5000-00dc6000 r--p 0000a000 08:02 2875778
/usr/lib/pyshared/python2.5/OpenSSL/crypto.so
00dc6000-00dcb000 rw-p 0000b000 08:02 2875778
/usr/lib/pyshared/python2.5/OpenSSL/crypto.so
00e29000-00e2d000 r-xp 00000000 08:02 2875960
/usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
00e2d000-00e2e000 r--p 00003000 08:02 2875960
/usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
00e2e000-00e2f000 rw-p 00004000 08:02 2875960
/usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
00e52000-00e5d000 r-xp 00000000 08:02 294944
/usr/lib/liblber-2.4.so.2.5.1
00e5d000-00e5e000 r--p 0000a000 08:02 294944
/usr/lib/liblber-2.4.so.2.5.1
00e5e000-00e5f000 rw-p 0000b000 08:02 294944
/usr/lib/liblber-2.4.so.2.5.1
00e8e000-00e91000 r-xp 00000000 08:02 2878181
/usr/lib/python2.5/lib-dynload/_ssl.so
00e91000-00e92000 r--p 00002000 08:02 2878181
/usr/lib/python2.5/lib-dynload/_ssl.so
00e92000-00e93000 rw-p 00003000 08:02 2878181
/usr/lib/python2.5/lib-dynload/_ssl.so
00e99000-00e9c000 r-xp 00000000 08:02 2878186
/usr/lib/python2.5/lib-dynload/termios.so
00e9c000-00e9d000 r--p 00002000 08:02 2878186
/usr/lib/python2.5/lib-dynload/termios.so
00e9d000-00e9f000 rw-p 00003000 08:02 2878186
/usr/lib/python2.5/lib-dynload/termios.so
00ebe000-00ed2000 r-xp 00000000 08:02 1409199    /lib/libz.so.1.2.3.3
00ed2000-00ed3000 r--p 00013000 08:02 1409199    /lib/libz.so.1.2.3.3
00ed3000-00ed4000 rw-p 00014000 08:02 1409199    /lib/libz.so.1.2.3.3
00ee0000-00ee8000 r-xp 00000000 08:02 2875777
/usr/lib/pyshared/python2.5/OpenSSL/SSL.so
00ee8000-00ee9000 r--p 00007000 08:02 2875777
/usr/lib/pyshared/python2.5/OpenSSL/SSL.so
00ee9000-00eed000 rw-p 00008000 08:02 2875777
/usr/lib/pyshared/python2.5/OpenSSL/SSL.so
00f08000-00f0a000 r-xp 00000000 08:02 2878166
/usr/lib/python2.5/lib-dynload/_functools.so
00f0a000-00f0b000 r--p 00001000 08:02 2878166
/usr/lib/python2.5/lib-dynload/_functools.so
00f0b000-00f0c000 rw-p 00002000 08:02 2878166
/usr/lib/python2.5/lib-dynload/_functools.so
00f0c000-00f0d000 ---p 00000000 00:00 0
00f0d000-00f8d000 rwxp 00000000 00:00 0
00fc6000-00fc9000 r-xp 00000000 08:02 2877195
/usr/lib/python2.5/lib-dynload/cStringIO.so
00fc9000-00fca000 r--p 00002000 08:02 2877195
/usr/lib/python2.5/lib-dynload/cStringIO.so
00fca000-00fcb000 rw-p 00003000 08:02 2877195
/usr/lib/python2.5/lib-dynload/cStringIO.so
00fd2000-00fe7000 r-xp 00000000 08:02 1434059    /lib/tls/i686/cmov/
libpthread-2.10.1.so
00fe7000-00fe8000 r--p 00014000 08:02 1434059    /lib/tls/i686/cmov/
libpthread-2.10.1.so
00fe8000-00fe9000 rw-p 00015000 08:02 1434059    /lib/tls/i686/cmov/
libpthread-2.10.1.so
00fe9000-00feb000 rw-p 00000000 00:00 0
00fef000-00ff3000 r-xp 00000000 08:02 2877197
/usr/lib/python2.5/lib-dynload/binascii.so
00ff3000-00ff4000 r--p 00003000 08:02 2877197
/usr/lib/python2.5/lib-dynload/binascii.so
00ff4000-00ff5000 rw-p 00004000 08:02 2877197
/usr/lib/python2.5/lib-dynload/binascii.so
00ff5000-016dd000 r-xp 00000000 08:02 2703936
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/_lucene.so
016dd000-016e6000 r--p 006e8000 08:02 2703936
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/_lucene.so
016e6000-01718000 rw-p 006f1000 08:02 2703936
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/_lucene.so
01718000-0171b000 rw-p 00000000 00:00 0
0171b000-0171c000 ---p 00000000 00:00 0
0171c000-0179c000 rwxp 00000000 00:00 0
0179c000-0179d000 ---p 00000000 00:00 0
0179d000-01f9d000 rwxp 00000000 00:00 0
01f9d000-02040000 r-xp 00000000 08:02 2803659
/usr/lib/libgnutls.so.26.14.10
02040000-02044000 r--p 000a2000 08:02 2803659
/usr/lib/libgnutls.so.26.14.10
02044000-02045000 rw-p 000a6000 08:02 2803659
/usr/lib/libgnutls.so.26.14.10
0204b000-024ce000 r-xp 00000000 08:02 164071
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/libjvm.so
024ce000-024ef000 rw-p 00483000 08:02 164071
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/libjvm.so
024ef000-0290b000 rw-p 00000000 00:00 0
0290b000-0290c000 ---p 00000000 00:00 0
0290c000-0310c000 rwxp 00000000 00:00 0
0310c000-0310d000 ---p 00000000 00:00 0
0310d000-0390d000 rwxp 00000000 00:00 0
0390d000-0390e000 ---p 00000000 00:00 0
0390e000-0410e000 rwxp 00000000 00:00 0
0410e000-0410f000 ---p 00000000 00:00 0
0410f000-0490f000 rwxp 00000000 00:00 0
0490f000-04912000 ---p 00000000 00:00 0
04912000-05110000 rwxp 00000000 00:00 0
05110000-05111000 ---p 00000000 00:00 0
05111000-05911000 rwxp 00000000 00:00 0
05911000-0598a000 r-xp 00000000 08:02 1409099    /lib/libgcrypt.so.11.5.2
0598a000-0598b000 r--p 00078000 08:02 1409099    /lib/libgcrypt.so.11.5.2
0598b000-0598d000 rw-p 00079000 08:02 1409099    /lib/libgcrypt.so.11.5.2
05a32000-05a35000 ---p 00000000 00:00 0
05a35000-05ab3000 rwxp 00000000 00:00 0
05ab3000-05ab4000 ---p 00000000 00:00 0
05ab4000-062b4000 rwxp 00000000 00:00 0
0633d000-06423000 r-xp 00000000 08:02 294926
/usr/lib/libstdc++.so.6.0.13
06423000-06427000 r--p 000e6000 08:02 294926
/usr/lib/libstdc++.so.6.0.13
06427000-06428000 rw-p 000ea000 08:02 294926
/usr/lib/libstdc++.so.6.0.13
06428000-0642f000 rw-p 00000000 00:00 0
0642f000-06536000 r-xp 00000000 08:02 2801927
/usr/lib/libpython2.5.so.1.0
06536000-06537000 r--p 00106000 08:02 2801927
/usr/lib/libpython2.5.so.1.0
06537000-0655c000 rw-p 00107000 08:02 2801927
/usr/lib/libpython2.5.so.1.0
0655c000-06562000 rw-p 00000000 00:00 0
069c1000-069c2000 ---p 00000000 00:00 0
069c2000-071c2000 rwxp 00000000 00:00 0
071c2000-071c3000 ---p 00000000 00:00 0
071c3000-079c3000 rwxp 00000000 00:00 0
08048000-0813d000 r-xp 00000000 08:02 2801925    /usr/bin/python2.5
0813d000-0813e000 r--p 000f4000 08:02 2801925    /usr/bin/python2.5
0813e000-08163000 rw-p 000f5000 08:02 2801925    /usr/bin/python2.5
08163000-08169000 rw-p 00000000 00:00 0
08673000-10d8a000 rw-p 00000000 00:00 0          [heap]
43000000-430eb000 rw-p 00000000 00:00 0
430eb000-43100000 ---p 00000000 00:00 0
43200000-432f2000 rw-p 00000000 00:00 0
432f2000-43300000 ---p 00000000 00:00 0
43300000-433ee000 rw-p 00000000 00:00 0
433ee000-43400000 ---p 00000000 00:00 0
43400000-434f3000 rw-p 00000000 00:00 0
434f3000-43500000 ---p 00000000 00:00 0
43500000-435a5000 rw-p 00000000 00:00 0
435a5000-43600000 ---p 00000000 00:00 0
43600000-436fd000 rw-p 00000000 00:00 0
436fd000-43700000 ---p 00000000 00:00 0
43800000-438fd000 rw-p 00000000 00:00 0
438fd000-43900000 ---p 00000000 00:00 0
43a00000-43afd000 rw-p 00000000 00:00 0
43afd000-43b00000 ---p 00000000 00:00 0
43c00000-43d00000 rw-p 00000000 00:00 0
43e00000-43f00000 rw-p 00000000 00:00 0
44000000-440f8000 rw-p 00000000 00:00 0
440f8000-44100000 ---p 00000000 00:00 0
44200000-442c1000 rw-p 00000000 00:00 0
442c1000-44300000 ---p 00000000 00:00 0
44300000-44400000 rw-p 00000000 00:00 0
44400000-44500000 rw-p 00000000 00:00 0
44600000-446fb000 rw-p 00000000 00:00 0
446fb000-44700000 ---p 00000000 00:00 0
44800000-448f8000 rw-p 00000000 00:00 0
448f8000-44900000 ---p 00000000 00:00 0
44a00000-44aef000 rw-p 00000000 00:00 0
44aef000-44b00000 ---p 00000000 00:00 0
44c00000-44cff000 rw-p 00000000 00:00 0
44cff000-44d00000 ---p 00000000 00:00 0
44e00000-44efe000 rw-p 00000000 00:00 0
44efe000-44f00000 ---p 00000000 00:00 0
45000000-45100000 rw-p 00000000 00:00 0
45200000-452e6000 rw-p 00000000 00:00 0
452e6000-45300000 ---p 00000000 00:00 0
45400000-454f8000 rw-p 00000000 00:00 0
454f8000-45500000 ---p 00000000 00:00 0
45600000-45700000 rw-p 00000000 00:00 0
45700000-457ff000 rw-p 00000000 00:00 0
457ff000-45800000 ---p 00000000 00:00 0
45900000-459fd000 rw-p 00000000 00:00 0
459fd000-45a00000 ---p 00000000 00:00 0
45b00000-45bf2000 rw-p 00000000 00:00 0
45bf2000-45c00000 ---p 00000000 00:00 0
45c00000-45cc1000 rw-p 00000000 00:00 0
45cc1000-45d00000 ---p 00000000 00:00 0
45d00000-45dff000 rw-p 00000000 00:00 0
45dff000-45e00000 ---p 00000000 00:00 0
45f00000-45fe6000 rw-p 00000000 00:00 0
45fe6000-46000000 ---p 00000000 00:00 0
46100000-461ff000 rw-p 00000000 00:00 0
461ff000-46200000 ---p 00000000 00:00 0
46300000-463c1000 rw-p 00000000 00:00 0
463c1000-46400000 ---p 00000000 00:00 0
46400000-464ff000 rw-p 00000000 00:00 0
464ff000-46500000 ---p 00000000 00:00 0
46500000-465e5000 rw-p 00000000 00:00 0
465e5000-46600000 ---p 00000000 00:00 0
46600000-466f2000 rw-p 00000000 00:00 0
466f2000-46700000 ---p 00000000 00:00 0
46700000-467f0000 rw-p 00000000 00:00 0
467f0000-46800000 ---p 00000000 00:00 0
46900000-469e5000 rw-p 00000000 00:00 0
469e5000-46a00000 ---p 00000000 00:00 0
46a00000-46af2000 rw-p 00000000 00:00 0
46af2000-46b00000 ---p 00000000 00:00 0
46b00000-46be4000 rw-p 00000000 00:00 0
46be4000-46c00000 ---p 00000000 00:00 0
46d00000-46dfe000 rw-p 00000000 00:00 0
46dfe000-46e00000 ---p 00000000 00:00 0
46f00000-46ffe000 rw-p 00000000 00:00 0
46ffe000-47000000 ---p 00000000 00:00 0
47100000-471c2000 rw-p 00000000 00:00 0
471c2000-47200000 ---p 00000000 00:00 0
47200000-472f5000 rw-p 00000000 00:00 0
472f5000-47300000 ---p 00000000 00:00 0
47400000-474e8000 rw-p 00000000 00:00 0
474e8000-47500000 ---p 00000000 00:00 0
47500000-475fb000 rw-p 00000000 00:00 0
475fb000-47600000 ---p 00000000 00:00 0
47700000-47800000 rw-p 00000000 00:00 0
47900000-47a00000 rw-p 00000000 00:00 0
47b00000-47bfa000 rw-p 00000000 00:00 0
47bfa000-47c00000 ---p 00000000 00:00 0
47d00000-47dfa000 rw-p 00000000 00:00 0
47dfa000-47e00000 ---p 00000000 00:00 0
47f00000-47ffe000 rw-p 00000000 00:00 0
47ffe000-48000000 ---p 00000000 00:00 0
48100000-48200000 rw-p 00000000 00:00 0
48300000-48400000 rw-p 00000000 00:00 0
48500000-485fb000 rw-p 00000000 00:00 0
485fb000-48600000 ---p 00000000 00:00 0
48700000-48800000 rw-p 00000000 00:00 0
48800000-488fd000 rw-p 00000000 00:00 0
488fd000-48900000 ---p 00000000 00:00 0
48a00000-48aed000 rw-p 00000000 00:00 0
48aed000-48b00000 ---p 00000000 00:00 0
48c00000-48cfb000 rw-p 00000000 00:00 0
48cfb000-48d00000 ---p 00000000 00:00 0
48e00000-48ef6000 rw-p 00000000 00:00 0
48ef6000-48f00000 ---p 00000000 00:00 0
49000000-490fd000 rw-p 00000000 00:00 0
490fd000-49100000 ---p 00000000 00:00 0
49200000-492f9000 rw-p 00000000 00:00 0
492f9000-49300000 ---p 00000000 00:00 0
49400000-494ec000 rw-p 00000000 00:00 0
494ec000-49500000 ---p 00000000 00:00 0
49500000-49600000 rw-p 00000000 00:00 0
49600000-496ff000 rw-p 00000000 00:00 0
496ff000-49700000 ---p 00000000 00:00 0
49800000-498f6000 rw-p 00000000 00:00 0
498f6000-49900000 ---p 00000000 00:00 0
49a00000-49afb000 rw-p 00000000 00:00 0
49afb000-49b00000 ---p 00000000 00:00 0
49c00000-49cf7000 rw-p 00000000 00:00 0
49cf7000-49d00000 ---p 00000000 00:00 0
49e00000-49eff000 rw-p 00000000 00:00 0
49eff000-49f00000 ---p 00000000 00:00 0
4a000000-4a0c6000 rw-p 00000000 00:00 0
4a0c6000-4a100000 ---p 00000000 00:00 0
4a200000-4a2ff000 rw-p 00000000 00:00 0
4a2ff000-4a300000 ---p 00000000 00:00 0
4a400000-4a4f5000 rw-p 00000000 00:00 0
4a4f5000-4a500000 ---p 00000000 00:00 0
4a600000-4a6ff000 rw-p 00000000 00:00 0
4a6ff000-4a700000 ---p 00000000 00:00 0
4a800000-4a8fe000 rw-p 00000000 00:00 0
4a8fe000-4a900000 ---p 00000000 00:00 0
4aa00000-4aaff000 rw-p 00000000 00:00 0
4aaff000-4ab00000 ---p 00000000 00:00 0
4ac00000-4acf8000 rw-p 00000000 00:00 0
4acf8000-4ad00000 ---p 00000000 00:00 0
4ad00000-4ae00000 rw-p 00000000 00:00 0
4ae00000-4aefd000 rw-p 00000000 00:00 0
4aefd000-4af00000 ---p 00000000 00:00 0
4b000000-4b0f2000 rw-p 00000000 00:00 0
4b0f2000-4b100000 ---p 00000000 00:00 0
4b200000-4b2fd000 rw-p 00000000 00:00 0
4b2fd000-4b300000 ---p 00000000 00:00 0
4b400000-4b500000 rw-p 00000000 00:00 0
4b500000-4b5e5000 rw-p 00000000 00:00 0
4b5e5000-4b600000 ---p 00000000 00:00 0
4b600000-4b6e5000 rw-p 00000000 00:00 0
4b6e5000-4b700000 ---p 00000000 00:00 0
4b800000-4b8fe000 rw-p 00000000 00:00 0
4b8fe000-4b900000 ---p 00000000 00:00 0
4ba00000-4baf0000 rw-p 00000000 00:00 0
4baf0000-4bb00000 ---p 00000000 00:00 0
4bb00000-4bc00000 rw-p 00000000 00:00 0
4bc00000-4bd00000 rw-p 00000000 00:00 0
4be00000-4befc000 rw-p 00000000 00:00 0
4befc000-4bf00000 ---p 00000000 00:00 0
4c000000-4c100000 rw-p 00000000 00:00 0
4c100000-4c1fd000 rw-p 00000000 00:00 0
4c1fd000-4c200000 ---p 00000000 00:00 0
4c200000-4c2ed000 rw-p 00000000 00:00 0
4c2ed000-4c300000 ---p 00000000 00:00 0
4c400000-4c4fe000 rw-p 00000000 00:00 0
4c4fe000-4c500000 ---p 00000000 00:00 0
4c500000-4c5fe000 rw-p 00000000 00:00 0
4c5fe000-4c600000 ---p 00000000 00:00 0
4c600000-4c700000 rw-p 00000000 00:00 0
4c800000-4c8fe000 rw-p 00000000 00:00 0
4c8fe000-4c900000 ---p 00000000 00:00 0
4ca00000-4cb00000 rw-p 00000000 00:00 0
4cc00000-4cced000 rw-p 00000000 00:00 0
4cced000-4cd00000 ---p 00000000 00:00 0
4ce00000-4cf00000 rw-p 00000000 00:00 0
4d000000-4d100000 rw-p 00000000 00:00 0
4d100000-4d200000 rw-p 00000000 00:00 0
4d200000-4d2ea000 rw-p 00000000 00:00 0
4d2ea000-4d300000 ---p 00000000 00:00 0
4d400000-4d4fd000 rw-p 00000000 00:00 0
4d4fd000-4d500000 ---p 00000000 00:00 0
4d600000-4d6fb000 rw-p 00000000 00:00 0
4d6fb000-4d700000 ---p 00000000 00:00 0
4d800000-4d900000 rw-p 00000000 00:00 0
4da00000-4daf7000 rw-p 00000000 00:00 0
4daf7000-4db00000 ---p 00000000 00:00 0
4dc00000-4dd00000 rw-p 00000000 00:00 0
4de00000-4df00000 rw-p 00000000 00:00 0
4e000000-4e0c1000 rw-p 00000000 00:00 0
4e0c1000-4e100000 ---p 00000000 00:00 0
4e100000-4e1ff000 rw-p 00000000 00:00 0
4e1ff000-4e200000 ---p 00000000 00:00 0
4e200000-4e2f2000 rw-p 00000000 00:00 0
4e2f2000-4e300000 ---p 00000000 00:00 0
4e300000-4e3c1000 rw-p 00000000 00:00 0
4e3c1000-4e400000 ---p 00000000 00:00 0
4e400000-4e4f2000 rw-p 00000000 00:00 0
4e4f2000-4e500000 ---p 00000000 00:00 0
4e600000-4e6d8000 rw-p 00000000 00:00 0
4e6d8000-4e700000 ---p 00000000 00:00 0
4e700000-4e7fb000 rw-p 00000000 00:00 0
4e7fb000-4e800000 ---p 00000000 00:00 0
4e800000-4e900000 rw-p 00000000 00:00 0
4ea00000-4eafe000 rw-p 00000000 00:00 0
4eafe000-4eb00000 ---p 00000000 00:00 0
4ec00000-4ecff000 rw-p 00000000 00:00 0
4ecff000-4ed00000 ---p 00000000 00:00 0
4ed40000-64290000 rw-p 00000000 00:00 0
64290000-8ed40000 rw-p 00000000 00:00 0
8ed40000-8f940000 rw-p 00000000 00:00 0
8f940000-92d40000 rw-p 00000000 00:00 0
92d40000-93367000 r--s 00001000 08:02 163968
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
93367000-93740000 rw-p 00000000 00:00 0
93740000-93e77000 rw-p 00628000 08:02 163968
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
93e77000-94340000 rw-p 00000000 00:00 0
94340000-94421000 rw-p 00d5f000 08:02 163968
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
94421000-94740000 rw-p 00000000 00:00 0
94740000-94748000 r-xs 00e40000 08:02 163968
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
94748000-94b40000 rw-p 00000000 00:00 0
94c00000-94cfc000 rw-p 00000000 00:00 0
94cfc000-94d00000 ---p 00000000 00:00 0
94e00000-94f00000 rw-p 00000000 00:00 0
95000000-950fe000 rw-p 00000000 00:00 0
950fe000-95100000 ---p 00000000 00:00 0
95100000-951e0000 rw-p 00000000 00:00 0
951e0000-95200000 ---p 00000000 00:00 0
95200000-952ff000 rw-p 00000000 00:00 0
952ff000-95300000 ---p 00000000 00:00 0
95300000-953f2000 rw-p 00000000 00:00 0
953f2000-95400000 ---p 00000000 00:00 0
95500000-955ff000 rw-p 00000000 00:00 0
955ff000-95600000 ---p 00000000 00:00 0
95600000-956d9000 rw-p 00000000 00:00 0
956d9000-95700000 ---p 00000000 00:00 0
95700000-957f7000 rw-p 00000000 00:00 0
957f7000-95800000 ---p 00000000 00:00 0
95900000-959fb000 rw-p 00000000 00:00 0
959fb000-95a00000 ---p 00000000 00:00 0
95b00000-95bc1000 rw-p 00000000 00:00 0
95bc1000-95c00000 ---p 00000000 00:00 0
95c00000-95cc1000 rw-p 00000000 00:00 0
95cc1000-95d00000 ---p 00000000 00:00 0
95d00000-95df2000 rw-p 00000000 00:00 0
95df2000-95e00000 ---p 00000000 00:00 0
95f00000-95ffd000 rw-p 00000000 00:00 0
95ffd000-96000000 ---p 00000000 00:00 0
96100000-961eb000 rw-p 00000000 00:00 0
961eb000-96200000 ---p 00000000 00:00 0
96300000-963fb000 rw-p 00000000 00:00 0
963fb000-96400000 ---p 00000000 00:00 0
96500000-965fc000 rw-p 00000000 00:00 0
965fc000-96600000 ---p 00000000 00:00 0
96700000-967fa000 rw-p 00000000 00:00 0
967fa000-96800000 ---p 00000000 00:00 0
96900000-969fb000 rw-p 00000000 00:00 0
969fb000-96a00000 ---p 00000000 00:00 0
96b00000-96bfb000 rw-p 00000000 00:00 0
96bfb000-96c00000 ---p 00000000 00:00 0
96d00000-96df1000 rw-p 00000000 00:00 0
96df1000-96e00000 ---p 00000000 00:00 0
96f00000-96ff9000 rw-p 00000000 00:00 0
96ff9000-97000000 ---p 00000000 00:00 0
97100000-971f6000 rw-p 00000000 00:00 0
971f6000-97200000 ---p 00000000 00:00 0
97300000-973fd000 rw-p 00000000 00:00 0
973fd000-97400000 ---p 00000000 00:00 0
97500000-975ff000 rw-p 00000000 00:00 0
975ff000-97600000 ---p 00000000 00:00 0
97700000-977f0000 rw-p 00000000 00:00 0
977f0000-97800000 ---p 00000000 00:00 0
97900000-979fb000 rw-p 00000000 00:00 0
979fb000-97a00000 ---p 00000000 00:00 0
97b00000-97bff000 rw-p 00000000 00:00 0
97bff000-97c00000 ---p 00000000 00:00 0
97d00000-97df9000 rw-p 00000000 00:00 0
97df9000-97e00000 ---p 00000000 00:00 0
97e00000-97ef7000 rw-p 00000000 00:00 0
97ef7000-97f00000 ---p 00000000 00:00 0
97f00000-97ff9000 rw-p 00000000 00:00 0
97ff9000-98000000 ---p 00000000 00:00 0
98000000-980ec000 rw-p 00000000 00:00 0
980ec000-98100000 ---p 00000000 00:00 0
98100000-981f7000 rw-p 00000000 00:00 0
981f7000-98200000 ---p 00000000 00:00 0
98200000-982fd000 rw-p 00000000 00:00 0
982fd000-98300000 ---p 00000000 00:00 0
98300000-983fa000 rw-p 00000000 00:00 0
983fa000-98400000 ---p 00000000 00:00 0
98500000-98600000 rw-p 00000000 00:00 0
98700000-987ff000 rw-p 00000000 00:00 0
987ff000-98800000 ---p 00000000 00:00 0
98900000-989c1000 rw-p 00000000 00:00 0
989c1000-98a00000 ---p 00000000 00:00 0
98a00000-98af2000 rw-p 00000000 00:00 0
98af2000-98b00000 ---p 00000000 00:00 0
98b00000-98bc1000 rw-p 00000000 00:00 0
98bc1000-98c00000 ---p 00000000 00:00 0
98c00000-98ce5000 rw-p 00000000 00:00 0
98ce5000-98d00000 ---p 00000000 00:00 0
98d00000-98e00000 rw-p 00000000 00:00 0
98f00000-98fc1000 rw-p 00000000 00:00 0
98fc1000-99000000 ---p 00000000 00:00 0
99000000-99100000 rw-p 00000000 00:00 0
99100000-991fe000 rw-p 00000000 00:00 0
991fe000-99200000 ---p 00000000 00:00 0
99300000-99400000 rw-p 00000000 00:00 0
99500000-995f2000 rw-p 00000000 00:00 0
995f2000-99600000 ---p 00000000 00:00 0
99700000-997f2000 rw-p 00000000 00:00 0
997f2000-99800000 ---p 00000000 00:00 0
99800000-998c1000 rw-p 00000000 00:00 0
998c1000-99900000 ---p 00000000 00:00 0
99900000-999e5000 rw-p 00000000 00:00 0
999e5000-99a00000 ---p 00000000 00:00 0
99a00000-99ac1000 rw-p 00000000 00:00 0
99ac1000-99b00000 ---p 00000000 00:00 0
99b00000-99bca000 rw-p 00000000 00:00 0
99bca000-99c00000 ---p 00000000 00:00 0
99c00000-99cda000 rw-p 00000000 00:00 0
99cda000-99d00000 ---p 00000000 00:00 0
99d00000-99dfb000 rw-p 00000000 00:00 0
99dfb000-99e00000 ---p 00000000 00:00 0
99f00000-99ffb000 rw-p 00000000 00:00 0
99ffb000-9a000000 ---p 00000000 00:00 0
9a100000-9a1fe000 rw-p 00000000 00:00 0
9a1fe000-9a200000 ---p 00000000 00:00 0
9a300000-9a3f7000 rw-p 00000000 00:00 0
9a3f7000-9a400000 ---p 00000000 00:00 0
9a400000-9a500000 rw-p 00000000 00:00 0
9a500000-9a5c1000 rw-p 00000000 00:00 0
9a5c1000-9a600000 ---p 00000000 00:00 0
9a600000-9a6f2000 rw-p 00000000 00:00 0
9a6f2000-9a700000 ---p 00000000 00:00 0
9a700000-9a7c1000 rw-p 00000000 00:00 0
9a7c1000-9a800000 ---p 00000000 00:00 0
9a800000-9a8e5000 rw-p 00000000 00:00 0
9a8e5000-9a900000 ---p 00000000 00:00 0
9a900000-9a9e3000 rw-p 00000000 00:00 0
9a9e3000-9aa00000 ---p 00000000 00:00 0
9ab00000-9abf0000 rw-p 00000000 00:00 0
9abf0000-9ac00000 ---p 00000000 00:00 0
9ad00000-9adc1000 rw-p 00000000 00:00 0
9adc1000-9ae00000 ---p 00000000 00:00 0
9ae00000-9af00000 rw-p 00000000 00:00 0
9af00000-9affe000 rw-p 00000000 00:00 0
9affe000-9b000000 ---p 00000000 00:00 0
9b100000-9b1ff000 rw-p 00000000 00:00 0
9b1ff000-9b200000 ---p 00000000 00:00 0
9b300000-9b400000 rw-p 00000000 00:00 0
9b400000-9b4f8000 rw-p 00000000 00:00 0
9b4f8000-9b500000 ---p 00000000 00:00 0
9b500000-9b5da000 rw-p 00000000 00:00 0
9b5da000-9b600000 ---p 00000000 00:00 0
9b600000-9b6e5000 rw-p 00000000 00:00 0
9b6e5000-9b700000 ---p 00000000 00:00 0
9b700000-9b7ff000 rw-p 00000000 00:00 0
9b7ff000-9b800000 ---p 00000000 00:00 0
9b900000-9b9c1000 rw-p 00000000 00:00 0
9b9c1000-9ba00000 ---p 00000000 00:00 0
9ba00000-9bac7000 rw-p 00000000 00:00 0
9bac7000-9bb00000 ---p 00000000 00:00 0
9bb00000-9bbfb000 rw-p 00000000 00:00 0
9bbfb000-9bc00000 ---p 00000000 00:00 0
9bd00000-9bdfd000 rw-p 00000000 00:00 0
9bdfd000-9be00000 ---p 00000000 00:00 0
9bf00000-9bfd7000 rw-p 00000000 00:00 0
9bfd7000-9c000000 ---p 00000000 00:00 0
9c000000-9c100000 rw-p 00000000 00:00 0
9c100000-9c1fc000 rw-p 00000000 00:00 0
9c1fc000-9c200000 ---p 00000000 00:00 0
9c300000-9c3d7000 rw-p 00000000 00:00 0
9c3d7000-9c400000 ---p 00000000 00:00 0
9c500000-9c5c1000 rw-p 00000000 00:00 0
9c5c1000-9c600000 ---p 00000000 00:00 0
9c600000-9c6c1000 rw-p 00000000 00:00 0
9c6c1000-9c700000 ---p 00000000 00:00 0
9c700000-9c7e2000 rw-p 00000000 00:00 0
9c7e2000-9c800000 ---p 00000000 00:00 0
9c800000-9c8c1000 rw-p 00000000 00:00 0
9c8c1000-9c900000 ---p 00000000 00:00 0
9c900000-9c9f8000 rw-p 00000000 00:00 0
9c9f8000-9ca00000 ---p 00000000 00:00 0
9ca00000-9caff000 rw-p 00000000 00:00 0
9caff000-9cb00000 ---p 00000000 00:00 0
9cb00000-9cbff000 rw-p 00000000 00:00 0
9cbff000-9cc00000 ---p 00000000 00:00 0
9cd00000-9cdff000 rw-p 00000000 00:00 0
9cdff000-9ce00000 ---p 00000000 00:00 0
9cf00000-9d000000 rw-p 00000000 00:00 0
9d100000-9d1f5000 rw-p 00000000 00:00 0
9d1f5000-9d200000 ---p 00000000 00:00 0
9d300000-9d3ef000 rw-p 00000000 00:00 0
9d3ef000-9d400000 ---p 00000000 00:00 0
9d500000-9d600000 rw-p 00000000 00:00 0
9d700000-9d7fa000 rw-p 00000000 00:00 0
9d7fa000-9d800000 ---p 00000000 00:00 0
9d800000-9d8c1000 rw-p 00000000 00:00 0
9d8c1000-9d900000 ---p 00000000 00:00 0
9d900000-9d9c1000 rw-p 00000000 00:00 0
9d9c1000-9da00000 ---p 00000000 00:00 0
9da00000-9dac1000 rw-p 00000000 00:00 0
9dac1000-9db00000 ---p 00000000 00:00 0
9db00000-9dc00000 rw-p 00000000 00:00 0
9dd00000-9ddf8000 rw-p 00000000 00:00 0
9ddf8000-9de00000 ---p 00000000 00:00 0
9df00000-9dfff000 rw-p 00000000 00:00 0
9dfff000-9e000000 ---p 00000000 00:00 0
9e100000-9e1ff000 rw-p 00000000 00:00 0
9e1ff000-9e200000 ---p 00000000 00:00 0
9e200000-9e2ff000 rw-p 00000000 00:00 0
9e2ff000-9e300000 ---p 00000000 00:00 0
9e300000-9e3f4000 rw-p 00000000 00:00 0
9e3f4000-9e400000 ---p 00000000 00:00 0
9e400000-9e500000 rw-p 00000000 00:00 0
9e500000-9e5fe000 rw-p 00000000 00:00 0
9e5fe000-9e600000 ---p 00000000 00:00 0
9e700000-9e7d0000 rw-p 00000000 00:00 0
9e7d0000-9e800000 ---p 00000000 00:00 0
9e800000-9e900000 rw-p 00000000 00:00 0
9e900000-9e9c1000 rw-p 00000000 00:00 0
9e9c1000-9ea00000 ---p 00000000 00:00 0
9ea00000-9eac7000 rw-p 00000000 00:00 0
9eac7000-9eb00000 ---p 00000000 00:00 0
9eb00000-9ebff000 rw-p 00000000 00:00 0
9ebff000-9ec00000 ---p 00000000 00:00 0
9ed00000-9edff000 rw-p 00000000 00:00 0
9edff000-9ee00000 ---p 00000000 00:00 0
9ef00000-9f000000 rw-p 00000000 00:00 0
9f100000-9f1fe000 rw-p 00000000 00:00 0
9f1fe000-9f200000 ---p 00000000 00:00 0
9f300000-9f3fe000 rw-p 00000000 00:00 0
9f3fe000-9f400000 ---p 00000000 00:00 0
9f500000-9f5c9000 rw-p 00000000 00:00 0
9f5c9000-9f600000 ---p 00000000 00:00 0
9f700000-9f800000 rw-p 00000000 00:00 0
9f900000-9f9f7000 rw-p 00000000 00:00 0
9f9f7000-9fa00000 ---p 00000000 00:00 0
9fb00000-9fbfe000 rw-p 00000000 00:00 0
9fbfe000-9fc00000 ---p 00000000 00:00 0
9fd00000-9fe00000 rw-p 00000000 00:00 0
9ff00000-a0000000 rw-p 00000000 00:00 0
a0100000-a0200000 rw-p 00000000 00:00 0
a0300000-a0400000 rw-p 00000000 00:00 0
a0400000-a04fd000 rw-p 00000000 00:00 0
a04fd000-a0500000 ---p 00000000 00:00 0
a0500000-a05ff000 rw-p 00000000 00:00 0
a05ff000-a0600000 ---p 00000000 00:00 0
a0600000-a06f3000 rw-p 00000000 00:00 0
a06f3000-a0700000 ---p 00000000 00:00 0
a0700000-a07ff000 rw-p 00000000 00:00 0
a07ff000-a0800000 ---p 00000000 00:00 0
a0900000-a09c1000 rw-p 00000000 00:00 0
a09c1000-a0a00000 ---p 00000000 00:00 0
a0a00000-a0ad0000 rw-p 00000000 00:00 0
a0ad0000-a0b00000 ---p 00000000 00:00 0
a0b00000-a0bf7000 rw-p 00000000 00:00 0
a0bf7000-a0c00000 ---p 00000000 00:00 0
a0c00000-a0cc7000 rw-p 00000000 00:00 0
a0cc7000-a0d00000 ---p 00000000 00:00 0
a0d00000-a0dfd000 rw-p 00000000 00:00 0
a0dfd000-a0e00000 ---p 00000000 00:00 0
a0f00000-a0fc8000 rw-p 00000000 00:00 0
a0fc8000-a1000000 ---p 00000000 00:00 0
a1100000-a1200000 rw-p 00000000 00:00 0
a1300000-a13fb000 rw-p 00000000 00:00 0
a13fb000-a1400000 ---p 00000000 00:00 0
a1500000-a15f9000 rw-p 00000000 00:00 0
a15f9000-a1600000 ---p 00000000 00:00 0
a1600000-a16fc000 rw-p 00000000 00:00 0
a16fc000-a1700000 ---p 00000000 00:00 0
a1700000-a17f5000 rw-p 00000000 00:00 0
a17f5000-a1800000 ---p 00000000 00:00 0
a1900000-a1a00000 rw-p 00000000 00:00 0
a1b00000-a1bc1000 rw-p 00000000 00:00 0
a1bc1000-a1c00000 ---p 00000000 00:00 0
a1c00000-a1cfc000 rw-p 00000000 00:00 0
a1cfc000-a1d00000 ---p 00000000 00:00 0
a1d00000-a1dc1000 rw-p 00000000 00:00 0
a1dc1000-a1e00000 ---p 00000000 00:00 0
a1e00000-a1ec1000 rw-p 00000000 00:00 0
a1ec1000-a1f00000 ---p 00000000 00:00 0
a1f00000-a1fff000 rw-p 00000000 00:00 0
a1fff000-a2000000 ---p 00000000 00:00 0
a2100000-a21f3000 rw-p 00000000 00:00 0
a21f3000-a2200000 ---p 00000000 00:00 0
a2200000-a22e5000 rw-p 00000000 00:00 0
a22e5000-a2300000 ---p 00000000 00:00 0
a2300000-a23ee000 rw-p 00000000 00:00 0
a23ee000-a2400000 ---p 00000000 00:00 0
a2500000-a25fa000 rw-p 00000000 00:00 0
a25fa000-a2600000 ---p 00000000 00:00 0
a2700000-a27ff000 rw-p 00000000 00:00 0
a27ff000-a2800000 ---p 00000000 00:00 0
a2900000-a29f2000 rw-p 00000000 00:00 0
a29f2000-a2a00000 ---p 00000000 00:00 0
a2a00000-a2ac1000 rw-p 00000000 00:00 0
a2ac1000-a2b00000 ---p 00000000 00:00 0
a2b00000-a2c00000 rw-p 00000000 00:00 0
a2d00000-a2dc1000 rw-p 00000000 00:00 0
a2dc1000-a2e00000 ---p 00000000 00:00 0
a2e00000-a2ec1000 rw-p 00000000 00:00 0
a2ec1000-a2f00000 ---p 00000000 00:00 0
a2f00000-a2fc1000 rw-p 00000000 00:00 0
a2fc1000-a3000000 ---p 00000000 00:00 0
a3000000-a30c1000 rw-p 00000000 00:00 0
a30c1000-a3100000 ---p 00000000 00:00 0
a3100000-a31e1000 rw-p 00000000 00:00 0
a31e1000-a3200000 ---p 00000000 00:00 0
a327f000-a3400000 rw-p 00000000 00:00 0
a3400000-a3500000 rw-p 00000000 00:00 0
a3600000-a3700000 rw-p 00000000 00:00 0
a3700000-a37e6000 rw-p 00000000 00:00 0
a37e6000-a3800000 ---p 00000000 00:00 0
a3800000-a38e5000 rw-p 00000000 00:00 0
a38e5000-a3900000 ---p 00000000 00:00 0
a3a00000-a3ad0000 rw-p 00000000 00:00 0
a3ad0000-a3b00000 ---p 00000000 00:00 0
a3b00000-a3bda000 rw-p 00000000 00:00 0
a3bda000-a3c00000 ---p 00000000 00:00 0
a3c00000-a3cc1000 rw-p 00000000 00:00 0
a3cc1000-a3d00000 ---p 00000000 00:00 0
a3d00000-a3dc7000 rw-p 00000000 00:00 0
a3dc7000-a3e00000 ---p 00000000 00:00 0
a3e00000-a3eff000 rw-p 00000000 00:00 0
a3eff000-a3f00000 ---p 00000000 00:00 0
a3f00000-a3fc1000 rw-p 00000000 00:00 0
a3fc1000-a4000000 ---p 00000000 00:00 0
a4000000-a40f8000 rw-p 00000000 00:00 0
a40f8000-a4100000 ---p 00000000 00:00 0
a4200000-a4300000 rw-p 00000000 00:00 0
a4400000-a44ff000 rw-p 00000000 00:00 0
a44ff000-a4500000 ---p 00000000 00:00 0
a4600000-a4700000 rw-p 00000000 00:00 0
a4800000-a4900000 rw-p 00000000 00:00 0
a4900000-a49ff000 rw-p 00000000 00:00 0
a49ff000-a4a00000 ---p 00000000 00:00 0
a4b00000-a4bfe000 rw-p 00000000 00:00 0
a4bfe000-a4c00000 ---p 00000000 00:00 0
a4d00000-a4dc1000 rw-p 00000000 00:00 0
a4dc1000-a4e00000 ---p 00000000 00:00 0
a4e00000-a4ffc000 rw-p 00000000 00:00 0
a4ffc000-a5000000 ---p 00000000 00:00 0
a5100000-a51ff000 rw-p 00000000 00:00 0
a51ff000-a5200000 ---p 00000000 00:00 0
a5200000-a52ff000 rw-p 00000000 00:00 0
a52ff000-a5300000 ---p 00000000 00:00 0
a5300000-a53fa000 rw-p 00000000 00:00 0
a53fa000-a5400000 ---p 00000000 00:00 0
a5500000-a55de000 rw-p 00000000 00:00 0
a55de000-a5600000 ---p 00000000 00:00 0
a5700000-a57fa000 rw-p 00000000 00:00 0
a57fa000-a5800000 ---p 00000000 00:00 0
a5900000-a5a00000 rw-p 00000000 00:00 0
a5b00000-a5bf6000 rw-p 00000000 00:00 0
a5bf6000-a5c00000 ---p 00000000 00:00 0
a5d00000-a5e00000 rw-p 00000000 00:00 0
a5f00000-a5fff000 rw-p 00000000 00:00 0
a5fff000-a6000000 ---p 00000000 00:00 0
a6100000-a61ed000 rw-p 00000000 00:00 0
a61ed000-a6200000 ---p 00000000 00:00 0
a6300000-a63f7000 rw-p 00000000 00:00 0
a63f7000-a6400000 ---p 00000000 00:00 0
a6500000-a65ff000 rw-p 00000000 00:00 0
a65ff000-a6600000 ---p 00000000 00:00 0
a6700000-a6800000 rw-p 00000000 00:00 0
a6900000-a6a00000 rw-p 00000000 00:00 0
a6b00000-a6c00000 rw-p 00000000 00:00 0
a6d00000-a6dec000 rw-p 00000000 00:00 0
a6dec000-a6e00000 ---p 00000000 00:00 0
a6f00000-a7000000 rw-p 00000000 00:00 0
a7100000-a7200000 rw-p 00000000 00:00 0
a7200000-a72fb000 rw-p 00000000 00:00 0
a72fb000-a7300000 ---p 00000000 00:00 0
a7300000-a73fe000 rw-p 00000000 00:00 0
a73fe000-a7400000 ---p 00000000 00:00 0
a7400000-a7500000 rw-p 00000000 00:00 0
a7600000-a7800000 rw-p 00000000 00:00 0
a7800000-a7900000 rw-p 00000000 00:00 0
a7a00000-a7b00000 rw-p 00000000 00:00 0
a7c00000-a7cff000 rw-p 00000000 00:00 0
a7cff000-a7d00000 ---p 00000000 00:00 0
a7e00000-a7f00000 rw-p 00000000 00:00 0
a7f00000-a7fff000 rw-p 00000000 00:00 0
a7fff000-a8000000 ---p 00000000 00:00 0
a8000000-a80c1000 rw-p 00000000 00:00 0
a80c1000-a8100000 ---p 00000000 00:00 0
a8100000-a8200000 rw-p 00000000 00:00 0
a8200000-a82fe000 rw-p 00000000 00:00 0
a82fe000-a8300000 ---p 00000000 00:00 0
a8400000-a84fe000 rw-p 00000000 00:00 0
a84fe000-a8500000 ---p 00000000 00:00 0
a8600000-a87ee000 rw-p 00000000 00:00 0
a87ee000-a8800000 ---p 00000000 00:00 0
a8800000-a88fe000 rw-p 00000000 00:00 0
a88fe000-a8900000 ---p 00000000 00:00 0
a8a00000-a8b00000 rw-p 00000000 00:00 0
a8c00000-a8d00000 rw-p 00000000 00:00 0
a8e00000-a8f00000 rw-p 00000000 00:00 0
a8f00000-a8ffc000 rw-p 00000000 00:00 0
a8ffc000-a9000000 ---p 00000000 00:00 0
a9000000-a9100000 rw-p 00000000 00:00 0
a9100000-a9300000 rw-p 00000000 00:00 0
a9300000-a9500000 rw-p 00000000 00:00 0
a9500000-a95f8000 rw-p 00000000 00:00 0
a95f8000-a9600000 ---p 00000000 00:00 0
a9600000-a9700000 rw-p 00000000 00:00 0
a9700000-a9800000 rw-p 00000000 00:00 0
a9900000-a9a00000 rw-p 00000000 00:00 0
a9b00000-a9be9000 rw-p 00000000 00:00 0
a9be9000-a9c00000 ---p 00000000 00:00 0
a9c00000-a9cef000 rw-p 00000000 00:00 0
a9cef000-a9d00000 ---p 00000000 00:00 0
a9d00000-a9dc8000 rw-p 00000000 00:00 0
a9dc8000-a9e00000 ---p 00000000 00:00 0
a9e00000-a9ec7000 rw-p 00000000 00:00 0
a9ec7000-a9f00000 ---p 00000000 00:00 0
a9f00000-a9fc1000 rw-p 00000000 00:00 0
a9fc1000-aa000000 ---p 00000000 00:00 0
aa100000-aa1f2000 rw-p 00000000 00:00 0
aa1f2000-aa200000 ---p 00000000 00:00 0
aa200000-aa2c1000 rw-p 00000000 00:00 0
aa2c1000-aa300000 ---p 00000000 00:00 0
aa300000-aa3da000 rw-p 00000000 00:00 0
aa3da000-aa400000 ---p 00000000 00:00 0
aa400000-aa4e5000 rw-p 00000000 00:00 0
aa4e5000-aa500000 ---p 00000000 00:00 0
aa500000-aa5c1000 rw-p 00000000 00:00 0
aa5c1000-aa600000 ---p 00000000 00:00 0
aa600000-aa6d0000 rw-p 00000000 00:00 0
aa6d0000-aa700000 ---p 00000000 00:00 0
aa700000-aa7fe000 rw-p 00000000 00:00 0
aa7fe000-aa800000 ---p 00000000 00:00 0
aa900000-aab00000 rw-p 00000000 00:00 0
aab00000-aabe7000 rw-p 00000000 00:00 0
aabe7000-aac00000 ---p 00000000 00:00 0
aac00000-aacc1000 rw-p 00000000 00:00 0
aacc1000-aad00000 ---p 00000000 00:00 0
aad00000-aaf00000 rw-p 00000000 00:00 0
aaf00000-ab000000 rw-p 00000000 00:00 0
ab0ef000-ab0f0000 ---p 00000000 00:00 0
ab0f0000-ab8f0000 rwxp 00000000 00:00 0
ab8f0000-ab8f1000 ---p 00000000 00:00 0
ab8f1000-ac0f1000 rwxp 00000000 00:00 0
ac0f1000-ac0f4000 ---p 00000000 00:00 0
ac0f4000-ac8f2000 rwxp 00000000 00:00 0
ac8f2000-ac8f3000 ---p 00000000 00:00 0
ac8f3000-ad0f3000 rwxp 00000000 00:00 0
ad0f3000-ad0f6000 ---p 00000000 00:00 0
ad0f6000-ad8f4000 rwxp 00000000 00:00 0
ad8f4000-ad8f7000 ---p 00000000 00:00 0
ad8f7000-ae0f5000 rwxp 00000000 00:00 0
ae0f5000-ae0f6000 ---p 00000000 00:00 0
ae0f6000-ae8f6000 rwxp 00000000 00:00 0
ae8f6000-ae8f7000 ---p 00000000 00:00 0
ae8f7000-af0f7000 rwxp 00000000 00:00 0
af0f7000-af0f8000 ---p 00000000 00:00 0
af0f8000-af8f8000 rwxp 00000000 00:00 0
af8f8000-af8fb000 ---p 00000000 00:00 0
af8fb000-b00f9000 rwxp 00000000 00:00 0
b00f9000-b00fa000 ---p 00000000 00:00 0
b00fa000-b08fa000 rwxp 00000000 00:00 0
b08fa000-b08fb000 ---p 00000000 00:00 0
b08fb000-b10fb000 rwxp 00000000 00:00 0
b10fb000-b10fc000 ---p 00000000 00:00 0
b10fc000-b18fc000 rwxp 00000000 00:00 0
b18fc000-b18fd000 ---p 00000000 00:00 0
b18fd000-b20fd000 rwxp 00000000 00:00 0
b20fd000-b20fe000 ---p 00000000 00:00 0
b20fe000-b28fe000 rwxp 00000000 00:00 0
b28fe000-b28ff000 ---p 00000000 00:00 0
b28ff000-b30ff000 rwxp 00000000 00:00 0
b30ff000-b3100000 ---p 00000000 00:00 0
b3100000-b3900000 rwxp 00000000 00:00 0
b3900000-b3b00000 rw-p 00000000 00:00 0
b3b00000-b3d00000 rw-p 00000000 00:00 0
b3d00000-b3dce000 rw-p 00000000 00:00 0
b3dce000-b3e00000 ---p 00000000 00:00 0
b3ee9000-b406a000 rw-p 00000000 00:00 0
b406a000-b4200000 r--s 02fd0000 08:02 158129
/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/rt.jar
b4200000-b42fe000 rw-p 00000000 00:00 0
b42fe000-b4300000 ---p 00000000 00:00 0
b4304000-b4305000 rw-p 00000000 00:00 0
b4306000-b4307000 rw-p 00000000 00:00 0
b4307000-b430e000 r--s 00000000 08:02 336115
/usr/lib/gconv/gconv-modules.cache
b430e000-b4310000 rw-p 00000000 00:00 0
b4310000-b4312000 r--s 00002000 08:02 2703937
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/extensions.jar
b4312000-b4314000 r--s 00009000 08:02 2703934
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-instantiated-2.4.0.jar
b4314000-b4318000 r--s 00020000 08:02 2703933
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-analyzers-2.4.0.jar
b4318000-b4325000 r--s 000bb000 08:02 2703938
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-core-2.4.0.jar
b4325000-b4339000 rw-p 00000000 00:00 0
b4339000-b4353000 rw-p 00000000 00:00 0
b4353000-b44a9000 rw-p 00000000 00:00 0
b44a9000-b4553000 rw-p 00000000 00:00 0
b4553000-b46a9000 rw-p 00000000 00:00 0
b46a9000-b46af000 rw-p 00000000 00:00 0
b46af000-b46c9000 rw-p 00000000 00:00 0
b46c9000-b46dc000 rw-p 00000000 00:00 0
b46dc000-b4755000 rw-p 00000000 00:00 0
b4755000-b490d000 rwxp 00000000 00:00 0
b490d000-b6755000 rw-p 00000000 00:00 0
b6755000-b6757000 rw-p 00000000 00:00 0
b6757000-b6759000 r--s 00007000 08:02 2703931
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-queries-2.4.0.jar
b6759000-b675a000 r--s 00002000 08:02 2703935
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-regex-2.4.0.jar
b675a000-b675b000 ---p 00000000 00:00 0
b675b000-b6f5b000 rwxp 00000000 00:00 0
b6f5b000-b6f5c000 ---p 00000000 00:00 0
b6f5c000-b775c000 rwxp 00000000 00:00 0
b775c000-b775e000 rw-p 00000000 00:00 0
b775e000-b779d000 r--p 00000000 08:02 2835742
/usr/lib/locale/en_IN/LC_CTYPE
b779d000-b7821000 rw-p 00000000 00:00 0
b7821000-b7824000 r--s 00014000 08:02 2703932
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-highlighter-2.4.0.jar
b7824000-b7826000 r--s 0001a000 08:02 2703930
/home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.egg/lucene/lucene-snowball-2.4.0.jar
b7826000-b782e000 rw-s 00000000 08:02 2170936    /tmp/hsperfdata_mvmail/9541
b782e000-b782f000 rw-p 00000000 00:00 0
b782f000-b7830000 r--p 00000000 00:00 0
b7830000-b7832000 rw-p 00000000 00:00 0
bfbce000-bfbd1000 ---p 00000000 00:00 0
bfbd1000-bfc1e000 rwxp 00000000 00:00 0          [stack]
bfc1e000-bfc20000 rw-p 00000000 00:00 0

VM Arguments:
jvm_args: -Xms32m -Xmx1024m
java_command: <unknown>
Launcher Type: generic

Environment Variables:
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
USERNAME=mvmail
SHELL=/bin/bash
DISPLAY=:0.0

Signal Handlers:
SIGSEGV: [libjvm.so+0x418670], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGBUS: [libjvm.so+0x418670], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGFPE: [libjvm.so+0x33e070], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGPIPE: [libjvm.so+0x33e070], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGXFSZ: [libjvm.so+0x33e070], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGILL: [libjvm.so+0x33e070], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGUSR2: [libjvm.so+0x340cb0], sa_mask[0]=0x00000000, sa_flags=0x10000004
SIGHUP: [libjvm.so+0x3409e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGINT: [+0xad9b0], sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGTERM: [+0xad9b0], sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGQUIT: [+0xad9b0], sa_mask[0]=0x00000000, sa_flags=0x00000000


---------------  S Y S T E M  ---------------

OS:squeeze/sid

uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:04:26 UTC 2009
i686
libc:glibc 2.10.1 NPTL 2.10.1
rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity
load average:4.19 2.49 1.88

CPU:total 8 (2 cores per cpu, 2 threads per core) family 15 model 6 stepping
4, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ht

Memory: 4k page, physical 3096484k(92904k free), swap 7812492k(7682632k
free)

vm_info: Java HotSpot(TM) Client VM (16.3-b01) for linux-x86 JRE
(1.6.0_20-b02), built on Apr 12 2010 14:15:08 by "java_re" with gcc 3.2.1-7a
(J2SE release)

time: Fri Oct 15 18:20:54 2010
elapsed time: 48191 seconds


*

--0015174c383486c5220492df8e8d--

From java-user-return-47538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 09:42:10 2010
Return-Path: <java-user-return-47538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60155 invoked from network); 18 Oct 2010 09:42:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 09:42:09 -0000
Received: (qmail 28823 invoked by uid 500); 18 Oct 2010 09:42:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28447 invoked by uid 500); 18 Oct 2010 09:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28439 invoked by uid 99); 18 Oct 2010 09:42:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 09:42:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 09:41:56 +0000
Received: by qyk29 with SMTP id 29so771080qyk.14
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 02:41:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=8e7Pp9zhP/ZXo6a810MKG2VP3YFaJyjGgFR1dz9X0Po=;
        b=dQZ3p5slI0Pc+vuZkmU0W1oM41CvlZJV1OrKDE04W9nzjLv28JHj6gJOL59j5X552d
         QdVJz+KTNtNSxVoSKFS/EiBrI9dGHZN67k8ZXxIwQFDYzN4nil/rK2CHydPCf+3CcINb
         XhuhG5amruMNvHyej8E+Ni6nJ3JtKyqTnYqE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GaFnuWmsLgvKclAHVxkyyqcUvKLvjPJXdYlmrvn0eodoT1bq8uPx/o5AgWE8XdHTfT
         euEnONH3C4wbtLJLfcPOk3gfEgOxwiSrNJ+0/2uRgWYo3Ll+EPMCmEogdyG5mTng5mCl
         r0wVEzx9SZDXxapJ/hHV/p7Vf9GvufIWob61w=
Received: by 10.229.88.10 with SMTP id y10mr3652395qcl.144.1287394894359; Mon,
 18 Oct 2010 02:41:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Mon, 18 Oct 2010 02:41:13 -0700 (PDT)
In-Reply-To: <AANLkTi=DHYWzwRT5gwLTBXRJiC+E1qH-U==FfODynbm_@mail.gmail.com>
References: <AANLkTi=DHYWzwRT5gwLTBXRJiC+E1qH-U==FfODynbm_@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 18 Oct 2010 10:41:13 +0100
Message-ID: <AANLkTikJB+nc_RE1Lyc1r7y1YA6rGZ_HbSFURd6TBh8Z@mail.gmail.com>
Subject: Re: java.lang.OutOfMemoryError: Java heap space error crashed my application.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OOM errors don't normally cause SIGSEGV crashes, but maybe that is
something to do with python.  Have you tried just giving it more
memory - that would be quick and easy.  Impossible to say how much
memory your app will need, but it might well have a memory leak - a
profiler would cut out the guesswork.

Other general tips: use up to date versions of java and lucene, and
python I guess.  Make sure you are closing old readers/searchers and
writers.  Sorting in lucene can use lots of memory - if you are
sorting on numerics, take a look at NumericField.


--
Ian.


On Mon, Oct 18, 2010 at 8:59 AM, Antony Joseph <antonyjoseph89@gmail.com> w=
rote:
> Hi all,
>
> I got this java.lang.OutOfMemoryError: Java heap space error on searching
> and also it crashed my application [Python.exe].
>
> Its an long running web application say 24X7, I created two separate thre=
ads
> for indexing and searching.
>
> I close my IndexWriter and IndexSearcher at the end of every 1000 docs ge=
t
> added in the index.
>
> When i start my application i do searching without any errors but after o=
ne
> or two day if i do the same search i got =A0java.lang.OutOfMemoryError an=
d
> apps get crashed by java.
>
> Is there any memory leaks in my app? or should i increase my JVM memory
> size?
>
> Please help me .
>
> Thanks
> Antony
>
>
> *Settings*:
>
> VM Arguments:
> jvm_args: -Xms32m -Xmx1024m
>
> *System:*
>
> Python 2.5.1
>
> Lucene 2.4.1
>
> OS:squeeze/sid
> uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:04:26 UTC 2009
> i686
> libc:glibc 2.10.1 NPTL 2.10.1
> rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity
> load average:4.19 2.49 1.88
> CPU:total 8 (2 cores per cpu, 2 threads per core) family 15 model 6 stepp=
ing
> 4, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ht
> Memory: 4k page, physical 3096484k(92904k free), swap 7812492k(7682632k
> free)
> vm_info: Java HotSpot(TM) Client VM (16.3-b01) for linux-x86 JRE
> (1.6.0_20-b02), built on Apr 12 2010 14:15:08 by "java_re" with gcc 3.2.1=
-7a
> (J2SE release)
>
> *Index :*
> *_8osa.cfs =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A041.19 =A0GB
> _8osb.cfs =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 2.38 GB
> segments.gen =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A00.01 KB
> segments_7thj =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 0.09 kB
>
>
> crash report**:
>
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> # =A0SIGSEGV (0xb) at pc=3D0x0157d2e0, pid=3D9541, tid=3D93391728
> #
> # JRE version: 6.0_20-b02
> # Java VM: Java HotSpot(TM) Client VM (16.3-b01 mixed mode, sharing
> linux-x86 )
> # Problematic frame:
> # C =A0[_lucene.so+0x5882e0] =A0_ZN6JCCEnv15deleteGlobalRefEP8_jobjecti+0=
x170
> #
> # If you would like to submit a bug report, please visit:
> # =A0 http://java.sun.com/webapps/bugreport/crash.jsp
> #
>
> --------------- =A0T H R E A D =A0---------------
>
> Current thread is native thread
>
> siginfo:si_signo=3DSIGSEGV: si_errno=3D0, si_code=3D1 (SEGV_MAPERR),
> si_addr=3D0x00000000
>
> Registers:
> EAX=3D0x00000000, EBX=3D0x016e5ff4, ECX=3D0x0a417f20, EDX=3D0x00000002
> ESP=3D0x0590f0b0, EBP=3D0x0590f0e8, ESI=3D0xb4204814, EDI=3D0x481f0fd8
> EIP=3D0x0157d2e0, CR2=3D0x00000000, EFLAGS=3D0x00210246
>
> Top of Stack: (sp=3D0x0590f0b0)
> 0x0590f0b0: =A0 00000002 0a417f20 0a417f20 0590f0d0
> 0x0590f0c0: =A0 00000000 ffffffff 0a417f20 00000188
> 0x0590f0d0: =A0 aaf00010 0035aff4 016e23c8 016e5ff4
> 0x0590f0e0: =A0 00000000 9d879080 0590f128 01220dcc
> 0x0590f0f0: =A0 b42047f8 0a417f20 00321faa 08079bc6
> 0x0590f100: =A0 9fd4d860 0a417f20 aaf00010 00000001
> 0x0590f110: =A0 016ddb70 00000000 00000000 09cb3d84
> 0x0590f120: =A0 00000015 00000000 0590f168 0810f75b
>
> Instructions: (pc=3D0x0157d2e0)
> 0x0157d2d0: =A0 8b 00 89 55 e0 89 04 24 e8 83 d4 bc ff 8b 4d e0
> 0x0157d2e0: =A0 8b 10 89 4c 24 04 89 04 24 ff 52 58 89 74 24 04
>
> Stack: [0x05110000,0x05911000], =A0sp=3D0x0590f0b0, =A0free space=3D1ffc0=
590ea40k
> Native frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code, C=
=3Dnative
> code)
> C =A0[_lucene.so+0x5882e0] =A0_ZN6JCCEnv15deleteGlobalRefEP8_jobjecti+0x1=
70
> C =A0[_lucene.so+0x22bdcc]
> C =A0[python2.5+0xc775b]
> C =A0[python2.5+0xab2de]
> C =A0[python2.5+0xab8eb] =A0_PyObject_GC_Malloc+0xcb
> C =A0[python2.5+0xab955] =A0_PyObject_GC_New+0x15
> C =A0[python2.5+0xc10e6] =A0PyCell_New+0x16
> C =A0[python2.5+0x84e14] =A0PyEval_EvalCodeEx+0x6c4
> C =A0[python2.5+0x83506] =A0PyEval_EvalFrameEx+0x4476
> C =A0[python2.5+0x84e7c] =A0PyEval_EvalCodeEx+0x72c
> C =A0[python2.5+0x83506] =A0PyEval_EvalFrameEx+0x4476
> C =A0[python2.5+0xc6d4f]
> C =A0[python2.5+0x341a6]
> C =A0[python2.5+0x346ac]
> C =A0[python2.5+0x61f99]
> C =A0[python2.5+0x15367] =A0PyObject_Call+0x27
> C =A0[python2.5+0x8322b] =A0PyEval_EvalFrameEx+0x419b
> C =A0[python2.5+0x84e7c] =A0PyEval_EvalCodeEx+0x72c
> C =A0[python2.5+0xc909e]
> C =A0[python2.5+0x15367] =A0PyObject_Call+0x27
> C =A0[python2.5+0x1bf5c]
> C =A0[python2.5+0x15367] =A0PyObject_Call+0x27
> C =A0[python2.5+0x5d149]
> C =A0[python2.5+0x5d960]
> C =A0[python2.5+0x82e33] =A0PyEval_EvalFrameEx+0x3da3
> C =A0[python2.5+0x84685] =A0PyEval_EvalFrameEx+0x55f5
> C =A0[python2.5+0x84685] =A0PyEval_EvalFrameEx+0x55f5
> C =A0[python2.5+0x84685] =A0PyEval_EvalFrameEx+0x55f5
> C =A0[python2.5+0x84685] =A0PyEval_EvalFrameEx+0x55f5
> C =A0[python2.5+0x84e7c] =A0PyEval_EvalCodeEx+0x72c
> C =A0[python2.5+0xc909e]
> C =A0[python2.5+0x15367] =A0PyObject_Call+0x27
> C =A0[python2.5+0x1bf5c]
> C =A0[python2.5+0x15367] =A0PyObject_Call+0x27
> C =A0[python2.5+0x7e0ac] =A0PyEval_CallObjectWithKeywords+0x6c
> C =A0[python2.5+0xac288]
> C =A0[libpthread.so.0+0x580e]
>
>
> --------------- =A0P R O C E S S =A0---------------
>
> VM state:not at safepoint (normal execution)
>
> VM Mutex/Monitor currently owned by a thread: None
>
> Heap
> =A0def new generation =A0 total 314560K, used 166541K [0x4ed40000, 0x6429=
0000,
> 0x64290000)
> =A0eden space 279616K, =A059% used [0x4ed40000, 0x58fe3588, 0x5fe50000)
> =A0from space 34944K, =A0 0% used [0x62070000, 0x62070000, 0x64290000)
> =A0to =A0 space 34944K, =A0 0% used [0x5fe50000, 0x5fe50000, 0x62070000)
> =A0tenured generation =A0 total 699072K, used 523436K [0x64290000, 0x8ed4=
0000,
> 0x8ed40000)
> =A0 the space 699072K, =A074% used [0x64290000, 0x841bb148, 0x841bb200,
> 0x8ed40000)
> =A0compacting perm gen =A0total 12288K, used 1839K [0x8ed40000, 0x8f94000=
0,
> 0x92d40000)
> =A0 the space 12288K, =A014% used [0x8ed40000, 0x8ef0bc60, 0x8ef0be00,
> 0x8f940000)
> =A0 =A0ro space 10240K, =A061% used [0x92d40000, 0x93366298, 0x93366400,
> 0x93740000)
> =A0 =A0rw space 12288K, =A060% used [0x93740000, 0x93e76cb8, 0x93e76e00,
> 0x94340000)
>
> Dynamic libraries:
> 00110000-00151000 r-xp 00000000 08:02 1409241
> /lib/i686/cmov/libssl.so.0.9.8
> 00151000-00152000 ---p 00041000 08:02 1409241
> /lib/i686/cmov/libssl.so.0.9.8
> 00152000-00153000 r--p 00041000 08:02 1409241
> /lib/i686/cmov/libssl.so.0.9.8
> 00153000-00156000 rw-p 00042000 08:02 1409241
> /lib/i686/cmov/libssl.so.0.9.8
> 00156000-0015a000 r-xp 00000000 08:02 2878152
> /usr/lib/python2.5/lib-dynload/strop.so
> 0015a000-0015b000 r--p 00004000 08:02 2878152
> /usr/lib/python2.5/lib-dynload/strop.so
> 0015b000-0015d000 rw-p 00005000 08:02 2878152
> /usr/lib/python2.5/lib-dynload/strop.so
> 0015d000-0015e000 r-xp 00000000 08:02 2878160
> /usr/lib/python2.5/lib-dynload/_weakref.so
> 0015e000-0015f000 r--p 00000000 08:02 2878160
> /usr/lib/python2.5/lib-dynload/_weakref.so
> 0015f000-00160000 rw-p 00001000 08:02 2878160
> /usr/lib/python2.5/lib-dynload/_weakref.so
> 00160000-0016f000 r-xp 00000000 08:02 2878162
> /usr/lib/python2.5/lib-dynload/datetime.so
> 0016f000-00170000 r--p 0000e000 08:02 2878162
> /usr/lib/python2.5/lib-dynload/datetime.so
> 00170000-00173000 rw-p 0000f000 08:02 2878162
> /usr/lib/python2.5/lib-dynload/datetime.so
> 00174000-0017e000 r-xp 00000000 08:02 2875818
> /usr/lib/python2.5/lib-dynload/_socket.so
> 0017e000-0017f000 r--p 00009000 08:02 2875818
> /usr/lib/python2.5/lib-dynload/_socket.so
> 0017f000-00182000 rw-p 0000a000 08:02 2875818
> /usr/lib/python2.5/lib-dynload/_socket.so
> 00182000-00197000 r-xp 00000000 08:02 2878183
> /usr/lib/python2.5/lib-dynload/_bsddb.so
> 00197000-00198000 r--p 00014000 08:02 2878183
> /usr/lib/python2.5/lib-dynload/_bsddb.so
> 00198000-0019a000 rw-p 00015000 08:02 2878183
> /usr/lib/python2.5/lib-dynload/_bsddb.so
> 0019a000-0019d000 r-xp 00000000 08:02 2877201
> /usr/lib/python2.5/lib-dynload/math.so
> 0019d000-0019e000 r--p 00002000 08:02 2877201
> /usr/lib/python2.5/lib-dynload/math.so
> 0019e000-0019f000 rw-p 00003000 08:02 2877201
> /usr/lib/python2.5/lib-dynload/math.so
> 0019f000-001a2000 r-xp 00000000 08:02 2877198
> /usr/lib/python2.5/lib-dynload/fcntl.so
> 001a2000-001a3000 r--p 00002000 08:02 2877198
> /usr/lib/python2.5/lib-dynload/fcntl.so
> 001a3000-001a4000 rw-p 00003000 08:02 2877198
> /usr/lib/python2.5/lib-dynload/fcntl.so
> 001a4000-001a6000 r-xp 00000000 08:02 2878182
> /usr/lib/python2.5/lib-dynload/_hashlib.so
> 001a6000-001a7000 r--p 00001000 08:02 2878182
> /usr/lib/python2.5/lib-dynload/_hashlib.so
> 001a7000-001a8000 rw-p 00002000 08:02 2878182
> /usr/lib/python2.5/lib-dynload/_hashlib.so
> 001a8000-001b8000 r-xp 00000000 08:02 2878173
> /usr/lib/python2.5/lib-dynload/cPickle.so
> 001b8000-001b9000 r--p 0000f000 08:02 2878173
> /usr/lib/python2.5/lib-dynload/cPickle.so
> 001b9000-001ba000 rw-p 00010000 08:02 2878173
> /usr/lib/python2.5/lib-dynload/cPickle.so
> 001ba000-001bc000 r-xp 00000000 08:02 2878187
> /usr/lib/python2.5/lib-dynload/resource.so
> 001bc000-001bd000 r--p 00001000 08:02 2878187
> /usr/lib/python2.5/lib-dynload/resource.so
> 001bd000-001be000 rw-p 00002000 08:02 2878187
> /usr/lib/python2.5/lib-dynload/resource.so
> 001be000-001c3000 r-xp 00000000 08:02 2877200
> /usr/lib/python2.5/lib-dynload/itertools.so
> 001c3000-001c4000 r--p 00004000 08:02 2877200
> /usr/lib/python2.5/lib-dynload/itertools.so
> 001c4000-001c6000 rw-p 00005000 08:02 2877200
> /usr/lib/python2.5/lib-dynload/itertools.so
> 001c6000-001f4000 r-xp 00000000 08:02 2878193
> /usr/lib/python2.5/lib-dynload/pyexpat.so
> 001f4000-001f6000 r--p 0002d000 08:02 2878193
> /usr/lib/python2.5/lib-dynload/pyexpat.so
> 001f6000-001f7000 rw-p 0002f000 08:02 2878193
> /usr/lib/python2.5/lib-dynload/pyexpat.so
> 001f7000-001f8000 rw-p 00000000 00:00 0
> 001f8000-001fa000 r-xp 00000000 08:02 2875779
> /usr/lib/pyshared/python2.5/OpenSSL/rand.so
> 001fa000-001fb000 r--p 00001000 08:02 2875779
> /usr/lib/pyshared/python2.5/OpenSSL/rand.so
> 001fb000-001fc000 rw-p 00002000 08:02 2875779
> /usr/lib/pyshared/python2.5/OpenSSL/rand.so
> 001fc000-001fd000 r-xp 00000000 08:02 2878164
> /usr/lib/python2.5/lib-dynload/_bisect.so
> 001fd000-001fe000 r--p 00000000 08:02 2878164
> /usr/lib/python2.5/lib-dynload/_bisect.so
> 001fe000-001ff000 rw-p 00001000 08:02 2878164
> /usr/lib/python2.5/lib-dynload/_bisect.so
> 001ff000-00204000 r-xp 00000000 08:02 2803555 =A0 =A0/usr/lib/libgdbm.so.=
3.0.0
> 00204000-00205000 r--p 00004000 08:02 2803555 =A0 =A0/usr/lib/libgdbm.so.=
3.0.0
> 00205000-00206000 rw-p 00005000 08:02 2803555 =A0 =A0/usr/lib/libgdbm.so.=
3.0.0
> 00206000-00209000 r-xp 00000000 08:02 2878151
> /usr/lib/python2.5/lib-dynload/select.so
> 00209000-0020a000 r--p 00002000 08:02 2878151
> /usr/lib/python2.5/lib-dynload/select.so
> 0020a000-0020b000 rw-p 00003000 08:02 2878151
> /usr/lib/python2.5/lib-dynload/select.so
> 0020b000-00210000 r-xp 00000000 08:02 2878180
> /usr/lib/python2.5/lib-dynload/_csv.so
> 00210000-00211000 r--p 00004000 08:02 2878180
> /usr/lib/python2.5/lib-dynload/_csv.so
> 00211000-00213000 rw-p 00005000 08:02 2878180
> /usr/lib/python2.5/lib-dynload/_csv.so
> 00213000-00219000 r-xp 00000000 08:02 164065
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/native_threads/libhpi.so
> 00219000-0021a000 rw-p 00006000 08:02 164065
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/native_threads/libhpi.so
> 0021a000-0021b000 r-xp 00000000 00:00 0 =A0 =A0 =A0 =A0 =A0[vdso]
> 0021b000-00359000 r-xp 00000000 08:02 1434033 =A0 =A0/lib/tls/i686/cmov/
> libc-2.10.1.so
> 00359000-0035b000 r--p 0013e000 08:02 1434033 =A0 =A0/lib/tls/i686/cmov/
> libc-2.10.1.so
> 0035b000-0035c000 rw-p 00140000 08:02 1434033 =A0 =A0/lib/tls/i686/cmov/
> libc-2.10.1.so
> 0035c000-0035f000 rw-p 00000000 00:00 0
> 0035f000-0036c000 r-xp 00000000 08:02 2878184
> /usr/lib/python2.5/lib-dynload/_sqlite3.so
> 0036c000-0036d000 r--p 0000c000 08:02 2878184
> /usr/lib/python2.5/lib-dynload/_sqlite3.so
> 0036d000-0036e000 rw-p 0000d000 08:02 2878184
> /usr/lib/python2.5/lib-dynload/_sqlite3.so
> 0036e000-00391000 r-xp 00000000 08:02 164077
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libjava.so
> 00391000-00393000 rw-p 00023000 08:02 164077
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libjava.so
> 00394000-00399000 r-xp 00000000 08:02 2876301
> /usr/lib/python2.5/lib-dynload/_struct.so
> 00399000-0039a000 r--p 00004000 08:02 2876301
> /usr/lib/python2.5/lib-dynload/_struct.so
> 0039a000-0039b000 rw-p 00005000 08:02 2876301
> /usr/lib/python2.5/lib-dynload/_struct.so
> 0039b000-00400000 r-xp 00000000 08:02 2878155
> /usr/lib/python2.5/lib-dynload/unicodedata.so
> 00400000-00401000 r--p 00064000 08:02 2878155
> /usr/lib/python2.5/lib-dynload/unicodedata.so
> 00401000-00410000 rw-p 00065000 08:02 2878155
> /usr/lib/python2.5/lib-dynload/unicodedata.so
> 00410000-0042c000 r-xp 00000000 08:02 1409081 =A0 =A0/lib/libgcc_s.so.1
> 0042c000-0042d000 r--p 0001b000 08:02 1409081 =A0 =A0/lib/libgcc_s.so.1
> 0042d000-0042e000 rw-p 0001c000 08:02 1409081 =A0 =A0/lib/libgcc_s.so.1
> 0042f000-00431000 r-xp 00000000 08:02 2875768
> /usr/lib/python2.5/lib-dynload/_random.so
> 00431000-00432000 r--p 00002000 08:02 2875768
> /usr/lib/python2.5/lib-dynload/_random.so
> 00432000-00433000 rw-p 00003000 08:02 2875768
> /usr/lib/python2.5/lib-dynload/_random.so
> 00433000-0043e000 r-xp 00000000 08:02 164076
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libverify.so
> 0043e000-0043f000 rw-p 0000b000 08:02 164076
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libverify.so
> 0043f000-00452000 r-xp 00000000 08:02 1434044 =A0 =A0/lib/tls/i686/cmov/
> libnsl-2.10.1.so
> 00452000-00453000 r--p 00012000 08:02 1434044 =A0 =A0/lib/tls/i686/cmov/
> libnsl-2.10.1.so
> 00453000-00454000 rw-p 00013000 08:02 1434044 =A0 =A0/lib/tls/i686/cmov/
> libnsl-2.10.1.so
> 00454000-00456000 rw-p 00000000 00:00 0
> 00456000-0045c000 r-xp 00000000 08:02 1434046 =A0 =A0/lib/tls/i686/cmov/
> libnss_compat-2.10.1.so
> 0045c000-0045d000 r--p 00005000 08:02 1434046 =A0 =A0/lib/tls/i686/cmov/
> libnss_compat-2.10.1.so
> 0045d000-0045e000 rw-p 00006000 08:02 1434046 =A0 =A0/lib/tls/i686/cmov/
> libnss_compat-2.10.1.so
> 0045e000-00467000 r-xp 00000000 08:02 1434054 =A0 =A0/lib/tls/i686/cmov/
> libnss_nis-2.10.1.so
> 00467000-00468000 r--p 00008000 08:02 1434054 =A0 =A0/lib/tls/i686/cmov/
> libnss_nis-2.10.1.so
> 00468000-00469000 rw-p 00009000 08:02 1434054 =A0 =A0/lib/tls/i686/cmov/
> libnss_nis-2.10.1.so
> 00469000-0046c000 r-xp 00000000 08:02 1409192 =A0 =A0/lib/libuuid.so.1.3.=
0
> 0046c000-0046d000 r--p 00002000 08:02 1409192 =A0 =A0/lib/libuuid.so.1.3.=
0
> 0046d000-0046e000 rw-p 00003000 08:02 1409192 =A0 =A0/lib/libuuid.so.1.3.=
0
> 0046e000-00471000 r-xp 00000000 08:02 2703630
> /home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.=
egg/Cheetah/_namemapper.so
> 00471000-00472000 r--p 00002000 08:02 2703630
> /home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.=
egg/Cheetah/_namemapper.so
> 00472000-00473000 rw-p 00003000 08:02 2703630
> /home/mvmail/test/demo/core/site-packages/Cheetah-2.4.1-py2.5-linux-i686.=
egg/Cheetah/_namemapper.so
> 00473000-00475000 r-xp 00000000 08:02 1409132
> /lib/libnss_mdns4_minimal.so.2
> 00475000-00476000 r--p 00001000 08:02 1409132
> /lib/libnss_mdns4_minimal.so.2
> 00476000-00477000 rw-p 00002000 08:02 1409132
> /lib/libnss_mdns4_minimal.so.2
> 00477000-0047a000 r-xp 00000000 08:02 2878154
> /usr/lib/python2.5/lib-dynload/time.so
> 0047a000-0047b000 r--p 00002000 08:02 2878154
> /usr/lib/python2.5/lib-dynload/time.so
> 0047b000-0047d000 rw-p 00003000 08:02 2878154
> /usr/lib/python2.5/lib-dynload/time.so
> 0047d000-005aa000 r-xp 00000000 08:02 1409240
> /lib/i686/cmov/libcrypto.so.0.9.8
> 005aa000-005b2000 r--p 0012c000 08:02 1409240
> /lib/i686/cmov/libcrypto.so.0.9.8
> 005b2000-005bf000 rw-p 00134000 08:02 1409240
> /lib/i686/cmov/libcrypto.so.0.9.8
> 005bf000-005c3000 rw-p 00000000 00:00 0
> 005c3000-005d2000 r-xp 00000000 08:02 164080
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libzip.so
> 005d2000-005d4000 rw-p 0000e000 08:02 164080
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/libzip.so
> 005d4000-005d7000 ---p 00000000 00:00 0
> 005d7000-00625000 rwxp 00000000 00:00 0
> 00625000-0062b000 r-xp 00000000 08:02 2878195
> /usr/lib/python2.5/lib-dynload/_multibytecodec.so
> 0062b000-0062c000 r--p 00005000 08:02 2878195
> /usr/lib/python2.5/lib-dynload/_multibytecodec.so
> 0062c000-0062d000 rw-p 00006000 08:02 2878195
> /usr/lib/python2.5/lib-dynload/_multibytecodec.so
> 00632000-00634000 r-xp 00000000 08:02 1434067 =A0 =A0/lib/tls/i686/cmov/
> libutil-2.10.1.so
> 00634000-00635000 r--p 00001000 08:02 1434067 =A0 =A0/lib/tls/i686/cmov/
> libutil-2.10.1.so
> 00635000-00636000 rw-p 00002000 08:02 1434067 =A0 =A0/lib/tls/i686/cmov/
> libutil-2.10.1.so
> 00636000-0063a000 r-xp 00000000 08:02 2878201
> /usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
> 0063a000-0063b000 r--p 00003000 08:02 2878201
> /usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
> 0063b000-0063c000 rw-p 00004000 08:02 2878201
> /usr/lib/python2.5/lib-dynload/_codecs_iso2022.so
> 00640000-00644000 r-xp 00000000 08:02 2878156
> /usr/lib/python2.5/lib-dynload/zlib.so
> 00644000-00645000 r--p 00003000 08:02 2878156
> /usr/lib/python2.5/lib-dynload/zlib.so
> 00645000-00646000 rw-p 00004000 08:02 2878156
> /usr/lib/python2.5/lib-dynload/zlib.so
> 00646000-00649000 ---p 00000000 00:00 0
> 00649000-00697000 rwxp 00000000 00:00 0
> 006a4000-006c8000 r-xp 00000000 08:02 1434041 =A0 =A0/lib/tls/i686/cmov/
> libm-2.10.1.so
> 006c8000-006c9000 r--p 00023000 08:02 1434041 =A0 =A0/lib/tls/i686/cmov/
> libm-2.10.1.so
> 006c9000-006ca000 rw-p 00024000 08:02 1434041 =A0 =A0/lib/tls/i686/cmov/
> libm-2.10.1.so
> 006d2000-006ed000 r-xp 00000000 08:02 1409047 =A0 =A0/lib/ld-2.10.1.so
> 006ed000-006ee000 r--p 0001a000 08:02 1409047 =A0 =A0/lib/ld-2.10.1.so
> 006ee000-006ef000 rw-p 0001b000 08:02 1409047 =A0 =A0/lib/ld-2.10.1.so
> 006ef000-006f2000 ---p 00000000 00:00 0
> 006f2000-00740000 rwxp 00000000 00:00 0
> 0074a000-00751000 r-xp 00000000 08:02 2705574
> /home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simpl=
ejson/_speedups.so
> 00751000-00752000 r--p 00006000 08:02 2705574
> /home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simpl=
ejson/_speedups.so
> 00752000-00753000 rw-p 00007000 08:02 2705574
> /home/mvmail/.python-eggs/simplejson-2.0.9-py2.5-linux-i686.egg-tmp/simpl=
ejson/_speedups.so
> 00753000-00756000 ---p 00000000 00:00 0
> 00756000-007a4000 rwxp 00000000 00:00 0
> 007a7000-007b5000 r-xp 00000000 08:02 2696528
> /home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
> 007b5000-007b6000 ---p 0000e000 08:02 2696528
> /home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
> 007b6000-007b7000 r--p 0000e000 08:02 2696528
> /home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
> 007b7000-007b9000 rw-p 0000f000 08:02 2696528
> /home/mvmail/test/demo/core/site-packages/pysqlite2/_sqlite.so
> 007b9000-007bc000 ---p 00000000 00:00 0
> 007bc000-0080a000 rwxp 00000000 00:00 0
> 0080a000-0081a000 r-xp 00000000 08:02 2703679
> /home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i=
686.egg/_ldap.so
> 0081a000-0081b000 r--p 0000f000 08:02 2703679
> /home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i=
686.egg/_ldap.so
> 0081b000-0081c000 rw-p 00010000 08:02 2703679
> /home/mvmail/test/demo/core/site-packages/python_ldap-2.3.9-py2.5-linux-i=
686.egg/_ldap.so
> 0081c000-00834000 r-xp 00000000 08:02 2804105 =A0 =A0/usr/lib/libsasl2.so=
.2.0.23
> 00834000-00835000 r--p 00017000 08:02 2804105 =A0 =A0/usr/lib/libsasl2.so=
.2.0.23
> 00835000-00836000 rw-p 00018000 08:02 2804105 =A0 =A0/usr/lib/libsasl2.so=
.2.0.23
> 00838000-0083f000 r-xp 00000000 08:02 2875949
> /usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
> 0083f000-00840000 r--p 00006000 08:02 2875949
> /usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
> 00840000-00841000 rw-p 00007000 08:02 2875949
> /usr/lib/python2.5/site-packages/Crypto/Cipher/AES.so
> 00841000-00882000 r-xp 00000000 08:02 294945
> /usr/lib/libldap_r-2.4.so.2.5.1
> 00882000-00883000 ---p 00041000 08:02 294945
> /usr/lib/libldap_r-2.4.so.2.5.1
> 00883000-00884000 r--p 00041000 08:02 294945
> /usr/lib/libldap_r-2.4.so.2.5.1
> 00884000-00885000 rw-p 00042000 08:02 294945
> /usr/lib/libldap_r-2.4.so.2.5.1
> 00885000-00886000 rw-p 00000000 00:00 0
> 00894000-00897000 r-xp 00000000 08:02 2878170
> /usr/lib/python2.5/lib-dynload/_locale.so
> 00897000-00898000 r--p 00002000 08:02 2878170
> /usr/lib/python2.5/lib-dynload/_locale.so
> 00898000-00899000 rw-p 00003000 08:02 2878170
> /usr/lib/python2.5/lib-dynload/_locale.so
> 00899000-008a9000 r-xp 00000000 08:02 1434061 =A0 =A0/lib/tls/i686/cmov/
> libresolv-2.10.1.so
> 008a9000-008aa000 r--p 00010000 08:02 1434061 =A0 =A0/lib/tls/i686/cmov/
> libresolv-2.10.1.so
> 008aa000-008ab000 rw-p 00011000 08:02 1434061 =A0 =A0/lib/tls/i686/cmov/
> libresolv-2.10.1.so
> 008ab000-008ad000 rw-p 00000000 00:00 0
> 008bd000-008bf000 r-xp 00000000 08:02 2878185
> /usr/lib/python2.5/lib-dynload/dbm.so
> 008bf000-008c0000 r--p 00001000 08:02 2878185
> /usr/lib/python2.5/lib-dynload/dbm.so
> 008c0000-008c1000 rw-p 00002000 08:02 2878185
> /usr/lib/python2.5/lib-dynload/dbm.so
> 008c5000-008cf000 r-xp 00000000 08:02 1434050 =A0 =A0/lib/tls/i686/cmov/
> libnss_files-2.10.1.so
> 008cf000-008d0000 r--p 00009000 08:02 1434050 =A0 =A0/lib/tls/i686/cmov/
> libnss_files-2.10.1.so
> 008d0000-008d1000 rw-p 0000a000 08:02 1434050 =A0 =A0/lib/tls/i686/cmov/
> libnss_files-2.10.1.so
> 008e1000-008e5000 r-xp 00000000 08:02 2878163
> /usr/lib/python2.5/lib-dynload/collections.so
> 008e5000-008e6000 r--p 00004000 08:02 2878163
> /usr/lib/python2.5/lib-dynload/collections.so
> 008e6000-008e7000 rw-p 00005000 08:02 2878163
> /usr/lib/python2.5/lib-dynload/collections.so
> 008f8000-00a36000 r-xp 00000000 08:02 2801926 =A0 =A0/usr/lib/libdb-4.6.s=
o
> 00a36000-00a38000 r--p 0013d000 08:02 2801926 =A0 =A0/usr/lib/libdb-4.6.s=
o
> 00a38000-00a39000 rw-p 0013f000 08:02 2801926 =A0 =A0/usr/lib/libdb-4.6.s=
o
> 00a39000-00abf000 r-xp 00000000 08:02 2804148
> /usr/lib/libsqlite3.so.0.8.6
> 00abf000-00ac0000 r--p 00086000 08:02 2804148
> /usr/lib/libsqlite3.so.0.8.6
> 00ac0000-00ac1000 rw-p 00087000 08:02 2804148
> /usr/lib/libsqlite3.so.0.8.6
> 00ac1000-00ad1000 r-xp 00000000 08:02 2804162 =A0 =A0/usr/lib/libtasn1.so=
.3.1.5
> 00ad1000-00ad2000 r--p 0000f000 08:02 2804162 =A0 =A0/usr/lib/libtasn1.so=
.3.1.5
> 00ad2000-00ad3000 rw-p 00010000 08:02 2804162 =A0 =A0/usr/lib/libtasn1.so=
.3.1.5
> 00ad3000-00ae7000 r-xp 00000000 08:02 2878158
> /usr/lib/python2.5/lib-dynload/_ctypes.so
> 00ae7000-00ae8000 r--p 00014000 08:02 2878158
> /usr/lib/python2.5/lib-dynload/_ctypes.so
> 00ae8000-00aea000 rw-p 00015000 08:02 2878158
> /usr/lib/python2.5/lib-dynload/_ctypes.so
> 00b01000-00b03000 r-xp 00000000 08:02 1434039 =A0 =A0/lib/tls/i686/cmov/
> libdl-2.10.1.so
> 00b03000-00b04000 r--p 00001000 08:02 1434039 =A0 =A0/lib/tls/i686/cmov/
> libdl-2.10.1.so
> 00b04000-00b05000 rw-p 00002000 08:02 1434039 =A0 =A0/lib/tls/i686/cmov/
> libdl-2.10.1.so
> 00b11000-00b14000 r-xp 00000000 08:02 1409103 =A0 =A0/lib/libgpg-error.so=
.0.4.0
> 00b14000-00b15000 r--p 00002000 08:02 1409103 =A0 =A0/lib/libgpg-error.so=
.0.4.0
> 00b15000-00b16000 rw-p 00003000 08:02 1409103 =A0 =A0/lib/libgpg-error.so=
.0.4.0
> 00b16000-00b2b000 r-xp 00000000 08:02 2878199
> /usr/lib/python2.5/lib-dynload/_codecs_tw.so
> 00b2b000-00b2e000 r--p 00014000 08:02 2878199
> /usr/lib/python2.5/lib-dynload/_codecs_tw.so
> 00b2e000-00b2f000 rw-p 00017000 08:02 2878199
> /usr/lib/python2.5/lib-dynload/_codecs_tw.so
> 00b2f000-00b4c000 r-xp 00000000 08:02 2878198
> /usr/lib/python2.5/lib-dynload/_codecs_cn.so
> 00b4c000-00b4f000 r--p 0001c000 08:02 2878198
> /usr/lib/python2.5/lib-dynload/_codecs_cn.so
> 00b4f000-00b50000 rw-p 0001f000 08:02 2878198
> /usr/lib/python2.5/lib-dynload/_codecs_cn.so
> 00b54000-00b59000 r-xp 00000000 08:02 1434048 =A0 =A0/lib/tls/i686/cmov/
> libnss_dns-2.10.1.so
> 00b59000-00b5a000 r--p 00004000 08:02 1434048 =A0 =A0/lib/tls/i686/cmov/
> libnss_dns-2.10.1.so
> 00b5a000-00b5b000 rw-p 00005000 08:02 1434048 =A0 =A0/lib/tls/i686/cmov/
> libnss_dns-2.10.1.so
> 00b6c000-00b73000 r-xp 00000000 08:02 1434063 =A0 =A0/lib/tls/i686/cmov/
> librt-2.10.1.so
> 00b73000-00b74000 r--p 00006000 08:02 1434063 =A0 =A0/lib/tls/i686/cmov/
> librt-2.10.1.so
> 00b74000-00b75000 rw-p 00007000 08:02 1434063 =A0 =A0/lib/tls/i686/cmov/
> librt-2.10.1.so
> 00b75000-00b78000 ---p 00000000 00:00 0
> 00b78000-00bc6000 rwxp 00000000 00:00 0
> 00bd1000-00bde000 r-xp 00000000 08:02 2704619
> /home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTi=
me.so
> 00bde000-00bdf000 r--p 0000c000 08:02 2704619
> /home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTi=
me.so
> 00bdf000-00be0000 rw-p 0000d000 08:02 2704619
> /home/mvmail/test/demo/core/site-packages/mx/DateTime/mxDateTime/mxDateTi=
me.so
> 00be2000-00be5000 r-xp 00000000 08:02 2875898
> /usr/lib/python2.5/lib-dynload/gdbm.so
> 00be5000-00be6000 r--p 00002000 08:02 2875898
> /usr/lib/python2.5/lib-dynload/gdbm.so
> 00be6000-00be7000 rw-p 00003000 08:02 2875898
> /usr/lib/python2.5/lib-dynload/gdbm.so
> 00bfe000-00c03000 r-xp 00000000 08:02 2878150
> /usr/lib/python2.5/lib-dynload/operator.so
> 00c03000-00c04000 r--p 00004000 08:02 2878150
> /usr/lib/python2.5/lib-dynload/operator.so
> 00c04000-00c05000 rw-p 00005000 08:02 2878150
> /usr/lib/python2.5/lib-dynload/operator.so
> 00c10000-00c1b000 r-xp 00000000 08:02 2878172
> /usr/lib/python2.5/lib-dynload/parser.so
> 00c1b000-00c1c000 r--p 0000a000 08:02 2878172
> /usr/lib/python2.5/lib-dynload/parser.so
> 00c1c000-00c1d000 rw-p 0000b000 08:02 2878172
> /usr/lib/python2.5/lib-dynload/parser.so
> 00c1d000-00c4d000 r-xp 00000000 08:02 2878197
> /usr/lib/python2.5/lib-dynload/_codecs_jp.so
> 00c4d000-00c54000 r--p 00030000 08:02 2878197
> /usr/lib/python2.5/lib-dynload/_codecs_jp.so
> 00c54000-00c55000 rw-p 00037000 08:02 2878197
> /usr/lib/python2.5/lib-dynload/_codecs_jp.so
> 00c7f000-00c86000 r-xp 00000000 08:02 2877196
> /usr/lib/python2.5/lib-dynload/array.so
> 00c86000-00c87000 r--p 00006000 08:02 2877196
> /usr/lib/python2.5/lib-dynload/array.so
> 00c87000-00c89000 rw-p 00007000 08:02 2877196
> /usr/lib/python2.5/lib-dynload/array.so
> 00ced000-00d4c000 r-xp 00000000 08:02 2803627 =A0 =A0/usr/lib/libgmp.so.3=
.5.0
> 00d4c000-00d4d000 r--p 0005e000 08:02 2803627 =A0 =A0/usr/lib/libgmp.so.3=
.5.0
> 00d4d000-00d4e000 rw-p 0005f000 08:02 2803627 =A0 =A0/usr/lib/libgmp.so.3=
.5.0
> 00d74000-00d76000 r-xp 00000000 08:02 2878165
> /usr/lib/python2.5/lib-dynload/_heapq.so
> 00d76000-00d77000 r--p 00001000 08:02 2878165
> /usr/lib/python2.5/lib-dynload/_heapq.so
> 00d77000-00d79000 rw-p 00002000 08:02 2878165
> /usr/lib/python2.5/lib-dynload/_heapq.so
> 00dba000-00dc5000 r-xp 00000000 08:02 2875778
> /usr/lib/pyshared/python2.5/OpenSSL/crypto.so
> 00dc5000-00dc6000 r--p 0000a000 08:02 2875778
> /usr/lib/pyshared/python2.5/OpenSSL/crypto.so
> 00dc6000-00dcb000 rw-p 0000b000 08:02 2875778
> /usr/lib/pyshared/python2.5/OpenSSL/crypto.so
> 00e29000-00e2d000 r-xp 00000000 08:02 2875960
> /usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
> 00e2d000-00e2e000 r--p 00003000 08:02 2875960
> /usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
> 00e2e000-00e2f000 rw-p 00004000 08:02 2875960
> /usr/lib/python2.5/site-packages/Crypto/PublicKey/_fastmath.so
> 00e52000-00e5d000 r-xp 00000000 08:02 294944
> /usr/lib/liblber-2.4.so.2.5.1
> 00e5d000-00e5e000 r--p 0000a000 08:02 294944
> /usr/lib/liblber-2.4.so.2.5.1
> 00e5e000-00e5f000 rw-p 0000b000 08:02 294944
> /usr/lib/liblber-2.4.so.2.5.1
> 00e8e000-00e91000 r-xp 00000000 08:02 2878181
> /usr/lib/python2.5/lib-dynload/_ssl.so
> 00e91000-00e92000 r--p 00002000 08:02 2878181
> /usr/lib/python2.5/lib-dynload/_ssl.so
> 00e92000-00e93000 rw-p 00003000 08:02 2878181
> /usr/lib/python2.5/lib-dynload/_ssl.so
> 00e99000-00e9c000 r-xp 00000000 08:02 2878186
> /usr/lib/python2.5/lib-dynload/termios.so
> 00e9c000-00e9d000 r--p 00002000 08:02 2878186
> /usr/lib/python2.5/lib-dynload/termios.so
> 00e9d000-00e9f000 rw-p 00003000 08:02 2878186
> /usr/lib/python2.5/lib-dynload/termios.so
> 00ebe000-00ed2000 r-xp 00000000 08:02 1409199 =A0 =A0/lib/libz.so.1.2.3.3
> 00ed2000-00ed3000 r--p 00013000 08:02 1409199 =A0 =A0/lib/libz.so.1.2.3.3
> 00ed3000-00ed4000 rw-p 00014000 08:02 1409199 =A0 =A0/lib/libz.so.1.2.3.3
> 00ee0000-00ee8000 r-xp 00000000 08:02 2875777
> /usr/lib/pyshared/python2.5/OpenSSL/SSL.so
> 00ee8000-00ee9000 r--p 00007000 08:02 2875777
> /usr/lib/pyshared/python2.5/OpenSSL/SSL.so
> 00ee9000-00eed000 rw-p 00008000 08:02 2875777
> /usr/lib/pyshared/python2.5/OpenSSL/SSL.so
> 00f08000-00f0a000 r-xp 00000000 08:02 2878166
> /usr/lib/python2.5/lib-dynload/_functools.so
> 00f0a000-00f0b000 r--p 00001000 08:02 2878166
> /usr/lib/python2.5/lib-dynload/_functools.so
> 00f0b000-00f0c000 rw-p 00002000 08:02 2878166
> /usr/lib/python2.5/lib-dynload/_functools.so
> 00f0c000-00f0d000 ---p 00000000 00:00 0
> 00f0d000-00f8d000 rwxp 00000000 00:00 0
> 00fc6000-00fc9000 r-xp 00000000 08:02 2877195
> /usr/lib/python2.5/lib-dynload/cStringIO.so
> 00fc9000-00fca000 r--p 00002000 08:02 2877195
> /usr/lib/python2.5/lib-dynload/cStringIO.so
> 00fca000-00fcb000 rw-p 00003000 08:02 2877195
> /usr/lib/python2.5/lib-dynload/cStringIO.so
> 00fd2000-00fe7000 r-xp 00000000 08:02 1434059 =A0 =A0/lib/tls/i686/cmov/
> libpthread-2.10.1.so
> 00fe7000-00fe8000 r--p 00014000 08:02 1434059 =A0 =A0/lib/tls/i686/cmov/
> libpthread-2.10.1.so
> 00fe8000-00fe9000 rw-p 00015000 08:02 1434059 =A0 =A0/lib/tls/i686/cmov/
> libpthread-2.10.1.so
> 00fe9000-00feb000 rw-p 00000000 00:00 0
> 00fef000-00ff3000 r-xp 00000000 08:02 2877197
> /usr/lib/python2.5/lib-dynload/binascii.so
> 00ff3000-00ff4000 r--p 00003000 08:02 2877197
> /usr/lib/python2.5/lib-dynload/binascii.so
> 00ff4000-00ff5000 rw-p 00004000 08:02 2877197
> /usr/lib/python2.5/lib-dynload/binascii.so
> 00ff5000-016dd000 r-xp 00000000 08:02 2703936
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/_lucene.so
> 016dd000-016e6000 r--p 006e8000 08:02 2703936
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/_lucene.so
> 016e6000-01718000 rw-p 006f1000 08:02 2703936
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/_lucene.so
> 01718000-0171b000 rw-p 00000000 00:00 0
> 0171b000-0171c000 ---p 00000000 00:00 0
> 0171c000-0179c000 rwxp 00000000 00:00 0
> 0179c000-0179d000 ---p 00000000 00:00 0
> 0179d000-01f9d000 rwxp 00000000 00:00 0
> 01f9d000-02040000 r-xp 00000000 08:02 2803659
> /usr/lib/libgnutls.so.26.14.10
> 02040000-02044000 r--p 000a2000 08:02 2803659
> /usr/lib/libgnutls.so.26.14.10
> 02044000-02045000 rw-p 000a6000 08:02 2803659
> /usr/lib/libgnutls.so.26.14.10
> 0204b000-024ce000 r-xp 00000000 08:02 164071
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/libjvm.so
> 024ce000-024ef000 rw-p 00483000 08:02 164071
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/libjvm.so
> 024ef000-0290b000 rw-p 00000000 00:00 0
> 0290b000-0290c000 ---p 00000000 00:00 0
> 0290c000-0310c000 rwxp 00000000 00:00 0
> 0310c000-0310d000 ---p 00000000 00:00 0
> 0310d000-0390d000 rwxp 00000000 00:00 0
> 0390d000-0390e000 ---p 00000000 00:00 0
> 0390e000-0410e000 rwxp 00000000 00:00 0
> 0410e000-0410f000 ---p 00000000 00:00 0
> 0410f000-0490f000 rwxp 00000000 00:00 0
> 0490f000-04912000 ---p 00000000 00:00 0
> 04912000-05110000 rwxp 00000000 00:00 0
> 05110000-05111000 ---p 00000000 00:00 0
> 05111000-05911000 rwxp 00000000 00:00 0
> 05911000-0598a000 r-xp 00000000 08:02 1409099 =A0 =A0/lib/libgcrypt.so.11=
.5.2
> 0598a000-0598b000 r--p 00078000 08:02 1409099 =A0 =A0/lib/libgcrypt.so.11=
.5.2
> 0598b000-0598d000 rw-p 00079000 08:02 1409099 =A0 =A0/lib/libgcrypt.so.11=
.5.2
> 05a32000-05a35000 ---p 00000000 00:00 0
> 05a35000-05ab3000 rwxp 00000000 00:00 0
> 05ab3000-05ab4000 ---p 00000000 00:00 0
> 05ab4000-062b4000 rwxp 00000000 00:00 0
> 0633d000-06423000 r-xp 00000000 08:02 294926
> /usr/lib/libstdc++.so.6.0.13
> 06423000-06427000 r--p 000e6000 08:02 294926
> /usr/lib/libstdc++.so.6.0.13
> 06427000-06428000 rw-p 000ea000 08:02 294926
> /usr/lib/libstdc++.so.6.0.13
> 06428000-0642f000 rw-p 00000000 00:00 0
> 0642f000-06536000 r-xp 00000000 08:02 2801927
> /usr/lib/libpython2.5.so.1.0
> 06536000-06537000 r--p 00106000 08:02 2801927
> /usr/lib/libpython2.5.so.1.0
> 06537000-0655c000 rw-p 00107000 08:02 2801927
> /usr/lib/libpython2.5.so.1.0
> 0655c000-06562000 rw-p 00000000 00:00 0
> 069c1000-069c2000 ---p 00000000 00:00 0
> 069c2000-071c2000 rwxp 00000000 00:00 0
> 071c2000-071c3000 ---p 00000000 00:00 0
> 071c3000-079c3000 rwxp 00000000 00:00 0
> 08048000-0813d000 r-xp 00000000 08:02 2801925 =A0 =A0/usr/bin/python2.5
> 0813d000-0813e000 r--p 000f4000 08:02 2801925 =A0 =A0/usr/bin/python2.5
> 0813e000-08163000 rw-p 000f5000 08:02 2801925 =A0 =A0/usr/bin/python2.5
> 08163000-08169000 rw-p 00000000 00:00 0
> 08673000-10d8a000 rw-p 00000000 00:00 0 =A0 =A0 =A0 =A0 =A0[heap]
> 43000000-430eb000 rw-p 00000000 00:00 0
> 430eb000-43100000 ---p 00000000 00:00 0
> 43200000-432f2000 rw-p 00000000 00:00 0
> 432f2000-43300000 ---p 00000000 00:00 0
> 43300000-433ee000 rw-p 00000000 00:00 0
> 433ee000-43400000 ---p 00000000 00:00 0
> 43400000-434f3000 rw-p 00000000 00:00 0
> 434f3000-43500000 ---p 00000000 00:00 0
> 43500000-435a5000 rw-p 00000000 00:00 0
> 435a5000-43600000 ---p 00000000 00:00 0
> 43600000-436fd000 rw-p 00000000 00:00 0
> 436fd000-43700000 ---p 00000000 00:00 0
> 43800000-438fd000 rw-p 00000000 00:00 0
> 438fd000-43900000 ---p 00000000 00:00 0
> 43a00000-43afd000 rw-p 00000000 00:00 0
> 43afd000-43b00000 ---p 00000000 00:00 0
> 43c00000-43d00000 rw-p 00000000 00:00 0
> 43e00000-43f00000 rw-p 00000000 00:00 0
> 44000000-440f8000 rw-p 00000000 00:00 0
> 440f8000-44100000 ---p 00000000 00:00 0
> 44200000-442c1000 rw-p 00000000 00:00 0
> 442c1000-44300000 ---p 00000000 00:00 0
> 44300000-44400000 rw-p 00000000 00:00 0
> 44400000-44500000 rw-p 00000000 00:00 0
> 44600000-446fb000 rw-p 00000000 00:00 0
> 446fb000-44700000 ---p 00000000 00:00 0
> 44800000-448f8000 rw-p 00000000 00:00 0
> 448f8000-44900000 ---p 00000000 00:00 0
> 44a00000-44aef000 rw-p 00000000 00:00 0
> 44aef000-44b00000 ---p 00000000 00:00 0
> 44c00000-44cff000 rw-p 00000000 00:00 0
> 44cff000-44d00000 ---p 00000000 00:00 0
> 44e00000-44efe000 rw-p 00000000 00:00 0
> 44efe000-44f00000 ---p 00000000 00:00 0
> 45000000-45100000 rw-p 00000000 00:00 0
> 45200000-452e6000 rw-p 00000000 00:00 0
> 452e6000-45300000 ---p 00000000 00:00 0
> 45400000-454f8000 rw-p 00000000 00:00 0
> 454f8000-45500000 ---p 00000000 00:00 0
> 45600000-45700000 rw-p 00000000 00:00 0
> 45700000-457ff000 rw-p 00000000 00:00 0
> 457ff000-45800000 ---p 00000000 00:00 0
> 45900000-459fd000 rw-p 00000000 00:00 0
> 459fd000-45a00000 ---p 00000000 00:00 0
> 45b00000-45bf2000 rw-p 00000000 00:00 0
> 45bf2000-45c00000 ---p 00000000 00:00 0
> 45c00000-45cc1000 rw-p 00000000 00:00 0
> 45cc1000-45d00000 ---p 00000000 00:00 0
> 45d00000-45dff000 rw-p 00000000 00:00 0
> 45dff000-45e00000 ---p 00000000 00:00 0
> 45f00000-45fe6000 rw-p 00000000 00:00 0
> 45fe6000-46000000 ---p 00000000 00:00 0
> 46100000-461ff000 rw-p 00000000 00:00 0
> 461ff000-46200000 ---p 00000000 00:00 0
> 46300000-463c1000 rw-p 00000000 00:00 0
> 463c1000-46400000 ---p 00000000 00:00 0
> 46400000-464ff000 rw-p 00000000 00:00 0
> 464ff000-46500000 ---p 00000000 00:00 0
> 46500000-465e5000 rw-p 00000000 00:00 0
> 465e5000-46600000 ---p 00000000 00:00 0
> 46600000-466f2000 rw-p 00000000 00:00 0
> 466f2000-46700000 ---p 00000000 00:00 0
> 46700000-467f0000 rw-p 00000000 00:00 0
> 467f0000-46800000 ---p 00000000 00:00 0
> 46900000-469e5000 rw-p 00000000 00:00 0
> 469e5000-46a00000 ---p 00000000 00:00 0
> 46a00000-46af2000 rw-p 00000000 00:00 0
> 46af2000-46b00000 ---p 00000000 00:00 0
> 46b00000-46be4000 rw-p 00000000 00:00 0
> 46be4000-46c00000 ---p 00000000 00:00 0
> 46d00000-46dfe000 rw-p 00000000 00:00 0
> 46dfe000-46e00000 ---p 00000000 00:00 0
> 46f00000-46ffe000 rw-p 00000000 00:00 0
> 46ffe000-47000000 ---p 00000000 00:00 0
> 47100000-471c2000 rw-p 00000000 00:00 0
> 471c2000-47200000 ---p 00000000 00:00 0
> 47200000-472f5000 rw-p 00000000 00:00 0
> 472f5000-47300000 ---p 00000000 00:00 0
> 47400000-474e8000 rw-p 00000000 00:00 0
> 474e8000-47500000 ---p 00000000 00:00 0
> 47500000-475fb000 rw-p 00000000 00:00 0
> 475fb000-47600000 ---p 00000000 00:00 0
> 47700000-47800000 rw-p 00000000 00:00 0
> 47900000-47a00000 rw-p 00000000 00:00 0
> 47b00000-47bfa000 rw-p 00000000 00:00 0
> 47bfa000-47c00000 ---p 00000000 00:00 0
> 47d00000-47dfa000 rw-p 00000000 00:00 0
> 47dfa000-47e00000 ---p 00000000 00:00 0
> 47f00000-47ffe000 rw-p 00000000 00:00 0
> 47ffe000-48000000 ---p 00000000 00:00 0
> 48100000-48200000 rw-p 00000000 00:00 0
> 48300000-48400000 rw-p 00000000 00:00 0
> 48500000-485fb000 rw-p 00000000 00:00 0
> 485fb000-48600000 ---p 00000000 00:00 0
> 48700000-48800000 rw-p 00000000 00:00 0
> 48800000-488fd000 rw-p 00000000 00:00 0
> 488fd000-48900000 ---p 00000000 00:00 0
> 48a00000-48aed000 rw-p 00000000 00:00 0
> 48aed000-48b00000 ---p 00000000 00:00 0
> 48c00000-48cfb000 rw-p 00000000 00:00 0
> 48cfb000-48d00000 ---p 00000000 00:00 0
> 48e00000-48ef6000 rw-p 00000000 00:00 0
> 48ef6000-48f00000 ---p 00000000 00:00 0
> 49000000-490fd000 rw-p 00000000 00:00 0
> 490fd000-49100000 ---p 00000000 00:00 0
> 49200000-492f9000 rw-p 00000000 00:00 0
> 492f9000-49300000 ---p 00000000 00:00 0
> 49400000-494ec000 rw-p 00000000 00:00 0
> 494ec000-49500000 ---p 00000000 00:00 0
> 49500000-49600000 rw-p 00000000 00:00 0
> 49600000-496ff000 rw-p 00000000 00:00 0
> 496ff000-49700000 ---p 00000000 00:00 0
> 49800000-498f6000 rw-p 00000000 00:00 0
> 498f6000-49900000 ---p 00000000 00:00 0
> 49a00000-49afb000 rw-p 00000000 00:00 0
> 49afb000-49b00000 ---p 00000000 00:00 0
> 49c00000-49cf7000 rw-p 00000000 00:00 0
> 49cf7000-49d00000 ---p 00000000 00:00 0
> 49e00000-49eff000 rw-p 00000000 00:00 0
> 49eff000-49f00000 ---p 00000000 00:00 0
> 4a000000-4a0c6000 rw-p 00000000 00:00 0
> 4a0c6000-4a100000 ---p 00000000 00:00 0
> 4a200000-4a2ff000 rw-p 00000000 00:00 0
> 4a2ff000-4a300000 ---p 00000000 00:00 0
> 4a400000-4a4f5000 rw-p 00000000 00:00 0
> 4a4f5000-4a500000 ---p 00000000 00:00 0
> 4a600000-4a6ff000 rw-p 00000000 00:00 0
> 4a6ff000-4a700000 ---p 00000000 00:00 0
> 4a800000-4a8fe000 rw-p 00000000 00:00 0
> 4a8fe000-4a900000 ---p 00000000 00:00 0
> 4aa00000-4aaff000 rw-p 00000000 00:00 0
> 4aaff000-4ab00000 ---p 00000000 00:00 0
> 4ac00000-4acf8000 rw-p 00000000 00:00 0
> 4acf8000-4ad00000 ---p 00000000 00:00 0
> 4ad00000-4ae00000 rw-p 00000000 00:00 0
> 4ae00000-4aefd000 rw-p 00000000 00:00 0
> 4aefd000-4af00000 ---p 00000000 00:00 0
> 4b000000-4b0f2000 rw-p 00000000 00:00 0
> 4b0f2000-4b100000 ---p 00000000 00:00 0
> 4b200000-4b2fd000 rw-p 00000000 00:00 0
> 4b2fd000-4b300000 ---p 00000000 00:00 0
> 4b400000-4b500000 rw-p 00000000 00:00 0
> 4b500000-4b5e5000 rw-p 00000000 00:00 0
> 4b5e5000-4b600000 ---p 00000000 00:00 0
> 4b600000-4b6e5000 rw-p 00000000 00:00 0
> 4b6e5000-4b700000 ---p 00000000 00:00 0
> 4b800000-4b8fe000 rw-p 00000000 00:00 0
> 4b8fe000-4b900000 ---p 00000000 00:00 0
> 4ba00000-4baf0000 rw-p 00000000 00:00 0
> 4baf0000-4bb00000 ---p 00000000 00:00 0
> 4bb00000-4bc00000 rw-p 00000000 00:00 0
> 4bc00000-4bd00000 rw-p 00000000 00:00 0
> 4be00000-4befc000 rw-p 00000000 00:00 0
> 4befc000-4bf00000 ---p 00000000 00:00 0
> 4c000000-4c100000 rw-p 00000000 00:00 0
> 4c100000-4c1fd000 rw-p 00000000 00:00 0
> 4c1fd000-4c200000 ---p 00000000 00:00 0
> 4c200000-4c2ed000 rw-p 00000000 00:00 0
> 4c2ed000-4c300000 ---p 00000000 00:00 0
> 4c400000-4c4fe000 rw-p 00000000 00:00 0
> 4c4fe000-4c500000 ---p 00000000 00:00 0
> 4c500000-4c5fe000 rw-p 00000000 00:00 0
> 4c5fe000-4c600000 ---p 00000000 00:00 0
> 4c600000-4c700000 rw-p 00000000 00:00 0
> 4c800000-4c8fe000 rw-p 00000000 00:00 0
> 4c8fe000-4c900000 ---p 00000000 00:00 0
> 4ca00000-4cb00000 rw-p 00000000 00:00 0
> 4cc00000-4cced000 rw-p 00000000 00:00 0
> 4cced000-4cd00000 ---p 00000000 00:00 0
> 4ce00000-4cf00000 rw-p 00000000 00:00 0
> 4d000000-4d100000 rw-p 00000000 00:00 0
> 4d100000-4d200000 rw-p 00000000 00:00 0
> 4d200000-4d2ea000 rw-p 00000000 00:00 0
> 4d2ea000-4d300000 ---p 00000000 00:00 0
> 4d400000-4d4fd000 rw-p 00000000 00:00 0
> 4d4fd000-4d500000 ---p 00000000 00:00 0
> 4d600000-4d6fb000 rw-p 00000000 00:00 0
> 4d6fb000-4d700000 ---p 00000000 00:00 0
> 4d800000-4d900000 rw-p 00000000 00:00 0
> 4da00000-4daf7000 rw-p 00000000 00:00 0
> 4daf7000-4db00000 ---p 00000000 00:00 0
> 4dc00000-4dd00000 rw-p 00000000 00:00 0
> 4de00000-4df00000 rw-p 00000000 00:00 0
> 4e000000-4e0c1000 rw-p 00000000 00:00 0
> 4e0c1000-4e100000 ---p 00000000 00:00 0
> 4e100000-4e1ff000 rw-p 00000000 00:00 0
> 4e1ff000-4e200000 ---p 00000000 00:00 0
> 4e200000-4e2f2000 rw-p 00000000 00:00 0
> 4e2f2000-4e300000 ---p 00000000 00:00 0
> 4e300000-4e3c1000 rw-p 00000000 00:00 0
> 4e3c1000-4e400000 ---p 00000000 00:00 0
> 4e400000-4e4f2000 rw-p 00000000 00:00 0
> 4e4f2000-4e500000 ---p 00000000 00:00 0
> 4e600000-4e6d8000 rw-p 00000000 00:00 0
> 4e6d8000-4e700000 ---p 00000000 00:00 0
> 4e700000-4e7fb000 rw-p 00000000 00:00 0
> 4e7fb000-4e800000 ---p 00000000 00:00 0
> 4e800000-4e900000 rw-p 00000000 00:00 0
> 4ea00000-4eafe000 rw-p 00000000 00:00 0
> 4eafe000-4eb00000 ---p 00000000 00:00 0
> 4ec00000-4ecff000 rw-p 00000000 00:00 0
> 4ecff000-4ed00000 ---p 00000000 00:00 0
> 4ed40000-64290000 rw-p 00000000 00:00 0
> 64290000-8ed40000 rw-p 00000000 00:00 0
> 8ed40000-8f940000 rw-p 00000000 00:00 0
> 8f940000-92d40000 rw-p 00000000 00:00 0
> 92d40000-93367000 r--s 00001000 08:02 163968
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
> 93367000-93740000 rw-p 00000000 00:00 0
> 93740000-93e77000 rw-p 00628000 08:02 163968
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
> 93e77000-94340000 rw-p 00000000 00:00 0
> 94340000-94421000 rw-p 00d5f000 08:02 163968
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
> 94421000-94740000 rw-p 00000000 00:00 0
> 94740000-94748000 r-xs 00e40000 08:02 163968
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/i386/client/classes.jsa
> 94748000-94b40000 rw-p 00000000 00:00 0
> 94c00000-94cfc000 rw-p 00000000 00:00 0
> 94cfc000-94d00000 ---p 00000000 00:00 0
> 94e00000-94f00000 rw-p 00000000 00:00 0
> 95000000-950fe000 rw-p 00000000 00:00 0
> 950fe000-95100000 ---p 00000000 00:00 0
> 95100000-951e0000 rw-p 00000000 00:00 0
> 951e0000-95200000 ---p 00000000 00:00 0
> 95200000-952ff000 rw-p 00000000 00:00 0
> 952ff000-95300000 ---p 00000000 00:00 0
> 95300000-953f2000 rw-p 00000000 00:00 0
> 953f2000-95400000 ---p 00000000 00:00 0
> 95500000-955ff000 rw-p 00000000 00:00 0
> 955ff000-95600000 ---p 00000000 00:00 0
> 95600000-956d9000 rw-p 00000000 00:00 0
> 956d9000-95700000 ---p 00000000 00:00 0
> 95700000-957f7000 rw-p 00000000 00:00 0
> 957f7000-95800000 ---p 00000000 00:00 0
> 95900000-959fb000 rw-p 00000000 00:00 0
> 959fb000-95a00000 ---p 00000000 00:00 0
> 95b00000-95bc1000 rw-p 00000000 00:00 0
> 95bc1000-95c00000 ---p 00000000 00:00 0
> 95c00000-95cc1000 rw-p 00000000 00:00 0
> 95cc1000-95d00000 ---p 00000000 00:00 0
> 95d00000-95df2000 rw-p 00000000 00:00 0
> 95df2000-95e00000 ---p 00000000 00:00 0
> 95f00000-95ffd000 rw-p 00000000 00:00 0
> 95ffd000-96000000 ---p 00000000 00:00 0
> 96100000-961eb000 rw-p 00000000 00:00 0
> 961eb000-96200000 ---p 00000000 00:00 0
> 96300000-963fb000 rw-p 00000000 00:00 0
> 963fb000-96400000 ---p 00000000 00:00 0
> 96500000-965fc000 rw-p 00000000 00:00 0
> 965fc000-96600000 ---p 00000000 00:00 0
> 96700000-967fa000 rw-p 00000000 00:00 0
> 967fa000-96800000 ---p 00000000 00:00 0
> 96900000-969fb000 rw-p 00000000 00:00 0
> 969fb000-96a00000 ---p 00000000 00:00 0
> 96b00000-96bfb000 rw-p 00000000 00:00 0
> 96bfb000-96c00000 ---p 00000000 00:00 0
> 96d00000-96df1000 rw-p 00000000 00:00 0
> 96df1000-96e00000 ---p 00000000 00:00 0
> 96f00000-96ff9000 rw-p 00000000 00:00 0
> 96ff9000-97000000 ---p 00000000 00:00 0
> 97100000-971f6000 rw-p 00000000 00:00 0
> 971f6000-97200000 ---p 00000000 00:00 0
> 97300000-973fd000 rw-p 00000000 00:00 0
> 973fd000-97400000 ---p 00000000 00:00 0
> 97500000-975ff000 rw-p 00000000 00:00 0
> 975ff000-97600000 ---p 00000000 00:00 0
> 97700000-977f0000 rw-p 00000000 00:00 0
> 977f0000-97800000 ---p 00000000 00:00 0
> 97900000-979fb000 rw-p 00000000 00:00 0
> 979fb000-97a00000 ---p 00000000 00:00 0
> 97b00000-97bff000 rw-p 00000000 00:00 0
> 97bff000-97c00000 ---p 00000000 00:00 0
> 97d00000-97df9000 rw-p 00000000 00:00 0
> 97df9000-97e00000 ---p 00000000 00:00 0
> 97e00000-97ef7000 rw-p 00000000 00:00 0
> 97ef7000-97f00000 ---p 00000000 00:00 0
> 97f00000-97ff9000 rw-p 00000000 00:00 0
> 97ff9000-98000000 ---p 00000000 00:00 0
> 98000000-980ec000 rw-p 00000000 00:00 0
> 980ec000-98100000 ---p 00000000 00:00 0
> 98100000-981f7000 rw-p 00000000 00:00 0
> 981f7000-98200000 ---p 00000000 00:00 0
> 98200000-982fd000 rw-p 00000000 00:00 0
> 982fd000-98300000 ---p 00000000 00:00 0
> 98300000-983fa000 rw-p 00000000 00:00 0
> 983fa000-98400000 ---p 00000000 00:00 0
> 98500000-98600000 rw-p 00000000 00:00 0
> 98700000-987ff000 rw-p 00000000 00:00 0
> 987ff000-98800000 ---p 00000000 00:00 0
> 98900000-989c1000 rw-p 00000000 00:00 0
> 989c1000-98a00000 ---p 00000000 00:00 0
> 98a00000-98af2000 rw-p 00000000 00:00 0
> 98af2000-98b00000 ---p 00000000 00:00 0
> 98b00000-98bc1000 rw-p 00000000 00:00 0
> 98bc1000-98c00000 ---p 00000000 00:00 0
> 98c00000-98ce5000 rw-p 00000000 00:00 0
> 98ce5000-98d00000 ---p 00000000 00:00 0
> 98d00000-98e00000 rw-p 00000000 00:00 0
> 98f00000-98fc1000 rw-p 00000000 00:00 0
> 98fc1000-99000000 ---p 00000000 00:00 0
> 99000000-99100000 rw-p 00000000 00:00 0
> 99100000-991fe000 rw-p 00000000 00:00 0
> 991fe000-99200000 ---p 00000000 00:00 0
> 99300000-99400000 rw-p 00000000 00:00 0
> 99500000-995f2000 rw-p 00000000 00:00 0
> 995f2000-99600000 ---p 00000000 00:00 0
> 99700000-997f2000 rw-p 00000000 00:00 0
> 997f2000-99800000 ---p 00000000 00:00 0
> 99800000-998c1000 rw-p 00000000 00:00 0
> 998c1000-99900000 ---p 00000000 00:00 0
> 99900000-999e5000 rw-p 00000000 00:00 0
> 999e5000-99a00000 ---p 00000000 00:00 0
> 99a00000-99ac1000 rw-p 00000000 00:00 0
> 99ac1000-99b00000 ---p 00000000 00:00 0
> 99b00000-99bca000 rw-p 00000000 00:00 0
> 99bca000-99c00000 ---p 00000000 00:00 0
> 99c00000-99cda000 rw-p 00000000 00:00 0
> 99cda000-99d00000 ---p 00000000 00:00 0
> 99d00000-99dfb000 rw-p 00000000 00:00 0
> 99dfb000-99e00000 ---p 00000000 00:00 0
> 99f00000-99ffb000 rw-p 00000000 00:00 0
> 99ffb000-9a000000 ---p 00000000 00:00 0
> 9a100000-9a1fe000 rw-p 00000000 00:00 0
> 9a1fe000-9a200000 ---p 00000000 00:00 0
> 9a300000-9a3f7000 rw-p 00000000 00:00 0
> 9a3f7000-9a400000 ---p 00000000 00:00 0
> 9a400000-9a500000 rw-p 00000000 00:00 0
> 9a500000-9a5c1000 rw-p 00000000 00:00 0
> 9a5c1000-9a600000 ---p 00000000 00:00 0
> 9a600000-9a6f2000 rw-p 00000000 00:00 0
> 9a6f2000-9a700000 ---p 00000000 00:00 0
> 9a700000-9a7c1000 rw-p 00000000 00:00 0
> 9a7c1000-9a800000 ---p 00000000 00:00 0
> 9a800000-9a8e5000 rw-p 00000000 00:00 0
> 9a8e5000-9a900000 ---p 00000000 00:00 0
> 9a900000-9a9e3000 rw-p 00000000 00:00 0
> 9a9e3000-9aa00000 ---p 00000000 00:00 0
> 9ab00000-9abf0000 rw-p 00000000 00:00 0
> 9abf0000-9ac00000 ---p 00000000 00:00 0
> 9ad00000-9adc1000 rw-p 00000000 00:00 0
> 9adc1000-9ae00000 ---p 00000000 00:00 0
> 9ae00000-9af00000 rw-p 00000000 00:00 0
> 9af00000-9affe000 rw-p 00000000 00:00 0
> 9affe000-9b000000 ---p 00000000 00:00 0
> 9b100000-9b1ff000 rw-p 00000000 00:00 0
> 9b1ff000-9b200000 ---p 00000000 00:00 0
> 9b300000-9b400000 rw-p 00000000 00:00 0
> 9b400000-9b4f8000 rw-p 00000000 00:00 0
> 9b4f8000-9b500000 ---p 00000000 00:00 0
> 9b500000-9b5da000 rw-p 00000000 00:00 0
> 9b5da000-9b600000 ---p 00000000 00:00 0
> 9b600000-9b6e5000 rw-p 00000000 00:00 0
> 9b6e5000-9b700000 ---p 00000000 00:00 0
> 9b700000-9b7ff000 rw-p 00000000 00:00 0
> 9b7ff000-9b800000 ---p 00000000 00:00 0
> 9b900000-9b9c1000 rw-p 00000000 00:00 0
> 9b9c1000-9ba00000 ---p 00000000 00:00 0
> 9ba00000-9bac7000 rw-p 00000000 00:00 0
> 9bac7000-9bb00000 ---p 00000000 00:00 0
> 9bb00000-9bbfb000 rw-p 00000000 00:00 0
> 9bbfb000-9bc00000 ---p 00000000 00:00 0
> 9bd00000-9bdfd000 rw-p 00000000 00:00 0
> 9bdfd000-9be00000 ---p 00000000 00:00 0
> 9bf00000-9bfd7000 rw-p 00000000 00:00 0
> 9bfd7000-9c000000 ---p 00000000 00:00 0
> 9c000000-9c100000 rw-p 00000000 00:00 0
> 9c100000-9c1fc000 rw-p 00000000 00:00 0
> 9c1fc000-9c200000 ---p 00000000 00:00 0
> 9c300000-9c3d7000 rw-p 00000000 00:00 0
> 9c3d7000-9c400000 ---p 00000000 00:00 0
> 9c500000-9c5c1000 rw-p 00000000 00:00 0
> 9c5c1000-9c600000 ---p 00000000 00:00 0
> 9c600000-9c6c1000 rw-p 00000000 00:00 0
> 9c6c1000-9c700000 ---p 00000000 00:00 0
> 9c700000-9c7e2000 rw-p 00000000 00:00 0
> 9c7e2000-9c800000 ---p 00000000 00:00 0
> 9c800000-9c8c1000 rw-p 00000000 00:00 0
> 9c8c1000-9c900000 ---p 00000000 00:00 0
> 9c900000-9c9f8000 rw-p 00000000 00:00 0
> 9c9f8000-9ca00000 ---p 00000000 00:00 0
> 9ca00000-9caff000 rw-p 00000000 00:00 0
> 9caff000-9cb00000 ---p 00000000 00:00 0
> 9cb00000-9cbff000 rw-p 00000000 00:00 0
> 9cbff000-9cc00000 ---p 00000000 00:00 0
> 9cd00000-9cdff000 rw-p 00000000 00:00 0
> 9cdff000-9ce00000 ---p 00000000 00:00 0
> 9cf00000-9d000000 rw-p 00000000 00:00 0
> 9d100000-9d1f5000 rw-p 00000000 00:00 0
> 9d1f5000-9d200000 ---p 00000000 00:00 0
> 9d300000-9d3ef000 rw-p 00000000 00:00 0
> 9d3ef000-9d400000 ---p 00000000 00:00 0
> 9d500000-9d600000 rw-p 00000000 00:00 0
> 9d700000-9d7fa000 rw-p 00000000 00:00 0
> 9d7fa000-9d800000 ---p 00000000 00:00 0
> 9d800000-9d8c1000 rw-p 00000000 00:00 0
> 9d8c1000-9d900000 ---p 00000000 00:00 0
> 9d900000-9d9c1000 rw-p 00000000 00:00 0
> 9d9c1000-9da00000 ---p 00000000 00:00 0
> 9da00000-9dac1000 rw-p 00000000 00:00 0
> 9dac1000-9db00000 ---p 00000000 00:00 0
> 9db00000-9dc00000 rw-p 00000000 00:00 0
> 9dd00000-9ddf8000 rw-p 00000000 00:00 0
> 9ddf8000-9de00000 ---p 00000000 00:00 0
> 9df00000-9dfff000 rw-p 00000000 00:00 0
> 9dfff000-9e000000 ---p 00000000 00:00 0
> 9e100000-9e1ff000 rw-p 00000000 00:00 0
> 9e1ff000-9e200000 ---p 00000000 00:00 0
> 9e200000-9e2ff000 rw-p 00000000 00:00 0
> 9e2ff000-9e300000 ---p 00000000 00:00 0
> 9e300000-9e3f4000 rw-p 00000000 00:00 0
> 9e3f4000-9e400000 ---p 00000000 00:00 0
> 9e400000-9e500000 rw-p 00000000 00:00 0
> 9e500000-9e5fe000 rw-p 00000000 00:00 0
> 9e5fe000-9e600000 ---p 00000000 00:00 0
> 9e700000-9e7d0000 rw-p 00000000 00:00 0
> 9e7d0000-9e800000 ---p 00000000 00:00 0
> 9e800000-9e900000 rw-p 00000000 00:00 0
> 9e900000-9e9c1000 rw-p 00000000 00:00 0
> 9e9c1000-9ea00000 ---p 00000000 00:00 0
> 9ea00000-9eac7000 rw-p 00000000 00:00 0
> 9eac7000-9eb00000 ---p 00000000 00:00 0
> 9eb00000-9ebff000 rw-p 00000000 00:00 0
> 9ebff000-9ec00000 ---p 00000000 00:00 0
> 9ed00000-9edff000 rw-p 00000000 00:00 0
> 9edff000-9ee00000 ---p 00000000 00:00 0
> 9ef00000-9f000000 rw-p 00000000 00:00 0
> 9f100000-9f1fe000 rw-p 00000000 00:00 0
> 9f1fe000-9f200000 ---p 00000000 00:00 0
> 9f300000-9f3fe000 rw-p 00000000 00:00 0
> 9f3fe000-9f400000 ---p 00000000 00:00 0
> 9f500000-9f5c9000 rw-p 00000000 00:00 0
> 9f5c9000-9f600000 ---p 00000000 00:00 0
> 9f700000-9f800000 rw-p 00000000 00:00 0
> 9f900000-9f9f7000 rw-p 00000000 00:00 0
> 9f9f7000-9fa00000 ---p 00000000 00:00 0
> 9fb00000-9fbfe000 rw-p 00000000 00:00 0
> 9fbfe000-9fc00000 ---p 00000000 00:00 0
> 9fd00000-9fe00000 rw-p 00000000 00:00 0
> 9ff00000-a0000000 rw-p 00000000 00:00 0
> a0100000-a0200000 rw-p 00000000 00:00 0
> a0300000-a0400000 rw-p 00000000 00:00 0
> a0400000-a04fd000 rw-p 00000000 00:00 0
> a04fd000-a0500000 ---p 00000000 00:00 0
> a0500000-a05ff000 rw-p 00000000 00:00 0
> a05ff000-a0600000 ---p 00000000 00:00 0
> a0600000-a06f3000 rw-p 00000000 00:00 0
> a06f3000-a0700000 ---p 00000000 00:00 0
> a0700000-a07ff000 rw-p 00000000 00:00 0
> a07ff000-a0800000 ---p 00000000 00:00 0
> a0900000-a09c1000 rw-p 00000000 00:00 0
> a09c1000-a0a00000 ---p 00000000 00:00 0
> a0a00000-a0ad0000 rw-p 00000000 00:00 0
> a0ad0000-a0b00000 ---p 00000000 00:00 0
> a0b00000-a0bf7000 rw-p 00000000 00:00 0
> a0bf7000-a0c00000 ---p 00000000 00:00 0
> a0c00000-a0cc7000 rw-p 00000000 00:00 0
> a0cc7000-a0d00000 ---p 00000000 00:00 0
> a0d00000-a0dfd000 rw-p 00000000 00:00 0
> a0dfd000-a0e00000 ---p 00000000 00:00 0
> a0f00000-a0fc8000 rw-p 00000000 00:00 0
> a0fc8000-a1000000 ---p 00000000 00:00 0
> a1100000-a1200000 rw-p 00000000 00:00 0
> a1300000-a13fb000 rw-p 00000000 00:00 0
> a13fb000-a1400000 ---p 00000000 00:00 0
> a1500000-a15f9000 rw-p 00000000 00:00 0
> a15f9000-a1600000 ---p 00000000 00:00 0
> a1600000-a16fc000 rw-p 00000000 00:00 0
> a16fc000-a1700000 ---p 00000000 00:00 0
> a1700000-a17f5000 rw-p 00000000 00:00 0
> a17f5000-a1800000 ---p 00000000 00:00 0
> a1900000-a1a00000 rw-p 00000000 00:00 0
> a1b00000-a1bc1000 rw-p 00000000 00:00 0
> a1bc1000-a1c00000 ---p 00000000 00:00 0
> a1c00000-a1cfc000 rw-p 00000000 00:00 0
> a1cfc000-a1d00000 ---p 00000000 00:00 0
> a1d00000-a1dc1000 rw-p 00000000 00:00 0
> a1dc1000-a1e00000 ---p 00000000 00:00 0
> a1e00000-a1ec1000 rw-p 00000000 00:00 0
> a1ec1000-a1f00000 ---p 00000000 00:00 0
> a1f00000-a1fff000 rw-p 00000000 00:00 0
> a1fff000-a2000000 ---p 00000000 00:00 0
> a2100000-a21f3000 rw-p 00000000 00:00 0
> a21f3000-a2200000 ---p 00000000 00:00 0
> a2200000-a22e5000 rw-p 00000000 00:00 0
> a22e5000-a2300000 ---p 00000000 00:00 0
> a2300000-a23ee000 rw-p 00000000 00:00 0
> a23ee000-a2400000 ---p 00000000 00:00 0
> a2500000-a25fa000 rw-p 00000000 00:00 0
> a25fa000-a2600000 ---p 00000000 00:00 0
> a2700000-a27ff000 rw-p 00000000 00:00 0
> a27ff000-a2800000 ---p 00000000 00:00 0
> a2900000-a29f2000 rw-p 00000000 00:00 0
> a29f2000-a2a00000 ---p 00000000 00:00 0
> a2a00000-a2ac1000 rw-p 00000000 00:00 0
> a2ac1000-a2b00000 ---p 00000000 00:00 0
> a2b00000-a2c00000 rw-p 00000000 00:00 0
> a2d00000-a2dc1000 rw-p 00000000 00:00 0
> a2dc1000-a2e00000 ---p 00000000 00:00 0
> a2e00000-a2ec1000 rw-p 00000000 00:00 0
> a2ec1000-a2f00000 ---p 00000000 00:00 0
> a2f00000-a2fc1000 rw-p 00000000 00:00 0
> a2fc1000-a3000000 ---p 00000000 00:00 0
> a3000000-a30c1000 rw-p 00000000 00:00 0
> a30c1000-a3100000 ---p 00000000 00:00 0
> a3100000-a31e1000 rw-p 00000000 00:00 0
> a31e1000-a3200000 ---p 00000000 00:00 0
> a327f000-a3400000 rw-p 00000000 00:00 0
> a3400000-a3500000 rw-p 00000000 00:00 0
> a3600000-a3700000 rw-p 00000000 00:00 0
> a3700000-a37e6000 rw-p 00000000 00:00 0
> a37e6000-a3800000 ---p 00000000 00:00 0
> a3800000-a38e5000 rw-p 00000000 00:00 0
> a38e5000-a3900000 ---p 00000000 00:00 0
> a3a00000-a3ad0000 rw-p 00000000 00:00 0
> a3ad0000-a3b00000 ---p 00000000 00:00 0
> a3b00000-a3bda000 rw-p 00000000 00:00 0
> a3bda000-a3c00000 ---p 00000000 00:00 0
> a3c00000-a3cc1000 rw-p 00000000 00:00 0
> a3cc1000-a3d00000 ---p 00000000 00:00 0
> a3d00000-a3dc7000 rw-p 00000000 00:00 0
> a3dc7000-a3e00000 ---p 00000000 00:00 0
> a3e00000-a3eff000 rw-p 00000000 00:00 0
> a3eff000-a3f00000 ---p 00000000 00:00 0
> a3f00000-a3fc1000 rw-p 00000000 00:00 0
> a3fc1000-a4000000 ---p 00000000 00:00 0
> a4000000-a40f8000 rw-p 00000000 00:00 0
> a40f8000-a4100000 ---p 00000000 00:00 0
> a4200000-a4300000 rw-p 00000000 00:00 0
> a4400000-a44ff000 rw-p 00000000 00:00 0
> a44ff000-a4500000 ---p 00000000 00:00 0
> a4600000-a4700000 rw-p 00000000 00:00 0
> a4800000-a4900000 rw-p 00000000 00:00 0
> a4900000-a49ff000 rw-p 00000000 00:00 0
> a49ff000-a4a00000 ---p 00000000 00:00 0
> a4b00000-a4bfe000 rw-p 00000000 00:00 0
> a4bfe000-a4c00000 ---p 00000000 00:00 0
> a4d00000-a4dc1000 rw-p 00000000 00:00 0
> a4dc1000-a4e00000 ---p 00000000 00:00 0
> a4e00000-a4ffc000 rw-p 00000000 00:00 0
> a4ffc000-a5000000 ---p 00000000 00:00 0
> a5100000-a51ff000 rw-p 00000000 00:00 0
> a51ff000-a5200000 ---p 00000000 00:00 0
> a5200000-a52ff000 rw-p 00000000 00:00 0
> a52ff000-a5300000 ---p 00000000 00:00 0
> a5300000-a53fa000 rw-p 00000000 00:00 0
> a53fa000-a5400000 ---p 00000000 00:00 0
> a5500000-a55de000 rw-p 00000000 00:00 0
> a55de000-a5600000 ---p 00000000 00:00 0
> a5700000-a57fa000 rw-p 00000000 00:00 0
> a57fa000-a5800000 ---p 00000000 00:00 0
> a5900000-a5a00000 rw-p 00000000 00:00 0
> a5b00000-a5bf6000 rw-p 00000000 00:00 0
> a5bf6000-a5c00000 ---p 00000000 00:00 0
> a5d00000-a5e00000 rw-p 00000000 00:00 0
> a5f00000-a5fff000 rw-p 00000000 00:00 0
> a5fff000-a6000000 ---p 00000000 00:00 0
> a6100000-a61ed000 rw-p 00000000 00:00 0
> a61ed000-a6200000 ---p 00000000 00:00 0
> a6300000-a63f7000 rw-p 00000000 00:00 0
> a63f7000-a6400000 ---p 00000000 00:00 0
> a6500000-a65ff000 rw-p 00000000 00:00 0
> a65ff000-a6600000 ---p 00000000 00:00 0
> a6700000-a6800000 rw-p 00000000 00:00 0
> a6900000-a6a00000 rw-p 00000000 00:00 0
> a6b00000-a6c00000 rw-p 00000000 00:00 0
> a6d00000-a6dec000 rw-p 00000000 00:00 0
> a6dec000-a6e00000 ---p 00000000 00:00 0
> a6f00000-a7000000 rw-p 00000000 00:00 0
> a7100000-a7200000 rw-p 00000000 00:00 0
> a7200000-a72fb000 rw-p 00000000 00:00 0
> a72fb000-a7300000 ---p 00000000 00:00 0
> a7300000-a73fe000 rw-p 00000000 00:00 0
> a73fe000-a7400000 ---p 00000000 00:00 0
> a7400000-a7500000 rw-p 00000000 00:00 0
> a7600000-a7800000 rw-p 00000000 00:00 0
> a7800000-a7900000 rw-p 00000000 00:00 0
> a7a00000-a7b00000 rw-p 00000000 00:00 0
> a7c00000-a7cff000 rw-p 00000000 00:00 0
> a7cff000-a7d00000 ---p 00000000 00:00 0
> a7e00000-a7f00000 rw-p 00000000 00:00 0
> a7f00000-a7fff000 rw-p 00000000 00:00 0
> a7fff000-a8000000 ---p 00000000 00:00 0
> a8000000-a80c1000 rw-p 00000000 00:00 0
> a80c1000-a8100000 ---p 00000000 00:00 0
> a8100000-a8200000 rw-p 00000000 00:00 0
> a8200000-a82fe000 rw-p 00000000 00:00 0
> a82fe000-a8300000 ---p 00000000 00:00 0
> a8400000-a84fe000 rw-p 00000000 00:00 0
> a84fe000-a8500000 ---p 00000000 00:00 0
> a8600000-a87ee000 rw-p 00000000 00:00 0
> a87ee000-a8800000 ---p 00000000 00:00 0
> a8800000-a88fe000 rw-p 00000000 00:00 0
> a88fe000-a8900000 ---p 00000000 00:00 0
> a8a00000-a8b00000 rw-p 00000000 00:00 0
> a8c00000-a8d00000 rw-p 00000000 00:00 0
> a8e00000-a8f00000 rw-p 00000000 00:00 0
> a8f00000-a8ffc000 rw-p 00000000 00:00 0
> a8ffc000-a9000000 ---p 00000000 00:00 0
> a9000000-a9100000 rw-p 00000000 00:00 0
> a9100000-a9300000 rw-p 00000000 00:00 0
> a9300000-a9500000 rw-p 00000000 00:00 0
> a9500000-a95f8000 rw-p 00000000 00:00 0
> a95f8000-a9600000 ---p 00000000 00:00 0
> a9600000-a9700000 rw-p 00000000 00:00 0
> a9700000-a9800000 rw-p 00000000 00:00 0
> a9900000-a9a00000 rw-p 00000000 00:00 0
> a9b00000-a9be9000 rw-p 00000000 00:00 0
> a9be9000-a9c00000 ---p 00000000 00:00 0
> a9c00000-a9cef000 rw-p 00000000 00:00 0
> a9cef000-a9d00000 ---p 00000000 00:00 0
> a9d00000-a9dc8000 rw-p 00000000 00:00 0
> a9dc8000-a9e00000 ---p 00000000 00:00 0
> a9e00000-a9ec7000 rw-p 00000000 00:00 0
> a9ec7000-a9f00000 ---p 00000000 00:00 0
> a9f00000-a9fc1000 rw-p 00000000 00:00 0
> a9fc1000-aa000000 ---p 00000000 00:00 0
> aa100000-aa1f2000 rw-p 00000000 00:00 0
> aa1f2000-aa200000 ---p 00000000 00:00 0
> aa200000-aa2c1000 rw-p 00000000 00:00 0
> aa2c1000-aa300000 ---p 00000000 00:00 0
> aa300000-aa3da000 rw-p 00000000 00:00 0
> aa3da000-aa400000 ---p 00000000 00:00 0
> aa400000-aa4e5000 rw-p 00000000 00:00 0
> aa4e5000-aa500000 ---p 00000000 00:00 0
> aa500000-aa5c1000 rw-p 00000000 00:00 0
> aa5c1000-aa600000 ---p 00000000 00:00 0
> aa600000-aa6d0000 rw-p 00000000 00:00 0
> aa6d0000-aa700000 ---p 00000000 00:00 0
> aa700000-aa7fe000 rw-p 00000000 00:00 0
> aa7fe000-aa800000 ---p 00000000 00:00 0
> aa900000-aab00000 rw-p 00000000 00:00 0
> aab00000-aabe7000 rw-p 00000000 00:00 0
> aabe7000-aac00000 ---p 00000000 00:00 0
> aac00000-aacc1000 rw-p 00000000 00:00 0
> aacc1000-aad00000 ---p 00000000 00:00 0
> aad00000-aaf00000 rw-p 00000000 00:00 0
> aaf00000-ab000000 rw-p 00000000 00:00 0
> ab0ef000-ab0f0000 ---p 00000000 00:00 0
> ab0f0000-ab8f0000 rwxp 00000000 00:00 0
> ab8f0000-ab8f1000 ---p 00000000 00:00 0
> ab8f1000-ac0f1000 rwxp 00000000 00:00 0
> ac0f1000-ac0f4000 ---p 00000000 00:00 0
> ac0f4000-ac8f2000 rwxp 00000000 00:00 0
> ac8f2000-ac8f3000 ---p 00000000 00:00 0
> ac8f3000-ad0f3000 rwxp 00000000 00:00 0
> ad0f3000-ad0f6000 ---p 00000000 00:00 0
> ad0f6000-ad8f4000 rwxp 00000000 00:00 0
> ad8f4000-ad8f7000 ---p 00000000 00:00 0
> ad8f7000-ae0f5000 rwxp 00000000 00:00 0
> ae0f5000-ae0f6000 ---p 00000000 00:00 0
> ae0f6000-ae8f6000 rwxp 00000000 00:00 0
> ae8f6000-ae8f7000 ---p 00000000 00:00 0
> ae8f7000-af0f7000 rwxp 00000000 00:00 0
> af0f7000-af0f8000 ---p 00000000 00:00 0
> af0f8000-af8f8000 rwxp 00000000 00:00 0
> af8f8000-af8fb000 ---p 00000000 00:00 0
> af8fb000-b00f9000 rwxp 00000000 00:00 0
> b00f9000-b00fa000 ---p 00000000 00:00 0
> b00fa000-b08fa000 rwxp 00000000 00:00 0
> b08fa000-b08fb000 ---p 00000000 00:00 0
> b08fb000-b10fb000 rwxp 00000000 00:00 0
> b10fb000-b10fc000 ---p 00000000 00:00 0
> b10fc000-b18fc000 rwxp 00000000 00:00 0
> b18fc000-b18fd000 ---p 00000000 00:00 0
> b18fd000-b20fd000 rwxp 00000000 00:00 0
> b20fd000-b20fe000 ---p 00000000 00:00 0
> b20fe000-b28fe000 rwxp 00000000 00:00 0
> b28fe000-b28ff000 ---p 00000000 00:00 0
> b28ff000-b30ff000 rwxp 00000000 00:00 0
> b30ff000-b3100000 ---p 00000000 00:00 0
> b3100000-b3900000 rwxp 00000000 00:00 0
> b3900000-b3b00000 rw-p 00000000 00:00 0
> b3b00000-b3d00000 rw-p 00000000 00:00 0
> b3d00000-b3dce000 rw-p 00000000 00:00 0
> b3dce000-b3e00000 ---p 00000000 00:00 0
> b3ee9000-b406a000 rw-p 00000000 00:00 0
> b406a000-b4200000 r--s 02fd0000 08:02 158129
> /usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/rt.jar
> b4200000-b42fe000 rw-p 00000000 00:00 0
> b42fe000-b4300000 ---p 00000000 00:00 0
> b4304000-b4305000 rw-p 00000000 00:00 0
> b4306000-b4307000 rw-p 00000000 00:00 0
> b4307000-b430e000 r--s 00000000 08:02 336115
> /usr/lib/gconv/gconv-modules.cache
> b430e000-b4310000 rw-p 00000000 00:00 0
> b4310000-b4312000 r--s 00002000 08:02 2703937
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/extensions.jar
> b4312000-b4314000 r--s 00009000 08:02 2703934
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-instantiated-2.4.0.jar
> b4314000-b4318000 r--s 00020000 08:02 2703933
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-analyzers-2.4.0.jar
> b4318000-b4325000 r--s 000bb000 08:02 2703938
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-core-2.4.0.jar
> b4325000-b4339000 rw-p 00000000 00:00 0
> b4339000-b4353000 rw-p 00000000 00:00 0
> b4353000-b44a9000 rw-p 00000000 00:00 0
> b44a9000-b4553000 rw-p 00000000 00:00 0
> b4553000-b46a9000 rw-p 00000000 00:00 0
> b46a9000-b46af000 rw-p 00000000 00:00 0
> b46af000-b46c9000 rw-p 00000000 00:00 0
> b46c9000-b46dc000 rw-p 00000000 00:00 0
> b46dc000-b4755000 rw-p 00000000 00:00 0
> b4755000-b490d000 rwxp 00000000 00:00 0
> b490d000-b6755000 rw-p 00000000 00:00 0
> b6755000-b6757000 rw-p 00000000 00:00 0
> b6757000-b6759000 r--s 00007000 08:02 2703931
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-queries-2.4.0.jar
> b6759000-b675a000 r--s 00002000 08:02 2703935
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-regex-2.4.0.jar
> b675a000-b675b000 ---p 00000000 00:00 0
> b675b000-b6f5b000 rwxp 00000000 00:00 0
> b6f5b000-b6f5c000 ---p 00000000 00:00 0
> b6f5c000-b775c000 rwxp 00000000 00:00 0
> b775c000-b775e000 rw-p 00000000 00:00 0
> b775e000-b779d000 r--p 00000000 08:02 2835742
> /usr/lib/locale/en_IN/LC_CTYPE
> b779d000-b7821000 rw-p 00000000 00:00 0
> b7821000-b7824000 r--s 00014000 08:02 2703932
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-highlighter-2.4.0.jar
> b7824000-b7826000 r--s 0001a000 08:02 2703930
> /home/mvmail/test/demo/core/site-packages/lucene-2.4.0-py2.5-linux-i686.e=
gg/lucene/lucene-snowball-2.4.0.jar
> b7826000-b782e000 rw-s 00000000 08:02 2170936 =A0 =A0/tmp/hsperfdata_mvma=
il/9541
> b782e000-b782f000 rw-p 00000000 00:00 0
> b782f000-b7830000 r--p 00000000 00:00 0
> b7830000-b7832000 rw-p 00000000 00:00 0
> bfbce000-bfbd1000 ---p 00000000 00:00 0
> bfbd1000-bfc1e000 rwxp 00000000 00:00 0 =A0 =A0 =A0 =A0 =A0[stack]
> bfc1e000-bfc20000 rw-p 00000000 00:00 0
>
> VM Arguments:
> jvm_args: -Xms32m -Xmx1024m
> java_command: <unknown>
> Launcher Type: generic
>
> Environment Variables:
> PATH=3D/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/=
games
> USERNAME=3Dmvmail
> SHELL=3D/bin/bash
> DISPLAY=3D:0.0
>
> Signal Handlers:
> SIGSEGV: [libjvm.so+0x418670], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x1000=
0004
> SIGBUS: [libjvm.so+0x418670], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x10000=
004
> SIGFPE: [libjvm.so+0x33e070], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x10000=
004
> SIGPIPE: [libjvm.so+0x33e070], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x1000=
0004
> SIGXFSZ: [libjvm.so+0x33e070], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x1000=
0004
> SIGILL: [libjvm.so+0x33e070], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x10000=
004
> SIGUSR1: SIG_DFL, sa_mask[0]=3D0x00000000, sa_flags=3D0x00000000
> SIGUSR2: [libjvm.so+0x340cb0], sa_mask[0]=3D0x00000000, sa_flags=3D0x1000=
0004
> SIGHUP: [libjvm.so+0x3409e0], sa_mask[0]=3D0x7ffbfeff, sa_flags=3D0x10000=
004
> SIGINT: [+0xad9b0], sa_mask[0]=3D0x00000000, sa_flags=3D0x00000000
> SIGTERM: [+0xad9b0], sa_mask[0]=3D0x00000000, sa_flags=3D0x00000000
> SIGQUIT: [+0xad9b0], sa_mask[0]=3D0x00000000, sa_flags=3D0x00000000
>
>
> --------------- =A0S Y S T E M =A0---------------
>
> OS:squeeze/sid
>
> uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:04:26 UTC 2009
> i686
> libc:glibc 2.10.1 NPTL 2.10.1
> rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity
> load average:4.19 2.49 1.88
>
> CPU:total 8 (2 cores per cpu, 2 threads per core) family 15 model 6 stepp=
ing
> 4, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ht
>
> Memory: 4k page, physical 3096484k(92904k free), swap 7812492k(7682632k
> free)
>
> vm_info: Java HotSpot(TM) Client VM (16.3-b01) for linux-x86 JRE
> (1.6.0_20-b02), built on Apr 12 2010 14:15:08 by "java_re" with gcc 3.2.1=
-7a
> (J2SE release)
>
> time: Fri Oct 15 18:20:54 2010
> elapsed time: 48191 seconds
>
>
> *
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 11:27:27 2010
Return-Path: <java-user-return-47539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93832 invoked from network); 18 Oct 2010 11:27:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 11:27:27 -0000
Received: (qmail 60179 invoked by uid 500); 18 Oct 2010 11:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59731 invoked by uid 500); 18 Oct 2010 11:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59723 invoked by uid 99); 18 Oct 2010 11:27:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 11:27:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max.jakob@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 11:27:14 +0000
Received: by gyh3 with SMTP id 3so365201gyh.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 04:26:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=F37zSFVWlvTROFw9vf0XiWc4jepkhIM1gNr8Wg2ELgQ=;
        b=qYemqGtqgSxue5c46h72FYOKsjGLcjRrv6S8s0mrEE7cgOZ0XyPegrfkOsgPFJTO7J
         fX5Tc3hjhrPDOrmIChGqaJ0P6MUa7EKvqHnetRmmnA92sK22PtyTqRYdZLzPQGUT27/k
         6TzkfvZztouXo8yQaMuLNk50r80JudyY7XRoU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=vXPHpdS00hziGeVBVJYCJCO/tzWnkIrjs5Sbfp9yJmJfW/BJV8tE/v50C4d48Ch5it
         owW0KXffkcraOPkhdcUI/1tq0lsHT9+qo4kH34odxTc+CbQwKOFmQnkxo8uflGRrp/69
         TK5J4Xqde6o706siHLvxs2xZqwnpFcRZLMf7c=
Received: by 10.42.176.8 with SMTP id bc8mr2571053icb.93.1287401213508; Mon,
 18 Oct 2010 04:26:53 -0700 (PDT)
MIME-Version: 1.0
Sender: max.jakob@gmail.com
Received: by 10.220.100.74 with HTTP; Mon, 18 Oct 2010 04:26:33 -0700 (PDT)
From: Max Jakob <max.jakob@fu-berlin.de>
Date: Mon, 18 Oct 2010 13:26:33 +0200
X-Google-Sender-Auth: uNi_fwrrftZ3oWM_iErg52SL8Xs
Message-ID: <AANLkTin31fQ1H2=j9BtmNo9hwi3enfKZ1sa72cY+u5vO@mail.gmail.com>
Subject: Consider only documents of a category for IDF
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I would like to change the IDF value of the Lucene similarity
computation to "inverse document frequency inside category". Not the
complete collection should be considered, but only the documents that
have a certain category. The categories are stored as separate fields.

The implementation below works, but it is kind of slow. I was
wondering if there is a more efficient way than to read the DocIdSet
from the index for each term.

Thanks in advance for any pointers you might have!
Regards,
Max

public class InCategorySimilarity extends DefaultSimilarity {

   public InCategorySimilarity() {}

   // These objects have to be here so that they are visible across
multiple executions of idfExplain
   OpenBitSet categoryIdSet;
   long catDocs = 1;

   @Override
   public Explanation.IDFExplanation idfExplain(final Term term,
final Searcher searcher) throws IOException {
       return new Explanation.IDFExplanation() {
           long termCategoryFreq = 0;
           boolean isCategoryField = term.field().equals("CATEGORY");

           private long termCategoryFreq() {
               try {
                   IndexReader reader = ((IndexSearcher)
searcher).getIndexReader();
                   TermsFilter filter = new TermsFilter();
                   filter.addTerm(term);
                   OpenBitSet docSet = (OpenBitSet) filter.getDocIdSet(reader);

                   if (isCategoryField) {
                       categoryIdSet = docSet;
                       catDocs = categoryIdSet.cardinality();
                   } else {
                       docSet.and(categoryIdSet);
                   }
                  termCategoryFreq = docSet.cardinality();
               } catch (IOException e) {
                   //handle
               }
               return termCategoryFreq;
           }

           public float invCatFreq(long termCategoryFreq, long catDocs) {
               return termCategoryFreq==0 ? 0 : (float) (Math.log(new
Float(catDocs) / new Float(termCategoryFreq)) + 1.0);
           }

           @Override
           public float getIdf() {
               termCategoryFreq = termCategoryFreq();
               float invCatFreq = invCatFreq(termCategoryFreq, catDocs);
               return invCatFreq;
           }
       };
   }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 12:32:55 2010
Return-Path: <java-user-return-47540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23176 invoked from network); 18 Oct 2010 12:32:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 12:32:55 -0000
Received: (qmail 47079 invoked by uid 500); 18 Oct 2010 12:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46859 invoked by uid 500); 18 Oct 2010 12:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46851 invoked by uid 99); 18 Oct 2010 12:32:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 12:32:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.110.143] (HELO web29007.mail.ird.yahoo.com) (212.82.110.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Oct 2010 12:32:43 +0000
Received: (qmail 22470 invoked by uid 60001); 18 Oct 2010 12:32:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1287405141; bh=T4m22OZSwtuAsZab0+8bRepOE5UQB/O2RAcKPadmmBQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=CciwZi6xu1Q11r7dOQrqaH2EIZsn5I857xfgGF1Pd2JzQ6UKpL2QIa/DeelK3EDvRNrH8wAhwf15yshxGZ+1C409c/4KNhHI8ETfAxNFTJ0c4sTWXUg0rtZz4fIqaTxTam0IzH4eBnqGa7SkbGrZVYJUbPTkEdmwPb0EC8VSTIs=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=GsdBBODqmoT7d/obNb1I6uduZ4OCwBRhf14n6uARgQ6jC21VCXQqhWJMlngqeL+20wM0tNXRWR6f5smWhQNsOJ47Wv+sx2Asq46XtEn4rw2uB0axgO7OGnfaDVRRydF+RzDuQf8RccGCMYCcRqarYU6AjUL0Sz574NnVtFMPjS4=;
Message-ID: <465095.21899.qm@web29007.mail.ird.yahoo.com>
X-YMail-OSG: FIWixGoVM1kZdsx8LdEVu_udbBzZP5bA8umfe7L5e8_6r7x
 smdxnbmhA6FMp5KzRST9w.POmCajhBQvWggF2BJZlkCHxQDgae7dOMUHE4jv
 owjSDh3bOgt4X2c9jRp.QdP.hWo_kenS7bD5B8B.TUAsEJ7vVrnrD.6I1e1g
 2cUugGlN.F7KGirraad1rrL2w1q42xIa3wlzgB71oMFiK7sPmivkBTkoGNFI
 H9IjE8jt7ag6YYBBKk4hql10IcXMCOlWy44dwtJtS8WqAuO9qgRMtiNlktHg
 1f4W6xIWTGZjL8Fpuw78JobwI8qW3IVR8tA--
Received: from [193.36.230.96] by web29007.mail.ird.yahoo.com via HTTP; Mon, 18 Oct 2010 13:32:18 BST
X-Mailer: YahooMailRC/504.5 YahooMailWebService/0.8.106.282862
References: <AANLkTin31fQ1H2=j9BtmNo9hwi3enfKZ1sa72cY+u5vO@mail.gmail.com>
Date: Mon, 18 Oct 2010 13:32:18 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Consider only documents of a category for IDF
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTin31fQ1H2=j9BtmNo9hwi3enfKZ1sa72cY+u5vO@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Can you not just call reader.docFreq(categoryTerm) ?=0A=0AThe returned figu=
re includes deleted docs but then the search term uses this =0Amethod too s=
o should suffer from the same inaccuracy.=0A=0ACheers=0AMark=0A=0A=0A=0A---=
-- Original Message ----=0AFrom: Max Jakob <max.jakob@fu-berlin.de>=0ATo: j=
ava-user@lucene.apache.org=0ASent: Mon, 18 October, 2010 12:26:33=0ASubject=
: Consider only documents of a category for IDF=0A=0AHi,=0A=0AI would like =
to change the IDF value of the Lucene similarity=0Acomputation to "inverse =
document frequency inside category". Not the=0Acomplete collection should b=
e considered, but only the documents that=0Ahave a certain category. The ca=
tegories are stored as separate fields.=0A=0AThe implementation below works=
, but it is kind of slow. I was=0Awondering if there is a more efficient wa=
y than to read the DocIdSet=0Afrom the index for each term.=0A=0AThanks in =
advance for any pointers you might have!=0ARegards,=0AMax=0A=0Apublic class=
 InCategorySimilarity extends DefaultSimilarity {=0A=0A   public InCategory=
Similarity() {}=0A=0A   // These objects have to be here so that they are v=
isible across=0Amultiple executions of idfExplain=0A   OpenBitSet categoryI=
dSet;=0A   long catDocs =3D 1;=0A=0A   @Override=0A   public Explanation.ID=
FExplanation idfExplain(final Term term,=0Afinal Searcher searcher) throws =
IOException {=0A       return new Explanation.IDFExplanation() {=0A        =
   long termCategoryFreq =3D 0;=0A           boolean isCategoryField =3D te=
rm.field().equals("CATEGORY");=0A=0A           private long termCategoryFre=
q() {=0A               try {=0A                   IndexReader reader =3D ((=
IndexSearcher)=0Asearcher).getIndexReader();=0A                   TermsFilt=
er filter =3D new TermsFilter();=0A                   filter.addTerm(term);=
=0A                   OpenBitSet docSet =3D (OpenBitSet) filter.getDocIdSet=
(reader);=0A=0A                   if (isCategoryField) {=0A                =
       categoryIdSet =3D docSet;=0A                       catDocs =3D categ=
oryIdSet.cardinality();=0A                   } else {=0A                   =
    docSet.and(categoryIdSet);=0A                   }=0A                  t=
ermCategoryFreq =3D docSet.cardinality();=0A               } catch (IOExcep=
tion e) {=0A                   //handle=0A               }=0A              =
 return termCategoryFreq;=0A           }=0A=0A           public float invCa=
tFreq(long termCategoryFreq, long catDocs) {=0A               return termCa=
tegoryFreq=3D=3D0 ? 0 : (float) (Math.log(new=0AFloat(catDocs) / new Float(=
termCategoryFreq)) + 1.0);=0A           }=0A=0A           @Override=0A     =
      public float getIdf() {=0A               termCategoryFreq =3D termCat=
egoryFreq();=0A               float invCatFreq =3D invCatFreq(termCategoryF=
req, catDocs);=0A               return invCatFreq;=0A           }=0A       =
};=0A   }=0A}=0A=0A--------------------------------------------------------=
-------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache=
.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 14:33:44 2010
Return-Path: <java-user-return-47541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76105 invoked from network); 18 Oct 2010 14:33:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 14:33:43 -0000
Received: (qmail 69125 invoked by uid 500); 18 Oct 2010 14:33:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68764 invoked by uid 500); 18 Oct 2010 14:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68751 invoked by uid 99); 18 Oct 2010 14:33:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 14:33:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of max.jakob@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 14:33:31 +0000
Received: by bwz5 with SMTP id 5so811145bwz.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 07:33:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:cc:content-type:content-transfer-encoding;
        bh=lLnylfXNHrW+LjIxMu4XNWzHxytPOLaC9VgmsU64lXw=;
        b=YFniubm89kuiI/mnaKczKf9hyDuNfgxWdldTet0WglKTxEyeNS8wrfQsnnhvt/thTs
         kG9RkQiwDrv5eL3wOshzLr0qfA2Vu5IajRQR6AfDb9KnjNBjUMGFbv5EX22jCYGj/mID
         kjgIEBt6WpyhdZ87d7AtTyUCqNSyrstO4sGtE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:cc:content-type
         :content-transfer-encoding;
        b=ChsAE6salnN6OFXkxKsAtCjVMkYMPmwnDzvvwGTBH903HDfNdeeGqBLXLd6o9+mrv/
         1ZH7caT6S+IGPhkRnDnUB52i8DoeX1M/C6q2tQg7elKfopex1g4GgrjAQ4EQ0otkKisa
         M4RXLs82gimZvQdlv7qkPYuMFT8//ncY61360=
Received: by 10.204.69.200 with SMTP id a8mr4579255bkj.36.1287412390528; Mon,
 18 Oct 2010 07:33:10 -0700 (PDT)
MIME-Version: 1.0
Sender: max.jakob@gmail.com
Received: by 10.220.100.74 with HTTP; Mon, 18 Oct 2010 07:32:49 -0700 (PDT)
In-Reply-To: <465095.21899.qm@web29007.mail.ird.yahoo.com>
References: <AANLkTin31fQ1H2=j9BtmNo9hwi3enfKZ1sa72cY+u5vO@mail.gmail.com> <465095.21899.qm@web29007.mail.ird.yahoo.com>
From: Max Jakob <max.jakob@fu-berlin.de>
Date: Mon, 18 Oct 2010 16:32:49 +0200
X-Google-Sender-Auth: nR3bIO4v930jiQo3dNMhhrpAdmo
Message-ID: <AANLkTiny2N8hF-hFEsGzz4miCWPr8HhZB=OMvGiFm7hT@mail.gmail.com>
Subject: Re: Consider only documents of a category for IDF
To: java-user@lucene.apache.org
Cc: markharw00d@yahoo.co.uk
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark, the call reader.docFreq(categoryTerm) is certainly a good
way to get the nominator part of the IDF formula
(http://en.wikipedia.org/wiki/Tf%E2%80%93idf#Mathematical_details).

However, what is left to get is the denominator. For this I want the
number of in-category documents that each term appears in (again,
categories are in a separate field). Calling reader.docFreq(term) for
this would give me the document frequency in the complete collection,
but I only want the number of documents that the term appears within a
category.

So for a query +CATEGORY:sport TEXT:Johnson, I would like to set the IDF to
   log( (number of all sports documents)
         / (number of all sports documents that contain Johnson) )

Is there an efficient way for doing this?

Cheers,
Max

On Mon, Oct 18, 2010 at 2:32 PM, mark harwood <markharw00d@yahoo.co.uk> wro=
te:
> Can you not just call reader.docFreq(categoryTerm) ?
>
> The returned figure includes deleted docs but then the search term uses t=
his
> method too so should suffer from the same inaccuracy.
>
> Cheers
> Mark
>
>
>
> ----- Original Message ----
> From: Max Jakob <max.jakob@fu-berlin.de>
> To: java-user@lucene.apache.org
> Sent: Mon, 18 October, 2010 12:26:33
> Subject: Consider only documents of a category for IDF
>
> Hi,
>
> I would like to change the IDF value of the Lucene similarity
> computation to "inverse document frequency inside category". Not the
> complete collection should be considered, but only the documents that
> have a certain category. The categories are stored as separate fields.
>
> The implementation below works, but it is kind of slow. I was
> wondering if there is a more efficient way than to read the DocIdSet
> from the index for each term.
>
> Thanks in advance for any pointers you might have!
> Regards,
> Max
>
> public class InCategorySimilarity extends DefaultSimilarity {
>
> =A0 public InCategorySimilarity() {}
>
> =A0 // These objects have to be here so that they are visible across
> multiple executions of idfExplain
> =A0 OpenBitSet categoryIdSet;
> =A0 long catDocs =3D 1;
>
> =A0 @Override
> =A0 public Explanation.IDFExplanation idfExplain(final Term term,
> final Searcher searcher) throws IOException {
> =A0 =A0 =A0 return new Explanation.IDFExplanation() {
> =A0 =A0 =A0 =A0 =A0 long termCategoryFreq =3D 0;
> =A0 =A0 =A0 =A0 =A0 boolean isCategoryField =3D term.field().equals("CATE=
GORY");
>
> =A0 =A0 =A0 =A0 =A0 private long termCategoryFreq() {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 try {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexReader reader =3D ((IndexSearche=
r)
> searcher).getIndexReader();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 TermsFilter filter =3D new TermsFilte=
r();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 filter.addTerm(term);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 OpenBitSet docSet =3D (OpenBitSet) fi=
lter.getDocIdSet(reader);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 if (isCategoryField) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 categoryIdSet =3D docSet;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 catDocs =3D categoryIdSet.car=
dinality();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 } else {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 docSet.and(categoryIdSet);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0termCategoryFreq =3D docSet.cardinalit=
y();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 } catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 //handle
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 return termCategoryFreq;
> =A0 =A0 =A0 =A0 =A0 }
>
> =A0 =A0 =A0 =A0 =A0 public float invCatFreq(long termCategoryFreq, long c=
atDocs) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 return termCategoryFreq=3D=3D0 ? 0 : (float) =
(Math.log(new
> Float(catDocs) / new Float(termCategoryFreq)) + 1.0);
> =A0 =A0 =A0 =A0 =A0 }
>
> =A0 =A0 =A0 =A0 =A0 @Override
> =A0 =A0 =A0 =A0 =A0 public float getIdf() {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 termCategoryFreq =3D termCategoryFreq();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 float invCatFreq =3D invCatFreq(termCategoryF=
req, catDocs);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 return invCatFreq;
> =A0 =A0 =A0 =A0 =A0 }
> =A0 =A0 =A0 };
> =A0 }
> }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 17:55:53 2010
Return-Path: <java-user-return-47542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5106 invoked from network); 18 Oct 2010 17:55:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 17:55:52 -0000
Received: (qmail 9258 invoked by uid 500); 18 Oct 2010 17:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9182 invoked by uid 500); 18 Oct 2010 17:55:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9174 invoked by uid 99); 18 Oct 2010 17:55:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 17:55:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 17:55:43 +0000
Received: by qyk7 with SMTP id 7so4870235qyk.14
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 10:55:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=PI7ZAkLaXo02kKufH8bXRTjZULuNrIXBVfJ/M7rNMVw=;
        b=Aq6WpfvQ3lOnWAyioiJ9z0zHY3WSNEnwQZ5Qk8ZFBjeJK41fKXzMExygVZYvGIA8gO
         N+uru+dFch5cejJD6HhIMfnaQrkTcZqNafTWWJBkWjy5/wPAt+NSvthyDUEEMaKeBca2
         /K+i9IQbffq9YL+cUBHLdV214mET2147aQ4oc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=GdlUId1j1GmnM1LNGTmKPQ+1gmfF4Tq7tqMbWD9KlaJGvFTBqFeh+WVpnrO/ve/BRE
         qM7tfdG2/9MJU5qj/ZJfMAsWBYeZfysA87/2R7WvAN60edooJipRQdN6lBVoO+wq0P81
         lyU9hzMOEgbZRuuv8IdYKkeLow3CEde0T+ZLM=
Received: by 10.224.210.2 with SMTP id gi2mr3023757qab.108.1287424521703; Mon,
 18 Oct 2010 10:55:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Mon, 18 Oct 2010 10:55:00 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Mon, 18 Oct 2010 10:55:00 -0700
Message-ID: <AANLkTim6RWEj04tS8YvcfKRXFPsb+j6hn4iJpNya=Ood@mail.gmail.com>
Subject: Parse multiple fields using Queryparser
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300faf3b4a91f40492e7e102

--20cf300faf3b4a91f40492e7e102
Content-Type: text/plain; charset=ISO-8859-1

I have many fields in my document and want to parse my query including each
of them

QueryParser parser = new QueryParser(Version.LUCENE_29, "Field2",new
StandardAnalyzer(Version.LUCENE_29));

Should I create multiple parsers in this case or is there any other way
round?

--20cf300faf3b4a91f40492e7e102--

From java-user-return-47543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 18:18:36 2010
Return-Path: <java-user-return-47543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19324 invoked from network); 18 Oct 2010 18:18:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 18:18:36 -0000
Received: (qmail 46545 invoked by uid 500); 18 Oct 2010 18:18:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46491 invoked by uid 500); 18 Oct 2010 18:18:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46483 invoked by uid 99); 18 Oct 2010 18:18:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 18:18:33 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 18:18:26 +0000
Received: by fxm13 with SMTP id 13so938649fxm.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 11:18:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.185.145 with SMTP id u17mr4999786wem.79.1287425885105;
 Mon, 18 Oct 2010 11:18:05 -0700 (PDT)
Sender: felipe@goshme.com
Received: by 10.216.68.9 with HTTP; Mon, 18 Oct 2010 11:18:04 -0700 (PDT)
In-Reply-To: <AANLkTim6RWEj04tS8YvcfKRXFPsb+j6hn4iJpNya=Ood@mail.gmail.com>
References: <AANLkTim6RWEj04tS8YvcfKRXFPsb+j6hn4iJpNya=Ood@mail.gmail.com>
Date: Mon, 18 Oct 2010 15:18:04 -0300
X-Google-Sender-Auth: y3aFgxA_PWqVJ-zRg9FvowCHZf0
Message-ID: <AANLkTimNFXCHipGM2ajB2+3N0VhyRdaOzGNP5fdh7eYr@mail.gmail.com>
Subject: Re: Parse multiple fields using Queryparser
From: Felipe Lobo <felipe@jusbrasil.com.br>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fb4538e6d520492e832bb
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367fb4538e6d520492e832bb
Content-Type: text/plain; charset=ISO-8859-1

You can use *MultiFieldQueryParser*.

http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/queryParser/MultiFieldQueryParser.html

2010/10/18 Nilesh Vijaywargiay <nilesh.vijay@gmail.com>

> I have many fields in my document and want to parse my query including each
> of them
>
> QueryParser parser = new QueryParser(Version.LUCENE_29, "Field2",new
> StandardAnalyzer(Version.LUCENE_29));
>
> Should I create multiple parsers in this case or is there any other way
> round?
>



-- 
Felipe Lobo
www.jusbrasil.com.br

--0016367fb4538e6d520492e832bb--

From java-user-return-47544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 18:57:57 2010
Return-Path: <java-user-return-47544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43300 invoked from network); 18 Oct 2010 18:57:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 18:57:57 -0000
Received: (qmail 1588 invoked by uid 500); 18 Oct 2010 18:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1392 invoked by uid 500); 18 Oct 2010 18:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1383 invoked by uid 99); 18 Oct 2010 18:57:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 18:57:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Oct 2010 18:57:52 +0000
Received: (qmail 43265 invoked by uid 99); 18 Oct 2010 18:57:31 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 18:57:31 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: ApacheCon Meetup in Atlanta
Date: Mon, 18 Oct 2010 14:57:29 -0400
Message-Id: <DFCEE336-C501-4A6C-AE00-13CF721F0EEF@apache.org>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Is there interest in having a Meetup at ApacheCon?  Who's going?  Would =
anyone like to present?  We could do something less formal, too, and =
just have drinks and Q&A/networking.  Thoughts?

-Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 19:20:12 2010
Return-Path: <java-user-return-47545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57849 invoked from network); 18 Oct 2010 19:20:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 19:20:11 -0000
Received: (qmail 43455 invoked by uid 500); 18 Oct 2010 19:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43386 invoked by uid 500); 18 Oct 2010 19:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43269 invoked by uid 99); 18 Oct 2010 19:20:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 19:20:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 19:20:01 +0000
Received: by pxi20 with SMTP id 20so331298pxi.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 12:19:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=fcAiVSXHl3tr0pxNOevcSjtpYwntHXmHqzWETdORvb4=;
        b=xjh9B4Wlxs6qPo7k+W19r8sHIs+DuOLbSFzAJ7QUAlSGgUCH3sEd8uLwycBxQOdsxJ
         0AKHRHHBheUFFSBRyMjoWH9Zy7Mesqbx+A6hXzFTlA/rz6Fbin3tkNgvy5OhnF5WjZvU
         Y6kz23DqFFsSmZs/8YJJtRWGRl5e71QUhhaLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=UpFyRzgynaxZeBhrgms8TN7lBxyt2Y0j7Jp30rhHPfmthaBHo9biBTDbNxC99hh5PY
         TtPbSDaLtOU09ssaWTZxSjVy4hx3y66/Djm+okilMYd4sfZPK7Ud335M/53Y/mKnktkn
         vE664JIWXnAJ2E+Dg9OuiLo+8bnztlII+/J7o=
Received: by 10.142.157.7 with SMTP id f7mr3825110wfe.335.1287429580723;
        Mon, 18 Oct 2010 12:19:40 -0700 (PDT)
Received: from [192.168.1.102] (216-12-64-43.access.ntelos.net [216.12.64.43])
        by mx.google.com with ESMTPS id e16sm3728591vcm.32.2010.10.18.12.19.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 18 Oct 2010 12:19:35 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: ApacheCon Meetup in Atlanta
From: Erik Hatcher <erik.hatcher@gmail.com>
In-Reply-To: <DFCEE336-C501-4A6C-AE00-13CF721F0EEF@apache.org>
Date: Mon, 18 Oct 2010 15:19:32 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <B4D88F0C-3948-43DC-81D1-1FFB0F1D3DF0@gmail.com>
References: <DFCEE336-C501-4A6C-AE00-13CF721F0EEF@apache.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)

Count me in for any kind of Lucene/Solr hanging out in Atlanta.

	Erik


On Oct 18, 2010, at 14:57 , Grant Ingersoll wrote:

> Is there interest in having a Meetup at ApacheCon?  Who's going?  =
Would anyone like to present?  We could do something less formal, too, =
and just have drinks and Q&A/networking.  Thoughts?
>=20
> -Grant
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 22:05:30 2010
Return-Path: <java-user-return-47546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46915 invoked from network); 18 Oct 2010 22:05:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 22:05:30 -0000
Received: (qmail 8382 invoked by uid 500); 18 Oct 2010 22:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8305 invoked by uid 500); 18 Oct 2010 22:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8297 invoked by uid 99); 18 Oct 2010 22:05:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 22:05:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 22:05:20 +0000
Received: by gxk1 with SMTP id 1so935188gxk.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 15:04:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=V6I8i2IgsLtMvwZD81R3Hq8nO5NQABQ1vOP6amt+VCc=;
        b=WQpm1/at9Lqu2r9AWeIMBTna36PZa4VTFUCs8l6mTP0ubwN+2As8cLbuz7Gfb8Xz9Z
         mzP3QjMRarafppnIcqO/xoTubL61TtO/kzoYp+8yxe2bYteToRGoNgojT2F2a/4FG5V1
         hfOvRg4PgIgYkaoBMmgV5sAajZY2XPYT8LISM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bFeGWb0IijWTNl6ln2jWrE1OAHcSnGpo1pqjmsnbr09PlUNNY2/750rHQuJSPMeITo
         b+KQGHJDYoarK5xZ64tAzmsBBUoR9v152zOpAhWTMSE/wq7uWjfe7BFsjPztax7x0OUz
         s6tu29gf98zoYqdR0Cc3cjxusR8eObcmpPauk=
MIME-Version: 1.0
Received: by 10.42.223.201 with SMTP id il9mr866240icb.225.1287439498848; Mon,
 18 Oct 2010 15:04:58 -0700 (PDT)
Received: by 10.42.114.141 with HTTP; Mon, 18 Oct 2010 15:04:58 -0700 (PDT)
In-Reply-To: <B4D88F0C-3948-43DC-81D1-1FFB0F1D3DF0@gmail.com>
References: <DFCEE336-C501-4A6C-AE00-13CF721F0EEF@apache.org>
	<B4D88F0C-3948-43DC-81D1-1FFB0F1D3DF0@gmail.com>
Date: Mon, 18 Oct 2010 18:04:58 -0400
Message-ID: <AANLkTi=rNfOgKvwjF-kMoCfZhUmgMdxhNc61TK2Mbem8@mail.gmail.com>
Subject: Re: ApacheCon Meetup in Atlanta
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf305496b9ffa8c50492eb5dd2
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf305496b9ffa8c50492eb5dd2
Content-Type: text/plain; charset=ISO-8859-1

I do not have much to present at this moment but I will attend.  Thanks.

Qi



On Mon, Oct 18, 2010 at 3:19 PM, Erik Hatcher <erik.hatcher@gmail.com>wrote:

> Count me in for any kind of Lucene/Solr hanging out in Atlanta.
>
>        Erik
>
>
> On Oct 18, 2010, at 14:57 , Grant Ingersoll wrote:
>
> > Is there interest in having a Meetup at ApacheCon?  Who's going?  Would
> anyone like to present?  We could do something less formal, too, and just
> have drinks and Q&A/networking.  Thoughts?
> >
> > -Grant
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf305496b9ffa8c50492eb5dd2--

From java-user-return-47547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 22:24:43 2010
Return-Path: <java-user-return-47547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54787 invoked from network); 18 Oct 2010 22:24:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 22:24:43 -0000
Received: (qmail 44717 invoked by uid 500); 18 Oct 2010 22:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44656 invoked by uid 500); 18 Oct 2010 22:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44648 invoked by uid 99); 18 Oct 2010 22:24:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 22:24:41 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 22:24:34 +0000
Received: by qwg8 with SMTP id 8so1100583qwg.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 15:24:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=P+GKOnHr51UpPL4yBtqZw9Eh0qymz4LL3UwQ4n03Sso=;
        b=wZ8gTCOtbfL1IxFQLl7gj7DyeAEG5XPGLlQpHSi4a2p3vyK/w/bK9NKBOV2/UB+J/8
         EMuqBp3vhx3bJbzgWKmZcK1yPXbjnIntYojMFidC85vy39ZpwGe0nB+2Geqnqoo7vrVN
         n3olM9xK4lXTYu+G5ieUUlxdxENGSGAKvr17Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AS9R712bPInODaDrRu1Knkcxgyl4ro4goO98rnHwENm4JWjCyvlp7w530wf5HXdJzS
         xE/gYHZ9qms4e7sxS0HlMtTpQpVVInWV5teLIidz+wvm/CIN/u6gPDxnugsKkbDfn4iX
         rJtGPc0vvo+h+Y4hY41VZYHouNInRvdbo/uFc=
MIME-Version: 1.0
Received: by 10.229.98.9 with SMTP id o9mr4360689qcn.247.1287440654208; Mon,
 18 Oct 2010 15:24:14 -0700 (PDT)
Received: by 10.229.251.85 with HTTP; Mon, 18 Oct 2010 15:24:14 -0700 (PDT)
In-Reply-To: <AANLkTim6RWEj04tS8YvcfKRXFPsb+j6hn4iJpNya=Ood@mail.gmail.com>
References: <AANLkTim6RWEj04tS8YvcfKRXFPsb+j6hn4iJpNya=Ood@mail.gmail.com>
Date: Mon, 18 Oct 2010 18:24:14 -0400
Message-ID: <AANLkTik3BX=0joWUwKspDfnmDPgrqV9g-agHHjoFKZYx@mail.gmail.com>
Subject: Re: Parse multiple fields using Queryparser
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364270ecdd0f420492eba240

--0016364270ecdd0f420492eba240
Content-Type: text/plain; charset=ISO-8859-1

You can create your own BooleanQuery and just add clauses as you need to
as well...

Best
Erick

On Mon, Oct 18, 2010 at 1:55 PM, Nilesh Vijaywargiay <nilesh.vijay@gmail.com
> wrote:

> I have many fields in my document and want to parse my query including each
> of them
>
> QueryParser parser = new QueryParser(Version.LUCENE_29, "Field2",new
> StandardAnalyzer(Version.LUCENE_29));
>
> Should I create multiple parsers in this case or is there any other way
> round?
>

--0016364270ecdd0f420492eba240--

From java-user-return-47548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 18 23:47:25 2010
Return-Path: <java-user-return-47548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77171 invoked from network); 18 Oct 2010 23:47:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Oct 2010 23:47:25 -0000
Received: (qmail 22044 invoked by uid 500); 18 Oct 2010 23:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21980 invoked by uid 500); 18 Oct 2010 23:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21972 invoked by uid 99); 18 Oct 2010 23:47:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 23:47:23 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Oct 2010 23:47:15 +0000
Received: by vws10 with SMTP id 10so398294vws.35
        for <java-user@lucene.apache.org>; Mon, 18 Oct 2010 16:46:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.180.132 with SMTP id bu4mr1394502vcb.249.1287445614123;
 Mon, 18 Oct 2010 16:46:54 -0700 (PDT)
Received: by 10.220.97.138 with HTTP; Mon, 18 Oct 2010 16:46:54 -0700 (PDT)
Date: Mon, 18 Oct 2010 16:46:54 -0700
Message-ID: <AANLkTimBe_z-yG1XR3PPvKMuxKH5nJDV3kuD=3SHB-s1@mail.gmail.com>
Subject: combining MultiFieldQueryParserparser with FuzzyQuery
From: Andy Yang <andy@stitcher.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba4fc4e07f5ae10492ecca7d
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba4fc4e07f5ae10492ecca7d
Content-Type: text/plain; charset=ISO-8859-1

I would like to use MultiFieldQueryParser to serach multiple fields, then in
each field, I want to use fuzzy search. How can that be done? Any example
will be appreciated.

Thanks,
Andy

--90e6ba4fc4e07f5ae10492ecca7d--

From java-user-return-47549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 19 08:23:16 2010
Return-Path: <java-user-return-47549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45747 invoked from network); 19 Oct 2010 08:23:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Oct 2010 08:23:15 -0000
Received: (qmail 71808 invoked by uid 500); 19 Oct 2010 08:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71503 invoked by uid 500); 19 Oct 2010 08:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71490 invoked by uid 99); 19 Oct 2010 08:23:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Oct 2010 08:23:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Oct 2010 08:23:02 +0000
Received: by qwg8 with SMTP id 8so1465829qwg.35
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 01:22:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=TvKicqnYQvbUA4wxgCff/dx/5fRI27E+eM73HBXkxhk=;
        b=idCHrExNkmbpGnVy33f7ozWiSudDS6kJ4WMVbTYXKZsyZdiAeaJHES6LqcOHsu/MAM
         M1xt8QR1JIDuDcUSLkUedqgH2S9E3pKV5n9sSmtYEvT/kv4V6xxiiqs8WBdwaUFH3bjy
         QR3u3qsHkEZCZ3y/1yuor/boskaQS+yDn7A8Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=O/G79KOfUpAe/ARMZEt0OPmMyFtYZkVQdVPqAROlI2jcYN/JA5pa/5bwai1NQERGOW
         mkOR96KILICDxoQ/IWpKM4oOEgcdvunNLPsK8o+wKXJr6blTbRMHIOUr4bOs28jvXu98
         jUcyUEmJzSGFlq7cHS4FKVDhmqiZ8rH6cq3zs=
Received: by 10.229.246.139 with SMTP id ly11mr4852793qcb.229.1287476561779;
 Tue, 19 Oct 2010 01:22:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Tue, 19 Oct 2010 01:22:21 -0700 (PDT)
In-Reply-To: <AANLkTimBe_z-yG1XR3PPvKMuxKH5nJDV3kuD=3SHB-s1@mail.gmail.com>
References: <AANLkTimBe_z-yG1XR3PPvKMuxKH5nJDV3kuD=3SHB-s1@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 19 Oct 2010 09:22:21 +0100
Message-ID: <AANLkTiktjsLPQdrE=8ZS57kur4PPWML5cJNc8Urn0SiN@mail.gmail.com>
Subject: Re: combining MultiFieldQueryParserparser with FuzzyQuery
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think you can do that directly with MultiFieldQueryParser, but
as Erick said in a similar thread a short while ago "You can create
your own BooleanQuery and just add clauses as you need to".

FuzzyQuery fq1 = new FuzzyQuery(whatever ...);
FuzzyQuery fq2 = new FuzzyQuery(whatever-else ...);
...
BooleanQuery bq = new BooleanQuery();
bq.add(fq1, ...);
bq.add(fq2, ...);
...


--
Ian.


On Tue, Oct 19, 2010 at 12:46 AM, Andy Yang <andy@stitcher.com> wrote:
> I would like to use MultiFieldQueryParser to serach multiple fields, then in
> each field, I want to use fuzzy search. How can that be done? Any example
> will be appreciated.
>
> Thanks,
> Andy
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 19 17:35:39 2010
Return-Path: <java-user-return-47550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43541 invoked from network); 19 Oct 2010 17:35:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Oct 2010 17:35:38 -0000
Received: (qmail 67599 invoked by uid 500); 19 Oct 2010 17:35:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67543 invoked by uid 500); 19 Oct 2010 17:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67531 invoked by uid 99); 19 Oct 2010 17:35:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Oct 2010 17:35:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Oct 2010 17:35:27 +0000
Received: by pwi1 with SMTP id 1so793969pwi.35
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 10:35:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=pwxEKUPkSG0dGD3OOazv58NXpSl6wOc7jfon/0ip5GE=;
        b=Z69BWMjaUFFwAYq2yPgs6FDjUvAi3NTbX4YLlZl5dH262M9SxouspFiy2gmr0pFfT9
         Z/+j86cLgYsXIlJy3s6OO7LNbxjLJsjesu02w3aNrN6hzi6L/+jD2z1mWtsE5VUAfwex
         Lj8E1JEohnLk1CgxOQ0pXiXp9vJ+//UysBor4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=vdQnV9KTYYmT+Pit1QsIZAu5J8hft926SPLucpbWEQ43ndo2ZDvYfCpVPvE0m3HD/p
         ViS8+35LBOh3EKC/R9yTitU+RpZEm1S9intkAJZO/Sd3a0PdY+qJJJmH4bWlMJw2VCRV
         RJEAacWgn6yMS0EEcbdhJBqf7rVh2NlYuU6uE=
Received: by 10.142.231.13 with SMTP id d13mr4952905wfh.242.1287509705744;
 Tue, 19 Oct 2010 10:35:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Tue, 19 Oct 2010 10:34:45 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Tue, 19 Oct 2010 10:34:45 -0700
Message-ID: <AANLkTi=8GPtKsGObaWbXDGzw-vjntkVDZT1vZvgfTh3k@mail.gmail.com>
Subject: using ParallelReader to update a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd296a2a7e2480492fbb6f5
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd296a2a7e2480492fbb6f5
Content-Type: text/plain; charset=ISO-8859-1

I am trying to find a work around for updating fields and in turn the
documents in the original index.

I am using parallel reader and providing it two index, the second index
being the first to be seen by parallel reader.  The second index has same
number of documents as first index[in this case, 2]. But the documents in
second index are empty, except the document which I want to update, here
doc2.

I am getting a miss if I search for, "Value4 in Document2" because I updated
that field in index 2. This is exactly what I want.
I am getting a hit for "*(**Modified Value of Field4**) AND NOT (V**alue4 in
Document2**)". *This is again what I want.
*
*
So I see that query with multiple fields are producing the result. Does this
provide a illusion of updating a document?
*When would this approach break?*
*
*
INDEX 1
            Document doc1 =new Document();
            addField(doc1, "Field1","Value1 in Document1");
            addField(doc1, "Field2","Value2 in Document1");

            Document doc2 = new Document();
            addField(doc2, "Field4","Value4 in Document2");
            addField(doc2,"Field3","Value3 in Document2");

INDEX 2
            Document doc1 =new Document();
            Document doc2 = new Document();
            addField(doc2,"Field4", "Modified Value of Field4");

--000e0cd296a2a7e2480492fbb6f5--

From java-user-return-47551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 04:11:38 2010
Return-Path: <java-user-return-47551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74919 invoked from network); 20 Oct 2010 04:11:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 04:11:37 -0000
Received: (qmail 32327 invoked by uid 500); 20 Oct 2010 04:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32042 invoked by uid 500); 20 Oct 2010 04:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32034 invoked by uid 99); 20 Oct 2010 04:11:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 04:11:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 04:11:23 +0000
Received: by wwb18 with SMTP id 18so2423906wwb.5
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 21:11:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=DU+uqFyGQ55tF77H91BfWEEwGKSCYqAb5mzsYuVAkpA=;
        b=u66tpQRGkZRHLRux4QykCGkYZFprh2C9xwMaiBMwKRML2K7n9D8FqzDFMNVCn4KB27
         9jTK47eLaEKJvGYZZ/SdvWxMA4fSi96hWdE9L5H4jJY/mshpE4r09ZRf8iGcmKzf9Swk
         uhZYT3W0RISWfqBJBE5BlwAkLV9XjJ9qIKAMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dQDI/OE74rzDNX98fsopx8drpBs8sB3UazQb3PV01zUSLUjz6HFpCE5nCcCl+Jj13f
         JTrCFMkFHFzjOorqOGzin8aYCUo/xYERMcIOtdb7fI3vZJsZgWmav/pGYgpJzgWDyjtZ
         XbieaUP6v2PGBYqMnQmrgednOIx3B6+/VNEP4=
MIME-Version: 1.0
Received: by 10.216.11.201 with SMTP id 51mr7584300wex.72.1287547863106; Tue,
 19 Oct 2010 21:11:03 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Tue, 19 Oct 2010 21:11:03 -0700 (PDT)
Date: Wed, 20 Oct 2010 00:11:03 -0400
Message-ID: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
Subject: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c7bd1030afd0493049982
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c7bd1030afd0493049982
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I have to index about 4.5Million txt files. When I run the my indexing
application through Eclipse, I get this error : "Exception in thread "main"
java.lang.OutOfMemoryError: Java heap space"

eclipse -vmargs -Xmx2000m -Xss8192k

eclipse -vmargs -Xms40M -Xmx2G

 I tried running Eclipse with above memory parameters, but still had the
same error. The architecture of my computer is AMD x2 64bit 2GHz processor,
Ubuntu 10.04 LTS 64bit. java-6-openjdk.

Anybody has a suggestion?

thank you.
Sahin.

--0016364c7bd1030afd0493049982--

From java-user-return-47552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 04:59:43 2010
Return-Path: <java-user-return-47552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81743 invoked from network); 20 Oct 2010 04:59:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 04:59:43 -0000
Received: (qmail 74030 invoked by uid 500); 20 Oct 2010 04:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73820 invoked by uid 500); 20 Oct 2010 04:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73812 invoked by uid 99); 20 Oct 2010 04:59:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 04:59:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of johnbin.wang@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 04:59:32 +0000
Received: by iwn3 with SMTP id 3so3679970iwn.35
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 21:59:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9pO3ZwW8Lie3Ln/e2MDvqRTmPnyzCSmAZX/g6xZJjOs=;
        b=YEdUR3azJrKTmUy+qex9wAHxVRfu5niBE+2y7z2yWX4GWaN+d80AR4c43E5baXr/pT
         +llVpSCs6eoumBhgnkvEWSAi4Woq2Je+iusb9gac8H+eUD1xWWhWtcfhb6a+oBYfKboC
         7x+zLS0usgJ7GNfbgWwKhfNp7e50NQSXcYFnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kG1VgAj3pv/6is7Ju1QQCDtgK3xC2DjmsN//qZs+gLMZWQPCMGYnqxNPQys/RbRVQI
         PqNl9QBNrrkBwPetD7HenA/H6nf+ss9vxULaztllKPK+XoRSDfHz+2vMr+eJKpaF6PVf
         IJkN8jFWRPed0UiGfRAaXH3ro/q1S+xEMXXac=
MIME-Version: 1.0
Received: by 10.231.146.129 with SMTP id h1mr5674906ibv.181.1287550751647;
 Tue, 19 Oct 2010 21:59:11 -0700 (PDT)
Received: by 10.231.37.71 with HTTP; Tue, 19 Oct 2010 21:59:11 -0700 (PDT)
In-Reply-To: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
Date: Wed, 20 Oct 2010 12:59:11 +0800
Message-ID: <AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Johnbin Wang <johnbin.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64353a02ea8ab04930545b0

--0016e64353a02ea8ab04930545b0
Content-Type: text/plain; charset=ISO-8859-1

I think you can write index file once every 10,000 files or less have been
read.

On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Hi all,
>
> I have to index about 4.5Million txt files. When I run the my indexing
> application through Eclipse, I get this error : "Exception in thread "main"
> java.lang.OutOfMemoryError: Java heap space"
>
> eclipse -vmargs -Xmx2000m -Xss8192k
>
> eclipse -vmargs -Xms40M -Xmx2G
>
>  I tried running Eclipse with above memory parameters, but still had the
> same error. The architecture of my computer is AMD x2 64bit 2GHz processor,
> Ubuntu 10.04 LTS 64bit. java-6-openjdk.
>
> Anybody has a suggestion?
>
> thank you.
> Sahin.
>



-- 
cheers,
Johnbin Wang

--0016e64353a02ea8ab04930545b0--

From java-user-return-47553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 05:05:37 2010
Return-Path: <java-user-return-47553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87346 invoked from network); 20 Oct 2010 05:05:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 05:05:37 -0000
Received: (qmail 78045 invoked by uid 500); 20 Oct 2010 05:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77773 invoked by uid 500); 20 Oct 2010 05:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77760 invoked by uid 99); 20 Oct 2010 05:05:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 05:05:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 05:05:24 +0000
Received: by wyg36 with SMTP id 36so2324873wyg.35
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 22:05:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=62LZeFHfsFu7HPINNbYf045rn8Q+jEYU0T2JTQEMOMQ=;
        b=c0eWtKngmTZAzx5cpnWy0GZeGpHKttOJUdQPUd2oKMj4F5yGmMT03WvV07+SLr3hgB
         VWGIE/126eoExrRCZJm3DMzsaMkDxnHWSXJZFhpKHJ20KPitF8WdLXFPi5BsQ1+TwpuF
         JLjzG+sGF0hdE4d46GDGmzoqKHr2ts8gA+0eo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Qz2YsdMh3hyCZkPkDD3EarbsEJ8s6D4+ep85RHS4jKS52oa6oqpz5JmsIvrfQ2VGMy
         Qy7+b1x3wp0AczGcMHZBqtkZtoGE17kAkJk3fXXoPAdOgGLkye14/5jgix5kPXbYTT4Q
         +wr76AYr7NYSmtdZ+cYJ1uWDvqcRmPl68HBl8=
MIME-Version: 1.0
Received: by 10.216.232.229 with SMTP id n79mr505430weq.52.1287551104167; Tue,
 19 Oct 2010 22:05:04 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Tue, 19 Oct 2010 22:05:04 -0700 (PDT)
In-Reply-To: <AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
Date: Wed, 20 Oct 2010 01:05:04 -0400
Message-ID: <AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e3b831b0490493055a31
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750e3b831b0490493055a31
Content-Type: text/plain; charset=ISO-8859-1

Thank you Johnbin,
do you know which parameter I have to play with?

On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <johnbin.wang@gmail.com>wrote:

> I think you can write index file once every 10,000 files or less have been
> read.
>
> On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > Hi all,
> >
> > I have to index about 4.5Million txt files. When I run the my indexing
> > application through Eclipse, I get this error : "Exception in thread
> "main"
> > java.lang.OutOfMemoryError: Java heap space"
> >
> > eclipse -vmargs -Xmx2000m -Xss8192k
> >
> > eclipse -vmargs -Xms40M -Xmx2G
> >
> >  I tried running Eclipse with above memory parameters, but still had the
> > same error. The architecture of my computer is AMD x2 64bit 2GHz
> processor,
> > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> >
> > Anybody has a suggestion?
> >
> > thank you.
> > Sahin.
> >
>
>
>
> --
> cheers,
> Johnbin Wang
>

--00151750e3b831b0490493055a31--

From java-user-return-47554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 05:19:25 2010
Return-Path: <java-user-return-47554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89565 invoked from network); 20 Oct 2010 05:19:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 05:19:25 -0000
Received: (qmail 87323 invoked by uid 500); 20 Oct 2010 05:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87206 invoked by uid 500); 20 Oct 2010 05:19:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87198 invoked by uid 99); 20 Oct 2010 05:19:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 05:19:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johnbin.wang@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 05:19:12 +0000
Received: by gwb15 with SMTP id 15so1546688gwb.35
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 22:18:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=MuGzIM8PWlzl+u7g/3Oi5trIDaH006fJnRgG/+cCNJ4=;
        b=VvJC0MGtNPIDaCoXlmX0WIUpqshkN7/etYh/5cp6WSr0pmoRiHFBSZ4Mo2v9W4wZ4n
         +d3X2mIp7Pm9ujcwLPlxpEFuAO0Ac5nQcP2VhfsuUevvP5/QBs83e5oqQxzhjhT5iNKa
         76cfGn3i8SrZsmowDkCcZXlnraq6XJdz8Gqf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kkkG56E1vNVMqtclesjTO894JaHONzeViPUxGLTmyhd5XyV4zcYqBUqBMpThXxMn5n
         HDg/by0uCiqGTwWFWPDSac6Dc1df2yBfv7lBAKC5qIv0fo9Hi4Q2nyO8JKC/Su7ghhhs
         q174H1c0yZDwLNngiuQqplmCYz/M/+YpyS/4A=
MIME-Version: 1.0
Received: by 10.42.211.204 with SMTP id gp12mr2023836icb.385.1287551931592;
 Tue, 19 Oct 2010 22:18:51 -0700 (PDT)
Received: by 10.231.37.71 with HTTP; Tue, 19 Oct 2010 22:18:51 -0700 (PDT)
In-Reply-To: <AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
Date: Wed, 20 Oct 2010 13:18:51 +0800
Message-ID: <AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Johnbin Wang <johnbin.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf301d3a2e83307f0493058b9f
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf301d3a2e83307f0493058b9f
Content-Type: text/plain; charset=ISO-8859-1

You can start a fixedThreadPool to index all these files in the multhread
way. Every thread execute an index task which could index a part of all the
files. In the index task, when indexing 10000 files, you need execute the
indexWrite.commit() method to flush all the index add operation to disk
file.

If you need index all these files into only one index file, you need to hold
only one indexWriter instance among all the index thread.

Hope it's helpful.



On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Thank you Johnbin,
> do you know which parameter I have to play with?
>
> On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <johnbin.wang@gmail.com
> >wrote:
>
> > I think you can write index file once every 10,000 files or less have
> been
> > read.
> >
> > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > sahin.buyrukbilen@gmail.com> wrote:
> >
> > > Hi all,
> > >
> > > I have to index about 4.5Million txt files. When I run the my indexing
> > > application through Eclipse, I get this error : "Exception in thread
> > "main"
> > > java.lang.OutOfMemoryError: Java heap space"
> > >
> > > eclipse -vmargs -Xmx2000m -Xss8192k
> > >
> > > eclipse -vmargs -Xms40M -Xmx2G
> > >
> > >  I tried running Eclipse with above memory parameters, but still had
> the
> > > same error. The architecture of my computer is AMD x2 64bit 2GHz
> > processor,
> > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > >
> > > Anybody has a suggestion?
> > >
> > > thank you.
> > > Sahin.
> > >
> >
> >
> >
> > --
> > cheers,
> > Johnbin Wang
> >
>



-- 
cheers,
Johnbin Wang

--20cf301d3a2e83307f0493058b9f--

From java-user-return-47555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 06:09:13 2010
Return-Path: <java-user-return-47555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4743 invoked from network); 20 Oct 2010 06:09:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 06:09:13 -0000
Received: (qmail 30511 invoked by uid 500); 20 Oct 2010 06:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30404 invoked by uid 500); 20 Oct 2010 06:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30391 invoked by uid 99); 20 Oct 2010 06:09:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 06:09:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 06:09:01 +0000
Received: by mail-qy0-f176.google.com with SMTP id 29so2488037qyk.14
        for <java-user@lucene.apache.org>; Tue, 19 Oct 2010 23:08:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=X5HbjNKJgOe06aqApcXoBvehIECC7VndOGaOAd66UEU=;
        b=d5LvnrK9Fp805FdfwkdK4XaZSOjGqu694hVJKSVZhSF5hrkE5pz8XLJJTnuWOknNao
         hhEyJEzmjy7Bp9mcYMesxJrgKM66+UAKvajW6nHjVeYq7sULjZhHzRwa6KYdTpARK08c
         jAQlU/M4/ZG+W2/tbtUGkHjgl8F5ccq0PmbkA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=mJAH7sN+qbpN82SrDat69HVejhoQG+uwx0m6nBL68P57YYG6oun1/tx772U9aLugSy
         Vbu+sMmx7T+Ju0GTVspe5SW/csyjbL4+u1wfyUxsfqqSH58YQY0Qc22P8nPOnec2b0jG
         rM+d5oIhTXgCxR1mUUx5Zpz6bfXpLKQSG5Hy4=
MIME-Version: 1.0
Received: by 10.224.96.95 with SMTP id g31mr4085219qan.172.1287554919450; Tue,
 19 Oct 2010 23:08:39 -0700 (PDT)
Received: by 10.229.218.77 with HTTP; Tue, 19 Oct 2010 23:08:39 -0700 (PDT)
Date: Wed, 20 Oct 2010 11:38:39 +0530
Message-ID: <AANLkTik5585C8Ltt8BLa-5L4zkX_sDwFXLciHXZEbcTD@mail.gmail.com>
Subject: Lucene vs Solr
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f97252a9a4ab80493063d12
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f97252a9a4ab80493063d12
Content-Type: text/plain; charset=ISO-8859-1

Hello all,

I have posted an article Lucene vs Solr
http://www.findbestopensource.com/article-detail/lucene-vs-solr

Please feel free to add your comments.

Regards
Aditya
www.findbestopensource.com

--00c09f97252a9a4ab80493063d12--

From java-user-return-47556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 06:48:33 2010
Return-Path: <java-user-return-47556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18453 invoked from network); 20 Oct 2010 06:48:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 06:48:33 -0000
Received: (qmail 64874 invoked by uid 500); 20 Oct 2010 06:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64538 invoked by uid 500); 20 Oct 2010 06:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 86362 invoked by uid 99); 19 Oct 2010 15:30:16 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
MIME-Version: 1.0
Sender: jasper@de-barbanson.com
Date: Tue, 19 Oct 2010 17:29:44 +0200
X-Google-Sender-Auth: kNFDAVk-V_1hqgltzSQM7aYj7C0
Message-ID: <AANLkTinm1c=LsHs9uWpnaShNp_VSyuoKvy3yAz1uWxuu@mail.gmail.com>
Subject: Best implementation for address searching
From: Jasper de Barbanson <lucene-mailinglist@de-barbanson.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I'm currently working on building a Geocoder. The purpose of a
Geocoder is to find the coordinates belonging to any given input
address. I have a rather simple version based on Lucene working,
however I have a feeling it can be a lot better. Also new
functionality will be added, which is difficult to implement in the
current version. I was hoping to get some input on what would be the
best way to implement searching addresses with Lucene. Below the
relevant requirements and some preconditions:

- the address is not structured, i.e. it's just a simple string which
contains the address
- a (dutch) address can, but does not have to, consist of the
following parts: province, municipality, city, street name, house
number, house number addition, zip code (4/6/7 chars)
- the order of the parts can be random, so it can be "street name,
city, zip code" or "zip code, street name, city"
- the words in a part are always in the right order, a street name "A
B C" will always be supplied as "A B C" and never "A C B"
- there is no guaranty that the values of each type are unique: e.g.
"Utrecht" is a province, municipality and a city
- none of the parts except zip code (6/7 chars) is recognizable as a
specific part
- it should be possible to find matches if the address contains one or
two typos (fuzzy search)
- the combination zip code (6/7 chars) and house number (+ addition)
uniquely identifies an address
- the combination city, street name, house number (+addition) uniquely
identifies an address
- the results should be a specific as possible, eg. if an specific
address is found, but also the city, just return the coordinates of
the specific address
- there can be multiple results if the given address matches to
multiple parts: search on "Utrecht" will give you the coordinaties of
the city, municipality and province
- the data file consists of all addresses in the Netherlands where
each line represents an address with all the address parts specified
(except house number addition, because most addresses don't have one).
This data can be arranged in any way necessary.
- searching on this data file with address "Amersfoort" (a city) will
result in all addresses in the city Amersfoort, however the Geocoder
should only return the coordinates of the city Amersfoort
- if the given address contains unknown values (eg. a house number
which doesn't exist in the street/zip code), the address should be
processed without those values

Current implementation consist of multiple database tables each having
a Lucene index. There is a "full address" table which contains all
addresses, a "street name" table with all streets, a "city" table with
all cities and so on. Each table is one level less detailed. I first
check if there is a zip code and house number (direct match), and if
not, I create queries to check if I can find an street, city,
municipality or province. Then some logic is applied to determine
which search results should be returned, eg. if a street and a city
are found, only return the street. This setup does not meet all above
requirements, the same data is stored in multiple tables, and around
5-6 Lucene queries are executed for each search, which seems
inefficient.

I think the best approach would be to parse the given address into the
different parts, however I am not sure how to do this. I can verify
each word of the address and a range of combinations of those words
against Lucene indexes (for each address part-type), however the
number of queries will only increase by this approach. Because finding
a match for a word (of combination of words) does not mean I can stop
matching for those word(s), because the word(s) are not unique for
each address part-type.

I understand that this is not directly a technical question, however I
think this mailinglist is the best shot I have for discussing this
problem :-)

Undoubtedly there are questions, but feel free to ask for clarification!

Kind regards,
Jasper

P.S. I am aware that Google and others have created Geocoders with
this functionality and more, but those companies either have
restrictions which are a problem, or charge per request, which also
isn't an option.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 07:02:55 2010
Return-Path: <java-user-return-47557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20947 invoked from network); 20 Oct 2010 07:02:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 07:02:55 -0000
Received: (qmail 78619 invoked by uid 500); 20 Oct 2010 07:02:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78521 invoked by uid 500); 20 Oct 2010 07:02:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78513 invoked by uid 99); 20 Oct 2010 07:02:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 07:02:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_FRT_FOLLOW1,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 07:02:45 +0000
Received: by wyg36 with SMTP id 36so2402986wyg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 00:02:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=d/zJ7WsWD7GTHtUyJC/Eilo625VgUyR4cvvSlQm/c/4=;
        b=tKUIO3uhz1y6EL079hmMxqo9wrbpuZO9EKuTnY5Iwx0a0LWA8bndr4wfVl/SKBzDIa
         wVSPtt4zD/GP9I2adyhSyYU53Cd08wSMayr5/FEALmEGeT+Y0/OjiMglwBezuJasC4Mu
         SU1kzaDeYYCL23wo2q2Gzp/eqZIaWD9pzvie0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BWY2ehZU1TGLmXStJdDq8vvI2AnnAyTZXhtxiTCyP7HRXWfKFpxKmhr99aBgwLtSTY
         E8HoxghuNX3k3IpXwQTe5dET4sqbj0tbfTroJ10BneCZJUCgJPybbkhd1RoIZjjRGySn
         buXOHe2rys3v79GSXvIZ4tuMU7dQl+CyhJ1dw=
Received: by 10.227.208.73 with SMTP id gb9mr7299873wbb.13.1287558143402; Wed,
 20 Oct 2010 00:02:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.69.8 with HTTP; Wed, 20 Oct 2010 00:02:03 -0700 (PDT)
In-Reply-To: <AANLkTinm1c=LsHs9uWpnaShNp_VSyuoKvy3yAz1uWxuu@mail.gmail.com>
References: <AANLkTinm1c=LsHs9uWpnaShNp_VSyuoKvy3yAz1uWxuu@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 20 Oct 2010 12:32:03 +0530
Message-ID: <AANLkTimH_-PBiaY1Om-8UNT8Q2sO4kJkLYZopFEqfqi9@mail.gmail.com>
Subject: Re: Best implementation for address searching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151748e7c2c3e35b049306fd05

--00151748e7c2c3e35b049306fd05
Content-Type: text/plain; charset=ISO-8859-1

Hi Jason,
Just a suggestion to start with, was almost an information overload for me
but here is what I could think of straight off. Let me know in case you try
it or have already tried it.

A few point I'd want to know.
1. I understand that the addresses would/could be
unstructured/ill-strcutured bu
t generally wouldn't parts be seperated by a comma? Also, wouldn't parts be
in a
n decreasing order of detail i.e. A,B,C would imply that A is a location in
B, w
hich happens to be in 'C'?
If what I just said is correct, how about indexing data with decreasing
boost?
i.e. A,B,C gets indexed in a single field with A having the max weight/boost
fol
lowed by B followed by C
e.g.
Record 1: 123, A Street, B City
Record 2: B City

For a search for B City, you'd get record 2 ranked higher up as compared to
1. F
or  search '123, A Street' you'd get record 1.
Also while searching you may tokenize on a comma or whatever set of chars
you fi
nd appropriate.



--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Oct 19, 2010 at 8:59 PM, Jasper de Barbanson <
lucene-mailinglist@de-barbanson.com> wrote:

> I'm currently working on building a Geocoder. The purpose of a
> Geocoder is to find the coordinates belonging to any given input
> address. I have a rather simple version based on Lucene working,
> however I have a feeling it can be a lot better. Also new
> functionality will be added, which is difficult to implement in the
> current version. I was hoping to get some input on what would be the
> best way to implement searching addresses with Lucene. Below the
> relevant requirements and some preconditions:
>
> - the address is not structured, i.e. it's just a simple string which
> contains the address
> - a (dutch) address can, but does not have to, consist of the
> following parts: province, municipality, city, street name, house
> number, house number addition, zip code (4/6/7 chars)
> - the order of the parts can be random, so it can be "street name,
> city, zip code" or "zip code, street name, city"
> - the words in a part are always in the right order, a street name "A
> B C" will always be supplied as "A B C" and never "A C B"
> - there is no guaranty that the values of each type are unique: e.g.
> "Utrecht" is a province, municipality and a city
> - none of the parts except zip code (6/7 chars) is recognizable as a
> specific part
> - it should be possible to find matches if the address contains one or
> two typos (fuzzy search)
> - the combination zip code (6/7 chars) and house number (+ addition)
> uniquely identifies an address
> - the combination city, street name, house number (+addition) uniquely
> identifies an address
> - the results should be a specific as possible, eg. if an specific
> address is found, but also the city, just return the coordinates of
> the specific address
> - there can be multiple results if the given address matches to
> multiple parts: search on "Utrecht" will give you the coordinaties of
> the city, municipality and province
> - the data file consists of all addresses in the Netherlands where
> each line represents an address with all the address parts specified
> (except house number addition, because most addresses don't have one).
> This data can be arranged in any way necessary.
> - searching on this data file with address "Amersfoort" (a city) will
> result in all addresses in the city Amersfoort, however the Geocoder
> should only return the coordinates of the city Amersfoort
> - if the given address contains unknown values (eg. a house number
> which doesn't exist in the street/zip code), the address should be
> processed without those values
>
> Current implementation consist of multiple database tables each having
> a Lucene index. There is a "full address" table which contains all
> addresses, a "street name" table with all streets, a "city" table with
> all cities and so on. Each table is one level less detailed. I first
> check if there is a zip code and house number (direct match), and if
> not, I create queries to check if I can find an street, city,
> municipality or province. Then some logic is applied to determine
> which search results should be returned, eg. if a street and a city
> are found, only return the street. This setup does not meet all above
> requirements, the same data is stored in multiple tables, and around
> 5-6 Lucene queries are executed for each search, which seems
> inefficient.
>
> I think the best approach would be to parse the given address into the
> different parts, however I am not sure how to do this. I can verify
> each word of the address and a range of combinations of those words
> against Lucene indexes (for each address part-type), however the
> number of queries will only increase by this approach. Because finding
> a match for a word (of combination of words) does not mean I can stop
> matching for those word(s), because the word(s) are not unique for
> each address part-type.
>
> I understand that this is not directly a technical question, however I
> think this mailinglist is the best shot I have for discussing this
> problem :-)
>
> Undoubtedly there are questions, but feel free to ask for clarification!
>
> Kind regards,
> Jasper
>
> P.S. I am aware that Google and others have created Geocoders with
> this functionality and more, but those companies either have
> restrictions which are a problem, or charge per request, which also
> isn't an option.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151748e7c2c3e35b049306fd05--

From java-user-return-47558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 09:05:13 2010
Return-Path: <java-user-return-47558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57924 invoked from network); 20 Oct 2010 09:05:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 09:05:12 -0000
Received: (qmail 96633 invoked by uid 500); 20 Oct 2010 09:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96499 invoked by uid 500); 20 Oct 2010 09:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 75192 invoked by uid 99); 20 Oct 2010 08:36:29 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
MIME-Version: 1.0
Sender: jasper@de-barbanson.com
In-Reply-To: <AANLkTimH_-PBiaY1Om-8UNT8Q2sO4kJkLYZopFEqfqi9@mail.gmail.com>
References: <AANLkTinm1c=LsHs9uWpnaShNp_VSyuoKvy3yAz1uWxuu@mail.gmail.com>
	<AANLkTimH_-PBiaY1Om-8UNT8Q2sO4kJkLYZopFEqfqi9@mail.gmail.com>
Date: Wed, 20 Oct 2010 10:36:01 +0200
X-Google-Sender-Auth: PDAigOuWX-cAwNTZ4z-AxKroQq8
Message-ID: <AANLkTinEvGfO-N5=_obPSM0T+kKYFKO-AGwk3e9GK-cR@mail.gmail.com>
Subject: Re: Best implementation for address searching
From: Jasper de Barbanson <lucene-mailinglist@de-barbanson.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Anshum,

1. The unstructured addresses are sometimes separated by comma, but
most of the time by a single space.
2. The parts can be in an increasing or decreasing order, but not
always. Most common combinations are "A street, B housenumber, C
city", "D zipcode, E housenumber", "C city", "A street, C city", "C
city, A street". In the Netherlands it's common to put the housenumber
after the name of the street, but this is not to be considered
relevant for building the Geocoder. All parts can be in random order;
the only assumption I am allowed to make is that all words within a
specific part are in the correct order. E.g. multi-worded street name:
"A B C street", will always be "A B C street" and never "B street C
A".

So with those clarifications I don't think indexing with decreasing
boost is the right solution, but off course I could be wrong, and in
that case I'll hope you will correct me :)

--
Jasper

On Wed, Oct 20, 2010 at 9:02 AM, Anshum <anshumg@gmail.com> wrote:
> Hi Jason,
> Just a suggestion to start with, was almost an information overload for m=
e
> but here is what I could think of straight off. Let me know in case you t=
ry
> it or have already tried it.
>
> A few point I'd want to know.
> 1. I understand that the addresses would/could be
> unstructured/ill-strcutured bu
> t generally wouldn't parts be seperated by a comma? Also, wouldn't parts =
be
> in a
> n decreasing order of detail i.e. A,B,C would imply that A is a location =
in
> B, w
> hich happens to be in 'C'?
> If what I just said is correct, how about indexing data with decreasing
> boost?
> i.e. A,B,C gets indexed in a single field with A having the max weight/bo=
ost
> fol
> lowed by B followed by C
> e.g.
> Record 1: 123, A Street, B City
> Record 2: B City
>
> For a search for B City, you'd get record 2 ranked higher up as compared =
to
> 1. F
> or =A0search '123, A Street' you'd get record 1.
> Also while searching you may tokenize on a comma or whatever set of chars
> you fi
> nd appropriate.
>
>
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Oct 19, 2010 at 8:59 PM, Jasper de Barbanson <
> lucene-mailinglist@de-barbanson.com> wrote:
>
>> I'm currently working on building a Geocoder. The purpose of a
>> Geocoder is to find the coordinates belonging to any given input
>> address. I have a rather simple version based on Lucene working,
>> however I have a feeling it can be a lot better. Also new
>> functionality will be added, which is difficult to implement in the
>> current version. I was hoping to get some input on what would be the
>> best way to implement searching addresses with Lucene. Below the
>> relevant requirements and some preconditions:
>>
>> - the address is not structured, i.e. it's just a simple string which
>> contains the address
>> - a (dutch) address can, but does not have to, consist of the
>> following parts: province, municipality, city, street name, house
>> number, house number addition, zip code (4/6/7 chars)
>> - the order of the parts can be random, so it can be "street name,
>> city, zip code" or "zip code, street name, city"
>> - the words in a part are always in the right order, a street name "A
>> B C" will always be supplied as "A B C" and never "A C B"
>> - there is no guaranty that the values of each type are unique: e.g.
>> "Utrecht" is a province, municipality and a city
>> - none of the parts except zip code (6/7 chars) is recognizable as a
>> specific part
>> - it should be possible to find matches if the address contains one or
>> two typos (fuzzy search)
>> - the combination zip code (6/7 chars) and house number (+ addition)
>> uniquely identifies an address
>> - the combination city, street name, house number (+addition) uniquely
>> identifies an address
>> - the results should be a specific as possible, eg. if an specific
>> address is found, but also the city, just return the coordinates of
>> the specific address
>> - there can be multiple results if the given address matches to
>> multiple parts: search on "Utrecht" will give you the coordinaties of
>> the city, municipality and province
>> - the data file consists of all addresses in the Netherlands where
>> each line represents an address with all the address parts specified
>> (except house number addition, because most addresses don't have one).
>> This data can be arranged in any way necessary.
>> - searching on this data file with address "Amersfoort" (a city) will
>> result in all addresses in the city Amersfoort, however the Geocoder
>> should only return the coordinates of the city Amersfoort
>> - if the given address contains unknown values (eg. a house number
>> which doesn't exist in the street/zip code), the address should be
>> processed without those values
>>
>> Current implementation consist of multiple database tables each having
>> a Lucene index. There is a "full address" table which contains all
>> addresses, a "street name" table with all streets, a "city" table with
>> all cities and so on. Each table is one level less detailed. I first
>> check if there is a zip code and house number (direct match), and if
>> not, I create queries to check if I can find an street, city,
>> municipality or province. Then some logic is applied to determine
>> which search results should be returned, eg. if a street and a city
>> are found, only return the street. This setup does not meet all above
>> requirements, the same data is stored in multiple tables, and around
>> 5-6 Lucene queries are executed for each search, which seems
>> inefficient.
>>
>> I think the best approach would be to parse the given address into the
>> different parts, however I am not sure how to do this. I can verify
>> each word of the address and a range of combinations of those words
>> against Lucene indexes (for each address part-type), however the
>> number of queries will only increase by this approach. Because finding
>> a match for a word (of combination of words) does not mean I can stop
>> matching for those word(s), because the word(s) are not unique for
>> each address part-type.
>>
>> I understand that this is not directly a technical question, however I
>> think this mailinglist is the best shot I have for discussing this
>> problem :-)
>>
>> Undoubtedly there are questions, but feel free to ask for clarification!
>>
>> Kind regards,
>> Jasper
>>
>> P.S. I am aware that Google and others have created Geocoders with
>> this functionality and more, but those companies either have
>> restrictions which are a problem, or charge per request, which also
>> isn't an option.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 14:42:55 2010
Return-Path: <java-user-return-47559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97322 invoked from network); 20 Oct 2010 14:42:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 14:42:54 -0000
Received: (qmail 98786 invoked by uid 500); 20 Oct 2010 14:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97399 invoked by uid 500); 20 Oct 2010 14:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97368 invoked by uid 99); 20 Oct 2010 14:42:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 14:42:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 14:42:39 +0000
Received: by bwz5 with SMTP id 5so3004669bwz.35
        for <multiple recipients>; Wed, 20 Oct 2010 07:42:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=eu2jmkTD7l3gVayXBQYaQ5Smcp0OwzfKAht2GGm36vQ=;
        b=LiD44secf1CzoyC0Bxayqb8mwT7KSuLL7Msvw9co0/0sSxTMBgRv3IsDzeIgmvqfaY
         1TrncbxfBTIOm30ECCTOm6O70pfziv6uuvgqK1AS+zm2t10CAxT2X3JxVbQ61SDfvM6r
         8AbRGhHWpS8zeS8lMXYrdsOdpO8N2nnU0oq/w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WBkkjga9G5fCoE4alHOJdz6ZOZdIpxnwkRRaWxNpVQhzG5WvDI08BRbK5jwsSDA2dT
         KZrZ/YciQzTXQBg8PNsLLW8AqfuaDbY2Y+g8Fe3eE10K9ylxw9vkhciRXqJrFfZGY6Zv
         eCNfA616lNbBAWFimh+UiaWEMunfYL+CTiUAE=
MIME-Version: 1.0
Received: by 10.204.118.202 with SMTP id w10mr6953387bkq.40.1287585737311;
 Wed, 20 Oct 2010 07:42:17 -0700 (PDT)
Received: by 10.204.115.74 with HTTP; Wed, 20 Oct 2010 07:42:17 -0700 (PDT)
Date: Wed, 20 Oct 2010 15:42:17 +0100
Message-ID: <AANLkTi=vG3L5gOwDYN2qf7G39DR_cai96W44HMMTgDr8@mail.gmail.com>
Subject: London open-source search social - 28th Nov - NEW VENUE
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net, users@elasticsearch.com
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

We've booked a London Search Social for Thursday the 28th Sept. Come
along if you fancy geeking out about search and related technology
over a beer.

Please note that we're not meeting in the same place as usual. Details
on the meetup page.
http://www.meetup.com/london-search-social/

Rich

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 14:44:29 2010
Return-Path: <java-user-return-47560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97632 invoked from network); 20 Oct 2010 14:44:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 14:44:29 -0000
Received: (qmail 2680 invoked by uid 500); 20 Oct 2010 14:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2403 invoked by uid 500); 20 Oct 2010 14:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2386 invoked by uid 99); 20 Oct 2010 14:44:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 14:44:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 14:44:16 +0000
Received: by bwz5 with SMTP id 5so3006203bwz.35
        for <multiple recipients>; Wed, 20 Oct 2010 07:43:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=taQw3Yu9qAOLrONI63CTAcU53mgaAc0SQgNRreI9Dt4=;
        b=NLWP8ZvrGbtrZruomsXF0TuoNuNg3Q811yDmsssYU0VpOVJgRbtpgS7AAH31OjFDqP
         MAY1xCORa+KpVZ/wqEu2RBupAGuF1mZZ9JSjWTioOfgEKRDd04kIe1d3G9VUPzh2z0cK
         TZdsbdMjVP8U5k9nhb+0G8wySySDHDfJIfwhk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vjcfbal9DXFepI9JaVX1UTiYxI5SbIL47QvOKKix5t4mwlRRsv2EiLpEZOAXvaT2tP
         m0mYI+WN812ujEEeID+mo9TIrqe02oMsMdY5cNIgKux2hIXQlU0dEuVnsRgBGoNQOBDq
         YruecQo0ucyE0Y8iARSEt+NLJ04tkqKfkQZ6g=
MIME-Version: 1.0
Received: by 10.204.112.13 with SMTP id u13mr1167099bkp.82.1287585834148; Wed,
 20 Oct 2010 07:43:54 -0700 (PDT)
Received: by 10.204.115.74 with HTTP; Wed, 20 Oct 2010 07:43:54 -0700 (PDT)
In-Reply-To: <AANLkTi=vG3L5gOwDYN2qf7G39DR_cai96W44HMMTgDr8@mail.gmail.com>
References: <AANLkTi=vG3L5gOwDYN2qf7G39DR_cai96W44HMMTgDr8@mail.gmail.com>
Date: Wed, 20 Oct 2010 15:43:54 +0100
Message-ID: <AANLkTinw03fWVChGSB2XX8bnco-92-3xrSTdacyvrQ30@mail.gmail.com>
Subject: Re: London open-source search social - 28th Nov - NEW VENUE
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net, users@elasticsearch.com
Content-Type: text/plain; charset=ISO-8859-1

Wow, apologies for utter stupidity. Both subject line and body should
have read 28th OCT.



On 20 October 2010 15:42, Richard Marr <richard.marr@gmail.com> wrote:
> Hi all,
>
> We've booked a London Search Social for Thursday the 28th Sept. Come
> along if you fancy geeking out about search and related technology
> over a beer.
>
> Please note that we're not meeting in the same place as usual. Details
> on the meetup page.
> http://www.meetup.com/london-search-social/
>
> Rich
>



-- 
Richard Marr

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 16:12:34 2010
Return-Path: <java-user-return-47561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39388 invoked from network); 20 Oct 2010 16:12:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 16:12:34 -0000
Received: (qmail 92947 invoked by uid 500); 20 Oct 2010 16:12:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92753 invoked by uid 500); 20 Oct 2010 16:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92745 invoked by uid 99); 20 Oct 2010 16:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 16:12:31 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.74] (HELO nm1-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Oct 2010 16:12:22 +0000
Received: from [98.138.90.53] by nm1.bullet.mail.ne1.yahoo.com with NNFMP; 20 Oct 2010 16:12:01 -0000
Received: from [98.138.89.249] by tm6.bullet.mail.ne1.yahoo.com with NNFMP; 20 Oct 2010 16:12:01 -0000
Received: from [127.0.0.1] by omp1041.mail.ne1.yahoo.com with NNFMP; 20 Oct 2010 16:12:01 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 18799.90648.bm@omp1041.mail.ne1.yahoo.com
Received: (qmail 34578 invoked by uid 60001); 20 Oct 2010 16:12:00 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1287591120; bh=vUKs4qMoVq2wL25tunHfGU4m+hz+r6tEnJMBfGFEPMM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=dyjcCkfuSA/uOMkh3bXpdks99d87V50GLV3zigXbRHTWEN/3H0LuiGsOb4o48JOZceNgSL9i3iUf2YpL0dwdW+nX2DNvb3wxaJaK+d8H+QrwpJi6VrAB7J37T9GpR73o788hZHlU8nff4kZGClsH3/Ivk1UY2ZeJv7GyFERX2Ik=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=vH5+YFa0T7m2Rtiek68zlmXdKLI1fPG0O5yQNEaT3+LeryKpb5gbWBlGQwND1YoL8y7k+GYyf3Kc1uzT5KFcIeofQG7hfEb36nUSBfExTIdDLkTFhNUhaSdW7wJVFSzyqgxQzMuw+XQBxLi2fCHKg/J1PJ9s75xfYgSu34aUEIQ=;
Message-ID: <800712.31053.qm@web120402.mail.ne1.yahoo.com>
X-YMail-OSG: LMc16F8VM1mlBRuTF9wsh.wHNXqykLxmpqDzto9pDUfvXhN
 cz6PxE5sl6oqddAlf3.vfPQ0t2L0cdZV7idlXtS0_oPxWzf96iFRuL2ufuYC
 w.ZJRom8SgyvRFDtWjIzBjwoJlUH69PKnrgWgIK2FFKSlURdpxJhI_IbZGWL
 Dnjfc_ctOqVLoehefJp_qexUzy8ymNpZ0OZq93RvkRnhGIlHWZXFB3trZexu
 .1yAT9S_9lypUOcJ0saZdSu8yqg--
Received: from [87.162.188.244] by web120402.mail.ne1.yahoo.com via HTTP; Wed, 20 Oct 2010 09:12:00 PDT
X-Mailer: YahooMailRC/504.5 YahooMailWebService/0.8.106.282862
Date: Wed, 20 Oct 2010 09:12:00 -0700 (PDT)
From: Bob Miller <bobdmic@yahoo.com>
Subject: Get number of hits for various combinations
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Dear all,


I would like to use a tag cloud of keywords to narrow down the currently 
displayed search results. In order to implement this, it must be possible to 
determine the number of hits for the current search query combined with each 
keyword in the tag cloud.   What would be the most efficient method of doing 
this? The index currently contains about 500000 documents. It is possible to 
search within multiple fields.

Thanks,

Bob


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:05:40 2010
Return-Path: <java-user-return-47562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82609 invoked from network); 20 Oct 2010 18:05:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:05:40 -0000
Received: (qmail 83608 invoked by uid 500); 20 Oct 2010 18:05:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83569 invoked by uid 500); 20 Oct 2010 18:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83561 invoked by uid 99); 20 Oct 2010 18:05:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:05:37 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:05:31 +0000
Received: by wwb18 with SMTP id 18so3178325wwb.5
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 11:05:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=7xJv4zOIhr95odN2dr/ksVEEZZgj+PUCfwD/nqET/bQ=;
        b=skuDteESfMOahuTdb7KYBmYd5JUpngZpa139nmjeSfhvbZafJHurmimDZReGBUUexp
         OqGET3fJ5pMbPeZNwrs6rBsTKO0Gg4yvItoHQwIhHpGfqA7nT4nj4U6DbotqMlpoJoF7
         QuNVA79U2BIugi8psExb1KuCHGpYU73QiA47s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=B3/SOOZHIbrKNB8HecD8QSTI84FgOY2MhosdF1ayOAouRnlyYVpWsKVy20NK+3cUMB
         ZayaPp8O6iLOmNS4Wjo6gngxyB5b3vp1lGKGJvMKjpV3LpABAgm3rofQRTocGbPtPxa3
         IDXIQcaAs3uzxl1y+ZOFeFA+/GBp7EOyO6FgY=
MIME-Version: 1.0
Received: by 10.227.29.92 with SMTP id p28mr7796807wbc.70.1287597909639; Wed,
 20 Oct 2010 11:05:09 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Wed, 20 Oct 2010 11:05:09 -0700 (PDT)
In-Reply-To: <AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
Date: Wed, 20 Oct 2010 14:05:09 -0400
Message-ID: <AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221597585604844a0493104042

--00221597585604844a0493104042
Content-Type: text/plain; charset=ISO-8859-1

Thank you so much for this infor. it looks pretty complicated for me but I
will try.



On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <johnbin.wang@gmail.com>wrote:

> You can start a fixedThreadPool to index all these files in the multhread
> way. Every thread execute an index task which could index a part of all the
> files. In the index task, when indexing 10000 files, you need execute the
> indexWrite.commit() method to flush all the index add operation to disk
> file.
>
> If you need index all these files into only one index file, you need to
> hold
> only one indexWriter instance among all the index thread.
>
> Hope it's helpful.
>
>
>
> On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > Thank you Johnbin,
> > do you know which parameter I have to play with?
> >
> > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <johnbin.wang@gmail.com
> > >wrote:
> >
> > > I think you can write index file once every 10,000 files or less have
> > been
> > > read.
> > >
> > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > sahin.buyrukbilen@gmail.com> wrote:
> > >
> > > > Hi all,
> > > >
> > > > I have to index about 4.5Million txt files. When I run the my
> indexing
> > > > application through Eclipse, I get this error : "Exception in thread
> > > "main"
> > > > java.lang.OutOfMemoryError: Java heap space"
> > > >
> > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > >
> > > > eclipse -vmargs -Xms40M -Xmx2G
> > > >
> > > >  I tried running Eclipse with above memory parameters, but still had
> > the
> > > > same error. The architecture of my computer is AMD x2 64bit 2GHz
> > > processor,
> > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > >
> > > > Anybody has a suggestion?
> > > >
> > > > thank you.
> > > > Sahin.
> > > >
> > >
> > >
> > >
> > > --
> > > cheers,
> > > Johnbin Wang
> > >
> >
>
>
>
> --
> cheers,
> Johnbin Wang
>

--00221597585604844a0493104042--

From java-user-return-47563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:23:29 2010
Return-Path: <java-user-return-47563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91938 invoked from network); 20 Oct 2010 18:23:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:23:28 -0000
Received: (qmail 6006 invoked by uid 500); 20 Oct 2010 18:23:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5975 invoked by uid 500); 20 Oct 2010 18:23:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5967 invoked by uid 99); 20 Oct 2010 18:23:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:23:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.37 as permitted sender)
Received: from [212.74.114.37] (HELO mk-outboundfilter-1.mail.uk.tiscali.com) (212.74.114.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:23:16 +0000
X-Trace: 408060508/mk-outboundfilter-1.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AgANAOrPvkxRVnIp/2dsb2JhbACBQ5IgjHB6cr98ghqDMASKS4J6hFY
X-IronPort-AV: E=Sophos;i="4.57,356,1283727600"; 
   d="scan'208,217";a="408060508"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 20 Oct 2010 19:22:55 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
Subject: Using a TermFreqVector to get counts of all words in a document
Date: Wed, 20 Oct 2010 19:22:58 +0100
Message-ID: <006001cb7083$d25abde0$771039a0$@pipex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0061_01CB708C.341F25E0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Actwg9IzEbcWLByrQoWC+H5AJU2hnQ==
Content-Language: en-gb
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0061_01CB708C.341F25E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello

 

I am trying to use a TermFreqVector to get a count of all words in a
Document as follows:

 

   // Search.

        int hitsPerPage = 10;

        IndexSearcher searcher = new IndexSearcher(index, true);

        TopScoreDocCollector collector =
TopScoreDocCollector.create(hitsPerPage, true);

        searcher.search(q, collector);

        ScoreDoc[] hits = collector.topDocs().scoreDocs;

 

        // Display results.

        int docId = 0;

        System.out.println("Found " + hits.length + " hits.");

        for (int i = 0; i < hits.length; ++i) {

            docId = hits[i].doc;

            Document d = searcher.doc(docId);

            System.out.println((i + 1) + ". " + d.get("title"));

            IndexReader trd = IndexReader.open(index);

            TermFreqVector tfv = trd.getTermFreqVector(docId, "title");

            System.out.println(tfv.getTerms().toString());

            System.out.println(tfv.getTermFrequencies().toString());

        }

 

The code is very rough as its only an experiment but I'm under the
impression that the getTerms and getTermFrequencies methods for a
TermFreqVector should allow each word and its frequency in the document to
be displayed. All I get though is a NullPointerError. The index consists of
a single document made up of a simple string:

 

IndexWriter w = new IndexWriter(index, analyzer, true,
IndexWriter.MaxFieldLength.UNLIMITED);        

addDoc(w, "Lucene for Dummies"); 

 

And the queryString being used is simply "dummies".  

 

Thanks

 

Martin O'Shea.    


------=_NextPart_000_0061_01CB708C.341F25E0--



From java-user-return-47564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:39:21 2010
Return-Path: <java-user-return-47564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95820 invoked from network); 20 Oct 2010 18:39:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:39:20 -0000
Received: (qmail 22691 invoked by uid 500); 20 Oct 2010 18:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22597 invoked by uid 500); 20 Oct 2010 18:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22589 invoked by uid 99); 20 Oct 2010 18:39:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:39:18 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:39:12 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 05C3E45FA1C
	for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 20:38:51 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id omf2JT2cOKoZ for <java-user@lucene.apache.org>;
	Wed, 20 Oct 2010 20:38:41 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 098C545FA1B
	for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 20:38:40 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com>
In-Reply-To: <006001cb7083$d25abde0$771039a0$@pipex.com>
Subject: RE: Using a TermFreqVector to get counts of all words in a document
Date: Wed, 20 Oct 2010 20:39:34 +0200
Message-ID: <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKSdY9UdFOBJJ09pq1Rj46EouHl8pG8IQ/A
Content-Language: de

TermVectors are only available when enabled for the field/document.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Martin O'Shea [mailto:appy74@dsl.pipex.com]
> Sent: Wednesday, October 20, 2010 8:23 PM
> To: java-user@lucene.apache.org
> Subject: Using a TermFreqVector to get counts of all words in a document
> 
> Hello
> 
> 
> 
> I am trying to use a TermFreqVector to get a count of all words in a
Document
> as follows:
> 
> 
> 
>    // Search.
> 
>         int hitsPerPage = 10;
> 
>         IndexSearcher searcher = new IndexSearcher(index, true);
> 
>         TopScoreDocCollector collector =
> TopScoreDocCollector.create(hitsPerPage, true);
> 
>         searcher.search(q, collector);
> 
>         ScoreDoc[] hits = collector.topDocs().scoreDocs;
> 
> 
> 
>         // Display results.
> 
>         int docId = 0;
> 
>         System.out.println("Found " + hits.length + " hits.");
> 
>         for (int i = 0; i < hits.length; ++i) {
> 
>             docId = hits[i].doc;
> 
>             Document d = searcher.doc(docId);
> 
>             System.out.println((i + 1) + ". " + d.get("title"));
> 
>             IndexReader trd = IndexReader.open(index);
> 
>             TermFreqVector tfv = trd.getTermFreqVector(docId, "title");
> 
>             System.out.println(tfv.getTerms().toString());
> 
>             System.out.println(tfv.getTermFrequencies().toString());
> 
>         }
> 
> 
> 
> The code is very rough as its only an experiment but I'm under the
impression
> that the getTerms and getTermFrequencies methods for a TermFreqVector
> should allow each word and its frequency in the document to be displayed.
All I
> get though is a NullPointerError. The index consists of a single document
made
> up of a simple string:
> 
> 
> 
> IndexWriter w = new IndexWriter(index, analyzer, true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> 
> addDoc(w, "Lucene for Dummies");
> 
> 
> 
> And the queryString being used is simply "dummies".
> 
> 
> 
> Thanks
> 
> 
> 
> Martin O'Shea.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:39:54 2010
Return-Path: <java-user-return-47565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95900 invoked from network); 20 Oct 2010 18:39:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:39:54 -0000
Received: (qmail 24614 invoked by uid 500); 20 Oct 2010 18:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24571 invoked by uid 500); 20 Oct 2010 18:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24558 invoked by uid 99); 20 Oct 2010 18:39:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:39:52 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:39:44 +0000
Received: by gyh3 with SMTP id 3so2581549gyh.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 11:39:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=UF4LMjAkw9g1ujo8X09QyZObK80eFDLJFAszZLwPvt8=;
        b=HUgBrO+F7uSRveipS79YEJBVTAUTIAqDKK5fjdhsMz3alZgSOIC6oxCzK5Ad/ylR8G
         b5F/4JdgV5wdujyxX2AyQJMY0XC+lLlICIpwL3VRKDQCP9ZzIQVqk3fiY4tKhTfNNUbD
         EfvknEG6aQWQFTCnNg9wJIMl37ha32VYg3UO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LP+nsotsLeYpQdKB/+yda4A3BYdrYSKn4F1SWBvb4VlyRX0igIWkW8T9PlaOvLIuxG
         8ZdjaKbnQ25p1n8XXVO/atoXiQYzL9JnbZsFsLS6VlK4ylSaeY63J5umujdrU8YII3t+
         7nUoaxzcJCeP0r7SSLdTFvELBHer8h2WS3FC4=
MIME-Version: 1.0
Received: by 10.42.99.3 with SMTP id u3mr6177959icn.124.1287599962956; Wed, 20
 Oct 2010 11:39:22 -0700 (PDT)
Received: by 10.42.114.141 with HTTP; Wed, 20 Oct 2010 11:39:22 -0700 (PDT)
In-Reply-To: <AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
Date: Wed, 20 Oct 2010 14:39:22 -0400
Message-ID: <AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba613bee67a497049310ba6f
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba613bee67a497049310ba6f
Content-Type: text/plain; charset=ISO-8859-1

1. What is the difference when you used different vm parameters?
2  What merge policy and optimization strategy did you use?
3. How did you use the commit or flush ?

Qi

On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Thank you so much for this infor. it looks pretty complicated for me but I
> will try.
>
>
>
> On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <johnbin.wang@gmail.com
> >wrote:
>
> > You can start a fixedThreadPool to index all these files in the multhread
> > way. Every thread execute an index task which could index a part of all
> the
> > files. In the index task, when indexing 10000 files, you need execute the
> > indexWrite.commit() method to flush all the index add operation to disk
> > file.
> >
> > If you need index all these files into only one index file, you need to
> > hold
> > only one indexWriter instance among all the index thread.
> >
> > Hope it's helpful.
> >
> >
> >
> > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> > sahin.buyrukbilen@gmail.com> wrote:
> >
> > > Thank you Johnbin,
> > > do you know which parameter I have to play with?
> > >
> > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <johnbin.wang@gmail.com
> > > >wrote:
> > >
> > > > I think you can write index file once every 10,000 files or less have
> > > been
> > > > read.
> > > >
> > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > > sahin.buyrukbilen@gmail.com> wrote:
> > > >
> > > > > Hi all,
> > > > >
> > > > > I have to index about 4.5Million txt files. When I run the my
> > indexing
> > > > > application through Eclipse, I get this error : "Exception in
> thread
> > > > "main"
> > > > > java.lang.OutOfMemoryError: Java heap space"
> > > > >
> > > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > > >
> > > > > eclipse -vmargs -Xms40M -Xmx2G
> > > > >
> > > > >  I tried running Eclipse with above memory parameters, but still
> had
> > > the
> > > > > same error. The architecture of my computer is AMD x2 64bit 2GHz
> > > > processor,
> > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > > >
> > > > > Anybody has a suggestion?
> > > > >
> > > > > thank you.
> > > > > Sahin.
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > cheers,
> > > > Johnbin Wang
> > > >
> > >
> >
> >
> >
> > --
> > cheers,
> > Johnbin Wang
> >
>

--90e6ba613bee67a497049310ba6f--

From java-user-return-47566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:46:02 2010
Return-Path: <java-user-return-47566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97518 invoked from network); 20 Oct 2010 18:46:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:46:02 -0000
Received: (qmail 37692 invoked by uid 500); 20 Oct 2010 18:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37655 invoked by uid 500); 20 Oct 2010 18:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37647 invoked by uid 99); 20 Oct 2010 18:46:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:46:00 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:45:53 +0000
Received: by ewy28 with SMTP id 28so2635617ewy.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 11:45:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LoQMDsWb+ZwBFipmjLEI54N+8vmR+HftKE1HH/nyEu8=;
        b=jtJf9aRkPCRumrS7JRy+4nNvAxfvZohf8MftjiwfwC516Q1RRFEmCn+ta89YzY5ILB
         r6iqJ4cw8fSkF+U1Kulm/IOREfn1cgkLlS4xE4PkLctn0IwaDNHpwHMFa+xugnJJArCC
         95HmJTFpdDtkCPt1roVqKybY/5aZsyvTpve9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PfqJBN9I7nfxvITK47Tr2bf7a1Pi78ig1N/9hvQsv2RMxcmdoGUZX/kaAsbA368BAH
         QIXHSQv5T8NuCo1PY3bLP7uhQPzh/qVz48aZLtJ40HNe8kIAh194JFfVprnXHvjbdk8N
         LQNIUmcRu4j911Qya3uJmWVragyJ7EKnm1fDo=
MIME-Version: 1.0
Received: by 10.216.1.17 with SMTP id 17mr8545996wec.99.1287600332303; Wed, 20
 Oct 2010 11:45:32 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Wed, 20 Oct 2010 11:45:32 -0700 (PDT)
In-Reply-To: <AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
Date: Wed, 20 Oct 2010 14:45:32 -0400
Message-ID: <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d281f6b6e37049310d0d1

--0016364d281f6b6e37049310d0d1
Content-Type: text/plain; charset=ISO-8859-1

with the different parameters I still got the same error. My code is very
simple, indeed I am only concerned with creating the index and then I will
do some private information retrieval experiments on the inverted index
file, which I created with the information extracted from the index. That is
why I didnt go over optimization until now. the database size I had was ery
small compared to 4.5million.
My code is as follows:

public static void createIndex() throws CorruptIndexException,
LockObtainFailedException, IOException {
        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
        Directory indexDir = FSDirectory.open(new
File("/media/work/WIKI/indexes/"));
        boolean recreateIndexIfExists = true;
        IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
        indexWriter.setUseCompoundFile(false);
        File dir = new File(FILES_TO_INDEX_DIRECTORY);
        File[] files = dir.listFiles();
        for (File file : files) {
            Document document = new Document();

            //String path = file.getCanonicalPath();
            //document.add(new Field(FIELD_PATH, path, Field.Store.YES,
Field.Index.NOT_ANALYZED));

            Reader reader = new FileReader(file);
            document.add(new Field(FIELD_CONTENTS, reader));

            indexWriter.addDocument(document);
        }
        indexWriter.optimize();
        indexWriter.close();
    }


On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:

> 1. What is the difference when you used different vm parameters?
> 2  What merge policy and optimization strategy did you use?
> 3. How did you use the commit or flush ?
>
> Qi
>
> On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > Thank you so much for this infor. it looks pretty complicated for me but
> I
> > will try.
> >
> >
> >
> > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <johnbin.wang@gmail.com
> > >wrote:
> >
> > > You can start a fixedThreadPool to index all these files in the
> multhread
> > > way. Every thread execute an index task which could index a part of all
> > the
> > > files. In the index task, when indexing 10000 files, you need execute
> the
> > > indexWrite.commit() method to flush all the index add operation to disk
> > > file.
> > >
> > > If you need index all these files into only one index file, you need to
> > > hold
> > > only one indexWriter instance among all the index thread.
> > >
> > > Hope it's helpful.
> > >
> > >
> > >
> > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> > > sahin.buyrukbilen@gmail.com> wrote:
> > >
> > > > Thank you Johnbin,
> > > > do you know which parameter I have to play with?
> > > >
> > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
> johnbin.wang@gmail.com
> > > > >wrote:
> > > >
> > > > > I think you can write index file once every 10,000 files or less
> have
> > > > been
> > > > > read.
> > > > >
> > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > > > sahin.buyrukbilen@gmail.com> wrote:
> > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > I have to index about 4.5Million txt files. When I run the my
> > > indexing
> > > > > > application through Eclipse, I get this error : "Exception in
> > thread
> > > > > "main"
> > > > > > java.lang.OutOfMemoryError: Java heap space"
> > > > > >
> > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > > > >
> > > > > > eclipse -vmargs -Xms40M -Xmx2G
> > > > > >
> > > > > >  I tried running Eclipse with above memory parameters, but still
> > had
> > > > the
> > > > > > same error. The architecture of my computer is AMD x2 64bit 2GHz
> > > > > processor,
> > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > > > >
> > > > > > Anybody has a suggestion?
> > > > > >
> > > > > > thank you.
> > > > > > Sahin.
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > cheers,
> > > > > Johnbin Wang
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > cheers,
> > > Johnbin Wang
> > >
> >
>

--0016364d281f6b6e37049310d0d1--

From java-user-return-47567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:46:12 2010
Return-Path: <java-user-return-47567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97581 invoked from network); 20 Oct 2010 18:46:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:46:11 -0000
Received: (qmail 39565 invoked by uid 500); 20 Oct 2010 18:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39528 invoked by uid 500); 20 Oct 2010 18:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39520 invoked by uid 99); 20 Oct 2010 18:46:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:46:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cristian.vat@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:46:02 +0000
Received: by ywj3 with SMTP id 3so33776ywj.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 11:45:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=3QTPFg7QWBo/PNGlmVjNyLB/JIKCNeH/ZMSpALMg/lY=;
        b=aN7i58AbNY409YZghQDTtBGW9ia4ZKn1LJ85S1wQsyVu6LJACo3yNi8U0ur5uW+TvE
         E/1Lof+QSuTmk85PMz+7rLfWBp06j+EsnwyCyMU04b78T+sWdIgfz0z0ZuMIE30qWM0s
         noojejGxaIGb4q7Gr1EfnXz/LUzBuL7PQkMVI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=OwzkKaJlXwD+0IWHQQ3y/s/bCx1bPDkx/NvSgcr3mf1PweeHBlq/KFqMgTpBWG9LiG
         uoXAsYUJu+MYRCOQxL1EwVtQTlqkOKUXfqg9/oFnaCYgcyCRzFTJgmnuR54LRz8KaqpC
         9FjOcp/lCxSgydL/H905z9h6nNEfa7nSPqMlw=
MIME-Version: 1.0
Received: by 10.42.13.75 with SMTP id c11mr5142958ica.481.1287600339568; Wed,
 20 Oct 2010 11:45:39 -0700 (PDT)
Received: by 10.231.35.139 with HTTP; Wed, 20 Oct 2010 11:45:39 -0700 (PDT)
Date: Wed, 20 Oct 2010 21:45:39 +0300
Message-ID: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
Subject: problem during index merge
From: Cristian Vat <cristian.vat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I've been running into a problem during a merge. Would appreciate
knowing what to look for since the exception doesn't seem too
explanatory.

I get:
--
--- Nested Exception ---
java.io.IOException: background merge hit exception: _2p:c695204
_2q:c93106 into _2r [optimize] [mergeDocStores]
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2908)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2843)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2813)
	...application code...
Caused by: org.apache.lucene.index.CorruptIndexException: docs out of
order (64570 <= 64570 )
	at org.apache.lucene.index.FormatPostingsDocsWriter.addDoc(FormatPostingsDocsWriter.java:75)
	at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:703)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:648)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:586)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:154)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5112)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4675)
	at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:235)
	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
--

I have two indexes, first I delete some documents from the second one
and then use IndexWriter.addIndexesNoOptimize() and
IndexWriter.optimize() to add all of the first index to the second
one.
Everything works fine if I don't call optimize()
Using lucene 2.9.3. I get the same problem on windows and linux with
different java versions.

Also, the same code ran without problems for some months, but today
with the indexes I have it consistently fails.

I opened the target index with Luke and ran Check Index and I do get
an error but I don't know exactly what causes it:
--
 test: terms, freq, prox...ERROR [term fulltext:instructions: doc
260628: pos -405712460 is out of bounds]
java.lang.RuntimeException: term fulltext:instructions: doc 260628:
pos -405712460 is out of bounds
	at org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:657)
	at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:530)
	at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:319)
	at org.getopt.luke.Luke$6.run(Unknown Source)
--

Thanks for any help.
-
Cristian Vat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:53:31 2010
Return-Path: <java-user-return-47568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99883 invoked from network); 20 Oct 2010 18:53:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:53:31 -0000
Received: (qmail 58988 invoked by uid 500); 20 Oct 2010 18:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58847 invoked by uid 500); 20 Oct 2010 18:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58839 invoked by uid 99); 20 Oct 2010 18:53:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:53:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.14 as permitted sender)
Received: from [212.74.114.14] (HELO mk-outboundfilter-6.mail.uk.tiscali.com) (212.74.114.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:53:20 +0000
X-Trace: 261018592/mk-outboundfilter-6.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApYJAKfXvkxRVnIp/2dsb2JhbACgVHtyv3yCGoMwBIRHY1SEBEmCeoRW
X-IronPort-AV: E=Sophos;i="4.57,356,1283727600"; 
   d="scan'208";a="261018592"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 20 Oct 2010 19:53:00 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de>
In-Reply-To: <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de>
Subject: RE: Using a TermFreqVector to get counts of all words in a document
Date: Wed, 20 Oct 2010 19:53:02 +0100
Message-ID: <006e01cb7088$05fc38f0$11f4aad0$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AQKSdY9UdFOBJJ09pq1Rj46EouHl8pG8IQ/AgAAAr3A=
Content-Language: en-gb
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe

Thanks - I figured that bit out. I'm a Lucene 'newbie'.

What I would like to know though is if it is practical to search a single
document of one field simply by doing this:

IndexReader trd = IndexReader.open(index);
        TermFreqVector tfv = trd.getTermFreqVector(docId, "title");
        String[] terms = tfv.getTerms();
        int[] freqs = tfv.getTermFrequencies();
        for (int i = 0; i < tfv.getTerms().length; i++) {
            System.out.println("Term " + terms[i] + " Freq: " + freqs[i]);
        }
        trd.close();

where docId is set to 0.

The code works but can this be improved upon at all?

My situation is where I don't want to calculate the number of documents with
a particular string. Rather I want to get counts of individual words in a
field in a document. So I can concatenate the strings before passing it to
Lucene.

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: 20 Oct 2010 19 40
To: java-user@lucene.apache.org
Subject: RE: Using a TermFreqVector to get counts of all words in a document

TermVectors are only available when enabled for the field/document.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Martin O'Shea [mailto:appy74@dsl.pipex.com]
> Sent: Wednesday, October 20, 2010 8:23 PM
> To: java-user@lucene.apache.org
> Subject: Using a TermFreqVector to get counts of all words in a document
> 
> Hello
> 
> 
> 
> I am trying to use a TermFreqVector to get a count of all words in a
Document
> as follows:
> 
> 
> 
>    // Search.
> 
>         int hitsPerPage = 10;
> 
>         IndexSearcher searcher = new IndexSearcher(index, true);
> 
>         TopScoreDocCollector collector =
> TopScoreDocCollector.create(hitsPerPage, true);
> 
>         searcher.search(q, collector);
> 
>         ScoreDoc[] hits = collector.topDocs().scoreDocs;
> 
> 
> 
>         // Display results.
> 
>         int docId = 0;
> 
>         System.out.println("Found " + hits.length + " hits.");
> 
>         for (int i = 0; i < hits.length; ++i) {
> 
>             docId = hits[i].doc;
> 
>             Document d = searcher.doc(docId);
> 
>             System.out.println((i + 1) + ". " + d.get("title"));
> 
>             IndexReader trd = IndexReader.open(index);
> 
>             TermFreqVector tfv = trd.getTermFreqVector(docId, "title");
> 
>             System.out.println(tfv.getTerms().toString());
> 
>             System.out.println(tfv.getTermFrequencies().toString());
> 
>         }
> 
> 
> 
> The code is very rough as its only an experiment but I'm under the
impression
> that the getTerms and getTermFrequencies methods for a TermFreqVector
> should allow each word and its frequency in the document to be displayed.
All I
> get though is a NullPointerError. The index consists of a single document
made
> up of a simple string:
> 
> 
> 
> IndexWriter w = new IndexWriter(index, analyzer, true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> 
> addDoc(w, "Lucene for Dummies");
> 
> 
> 
> And the queryString being used is simply "dummies".
> 
> 
> 
> Thanks
> 
> 
> 
> Martin O'Shea.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 18:58:18 2010
Return-Path: <java-user-return-47569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1044 invoked from network); 20 Oct 2010 18:58:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 18:58:18 -0000
Received: (qmail 69026 invoked by uid 500); 20 Oct 2010 18:58:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68852 invoked by uid 500); 20 Oct 2010 18:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68844 invoked by uid 99); 20 Oct 2010 18:58:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:58:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 18:58:08 +0000
Received: by qwg8 with SMTP id 8so2717754qwg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 11:57:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=tY0oH4xl466zOnwD0DGPBMCCFk0dPGfMoMVVN9Bm0ek=;
        b=xT4qQEY4hRHOVulLWMpAqOqaVfRKWvOtm6p9zqwERqUYXdl+CRCjrqz28tlTgilom2
         QOtlDCuYKWJGuAltiyw35A76RBGsw5UkXOkhnjWxIRrAZrqAyfqH67TBjnP1ayWigK5/
         8w0FefVlnChexwwLFYwM+VyW+OHvQWJTpQaBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=SMgizSIblWCZuTHeXCaftOQK9oMn8PaIAsTrYmQk9jVHGUf80n+SqXpqn3nKt/UWt6
         jcYIUqhx9MktPa168ygFVmO6w9JGr7+bLXSLn0bIKlfQ9SkVZzm1qUQi26xCvqVZrhVc
         pPnFCss9Akg7fwbRqCMwPxhhwkFpchJkFLTA4=
Received: by 10.224.191.70 with SMTP id dl6mr5448548qab.303.1287601067879;
 Wed, 20 Oct 2010 11:57:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Wed, 20 Oct 2010 11:57:26 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Wed, 20 Oct 2010 11:57:26 -0700
Message-ID: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com>
Subject: Lucene index update
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3005def0436d96049310fcb6
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3005def0436d96049310fcb6
Content-Type: text/plain; charset=ISO-8859-1

I've written a blog regarding a work around for updating index in Lucene
using parallel reader. It's explained with results and pictures.

It would be great if you have a look at it. The link:
http://the10minutes.blogspot.com/2010/10/lucene-index-update.html

<http://the10minutes.blogspot.com/2010/10/lucene-index-update.html>Thanks
Nilesh

--20cf3005def0436d96049310fcb6--

From java-user-return-47570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 19:23:26 2010
Return-Path: <java-user-return-47570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12070 invoked from network); 20 Oct 2010 19:23:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 19:23:25 -0000
Received: (qmail 3159 invoked by uid 500); 20 Oct 2010 19:23:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3110 invoked by uid 500); 20 Oct 2010 19:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3100 invoked by uid 99); 20 Oct 2010 19:23:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:23:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:23:17 +0000
Received: by eyf5 with SMTP id 5so857062eyf.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 12:22:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.28.15 with SMTP id f15mr1267634wea.39.1287602575260; Wed,
 20 Oct 2010 12:22:55 -0700 (PDT)
Received: by 10.217.1.14 with HTTP; Wed, 20 Oct 2010 12:22:55 -0700 (PDT)
In-Reply-To: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
References: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
Date: Wed, 20 Oct 2010 15:22:55 -0400
Message-ID: <AANLkTim1KaMa-5OY1znkXWBgmCPygDA1sMutP61KyDQH@mail.gmail.com>
Subject: Re: problem during index merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This looks like index corruption.

But: are you able to reproduce this corruption, eg on different
machines?  I'd love to see how :)

Your usage (using addIndexesNoOptimize to add indices) looks fine.

Mike

On Wed, Oct 20, 2010 at 2:45 PM, Cristian Vat <cristian.vat@gmail.com> wrot=
e:
> Hello,
>
> I've been running into a problem during a merge. Would appreciate
> knowing what to look for since the exception doesn't seem too
> explanatory.
>
> I get:
> --
> --- Nested Exception ---
> java.io.IOException: background merge hit exception: _2p:c695204
> _2q:c93106 into _2r [optimize] [mergeDocStores]
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrite=
r.java:2908)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrite=
r.java:2843)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrite=
r.java:2813)
> =A0 =A0 =A0 =A0...application code...
> Caused by: org.apache.lucene.index.CorruptIndexException: docs out of
> order (64570 <=3D 64570 )
> =A0 =A0 =A0 =A0at org.apache.lucene.index.FormatPostingsDocsWriter.addDoc=
(FormatPostingsDocsWriter.java:75)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.appendPostings(Se=
gmentMerger.java:703)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTermInfos(Se=
gmentMerger.java:648)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTerms(Segmen=
tMerger.java:586)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.merge(SegmentMerg=
er.java:154)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWr=
iter.java:5112)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter.j=
ava:4675)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler.doMerg=
e(ConcurrentMergeScheduler.java:235)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler$MergeT=
hread.run(ConcurrentMergeScheduler.java:291)
> --
>
> I have two indexes, first I delete some documents from the second one
> and then use IndexWriter.addIndexesNoOptimize() and
> IndexWriter.optimize() to add all of the first index to the second
> one.
> Everything works fine if I don't call optimize()
> Using lucene 2.9.3. I get the same problem on windows and linux with
> different java versions.
>
> Also, the same code ran without problems for some months, but today
> with the indexes I have it consistently fails.
>
> I opened the target index with Luke and ran Check Index and I do get
> an error but I don't know exactly what causes it:
> --
> =A0test: terms, freq, prox...ERROR [term fulltext:instructions: doc
> 260628: pos -405712460 is out of bounds]
> java.lang.RuntimeException: term fulltext:instructions: doc 260628:
> pos -405712460 is out of bounds
> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.testTermIndex(CheckI=
ndex.java:657)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckInde=
x.java:530)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckInde=
x.java:319)
> =A0 =A0 =A0 =A0at org.getopt.luke.Luke$6.run(Unknown Source)
> --
>
> Thanks for any help.
> -
> Cristian Vat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 19:37:58 2010
Return-Path: <java-user-return-47571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20854 invoked from network); 20 Oct 2010 19:37:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 19:37:58 -0000
Received: (qmail 44444 invoked by uid 500); 20 Oct 2010 19:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44394 invoked by uid 500); 20 Oct 2010 19:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44386 invoked by uid 99); 20 Oct 2010 19:37:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:37:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cristian.vat@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:37:49 +0000
Received: by iwn3 with SMTP id 3so4620046iwn.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 12:37:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=WRkQ/J3ZKWCimYYdalRHhJWOlPmc1ORdbwoTR28nT4A=;
        b=aK6CogxOd7CqEgIHVU9a2YXVuYi3yG9ghEceUECOErEHfdukesc1LTTMHz6NecBgNx
         wAxj9WWbb7wyPItrFGfmv/gSAcBfWlDGh2FBb8TQ/mY4QnJH/4x2h5dzffU/ydIlu2l8
         vr/eale5Y61R0y5T4qzy+2z9r7gaxK0aUsfJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=q4P3Oswaslsuiz7P1kFC2ylqu6UJ2+wwUEwW1HqNC8qwQ9lGoOFeX89iFjfcPgTn5e
         UATkbozK1GkhKl9BNfUMgz3ySUt0yUcX29dzEQ+YKgLopSD3Gr9WlqxrBZyR+YLJPQcX
         gejZtnBo1Y9pxlwefhDXSUF8zIYvNEoZl0qn0=
MIME-Version: 1.0
Received: by 10.231.58.198 with SMTP id i6mr6790803ibh.43.1287603448108; Wed,
 20 Oct 2010 12:37:28 -0700 (PDT)
Received: by 10.231.35.139 with HTTP; Wed, 20 Oct 2010 12:37:28 -0700 (PDT)
In-Reply-To: <AANLkTim1KaMa-5OY1znkXWBgmCPygDA1sMutP61KyDQH@mail.gmail.com>
References: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
	<AANLkTim1KaMa-5OY1znkXWBgmCPygDA1sMutP61KyDQH@mail.gmail.com>
Date: Wed, 20 Oct 2010 22:37:28 +0300
Message-ID: <AANLkTimNUx2EhmpXC4ZJAztukF9cx0thursaY03TReOQ@mail.gmail.com>
Subject: Re: problem during index merge
From: Cristian Vat <cristian.vat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Corruption in the sense that it isn't recoverable or is there
something I might be able to do?

The index opens up without problems in Luke and there's an application
using it for searching without problems (apparently)

It's actually an application with a (possibly) hourly update, so
finding the last good index and when something might have broken won't
be possible.

Could it be caused by a hardware problem? It's possible there were
some problems on the same server before. But I imagined it would be
completely broken (even for search) if it was a hardware issue.

-
Cristian Vat

On Wed, Oct 20, 2010 at 22:22, Michael McCandless
<lucene@mikemccandless.com> wrote:
> This looks like index corruption.
>
> But: are you able to reproduce this corruption, eg on different
> machines? =A0I'd love to see how :)
>
> Your usage (using addIndexesNoOptimize to add indices) looks fine.
>
> Mike
>
> On Wed, Oct 20, 2010 at 2:45 PM, Cristian Vat <cristian.vat@gmail.com> wr=
ote:
>> Hello,
>>
>> I've been running into a problem during a merge. Would appreciate
>> knowing what to look for since the exception doesn't seem too
>> explanatory.
>>
>> I get:
>> --
>> --- Nested Exception ---
>> java.io.IOException: background merge hit exception: _2p:c695204
>> _2q:c93106 into _2r [optimize] [mergeDocStores]
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrit=
er.java:2908)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrit=
er.java:2843)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWrit=
er.java:2813)
>> =A0 =A0 =A0 =A0...application code...
>> Caused by: org.apache.lucene.index.CorruptIndexException: docs out of
>> order (64570 <=3D 64570 )
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.FormatPostingsDocsWriter.addDo=
c(FormatPostingsDocsWriter.java:75)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.appendPostings(S=
egmentMerger.java:703)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTermInfos(S=
egmentMerger.java:648)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTerms(Segme=
ntMerger.java:586)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.merge(SegmentMer=
ger.java:154)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexW=
riter.java:5112)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter.=
java:4675)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler.doMer=
ge(ConcurrentMergeScheduler.java:235)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler$Merge=
Thread.run(ConcurrentMergeScheduler.java:291)
>> --
>>
>> I have two indexes, first I delete some documents from the second one
>> and then use IndexWriter.addIndexesNoOptimize() and
>> IndexWriter.optimize() to add all of the first index to the second
>> one.
>> Everything works fine if I don't call optimize()
>> Using lucene 2.9.3. I get the same problem on windows and linux with
>> different java versions.
>>
>> Also, the same code ran without problems for some months, but today
>> with the indexes I have it consistently fails.
>>
>> I opened the target index with Luke and ran Check Index and I do get
>> an error but I don't know exactly what causes it:
>> --
>> =A0test: terms, freq, prox...ERROR [term fulltext:instructions: doc
>> 260628: pos -405712460 is out of bounds]
>> java.lang.RuntimeException: term fulltext:instructions: doc 260628:
>> pos -405712460 is out of bounds
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.testTermIndex(Check=
Index.java:657)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckInd=
ex.java:530)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckInd=
ex.java:319)
>> =A0 =A0 =A0 =A0at org.getopt.luke.Luke$6.run(Unknown Source)
>> --
>>
>> Thanks for any help.
>> -
>> Cristian Vat
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 19:59:24 2010
Return-Path: <java-user-return-47572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29643 invoked from network); 20 Oct 2010 19:59:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 19:59:24 -0000
Received: (qmail 90260 invoked by uid 500); 20 Oct 2010 19:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90222 invoked by uid 500); 20 Oct 2010 19:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90214 invoked by uid 99); 20 Oct 2010 19:59:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:59:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 19:59:14 +0000
Received: by wyg36 with SMTP id 36so3138555wyg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 12:58:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.174.143 with SMTP id x15mr8672585wel.105.1287604733708;
 Wed, 20 Oct 2010 12:58:53 -0700 (PDT)
Received: by 10.217.1.14 with HTTP; Wed, 20 Oct 2010 12:58:53 -0700 (PDT)
In-Reply-To: <AANLkTimNUx2EhmpXC4ZJAztukF9cx0thursaY03TReOQ@mail.gmail.com>
References: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
	<AANLkTim1KaMa-5OY1znkXWBgmCPygDA1sMutP61KyDQH@mail.gmail.com>
	<AANLkTimNUx2EhmpXC4ZJAztukF9cx0thursaY03TReOQ@mail.gmail.com>
Date: Wed, 20 Oct 2010 15:58:53 -0400
Message-ID: <AANLkTik1aoJvD9yYHALCQ5F2BhiY85Z3mWtfaPF4YuLG@mail.gmail.com>
Subject: Re: problem during index merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Not recoverable automatically.

But you can run CheckIndex -fix -- it removes the segment(s) that has
the corruption (losing all docs in that segment).

Searches appear fine because we don't do this check ("docs out of
order") during searching, but results are likely wrong when they hit
that segment(s).

Hardware issues can definitely cause this -- eg if RAM or IO system is
flipping bits occasionally that can cause such corruption.

But if it's repeatable on different machines then there's a bug here ;)

Mike

On Wed, Oct 20, 2010 at 3:37 PM, Cristian Vat <cristian.vat@gmail.com> wrot=
e:
> Corruption in the sense that it isn't recoverable or is there
> something I might be able to do?
>
> The index opens up without problems in Luke and there's an application
> using it for searching without problems (apparently)
>
> It's actually an application with a (possibly) hourly update, so
> finding the last good index and when something might have broken won't
> be possible.
>
> Could it be caused by a hardware problem? It's possible there were
> some problems on the same server before. But I imagined it would be
> completely broken (even for search) if it was a hardware issue.
>
> -
> Cristian Vat
>
> On Wed, Oct 20, 2010 at 22:22, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> This looks like index corruption.
>>
>> But: are you able to reproduce this corruption, eg on different
>> machines? =A0I'd love to see how :)
>>
>> Your usage (using addIndexesNoOptimize to add indices) looks fine.
>>
>> Mike
>>
>> On Wed, Oct 20, 2010 at 2:45 PM, Cristian Vat <cristian.vat@gmail.com> w=
rote:
>>> Hello,
>>>
>>> I've been running into a problem during a merge. Would appreciate
>>> knowing what to look for since the exception doesn't seem too
>>> explanatory.
>>>
>>> I get:
>>> --
>>> --- Nested Exception ---
>>> java.io.IOException: background merge hit exception: _2p:c695204
>>> _2q:c93106 into _2r [optimize] [mergeDocStores]
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWri=
ter.java:2908)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWri=
ter.java:2843)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWri=
ter.java:2813)
>>> =A0 =A0 =A0 =A0...application code...
>>> Caused by: org.apache.lucene.index.CorruptIndexException: docs out of
>>> order (64570 <=3D 64570 )
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.FormatPostingsDocsWriter.addD=
oc(FormatPostingsDocsWriter.java:75)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.appendPostings(=
SegmentMerger.java:703)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTermInfos(=
SegmentMerger.java:648)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTerms(Segm=
entMerger.java:586)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.merge(SegmentMe=
rger.java:154)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.mergeMiddle(Index=
Writer.java:5112)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter=
.java:4675)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler.doMe=
rge(ConcurrentMergeScheduler.java:235)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler$Merg=
eThread.run(ConcurrentMergeScheduler.java:291)
>>> --
>>>
>>> I have two indexes, first I delete some documents from the second one
>>> and then use IndexWriter.addIndexesNoOptimize() and
>>> IndexWriter.optimize() to add all of the first index to the second
>>> one.
>>> Everything works fine if I don't call optimize()
>>> Using lucene 2.9.3. I get the same problem on windows and linux with
>>> different java versions.
>>>
>>> Also, the same code ran without problems for some months, but today
>>> with the indexes I have it consistently fails.
>>>
>>> I opened the target index with Luke and ran Check Index and I do get
>>> an error but I don't know exactly what causes it:
>>> --
>>> =A0test: terms, freq, prox...ERROR [term fulltext:instructions: doc
>>> 260628: pos -405712460 is out of bounds]
>>> java.lang.RuntimeException: term fulltext:instructions: doc 260628:
>>> pos -405712460 is out of bounds
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.testTermIndex(Chec=
kIndex.java:657)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIn=
dex.java:530)
>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIn=
dex.java:319)
>>> =A0 =A0 =A0 =A0at org.getopt.luke.Luke$6.run(Unknown Source)
>>> --
>>>
>>> Thanks for any help.
>>> -
>>> Cristian Vat
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 20:19:56 2010
Return-Path: <java-user-return-47573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40003 invoked from network); 20 Oct 2010 20:19:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 20:19:56 -0000
Received: (qmail 35647 invoked by uid 500); 20 Oct 2010 20:19:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35609 invoked by uid 500); 20 Oct 2010 20:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35601 invoked by uid 99); 20 Oct 2010 20:19:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:19:53 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cristian.vat@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:19:48 +0000
Received: by iwn3 with SMTP id 3so4671581iwn.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 13:19:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=iIfvj50DsS/iOPiRh7VZ9YLtn27HKO2B7twx8XEVxbI=;
        b=h2bL2A1yr54AlP68N1TOxx1sMVx5TT5kf9FhwRzzlAl5uerrwlNmZPh/Lkv3guam7h
         PangW/ssxYsvnyi7g/CZ66f/2S/ylXhxnK7Gie2argPIN27C/AM7l0O5+KmeEnZgYbAn
         nuoSLq+vbcIynX6ujJ4GxTY+ta+polw4IP9i8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=vF6zMfYl+92CWb7w+0mxuGhGDSL5CtGoXg03TJHdO7Vs6kWHEA6Csygpj7asf8Z1pl
         AcTsE1j6TbdqO08qRJI8Pvxd2bU5N8Oxv3UrVk/w7scHaFV3ld1xcc+q+jAbJDSbrL8k
         B07l3WZaV/JlibHtKZb76PMDzbO0sxKx+/X8Y=
MIME-Version: 1.0
Received: by 10.231.35.131 with SMTP id p3mr6778214ibd.177.1287605968118; Wed,
 20 Oct 2010 13:19:28 -0700 (PDT)
Received: by 10.231.35.139 with HTTP; Wed, 20 Oct 2010 13:19:28 -0700 (PDT)
In-Reply-To: <AANLkTik1aoJvD9yYHALCQ5F2BhiY85Z3mWtfaPF4YuLG@mail.gmail.com>
References: <AANLkTikH78W_VZBTJemVWxJEmc_WSmit+XeT2DjZX_Ax@mail.gmail.com>
	<AANLkTim1KaMa-5OY1znkXWBgmCPygDA1sMutP61KyDQH@mail.gmail.com>
	<AANLkTimNUx2EhmpXC4ZJAztukF9cx0thursaY03TReOQ@mail.gmail.com>
	<AANLkTik1aoJvD9yYHALCQ5F2BhiY85Z3mWtfaPF4YuLG@mail.gmail.com>
Date: Wed, 20 Oct 2010 23:19:28 +0300
Message-ID: <AANLkTinfs-+Zeemnee0X98FwMV=M1ruF6SaTq9TKEDWJ@mail.gmail.com>
Subject: Re: problem during index merge
From: Cristian Vat <cristian.vat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Unfortunately my target index is fully optimized so only one segment.
So CheckIndex won't be useful.

I'll reindex from scratch and also check for hardware issues.
Hopefully it won't get corrupted again.

Thanks for your help.

-
Cristian Vat

On Wed, Oct 20, 2010 at 22:58, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Not recoverable automatically.
>
> But you can run CheckIndex -fix -- it removes the segment(s) that has
> the corruption (losing all docs in that segment).
>
> Searches appear fine because we don't do this check ("docs out of
> order") during searching, but results are likely wrong when they hit
> that segment(s).
>
> Hardware issues can definitely cause this -- eg if RAM or IO system is
> flipping bits occasionally that can cause such corruption.
>
> But if it's repeatable on different machines then there's a bug here ;)
>
> Mike
>
> On Wed, Oct 20, 2010 at 3:37 PM, Cristian Vat <cristian.vat@gmail.com> wr=
ote:
>> Corruption in the sense that it isn't recoverable or is there
>> something I might be able to do?
>>
>> The index opens up without problems in Luke and there's an application
>> using it for searching without problems (apparently)
>>
>> It's actually an application with a (possibly) hourly update, so
>> finding the last good index and when something might have broken won't
>> be possible.
>>
>> Could it be caused by a hardware problem? It's possible there were
>> some problems on the same server before. But I imagined it would be
>> completely broken (even for search) if it was a hardware issue.
>>
>> -
>> Cristian Vat
>>
>> On Wed, Oct 20, 2010 at 22:22, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> This looks like index corruption.
>>>
>>> But: are you able to reproduce this corruption, eg on different
>>> machines? =A0I'd love to see how :)
>>>
>>> Your usage (using addIndexesNoOptimize to add indices) looks fine.
>>>
>>> Mike
>>>
>>> On Wed, Oct 20, 2010 at 2:45 PM, Cristian Vat <cristian.vat@gmail.com> =
wrote:
>>>> Hello,
>>>>
>>>> I've been running into a problem during a merge. Would appreciate
>>>> knowing what to look for since the exception doesn't seem too
>>>> explanatory.
>>>>
>>>> I get:
>>>> --
>>>> --- Nested Exception ---
>>>> java.io.IOException: background merge hit exception: _2p:c695204
>>>> _2q:c93106 into _2r [optimize] [mergeDocStores]
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2908)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2843)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2813)
>>>> =A0 =A0 =A0 =A0...application code...
>>>> Caused by: org.apache.lucene.index.CorruptIndexException: docs out of
>>>> order (64570 <=3D 64570 )
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.FormatPostingsDocsWriter.add=
Doc(FormatPostingsDocsWriter.java:75)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.appendPostings=
(SegmentMerger.java:703)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTermInfos=
(SegmentMerger.java:648)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.mergeTerms(Seg=
mentMerger.java:586)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentMerger.merge(SegmentM=
erger.java:154)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.mergeMiddle(Inde=
xWriter.java:5112)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWrite=
r.java:4675)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler.doM=
erge(ConcurrentMergeScheduler.java:235)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler$Mer=
geThread.run(ConcurrentMergeScheduler.java:291)
>>>> --
>>>>
>>>> I have two indexes, first I delete some documents from the second one
>>>> and then use IndexWriter.addIndexesNoOptimize() and
>>>> IndexWriter.optimize() to add all of the first index to the second
>>>> one.
>>>> Everything works fine if I don't call optimize()
>>>> Using lucene 2.9.3. I get the same problem on windows and linux with
>>>> different java versions.
>>>>
>>>> Also, the same code ran without problems for some months, but today
>>>> with the indexes I have it consistently fails.
>>>>
>>>> I opened the target index with Luke and ran Check Index and I do get
>>>> an error but I don't know exactly what causes it:
>>>> --
>>>> =A0test: terms, freq, prox...ERROR [term fulltext:instructions: doc
>>>> 260628: pos -405712460 is out of bounds]
>>>> java.lang.RuntimeException: term fulltext:instructions: doc 260628:
>>>> pos -405712460 is out of bounds
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.testTermIndex(Che=
ckIndex.java:657)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckI=
ndex.java:530)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckI=
ndex.java:319)
>>>> =A0 =A0 =A0 =A0at org.getopt.luke.Luke$6.run(Unknown Source)
>>>> --
>>>>
>>>> Thanks for any help.
>>>> -
>>>> Cristian Vat
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 20:22:06 2010
Return-Path: <java-user-return-47574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40467 invoked from network); 20 Oct 2010 20:22:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 20:22:05 -0000
Received: (qmail 41940 invoked by uid 500); 20 Oct 2010 20:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41895 invoked by uid 500); 20 Oct 2010 20:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41887 invoked by uid 99); 20 Oct 2010 20:22:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:22:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Oct 2010 20:22:02 +0000
Received: (qmail 40413 invoked by uid 99); 20 Oct 2010 20:21:42 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:21:42 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Using a TermFreqVector to get counts of all words in a document
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <006e01cb7088$05fc38f0$11f4aad0$@pipex.com>
Date: Wed, 20 Oct 2010 16:20:13 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de> <006e01cb7088$05fc38f0$11f4aad0$@pipex.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)


On Oct 20, 2010, at 2:53 PM, Martin O'Shea wrote:

> Uwe
>=20
> Thanks - I figured that bit out. I'm a Lucene 'newbie'.
>=20
> What I would like to know though is if it is practical to search a =
single
> document of one field simply by doing this:
>=20
> IndexReader trd =3D IndexReader.open(index);
>        TermFreqVector tfv =3D trd.getTermFreqVector(docId, "title");
>        String[] terms =3D tfv.getTerms();
>        int[] freqs =3D tfv.getTermFrequencies();
>        for (int i =3D 0; i < tfv.getTerms().length; i++) {
>            System.out.println("Term " + terms[i] + " Freq: " + =
freqs[i]);
>        }
>        trd.close();
>=20
> where docId is set to 0.
>=20
> The code works but can this be improved upon at all?
>=20
> My situation is where I don't want to calculate the number of =
documents with
> a particular string. Rather I want to get counts of individual words =
in a
> field in a document. So I can concatenate the strings before passing =
it to
> Lucene.

Can you describe the bigger problem you are trying to solve?  This looks =
like a classic XY problem: http://people.apache.org/~hossman/#xyproblem

What you are doing above will work OK for what you describe (up to the =
"passing it to Lucene" part), but you probably should explore the use of =
the TermVectorMapper which provides a callback mechanism (similar to a =
SAX parser) that will allow you to build your data structures on the fly =
instead of having to serialize them into two parallel arrays and then =
loop over those arrays to create some other structure.


--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 20:25:51 2010
Return-Path: <java-user-return-47575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41736 invoked from network); 20 Oct 2010 20:25:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 20:25:51 -0000
Received: (qmail 50053 invoked by uid 500); 20 Oct 2010 20:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49868 invoked by uid 500); 20 Oct 2010 20:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49860 invoked by uid 99); 20 Oct 2010 20:25:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:25:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pksinghus@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:25:41 +0000
Received: by iwn3 with SMTP id 3so4676869iwn.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 13:25:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=WvZ31jykQn5ZtiJr7AHI5fjmA6WEELQz15WyYsCjqZQ=;
        b=henmqcwekEen7H30C/gIErUxfGzWP4zxOOlBdMoFpE2jvLSU5qlTRCiJRKbGyRoY/z
         vzttwgetn3Z6zBd21K9TIhUfMMZCTyVdcDYFVCNB6VqMaXbfA/O03h74cG5O7VACLrFe
         jaTow3x1QICO4O0tSFb3Xs00HNBI0+1c/1kXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OWqQ/vw8vwfkeNjbCaU3Qd/pw3QBZI1nwZxq2KuFcv+ttlyuSMnm5k3yZtqC3S4be7
         GtqH2Y31oIOSYj+mH5B5gPGy8eM2ukQmoWWpiLzGJpdrDKiPp+CboaOJlT74TqbEdgET
         ga0siOo6BH7/0wdg9YKEHtaDiCIA9zagJDEfs=
MIME-Version: 1.0
Received: by 10.231.171.18 with SMTP id f18mr71332ibz.9.1287606320717; Wed, 20
 Oct 2010 13:25:20 -0700 (PDT)
Received: by 10.231.190.133 with HTTP; Wed, 20 Oct 2010 13:25:20 -0700 (PDT)
In-Reply-To: <800712.31053.qm@web120402.mail.ne1.yahoo.com>
References: <800712.31053.qm@web120402.mail.ne1.yahoo.com>
Date: Wed, 20 Oct 2010 13:25:20 -0700
Message-ID: <AANLkTimwp1XXB8JQv5oe2Vj46QydX66LFu=5upENxCAa@mail.gmail.com>
Subject: Re: Get number of hits for various combinations
From: Pradeep Singh <pksinghus@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d26c9a5b604e04931235e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d26c9a5b604e04931235e9
Content-Type: text/plain; charset=ISO-8859-1

Use Solr and look at faceting.

On Wed, Oct 20, 2010 at 9:12 AM, Bob Miller <bobdmic@yahoo.com> wrote:

> Dear all,
>
>
> I would like to use a tag cloud of keywords to narrow down the currently
> displayed search results. In order to implement this, it must be possible
> to
> determine the number of hits for the current search query combined with
> each
> keyword in the tag cloud.   What would be the most efficient method of
> doing
> this? The index currently contains about 500000 documents. It is possible
> to
> search within multiple fields.
>
> Thanks,
>
> Bob
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d26c9a5b604e04931235e9--

From java-user-return-47576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 20:40:40 2010
Return-Path: <java-user-return-47576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45192 invoked from network); 20 Oct 2010 20:40:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 20:40:40 -0000
Received: (qmail 72404 invoked by uid 500); 20 Oct 2010 20:40:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72222 invoked by uid 500); 20 Oct 2010 20:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72214 invoked by uid 99); 20 Oct 2010 20:40:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:40:37 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:40:29 +0000
Received: by wyg36 with SMTP id 36so3179308wyg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 13:40:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uZZSp96iSY727/1s2DGXLUaMduzhKLBx1ZG7z3y+Rnc=;
        b=TDPtJ4Od0hXYPmhHBK7Pow7AhxdteB5CxNN9+RP2G1uSSdLgpoZHLmzG0K/tBVUfB5
         jiubLzKjZpOXC+8G7RwnoXjcaVXTmrLR76a0cXZ7wVPvboSHvSstY4YFip/TQZgK+WRP
         pY0QlWAVJ0zrPRPoUiwvnDDhBrHtdkNWRF3mA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bB6OmRxQGRB0IF1OZv6h9EXsuPlFTGb2hH745859reY8gt/sj3aw3eTGtziVFtd9P2
         CjUuQQB43YtUswbj8qyc0E6VSxHUTZ0oyK4T31mC1lvaNwUhaJHV5udjgB0iTxROXljv
         ohmGxrpff670Kg9fVFia+ObnmWw+hJYwhUr0o=
MIME-Version: 1.0
Received: by 10.227.133.72 with SMTP id e8mr95405wbt.71.1287607209050; Wed, 20
 Oct 2010 13:40:09 -0700 (PDT)
Received: by 10.227.55.14 with HTTP; Wed, 20 Oct 2010 13:40:09 -0700 (PDT)
In-Reply-To: <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
Date: Wed, 20 Oct 2010 16:40:09 -0400
Message-ID: <AANLkTimtWa6AzXghpXzy+yx+m=astpZ7FkbZZTUh+VZE@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65ae1ba4e44930493126ae9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65ae1ba4e44930493126ae9
Content-Type: text/plain; charset=ISO-8859-1

If I were you, I would write like this.  Not sure this helps.   Let me how
it works

public static void createIndex() throws CorruptIndexException,
LockObtainFailedException, IOException {
       Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
       Directory indexDir = FSDirectory.open(new
File("/media/work/WIKI/indexes/"));
       boolean recreateIndexIfExists = true;
       IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);

       File dir = new File(FILES_TO_INDEX_DIRECTORY);
       File[] files = dir.listFiles();
       for (File file : files) {
           Document document = new Document();

           //String path = file.getCanonicalPath();
           document.add(new Field(FIELD_NAME, Field_Value, Field.Store.YES,
Field.Index.NOT_ANALYZED));
           indexWriter.addDocument(document);
       }
       indexWriter.close();
   }


Good Luck.
Qi Li


On Wed, Oct 20, 2010 at 2:45 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> with the different parameters I still got the same error. My code is very
> simple, indeed I am only concerned with creating the index and then I will
> do some private information retrieval experiments on the inverted index
> file, which I created with the information extracted from the index. That
> is
> why I didnt go over optimization until now. the database size I had was ery
> small compared to 4.5million.
> My code is as follows:
>
> public static void createIndex() throws CorruptIndexException,
> LockObtainFailedException, IOException {
>        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
>        Directory indexDir = FSDirectory.open(new
> File("/media/work/WIKI/indexes/"));
>        boolean recreateIndexIfExists = true;
>        IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
> recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
>        indexWriter.setUseCompoundFile(false);
>        File dir = new File(FILES_TO_INDEX_DIRECTORY);
>        File[] files = dir.listFiles();
>        for (File file : files) {
>            Document document = new Document();
>
>            //String path = file.getCanonicalPath();
>            //document.add(new Field(FIELD_PATH, path, Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>
>            Reader reader = new FileReader(file);
>            document.add(new Field(FIELD_CONTENTS, reader));
>
>            indexWriter.addDocument(document);
>        }
>        indexWriter.optimize();
>        indexWriter.close();
>     }
>
>
> On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:
>
> > 1. What is the difference when you used different vm parameters?
> > 2  What merge policy and optimization strategy did you use?
> > 3. How did you use the commit or flush ?
> >
> > Qi
> >
> > On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
> > sahin.buyrukbilen@gmail.com> wrote:
> >
> > > Thank you so much for this infor. it looks pretty complicated for me
> but
> > I
> > > will try.
> > >
> > >
> > >
> > > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <johnbin.wang@gmail.com
> > > >wrote:
> > >
> > > > You can start a fixedThreadPool to index all these files in the
> > multhread
> > > > way. Every thread execute an index task which could index a part of
> all
> > > the
> > > > files. In the index task, when indexing 10000 files, you need execute
> > the
> > > > indexWrite.commit() method to flush all the index add operation to
> disk
> > > > file.
> > > >
> > > > If you need index all these files into only one index file, you need
> to
> > > > hold
> > > > only one indexWriter instance among all the index thread.
> > > >
> > > > Hope it's helpful.
> > > >
> > > >
> > > >
> > > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> > > > sahin.buyrukbilen@gmail.com> wrote:
> > > >
> > > > > Thank you Johnbin,
> > > > > do you know which parameter I have to play with?
> > > > >
> > > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
> > johnbin.wang@gmail.com
> > > > > >wrote:
> > > > >
> > > > > > I think you can write index file once every 10,000 files or less
> > have
> > > > > been
> > > > > > read.
> > > > > >
> > > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > > > > sahin.buyrukbilen@gmail.com> wrote:
> > > > > >
> > > > > > > Hi all,
> > > > > > >
> > > > > > > I have to index about 4.5Million txt files. When I run the my
> > > > indexing
> > > > > > > application through Eclipse, I get this error : "Exception in
> > > thread
> > > > > > "main"
> > > > > > > java.lang.OutOfMemoryError: Java heap space"
> > > > > > >
> > > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > > > > >
> > > > > > > eclipse -vmargs -Xms40M -Xmx2G
> > > > > > >
> > > > > > >  I tried running Eclipse with above memory parameters, but
> still
> > > had
> > > > > the
> > > > > > > same error. The architecture of my computer is AMD x2 64bit
> 2GHz
> > > > > > processor,
> > > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > > > > >
> > > > > > > Anybody has a suggestion?
> > > > > > >
> > > > > > > thank you.
> > > > > > > Sahin.
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > cheers,
> > > > > > Johnbin Wang
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > cheers,
> > > > Johnbin Wang
> > > >
> > >
> >
>

--0016e65ae1ba4e44930493126ae9--

From java-user-return-47577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 20:41:20 2010
Return-Path: <java-user-return-47577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45382 invoked from network); 20 Oct 2010 20:41:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 20:41:20 -0000
Received: (qmail 74505 invoked by uid 500); 20 Oct 2010 20:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74384 invoked by uid 500); 20 Oct 2010 20:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74376 invoked by uid 99); 20 Oct 2010 20:41:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:41:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.38 as permitted sender)
Received: from [212.74.114.38] (HELO mk-outboundfilter-2.mail.uk.tiscali.com) (212.74.114.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 20:41:10 +0000
X-Trace: 372643753/mk-outboundfilter-2.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ah0MAPfwvkxRVnIp/2dsb2JhbACTZYxwenK/eIIagzAEhX6EBEmCeoRW
X-IronPort-AV: E=Sophos;i="4.57,356,1283727600"; 
   d="scan'208";a="372643753"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 20 Oct 2010 21:40:49 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de> <006e01cb7088$05fc38f0$11f4aad0$@pipex.com> <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org>
In-Reply-To: <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org>
Subject: RE: Using a TermFreqVector to get counts of all words in a document
Date: Wed, 20 Oct 2010 21:40:51 +0100
Message-ID: <000301cb7097$15eae7c0$41c0b740$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: ActwlHfx7uaq1Q38S7Cqj4+HvW/b4gAAlm+w
Content-Language: en-gb
X-Virus-Checked: Checked by ClamAV on apache.org

http://mail-archives.apache.org/mod_mbox/lucene-java-user/201010.mbox/%3c128
7065863.4cb711077458e@netmail.pipex.net%3e will give you a better idea of
what I'm moving towards.

It's all a bit grey at the moment so further investigation is inevitable.

I expect that a combination of MySQL database storage and Lucene indexing is
going to be the end result.



-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: 20 Oct 2010 21 20
To: java-user@lucene.apache.org
Subject: Re: Using a TermFreqVector to get counts of all words in a document


On Oct 20, 2010, at 2:53 PM, Martin O'Shea wrote:

> Uwe
> 
> Thanks - I figured that bit out. I'm a Lucene 'newbie'.
> 
> What I would like to know though is if it is practical to search a single
> document of one field simply by doing this:
> 
> IndexReader trd = IndexReader.open(index);
>        TermFreqVector tfv = trd.getTermFreqVector(docId, "title");
>        String[] terms = tfv.getTerms();
>        int[] freqs = tfv.getTermFrequencies();
>        for (int i = 0; i < tfv.getTerms().length; i++) {
>            System.out.println("Term " + terms[i] + " Freq: " + freqs[i]);
>        }
>        trd.close();
> 
> where docId is set to 0.
> 
> The code works but can this be improved upon at all?
> 
> My situation is where I don't want to calculate the number of documents
with
> a particular string. Rather I want to get counts of individual words in a
> field in a document. So I can concatenate the strings before passing it to
> Lucene.

Can you describe the bigger problem you are trying to solve?  This looks
like a classic XY problem: http://people.apache.org/~hossman/#xyproblem

What you are doing above will work OK for what you describe (up to the
"passing it to Lucene" part), but you probably should explore the use of the
TermVectorMapper which provides a callback mechanism (similar to a SAX
parser) that will allow you to build your data structures on the fly instead
of having to serialize them into two parallel arrays and then loop over
those arrays to create some other structure.


--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 20 21:47:46 2010
Return-Path: <java-user-return-47578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84384 invoked from network); 20 Oct 2010 21:47:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Oct 2010 21:47:45 -0000
Received: (qmail 83380 invoked by uid 500); 20 Oct 2010 21:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83340 invoked by uid 500); 20 Oct 2010 21:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83332 invoked by uid 99); 20 Oct 2010 21:47:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 21:47:43 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Oct 2010 21:47:35 +0000
Received: by qwg8 with SMTP id 8so2896193qwg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 14:47:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=tWaLTtTpuxSU8VDAMApTueHNUWZghSYzmBpTGWcxDZk=;
        b=xi4CdCt5+9j7UKSCfdpJmcGnsfCCIAstjzlmgGU2Gr1cY0+Ec8M2RmZscvH306Lgeh
         GSYW58YVDIJi1mo5luoVSKqdev1ZnhCHdHFLqooGJgVANs4zmxAMg6gNeWUoV1mW6/Mg
         KhrDwQS4S+KsfCziSro1vcujv/7YR3LeOmLP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tQxa81yp8/7bZYhKtiwES3c+6y2+oLX4wpY0Hrv92JVb3r0Ei/qVVBJ4ft20ZE1KrN
         dw8/pTjEO3gl2f77yO3yYeCnUK++2DzsDLzcdHnVd28oA+LeZ4ZfEYdpke4rxv8/NLf1
         NUZRzSGpdL8lhs/+7DdX0AKs1xVRabOoaWnWk=
MIME-Version: 1.0
Received: by 10.224.198.4 with SMTP id em4mr2935310qab.162.1287611234384; Wed,
 20 Oct 2010 14:47:14 -0700 (PDT)
Received: by 10.229.251.85 with HTTP; Wed, 20 Oct 2010 14:47:14 -0700 (PDT)
In-Reply-To: <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
Date: Wed, 20 Oct 2010 17:47:14 -0400
Message-ID: <AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fb24d3bfc4a0493135ae3
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fb24d3bfc4a0493135ae3
Content-Type: text/plain; charset=ISO-8859-1

My first guess is that you're accumulating too many documents in
before the flush gets triggered. The quick-n-dirty way to test this is
to do an IndexWriter.flush after every addDocument. This will slow
down indexing, but it will also tell you whether this is the problem and
you can look for more elegant solutions...

You can also get some stats by IndexWriter.getRamBufferSizeMB, and
can force automatic flushes given a particular ram buffer size via
IndexWriter.setRamBufferSizeMB.

One thing I'd be interested in is how big your files are. It might be, are
you trying to process a humongous file when it blows?

And if none of that helps, please post your stack trace.

Best
Erick

On Wed, Oct 20, 2010 at 2:45 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> with the different parameters I still got the same error. My code is very
> simple, indeed I am only concerned with creating the index and then I will
> do some private information retrieval experiments on the inverted index
> file, which I created with the information extracted from the index. That
> is
> why I didnt go over optimization until now. the database size I had was ery
> small compared to 4.5million.
> My code is as follows:
>
> public static void createIndex() throws CorruptIndexException,
> LockObtainFailedException, IOException {
>        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
>        Directory indexDir = FSDirectory.open(new
> File("/media/work/WIKI/indexes/"));
>        boolean recreateIndexIfExists = true;
>        IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
> recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
>        indexWriter.setUseCompoundFile(false);
>        File dir = new File(FILES_TO_INDEX_DIRECTORY);
>        File[] files = dir.listFiles();
>        for (File file : files) {
>            Document document = new Document();
>
>            //String path = file.getCanonicalPath();
>            //document.add(new Field(FIELD_PATH, path, Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>
>            Reader reader = new FileReader(file);
>            document.add(new Field(FIELD_CONTENTS, reader));
>
>            indexWriter.addDocument(document);
>        }
>        indexWriter.optimize();
>        indexWriter.close();
>     }
>
>
> On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:
>
> > 1. What is the difference when you used different vm parameters?
> > 2  What merge policy and optimization strategy did you use?
> > 3. How did you use the commit or flush ?
> >
> > Qi
> >
> > On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
> > sahin.buyrukbilen@gmail.com> wrote:
> >
> > > Thank you so much for this infor. it looks pretty complicated for me
> but
> > I
> > > will try.
> > >
> > >
> > >
> > > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <johnbin.wang@gmail.com
> > > >wrote:
> > >
> > > > You can start a fixedThreadPool to index all these files in the
> > multhread
> > > > way. Every thread execute an index task which could index a part of
> all
> > > the
> > > > files. In the index task, when indexing 10000 files, you need execute
> > the
> > > > indexWrite.commit() method to flush all the index add operation to
> disk
> > > > file.
> > > >
> > > > If you need index all these files into only one index file, you need
> to
> > > > hold
> > > > only one indexWriter instance among all the index thread.
> > > >
> > > > Hope it's helpful.
> > > >
> > > >
> > > >
> > > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> > > > sahin.buyrukbilen@gmail.com> wrote:
> > > >
> > > > > Thank you Johnbin,
> > > > > do you know which parameter I have to play with?
> > > > >
> > > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
> > johnbin.wang@gmail.com
> > > > > >wrote:
> > > > >
> > > > > > I think you can write index file once every 10,000 files or less
> > have
> > > > > been
> > > > > > read.
> > > > > >
> > > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > > > > sahin.buyrukbilen@gmail.com> wrote:
> > > > > >
> > > > > > > Hi all,
> > > > > > >
> > > > > > > I have to index about 4.5Million txt files. When I run the my
> > > > indexing
> > > > > > > application through Eclipse, I get this error : "Exception in
> > > thread
> > > > > > "main"
> > > > > > > java.lang.OutOfMemoryError: Java heap space"
> > > > > > >
> > > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > > > > >
> > > > > > > eclipse -vmargs -Xms40M -Xmx2G
> > > > > > >
> > > > > > >  I tried running Eclipse with above memory parameters, but
> still
> > > had
> > > > > the
> > > > > > > same error. The architecture of my computer is AMD x2 64bit
> 2GHz
> > > > > > processor,
> > > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > > > > >
> > > > > > > Anybody has a suggestion?
> > > > > > >
> > > > > > > thank you.
> > > > > > > Sahin.
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > cheers,
> > > > > > Johnbin Wang
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > cheers,
> > > > Johnbin Wang
> > > >
> > >
> >
>

--20cf300fb24d3bfc4a0493135ae3--

From java-user-return-47579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 03:01:38 2010
Return-Path: <java-user-return-47579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84222 invoked from network); 21 Oct 2010 03:01:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 03:01:38 -0000
Received: (qmail 98281 invoked by uid 500); 21 Oct 2010 03:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98249 invoked by uid 500); 21 Oct 2010 03:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98241 invoked by uid 99); 21 Oct 2010 03:01:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:01:35 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:01:27 +0000
Received: by wwb18 with SMTP id 18so3686072wwb.5
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 20:01:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=OXegOn8DcaLRj8Xbj51TyNzkMVr0lIz0PTxwKJHLAJ8=;
        b=wh9aePmFKakCRkfUCUIl8itpw9yVcH5moXeM2qk9jHxDIOvi7ApbmQTgn0YKhEfuYU
         kZTYL0RMSQWOaMkXgll6ueUjhCiS+N/CXTdlmQzS8Puww602T/8kqNriD7MJ1SFhMPyC
         YDJDhv5My2GA2Qz7TspN+BOrhreep1nF2Cb1U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Z2cref3xbMNBQMcjLYgRfIHZW0WOUNbQskufoIqpB0sMBYZa+DhzJ000/pyM7Po6xZ
         bBzeJB6BrLg1SMM80h4upQXo0O4/+ieuFS7Dl0IJwI7ACrlZEgktKOBWiWfNWWlHGWff
         Ok12ggTXYysp6DH3/8fa4I48ZFOjIJq4diZYY=
MIME-Version: 1.0
Received: by 10.216.10.69 with SMTP id 47mr289508weu.86.1287630066629; Wed, 20
 Oct 2010 20:01:06 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Wed, 20 Oct 2010 20:01:06 -0700 (PDT)
In-Reply-To: <AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	<AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
Date: Wed, 20 Oct 2010 23:01:06 -0400
Message-ID: <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636498ad1b93bb2049317bc95
X-Virus-Checked: Checked by ClamAV on apache.org

--001636498ad1b93bb2049317bc95
Content-Type: text/plain; charset=ISO-8859-1

Unfortunately both methods didnt go through. I am getting memory error even
at reading the directory contents.

Now, I am thinking this: What if I split 4.5million files into 100.000 (or
less depending on java error) files directories, index each of them
separately and merge those indexes(if possible).

Any suggestions?

On Wed, Oct 20, 2010 at 5:47 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> My first guess is that you're accumulating too many documents in
> before the flush gets triggered. The quick-n-dirty way to test this is
> to do an IndexWriter.flush after every addDocument. This will slow
> down indexing, but it will also tell you whether this is the problem and
> you can look for more elegant solutions...
>
> You can also get some stats by IndexWriter.getRamBufferSizeMB, and
> can force automatic flushes given a particular ram buffer size via
> IndexWriter.setRamBufferSizeMB.
>
> One thing I'd be interested in is how big your files are. It might be, are
> you trying to process a humongous file when it blows?
>
> And if none of that helps, please post your stack trace.
>
> Best
> Erick
>
> On Wed, Oct 20, 2010 at 2:45 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > with the different parameters I still got the same error. My code is very
> > simple, indeed I am only concerned with creating the index and then I
> will
> > do some private information retrieval experiments on the inverted index
> > file, which I created with the information extracted from the index. That
> > is
> > why I didnt go over optimization until now. the database size I had was
> ery
> > small compared to 4.5million.
> > My code is as follows:
> >
> > public static void createIndex() throws CorruptIndexException,
> > LockObtainFailedException, IOException {
> >        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
> >        Directory indexDir = FSDirectory.open(new
> > File("/media/work/WIKI/indexes/"));
> >        boolean recreateIndexIfExists = true;
> >        IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
> > recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
> >        indexWriter.setUseCompoundFile(false);
> >        File dir = new File(FILES_TO_INDEX_DIRECTORY);
> >        File[] files = dir.listFiles();
> >        for (File file : files) {
> >            Document document = new Document();
> >
> >            //String path = file.getCanonicalPath();
> >            //document.add(new Field(FIELD_PATH, path, Field.Store.YES,
> > Field.Index.NOT_ANALYZED));
> >
> >            Reader reader = new FileReader(file);
> >            document.add(new Field(FIELD_CONTENTS, reader));
> >
> >            indexWriter.addDocument(document);
> >        }
> >        indexWriter.optimize();
> >        indexWriter.close();
> >     }
> >
> >
> > On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:
> >
> > > 1. What is the difference when you used different vm parameters?
> > > 2  What merge policy and optimization strategy did you use?
> > > 3. How did you use the commit or flush ?
> > >
> > > Qi
> > >
> > > On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
> > > sahin.buyrukbilen@gmail.com> wrote:
> > >
> > > > Thank you so much for this infor. it looks pretty complicated for me
> > but
> > > I
> > > > will try.
> > > >
> > > >
> > > >
> > > > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <
> johnbin.wang@gmail.com
> > > > >wrote:
> > > >
> > > > > You can start a fixedThreadPool to index all these files in the
> > > multhread
> > > > > way. Every thread execute an index task which could index a part of
> > all
> > > > the
> > > > > files. In the index task, when indexing 10000 files, you need
> execute
> > > the
> > > > > indexWrite.commit() method to flush all the index add operation to
> > disk
> > > > > file.
> > > > >
> > > > > If you need index all these files into only one index file, you
> need
> > to
> > > > > hold
> > > > > only one indexWriter instance among all the index thread.
> > > > >
> > > > > Hope it's helpful.
> > > > >
> > > > >
> > > > >
> > > > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
> > > > > sahin.buyrukbilen@gmail.com> wrote:
> > > > >
> > > > > > Thank you Johnbin,
> > > > > > do you know which parameter I have to play with?
> > > > > >
> > > > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
> > > johnbin.wang@gmail.com
> > > > > > >wrote:
> > > > > >
> > > > > > > I think you can write index file once every 10,000 files or
> less
> > > have
> > > > > > been
> > > > > > > read.
> > > > > > >
> > > > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
> > > > > > > sahin.buyrukbilen@gmail.com> wrote:
> > > > > > >
> > > > > > > > Hi all,
> > > > > > > >
> > > > > > > > I have to index about 4.5Million txt files. When I run the my
> > > > > indexing
> > > > > > > > application through Eclipse, I get this error : "Exception in
> > > > thread
> > > > > > > "main"
> > > > > > > > java.lang.OutOfMemoryError: Java heap space"
> > > > > > > >
> > > > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
> > > > > > > >
> > > > > > > > eclipse -vmargs -Xms40M -Xmx2G
> > > > > > > >
> > > > > > > >  I tried running Eclipse with above memory parameters, but
> > still
> > > > had
> > > > > > the
> > > > > > > > same error. The architecture of my computer is AMD x2 64bit
> > 2GHz
> > > > > > > processor,
> > > > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
> > > > > > > >
> > > > > > > > Anybody has a suggestion?
> > > > > > > >
> > > > > > > > thank you.
> > > > > > > > Sahin.
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > cheers,
> > > > > > > Johnbin Wang
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > cheers,
> > > > > Johnbin Wang
> > > > >
> > > >
> > >
> >
>

--001636498ad1b93bb2049317bc95--

From java-user-return-47580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 03:02:23 2010
Return-Path: <java-user-return-47580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84546 invoked from network); 21 Oct 2010 03:02:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 03:02:23 -0000
Received: (qmail 593 invoked by uid 500); 21 Oct 2010 03:02:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 402 invoked by uid 500); 21 Oct 2010 03:02:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 393 invoked by uid 99); 21 Oct 2010 03:02:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:02:21 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:02:12 +0000
Received: by wyg36 with SMTP id 36so3499214wyg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 20:01:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=TCDQOqKzc6L9nrvjzL4tigrPk282Rymx6bpR3Zryhb0=;
        b=oWFa/mEgmCWxnt0NMcs7sIuzR/+c82ApQA45ZGIndSk9LPZY9lfqdKyQyyCjvvwZwm
         2RASS5BuaBxjVknIh1Gw8wW2Q6+JhGKadhBoFzi3iWyYt/zjxJxX1LNhYPWBkiyWJfad
         xgH/jhFvOG3Bx1h2rPOXb+ZYNvL0ij7pdNBgw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kEou0UVn7MMaoiBjwOh8cl8ipd6ommjiRWSQMai0Zo2Hibk8rs+SYcDxne7EQzCBZV
         p2VrYZ2K8Tq/M16JM5KNHxr+aOx+36zpuSRHtzi02T5AeJq8bWCbepzaLNvIHPbeibJD
         fAHUK01MrfXtr6L3fvK7LYrtmKoG665Dtucoc=
MIME-Version: 1.0
Received: by 10.227.155.6 with SMTP id q6mr399951wbw.141.1287630111896; Wed,
 20 Oct 2010 20:01:51 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Wed, 20 Oct 2010 20:01:51 -0700 (PDT)
In-Reply-To: <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	<AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
	<AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
Date: Wed, 20 Oct 2010 23:01:51 -0400
Message-ID: <AANLkTimmPA_AmTgue4qytgrJ6ixoq2y=M_DX8mEoBK=4@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636833c3a6bf312049317bf5a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636833c3a6bf312049317bf5a
Content-Type: text/plain; charset=ISO-8859-1

by the ways file size is not big. mostly 1kB. I  am working on wikipedia
articles in txt format.

On Wed, Oct 20, 2010 at 11:01 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Unfortunately both methods didnt go through. I am getting memory error even
> at reading the directory contents.
>
> Now, I am thinking this: What if I split 4.5million files into 100.000 (or
> less depending on java error) files directories, index each of them
> separately and merge those indexes(if possible).
>
> Any suggestions?
>
>
> On Wed, Oct 20, 2010 at 5:47 PM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> My first guess is that you're accumulating too many documents in
>> before the flush gets triggered. The quick-n-dirty way to test this is
>> to do an IndexWriter.flush after every addDocument. This will slow
>> down indexing, but it will also tell you whether this is the problem and
>> you can look for more elegant solutions...
>>
>> You can also get some stats by IndexWriter.getRamBufferSizeMB, and
>> can force automatic flushes given a particular ram buffer size via
>> IndexWriter.setRamBufferSizeMB.
>>
>> One thing I'd be interested in is how big your files are. It might be, are
>> you trying to process a humongous file when it blows?
>>
>> And if none of that helps, please post your stack trace.
>>
>> Best
>> Erick
>>
>> On Wed, Oct 20, 2010 at 2:45 PM, Sahin Buyrukbilen <
>> sahin.buyrukbilen@gmail.com> wrote:
>>
>> > with the different parameters I still got the same error. My code is
>> very
>> > simple, indeed I am only concerned with creating the index and then I
>> will
>> > do some private information retrieval experiments on the inverted index
>> > file, which I created with the information extracted from the index.
>> That
>> > is
>> > why I didnt go over optimization until now. the database size I had was
>> ery
>> > small compared to 4.5million.
>> > My code is as follows:
>> >
>> > public static void createIndex() throws CorruptIndexException,
>> > LockObtainFailedException, IOException {
>> >        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
>> >        Directory indexDir = FSDirectory.open(new
>> > File("/media/work/WIKI/indexes/"));
>> >        boolean recreateIndexIfExists = true;
>> >        IndexWriter indexWriter = new IndexWriter(indexDir, analyzer,
>> > recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
>> >        indexWriter.setUseCompoundFile(false);
>> >        File dir = new File(FILES_TO_INDEX_DIRECTORY);
>> >        File[] files = dir.listFiles();
>> >        for (File file : files) {
>> >            Document document = new Document();
>> >
>> >            //String path = file.getCanonicalPath();
>> >            //document.add(new Field(FIELD_PATH, path, Field.Store.YES,
>> > Field.Index.NOT_ANALYZED));
>> >
>> >            Reader reader = new FileReader(file);
>> >            document.add(new Field(FIELD_CONTENTS, reader));
>> >
>> >            indexWriter.addDocument(document);
>> >        }
>> >        indexWriter.optimize();
>> >        indexWriter.close();
>> >     }
>> >
>> >
>> > On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:
>> >
>> > > 1. What is the difference when you used different vm parameters?
>> > > 2  What merge policy and optimization strategy did you use?
>> > > 3. How did you use the commit or flush ?
>> > >
>> > > Qi
>> > >
>> > > On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
>> > > sahin.buyrukbilen@gmail.com> wrote:
>> > >
>> > > > Thank you so much for this infor. it looks pretty complicated for me
>> > but
>> > > I
>> > > > will try.
>> > > >
>> > > >
>> > > >
>> > > > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <
>> johnbin.wang@gmail.com
>> > > > >wrote:
>> > > >
>> > > > > You can start a fixedThreadPool to index all these files in the
>> > > multhread
>> > > > > way. Every thread execute an index task which could index a part
>> of
>> > all
>> > > > the
>> > > > > files. In the index task, when indexing 10000 files, you need
>> execute
>> > > the
>> > > > > indexWrite.commit() method to flush all the index add operation to
>> > disk
>> > > > > file.
>> > > > >
>> > > > > If you need index all these files into only one index file, you
>> need
>> > to
>> > > > > hold
>> > > > > only one indexWriter instance among all the index thread.
>> > > > >
>> > > > > Hope it's helpful.
>> > > > >
>> > > > >
>> > > > >
>> > > > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
>> > > > > sahin.buyrukbilen@gmail.com> wrote:
>> > > > >
>> > > > > > Thank you Johnbin,
>> > > > > > do you know which parameter I have to play with?
>> > > > > >
>> > > > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
>> > > johnbin.wang@gmail.com
>> > > > > > >wrote:
>> > > > > >
>> > > > > > > I think you can write index file once every 10,000 files or
>> less
>> > > have
>> > > > > > been
>> > > > > > > read.
>> > > > > > >
>> > > > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
>> > > > > > > sahin.buyrukbilen@gmail.com> wrote:
>> > > > > > >
>> > > > > > > > Hi all,
>> > > > > > > >
>> > > > > > > > I have to index about 4.5Million txt files. When I run the
>> my
>> > > > > indexing
>> > > > > > > > application through Eclipse, I get this error : "Exception
>> in
>> > > > thread
>> > > > > > > "main"
>> > > > > > > > java.lang.OutOfMemoryError: Java heap space"
>> > > > > > > >
>> > > > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
>> > > > > > > >
>> > > > > > > > eclipse -vmargs -Xms40M -Xmx2G
>> > > > > > > >
>> > > > > > > >  I tried running Eclipse with above memory parameters, but
>> > still
>> > > > had
>> > > > > > the
>> > > > > > > > same error. The architecture of my computer is AMD x2 64bit
>> > 2GHz
>> > > > > > > processor,
>> > > > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
>> > > > > > > >
>> > > > > > > > Anybody has a suggestion?
>> > > > > > > >
>> > > > > > > > thank you.
>> > > > > > > > Sahin.
>> > > > > > > >
>> > > > > > >
>> > > > > > >
>> > > > > > >
>> > > > > > > --
>> > > > > > > cheers,
>> > > > > > > Johnbin Wang
>> > > > > > >
>> > > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > --
>> > > > > cheers,
>> > > > > Johnbin Wang
>> > > > >
>> > > >
>> > >
>> >
>>
>
>

--001636833c3a6bf312049317bf5a--

From java-user-return-47581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 03:38:47 2010
Return-Path: <java-user-return-47581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98672 invoked from network); 21 Oct 2010 03:38:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 03:38:47 -0000
Received: (qmail 26003 invoked by uid 500); 21 Oct 2010 03:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25827 invoked by uid 500); 21 Oct 2010 03:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25313 invoked by uid 99); 21 Oct 2010 03:38:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:38:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 03:38:36 +0000
Received: by qwg8 with SMTP id 8so3174566qwg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 20:38:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=ubD3xnmeRTmDsnpxoWm+heN2JXhDlBxVEdkSuUp4K+U=;
        b=PRnqvcZ2dYcGu3yPb7lA70L0Hk27ZbEzzq13eUmIWDQdZu2Ac9rnXjKHmiCy44+Aun
         TK8zLwi0Upa5zbQGVSeN/mac0KyH1rfkvSb7NUiR1zCBLj97vdfFm/8qB4kiNPaWOyOO
         5VN7TQBWocdEJd6NIl0jjAs7lwjSw5FsCSefo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=fOHtT5ezruj3wa9hsau46c2we9cn9k/eqzXSx7XxzsEsiyt+EFJdy0i9iRDnDFnfgZ
         dJ+iIz3WRVBAZxryV83bAlPoz+WxtMNih0jVOVo+qggo9O9qZ/4QVBMe6OoU74xK8nu9
         3vbt0NuT6oygaGrXHS1590MkMs5/PSEAFe+lc=
Received: by 10.229.238.193 with SMTP id kt1mr187581qcb.292.1287632295497;
 Wed, 20 Oct 2010 20:38:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Wed, 20 Oct 2010 20:37:55 -0700 (PDT)
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Wed, 20 Oct 2010 20:37:55 -0700
Message-ID: <AANLkTikXxCfatt56o4=fgdN2D9aCBtw2ehY64T5ZQkrc@mail.gmail.com>
Subject: assign a id to document?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f9220c930f61049318413e
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f9220c930f61049318413e
Content-Type: text/plain; charset=ISO-8859-1

I understand lucene provides its own document id. can we assign this id in
any way?

--001485f9220c930f61049318413e--

From java-user-return-47582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 04:31:11 2010
Return-Path: <java-user-return-47582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9699 invoked from network); 21 Oct 2010 04:31:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 04:31:11 -0000
Received: (qmail 46057 invoked by uid 500); 21 Oct 2010 04:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45745 invoked by uid 500); 21 Oct 2010 04:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45737 invoked by uid 99); 21 Oct 2010 04:31:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 04:31:07 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 04:31:02 +0000
Received: by wyg36 with SMTP id 36so3558698wyg.35
        for <java-user@lucene.apache.org>; Wed, 20 Oct 2010 21:30:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=lRXoKim8qqcA0sZ6PKd0LftD+LuuuTC2A1EKE0B1wAc=;
        b=NxBF2TAhFA6xjLl2OpSHuSZ7w7XKOdEQZs8lP6Lop7JH8bw3Ne3zgSaHcx/Gi0NO4G
         xzmcligzcsMjEblAM/rUQRvT9HL7hTA9QVr6QePBnGWGGZFXey/sJhF+YvYvV8g7VH44
         PdKshUKjUaHnzyhvoOFidn/fqh6Ig4TUbTKSU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=dIWpxjc7SjHPTACzCHC5OOk5mO6Erz+QDIDaUDDfio1r3X15ai6+5EgRsmk1g62B5l
         LB3gtexJAgZCTlGKbSG+7D/uqhC2Ghm1XdNupT9WisF74pvcHyApsEDxzlLLwEWhWxLH
         LuJH0p1+ax/ejGWLypM8zU8uvHPa7MULGmmQM=
Received: by 10.227.136.72 with SMTP id q8mr255183wbt.52.1287635439851; Wed,
 20 Oct 2010 21:30:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.69.8 with HTTP; Wed, 20 Oct 2010 21:30:19 -0700 (PDT)
In-Reply-To: <AANLkTikXxCfatt56o4=fgdN2D9aCBtw2ehY64T5ZQkrc@mail.gmail.com>
References: <AANLkTikXxCfatt56o4=fgdN2D9aCBtw2ehY64T5ZQkrc@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Thu, 21 Oct 2010 10:00:19 +0530
Message-ID: <AANLkTinD8C9RWqTFnFR8Fzko+AprsJHDuLW2r7f9bSXL@mail.gmail.com>
Subject: Re: assign a id to document?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fb7adfe1e41049318fc64

--0016367fb7adfe1e41049318fc64
Content-Type: text/plain; charset=ISO-8859-1

Hi Nilesh,
No you can't do that. Though you may store your own id as a separate field
for whatever purpose you want. I don't see any reason why you'd essentially
want to override the lucene document id with your own. Let me know in case
there's something I didn't get.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Thu, Oct 21, 2010 at 9:07 AM, Nilesh Vijaywargiay <nilesh.vijay@gmail.com
> wrote:

> I understand lucene provides its own document id. can we assign this id in
> any way?
>

--0016367fb7adfe1e41049318fc64--

From java-user-return-47583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 08:40:04 2010
Return-Path: <java-user-return-47583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81562 invoked from network); 21 Oct 2010 08:40:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 08:40:04 -0000
Received: (qmail 57591 invoked by uid 500); 21 Oct 2010 08:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57549 invoked by uid 500); 21 Oct 2010 08:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57541 invoked by uid 99); 21 Oct 2010 08:40:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 08:40:01 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 08:39:53 +0000
Received: by qyk29 with SMTP id 29so3439688qyk.14
        for <java-user@lucene.apache.org>; Thu, 21 Oct 2010 01:39:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=mK10KIjvDVEYIyJUcKof4gvVpYSPKVf5a8LRYdd6n78=;
        b=icI3nvceyUpEjRgEunpp2209PzFWFlVKaMF3o0VWs6tClEUA+SHekLbkblR6AmrttB
         /bTFVxoGOY0FLcmvvYcNeGdv2yizSpTpeypZDb9aO55SjpiP3Mm8OSxt+WSh6rysIoTK
         tA3anW75iL2iKuDs44Enph9eLFKWHUebmQVVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=QK925oMXVtXlGZICTg1sQBZ6hfbKySgPQ+vnC3baHvvfYhVEMe/OYfpnB52NYNxXOG
         sTWM+sIfYw7bHGq0dD/xV+cLNqax4jpkVPKoJx7DbzdooRx+jWJ6Cev+VoW0t2M98/3k
         mmybOrM1ihMAAcKsmEsO0pYpC8R4Y9VWsMYvk=
Received: by 10.229.219.74 with SMTP id ht10mr483404qcb.270.1287650372292;
 Thu, 21 Oct 2010 01:39:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.51.18 with HTTP; Thu, 21 Oct 2010 01:39:11 -0700 (PDT)
In-Reply-To: <AANLkTimmPA_AmTgue4qytgrJ6ixoq2y=M_DX8mEoBK=4@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
 <AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
 <AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
 <AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
 <AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
 <AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
 <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
 <AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
 <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com> <AANLkTimmPA_AmTgue4qytgrJ6ixoq2y=M_DX8mEoBK=4@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 21 Oct 2010 09:39:11 +0100
Message-ID: <AANLkTimhS__T2=EHAy1Texm3B=g58htj6=CVUM1CL0qs@mail.gmail.com>
Subject: Re: how to index large number of files?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe mostly 1K, but you only need 1 very large doc to cause a problem.

I haven't been following this thread, so apologies if I've missed
things, but you seem to be having problems running what should be a
simple job of the sort that lucene handles every day without  breaking
sweat.

Does it always fail on the same doc or after indexing the same number
of docs?  What exactly is the exception and stack trace?  Are you sure
the problem is with your lucene calls, not something else you are
doing in the same program?

Cutting things down to the smallest, simplest possible standalone
program or test case that demonstrates the problem often helps.  If
you do that and can't find the problem yourself, post the code here
along with the stack trace and details such as how many docs it
processes before failure and the size of the doc it fails on.


--
Ian.

On Thu, Oct 21, 2010 at 4:01 AM, Sahin Buyrukbilen
<sahin.buyrukbilen@gmail.com> wrote:
> by the ways file size is not big. mostly 1kB. I =A0am working on wikipedi=
a
> articles in txt format.
>
> On Wed, Oct 20, 2010 at 11:01 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
>> Unfortunately both methods didnt go through. I am getting memory error e=
ven
>> at reading the directory contents.
>>
>> Now, I am thinking this: What if I split 4.5million files into 100.000 (=
or
>> less depending on java error) files directories, index each of them
>> separately and merge those indexes(if possible).
>>
>> Any suggestions?
>>
>>
>> On Wed, Oct 20, 2010 at 5:47 PM, Erick Erickson <erickerickson@gmail.com=
>wrote:
>>
>>> My first guess is that you're accumulating too many documents in
>>> before the flush gets triggered. The quick-n-dirty way to test this is
>>> to do an IndexWriter.flush after every addDocument. This will slow
>>> down indexing, but it will also tell you whether this is the problem an=
d
>>> you can look for more elegant solutions...
>>>
>>> You can also get some stats by IndexWriter.getRamBufferSizeMB, and
>>> can force automatic flushes given a particular ram buffer size via
>>> IndexWriter.setRamBufferSizeMB.
>>>
>>> One thing I'd be interested in is how big your files are. It might be, =
are
>>> you trying to process a humongous file when it blows?
>>>
>>> And if none of that helps, please post your stack trace.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Oct 20, 2010 at 2:45 PM, Sahin Buyrukbilen <
>>> sahin.buyrukbilen@gmail.com> wrote:
>>>
>>> > with the different parameters I still got the same error. My code is
>>> very
>>> > simple, indeed I am only concerned with creating the index and then I
>>> will
>>> > do some private information retrieval experiments on the inverted ind=
ex
>>> > file, which I created with the information extracted from the index.
>>> That
>>> > is
>>> > why I didnt go over optimization until now. the database size I had w=
as
>>> ery
>>> > small compared to 4.5million.
>>> > My code is as follows:
>>> >
>>> > public static void createIndex() throws CorruptIndexException,
>>> > LockObtainFailedException, IOException {
>>> > =A0 =A0 =A0 =A0Analyzer analyzer =3D new StandardAnalyzer(Version.LUC=
ENE_30);
>>> > =A0 =A0 =A0 =A0Directory indexDir =3D FSDirectory.open(new
>>> > File("/media/work/WIKI/indexes/"));
>>> > =A0 =A0 =A0 =A0boolean recreateIndexIfExists =3D true;
>>> > =A0 =A0 =A0 =A0IndexWriter indexWriter =3D new IndexWriter(indexDir, =
analyzer,
>>> > recreateIndexIfExists, IndexWriter.MaxFieldLength.UNLIMITED);
>>> > =A0 =A0 =A0 =A0indexWriter.setUseCompoundFile(false);
>>> > =A0 =A0 =A0 =A0File dir =3D new File(FILES_TO_INDEX_DIRECTORY);
>>> > =A0 =A0 =A0 =A0File[] files =3D dir.listFiles();
>>> > =A0 =A0 =A0 =A0for (File file : files) {
>>> > =A0 =A0 =A0 =A0 =A0 =A0Document document =3D new Document();
>>> >
>>> > =A0 =A0 =A0 =A0 =A0 =A0//String path =3D file.getCanonicalPath();
>>> > =A0 =A0 =A0 =A0 =A0 =A0//document.add(new Field(FIELD_PATH, path, Fie=
ld.Store.YES,
>>> > Field.Index.NOT_ANALYZED));
>>> >
>>> > =A0 =A0 =A0 =A0 =A0 =A0Reader reader =3D new FileReader(file);
>>> > =A0 =A0 =A0 =A0 =A0 =A0document.add(new Field(FIELD_CONTENTS, reader)=
);
>>> >
>>> > =A0 =A0 =A0 =A0 =A0 =A0indexWriter.addDocument(document);
>>> > =A0 =A0 =A0 =A0}
>>> > =A0 =A0 =A0 =A0indexWriter.optimize();
>>> > =A0 =A0 =A0 =A0indexWriter.close();
>>> > =A0 =A0 }
>>> >
>>> >
>>> > On Wed, Oct 20, 2010 at 2:39 PM, Qi Li <alertli@gmail.com> wrote:
>>> >
>>> > > 1. What is the difference when you used different vm parameters?
>>> > > 2 =A0What merge policy and optimization strategy did you use?
>>> > > 3. How did you use the commit or flush ?
>>> > >
>>> > > Qi
>>> > >
>>> > > On Wed, Oct 20, 2010 at 2:05 PM, Sahin Buyrukbilen <
>>> > > sahin.buyrukbilen@gmail.com> wrote:
>>> > >
>>> > > > Thank you so much for this infor. it looks pretty complicated for=
 me
>>> > but
>>> > > I
>>> > > > will try.
>>> > > >
>>> > > >
>>> > > >
>>> > > > On Wed, Oct 20, 2010 at 1:18 AM, Johnbin Wang <
>>> johnbin.wang@gmail.com
>>> > > > >wrote:
>>> > > >
>>> > > > > You can start a fixedThreadPool to index all these files in the
>>> > > multhread
>>> > > > > way. Every thread execute an index task which could index a par=
t
>>> of
>>> > all
>>> > > > the
>>> > > > > files. In the index task, when indexing 10000 files, you need
>>> execute
>>> > > the
>>> > > > > indexWrite.commit() method to flush all the index add operation=
 to
>>> > disk
>>> > > > > file.
>>> > > > >
>>> > > > > If you need index all these files into only one index file, you
>>> need
>>> > to
>>> > > > > hold
>>> > > > > only one indexWriter instance among all the index thread.
>>> > > > >
>>> > > > > Hope it's helpful.
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > > On Wed, Oct 20, 2010 at 1:05 PM, Sahin Buyrukbilen <
>>> > > > > sahin.buyrukbilen@gmail.com> wrote:
>>> > > > >
>>> > > > > > Thank you Johnbin,
>>> > > > > > do you know which parameter I have to play with?
>>> > > > > >
>>> > > > > > On Wed, Oct 20, 2010 at 12:59 AM, Johnbin Wang <
>>> > > johnbin.wang@gmail.com
>>> > > > > > >wrote:
>>> > > > > >
>>> > > > > > > I think you can write index file once every 10,000 files or
>>> less
>>> > > have
>>> > > > > > been
>>> > > > > > > read.
>>> > > > > > >
>>> > > > > > > On Wed, Oct 20, 2010 at 12:11 PM, Sahin Buyrukbilen <
>>> > > > > > > sahin.buyrukbilen@gmail.com> wrote:
>>> > > > > > >
>>> > > > > > > > Hi all,
>>> > > > > > > >
>>> > > > > > > > I have to index about 4.5Million txt files. When I run th=
e
>>> my
>>> > > > > indexing
>>> > > > > > > > application through Eclipse, I get this error : "Exceptio=
n
>>> in
>>> > > > thread
>>> > > > > > > "main"
>>> > > > > > > > java.lang.OutOfMemoryError: Java heap space"
>>> > > > > > > >
>>> > > > > > > > eclipse -vmargs -Xmx2000m -Xss8192k
>>> > > > > > > >
>>> > > > > > > > eclipse -vmargs -Xms40M -Xmx2G
>>> > > > > > > >
>>> > > > > > > > =A0I tried running Eclipse with above memory parameters, =
but
>>> > still
>>> > > > had
>>> > > > > > the
>>> > > > > > > > same error. The architecture of my computer is AMD x2 64b=
it
>>> > 2GHz
>>> > > > > > > processor,
>>> > > > > > > > Ubuntu 10.04 LTS 64bit. java-6-openjdk.
>>> > > > > > > >
>>> > > > > > > > Anybody has a suggestion?
>>> > > > > > > >
>>> > > > > > > > thank you.
>>> > > > > > > > Sahin.
>>> > > > > > > >
>>> > > > > > >
>>> > > > > > >
>>> > > > > > >
>>> > > > > > > --
>>> > > > > > > cheers,
>>> > > > > > > Johnbin Wang
>>> > > > > > >
>>> > > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > > --
>>> > > > > cheers,
>>> > > > > Johnbin Wang
>>> > > > >
>>> > > >
>>> > >
>>> >
>>>
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 08:57:54 2010
Return-Path: <java-user-return-47584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85242 invoked from network); 21 Oct 2010 08:57:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 08:57:54 -0000
Received: (qmail 72884 invoked by uid 500); 21 Oct 2010 08:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72745 invoked by uid 500); 21 Oct 2010 08:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72737 invoked by uid 99); 21 Oct 2010 08:57:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 08:57:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 08:57:44 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Thu, 21 Oct 2010 10:57:23 +0200
Subject: Re: how to index large number of files?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	 <AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	 <AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	 <AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	 <AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	 <AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	 <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	 <AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
	 <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Thu, 21 Oct 2010 10:57:04 +0200
Message-ID: <1287651424.16365.87.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Thu, 2010-10-21 at 05:01 +0200, Sahin Buyrukbilen wrote:
> Unfortunately both methods didnt go through. I am getting memory error even
> at reading the directory contents.

Then your problem is probably not Lucene related, but the sheer number
of files returned by listFiles.

A Java File contains the full path name for the file. Let's say that
this is 50 characters, which translates to about (50 * 2 + 45) ~ 150
bytes for the Java String. Add an int (4 bytes) plus bookkeeping and
we're up to about 200 bytes/File.

4.5 million Files thus takes up about 1 GB. Not enough to explain the
OOM, but if the full path name of your files is 150 characters, the list
takes up 2 GB.

> Now, I am thinking this: What if I split 4.5million files into 100.000 (or
> less depending on java error) files directories, index each of them
> separately and merge those indexes(if possible).

You don't need to create separate indexes and merge them. Just split
your 4.5 million files into folders of more manageable sizes and perform
a recursive descend. Something like

public static void addFolder(IndexWriter writer, File folder) {
 File[] files = folder.listFiles();
 for (File file: files) {
    if (file.isDirectory()) {
      addFolder(writer, file);
    } else {
      // Create Document from file and add it using the writer
    }
  }
}

- Toke


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 10:51:44 2010
Return-Path: <java-user-return-47585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22268 invoked from network); 21 Oct 2010 10:51:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 10:51:43 -0000
Received: (qmail 13279 invoked by uid 500); 21 Oct 2010 10:51:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13134 invoked by uid 500); 21 Oct 2010 10:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13123 invoked by uid 99); 21 Oct 2010 10:51:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 10:51:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Oct 2010 10:51:39 +0000
Received: (qmail 22177 invoked by uid 99); 21 Oct 2010 10:51:18 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 10:51:18 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Using a TermFreqVector to get counts of all words in a document
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <000301cb7097$15eae7c0$41c0b740$@pipex.com>
Date: Thu, 21 Oct 2010 06:51:16 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <A774790A-C976-44FF-B747-04844BCA94BC@apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de> <006e01cb7088$05fc38f0$11f4aad0$@pipex.com> <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org> <000301cb7097$15eae7c0$41c0b740$@pipex.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)


On Oct 20, 2010, at 4:40 PM, Martin O'Shea wrote:

> =
http://mail-archives.apache.org/mod_mbox/lucene-java-user/201010.mbox/%3c1=
28
> 7065863.4cb711077458e@netmail.pipex.net%3e will give you a better idea =
of
> what I'm moving towards.
>=20
> It's all a bit grey at the moment so further investigation is =
inevitable.
>=20
> I expect that a combination of MySQL database storage and Lucene =
indexing is
> going to be the end result.

I'd likely take the TermVectorMapper approach, but otherwise, yeah, I =
think you are on the right track.


>=20
>=20
>=20
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
> Sent: 20 Oct 2010 21 20
> To: java-user@lucene.apache.org
> Subject: Re: Using a TermFreqVector to get counts of all words in a =
document
>=20
>=20
> On Oct 20, 2010, at 2:53 PM, Martin O'Shea wrote:
>=20
>> Uwe
>>=20
>> Thanks - I figured that bit out. I'm a Lucene 'newbie'.
>>=20
>> What I would like to know though is if it is practical to search a =
single
>> document of one field simply by doing this:
>>=20
>> IndexReader trd =3D IndexReader.open(index);
>>       TermFreqVector tfv =3D trd.getTermFreqVector(docId, "title");
>>       String[] terms =3D tfv.getTerms();
>>       int[] freqs =3D tfv.getTermFrequencies();
>>       for (int i =3D 0; i < tfv.getTerms().length; i++) {
>>           System.out.println("Term " + terms[i] + " Freq: " + =
freqs[i]);
>>       }
>>       trd.close();
>>=20
>> where docId is set to 0.
>>=20
>> The code works but can this be improved upon at all?
>>=20
>> My situation is where I don't want to calculate the number of =
documents
> with
>> a particular string. Rather I want to get counts of individual words =
in a
>> field in a document. So I can concatenate the strings before passing =
it to
>> Lucene.
>=20
> Can you describe the bigger problem you are trying to solve?  This =
looks
> like a classic XY problem: =
http://people.apache.org/~hossman/#xyproblem
>=20
> What you are doing above will work OK for what you describe (up to the
> "passing it to Lucene" part), but you probably should explore the use =
of the
> TermVectorMapper which provides a callback mechanism (similar to a SAX
> parser) that will allow you to build your data structures on the fly =
instead
> of having to serialize them into two parallel arrays and then loop =
over
> those arrays to create some other structure.
>=20
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 11:48:18 2010
Return-Path: <java-user-return-47586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42956 invoked from network); 21 Oct 2010 11:48:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 11:48:18 -0000
Received: (qmail 77142 invoked by uid 500); 21 Oct 2010 11:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77096 invoked by uid 500); 21 Oct 2010 11:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77088 invoked by uid 99); 21 Oct 2010 11:48:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 11:48:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.9 as permitted sender)
Received: from [212.74.114.9] (HELO mk-outboundfilter-5-a-3.mail.uk.tiscali.com) (212.74.114.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 11:48:06 +0000
X-Trace: 318363757/mk-outboundfilter-5.mail.uk.tiscali.com/PIPEX/$PIPEX-MX-ACCEPTED/pipex-infrastructure/193.61.44.46/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 193.61.44.46
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Pipex Webmail (IMP3.1)
X-IP-BHB: Once
X-IP-Webmail: TRUE
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEABPFv0zBPSwu/2dsb2JhbADiZYIagzAEhX6EBIND
X-IronPort-AV: E=Sophos;i="4.58,216,1286146800"; 
   d="scan'208";a="318363757"
X-IP-Direction: IN
Received: from netmail.pipex.net (HELO mk-netmail-1.mail.uk.tiscali.com) ([212.74.100.20])
  by smtp.pipex.tiscali.co.uk with ESMTP/TLS/DHE-RSA-AES256-SHA; 21 Oct 2010 12:47:45 +0100
Received: from mk-netmail-1.mail.uk.tiscali.com (localhost.localdomain [127.0.0.1])
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8) with ESMTP id o9LBljx4010333
	for <java-user@lucene.apache.org>; Thu, 21 Oct 2010 12:47:45 +0100
Received: (from apache@localhost)
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8/Submit) id o9LBljDx010332
	for java-user@lucene.apache.org; Thu, 21 Oct 2010 12:47:45 +0100
Received: from 193.61.44.46 ( [193.61.44.46])
	as user appy74@dsl.pipex.com by netmail.pipex.net with HTTP;
	Thu, 21 Oct 2010 12:47:45 +0100
Message-ID: <1287661665.4cc028618e7a7@netmail.pipex.net>
Date: Thu, 21 Oct 2010 12:47:45 +0100
From: appy74@dsl.pipex.com
To: java-user@lucene.apache.org
Subject: Re: Using a TermFreqVector to get counts of all words in a document
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de> <006e01cb7088$05fc38f0$11f4aad0$@pipex.com> <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org> <000301cb7097$15eae7c0$41c0b740$@pipex.com> <A774790A-C976-44FF-B747-04844BCA94BC@apache.org>
In-Reply-To: <A774790A-C976-44FF-B747-04844BCA94BC@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Pipex Webmail (IMP3.1)
X-Originating-IP: 193.61.44.46
X-Pipex-Username: appy74@dsl.pipex.com
X-Usage: Pipex Webmail is subject to the standard Pipex terms and conditions of use
X-Virus-Checked: Checked by ClamAV on apache.org

Would you have an example of this or be able to point me in the direction of an example at all?

Quoting Grant Ingersoll <gsingers@apache.org>:

> 
> On Oct 20, 2010, at 4:40 PM, Martin O'Shea wrote:
> 
> >
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/201010.mbox/%3c128
> > 7065863.4cb711077458e@netmail.pipex.net%3e will give you a better idea of
> > what I'm moving towards.
> > 
> > It's all a bit grey at the moment so further investigation is inevitable.
> > 
> > I expect that a combination of MySQL database storage and Lucene indexing
> is
> > going to be the end result.
> 
> I'd likely take the TermVectorMapper approach, but otherwise, yeah, I think
> you are on the right track.
> 
> 
> > 
> > 
> > 
> > -----Original Message-----
> > From: Grant Ingersoll [mailto:gsingers@apache.org] 
> > Sent: 20 Oct 2010 21 20
> > To: java-user@lucene.apache.org
> > Subject: Re: Using a TermFreqVector to get counts of all words in a
> document
> > 
> > 
> > On Oct 20, 2010, at 2:53 PM, Martin O'Shea wrote:
> > 
> >> Uwe
> >> 
> >> Thanks - I figured that bit out. I'm a Lucene 'newbie'.
> >> 
> >> What I would like to know though is if it is practical to search a single
> >> document of one field simply by doing this:
> >> 
> >> IndexReader trd = IndexReader.open(index);
> >>       TermFreqVector tfv = trd.getTermFreqVector(docId, "title");
> >>       String[] terms = tfv.getTerms();
> >>       int[] freqs = tfv.getTermFrequencies();
> >>       for (int i = 0; i < tfv.getTerms().length; i++) {
> >>           System.out.println("Term " + terms[i] + " Freq: " + freqs[i]);
> >>       }
> >>       trd.close();
> >> 
> >> where docId is set to 0.
> >> 
> >> The code works but can this be improved upon at all?
> >> 
> >> My situation is where I don't want to calculate the number of documents
> > with
> >> a particular string. Rather I want to get counts of individual words in a
> >> field in a document. So I can concatenate the strings before passing it
> to
> >> Lucene.
> > 
> > Can you describe the bigger problem you are trying to solve?  This looks
> > like a classic XY problem: http://people.apache.org/~hossman/#xyproblem
> > 
> > What you are doing above will work OK for what you describe (up to the
> > "passing it to Lucene" part), but you probably should explore the use of
> the
> > TermVectorMapper which provides a callback mechanism (similar to a SAX
> > parser) that will allow you to build your data structures on the fly
> instead
> > of having to serialize them into two parallel arrays and then loop over
> > those arrays to create some other structure.
> > 
> > 
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


-- 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 19:26:43 2010
Return-Path: <java-user-return-47587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41250 invoked from network); 21 Oct 2010 19:26:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 19:26:43 -0000
Received: (qmail 48345 invoked by uid 500); 21 Oct 2010 19:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48274 invoked by uid 500); 21 Oct 2010 19:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48266 invoked by uid 99); 21 Oct 2010 19:26:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 19:26:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 19:26:34 +0000
Received: by wwb34 with SMTP id 34so84698wwb.5
        for <java-user@lucene.apache.org>; Thu, 21 Oct 2010 12:26:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=DYNEA7nBYWQK5mZZ6tcDzY0nrQNmBvI5SMwwM2S6k0Q=;
        b=Rx94R7kHBnz4NXRR/KLJpBtozuHTpaow6jKhGzAegDTK3zpR2krDCHqgajm3Zdbh6p
         5RaEfh7xMH5niterlkkUUTmch9+wZwFZ9AYlcKuRNGnIbVJLB5hgas/+FORE8ZPXsLhd
         FkynRo6uTkvGngv64fT6ZmEIVIGZnRaww5VBs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qPLaW3PW1bkSpwqcZZNM1mzuZ29k+BQOmo0Tt6plKxfMVZQe4K2pns1MNmSRHRmdby
         QIGir4CkO38ROCwkSJqGstz5JbqZ6eeIulRxCXeiaLFVkGyclsrcgjBThKTC2yFrb2iJ
         TsLwqn7fDKqvNY/w2m/kxYH03nYDPPLiKHi+k=
MIME-Version: 1.0
Received: by 10.227.134.149 with SMTP id j21mr1540780wbt.194.1287689173366;
 Thu, 21 Oct 2010 12:26:13 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Thu, 21 Oct 2010 12:26:13 -0700 (PDT)
In-Reply-To: <1287651424.16365.87.camel@te-prime>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	<AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
	<AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
	<1287651424.16365.87.camel@te-prime>
Date: Thu, 21 Oct 2010 15:26:13 -0400
Message-ID: <AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Content-Type: multipart/alternative; boundary=001636832e64c279df0493257f7a

--001636832e64c279df0493257f7a
Content-Type: text/plain; charset=ISO-8859-1

I dont know why I am getting this error, but it looks normal to me now.
because when I try to list the contents of the folder  I cannot get a
response from linux shell. Now I have created a folder with 100.000 files
and running eclipse with -Xmx2G parameter. it is still indexing for about 15
minutes now, but I am happy it works.

After this I will try Toke's method. Create 100.000 filed folders and try to
index them recursively.

On Thu, Oct 21, 2010 at 4:57 AM, Toke Eskildsen <te@statsbiblioteket.dk>wrote:

> On Thu, 2010-10-21 at 05:01 +0200, Sahin Buyrukbilen wrote:
> > Unfortunately both methods didnt go through. I am getting memory error
> even
> > at reading the directory contents.
>
> Then your problem is probably not Lucene related, but the sheer number
> of files returned by listFiles.
>
> A Java File contains the full path name for the file. Let's say that
> this is 50 characters, which translates to about (50 * 2 + 45) ~ 150
> bytes for the Java String. Add an int (4 bytes) plus bookkeeping and
> we're up to about 200 bytes/File.
>
> 4.5 million Files thus takes up about 1 GB. Not enough to explain the
> OOM, but if the full path name of your files is 150 characters, the list
> takes up 2 GB.
>
> > Now, I am thinking this: What if I split 4.5million files into 100.000
> (or
> > less depending on java error) files directories, index each of them
> > separately and merge those indexes(if possible).
>
> You don't need to create separate indexes and merge them. Just split
> your 4.5 million files into folders of more manageable sizes and perform
> a recursive descend. Something like
>
> public static void addFolder(IndexWriter writer, File folder) {
>  File[] files = folder.listFiles();
>  for (File file: files) {
>    if (file.isDirectory()) {
>      addFolder(writer, file);
>    } else {
>      // Create Document from file and add it using the writer
>    }
>  }
> }
>
> - Toke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636832e64c279df0493257f7a--

From java-user-return-47588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 21 19:36:01 2010
Return-Path: <java-user-return-47588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45361 invoked from network); 21 Oct 2010 19:36:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Oct 2010 19:36:01 -0000
Received: (qmail 76313 invoked by uid 500); 21 Oct 2010 19:35:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76145 invoked by uid 500); 21 Oct 2010 19:35:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76137 invoked by uid 99); 21 Oct 2010 19:35:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 19:35:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robert.cadena@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Oct 2010 19:35:53 +0000
Received: by ywt2 with SMTP id 2so19218ywt.35
        for <java-user@lucene.apache.org>; Thu, 21 Oct 2010 12:35:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:references:from
         :content-type:x-mailer:in-reply-to:message-id:date:to
         :content-transfer-encoding:mime-version;
        bh=D3toSaRA8GIEdwGygBoW8iDu7sh27ZMFAQhxxRlgoM8=;
        b=fiyMhvKmKLQ2/t36wFDTjuqkkTAg3zinRBPjCAkNmiCoyqQnhQ4zj6odFbPXjFhwps
         80y18o0Nao8fv60rzocscPMNQiCHopfBVtMbGWwT3MdDxpOMtdNcx3ut7/VXlD/kdujj
         96gU9JSVpIfr4FyU5LtsDLnzAy/goq2+74AEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:references:from:content-type:x-mailer:in-reply-to
         :message-id:date:to:content-transfer-encoding:mime-version;
        b=JXHRRQz6QnZuuaPnLGYAkJtuJFIsJqMVcY9d6swSfsq+OZhGXVPVcPP2XHdInxHf8W
         ZKf7sz2JeHU16G9JTvZbp+7qjuGgSsVmrCcz6PRnc2L5yqWwKJExuOKacurFnFiEQLC8
         a8DcaSciwyGe5QnmQ/lQqynDS41mckAmOGNCg=
Received: by 10.150.177.17 with SMTP id z17mr4363409ybe.170.1287689731901;
        Thu, 21 Oct 2010 12:35:31 -0700 (PDT)
Received: from [192.168.20.102] (pool-72-67-93-43.lsanca.dsl-w.verizon.net [72.67.93.43])
        by mx.google.com with ESMTPS id c8sm1533141yha.13.2010.10.21.12.35.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 21 Oct 2010 12:35:29 -0700 (PDT)
Subject: Re: how to index large number of files?
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com> <AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com> <AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com> <AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com> <AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com> <AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com> <AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com> <AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com> <AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com> <1287651424.16365.87.camel@te-prime> <AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
From: Robert Cadena <robert.cadena@gmail.com>
Content-Type: text/plain;
	charset=us-ascii
X-Mailer: iPhone Mail (8B117)
In-Reply-To: <AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
Message-Id: <DF2D82A7-7A51-4E73-9581-8C34D9DBCD3E@gmail.com>
Date: Thu, 21 Oct 2010 12:34:39 -0700
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (iPhone Mail 8B117)

Take a look at this question and associated answer over on stackoverflow:

http://stackoverflow.com/questions/354703/is-there-a-workaround-for-javas-po=
or-performance-on-walking-huge-directories

It's not all inside java but it might work for you and you might not have to=
 restructure your files.=20



Sent from my iPhone

On Oct 21, 2010, at 12:26 PM, Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com=
> wrote:

> I dont know why I am getting this error, but it looks normal to me now.
> because when I try to list the contents of the folder  I cannot get a
> response from linux shell. Now I have created a folder with 100.000 files
> and running eclipse with -Xmx2G parameter. it is still indexing for about 1=
5
> minutes now, but I am happy it works.
>=20
> After this I will try Toke's method. Create 100.000 filed folders and try t=
o
> index them recursively.
>=20
> On Thu, Oct 21, 2010 at 4:57 AM, Toke Eskildsen <te@statsbiblioteket.dk>wr=
ote:
>=20
>> On Thu, 2010-10-21 at 05:01 +0200, Sahin Buyrukbilen wrote:
>>> Unfortunately both methods didnt go through. I am getting memory error
>> even
>>> at reading the directory contents.
>>=20
>> Then your problem is probably not Lucene related, but the sheer number
>> of files returned by listFiles.
>>=20
>> A Java File contains the full path name for the file. Let's say that
>> this is 50 characters, which translates to about (50 * 2 + 45) ~ 150
>> bytes for the Java String. Add an int (4 bytes) plus bookkeeping and
>> we're up to about 200 bytes/File.
>>=20
>> 4.5 million Files thus takes up about 1 GB. Not enough to explain the
>> OOM, but if the full path name of your files is 150 characters, the list
>> takes up 2 GB.
>>=20
>>> Now, I am thinking this: What if I split 4.5million files into 100.000
>> (or
>>> less depending on java error) files directories, index each of them
>>> separately and merge those indexes(if possible).
>>=20
>> You don't need to create separate indexes and merge them. Just split
>> your 4.5 million files into folders of more manageable sizes and perform
>> a recursive descend. Something like
>>=20
>> public static void addFolder(IndexWriter writer, File folder) {
>> File[] files =3D folder.listFiles();
>> for (File file: files) {
>>   if (file.isDirectory()) {
>>     addFolder(writer, file);
>>   } else {
>>     // Create Document from file and add it using the writer
>>   }
>> }
>> }
>>=20
>> - Toke
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 22 13:22:38 2010
Return-Path: <java-user-return-47589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65286 invoked from network); 22 Oct 2010 13:22:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Oct 2010 13:22:37 -0000
Received: (qmail 36676 invoked by uid 500); 22 Oct 2010 13:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36352 invoked by uid 500); 22 Oct 2010 13:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36335 invoked by uid 99); 22 Oct 2010 13:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 13:22:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 13:22:24 +0000
Received: by gxk24 with SMTP id 24so675347gxk.35
        for <java-user@lucene.apache.org>; Fri, 22 Oct 2010 06:22:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Ev8BL+moqo3Ql/yVHZ68wbJwyQCSjrrwMmq5wg6LJ/A=;
        b=U79Kbw2Wx/Q9VpDXWjP8gZiSIxJ/uiRQ83xCtb1dclxUcAP6Jk310EeyAMNsAtJTh7
         AvG4kbaQUSiYHvR1W0aacJrmS+/+SWQvuGx65dWQnTWPpGW8Rv3aJ0998ygKzAOP7tY6
         yXNJa79o/BMc65d2NbgHuRgSh0Js7a0MpZZug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kN2rjOgOH2byfyBHIsDBfyiGoI8Q5eTOosXEwME61Cm72KPM+5+C5ZL5DJyHYpxtdz
         ambA7UWMARIBE6LGD8r9TeACk/3g7RTTNQGtaxQoAQmYuRWkECJE12eAP8uyurR11kIs
         wBXLipmxR0IBE0C4nWl6/dKPOplnGYEnTzp/A=
MIME-Version: 1.0
Received: by 10.151.48.13 with SMTP id a13mr6012017ybk.55.1287753723105; Fri,
 22 Oct 2010 06:22:03 -0700 (PDT)
Received: by 10.151.153.4 with HTTP; Fri, 22 Oct 2010 06:22:02 -0700 (PDT)
In-Reply-To: <AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	<AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
	<AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
	<1287651424.16365.87.camel@te-prime>
	<AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
Date: Fri, 22 Oct 2010 09:22:02 -0400
Message-ID: <AANLkTikE9or6jAc+S3fQD2Qu=QWE8jfGKZS-pAYYpPyq@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c0ec839589304933487c4

--0015174c0ec839589304933487c4
Content-Type: text/plain; charset=ISO-8859-1

> running eclipse with -Xmx2G parameter.

This only affects the Eclipse JVM, not the JVM launched by Eclipse to run
your application.
Did you add -Xmx2G to the 'VM arguments' of your Debug or Run configuration?

Peter

On Thu, Oct 21, 2010 at 3:26 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> I dont know why I am getting this error, but it looks normal to me now.
> because when I try to list the contents of the folder  I cannot get a
> response from linux shell. Now I have created a folder with 100.000 files
> and running eclipse with -Xmx2G parameter. it is still indexing for about
> 15
> minutes now, but I am happy it works.
>
> After this I will try Toke's method. Create 100.000 filed folders and try
> to
> index them recursively.
>
> On Thu, Oct 21, 2010 at 4:57 AM, Toke Eskildsen <te@statsbiblioteket.dk
> >wrote:
>
> > On Thu, 2010-10-21 at 05:01 +0200, Sahin Buyrukbilen wrote:
> > > Unfortunately both methods didnt go through. I am getting memory error
> > even
> > > at reading the directory contents.
> >
> > Then your problem is probably not Lucene related, but the sheer number
> > of files returned by listFiles.
> >
> > A Java File contains the full path name for the file. Let's say that
> > this is 50 characters, which translates to about (50 * 2 + 45) ~ 150
> > bytes for the Java String. Add an int (4 bytes) plus bookkeeping and
> > we're up to about 200 bytes/File.
> >
> > 4.5 million Files thus takes up about 1 GB. Not enough to explain the
> > OOM, but if the full path name of your files is 150 characters, the list
> > takes up 2 GB.
> >
> > > Now, I am thinking this: What if I split 4.5million files into 100.000
> > (or
> > > less depending on java error) files directories, index each of them
> > > separately and merge those indexes(if possible).
> >
> > You don't need to create separate indexes and merge them. Just split
> > your 4.5 million files into folders of more manageable sizes and perform
> > a recursive descend. Something like
> >
> > public static void addFolder(IndexWriter writer, File folder) {
> >  File[] files = folder.listFiles();
> >  for (File file: files) {
> >    if (file.isDirectory()) {
> >      addFolder(writer, file);
> >    } else {
> >      // Create Document from file and add it using the writer
> >    }
> >  }
> > }
> >
> > - Toke
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--0015174c0ec839589304933487c4--

From java-user-return-47590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 22 14:09:37 2010
Return-Path: <java-user-return-47590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84809 invoked from network); 22 Oct 2010 14:09:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Oct 2010 14:09:36 -0000
Received: (qmail 7568 invoked by uid 500); 22 Oct 2010 14:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7456 invoked by uid 500); 22 Oct 2010 14:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7448 invoked by uid 99); 22 Oct 2010 14:09:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 14:09:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Oct 2010 14:09:28 +0000
Received: (qmail 84686 invoked by uid 99); 22 Oct 2010 14:09:06 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 14:09:06 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Using a TermFreqVector to get counts of all words in a document
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <1287661665.4cc028618e7a7@netmail.pipex.net>
Date: Fri, 22 Oct 2010 10:09:04 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <8567C827-8B53-4289-B809-B747A7F30D05@apache.org>
References: <006001cb7083$d25abde0$771039a0$@pipex.com> <013c01cb7086$245b8fa0$6d12aee0$@thetaphi.de> <006e01cb7088$05fc38f0$11f4aad0$@pipex.com> <2A9868DB-6AF6-4387-9BA7-8D0CD373B5D7@apache.org> <000301cb7097$15eae7c0$41c0b740$@pipex.com> <A774790A-C976-44FF-B747-04844BCA94BC@apache.org> <1287661665.4cc028618e7a7@netmail.pipex.net>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

h=
ttp://www.lucidimagination.com/blog/2009/05/26/accessing-words-around-a-po=
sitional-match-in-lucene/ has an example of implementing a =
TermVectorMapper.  There are also several implementations included in =
the Lucene codebase.

All it really does is give you a callback as it is reading the code from =
the Directory and then you can massage the data as you see fit.

On Oct 21, 2010, at 7:47 AM, appy74@dsl.pipex.com wrote:

> Would you have an example of this or be able to point me in the =
direction of an example at all?
>=20
> Quoting Grant Ingersoll <gsingers@apache.org>:
>=20
>>=20
>> On Oct 20, 2010, at 4:40 PM, Martin O'Shea wrote:
>>=20
>>>=20
>> =
http://mail-archives.apache.org/mod_mbox/lucene-java-user/201010.mbox/%3c1=
28
>>> 7065863.4cb711077458e@netmail.pipex.net%3e will give you a better =
idea of
>>> what I'm moving towards.
>>>=20
>>> It's all a bit grey at the moment so further investigation is =
inevitable.
>>>=20
>>> I expect that a combination of MySQL database storage and Lucene =
indexing
>> is
>>> going to be the end result.
>>=20
>> I'd likely take the TermVectorMapper approach, but otherwise, yeah, I =
think
>> you are on the right track.
>>=20
>>=20
>>>=20
>>>=20
>>>=20
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
>>> Sent: 20 Oct 2010 21 20
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Using a TermFreqVector to get counts of all words in a
>> document
>>>=20
>>>=20
>>> On Oct 20, 2010, at 2:53 PM, Martin O'Shea wrote:
>>>=20
>>>> Uwe
>>>>=20
>>>> Thanks - I figured that bit out. I'm a Lucene 'newbie'.
>>>>=20
>>>> What I would like to know though is if it is practical to search a =
single
>>>> document of one field simply by doing this:
>>>>=20
>>>> IndexReader trd =3D IndexReader.open(index);
>>>>      TermFreqVector tfv =3D trd.getTermFreqVector(docId, "title");
>>>>      String[] terms =3D tfv.getTerms();
>>>>      int[] freqs =3D tfv.getTermFrequencies();
>>>>      for (int i =3D 0; i < tfv.getTerms().length; i++) {
>>>>          System.out.println("Term " + terms[i] + " Freq: " + =
freqs[i]);
>>>>      }
>>>>      trd.close();
>>>>=20
>>>> where docId is set to 0.
>>>>=20
>>>> The code works but can this be improved upon at all?
>>>>=20
>>>> My situation is where I don't want to calculate the number of =
documents
>>> with
>>>> a particular string. Rather I want to get counts of individual =
words in a
>>>> field in a document. So I can concatenate the strings before =
passing it
>> to
>>>> Lucene.
>>>=20
>>> Can you describe the bigger problem you are trying to solve?  This =
looks
>>> like a classic XY problem: =
http://people.apache.org/~hossman/#xyproblem
>>>=20
>>> What you are doing above will work OK for what you describe (up to =
the
>>> "passing it to Lucene" part), but you probably should explore the =
use of
>> the
>>> TermVectorMapper which provides a callback mechanism (similar to a =
SAX
>>> parser) that will allow you to build your data structures on the fly
>> instead
>>> of having to serialize them into two parallel arrays and then loop =
over
>>> those arrays to create some other structure.
>>>=20
>>>=20
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
>=20
> --=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 22 17:02:17 2010
Return-Path: <java-user-return-47591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39330 invoked from network); 22 Oct 2010 17:02:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Oct 2010 17:02:17 -0000
Received: (qmail 53501 invoked by uid 500); 22 Oct 2010 17:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53307 invoked by uid 500); 22 Oct 2010 17:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53299 invoked by uid 99); 22 Oct 2010 17:02:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 17:02:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Oct 2010 17:02:07 +0000
Received: by wwi17 with SMTP id 17so1179612wwi.5
        for <java-user@lucene.apache.org>; Fri, 22 Oct 2010 10:01:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=1iiNprUsw7xQ4cabvClyNca2j5jpNjiZL8/8UiJruZ8=;
        b=yCwqe7NO31+0XevzCdq/SnRzqDXwmiVsRWnUcTY1kaSE11j/kYZowU2bocHNuoyjdk
         iT4M9iDNdkJbv95ybeP1oJxilgOfIOMt89h0Cf37D+9r2vjRQOgMM+RwNDC58TIMh11H
         1Sbp/ZbPc+12TeIlgFRP4qA+t6TGH0JFuoHTI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QW4OOZ0yPE9FZ+thgIublh7tWK9fBJT0szeAIXWwa+WzATU2NPqE2kFOhiqJIoQqBE
         OtRTdsyQ9Ej/B9VLcnsfvgYxOcDAr6i+eRN/64HhRmo/hCHOG2o2TTcOp30Fx3SB2zTm
         HjUXpBJckZQkbbz59PsNyTJLNqaqlVsCWrpHE=
MIME-Version: 1.0
Received: by 10.227.151.148 with SMTP id c20mr3235013wbw.15.1287766906496;
 Fri, 22 Oct 2010 10:01:46 -0700 (PDT)
Received: by 10.216.23.19 with HTTP; Fri, 22 Oct 2010 10:01:46 -0700 (PDT)
In-Reply-To: <AANLkTikE9or6jAc+S3fQD2Qu=QWE8jfGKZS-pAYYpPyq@mail.gmail.com>
References: <AANLkTinO5rVdXSk4=b9qsdOkimm_jDR56Ze9jdUnoptx@mail.gmail.com>
	<AANLkTimYqJzvBMo8KxFbR7SDv8CL=B0m5a35t_G03GOc@mail.gmail.com>
	<AANLkTin6X=o3OQEtC4bJ49kXfGyHZmmWwN9iSPDjnvSV@mail.gmail.com>
	<AANLkTi=m_CjXvkwdYH8a_cOJujnpzf_Z=ugVojs6VtHX@mail.gmail.com>
	<AANLkTi=V4wvzSWdvBdgdXc_qDBYGJ2k1vNiOnFV7bT-M@mail.gmail.com>
	<AANLkTik0XcyxTS2EqvrQDKW-GpsUs1tpR+7MsYO1psuo@mail.gmail.com>
	<AANLkTinYHM0Yek4QqSNhHvmjFhhiTR2eGGrPfRXVxvAs@mail.gmail.com>
	<AANLkTinK6ZVBG0qS1Cd1nMeM_SqazYBxPX5JouCWngHq@mail.gmail.com>
	<AANLkTikgefiBcHuh7rn848bdeN2C_3aYDSnk3unkHLV1@mail.gmail.com>
	<1287651424.16365.87.camel@te-prime>
	<AANLkTikQBXC0aQZTM-5FdX-ORk4DELPcWDg0_xbPm0KY@mail.gmail.com>
	<AANLkTikE9or6jAc+S3fQD2Qu=QWE8jfGKZS-pAYYpPyq@mail.gmail.com>
Date: Fri, 22 Oct 2010 13:01:46 -0400
Message-ID: <AANLkTinky7Uy5ZHkTp75i+is1EFuzV+w2s83ujVYZWq6@mail.gmail.com>
Subject: Re: how to index large number of files?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f6c8a003e665049337998b
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f6c8a003e665049337998b
Content-Type: text/plain; charset=ISO-8859-1

thank you for all. I tried Peter's suggestion and it really worked. I added
-Xmx2G to the run/debug VM arguments and it worked. However, before getting
his advice I had already started to split the files into folders 100.000 by
100.000 and now indexing recursively :) Anyway, I have learned much from all
of you guys.

Thank you.

Sahin.

On Fri, Oct 22, 2010 at 9:22 AM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> > running eclipse with -Xmx2G parameter.
>
> This only affects the Eclipse JVM, not the JVM launched by Eclipse to run
> your application.
> Did you add -Xmx2G to the 'VM arguments' of your Debug or Run
> configuration?
>
> Peter
>
> On Thu, Oct 21, 2010 at 3:26 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > I dont know why I am getting this error, but it looks normal to me now.
> > because when I try to list the contents of the folder  I cannot get a
> > response from linux shell. Now I have created a folder with 100.000 files
> > and running eclipse with -Xmx2G parameter. it is still indexing for about
> > 15
> > minutes now, but I am happy it works.
> >
> > After this I will try Toke's method. Create 100.000 filed folders and try
> > to
> > index them recursively.
> >
> > On Thu, Oct 21, 2010 at 4:57 AM, Toke Eskildsen <te@statsbiblioteket.dk
> > >wrote:
> >
> > > On Thu, 2010-10-21 at 05:01 +0200, Sahin Buyrukbilen wrote:
> > > > Unfortunately both methods didnt go through. I am getting memory
> error
> > > even
> > > > at reading the directory contents.
> > >
> > > Then your problem is probably not Lucene related, but the sheer number
> > > of files returned by listFiles.
> > >
> > > A Java File contains the full path name for the file. Let's say that
> > > this is 50 characters, which translates to about (50 * 2 + 45) ~ 150
> > > bytes for the Java String. Add an int (4 bytes) plus bookkeeping and
> > > we're up to about 200 bytes/File.
> > >
> > > 4.5 million Files thus takes up about 1 GB. Not enough to explain the
> > > OOM, but if the full path name of your files is 150 characters, the
> list
> > > takes up 2 GB.
> > >
> > > > Now, I am thinking this: What if I split 4.5million files into
> 100.000
> > > (or
> > > > less depending on java error) files directories, index each of them
> > > > separately and merge those indexes(if possible).
> > >
> > > You don't need to create separate indexes and merge them. Just split
> > > your 4.5 million files into folders of more manageable sizes and
> perform
> > > a recursive descend. Something like
> > >
> > > public static void addFolder(IndexWriter writer, File folder) {
> > >  File[] files = folder.listFiles();
> > >  for (File file: files) {
> > >    if (file.isDirectory()) {
> > >      addFolder(writer, file);
> > >    } else {
> > >      // Create Document from file and add it using the writer
> > >    }
> > >  }
> > > }
> > >
> > > - Toke
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

--001485f6c8a003e665049337998b--

From java-user-return-47592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 23 16:01:48 2010
Return-Path: <java-user-return-47592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33116 invoked from network); 23 Oct 2010 16:01:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Oct 2010 16:01:47 -0000
Received: (qmail 84608 invoked by uid 500); 23 Oct 2010 16:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84526 invoked by uid 500); 23 Oct 2010 16:01:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84518 invoked by uid 99); 23 Oct 2010 16:01:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 16:01:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dianpuma@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 16:01:38 +0000
Received: by gyg4 with SMTP id 4so1511253gyg.35
        for <java-user@lucene.apache.org>; Sat, 23 Oct 2010 09:01:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=/7Tf4NKCL+lBN279pZH5vpMzv6xPA+N6Bg/8sRgG5Gs=;
        b=b3Mo41RL33DRfBTnGjQ5cmc+OpNnVrfnoeFMWhF3BzDEToS5h56Hq2wylVrYu+xqI3
         PQoNeDkTL7RWxdVELP3RoLiY5QD3cEvKAq0rGlhqOxRv4I8iESeD+KKTCg6tmjye3yze
         urUWsGGF/onyAP/SbJjrDYkTE3Eu7zKwbxd3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=m7HJvgUQlYPu2phvX+sEQSwu/ycAFddWWkv7myw+0Di+sOHzxWRzd+c4Da9gKkhW62
         C8FVSgEgC5V+gZt7mQ6rXthxqyvUMJicdBI9qyL4cfQhfkAs3aafGTD5fwlsr9N/jVKd
         w7M9AZI54oi1s3OZNCIFvlB50IQ6W+5OYcZ34=
MIME-Version: 1.0
Received: by 10.42.213.129 with SMTP id gw1mr1387566icb.108.1287849677368;
 Sat, 23 Oct 2010 09:01:17 -0700 (PDT)
Received: by 10.231.186.210 with HTTP; Sat, 23 Oct 2010 09:01:17 -0700 (PDT)
Date: Sat, 23 Oct 2010 23:01:17 +0700
Message-ID: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
Subject: Need Help: Lucene with PHP/Java Bridge
From: dian puma <dianpuma@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Dear All,

Currently, I'm using PHP/Java Bridge to have Lucene in my PHP web
application, and also using the java extension for PHP.

FYI, I'd setup lucene on my PC several months ago and my code below worked well.

But, Today I try to setup lucene on another PC, and I get an error message:

==========================================
indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
CreateInstance failed: new
org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
(o:Analyzer)[c:StandardAnalyzer],
(o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
java.lang.IllegalArgumentException:
java.lang.ClassCastException@18a992f Responsible VM:
1.6.0_20@http://java.sun.com/" at: #-8
sun.reflect.GeneratedConstructorAccessor2.newInstance(Unknown Source)
#-7 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
#-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
java_Client->getWrappedResult(false) #3 Java.inc(481):
java_Client->getInternalResult() #4 Java.inc(703):
java_Client->createObject('org.apache.luce...', Array, true) #5
Java.inc(702): java_create(Array, true) #6 Java.inc(834):
java_create(Array, true) #7
/usr/share/pear/lucene/org_apache_lucene_index_IndexWriter.php(29):
Java->Java(Array) #8 /var/www/html/DLL/lucene/lucene_search.php(14):
org_apache_lucene_index_IndexWriter->__construct('/tmp/idxHSQALS....',
Object(org_apache_lucene_analysis_standard_StandardAnalyzer), true) #9
{main}]
==========================================

Here is the code:
<?php
require_once('rt/java_io_File.php');
require_once('rt/java_lang_System.php');
require_once('rt/java_util_LinkedList.php');
require_once('lucene/All.php');

try {
  echo "indexing ... ";
  /* Create an index */
  $cwd=getcwd();
  /* create the index files in the tmp dir */
  $tmp = create_index_dir();
  $analyzer = new org_apache_lucene_analysis_standard_StandardAnalyzer();
  $writer = new org_apache_lucene_index_IndexWriter($tmp, $analyzer, true);
  $file = new java_io_File($cwd);
  $files = $file->listFiles();
  if(is_null($files)) {
    $user = java_lang_System()->getProperty("user.name");
    echo("$cwd does not exist or is not readable.\n");
    echo("The directory must be readable by the user $user and it must not\n");
    echo("be protected by a SEL rule.\n");
    exit(1);
  }
  foreach($files as $f) {
    $doc = new org_apache_lucene_document_Document();
    $doc->add(new org_apache_lucene_document_Field(
	       "name",
	       $f->getName(),
	       org_apache_lucene_document_Field__Store()->YES,
	       org_apache_lucene_document_Field__Index()->UN_TOKENIZED));
    $writer->addDocument($doc);
  }
  $writer->optimize();
  $writer->close();
  echo "done\n";

  echo "searching... ";
  /* Search */
  $searcher = new org_apache_lucene_search_IndexSearcher($tmp);
  $phrase = new org_apache_lucene_search_MatchAllDocsQuery();
  $hits = $searcher->search($phrase);

  /* Print result */
  $iter = $hits->iterator();
  $n = $hits->length();
  echo "done\n";
  echo "Hits: $n\n";

  /* Instead of retrieving the values one-by-one, we store them into a
   * LinkedList on the server side and then retrieve the list in one
   * query:
   */
  $resultList = new java_util_LinkedList();

// create an XML document from the
// following PHP code, ...
  java_lang_System::javaBeginDocument();
  while($n--) {
    $next = $iter->next();
    $name = $next->get("name");
    $resultList->add($name);
  }
//  ... execute the XML document on
//  the server side, ...
  java_lang_System::javaEndDocument();

// .. retrieve the result, ...
  $result = java_lang_System::javaValues($resultList);
// ... print the result array
  print_r($result);

  delete_index_dir();
} catch (JavaException $e) {
  echo "Exception occured: {$e->__toString()}<br>\n";
}

/** helper functions */
$tmp_file=null;
$tmp_dir=null;
/** create a temporary directory for the lucene index files. Make sure
 * to create the tmpdir from Java so that the directory has
 * javabridge_tmp_t Security Enhanced Linux permission. Note that PHP
 * does not have access to tempfiles with java_bridge_tmp_t: PHP
 * inherits the rights from the HTTPD, usually httpd_tmp_t.
 */
function create_index_dir() {
  global $tmp_file, $tmp_dir;
  $javaTmpdir = java_lang_System()->getProperty("java.io.tmpdir");
  $tmpdir = java_values($javaTmpdir);
  $tmp_file=tempnam($tmpdir, "idx");
  $tmp_dir=new java_io_File("${tmp_file}.d");
  $tmp_dir->mkdir();
  return java_values($tmp_dir->toString());
}

/** delete the lucene index files */
function delete_index_dir() {
  global $tmp_file, $tmp_dir;
  $files = $tmp_dir->listFiles();
  foreach($files as $f) {
    $f->delete();
  }
  $tmp_dir->delete();
  unlink($tmp_file);
  $tmp_file=$tmp_dir=null;
}

?>


If my code above works well on the 1st PC, why it doesn't work on my
other PC? Maybe I got wrong on its setting, but I have no idea where
it is.


Thanks in advance
Dian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 23 23:25:33 2010
Return-Path: <java-user-return-47593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37477 invoked from network); 23 Oct 2010 23:25:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Oct 2010 23:25:32 -0000
Received: (qmail 23431 invoked by uid 500); 23 Oct 2010 23:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23387 invoked by uid 500); 23 Oct 2010 23:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23379 invoked by uid 99); 23 Oct 2010 23:25:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 23:25:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 23:25:23 +0000
X-ASG-Debug-ID: 1287876300-75aa00070000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id C007218095F
	for <java-user@lucene.apache.org>; Sat, 23 Oct 2010 16:25:00 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM ([10.10.160.33]) by mail-fw.broadvision.com with ESMTP id cZRP0I4hJqCBAMeN for <java-user@lucene.apache.org>; Sat, 23 Oct 2010 16:25:00 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Need Help: Lucene with PHP/Java Bridge
Subject: RE: Need Help: Lucene with PHP/Java Bridge
Date: Sat, 23 Oct 2010 16:25:00 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB172B@rw-ex2003.BROADVISION.COM>
In-Reply-To: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Need Help: Lucene with PHP/Java Bridge
Thread-Index: Actyy5ih9Pj+ZV+vRp6hErAt/Vu/wwAPQtCA
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: UNKNOWN[10.10.160.33]
X-Barracuda-Start-Time: 1287876300
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Have you compared your java version in these two boxes? Also PHP =
version?
Did you run indexer from command line or from browser?

I used Zend java bridge before and found java version too low may cause=20
problem?

Best regards, Lisheng


-----Original Message-----
From: dian puma [mailto:dianpuma@gmail.com]
Sent: Saturday, October 23, 2010 9:01 AM
To: java-user@lucene.apache.org
Subject: Need Help: Lucene with PHP/Java Bridge


Dear All,

Currently, I'm using PHP/Java Bridge to have Lucene in my PHP web
application, and also using the java extension for PHP.

FYI, I'd setup lucene on my PC several months ago and my code below =
worked well.

But, Today I try to setup lucene on another PC, and I get an error =
message:

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
CreateInstance failed: new
org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
(o:Analyzer)[c:StandardAnalyzer],
(o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
java.lang.IllegalArgumentException:
java.lang.ClassCastException@18a992f Responsible VM:
1.6.0_20@http://java.sun.com/" at: #-8
sun.reflect.GeneratedConstructorAccessor2.newInstance(Unknown Source)
#-7 =
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConst=
ructorAccessorImpl.java:27)
#-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
java_Client->getWrappedResult(false) #3 Java.inc(481):
java_Client->getInternalResult() #4 Java.inc(703):
java_Client->createObject('org.apache.luce...', Array, true) #5
Java.inc(702): java_create(Array, true) #6 Java.inc(834):
java_create(Array, true) #7
/usr/share/pear/lucene/org_apache_lucene_index_IndexWriter.php(29):
Java->Java(Array) #8 /var/www/html/DLL/lucene/lucene_search.php(14):
org_apache_lucene_index_IndexWriter->__construct('/tmp/idxHSQALS....',
Object(org_apache_lucene_analysis_standard_StandardAnalyzer), true) #9
{main}]
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Here is the code:
<?php
require_once('rt/java_io_File.php');
require_once('rt/java_lang_System.php');
require_once('rt/java_util_LinkedList.php');
require_once('lucene/All.php');

try {
  echo "indexing ... ";
  /* Create an index */
  $cwd=3Dgetcwd();
  /* create the index files in the tmp dir */
  $tmp =3D create_index_dir();
  $analyzer =3D new =
org_apache_lucene_analysis_standard_StandardAnalyzer();
  $writer =3D new org_apache_lucene_index_IndexWriter($tmp, $analyzer, =
true);
  $file =3D new java_io_File($cwd);
  $files =3D $file->listFiles();
  if(is_null($files)) {
    $user =3D java_lang_System()->getProperty("user.name");
    echo("$cwd does not exist or is not readable.\n");
    echo("The directory must be readable by the user $user and it must =
not\n");
    echo("be protected by a SEL rule.\n");
    exit(1);
  }
  foreach($files as $f) {
    $doc =3D new org_apache_lucene_document_Document();
    $doc->add(new org_apache_lucene_document_Field(
	       "name",
	       $f->getName(),
	       org_apache_lucene_document_Field__Store()->YES,
	       org_apache_lucene_document_Field__Index()->UN_TOKENIZED));
    $writer->addDocument($doc);
  }
  $writer->optimize();
  $writer->close();
  echo "done\n";

  echo "searching... ";
  /* Search */
  $searcher =3D new org_apache_lucene_search_IndexSearcher($tmp);
  $phrase =3D new org_apache_lucene_search_MatchAllDocsQuery();
  $hits =3D $searcher->search($phrase);

  /* Print result */
  $iter =3D $hits->iterator();
  $n =3D $hits->length();
  echo "done\n";
  echo "Hits: $n\n";

  /* Instead of retrieving the values one-by-one, we store them into a
   * LinkedList on the server side and then retrieve the list in one
   * query:
   */
  $resultList =3D new java_util_LinkedList();

// create an XML document from the
// following PHP code, ...
  java_lang_System::javaBeginDocument();
  while($n--) {
    $next =3D $iter->next();
    $name =3D $next->get("name");
    $resultList->add($name);
  }
//  ... execute the XML document on
//  the server side, ...
  java_lang_System::javaEndDocument();

// .. retrieve the result, ...
  $result =3D java_lang_System::javaValues($resultList);
// ... print the result array
  print_r($result);

  delete_index_dir();
} catch (JavaException $e) {
  echo "Exception occured: {$e->__toString()}<br>\n";
}

/** helper functions */
$tmp_file=3Dnull;
$tmp_dir=3Dnull;
/** create a temporary directory for the lucene index files. Make sure
 * to create the tmpdir from Java so that the directory has
 * javabridge_tmp_t Security Enhanced Linux permission. Note that PHP
 * does not have access to tempfiles with java_bridge_tmp_t: PHP
 * inherits the rights from the HTTPD, usually httpd_tmp_t.
 */
function create_index_dir() {
  global $tmp_file, $tmp_dir;
  $javaTmpdir =3D java_lang_System()->getProperty("java.io.tmpdir");
  $tmpdir =3D java_values($javaTmpdir);
  $tmp_file=3Dtempnam($tmpdir, "idx");
  $tmp_dir=3Dnew java_io_File("${tmp_file}.d");
  $tmp_dir->mkdir();
  return java_values($tmp_dir->toString());
}

/** delete the lucene index files */
function delete_index_dir() {
  global $tmp_file, $tmp_dir;
  $files =3D $tmp_dir->listFiles();
  foreach($files as $f) {
    $f->delete();
  }
  $tmp_dir->delete();
  unlink($tmp_file);
  $tmp_file=3D$tmp_dir=3Dnull;
}

?>


If my code above works well on the 1st PC, why it doesn't work on my
other PC? Maybe I got wrong on its setting, but I have no idea where
it is.


Thanks in advance
Dian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 23 23:52:26 2010
Return-Path: <java-user-return-47594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41962 invoked from network); 23 Oct 2010 23:52:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Oct 2010 23:52:25 -0000
Received: (qmail 31917 invoked by uid 500); 23 Oct 2010 23:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31880 invoked by uid 500); 23 Oct 2010 23:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31872 invoked by uid 99); 23 Oct 2010 23:52:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 23:52:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Oct 2010 23:52:15 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6240A45FBB6
	for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 01:51:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id q3NNWn6tgtD9 for <java-user@lucene.apache.org>;
	Sun, 24 Oct 2010 01:51:51 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EFD2B45FBB3
	for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 01:51:50 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
In-Reply-To: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
Subject: RE: Need Help: Lucene with PHP/Java Bridge
Date: Sun, 24 Oct 2010 01:52:46 +0200
Message-ID: <009e01cb730d$64907930$2db16b90$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQEartE5CGWWu5mhC6IqigQZsxai7ZSwvIlQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Are you sure that you use the same Lucene version? If you use latest (3.0.x)
now, then your IndexWriter ctor cannot work, because you have to call
FSDirectory.open() in java code first. Directly passing a native
java.io.File to IW is no longer possible. So maybe it simply does not find
the correct ctor?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: dian puma [mailto:dianpuma@gmail.com]
> Sent: Saturday, October 23, 2010 6:01 PM
> To: java-user@lucene.apache.org
> Subject: Need Help: Lucene with PHP/Java Bridge
> 
> Dear All,
> 
> Currently, I'm using PHP/Java Bridge to have Lucene in my PHP web
> application, and also using the java extension for PHP.
> 
> FYI, I'd setup lucene on my PC several months ago and my code below worked
> well.
> 
> But, Today I try to setup lucene on another PC, and I get an error
message:
> 
> ==========================================
> indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
> CreateInstance failed: new
> org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
> (o:Analyzer)[c:StandardAnalyzer],
> (o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
> java.lang.IllegalArgumentException:
> java.lang.ClassCastException@18a992f Responsible VM:
> 1.6.0_20@http://java.sun.com/" at: #-8
> sun.reflect.GeneratedConstructorAccessor2.newInstance(Unknown Source)
> #-7
>
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstru
> ctorAccessorImpl.java:27)
> #-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
> Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
> Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
> java_Client->getWrappedResult(false) #3 Java.inc(481):
> java_Client->getInternalResult() #4 Java.inc(703):
> java_Client->createObject('org.apache.luce...', Array, true) #5
> Java.inc(702): java_create(Array, true) #6 Java.inc(834):
> java_create(Array, true) #7
> /usr/share/pear/lucene/org_apache_lucene_index_IndexWriter.php(29):
> Java->Java(Array) #8 /var/www/html/DLL/lucene/lucene_search.php(14):
> org_apache_lucene_index_IndexWriter->__construct('/tmp/idxHSQALS....',
> Object(org_apache_lucene_analysis_standard_StandardAnalyzer), true) #9
> {main}] ==========================================
> 
> Here is the code:
> <?php
> require_once('rt/java_io_File.php');
> require_once('rt/java_lang_System.php');
> require_once('rt/java_util_LinkedList.php');
> require_once('lucene/All.php');
> 
> try {
>   echo "indexing ... ";
>   /* Create an index */
>   $cwd=getcwd();
>   /* create the index files in the tmp dir */
>   $tmp = create_index_dir();
>   $analyzer = new org_apache_lucene_analysis_standard_StandardAnalyzer();
>   $writer = new org_apache_lucene_index_IndexWriter($tmp, $analyzer,
true);
>   $file = new java_io_File($cwd);
>   $files = $file->listFiles();
>   if(is_null($files)) {
>     $user = java_lang_System()->getProperty("user.name");
>     echo("$cwd does not exist or is not readable.\n");
>     echo("The directory must be readable by the user $user and it must
not\n");
>     echo("be protected by a SEL rule.\n");
>     exit(1);
>   }
>   foreach($files as $f) {
>     $doc = new org_apache_lucene_document_Document();
>     $doc->add(new org_apache_lucene_document_Field(
> 	       "name",
> 	       $f->getName(),
> 	       org_apache_lucene_document_Field__Store()->YES,
> 	       org_apache_lucene_document_Field__Index()->UN_TOKENIZED));
>     $writer->addDocument($doc);
>   }
>   $writer->optimize();
>   $writer->close();
>   echo "done\n";
> 
>   echo "searching... ";
>   /* Search */
>   $searcher = new org_apache_lucene_search_IndexSearcher($tmp);
>   $phrase = new org_apache_lucene_search_MatchAllDocsQuery();
>   $hits = $searcher->search($phrase);
> 
>   /* Print result */
>   $iter = $hits->iterator();
>   $n = $hits->length();
>   echo "done\n";
>   echo "Hits: $n\n";
> 
>   /* Instead of retrieving the values one-by-one, we store them into a
>    * LinkedList on the server side and then retrieve the list in one
>    * query:
>    */
>   $resultList = new java_util_LinkedList();
> 
> // create an XML document from the
> // following PHP code, ...
>   java_lang_System::javaBeginDocument();
>   while($n--) {
>     $next = $iter->next();
>     $name = $next->get("name");
>     $resultList->add($name);
>   }
> //  ... execute the XML document on
> //  the server side, ...
>   java_lang_System::javaEndDocument();
> 
> // .. retrieve the result, ...
>   $result = java_lang_System::javaValues($resultList);
> // ... print the result array
>   print_r($result);
> 
>   delete_index_dir();
> } catch (JavaException $e) {
>   echo "Exception occured: {$e->__toString()}<br>\n"; }
> 
> /** helper functions */
> $tmp_file=null;
> $tmp_dir=null;
> /** create a temporary directory for the lucene index files. Make sure
>  * to create the tmpdir from Java so that the directory has
>  * javabridge_tmp_t Security Enhanced Linux permission. Note that PHP
>  * does not have access to tempfiles with java_bridge_tmp_t: PHP
>  * inherits the rights from the HTTPD, usually httpd_tmp_t.
>  */
> function create_index_dir() {
>   global $tmp_file, $tmp_dir;
>   $javaTmpdir = java_lang_System()->getProperty("java.io.tmpdir");
>   $tmpdir = java_values($javaTmpdir);
>   $tmp_file=tempnam($tmpdir, "idx");
>   $tmp_dir=new java_io_File("${tmp_file}.d");
>   $tmp_dir->mkdir();
>   return java_values($tmp_dir->toString());
> }
> 
> /** delete the lucene index files */
> function delete_index_dir() {
>   global $tmp_file, $tmp_dir;
>   $files = $tmp_dir->listFiles();
>   foreach($files as $f) {
>     $f->delete();
>   }
>   $tmp_dir->delete();
>   unlink($tmp_file);
>   $tmp_file=$tmp_dir=null;
> }
> 
> ?>
> 
> 
> If my code above works well on the 1st PC, why it doesn't work on my other
PC?
> Maybe I got wrong on its setting, but I have no idea where it is.
> 
> 
> Thanks in advance
> Dian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 24 11:06:31 2010
Return-Path: <java-user-return-47595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76888 invoked from network); 24 Oct 2010 11:06:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Oct 2010 11:06:31 -0000
Received: (qmail 98535 invoked by uid 500); 24 Oct 2010 11:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98304 invoked by uid 500); 24 Oct 2010 11:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98296 invoked by uid 99); 24 Oct 2010 11:06:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 11:06:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dianpuma@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 11:06:21 +0000
Received: by iwn7 with SMTP id 7so2294985iwn.35
        for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 04:06:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=D4b8Vu4C8/vfAzy+Zq0PtvIv8yudnpSf0Fud3PUTuO4=;
        b=Zb1Db3aLirAibdOJQewjk9iosbCrcZ0TLkqxwfYwu7qgduePu+5fjwnLQKgDHXAM/N
         atJoeRP+PJYdZwfLeQg4sx14e2ygqGjqu5G4SlpBFUddNDpjH5YccWlKCCUTcp1MYFXJ
         IBKEW+AN+ZKu0nTBmXgRuqHrspL3Fh86A1Pcg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FUc+G2DRcy6oGKZMbSEKNSWZrjGit3aj5El3XQ24xxmA00gzkoVTwVBP+3LTjFJ8I/
         y477ANGjEerGbeMN58y7lBlWYWpsEE6J8/DaZgrQvVbZ0a/+o1nCg37ExSiyecbpFlnw
         TN6PMXfxI7l3EF4wscd1hjZy96JXhHKEkiNBA=
MIME-Version: 1.0
Received: by 10.42.29.132 with SMTP id r4mr235063icc.345.1287918359968; Sun,
 24 Oct 2010 04:05:59 -0700 (PDT)
Received: by 10.231.186.210 with HTTP; Sun, 24 Oct 2010 04:05:59 -0700 (PDT)
In-Reply-To: <009e01cb730d$64907930$2db16b90$@thetaphi.de>
References: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
	<009e01cb730d$64907930$2db16b90$@thetaphi.de>
Date: Sun, 24 Oct 2010 18:05:59 +0700
Message-ID: <AANLkTinLsHJyKBuhoeO_vFbYzD4G-3F=TuX9WjQ_Hw5z@mail.gmail.com>
Subject: Re: Need Help: Lucene with PHP/Java Bridge
From: dian puma <dianpuma@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30427216587c6604935adc30
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf30427216587c6604935adc30
Content-Type: text/plain; charset=ISO-8859-1

Ahaaa, you're right, I used lucene-core-3.0.1.jar and I got an error on it
cause
the IndexWriter Constructor cannot work.

When I try to use the lower version, it works.
Thank alot

On Sun, Oct 24, 2010 at 6:52 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Are you sure that you use the same Lucene version? If you use latest
> (3.0.x)
> now, then your IndexWriter ctor cannot work, because you have to call
> FSDirectory.open() in java code first. Directly passing a native
> java.io.File to IW is no longer possible. So maybe it simply does not find
> the correct ctor?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: dian puma [mailto:dianpuma@gmail.com]
> > Sent: Saturday, October 23, 2010 6:01 PM
> > To: java-user@lucene.apache.org
> > Subject: Need Help: Lucene with PHP/Java Bridge
> >
> > Dear All,
> >
> > Currently, I'm using PHP/Java Bridge to have Lucene in my PHP web
> > application, and also using the java extension for PHP.
> >
> > FYI, I'd setup lucene on my PC several months ago and my code below
> worked
> > well.
> >
> > But, Today I try to setup lucene on another PC, and I get an error
> message:
> >
> > ==========================================
> > indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
> > CreateInstance failed: new
> > org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
> > (o:Analyzer)[c:StandardAnalyzer],
> > (o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
> > java.lang.IllegalArgumentException:
> > java.lang.ClassCastException@18a992f Responsible VM:
> > 1.6.0_20@http://java.sun.com/" at: #-8
> > sun.reflect.GeneratedConstructorAccessor2.newInstance(Unknown Source)
> > #-7
> >
> sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstru
> > ctorAccessorImpl.java:27)
> > #-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
> > Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
> > Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
> > java_Client->getWrappedResult(false) #3 Java.inc(481):
> > java_Client->getInternalResult() #4 Java.inc(703):
> > java_Client->createObject('org.apache.luce...', Array, true) #5
> > Java.inc(702): java_create(Array, true) #6 Java.inc(834):
> > java_create(Array, true) #7
> > /usr/share/pear/lucene/org_apache_lucene_index_IndexWriter.php(29):
> > Java->Java(Array) #8 /var/www/html/DLL/lucene/lucene_search.php(14):
> > org_apache_lucene_index_IndexWriter->__construct('/tmp/idxHSQALS....',
> > Object(org_apache_lucene_analysis_standard_StandardAnalyzer), true) #9
> > {main}] ==========================================
> >
> > Here is the code:
> > <?php
> > require_once('rt/java_io_File.php');
> > require_once('rt/java_lang_System.php');
> > require_once('rt/java_util_LinkedList.php');
> > require_once('lucene/All.php');
> >
> > try {
> >   echo "indexing ... ";
> >   /* Create an index */
> >   $cwd=getcwd();
> >   /* create the index files in the tmp dir */
> >   $tmp = create_index_dir();
> >   $analyzer = new org_apache_lucene_analysis_standard_StandardAnalyzer();
> >   $writer = new org_apache_lucene_index_IndexWriter($tmp, $analyzer,
> true);
> >   $file = new java_io_File($cwd);
> >   $files = $file->listFiles();
> >   if(is_null($files)) {
> >     $user = java_lang_System()->getProperty("user.name");
> >     echo("$cwd does not exist or is not readable.\n");
> >     echo("The directory must be readable by the user $user and it must
> not\n");
> >     echo("be protected by a SEL rule.\n");
> >     exit(1);
> >   }
> >   foreach($files as $f) {
> >     $doc = new org_apache_lucene_document_Document();
> >     $doc->add(new org_apache_lucene_document_Field(
> >              "name",
> >              $f->getName(),
> >              org_apache_lucene_document_Field__Store()->YES,
> >              org_apache_lucene_document_Field__Index()->UN_TOKENIZED));
> >     $writer->addDocument($doc);
> >   }
> >   $writer->optimize();
> >   $writer->close();
> >   echo "done\n";
> >
> >   echo "searching... ";
> >   /* Search */
> >   $searcher = new org_apache_lucene_search_IndexSearcher($tmp);
> >   $phrase = new org_apache_lucene_search_MatchAllDocsQuery();
> >   $hits = $searcher->search($phrase);
> >
> >   /* Print result */
> >   $iter = $hits->iterator();
> >   $n = $hits->length();
> >   echo "done\n";
> >   echo "Hits: $n\n";
> >
> >   /* Instead of retrieving the values one-by-one, we store them into a
> >    * LinkedList on the server side and then retrieve the list in one
> >    * query:
> >    */
> >   $resultList = new java_util_LinkedList();
> >
> > // create an XML document from the
> > // following PHP code, ...
> >   java_lang_System::javaBeginDocument();
> >   while($n--) {
> >     $next = $iter->next();
> >     $name = $next->get("name");
> >     $resultList->add($name);
> >   }
> > //  ... execute the XML document on
> > //  the server side, ...
> >   java_lang_System::javaEndDocument();
> >
> > // .. retrieve the result, ...
> >   $result = java_lang_System::javaValues($resultList);
> > // ... print the result array
> >   print_r($result);
> >
> >   delete_index_dir();
> > } catch (JavaException $e) {
> >   echo "Exception occured: {$e->__toString()}<br>\n"; }
> >
> > /** helper functions */
> > $tmp_file=null;
> > $tmp_dir=null;
> > /** create a temporary directory for the lucene index files. Make sure
> >  * to create the tmpdir from Java so that the directory has
> >  * javabridge_tmp_t Security Enhanced Linux permission. Note that PHP
> >  * does not have access to tempfiles with java_bridge_tmp_t: PHP
> >  * inherits the rights from the HTTPD, usually httpd_tmp_t.
> >  */
> > function create_index_dir() {
> >   global $tmp_file, $tmp_dir;
> >   $javaTmpdir = java_lang_System()->getProperty("java.io.tmpdir");
> >   $tmpdir = java_values($javaTmpdir);
> >   $tmp_file=tempnam($tmpdir, "idx");
> >   $tmp_dir=new java_io_File("${tmp_file}.d");
> >   $tmp_dir->mkdir();
> >   return java_values($tmp_dir->toString());
> > }
> >
> > /** delete the lucene index files */
> > function delete_index_dir() {
> >   global $tmp_file, $tmp_dir;
> >   $files = $tmp_dir->listFiles();
> >   foreach($files as $f) {
> >     $f->delete();
> >   }
> >   $tmp_dir->delete();
> >   unlink($tmp_file);
> >   $tmp_file=$tmp_dir=null;
> > }
> >
> > ?>
> >
> >
> > If my code above works well on the 1st PC, why it doesn't work on my
> other
> PC?
> > Maybe I got wrong on its setting, but I have no idea where it is.
> >
> >
> > Thanks in advance
> > Dian
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf30427216587c6604935adc30--

From java-user-return-47596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 24 19:59:18 2010
Return-Path: <java-user-return-47596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39198 invoked from network); 24 Oct 2010 19:59:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Oct 2010 19:59:17 -0000
Received: (qmail 17497 invoked by uid 500); 24 Oct 2010 19:59:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17442 invoked by uid 500); 24 Oct 2010 19:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17433 invoked by uid 99); 24 Oct 2010 19:59:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 19:59:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.1 as permitted sender)
Received: from [212.74.114.1] (HELO mk-outboundfilter-5.mail.uk.tiscali.com) (212.74.114.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 19:59:07 +0000
X-Trace: 319157952/mk-outboundfilter-5.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AqkJAHYsxExRVnIp/2dsb2JhbACBRJImjHh7cromhUgEik2Ce4RX
X-IronPort-AV: E=Sophos;i="4.58,233,1286146800"; 
   d="scan'208,217";a="319157952"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 24 Oct 2010 20:58:44 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
Subject: Use of hyphens in StandardAnalyzer
Date: Sun, 24 Oct 2010 20:58:41 +0100
Message-ID: <002201cb73b5$db7bce70$92736b50$@pipex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0023_01CB73BE.3D403670"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: ActztdtJntKlvQ88QXeM62yzbHr31Q==
Content-Language: en-gb

------=_NextPart_000_0023_01CB73BE.3D403670
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello

 

I have a StandardAnalyzer working which retrieves words and frequencies from
a single document using a TermVectorMapper which is populating a HashMap.

 

But if I use the following text as a field in my document, i.e. 

 

addDoc(w, "lucene Lawton-Browne Lucene");

 

The word frequencies returned in the HashMap are:

 

browne 1

lucene 2

lawton 1

 

The problem is the words 'lawton' and 'browne'. If this is an actual
'double-barreled' name, can Lucene recognise it as 'Lawton-Browne' where the
name is actually a single word?

 

I've tried combinations of:

 

addDoc(w, "lucene \"Lawton-Browne\" Lucene");

 

And single quotes but without success.

 

Thanks

 

Martin O'Shea.

 

 

 


------=_NextPart_000_0023_01CB73BE.3D403670--



From java-user-return-47597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 24 20:31:33 2010
Return-Path: <java-user-return-47597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50161 invoked from network); 24 Oct 2010 20:31:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Oct 2010 20:31:33 -0000
Received: (qmail 41269 invoked by uid 500); 24 Oct 2010 20:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41208 invoked by uid 500); 24 Oct 2010 20:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41200 invoked by uid 99); 24 Oct 2010 20:31:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 20:31:31 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 20:31:22 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o9OKV1I8027750
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 16:31:01 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Sun, 24 Oct 2010
 16:31:01 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 24 Oct 2010 16:31:00 -0400
Subject: RE: Use of hyphens in StandardAnalyzer
Thread-Topic: Use of hyphens in StandardAnalyzer
Thread-Index: ActztdtJntKlvQ88QXeM62yzbHr31QAArPJQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F805F12C6@suex07-mbx-03.ad.syr.edu>
References: <002201cb73b5$db7bce70$92736b50$@pipex.com>
In-Reply-To: <002201cb73b5$db7bce70$92736b50$@pipex.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2010-10-24_02:2010-10-24,2010-10-24,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgTWFydGluLA0KDQpTdGFuZGFyZFRva2VuaXplciBhbmQgLUFuYWx5emVyIGhhdmUgYmVlbiBj
aGFuZ2VkLCBhcyBvZiBmdXR1cmUgdmVyc2lvbiAzLjEgKHRoZSBuZXh0IHJlbGVhc2UpIHRvIHN1
cHBvcnQgdGhlIFVuaWNvZGUgc2VnbWVudGF0aW9uIHJ1bGVzIGluIFVBWCMyOS4gIE15ICh1bnRl
c3RlZCkgZ3Vlc3MgaXMgdGhhdCB5b3VyIGh5cGhlbmF0ZWQgd29yZCB3aWxsIGJlIGtlcHQgYXMg
YSBzaW5nbGUgdG9rZW4gaWYgeW91IHNldCB0aGUgdmVyc2lvbiB0byAzLjEgb3IgaGlnaGVyIGlu
IHRoZSBjb25zdHJ1Y3Rvci4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0t
LQ0KPiBGcm9tOiBNYXJ0aW4gTydTaGVhIFttYWlsdG86YXBweTc0QGRzbC5waXBleC5jb21dDQo+
IFNlbnQ6IFN1bmRheSwgT2N0b2JlciAyNCwgMjAxMCAzOjU5IFBNDQo+IFRvOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogVXNlIG9mIGh5cGhlbnMgaW4gU3RhbmRhcmRB
bmFseXplcg0KPiANCj4gSGVsbG8NCj4gDQo+IA0KPiANCj4gSSBoYXZlIGEgU3RhbmRhcmRBbmFs
eXplciB3b3JraW5nIHdoaWNoIHJldHJpZXZlcyB3b3JkcyBhbmQgZnJlcXVlbmNpZXMNCj4gZnJv
bQ0KPiBhIHNpbmdsZSBkb2N1bWVudCB1c2luZyBhIFRlcm1WZWN0b3JNYXBwZXIgd2hpY2ggaXMg
cG9wdWxhdGluZyBhIEhhc2hNYXAuDQo+IA0KPiANCj4gDQo+IEJ1dCBpZiBJIHVzZSB0aGUgZm9s
bG93aW5nIHRleHQgYXMgYSBmaWVsZCBpbiBteSBkb2N1bWVudCwgaS5lLg0KPiANCj4gDQo+IA0K
PiBhZGREb2ModywgImx1Y2VuZSBMYXd0b24tQnJvd25lIEx1Y2VuZSIpOw0KPiANCj4gDQo+IA0K
PiBUaGUgd29yZCBmcmVxdWVuY2llcyByZXR1cm5lZCBpbiB0aGUgSGFzaE1hcCBhcmU6DQo+IA0K
PiANCj4gDQo+IGJyb3duZSAxDQo+IA0KPiBsdWNlbmUgMg0KPiANCj4gbGF3dG9uIDENCj4gDQo+
IA0KPiANCj4gVGhlIHByb2JsZW0gaXMgdGhlIHdvcmRzICdsYXd0b24nIGFuZCAnYnJvd25lJy4g
SWYgdGhpcyBpcyBhbiBhY3R1YWwNCj4gJ2RvdWJsZS1iYXJyZWxlZCcgbmFtZSwgY2FuIEx1Y2Vu
ZSByZWNvZ25pc2UgaXQgYXMgJ0xhd3Rvbi1Ccm93bmUnIHdoZXJlDQo+IHRoZQ0KPiBuYW1lIGlz
IGFjdHVhbGx5IGEgc2luZ2xlIHdvcmQ/DQo+IA0KPiANCj4gDQo+IEkndmUgdHJpZWQgY29tYmlu
YXRpb25zIG9mOg0KPiANCj4gDQo+IA0KPiBhZGREb2ModywgImx1Y2VuZSBcIkxhd3Rvbi1Ccm93
bmVcIiBMdWNlbmUiKTsNCj4gDQo+IA0KPiANCj4gQW5kIHNpbmdsZSBxdW90ZXMgYnV0IHdpdGhv
dXQgc3VjY2Vzcy4NCj4gDQo+IA0KPiANCj4gVGhhbmtzDQo+IA0KPiANCj4gDQo+IE1hcnRpbiBP
J1NoZWEuDQo+IA0KPiANCj4gDQo+IA0KPiANCj4gDQoNCg==


From java-user-return-47598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 24 20:40:41 2010
Return-Path: <java-user-return-47598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51177 invoked from network); 24 Oct 2010 20:40:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Oct 2010 20:40:41 -0000
Received: (qmail 47655 invoked by uid 500); 24 Oct 2010 20:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47614 invoked by uid 500); 24 Oct 2010 20:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47606 invoked by uid 99); 24 Oct 2010 20:40:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 20:40:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.38 as permitted sender)
Received: from [212.74.114.38] (HELO mk-outboundfilter-2.mail.uk.tiscali.com) (212.74.114.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 20:40:31 +0000
X-Trace: 373641709/mk-outboundfilter-2.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AjkJAAY2xExRVnIp/2dsb2JhbACDHpBMjHh7cqkVkQiBIoMydASKTYJ7hFc
X-IronPort-AV: E=Sophos;i="4.58,233,1286146800"; 
   d="scan'208";a="373641709"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 24 Oct 2010 21:40:08 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
References: <002201cb73b5$db7bce70$92736b50$@pipex.com> <2D127F11DC79714E9B6A43AC9458147F805F12C6@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F805F12C6@suex07-mbx-03.ad.syr.edu>
Subject: RE: Use of hyphens in StandardAnalyzer
Date: Sun, 24 Oct 2010 21:40:05 +0100
Message-ID: <002a01cb73bb$a436bb40$eca431c0$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: ActztdtJntKlvQ88QXeM62yzbHr31QAArPJQAAC9OkA=
Content-Language: en-gb

A good suggestion. But I'm using Lucene 3.2 and the constructor for a =
StandardAnalyzer has Version_30 as its highest value.

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: 24 Oct 2010 21 31
To: java-user@lucene.apache.org
Subject: RE: Use of hyphens in StandardAnalyzer

Hi Martin,

StandardTokenizer and -Analyzer have been changed, as of future version =
3.1 (the next release) to support the Unicode segmentation rules in =
UAX#29.  My (untested) guess is that your hyphenated word will be kept =
as a single token if you set the version to 3.1 or higher in the =
constructor.

Steve

> -----Original Message-----
> From: Martin O'Shea [mailto:appy74@dsl.pipex.com]
> Sent: Sunday, October 24, 2010 3:59 PM
> To: java-user@lucene.apache.org
> Subject: Use of hyphens in StandardAnalyzer
>=20
> Hello
>=20
>=20
>=20
> I have a StandardAnalyzer working which retrieves words and =
frequencies
> from
> a single document using a TermVectorMapper which is populating a =
HashMap.
>=20
>=20
>=20
> But if I use the following text as a field in my document, i.e.
>=20
>=20
>=20
> addDoc(w, "lucene Lawton-Browne Lucene");
>=20
>=20
>=20
> The word frequencies returned in the HashMap are:
>=20
>=20
>=20
> browne 1
>=20
> lucene 2
>=20
> lawton 1
>=20
>=20
>=20
> The problem is the words 'lawton' and 'browne'. If this is an actual
> 'double-barreled' name, can Lucene recognise it as 'Lawton-Browne' =
where
> the
> name is actually a single word?
>=20
>=20
>=20
> I've tried combinations of:
>=20
>=20
>=20
> addDoc(w, "lucene \"Lawton-Browne\" Lucene");
>=20
>=20
>=20
> And single quotes but without success.
>=20
>=20
>=20
> Thanks
>=20
>=20
>=20
> Martin O'Shea.
>=20
>=20
>=20
>=20
>=20
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 24 21:29:25 2010
Return-Path: <java-user-return-47599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66967 invoked from network); 24 Oct 2010 21:29:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Oct 2010 21:29:25 -0000
Received: (qmail 83469 invoked by uid 500); 24 Oct 2010 21:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83424 invoked by uid 500); 24 Oct 2010 21:29:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83416 invoked by uid 99); 24 Oct 2010 21:29:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 21:29:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.1 as permitted sender)
Received: from [212.74.114.1] (HELO mk-outboundfilter-5.mail.uk.tiscali.com) (212.74.114.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Oct 2010 21:29:15 +0000
X-Trace: 319165458/mk-outboundfilter-5.mail.uk.tiscali.com/PIPEX/$PIPEX-ACCEPTED/pipex-customers/81.86.114.41/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 81.86.114.41
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Microsoft Office Outlook 12.0
X-IP-BHB: Once
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AjkJAINBxExRVnIp/2dsb2JhbACDHpBMjHh7cqkrkQaBIoMydASKTYJ7hFc
X-IronPort-AV: E=Sophos;i="4.58,233,1286146800"; 
   d="scan'208";a="319165458"
X-IP-Direction: IN
Received: from 81-86-114-41.dsl.pipex.com (HELO Ustane) ([81.86.114.41])
  by smtp.pipex.tiscali.co.uk with ESMTP; 24 Oct 2010 22:28:52 +0100
From: "Martin O'Shea" <appy74@dsl.pipex.com>
To: <java-user@lucene.apache.org>
Subject: FW: Use of hyphens in StandardAnalyzer
Date: Sun, 24 Oct 2010 22:28:50 +0100
Message-ID: <003201cb73c2$7370c0d0$5a524270$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: ActztdtJntKlvQ88QXeM62yzbHr31QAArPJQAAC9OkAAAbBgkAAACoVA
Content-Language: en-gb

A good suggestion. But I'm using Lucene 3.0.2 and the constructor for a =
StandardAnalyzer has Version_30 as its highest value. Do you know when =
3.1 is due?

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: 24 Oct 2010 21 31
To: java-user@lucene.apache.org
Subject: RE: Use of hyphens in StandardAnalyzer

Hi Martin,

StandardTokenizer and -Analyzer have been changed, as of future version =
3.1 (the next release) to support the Unicode segmentation rules in =
UAX#29.  My (untested) guess is that your hyphenated word will be kept =
as a single token if you set the version to 3.1 or higher in the =
constructor.

Steve

> -----Original Message-----
> From: Martin O'Shea [mailto:appy74@dsl.pipex.com]
> Sent: Sunday, October 24, 2010 3:59 PM
> To: java-user@lucene.apache.org
> Subject: Use of hyphens in StandardAnalyzer
>=20
> Hello
>=20
>=20
>=20
> I have a StandardAnalyzer working which retrieves words and =
frequencies
> from
> a single document using a TermVectorMapper which is populating a =
HashMap.
>=20
>=20
>=20
> But if I use the following text as a field in my document, i.e.
>=20
>=20
>=20
> addDoc(w, "lucene Lawton-Browne Lucene");
>=20
>=20
>=20
> The word frequencies returned in the HashMap are:
>=20
>=20
>=20
> browne 1
>=20
> lucene 2
>=20
> lawton 1
>=20
>=20
>=20
> The problem is the words 'lawton' and 'browne'. If this is an actual
> 'double-barreled' name, can Lucene recognise it as 'Lawton-Browne' =
where
> the
> name is actually a single word?
>=20
>=20
>=20
> I've tried combinations of:
>=20
>=20
>=20
> addDoc(w, "lucene \"Lawton-Browne\" Lucene");
>=20
>=20
>=20
> And single quotes but without success.
>=20
>=20
>=20
> Thanks
>=20
>=20
>=20
> Martin O'Shea.
>=20
>=20
>=20
>=20
>=20
>=20






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 00:24:48 2010
Return-Path: <java-user-return-47600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8724 invoked from network); 25 Oct 2010 00:24:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 00:24:47 -0000
Received: (qmail 46080 invoked by uid 500); 25 Oct 2010 00:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46042 invoked by uid 500); 25 Oct 2010 00:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46034 invoked by uid 99); 25 Oct 2010 00:24:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 00:24:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Oct 2010 00:24:37 +0000
Received: (qmail 69807 invoked by uid 60001); 25 Oct 2010 00:24:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1287966256; bh=GsMtGS3M/FvLEuaRIgcwOXGT3tLClAZ5AiWsSs02514=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=FB1PAHAzY3MSeLPVmB9sNsAJwdDKsHP0SuQqI0N1zkw6pomkn5JzH18wO1ExM/5roBhd4NCRkSZrevvBLSTneAMg1sIV91HVXQeKHXCYqr2qmiZVlVRsHmAYzeGStPU/n41WblHr+qMR6Lozt2MJBHfBUh+Vk0s0JaUL/byyWM8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Pao2qMu7iFOtzVTCee3o5t5r8eE3Dqy39dEuK3z8PAABjisdL3aW/decGxBxIDGF15G//55Bc2fiM3QlvJcnOVgsG0Sw6ubFp8lRUIAGKHkffx3AOcdjKBmCp6HNWqP0Zz42aFyU7WUWaqB7JtO44WP6rP+ToUyKuZe4qBD//wY=;
Message-ID: <19072.68447.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: Z4oySJkVM1mWmR5C9xZgTiBylZ4VWc5HIn_4CvQ4JhXj0k1
 oFdBlcjM4Xts5TJuVx5qvb4lny0zk1_RlVPTXYoqiv2YZZZKTIbuM8cG2mmG
 hQUAJgW4FSvkB3gmFeF0_6KenJLZwkBdu5E3M6cvGmD1RA331FeFNJxphDGD
 rxtD32Vx9I11gtJpW3XgRWoUwhxBlGbcf6jmB30qDnheyzuHMdvd6__.tsnw
 Y1e1bGWy_HDmVrYAEYB5zByVPQ1dEKobzgS_i7FKwhcf.8Wdmfhl_s0hxoUz
 w0FpBo6sIwrurqnuCKIizlfDFZ3o3mJVywLYOqbfnoVC5yQtmqJA99DSjoYJ
 tTCns9w--
Received: from [78.165.99.45] by web52903.mail.re2.yahoo.com via HTTP; Sun, 24 Oct 2010 17:24:15 PDT
X-Mailer: YahooMailClassic/11.4.9 YahooMailWebService/0.8.107.284920
Date: Sun, 24 Oct 2010 17:24:15 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: FW: Use of hyphens in StandardAnalyzer
To: java-user@lucene.apache.org
In-Reply-To: <003201cb73c2$7370c0d0$5a524270$@pipex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How about replacing "-" with some arbitrary character sequence with Mapping=
CharFilter before tokenizer and then restoring that '-' with PatternReplace=
Filter after the tokenizer?=0A=0AMay be you can just eat '-' with charFilte=
r so that Lawton-Browne becomes LawtonBrowne.=0A=0A=0A--- On Mon, 10/25/10,=
 Martin O'Shea <appy74@dsl.pipex.com> wrote:=0A=0A> From: Martin O'Shea <ap=
py74@dsl.pipex.com>=0A> Subject: FW: Use of hyphens in StandardAnalyzer=0A>=
 To: java-user@lucene.apache.org=0A> Date: Monday, October 25, 2010, 12:28 =
AM=0A> A good suggestion. But I'm using=0A> Lucene 3.0.2 and the constructo=
r for a StandardAnalyzer has=0A> Version_30 as its highest value. Do you kn=
ow when 3.1 is=0A> due?=0A> =0A> -----Original Message-----=0A> From: Steve=
n A Rowe [mailto:sarowe@syr.edu] =0A> Sent: 24 Oct 2010 21 31=0A> To: java-=
user@lucene.apache.org=0A> Subject: RE: Use of hyphens in StandardAnalyzer=
=0A> =0A> Hi Martin,=0A> =0A> StandardTokenizer and -Analyzer have been cha=
nged, as of=0A> future version 3.1 (the next release) to support the Unicod=
e=0A> segmentation rules in UAX#29.=A0 My (untested) guess is=0A> that your=
 hyphenated word will be kept as a single token if=0A> you set the version =
to 3.1 or higher in the constructor.=0A> =0A> Steve=0A> =0A> > -----Origina=
l Message-----=0A> > From: Martin O'Shea [mailto:appy74@dsl.pipex.com]=0A> =
> Sent: Sunday, October 24, 2010 3:59 PM=0A> > To: java-user@lucene.apache.=
org=0A> > Subject: Use of hyphens in StandardAnalyzer=0A> > =0A> > Hello=0A=
> > =0A> > =0A> > =0A> > I have a StandardAnalyzer working which retrieves=
=0A> words and frequencies=0A> > from=0A> > a single document using a TermV=
ectorMapper which is=0A> populating a HashMap.=0A> > =0A> > =0A> > =0A> > B=
ut if I use the following text as a field in my=0A> document, i.e.=0A> > =
=0A> > =0A> > =0A> > addDoc(w, "lucene Lawton-Browne Lucene");=0A> > =0A> >=
 =0A> > =0A> > The word frequencies returned in the HashMap are:=0A> > =0A>=
 > =0A> > =0A> > browne 1=0A> > =0A> > lucene 2=0A> > =0A> > lawton 1=0A> >=
 =0A> > =0A> > =0A> > The problem is the words 'lawton' and 'browne'. If=0A=
> this is an actual=0A> > 'double-barreled' name, can Lucene recognise it a=
s=0A> 'Lawton-Browne' where=0A> > the=0A> > name is actually a single word?=
=0A> > =0A> > =0A> > =0A> > I've tried combinations of:=0A> > =0A> > =0A> >=
 =0A> > addDoc(w, "lucene \"Lawton-Browne\" Lucene");=0A> > =0A> > =0A> > =
=0A> > And single quotes but without success.=0A> > =0A> > =0A> > =0A> > Th=
anks=0A> > =0A> > =0A> > =0A> > Martin O'Shea.=0A> > =0A> > =0A> > =0A> > =
=0A> > =0A> > =0A> =0A> =0A> =0A> =0A> =0A> =0A> --------------------------=
-------------------------------------------=0A> To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A> =0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 02:31:51 2010
Return-Path: <java-user-return-47601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33276 invoked from network); 25 Oct 2010 02:31:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 02:31:50 -0000
Received: (qmail 97969 invoked by uid 500); 25 Oct 2010 02:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97883 invoked by uid 500); 25 Oct 2010 02:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97875 invoked by uid 99); 25 Oct 2010 02:31:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 02:31:48 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 02:31:39 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o9P2VI9p002188
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 22:31:18 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Sun, 24 Oct 2010
 22:31:18 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 24 Oct 2010 22:31:17 -0400
Subject: RE: Use of hyphens in StandardAnalyzer
Thread-Topic: Use of hyphens in StandardAnalyzer
Thread-Index: ActztdtJntKlvQ88QXeM62yzbHr31QAArPJQAAC9OkAAAbBgkAAACoVAAAZxvvA=
Message-ID: <2D127F11DC79714E9B6A43AC9458147F805F12C9@suex07-mbx-03.ad.syr.edu>
References: <003201cb73c2$7370c0d0$5a524270$@pipex.com>
In-Reply-To: <003201cb73c2$7370c0d0$5a524270$@pipex.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2010-10-25_01:2010-10-25,2010-10-25,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

U29ycnksIHJlbGVhc2VzIGFyZSBub3Qgc2NoZWR1bGVkLg0KDQpUaGVyZSBpcyBhIGdlbmVyYWwg
ZmVlbGluZyB0aGF0IGEgMy4xIHJlbGVhc2UgY291bGQgaGFwcGVuIGZhaXJseSBzb29uLCB0aG91
Z2guDQoNCkN1cnJlbnRseSwgdGhlcmUgaXMgYSBwdXNoIHRvIGltcHJvdmUgdGVzdCBjb3ZlcmFn
ZSBhbmQgZml4IGJ1Z3MgdGhhdCBzaGFrZSBvdXQgYXMgYSByZXN1bHQuDQoNCkFzIGFub3RoZXIg
bWVhc3VyZSBvZiBob3cgY2xvc2UgdGhlIHJlbGVhc2UgaXMsIHlvdSBjYW4gY2hlY2sgaGVyZSB0
byBzZWUgaG93IG1hbnkgaXNzdWVzIHJlbWFpbiB0YXJnZXRpbmcgdGhlIDMuMSByZWxlYXNlIC0g
b25jZSB0aGVzZSBnbyB0byB6ZXJvLCBhIHJlbGVhc2UgaXMgbGlrZWx5IGltbWluZW50Og0KDQpM
dWNlbmUgb3Blbi9yZW9wZW5lZCBmaXggZm9yIDMuMTogPGh0dHBzOi8vaXNzdWVzLmFwYWNoZS5v
cmcvamlyYS9zZWN1cmUvSXNzdWVOYXZpZ2F0b3IuanNwYT9zb3J0ZXIvZmllbGQ9cHJpb3JpdHkm
cmVzb2x1dGlvbj0tMSZwaWQ9MTIzMTAxMTAmZml4Zm9yPTEyMzE0ODIyPg0KIA0KU29sciBvcGVu
L3Jlb3BlbmVkIGZpeCBmb3IgMy4xOiANCjxodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEv
c2VjdXJlL0lzc3VlTmF2aWdhdG9yLmpzcGE/c29ydGVyL2ZpZWxkPXByaW9yaXR5JnJlc29sdXRp
b249LTEmcGlkPTEyMzEwMjMwJmZpeGZvcj0xMjMxNDM3MT4NCg0KTXkgZXN0aW1hdGUgb2Ygd2hl
biBhIHJlbGVhc2Ugd2lsbCBvY2N1cjogc29tZXRpbWUgaW4gdGhlIG5leHQgdHdvIG9yIHRocmVl
IG1vbnRocy4NCg0KVGhlIDMuWCBicmFuY2ggKHdoZXJlIHRoZSAzLjEgcmVsZWFzZSB3aWxsIGJl
IGN1dCBmcm9tKSBpcyBxdWl0ZSBzdGFibGUgLSB5b3Ugc2hvdWxkIGNvbnNpZGVyIHVzaW5nIGl0
IGV2ZW4gcHJlLXJlbGVhc2UuDQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCj4gRnJvbTogTWFydGluIE8nU2hlYSBbbWFpbHRvOmFwcHk3NEBkc2wucGlwZXguY29tXQ0K
PiBTZW50OiBTdW5kYXksIE9jdG9iZXIgMjQsIDIwMTAgNToyOSBQTQ0KPiBUbzogamF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IEZXOiBVc2Ugb2YgaHlwaGVucyBpbiBTdGFu
ZGFyZEFuYWx5emVyDQo+IA0KPiBBIGdvb2Qgc3VnZ2VzdGlvbi4gQnV0IEknbSB1c2luZyBMdWNl
bmUgMy4wLjIgYW5kIHRoZSBjb25zdHJ1Y3RvciBmb3IgYQ0KPiBTdGFuZGFyZEFuYWx5emVyIGhh
cyBWZXJzaW9uXzMwIGFzIGl0cyBoaWdoZXN0IHZhbHVlLiBEbyB5b3Uga25vdyB3aGVuIDMuMQ0K
PiBpcyBkdWU/DQo+IA0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBTdGV2
ZW4gQSBSb3dlIFttYWlsdG86c2Fyb3dlQHN5ci5lZHVdDQo+IFNlbnQ6IDI0IE9jdCAyMDEwIDIx
IDMxDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IFVz
ZSBvZiBoeXBoZW5zIGluIFN0YW5kYXJkQW5hbHl6ZXINCj4gDQo+IEhpIE1hcnRpbiwNCj4gDQo+
IFN0YW5kYXJkVG9rZW5pemVyIGFuZCAtQW5hbHl6ZXIgaGF2ZSBiZWVuIGNoYW5nZWQsIGFzIG9m
IGZ1dHVyZSB2ZXJzaW9uDQo+IDMuMSAodGhlIG5leHQgcmVsZWFzZSkgdG8gc3VwcG9ydCB0aGUg
VW5pY29kZSBzZWdtZW50YXRpb24gcnVsZXMgaW4NCj4gVUFYIzI5LiAgTXkgKHVudGVzdGVkKSBn
dWVzcyBpcyB0aGF0IHlvdXIgaHlwaGVuYXRlZCB3b3JkIHdpbGwgYmUga2VwdCBhcw0KPiBhIHNp
bmdsZSB0b2tlbiBpZiB5b3Ugc2V0IHRoZSB2ZXJzaW9uIHRvIDMuMSBvciBoaWdoZXIgaW4gdGhl
IGNvbnN0cnVjdG9yLg0KPiANCj4gU3RldmUNCj4gDQo+ID4gLS0tLS1PcmlnaW5hbCBNZXNzYWdl
LS0tLS0NCj4gPiBGcm9tOiBNYXJ0aW4gTydTaGVhIFttYWlsdG86YXBweTc0QGRzbC5waXBleC5j
b21dDQo+ID4gU2VudDogU3VuZGF5LCBPY3RvYmVyIDI0LCAyMDEwIDM6NTkgUE0NCj4gPiBUbzog
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gU3ViamVjdDogVXNlIG9mIGh5cGhlbnMg
aW4gU3RhbmRhcmRBbmFseXplcg0KPiA+DQo+ID4gSGVsbG8NCj4gPg0KPiA+IEkgaGF2ZSBhIFN0
YW5kYXJkQW5hbHl6ZXIgd29ya2luZyB3aGljaCByZXRyaWV2ZXMgd29yZHMgYW5kIGZyZXF1ZW5j
aWVzDQo+ID4gZnJvbSBhIHNpbmdsZSBkb2N1bWVudCB1c2luZyBhIFRlcm1WZWN0b3JNYXBwZXIg
d2hpY2ggaXMgcG9wdWxhdGluZyBhDQo+ID4gSGFzaE1hcC4NCj4gPg0KPiA+IEJ1dCBpZiBJIHVz
ZSB0aGUgZm9sbG93aW5nIHRleHQgYXMgYSBmaWVsZCBpbiBteSBkb2N1bWVudCwgaS5lLg0KPiA+
DQo+ID4gYWRkRG9jKHcsICJsdWNlbmUgTGF3dG9uLUJyb3duZSBMdWNlbmUiKTsNCj4gPg0KPiA+
IFRoZSB3b3JkIGZyZXF1ZW5jaWVzIHJldHVybmVkIGluIHRoZSBIYXNoTWFwIGFyZToNCj4gPg0K
PiA+IGJyb3duZSAxDQo+ID4gbHVjZW5lIDINCj4gPiBsYXd0b24gMQ0KPiA+DQo+ID4gVGhlIHBy
b2JsZW0gaXMgdGhlIHdvcmRzICdsYXd0b24nIGFuZCAnYnJvd25lJy4gSWYgdGhpcyBpcyBhbiBh
Y3R1YWwNCj4gPiAnZG91YmxlLWJhcnJlbGVkJyBuYW1lLCBjYW4gTHVjZW5lIHJlY29nbmlzZSBp
dCBhcyAnTGF3dG9uLUJyb3duZScgd2hlcmUNCj4gPiB0aGUgbmFtZSBpcyBhY3R1YWxseSBhIHNp
bmdsZSB3b3JkPw0KPiA+DQo+ID4gSSd2ZSB0cmllZCBjb21iaW5hdGlvbnMgb2Y6DQo+ID4NCj4g
PiBhZGREb2ModywgImx1Y2VuZSBcIkxhd3Rvbi1Ccm93bmVcIiBMdWNlbmUiKTsNCj4gPg0KPiA+
IEFuZCBzaW5nbGUgcXVvdGVzIGJ1dCB3aXRob3V0IHN1Y2Nlc3MuDQo+ID4NCj4gPiBUaGFua3MN
Cj4gPg0KPiA+IE1hcnRpbiBPJ1NoZWEuDQoNCg==


From java-user-return-47602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 04:03:10 2010
Return-Path: <java-user-return-47602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56658 invoked from network); 25 Oct 2010 04:03:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 04:03:09 -0000
Received: (qmail 28239 invoked by uid 500); 25 Oct 2010 04:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27999 invoked by uid 500); 25 Oct 2010 04:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27980 invoked by uid 99); 25 Oct 2010 04:03:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 04:03:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dianpuma@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 04:03:00 +0000
Received: by gyg4 with SMTP id 4so2097937gyg.35
        for <java-user@lucene.apache.org>; Sun, 24 Oct 2010 21:02:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Vm1Rnu32zxuGTWNuWFXd5qiz3SelhdsLnoL7y1h6lpw=;
        b=lgcecaNW+BpXh9JDJB6be+QcoSt3aR8GbymJkTAeNLxAH/tqYIFfx04Ab6SUhmDGXj
         2UNOKoxfxil63B738f1dziAX7dhCRPj+1CM35224zCuhn9HqrJ9NKXkvJTC3uLXdcCIF
         tcAeqFi1F+ryaYS+LQPWKPmOgxwIvheMWv9VQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gWqx+QYjQ4XQc5oy7SGKo3no/i3I3U13iZEO+qoeISriY9bS74AFWYeGcVGfZCatAk
         MWIW3yCZU2d8sX9LTHSz38M1Ks0XbgPdjprFLa7Q0k8UcMmTCm4BwekQhFLX9mmdfETQ
         F9D0bT2GecA3WZduSOA+TTqqD3psge5x0+qeY=
MIME-Version: 1.0
Received: by 10.42.16.6 with SMTP id n6mr4226359ica.472.1287979359192; Sun, 24
 Oct 2010 21:02:39 -0700 (PDT)
Received: by 10.231.186.210 with HTTP; Sun, 24 Oct 2010 21:02:39 -0700 (PDT)
In-Reply-To: <009e01cb730d$64907930$2db16b90$@thetaphi.de>
References: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>
	<009e01cb730d$64907930$2db16b90$@thetaphi.de>
Date: Mon, 25 Oct 2010 11:02:39 +0700
Message-ID: <AANLkTi==p+9swB2dhhD9V=WqvVrttz=ozDgjuoEA41bd@mail.gmail.com>
Subject: Re: Need Help: Lucene with PHP/Java Bridge
From: dian puma <dianpuma@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi.
I still have problem with it

My code worked well when I run it by command line, ex."php srcLucene.php"
But it didn't work on web browser, still got an error like this.
================================================================
indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
CreateInstance failed: new
org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
(o:Analyzer)[c:StandardAnalyzer],
(o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
java.lang.IllegalArgumentException:
java.lang.ClassCastException@506411 Responsible VM:
1.6.0_20@http://java.sun.com/" at: #-8
sun.reflect.GeneratedConstructorAccessor1.newInstance(Unknown Source)
#-7 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
#-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
java_Client->getWrappedResult(false) #3 Java.inc(481):
java_Client->getInternalResult() #4 Java.inc(703):
java_Client->createObject('org.apache.luce...', Array, true) #5
Java.inc(834): java_create(Array, true) #6
/var/www/html/DLL/luceneweb/lucenetes/srcLucene.php(22):
Java->Java('org.apache.luce...', '/tmp/idxOIP8mb....', Object(Java),
true) #7 {main}]
==================================================================

I'm using
Linux CentOS 5.2,
Jdk 1.6.0_20,
PHP 5.1.6,
Apache Web Server 2.2

Any suggestion?

Thanks
--
Dian


On 10/24/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> Are you sure that you use the same Lucene version? If you use latest (3.0.x)
> now, then your IndexWriter ctor cannot work, because you have to call
> FSDirectory.open() in java code first. Directly passing a native
> java.io.File to IW is no longer possible. So maybe it simply does not find
> the correct ctor?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 06:13:55 2010
Return-Path: <java-user-return-47603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83808 invoked from network); 25 Oct 2010 06:13:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 06:13:55 -0000
Received: (qmail 79344 invoked by uid 500); 25 Oct 2010 06:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78997 invoked by uid 500); 25 Oct 2010 06:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78989 invoked by uid 99); 25 Oct 2010 06:13:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 06:13:48 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 06:13:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id EBE9345F55A
	for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 08:13:19 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OrIjdwXxWHvn for <java-user@lucene.apache.org>;
	Mon, 25 Oct 2010 08:13:17 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B930045F435
	for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 08:13:16 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTikPNFWTVuommg0On3ZeKD6F4oPTV1NKUZGWBVM+@mail.gmail.com>	<009e01cb730d$64907930$2db16b90$@thetaphi.de> <AANLkTi==p+9swB2dhhD9V=WqvVrttz=ozDgjuoEA41bd@mail.gmail.com>
In-Reply-To: <AANLkTi==p+9swB2dhhD9V=WqvVrttz=ozDgjuoEA41bd@mail.gmail.com>
Subject: RE: Need Help: Lucene with PHP/Java Bridge
Date: Mon, 25 Oct 2010 08:14:15 +0200
Message-ID: <010001cb740b$d9c24180$8d46c480$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQEartE5CGWWu5mhC6IqigQZsxai7QI3ZjHdAhMvPIOUkGS1AA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

In general this happens if you have two different Lucene versions in your
classpath. Try to find out if there may be another 3.0.1 version somewhere
in your classpath. I have no idea how to configure that in your
webserver's/php.ini config, but it looks like that is the problem.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: dian puma [mailto:dianpuma@gmail.com]
> Sent: Monday, October 25, 2010 6:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: Need Help: Lucene with PHP/Java Bridge
> 
> Hi.
> I still have problem with it
> 
> My code worked well when I run it by command line, ex."php srcLucene.php"
> But it didn't work on web browser, still got an error like this.
> ================================================================
> indexing ... Exception occured: [[o:Exception]:"java.lang.Exception:
> CreateInstance failed: new
> org.apache.lucene.index.IndexWriter((o:Directory)[o:String],
> (o:Analyzer)[c:StandardAnalyzer],
> (o:IndexWriter$MaxFieldLength)[o:Boolean]). Cause:
> java.lang.IllegalArgumentException:
> java.lang.ClassCastException@506411 Responsible VM:
> 1.6.0_20@http://java.sun.com/" at: #-8
> sun.reflect.GeneratedConstructorAccessor1.newInstance(Unknown Source)
> #-7
>
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstru
> ctorAccessorImpl.java:27)
> #-6 java.lang.reflect.Constructor.newInstance(Constructor.java:513) #0
> Java.inc(161): java_ThrowExceptionProxyFactory->getProxy(6, false) #1
> Java.inc(314): java_Arg->getResult(false) #2 Java.inc(317):
> java_Client->getWrappedResult(false) #3 Java.inc(481):
> java_Client->getInternalResult() #4 Java.inc(703):
> java_Client->createObject('org.apache.luce...', Array, true) #5
> Java.inc(834): java_create(Array, true) #6
> /var/www/html/DLL/luceneweb/lucenetes/srcLucene.php(22):
> Java->Java('org.apache.luce...', '/tmp/idxOIP8mb....', Object(Java),
> true) #7 {main}]
> ================================================================
> ==
> 
> I'm using
> Linux CentOS 5.2,
> Jdk 1.6.0_20,
> PHP 5.1.6,
> Apache Web Server 2.2
> 
> Any suggestion?
> 
> Thanks
> --
> Dian
> 
> 
> On 10/24/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> > Are you sure that you use the same Lucene version? If you use latest
> > (3.0.x) now, then your IndexWriter ctor cannot work, because you have
> > to call
> > FSDirectory.open() in java code first. Directly passing a native
> > java.io.File to IW is no longer possible. So maybe it simply does not
> > find the correct ctor?
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 09:31:09 2010
Return-Path: <java-user-return-47604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39216 invoked from network); 25 Oct 2010 09:31:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 09:31:08 -0000
Received: (qmail 26971 invoked by uid 500); 25 Oct 2010 09:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24454 invoked by uid 500); 25 Oct 2010 09:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23858 invoked by uid 99); 25 Oct 2010 09:30:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 09:30:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 09:30:49 +0000
Received: by wwi17 with SMTP id 17so3259776wwi.5
        for <multiple recipients>; Mon, 25 Oct 2010 02:30:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=dvQ3P08mO/nwdmmV1RnmRr0vwPXdYYIawG/ZdjCZx54=;
        b=hkE8nydheXZphKp1Da+zyMCrXQz4SQo7CFbU1dfXPrnE2X+ksK+OLPMWQxNSJBvizq
         gSPqihPh3ZkQL+vL+2YwCMXG99dgQ/jgzZfU8H2BrU9zfH0AA2DVyYEmw5uioUm4qb2s
         e/rPdVnvEOMzBEkqmfq7pt8/kO69wYtc8ieB8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=mxITCBuLe7PTW6WNCcWj6u25v0uW9M6wN+VEN2CrUbGKLaj+Va3l9+aetXDZQQLFxw
         aF768UqtMYy0oi2a21eUljx0OJziMJYOHOfs1R2sr5mvqI1r7YXX1GMTdN/tG78Mo9br
         /4Hq2vXMT+H8hVHW7EWzwMM1TVwlZB8CoLaJ0=
Received: by 10.216.37.4 with SMTP id x4mr156647wea.1.1287999028811; Mon, 25
 Oct 2010 02:30:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.15.16 with HTTP; Mon, 25 Oct 2010 02:30:08 -0700 (PDT)
From: Bradford Stephens <bradfordstephens@gmail.com>
Date: Mon, 25 Oct 2010 02:30:08 -0700
Message-ID: <AANLkTimNVb1vVA6kfY9cSeunQ6zjbh5F9qoKN9yHHQwF@mail.gmail.com>
Subject: Seattle Scalability Meetup: Rackspace OpenStack, Karmasphere Hadoop,
 Wed Oct 27
To: organize <Organize@seattletechstartups.com>, common-user@hadoop.apache.org, 
	solr-user@lucene.apache.org, java-user@lucene.apache.org, 
	nosql-discussion@googlegroups.com, hbase-user@hadoop.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Link/Details:
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/calendar/13704371/

This meetup focuses on Scalability and technologies to enable handling
large amounts of data: Hadoop, HBase, distributed NoSQL databases, and
more! There's not only a focus on technology, but also everything
surrounding it including operations, management, business use cases,
etc. We've had great success in the past, and are growing quickly!
Including guests from LinkedIn, Amazon, Twitter, Facebook, Cloudant,
and 10gen/MongoDB.

This month's guests:
Mike Mayo, Rackspace, Learn details on Rackspace's new Open Cloud
offering -- a complete scalable cloud stack, but open source!
Abe Taha, VP Engineering, Karmasphere: Karmasphere produces a Hadoop
development environment. Learn more about working with Hadoop
effectively, and see their exciting new offerings.

Location:
Amazon HQ, Von Vorst Building, 426 Terry Ave N., Seattle, WA 98109-5210

Afterparty:
Fierabend, 422 Yale Ave N


--
Bradford Stephens,
Founder, Drawn to Scale
drawntoscalehq.com
727.697.7528

http://www.drawntoscalehq.com --=A0 The intuitive, cloud-scale data
solution. Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 10:58:38 2010
Return-Path: <java-user-return-47605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60524 invoked from network); 25 Oct 2010 10:58:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 10:58:38 -0000
Received: (qmail 8502 invoked by uid 500); 25 Oct 2010 10:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8293 invoked by uid 500); 25 Oct 2010 10:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8285 invoked by uid 99); 25 Oct 2010 10:58:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 10:58:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of danbsutton@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 10:58:24 +0000
Received: by qyk34 with SMTP id 34so1291616qyk.14
        for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 03:58:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=g+nUrQex5eaF1tFYXDZERx9x/ibZUDcY1d5z/Ep+m/w=;
        b=rb13gHa6r7RwoH+4Opt6ApRIrM5KW9bSemwFFnlXvXe2f0TrTUlq7HSY0Y7nz5oTWO
         seIlqL0h0jSMkk3y0IaD4kIHxaBT+hTkgvHIw6zmyhQEELa9VY8zg99/CkDI2Zb5vnaZ
         9hxkjN6hIjzoSd2aUapQC8pIZ9I6ftQFRx5es=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=eoHp/aaPeCaxB1InthVk0uTrQ8hsFlHTuINJU3Wk7Ed8Ohr3G9b1z8tznkKNQLUsCV
         5Ikd46Dozo48SgVilolKOW/xVoqpwd/JKh1KQHRt9wAXVGP7Mas1tC7mgDDaOx3OEHqv
         +RCu35+2CttXoQmIxZUNLhNrozxR9fPCpy4zA=
MIME-Version: 1.0
Received: by 10.224.190.197 with SMTP id dj5mr99483qab.129.1288004283735; Mon,
 25 Oct 2010 03:58:03 -0700 (PDT)
Received: by 10.229.141.129 with HTTP; Mon, 25 Oct 2010 03:58:03 -0700 (PDT)
Date: Mon, 25 Oct 2010 11:58:03 +0100
Message-ID: <AANLkTikhe-NtJL5eLFgWfD02Z29+cSycxGj8wZgw7rHx@mail.gmail.com>
Subject: MultiFieldQueryParser
From: dan sutton <danbsutton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fb2a1cd207404936edd33
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fb2a1cd207404936edd33
Content-Type: text/plain; charset=ISO-8859-1

Hi,

MultiFieldQueryParser($Revision: 965585) says that when you pass something
like  (title=>5 body=>10) you can get

+(title:term1^5.0 body:term1^10.0) +(title:term2^5.0 body:term2^10.0),

whereas what I have received is the following (with Version.LUCENE_40):

+(title:term1 title:term2)^5.0 +(body:term1 body:term2)^10.0;

Which is something different ... does anyone know how I can get it as the
fomer?

Cheers,
Dan

--20cf300fb2a1cd207404936edd33--

From java-user-return-47606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 13:28:00 2010
Return-Path: <java-user-return-47606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12302 invoked from network); 25 Oct 2010 13:28:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 13:28:00 -0000
Received: (qmail 83769 invoked by uid 500); 25 Oct 2010 13:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82256 invoked by uid 500); 25 Oct 2010 13:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82239 invoked by uid 99); 25 Oct 2010 13:27:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 13:27:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Oct 2010 13:27:48 +0000
Received: (qmail 11966 invoked by uid 99); 25 Oct 2010 13:27:28 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 13:27:28 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: ApacheCon Atlanta next week
Date: Mon, 25 Oct 2010 09:27:26 -0400
Message-Id: <6F6C690D-C55A-43EC-8074-32BA746A8B2C@apache.org>
To: user@mahout.apache.org,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 Lucene mailing list <general@lucene.apache.org>
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)

Hi All,

Just a couple of notes about ApacheCon next week for those who either =
are attending or are thinking of attending.

1. There will be Lucene and Solr 2 day trainings done by Erik Hatcher =
(Solr) and me (Lucene).  It's not too late to sign up.  See =
http://na.apachecon.com/c/acna2010/schedule/grid

2. We've got a good deal of content on Lucene, Solr, Tika, Mahout, etc. =
planned for the week (Thursday and Friday)  Again, see =
http://na.apachecon.com/c/acna2010/schedule/grid

3. There will be a Meetup on Tuesday night.  See =
http://wiki.apache.org/apachecon/ApacheMeetupsNa10.  On this front, we =
are looking for people interested in giving 20-30 min. presentations on =
what they are doing with any of the Lucene ecosystem technologies.  If =
you are interested, let me know.  Otherwise, we will likely make it more =
informal as a networking/QA meetup.

Hope to see you there,
Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 15:04:15 2010
Return-Path: <java-user-return-47607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60713 invoked from network); 25 Oct 2010 15:04:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 15:04:15 -0000
Received: (qmail 47693 invoked by uid 500); 25 Oct 2010 15:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47288 invoked by uid 500); 25 Oct 2010 15:04:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47086 invoked by uid 99); 25 Oct 2010 15:04:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 15:04:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 15:04:03 +0000
Received: by bwz19 with SMTP id 19so3585817bwz.35
        for <multiple recipients>; Mon, 25 Oct 2010 08:03:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=CtoLskUEu2Zag17SE9D5dym6KuNW0brV9BdLFY5qiU4=;
        b=tVRH9sIMj1xdS/M6swU5pvvx0nR1pS4F5yyrAhfP2aZuSceIh3lyeNXvYUEQL5JJDe
         3MZCIAfMdfkcmy45WquWwxMFZJ21eCMCGY8aJpLdT5xvZqYxZ3RoOD9pW1A8a/DTgFIh
         JpSuLdUgL4OMEaG5rPkyFOZBmDh2FYhC7A04E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=isFHqBqA4o3HlW5BWHWnlykY9VLC1QQNIr8A+LHV2DURPXjEKEdsniwY8qtL5mwrto
         /BY+zdj3QtwKMC5wWy1hh8OjJM0dzVf7Qb6rWzT9NX4ilL1TvS2eLA1+hPA2CnKrAcBP
         V8pqpjNdZOyXrZFM6jn1Xx3TgYz9ntpFXFDyc=
MIME-Version: 1.0
Received: by 10.204.118.12 with SMTP id t12mr5158739bkq.179.1288019021856;
 Mon, 25 Oct 2010 08:03:41 -0700 (PDT)
Received: by 10.204.115.74 with HTTP; Mon, 25 Oct 2010 08:03:41 -0700 (PDT)
Date: Mon, 25 Oct 2010 16:03:41 +0100
Message-ID: <AANLkTikzcoyGF4+2sz9dE1PzLyxp63GVnD-G1MyoYimj@mail.gmail.com>
Subject: London open-source search social - 28th Oct - NEW VENUE
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net, users@elasticsearch.com
Content-Type: text/plain; charset=ISO-8859-1

Just a reminder that we're meeting this Thursday near St James Park/Westminster.

Details on the Meetup page:
http://www.meetup.com/london-search-social/

Rich


-- 
Richard Marr

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 19:06:50 2010
Return-Path: <java-user-return-47608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86434 invoked from network); 25 Oct 2010 19:06:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 19:06:50 -0000
Received: (qmail 46075 invoked by uid 500); 25 Oct 2010 19:06:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45818 invoked by uid 500); 25 Oct 2010 19:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45786 invoked by uid 99); 25 Oct 2010 19:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 19:06:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 97.65.90.20 is neither permitted nor denied by domain of eduardop@occ.com.mx)
Received: from [97.65.90.20] (HELO srvestadisticas.occprod.com) (97.65.90.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 19:06:42 +0000
Received: from occm01 ([10.10.79.169]) by srvestadisticas.occprod.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 25 Oct 2010 14:13:50 -0500
From: "Eduardo Pierdant" <eduardop@occ.com.mx>
To: <java-user@lucene.apache.org>,
	"'organize'" <Organize@seattletechstartups.com>,
	<common-user@hadoop.apache.org>,
	<solr-user@lucene.apache.org>,
	<nosql-discussion@googlegroups.com>,
	<hbase-user@hadoop.apache.org>
References: <AANLkTimNVb1vVA6kfY9cSeunQ6zjbh5F9qoKN9yHHQwF@mail.gmail.com>
In-Reply-To: <AANLkTimNVb1vVA6kfY9cSeunQ6zjbh5F9qoKN9yHHQwF@mail.gmail.com>
Subject: RE: Seattle Scalability Meetup: Rackspace OpenStack, Karmasphere Hadoop, Wed Oct 27
Date: Mon, 25 Oct 2010 14:06:16 -0500
Organization: OCCMundial
Message-ID: <005101cb7477$b4bdd0e0$1e3972a0$@occ.com.mx>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQLzlv0R1TvVEGrv2a9+mcd5lCPkypEBwUlA
Content-Language: es-mx
X-OriginalArrivalTime: 25 Oct 2010 19:13:50.0966 (UTC) FILETIME=[C1FCD160:01CB7478]

Alguien en M=E9xico interesado en hacer reuniones similares?

Eduardo

-----Original Message-----
From: Bradford Stephens [mailto:bradfordstephens@gmail.com]=20
Sent: lunes, 25 de octubre de 2010 04:30 a.m.
To: organize; common-user@hadoop.apache.org; =
solr-user@lucene.apache.org;
java-user@lucene.apache.org; nosql-discussion@googlegroups.com;
hbase-user@hadoop.apache.org
Subject: Seattle Scalability Meetup: Rackspace OpenStack, Karmasphere
Hadoop, Wed Oct 27

Link/Details:
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/calendar/13704371=
/

This meetup focuses on Scalability and technologies to enable handling =
large
amounts of data: Hadoop, HBase, distributed NoSQL databases, and more!
There's not only a focus on technology, but also everything surrounding =
it
including operations, management, business use cases, etc. We've had =
great
success in the past, and are growing quickly!
Including guests from LinkedIn, Amazon, Twitter, Facebook, Cloudant, and
10gen/MongoDB.

This month's guests:
Mike Mayo, Rackspace, Learn details on Rackspace's new Open Cloud =
offering
-- a complete scalable cloud stack, but open source!
Abe Taha, VP Engineering, Karmasphere: Karmasphere produces a Hadoop
development environment. Learn more about working with Hadoop =
effectively,
and see their exciting new offerings.

Location:
Amazon HQ, Von Vorst Building, 426 Terry Ave N., Seattle, WA 98109-5210

Afterparty:
Fierabend, 422 Yale Ave N


--
Bradford Stephens,
Founder, Drawn to Scale
drawntoscalehq.com
727.697.7528

http://www.drawntoscalehq.com --=A0 The intuitive, cloud-scale data =
solution.
Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social =
Media,
and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 23:01:06 2010
Return-Path: <java-user-return-47609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80831 invoked from network); 25 Oct 2010 23:01:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 23:01:06 -0000
Received: (qmail 2175 invoked by uid 500); 25 Oct 2010 23:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2109 invoked by uid 500); 25 Oct 2010 23:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2101 invoked by uid 99); 25 Oct 2010 23:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 23:01:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [65.99.197.50] (HELO s01.igfoo.com) (65.99.197.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 23:00:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by s01.igfoo.com (Postfix) with ESMTP id DE608F3450E
	for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 18:00:36 -0500 (CDT)
X-DKIM: Sendmail DKIM Filter v2.5.4 s01.igfoo.com DE608F3450E
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=igfoo.com; s=mail;
	t=1288047636; bh=3KcKKvfU+nGZq66HtcXrnLOVuJ7Ef1JKx0LAPmCtA4A=;
	h=Message-ID:Date:From:MIME-Version:To:Subject:Content-Type:
	 Content-Transfer-Encoding; b=bGrsNQrfzeXQI8ZqBrX0X6eQB97JWA+X1HEKE
	1Q5rNAW0WeTsvuzkLC47SrXqRfAZwvDE/TRcuphnVOasc6rp3V+msrN3ldt4Uo8gDZJ
	1fWysefl/15KlZtifg9PrUogm8m8xRyhuAgnTgWwkdqCSSFu5McUXFA3iOHtiKbvmN8
	=
X-Virus-Scanned: Debian amavisd-new at s01.igfoo.com
Received: from s01.igfoo.com ([127.0.0.1])
	by localhost (s01.igfoo.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id V2sw3o4CKyV2 for <java-user@lucene.apache.org>;
	Mon, 25 Oct 2010 18:00:32 -0500 (CDT)
Received: from [192.168.1.24] (pool-71-170-223-153.dllstx.fios.verizon.net [71.170.223.153])
	by s01.igfoo.com (Postfix) with ESMTPSA id A554EF3439D
	for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 18:00:32 -0500 (CDT)
X-DKIM: Sendmail DKIM Filter v2.5.4 s01.igfoo.com A554EF3439D
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=igfoo.com; s=mail;
	t=1288047632; bh=3KcKKvfU+nGZq66HtcXrnLOVuJ7Ef1JKx0LAPmCtA4A=;
	h=Message-ID:Date:From:MIME-Version:To:Subject:Content-Type:
	 Content-Transfer-Encoding; b=WFlq8MfHZVCR7Y4dvIvBxLWnuVfbXndzExlIq
	u1JrRUf6r7mE/AiOH7Yq5tXMT9a7BlNAv6GNALeVylMC3WthN8qmRBM/ZK+Ajux+3az
	FCBe9Vvbc3KlBIWcfD3duK1/Q/Stg9i+ss7zNbSfIlli+L7Thy8wZTZ+2cwEoHQIKSs
	=
Message-ID: <4CC60C10.2000708@apache.org>
Date: Mon, 25 Oct 2010 18:00:32 -0500
From: Dennis Kubes <kubes@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.11) Gecko/20101021 Thunderbird/3.1.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Function Query, Required Clauses, and Matching
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

A curiosity.  Some of the documentation for function queries says they 
match every document in the index.  When running a query that has 
boolean required clauses and an optional ValueSourceQuery or function 
query is the function query still matched against every document in the 
index or is it only on those documents that match required clauses?

Dennis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 25 23:12:46 2010
Return-Path: <java-user-return-47610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89155 invoked from network); 25 Oct 2010 23:12:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Oct 2010 23:12:46 -0000
Received: (qmail 17262 invoked by uid 500); 25 Oct 2010 23:12:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17179 invoked by uid 500); 25 Oct 2010 23:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17171 invoked by uid 99); 25 Oct 2010 23:12:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 23:12:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Oct 2010 23:12:37 +0000
Received: by wyg36 with SMTP id 36so4150292wyg.35
        for <java-user@lucene.apache.org>; Mon, 25 Oct 2010 16:12:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=0trzAITF6PUa/NTH9NASQbwzS+8f8Tgfk8XwunHc/NQ=;
        b=c9jDwl5RIi51Leme4tYZkr+qs9ZUl12SJ46ZYapSIV3mzL+0jmsZ1gyFYBSvKNsSJ0
         5qwUjff0tVDx6GuI8FNpV9eISuENcD5ZkOSHggHFzO91lqVGoBvEefO9bNPz3agQZhyo
         izW+3iCgu6Bwcr6bq+7j0ZNufppGdjxs+m+jc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=XEvTZmLz4eM7nVrlB9JbKnI0R9z4/2rNhN9CC7VC+m7iJrqPSW0HdjHl7nYxyzU9SA
         vVeG5TLk99po5DK2QNI7ymzJ96/UPC9Ou0UMh21kT16T5tSXqBkFsbIreIAb38BHMI00
         C4/bAMrU2Kt7HeGqRpFwjC+fA8jEBelSPVzr4=
MIME-Version: 1.0
Received: by 10.216.3.145 with SMTP id 17mr951208weh.109.1288048337635; Mon,
 25 Oct 2010 16:12:17 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.133.228 with HTTP; Mon, 25 Oct 2010 16:12:17 -0700 (PDT)
In-Reply-To: <4CC60C10.2000708@apache.org>
References: <4CC60C10.2000708@apache.org>
Date: Mon, 25 Oct 2010 19:12:17 -0400
X-Google-Sender-Auth: 8uNED7JupGZSSz6BJoN8xev82xg
Message-ID: <AANLkTik4YkdrSH4BKjB3=y=RLrOTZT49qp-LSQJ70xQg@mail.gmail.com>
Subject: Re: Function Query, Required Clauses, and Matching
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Oct 25, 2010 at 7:00 PM, Dennis Kubes <kubes@apache.org> wrote:
> A curiosity. =A0Some of the documentation for function queries says they =
match
> every document in the index. =A0When running a query that has boolean req=
uired
> clauses and an optional ValueSourceQuery or function query is the functio=
n
> query still matched against every document in the index or is it only on
> those documents that match required clauses?

It's only those that match the required clauses.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 00:17:19 2010
Return-Path: <java-user-return-47611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11418 invoked from network); 26 Oct 2010 00:17:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 00:17:19 -0000
Received: (qmail 76964 invoked by uid 500); 26 Oct 2010 00:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76929 invoked by uid 500); 26 Oct 2010 00:17:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76921 invoked by uid 99); 26 Oct 2010 00:17:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 00:17:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prvs=19088aa276=eugene.kovnatsky@dexone.com designates 66.193.212.230 as permitted sender)
Received: from [66.193.212.230] (HELO rmg.dexone.com) (66.193.212.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 00:17:08 +0000
Received: from ([144.163.32.173])
	by rmg.dexone.com with ESMTP  id 6845ZK1.5793524;
	Mon, 25 Oct 2010 20:16:45 -0400
Received: from DCPEVS02.rhdroot.com ([144.163.94.83]) by rhddenowa01.rhdroot.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 25 Oct 2010 18:16:45 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB74A3.12CC01D2"
Subject: Lucene Software/Hardware Setup Question
Date: Mon, 25 Oct 2010 18:16:44 -0600
Message-ID: <26048344E51BEE42B8421C5DA5A73CDD81E9A0@DCPEVS02.rhdroot.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Software/Hardware Setup Question
Thread-Index: Act0oxJIyjdaOOq+RruQjGSx3v8AEQ==
From: "Kovnatsky, Eugene" <Eugene.Kovnatsky@dexone.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Oct 2010 00:16:45.0211 (UTC) FILETIME=[12AE86B0:01CB74A3]

------_=_NextPart_001_01CB74A3.12CC01D2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi guys,=20

I am trying to get some information on what enterprise hardware folks
use out there. We are using Lucene extensively. Our total catalogs size
is roughly 50GB between roughly 8 various catalogs, 2 of which take up
60-70% of this size.

So my question is - if any of you guys have similar catalog sizes then
what kind of software/hardware do you have running, i.e. what app
servers, how many, what hardware are these app servers running on?

Any information would be helpful.

Thanks in advance.=20
=20
Eugene.

------_=_NextPart_001_01CB74A3.12CC01D2--

From java-user-return-47612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 06:33:37 2010
Return-Path: <java-user-return-47612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25427 invoked from network); 26 Oct 2010 06:33:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 06:33:37 -0000
Received: (qmail 49200 invoked by uid 500); 26 Oct 2010 06:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48892 invoked by uid 500); 26 Oct 2010 06:33:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 95391 invoked by uid 99); 25 Oct 2010 19:43:15 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB747C.CC8653F5"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Problem with sorting on NumericFields
Date: Mon, 25 Oct 2010 21:42:46 +0200
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB01F046C3@owamz.healy-hudson.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with sorting on NumericFields
Thread-Index: Act0fMw0NARBcJSQS/6pdX6nGQka0w==
From: "Uwe Goetzke" <uwe.goetzke@veenion.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB747C.CC8653F5
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I got stuck on a problem using  NumericFields using with lucene 2.9.3

=20

I add values  to the document by

doc.add(new NumericField("minprice").setDoubleValue(net_price));

=20

If I want to search with a sorter for this field, I get this error:

=20

java.lang.NumberFormatException: Invalid shift value in prefixCoded
string (is encoded value really an INT?)

                at
org.apache.lucene.util.NumericUtils.prefixCodedToInt(NumericUtils.java:2
33)

                at
org.apache.lucene.search.FieldCache$8.parseFloat(FieldCache.java:256)

                at
org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
eImpl.java:514)

                at
org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
4)

                at
org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
7)

                at
org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
eImpl.java:504)

                at
org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
4)

                at
org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
7)

                at
org.apache.lucene.search.FieldComparator$FloatComparator.setNextReader(F
ieldComparator.java:269)

                at
org.apache.lucene.search.TopFieldCollector$MultiComparatorNonScoringColl
ector.setNextReader(TopFieldCollector.java:435)

                at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:257)

                at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:240)

                at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:181)

                at
org.apache.lucene.search.Searcher.search(Searcher.java:90)

=20

The Sort field as seen by the debugger:

*	sort_fields =3D {org.apache.lucene.search.SortField[1]@9010}=20
*	[0] =3D {org.apache.lucene.search.SortField@9011}"!"=20
*	field =3D {java.lang.String@8642}"minprice"=20
*	type =3D 5=20
*	locale =3D null=20
*	reverse =3D true=20
*	factory =3D null=20
*	parser =3D null=20
*	comparatorSource =3D null=20
*	useLegacy =3D false=20

I run out of ideas what might go wrong. I did look at the index with
luke and I do not see anything special.=20

As this happens with the same code on other servers, too, It looks like
some kind of programming error.

Any hints?=20

Thx

=20

Uwe=20

=20


------_=_NextPart_001_01CB747C.CC8653F5--

From java-user-return-47613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 07:29:16 2010
Return-Path: <java-user-return-47613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47832 invoked from network); 26 Oct 2010 07:29:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 07:29:16 -0000
Received: (qmail 32768 invoked by uid 500); 26 Oct 2010 07:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32423 invoked by uid 500); 26 Oct 2010 07:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32409 invoked by uid 99); 26 Oct 2010 07:29:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 07:29:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 07:29:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 092BAD36006
	for <java-user@lucene.apache.org>; Tue, 26 Oct 2010 09:28:40 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Pi--TjO6-M2P for <java-user@lucene.apache.org>;
	Tue, 26 Oct 2010 09:28:38 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 22097D36002
	for <java-user@lucene.apache.org>; Tue, 26 Oct 2010 09:28:38 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <D7206503EB5BE94497458AF4FE4AE8AB01F046C3@owamz.healy-hudson.com>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8AB01F046C3@owamz.healy-hudson.com>
Subject: RE: Problem with sorting on NumericFields
Date: Tue, 26 Oct 2010 09:29:38 +0200
Message-ID: <01f701cb74df$8bf724f0$a3e56ed0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQEzmxqCrLP9FtpfT2jlE+EqKC+dDJSCh+EQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

This happens if your field still contains other value types in this field,
maybe from deleted documents. The problem is that even if no document
contains the old field encoding anymore, it could still be leftover terms in
terms index. So the FieldCache code loads the terms (even if no longer
documents are attached) and  tries to parse it. So if it was before a
different field type like a conventional plain text encoded numeric, the
parsing of those old terms fails. You should reindex the whole stuff or at
least try to optimize the index to get rid of deleted documents and the
terms.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Goetzke [mailto:uwe.goetzke@veenion.de]
> Sent: Monday, October 25, 2010 9:43 PM
> To: java-user@lucene.apache.org
> Subject: Problem with sorting on NumericFields
> 
> I got stuck on a problem using  NumericFields using with lucene 2.9.3
> 
> 
> 
> I add values  to the document by
> 
> doc.add(new NumericField("minprice").setDoubleValue(net_price));
> 
> 
> 
> If I want to search with a sorter for this field, I get this error:
> 
> 
> 
> java.lang.NumberFormatException: Invalid shift value in prefixCoded string
(is
> encoded value really an INT?)
> 
>                 at
> org.apache.lucene.util.NumericUtils.prefixCodedToInt(NumericUtils.java:2
> 33)
> 
>                 at
> org.apache.lucene.search.FieldCache$8.parseFloat(FieldCache.java:256)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
> eImpl.java:514)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
> 4)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
> 7)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
> eImpl.java:504)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
> 4)
> 
>                 at
> org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
> 7)
> 
>                 at
> org.apache.lucene.search.FieldComparator$FloatComparator.setNextReader(F
> ieldComparator.java:269)
> 
>                 at
> org.apache.lucene.search.TopFieldCollector$MultiComparatorNonScoringColl
> ector.setNextReader(TopFieldCollector.java:435)
> 
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:257)
> 
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:240)
> 
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:181)
> 
>                 at
> org.apache.lucene.search.Searcher.search(Searcher.java:90)
> 
> 
> 
> The Sort field as seen by the debugger:
> 
> *	sort_fields = {org.apache.lucene.search.SortField[1]@9010}
> *	[0] = {org.apache.lucene.search.SortField@9011}"!"
> *	field = {java.lang.String@8642}"minprice"
> *	type = 5
> *	locale = null
> *	reverse = true
> *	factory = null
> *	parser = null
> *	comparatorSource = null
> *	useLegacy = false
> 
> I run out of ideas what might go wrong. I did look at the index with luke
and I
> do not see anything special.
> 
> As this happens with the same code on other servers, too, It looks like
some
> kind of programming error.
> 
> Any hints?
> 
> Thx
> 
> 
> 
> Uwe
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 07:47:36 2010
Return-Path: <java-user-return-47614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52628 invoked from network); 26 Oct 2010 07:47:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 07:47:36 -0000
Received: (qmail 55914 invoked by uid 500); 26 Oct 2010 07:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55321 invoked by uid 500); 26 Oct 2010 07:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 41933 invoked by uid 99); 26 Oct 2010 07:35:09 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Problem with sorting on NumericFields
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 26 Oct 2010 09:34:25 +0200
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB01F04700@owamz.healy-hudson.com>
In-Reply-To: <01f701cb74df$8bf724f0$a3e56ed0$@thetaphi.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with sorting on NumericFields
Thread-Index: AQEzmxqCrLP9FtpfT2jlE+EqKC+dDJSCh+EQgAABpYA=
References: <D7206503EB5BE94497458AF4FE4AE8AB01F046C3@owamz.healy-hudson.com> <01f701cb74df$8bf724f0$a3e56ed0$@thetaphi.de>
From: "Uwe Goetzke" <uwe.goetzke@veenion.de>
To: <java-user@lucene.apache.org>

Thx Uwe,

after sleeping over the problem...
The solution just hit me ;)
I index a double for the Numeric field but my Sortfield was setup as a =
float.
(Maybe this is something for a FAQ for NumericFields)

Thx

Uwe

-----Urspr=FCngliche Nachricht-----
Von: Uwe Schindler [mailto:uwe@thetaphi.de]=20
Gesendet: Dienstag, 26. Oktober 2010 09:30
An: java-user@lucene.apache.org
Betreff: RE: Problem with sorting on NumericFields

This happens if your field still contains other value types in this =
field,
maybe from deleted documents. The problem is that even if no document
contains the old field encoding anymore, it could still be leftover =
terms in
terms index. So the FieldCache code loads the terms (even if no longer
documents are attached) and  tries to parse it. So if it was before a
different field type like a conventional plain text encoded numeric, the
parsing of those old terms fails. You should reindex the whole stuff or =
at
least try to optimize the index to get rid of deleted documents and the
terms.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Goetzke [mailto:uwe.goetzke@veenion.de]
> Sent: Monday, October 25, 2010 9:43 PM
> To: java-user@lucene.apache.org
> Subject: Problem with sorting on NumericFields
>=20
> I got stuck on a problem using  NumericFields using with lucene 2.9.3
>=20
>=20
>=20
> I add values  to the document by
>=20
> doc.add(new NumericField("minprice").setDoubleValue(net_price));
>=20
>=20
>=20
> If I want to search with a sorter for this field, I get this error:
>=20
>=20
>=20
> java.lang.NumberFormatException: Invalid shift value in prefixCoded =
string
(is
> encoded value really an INT?)
>=20
>                 at
> =
org.apache.lucene.util.NumericUtils.prefixCodedToInt(NumericUtils.java:2
> 33)
>=20
>                 at
> org.apache.lucene.search.FieldCache$8.parseFloat(FieldCache.java:256)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
> eImpl.java:514)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
> 4)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
> 7)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl$FloatCache.createValue(FieldCach
> eImpl.java:504)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:22
> 4)
>=20
>                 at
> =
org.apache.lucene.search.FieldCacheImpl.getFloats(FieldCacheImpl.java:48
> 7)
>=20
>                 at
> =
org.apache.lucene.search.FieldComparator$FloatComparator.setNextReader(F
> ieldComparator.java:269)
>=20
>                 at
> =
org.apache.lucene.search.TopFieldCollector$MultiComparatorNonScoringColl
> ector.setNextReader(TopFieldCollector.java:435)
>=20
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:257)
>=20
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:240)
>=20
>                 at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:181)
>=20
>                 at
> org.apache.lucene.search.Searcher.search(Searcher.java:90)
>=20
>=20
>=20
> The Sort field as seen by the debugger:
>=20
> *	sort_fields =3D {org.apache.lucene.search.SortField[1]@9010}
> *	[0] =3D {org.apache.lucene.search.SortField@9011}"!"
> *	field =3D {java.lang.String@8642}"minprice"
> *	type =3D 5
> *	locale =3D null
> *	reverse =3D true
> *	factory =3D null
> *	parser =3D null
> *	comparatorSource =3D null
> *	useLegacy =3D false
>=20
> I run out of ideas what might go wrong. I did look at the index with =
luke
and I
> do not see anything special.
>=20
> As this happens with the same code on other servers, too, It looks =
like
some
> kind of programming error.
>=20
> Any hints?
>=20
> Thx
>=20
>=20
>=20
> Uwe
>=20
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 09:26:45 2010
Return-Path: <java-user-return-47615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1884 invoked from network); 26 Oct 2010 09:26:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 09:26:45 -0000
Received: (qmail 63836 invoked by uid 500); 26 Oct 2010 09:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63303 invoked by uid 500); 26 Oct 2010 09:26:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63295 invoked by uid 99); 26 Oct 2010 09:26:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 09:26:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 09:26:31 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Tue, 26 Oct 2010 11:26:11 +0200
Subject: Re: Lucene Software/Hardware Setup Question
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <26048344E51BEE42B8421C5DA5A73CDD81E9A0@DCPEVS02.rhdroot.com>
References: <26048344E51BEE42B8421C5DA5A73CDD81E9A0@DCPEVS02.rhdroot.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 26 Oct 2010 11:26:11 +0200
Message-ID: <1288085171.2481.210.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2010-10-26 at 02:16 +0200, Kovnatsky, Eugene wrote:
> I am trying to get some information on what enterprise hardware folks
> use out there. We are using Lucene extensively. Our total catalogs size
> is roughly 50GB between roughly 8 various catalogs, 2 of which take up
> 60-70% of this size.

That sounds a lot like our setup at the State and University Library,
Denmark. We have about 9M records with an index size of 59GB, with 4,5M
OAI-PMH harvested records and 2,5M bibliographic records from our
Aleph-system. The rest of the records are divided among 16 different
sources.

> So my question is - if any of you guys have similar catalog sizes then
> what kind of software/hardware do you have running, i.e. what app
> servers, how many, what hardware are these app servers running on?

We use a home brewed setup called Summa (open source) to handle the
workflow and the searching. It uses plain Lucene with a few custom
analyzers and some sorting, faceting, suggest and DidYouMean code.
One index holds all the material. Currently the index is updated on one
server and synced to two search-machines, but we're in the middle of
moving the index updating to the servers to get faster updates.

The hardware is 2 mirrored servers for fail-safe. They are running some
Linux variant and have 2.5GHz quad-core Xeons CPU's with 6MB of level 2
cache and 16GB of RAM. We are not using virtualization for this. The
machines uses traditional harddisks for data storage and fairly old
enterprise-class SSD's for the index. To be honest, they are currently
overkill - without faceting the throughput is 50-100 searches/second,
including the overhead of using web-service calls. Faceting slows this
somewhat, but as our traffic is something like 5-10 searches/second at
prime time (guesstimating a lot here, as it is has been a year or two
since I looked at the statistics), most of the time is spend on idle.

Before that we used dual-core Xeons, again with 16GB of RAM and SSD's.
They also performed just fine with our workload and were only replaced
due to a general reorganization of the servers. Before that, we used
used some older 3.1GHz single-core Xeon machines with only 1MB of level
2 cache, 32GB of slow RAM and traditional harddisks. My old 1.8GHz
single-core laptop were about as fast for indexing & searching and they
stand testament that a lot of RAM and GHz does not help much when the
memory system is lacking.

We did a lot of testing some time ago and found that out searches were
mostly CPU-bound when using SSDs. We've talked with our hardware guys
about building new servers in anticipation of more data and the current
vision is relatively modest machines with quad-core i7, 16GB of RAM and
consumer-grade SSDs (Intel or SandForce). As we have mirrored servers
and since no one dies if they can't find a book at our library, using
enterprise-SSDs is just a waste of money.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 12:32:04 2010
Return-Path: <java-user-return-47616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88364 invoked from network); 26 Oct 2010 12:32:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 12:32:03 -0000
Received: (qmail 19789 invoked by uid 500); 26 Oct 2010 12:32:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19522 invoked by uid 500); 26 Oct 2010 12:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19514 invoked by uid 99); 26 Oct 2010 12:31:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 12:31:56 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 12:31:49 +0000
Received: by qwb8 with SMTP id 8so1120298qwb.35
        for <java-user@lucene.apache.org>; Tue, 26 Oct 2010 05:31:28 -0700 (PDT)
Received: by 10.229.228.146 with SMTP id je18mr7854501qcb.13.1288096288084;
        Tue, 26 Oct 2010 05:31:28 -0700 (PDT)
Received: from ISCM6300 (pool-173-73-145-146.washdc.fios.verizon.net [173.73.145.146])
        by mx.google.com with ESMTPS id s28sm7273147qcp.9.2010.10.26.05.31.26
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 26 Oct 2010 05:31:26 -0700 (PDT)
From: "Lucene" <crb-lucene@metainforma.com>
To: <java-user@lucene.apache.org>
References: 
Subject: Next Word - Any Suggestions?
Date: Tue, 26 Oct 2010 08:27:06 -0400
Message-ID: <002201cb7509$1b5e9550$0701a8c0@cgifederal.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0023_01CB74E7.944CF550"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: Act0wKVjXyeeiczeTtqo+ixxaH7pcgAABt+AABITd+A=
In-Reply-To: 

------=_NextPart_000_0023_01CB74E7.944CF550
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Am about to implement a custom query that is sort of mash-up of Facets,
Highlighting, and SpanQuery - but thought I'd see if anyone has done
anything similar. 

 

In simple words, I need facet on the next word given a target word.

 

For example, if my index only had the following 5 documents (comprised of a
sentence each):

 

Doc 1 - The quick brown fox jumped over the fence.

Doc 2 - The sly fox skipped over the fence.

Doc 3 - The fat fox skipped his afternoon class.

Doc 4 - A brown duck and red fox, crashed the party.

Doc 5 - Charles Brown! Fox! Crashed my damn car.

 

The query should give the frequency of the distinct terms after the word
"fox":

 

skipped - 2

crashed - 2 

jumped - 1

 

Long-term, do the opposite - frequency of the distinct terms before the word
"fox":

 

brown - 2

sly - 1

fat - 1 

red - 1

 

My guess is that either the FastVectorHighlighter or SpanQuery would be a
reasonable starting point. I was hoping to take advantage of Vectors as I am
storing termVectors, termPositions, and termOffsets for the field in
question.

 

Grateful for any thoughts . . . reference implementations . . . words of
encouragement . . . free beer - whatever you can offer.

 

Gracias,

 

Christopher

 


------=_NextPart_000_0023_01CB74E7.944CF550--


From java-user-return-47617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 12:43:57 2010
Return-Path: <java-user-return-47617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93580 invoked from network); 26 Oct 2010 12:43:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 12:43:57 -0000
Received: (qmail 42979 invoked by uid 500); 26 Oct 2010 12:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42770 invoked by uid 500); 26 Oct 2010 12:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42387 invoked by uid 99); 26 Oct 2010 12:43:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 12:43:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.246] (HELO nm12-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.246)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Oct 2010 12:43:43 +0000
Received: from [217.146.183.212] by nm12.bullet.mail.ukl.yahoo.com with NNFMP; 26 Oct 2010 12:43:22 -0000
Received: from [217.146.183.62] by tm5.bullet.mail.ukl.yahoo.com with NNFMP; 26 Oct 2010 12:43:21 -0000
Received: from [127.0.0.1] by omp1031.mail.ukl.yahoo.com with NNFMP; 26 Oct 2010 12:43:21 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 601135.17381.bm@omp1031.mail.ukl.yahoo.com
Received: (qmail 17848 invoked by uid 60001); 26 Oct 2010 12:43:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1288097001; bh=RvGN/8DD15i+VD39PhwHPwoaA/g41jMQQGjMML/XVcA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=nBYEPfqSxEQmoCzM41Y6VCTzx1HQQ0HhSYRGW1y1z0XHtPD365KOEjEGemszJsXhOVvCzu0F8zAPKYEiE9SzjYECd0pZTCGaLEdPxaZYXJaLUwy8q4zS33STnrgR17DudWo6+R4/oipaj3LteNGpe4WzDjqzQ87DwQE59O+TeCo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EjB0GQSS+ETz1enzQ3yiReqd6OQpxCEW8jfV30EHmsUEe+txUeLNhWKuwsUKs1RuHYB3xPhy4BnH8ohFYYKZ5jamII/tWO+bwYWZhe8IgrlA4N0lEOyO+hxuCwWgOYnUNU8fL/ZVBJ6qYA8ZqHvO7i7sRzoOJCkdMhe1HilfqmQ=;
Message-ID: <370571.5989.qm@web29001.mail.ird.yahoo.com>
X-YMail-OSG: v7CLlzgVM1l2Ed7XtGvzU6fk62Gh2o8HikHm4HSqmA85FX.
 HK8YPp7MP1t8o7JT9DTwABKu6O7zdKKLR2P8maUIMFIrc2cTdhClNl3x0kLu
 JKUGmBbEmc46XK8xcAGxthEzX8c2Gb17I1eKPxnBco3oOGRc9I3BurJdbX_G
 Le6WP9eT.3DAm3aA5jvH3kIskxW_CIP4j_0ByfB2sGVbPVGLR1yTj5AdCK6I
 H_VGjy7T7lH_IMAOyZrzY6LVY6r_Hw7zb1sLKabrb.I30Cyep9c73H3vgPOY
 QYdXyzwIWdI6dhy4OpT6J2_GnSTHfZW5H.Tk9Aq1ObQ--
Received: from [193.36.230.96] by web29001.mail.ird.yahoo.com via HTTP; Tue, 26 Oct 2010 13:43:21 BST
X-Mailer: YahooMailRC/504.5 YahooMailWebService/0.8.107.284920
References: <002201cb7509$1b5e9550$0701a8c0@cgifederal.com>
Date: Tue, 26 Oct 2010 13:43:21 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Next Word - Any Suggestions?
To: java-user@lucene.apache.org
In-Reply-To: <002201cb7509$1b5e9550$0701a8c0@cgifederal.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

See the Collocation stuff here https://issues.apache.org/jira/browse/LUCENE=
-474=0A=0A=0A----- Original Message ----=0AFrom: Lucene <crb-lucene@metainf=
orma.com>=0ATo: java-user@lucene.apache.org=0ASent: Tue, 26 October, 2010 1=
3:27:06=0ASubject: Next Word - Any Suggestions?=0A=0AAm about to implement =
a custom query that is sort of mash-up of Facets,=0AHighlighting, and SpanQ=
uery - but thought I'd see if anyone has done=0Aanything similar. =0A=0A=0A=
=0AIn simple words, I need facet on the next word given a target word.=0A=
=0A=0A=0AFor example, if my index only had the following 5 documents (compr=
ised of a=0Asentence each):=0A=0A=0A=0ADoc 1 - The quick brown fox jumped o=
ver the fence.=0A=0ADoc 2 - The sly fox skipped over the fence.=0A=0ADoc 3 =
- The fat fox skipped his afternoon class.=0A=0ADoc 4 - A brown duck and re=
d fox, crashed the party.=0A=0ADoc 5 - Charles Brown! Fox! Crashed my damn =
car.=0A=0A=0A=0AThe query should give the frequency of the distinct terms a=
fter the word=0A"fox":=0A=0A=0A=0Askipped - 2=0A=0Acrashed - 2 =0A=0Ajumped=
 - 1=0A=0A=0A=0ALong-term, do the opposite - frequency of the distinct term=
s before the word=0A"fox":=0A=0A=0A=0Abrown - 2=0A=0Asly - 1=0A=0Afat - 1 =
=0A=0Ared - 1=0A=0A=0A=0AMy guess is that either the FastVectorHighlighter =
or SpanQuery would be a=0Areasonable starting point. I was hoping to take a=
dvantage of Vectors as I am=0Astoring termVectors, termPositions, and termO=
ffsets for the field in=0Aquestion.=0A=0A=0A=0AGrateful for any thoughts . =
. . reference implementations . . . words of=0Aencouragement . . . free bee=
r - whatever you can offer.=0A=0A=0A=0AGracias,=0A=0A=0A=0AChristopher=0A=
=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 12:53:50 2010
Return-Path: <java-user-return-47618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96800 invoked from network); 26 Oct 2010 12:53:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 12:53:49 -0000
Received: (qmail 67458 invoked by uid 500); 26 Oct 2010 12:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67216 invoked by uid 500); 26 Oct 2010 12:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67205 invoked by uid 99); 26 Oct 2010 12:53:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 12:53:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 12:53:39 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Tue, 26 Oct 2010 14:53:18 +0200
Subject: Re: Next Word - Any Suggestions?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <002201cb7509$1b5e9550$0701a8c0@cgifederal.com>
References: <002201cb7509$1b5e9550$0701a8c0@cgifederal.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 26 Oct 2010 14:53:19 +0200
Message-ID: <1288097599.2481.222.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2010-10-26 at 14:27 +0200, Lucene wrote:
> In simple words, I need facet on the next word given a target word.

How large do you expect the documents to be and how many hits do you
need to process? If both are low, this seems to be a fairly straight
forward iteration with a HashMap<String, Integer> to collect the counts.

If you're scaling up, you could make a field with all bi-grams and do
prefix faceting on that. 

> Long-term, do the opposite - frequency of the distinct terms before the word
> "fox":

By remembering the previous term, the iteration method should be about
the same as above. For the faceting method, just reverse the order in
the bi-grams.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 26 21:18:21 2010
Return-Path: <java-user-return-47619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70459 invoked from network); 26 Oct 2010 21:18:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Oct 2010 21:18:21 -0000
Received: (qmail 58778 invoked by uid 500); 26 Oct 2010 21:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58611 invoked by uid 500); 26 Oct 2010 21:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58603 invoked by uid 99); 26 Oct 2010 21:18:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 21:18:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prvs=19088aa276=eugene.kovnatsky@dexone.com designates 66.193.212.230 as permitted sender)
Received: from [66.193.212.230] (HELO rmg.dexone.com) (66.193.212.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Oct 2010 21:18:09 +0000
Received: from ([144.163.32.173])
	by rmg.dexone.com with ESMTP  id 6845ZK1.5880316;
	Tue, 26 Oct 2010 17:16:50 -0400
Received: from DCPEVS02.rhdroot.com ([144.163.94.83]) by rhddenowa01.rhdroot.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 26 Oct 2010 15:17:38 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Software/Hardware Setup Question
Date: Tue, 26 Oct 2010 15:17:37 -0600
Message-ID: <26048344E51BEE42B8421C5DA5A73CDD81ED12@DCPEVS02.rhdroot.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Software/Hardware Setup Question
Thread-Index: Act07+v1NyxgNC0fQ/+7Lhv5VCbQRAAYv5VA
References: <26048344E51BEE42B8421C5DA5A73CDD81E9A0@DCPEVS02.rhdroot.com> <1288085171.2481.210.camel@te-prime>
From: "Kovnatsky, Eugene" <Eugene.Kovnatsky@dexone.com>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
X-OriginalArrivalTime: 26 Oct 2010 21:17:38.0759 (UTC) FILETIME=[37B5D570:01CB7553]

Thanks Toke. Very descriptive. A few more questions about your SSD
drive(s)
 - what is its current size=20
 - do you project any growth in your index size
 - if yes then how do you plan to correlate that with your hardware
needs

Thanks again

Eugene.

-----Original Message-----
From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]=20
Sent: Tuesday, October 26, 2010 2:26 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene Software/Hardware Setup Question

On Tue, 2010-10-26 at 02:16 +0200, Kovnatsky, Eugene wrote:
> I am trying to get some information on what enterprise hardware folks=20
> use out there. We are using Lucene extensively. Our total catalogs=20
> size is roughly 50GB between roughly 8 various catalogs, 2 of which=20
> take up 60-70% of this size.

That sounds a lot like our setup at the State and University Library,
Denmark. We have about 9M records with an index size of 59GB, with 4,5M
OAI-PMH harvested records and 2,5M bibliographic records from our
Aleph-system. The rest of the records are divided among 16 different
sources.

> So my question is - if any of you guys have similar catalog sizes then

> what kind of software/hardware do you have running, i.e. what app=20
> servers, how many, what hardware are these app servers running on?

We use a home brewed setup called Summa (open source) to handle the
workflow and the searching. It uses plain Lucene with a few custom
analyzers and some sorting, faceting, suggest and DidYouMean code.
One index holds all the material. Currently the index is updated on one
server and synced to two search-machines, but we're in the middle of
moving the index updating to the servers to get faster updates.

The hardware is 2 mirrored servers for fail-safe. They are running some
Linux variant and have 2.5GHz quad-core Xeons CPU's with 6MB of level 2
cache and 16GB of RAM. We are not using virtualization for this. The
machines uses traditional harddisks for data storage and fairly old
enterprise-class SSD's for the index. To be honest, they are currently
overkill - without faceting the throughput is 50-100 searches/second,
including the overhead of using web-service calls. Faceting slows this
somewhat, but as our traffic is something like 5-10 searches/second at
prime time (guesstimating a lot here, as it is has been a year or two
since I looked at the statistics), most of the time is spend on idle.

Before that we used dual-core Xeons, again with 16GB of RAM and SSD's.
They also performed just fine with our workload and were only replaced
due to a general reorganization of the servers. Before that, we used
used some older 3.1GHz single-core Xeon machines with only 1MB of level
2 cache, 32GB of slow RAM and traditional harddisks. My old 1.8GHz
single-core laptop were about as fast for indexing & searching and they
stand testament that a lot of RAM and GHz does not help much when the
memory system is lacking.

We did a lot of testing some time ago and found that out searches were
mostly CPU-bound when using SSDs. We've talked with our hardware guys
about building new servers in anticipation of more data and the current
vision is relatively modest machines with quad-core i7, 16GB of RAM and
consumer-grade SSDs (Intel or SandForce). As we have mirrored servers
and since no one dies if they can't find a book at our library, using
enterprise-SSDs is just a waste of money.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 10:02:58 2010
Return-Path: <java-user-return-47620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11861 invoked from network); 27 Oct 2010 10:02:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 10:02:57 -0000
Received: (qmail 59652 invoked by uid 500); 27 Oct 2010 10:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58578 invoked by uid 500); 27 Oct 2010 10:02:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58570 invoked by uid 99); 27 Oct 2010 10:02:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 10:02:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 10:02:44 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Wed, 27 Oct 2010 12:02:22 +0200
Subject: RE: Lucene Software/Hardware Setup Question
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "Kovnatsky, Eugene" <Eugene.Kovnatsky@dexone.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <26048344E51BEE42B8421C5DA5A73CDD81ED12@DCPEVS02.rhdroot.com>
References: <26048344E51BEE42B8421C5DA5A73CDD81E9A0@DCPEVS02.rhdroot.com>
	 <1288085171.2481.210.camel@te-prime>
	 <26048344E51BEE42B8421C5DA5A73CDD81ED12@DCPEVS02.rhdroot.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 27 Oct 2010 12:02:28 +0200
Message-ID: <1288173748.2481.318.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Tue, 2010-10-26 at 23:17 +0200, Kovnatsky, Eugene wrote:
> Thanks Toke. Very descriptive. A few more questions about your SSD
> drive(s)
>  - what is its current size 

4 * 64GB Samsung MCCOE64G5MPP-0VA00 drives. They were pretty cool two
years ago and still work very well for search-servers (random writes are
not good, but we don't need that for searching):
http://www.tomshardware.com/reviews/flash-ssd-hard-drive,2000-19.html

>  - do you project any growth in your index size

Yes. Hopefully an internal project for maintaining digital objects will
change gears during this year. This will result in objects with a lot of
meta data and some fulltexts. Depending on economy, the amount of
objects will range from 100.000+ to a few million. I would guesstimate
that this would mean a doubling of the index size, due to the richness
of the new objects.

Further out, the projections are unreliable. As a technician I hope for
a serious jump in size within a year or two, but I have hoped for that
the last two years. Politics does not move as fast as technology.

>  - if yes then how do you plan to correlate that with your hardware
> needs

A doubling of the index size makes the existing 256GB/machine a tight
fit. I seem to remember that there are two free slots in our servers, so
adding 2 new consumer-class SSDs is the obvious upgrade. We're switching
to a more memory- and CPU-efficient way of handling sorting and
faceting, so we should not need to boost CPU and RAM.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 12:05:15 2010
Return-Path: <java-user-return-47621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71430 invoked from network); 27 Oct 2010 12:05:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 12:05:15 -0000
Received: (qmail 85931 invoked by uid 500); 27 Oct 2010 12:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85845 invoked by uid 500); 27 Oct 2010 12:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85837 invoked by uid 99); 27 Oct 2010 12:05:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:05:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:05:05 +0000
Received: by gwj19 with SMTP id 19so346326gwj.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 05:04:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.11.20 with SMTP id 20mr17403610ybk.63.1288181080371; Wed,
 27 Oct 2010 05:04:40 -0700 (PDT)
Received: by 10.151.158.6 with HTTP; Wed, 27 Oct 2010 05:04:40 -0700 (PDT)
Date: Wed, 27 Oct 2010 19:04:40 +0700
Message-ID: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
Subject: adding documents to an existing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hello all,
I would like to ask of how to add new documents to an existing lucene
index. I mean what's class should I use to achieve this goal.

thanks

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 12:09:42 2010
Return-Path: <java-user-return-47622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73436 invoked from network); 27 Oct 2010 12:09:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 12:09:42 -0000
Received: (qmail 93767 invoked by uid 500); 27 Oct 2010 12:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93535 invoked by uid 500); 27 Oct 2010 12:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93521 invoked by uid 99); 27 Oct 2010 12:09:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:09:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailtojiangmingyuan@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:09:32 +0000
Received: by ywp4 with SMTP id 4so346349ywp.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 05:09:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=tRaVueeqylgikJ0S7r0jDsgucQ3GGq3MFU2g5H/olIk=;
        b=B19YtqIuiabpBkMO0r02/xbfNjOvK738Sqkvlh4m6ULwIXyRKFCBvBdaYDDY4J5ecf
         g0ht2ZmBoKBhINLILW5KgTbpZy2eJKQqH95j/d5Va04U1OirLMOLkx08YXY/d25qoSCs
         7DprDsrT0aAPF4hZVsd226t0PLSi8001tO3z8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=gELvLlIvg65742++31CHNa8S0IUkX/9g40KkyO+m56zFQh50JQKNSZR326lDeTjJKJ
         7Y7GGl7KZTK6NzHZiEu4cvErC+Ctq25Xs6BfQdEMhrKNKY551sXRkXbSO3rVTtLmBIQ1
         X4khK3gAoVybnPsaf37iZ3cSYgtEHTckXGnZU=
Received: by 10.42.138.65 with SMTP id b1mr7737238icu.360.1288181351769; Wed,
 27 Oct 2010 05:09:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.148.66 with HTTP; Wed, 27 Oct 2010 05:08:51 -0700 (PDT)
In-Reply-To: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
From: =?UTF-8?B?6JKL5piO5Y6f?= <mailtojiangmingyuan@gmail.com>
Date: Wed, 27 Oct 2010 20:08:51 +0800
Message-ID: <AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
Subject: Re: adding documents to an existing index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba2121e9e0e6d40493981738
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba2121e9e0e6d40493981738
Content-Type: text/plain; charset=ISO-8859-1

IndexWriter writer =new IndexWirter(path,analyzer,false);

the 3rd parameter is what you want.
than you can

writer.add(doc)

enjoy .

On Wed, Oct 27, 2010 at 8:04 PM, Yakob <jacobian@opensuse-id.org> wrote:

> hello all,
> I would like to ask of how to add new documents to an existing lucene
> index. I mean what's class should I use to achieve this goal.
>
> thanks
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba2121e9e0e6d40493981738--

From java-user-return-47623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 12:44:16 2010
Return-Path: <java-user-return-47623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92048 invoked from network); 27 Oct 2010 12:44:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 12:44:15 -0000
Received: (qmail 33821 invoked by uid 500); 27 Oct 2010 12:44:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33461 invoked by uid 500); 27 Oct 2010 12:44:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33445 invoked by uid 99); 27 Oct 2010 12:44:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:44:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:44:06 +0000
Received: by ywp4 with SMTP id 4so369337ywp.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 05:43:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.157.20 with SMTP id f20mr11226331ybe.6.1288183424862; Wed,
 27 Oct 2010 05:43:44 -0700 (PDT)
Received: by 10.151.158.6 with HTTP; Wed, 27 Oct 2010 05:43:44 -0700 (PDT)
In-Reply-To: <AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
Date: Wed, 27 Oct 2010 19:43:44 +0700
Message-ID: <AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I did searched about this constructor and find that it's already been
deprecated.
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexWriter=
.html#IndexWriter(org.apache.lucene.store.Directory,
org.apache.lucene.analysis.Analyzer, boolean)

I am using lucene 3.0 now.can I really use this constructor or I
should try it first? btw I would appreciate if you gave me a code
sample though. thanks. :-)

On 10/27/10, =E8=92=8B=E6=98=8E=E5=8E=9F <mailtojiangmingyuan@gmail.com> wr=
ote:
> IndexWriter writer =3Dnew IndexWirter(path,analyzer,false);
>
> the 3rd parameter is what you want.
> than you can
>
> writer.add(doc)
>
> enjoy .
>

--=20
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 12:49:47 2010
Return-Path: <java-user-return-47624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94146 invoked from network); 27 Oct 2010 12:49:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 12:49:45 -0000
Received: (qmail 46491 invoked by uid 500); 27 Oct 2010 12:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46171 invoked by uid 500); 27 Oct 2010 12:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45819 invoked by uid 99); 27 Oct 2010 12:49:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:49:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailtojiangmingyuan@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:49:32 +0000
Received: by gxk24 with SMTP id 24so373754gxk.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 05:49:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=2bBqaxUtQmtsM/Ez2H3VgLxqjTazYD4bpi1IjBFzG6E=;
        b=u1zgC0S2dwigcewTbDd8nV73rDcCr/WQVtOT1TMH3LJtfnW3kJmsZxw5IsZakbDx/j
         moNQCa2NGYSqBmGvAYwfONgTEiQ84wvwozG52uR0dPJgHQzDPKS1UFHS+vcPEx15hHEp
         zVoNpG6ZLPIetkS4mLaxTWlql34RtPWQ+HsZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=g2kAt+GHSBhwo1VaZS+z+bbjlLeJgpyFceH0RqcPkgVV+bQKp4YpTP5f0AtjehTYcc
         /65ZrYzEl6Pr+ti6QiyYirPEkdVQJttO6Fa/9eYXKoWj8jK1qWt9rxB4hteQwytfS+r8
         xCaFtHXmxXiHp36xxzAOnd3r7jMBZ3jvmZDVs=
Received: by 10.42.41.14 with SMTP id n14mr7564215ice.272.1288183751305; Wed,
 27 Oct 2010 05:49:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.148.66 with HTTP; Wed, 27 Oct 2010 05:48:50 -0700 (PDT)
In-Reply-To: <AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
 <AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com> <AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
From: =?UTF-8?B?6JKL5piO5Y6f?= <mailtojiangmingyuan@gmail.com>
Date: Wed, 27 Oct 2010 20:48:50 +0800
Message-ID: <AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
Subject: Re: adding documents to an existing index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf301d3c22e6e926049398a6e4
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf301d3c22e6e926049398a6e4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

you are too lazy.download the lucene source code,take a glance and you will
find demos;

On Wed, Oct 27, 2010 at 8:43 PM, Yakob <jacobian@opensuse-id.org> wrote:

> I did searched about this constructor and find that it's already been
> deprecated.
>
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexWrit=
er.html#IndexWriter(org.apache.lucene.store.Directory
> ,
> org.apache.lucene.analysis.Analyzer, boolean)
>
> I am using lucene 3.0 now.can I really use this constructor or I
> should try it first? btw I would appreciate if you gave me a code
> sample though. thanks. :-)
>
> On 10/27/10, =E8=92=8B=E6=98=8E=E5=8E=9F <mailtojiangmingyuan@gmail.com> =
wrote:
> > IndexWriter writer =3Dnew IndexWirter(path,analyzer,false);
> >
> > the 3rd parameter is what you want.
> > than you can
> >
> > writer.add(doc)
> >
> > enjoy .
> >
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf301d3c22e6e926049398a6e4--

From java-user-return-47625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 12:53:35 2010
Return-Path: <java-user-return-47625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98552 invoked from network); 27 Oct 2010 12:53:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 12:53:34 -0000
Received: (qmail 58651 invoked by uid 500); 27 Oct 2010 12:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58295 invoked by uid 500); 27 Oct 2010 12:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58287 invoked by uid 99); 27 Oct 2010 12:53:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:53:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 12:53:25 +0000
Received: by yxn22 with SMTP id 22so375090yxn.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 05:53:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.11.20 with SMTP id 20mr17482401ybk.63.1288183984846; Wed,
 27 Oct 2010 05:53:04 -0700 (PDT)
Received: by 10.151.158.6 with HTTP; Wed, 27 Oct 2010 05:53:04 -0700 (PDT)
In-Reply-To: <AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
	<AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
	<AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
Date: Wed, 27 Oct 2010 19:53:04 +0700
Message-ID: <AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

well thanks anyway though.

On 10/27/10, =BD=AF=C3=F7=D4=AD <mailtojiangmingyuan@gmail.com> wrote:
> you are too lazy.download the lucene source code,take a glance and you wi=
ll
> find demos;
>
> On Wed, Oct 27, 2010 at 8:43 PM, Yakob <jacobian@opensuse-id.org> wrote:
>
>> I did searched about this constructor and find that it's already been
>> deprecated.
>>
>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexWri=
ter.html#IndexWriter(org.apache.lucene.store.Directory
>> ,
>> org.apache.lucene.analysis.Analyzer, boolean)
>>
>> I am using lucene 3.0 now.can I really use this constructor or I
>> should try it first? btw I would appreciate if you gave me a code
>> sample though. thanks. :-)
>>
>> On 10/27/10, =BD=AF=C3=F7=D4=AD <mailtojiangmingyuan@gmail.com> wrote:
>> > IndexWriter writer =3Dnew IndexWirter(path,analyzer,false);
>> >
>> > the 3rd parameter is what you want.
>> > than you can
>> >
>> > writer.add(doc)
>> >
>> > enjoy .
>> >
>>
>> --
>> http://jacobian.web.id
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--=20
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 13:34:52 2010
Return-Path: <java-user-return-47626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33892 invoked from network); 27 Oct 2010 13:34:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 13:34:52 -0000
Received: (qmail 50685 invoked by uid 500); 27 Oct 2010 13:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50502 invoked by uid 500); 27 Oct 2010 13:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50493 invoked by uid 99); 27 Oct 2010 13:34:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 13:34:48 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 13:34:44 +0000
Received: by qyk34 with SMTP id 34so3901329qyk.14
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 06:34:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.180.10 with SMTP id bs10mr2551004qab.297.1288186463100;
 Wed, 27 Oct 2010 06:34:23 -0700 (PDT)
Received: by 10.224.46.13 with HTTP; Wed, 27 Oct 2010 06:34:23 -0700 (PDT)
In-Reply-To: <AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
	<AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
	<AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
	<AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
Date: Wed, 27 Oct 2010 09:34:23 -0400
Message-ID: <AANLkTinnwTO9uMcG7cQBKtdju63uUXUBfvvj7QUiLjga@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Seth Rosen <seth@architexa.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf302ef952899d820493994822

--20cf302ef952899d820493994822
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Yakob,
Here is a snippet of an example of IndexWriter from the lucene source that
you might find helpful.


> IndexWriter writer =3D new IndexWriter(FSDirectory.open(INDEX_DIR), new
> StandardAnalyzer(Version.LUCENE_CURRENT), true,
> IndexWriter.MaxFieldLength.LIMITED);

System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");

indexDocs(writer, docDir);

System.out.println("Optimizing...");

writer.optimize();

writer.close();


Seth Rosen
www.architexa.com
Understand & Document Code In Seconds
seth@architexa.com <vineet@architexa.com>



2010/10/27 Yakob <jacobian@opensuse-id.org>

> well thanks anyway though.
>
> On 10/27/10, =BD=AF=C3=F7=D4=AD <mailtojiangmingyuan@gmail.com> wrote:
> > you are too lazy.download the lucene source code,take a glance and you
> will
> > find demos;
> >
> > On Wed, Oct 27, 2010 at 8:43 PM, Yakob <jacobian@opensuse-id.org> wrote=
:
> >
> >> I did searched about this constructor and find that it's already been
> >> deprecated.
> >>
> >>
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexWrit=
er.html#IndexWriter(org.apache.lucene.store.Directory
> >> ,
> >> org.apache.lucene.analysis.Analyzer, boolean)
> >>
> >> I am using lucene 3.0 now.can I really use this constructor or I
> >> should try it first? btw I would appreciate if you gave me a code
> >> sample though. thanks. :-)
> >>
> >> On 10/27/10, =BD=AF=C3=F7=D4=AD <mailtojiangmingyuan@gmail.com> wrote:
> >> > IndexWriter writer =3Dnew IndexWirter(path,analyzer,false);
> >> >
> >> > the 3rd parameter is what you want.
> >> > than you can
> >> >
> >> > writer.add(doc)
> >> >
> >> > enjoy .
> >> >
> >>
> >> --
> >> http://jacobian.web.id
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf302ef952899d820493994822--

From java-user-return-47627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 13:52:14 2010
Return-Path: <java-user-return-47627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39895 invoked from network); 27 Oct 2010 13:52:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 13:52:14 -0000
Received: (qmail 5372 invoked by uid 500); 27 Oct 2010 13:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5159 invoked by uid 500); 27 Oct 2010 13:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5151 invoked by uid 99); 27 Oct 2010 13:52:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 13:52:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 13:52:04 +0000
Received: by ywp4 with SMTP id 4so434357ywp.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 06:51:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.100.14 with SMTP id x14mr2168162ybb.405.1288187503871;
 Wed, 27 Oct 2010 06:51:43 -0700 (PDT)
Received: by 10.151.158.6 with HTTP; Wed, 27 Oct 2010 06:51:43 -0700 (PDT)
In-Reply-To: <AANLkTinnwTO9uMcG7cQBKtdju63uUXUBfvvj7QUiLjga@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
	<AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
	<AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
	<AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
	<AANLkTinnwTO9uMcG7cQBKtdju63uUXUBfvvj7QUiLjga@mail.gmail.com>
Date: Wed, 27 Oct 2010 20:51:43 +0700
Message-ID: <AANLkTinLfhK-YtVFjb0cGLh4mSratPdCkM4wBvK3F5f5@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/27/10, Seth Rosen <seth@architexa.com> wrote:
> Yakob,
> Here is a snippet of an example of IndexWriter from the lucene source that
> you might find helpful.
>
>
>> IndexWriter writer = new IndexWriter(FSDirectory.open(INDEX_DIR), new
>> StandardAnalyzer(Version.LUCENE_CURRENT), true,
>> IndexWriter.MaxFieldLength.LIMITED);

// the above code should change true into false so that the index will
still be open right?
// I mean surely the index shouldn't be close
>
> System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
>
// what confuse me is how can add a new directory path containing new
Documents to a
// lucene class. so that lucene will index those new documents and add
it to an existing
// index.
> indexDocs(writer, docDir);
>
> System.out.println("Optimizing...");
>
> writer.optimize();
>
> writer.close();
>
>
> Seth Rosen
> www.architexa.com
> Understand & Document Code In Seconds
> seth@architexa.com <vineet@architexa.com>
>
>
>


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 14:13:45 2010
Return-Path: <java-user-return-47628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48701 invoked from network); 27 Oct 2010 14:13:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 14:13:45 -0000
Received: (qmail 57807 invoked by uid 500); 27 Oct 2010 14:13:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57420 invoked by uid 500); 27 Oct 2010 14:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57407 invoked by uid 99); 27 Oct 2010 14:13:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 14:13:41 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 14:13:37 +0000
Received: by qwb8 with SMTP id 8so815204qwb.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 07:13:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.201.6 with SMTP id ey6mr2090684qab.36.1288188796347; Wed,
 27 Oct 2010 07:13:16 -0700 (PDT)
Received: by 10.224.46.13 with HTTP; Wed, 27 Oct 2010 07:13:16 -0700 (PDT)
In-Reply-To: <AANLkTinLfhK-YtVFjb0cGLh4mSratPdCkM4wBvK3F5f5@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
	<AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
	<AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
	<AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
	<AANLkTinnwTO9uMcG7cQBKtdju63uUXUBfvvj7QUiLjga@mail.gmail.com>
	<AANLkTinLfhK-YtVFjb0cGLh4mSratPdCkM4wBvK3F5f5@mail.gmail.com>
Date: Wed, 27 Oct 2010 10:13:16 -0400
Message-ID: <AANLkTin9wo06dFSig0S4i9CrOX5Fuihyyc1JDg8xwSL9@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Seth Rosen <seth@architexa.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fafdd9c23c6049399d36a

--20cf300fafdd9c23c6049399d36a
Content-Type: text/plain; charset=ISO-8859-1

Yakob the boolean in the constructor should be true if you want to create a
NEW index in INDEX_DIR and false to append to an existing one as seen here
[1]

As for adding a directory to an index you will need to validate the
directory, then loop through it recursively and add each doc to the writer
you created.

static void indexDocs(IndexWriter writer, File file)
>>
>>     throws IOException {
>>
>>     // do not try to index files that cannot be read
>>
>>     if (file.canRead()) {
>>
>>       if (file.isDirectory()) {
>>
>>         String[] files = file.list();
>>
>>         // an IO error could occur
>>
>>         if (files != null) {
>>
>>           for (int i = 0; i < files.length; i++) {
>>
>>             indexDocs(writer, new File(file, files[i]));
>>
>>           }
>>
>>         }
>>
>>       } else {
>>
>>         System.out.println("adding " + file);
>>
>>         try {
>>
>>           writer.addDocument(FileDocument.Document(file));
>>
>>         }
>>
>>         // at least on windows, some temporary files raise this exception
>>> with an "access denied" message
>>
>>         // checking if the file can be read doesn't help
>>
>>         catch (FileNotFoundException fnfe) {
>>
>>           ;
>>
>>         }
>>
>>       }
>>
>>     }
>>
>>   }
>>
>>
[1] http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,
org.apache.lucene.analysis.Analyzer, boolean,
org.apache.lucene.index.IndexWriter.MaxFieldLength)

Seth Rosen
www.architexa.com
Understand & Document Code In Seconds
seth@architexa.com <vineet@architexa.com>



On Wed, Oct 27, 2010 at 9:51 AM, Yakob <jacobian@opensuse-id.org> wrote:

> On 10/27/10, Seth Rosen <seth@architexa.com> wrote:
> > Yakob,
> > Here is a snippet of an example of IndexWriter from the lucene source
> that
> > you might find helpful.
> >
> >
> >> IndexWriter writer = new IndexWriter(FSDirectory.open(INDEX_DIR), new
> >> StandardAnalyzer(Version.LUCENE_CURRENT), true,
> >> IndexWriter.MaxFieldLength.LIMITED);
>
> // the above code should change true into false so that the index will
> still be open right?
> // I mean surely the index shouldn't be close
> >
> > System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
> >
> // what confuse me is how can add a new directory path containing new
> Documents to a
> // lucene class. so that lucene will index those new documents and add
> it to an existing
> // index.
> > indexDocs(writer, docDir);
> >
> > System.out.println("Optimizing...");
> >
> > writer.optimize();
> >
> > writer.close();
> >
> >
> > Seth Rosen
> > www.architexa.com
> > Understand & Document Code In Seconds
> > seth@architexa.com <vineet@architexa.com>
> >
> >
> >
>
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf300fafdd9c23c6049399d36a--

From java-user-return-47630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 16:48:41 2010
Return-Path: <java-user-return-47630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11810 invoked from network); 27 Oct 2010 16:48:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 16:48:41 -0000
Received: (qmail 10722 invoked by uid 500); 27 Oct 2010 16:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10220 invoked by uid 500); 27 Oct 2010 16:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10212 invoked by uid 99); 27 Oct 2010 16:48:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:48:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:48:30 +0000
Received: by yxn22 with SMTP id 22so618748yxn.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 09:48:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Fv9W75Eodp/n0uRQty3Srul/K4DMm89YovldTo8LWFs=;
        b=T3oWuQJXIXvQKv+kv6QtU+SG+ieku8TjHfvCzsnj5gQxlJA+n2++Ba4Gb1azkXh2WS
         EGzkGWHr85G3aCS5XaisF+GrFVc964wYJvxht+O5rXDIlRkknh5xNAHL6QyauFZV3HZx
         Gkfo8NrC3ENc7SgqbnL4MEw5CuJGTETeR4c4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jOEnpGaoGzwJMO3neU5+ArmliOnKxn4jJejsdOPeddO/qWcvj58m4/HULE/jaGv+9P
         jooWHDidg5p5DMq/lfRGOYam9kZ4eLAZgsCJS0ZNoBmONCAYymjjOGS8CpuhFdNHWTxC
         0PpsphsS+oKQhV2g/Z3U2YRYYP96XRxhUa2lE=
MIME-Version: 1.0
Received: by 10.151.38.8 with SMTP id q8mr7187685ybj.200.1288198089073; Wed,
 27 Oct 2010 09:48:09 -0700 (PDT)
Received: by 10.151.99.4 with HTTP; Wed, 27 Oct 2010 09:48:09 -0700 (PDT)
In-Reply-To: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
References: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
Date: Wed, 27 Oct 2010 12:48:09 -0400
Message-ID: <AANLkTinc_F-ieQJ=DG-8aCBYbJ+AV=4xu_chqcKR+bXT@mail.gmail.com>
Subject: Re: Does a IndexSearcher call incRef on the underlying reader?
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174ff5be7fe70f04939bfd98
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174ff5be7fe70f04939bfd98
Content-Type: text/plain; charset=UTF-8

@Question2: Also I was wondering what happens to the code that may have been
using the searcher which got swapped out in SearcherManager? Does that
IndexSearcher continue to run and when it finishes the GC is free to collect
it? OR will the fact that the reader for that searcher has had its last
decRef() call take the reader's internal count to 0 ... cause someone who is
paging through results to see the server choking with exceptions?

On Wed, Oct 27, 2010 at 12:35 PM, Pulkit Singhal <pulkitsinghal@gmail.com>wrote:

> Hello,
>
> I have been looking at the SearcherManager example provided in the "Lucene
> In Action 2nd Edition" book. It seems like a great way to manage
> IndexReaders but I had a few questions about the Lucene API that poppedup
> after reading it:
>
> @Question: Does a IndexSearcher call upon an IndexReader's incRef() method
> internally when the reader is passed in as an argument to the searcher's
> constructor?
> @Motivation: I ask because, if that is the case then I will need to make an
> additional call to decRef(). Also the book claims that
> "IndexSearcher.close() is a no-op if you provide an already opened
> IndexReader when creating the IndexSearcher" so I guess I can't count on
> that close() method to call the decRef() method for me and I must call it
> myself?  Once again, I'm thinking of doing all this only if incRef() was
> called on the reader in the searcher's constructor, which I'm hoping someone
> will confirm for me.
>
> Thanks,
> - Pulkit
>

--0015174ff5be7fe70f04939bfd98--

From java-user-return-47631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 16:50:20 2010
Return-Path: <java-user-return-47631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12514 invoked from network); 27 Oct 2010 16:50:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 16:50:20 -0000
Received: (qmail 13936 invoked by uid 500); 27 Oct 2010 16:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13735 invoked by uid 500); 27 Oct 2010 16:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13727 invoked by uid 99); 27 Oct 2010 16:50:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:50:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:50:11 +0000
Received: by wwi17 with SMTP id 17so943559wwi.5
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 09:49:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.255.148 with SMTP id j20mr9371985wes.11.1288198188419;
 Wed, 27 Oct 2010 09:49:48 -0700 (PDT)
Received: by 10.216.93.14 with HTTP; Wed, 27 Oct 2010 09:49:48 -0700 (PDT)
In-Reply-To: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
References: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
Date: Wed, 27 Oct 2010 12:49:48 -0400
Message-ID: <AANLkTinncMV3=NHQuDXKxG9wvONkwduq9UxohOUs_Pw1@mail.gmail.com>
Subject: Re: Does a IndexSearcher call incRef on the underlying reader?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

IndexSearcher does not incRef the reader passed to it.

Mike

On Wed, Oct 27, 2010 at 12:35 PM, Pulkit Singhal
<pulkitsinghal@gmail.com> wrote:
> Hello,
>
> I have been looking at the SearcherManager example provided in the "Lucen=
e
> In Action 2nd Edition" book. It seems like a great way to manage
> IndexReaders but I had a few questions about the Lucene API that poppedup
> after reading it:
>
> @Question: Does a IndexSearcher call upon an IndexReader's incRef() metho=
d
> internally when the reader is passed in as an argument to the searcher's
> constructor?
> @Motivation: I ask because, if that is the case then I will need to make =
an
> additional call to decRef(). Also the book claims that
> "IndexSearcher.close() is a no-op if you provide an already opened
> IndexReader when creating the IndexSearcher" so I guess I can't count on
> that close() method to call the decRef() method for me and I must call it
> myself? =A0Once again, I'm thinking of doing all this only if incRef() wa=
s
> called on the reader in the searcher's constructor, which I'm hoping some=
one
> will confirm for me.
>
> Thanks,
> - Pulkit
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 16:53:06 2010
Return-Path: <java-user-return-47632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13272 invoked from network); 27 Oct 2010 16:53:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 16:53:06 -0000
Received: (qmail 18871 invoked by uid 500); 27 Oct 2010 16:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18739 invoked by uid 500); 27 Oct 2010 16:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18731 invoked by uid 99); 27 Oct 2010 16:53:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:53:03 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:52:56 +0000
Received: by wyg36 with SMTP id 36so983297wyg.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 09:52:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.157.201 with SMTP id c9mr9829721wbx.46.1288198354754; Wed,
 27 Oct 2010 09:52:34 -0700 (PDT)
Received: by 10.216.93.14 with HTTP; Wed, 27 Oct 2010 09:52:34 -0700 (PDT)
In-Reply-To: <AANLkTinc_F-ieQJ=DG-8aCBYbJ+AV=4xu_chqcKR+bXT@mail.gmail.com>
References: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
	<AANLkTinc_F-ieQJ=DG-8aCBYbJ+AV=4xu_chqcKR+bXT@mail.gmail.com>
Date: Wed, 27 Oct 2010 12:52:34 -0400
Message-ID: <AANLkTikUzJqO4xhB-EOdCFb+r4d84hXwBL1Tmx+9MBZy@mail.gmail.com>
Subject: Re: Does a IndexSearcher call incRef on the underlying reader?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

When you run a search, you call SearcherManager.get to obtain the
current searcher.

That does an incRef.

So if while this query is running a new searcher is swapped in, the
query is still save because it's holding a reference.  Ie the reader
will have a refCount of 1 at that point.

Then when the search finishes and calls SearcherManager.release, that
drops the readers refCount to 0, which closes it.

Note, though, that you must still lose your reference to the reader to
allow GC to clean it up!

Mike

On Wed, Oct 27, 2010 at 12:48 PM, Pulkit Singhal
<pulkitsinghal@gmail.com> wrote:
> @Question2: Also I was wondering what happens to the code that may have b=
een
> using the searcher which got swapped out in SearcherManager? Does that
> IndexSearcher continue to run and when it finishes the GC is free to coll=
ect
> it? OR will the fact that the reader for that searcher has had its last
> decRef() call take the reader's internal count to 0 ... cause someone who=
 is
> paging through results to see the server choking with exceptions?
>
> On Wed, Oct 27, 2010 at 12:35 PM, Pulkit Singhal <pulkitsinghal@gmail.com=
>wrote:
>
>> Hello,
>>
>> I have been looking at the SearcherManager example provided in the "Luce=
ne
>> In Action 2nd Edition" book. It seems like a great way to manage
>> IndexReaders but I had a few questions about the Lucene API that poppedu=
p
>> after reading it:
>>
>> @Question: Does a IndexSearcher call upon an IndexReader's incRef() meth=
od
>> internally when the reader is passed in as an argument to the searcher's
>> constructor?
>> @Motivation: I ask because, if that is the case then I will need to make=
 an
>> additional call to decRef(). Also the book claims that
>> "IndexSearcher.close() is a no-op if you provide an already opened
>> IndexReader when creating the IndexSearcher" so I guess I can't count on
>> that close() method to call the decRef() method for me and I must call i=
t
>> myself? =A0Once again, I'm thinking of doing all this only if incRef() w=
as
>> called on the reader in the searcher's constructor, which I'm hoping som=
eone
>> will confirm for me.
>>
>> Thanks,
>> - Pulkit
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 16:58:22 2010
Return-Path: <java-user-return-47629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15316 invoked from network); 27 Oct 2010 16:58:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 16:58:12 -0000
Received: (qmail 83346 invoked by uid 500); 27 Oct 2010 16:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80408 invoked by uid 500); 27 Oct 2010 16:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76527 invoked by uid 99); 27 Oct 2010 16:35:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:35:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 16:35:31 +0000
Received: by ywp4 with SMTP id 4so610998ywp.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 09:35:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=7tHv48xZYomLY3Ev0IWXofdlWjiWDB1CjrH7DDHsiyY=;
        b=VLoharyRzUR6Pw7CvNF5I330RbBafYCkNPJg8sk9Kyf+zBFTccnr4GAIhl+ed2+Pe7
         sa+nuLNBR4e6Ce6LIJkISmR/pruLhM4LgjxZozCueOhs6icb42FGjb8N4LKpEKr8oPEv
         Ux4CdYsemWMSOVVZySgA35/9Vkc1fD0l6/n7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=M5MY1k5VaIwZoz8tF/729k60O53fiDb6drzUo2LvOjX2G5V/9a4EUCuK60HXP1DvG/
         3lfrCNckw20ZcLp2l7HsHGsLx5ksd2KQJm9AEnC6Qfuhs3tqC4/alvk43WTLHdIMgktW
         9bbpKuu368fN01U3k/p1OyyL2Ze5HzHQKLiPw=
MIME-Version: 1.0
Received: by 10.150.50.3 with SMTP id x3mr17822286ybx.29.1288197310749; Wed,
 27 Oct 2010 09:35:10 -0700 (PDT)
Received: by 10.151.99.4 with HTTP; Wed, 27 Oct 2010 09:35:10 -0700 (PDT)
Date: Wed, 27 Oct 2010 12:35:10 -0400
Message-ID: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
Subject: Does a IndexSearcher call incRef on the underlying reader?
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6ae1e1b9d0f04939bcf24

--000e0cd6ae1e1b9d0f04939bcf24
Content-Type: text/plain; charset=UTF-8

Hello,

I have been looking at the SearcherManager example provided in the "Lucene
In Action 2nd Edition" book. It seems like a great way to manage
IndexReaders but I had a few questions about the Lucene API that poppedup
after reading it:

@Question: Does a IndexSearcher call upon an IndexReader's incRef() method
internally when the reader is passed in as an argument to the searcher's
constructor?
@Motivation: I ask because, if that is the case then I will need to make an
additional call to decRef(). Also the book claims that
"IndexSearcher.close() is a no-op if you provide an already opened
IndexReader when creating the IndexSearcher" so I guess I can't count on
that close() method to call the decRef() method for me and I must call it
myself?  Once again, I'm thinking of doing all this only if incRef() was
called on the reader in the searcher's constructor, which I'm hoping someone
will confirm for me.

Thanks,
- Pulkit

--000e0cd6ae1e1b9d0f04939bcf24--

From java-user-return-47633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 17:01:38 2010
Return-Path: <java-user-return-47633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23490 invoked from network); 27 Oct 2010 17:01:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 17:01:36 -0000
Received: (qmail 48688 invoked by uid 500); 27 Oct 2010 17:01:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48649 invoked by uid 500); 27 Oct 2010 17:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48641 invoked by uid 99); 27 Oct 2010 17:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 17:01:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 17:01:28 +0000
Received: by gyg4 with SMTP id 4so640586gyg.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 10:01:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=F3aBdHj0r+ThykET07IaTrU5lXIv1e6O9x/0IdKVPlw=;
        b=clmy9Spe9EYm3PuGhxtwnoUZ6AFKb6nnHCkqZYRxf7fXP9OKVLq9v+Cej2DKVDTwGj
         E5s0agWXi4qXrOpmCWZBYZugfQRhtgq5ZLHvQm+5TRPcrDg19SzpO3LMPeuoLBnAXzW4
         xtZsN0p7Srq4Miwtf3PwfeeBCDsh0Jayl0KOQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g4YMSgIzmNJFQebrq8jXzgh87LpwSk9hQJf/WxRLhcMStD2FP5+Ov+HlgfyTDgQ3yP
         0ETa2PstBdPnJSnwkyupGNMRo2gJT9wWmkbnnHXflhme7AFE0/GiLNGmPezX12hPZyyO
         xqCNU9NPFiZZWT2K7grgqLYAnPMH5cnQW3+0c=
MIME-Version: 1.0
Received: by 10.150.12.5 with SMTP id 5mr18136965ybl.257.1288198867717; Wed,
 27 Oct 2010 10:01:07 -0700 (PDT)
Received: by 10.151.99.4 with HTTP; Wed, 27 Oct 2010 10:01:07 -0700 (PDT)
In-Reply-To: <AANLkTikUzJqO4xhB-EOdCFb+r4d84hXwBL1Tmx+9MBZy@mail.gmail.com>
References: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
	<AANLkTinc_F-ieQJ=DG-8aCBYbJ+AV=4xu_chqcKR+bXT@mail.gmail.com>
	<AANLkTikUzJqO4xhB-EOdCFb+r4d84hXwBL1Tmx+9MBZy@mail.gmail.com>
Date: Wed, 27 Oct 2010 13:01:07 -0400
Message-ID: <AANLkTikqv7wSS_Ww5r7rQmxy8_BfXrG=U0q57+_e=L-r@mail.gmail.com>
Subject: Re: Does a IndexSearcher call incRef on the underlying reader?
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6b17ce90ee604939c2ba4

--000e0cd6b17ce90ee604939c2ba4
Content-Type: text/plain; charset=UTF-8

Hello Mike,

1st of all, great book.

@Question3: It sounds like an IndexReader always starts with a count of zero
but that should not be a cause of worry because the value only gets acted
upon in a call to decRef() ... am I right?

@Question4: It seems to me that based on you explanation so far, the
IndexReader will end up closing after the very 1st search. That doesn't
sound too efficient given that keeping it alive and kicking is something
that is highly desirable ... no? Am I missing something or does that
responsibility fall elsewhere?

I hope I haven't hijacked my own thread?

- Pulkit

On Wed, Oct 27, 2010 at 12:52 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> When you run a search, you call SearcherManager.get to obtain the
> current searcher.
>
> That does an incRef.
>
> So if while this query is running a new searcher is swapped in, the
> query is still save because it's holding a reference.  Ie the reader
> will have a refCount of 1 at that point.
>
> Then when the search finishes and calls SearcherManager.release, that
> drops the readers refCount to 0, which closes it.
>
> Note, though, that you must still lose your reference to the reader to
> allow GC to clean it up!
>
> Mike
>
> On Wed, Oct 27, 2010 at 12:48 PM, Pulkit Singhal
> <pulkitsinghal@gmail.com> wrote:
> > @Question2: Also I was wondering what happens to the code that may have
> been
> > using the searcher which got swapped out in SearcherManager? Does that
> > IndexSearcher continue to run and when it finishes the GC is free to
> collect
> > it? OR will the fact that the reader for that searcher has had its last
> > decRef() call take the reader's internal count to 0 ... cause someone who
> is
> > paging through results to see the server choking with exceptions?
> >
> > On Wed, Oct 27, 2010 at 12:35 PM, Pulkit Singhal <
> pulkitsinghal@gmail.com>wrote:
> >
> >> Hello,
> >>
> >> I have been looking at the SearcherManager example provided in the
> "Lucene
> >> In Action 2nd Edition" book. It seems like a great way to manage
> >> IndexReaders but I had a few questions about the Lucene API that
> poppedup
> >> after reading it:
> >>
> >> @Question: Does a IndexSearcher call upon an IndexReader's incRef()
> method
> >> internally when the reader is passed in as an argument to the searcher's
> >> constructor?
> >> @Motivation: I ask because, if that is the case then I will need to make
> an
> >> additional call to decRef(). Also the book claims that
> >> "IndexSearcher.close() is a no-op if you provide an already opened
> >> IndexReader when creating the IndexSearcher" so I guess I can't count on
> >> that close() method to call the decRef() method for me and I must call
> it
> >> myself?  Once again, I'm thinking of doing all this only if incRef() was
> >> called on the reader in the searcher's constructor, which I'm hoping
> someone
> >> will confirm for me.
> >>
> >> Thanks,
> >> - Pulkit
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6b17ce90ee604939c2ba4--

From java-user-return-47634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 17:47:38 2010
Return-Path: <java-user-return-47634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51708 invoked from network); 27 Oct 2010 17:47:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 17:47:38 -0000
Received: (qmail 15774 invoked by uid 500); 27 Oct 2010 17:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15740 invoked by uid 500); 27 Oct 2010 17:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15732 invoked by uid 99); 27 Oct 2010 17:30:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 17:30:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 17:30:30 +0000
Received: by eyg24 with SMTP id 24so508826eyg.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 10:30:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.87.20 with SMTP id x20mr1167573wee.52.1288200609684; Wed,
 27 Oct 2010 10:30:09 -0700 (PDT)
Received: by 10.216.93.14 with HTTP; Wed, 27 Oct 2010 10:30:09 -0700 (PDT)
In-Reply-To: <AANLkTikqv7wSS_Ww5r7rQmxy8_BfXrG=U0q57+_e=L-r@mail.gmail.com>
References: <AANLkTinzfyNFbkZE2YH58S1r5DxpRe=zEtj6Yppc4x7M@mail.gmail.com>
	<AANLkTinc_F-ieQJ=DG-8aCBYbJ+AV=4xu_chqcKR+bXT@mail.gmail.com>
	<AANLkTikUzJqO4xhB-EOdCFb+r4d84hXwBL1Tmx+9MBZy@mail.gmail.com>
	<AANLkTikqv7wSS_Ww5r7rQmxy8_BfXrG=U0q57+_e=L-r@mail.gmail.com>
Date: Wed, 27 Oct 2010 13:30:09 -0400
Message-ID: <AANLkTikS68E=d923KZ58GVx0i28KyeJA9S3z87_3Tk5=@mail.gmail.com>
Subject: Re: Does a IndexSearcher call incRef on the underlying reader?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Oct 27, 2010 at 1:01 PM, Pulkit Singhal <pulkitsinghal@gmail.com> wrote:

> 1st of all, great book.

Thank you!

> @Question3: It sounds like an IndexReader always starts with a count of zero
> but that should not be a cause of worry because the value only gets acted
> upon in a call to decRef() ... am I right?

Actually, refCount of a new IndexReader starts at 1.  Then the caller
must call close (which under the hood calls decRef) to drop it to 0.

> @Question4: It seems to me that based on you explanation so far, the
> IndexReader will end up closing after the very 1st search. That doesn't
> sound too efficient given that keeping it alive and kicking is something
> that is highly desirable ... no? Am I missing something or does that
> responsibility fall elsewhere?

Actually, no -- SearcherManager also holds a ref.  So when there are
no queries in flight, the refCount will be 1.  It's only when the
searcher is swapped out for a new one that we decRef the old one and
its refCount drops to 0 (once all in-flight queries finish).

> I hope I haven't hijacked my own thread?

I don't think so!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 20:04:32 2010
Return-Path: <java-user-return-47635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22636 invoked from network); 27 Oct 2010 20:04:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 20:04:32 -0000
Received: (qmail 41583 invoked by uid 500); 27 Oct 2010 20:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41444 invoked by uid 500); 27 Oct 2010 20:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41435 invoked by uid 99); 27 Oct 2010 20:04:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 20:04:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 20:04:25 +0000
Received: from ([10.160.3.175])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.52602564;
	Wed, 27 Oct 2010 16:04:01 -0400
Received: from ohcinpub02.corp.local (10.160.3.252) by ohcinht03.corp.local
 (10.160.3.175) with Microsoft SMTP Server (TLS) id 8.2.254.0; Wed, 27 Oct
 2010 16:04:01 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinpub02.corp.local
 ([10.160.3.252]) with mapi; Wed, 27 Oct 2010 16:04:01 -0400
From: "Provalov, Ivan" <Ivan.Provalov@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Oct 2010 16:03:59 -0400
Subject: Michigan Information Retrieval Enthusiasts Group Quarterly Meetup -
 November 13, 2010
Thread-Topic: Michigan Information Retrieval Enthusiasts Group Quarterly
 Meetup - November 13, 2010
Thread-Index: Act2Ehf7nINC+h3OSI2+1TB7otxN9w==
Message-ID: <70EA5691BD59734784FF872CD1B9747A284CC83647@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1181-6.500.1024-17728.007
x-tm-as-result: No--59.758400-8.000000-31
x-tm-as-user-approved-sender: No
x-tm-as-user-blocked-sender: No
Content-Type: multipart/alternative;
	boundary="_000_70EA5691BD59734784FF872CD1B9747A284CC83647OHCINMBX01cor_"
MIME-Version: 1.0

--_000_70EA5691BD59734784FF872CD1B9747A284CC83647OHCINMBX01cor_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Cengage Learning is organizing a second quarterly meetup in Michigan (web-c=
onference and dial-in are available) for the IR Enthusiasts.  Please RSVP a=
t http://www.meetup.com/Michigan-Information-Retrieval-Enthusiasts-Group

Presentations:

1. Search Assist Dictionary Based on Corpus Terms Collocation by Drew Kozse=
wnik, Cengage Learning
The presentation will be a brief overview of what search assist is followed=
 by a technical discussion about the algorithms that make it work.  The tec=
hnical part will detail phrase extraction (building the dictionaries), runt=
ime (indexing and retrieving relevant phrases based on a partial query), an=
d phrase correlation (The "Kevin Bacon" feature which returns phrases that =
often occur nearby recommended phrases).
2. Carrot2 Clustering Engine by Stanislaw Osinski and Dawid Weiss, Carrot S=
earch (Poland)
Overview of Carrot2 - an Open Source Search Results Clustering Engine.  It =
can automatically organize small collections of documents, e.g. search resu=
lts, into thematic categories.

Schedule:

1. 9-10am breakfast (uRefer, Ann Arbor)
2. 10-11am Presentations (uRefer, Ann Arbor, Web-conferencing)
3. 11am-12pm discussion

Remote Dial-in:
866-394-9514
6087393

Remote Web-Conferencing:
http://www.conferenceplus.com/
866-394-9514
6087393

Location:
uRefer, 924 N. Main St., Suite 3, Ann Arbor, MI

Thank you,

Ivan Provalov
Information Architect
Cengage Learning

--_000_70EA5691BD59734784FF872CD1B9747A284CC83647OHCINMBX01cor_--

From java-user-return-47636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 20:12:43 2010
Return-Path: <java-user-return-47636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28390 invoked from network); 27 Oct 2010 20:12:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 20:12:43 -0000
Received: (qmail 55547 invoked by uid 500); 27 Oct 2010 20:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55508 invoked by uid 500); 27 Oct 2010 20:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55500 invoked by uid 99); 27 Oct 2010 20:12:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 20:12:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.11.223.24] (HELO mail.ova.st) (204.11.223.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 20:12:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.ova.st (Postfix) with ESMTP id BC15A221070
	for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 13:12:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at ova.st
Received: from mail.ova.st ([127.0.0.1])
	by localhost (mail.ova.st [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aOYU1Owtc8FL for <java-user@lucene.apache.org>;
	Wed, 27 Oct 2010 13:12:12 -0700 (PDT)
Received: from mail.ova.st (srv1.mail.ovast.mlp1.peakwebhosting.com [204.11.223.24])
	by mail.ova.st (Postfix) with ESMTP id 631E122106F
	for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 13:12:12 -0700 (PDT)
Date: Wed, 27 Oct 2010 13:12:12 -0700 (PDT)
From: Maria Vazquez <mvazquez@ova.st>
To: java-user@lucene.apache.org
Message-ID: <1855818932.13887.1288210332268.JavaMail.root@srv1.mail.ovast.mlp1.peakwebhosting.com>
Subject: Text categorization / classification
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [76.79.233.194]
X-Mailer: Zimbra 6.0.6_GA_2330.RHEL5_64 (ZimbraWebClient - FF3.0 (Mac)/6.0.6_GA_2330.RHEL5_64)

I need to auto-categorize a large number of documents. They are basically news articles from major news sources (nytimes, npr, abcnews, etc).
I'd like to categorize them automatically. Any suggestions?
Lucene in Action suggests using a set of documents to build category vectors and then comparing each document to each of those vectors and get the closest one.
The approach seems pretty simple (from other papers I read on text categorization) but maybe you guys know of something out there that already does this using Lucene/Solr.
Thanks!
Maria

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 21:58:46 2010
Return-Path: <java-user-return-47637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60720 invoked from network); 27 Oct 2010 21:58:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 21:58:45 -0000
Received: (qmail 17123 invoked by uid 500); 27 Oct 2010 21:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17054 invoked by uid 500); 27 Oct 2010 21:58:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17036 invoked by uid 99); 27 Oct 2010 21:58:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 21:58:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 21:57:43 +0000
Received: by wyg36 with SMTP id 36so1284630wyg.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 14:57:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=TODBBjx4Oyu4fQhqDNuyJuP74lI2IhrtSJ3ul5QAzcs=;
        b=kHs/HpQFTCwNoCqg0nt8/ZZYwUU51KOORKKqS9jRK8Ogj/22mlXiZ5Ihsr79MsVVHC
         zbTWm0r165zAAuUXnCqF1/LnObG1uFLiJnrAKsDuJMsN15GYPNISr5gxJNSzhFrg2Mtx
         SWsdM41rKQ25GcjRRPZ+OEn157OdnaRcviKIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=J+bK1L3c7t1Zj4svKuF2JcmMeU6FbtM2p7DSxGLzxaXwJmGQwqa2TO0L7UmqKQPQK1
         SMnJhFcTjOA8Zu5KRpH7u40TJWpx/Zeq0kImn2t2s8EjP1WUvN3gEF/fl1Ijzeq0bUDs
         v7EwoW61bh8yY2brwnTm74S/GIAYcksgQM2y0=
Received: by 10.216.133.159 with SMTP id q31mr9639513wei.108.1288216642485;
 Wed, 27 Oct 2010 14:57:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.6.81 with HTTP; Wed, 27 Oct 2010 14:57:02 -0700 (PDT)
From: Hasan Diwan <hasan.diwan@gmail.com>
Date: Wed, 27 Oct 2010 14:57:02 -0700
Message-ID: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com>
Subject: Email Indexing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

I'd like to provide myself with a searchable index of email. I'm
familiar with the Javamail library, so will use this to fetch the
mail. Anyone out there done any indexing of email? On Sourceforge,
there's zoe[1], which hasn't had a release since 2004, and a couple of
other projects. I'm also seeing something about sphinx, which reads
like another indexing platform(?). Any advice regarding this is
appreciated.
-- 
Sent from my mobile device
Envoyait de mon telephone mobil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 27 23:59:58 2010
Return-Path: <java-user-return-47638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5876 invoked from network); 27 Oct 2010 23:59:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Oct 2010 23:59:57 -0000
Received: (qmail 37674 invoked by uid 500); 27 Oct 2010 23:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37632 invoked by uid 500); 27 Oct 2010 23:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37624 invoked by uid 99); 27 Oct 2010 23:59:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 23:59:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Oct 2010 23:59:50 +0000
Received: by wwi17 with SMTP id 17so1392126wwi.5
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 16:59:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=DzJST3hGKzLkslJH5yQx5tTi7NiwowHqdZgndUpXbpY=;
        b=OruAs4XDKAGnGUmj5G34H0IxvOJqwmxupcyir8rsxb/W2m6uoRUnIvXfGr1nciisHe
         /hbjo7pL6qxfD5rc/sD+w3edz+/9m7yZwMhxoktGVChBQAmH9FSTwJgRBdZCKPQg9JjP
         TzEi2GisIqdcRWRy2rW6PRGsD85QAYjNC8RCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Xdn3BEijnhkB2rt3Lxd2IBk8pF6Z4iTOOd50si+/t0nTTb7UYtOxiB0EhXZkq3zatN
         GfOSUYouVEhkb3fwUUqVF7kXc0XYj5NomT+f/0YYyLUkE5UtIjAe0JsmS8Ck9V5sxmbe
         tppQfbpwJmZ/+QVBUYr+uDN3LZ55IcWwQwo2s=
MIME-Version: 1.0
Received: by 10.216.25.9 with SMTP id y9mr1552941wey.83.1288223967339; Wed, 27
 Oct 2010 16:59:27 -0700 (PDT)
Received: by 10.216.60.209 with HTTP; Wed, 27 Oct 2010 16:59:27 -0700 (PDT)
In-Reply-To: <1855818932.13887.1288210332268.JavaMail.root@srv1.mail.ovast.mlp1.peakwebhosting.com>
References: <1855818932.13887.1288210332268.JavaMail.root@srv1.mail.ovast.mlp1.peakwebhosting.com>
Date: Wed, 27 Oct 2010 16:59:27 -0700
Message-ID: <AANLkTimgS2sdeULTBFtA5ZO+PiTkvsZNYoBnya3osoBm@mail.gmail.com>
Subject: Re: Text categorization / classification
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

There are tools for this in the Mahout project. These are oriented
toward large-scale work.

http://mahout.apache.org

There is a big learning curve and you have to learn Hadoop somewhat.

The book 'Collective Intelligence' includes a suite of Python tools
for small-scale experiments.

On Wed, Oct 27, 2010 at 1:12 PM, Maria Vazquez <mvazquez@ova.st> wrote:
> I need to auto-categorize a large number of documents. They are basically news articles from major news sources (nytimes, npr, abcnews, etc).
> I'd like to categorize them automatically. Any suggestions?
> Lucene in Action suggests using a set of documents to build category vectors and then comparing each document to each of those vectors and get the closest one.
> The approach seems pretty simple (from other papers I read on text categorization) but maybe you guys know of something out there that already does this using Lucene/Solr.
> Thanks!
> Maria
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 01:17:10 2010
Return-Path: <java-user-return-47639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51861 invoked from network); 28 Oct 2010 01:17:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 01:17:09 -0000
Received: (qmail 10767 invoked by uid 500); 28 Oct 2010 01:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10721 invoked by uid 500); 28 Oct 2010 01:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10713 invoked by uid 99); 28 Oct 2010 01:17:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 01:17:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.177.211.60] (HELO wical.com) (68.177.211.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 01:16:59 +0000
Received: from [10.0.1.24] (unknown [68.177.211.59])
	by wical.com (Postfix) with ESMTPSA id B76E5DA55
	for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 19:16:08 -0600 (MDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Email Indexing
From: Troy Wical <troy@wical.com>
In-Reply-To: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com>
Date: Wed, 27 Oct 2010 19:16:36 -0600
Content-Transfer-Encoding: quoted-printable
Message-Id: <D02ACCAB-79E7-46EA-8712-E6C60FF1377F@wical.com>
References: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

On Oct 27, 2010, at 3:57 PM, Hasan Diwan wrote:

> I'd like to provide myself with a searchable index of email. I'm
> familiar with the Javamail library, so will use this to fetch the
> mail. Anyone out there done any indexing of email? On Sourceforge,
> there's zoe[1], which hasn't had a release since 2004, and a couple of
> other projects. I'm also seeing something about sphinx, which reads
> like another indexing platform(?). Any advice regarding this is
> appreciated.

Depends on what your trying to index, I suppose. Maildir or mbox? For =
some time now, off and on, I have been working to index an ezmlm mailing =
list archive. In the end, I went with Swish-E and have made quite a bit =
of progress. I am short of my complete goal though. The issue is that =
the search results do not return results that contain the subject, and =
there is currently no excerpt or phrase highlighting. My problem is the =
flat text email files I am working with have no xml or anything to help =
the indexer create fields from. I've not yet figured out how to convert =
the emails to xml.

Other than though, it's functional, and very fast. That being said, I'm =
sure Sphinx or Lucene could do the same thing, and I would love to hear =
from anyone out there who is using Lucene to index a list of emails that =
are mbox format.

You can see my Swish-E implementation, in all it's unfinished glory, at =
http://type2.com/search
It covers roughly 200,000 emails over the past 15 years.

Peace, Troy=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 02:13:53 2010
Return-Path: <java-user-return-47640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73034 invoked from network); 28 Oct 2010 02:13:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 02:13:53 -0000
Received: (qmail 66118 invoked by uid 500); 28 Oct 2010 02:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66052 invoked by uid 500); 28 Oct 2010 02:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66044 invoked by uid 99); 28 Oct 2010 02:13:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 02:13:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.11.223.24] (HELO mail.ova.st) (204.11.223.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 02:13:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.ova.st (Postfix) with ESMTP id DAA67221070
	for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 19:13:23 -0700 (PDT)
X-Virus-Scanned: amavisd-new at ova.st
Received: from mail.ova.st ([127.0.0.1])
	by localhost (mail.ova.st [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2q69mt-EE8Yc for <java-user@lucene.apache.org>;
	Wed, 27 Oct 2010 19:13:23 -0700 (PDT)
Received: from [192.168.1.100] (unknown [190.245.112.120])
	by mail.ova.st (Postfix) with ESMTPSA id E50C822106D
	for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 19:13:22 -0700 (PDT)
Subject: Re: Text categorization / classification
References: <1855818932.13887.1288210332268.JavaMail.root@srv1.mail.ovast.mlp1.peakwebhosting.com> <AANLkTimgS2sdeULTBFtA5ZO+PiTkvsZNYoBnya3osoBm@mail.gmail.com>
From: "mvazquez@ova.st" <mvazquez@ova.st>
Content-Type: text/plain;
	charset=us-ascii
X-Mailer: iPhone Mail (8B117)
In-Reply-To: <AANLkTimgS2sdeULTBFtA5ZO+PiTkvsZNYoBnya3osoBm@mail.gmail.com>
Message-Id: <E6B80EDD-58E8-4E9B-A7D2-1163FADFD87D@ova.st>
Date: Wed, 27 Oct 2010 23:13:46 -0300
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (iPhone Mail 8B117)

Thanks a lot!
I was reading about Mahout today.
I'll try that out.
Thanks again
Maria

Sent from my iPhone


On Oct 27, 2010, at 20:59, Lance Norskog <goksron@gmail.com> wrote:

> There are tools for this in the Mahout project. These are oriented
> toward large-scale work.
>=20
> http://mahout.apache.org
>=20
> There is a big learning curve and you have to learn Hadoop somewhat.
>=20
> The book 'Collective Intelligence' includes a suite of Python tools
> for small-scale experiments.
>=20
> On Wed, Oct 27, 2010 at 1:12 PM, Maria Vazquez <mvazquez@ova.st> wrote:
>> I need to auto-categorize a large number of documents. They are basically=
 news articles from major news sources (nytimes, npr, abcnews, etc).
>> I'd like to categorize them automatically. Any suggestions?
>> Lucene in Action suggests using a set of documents to build category vect=
ors and then comparing each document to each of those vectors and get the cl=
osest one.
>> The approach seems pretty simple (from other papers I read on text catego=
rization) but maybe you guys know of something out there that already does t=
his using Lucene/Solr.
>> Thanks!
>> Maria
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
>=20
>=20
> --=20
> Lance Norskog
> goksron@gmail.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 03:11:16 2010
Return-Path: <java-user-return-47641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91066 invoked from network); 28 Oct 2010 03:11:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 03:11:15 -0000
Received: (qmail 92877 invoked by uid 500); 28 Oct 2010 03:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92730 invoked by uid 500); 28 Oct 2010 03:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92721 invoked by uid 99); 28 Oct 2010 03:11:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 03:11:12 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andy.scott12@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 03:11:08 +0000
Received: by bwz19 with SMTP id 19so1264869bwz.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 20:10:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0l+isWhu4Hl25Vqfr+CubjylaWKJ4V0ueLPmBl1Nd8o=;
        b=u7NFXOrStCKfTAaENxyNp9d7enZDzRmuDmKvQxzal4D0cQD2m2B65++PXeuCq0YVNr
         Di8krtNMTOzBqdElyA2zRMSujRPRaLljSaap04NDf21laf3AqXgvviGLzgn74ii5Nf5N
         vZBlM/q9c+pze8dcmZ4y/iv7VlAsMuNYZ33MQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VGGAheohABLsxUS/6tNtBJsnE4BtCXFGSGg/wC3oZBU2ir4Wb2W7VMNT+v3DBwMZVV
         p2gv0VBF0OW4I5PB+mUwRgZVQN11fYkYEHjR/QXsbly0RH51nuAXI6XMSR8ePb1pNbIR
         iSnk771zixC8l4MUiTWJcYRYlYlOkEYxBqKSk=
MIME-Version: 1.0
Received: by 10.204.115.2 with SMTP id g2mr7970109bkq.19.1288235446448; Wed,
 27 Oct 2010 20:10:46 -0700 (PDT)
Received: by 10.204.64.134 with HTTP; Wed, 27 Oct 2010 20:10:46 -0700 (PDT)
In-Reply-To: <AANLkTim3pRkiosxN6dNwT8_m4gSejDGHjP5c7kODCnbO@mail.gmail.com>
References: <AANLkTikjMaLGr-6sPO=s_4TdenRk6VsNM2gftGi95GAh@mail.gmail.com>
	<AANLkTim3pRkiosxN6dNwT8_m4gSejDGHjP5c7kODCnbO@mail.gmail.com>
Date: Thu, 28 Oct 2010 14:10:46 +1100
Message-ID: <AANLkTi=mvX2O0PNEP7fQSgE8q_iyL-MZC7hRQ=jeQJAd@mail.gmail.com>
Subject: Fuzzy Phrase Search
From: Andrew Scott <andy.scott12@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c596ff2c33810493a4b0c8

--001636c596ff2c33810493a4b0c8
Content-Type: text/plain; charset=ISO-8859-1

Hi Guys,

I am wondering how I can go about doing a Fuzzy Phrase search using
Lucene.NET 2.9.2 - I've tired looking around everywhere but there doesn't
really seem to be any resources related to this anywhere.

I found this stackoverflow
link<http://stackoverflow.com/questions/2589086/lucene-fuzzy-match-on-phrase-instead-of-single-word>-
but hoping that you might be able to help more ?

Thanks,

Andy

--001636c596ff2c33810493a4b0c8--

From java-user-return-47642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 04:05:04 2010
Return-Path: <java-user-return-47642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16141 invoked from network); 28 Oct 2010 04:05:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 04:05:04 -0000
Received: (qmail 30956 invoked by uid 500); 28 Oct 2010 04:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30784 invoked by uid 500); 28 Oct 2010 04:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30776 invoked by uid 99); 28 Oct 2010 04:05:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:05:01 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:04:55 +0000
Received: by ywp4 with SMTP id 4so1064340ywp.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 21:04:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=anR6HyKodrOHNvxf6igqbsd8d8DK4MZCcsiwiAxvAmU=;
        b=gry/jXdhjN2RcO6EFoMCJG72N5cQvb+03b9OWfzHzmHyjoqBI9M2phOSJrmQvCdZ+e
         7AZi/shUESEm3uDvWcScxH6DgfXL4/jLi+wTI004BvE2oMqK77eLCgAHUtJRYnO7eY49
         73c+fp7XgOaJ4lhAxi3cOq4g3U+VJr8YjHJ3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=twcqLkiZQZah3Q9Tuq6dnaMMROiIlq56THzbAM98u082Ph0wi52KnKNgnfbaL+c/bO
         W63lqOITKzLPq4uM8pfOsGZqjsl8Ylhi2ZSWTm//HImborD6F6Cm1BxtL9wRxjHcjZrN
         ggLQZmq0ytAcbnTjwNgFJdyA829oZKUnwDnqs=
MIME-Version: 1.0
Received: by 10.150.185.4 with SMTP id i4mr9606991ybf.428.1288238674703; Wed,
 27 Oct 2010 21:04:34 -0700 (PDT)
Received: by 10.151.99.4 with HTTP; Wed, 27 Oct 2010 21:04:34 -0700 (PDT)
In-Reply-To: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com>
References: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com>
Date: Thu, 28 Oct 2010 00:04:34 -0400
Message-ID: <AANLkTi=55sE6uPTe2=0OQ9xJ+d3EdSsGfbQ8YbfTK1pY@mail.gmail.com>
Subject: Re: Lucene index update
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd4d53c9775140493a57034

--000e0cd4d53c9775140493a57034
Content-Type: text/plain; charset=UTF-8

Look interesting, what is the merit in having a second index in order to
keep the document id the same? Perhaps I have misunderstood. Just want to
understand your motivation here.

On Wed, Oct 20, 2010 at 2:57 PM, Nilesh Vijaywargiay <nilesh.vijay@gmail.com
> wrote:

> I've written a blog regarding a work around for updating index in Lucene
> using parallel reader. It's explained with results and pictures.
>
> It would be great if you have a look at it. The link:
> http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
>
> <http://the10minutes.blogspot.com/2010/10/lucene-index-update.html>Thanks
> Nilesh
>

--000e0cd4d53c9775140493a57034--

From java-user-return-47643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 04:18:29 2010
Return-Path: <java-user-return-47643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24335 invoked from network); 28 Oct 2010 04:18:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 04:18:28 -0000
Received: (qmail 40444 invoked by uid 500); 28 Oct 2010 04:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40296 invoked by uid 500); 28 Oct 2010 04:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40286 invoked by uid 99); 28 Oct 2010 04:18:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:18:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:18:18 +0000
Received: by qwb8 with SMTP id 8so1594070qwb.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 21:17:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=bAtTgut3y+CrHBF5GWtdeuzXIsjYhR5WG1rYwCmf3Sc=;
        b=P19Fos7sm0G93hl0AqZHlBWx55b5QLOCYTrDcQ+0ammwcKrBpxLMXUoV2ASPmLka7L
         T/OI3m9R+h+xoO9570WOxzvAewgocbdKIR3RCDosEGeHLh2EDrmrm9MHk++nF00smfbe
         10rmM8HFIN8yix8uWfftukBT8kzFNuRY309eY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=t6zHN7dK+xglvfsG2KxoFxWv5WqCQoo9klYgNgV5krHlq6muCEwdQxfEIeTAnh4OdU
         1wvFRFqeJKt7rfH5bvK/amsg19OxK7UH49YMcnK8acTdxLfrB1Ovm80lKD39w6UUeEsZ
         JHMIgXOi8YwuG67t+sEY7zmVM/XM4dDh8DgwQ=
Received: by 10.229.193.18 with SMTP id ds18mr5741607qcb.211.1288239477404;
 Wed, 27 Oct 2010 21:17:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Wed, 27 Oct 2010 21:17:37 -0700 (PDT)
In-Reply-To: <AANLkTi=55sE6uPTe2=0OQ9xJ+d3EdSsGfbQ8YbfTK1pY@mail.gmail.com>
References: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com> <AANLkTi=55sE6uPTe2=0OQ9xJ+d3EdSsGfbQ8YbfTK1pY@mail.gmail.com>
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Wed, 27 Oct 2010 21:17:37 -0700
Message-ID: <AANLkTimPfCv3cESFRQ=7we9RsQ7y095+g9eJFBdAnPsS@mail.gmail.com>
Subject: Re: Lucene index update
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362845f46fb80a0493a5a083
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362845f46fb80a0493a5a083
Content-Type: text/plain; charset=ISO-8859-1

Pulkit,
Parallel reader takes the union of all fields for a given id. Thus if I want
to add a field or modify a field of a document which has id 2 in index1, I
need to createa a document with id 2 in index2 with the fields I want to
add/modify. Thus parallel reader would treat them as fields of a single
document.
Now if I give doc.getFields() for that document then it would list fields
from index1 and index2.

 On Wed, Oct 27, 2010 at 9:04 PM, Pulkit Singhal <pulkitsinghal@gmail.com>wrote:

> Look interesting, what is the merit in having a second index in order to
> keep the document id the same? Perhaps I have misunderstood. Just want to
> understand your motivation here.
>
> On Wed, Oct 20, 2010 at 2:57 PM, Nilesh Vijaywargiay <
> nilesh.vijay@gmail.com
> > wrote:
>
> > I've written a blog regarding a work around for updating index in Lucene
> > using parallel reader. It's explained with results and pictures.
> >
> > It would be great if you have a look at it. The link:
> > http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> >
> > <http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> >Thanks
> > Nilesh
> >
>

--0016362845f46fb80a0493a5a083--

From java-user-return-47644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 04:38:43 2010
Return-Path: <java-user-return-47644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29894 invoked from network); 28 Oct 2010 04:38:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 04:38:43 -0000
Received: (qmail 50622 invoked by uid 500); 28 Oct 2010 04:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50346 invoked by uid 500); 28 Oct 2010 04:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50338 invoked by uid 99); 28 Oct 2010 04:38:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:38:39 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 04:38:32 +0000
Received: by yxn22 with SMTP id 22so1065758yxn.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 21:38:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=5oq4P8uJ/B2pph4EwXf/a+jm0uTpxUTrgJlDHzgpcE8=;
        b=XUTg1gkZJT0BdR2IE1B/VOnVZ8xmrm5x+LmbNEdvOBzvXZ3OMAhb7mfkEYKcUMcfA3
         n4CbVh5kwsWwIwxGgWioYCWKof/EOi3yDnwDQmw5BMecmFoqshFx5qIfpIUicPyNA3wt
         oBq2I+RJOhnhk0s9TIdBfsf1u+ELm8U14H2JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PXNdH88uSGmmACxr08iXpmklO8polEzF04Q9VWdPYX6e4mTIpNiQs3ag523s0zV80g
         5atzK76z6cwz8QiO8RpzG9v8sll0CYTc+CXzwJj1UlmZCW3qLz52UVzzRxq7Zt/y5mdd
         W5fkD8ueTjJENIAjMpz6z0kCc6v4u+tq7txfk=
MIME-Version: 1.0
Received: by 10.151.47.14 with SMTP id z14mr19011067ybj.314.1288240691275;
 Wed, 27 Oct 2010 21:38:11 -0700 (PDT)
Received: by 10.151.99.4 with HTTP; Wed, 27 Oct 2010 21:38:11 -0700 (PDT)
In-Reply-To: <AANLkTimPfCv3cESFRQ=7we9RsQ7y095+g9eJFBdAnPsS@mail.gmail.com>
References: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com>
	<AANLkTi=55sE6uPTe2=0OQ9xJ+d3EdSsGfbQ8YbfTK1pY@mail.gmail.com>
	<AANLkTimPfCv3cESFRQ=7we9RsQ7y095+g9eJFBdAnPsS@mail.gmail.com>
Date: Thu, 28 Oct 2010 00:38:11 -0400
Message-ID: <AANLkTinbPb10oOiVis1bMc=EBtJPvn8_K7cmb6UEQD38@mail.gmail.com>
Subject: Re: Lucene index update
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174ff64ec9e64b0493a5e884
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174ff64ec9e64b0493a5e884
Content-Type: text/plain; charset=UTF-8

But why do you feel the need to have a parallel reader that combines result
sets across two indices based on docId?

On Thu, Oct 28, 2010 at 12:17 AM, Nilesh Vijaywargiay <
nilesh.vijay@gmail.com> wrote:

> Pulkit,
> Parallel reader takes the union of all fields for a given id. Thus if I
> want
> to add a field or modify a field of a document which has id 2 in index1, I
> need to createa a document with id 2 in index2 with the fields I want to
> add/modify. Thus parallel reader would treat them as fields of a single
> document.
> Now if I give doc.getFields() for that document then it would list fields
> from index1 and index2.
>
>  On Wed, Oct 27, 2010 at 9:04 PM, Pulkit Singhal <pulkitsinghal@gmail.com
> >wrote:
>
> > Look interesting, what is the merit in having a second index in order to
> > keep the document id the same? Perhaps I have misunderstood. Just want to
> > understand your motivation here.
> >
> > On Wed, Oct 20, 2010 at 2:57 PM, Nilesh Vijaywargiay <
> > nilesh.vijay@gmail.com
> > > wrote:
> >
> > > I've written a blog regarding a work around for updating index in
> Lucene
> > > using parallel reader. It's explained with results and pictures.
> > >
> > > It would be great if you have a look at it. The link:
> > > http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> > >
> > > <http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> > >Thanks
> > > Nilesh
> > >
> >
>

--0015174ff64ec9e64b0493a5e884--

From java-user-return-47645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 05:53:06 2010
Return-Path: <java-user-return-47645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51296 invoked from network); 28 Oct 2010 05:53:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 05:53:05 -0000
Received: (qmail 90830 invoked by uid 500); 28 Oct 2010 05:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90522 invoked by uid 500); 28 Oct 2010 05:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90514 invoked by uid 99); 28 Oct 2010 05:53:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 05:53:01 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nilesh.vijay@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 05:52:54 +0000
Received: by qwb8 with SMTP id 8so1664075qwb.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 22:52:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=kdubDVUS4kj9p7LMRJD7RarK+EZOw9oh9itf03rbTN4=;
        b=fWcq1M2SPLqJxDXVCtm3KLn6F1KJLhaOnSBsGgAyB3Ohno6jtvBLT1SFKac5k2+ZV9
         DZLF+jD2wggIWA8Q9X7mmRwNh+mdlLmIZAem4OBgQ/qfKuamvd3FLGCyhXRqrmriN1XN
         Zzo5D/bZl7VoQEghdL3YjZMsxl8E++w1PZSSU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Xn5u3t6GVgGcOtuLZk4Ybp2sGod+6mQWVkBcQuVX1PKIJfvDD8ROT0FLoLHtLFf2ge
         gjzVOu1pHKAPsvZTqSAh0MAQJm8DWFbfIqU58UV7gWE7XOUW89/4+5W1KFHzkqK65rpg
         y34MOnBnnjuo9AsMj8Ayvje0c3f5jHVbjkXLs=
Received: by 10.224.180.84 with SMTP id bt20mr3583672qab.293.1288245153898;
 Wed, 27 Oct 2010 22:52:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.114.70 with HTTP; Wed, 27 Oct 2010 22:52:13 -0700 (PDT)
In-Reply-To: <AANLkTinbPb10oOiVis1bMc=EBtJPvn8_K7cmb6UEQD38@mail.gmail.com>
References: <AANLkTi=UiKqXjiqHNhS7LM92tSnZg744SHVqzGSpJA+x@mail.gmail.com>
 <AANLkTi=55sE6uPTe2=0OQ9xJ+d3EdSsGfbQ8YbfTK1pY@mail.gmail.com>
 <AANLkTimPfCv3cESFRQ=7we9RsQ7y095+g9eJFBdAnPsS@mail.gmail.com> <AANLkTinbPb10oOiVis1bMc=EBtJPvn8_K7cmb6UEQD38@mail.gmail.com>
From: Nilesh Vijaywargiay <nilesh.vijay@gmail.com>
Date: Wed, 27 Oct 2010 22:52:13 -0700
Message-ID: <AANLkTing12hmktfcSNaWkrzBakhKRu5B3SX4BSj7Cxre@mail.gmail.com>
Subject: Re: Lucene index update
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303b3a1bc81ef50493a6f299
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303b3a1bc81ef50493a6f299
Content-Type: text/plain; charset=ISO-8859-1

One major reason is to update a field or rather shadow a field.
i have a field named "testField" in index1 and i want to update that field.
When I update, I want only the new value to be reflected, not the value in
old field.
now parallelreader starts from the latest index, i.e index2 and searches for
'testField'. It gets a hit in the index2 itself and doesn't go forward. Thus
I am shadowing the old value of 'testField' with the new value. Does that
make sense?

On Wed, Oct 27, 2010 at 9:38 PM, Pulkit Singhal <pulkitsinghal@gmail.com>wrote:

> But why do you feel the need to have a parallel reader that combines result
> sets across two indices based on docId?
>
> On Thu, Oct 28, 2010 at 12:17 AM, Nilesh Vijaywargiay <
>  nilesh.vijay@gmail.com> wrote:
>
> > Pulkit,
> > Parallel reader takes the union of all fields for a given id. Thus if I
> > want
> > to add a field or modify a field of a document which has id 2 in index1,
> I
> > need to createa a document with id 2 in index2 with the fields I want to
> > add/modify. Thus parallel reader would treat them as fields of a single
> > document.
> > Now if I give doc.getFields() for that document then it would list fields
> > from index1 and index2.
> >
> >  On Wed, Oct 27, 2010 at 9:04 PM, Pulkit Singhal <
> pulkitsinghal@gmail.com
> > >wrote:
> >
> > > Look interesting, what is the merit in having a second index in order
> to
> > > keep the document id the same? Perhaps I have misunderstood. Just want
> to
> > > understand your motivation here.
> > >
> > > On Wed, Oct 20, 2010 at 2:57 PM, Nilesh Vijaywargiay <
> > > nilesh.vijay@gmail.com
> > > > wrote:
> > >
> > > > I've written a blog regarding a work around for updating index in
> > Lucene
> > > > using parallel reader. It's explained with results and pictures.
> > > >
> > > > It would be great if you have a look at it. The link:
> > > > http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> > > >
> > > > <http://the10minutes.blogspot.com/2010/10/lucene-index-update.html
> > > >Thanks
> > > > Nilesh
> > > >
> > >
> >
>

--20cf303b3a1bc81ef50493a6f299--

From java-user-return-47646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 06:06:08 2010
Return-Path: <java-user-return-47646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58723 invoked from network); 28 Oct 2010 06:06:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 06:06:08 -0000
Received: (qmail 98034 invoked by uid 500); 28 Oct 2010 06:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97161 invoked by uid 500); 28 Oct 2010 06:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97148 invoked by uid 99); 28 Oct 2010 06:06:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 06:06:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 06:05:59 +0000
Received: by wyg36 with SMTP id 36so1611443wyg.35
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 23:05:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Si7FBupwmECkMofzGJiwmt5vj/D8v/b94OreChuNBac=;
        b=sy5jUz2sZB06nv5Bonvdcn/dWrONzFbI2acyDn2VHEimS3mfuQ+cJ+b7Kvpuf1IoOT
         9eYJ4lDVCn6lFD6+NCLPqmaBr5fz8Awoo8BVaWimTDv8PcsQZ9XS2w0d6FN2oBlw7Oky
         n+8jR201mvMSTEwIhqNSz7u5o5zcduhTIc01s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=FdARE9PWZEOyDkcuJG/x6MDSl/P9AyE9mZpiUxVUqCK1GI9IHd+SthcgfF/z8DnbhB
         fcE4WXPYI0kpExeFgfURf3PkmbFGQkaqg6SVdozN8MAJ3VUkhD77++Q1SDvUsqzzEGsA
         JKP3Vr8VF92izMQzbQr84R9Jxd4w5GamLv+pI=
Received: by 10.216.28.77 with SMTP id f55mr1810763wea.91.1288245937646; Wed,
 27 Oct 2010 23:05:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.6.81 with HTTP; Wed, 27 Oct 2010 23:05:17 -0700 (PDT)
In-Reply-To: <D02ACCAB-79E7-46EA-8712-E6C60FF1377F@wical.com>
References: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com> <D02ACCAB-79E7-46EA-8712-E6C60FF1377F@wical.com>
From: Hasan Diwan <hasan.diwan@gmail.com>
Date: Wed, 27 Oct 2010 23:05:17 -0700
Message-ID: <AANLkTinaS_SNgjbWEKSy4gLg16azyQsHP55EWiGd+_03@mail.gmail.com>
Subject: Re: Email Indexing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 27 October 2010 18:16, Troy Wical <troy@wical.com> wrote:
> Depends on what your trying to index, I suppose. Maildir or mbox? For som=
e time now, off and on, I have been working to index an ezmlm mailing list =
archive. In the end, I went with Swish-E and have made quite a bit of progr=
ess. I am short of my complete goal though. The issue is that the search re=
sults do not return results that contain the subject, and there is currentl=
y no excerpt or phrase highlighting. My problem is the flat text email file=
s I am working with have no xml or anything to help the indexer create fiel=
ds from. I've not yet figured out how to convert the emails to xml.

Neither Maildir or mbox -- IMAP/POP doesn't care. Basically, I want to
build the index based on the contents of (my) gmail box. I can
retrieve the messages using IMAP, just need to figure out the
structure of the index.

Converting email to XML? Email me off-list and I'll provide you with
some help (as email =3D> XML has little to do with lucene).
--=20
Sent from my mobile device
Envoyait de mon telephone mobil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 06:36:15 2010
Return-Path: <java-user-return-47647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77058 invoked from network); 28 Oct 2010 06:36:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 06:36:15 -0000
Received: (qmail 39930 invoked by uid 500); 28 Oct 2010 06:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39719 invoked by uid 500); 28 Oct 2010 06:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39709 invoked by uid 99); 28 Oct 2010 06:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 06:36:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 06:36:05 +0000
Received: by qyk4 with SMTP id 4so1688939qyk.14
        for <java-user@lucene.apache.org>; Wed, 27 Oct 2010 23:35:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        bh=+Z6PEUODeC7dniljfbAx3UofKV0AGgVcuP0YOJ9bJ6E=;
        b=JB85+YrkuEnGaLGd1qJtcFgC+1/DpgA0qXrpTGJ9DGjSJNFS/sU1RcCm3domuaT+YA
         cBu1KoIOOqeVuSjp5FUpHEJjiihsj8GtiIVlC8p8DpJtJ7o3j1cOufYuWD2cJI4Xdny4
         gW/VDy1PFpZMcYGDd4Or363csZiOOYLN9hnUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        b=HGpnGRikxDB1vHzU9Q2EO5nzPR2jW7vtt+nafm39YOsS8GxCht6KtwZQWSuv7371KI
         DtlZtzmSHU7sPoVnfUCixIB8fcNeT7x6Zs0W4pnfe/alDoQ48931NJ+O3jZo8kQMscCT
         G7vKMc+/BL+5et/jIZL8xXLJkrS/0D4hDLYtc=
Received: by 10.224.203.194 with SMTP id fj2mr4162115qab.133.1288247745324;
        Wed, 27 Oct 2010 23:35:45 -0700 (PDT)
Received: from [127.0.0.1] ([207.179.4.183])
        by mx.google.com with ESMTPS id m7sm698395qck.37.2010.10.27.23.35.43
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Oct 2010 23:35:44 -0700 (PDT)
Message-ID: <4CC919BE.1060900@gmail.com>
Date: Wed, 27 Oct 2010 23:35:42 -0700
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.14) Gecko/20100930 SeaMonkey/2.0.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Email Indexing
References: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com> <D02ACCAB-79E7-46EA-8712-E6C60FF1377F@wical.com> <AANLkTinaS_SNgjbWEKSy4gLg16azyQsHP55EWiGd+_03@mail.gmail.com>
In-Reply-To: <AANLkTinaS_SNgjbWEKSy4gLg16azyQsHP55EWiGd+_03@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 101027-1, 10/27/2010), Outbound message
X-Antivirus-Status: Clean

Tika has some mailbox file parsing that includes metadata parsing.
For POP/IMAP email servers I don't know any tools.

Hasan Diwan wrote:
> On 27 October 2010 18:16, Troy Wical<troy@wical.com>  wrote:
>    
>> Depends on what your trying to index, I suppose. Maildir or mbox? For some time now, off and on, I have been working to index an ezmlm mailing list archive. In the end, I went with Swish-E and have made quite a bit of progress. I am short of my complete goal though. The issue is that the search results do not return results that contain the subject, and there is currently no excerpt or phrase highlighting. My problem is the flat text email files I am working with have no xml or anything to help the indexer create fields from. I've not yet figured out how to convert the emails to xml.
>>      
> Neither Maildir or mbox -- IMAP/POP doesn't care. Basically, I want to
> build the index based on the contents of (my) gmail box. I can
> retrieve the messages using IMAP, just need to figure out the
> structure of the index.
>
> Converting email to XML? Email me off-list and I'll provide you with
> some help (as email =>  XML has little to do with lucene).
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 18:46:07 2010
Return-Path: <java-user-return-47648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12389 invoked from network); 28 Oct 2010 18:46:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 18:46:06 -0000
Received: (qmail 58233 invoked by uid 500); 28 Oct 2010 18:46:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58141 invoked by uid 500); 28 Oct 2010 18:46:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58133 invoked by uid 99); 28 Oct 2010 18:46:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 18:46:03 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 18:45:55 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <515830(2)>; Thu, 28 Oct 2010 11:41:59 PDT
To: java-user@lucene.apache.org
Subject: Re: Email Indexing
In-reply-to: <AANLkTinaS_SNgjbWEKSy4gLg16azyQsHP55EWiGd+_03@mail.gmail.com>
References: <AANLkTimyoq=J4UnpXMQXNP_J+x8eCDDD8xQpXWsPsB3N@mail.gmail.com> <D02ACCAB-79E7-46EA-8712-E6C60FF1377F@wical.com> <AANLkTinaS_SNgjbWEKSy4gLg16azyQsHP55EWiGd+_03@mail.gmail.com>
Comments: In-reply-to Hasan Diwan <hasan.diwan@gmail.com>
    message dated "Wed, 27 Oct 2010 23:05:17 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Thu, 28 Oct 2010 11:41:58 PDT
Message-ID: <72786.1288291318@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hasan Diwan <hasan.diwan@gmail.com> wrote:

> On 27 October 2010 18:16, Troy Wical <troy@wical.com> wrote:
> > Depends on what your trying to index, I suppose. Maildir or mbox? For some time now, off and on, I have been working to index an ezmlm mailing list archive. In the end, I went with Swish-E and have made quite a bit of progress. I am short of my complete goal though. The issue is that the search results do not return results that contain the subject, and there is currently no excerpt or phrase highlighting. My problem is the flat text email files I am working with have no xml or anything to help the indexer create fields from. I've not yet figured out how to convert the emails to xml.
> 
> Neither Maildir or mbox -- IMAP/POP doesn't care. Basically, I want to
> build the index based on the contents of (my) gmail box. I can
> retrieve the messages using IMAP, just need to figure out the
> structure of the index.

UpLib has email indexing via Lucene, and an email crawler for IMAP that
can easily be adapted to GMail (I've done it for my gmail accounts).  It
also does message threading, splits off attachments and indexes them as
separate documents (as well as being attachments to the email), and a
few other things, like providing an IMAP server for access to the
indexed mailboxes, as well as the standard Web interface.  It does not
have excerpt or phrase highlighting in the way that you suggest, though.

No need to convert the emails to XML (though UpLib does do that
internally to create a rendering of each email message).

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 19:05:40 2010
Return-Path: <java-user-return-47649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26447 invoked from network); 28 Oct 2010 19:05:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 19:05:40 -0000
Received: (qmail 81375 invoked by uid 500); 28 Oct 2010 19:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81308 invoked by uid 500); 28 Oct 2010 19:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81300 invoked by uid 99); 28 Oct 2010 19:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 19:05:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 19:05:28 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1PBXma-0001xP-25
	for java-user@lucene.apache.org; Thu, 28 Oct 2010 21:05:04 +0200
Received: from 77-58-222-177.dclient.hispeed.ch ([77.58.222.177])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 28 Oct 2010 21:05:04 +0200
Received: from janburse by 77-58-222-177.dclient.hispeed.ch with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 28 Oct 2010 21:05:04 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: Jan Burse <janburse@fastmail.fm>
Subject: Query Formalism for Texts with Program Code
Date: Thu, 28 Oct 2010 21:03:47 +0200
Lines: 23
Message-ID: <iachek$98n$1@dough.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: 77-58-222-177.dclient.hispeed.ch
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; de; rv:1.9.1.14) Gecko/20100930 SeaMonkey/2.0.9
X-Virus-Checked: Checked by ClamAV on apache.org

Dear All

Was setting up a web search with a query language
that uses (, !, ), ^, *, ?, {, } and < in its syntax.
For example:

   hot dog:     Looks for documents with hot and
                dog in close vincinity.
   (hot dog):   Looks for documents with hot or
                dog in it.

This all went fine as long as I was using it for
natural language texts. But now I have also
content in the form of program code. I now
would like to do a search:

    hot(dog):   Should look for documents with
                an invocation of hot with argument
                dog.

How does lucene deal with this type of text?

Bye


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 21:59:54 2010
Return-Path: <java-user-return-47650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14573 invoked from network); 28 Oct 2010 21:59:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 21:59:54 -0000
Received: (qmail 4090 invoked by uid 500); 28 Oct 2010 21:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4055 invoked by uid 500); 28 Oct 2010 21:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4047 invoked by uid 99); 28 Oct 2010 21:59:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 21:59:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kimchy@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 21:59:44 +0000
Received: by iwn7 with SMTP id 7so2918066iwn.35
        for <java-user@lucene.apache.org>; Thu, 28 Oct 2010 14:59:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=IzxfNJECUIWC+D5Fuvm80as7plg1Vkp2J8jBccnn8Po=;
        b=Yn7xolOZriq7EskpBKaJDEKx9a1Tn6s/xkIWi3dUwF2/HfsTf0gogVKHZ5f1n/HKUY
         XB3iXt/O83npyAXl0+7lPeEClcy/IEoGLbx6e3hvBx3/PtuI4+rjYIHyzeqErZbX/kMC
         Z5LM6FYx7JMZbOtJ428npLNCI1LlkToLfK5ig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=AVi3q8Tisnav3VH6+umkGgEGBwOpa1/DtQvQJYa10Ms5n2iPkn4lof64hlhxEMk5KD
         fy65760YxvSTaDDeM6IjZIMNbytBGAZfSjWnXceVF8BuZPgvDzNB7vn/AHcPKBEQe1KK
         21DrhIkEcniehDHbjokcLaQw9E0fhSl8RNdxc=
Received: by 10.231.15.129 with SMTP id k1mr2231023iba.101.1288303163454; Thu,
 28 Oct 2010 14:59:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.186.137 with HTTP; Thu, 28 Oct 2010 14:59:02 -0700 (PDT)
From: Shay Banon <kimchy@gmail.com>
Date: Thu, 28 Oct 2010 23:59:02 +0200
Message-ID: <AANLkTinDtEVb08w6fU9=wGYj+PrS4ZNM8qbc8ir7XQOZ@mail.gmail.com>
Subject: Lucene 3.0.3 Release Date
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0003255752a66bb7510493b4744f
X-Virus-Checked: Checked by ClamAV on apache.org

--0003255752a66bb7510493b4744f
Content-Type: text/plain; charset=ISO-8859-1

Hi,

   It seems like current 3.0 branch has accumulated some important bug
fixes, especially the possible index corruption bug. Is there a date for a
formal 3.0.3 release?

-shay.banon

--0003255752a66bb7510493b4744f--

From java-user-return-47651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 28 23:36:06 2010
Return-Path: <java-user-return-47651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69461 invoked from network); 28 Oct 2010 23:36:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Oct 2010 23:36:05 -0000
Received: (qmail 5587 invoked by uid 500); 28 Oct 2010 23:36:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5539 invoked by uid 500); 28 Oct 2010 23:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5531 invoked by uid 99); 28 Oct 2010 23:36:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 23:36:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Oct 2010 23:35:58 +0000
Received: by qwb8 with SMTP id 8so2575222qwb.35
        for <java-user@lucene.apache.org>; Thu, 28 Oct 2010 16:35:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Vg/aNw0BQM4YLUsY104OPlOQpuXXMXbHeR6DeUXmxNU=;
        b=ZVnfislBemnNsC2TyMQA40ha60VF/Ve+8SB/mPUNTGMT2/4xMG/UxN/YJnPn3bRIVV
         UGBdnR9kHpztN8lfjNq+zKEWC5ibtN8UKxaHyA5ZV27kVZktjITNYitZp8PVSVt2FBCA
         Rd1CRvU1E4yqqRjNzswaSCgCenovemoYMFqAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KBW/G+bePuxKM27JrCqgz9VQCRzYk//XDuOZ6+TDVeXGf6hA+Kjmxmm1a2RUSzVejS
         vS/Xg3qrkPfcDsS6lNRTAj+q2OREPDaiobznxOIP8IsteAs6McfSEHQKKBk2qYZAoNuo
         bthlxAc2GDnyNX3Id0AthyHHZuZWIBYEqbWmI=
MIME-Version: 1.0
Received: by 10.229.246.73 with SMTP id lx9mr11207889qcb.231.1288308933936;
 Thu, 28 Oct 2010 16:35:33 -0700 (PDT)
Received: by 10.229.85.199 with HTTP; Thu, 28 Oct 2010 16:35:33 -0700 (PDT)
In-Reply-To: <iachek$98n$1@dough.gmane.org>
References: <iachek$98n$1@dough.gmane.org>
Date: Thu, 28 Oct 2010 19:35:33 -0400
Message-ID: <AANLkTi=RjF0Fcz9K_mvuNRajLEE7qceNkL20UpXVs3t+@mail.gmail.com>
Subject: Re: Query Formalism for Texts with Program Code
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64653ac5e48d50493b5cceb

--0016e64653ac5e48d50493b5cceb
Content-Type: text/plain; charset=ISO-8859-1

typically one simply escapes the symbols that have special
meaning in your syntax. In your example,
hot\(dog\) would indicate to the parser that the () characters
were to be interpreted as text rather than part of the query language.

Lucene uses javaCC to parse queries following grammar rules....

HTH
Erick

On Thu, Oct 28, 2010 at 3:03 PM, Jan Burse <janburse@fastmail.fm> wrote:

> Dear All
>
> Was setting up a web search with a query language
> that uses (, !, ), ^, *, ?, {, } and < in its syntax.
> For example:
>
>  hot dog:     Looks for documents with hot and
>               dog in close vincinity.
>  (hot dog):   Looks for documents with hot or
>               dog in it.
>
> This all went fine as long as I was using it for
> natural language texts. But now I have also
> content in the form of program code. I now
> would like to do a search:
>
>   hot(dog):   Should look for documents with
>               an invocation of hot with argument
>               dog.
>
> How does lucene deal with this type of text?
>
> Bye
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64653ac5e48d50493b5cceb--

From java-user-return-47652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 00:07:25 2010
Return-Path: <java-user-return-47652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93163 invoked from network); 29 Oct 2010 00:07:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 00:07:24 -0000
Received: (qmail 52884 invoked by uid 500); 29 Oct 2010 00:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52846 invoked by uid 500); 29 Oct 2010 00:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52838 invoked by uid 99); 29 Oct 2010 00:07:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 00:07:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of turian@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 00:07:16 +0000
Received: by wwb39 with SMTP id 39so422560wwb.5
        for <java-user@lucene.apache.org>; Thu, 28 Oct 2010 17:06:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=h7IslnHGoJbX2xlmFqf5n1cB9SkESiA/mu3Y0hvlctI=;
        b=S058EAfo1SLgTXfLVsW0c47tDjVGdrJINt08IdXdFS2MAc8ubxXbO6NPglbUJBzaUA
         KZCH/WMMSmyEI7Vde6fWvVJo6Ck/z0SqCJMvOJcX28dBh9lox/rmGxov6sIMq2SYjHc3
         dUg7K2SXCjS/C2QqrKVWW/I/MYprl7I8M9DDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=k1FQ3fx67Pn6TQ6E9dLAQBDZbqzeVhoXlXiFtzjcaRvOhHJ3lr41ZAl+KNiuBU7gYX
         MFyrC9IyA8w+LJQV4BA9rgsmGBCuJrA7OD+6oAAs+Az9Ivzwik2xhrspMdqvhNb2Qf3S
         +/4/pg+5jRhamu9sa8yTDltcwGFp3ctENPJO4=
MIME-Version: 1.0
Received: by 10.227.151.205 with SMTP id d13mr5629744wbw.159.1288310815599;
 Thu, 28 Oct 2010 17:06:55 -0700 (PDT)
Received: by 10.227.29.217 with HTTP; Thu, 28 Oct 2010 17:06:55 -0700 (PDT)
Date: Thu, 28 Oct 2010 20:06:55 -0400
Message-ID: <AANLkTi=8UpELKtg+9++UzuEQqCgd=++EDb4jZScVFuAA@mail.gmail.com>
Subject: MemoryIndex or RAMDirectory, but score using term statistics from a
 corpus given during preprocessing?
From: Joseph Turian <turian@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e659f5228634bb0493b63cb1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e659f5228634bb0493b63cb1
Content-Type: text/plain; charset=ISO-8859-1

How do I use MemoryIndex or RAMDirectory, but score using term statistics
from a corpus given during preprocessing?

Let's say I want to use a MemoryIndex or RAMDirectory to store a *single*
document, and then run a query against it, and get the score of the query
using just this one document.
I know how to do this. See, for some example code, this blog post on
persistent search:
http://www.sajalkayan.com/prospective-search-using-python.html

Now what I want to do is take a *corpus* of K documents, and "index" it
during preprocessing to calculate the term statistics (e.g. idf).
I then want to freeze these term statistics, and use them whenever I insert
and compute the query score of a new document.
I.e. I want to *quickly* query a new document, using preprocessed term
statistics in the scoring function.
How can I do this?

Thanks,
   Joseph

--0016e659f5228634bb0493b63cb1--

From java-user-return-47653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 07:21:50 2010
Return-Path: <java-user-return-47653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55751 invoked from network); 29 Oct 2010 07:21:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 07:21:49 -0000
Received: (qmail 25666 invoked by uid 500); 29 Oct 2010 07:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25318 invoked by uid 500); 29 Oct 2010 07:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25309 invoked by uid 99); 29 Oct 2010 07:21:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 07:21:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 07:21:41 +0000
Received: by ywp4 with SMTP id 4so2003085ywp.35
        for <java-user@lucene.apache.org>; Fri, 29 Oct 2010 00:21:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.228.16 with SMTP id a16mr2971205ybh.177.1288336879014;
 Fri, 29 Oct 2010 00:21:19 -0700 (PDT)
Received: by 10.151.158.6 with HTTP; Fri, 29 Oct 2010 00:21:18 -0700 (PDT)
In-Reply-To: <AANLkTin9wo06dFSig0S4i9CrOX5Fuihyyc1JDg8xwSL9@mail.gmail.com>
References: <AANLkTimN-kZafVkYYYHonkj8ojmvyr5K+M0tdnsyCxkx@mail.gmail.com>
	<AANLkTi=-h=Zo4Lg3auw1KKoL5SHmg3SZS=W0gzDU0BjX@mail.gmail.com>
	<AANLkTikvJk7_4PCH=srpQ5AU=sHGbVK2mLQSPqJYRA7G@mail.gmail.com>
	<AANLkTik3k0ySR6-gC80NZ6U-ktR4Dr-YE7B3P4cK8xeL@mail.gmail.com>
	<AANLkTim6vnv6b5oroG37+TVRpuVUoYhM9Cukc7fLOqYk@mail.gmail.com>
	<AANLkTinnwTO9uMcG7cQBKtdju63uUXUBfvvj7QUiLjga@mail.gmail.com>
	<AANLkTinLfhK-YtVFjb0cGLh4mSratPdCkM4wBvK3F5f5@mail.gmail.com>
	<AANLkTin9wo06dFSig0S4i9CrOX5Fuihyyc1JDg8xwSL9@mail.gmail.com>
Date: Fri, 29 Oct 2010 14:21:18 +0700
Message-ID: <AANLkTinFrEsCg4M-xSGK50631feansuYh2M3Q52n3cpY@mail.gmail.com>
Subject: Re: adding documents to an existing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

but anyway,I've done it.thanks for your help. I did look up your
source code and find it easier to understand. this is the kind of help
that I want.

thank you very much then. :-)

On 10/27/10, Seth Rosen <seth@architexa.com> wrote:
> Yakob the boolean in the constructor should be true if you want to create a
> NEW index in INDEX_DIR and false to append to an existing one as seen here
> [1]
>
> As for adding a directory to an index you will need to validate the
> directory, then loop through it recursively and add each doc to the writer
> you created.
>
> static void indexDocs(IndexWriter writer, File file)
>>>
>>>     throws IOException {
>>>
>>>     // do not try to index files that cannot be read
>>>
>>>     if (file.canRead()) {
>>>
>>>       if (file.isDirectory()) {
>>>
>>>         String[] files = file.list();
>>>
>>>         // an IO error could occur
>>>
>>>         if (files != null) {
>>>
>>>           for (int i = 0; i < files.length; i++) {
>>>
>>>             indexDocs(writer, new File(file, files[i]));
>>>
>>>           }
>>>
>>>         }
>>>
>>>       } else {
>>>
>>>         System.out.println("adding " + file);
>>>
>>>         try {
>>>
>>>           writer.addDocument(FileDocument.Document(file));
>>>
>>>         }
>>>
>>>         // at least on windows, some temporary files raise this exception
>>>> with an "access denied" message
>>>
>>>         // checking if the file can be read doesn't help
>>>
>>>         catch (FileNotFoundException fnfe) {
>>>
>>>           ;
>>>
>>>         }
>>>
>>>       }
>>>
>>>     }
>>>
>>>   }
>>>
>>>
> [1]
> http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,
> org.apache.lucene.analysis.Analyzer, boolean,
> org.apache.lucene.index.IndexWriter.MaxFieldLength)
>
> Seth Rosen
> www.architexa.com
> Understand & Document Code In Seconds
> seth@architexa.com <vineet@architexa.com>
>
>
>
> On Wed, Oct 27, 2010 at 9:51 AM, Yakob <jacobian@opensuse-id.org> wrote:
>
>> On 10/27/10, Seth Rosen <seth@architexa.com> wrote:
>> > Yakob,
>> > Here is a snippet of an example of IndexWriter from the lucene source
>> that
>> > you might find helpful.
>> >
>> >
>> >> IndexWriter writer = new IndexWriter(FSDirectory.open(INDEX_DIR), new
>> >> StandardAnalyzer(Version.LUCENE_CURRENT), true,
>> >> IndexWriter.MaxFieldLength.LIMITED);
>>
>> // the above code should change true into false so that the index will
>> still be open right?
>> // I mean surely the index shouldn't be close
>> >
>> > System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
>> >
>> // what confuse me is how can add a new directory path containing new
>> Documents to a
>> // lucene class. so that lucene will index those new documents and add
>> it to an existing
>> // index.
>> > indexDocs(writer, docDir);
>> >
>> > System.out.println("Optimizing...");
>> >
>> > writer.optimize();
>> >
>> > writer.close();
>> >
>> >
>> > Seth Rosen
>> > www.architexa.com
>> > Understand & Document Code In Seconds
>> > seth@architexa.com <vineet@architexa.com>
>> >
>> >
>> >
>>
>>
>> --


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 13:27:40 2010
Return-Path: <java-user-return-47654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17387 invoked from network); 29 Oct 2010 13:27:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 13:27:40 -0000
Received: (qmail 43713 invoked by uid 500); 29 Oct 2010 13:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43495 invoked by uid 500); 29 Oct 2010 13:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43486 invoked by uid 99); 29 Oct 2010 13:27:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 13:27:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 13:27:30 +0000
Received: from ([10.160.3.239])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.76062455;
	Fri, 29 Oct 2010 09:27:07 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht01.corp.local
 ([10.160.3.239]) with mapi; Fri, 29 Oct 2010 09:27:07 -0400
From: "Cabansag, Ronald-Alvin R" <ronald-alvin.cabansag@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Oct 2010 09:27:06 -0400
Subject: lucene norms cached twice
Thread-Topic: lucene norms cached twice
Thread-Index: Act26B5/adXQQUeRTHuugch/PftYNQAhLg9g
Message-ID: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0


We are working with a large readonly lucene index(single segment) with larg=
e number of fields and documents and are running into memory usage problems=
.

We found that when using a ReadOnlyDirectoryReader and IndexSearcher create=
d using the same reader, the norms are cached twice - first by the reader i=
tself and second by the reader's subreaders. Is there an easy way to avoid =
having the norms cached twice when we only have a single subreader?

We thought of the following options:
1.) pass in the main reader as a subreader when creating the  IndexSearcher=
?  ( e.g. new IndexSearcher(mainReader, IndexReader[] {mainReader}, int[] {=
0} )
2.) override ReadOnlyDirectoryReader.getSequentialSubReaders() method and r=
eturn null. This tells the IndexSearcher to use the main reader- ReadOnlyDi=
rectoryReader.
3.) use SegmentReader.get(boolean, SegmentInfo, int) to create a ReadOnlySe=
gmentReader that we use as our main reader instead.

Are there any negative implications to the above approaches? Or are there b=
etter approaches to the problem?

Thanks in advance for any help.

Alvin Cab
Cengage Learning


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 17:27:45 2010
Return-Path: <java-user-return-47655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40896 invoked from network); 29 Oct 2010 17:27:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 17:27:45 -0000
Received: (qmail 81338 invoked by uid 500); 29 Oct 2010 17:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80638 invoked by uid 500); 29 Oct 2010 17:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80629 invoked by uid 99); 29 Oct 2010 17:27:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 17:27:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 17:27:35 +0000
Received: by wwb39 with SMTP id 39so1232972wwb.5
        for <java-user@lucene.apache.org>; Fri, 29 Oct 2010 10:27:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.132.131 with SMTP id o3mr12351141wei.19.1288373234125;
 Fri, 29 Oct 2010 10:27:14 -0700 (PDT)
Received: by 10.216.93.14 with HTTP; Fri, 29 Oct 2010 10:27:14 -0700 (PDT)
In-Reply-To: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
Date: Fri, 29 Oct 2010 13:27:14 -0400
Message-ID: <AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
Subject: Re: lucene norms cached twice
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Norms should not normally be loaded twice.

Since 2.9, searching is done at the sub-reader level, and so norms
should never be loaded for the main reader.

But can you describe how you're using Lucene?

Mike

On Fri, Oct 29, 2010 at 9:27 AM, Cabansag, Ronald-Alvin R
<ronald-alvin.cabansag@cengage.com> wrote:
>
> We are working with a large readonly lucene index(single segment) with la=
rge number of fields and documents and are running into memory usage proble=
ms.
>
> We found that when using a ReadOnlyDirectoryReader and IndexSearcher crea=
ted using the same reader, the norms are cached twice - first by the reader=
 itself and second by the reader's subreaders. Is there an easy way to avoi=
d having the norms cached twice when we only have a single subreader?
>
> We thought of the following options:
> 1.) pass in the main reader as a subreader when creating the =A0IndexSear=
cher? =A0( e.g. new IndexSearcher(mainReader, IndexReader[] {mainReader}, i=
nt[] {0} )
> 2.) override ReadOnlyDirectoryReader.getSequentialSubReaders() method and=
 return null. This tells the IndexSearcher to use the main reader- ReadOnly=
DirectoryReader.
> 3.) use SegmentReader.get(boolean, SegmentInfo, int) to create a ReadOnly=
SegmentReader that we use as our main reader instead.
>
> Are there any negative implications to the above approaches? Or are there=
 better approaches to the problem?
>
> Thanks in advance for any help.
>
> Alvin Cab
> Cengage Learning
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 19:32:34 2010
Return-Path: <java-user-return-47656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19672 invoked from network); 29 Oct 2010 19:32:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 19:32:34 -0000
Received: (qmail 68260 invoked by uid 500); 29 Oct 2010 19:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68086 invoked by uid 500); 29 Oct 2010 19:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68077 invoked by uid 99); 29 Oct 2010 19:32:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 19:32:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 19:32:26 +0000
Received: from ([10.160.3.175])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.76089947;
	Fri, 29 Oct 2010 15:32:02 -0400
Received: from ohcinpub02.corp.local (10.160.3.252) by ohcinht03.corp.local
 (10.160.3.175) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 29 Oct
 2010 15:32:02 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinpub02.corp.local
 ([10.160.3.252]) with mapi; Fri, 29 Oct 2010 15:32:02 -0400
From: "Cabansag, Ronald-Alvin R" <ronald-alvin.cabansag@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Oct 2010 15:32:00 -0400
Subject: RE: lucene norms cached twice
Thread-Topic: lucene norms cached twice
Thread-Index: Act3jpquco7m+62MR+mHG0gUFEwCdAACqbtQ
Message-ID: <09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
 <AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
In-Reply-To: <AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1181-6.500.1024-17732.007
x-tm-as-result: No--49.189100-8.000000-31
x-tm-as-user-approved-sender: No
x-tm-as-user-blocked-sender: No
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

We create a single instance of IndexReader using IndexReader.open(new MMapD=
irectory(file))and a single instance of IndexSearcher using this index read=
er.

Searches in our application are done with two operations. The first operati=
on gets the hit count. We use a QueryWrapperFilter.getDocIdSet(indexReader)=
 to get the DocIdSet and compute the hit count using its iterator. This is =
where we see the ReadOnlyDirectoryReader caching its own copy of norms.

The second operation is where we actually do the search using IndexSearcher=
.search(new TermQuery(...), filter, collector) method. This is where the su=
b-reader caches its own copy of norms.

Regards,
Al

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, October 29, 2010 1:27 PM
To: java-user@lucene.apache.org
Subject: Re: lucene norms cached twice

Norms should not normally be loaded twice.

Since 2.9, searching is done at the sub-reader level, and so norms
should never be loaded for the main reader.

But can you describe how you're using Lucene?

Mike

On Fri, Oct 29, 2010 at 9:27 AM, Cabansag, Ronald-Alvin R
<ronald-alvin.cabansag@cengage.com> wrote:
>
> We are working with a large readonly lucene index(single segment) with la=
rge number of fields and documents and are running into memory usage proble=
ms.
>
> We found that when using a ReadOnlyDirectoryReader and IndexSearcher crea=
ted using the same reader, the norms are cached twice - first by the reader=
 itself and second by the reader's subreaders. Is there an easy way to avoi=
d having the norms cached twice when we only have a single subreader?
>
> We thought of the following options:
> 1.) pass in the main reader as a subreader when creating the =A0IndexSear=
cher? =A0( e.g. new IndexSearcher(mainReader, IndexReader[] {mainReader}, i=
nt[] {0} )
> 2.) override ReadOnlyDirectoryReader.getSequentialSubReaders() method and=
 return null. This tells the IndexSearcher to use the main reader- ReadOnly=
DirectoryReader.
> 3.) use SegmentReader.get(boolean, SegmentInfo, int) to create a ReadOnly=
SegmentReader that we use as our main reader instead.
>
> Are there any negative implications to the above approaches? Or are there=
 better approaches to the problem?
>
> Thanks in advance for any help.
>
> Alvin Cab
> Cengage Learning
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 19:41:02 2010
Return-Path: <java-user-return-47657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25930 invoked from network); 29 Oct 2010 19:41:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 19:41:01 -0000
Received: (qmail 84533 invoked by uid 500); 29 Oct 2010 19:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84408 invoked by uid 500); 29 Oct 2010 19:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84400 invoked by uid 99); 29 Oct 2010 19:40:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 19:40:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 19:40:53 +0000
Received: by fxm7 with SMTP id 7so3298838fxm.35
        for <java-user@lucene.apache.org>; Fri, 29 Oct 2010 12:40:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=EO4Cp4sW2Ex0Pya10gMzDHTMJa24DalQrg84nktDgnQ=;
        b=B4jxSqDrbtsWY3XpZpeU3KDKVn9fvCG1YAZ4LywrpytUUa6X1wCHHB0zKKo0m364Ee
         yC8c6NNd6FstULtMlhRitHnFm4oAck7gMD+OHQn3uef1ElS8ls4pyRdcABfnI+X02+4H
         ugNUXA9HicJYtPLAEmPnRH8/RgAw+Nn3pC3yc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=A+xUZjs9WfU7q4MAUPaVaGyA1ozj3Vl5dBb8Yn3gKtiHZNmxDerlu0VHYLIKn981ax
         ifzH3EliSGCyKHJr1qRHfxSt588XF2NN80rNnqMu6ECFDE/yKD6MpifznJiFefVvfEmW
         twItvP12NjbSOTBjwkDqYulmMMcc9F2YKmxRQ=
MIME-Version: 1.0
Received: by 10.223.96.204 with SMTP id i12mr1190180fan.145.1288381223752;
 Fri, 29 Oct 2010 12:40:23 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.223.74.202 with HTTP; Fri, 29 Oct 2010 12:40:23 -0700 (PDT)
In-Reply-To: <09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
	<AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
	<09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local>
Date: Fri, 29 Oct 2010 15:40:23 -0400
X-Google-Sender-Auth: 7C82L6ezMYzQ3S3DfoqKhm66j-E
Message-ID: <AANLkTikrXO+CD5XGTP5vm60nu6AYtGDFbGbWc1tEJk=_@mail.gmail.com>
Subject: Re: lucene norms cached twice
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Oct 29, 2010 at 3:32 PM, Cabansag, Ronald-Alvin R
<ronald-alvin.cabansag@cengage.com> wrote:
> We use a QueryWrapperFilter.getDocIdSet(indexReader) to get the DocIdSet and compute the hit count using its iterator.

If you want to avoid double-caching of norms, then you should call
getDocIdSet() for each segment reader, not the top level reader.

Aside: presumably you're actually doing something more advanced than
getting the hit count (and you just simplified your description
because it wasn't pertinent)... since you can get the hit count from
TopDocs.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 29 21:39:25 2010
Return-Path: <java-user-return-47658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71791 invoked from network); 29 Oct 2010 21:39:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Oct 2010 21:39:25 -0000
Received: (qmail 21916 invoked by uid 500); 29 Oct 2010 21:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21881 invoked by uid 500); 29 Oct 2010 21:39:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21873 invoked by uid 99); 29 Oct 2010 21:39:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 21:39:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Oct 2010 21:39:18 +0000
Received: from ([10.160.3.239])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.76096692;
	Fri, 29 Oct 2010 17:38:53 -0400
Received: from ohcinpub02.corp.local (10.160.3.252) by ohcinht01.corp.local
 (10.160.3.239) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 29 Oct
 2010 17:38:53 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinpub02.corp.local
 ([10.160.3.252]) with mapi; Fri, 29 Oct 2010 17:38:53 -0400
From: "Cabansag, Ronald-Alvin R" <ronald-alvin.cabansag@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Oct 2010 17:38:51 -0400
Subject: RE: lucene norms cached twice
Thread-Topic: lucene norms cached twice
Thread-Index: Act3oTmquJDr1HxQRUihDNi/SiUqsQAAIz6A
Message-ID: <09BA120FB4BE134095E63B761C194E8026C8F46BC3@OHCINMBX01.corp.local>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
	<AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
	<09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local>
 <AANLkTikrXO+CD5XGTP5vm60nu6AYtGDFbGbWc1tEJk=_@mail.gmail.com>
In-Reply-To: <AANLkTikrXO+CD5XGTP5vm60nu6AYtGDFbGbWc1tEJk=_@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1181-6.500.1024-17732.007
x-tm-as-result: No--46.137400-8.000000-31
x-tm-as-user-approved-sender: No
x-tm-as-user-blocked-sender: No
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Yonik,

Thanks for the input. We'll try this out.
And you're right - I tried to simplify our first operation's description.

-Al
Cengage Learning

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik Seele=
y
Sent: Friday, October 29, 2010 3:40 PM
To: java-user@lucene.apache.org
Subject: Re: lucene norms cached twice

On Fri, Oct 29, 2010 at 3:32 PM, Cabansag, Ronald-Alvin R
<ronald-alvin.cabansag@cengage.com> wrote:
> We use a QueryWrapperFilter.getDocIdSet(indexReader) to get the DocIdSet =
and compute the hit count using its iterator.

If you want to avoid double-caching of norms, then you should call
getDocIdSet() for each segment reader, not the top level reader.

Aside: presumably you're actually doing something more advanced than
getting the hit count (and you just simplified your description
because it wasn't pertinent)... since you can get the hit count from
TopDocs.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 03:12:57 2010
Return-Path: <java-user-return-47659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98176 invoked from network); 31 Oct 2010 03:12:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 03:12:56 -0000
Received: (qmail 61937 invoked by uid 500); 31 Oct 2010 03:12:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61332 invoked by uid 500); 31 Oct 2010 03:12:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61324 invoked by uid 99); 31 Oct 2010 03:12:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 03:12:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mario-fa@infonet.com.br designates 200.241.52.11 as permitted sender)
Received: from [200.241.52.11] (HELO estancia.infonet.com.br) (200.241.52.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 03:12:42 +0000
Received: (qmail 25835 invoked from network); 31 Oct 2010 03:04:21 -0000
Received: by simscan 1.4.0 ppid: 25789, pid: 25824, t: 0.7617s
         scanners: clamav: 0.96/m:52/d:10745 spam: 3.2.5
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	estancia.infonet.com.br
X-Spam-Level: 
Received: from unknown (HELO notemario) (Usuario-Autenticado:mario-fa@[189.77.77.98])
          (envelope-sender <mario-fa@infonet.com.br>)
          by 200.241.52.11 (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 31 Oct 2010 03:04:21 -0000
From: =?iso-8859-1?B?TeFyaW8gQW5kcuk=?= <mario-fa@infonet.com.br>
To: <java-user@lucene.apache.org>
Cc: =?iso-8859-1?Q?'M._C._J=FAnior'?= <mjrse@hotmail.com>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>	<AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>	<09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local> <AANLkTikrXO+CD5XGTP5vm60nu6AYtGDFbGbWc1tEJk=_@mail.gmail.com> <09BA120FB4BE134095E63B761C194E8026C8F46BC3@OHCINMBX01.corp.local>
In-Reply-To: <09BA120FB4BE134095E63B761C194E8026C8F46BC3@OHCINMBX01.corp.local>
Subject: Grammatical terms
Date: Sun, 31 Oct 2010 00:12:10 -0300
Message-ID: <001201cb78a9$69d84b60$3d88e220$@com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Act3oTmquJDr1HxQRUihDNi/SiUqsQAAIz6AAEHjouA=
Content-Language: pt-br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=8.0 tests=BAYES_00,RDNS_NONE
	autolearn=no version=3.2.5


Hi,
I need a Java API that identify the grammatical terms in noun phrase =
(NP).
Eg: I see the words when you are talking.=20
See: Verb
Words: Noun
are: Verb
talk: Verb
Can I use the Lucene for that?

Thanks!

-------------------------------
M=E1rio Andr=E9
Master's degree in MCC
Federal University of Alagoas
Federal Institute of Sergipe, Professor
Skype: mario-fa
www.marioandre.com.br
www.neurominer.com
-------------------------------



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 03:26:17 2010
Return-Path: <java-user-return-47660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99178 invoked from network); 31 Oct 2010 03:26:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 03:26:16 -0000
Received: (qmail 65564 invoked by uid 500); 31 Oct 2010 03:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65317 invoked by uid 500); 31 Oct 2010 03:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65309 invoked by uid 99); 31 Oct 2010 03:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 03:26:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 03:26:09 +0000
Received: by wwb39 with SMTP id 39so2295941wwb.5
        for <java-user@lucene.apache.org>; Sat, 30 Oct 2010 20:25:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        bh=dAGqZTLZ7ltJdfbRaWMxmfmMSCBew9sdPTm/aiYK6ww=;
        b=aVI4vjNSck8rfM4ZyIuiPPd1q8sf3+JILphhMB9ejgm7+x4e/X4YuQxtOQGUx1fKow
         pJdFwezw54nkCmZQ5Xaa/RlbErAWI9Nie7rboCSkM4R7fXS2Hn8tne9mZoGs6IPkK+oL
         rI1d8D3ZBSNyrgJ8rQEpeHo9SCPCEml1OJ8g0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=BsFC3fDwy0GNxwEtSOoufKxbc8/rPDNLNzufQ+Q8qCDizw0ne9w/Smlei+yn4DJ74I
         E8PM8Xa8fZxoyKZL3fT7r8VYk3wZJVRN0audUMDEKjNXLjaJUd9c0MUon4WnPq18G2pA
         GOieb5N1Pu73vssS6g/ZoZRJqYbjV48H7pRSY=
Received: by 10.216.185.203 with SMTP id u53mr6864850wem.86.1288495546880;
 Sat, 30 Oct 2010 20:25:46 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.216.133.92 with HTTP; Sat, 30 Oct 2010 20:25:16 -0700 (PDT)
In-Reply-To: <001201cb78a9$69d84b60$3d88e220$@com.br>
References: <09BA120FB4BE134095E63B761C194E8026C8F461F0@OHCINMBX01.corp.local>
 <AANLkTikSzAmaMSB=Ag-SWbobD60ZuRDhN_maKTt8_t57@mail.gmail.com>
 <09BA120FB4BE134095E63B761C194E8026C8F46A2D@OHCINMBX01.corp.local>
 <AANLkTikrXO+CD5XGTP5vm60nu6AYtGDFbGbWc1tEJk=_@mail.gmail.com>
 <09BA120FB4BE134095E63B761C194E8026C8F46BC3@OHCINMBX01.corp.local> <001201cb78a9$69d84b60$3d88e220$@com.br>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Sat, 30 Oct 2010 23:25:16 -0400
X-Google-Sender-Auth: PzHcnNnPdQcA2nPY8a2ao8_9xnQ
Message-ID: <AANLkTinneTKwm2cTWGU3bX1_JTULjmwLvgFfF_c0tS5W@mail.gmail.com>
Subject: Re: Grammatical terms
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fa7ac5dd2720493e13f11

--0016367fa7ac5dd2720493e13f11
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

For Part-of-Speech (POS) identification you are better off looking at a too=
k
like OpenNLP or NLTK.


2010/10/30 M=E1rio Andr=E9 <mario-fa@infonet.com.br>

>
> Hi,
> I need a Java API that identify the grammatical terms in noun phrase (NP)=
.
> Eg: I see the words when you are talking.
> See: Verb
> Words: Noun
> are: Verb
> talk: Verb
> Can I use the Lucene for that?
>
> Thanks!
>
> -------------------------------
> M=E1rio Andr=E9
> Master's degree in MCC
> Federal University of Alagoas
> Federal Institute of Sergipe, Professor
> Skype: mario-fa
> www.marioandre.com.br
> www.neurominer.com
> -------------------------------
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016367fa7ac5dd2720493e13f11--

From java-user-return-47661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 17:20:13 2010
Return-Path: <java-user-return-47661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26875 invoked from network); 31 Oct 2010 17:20:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 17:20:13 -0000
Received: (qmail 73564 invoked by uid 500); 31 Oct 2010 16:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73514 invoked by uid 500); 31 Oct 2010 16:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73506 invoked by uid 99); 31 Oct 2010 16:18:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 16:18:41 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of i30817@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 16:18:35 +0000
Received: by gxk21 with SMTP id 21so711585gxk.35
        for <java-user@lucene.apache.org>; Sun, 31 Oct 2010 09:18:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=YjX5dq6Ym4RWIDKCOwsOQmfmu/MzV5ZQVw9nahIw6j4=;
        b=HSpIjQP7XEPhCoGRvNgiVk8K5YEbP1p7xvDkmC/bYfjvOSzq6KchMGAXTjMZSThwGb
         VfJqwv52B8C6/tGSEeZS787GfCxOwT90WtcDeRS6+2OxkvlZIm1y9936W/tovgnh0825
         IA+etjDxM08Wxxzh3WYA5JcPLVIZvKMjZmoqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=sbDC7Hk/i6eeQD78S+QKGwXYsnp6JrflB/1d68z1DAtkbpNQZb36Fa27h6Tdvjd+H3
         y/QQw6YiRUKmo89HvIzPyjBo4hSyuFBhUBiAPsW6FziOMMDb3oX9ZaDPPKWSGF2cL3QS
         az2rVwcLH3FZt8iCncD2HmXtuoGL6tUs4CCKw=
Received: by 10.90.2.18 with SMTP id 18mr7378721agb.86.1288541894790; Sun, 31
 Oct 2010 09:18:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.154.4 with HTTP; Sun, 31 Oct 2010 09:17:54 -0700 (PDT)
From: Paulo Levi <i30817@gmail.com>
Date: Sun, 31 Oct 2010 16:17:54 +0000
Message-ID: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com>
Subject: Indexing with foreign key
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363102e9ead0070493ec0988

--0016363102e9ead0070493ec0988
Content-Type: text/plain; charset=ISO-8859-1

I'm stepping tru a rdf file (the project gutenberg catalog) and sending data
to a lucene index to allow searches of titles authors and such. However the
gutenberg rdf is a little bit "special". It has two sections, one for title,
authors, collaborators and such, and (after all the books) starts the other
section that has the download links. The connection is a kind of foreign key
that exists on both tags (a unique number id). While i don't need to search
the download link, i do need to save it.

I'm memory limited and can't put in memory the 200 mb file that the catalog
is. I'm wondering if there is some way for me to use the number id to
connect both kinds of information without having to keep things in memory. A
first search for the things i want, and a second using the number id?
It seems very clumsy. I'm not actually using a database, and i don't want to
use very large libraries. Compass is 60 mbs (!). I tried lucenesail for a
while, but it has stopped working and the code is a mess (it is not adapted
to the filtering of the gutemberg rdf that i'm doing).

--0016363102e9ead0070493ec0988--

From java-user-return-47662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 20:47:00 2010
Return-Path: <java-user-return-47662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12708 invoked from network); 31 Oct 2010 20:46:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 20:46:59 -0000
Received: (qmail 55629 invoked by uid 500); 31 Oct 2010 20:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55545 invoked by uid 500); 31 Oct 2010 20:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55537 invoked by uid 99); 31 Oct 2010 20:47:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 20:47:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 20:47:21 +0000
Received: by vws5 with SMTP id 5so3164561vws.35
        for <java-user@lucene.apache.org>; Sun, 31 Oct 2010 13:47:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9H2IBzYw/fprTbAYiYbumRwSqoVdpalKgDTsJ9iUDCI=;
        b=C95i1y1yk1bqXlv7pisLmFkEQw2Vk0vBh1piqpicSVIutQrrE878Qso2//EmPM8PPe
         k97CnSSMczvR0nizaqRsNZssPECnDHb4UD+IwmtPRlBC0PWkZW5KFbqZCjXkb59c0kpW
         kkGGqjRqN2HuSXQ0LnQLAkGhfpektqHb099mE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Q358lVu96V+LBd2ExHZDk2Q0oaPEl8AyTBJLsmVOBv9+FvAucCaSE7KTizkJYcnpKU
         U44ahijhI1r/ZwwVa17hUX++pv1QTznOTm/rWoW2vhNdGBFkOMar0VvKqegETHNFdY+j
         5dEvDe+K+VPVfrQ9tr5YpIgO+CIqec7i9PgUI=
MIME-Version: 1.0
Received: by 10.224.192.6 with SMTP id do6mr7419392qab.234.1288558020222; Sun,
 31 Oct 2010 13:47:00 -0700 (PDT)
Received: by 10.229.193.4 with HTTP; Sun, 31 Oct 2010 13:47:00 -0700 (PDT)
In-Reply-To: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com>
References: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com>
Date: Sun, 31 Oct 2010 16:47:00 -0400
Message-ID: <AANLkTi=9Z2L4bWP_KW1GKF7HvcAchkn_hzK0GPZJrEUp@mail.gmail.com>
Subject: Re: Indexing with foreign key
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fb1cb115d7d0493efcb30
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fb1cb115d7d0493efcb30
Content-Type: text/plain; charset=ISO-8859-1

Hmmmm. Are you too memory limited to do a first pass through the file and
save
the key/download links part in a map, then make another pass through the
file
indexing the data and grabbing the link from your map? I'm assuming that
there's a lot less than 200M in just the key/link part.

Alternatively (and this would probably be kinda slow, but...) still do a 2
pass
process, but instead of making a map, put the data in a Lucene index on
disk.
Then the second pass searches that index for the data to add to the docs
in your "real" index.

HTH
Erick

On Sun, Oct 31, 2010 at 12:17 PM, Paulo Levi <i30817@gmail.com> wrote:

> I'm stepping tru a rdf file (the project gutenberg catalog) and sending
> data
> to a lucene index to allow searches of titles authors and such. However the
> gutenberg rdf is a little bit "special". It has two sections, one for
> title,
> authors, collaborators and such, and (after all the books) starts the other
> section that has the download links. The connection is a kind of foreign
> key
> that exists on both tags (a unique number id). While i don't need to search
> the download link, i do need to save it.
>
> I'm memory limited and can't put in memory the 200 mb file that the catalog
> is. I'm wondering if there is some way for me to use the number id to
> connect both kinds of information without having to keep things in memory.
> A
> first search for the things i want, and a second using the number id?
> It seems very clumsy. I'm not actually using a database, and i don't want
> to
> use very large libraries. Compass is 60 mbs (!). I tried lucenesail for a
> while, but it has stopped working and the code is a mess (it is not adapted
> to the filtering of the gutemberg rdf that i'm doing).
>

--20cf300fb1cb115d7d0493efcb30--

From java-user-return-47663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 21:17:50 2010
Return-Path: <java-user-return-47663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30203 invoked from network); 31 Oct 2010 21:17:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 21:17:50 -0000
Received: (qmail 71225 invoked by uid 500); 31 Oct 2010 21:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71125 invoked by uid 500); 31 Oct 2010 21:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71117 invoked by uid 99); 31 Oct 2010 21:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 21:18:19 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of i30817@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 21:18:13 +0000
Received: by gxk21 with SMTP id 21so801423gxk.35
        for <java-user@lucene.apache.org>; Sun, 31 Oct 2010 14:17:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=i+jbACb425e8bY/gZGKlqOLcEPcexVtZy/dhXSCU5hg=;
        b=QE1DimB/bBDmTBfuf6WYyt4dFNYEEw9RJRi+junafC72lVxNnd9maVvcpUqmG9Sxj1
         Krzrby73KuKFzgtvUrEZ99XoVXOcjAbNp32aTgYUdPjW4RwQ2+DrgG6PjS8JmhLFIaGk
         WneDGrRVZi6tWVW5VEXwCNVUCvFJAX4EbHZIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=UoyegvshelesWeuXfmkoUZMLo/+cK3uRUpSlXO88dk3VQAtxZmYMKDWXVxoOa5cq/a
         oBNx9LzAO9hDqebYmliaf0dWoTd13PEHGX2MSlRzZjmqH8qA/rHlEXbLbi2hNDBpnvA0
         8NnfihGUhmcBFN1gr4Kea+3FAWaGSgGxJrYbc=
Received: by 10.91.16.27 with SMTP id t27mr8014424agi.126.1288559871918; Sun,
 31 Oct 2010 14:17:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.154.4 with HTTP; Sun, 31 Oct 2010 14:17:31 -0700 (PDT)
In-Reply-To: <AANLkTi=9Z2L4bWP_KW1GKF7HvcAchkn_hzK0GPZJrEUp@mail.gmail.com>
References: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com> <AANLkTi=9Z2L4bWP_KW1GKF7HvcAchkn_hzK0GPZJrEUp@mail.gmail.com>
From: Paulo Levi <i30817@gmail.com>
Date: Sun, 31 Oct 2010 21:17:31 +0000
Message-ID: <AANLkTi=FRQh-OYKaK3LEHjLziBkq9A4SYnknt0Eev99i@mail.gmail.com>
Subject: Re: Indexing with foreign key
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b82767003780493f0391b

--0016363b82767003780493f0391b
Content-Type: text/plain; charset=ISO-8859-1

Yes that's what i ended up doing. I will probably "fork" a new java vm
instead of doing it in the same. That way i can control the memory
requirements, though it hasn't given me any problems (actually it even
worked with -Xmx, though it probably doesn't if i do something else in the
program at the same time - i'm not indexing the book subjects yet too, need
to do some sort of string caching for that and authors.)

On Sun, Oct 31, 2010 at 8:47 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Hmmmm. Are you too memory limited to do a first pass through the file and
> save
> the key/download links part in a map, then make another pass through the
> file
> indexing the data and grabbing the link from your map? I'm assuming that
> there's a lot less than 200M in just the key/link part.
>
> Alternatively (and this would probably be kinda slow, but...) still do a 2
> pass
> process, but instead of making a map, put the data in a Lucene index on
> disk.
> Then the second pass searches that index for the data to add to the docs
> in your "real" index.
>
> HTH
> Erick
>
> On Sun, Oct 31, 2010 at 12:17 PM, Paulo Levi <i30817@gmail.com> wrote:
>
> > I'm stepping tru a rdf file (the project gutenberg catalog) and sending
> > data
> > to a lucene index to allow searches of titles authors and such. However
> the
> > gutenberg rdf is a little bit "special". It has two sections, one for
> > title,
> > authors, collaborators and such, and (after all the books) starts the
> other
> > section that has the download links. The connection is a kind of foreign
> > key
> > that exists on both tags (a unique number id). While i don't need to
> search
> > the download link, i do need to save it.
> >
> > I'm memory limited and can't put in memory the 200 mb file that the
> catalog
> > is. I'm wondering if there is some way for me to use the number id to
> > connect both kinds of information without having to keep things in
> memory.
> > A
> > first search for the things i want, and a second using the number id?
> > It seems very clumsy. I'm not actually using a database, and i don't want
> > to
> > use very large libraries. Compass is 60 mbs (!). I tried lucenesail for a
> > while, but it has stopped working and the code is a mess (it is not
> adapted
> > to the filtering of the gutemberg rdf that i'm doing).
> >
>

--0016363b82767003780493f0391b--

From java-user-return-47664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 21:18:16 2010
Return-Path: <java-user-return-47664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30305 invoked from network); 31 Oct 2010 21:18:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 21:18:16 -0000
Received: (qmail 73045 invoked by uid 500); 31 Oct 2010 21:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72994 invoked by uid 500); 31 Oct 2010 21:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72986 invoked by uid 99); 31 Oct 2010 21:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 21:18:45 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of i30817@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 21:18:39 +0000
Received: by gyg4 with SMTP id 4so3289863gyg.35
        for <java-user@lucene.apache.org>; Sun, 31 Oct 2010 14:18:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=dY2V0yHoqXjv+Kh8GjH+Lsgpm2BhSeQG/EHh7AotMHE=;
        b=JRF9C9FrafJkMUOWamRlxi1qhHDVQtqWV61rwb1VKTZY3ISxBKjxr5Tu9NKXHsfSPM
         wMZ0rfu/TGrO2zUpGZ2EXYZ56q6CaEoGaNmUhP3zjHwM7LPjdL9YQdtHoUc3g4jjlYPB
         VTCBB8lhwiX5X3XCJpluxRkSoRmXId3i7ioZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SYqLPb1F91C0dmaGOvBhayo5zhXNRluKDzuO3eMC9AXXVoOR8sd4REWrVPXxfDfMZi
         lEmqBRpP4vWU8WCFqelgYg2cjHnaie3wmvDhkzQ84mc3bJAwPvqQSWCugEyn7sal1mMp
         iV9mYwAWlsj93VZRqEOV9ldE3/Ba1mtXibYmM=
Received: by 10.91.203.34 with SMTP id f34mr7841871agq.132.1288559898296; Sun,
 31 Oct 2010 14:18:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.154.4 with HTTP; Sun, 31 Oct 2010 14:17:58 -0700 (PDT)
In-Reply-To: <AANLkTi=FRQh-OYKaK3LEHjLziBkq9A4SYnknt0Eev99i@mail.gmail.com>
References: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com>
 <AANLkTi=9Z2L4bWP_KW1GKF7HvcAchkn_hzK0GPZJrEUp@mail.gmail.com> <AANLkTi=FRQh-OYKaK3LEHjLziBkq9A4SYnknt0Eev99i@mail.gmail.com>
From: Paulo Levi <i30817@gmail.com>
Date: Sun, 31 Oct 2010 21:17:58 +0000
Message-ID: <AANLkTinmkW9tC0zc9F+aLk_Ht4Y7_rmwJt2iX5D1WHHB@mail.gmail.com>
Subject: Re: Indexing with foreign key
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636af010b0281880493f03b92

--001636af010b0281880493f03b92
Content-Type: text/plain; charset=ISO-8859-1

I meant -Xmx32m

On Sun, Oct 31, 2010 at 9:17 PM, Paulo Levi <i30817@gmail.com> wrote:

> Yes that's what i ended up doing. I will probably "fork" a new java vm
> instead of doing it in the same. That way i can control the memory
> requirements, though it hasn't given me any problems (actually it even
> worked with -Xmx, though it probably doesn't if i do something else in the
> program at the same time - i'm not indexing the book subjects yet too, need
> to do some sort of string caching for that and authors.)
>
>
> On Sun, Oct 31, 2010 at 8:47 PM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> Hmmmm. Are you too memory limited to do a first pass through the file and
>> save
>> the key/download links part in a map, then make another pass through the
>> file
>> indexing the data and grabbing the link from your map? I'm assuming that
>> there's a lot less than 200M in just the key/link part.
>>
>> Alternatively (and this would probably be kinda slow, but...) still do a 2
>> pass
>> process, but instead of making a map, put the data in a Lucene index on
>> disk.
>> Then the second pass searches that index for the data to add to the docs
>> in your "real" index.
>>
>> HTH
>> Erick
>>
>> On Sun, Oct 31, 2010 at 12:17 PM, Paulo Levi <i30817@gmail.com> wrote:
>>
>> > I'm stepping tru a rdf file (the project gutenberg catalog) and sending
>> > data
>> > to a lucene index to allow searches of titles authors and such. However
>> the
>> > gutenberg rdf is a little bit "special". It has two sections, one for
>> > title,
>> > authors, collaborators and such, and (after all the books) starts the
>> other
>> > section that has the download links. The connection is a kind of foreign
>> > key
>> > that exists on both tags (a unique number id). While i don't need to
>> search
>> > the download link, i do need to save it.
>> >
>> > I'm memory limited and can't put in memory the 200 mb file that the
>> catalog
>> > is. I'm wondering if there is some way for me to use the number id to
>> > connect both kinds of information without having to keep things in
>> memory.
>> > A
>> > first search for the things i want, and a second using the number id?
>> > It seems very clumsy. I'm not actually using a database, and i don't
>> want
>> > to
>> > use very large libraries. Compass is 60 mbs (!). I tried lucenesail for
>> a
>> > while, but it has stopped working and the code is a mess (it is not
>> adapted
>> > to the filtering of the gutemberg rdf that i'm doing).
>> >
>>
>
>

--001636af010b0281880493f03b92--

From java-user-return-47665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 31 23:16:48 2010
Return-Path: <java-user-return-47665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69945 invoked from network); 31 Oct 2010 23:16:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Oct 2010 23:16:47 -0000
Received: (qmail 44551 invoked by uid 500); 31 Oct 2010 23:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44477 invoked by uid 500); 31 Oct 2010 23:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44454 invoked by uid 99); 31 Oct 2010 23:17:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 23:17:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Oct 2010 23:17:07 +0000
Received: by vws5 with SMTP id 5so3302891vws.35
        for <java-user@lucene.apache.org>; Sun, 31 Oct 2010 16:16:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=UU4MWvq80RV2PFan/4jFbPMU8grNqRn1pNJeJL6dkGk=;
        b=mtTws6mHc870GX2Z1sSaummOo95KRN9BY7mxUgWZT7aVCKJihNPO5EqdBrX4Jy4YN1
         2fbgKE/+fdbzQallZeRRiCEC7dzGjcu7TNuU3+jKeYjHgF5JI3Drl1uRvK+BlOQmywSS
         1guyk2/KaQG5JulyncatWfUuzH5iwsadHDe6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=u+KG4oqEdtv+Kdj4M7Ee2ng2KG4hR/fB3Ytmbwn+Aft2PpXJbEnVgkwGpMFjce/NDY
         xRz/A7mLPwARQ3hUsTxUnMBhFIKOnIdRBlaHXk/x1eMIR7IieNhqJXMHbyxWi/GwL7nu
         6nWJJkyA9SsqnWj3wUC7UQgyz+X6tkTLopN80=
MIME-Version: 1.0
Received: by 10.229.189.207 with SMTP id df15mr14010582qcb.299.1288567005898;
 Sun, 31 Oct 2010 16:16:45 -0700 (PDT)
Received: by 10.229.229.14 with HTTP; Sun, 31 Oct 2010 16:16:45 -0700 (PDT)
In-Reply-To: <AANLkTinmkW9tC0zc9F+aLk_Ht4Y7_rmwJt2iX5D1WHHB@mail.gmail.com>
References: <AANLkTimNc=a_WU1oLg-p-SUunieoiF7QYy4BA7rqN1Qv@mail.gmail.com>
	<AANLkTi=9Z2L4bWP_KW1GKF7HvcAchkn_hzK0GPZJrEUp@mail.gmail.com>
	<AANLkTi=FRQh-OYKaK3LEHjLziBkq9A4SYnknt0Eev99i@mail.gmail.com>
	<AANLkTinmkW9tC0zc9F+aLk_Ht4Y7_rmwJt2iX5D1WHHB@mail.gmail.com>
Date: Sun, 31 Oct 2010 19:16:45 -0400
Message-ID: <AANLkTinG+Vd-CX-UfCQieCsFdcOV2UTjvBJxpRx4RhWC@mail.gmail.com>
Subject: Re: Indexing with foreign key
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7f40a7e9540493f1e2b5

--0016361e7f40a7e9540493f1e2b5
Content-Type: text/plain; charset=ISO-8859-1

32M is tiny. Is this a self-imposed memory constraint or do you really have
hardware that's that limited? I ask because "just give the VM more memory"
is the very first option I'd suggest......

Best
Erick

On Sun, Oct 31, 2010 at 5:17 PM, Paulo Levi <i30817@gmail.com> wrote:

> I meant -Xmx32m
>
> On Sun, Oct 31, 2010 at 9:17 PM, Paulo Levi <i30817@gmail.com> wrote:
>
> > Yes that's what i ended up doing. I will probably "fork" a new java vm
> > instead of doing it in the same. That way i can control the memory
> > requirements, though it hasn't given me any problems (actually it even
> > worked with -Xmx, though it probably doesn't if i do something else in
> the
> > program at the same time - i'm not indexing the book subjects yet too,
> need
> > to do some sort of string caching for that and authors.)
> >
> >
> > On Sun, Oct 31, 2010 at 8:47 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> Hmmmm. Are you too memory limited to do a first pass through the file
> and
> >> save
> >> the key/download links part in a map, then make another pass through the
> >> file
> >> indexing the data and grabbing the link from your map? I'm assuming that
> >> there's a lot less than 200M in just the key/link part.
> >>
> >> Alternatively (and this would probably be kinda slow, but...) still do a
> 2
> >> pass
> >> process, but instead of making a map, put the data in a Lucene index on
> >> disk.
> >> Then the second pass searches that index for the data to add to the docs
> >> in your "real" index.
> >>
> >> HTH
> >> Erick
> >>
> >> On Sun, Oct 31, 2010 at 12:17 PM, Paulo Levi <i30817@gmail.com> wrote:
> >>
> >> > I'm stepping tru a rdf file (the project gutenberg catalog) and
> sending
> >> > data
> >> > to a lucene index to allow searches of titles authors and such.
> However
> >> the
> >> > gutenberg rdf is a little bit "special". It has two sections, one for
> >> > title,
> >> > authors, collaborators and such, and (after all the books) starts the
> >> other
> >> > section that has the download links. The connection is a kind of
> foreign
> >> > key
> >> > that exists on both tags (a unique number id). While i don't need to
> >> search
> >> > the download link, i do need to save it.
> >> >
> >> > I'm memory limited and can't put in memory the 200 mb file that the
> >> catalog
> >> > is. I'm wondering if there is some way for me to use the number id to
> >> > connect both kinds of information without having to keep things in
> >> memory.
> >> > A
> >> > first search for the things i want, and a second using the number id?
> >> > It seems very clumsy. I'm not actually using a database, and i don't
> >> want
> >> > to
> >> > use very large libraries. Compass is 60 mbs (!). I tried lucenesail
> for
> >> a
> >> > while, but it has stopped working and the code is a mess (it is not
> >> adapted
> >> > to the filtering of the gutemberg rdf that i'm doing).
> >> >
> >>
> >
> >
>

--0016361e7f40a7e9540493f1e2b5--

